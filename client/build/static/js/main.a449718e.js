/*! For license information please see main.a449718e.js.LICENSE.txt */
!function(){var e={3108:function(e,t,n){"use strict";n.d(t,{$n:function(){return h},Fq:function(){return c},_4:function(){return u},_j:function(){return d},mi:function(){return s}});var r=n(7483);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function i(e){if(e.type)return e;if("#"===e.charAt(0))return i(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error((0,r.Z)(3,e));var a=e.substring(t+1,e.length-1).split(",");return{type:n,values:a=a.map((function(e){return parseFloat(e)}))}}function o(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function s(e,t){var n=l(e),r=l(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function l(e){var t="hsl"===(e=i(e)).type?i(function(e){var t=(e=i(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,s=r*Math.min(a,1-a),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-s*Math.max(Math.min(t-3,9-t,1),-1)},u="rgb",c=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(u+="a",c.push(t[3])),o({type:u,values:c})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return l(e)>.5?d(e,t):h(e,t)}function c(e,t){return e=i(e),t=a(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,o(e)}function d(e,t){if(e=i(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return o(e)}function h(e,t){if(e=i(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return o(e)}},7121:function(e,t,n){"use strict";n.d(t,{X:function(){return i},Z:function(){return o}});var r=n(7462),a=n(5987),i=["xs","sm","md","lg","xl"];function o(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,o=e.unit,s=void 0===o?"px":o,l=e.step,u=void 0===l?5:l,c=(0,a.Z)(e,["values","unit","step"]);function d(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(s,")")}function h(e,t){var r=i.indexOf(t);return r===i.length-1?d(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(s,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[i[r+1]]?n[i[r+1]]:t)-u/100).concat(s,")")}return(0,r.Z)({keys:i,values:n,up:d,down:function(e){var t=i.indexOf(e)+1,r=n[i[t]];return t===i.length?d("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-u/100).concat(s,")")},between:h,only:function(e){return h(e,e)},width:function(e){return n[e]}},c)}},5628:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}});var r=n(5987),a=n(1534),i=n(7121),o=n(4942),s=n(7462);function l(e,t,n){var r;return(0,s.Z)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),(0,s.Z)({paddingLeft:t(2),paddingRight:t(2)},n,(0,o.Z)({},e.up("sm"),(0,s.Z)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},(0,o.Z)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,o.Z)(r,e.up("sm"),{minHeight:64}),r)},n)}var u=n(7483),c={black:"#000",white:"#fff"},d={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},h={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},f={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},p={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},v={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},g={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},y=n(3108),b={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:c.white,default:d[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},x={text:{primary:c.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:d[800],default:"#303030"},action:{active:c.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function w(e,t,n,r){var a=r.light||r,i=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,y.$n)(e.main,a):"dark"===t&&(e.dark=(0,y._j)(e.main,i)))}function k(e){return Math.round(1e5*e)/1e5}function S(e){return k(e)}var T={textTransform:"uppercase"},E='"Roboto", "Helvetica", "Arial", sans-serif';function C(e,t){var n="function"===typeof t?t(e):t,i=n.fontFamily,o=void 0===i?E:i,l=n.fontSize,u=void 0===l?14:l,c=n.fontWeightLight,d=void 0===c?300:c,h=n.fontWeightRegular,f=void 0===h?400:h,p=n.fontWeightMedium,m=void 0===p?500:p,v=n.fontWeightBold,g=void 0===v?700:v,y=n.htmlFontSize,b=void 0===y?16:y,x=n.allVariants,w=n.pxToRem,C=(0,r.Z)(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var _=u/14,M=w||function(e){return"".concat(e/b*_,"rem")},A=function(e,t,n,r,a){return(0,s.Z)({fontFamily:o,fontWeight:e,fontSize:M(t),lineHeight:n},o===E?{letterSpacing:"".concat(k(r/t),"em")}:{},a,x)},I={h1:A(d,96,1.167,-1.5),h2:A(d,60,1.2,-.5),h3:A(f,48,1.167,0),h4:A(f,34,1.235,.25),h5:A(f,24,1.334,0),h6:A(m,20,1.6,.15),subtitle1:A(f,16,1.75,.15),subtitle2:A(m,14,1.57,.1),body1:A(f,16,1.5,.15),body2:A(f,14,1.43,.15),button:A(m,14,1.75,.4,T),caption:A(f,12,1.66,.4),overline:A(f,12,2.66,1,T)};return(0,a.Z)((0,s.Z)({htmlFontSize:b,pxToRem:M,round:S,fontFamily:o,fontSize:u,fontWeightLight:d,fontWeightRegular:f,fontWeightMedium:m,fontWeightBold:g},I),C,{clone:!1})}function _(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var M=["none",_(0,2,1,-1,0,1,1,0,0,1,3,0),_(0,3,1,-2,0,2,2,0,0,1,5,0),_(0,3,3,-2,0,3,4,0,0,1,8,0),_(0,2,4,-1,0,4,5,0,0,1,10,0),_(0,3,5,-1,0,5,8,0,0,1,14,0),_(0,3,5,-1,0,6,10,0,0,1,18,0),_(0,4,5,-2,0,7,10,1,0,2,16,1),_(0,5,5,-3,0,8,10,1,0,3,14,2),_(0,5,6,-3,0,9,12,1,0,3,16,2),_(0,6,6,-3,0,10,14,1,0,4,18,3),_(0,6,7,-4,0,11,15,1,0,4,20,3),_(0,7,8,-4,0,12,17,2,0,5,22,4),_(0,7,8,-4,0,13,19,2,0,5,24,4),_(0,7,9,-4,0,14,21,2,0,5,26,4),_(0,8,9,-5,0,15,22,2,0,6,28,5),_(0,8,10,-5,0,16,24,2,0,6,30,5),_(0,8,11,-5,0,17,26,2,0,6,32,5),_(0,9,11,-5,0,18,28,2,0,7,34,6),_(0,9,12,-6,0,19,29,2,0,7,36,6),_(0,10,13,-6,0,20,31,3,0,8,38,7),_(0,10,13,-6,0,21,33,3,0,8,40,7),_(0,10,14,-6,0,22,35,3,0,8,42,7),_(0,11,14,-7,0,23,36,3,0,9,44,8),_(0,11,15,-7,0,24,38,3,0,9,46,8)],A={borderRadius:4},I=n(9908);var N=n(812),R=n(9535);function O(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,o=e.mixins,k=void 0===o?{}:o,S=e.palette,T=void 0===S?{}:S,E=e.spacing,_=e.typography,O=void 0===_?{}:_,D=(0,r.Z)(e,["breakpoints","mixins","palette","spacing","typography"]),L=function(e){var t=e.primary,n=void 0===t?{light:h[300],main:h[500],dark:h[700]}:t,i=e.secondary,o=void 0===i?{light:f.A200,main:f.A400,dark:f.A700}:i,l=e.error,k=void 0===l?{light:p[300],main:p[500],dark:p[700]}:l,S=e.warning,T=void 0===S?{light:m[300],main:m[500],dark:m[700]}:S,E=e.info,C=void 0===E?{light:v[300],main:v[500],dark:v[700]}:E,_=e.success,M=void 0===_?{light:g[300],main:g[500],dark:g[700]}:_,A=e.type,I=void 0===A?"light":A,N=e.contrastThreshold,R=void 0===N?3:N,O=e.tonalOffset,D=void 0===O?.2:O,L=(0,r.Z)(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function P(e){return(0,y.mi)(e,x.text.primary)>=R?x.text.primary:b.text.primary}var F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=(0,s.Z)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error((0,u.Z)(4,t));if("string"!==typeof e.main)throw new Error((0,u.Z)(5,JSON.stringify(e.main)));return w(e,"light",n,D),w(e,"dark",r,D),e.contrastText||(e.contrastText=P(e.main)),e},j={dark:x,light:b};return(0,a.Z)((0,s.Z)({common:c,type:I,primary:F(n),secondary:F(o,"A400","A200","A700"),error:F(k),warning:F(T),info:F(C),success:F(M),grey:d,contrastThreshold:R,getContrastText:P,augmentColor:F,tonalOffset:D},j[I]),L)}(T),P=(0,i.Z)(n),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,I.h)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}(E),j=(0,a.Z)({breakpoints:P,direction:"ltr",mixins:l(P,F,k),overrides:{},palette:L,props:{},shadows:M,typography:C(L,O),spacing:F,shape:A,transitions:N.ZP,zIndex:R.Z},D),z=arguments.length,B=new Array(z>1?z-1:0),U=1;U<z;U++)B[U-1]=arguments[U];return j=B.reduce((function(e,t){return(0,a.Z)(e,t)}),j)}var D=O},663:function(e,t,n){"use strict";var r=(0,n(5628).Z)();t.Z=r},812:function(e,t,n){"use strict";n.d(t,{x9:function(){return i}});var r=n(5987),a={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},i={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function o(e){return"".concat(Math.round(e),"ms")}t.ZP={easing:a,duration:i,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,s=void 0===n?i.standard:n,l=t.easing,u=void 0===l?a.easeInOut:l,c=t.delay,d=void 0===c?0:c;(0,r.Z)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof s?s:o(s)," ").concat(u," ").concat("string"===typeof d?d:o(d))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}}},8317:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(7462),a=n(5987),i=n(2791),o=n(2110),s=n.n(o),l=n(3401),u=n(794),c=n(8444),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var o=t.defaultTheme,d=t.withTheme,h=void 0!==d&&d,f=t.name,p=(0,a.Z)(t,["defaultTheme","withTheme","name"]);var m=f,v=(0,l.Z)(e,(0,r.Z)({defaultTheme:o,Component:n,name:f||n.displayName,classNamePrefix:m},p)),g=i.forwardRef((function(e,t){e.classes;var s,l=e.innerRef,d=(0,a.Z)(e,["classes","innerRef"]),p=v((0,r.Z)({},n.defaultProps,e)),m=d;return("string"===typeof f||h)&&(s=(0,c.Z)()||o,f&&(m=(0,u.Z)({theme:s,name:f,props:d})),h&&!m.theme&&(m.theme=s)),i.createElement(n,(0,r.Z)({ref:l||t,classes:p},m))}));return s()(g,n),g}},h=n(663);var f=function(e,t){return d(e,(0,r.Z)({defaultTheme:h.Z},t))}},9535:function(e,t){"use strict";t.Z={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500}},1122:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7483);function a(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},7545:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),(function(){}))}n.d(t,{Z:function(){return r}})},8499:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(7462),a=n(2791),i=n(5987),o=n(8182),s=n(8317),l=n(1122),u=a.forwardRef((function(e,t){var n=e.children,s=e.classes,u=e.className,c=e.color,d=void 0===c?"inherit":c,h=e.component,f=void 0===h?"svg":h,p=e.fontSize,m=void 0===p?"medium":p,v=e.htmlColor,g=e.titleAccess,y=e.viewBox,b=void 0===y?"0 0 24 24":y,x=(0,i.Z)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return a.createElement(f,(0,r.Z)({className:(0,o.Z)(s.root,u,"inherit"!==d&&s["color".concat((0,l.Z)(d))],"default"!==m&&"medium"!==m&&s["fontSize".concat((0,l.Z)(m))]),focusable:"false",viewBox:b,color:v,"aria-hidden":!g||void 0,role:g?"img":void 0,ref:t},x),n,g?a.createElement("title",null,g):null)}));u.muiName="SvgIcon";var c=(0,s.Z)((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(u);function d(e,t){var n=function(t,n){return a.createElement(c,(0,r.Z)({ref:n},t),e)};return n.muiName=c.muiName,a.memo(a.forwardRef(n))}},503:function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=this;clearTimeout(t),t=setTimeout((function(){e.apply(o,a)}),n)}return r.clear=function(){clearTimeout(t)},r}n.d(t,{Z:function(){return r}})},7156:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return r.Z},createChainedFunction:function(){return a.Z},createSvgIcon:function(){return i.Z},debounce:function(){return o.Z},deprecatedPropType:function(){return s},isMuiElement:function(){return l.Z},ownerDocument:function(){return u.Z},ownerWindow:function(){return c.Z},requirePropFactory:function(){return d},setRef:function(){return h.Z},unstable_useId:function(){return g.Z},unsupportedProp:function(){return f},useControlled:function(){return p.Z},useEventCallback:function(){return m.Z},useForkRef:function(){return v.Z},useIsFocusVisible:function(){return y.Z}});var r=n(1122),a=n(7545),i=n(8499),o=n(503);function s(e,t){return function(){return null}}var l=n(3375),u=n(4667),c=n(7636);function d(e){return function(){return null}}var h=n(1565);function f(e,t,n,r,a){return null}var p=n(2497),m=n(2216),v=n(9806),g=n(2939),y=n(1175)},3375:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2791);function a(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},4667:function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:function(){return r}})},7636:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4667);function a(e){return(0,r.Z)(e).defaultView||window}},1565:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},2939:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2791);function a(e){var t=r.useState(e),n=t[0],a=t[1],i=e||n;return r.useEffect((function(){null==n&&a("mui-".concat(Math.round(1e5*Math.random())))}),[n]),i}},2497:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2791);function a(e){var t=e.controlled,n=e.default,a=(e.name,e.state,r.useRef(void 0!==t).current),i=r.useState(n),o=i[0],s=i[1];return[a?t:o,r.useCallback((function(e){a||s(e)}),[])]}},2216:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2791),a="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function i(e){var t=r.useRef(e);return a((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},9806:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2791),a=n(1565);function i(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){(0,a.Z)(e,n),(0,a.Z)(t,n)}}),[e,t])}},1175:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(2791),a=n(4164),i=!0,o=!1,s=null,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function u(e){e.metaKey||e.altKey||e.ctrlKey||(i=!0)}function c(){i=!1}function d(){"hidden"===this.visibilityState&&o&&(i=!0)}function h(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return i||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!l[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function f(){o=!0,window.clearTimeout(s),s=window.setTimeout((function(){o=!1}),100)}function p(){return{isFocusVisible:h,onBlurVisible:f,ref:r.useCallback((function(e){var t,n=a.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",u,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",d,!0))}),[])}}},6909:function(e,t){"use strict";t._Y=void 0;var n={props:{MuiBreadcrumbs:{expandText:"Mostrar ruta"},MuiTablePagination:{backIconButtonText:"P\xe1gina anterior",labelRowsPerPage:"Filas por p\xe1gina:",labelDisplayedRows:function(e){var t=e.from,n=e.to,r=e.count;return"".concat(t,"-").concat(n," de ").concat(-1!==r?r:"more than ".concat(n))},nextIconButtonText:"Siguiente p\xe1gina"},MuiRating:{getLabelText:function(e){return"".concat(e," Estrella").concat(1!==e?"s":"")},emptyLabelText:"Vac\xedo"},MuiAutocomplete:{clearText:"Limpiar",closeText:"Cerrar",loadingText:"Cargando\u2026",noOptionsText:"Sin opciones",openText:"Abierto"},MuiAlert:{closeText:"Cerrar"},MuiPagination:{"aria-label":"Paginador",getItemAriaLabel:function(e,t,n){return"page"===e?"".concat(n?"":"Ir a la ","p\xe1gina ").concat(t):"first"===e?"Ir a la primera p\xe1gina":"last"===e?"Ir a la \xfaltima p\xe1gina":"next"===e?"Ir a la p\xe1gina siguiente":"previous"===e?"Ir a la p\xe1gina anterior":void 0}}}};t._Y=n},8420:function(e,t,n){"use strict";var r=n(4836),a=n(5263);t.Z=void 0;var i=a(n(2791)),o=(0,r(n(4894)).default)(i.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.Z=o},3938:function(e,t,n){"use strict";var r=n(4836),a=n(5263);t.Z=void 0;var i=a(n(2791)),o=(0,r(n(4894)).default)(i.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked");t.Z=o},4894:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(7156)},9316:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for;t.Z=n?Symbol.for("mui.nested"):"__THEME_NESTED__"},794:function(e,t,n){"use strict";function r(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var a,i=t.props[n];for(a in i)void 0===r[a]&&(r[a]=i[a]);return r}n.d(t,{Z:function(){return r}})},3401:function(e,t,n){"use strict";n.d(t,{Z:function(){return un}});var r=n(5987),a=n(7462),i=n(2791),o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="object"===("undefined"===typeof window?"undefined":o(window))&&"object"===("undefined"===typeof document?"undefined":o(document))&&9===document.nodeType,l=n(3144),u=n(4578),c=n(7326),d=n(3366),h={}.constructor;function f(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(f);if(e.constructor!==h)return e;var t={};for(var n in e)t[n]=f(e[n]);return t}function p(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,a=f(t),i=r.plugins.onCreateRule(e,a,n);return i||(e[0],null)}var m=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},v=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=m(e[n]," ");else t=m(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function g(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function y(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function b(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var a=n.indent,i=void 0===a?0:a,o=t.fallbacks;!1===n.format&&(i=-1/0);var s=g(n),l=s.linebreak,u=s.space;if(e&&i++,o)if(Array.isArray(o))for(var c=0;c<o.length;c++){var d=o[c];for(var h in d){var f=d[h];null!=f&&(r&&(r+=l),r+=y(h+":"+u+v(f)+";",i))}}else for(var p in o){var m=o[p];null!=m&&(r&&(r+=l),r+=y(p+":"+u+v(m)+";",i))}for(var b in t){var x=t[b];null!=x&&"fallbacks"!==b&&(r&&(r+=l),r+=y(b+":"+u+v(x)+";",i))}return(r||n.allowEmpty)&&e?(r&&(r=""+l+r+l),y(""+e+u+"{"+r,--i)+y("}",i)):r}var x=/([[\].#*$><+~=|^:(),"'`\s])/g,w="undefined"!==typeof CSS&&CSS.escape,k=function(e){return w?w(e):e.replace(x,"\\$1")},S=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,a=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:a&&(this.renderer=new a)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var a=t;n&&!1===n.process||(a=this.options.jss.plugins.onChangeValue(t,e,this));var i=null==a||!1===a,o=e in this.style;if(i&&!o&&!r)return this;var s=i&&o;if(s?delete this.style[e]:this.style[e]=a,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,a),this;var l=this.options.sheet;return l&&l.attached,this},e}(),T=function(e){function t(t,n,r){var a;a=e.call(this,t,n,r)||this;var i=r.selector,o=r.scoped,s=r.sheet,l=r.generateId;return i?a.selectorText=i:!1!==o&&(a.id=l((0,c.Z)((0,c.Z)(a)),s),a.selectorText="."+k(a.id)),a}(0,u.Z)(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=v(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,a.Z)({},e,{allowEmpty:!0}):e;return b(this.selectorText,this.style,n)},(0,l.Z)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(S),E={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new T(e,t,n)}},C={indent:1,children:!0},_=/@([\w-]+)/,M=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(_);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new J((0,a.Z)({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=C);var t=g(e).linebreak;if(null==e.indent&&(e.indent=C.indent),null==e.children&&(e.children=C.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),A=/@container|@media|@supports\s+/,I={onCreateRule:function(e,t,n){return A.test(e)?new M(e,t,n):null}},N={indent:1,children:!0},R=/@keyframes\s+([\w-]+)/,O=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(R);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,o=n.sheet,s=n.generateId;for(var l in this.id=!1===i?this.name:k(s(this,o)),this.rules=new J((0,a.Z)({},n,{parent:this})),t)this.rules.add(l,t[l],(0,a.Z)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=N);var t=g(e).linebreak;if(null==e.indent&&(e.indent=N.indent),null==e.children&&(e.children=N.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),D=/@keyframes\s+/,L=/\$([\w-]+)/g,P=function(e,t){return"string"===typeof e?e.replace(L,(function(e,n){return n in t?t[n]:e})):e},F=function(e,t,n){var r=e[t],a=P(r,n);a!==r&&(e[t]=a)},j={onCreateRule:function(e,t,n){return"string"===typeof e&&D.test(e)?new O(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&F(e,"animation-name",n.keyframes),"animation"in e&&F(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return P(e,r.keyframes);default:return e}}},z=function(e){function t(){return e.apply(this,arguments)||this}return(0,u.Z)(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,a.Z)({},e,{allowEmpty:!0}):e;return b(this.key,this.style,n)},t}(S),B={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new z(e,t,n):null}},U=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=g(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=b(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return b(this.at,this.style,e)},e}(),W=/@font-face/,V={onCreateRule:function(e,t,n){return W.test(e)?new U(e,t,n):null}},Z=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return b(this.key,this.style,e)},e}(),H={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new Z(e,t,n):null}},G=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),q={"@charset":!0,"@import":!0,"@namespace":!0},X={onCreateRule:function(e,t,n){return e in q?new G(e,t,n):null}},Y=[E,I,j,B,V,H,X],K={process:!0},$={force:!0,process:!0},J=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,i=r.parent,o=r.sheet,s=r.jss,l=r.Renderer,u=r.generateId,c=r.scoped,d=(0,a.Z)({classes:this.classes,parent:i,sheet:o,jss:s,Renderer:l,generateId:u,scoped:c,name:e,keyframes:this.keyframes,selector:void 0},n),h=e;e in this.raw&&(h=e+"-d"+this.counter++),this.raw[h]=t,h in this.classes&&(d.selector="."+k(this.classes[h]));var f=p(h,t,d);if(!f)return null;this.register(f);var m=void 0===d.index?this.index.length:d.index;return this.index.splice(m,0,f),f},t.replace=function(e,t,n){var r=this.get(e),i=this.index.indexOf(r);r&&this.remove(r);var o=n;return-1!==i&&(o=(0,a.Z)({},n,{index:i})),this.add(e,t,o)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof T?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof O&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof T?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof O&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=K);var a=this.options,i=a.jss.plugins,o=a.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t.style;if(i.onUpdate(n,t,o,r),r.process&&s&&s!==t.style){for(var l in i.onProcessStyle(t.style,t,o),t.style){var u=t.style[l];u!==s[l]&&t.prop(l,u,$)}for(var c in s){var d=t.style[c],h=s[c];null==d&&d!==h&&t.prop(c,null,$)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,a=g(e).linebreak,i=0;i<this.index.length;i++){var o=this.index[i].toString(e);(o||r)&&(t&&(t+=a),t+=o)}return t},e}(),Q=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,a.Z)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new J(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var a=this.rules.add(e,t,n);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(r?r.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),a):a:(this.deployed=!1,a)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var a=this.rules.replace(e,t,n);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(this.renderer&&(a?r.renderable&&this.renderer.replaceRule(r.renderable,a):this.renderer.deleteRule(r)),a):a:(this.deployed=!1,a)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var a=this.addRule(r,e[r],t);a&&n.push(a)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),ee=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var a=this.registry.onCreateRule[r](e,t,n);if(a)return a}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,a=0;a<this.registry.onChangeValue.length;a++)r=this.registry.onChangeValue[a](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),te=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=(0,d.Z)(t,["attached"]),a=g(r).linebreak,i="",o=0;o<this.registry.length;o++){var s=this.registry[o];null!=n&&s.attached!==n||(i&&(i+=a),i+=s.toString(r))}return i},(0,l.Z)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),ne=new te,re="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),ae="2f1acc6c3a606b082e5eef5e54414ffb";null==re[ae]&&(re[ae]=0);var ie=re[ae]++,oe=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var a="",i="";return r&&(r.options.classNamePrefix&&(i=r.options.classNamePrefix),null!=r.options.jss.id&&(a=String(r.options.jss.id))),e.minify?""+(i||"c")+ie+a+t:i+n.key+"-"+ie+(a?"-"+a:"")+"-"+t}},se=function(e){var t;return function(){return t||(t=e()),t}},le=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},ue=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=v(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,r);else{var a=r?r.indexOf("!important"):-1,i=a>-1?r.substr(0,a-1):r;e.style.setProperty(t,i,a>-1?"important":"")}}catch(o){return!1}return!0},ce=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},de=function(e,t){return e.selectorText=t,e.selectorText===t},he=se((function(){return document.querySelector("head")}));function fe(e){var t=ne.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var a=function(e){for(var t=he(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(a)return{parent:a.parentNode,node:a.nextSibling}}return!1}var pe=se((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),me=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},ve=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},ge=function(){function e(e){this.getPropertyValue=le,this.setProperty=ue,this.removeProperty=ce,this.setSelector=de,this.hasInsertedRules=!1,this.cssRules=[],e&&ne.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,a=t.element;this.element=a||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var i=pe();i&&this.element.setAttribute("nonce",i)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=fe(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var a=n,i=a.parentNode;i&&i.insertBefore(e,a.nextSibling)}else he().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,a=n;if("conditional"===e.type||"keyframes"===e.type){var i=ve(n,t);if(!1===(a=me(n,r.toString({children:!1}),i)))return!1;this.refCssRule(e,i,a)}return this.insertRules(r.rules,a),a}var o=e.toString();if(!o)return!1;var s=ve(n,t),l=me(n,o,s);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(e,s,l),l)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof Q&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),ye=0,be=function(){function e(e){this.id=ye++,this.version="10.10.0",this.plugins=new ee,this.options={id:{minify:!1},createGenerateId:oe,Renderer:s?ge:null,plugins:[]},this.generateId=oe({minify:!1});for(var t=0;t<Y.length;t++)this.plugins.use(Y[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=(0,a.Z)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===ne.index?0:ne.index+1);var r=new Q(e,(0,a.Z)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),ne.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=(0,a.Z)({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=p(e,t,r);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),xe=function(e){return new be(e)},we="object"===typeof CSS&&null!=CSS&&"number"in CSS;function ke(e){var t=null;for(var n in e){var r=e[n],a=typeof r;if("function"===a)t||(t={}),t[n]=r;else if("object"===a&&null!==r&&!Array.isArray(r)){var i=ke(r);i&&(t||(t={}),t[n]=i)}}return t}xe();var Se=n(5352),Te={set:function(e,t,n,r){var a=e.get(t);a||(a=new Map,e.set(t,a)),a.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},Ee=Te,Ce=n(8444),_e=n(9316),Me=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var Ae=Date.now(),Ie="fnValues"+Ae,Ne="fnStyle"+ ++Ae,Re=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=p(e,{},n);return r[Ne]=t,r},onProcessStyle:function(e,t){if(Ie in t||Ne in t)return e;var n={};for(var r in e){var a=e[r];"function"===typeof a&&(delete e[r],n[r]=a)}return t[Ie]=n,e},onUpdate:function(e,t,n,r){var a=t,i=a[Ne];i&&(a.style=i(e)||{});var o=a[Ie];if(o)for(var s in o)a.prop(s,o[s](e),r)}}},Oe="@global",De="@global ",Le=function(){function e(e,t,n){for(var r in this.type="global",this.at=Oe,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new J((0,a.Z)({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),Pe=function(){function e(e,t,n){this.type="global",this.at=Oe,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr(8);this.rule=n.jss.createRule(r,t,(0,a.Z)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Fe=/\s*,\s*/g;function je(e,t){for(var n=e.split(Fe),r="",a=0;a<n.length;a++)r+=t+" "+n[a].trim(),n[a+1]&&(r+=", ");return r}var ze=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===Oe)return new Le(e,t,n);if("@"===e[0]&&e.substr(0,8)===De)return new Pe(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,i=r?r[Oe]:null;if(i){for(var o in i)t.addRule(o,i[o],(0,a.Z)({},n,{selector:je(o,e.selector)}));delete r[Oe]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var i in r)if("@"===i[0]&&i.substr(0,Oe.length)===Oe){var o=je(i.substr(Oe.length),e.selector);t.addRule(o,r[i],(0,a.Z)({},n,{selector:o})),delete r[i]}}(e,t))}}},Be=/\s*,\s*/g,Ue=/&/g,We=/\$([\w-]+)/g;var Ve=function(){function e(e,t){return function(n,r){var a=e.getRule(r)||t&&t.getRule(r);return a?a.selector:r}}function t(e,t){for(var n=t.split(Be),r=e.split(Be),a="",i=0;i<n.length;i++)for(var o=n[i],s=0;s<r.length;s++){var l=r[s];a&&(a+=", "),a+=-1!==l.indexOf("&")?l.replace(Ue,o):o+" "+l}return a}function n(e,t,n){if(n)return(0,a.Z)({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var i=(0,a.Z)({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(r,i,o){if("style"!==i.type)return r;var s,l,u=i,c=u.options.parent;for(var d in r){var h=-1!==d.indexOf("&"),f="@"===d[0];if(h||f){if(s=n(u,c,s),h){var p=t(d,u.selector);l||(l=e(c,o)),p=p.replace(We,l);var m=u.key+"-"+d;"replaceRule"in c?c.replaceRule(m,r[d],(0,a.Z)({},s,{selector:p})):c.addRule(m,r[d],(0,a.Z)({},s,{selector:p}))}else f&&c.addRule(d,{},s).addRule(u.key,r[d],{selector:u.selector});delete r[d]}}return r}}},Ze=/[A-Z]/g,He=/^ms-/,Ge={};function qe(e){return"-"+e.toLowerCase()}var Xe=function(e){if(Ge.hasOwnProperty(e))return Ge[e];var t=e.replace(Ze,qe);return Ge[e]=He.test(t)?"-"+t:t};function Ye(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Xe(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(Ye):t.fallbacks=Ye(e.fallbacks)),t}var Ke=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=Ye(e[t]);return e}return Ye(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=Xe(t);return t===r?e:(n.prop(r,e),null)}}},$e=we&&CSS?CSS.px:"px",Je=we&&CSS?CSS.ms:"ms",Qe=we&&CSS?CSS.percent:"%";function et(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var a in e)r[a]=e[a],r[a.replace(t,n)]=e[a];return r}var tt=et({"animation-delay":Je,"animation-duration":Je,"background-position":$e,"background-position-x":$e,"background-position-y":$e,"background-size":$e,border:$e,"border-bottom":$e,"border-bottom-left-radius":$e,"border-bottom-right-radius":$e,"border-bottom-width":$e,"border-left":$e,"border-left-width":$e,"border-radius":$e,"border-right":$e,"border-right-width":$e,"border-top":$e,"border-top-left-radius":$e,"border-top-right-radius":$e,"border-top-width":$e,"border-width":$e,"border-block":$e,"border-block-end":$e,"border-block-end-width":$e,"border-block-start":$e,"border-block-start-width":$e,"border-block-width":$e,"border-inline":$e,"border-inline-end":$e,"border-inline-end-width":$e,"border-inline-start":$e,"border-inline-start-width":$e,"border-inline-width":$e,"border-start-start-radius":$e,"border-start-end-radius":$e,"border-end-start-radius":$e,"border-end-end-radius":$e,margin:$e,"margin-bottom":$e,"margin-left":$e,"margin-right":$e,"margin-top":$e,"margin-block":$e,"margin-block-end":$e,"margin-block-start":$e,"margin-inline":$e,"margin-inline-end":$e,"margin-inline-start":$e,padding:$e,"padding-bottom":$e,"padding-left":$e,"padding-right":$e,"padding-top":$e,"padding-block":$e,"padding-block-end":$e,"padding-block-start":$e,"padding-inline":$e,"padding-inline-end":$e,"padding-inline-start":$e,"mask-position-x":$e,"mask-position-y":$e,"mask-size":$e,height:$e,width:$e,"min-height":$e,"max-height":$e,"min-width":$e,"max-width":$e,bottom:$e,left:$e,top:$e,right:$e,inset:$e,"inset-block":$e,"inset-block-end":$e,"inset-block-start":$e,"inset-inline":$e,"inset-inline-end":$e,"inset-inline-start":$e,"box-shadow":$e,"text-shadow":$e,"column-gap":$e,"column-rule":$e,"column-rule-width":$e,"column-width":$e,"font-size":$e,"font-size-delta":$e,"letter-spacing":$e,"text-decoration-thickness":$e,"text-indent":$e,"text-stroke":$e,"text-stroke-width":$e,"word-spacing":$e,motion:$e,"motion-offset":$e,outline:$e,"outline-offset":$e,"outline-width":$e,perspective:$e,"perspective-origin-x":Qe,"perspective-origin-y":Qe,"transform-origin":Qe,"transform-origin-x":Qe,"transform-origin-y":Qe,"transform-origin-z":Qe,"transition-delay":Je,"transition-duration":Je,"vertical-align":$e,"flex-basis":$e,"shape-margin":$e,size:$e,gap:$e,grid:$e,"grid-gap":$e,"row-gap":$e,"grid-row-gap":$e,"grid-column-gap":$e,"grid-template-rows":$e,"grid-template-columns":$e,"grid-auto-rows":$e,"grid-auto-columns":$e,"box-shadow-x":$e,"box-shadow-y":$e,"box-shadow-blur":$e,"box-shadow-spread":$e,"font-line-height":$e,"text-shadow-x":$e,"text-shadow-y":$e,"text-shadow-blur":$e});function nt(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=nt(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var a in t)t[a]=nt(a,t[a],n);else for(var i in t)t[i]=nt(e+"-"+i,t[i],n);else if("number"===typeof t&&!1===isNaN(t)){var o=n[e]||tt[e];return!o||0===t&&o===$e?t.toString():"function"===typeof o?o(t).toString():""+t+o}return t}var rt=function(e){void 0===e&&(e={});var t=et(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=nt(r,e[r],t);return e},onChangeValue:function(e,n){return nt(n,e,t)}}},at=n(3433),it="",ot="",st="",lt="",ut=s&&"ontouchstart"in document.documentElement;if(s){var ct={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},dt=document.createElement("p").style;for(var ht in ct)if(ht+"Transform"in dt){it=ht,ot=ct[ht];break}"Webkit"===it&&"msHyphens"in dt&&(it="ms",ot=ct.ms,lt="edge"),"Webkit"===it&&"-apple-trailing-word"in dt&&(st="apple")}var ft={js:it,css:ot,vendor:st,browser:lt,isTouch:ut};var pt={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===ft.js?"-webkit-"+e:ft.css+e)}},mt={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===ft.js?ft.css+"print-"+e:e)}},vt=/[-\s]+(.)?/g;function gt(e,t){return t?t.toUpperCase():""}function yt(e){return e.replace(vt,gt)}function bt(e){return yt("-"+e)}var xt,wt={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===ft.js){var n="mask-image";if(yt(n)in t)return e;if(ft.js+bt(n)in t)return ft.css+e}return e}},kt={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==ft.vendor||ft.isTouch?e:ft.css+e)}},St={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:ft.css+e)}},Tt={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:ft.css+e)}},Et={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===ft.js||"ms"===ft.js&&"edge"!==ft.browser?ft.css+e:e)}},Ct={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===ft.js||"ms"===ft.js||"apple"===ft.vendor?ft.css+e:e)}},_t={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===ft.js?"WebkitColumn"+bt(e)in t&&ft.css+"column-"+e:"Moz"===ft.js&&("page"+bt(e)in t&&"page-"+e))}},Mt={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===ft.js)return e;var n=e.replace("-inline","");return ft.js+bt(n)in t&&ft.css+n}},At={supportedProperty:function(e,t){return yt(e)in t&&e}},It={supportedProperty:function(e,t){var n=bt(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:ft.js+n in t?ft.css+e:"Webkit"!==ft.js&&"Webkit"+n in t&&"-webkit-"+e}},Nt={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===ft.js?""+ft.css+e:e)}},Rt={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===ft.js?ft.css+"scroll-chaining":e)}},Ot={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Dt={supportedProperty:function(e,t){var n=Ot[e];return!!n&&(ft.js+bt(n)in t&&ft.css+n)}},Lt={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Pt=Object.keys(Lt),Ft=function(e){return ft.css+e},jt={supportedProperty:function(e,t,n){var r=n.multiple;if(Pt.indexOf(e)>-1){var a=Lt[e];if(!Array.isArray(a))return ft.js+bt(a)in t&&ft.css+a;if(!r)return!1;for(var i=0;i<a.length;i++)if(!(ft.js+bt(a[0])in t))return!1;return a.map(Ft)}return!1}},zt=[pt,mt,wt,kt,St,Tt,Et,Ct,_t,Mt,At,It,Nt,Rt,Dt,jt],Bt=zt.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Ut=zt.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,(0,at.Z)(t.noPrefill)),e}),[]),Wt={};if(s){xt=document.createElement("p");var Vt=window.getComputedStyle(document.documentElement,"");for(var Zt in Vt)isNaN(Zt)||(Wt[Vt[Zt]]=Vt[Zt]);Ut.forEach((function(e){return delete Wt[e]}))}function Ht(e,t){if(void 0===t&&(t={}),!xt)return e;if(null!=Wt[e])return Wt[e];"transition"!==e&&"transform"!==e||(t[e]=e in xt.style);for(var n=0;n<Bt.length&&(Wt[e]=Bt[n](e,xt.style,t),!Wt[e]);n++);try{xt.style[e]=""}catch(r){return!1}return Wt[e]}var Gt,qt={},Xt={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Yt=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Kt(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?Ht(t):", "+Ht(n);return r||(t||n)}function $t(e,t){var n=t;if(!Gt||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=qt[r])return qt[r];try{Gt.style[e]=n}catch(a){return qt[r]=!1,!1}if(Xt[e])n=n.replace(Yt,Kt);else if(""===Gt.style[e]&&("-ms-flex"===(n=ft.css+n)&&(Gt.style[e]="-ms-flexbox"),Gt.style[e]=n,""===Gt.style[e]))return qt[r]=!1,!1;return Gt.style[e]="",qt[r]=n,qt[r]}s&&(Gt=document.createElement("p"));var Jt=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var a=!1,i=Ht(n);i&&i!==n&&(a=!0);var o=!1,s=$t(i,v(r));s&&s!==r&&(o=!0),(a||o)&&(a&&delete t[n],t[i||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===ft.js?e:"@"+ft.css+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return $t(t,v(e))||e}}};var Qt=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},a=Object.keys(t).sort(e),i=0;i<a.length;i++)r[a[i]]=t[a[i]];return r}}};var en=xe({plugins:[Re(),ze(),Ve(),Ke(),rt(),"undefined"===typeof window?null:Jt(),Qt()]}),tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,a=void 0===r?"jss":r,i=e.seed,o=void 0===i?"":i,s=""===o?"":"".concat(o,"-"),l=0,u=function(){return l+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==Me.indexOf(e.key))return"Mui-".concat(e.key);var i="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[_e.Z]&&""===o?"".concat(i,"-").concat(u()):i}return"".concat(s).concat(a).concat(u())}}(),nn={disableGeneration:!1,generateClassName:tn,jss:en,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},rn=i.createContext(nn);var an=-1e9;var on=n(1534);var sn={};function ln(e,t){var n=e.state,r=e.theme,i=e.stylesOptions,o=e.stylesCreator,s=e.name;if(!i.disableGeneration){var l=Ee.get(i.sheetsManager,o,r);l||(l={refs:0,staticSheet:null,dynamicStyles:null},Ee.set(i.sheetsManager,o,r,l));var u=(0,a.Z)({},o.options,i,{theme:r,flip:"boolean"===typeof i.flip?i.flip:"rtl"===r.direction});u.generateId=u.serverGenerateClassName||u.generateClassName;var c=i.sheetsRegistry;if(0===l.refs){var d;i.sheetsCache&&(d=Ee.get(i.sheetsCache,o,r));var h=o.create(r,s);d||((d=i.jss.createStyleSheet(h,(0,a.Z)({link:!1},u))).attach(),i.sheetsCache&&Ee.set(i.sheetsCache,o,r,d)),c&&c.add(d),l.staticSheet=d,l.dynamicStyles=ke(h)}if(l.dynamicStyles){var f=i.jss.createStyleSheet(l.dynamicStyles,(0,a.Z)({link:!0},u));f.update(t),f.attach(),n.dynamicSheet=f,n.classes=(0,Se.Z)({baseClasses:l.staticSheet.classes,newClasses:f.classes}),c&&c.add(f)}else n.classes=l.staticSheet.classes;l.refs+=1}}function un(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,o=t.classNamePrefix,s=t.Component,l=t.defaultTheme,u=void 0===l?sn:l,c=(0,r.Z)(t,["name","classNamePrefix","Component","defaultTheme"]),d=function(e){var t="function"===typeof e;return{create:function(n,r){var i;try{i=t?e(n):e}catch(l){throw l}if(!r||!n.overrides||!n.overrides[r])return i;var o=n.overrides[r],s=(0,a.Z)({},i);return Object.keys(o).forEach((function(e){s[e]=(0,on.Z)(s[e],o[e])})),s},options:{}}}(e),h=n||o||"makeStyles";d.options={index:an+=1,name:n,meta:h,classNamePrefix:h};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,Ce.Z)()||u,r=(0,a.Z)({},i.useContext(rn),c),o=i.useRef(),l=i.useRef();!function(e,t){var n,r=i.useRef([]),a=i.useMemo((function(){return{}}),t);r.current!==a&&(r.current=a,n=e()),i.useEffect((function(){return function(){n&&n()}}),[a])}((function(){var a={name:n,state:{},stylesCreator:d,stylesOptions:r,theme:t};return ln(a,e),l.current=!1,o.current=a,function(){!function(e){var t=e.state,n=e.theme,r=e.stylesOptions,a=e.stylesCreator;if(!r.disableGeneration){var i=Ee.get(r.sheetsManager,a,n);i.refs-=1;var o=r.sheetsRegistry;0===i.refs&&(Ee.delete(r.sheetsManager,a,n),r.jss.removeStyleSheet(i.staticSheet),o&&o.remove(i.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}(a)}}),[t,d]),i.useEffect((function(){l.current&&function(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}(o.current,e),l.current=!0}));var h=function(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var a=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,a=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,a=!0),a&&(r.cacheClasses.value=(0,Se.Z)({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}(o.current,e.classes,s);return h}}},5352:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7462);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var a=(0,r.Z)({},t);return Object.keys(n).forEach((function(e){n[e]&&(a[e]="".concat(t[e]," ").concat(n[e]))})),a}},423:function(e,t,n){"use strict";var r=n(2791).createContext(null);t.Z=r},8444:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2791),a=n(423);function i(){return r.useContext(a.Z)}},6086:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(1002),a={xs:0,sm:600,md:960,lg:1280,xl:1920},i={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(a[e],"px)")}};function o(e,t,n){if(Array.isArray(t)){var a=e.theme.breakpoints||i;return t.reduce((function(e,r,i){return e[a.up(a.keys[i])]=n(t[i]),e}),{})}if("object"===(0,r.Z)(t)){var o=e.theme.breakpoints||i;return Object.keys(t).reduce((function(e,r){return e[o.up(r)]=n(t[r]),e}),{})}return n(t)}},7351:function(e,t,n){"use strict";var r=n(1534);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},9908:function(e,t,n){"use strict";n.d(t,{h:function(){return d},Z:function(){return p}});var r=n(9439),a=n(6086),i=n(7351);var o={m:"margin",p:"padding"},s={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},u=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!l[e])return[e];e=l[e]}var t=e.split(""),n=(0,r.Z)(t,2),a=n[0],i=n[1],u=o[a],c=s[i]||"";return Array.isArray(c)?c.map((function(e){return u+e})):[u+c]})),c=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function d(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function h(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function f(e){var t=d(e.theme);return Object.keys(e).map((function(n){if(-1===c.indexOf(n))return null;var r=h(u(n),t),i=e[n];return(0,a.k)(e,i,r)})).reduce(i.Z,{})}f.propTypes={},f.filterProps=c;var p=f},1534:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7462),a=n(1002);function i(e){return e&&"object"===(0,a.Z)(e)&&e.constructor===Object}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},a=n.clone?(0,r.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(i(t[r])&&r in e?a[r]=o(e[r],t[r],n):a[r]=t[r])})),a}},7483:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},3529:function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}t.Q=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<r.length;a++)if((n=r[a])===t||n.fn===t){r.splice(a,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var a=(n=n.slice(0)).length;r<a;++r)n[r].apply(this,t)}return this},n.prototype.emitReserved=n.prototype.emit,n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},4569:function(e,t,n){e.exports=n(8036)},3381:function(e,t,n){"use strict";var r=n(3589),a=n(7297),i=n(9301),o=n(9774),s=n(1804),l=n(9145),u=n(5411),c=n(6467);e.exports=function(e){return new Promise((function(t,n){var d=e.data,h=e.headers;r.isFormData(d)&&delete h["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(p+":"+m)}var v=s(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),o(v,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in f?l(f.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f};a(t,n,i),f=null}},f.onabort=function(){f&&(n(c("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){n(c("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(c(t,e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var g=(e.withCredentials||u(v))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;g&&(h[e.xsrfHeaderName]=g)}if("setRequestHeader"in f&&r.forEach(h,(function(e,t){"undefined"===typeof d&&"content-type"===t.toLowerCase()?delete h[t]:f.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(y){if("json"!==e.responseType)throw y}"function"===typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),n(e),f=null)})),d||(d=null),f.send(d)}))}},8036:function(e,t,n){"use strict";var r=n(3589),a=n(4049),i=n(3773),o=n(777);function s(e){var t=new i(e),n=a(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var l=s(n(221));l.Axios=i,l.create=function(e){return s(o(l.defaults,e))},l.Cancel=n(9346),l.CancelToken=n(6857),l.isCancel=n(5517),l.all=function(e){return Promise.all(e)},l.spread=n(8089),l.isAxiosError=n(9580),e.exports=l,e.exports.default=l},9346:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},6857:function(e,t,n){"use strict";var r=n(9346);function a(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},5517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:function(e,t,n){"use strict";var r=n(3589),a=n(9774),i=n(7470),o=n(2733),s=n(777);function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[o,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},l.prototype.getUri=function(e){return e=s(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},7470:function(e,t,n){"use strict";var r=n(3589);function a(){this.handlers=[]}a.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},1804:function(e,t,n){"use strict";var r=n(4044),a=n(9549);e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},6467:function(e,t,n){"use strict";var r=n(6460);e.exports=function(e,t,n,a,i){var o=new Error(e);return r(o,t,n,a,i)}},2733:function(e,t,n){"use strict";var r=n(3589),a=n(2693),i=n(5517),o=n(221);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return s(e),t.data=a(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},6460:function(e){"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},777:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||{};var n={},a=["url","method","data"],i=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function l(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(a){r.isUndefined(t[a])?r.isUndefined(e[a])||(n[a]=l(void 0,e[a])):n[a]=l(e[a],t[a])}r.forEach(a,(function(e){r.isUndefined(t[e])||(n[e]=l(void 0,t[e]))})),r.forEach(i,u),r.forEach(o,(function(a){r.isUndefined(t[a])?r.isUndefined(e[a])||(n[a]=l(void 0,e[a])):n[a]=l(void 0,t[a])})),r.forEach(s,(function(r){r in t?n[r]=l(e[r],t[r]):r in e&&(n[r]=l(void 0,e[r]))}));var c=a.concat(i).concat(o).concat(s),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return r.forEach(d,u),n}},7297:function(e,t,n){"use strict";var r=n(6467);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},2693:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},221:function(e,t,n){"use strict";var r=n(3589),a=n(4341),i={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s={adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){s.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){s.headers[e]=r.merge(i)})),e.exports=s},4049:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},9774:function(e,t,n){"use strict";var r=n(3589);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(a(t)+"="+a(e))})))})),i=o.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},9549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(a)&&s.push("path="+a),r.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},9580:function(e){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},5411:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},9145:function(e,t,n){"use strict";var r=n(3589),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(o[t]&&a.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},8089:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},3589:function(e,t,n){"use strict";var r=n(4049),a=Object.prototype.toString;function i(e){return"[object Array]"===a.call(e)}function o(e){return"undefined"===typeof e}function s(e){return null!==e&&"object"===typeof e}function l(e){if("[object Object]"!==a.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===a.call(e)}function c(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:s,isPlainObject:l,isUndefined:o,isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:c,merge:function e(){var t={};function n(n,r){l(t[r])&&l(n)?t[r]=e(t[r],n):l(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,a=arguments.length;r<a;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,(function(t,a){e[a]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},8077:function(e){function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},8182:function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}t.Z=function(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}},5827:function(e){e.exports=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}var s={exports:{}};!function(e){"undefined"!==typeof window&&function(t){var n=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,r=t.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),a=r&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),i=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,o=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,s=(r||i)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(e){var t,n,s,l,u,c,d,h,f;if(!(t=e.match(o)))throw new Error("invalid data URI");for(n=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),s=!!t[4],l=e.slice(t[0].length),u=s?atob(l):decodeURIComponent(l),c=new ArrayBuffer(u.length),d=new Uint8Array(c),h=0;h<u.length;h+=1)d[h]=u.charCodeAt(h);return r?new Blob([a?d:c],{type:n}):((f=new i).append(c),f.getBlob(n))};t.HTMLCanvasElement&&!n.toBlob&&(n.mozGetAsFile?n.toBlob=function(e,t,r){var a=this;setTimeout((function(){r&&n.toDataURL&&s?e(s(a.toDataURL(t,r))):e(a.mozGetAsFile("blob",t))}))}:n.toDataURL&&s&&(n.msToBlob?n.toBlob=function(e,t,r){var a=this;setTimeout((function(){(t&&"image/png"!==t||r)&&n.toDataURL&&s?e(s(a.toDataURL(t,r))):e(a.msToBlob(t))}))}:n.toBlob=function(e,t,n){var r=this;setTimeout((function(){e(s(r.toDataURL(t,n)))}))})),e.exports?e.exports=s:t.dataURLtoBlob=s}(window)}(s);var l=s.exports,u=function(e){return"undefined"!==typeof Blob&&(e instanceof Blob||"[object Blob]"===Object.prototype.toString.call(e))},c={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},d="undefined"!==typeof window&&"undefined"!==typeof window.document?window:{},h=function(e){return e>0&&e<1/0},f=Array.prototype.slice;function p(e){return Array.from?Array.from(e):f.call(e)}var m=/^image\/.+$/;function v(e){return m.test(e)}function g(e){var t=v(e)?e.substr(6):"";return"jpeg"===t&&(t="jpg"),".".concat(t)}var y=String.fromCharCode;function b(e,t,n){var r,a="";for(n+=t,r=t;r<n;r+=1)a+=y(e.getUint8(r));return a}var x=d.btoa;function w(e,t){for(var n=[],r=8192,a=new Uint8Array(e);a.length>0;)n.push(y.apply(null,p(a.subarray(0,r)))),a=a.subarray(r);return"data:".concat(t,";base64,").concat(x(n.join("")))}function k(e){var t,n=new DataView(e);try{var r,a,i;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var o=n.byteLength,s=2;s+1<o;){if(255===n.getUint8(s)&&225===n.getUint8(s+1)){a=s;break}s+=1}if(a){var l=a+10;if("Exif"===b(n,a+4,4)){var u=n.getUint16(l);if(((r=18761===u)||19789===u)&&42===n.getUint16(l+2,r)){var c=n.getUint32(l+4,r);c>=8&&(i=l+c)}}}if(i){var d,h,f=n.getUint16(i,r);for(h=0;h<f;h+=1)if(d=i+12*h+2,274===n.getUint16(d,r)){d+=8,t=n.getUint16(d,r),n.setUint16(d,1,r);break}}}catch(p){t=1}return t}function S(e){var t=0,n=1,r=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}return{rotate:t,scaleX:n,scaleY:r}}var T=/\.\d*(?:0|9){12}\d*$/;function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return T.test(e)?Math.round(e*t)/t:e}function C(e){var t=e.aspectRatio,n=e.height,r=e.width,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",i=h(r),o=h(n);if(i&&o){var s=n*t;("contain"===a||"none"===a)&&s>r||"cover"===a&&s<r?n=r/t:r=n*t}else i?n=r/t:o&&(r=n*t);return{width:r,height:n}}var _=d.ArrayBuffer,M=d.FileReader,A=d.URL||d.webkitURL,I=/\.\w+$/,N=d.Compressor;return function(){function e(r,a){n(this,e),this.file=r,this.image=new Image,this.options=t(t({},c),a),this.aborted=!1,this.result=null,this.init()}return a(e,[{key:"init",value:function(){var e=this,t=this.file,n=this.options;if(u(t)){var r=t.type;if(v(r))if(A&&M)if(_||(n.checkOrientation=!1),A&&!n.checkOrientation)this.load({url:A.createObjectURL(t)});else{var a=new M,i=n.checkOrientation&&"image/jpeg"===r;this.reader=a,a.onload=function(n){var a=n.target.result,s={};if(i){var l=k(a);l>1||!A?(s.url=w(a,r),l>1&&o(s,S(l))):s.url=A.createObjectURL(t)}else s.url=a;e.load(s)},a.onabort=function(){e.fail(new Error("Aborted to read the image with FileReader."))},a.onerror=function(){e.fail(new Error("Failed to read the image with FileReader."))},a.onloadend=function(){e.reader=null},i?a.readAsArrayBuffer(t):a.readAsDataURL(t)}else this.fail(new Error("The current browser does not support image compression."));else this.fail(new Error("The first argument must be an image File or Blob object."))}else this.fail(new Error("The first argument must be a File or Blob object."))}},{key:"load",value:function(e){var n=this,r=this.file,a=this.image;a.onload=function(){n.draw(t(t({},e),{},{naturalWidth:a.naturalWidth,naturalHeight:a.naturalHeight}))},a.onabort=function(){n.fail(new Error("Aborted to load the image."))},a.onerror=function(){n.fail(new Error("Failed to load the image."))},d.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(d.navigator.userAgent)&&(a.crossOrigin="anonymous"),a.alt=r.name,a.src=e.url}},{key:"draw",value:function(e){var t=this,n=e.naturalWidth,r=e.naturalHeight,a=e.rotate,i=void 0===a?0:a,o=e.scaleX,s=void 0===o?1:o,u=e.scaleY,c=void 0===u?1:u,d=this.file,f=this.image,p=this.options,m=document.createElement("canvas"),g=m.getContext("2d"),y=Math.abs(i)%180===90,b=("contain"===p.resize||"cover"===p.resize)&&h(p.width)&&h(p.height),x=Math.max(p.maxWidth,0)||1/0,w=Math.max(p.maxHeight,0)||1/0,k=Math.max(p.minWidth,0)||0,S=Math.max(p.minHeight,0)||0,T=n/r,_=p.width,M=p.height;if(y){var A=[w,x];x=A[0],w=A[1];var I=[S,k];k=I[0],S=I[1];var N=[M,_];_=N[0],M=N[1]}b&&(T=_/M);var R=C({aspectRatio:T,width:x,height:w},"contain");x=R.width,w=R.height;var O=C({aspectRatio:T,width:k,height:S},"cover");if(k=O.width,S=O.height,b){var D=C({aspectRatio:T,width:_,height:M},p.resize);_=D.width,M=D.height}else{var L=C({aspectRatio:T,width:_,height:M}),P=L.width;_=void 0===P?n:P;var F=L.height;M=void 0===F?r:F}var j=-(_=Math.floor(E(Math.min(Math.max(_,k),x))))/2,z=-(M=Math.floor(E(Math.min(Math.max(M,S),w))))/2,B=_,U=M,W=[];if(b){var V=0,Z=0,H=n,G=r,q=C({aspectRatio:T,width:n,height:r},{contain:"cover",cover:"contain"}[p.resize]);H=q.width,G=q.height,V=(n-H)/2,Z=(r-G)/2,W.push(V,Z,H,G)}if(W.push(j,z,B,U),y){var X=[M,_];_=X[0],M=X[1]}m.width=_,m.height=M,v(p.mimeType)||(p.mimeType=d.type);var Y="transparent";if(d.size>p.convertSize&&p.convertTypes.indexOf(p.mimeType)>=0&&(p.mimeType="image/jpeg"),"image/jpeg"===p.mimeType&&(Y="#fff"),g.fillStyle=Y,g.fillRect(0,0,_,M),p.beforeDraw&&p.beforeDraw.call(this,g,m),!this.aborted&&(g.save(),g.translate(_/2,M/2),g.rotate(i*Math.PI/180),g.scale(s,c),g.drawImage.apply(g,[f].concat(W)),g.restore(),p.drew&&p.drew.call(this,g,m),!this.aborted)){var K=function(e){t.aborted||t.done({naturalWidth:n,naturalHeight:r,result:e})};m.toBlob?m.toBlob(K,p.mimeType,p.quality):K(l(m.toDataURL(p.mimeType,p.quality)))}}},{key:"done",value:function(e){var t=e.naturalWidth,n=e.naturalHeight,r=e.result,a=this.file,i=this.image,o=this.options;if(A&&!o.checkOrientation&&A.revokeObjectURL(i.src),r)if(o.strict&&r.size>a.size&&o.mimeType===a.type&&!(o.width>t||o.height>n||o.minWidth>t||o.minHeight>n||o.maxWidth<t||o.maxHeight<n))r=a;else{var s=new Date;r.lastModified=s.getTime(),r.lastModifiedDate=s,r.name=a.name,r.name&&r.type!==a.type&&(r.name=r.name.replace(I,g(r.type)))}else r=a;this.result=r,o.success&&o.success.call(this,r)}},{key:"fail",value:function(e){var t=this.options;if(!t.error)throw e;t.error.call(this,e)}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=N,e}},{key:"setDefaults",value:function(e){o(c,e)}}]),e}()}()},6421:function(e){try{e.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},2110:function(e,t,n){"use strict";var r=n(8309),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?o:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=f(n);a&&a!==p&&e(t,a,r)}var o=c(n);d&&(o=o.concat(d(n)));for(var s=l(t),m=l(n),v=0;v<o.length;++v){var g=o[v];if(!i[g]&&(!r||!r[g])&&(!m||!m[g])&&(!s||!s[g])){var y=h(n,g);try{u(t,g,y)}catch(b){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case i:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case u:case h:case v:case m:case l:return e;default:return t}}case a:return t}}}function k(e){return w(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=i,t.Lazy=v,t.Memo=m,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return k(e)||w(e)===c},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===u},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===v},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===d||e===s||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===g)},t.typeOf=w},8309:function(e,t,n){"use strict";e.exports=n(746)},9498:function(e,t,n){var r="__lodash_hash_undefined__",a="[object Function]",i="[object GeneratorFunction]",o=/^\[object .+?Constructor\]$/,s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,u=s||l||Function("return this")();var c=Array.prototype,d=Function.prototype,h=Object.prototype,f=u["__core-js_shared__"],p=function(){var e=/[^.]+$/.exec(f&&f.keys&&f.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),m=d.toString,v=h.hasOwnProperty,g=h.toString,y=RegExp("^"+m.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),b=c.splice,x=M(u,"Map"),w=M(Object,"create");function k(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function S(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function E(e,t){for(var n,r,a=e.length;a--;)if((n=e[a][0])===(r=t)||n!==n&&r!==r)return a;return-1}function C(e){if(!I(e)||(t=e,p&&p in t))return!1;var t,n=function(e){var t=I(e)?g.call(e):"";return t==a||t==i}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e)?y:o;return n.test(function(e){if(null!=e){try{return m.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function _(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function M(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return C(n)?n:void 0}function A(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o),o};return n.cache=new(A.Cache||T),n}function I(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}k.prototype.clear=function(){this.__data__=w?w(null):{}},k.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},k.prototype.get=function(e){var t=this.__data__;if(w){var n=t[e];return n===r?void 0:n}return v.call(t,e)?t[e]:void 0},k.prototype.has=function(e){var t=this.__data__;return w?void 0!==t[e]:v.call(t,e)},k.prototype.set=function(e,t){return this.__data__[e]=w&&void 0===t?r:t,this},S.prototype.clear=function(){this.__data__=[]},S.prototype.delete=function(e){var t=this.__data__,n=E(t,e);return!(n<0)&&(n==t.length-1?t.pop():b.call(t,n,1),!0)},S.prototype.get=function(e){var t=this.__data__,n=E(t,e);return n<0?void 0:t[n][1]},S.prototype.has=function(e){return E(this.__data__,e)>-1},S.prototype.set=function(e,t){var n=this.__data__,r=E(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},T.prototype.clear=function(){this.__data__={hash:new k,map:new(x||S),string:new k}},T.prototype.delete=function(e){return _(this,e).delete(e)},T.prototype.get=function(e){return _(this,e).get(e)},T.prototype.has=function(e){return _(this,e).has(e)},T.prototype.set=function(e,t){return _(this,e).set(e,t),this},A.Cache=T,e.exports=A},8987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(E){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=l(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=l(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?g:v;if(t){if(e<0)return g;if(e>=f)return k}else{if(e<=-p)return S;if(e+1>=p)return w}return e<0?s(-e,t).neg():l(e%h|0,e/h|0,t)}function l(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=l;var u=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return v;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var a=s(u(n,8)),i=v,o=0;o<e.length;o+=8){var l=Math.min(8,e.length-o),d=parseInt(e.substring(o,o+l),n);if(l<8){var h=s(u(n,l));i=i.mul(h).add(s(d))}else i=(i=i.mul(a)).add(s(d))}return i.unsigned=t,i}function d(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?c(e,t):l(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=d;var h=4294967296,f=h*h,p=f/2,m=o(1<<24),v=o(0);n.ZERO=v;var g=o(0,!0);n.UZERO=g;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var w=l(-1,2147483647,!1);n.MAX_VALUE=w;var k=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var S=l(0,-2147483648,!1);n.MIN_VALUE=S;var T=n.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},T.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(u(e,6),this.unsigned),i=this,o="";;){var l=i.div(a),c=(i.sub(l.mul(a)).toInt()>>>0).toString(e);if((i=l).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1===(1&this.low)},T.isEven=function(){return 0===(1&this.low)},T.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},T.neg=T.negate,T.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,u=e.low>>>16,c=0,h=0,f=0,p=0;return f+=(p+=i+(65535&e.low))>>>16,h+=(f+=a+u)>>>16,c+=(h+=n+s)>>>16,c+=t+o,l((f&=65535)<<16|(p&=65535),(c&=65535)<<16|(h&=65535),this.unsigned)},T.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return v;if(r(e)||(e=d(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return v;if(this.eq(S))return e.isOdd()?S:v;if(e.eq(S))return this.isOdd()?S:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,u=e.high>>>16,c=65535&e.high,h=e.low>>>16,f=65535&e.low,p=0,g=0,y=0,b=0;return y+=(b+=o*f)>>>16,g+=(y+=i*f)>>>16,y&=65535,g+=(y+=o*h)>>>16,p+=(g+=a*f)>>>16,g&=65535,p+=(g+=i*h)>>>16,g&=65535,p+=(g+=o*c)>>>16,p+=n*f+a*h+i*c+o*u,l((y&=65535)<<16|(b&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:v;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return b;i=g}else{if(this.eq(S))return e.eq(y)||e.eq(x)?S:e.eq(S)?y:(n=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(S))return this.unsigned?g:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=v}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),c=o<=48?1:u(2,o-48),h=s(n),f=h.mul(e);f.isNegative()||f.gt(a);)f=(h=s(n-=c,this.unsigned)).mul(e);h.isZero()&&(h=y),i=i.add(h),a=a.sub(f)}return i},T.div=T.divide,T.modulo=function(e){return r(e)||(e=d(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return l(~this.low,~this.high,this.unsigned)},T.and=function(e){return r(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return r(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return r(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},5988:function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,a=n.length;r<a;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},1176:function(e){var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var r=e,a=e.indexOf("["),i=e.indexOf("]");-1!=a&&-1!=i&&(e=e.substring(0,a)+e.substring(a,i).replace(/:/g,";")+e.substring(i,e.length));for(var o=t.exec(e||""),s={},l=14;l--;)s[n[l]]=o[l]||"";return-1!=a&&-1!=i&&(s.source=r,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,s.path),s.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,s.query),s}},888:function(e,t,n){"use strict";var r=n(9047);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},173:function(e,t,n){"use strict";var r,a=n(2791),i=(r=a)&&"object"===typeof r&&"default"in r?r.default:r,o=n(1338),s=new o,l=s.getBrowser(),u=s.getCPU(),c=s.getDevice(),d=s.getEngine(),h=s.getOS(),f=s.getUA(),p=function(e){return s.setUA(e)},m=function(e){if(e){var t=new o(e);return{UA:t,browser:t.getBrowser(),cpu:t.getCPU(),device:t.getDevice(),engine:t.getEngine(),os:t.getOS(),ua:t.getUA(),setUserAgent:function(e){return t.setUA(e)}}}console.error("No userAgent string was provided")},v=Object.freeze({ClientUAInstance:s,browser:l,cpu:u,device:c,engine:d,os:h,ua:f,setUa:p,parseUserAgent:m});function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function T(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(l){s=!0,a=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M="mobile",A="tablet",I="smarttv",N="console",R="wearable",O="embedded",D=void 0,L={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},P={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},F={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},j=function(e){return e||(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none")},z=function(){return!("undefined"===typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},B=function(e){var t=z();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)},U=function(e,t,n,r){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{vendor:j(t.vendor),model:j(t.model),os:j(n.name),osVersion:j(n.version),ua:j(r)})};var W=function(e){return e.type===M},V=function(e){return e.type===A},Z=function(e){var t=e.type;return t===M||t===A},H=function(e){return e.type===I},G=function(e){return e.type===D},q=function(e){return e.type===R},X=function(e){return e.type===N},Y=function(e){return e.type===O},K=function(e){var t=e.vendor;return j(t)},$=function(e){var t=e.model;return j(t)},J=function(e){var t=e.type;return j(t,"browser")},Q=function(e){return e.name===P.Android},ee=function(e){return e.name===P.Windows},te=function(e){return e.name===P.MAC_OS},ne=function(e){return e.name===P.WindowsPhone},re=function(e){return e.name===P.IOS},ae=function(e){var t=e.version;return j(t)},ie=function(e){var t=e.name;return j(t)},oe=function(e){return e.name===L.Chrome},se=function(e){return e.name===L.Firefox},le=function(e){return e.name===L.Chromium},ue=function(e){return e.name===L.Edge},ce=function(e){return e.name===L.Yandex},de=function(e){var t=e.name;return t===L.Safari||t===L.MobileSafari},he=function(e){return e.name===L.MobileSafari},fe=function(e){return e.name===L.Opera},pe=function(e){var t=e.name;return t===L.InternetExplorer||t===L.Ie},me=function(e){return e.name===L.MIUI},ve=function(e){return e.name===L.SamsungBrowser},ge=function(e){var t=e.version;return j(t)},ye=function(e){var t=e.major;return j(t)},be=function(e){var t=e.name;return j(t)},xe=function(e){var t=e.name;return j(t)},we=function(e){var t=e.version;return j(t)},ke=function(){var e=z(),t=e&&e.userAgent&&e.userAgent.toLowerCase();return"string"===typeof t&&/electron/.test(t)},Se=function(e){return"string"===typeof e&&-1!==e.indexOf("Edg/")},Te=function(){var e=z();return e&&(/iPad|iPhone|iPod/.test(e.platform)||"MacIntel"===e.platform&&e.maxTouchPoints>1)&&!window.MSStream},Ee=function(){return B("iPad")},Ce=function(){return B("iPhone")},_e=function(){return B("iPod")},Me=function(e){return j(e)};function Ae(e){var t=e||v,n=t.device,r=t.browser,a=t.os,i=t.engine,o=t.ua;return{isSmartTV:H(n),isConsole:X(n),isWearable:q(n),isEmbedded:Y(n),isMobileSafari:he(r)||Ee(),isChromium:le(r),isMobile:Z(n)||Ee(),isMobileOnly:W(n),isTablet:V(n)||Ee(),isBrowser:G(n),isDesktop:G(n),isAndroid:Q(a),isWinPhone:ne(a),isIOS:re(a)||Ee(),isChrome:oe(r),isFirefox:se(r),isSafari:de(r),isOpera:fe(r),isIE:pe(r),osVersion:ae(a),osName:ie(a),fullBrowserVersion:ge(r),browserVersion:ye(r),browserName:be(r),mobileVendor:K(n),mobileModel:$(n),engineName:xe(i),engineVersion:we(i),getUA:Me(o),isEdge:ue(r)||Se(o),isYandex:ce(r),deviceType:J(n),isIOS13:Te(),isIPad13:Ee(),isIPhone13:Ce(),isIPod13:_e(),isElectron:ke(),isEdgeChromium:Se(o),isLegacyEdge:ue(r)&&!Se(o),isWindows:ee(a),isMacOs:te(a),isMIUI:me(r),isSamsungBrowser:ve(r)}}var Ie=H(c),Ne=X(c),Re=q(c),Oe=Y(c),De=he(l)||Ee(),Le=le(l),Pe=Z(c)||Ee(),Fe=W(c),je=V(c)||Ee(),ze=G(c),Be=G(c),Ue=Q(h),We=ne(h),Ve=re(h)||Ee(),Ze=oe(l),He=se(l),Ge=de(l),qe=fe(l),Xe=pe(l),Ye=ae(h),Ke=ie(h),$e=ge(l),Je=ye(l),Qe=be(l),et=K(c),tt=$(c),nt=xe(d),rt=we(d),at=Me(f),it=ue(l)||Se(f),ot=ce(l),st=J(c),lt=Te(),ut=Ee(),ct=Ce(),dt=_e(),ht=ke(),ft=Se(f),pt=ue(l)&&!Se(f),mt=ee(h),vt=te(h),gt=me(l),yt=ve(l);function bt(e){var t=e||window.navigator.userAgent;return m(t)}t.tq=Pe},4463:function(e,t,n){"use strict";var r=n(2791),a=n(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),_=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var P,F=Object.assign;function j(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var l="\n"+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function U(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case E:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=Z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,Z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Z(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Z(n)}}function ie(e,t){var n=Z(t.value),r=Z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Te=null;function Ee(e){if(e=ba(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=wa(t),ke(e.stateNode,e.type,t))}}function Ce(e){Se?Te?Te.push(e):Te=[e]:Se=e}function _e(){if(Se){var e=Se,t=Te;if(Te=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Me(e,t){return e(t)}function Ae(){}var Ie=!1;function Ne(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Me(e,t,n)}finally{Ie=!1,(null!==Se||null!==Te)&&(Ae(),_e())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ce){Oe=!1}function Le(e,t,n,r,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Pe=!1,Fe=null,je=!1,ze=null,Be={onError:function(e){Pe=!0,Fe=e}};function Ue(e,t,n,r,a,i,o,s,l){Pe=!1,Fe=null,Le.apply(Be,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(We(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Ze(a),e;if(o===r)return Ze(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var qe=a.unstable_scheduleCallback,Xe=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Ke=a.unstable_requestPaint,$e=a.unstable_now,Je=a.unstable_getCurrentPriorityLevel,Qe=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=dt(s):0!==(i&=o)&&(r=dt(i))}else 0!==(o=n&~a)?r=dt(o):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,Tt,Et,Ct=!1,_t=[],Mt=null,At=null,It=null,Nt=new Map,Rt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Pt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ft(e){var t=ya(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Et(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){jt(e)&&n.delete(t)}function Bt(){Ct=!1,null!==Mt&&jt(Mt)&&(Mt=null),null!==At&&jt(At)&&(At=null),null!==It&&jt(It)&&(It=null),Nt.forEach(zt),Rt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Bt)))}function Wt(e){function t(t){return Ut(t,e)}if(0<_t.length){Ut(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mt&&Ut(Mt,e),null!==At&&Ut(At,e),null!==It&&Ut(It,e),Nt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var Vt=x.ReactCurrentBatchConfig,Zt=!0;function Ht(e,t,n,r){var a=bt,i=Vt.transition;Vt.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=a,Vt.transition=i}}function Gt(e,t,n,r){var a=bt,i=Vt.transition;Vt.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=a,Vt.transition=i}}function qt(e,t,n,r){if(Zt){var a=Yt(e,t,n,r);if(null===a)Zr(e,t,r,Xt,n),Lt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Mt=Pt(Mt,e,t,n,r,a),!0;case"dragenter":return At=Pt(At,e,t,n,r,a),!0;case"mouseover":return It=Pt(It,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Nt.set(i,Pt(Nt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Rt.set(i,Pt(Rt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&wt(i),null===(i=Yt(e,t,n,r))&&Zr(e,t,r,Xt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Zr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=ya(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Jt,r=n.length,a="value"in $t?$t.value:$t.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Qt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),dn=F({},un,{view:0,detail:0}),hn=an(dn),fn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(fn),mn=an(F({},fn,{dataTransfer:0})),vn=an(F({},dn,{relatedTarget:0})),gn=an(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(F({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return Tn}var Cn=F({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=an(Cn),Mn=an(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),In=an(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Nn),On=[9,13,27,32],Dn=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Pn=c&&"TextEvent"in window&&!Ln,Fn=c&&(!Dn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ce(r),0<(t=Gr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,qn=null;function Xn(e){jr(e,0)}function Yn(e){if(q(xa(e)))return e}function Kn(e,t){if("change"===e)return t}var $n=!1;if(c){var Jn;if(c){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Jn=Qn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),qn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(qn)){var t=[];Hn(t,qn,e,we(e)),Ne(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(qn)}function ir(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=cr(n,i);var o=cr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==vr||vr!==X(r)||("selectionStart"in(r=vr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Gr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Tr={};function Er(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Sr[e]=n[t];return e}c&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Cr=Er("animationend"),_r=Er("animationiteration"),Mr=Er("animationstart"),Ar=Er("transitionend"),Ir=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ir.set(e,t),l(t,[e])}for(var Or=0;Or<Nr.length;Or++){var Dr=Nr[Or];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(_r,"onAnimationIteration"),Rr(Mr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,l,u){if(Ue.apply(this,arguments),Pe){if(!Pe)throw Error(i(198));var c=Fe;Pe=!1,Fe=null,je||(je=!0,ze=c)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;Fr(a,s,u),i=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;Fr(a,s,u),i=l}}}if(je)throw e=ze,je=!1,ze=null,e}function zr(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Pr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Kt(t)){case 1:var a=Ht;break;case 4:a=Gt;break;default:a=qt}n=a.bind(null,t,n,e),a=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Zr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ya(s)))return;if(5===(l=o.tag)||6===l){r=i=o;continue e}s=s.parentNode}}r=r.return}Ne((function(){var r=i,a=we(n),o=[];e:{var s=Ir.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Cr:case _r:case Mr:l=gn;break;case Ar:l=In;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Re(p,h))&&c.push(Hr(p,m,f)))),d)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,a),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(u=n.relatedTarget||n.fromElement)||!ya(u)&&!u[pa])&&(l||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ya(u):null)&&(u!==(d=We(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Mn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:xa(l),f=null==u?s:xa(u),(s=new c(m,p+"leave",l,n,a)).target=d,s.relatedTarget=f,m=null,ya(a)===r&&((c=new c(h,p+"enter",u,n,a)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,p=0,f=c=l;f;f=qr(f))p++;for(f=0,m=h;m;m=qr(m))f++;for(;0<p-f;)c=qr(c),p--;for(;0<f-p;)h=qr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=qr(c),h=qr(h)}c=null}else c=null;null!==l&&Xr(o,s,l,c,!1),null!==u&&null!==d&&Xr(o,d,u,c,!0)}if("select"===(l=(s=r?xa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=Kn;else if(Zn(s))if($n)v=or;else{v=ar;var g=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ir);switch(v&&(v=v(e,r))?Hn(o,v,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?xa(r):window,e){case"focusin":(Zn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,yr=null);break;case"focusout":yr=gr=vr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,a)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=en()):(Jt="value"in($t=a)?$t.value:$t.textContent,Wn=!0)),0<(g=Gr(r,b)).length&&(b=new xn(b,e,null,n,a),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Pn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,jn);case"textInput":return(e=t.data)===jn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Dn&&Bn(e,t)?(e=en(),Qt=Jt=$t=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}jr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Re(e,n))&&r.unshift(Hr(e,i,a)),null!=(i=Re(e,t))&&r.push(Hr(e,i,a))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,a?null!=(l=Re(n,i))&&o.unshift(Hr(n,l,s)):a||null!=(l=Re(n,i))&&o.push(Hr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Kr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(i(425))}function Qr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Wt(t)}function ua(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ca(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,fa="__reactProps$"+da,pa="__reactContainer$"+da,ma="__reactEvents$"+da,va="__reactListeners$"+da,ga="__reactHandles$"+da;function ya(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ca(e);null!==e;){if(n=e[ha])return n;e=ca(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wa(e){return e[fa]||null}var ka=[],Sa=-1;function Ta(e){return{current:e}}function Ea(e){0>Sa||(e.current=ka[Sa],ka[Sa]=null,Sa--)}function Ca(e,t){Sa++,ka[Sa]=e.current,e.current=t}var _a={},Ma=Ta(_a),Aa=Ta(!1),Ia=_a;function Na(e,t){var n=e.type.contextTypes;if(!n)return _a;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ra(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oa(){Ea(Aa),Ea(Ma)}function Da(e,t,n){if(Ma.current!==_a)throw Error(i(168));Ca(Ma,t),Ca(Aa,n)}function La(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,V(e)||"Unknown",a));return F({},n,r)}function Pa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_a,Ia=Ma.current,Ca(Ma,e),Ca(Aa,Aa.current),!0}function Fa(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=La(e,t,Ia),r.__reactInternalMemoizedMergedChildContext=e,Ea(Aa),Ea(Ma),Ca(Ma,e)):Ea(Aa),Ca(Aa,n)}var ja=null,za=!1,Ba=!1;function Ua(e){null===ja?ja=[e]:ja.push(e)}function Wa(){if(!Ba&&null!==ja){Ba=!0;var e=0,t=bt;try{var n=ja;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ja=null,za=!1}catch(a){throw null!==ja&&(ja=ja.slice(e+1)),qe(Qe,Wa),a}finally{bt=t,Ba=!1}}return null}var Va=[],Za=0,Ha=null,Ga=0,qa=[],Xa=0,Ya=null,Ka=1,$a="";function Ja(e,t){Va[Za++]=Ga,Va[Za++]=Ha,Ha=e,Ga=t}function Qa(e,t,n){qa[Xa++]=Ka,qa[Xa++]=$a,qa[Xa++]=Ya,Ya=e;var r=Ka;e=$a;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Ka=1<<32-ot(t)+a|n<<a|r,$a=i+e}else Ka=1<<i|n<<a|r,$a=e}function ei(e){null!==e.return&&(Ja(e,1),Qa(e,1,0))}function ti(e){for(;e===Ha;)Ha=Va[--Za],Va[Za]=null,Ga=Va[--Za],Va[Za]=null;for(;e===Ya;)Ya=qa[--Xa],qa[Xa]=null,$a=qa[--Xa],qa[Xa]=null,Ka=qa[--Xa],qa[Xa]=null}var ni=null,ri=null,ai=!1,ii=null;function oi(e,t){var n=Ru(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=ua(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ya?{id:Ka,overflow:$a}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ru(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ai){var t=ri;if(t){var n=t;if(!si(e,t)){if(li(e))throw Error(i(418));t=ua(n.nextSibling);var r=ni;t&&si(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function ci(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!ai)return ci(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)oi(e,t),t=ua(t.nextSibling)}if(ci(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=ua(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?ua(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=ua(e.nextSibling)}function fi(){ri=ni=null,ai=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=x.ReactCurrentBatchConfig;function vi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var gi=Ta(null),yi=null,bi=null,xi=null;function wi(){xi=bi=yi=null}function ki(e){var t=gi.current;Ea(gi),e._currentValue=t}function Si(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t){yi=e,xi=bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Ei(e){var t=e._currentValue;if(xi!==e)if(e={context:e,memoizedValue:t,next:null},null===bi){if(null===yi)throw Error(i(308));bi=e,yi.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Ci=null;function _i(e){null===Ci?Ci=[e]:Ci.push(e)}function Mi(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,_i(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ai(e,r)}function Ai(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ii=!1;function Ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Di(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ai(e,n)}return null===(a=r.interleaved)?(t.next=t,_i(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ai(e,n)}function Li(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Pi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fi(e,t,n,r){var a=e.updateQueue;Ii=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?i=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==i){var d=a.baseState;for(o=0,c=u=l=null,s=i;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=F({},d,h);break e;case 2:Ii=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,o|=h;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(h=s).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===c&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=d}}function ji(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var zi=(new r.Component).refs;function Bi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ui={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),a=nu(e),i=Oi(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Di(e,i,a))&&(ru(t,e,a,r),Li(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),a=nu(e),i=Oi(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Di(e,i,a))&&(ru(t,e,a,r),Li(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),a=Oi(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Di(e,a,r))&&(ru(t,e,r,n),Li(t,e,r))}};function Wi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,i))}function Vi(e,t,n){var r=!1,a=_a,i=t.contextType;return"object"===typeof i&&null!==i?i=Ei(i):(a=Ra(t)?Ia:Ma.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Na(e,a):_a),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ui,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Zi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ui.enqueueReplaceState(t,t.state,null)}function Hi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=zi,Ni(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Ei(i):(i=Ra(t)?Ia:Ma.current,a.context=Na(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(Bi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Ui.enqueueReplaceState(a,a.state,null),Fi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===zi&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function qi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xi(e){return(0,e._init)(e._payload)}function Yi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Du(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=ju(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){var i=n.type;return i===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&Xi(i)===t.type)?((r=a(t,n.props)).ref=Gi(e,t,n),r.return=e,r):((r=Lu(n.type,n.key,n.props,null,e.mode,r)).ref=Gi(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zu(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Pu(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=ju(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lu(t.type,t.key,t.props,null,e.mode,n)).ref=Gi(e,null,t),n.return=e,n;case k:return(t=zu(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Pu(t,e.mode,n,null)).return=e,t;qi(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?u(e,t,n,r):null;case k:return n.key===a?c(e,t,n,r):null;case R:return f(e,t,(a=n._init)(n._payload),r)}if(te(n)||L(n))return null!==a?null:d(e,t,n,r,null);qi(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case R:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,a,null);qi(t,r)}return null}function m(a,i,s,l){for(var u=null,c=null,d=i,m=i=0,v=null;null!==d&&m<s.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var g=f(a,d,s[m],l);if(null===g){null===d&&(d=v);break}e&&d&&null===g.alternate&&t(a,d),i=o(g,i,m),null===c?u=g:c.sibling=g,c=g,d=v}if(m===s.length)return n(a,d),ai&&Ja(a,m),u;if(null===d){for(;m<s.length;m++)null!==(d=h(a,s[m],l))&&(i=o(d,i,m),null===c?u=d:c.sibling=d,c=d);return ai&&Ja(a,m),u}for(d=r(a,d);m<s.length;m++)null!==(v=p(d,a,m,s[m],l))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),i=o(v,i,m),null===c?u=v:c.sibling=v,c=v);return e&&d.forEach((function(e){return t(a,e)})),ai&&Ja(a,m),u}function v(a,s,l,u){var c=L(l);if("function"!==typeof c)throw Error(i(150));if(null==(l=c.call(l)))throw Error(i(151));for(var d=c=null,m=s,v=s=0,g=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=f(a,m,y.value,u);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(a,m),s=o(b,s,v),null===d?c=b:d.sibling=b,d=b,m=g}if(y.done)return n(a,m),ai&&Ja(a,v),c;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=h(a,y.value,u))&&(s=o(y,s,v),null===d?c=y:d.sibling=y,d=y);return ai&&Ja(a,v),c}for(m=r(a,m);!y.done;v++,y=l.next())null!==(y=p(m,a,v,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(a,e)})),ai&&Ja(a,v),c}return function e(r,i,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var u=o.key,c=i;null!==c;){if(c.key===u){if((u=o.type)===S){if(7===c.tag){n(r,c.sibling),(i=a(c,o.props.children)).return=r,r=i;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&Xi(u)===c.type){n(r,c.sibling),(i=a(c,o.props)).ref=Gi(r,c,o),i.return=r,r=i;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===S?((i=Pu(o.props.children,r.mode,l,o.key)).return=r,r=i):((l=Lu(o.type,o.key,o.props,null,r.mode,l)).ref=Gi(r,i,o),l.return=r,r=l)}return s(r);case k:e:{for(c=o.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=zu(o,r.mode,l)).return=r,r=i}return s(r);case R:return e(r,i,(c=o._init)(o._payload),l)}if(te(o))return m(r,i,o,l);if(L(o))return v(r,i,o,l);qi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=ju(o,r.mode,l)).return=r,r=i),s(r)):n(r,i)}}var Ki=Yi(!0),$i=Yi(!1),Ji={},Qi=Ta(Ji),eo=Ta(Ji),to=Ta(Ji);function no(e){if(e===Ji)throw Error(i(174));return e}function ro(e,t){switch(Ca(to,t),Ca(eo,e),Ca(Qi,Ji),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ea(Qi),Ca(Qi,t)}function ao(){Ea(Qi),Ea(eo),Ea(to)}function io(e){no(to.current);var t=no(Qi.current),n=le(t,e.type);t!==n&&(Ca(eo,e),Ca(Qi,n))}function oo(e){eo.current===e&&(Ea(Qi),Ea(eo))}var so=Ta(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=x.ReactCurrentDispatcher,fo=x.ReactCurrentBatchConfig,po=0,mo=null,vo=null,go=null,yo=!1,bo=!1,xo=0,wo=0;function ko(){throw Error(i(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function To(e,t,n,r,a,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:ls,e=n(r,a),bo){o=0;do{if(bo=!1,xo=0,25<=o)throw Error(i(301));o+=1,go=vo=null,t.updateQueue=null,ho.current=us,e=n(r,a)}while(bo)}if(ho.current=os,t=null!==vo&&null!==vo.next,po=0,go=vo=mo=null,yo=!1,t)throw Error(i(300));return e}function Eo(){var e=0!==xo;return xo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?mo.memoizedState=go=e:go=go.next=e,go}function _o(){if(null===vo){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=vo.next;var t=null===go?mo.memoizedState:go.next;if(null!==t)go=t,vo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(vo=e).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===go?mo.memoizedState=go=e:go=go.next=e}return go}function Mo(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=_o(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=vo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var l=s=null,u=null,c=o;do{var d=c.lane;if((po&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,s=r):u=u.next=h,mo.lanes|=d,Fl|=d}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,mo.lanes|=o,Fl|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Io(e){var t=_o(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(xs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function Ro(e,t){var n=mo,r=_o(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,xs=!0),r=r.queue,Zo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,zo(9,Do.bind(null,n,r,a,t),void 0,null),null===Il)throw Error(i(349));0!==(30&po)||Oo(n,t,a)}return a}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Po(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Po(t)&&Fo(e)}))}function Po(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Ai(e,1);null!==t&&ru(t,e,1,-1)}function jo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function zo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return _o().memoizedState}function Uo(e,t,n,r){var a=Co();mo.flags|=e,a.memoizedState=zo(1|t,n,void 0,void 0===r?null:r)}function Wo(e,t,n,r){var a=_o();r=void 0===r?null:r;var i=void 0;if(null!==vo){var o=vo.memoizedState;if(i=o.destroy,null!==r&&So(r,o.deps))return void(a.memoizedState=zo(t,n,i,r))}mo.flags|=e,a.memoizedState=zo(1|t,n,i,r)}function Vo(e,t){return Uo(8390656,8,e,t)}function Zo(e,t){return Wo(2048,8,e,t)}function Ho(e,t){return Wo(4,2,e,t)}function Go(e,t){return Wo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Wo(4,4,qo.bind(null,t,e),n)}function Yo(){}function Ko(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mo.lanes|=n,Fl|=n,e.baseState=!0),t)}function Qo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{bt=n,fo.transition=r}}function es(){return _o().memoizedState}function ts(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))as(t,n);else if(null!==(n=Mi(e,t,n,r))){ru(n,e,r,tu()),is(n,t,r)}}function ns(e,t,n){var r=nu(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))as(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(a.next=a,_i(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(u){}null!==(n=Mi(e,t,a,r))&&(ru(n,e,r,a=tu()),is(n,t,r))}}function rs(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function as(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function is(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ei,useCallback:ko,useContext:ko,useEffect:ko,useImperativeHandle:ko,useInsertionEffect:ko,useLayoutEffect:ko,useMemo:ko,useReducer:ko,useRef:ko,useState:ko,useDebugValue:ko,useDeferredValue:ko,useTransition:ko,useMutableSource:ko,useSyncExternalStore:ko,useId:ko,unstable_isNewReconciler:!1},ss={readContext:Ei,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Ei,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:jo,useDebugValue:Yo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Qo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,a=Co();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Il)throw Error(i(349));0!==(30&po)||Oo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Vo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,zo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Il.identifierPrefix;if(ai){var n=$a;t=":"+t+"R"+(n=(Ka&~(1<<32-ot(Ka)-1)).toString(32)+n),0<(n=xo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Ei,useCallback:Ko,useContext:Ei,useEffect:Zo,useImperativeHandle:Xo,useInsertionEffect:Ho,useLayoutEffect:Go,useMemo:$o,useReducer:Ao,useRef:Bo,useState:function(){return Ao(Mo)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(_o(),vo.memoizedState,e)},useTransition:function(){return[Ao(Mo)[0],_o().memoizedState]},useMutableSource:No,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1},us={readContext:Ei,useCallback:Ko,useContext:Ei,useEffect:Zo,useImperativeHandle:Xo,useInsertionEffect:Ho,useLayoutEffect:Go,useMemo:$o,useReducer:Io,useRef:Bo,useState:function(){return Io(Mo)},useDebugValue:Yo,useDeferredValue:function(e){var t=_o();return null===vo?t.memoizedState=e:Jo(t,vo.memoizedState,e)},useTransition:function(){return[Io(Mo)[0],_o().memoizedState]},useMutableSource:No,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Gl=r),hs(0,t)},n}function ms(e,t,n){(n=Oi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){hs(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Cu.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oi(-1,1)).tag=2,Di(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bs=x.ReactCurrentOwner,xs=!1;function ws(e,t,n,r){t.child=null===e?$i(t,null,n,r):Ki(t,e.child,n,r)}function ks(e,t,n,r,a){n=n.render;var i=t.ref;return Ti(t,a),r=To(e,t,n,r,i,a),n=Eo(),null===e||xs?(ai&&n&&ei(t),t.flags|=1,ws(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a))}function Ss(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Ou(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ts(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Hs(e,t,a)}return t.flags|=1,(e=Du(i,r)).ref=t.ref,e.return=t,t.child=e}function Ts(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Hs(e,t,a);0!==(131072&e.flags)&&(xs=!0)}}return _s(e,t,n,r,a)}function Es(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ca(Dl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ca(Dl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ca(Dl,Ol),Ol|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ca(Dl,Ol),Ol|=r;return ws(e,t,a,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _s(e,t,n,r,a){var i=Ra(n)?Ia:Ma.current;return i=Na(t,i),Ti(t,a),n=To(e,t,n,r,i,a),r=Eo(),null===e||xs?(ai&&r&&ei(t),t.flags|=1,ws(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a))}function Ms(e,t,n,r,a){if(Ra(n)){var i=!0;Pa(t)}else i=!1;if(Ti(t,a),null===t.stateNode)Zs(e,t),Vi(t,n,r),Hi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ei(u):u=Na(t,u=Ra(n)?Ia:Ma.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Zi(t,o,r,u),Ii=!1;var h=t.memoizedState;o.state=h,Fi(t,r,o,a),l=t.memoizedState,s!==r||h!==l||Aa.current||Ii?("function"===typeof c&&(Bi(t,n,c,r),l=t.memoizedState),(s=Ii||Wi(t,n,s,r,h,l,u))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ri(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:vi(t.type,s),o.props=u,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ei(l):l=Na(t,l=Ra(n)?Ia:Ma.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==l)&&Zi(t,o,r,l),Ii=!1,h=t.memoizedState,o.state=h,Fi(t,r,o,a);var p=t.memoizedState;s!==d||h!==p||Aa.current||Ii?("function"===typeof f&&(Bi(t,n,f,r),p=t.memoizedState),(u=Ii||Wi(t,n,u,r,h,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,i,a)}function As(e,t,n,r,a,i){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&Fa(t,n,!1),Hs(e,t,i);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ki(t,e.child,null,i),t.child=Ki(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,a&&Fa(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Da(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Da(0,t.context,!1),ro(e,t.containerInfo)}function Ns(e,t,n,r,a){return fi(),pi(a),t.flags|=256,ws(e,t,n,r),t.child}var Rs,Os,Ds,Ls,Ps={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,a=t.pendingProps,o=so.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ca(so,1&o),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,s?(a=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Fu(l,a,0,null),e=Pu(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ps,e):zs(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=ds(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=Fu({mode:"visible",children:r.children},a,0,null),(o=Pu(o,a,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ki(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ps,o);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Bs(e,t,s,r=ds(o=Error(i(419)),r,void 0))}if(l=0!==(s&e.childLanes),xs||l){if(null!==(r=Il)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Ai(e,a),ru(r,e,a,-1))}return vu(),Bs(e,t,s,r=ds(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Mu.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ri=ua(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&(qa[Xa++]=Ka,qa[Xa++]=$a,qa[Xa++]=Ya,Ka=e.id,$a=e.overflow,Ya=t),t=zs(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,o,n);if(s){s=a.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=u,t.deletions=null):(a=Du(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Du(r,s):(s=Pu(s,l,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,l=null===(l=e.child.memoizedState)?Fs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ps,a}return e=(s=e.child).sibling,a=Du(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function zs(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&pi(r),Ki(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Si(e.return,t,n)}function Ws(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Vs(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ca(so,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Ws(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===lo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Ws(t,!0,n,null,i);break;case"together":Ws(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Du(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Du(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Ra(t.type)&&Oa(),qs(t),null;case 3:return r=t.stateNode,ao(),Ea(Aa),Ea(Ma),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(su(ii),ii=null))),Os(e,t),qs(t),null;case 5:oo(t);var a=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return qs(t),null}if(e=no(Qi.current),di(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ha]=t,r[fa]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(a=0;a<Lr.length;a++)zr(Lr[a],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":K(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ae(r,o),zr("invalid",r)}for(var l in ye(n,o),a=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),a=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),a=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":G(r),Q(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Qr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ha]=t,e[fa]=r,Rs(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),a=r;break;case"iframe":case"object":case"embed":zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Lr.length;a++)zr(Lr[a],e);a=r;break;case"source":zr("error",e),a=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),a=r;break;case"details":zr("toggle",e),a=r;break;case"input":K(e,r),a=Y(e,r),zr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=F({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),zr("invalid",e)}for(o in ye(n,a),u=a)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ve(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&zr("scroll",e):null!=c&&b(e,o,c,l))}switch(n){case"input":G(e),Q(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=no(to.current),no(Qi.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return qs(t),null;case 13:if(Ea(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,o=!1;else if(o=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[ha]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),o=!1}else null!==ii&&(su(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Ll&&(Ll=3):vu())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return ao(),Os(e,t),null===e&&Wr(t.stateNode.containerInfo),qs(t),null;case 10:return ki(t.type._context),qs(t),null;case 19:if(Ea(so),null===(o=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Gs(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Gs(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ca(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Vl&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ai)return qs(t),null}else 2*$e()-o.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=so.current,Ca(so,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ys(e,t){switch(ti(t),t.tag){case 1:return Ra(t.type)&&Oa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),Ea(Aa),Ea(Ma),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ea(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ea(so),null;case 4:return ao(),null;case 10:return ki(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Ds=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,no(Qi.current);var i,o=null;switch(n){case"input":a=Y(e,a),r=Y(e,r),o=[];break;case"select":a=F({},a,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(c in ye(n,r),n=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var l=a[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&zr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ks=!1,$s=!1,Js="function"===typeof WeakSet?WeakSet:Set,Qs=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Eu(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Eu(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&tl(t,n,i)}a=a.next}while(a!==r)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[fa],delete t[ma],delete t[va],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:$s||el(n,t);case 6:var r=dl,a=hl;dl=null,fl(e,t,n),hl=a,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Wt(e)):la(dl,n.stateNode));break;case 4:r=dl,a=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=a;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&tl(n,t,o),a=a.next}while(a!==r)}fl(e,t,n);break;case 1:if(!$s&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Eu(n,t,s)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,fl(e,t,n),$s=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Au.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(i(160));pl(o,s,a),dl=null,hl=!1;var u=a.alternate;null!==u&&(u.return=null),a.return=null}catch(c){Eu(a,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vl(t,e),yl(e),4&r){try{rl(3,e,e.return),al(3,e)}catch(v){Eu(e,e.return,v)}try{rl(5,e,e.return)}catch(v){Eu(e,e.return,v)}}break;case 1:vl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(vl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(v){Eu(e,e.return,v)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(a,o),be(l,s);var c=be(l,o);for(s=0;s<u.length;s+=2){var d=u[s],h=u[s+1];"style"===d?ve(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,c)}switch(l){case"input":J(a,o);break;case"textarea":ie(a,o);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(a,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[fa]=o}catch(v){Eu(e,e.return,v)}}break;case 6:if(vl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(v){Eu(e,e.return,v)}}break;case 3:if(vl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(v){Eu(e,e.return,v)}break;case 4:default:vl(t,e),yl(e);break;case 13:vl(t,e),yl(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Wl=$e())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($s=(c=$s)||d,vl(t,e),$s=c):vl(t,e),yl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Qs=e,d=e.child;null!==d;){for(h=Qs=d;null!==Qs;){switch(p=(f=Qs).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Eu(r,n,v)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){kl(h);continue}}null!==p?(p.return=f,Qs=p):kl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,c?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,s=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(v){Eu(e,e.return,v)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){Eu(e,e.return,v)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),cl(e,ll(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,ll(e),o);break;default:throw Error(i(161))}}catch(s){Eu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Qs=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Qs;){var a=Qs,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Ks;if(!o){var s=a.alternate,l=null!==s&&null!==s.memoizedState||$s;s=Ks;var u=$s;if(Ks=o,($s=l)&&!u)for(Qs=a;null!==Qs;)l=(o=Qs).child,22===o.tag&&null!==o.memoizedState?Sl(a):null!==l?(l.return=o,Qs=l):Sl(a);for(;null!==i;)Qs=i,xl(i,t,n),i=i.sibling;Qs=a,Ks=s,$s=u}wl(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Qs=i):wl(e)}}function wl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||al(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:vi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ji(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ji(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(i(163))}$s||512&t.flags&&il(t)}catch(f){Eu(t,t.return,f)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function kl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function Sl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(l){Eu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Eu(t,a,l)}}var i=t.return;try{il(t)}catch(l){Eu(t,i,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Eu(t,o,l)}}}catch(l){Eu(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var Tl,El=Math.ceil,Cl=x.ReactCurrentDispatcher,_l=x.ReactCurrentOwner,Ml=x.ReactCurrentBatchConfig,Al=0,Il=null,Nl=null,Rl=0,Ol=0,Dl=Ta(0),Ll=0,Pl=null,Fl=0,jl=0,zl=0,Bl=null,Ul=null,Wl=0,Vl=1/0,Zl=null,Hl=!1,Gl=null,ql=null,Xl=!1,Yl=null,Kl=0,$l=0,Jl=null,Ql=-1,eu=0;function tu(){return 0!==(6&Al)?$e():-1!==Ql?Ql:Ql=$e()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Rl?Rl&-Rl:null!==mi.transition?(0===eu&&(eu=mt()),eu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function ru(e,t,n,r){if(50<$l)throw $l=0,Jl=null,Error(i(185));gt(e,n,r),0!==(2&Al)&&e===Il||(e===Il&&(0===(2&Al)&&(jl|=n),4===Ll&&lu(e,Rl)),au(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Vl=$e()+500,za&&Wa()))}function au(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,l=a[o];-1===l?0!==(s&n)&&0===(s&r)||(a[o]=ft(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===Il?Rl:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){za=!0,Ua(e)}(uu.bind(null,e)):Ua(uu.bind(null,e)),oa((function(){0===(6&Al)&&Wa()})),n=null;else{switch(xt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Iu(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Ql=-1,eu=0,0!==(6&Al))throw Error(i(327));var n=e.callbackNode;if(Su()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var a=Al;Al|=2;var o=mu();for(Il===e&&Rl===t||(Zl=null,Vl=$e()+500,fu(e,t));;)try{bu();break}catch(l){pu(e,l)}wi(),Cl.current=o,Al=a,null!==Nl?t=0:(Il=null,Rl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=ou(e,a))),1===t)throw n=Pl,fu(e,0),lu(e,r),au(e,$e()),n;if(6===t)lu(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gu(e,r))&&(0!==(o=pt(e))&&(r=o,t=ou(e,o))),1===t))throw n=Pl,fu(e,0),lu(e,r),au(e,$e()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:ku(e,Ul,Zl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=Wl+500-$e())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(ku.bind(null,e,Ul,Zl),t);break}ku(e,Ul,Zl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ra(ku.bind(null,e,Ul,Zl),r);break}ku(e,Ul,Zl);break;default:throw Error(i(329))}}}return au(e,$e()),e.callbackNode===n?iu.bind(null,e):null}function ou(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=Ul,Ul=n,null!==t&&su(t)),e}function su(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lu(e,t){for(t&=~zl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Al))throw Error(i(327));Su();var t=ht(e,0);if(0===(1&t))return au(e,$e()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Pl,fu(e,0),lu(e,t),au(e,$e()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ku(e,Ul,Zl),au(e,$e()),null}function cu(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Vl=$e()+500,za&&Wa())}}function du(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&Su();var t=Al;Al|=1;var n=Ml.transition,r=bt;try{if(Ml.transition=null,bt=1,e)return e()}finally{bt=r,Ml.transition=n,0===(6&(Al=t))&&Wa()}}function hu(){Ol=Dl.current,Ea(Dl)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oa();break;case 3:ao(),Ea(Aa),Ea(Ma),co();break;case 5:oo(r);break;case 4:ao();break;case 13:case 19:Ea(so);break;case 10:ki(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Il=e,Nl=e=Du(e.current,null),Rl=Ol=t,Ll=0,Pl=null,zl=jl=Fl=0,Ul=Bl=null,null!==Ci){for(t=0;t<Ci.length;t++)if(null!==(r=(n=Ci[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}Ci=null}return e}function pu(e,t){for(;;){var n=Nl;try{if(wi(),ho.current=os,yo){for(var r=mo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}yo=!1}if(po=0,go=vo=mo=null,bo=!1,xo=0,_l.current=null,null===n||null===n.return){Ll=1,Pl=t,Nl=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Rl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&vs(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var v=new Set;v.add(u),t.updateQueue=v}else m.add(u);break e}if(0===(1&t)){vs(o,c,t),vu();break e}u=Error(i(426))}else if(ai&&1&l.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,l,0,t),pi(cs(u,l));break e}}o=u=cs(u,l),4!==Ll&&(Ll=2),null===Bl?Bl=[o]:Bl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Pi(o,ps(0,u,t));break e;case 1:l=u;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Pi(o,ms(o,l,t));break e}}o=o.return}while(null!==o)}wu(n)}catch(x){t=x,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function mu(){var e=Cl.current;return Cl.current=os,null===e?os:e}function vu(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Il||0===(268435455&Fl)&&0===(268435455&jl)||lu(Il,Rl)}function gu(e,t){var n=Al;Al|=2;var r=mu();for(Il===e&&Rl===t||(Zl=null,fu(e,t));;)try{yu();break}catch(a){pu(e,a)}if(wi(),Al=n,Cl.current=r,null!==Nl)throw Error(i(261));return Il=null,Rl=0,Ll}function yu(){for(;null!==Nl;)xu(Nl)}function bu(){for(;null!==Nl&&!Ye();)xu(Nl)}function xu(e){var t=Tl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?wu(e):Nl=t,_l.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Ol)))return void(Nl=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Ll=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Ll&&(Ll=5)}function ku(e,t,n){var r=bt,a=Ml.transition;try{Ml.transition=null,bt=1,function(e,t,n,r){do{Su()}while(null!==Yl);if(0!==(6&Al))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Il&&(Nl=Il=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Iu(tt,(function(){return Su(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ml.transition,Ml.transition=null;var s=bt;bt=1;var l=Al;Al|=4,_l.current=null,function(e,t){if(ea=Zt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(l=s+a),h!==o||0!==r&&3!==h.nodeType||(u=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===a&&(l=s),f===o&&++d===r&&(u=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Zt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:vi(t.type,v),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(w){Eu(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=nl,nl=!1}(e,n),gl(n,e),pr(ta),Zt=!!ea,ta=ea=null,e.current=n,bl(n,e,a),Ke(),Al=l,bt=s,Ml.transition=o}else e.current=n;if(Xl&&(Xl=!1,Yl=e,Kl=a),o=e.pendingLanes,0===o&&(ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),au(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Hl)throw Hl=!1,e=Gl,Gl=null,e;0!==(1&Kl)&&0!==e.tag&&Su(),o=e.pendingLanes,0!==(1&o)?e===Jl?$l++:($l=0,Jl=e):$l=0,Wa()}(e,t,n,r)}finally{Ml.transition=a,bt=r}return null}function Su(){if(null!==Yl){var e=xt(Kl),t=Ml.transition,n=bt;try{if(Ml.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Kl=0,0!==(6&Al))throw Error(i(331));var a=Al;for(Al|=4,Qs=e.current;null!==Qs;){var o=Qs,s=o.child;if(0!==(16&Qs.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qs=c;null!==Qs;){var d=Qs;switch(d.tag){case 0:case 11:case 15:rl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Qs=h;else for(;null!==Qs;){var f=(d=Qs).sibling,p=d.return;if(ol(d),d===c){Qs=null;break}if(null!==f){f.return=p,Qs=f;break}Qs=p}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Qs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(o=Qs).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Qs=y;break e}Qs=o.return}}var b=e.current;for(Qs=b;null!==Qs;){var x=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Qs=x;else e:for(s=b;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(k){Eu(l,l.return,k)}if(l===s){Qs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qs=w;break e}Qs=l.return}}if(Al=a,Wa(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{bt=n,Ml.transition=t}}return!1}function Tu(e,t,n){e=Di(e,t=ps(0,t=cs(n,t),1),1),t=tu(),null!==e&&(gt(e,1,t),au(e,t))}function Eu(e,t,n){if(3===e.tag)Tu(e,e,n);else for(;null!==t;){if(3===t.tag){Tu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Di(t,e=ms(t,e=cs(n,e),1),1),e=tu(),null!==t&&(gt(t,1,e),au(t,e));break}}t=t.return}}function Cu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Rl&n)===n&&(4===Ll||3===Ll&&(130023424&Rl)===Rl&&500>$e()-Wl?fu(e,0):zl|=n),au(e,t)}function _u(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Ai(e,t))&&(gt(e,t,n),au(e,n))}function Mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_u(e,n)}function Au(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),_u(e,n)}function Iu(e,t){return qe(e,t)}function Nu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ru(e,t,n,r){return new Nu(e,t,n,r)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Du(e,t){var n=e.alternate;return null===n?((n=Ru(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Ou(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Pu(n.children,a,o,t);case T:s=8,a|=8;break;case E:return(e=Ru(12,n,t,2|a)).elementType=E,e.lanes=o,e;case A:return(e=Ru(13,n,t,a)).elementType=A,e.lanes=o,e;case I:return(e=Ru(19,n,t,a)).elementType=I,e.lanes=o,e;case O:return Fu(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case _:s=9;break e;case M:s=11;break e;case N:s=14;break e;case R:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ru(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Pu(e,t,n,r){return(e=Ru(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Ru(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function ju(e,t,n){return(e=Ru(6,e,null,t)).lanes=n,e}function zu(e,t,n){return(t=Ru(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bu(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uu(e,t,n,r,a,i,o,s,l){return e=new Bu(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ru(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ni(i),e}function Wu(e){if(!e)return _a;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ra(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ra(n))return La(e,n,t)}return t}function Vu(e,t,n,r,a,i,o,s,l){return(e=Uu(n,r,!0,e,0,i,0,s,l)).context=Wu(null),n=e.current,(i=Oi(r=tu(),a=nu(n))).callback=void 0!==t&&null!==t?t:null,Di(n,i,a),e.current.lanes=a,gt(e,a,r),au(e,r),e}function Zu(e,t,n,r){var a=t.current,i=tu(),o=nu(a);return n=Wu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oi(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Di(a,t,o))&&(ru(e,a,o,i),Li(e,a,o)),o}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}Tl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Aa.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Is(t),fi();break;case 5:io(t);break;case 1:Ra(t.type)&&Pa(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ca(gi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ca(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Ca(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ca(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ca(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ai&&0!==(1048576&t.flags)&&Qa(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Zs(e,t),e=t.pendingProps;var a=Na(t,Ma.current);Ti(t,n),a=To(null,t,r,e,a,n);var o=Eo();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ra(r)?(o=!0,Pa(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ni(t),a.updater=Ui,t.stateNode=a,a._reactInternals=t,Hi(t,r,e,n),t=As(null,t,r,!0,o,n)):(t.tag=0,ai&&o&&ei(t),ws(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Zs(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Ou(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===N)return 14}return 2}(r),e=vi(r,e),a){case 0:t=_s(null,t,r,e,n);break e;case 1:t=Ms(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,vi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,_s(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ms(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 3:e:{if(Is(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,Ri(e,t),Fi(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ns(e,t,r,n,a=cs(Error(i(423)),t));break e}if(r!==a){t=Ns(e,t,r,n,a=cs(Error(i(424)),t));break e}for(ri=ua(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=$i(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===a){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return io(t),null===e&&ui(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),Cs(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ui(t),null;case 13:return js(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ki(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ks(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Ca(gi,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Aa.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Oi(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Si(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Si(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ti(t,n),r=r(a=Ei(a)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return a=vi(r=t.type,t.pendingProps),Ss(e,t,r,a=vi(r.type,a),n);case 15:return Ts(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:vi(r,a),Zs(e,t),t.tag=1,Ra(r)?(e=!0,Pa(t)):e=!1,Ti(t,n),Vi(t,r,a),Hi(t,r,a,n),As(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Es(e,t,n)}throw Error(i(156,t.tag))};var Xu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function Ku(e){this._internalRoot=e}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qu(){}function ec(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Hu(o);s.call(e)}}Zu(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Hu(o);i.call(e)}}var o=Vu(t,r,e,0,null,!1,0,"",Qu);return e._reactRootContainer=o,e[pa]=o.current,Wr(8===e.nodeType?e.parentNode:e),du(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Hu(l);s.call(e)}}var l=Uu(e,0,!1,null,0,!1,0,"",Qu);return e._reactRootContainer=l,e[pa]=l.current,Wr(8===e.nodeType?e.parentNode:e),du((function(){Zu(t,l,n,r)})),l}(n,t,e,a,r);return Hu(o)}Ku.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Zu(e,t,null,null)},Ku.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du((function(){Zu(null,e,null,null)})),t[pa]=null}},Ku.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),au(t,$e()),0===(6&Al)&&(Vl=$e()+500,Wa()))}break;case 13:du((function(){var t=Ai(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),qu(e,1)}},kt=function(e){if(13===e.tag){var t=Ai(e,134217728);if(null!==t)ru(t,e,134217728,tu());qu(e,134217728)}},St=function(e){if(13===e.tag){var t=nu(e),n=Ai(e,t);if(null!==n)ru(n,e,t,tu());qu(e,t)}},Tt=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(i(90));q(r),J(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=cu,Ae=du;var tc={usingClientEntryPoint:!1,Events:[ba,xa,wa,Ce,_e,cu]},nc={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{at=ac.inject(rc),it=ac}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$u(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$u(e))throw Error(i(299));var n=!1,r="",a=Xu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Uu(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Yu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return du(e)},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(i(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$u(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=Xu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vu(t,null,e,1,null!=n?n:null,a,0,o,s),e[pa]=t.current,Wr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Ku(t)},t.render=function(e,t,n){if(!Ju(t))throw Error(i(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(i(40));return!!e._reactRootContainer&&(du((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ju(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.s=r.createRoot,r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n=60103,r=60106,a=60107,i=60108,o=60114,s=60109,l=60110,u=60112,c=60113,d=60120,h=60115,f=60116,p=60121,m=60122,v=60117,g=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),a=b("react.fragment"),i=b("react.strict_mode"),o=b("react.profiler"),s=b("react.provider"),l=b("react.context"),u=b("react.forward_ref"),c=b("react.suspense"),d=b("react.suspense_list"),h=b("react.memo"),f=b("react.lazy"),p=b("react.block"),m=b("react.server.block"),v=b("react.fundamental"),g=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case o:case i:case c:case d:return e;default:switch(e=e&&e.$$typeof){case l:case u:case f:case h:case s:return e;default:return t}}case r:return t}}}},7441:function(e,t,n){"use strict";n(1372)},5555:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),s=(r=o)&&r.__esModule?r:{default:r},l=n(8159);function u(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var h=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.isFileDialogActive=!1,r.composeHandlers=function(e){return r.props.disabled?null:e},r.onDocumentDrop=function(e){r.node&&r.node.contains(e.target)||(e.preventDefault(),r.dragTargets=[])},r.onDragStart=function(e){var t=r.props.onDragStart;t&&t.call(r,e)},r.onDragEnter=function(e){var t=r.props.onDragEnter;e.preventDefault(),-1===r.dragTargets.indexOf(e.target)&&r.dragTargets.push(e.target);(0,l.getDataTransferItems)(e);t&&t.call(r,e)},r.onDragOver=function(e){var t=r.props.onDragOver;e.preventDefault(),e.stopPropagation();try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&t.call(r,e),!1},r.onDragLeave=function(e){var t=r.props.onDragLeave;e.preventDefault(),r.dragTargets=r.dragTargets.filter((function(t){return t!==e.target&&r.node.contains(t)})),r.dragTargets.length>0||t&&t.call(r,e)},r.onDrop=function(e){var t=r.props,n=t.onDrop,a=t.onDropAccepted,i=t.onDropRejected,o=t.multiple,s=t.disablePreview,u=t.minSize,d=t.maxSize,h=t.accept,f=(0,l.getDataTransferItems)(e),p=[],m=[];e.preventDefault(),0!==f.length?(r.dragTargets=[],r.isFileDialogActive=!1,f.forEach((function(e){if(!s)try{e.preview=window.URL.createObjectURL(e)}catch(t){0}(0,l.fileAccepted)(e,h)&&(0,l.fileMatchSize)(e,d,u)?p.push(e):m.push(e)})),o||m.push.apply(m,c(p.splice(1))),n&&n.call(r,p,m,[],e),m.length>0&&i&&i.call(r,m,e),p.length>0&&a&&a.call(r,p,e)):r.onLink(e)},r.onClick=function(e){var t=r.props,n=t.onClick;t.disableClick||(e.stopPropagation(),n&&n.call(r,e),setTimeout(r.open.bind(r),0))},r.onInputElementClick=function(e){var t=r.props.inputProps;e.stopPropagation(),t&&t.onClick&&t.onClick()},r.onFileDialogCancel=function(){var e=r.props.onFileDialogCancel,t=r.fileInputEl,n=r.isFileDialogActive;e&&n&&setTimeout((function(){t.files.length||(n=!1,e())}),300)},r.setRef=function(e){r.node=e},r.setRefs=function(e){r.fileInputEl=e},r.onLink=function(e){var t=r.props,n=t.onDrop,a=t.accept;if(a){var i=a.match(/(\.[^.]+)(?=[,]|$)/gi);if(i){var o="(https://|http://)((?!http).)*("+i.join("|")+")",s=new RegExp(o,"gi"),l=[];if(e.dataTransfer){var u=decodeURIComponent(e.dataTransfer.getData("text/uri-list")).match(s),d=e.dataTransfer.getData("text/html").match(s);u?l=[].concat(c(u)):d&&(l=[].concat(c(d.filter((function(e){return-1===e.indexOf('"')})).map((function(e){return decodeURIComponent(e)})))))}else l=[].concat(c(decodeURIComponent(e.target.value).match(s)));n&&n([],[],l,e)}else n&&n([],[],[],e)}else n&&n([],[],[],e)},d(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.props.preventDropOnDocument;this.dragTargets=[],e&&(document.addEventListener("dragover",l.onDocumentDragOver,!1),document.addEventListener("drop",this.onDocumentDrop,!1)),this.fileInputEl.addEventListener("click",this.onInputElementClick,!1),document.body.onfocus=this.onFileDialogCancel}},{key:"componentWillUnmount",value:function(){this.props.preventDropOnDocument&&(document.removeEventListener("dragover",l.onDocumentDragOver),document.removeEventListener("drop",this.onDocumentDrop)),this.fileInputEl.removeEventListener("click",this.onInputElementClick,!1),document.body.onfocus=null}},{key:"open",value:function(){this.isFileDialogActive=!0,this.fileInputEl.value=null,this.fileInputEl.click()}},{key:"render",value:function(){var e=this.props,t=e.accept,n=e.children,r=e.disabled,i=e.multiple,o=u(e,["accept","children","disabled","multiple"]),c=(o.preventDropOnDocument,o.disablePreview,o.disableClick,o.maxSize,o.minSize,o.inputProps,o.onDropAccepted,o.onDropRejected,o.onFileDialogCancel,u(o,["preventDropOnDocument","disablePreview","disableClick","maxSize","minSize","inputProps","onDropAccepted","onDropRejected","onFileDialogCancel"]));return s.default.createElement("div",a({},c,{onClick:this.composeHandlers(this.onClick),onDragStart:this.composeHandlers(this.onDragStart),onDragEnter:this.composeHandlers(this.onDragEnter),onDragOver:this.composeHandlers(this.onDragOver),onDragLeave:this.composeHandlers(this.onDragLeave),onDrop:this.composeHandlers(this.onDrop),ref:this.setRef,"aria-disabled":r}),n,s.default.createElement("input",{disabled:r,accept:t,type:"file",style:{display:"none"},multiple:l.supportMultiple&&i,ref:this.setRefs,onChange:this.onDrop,autoComplete:"off"}))}}]),t}(o.Component);h.defaultProps={preventDropOnDocument:!0,disabled:!1,disablePreview:!1,disableClick:!1,multiple:!0,maxSize:1/0,minSize:0},t.default=h},5203:function(e,t,n){"use strict";var r,a=n(5555),i=(r=a)&&r.__esModule?r:{default:r};t.Z=i.default},8159:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDataTransferItems=function(e){var t=[];if(e.dataTransfer){var n=e.dataTransfer;if(n.files&&n.files.length)t=n.files;else if(n.items&&n.items.length)return Array.prototype.slice.call(n.items).filter((function(e){return"file"===e.kind}))}else e.target&&e.target.files&&(t=e.target.files);return Array.prototype.slice.call(t)},t.fileAccepted=n,t.fileMatchSize=function(e,t,n){return e.size<=t&&e.size>=n},t.allFilesAccepted=function(e,t){return e.every((function(e){return n(e,t)}))},t.onDocumentDragOver=function(e){e.preventDefault()};t.supportMultiple="undefined"===typeof document||!document||!document.createElement||"multiple"in document.createElement("input");function n(e,t){return"application/x-moz-file"===e.type||function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",a=e.type||"",i=a.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();return"."===t.charAt(0)?r.toLowerCase().endsWith(t.toLowerCase()):/\/\*$/.test(t)?i===t.replace(/\/.*$/,""):a===t}))}return!0}(e,t)}},2120:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(5943));t.Notifications=a.default;var i=r(n(2932)).default.addNotification;t.default=i},5943:function(e,t,n){"use strict";var r=n(6690).default,a=n(9728).default,i=n(1655).default,o=n(6389).default,s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=s(n(2791)),u=s(n(2932));n(7969);var c=s(n(4788)),d=function(e){i(n,e);var t=o(n);function n(){var e;return r(this,n),(e=t.apply(this,arguments)).state={value:[]},e}return a(n,[{key:"componentDidMount",value:function(){var e=this;u.default.addListener((function(t){return e.setState({value:t})}))}},{key:"render",value:function(){var e=this.props.position,t="rpn-notification-holder ".concat(e||"top-middle"," supertest");return l.default.createElement("div",{className:t},this.state.value.map((function(e,t){return l.default.createElement(c.default,{key:t,closeNotification:u.default.popAndPush,onClick:e.onClick,id:e.id,theme:e.theme,title:e.title,subtitle:e.subtitle,closeButton:e.closeButton,message:e.message,styling:e.styling})})))}}]),n}(l.default.Component);t.default=d},4788:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(2791));t.default=function(e){var t=e.title,n=e.subtitle,r=e.message,i=e.theme,o=e.id,s=e.closeNotification,l=e.styling,u=e.closeButton,c=e.onClick,d={},h={};return l&&(d.backgroundColor=l.backgroundTop,d.color=l.colorTop,h.backgroundColor=l.backgroundBottom,h.color=l.colorBottom),a.default.createElement("div",{className:"rpn-notification-card ".concat(i),onClick:c},a.default.createElement("div",{className:"rpn-notification-card-top ".concat(i),style:Object.keys(d).length?d:void 0},a.default.createElement("span",null,t),a.default.createElement("span",{className:"rpn-notification-card-close ".concat(i),onClick:function(){return s(o)}},u||"close")),a.default.createElement("div",{className:"rpn-notification-card-bottom ".concat(i),style:Object.keys(h).length?h:void 0},a.default.createElement("span",{className:"subtitle"},n),a.default.createElement("span",{className:"message"},r)))}},2932:function(e,t,n){"use strict";var r=n(7061).default,a=n(9728).default,i=n(6690).default,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var s=a((function e(t){i(this,e),this.title=t.title,this.subtitle=t.subtitle,this.message=t.message,this.theme=t.theme,this.id=Math.random(),this.styling=t.styling,this.closeButton=t.closeButton,this.onClick=t.onClick}));t.PushNotification=s;var l=a((function e(){var t=this;i(this,e),this.Storage=[],this.Listener=function(){return t.Storage},this.popAndPush=function(e){for(var n=0;n<t.Storage.length;)t.Storage[n].id===e?t.Storage.splice(n,1):++n;t.Listener(t.Storage)},this.setTimer=function(e,n){setTimeout((function(){return t.popAndPush(e)}),n)},this.addListener=function(e){t.Listener=e},this.addNativeNotification=function(e){return o(t,void 0,void 0,r().mark((function t(){var n,a,i,o,s,l,u,c,d;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.title,a=e.subtitle,i=e.message,o=e.duration,s=e.icon,l=e.vibrate,u=e.silent,c=e.onClick,"default"!==Notification.permission&&"denied"!==Notification.permission){t.next=4;break}return t.next=4,Notification.requestPermission();case 4:"granted"===Notification.permission&&((d=new Notification(n,{body:i,data:a,icon:s,vibrate:l,silent:u})).onclick=c||null,setTimeout(d.close.bind(d),o||3e3));case 5:case"end":return t.stop()}}),t)})))},this.addWebNotification=function(e){var n=e.title,r=e.subtitle,a=e.message,i=e.theme,o=e.duration,l=e.backgroundBottom,u=e.backgroundTop,c=e.colorBottom,d=e.colorTop,h=e.closeButton,f=e.onClick,p=new s({title:n,subtitle:r,message:a,theme:i,styling:{backgroundTop:u,backgroundBottom:l,colorTop:d,colorBottom:c},closeButton:h,onClick:f});t.Storage.push(p),t.setTimer(p.id,o||3e3),t.Listener(t.Storage)},this.addNotification=function(e){return o(t,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.native){t.next=3;break}return t.abrupt("return",this.addNativeNotification(e));case 3:return t.abrupt("return",this.addWebNotification(e));case 4:case"end":return t.stop()}}),t,this)})))}}));t.default=new l},1276:function(e,t,n){var r,a,i,o;e.exports=(r=n(2007),a=n(2791),i=n(354),o=n(9590),function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=r(n(1)),d=n(2),h=r(d),f=r(n(3)),p=r(n(4)),m=function(e){function t(){var e,n,r;i(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r._sigPad=null,r._excludeOurProps=function(){var e=r.props;return e.canvasProps,e.clearOnResize,a(e,["canvasProps","clearOnResize"])},r.getCanvas=function(){return r._canvas},r.getTrimmedCanvas=function(){var e=document.createElement("canvas");return e.width=r._canvas.width,e.height=r._canvas.height,e.getContext("2d").drawImage(r._canvas,0,0),(0,p.default)(e)},r.getSignaturePad=function(){return r._sigPad},r._checkClearOnResize=function(){r.props.clearOnResize&&r._resizeCanvas()},r._resizeCanvas=function(){var e=r.props.canvasProps||{},t=e.width,n=e.height;if(!t||!n){var a=r._canvas,i=Math.max(window.devicePixelRatio||1,1);t||(a.width=a.offsetWidth*i),n||(a.height=a.offsetHeight*i),a.getContext("2d").scale(i,i),r.clear()}},r.on=function(){return window.addEventListener("resize",r._checkClearOnResize),r._sigPad.on()},r.off=function(){return window.removeEventListener("resize",r._checkClearOnResize),r._sigPad.off()},r.clear=function(){return r._sigPad.clear()},r.isEmpty=function(){return r._sigPad.isEmpty()},r.fromDataURL=function(e,t){return r._sigPad.fromDataURL(e,t)},r.toDataURL=function(e,t){return r._sigPad.toDataURL(e,t)},r.fromData=function(e){return r._sigPad.fromData(e)},r.toData=function(){return r._sigPad.toData()},o(r,n)}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this._sigPad=new f.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var e=this,t=this.props.canvasProps;return h.default.createElement("canvas",l({ref:function(t){e._canvas=t}},t))}}]),t}(d.Component);m.propTypes={velocityFilterWeight:c.default.number,minWidth:c.default.number,maxWidth:c.default.number,minDistance:c.default.number,dotSize:c.default.oneOfType([c.default.number,c.default.func]),penColor:c.default.string,throttle:c.default.number,onEnd:c.default.func,onBegin:c.default.func,canvasProps:c.default.object,clearOnResize:c.default.bool},m.defaultProps={clearOnResize:!0},t.default=m},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t){e.exports=i},function(e,t){e.exports=o}]))},97:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var l=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return a(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,s()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),a=e.minScreenshotWidth!==t.minScreenshotWidth,i=e.minScreenshotHeight!==t.minScreenshotHeight;(r||a||i)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,a=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var i=r/a;a=(r=n.minScreenshotWidth||this.video.clientWidth)/i,n.minScreenshotHeight&&a<n.minScreenshotHeight&&(r=(a=n.minScreenshotHeight)*i)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||a,this.ctx=this.canvas.getContext("2d")}var o=this.ctx,s=this.canvas;return o&&s&&(n.mirrored&&(o.translate(s.width,0),o.scale(-1,1)),o.imageSmoothingEnabled=n.imageSmoothing,o.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),n.mirrored&&(o.scale(-1,1),o.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,a){var i={video:"undefined"===typeof a||a};n.audio&&(i.audio="undefined"===typeof r||r),e.requestUserMediaId++;var o=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(i).then((function(n){e.unmounted||o!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var a=function(e){return{optional:[{sourceId:e}]}},i=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,o=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(o=e.id)}));var s=i(n.audioConstraints);s&&(t=s);var l=i(n.videoConstraints);l&&(o=l),r(a(t),a(o))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,a=n.audio,s=(n.forceScreenshotSourceSize,n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),l=n.style,u=void 0===l?{}:l,c=n.children,d=o(n,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),h=s?i(i({},u),{transform:(u.transform||"")+" scaleX(-1)"}):u,f={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",i({autoPlay:!0,src:t.src,muted:!a,playsInline:!0,ref:function(t){e.video=t},style:h},d)),c&&c(f))},t.defaultProps={audio:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=l},react:function(t,n){t.exports=e}}).default},e.exports=r(n(2791))},6374:function(e,t,n){"use strict";var r=n(2791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,i={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:u,ref:c,props:i,_owner:s.current}}t.Fragment=i,t.jsx=u,t.jsxs=u},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=b.prototype=new y;x.constructor=b,m(x,g.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,a)&&!T.hasOwnProperty(a)&&(i[a]=t[a]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===i[a]&&(i[a]=l[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===i?"."+M(l,0):i,w(o)?(a="",null!=e&&(a=e.replace(_,"$&/")+"/"),A(o,t,a,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(_,"$&/")+"/")+e)),t.push(o)),1;if(l=0,i=""===i?".":i+":",w(e))for(var u=0;u<e.length;u++){var c=i+M(s=e[u],u);l+=A(s,t,a,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=A(s=s.value,t,a,c=i+M(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],a=0;return A(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)k.call(t,u)&&!T.hasOwnProperty(u)&&(a[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},9864:function(e){function t(e){return"string"===typeof e?e.replace(/^0+|[^0-9kK]+/g,"").toUpperCase():""}e.exports={validate:function(e){if("string"!==typeof e)return!1;if(/^0+/.test(e))return!1;if(!/^0*(\d{1,3}(\.?\d{3})*)-?([\dkK])$/.test(e))return!1;e=t(e);for(var n=parseInt(e.slice(0,-1),10),r=0,a=1;n>0;)a=(a+n%10*(9-r++%6))%11,n=Math.floor(n/10);return(a>0?""+(a-1):"K")===e.slice(-1)},clean:t,format:function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{dots:!0};if(e=t(e),r.dots){n=e.slice(-4,-1)+"-"+e.substr(e.length-1);for(var a=4;a<e.length;a+=3)n=e.slice(-3-a,-a)+"."+n}else n=e.slice(0,-1)+"-"+e.substr(e.length-1);return n},getCheckDigit:function(e){var n=Array.from(t(e),Number);if(0===n.length||n.includes(NaN))throw new Error('"'.concat(e,'" as RUT is invalid'));var r=11-n.reverse().reduce((function(e,t,n){return e+t*(n%6+2)}),0)%11;return 10===r?"K":11===r?"0":r.toString()}}},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>i(l,n))u<a&&0>i(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<a&&0>i(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,m=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(v=!1,x(e),!m)if(null!==r(u))m=!0,O(k);else{var t=r(c);null!==t&&D(w,t.startTime-e)}}function k(e,n){m=!1,v&&(v=!1,y(C),C=-1),p=!0;var i=f;try{for(x(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(u)&&a(u),x(n)}else a(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&D(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,E=null,C=-1,_=5,M=-1;function A(){return!(t.unstable_now()-M<_)}function I(){if(null!==E){var e=t.unstable_now();M=e;var n=!0;try{n=E(!0,e)}finally{n?S():(T=!1,E=null)}}else T=!1}if("function"===typeof b)S=function(){b(I)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,R=N.port2;N.port1.onmessage=I,S=function(){R.postMessage(null)}}else S=function(){g(I,0)};function O(e){E=e,T||(T=!0,S())}function D(e,n){C=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(c,e),null===r(u)&&e===r(c)&&(v?(y(C),C=-1):v=!0,D(w,i-o))):(e.sortIndex=s,n(u,e),m||p||(m=!0,O(k))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6699:function(e,t,n){var r=n(2501),a=n(9112),i=n(2132),o=n(890),s=n(4113),l=n(1725),u=n(3411);u.alea=r,u.xor128=a,u.xorwow=i,u.xorshift7=o,u.xor4096=s,u.tychei=l,e.exports=u},2501:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.alea=l}(0,e=n.nmd(e),n.amdD)},1725:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.tychei=l}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xor128=l}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,i=-32;i<l;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xor4096=l}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xorshift7=l}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xorwow=l}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var r;!function(a,i){var o,s=this,l=256,u="random",c=i.pow(l,6),d=i.pow(2,52),h=2*d,f=l-1;function p(e,t,n){var r=[],f=y(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(l):(e=new Uint8Array(l),(s.crypto||s.msCrypto).getRandomValues(e)),b(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,b(a)]}}():e,3),r),p=new m(r),x=function(){for(var e=p.g(6),t=c,n=0;e<d;)e=(e+n)*l,t*=l,n=p.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|p.g(4)},x.quick=function(){return p.g(4)/4294967296},x.double=x,y(b(p.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,p),e.state=function(){return v(p,{})}),n?(i[u]=e,t):e})(x,f,"global"in t?t.global:this==i,t.state)}function m(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<l;)o[a]=a++;for(a=0;a<l;a++)o[a]=o[i=f&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=f&a+1],n=n*l+o[f&(o[a]=o[i=f&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(l)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(g(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function y(e,t){for(var n,r=e+"",a=0;a<r.length;)t[f&a]=f&(n^=19*t[f&a])+r.charCodeAt(a++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(i["seed"+u]=p,y(i.random(),a),e.exports){e.exports=p;try{o=n(5042)}catch(x){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}([],Math)},9590:function(e){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e){var t=e.getContext("2d"),n=e.width,r=e.height,a=t.getImageData(0,0,n,r).data,s=i(!0,n,r,a),l=i(!1,n,r,a),u=o(!0,n,r,a),c=o(!1,n,r,a)-u+1,d=l-s+1,h=t.getImageData(u,s,c,d);return e.width=c,e.height=d,t.clearRect(0,0,c,d),t.putImageData(h,0,0),e}function r(e,t,n,r){return{red:r[4*(n*t+e)],green:r[4*(n*t+e)+1],blue:r[4*(n*t+e)+2],alpha:r[4*(n*t+e)+3]}}function a(e,t,n,a){return r(e,t,n,a).alpha}function i(e,t,n,r){for(var i=e?1:-1,o=e?0:n-1;e?o<n:o>-1;o+=i)for(var s=0;s<t;s++)if(a(s,o,t,r))return o;return null}function o(e,t,n,r){for(var i=e?1:-1,o=e?0:t-1;e?o<t:o>-1;o+=i)for(var s=0;s<n;s++)if(a(o,s,t,r))return o;return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}])},1338:function(e,t,n){var r;!function(a,i){"use strict";var o="function",s="undefined",l="object",u="string",c="model",d="name",h="type",f="vendor",p="version",m="architecture",v="console",g="mobile",y="tablet",b="smarttv",x="wearable",w="embedded",k="Amazon",S="Apple",T="ASUS",E="BlackBerry",C="Browser",_="Chrome",M="Firefox",A="Google",I="Huawei",N="LG",R="Microsoft",O="Motorola",D="Opera",L="Samsung",P="Sony",F="Xiaomi",j="Zebra",z="Facebook",B=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},U=function(e,t){return typeof e===u&&-1!==W(t).indexOf(W(e))},W=function(e){return e.toLowerCase()},V=function(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===s?e:e.substring(0,255)},Z=function(e,t){for(var n,r,a,s,u,c,d=0;d<t.length&&!u;){var h=t[d],f=t[d+1];for(n=r=0;n<h.length&&!u;)if(u=h[n++].exec(e))for(a=0;a<f.length;a++)c=u[++r],typeof(s=f[a])===l&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,c):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=c?c.replace(s[1],s[2]):i:this[s[0]]=c?s[1].call(this,c,s[2]):i:4===s.length&&(this[s[0]]=c?s[3].call(this,c.replace(s[1],s[2])):i):this[s]=c||i;d+=2}},H=function(e,t){for(var n in t)if(typeof t[n]===l&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(U(t[n][r],e))return"?"===n?i:n}else if(U(t[n],e))return"?"===n?i:n;return e},G={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,D+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[d,D]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UC"+C]],[/\bqbcore\/([\w\.]+)/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+C],p],[/\bfocus\/([\w\.]+)/i],[p,[d,M+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,D+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,D+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI "+C]],[/fxios\/([-\w\.]+)/i],[p,[d,M]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+C]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+C],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,z],p],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,_+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,_+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android "+C]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,H,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,M+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,W]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,"",W]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,W]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[f,L],[h,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[f,L],[h,g]],[/\((ip(?:hone|od)[\w ]*);/i],[c,[f,S],[h,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[f,S],[h,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[f,I],[h,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[c,[f,I],[h,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[f,F],[h,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[f,F],[h,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[f,"OPPO"],[h,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[f,"Vivo"],[h,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[f,"Realme"],[h,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[f,O],[h,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[f,O],[h,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[f,N],[h,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[f,N],[h,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[f,"Lenovo"],[h,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[f,"Nokia"],[h,g]],[/(pixel c)\b/i],[c,[f,A],[h,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[f,A],[h,g]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[f,P],[h,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[f,P],[h,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[f,"OnePlus"],[h,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[f,k],[h,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[f,k],[h,g]],[/(playbook);[-\w\),; ]+(rim)/i],[c,f,[h,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[f,E],[h,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[f,T],[h,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[f,T],[h,g]],[/(nexus 9)/i],[c,[f,"HTC"],[h,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[f,[c,/_/g," "],[h,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[f,"Acer"],[h,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[f,"Meizu"],[h,g]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[f,"Sharp"],[h,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,c,[h,g]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,c,[h,y]],[/(surface duo)/i],[c,[f,R],[h,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[f,"Fairphone"],[h,g]],[/(u304aa)/i],[c,[f,"AT&T"],[h,g]],[/\bsie-(\w*)/i],[c,[f,"Siemens"],[h,g]],[/\b(rct\w+) b/i],[c,[f,"RCA"],[h,y]],[/\b(venue[\d ]{2,7}) b/i],[c,[f,"Dell"],[h,y]],[/\b(q(?:mv|ta)\w+) b/i],[c,[f,"Verizon"],[h,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[f,"Barnes & Noble"],[h,y]],[/\b(tm\d{3}\w+) b/i],[c,[f,"NuVision"],[h,y]],[/\b(k88) b/i],[c,[f,"ZTE"],[h,y]],[/\b(nx\d{3}j) b/i],[c,[f,"ZTE"],[h,g]],[/\b(gen\d{3}) b.+49h/i],[c,[f,"Swiss"],[h,g]],[/\b(zur\d{3}) b/i],[c,[f,"Swiss"],[h,y]],[/\b((zeki)?tb.*\b) b/i],[c,[f,"Zeki"],[h,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],c,[h,y]],[/\b(ns-?\w{0,9}) b/i],[c,[f,"Insignia"],[h,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[f,"NextBook"],[h,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],c,[h,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],c,[h,g]],[/\b(ph-1) /i],[c,[f,"Essential"],[h,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[f,"Envizen"],[h,y]],[/\b(trio[-\w\. ]+) b/i],[c,[f,"MachSpeed"],[h,y]],[/\btu_(1491) b/i],[c,[f,"Rotor"],[h,y]],[/(shield[\w ]+) b/i],[c,[f,"Nvidia"],[h,y]],[/(sprint) (\w+)/i],[f,c,[h,g]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[f,R],[h,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[f,j],[h,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[f,j],[h,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,c,[h,v]],[/droid.+; (shield) bui/i],[c,[f,"Nvidia"],[h,v]],[/(playstation [345portablevi]+)/i],[c,[f,P],[h,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[f,R],[h,v]],[/smart-tv.+(samsung)/i],[f,[h,b]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[f,L],[h,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,N],[h,b]],[/(apple) ?tv/i],[f,[c,S+" TV"],[h,b]],[/crkey/i],[[c,_+"cast"],[f,A],[h,b]],[/droid.+aft(\w)( bui|\))/i],[c,[f,k],[h,b]],[/\(dtv[\);].+(aquos)/i],[c,[f,"Sharp"],[h,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[f,V],[c,V],[h,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,b]],[/((pebble))app/i],[f,c,[h,x]],[/droid.+; (glass) \d/i],[c,[f,A],[h,x]],[/droid.+; (wt63?0{2,3})\)/i],[c,[f,j],[h,x]],[/(quest( 2)?)/i],[c,[f,z],[h,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[h,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[h,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[h,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,y]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[h,g]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[p,H,G]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[p,H,G]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,E]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,M+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[d,_+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],p],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,p]]},X=function e(t,n){if(typeof t===l&&(n=t,t=i),!(this instanceof e))return new e(t,n).getResult();var r=t||(typeof a!==s&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),o=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(q,n):q;return this.getBrowser=function(){var e,t={};return t[d]=i,t[p]=i,Z.call(t,r,o.browser),t.major=typeof(e=t.version)===u?e.replace(/[^\d\.]/g,"").split(".")[0]:i,t},this.getCPU=function(){var e={};return e[m]=i,Z.call(e,r,o.cpu),e},this.getDevice=function(){var e={};return e[f]=i,e[c]=i,e[h]=i,Z.call(e,r,o.device),e},this.getEngine=function(){var e={};return e[d]=i,e[p]=i,Z.call(e,r,o.engine),e},this.getOS=function(){var e={};return e[d]=i,e[p]=i,Z.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===u&&e.length>255?V(e,255):e,this},this.setUA(r),this};X.VERSION="1.0.2",X.BROWSER=B([d,p,"major"]),X.CPU=B([m]),X.DEVICE=B([c,f,h,v,g,b,y,x,w]),X.ENGINE=X.OS=B([d,p]),typeof t!==s?(e.exports&&(t=e.exports=X),t.UAParser=X):n.amdO?(r=function(){return X}.call(t,n,t,e))===i||(e.exports=r):typeof a!==s&&(a.UAParser=X);var Y=typeof a!==s&&(a.jQuery||a.Zepto);if(Y&&!Y.ua){var K=new X;Y.ua=K.getResult(),Y.ua.get=function(){return K.getUA()},Y.ua.set=function(e){K.setUA(e);var t=K.getResult();for(var n in t)Y.ua[n]=t[n]}}}("object"===typeof window?window:this)},5590:function(e){"use strict";var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r=64,a={},i=0,o=0;function s(e){var t="";do{t=n[e%r]+t,e=Math.floor(e/r)}while(e>0);return t}function l(){var e=s(+new Date);return e!==t?(i=0,t=e):e+"."+s(i++)}for(;o<r;o++)a[n[o]]=o;l.encode=s,l.decode=function(e){var t=0;for(o=0;o<e.length;o++)t=t*r+a[e.charAt(o)];return t},e.exports=l},1060:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===i)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},2798:function(e,t,n){var r=n(8018),a=n(4234).each;function i(e,t){this.query=e,this.isUnconditional=t,this.handlers=[],this.mql=window.matchMedia(e);var n=this;this.listener=function(e){n.mql=e.currentTarget||e,n.assess()},this.mql.addListener(this.listener)}i.prototype={constuctor:i,addHandler:function(e){var t=new r(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(e){var t=this.handlers;a(t,(function(n,r){if(n.equals(e))return n.destroy(),!t.splice(r,1)}))},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){a(this.handlers,(function(e){e.destroy()})),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var e=this.matches()?"on":"off";a(this.handlers,(function(t){t[e]()}))}},e.exports=i},3111:function(e,t,n){var r=n(2798),a=n(4234),i=a.each,o=a.isFunction,s=a.isArray;function l(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}l.prototype={constructor:l,register:function(e,t,n){var a=this.queries,l=n&&this.browserIsIncapable;return a[e]||(a[e]=new r(e,l)),o(t)&&(t={match:t}),s(t)||(t=[t]),i(t,(function(t){o(t)&&(t={match:t}),a[e].addHandler(t)})),this},unregister:function(e,t){var n=this.queries[e];return n&&(t?n.removeHandler(t):(n.clear(),delete this.queries[e])),this}},e.exports=l},8018:function(e){function t(e){this.options=e,!e.deferSetup&&this.setup()}t.prototype={constructor:t,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},e.exports=t},4234:function(e){e.exports={isFunction:function(e){return"function"===typeof e},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},each:function(e,t){for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);}}},1254:function(e,t,n){var r=n(3111);e.exports=new r},148:function(e,t,n){var r=n(2626),a=function(e){var t="",n=Object.keys(e);return n.forEach((function(a,i){var o=e[a];(function(e){return/[height|width]$/.test(e)})(a=r(a))&&"number"===typeof o&&(o+="px"),t+=!0===o?a:!1===o?"not "+a:"("+a+": "+o+")",i<n.length-1&&(t+=" and ")})),t};e.exports=function(e){var t="";return"string"===typeof e?e:e instanceof Array?(e.forEach((function(n,r){t+=a(n),r<e.length-1&&(t+=", ")})),t):a(e)}},2982:function(e,t,n){var r=NaN,a="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,h=c||d||Function("return this")(),f=Object.prototype.toString,p=Math.max,m=Math.min,v=function(){return h.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==a}(e))return r;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=s.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):o.test(e)?r:+e}e.exports=function(e,t,n){var r,a,i,o,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,i=a;return r=a=void 0,u=t,o=e.apply(i,n)}function b(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=i}function x(){var e=v();if(b(e))return w(e);s=setTimeout(x,function(e){var n=t-(e-l);return d?m(n,i-(e-u)):n}(e))}function w(e){return s=void 0,h&&r?f(e):(r=a=void 0,o)}function k(){var e=v(),n=b(e);if(r=arguments,a=this,l=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(x,t),c?f(e):o}(l);if(d)return s=setTimeout(x,t),f(l)}return void 0===s&&(s=setTimeout(x,t)),o}return t=y(t)||0,g(n)&&(c=!!n.leading,i=(d="maxWait"in n)?p(y(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),k.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=a=s=void 0},k.flush=function(){return void 0===s?o:w(v())},k}},2839:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,a){for(var i,o,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in i=Object(arguments[l]))n.call(i,u)&&(s[u]=i[u]);if(t){o=t(i);for(var c=0;c<o.length;c++)r.call(i,o[c])&&(s[o[c]]=i[o[c]])}}return s}},4719:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NextArrow=t.PrevArrow=void 0;var r=o(n(9653)),a=o(n(1060)),i=n(7129);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var b=function(e){m(n,e);var t=g(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"clickHandler",value:function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)}},{key:"render",value:function(){var e={"slick-arrow":!0,"slick-prev":!0},t=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(0===this.props.currentSlide||this.props.slideCount<=this.props.slidesToShow)&&(e["slick-disabled"]=!0,t=null);var n={key:"0","data-role":"none",className:(0,a.default)(e),style:{display:"block"},onClick:t},i={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount};return this.props.prevArrow?r.default.cloneElement(this.props.prevArrow,c(c({},n),i)):r.default.createElement("button",l({key:"0",type:"button"},n)," ","Previous")}}]),n}(r.default.PureComponent);t.PrevArrow=b;var x=function(e){m(n,e);var t=g(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"clickHandler",value:function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)}},{key:"render",value:function(){var e={"slick-arrow":!0,"slick-next":!0},t=this.clickHandler.bind(this,{message:"next"});(0,i.canGoNext)(this.props)||(e["slick-disabled"]=!0,t=null);var n={key:"1","data-role":"none",className:(0,a.default)(e),style:{display:"block"},onClick:t},o={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount};return this.props.nextArrow?r.default.cloneElement(this.props.nextArrow,c(c({},n),o)):r.default.createElement("button",l({key:"1",type:"button"},n)," ","Next")}}]),n}(r.default.PureComponent);t.NextArrow=x},1651:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(9653))&&r.__esModule?r:{default:r};var i={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(e){return a.default.createElement("ul",{style:{display:"block"}},e)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(e){return a.default.createElement("button",null,e+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0};t.default=i},8724:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dots=void 0;var r=o(n(9653)),a=o(n(1060)),i=n(7129);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(f,e);var t,n,o,s=h(f);function f(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),s.apply(this,arguments)}return t=f,n=[{key:"clickHandler",value:function(e,t){t.preventDefault(),this.props.clickHandler(e)}},{key:"render",value:function(){for(var e,t=this.props,n=t.onMouseEnter,o=t.onMouseOver,s=t.onMouseLeave,c=t.infinite,d=t.slidesToScroll,h=t.slidesToShow,f=t.slideCount,p=t.currentSlide,m=(e={slideCount:f,slidesToScroll:d,slidesToShow:h,infinite:c}).infinite?Math.ceil(e.slideCount/e.slidesToScroll):Math.ceil((e.slideCount-e.slidesToShow)/e.slidesToScroll)+1,v={onMouseEnter:n,onMouseOver:o,onMouseLeave:s},g=[],y=0;y<m;y++){var b=(y+1)*d-1,x=c?b:(0,i.clamp)(b,0,f-1),w=x-(d-1),k=c?w:(0,i.clamp)(w,0,f-1),S=(0,a.default)({"slick-active":c?p>=k&&p<=x:p===k}),T={message:"dots",index:y,slidesToScroll:d,currentSlide:p},E=this.clickHandler.bind(this,T);g=g.concat(r.default.createElement("li",{key:y,className:S},r.default.cloneElement(this.props.customPaging(y),{onClick:E})))}return r.default.cloneElement(this.props.appendDots(g),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:this.props.dotsClass},v))}}],n&&c(t.prototype,n),o&&c(t,o),f}(r.default.PureComponent);t.Dots=p},2346:function(e,t,n){"use strict";var r;t.Z=void 0;var a=((r=n(3172))&&r.__esModule?r:{default:r}).default;t.Z=a},6166:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};t.default=n},1660:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InnerSlider=void 0;var r=h(n(9653)),a=h(n(6166)),i=h(n(2982)),o=h(n(1060)),s=n(7129),l=n(1579),u=n(8724),c=n(4719),d=h(n(3941));function h(e){return e&&e.__esModule?e:{default:e}}function f(e){return f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function m(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var a=k(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"===typeof t))return t;return w(e)}(this,n)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(k,e);var t,n,h,v=x(k);function k(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),S(w(t=v.call(this,e)),"listRefHandler",(function(e){return t.list=e})),S(w(t),"trackRefHandler",(function(e){return t.track=e})),S(w(t),"adaptHeight",(function(){if(t.props.adaptiveHeight&&t.list){var e=t.list.querySelector('[data-index="'.concat(t.state.currentSlide,'"]'));t.list.style.height=(0,s.getHeight)(e)+"px"}})),S(w(t),"componentDidMount",(function(){if(t.props.onInit&&t.props.onInit(),t.props.lazyLoad){var e=(0,s.getOnDemandLazySlides)(g(g({},t.props),t.state));e.length>0&&(t.setState((function(t){return{lazyLoadedList:t.lazyLoadedList.concat(e)}})),t.props.onLazyLoad&&t.props.onLazyLoad(e))}var n=g({listRef:t.list,trackRef:t.track},t.props);t.updateState(n,!0,(function(){t.adaptHeight(),t.props.autoplay&&t.autoPlay("update")})),"progressive"===t.props.lazyLoad&&(t.lazyLoadTimer=setInterval(t.progressiveLazyLoad,1e3)),t.ro=new d.default((function(){t.state.animating?(t.onWindowResized(!1),t.callbackTimers.push(setTimeout((function(){return t.onWindowResized()}),t.props.speed))):t.onWindowResized()})),t.ro.observe(t.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),(function(e){e.onfocus=t.props.pauseOnFocus?t.onSlideFocus:null,e.onblur=t.props.pauseOnFocus?t.onSlideBlur:null})),window.addEventListener?window.addEventListener("resize",t.onWindowResized):window.attachEvent("onresize",t.onWindowResized)})),S(w(t),"componentWillUnmount",(function(){t.animationEndCallback&&clearTimeout(t.animationEndCallback),t.lazyLoadTimer&&clearInterval(t.lazyLoadTimer),t.callbackTimers.length&&(t.callbackTimers.forEach((function(e){return clearTimeout(e)})),t.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",t.onWindowResized):window.detachEvent("onresize",t.onWindowResized),t.autoplayTimer&&clearInterval(t.autoplayTimer),t.ro.disconnect()})),S(w(t),"componentDidUpdate",(function(e){if(t.checkImagesLoad(),t.props.onReInit&&t.props.onReInit(),t.props.lazyLoad){var n=(0,s.getOnDemandLazySlides)(g(g({},t.props),t.state));n.length>0&&(t.setState((function(e){return{lazyLoadedList:e.lazyLoadedList.concat(n)}})),t.props.onLazyLoad&&t.props.onLazyLoad(n))}t.adaptHeight();var a=g(g({listRef:t.list,trackRef:t.track},t.props),t.state),i=t.didPropsChange(e);i&&t.updateState(a,i,(function(){t.state.currentSlide>=r.default.Children.count(t.props.children)&&t.changeSlide({message:"index",index:r.default.Children.count(t.props.children)-t.props.slidesToShow,currentSlide:t.state.currentSlide}),t.props.autoplay?t.autoPlay("update"):t.pause("paused")}))})),S(w(t),"onWindowResized",(function(e){t.debouncedResize&&t.debouncedResize.cancel(),t.debouncedResize=(0,i.default)((function(){return t.resizeWindow(e)}),50),t.debouncedResize()})),S(w(t),"resizeWindow",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(Boolean(t.track&&t.track.node)){var n=g(g({listRef:t.list,trackRef:t.track},t.props),t.state);t.updateState(n,e,(function(){t.props.autoplay?t.autoPlay("update"):t.pause("paused")})),t.setState({animating:!1}),clearTimeout(t.animationEndCallback),delete t.animationEndCallback}})),S(w(t),"updateState",(function(e,n,a){var i=(0,s.initializedState)(e);e=g(g(g({},e),i),{},{slideIndex:i.currentSlide});var o=(0,s.getTrackLeft)(e);e=g(g({},e),{},{left:o});var l=(0,s.getTrackCSS)(e);(n||r.default.Children.count(t.props.children)!==r.default.Children.count(e.children))&&(i.trackStyle=l),t.setState(i,a)})),S(w(t),"ssrInit",(function(){if(t.props.variableWidth){var e=0,n=0,a=[],i=(0,s.getPreClones)(g(g(g({},t.props),t.state),{},{slideCount:t.props.children.length})),o=(0,s.getPostClones)(g(g(g({},t.props),t.state),{},{slideCount:t.props.children.length}));t.props.children.forEach((function(t){a.push(t.props.style.width),e+=t.props.style.width}));for(var l=0;l<i;l++)n+=a[a.length-1-l],e+=a[a.length-1-l];for(var u=0;u<o;u++)e+=a[u];for(var c=0;c<t.state.currentSlide;c++)n+=a[c];var d={width:e+"px",left:-n+"px"};if(t.props.centerMode){var h="".concat(a[t.state.currentSlide],"px");d.left="calc(".concat(d.left," + (100% - ").concat(h,") / 2 ) ")}return{trackStyle:d}}var f=r.default.Children.count(t.props.children),p=g(g(g({},t.props),t.state),{},{slideCount:f}),m=(0,s.getPreClones)(p)+(0,s.getPostClones)(p)+f,v=100/t.props.slidesToShow*m,y=100/m,b=-y*((0,s.getPreClones)(p)+t.state.currentSlide)*v/100;return t.props.centerMode&&(b+=(100-y*v/100)/2),{slideWidth:y+"%",trackStyle:{width:v+"%",left:b+"%"}}})),S(w(t),"checkImagesLoad",(function(){var e=t.list&&t.list.querySelectorAll&&t.list.querySelectorAll(".slick-slide img")||[],n=e.length,r=0;Array.prototype.forEach.call(e,(function(e){var a=function(){return++r&&r>=n&&t.onWindowResized()};if(e.onclick){var i=e.onclick;e.onclick=function(){i(),e.parentNode.focus()}}else e.onclick=function(){return e.parentNode.focus()};e.onload||(t.props.lazyLoad?e.onload=function(){t.adaptHeight(),t.callbackTimers.push(setTimeout(t.onWindowResized,t.props.speed))}:(e.onload=a,e.onerror=function(){a(),t.props.onLazyLoadError&&t.props.onLazyLoadError()}))}))})),S(w(t),"progressiveLazyLoad",(function(){for(var e=[],n=g(g({},t.props),t.state),r=t.state.currentSlide;r<t.state.slideCount+(0,s.getPostClones)(n);r++)if(t.state.lazyLoadedList.indexOf(r)<0){e.push(r);break}for(var a=t.state.currentSlide-1;a>=-(0,s.getPreClones)(n);a--)if(t.state.lazyLoadedList.indexOf(a)<0){e.push(a);break}e.length>0?(t.setState((function(t){return{lazyLoadedList:t.lazyLoadedList.concat(e)}})),t.props.onLazyLoad&&t.props.onLazyLoad(e)):t.lazyLoadTimer&&(clearInterval(t.lazyLoadTimer),delete t.lazyLoadTimer)})),S(w(t),"slideHandler",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.props,a=r.asNavFor,i=r.beforeChange,o=r.onLazyLoad,l=r.speed,u=r.afterChange,c=t.state.currentSlide,d=(0,s.slideHandler)(g(g(g({index:e},t.props),t.state),{},{trackRef:t.track,useCSS:t.props.useCSS&&!n})),h=d.state,f=d.nextState;if(h){i&&i(c,h.currentSlide);var p=h.lazyLoadedList.filter((function(e){return t.state.lazyLoadedList.indexOf(e)<0}));o&&p.length>0&&o(p),!t.props.waitForAnimate&&t.animationEndCallback&&(clearTimeout(t.animationEndCallback),u&&u(c),delete t.animationEndCallback),t.setState(h,(function(){a&&t.asNavForIndex!==e&&(t.asNavForIndex=e,a.innerSlider.slideHandler(e)),f&&(t.animationEndCallback=setTimeout((function(){var e=f.animating,n=m(f,["animating"]);t.setState(n,(function(){t.callbackTimers.push(setTimeout((function(){return t.setState({animating:e})}),10)),u&&u(h.currentSlide),delete t.animationEndCallback}))}),l))}))}})),S(w(t),"changeSlide",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=g(g({},t.props),t.state),a=(0,s.changeSlide)(r,e);if((0===a||a)&&(!0===n?t.slideHandler(a,n):t.slideHandler(a),t.props.autoplay&&t.autoPlay("update"),t.props.focusOnSelect)){var i=t.list.querySelectorAll(".slick-current");i[0]&&i[0].focus()}})),S(w(t),"clickHandler",(function(e){!1===t.clickable&&(e.stopPropagation(),e.preventDefault()),t.clickable=!0})),S(w(t),"keyHandler",(function(e){var n=(0,s.keyHandler)(e,t.props.accessibility,t.props.rtl);""!==n&&t.changeSlide({message:n})})),S(w(t),"selectHandler",(function(e){t.changeSlide(e)})),S(w(t),"disableBodyScroll",(function(){window.ontouchmove=function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1}})),S(w(t),"enableBodyScroll",(function(){window.ontouchmove=null})),S(w(t),"swipeStart",(function(e){t.props.verticalSwiping&&t.disableBodyScroll();var n=(0,s.swipeStart)(e,t.props.swipe,t.props.draggable);""!==n&&t.setState(n)})),S(w(t),"swipeMove",(function(e){var n=(0,s.swipeMove)(e,g(g(g({},t.props),t.state),{},{trackRef:t.track,listRef:t.list,slideIndex:t.state.currentSlide}));n&&(n.swiping&&(t.clickable=!1),t.setState(n))})),S(w(t),"swipeEnd",(function(e){var n=(0,s.swipeEnd)(e,g(g(g({},t.props),t.state),{},{trackRef:t.track,listRef:t.list,slideIndex:t.state.currentSlide}));if(n){var r=n.triggerSlideHandler;delete n.triggerSlideHandler,t.setState(n),void 0!==r&&(t.slideHandler(r),t.props.verticalSwiping&&t.enableBodyScroll())}})),S(w(t),"touchEnd",(function(e){t.swipeEnd(e),t.clickable=!0})),S(w(t),"slickPrev",(function(){t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"previous"})}),0))})),S(w(t),"slickNext",(function(){t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"next"})}),0))})),S(w(t),"slickGoTo",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e=Number(e),isNaN(e))return"";t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"index",index:e,currentSlide:t.state.currentSlide},n)}),0))})),S(w(t),"play",(function(){var e;if(t.props.rtl)e=t.state.currentSlide-t.props.slidesToScroll;else{if(!(0,s.canGoNext)(g(g({},t.props),t.state)))return!1;e=t.state.currentSlide+t.props.slidesToScroll}t.slideHandler(e)})),S(w(t),"autoPlay",(function(e){t.autoplayTimer&&clearInterval(t.autoplayTimer);var n=t.state.autoplaying;if("update"===e){if("hovered"===n||"focused"===n||"paused"===n)return}else if("leave"===e){if("paused"===n||"focused"===n)return}else if("blur"===e&&("paused"===n||"hovered"===n))return;t.autoplayTimer=setInterval(t.play,t.props.autoplaySpeed+50),t.setState({autoplaying:"playing"})})),S(w(t),"pause",(function(e){t.autoplayTimer&&(clearInterval(t.autoplayTimer),t.autoplayTimer=null);var n=t.state.autoplaying;"paused"===e?t.setState({autoplaying:"paused"}):"focused"===e?"hovered"!==n&&"playing"!==n||t.setState({autoplaying:"focused"}):"playing"===n&&t.setState({autoplaying:"hovered"})})),S(w(t),"onDotsOver",(function(){return t.props.autoplay&&t.pause("hovered")})),S(w(t),"onDotsLeave",(function(){return t.props.autoplay&&"hovered"===t.state.autoplaying&&t.autoPlay("leave")})),S(w(t),"onTrackOver",(function(){return t.props.autoplay&&t.pause("hovered")})),S(w(t),"onTrackLeave",(function(){return t.props.autoplay&&"hovered"===t.state.autoplaying&&t.autoPlay("leave")})),S(w(t),"onSlideFocus",(function(){return t.props.autoplay&&t.pause("focused")})),S(w(t),"onSlideBlur",(function(){return t.props.autoplay&&"focused"===t.state.autoplaying&&t.autoPlay("blur")})),S(w(t),"render",(function(){var e,n,a,i=(0,o.default)("slick-slider",t.props.className,{"slick-vertical":t.props.vertical,"slick-initialized":!0}),d=g(g({},t.props),t.state),h=(0,s.extractObject)(d,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),f=t.props.pauseOnHover;if(h=g(g({},h),{},{onMouseEnter:f?t.onTrackOver:null,onMouseLeave:f?t.onTrackLeave:null,onMouseOver:f?t.onTrackOver:null,focusOnSelect:t.props.focusOnSelect&&t.clickable?t.selectHandler:null}),!0===t.props.dots&&t.state.slideCount>=t.props.slidesToShow){var m=(0,s.extractObject)(d,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),v=t.props.pauseOnDotsHover;m=g(g({},m),{},{clickHandler:t.changeSlide,onMouseEnter:v?t.onDotsLeave:null,onMouseOver:v?t.onDotsOver:null,onMouseLeave:v?t.onDotsLeave:null}),e=r.default.createElement(u.Dots,m)}var y=(0,s.extractObject)(d,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);y.clickHandler=t.changeSlide,t.props.arrows&&(n=r.default.createElement(c.PrevArrow,y),a=r.default.createElement(c.NextArrow,y));var b=null;t.props.vertical&&(b={height:t.state.listHeight});var x=null;!1===t.props.vertical?!0===t.props.centerMode&&(x={padding:"0px "+t.props.centerPadding}):!0===t.props.centerMode&&(x={padding:t.props.centerPadding+" 0px"});var w=g(g({},b),x),k=t.props.touchMove,S={className:"slick-list",style:w,onClick:t.clickHandler,onMouseDown:k?t.swipeStart:null,onMouseMove:t.state.dragging&&k?t.swipeMove:null,onMouseUp:k?t.swipeEnd:null,onMouseLeave:t.state.dragging&&k?t.swipeEnd:null,onTouchStart:k?t.swipeStart:null,onTouchMove:t.state.dragging&&k?t.swipeMove:null,onTouchEnd:k?t.touchEnd:null,onTouchCancel:t.state.dragging&&k?t.swipeEnd:null,onKeyDown:t.props.accessibility?t.keyHandler:null},T={className:i,dir:"ltr",style:t.props.style};return t.props.unslick&&(S={className:"slick-list"},T={className:i}),r.default.createElement("div",T,t.props.unslick?"":n,r.default.createElement("div",p({ref:t.listRefHandler},S),r.default.createElement(l.Track,p({ref:t.trackRefHandler},h),t.props.children)),t.props.unslick?"":a,t.props.unslick?"":e)})),t.list=null,t.track=null,t.state=g(g({},a.default),{},{currentSlide:t.props.initialSlide,slideCount:r.default.Children.count(t.props.children)}),t.callbackTimers=[],t.clickable=!0,t.debouncedResize=null;var n=t.ssrInit();return t.state=g(g({},t.state),n),t}return t=k,(n=[{key:"didPropsChange",value:function(e){for(var t=!1,n=0,a=Object.keys(this.props);n<a.length;n++){var i=a[n];if(!e.hasOwnProperty(i)){t=!0;break}if("object"!==f(e[i])&&"function"!==typeof e[i]&&e[i]!==this.props[i]){t=!0;break}}return t||r.default.Children.count(this.props.children)!==r.default.Children.count(e.children)}}])&&y(t.prototype,n),h&&y(t,h),k}(r.default.Component);t.InnerSlider=T},3172:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(9653)),a=n(1660),i=l(n(148)),o=l(n(1651)),s=n(7129);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"===typeof t))return t;return v(e)}(this,n)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=(0,s.canUseDOM)()&&n(1254),x=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(d,e);var t,n,l,u=m(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),y(v(t=u.call(this,e)),"innerSliderRefHandler",(function(e){return t.innerSlider=e})),y(v(t),"slickPrev",(function(){return t.innerSlider.slickPrev()})),y(v(t),"slickNext",(function(){return t.innerSlider.slickNext()})),y(v(t),"slickGoTo",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.innerSlider.slickGoTo(e,n)})),y(v(t),"slickPause",(function(){return t.innerSlider.pause("paused")})),y(v(t),"slickPlay",(function(){return t.innerSlider.autoPlay("play")})),t.state={breakpoint:null},t._responsiveMediaHandlers=[],t}return t=d,(n=[{key:"media",value:function(e,t){b.register(e,t),this._responsiveMediaHandlers.push({query:e,handler:t})}},{key:"componentDidMount",value:function(){var e=this;if(this.props.responsive){var t=this.props.responsive.map((function(e){return e.breakpoint}));t.sort((function(e,t){return e-t})),t.forEach((function(n,r){var a;a=0===r?(0,i.default)({minWidth:0,maxWidth:n}):(0,i.default)({minWidth:t[r-1]+1,maxWidth:n}),(0,s.canUseDOM)()&&e.media(a,(function(){e.setState({breakpoint:n})}))}));var n=(0,i.default)({minWidth:t.slice(-1)[0]});(0,s.canUseDOM)()&&this.media(n,(function(){e.setState({breakpoint:null})}))}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach((function(e){b.unregister(e.query,e.handler)}))}},{key:"render",value:function(){var e,t,n=this;(e=this.state.breakpoint?"unslick"===(t=this.props.responsive.filter((function(e){return e.breakpoint===n.state.breakpoint})))[0].settings?"unslick":h(h(h({},o.default),this.props),t[0].settings):h(h({},o.default),this.props)).centerMode&&(e.slidesToScroll,e.slidesToScroll=1),e.fade&&(e.slidesToShow,e.slidesToScroll,e.slidesToShow=1,e.slidesToScroll=1);var i=r.default.Children.toArray(this.props.children);i=i.filter((function(e){return"string"===typeof e?!!e.trim():!!e})),e.variableWidth&&(e.rows>1||e.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),e.variableWidth=!1);for(var s=[],l=null,u=0;u<i.length;u+=e.rows*e.slidesPerRow){for(var d=[],f=u;f<u+e.rows*e.slidesPerRow;f+=e.slidesPerRow){for(var p=[],m=f;m<f+e.slidesPerRow&&(e.variableWidth&&i[m].props.style&&(l=i[m].props.style.width),!(m>=i.length));m+=1)p.push(r.default.cloneElement(i[m],{key:100*u+10*f+m,tabIndex:-1,style:{width:"".concat(100/e.slidesPerRow,"%"),display:"inline-block"}}));d.push(r.default.createElement("div",{key:10*u+f},p))}e.variableWidth?s.push(r.default.createElement("div",{key:u,style:{width:l}},d)):s.push(r.default.createElement("div",{key:u},d))}if("unslick"===e){var v="regular slider "+(this.props.className||"");return r.default.createElement("div",{className:v},i)}return s.length<=e.slidesToShow&&(e.unslick=!0),r.default.createElement(a.InnerSlider,c({style:this.props.style,ref:this.innerSliderRefHandler},e),s)}}])&&f(t.prototype,n),l&&f(t,l),d}(r.default.Component);t.default=x},1579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Track=void 0;var r=o(n(9653)),a=o(n(1060)),i=n(7129);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"===typeof t))return t;return h(e)}(this,n)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){var t,n,r,a,i;return r=(i=e.rtl?e.slideCount-1-e.index:e.index)<0||i>=e.slideCount,e.centerMode?(a=Math.floor(e.slidesToShow/2),n=(i-e.currentSlide)%e.slideCount===0,i>e.currentSlide-a-1&&i<=e.currentSlide+a&&(t=!0)):t=e.currentSlide<=i&&i<e.currentSlide+e.slidesToShow,{"slick-slide":!0,"slick-active":t,"slick-center":n,"slick-cloned":r,"slick-current":i===(e.targetSlide<0?e.targetSlide+e.slideCount:e.targetSlide>=e.slideCount?e.targetSlide-e.slideCount:e.targetSlide)}},y=function(e,t){return e.key||t},b=function(e){var t,n=[],o=[],s=[],l=r.default.Children.count(e.children),u=(0,i.lazyStartIndex)(e),c=(0,i.lazyEndIndex)(e);return r.default.Children.forEach(e.children,(function(d,h){var f,p={message:"children",index:h,slidesToScroll:e.slidesToScroll,currentSlide:e.currentSlide};f=!e.lazyLoad||e.lazyLoad&&e.lazyLoadedList.indexOf(h)>=0?d:r.default.createElement("div",null);var v=function(e){var t={};return void 0!==e.variableWidth&&!1!==e.variableWidth||(t.width=e.slideWidth),e.fade&&(t.position="relative",e.vertical?t.top=-e.index*parseInt(e.slideHeight):t.left=-e.index*parseInt(e.slideWidth),t.opacity=e.currentSlide===e.index?1:0,e.useCSS&&(t.transition="opacity "+e.speed+"ms "+e.cssEase+", visibility "+e.speed+"ms "+e.cssEase)),t}(m(m({},e),{},{index:h})),b=f.props.className||"",x=g(m(m({},e),{},{index:h}));if(n.push(r.default.cloneElement(f,{key:"original"+y(f,h),"data-index":h,className:(0,a.default)(x,b),tabIndex:"-1","aria-hidden":!x["slick-active"],style:m(m({outline:"none"},f.props.style||{}),v),onClick:function(t){f.props&&f.props.onClick&&f.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(p)}})),e.infinite&&!1===e.fade){var w=l-h;w<=(0,i.getPreClones)(e)&&l!==e.slidesToShow&&((t=-w)>=u&&(f=d),x=g(m(m({},e),{},{index:t})),o.push(r.default.cloneElement(f,{key:"precloned"+y(f,t),"data-index":t,tabIndex:"-1",className:(0,a.default)(x,b),"aria-hidden":!x["slick-active"],style:m(m({},f.props.style||{}),v),onClick:function(t){f.props&&f.props.onClick&&f.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(p)}}))),l!==e.slidesToShow&&((t=l+h)<c&&(f=d),x=g(m(m({},e),{},{index:t})),s.push(r.default.cloneElement(f,{key:"postcloned"+y(f,t),"data-index":t,tabIndex:"-1",className:(0,a.default)(x,b),"aria-hidden":!x["slick-active"],style:m(m({},f.props.style||{}),v),onClick:function(t){f.props&&f.props.onClick&&f.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(p)}})))}})),e.rtl?o.concat(n,s).reverse():o.concat(n,s)},x=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,e);var t,n,a,i=d(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(h(e=i.call.apply(i,[this].concat(n))),"node",null),v(h(e),"handleRef",(function(t){e.node=t})),e}return t=o,(n=[{key:"render",value:function(){var e=b(this.props),t=this.props,n={onMouseEnter:t.onMouseEnter,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave};return r.default.createElement("div",l({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},n),e)}}])&&u(t.prototype,n),a&&u(t,a),o}(r.default.PureComponent);t.Track=x},7129:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=l,t.canUseDOM=t.slidesOnLeft=t.slidesOnRight=t.siblingDirection=t.getTotalSlides=t.getPostClones=t.getPreClones=t.getTrackLeft=t.getTrackAnimateCSS=t.getTrackCSS=t.checkSpecKeys=t.getSlideCount=t.checkNavigable=t.getNavigableIndexes=t.swipeEnd=t.swipeMove=t.swipeStart=t.keyHandler=t.changeSlide=t.slideHandler=t.initializedState=t.extractObject=t.canGoNext=t.getSwipeDirection=t.getHeight=t.getWidth=t.lazySlidesOnRight=t.lazySlidesOnLeft=t.lazyEndIndex=t.lazyStartIndex=t.getRequiredLazySlides=t.getOnDemandLazySlides=t.safePreventDefault=void 0;var r,a=(r=n(9653))&&r.__esModule?r:{default:r};function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t,n){return Math.max(t,Math.min(e,n))}var u=function(e){["onTouchStart","onTouchMove","onWheel"].includes(e._reactName)||e.preventDefault()};t.safePreventDefault=u;var c=function(e){for(var t=[],n=d(e),r=h(e),a=n;a<r;a++)e.lazyLoadedList.indexOf(a)<0&&t.push(a);return t};t.getOnDemandLazySlides=c;t.getRequiredLazySlides=function(e){for(var t=[],n=d(e),r=h(e),a=n;a<r;a++)t.push(a);return t};var d=function(e){return e.currentSlide-f(e)};t.lazyStartIndex=d;var h=function(e){return e.currentSlide+p(e)};t.lazyEndIndex=h;var f=function(e){return e.centerMode?Math.floor(e.slidesToShow/2)+(parseInt(e.centerPadding)>0?1:0):0};t.lazySlidesOnLeft=f;var p=function(e){return e.centerMode?Math.floor((e.slidesToShow-1)/2)+1+(parseInt(e.centerPadding)>0?1:0):e.slidesToShow};t.lazySlidesOnRight=p;var m=function(e){return e&&e.offsetWidth||0};t.getWidth=m;var v=function(e){return e&&e.offsetHeight||0};t.getHeight=v;var g=function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=e.startX-e.curX,n=e.startY-e.curY,r=Math.atan2(n,t),(a=Math.round(180*r/Math.PI))<0&&(a=360-Math.abs(a)),a<=45&&a>=0||a<=360&&a>=315?"left":a>=135&&a<=225?"right":!0===i?a>=35&&a<=135?"up":"down":"vertical"};t.getSwipeDirection=g;var y=function(e){var t=!0;return e.infinite||(e.centerMode&&e.currentSlide>=e.slideCount-1||e.slideCount<=e.slidesToShow||e.currentSlide>=e.slideCount-e.slidesToShow)&&(t=!1),t};t.canGoNext=y;t.extractObject=function(e,t){var n={};return t.forEach((function(t){return n[t]=e[t]})),n};t.initializedState=function(e){var t,n=a.default.Children.count(e.children),r=e.listRef,i=Math.ceil(m(r)),s=e.trackRef&&e.trackRef.node,l=Math.ceil(m(s));if(e.vertical)t=i;else{var u=e.centerMode&&2*parseInt(e.centerPadding);"string"===typeof e.centerPadding&&"%"===e.centerPadding.slice(-1)&&(u*=i/100),t=Math.ceil((i-u)/e.slidesToShow)}var d=r&&v(r.querySelector('[data-index="0"]')),h=d*e.slidesToShow,f=void 0===e.currentSlide?e.initialSlide:e.currentSlide;e.rtl&&void 0===e.currentSlide&&(f=n-1-e.initialSlide);var p=e.lazyLoadedList||[],g=c(o(o({},e),{},{currentSlide:f,lazyLoadedList:p})),y={slideCount:n,slideWidth:t,listWidth:i,trackWidth:l,currentSlide:f,slideHeight:d,listHeight:h,lazyLoadedList:p=p.concat(g)};return null===e.autoplaying&&e.autoplay&&(y.autoplaying="playing"),y};t.slideHandler=function(e){var t=e.waitForAnimate,n=e.animating,r=e.fade,a=e.infinite,i=e.index,s=e.slideCount,u=e.lazyLoad,d=e.currentSlide,h=e.centerMode,f=e.slidesToScroll,p=e.slidesToShow,m=e.useCSS,v=e.lazyLoadedList;if(t&&n)return{};var g,b,x,w=i,k={},C={},_=a?i:l(i,0,s-1);if(r){if(!a&&(i<0||i>=s))return{};i<0?w=i+s:i>=s&&(w=i-s),u&&v.indexOf(w)<0&&(v=v.concat(w)),k={animating:!0,currentSlide:w,lazyLoadedList:v,targetSlide:w},C={animating:!1,targetSlide:w}}else g=w,w<0?(g=w+s,a?s%f!==0&&(g=s-s%f):g=0):!y(e)&&w>d?w=g=d:h&&w>=s?(w=a?s:s-1,g=a?0:s-1):w>=s&&(g=w-s,a?s%f!==0&&(g=0):g=s-p),!a&&w+p>=s&&(g=s-p),b=E(o(o({},e),{},{slideIndex:w})),x=E(o(o({},e),{},{slideIndex:g})),a||(b===x&&(w=g),b=x),u&&(v=v.concat(c(o(o({},e),{},{currentSlide:w})))),m?(k={animating:!0,currentSlide:g,trackStyle:T(o(o({},e),{},{left:b})),lazyLoadedList:v,targetSlide:_},C={animating:!1,currentSlide:g,trackStyle:S(o(o({},e),{},{left:x})),swipeLeft:null,targetSlide:_}):k={currentSlide:g,trackStyle:S(o(o({},e),{},{left:x})),lazyLoadedList:v,targetSlide:_};return{state:k,nextState:C}};t.changeSlide=function(e,t){var n,r,a,i,s=e.slidesToScroll,l=e.slidesToShow,u=e.slideCount,c=e.currentSlide,d=e.targetSlide,h=e.lazyLoad,f=e.infinite;if(n=u%s!==0?0:(u-c)%s,"previous"===t.message)i=c-(a=0===n?s:l-n),h&&!f&&(i=-1===(r=c-a)?u-1:r),f||(i=d-s);else if("next"===t.message)i=c+(a=0===n?s:n),h&&!f&&(i=(c+s)%u+n),f||(i=d+s);else if("dots"===t.message)i=t.index*t.slidesToScroll;else if("children"===t.message){if(i=t.index,f){var p=A(o(o({},e),{},{targetSlide:i}));i>t.currentSlide&&"left"===p?i-=u:i<t.currentSlide&&"right"===p&&(i+=u)}}else"index"===t.message&&(i=Number(t.index));return i};t.keyHandler=function(e,t,n){return e.target.tagName.match("TEXTAREA|INPUT|SELECT")||!t?"":37===e.keyCode?n?"next":"previous":39===e.keyCode?n?"previous":"next":""};t.swipeStart=function(e,t,n){return"IMG"===e.target.tagName&&u(e),!t||!n&&-1!==e.type.indexOf("mouse")?"":{dragging:!0,touchObject:{startX:e.touches?e.touches[0].pageX:e.clientX,startY:e.touches?e.touches[0].pageY:e.clientY,curX:e.touches?e.touches[0].pageX:e.clientX,curY:e.touches?e.touches[0].pageY:e.clientY}}};t.swipeMove=function(e,t){var n=t.scrolling,r=t.animating,a=t.vertical,i=t.swipeToSlide,s=t.verticalSwiping,l=t.rtl,c=t.currentSlide,d=t.edgeFriction,h=t.edgeDragged,f=t.onEdge,p=t.swiped,m=t.swiping,v=t.slideCount,b=t.slidesToScroll,x=t.infinite,w=t.touchObject,k=t.swipeEvent,T=t.listHeight,C=t.listWidth;if(!n){if(r)return u(e);a&&i&&s&&u(e);var _,M={},A=E(t);w.curX=e.touches?e.touches[0].pageX:e.clientX,w.curY=e.touches?e.touches[0].pageY:e.clientY,w.swipeLength=Math.round(Math.sqrt(Math.pow(w.curX-w.startX,2)));var I=Math.round(Math.sqrt(Math.pow(w.curY-w.startY,2)));if(!s&&!m&&I>10)return{scrolling:!0};s&&(w.swipeLength=I);var N=(l?-1:1)*(w.curX>w.startX?1:-1);s&&(N=w.curY>w.startY?1:-1);var R=Math.ceil(v/b),O=g(t.touchObject,s),D=w.swipeLength;return x||(0===c&&("right"===O||"down"===O)||c+1>=R&&("left"===O||"up"===O)||!y(t)&&("left"===O||"up"===O))&&(D=w.swipeLength*d,!1===h&&f&&(f(O),M.edgeDragged=!0)),!p&&k&&(k(O),M.swiped=!0),_=a?A+D*(T/C)*N:l?A-D*N:A+D*N,s&&(_=A+D*N),M=o(o({},M),{},{touchObject:w,swipeLeft:_,trackStyle:S(o(o({},t),{},{left:_}))}),Math.abs(w.curX-w.startX)<.8*Math.abs(w.curY-w.startY)?M:(w.swipeLength>10&&(M.swiping=!0,u(e)),M)}};t.swipeEnd=function(e,t){var n=t.dragging,r=t.swipe,a=t.touchObject,i=t.listWidth,s=t.touchThreshold,l=t.verticalSwiping,c=t.listHeight,d=t.swipeToSlide,h=t.scrolling,f=t.onSwipe,p=t.targetSlide,m=t.currentSlide,v=t.infinite;if(!n)return r&&u(e),{};var y=l?c/s:i/s,b=g(a,l),k={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(h)return k;if(!a.swipeLength)return k;if(a.swipeLength>y){var S,C;u(e),f&&f(b);var _=v?m:p;switch(b){case"left":case"up":C=_+w(t),S=d?x(t,C):C,k.currentDirection=0;break;case"right":case"down":C=_-w(t),S=d?x(t,C):C,k.currentDirection=1;break;default:S=_}k.triggerSlideHandler=S}else{var M=E(t);k.trackStyle=T(o(o({},t),{},{left:M}))}return k};var b=function(e){for(var t=e.infinite?2*e.slideCount:e.slideCount,n=e.infinite?-1*e.slidesToShow:0,r=e.infinite?-1*e.slidesToShow:0,a=[];n<t;)a.push(n),n=r+e.slidesToScroll,r+=Math.min(e.slidesToScroll,e.slidesToShow);return a};t.getNavigableIndexes=b;var x=function(e,t){var n=b(e),r=0;if(t>n[n.length-1])t=n[n.length-1];else for(var a in n){if(t<n[a]){t=r;break}r=n[a]}return t};t.checkNavigable=x;var w=function(e){var t=e.centerMode?e.slideWidth*Math.floor(e.slidesToShow/2):0;if(e.swipeToSlide){var n,r=e.listRef,a=r.querySelectorAll&&r.querySelectorAll(".slick-slide")||[];if(Array.from(a).every((function(r){if(e.vertical){if(r.offsetTop+v(r)/2>-1*e.swipeLeft)return n=r,!1}else if(r.offsetLeft-t+m(r)/2>-1*e.swipeLeft)return n=r,!1;return!0})),!n)return 0;var i=!0===e.rtl?e.slideCount-e.currentSlide:e.currentSlide;return Math.abs(n.dataset.index-i)||1}return e.slidesToScroll};t.getSlideCount=w;var k=function(e,t){return t.reduce((function(t,n){return t&&e.hasOwnProperty(n)}),!0)?null:console.error("Keys Missing:",e)};t.checkSpecKeys=k;var S=function(e){var t,n;k(e,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var r=e.slideCount+2*e.slidesToShow;e.vertical?n=r*e.slideHeight:t=M(e)*e.slideWidth;var a={opacity:1,transition:"",WebkitTransition:""};if(e.useTransform){var i=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",s=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",l=e.vertical?"translateY("+e.left+"px)":"translateX("+e.left+"px)";a=o(o({},a),{},{WebkitTransform:i,transform:s,msTransform:l})}else e.vertical?a.top=e.left:a.left=e.left;return e.fade&&(a={opacity:1}),t&&(a.width=t),n&&(a.height=n),window&&!window.addEventListener&&window.attachEvent&&(e.vertical?a.marginTop=e.left+"px":a.marginLeft=e.left+"px"),a};t.getTrackCSS=S;var T=function(e){k(e,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var t=S(e);return e.useTransform?(t.WebkitTransition="-webkit-transform "+e.speed+"ms "+e.cssEase,t.transition="transform "+e.speed+"ms "+e.cssEase):e.vertical?t.transition="top "+e.speed+"ms "+e.cssEase:t.transition="left "+e.speed+"ms "+e.cssEase,t};t.getTrackAnimateCSS=T;var E=function(e){if(e.unslick)return 0;k(e,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var t,n,r=e.slideIndex,a=e.trackRef,i=e.infinite,o=e.centerMode,s=e.slideCount,l=e.slidesToShow,u=e.slidesToScroll,c=e.slideWidth,d=e.listWidth,h=e.variableWidth,f=e.slideHeight,p=e.fade,m=e.vertical;if(p||1===e.slideCount)return 0;var v=0;if(i?(v=-C(e),s%u!==0&&r+u>s&&(v=-(r>s?l-(r-s):s%u)),o&&(v+=parseInt(l/2))):(s%u!==0&&r+u>s&&(v=l-s%u),o&&(v=parseInt(l/2))),t=m?r*f*-1+v*f:r*c*-1+v*c,!0===h){var g,y=a&&a.node;if(g=r+C(e),t=(n=y&&y.childNodes[g])?-1*n.offsetLeft:0,!0===o){g=i?r+C(e):r,n=y&&y.children[g],t=0;for(var b=0;b<g;b++)t-=y&&y.children[b]&&y.children[b].offsetWidth;t-=parseInt(e.centerPadding),t+=n&&(d-n.offsetWidth)/2}}return t};t.getTrackLeft=E;var C=function(e){return e.unslick||!e.infinite?0:e.variableWidth?e.slideCount:e.slidesToShow+(e.centerMode?1:0)};t.getPreClones=C;var _=function(e){return e.unslick||!e.infinite?0:e.slideCount};t.getPostClones=_;var M=function(e){return 1===e.slideCount?1:C(e)+e.slideCount+_(e)};t.getTotalSlides=M;var A=function(e){return e.targetSlide>e.currentSlide?e.targetSlide>e.currentSlide+I(e)?"left":"right":e.targetSlide<e.currentSlide-N(e)?"right":"left"};t.siblingDirection=A;var I=function(e){var t=e.slidesToShow,n=e.centerMode,r=e.rtl,a=e.centerPadding;if(n){var i=(t-1)/2+1;return parseInt(a)>0&&(i+=1),r&&t%2===0&&(i+=1),i}return r?0:t-1};t.slidesOnRight=I;var N=function(e){var t=e.slidesToShow,n=e.centerMode,r=e.rtl,a=e.centerPadding;if(n){var i=(t-1)/2+1;return parseInt(a)>0&&(i+=1),r||t%2!==0||(i+=1),i}return r?t-1:0};t.slidesOnLeft=N;t.canUseDOM=function(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}},483:function(e,t,n){"use strict";var r=n(2839),a=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;a=d("react.element"),i=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),o=d("react.provider"),s=d("react.context"),l=d("react.forward_ref"),t.Suspense=d("react.suspense"),u=d("react.memo"),c=d("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=v.prototype;var b=y.prototype=new g;b.constructor=y,r(b,v.prototype),b.isPureReactComponent=!0;var x={current:null},w=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!k.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case a:case i:l=!0}}if(l)return o=o(l=e),e=""===r?"."+C(l,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),_(o,t,n,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=r+C(s=e[u],u);l+=_(s,t,n,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=_(s=s.value,t,n,c=r+C(s,u++),o);else if("object"===s)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function M(e,t,n){if(null==e)return e;var r=[],a=0;return _(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var I={current:null};function N(){var e=I.current;if(null===e)throw Error(f(321));return e}var R={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error(f(143));return e}},t.Component=v,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var i=r({},e.props),o=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}return{$$typeof:a,type:e.type,key:o,ref:s,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return N().useCallback(e,t)},t.useContext=function(e,t){return N().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return N().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return N().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return N().useLayoutEffect(e,t)},t.useMemo=function(e,t){return N().useMemo(e,t)},t.useReducer=function(e,t,n){return N().useReducer(e,t,n)},t.useRef=function(e){return N().useRef(e)},t.useState=function(e){return N().useState(e)},t.version="17.0.2"},9653:function(e,t,n){"use strict";e.exports=n(483)},3941:function(e,t,n){"use strict";n.r(t);var r=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var a=r[n];e.call(t,a[1],a[0])}},t}()}(),a="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,i="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),o="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var s=["top","right","bottom","left","width","height","size","weight"],l="undefined"!==typeof MutationObserver,u=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,a=0;function i(){n&&(n=!1,e()),r&&l()}function s(){o(i)}function l(){var e=Date.now();if(n){if(e-a<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);a=e}return l}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){a&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){a&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;s.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),c=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||i},h=y(0,0,0,0);function f(e){return parseFloat(e)||0}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+f(e["border-"+n+"-width"])}),0)}function m(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return h;var r=d(e).getComputedStyle(e),a=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var a=r[n],i=e["padding-"+a];t[a]=f(i)}return t}(r),i=a.left+a.right,o=a.top+a.bottom,s=f(r.width),l=f(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==t&&(s-=p(r,"left","right")+i),Math.round(l+o)!==n&&(l-=p(r,"top","bottom")+o)),!function(e){return e===d(e).document.documentElement}(e)){var u=Math.round(s+i)-t,c=Math.round(l+o)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(c)&&(l-=c)}return y(a.left,a.top,s,l)}var v="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"===typeof e.getBBox};function g(e){return a?v(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):m(e):h}function y(e,t,n,r){return{x:e,y:t,width:n,height:r}}var b=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=g(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),x=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(i.prototype);return c(o,{x:t,y:n,width:r,height:a,top:n,right:t+r,bottom:a+n,left:t}),o}(t);c(this,{target:e,contentRect:n})},w=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new x(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),k="undefined"!==typeof WeakMap?new WeakMap:new r,S=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),r=new w(t,n,this);k.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){S.prototype[e]=function(){var t;return(t=k.get(this))[e].apply(t,arguments)}}));var T="undefined"!==typeof i.ResizeObserver?i.ResizeObserver:S;t.default=T},2626:function(e){e.exports=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})).toLowerCase()}},7969:function(e,t,n){"use strict";n.r(t),t.default={}},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(4062);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}e.exports=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),a=n(9617),i=n(4993);e.exports=function(e){var t=a();return function(){var n,a=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return i(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5263:function(e,t,n){var r=n(8698).default;function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=o?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(i,s,l):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,a=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(N){d=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),s=new M(r||[]);return o(i,"_invoke",{value:T(e,n,s)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=h;var p={};function m(){}function v(){}function g(){}var y={};d(y,l,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(A([])));x&&x!==n&&i.call(x,l)&&(y=x);var w=g.prototype=m.prototype=Object.create(y);function k(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,o,s,l){var u=f(e[a],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==r(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,l)}))}l(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}})}function T(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return I()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=f(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var a=f(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,p;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function A(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:I}}function I(){return{value:void 0,done:!0}}return v.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=d(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,d(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},k(S.prototype),d(S.prototype,u,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new S(h(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(w),d(w,c,"Generator"),d(w,l,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,a=n(5036);e.exports=function(e){var t=a(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},3144:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9142);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(0,r.Z)(a.key),a)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function a(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},4578:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9611);function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.Z)(e,t)}},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},5987:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(3366);function a(e,t){if(null==e)return{};var n,a,i=(0,r.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,{Z:function(){return r}})},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3878);var a=n(181),i=n(5267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(c){u=!0,a=c}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||(0,a.Z)(e,t)||(0,i.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var a=n(9199),i=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1002);function a(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==(0,r.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},354:function(e,t,n){"use strict";function r(e,t,n){this.x=e,this.y=t,this.time=n||(new Date).getTime()}function a(e,t,n,r){this.startPoint=e,this.control1=t,this.control2=n,this.endPoint=r}function i(e,t){var n=this,r=t||{};this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.throttle="throttle"in r?r.throttle:16,this.minDistance="minDistance"in r?r.minDistance:5,this.throttle?this._strokeMoveUpdate=function(e,t,n){var r,a,i,o=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),o=null,i=e.apply(r,a),o||(r=a=null)};return function(){var u=Date.now();s||!1!==n.leading||(s=u);var c=t-(u-s);return r=this,a=arguments,c<=0||c>t?(o&&(clearTimeout(o),o=null),s=u,i=e.apply(r,a),o||(r=a=null)):o||!1===n.trailing||(o=setTimeout(l,c)),i}}(i.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=i.prototype._strokeUpdate,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onBegin=r.onBegin,this.onEnd=r.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(e){1===e.which&&(n._mouseButtonDown=!0,n._strokeBegin(e))},this._handleMouseMove=function(e){n._mouseButtonDown&&n._strokeMoveUpdate(e)},this._handleMouseUp=function(e){1===e.which&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(e))},this._handleTouchStart=function(e){if(1===e.targetTouches.length){var t=e.changedTouches[0];n._strokeBegin(t)}},this._handleTouchMove=function(e){e.preventDefault();var t=e.targetTouches[0];n._strokeMoveUpdate(t)},this._handleTouchEnd=function(e){e.target===n._canvas&&(e.preventDefault(),n._strokeEnd(e))},this.on()}n.r(t),r.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1},r.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},r.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time},a.prototype.length=function(){for(var e=0,t=void 0,n=void 0,r=0;r<=10;r+=1){var a=r/10,i=this._point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),o=this._point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(r>0){var s=i-t,l=o-n;e+=Math.sqrt(s*s+l*l)}t=i,n=o}return e},a.prototype._point=function(e,t,n,r,a){return t*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*r*(1-e)*e*e+a*e*e*e},i.prototype.clear=function(){var e=this._ctx,t=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0},i.prototype.fromDataURL=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Image,a=n.ratio||window.devicePixelRatio||1,i=n.width||this._canvas.width/a,o=n.height||this._canvas.height/a;this._reset(),r.src=e,r.onload=function(){t._ctx.drawImage(r,0,0,i,o)},this._isEmpty=!1},i.prototype.toDataURL=function(e){var t;if("image/svg+xml"===e)return this._toSVG();for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=this._canvas).toDataURL.apply(t,[e].concat(r))},i.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},i.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},i.prototype.isEmpty=function(){return this._isEmpty},i.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),"function"===typeof this.onBegin&&this.onBegin(e)},i.prototype._strokeUpdate=function(e){var t=e.clientX,n=e.clientY,r=this._createPoint(t,n),a=this._data[this._data.length-1],i=a&&a[a.length-1],o=i&&r.distanceTo(i)<this.minDistance;if(!i||!o){var s=this._addPoint(r),l=s.curve,u=s.widths;l&&u&&this._drawCurve(l,u.start,u.end),this._data[this._data.length-1].push({x:r.x,y:r.y,time:r.time,color:this.penColor})}},i.prototype._strokeEnd=function(e){var t=this.points.length>2,n=this.points[0];if(!t&&n&&this._drawDot(n),n){var r=this._data[this._data.length-1],a=r[r.length-1];n.equals(a)||r.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}"function"===typeof this.onEnd&&this.onEnd(e)},i.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},i.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},i.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},i.prototype._createPoint=function(e,t,n){var a=this._canvas.getBoundingClientRect();return new r(e-a.left,t-a.top,n||(new Date).getTime())},i.prototype._addPoint=function(e){var t=this.points;if(t.push(e),t.length>2){3===t.length&&t.unshift(t[0]);var n=this._calculateCurveControlPoints(t[0],t[1],t[2]).c2,r=this._calculateCurveControlPoints(t[1],t[2],t[3]).c1,i=new a(t[1],n,r,t[2]),o=this._calculateCurveWidths(i);return t.shift(),{curve:i,widths:o}}return{}},i.prototype._calculateCurveControlPoints=function(e,t,n){var a=e.x-t.x,i=e.y-t.y,o=t.x-n.x,s=t.y-n.y,l=(e.x+t.x)/2,u=(e.y+t.y)/2,c=(t.x+n.x)/2,d=(t.y+n.y)/2,h=Math.sqrt(a*a+i*i),f=Math.sqrt(o*o+s*s),p=f/(h+f),m=c+(l-c)*p,v=d+(u-d)*p,g=t.x-m,y=t.y-v;return{c1:new r(l+g,u+y),c2:new r(c+g,d+y)}},i.prototype._calculateCurveWidths=function(e){var t=e.startPoint,n=e.endPoint,r={start:null,end:null},a=this.velocityFilterWeight*n.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(a);return r.start=this._lastWidth,r.end=i,this._lastVelocity=a,this._lastWidth=i,r},i.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)},i.prototype._drawPoint=function(e,t,n){var r=this._ctx;r.moveTo(e,t),r.arc(e,t,n,0,2*Math.PI,!1),this._isEmpty=!1},i.prototype._drawCurve=function(e,t,n){var r=this._ctx,a=n-t,i=Math.floor(e.length());r.beginPath();for(var o=0;o<i;o+=1){var s=o/i,l=s*s,u=l*s,c=1-s,d=c*c,h=d*c,f=h*e.startPoint.x;f+=3*d*s*e.control1.x,f+=3*c*l*e.control2.x,f+=u*e.endPoint.x;var p=h*e.startPoint.y;p+=3*d*s*e.control1.y,p+=3*c*l*e.control2.y,p+=u*e.endPoint.y;var m=t+u*a;this._drawPoint(f,p,m)}r.closePath(),r.fill()},i.prototype._drawDot=function(e){var t=this._ctx,n="function"===typeof this.dotSize?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(e.x,e.y,n),t.closePath(),t.fill()},i.prototype._fromData=function(e,t,n){for(var a=0;a<e.length;a+=1){var i=e[a];if(i.length>1)for(var o=0;o<i.length;o+=1){var s=i[o],l=new r(s.x,s.y,s.time),u=s.color;if(0===o)this.penColor=u,this._reset(),this._addPoint(l);else if(o!==i.length-1){var c=this._addPoint(l),d=c.curve,h=c.widths;d&&h&&t(d,h,u)}}else this._reset(),n(i[0])}},i.prototype._toSVG=function(){var e=this,t=this._data,n=this._canvas,r=Math.max(window.devicePixelRatio||1,1),a=n.width/r,i=n.height/r,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"width",n.width),o.setAttributeNS(null,"height",n.height),this._fromData(t,(function(e,t,n){var r=document.createElement("path");if(!isNaN(e.control1.x)&&!isNaN(e.control1.y)&&!isNaN(e.control2.x)&&!isNaN(e.control2.y)){var a="M "+e.startPoint.x.toFixed(3)+","+e.startPoint.y.toFixed(3)+" C "+e.control1.x.toFixed(3)+","+e.control1.y.toFixed(3)+" "+e.control2.x.toFixed(3)+","+e.control2.y.toFixed(3)+" "+e.endPoint.x.toFixed(3)+","+e.endPoint.y.toFixed(3);r.setAttribute("d",a),r.setAttribute("stroke-width",(2.25*t.end).toFixed(3)),r.setAttribute("stroke",n),r.setAttribute("fill","none"),r.setAttribute("stroke-linecap","round"),o.appendChild(r)}}),(function(t){var n=document.createElement("circle"),r="function"===typeof e.dotSize?e.dotSize():e.dotSize;n.setAttribute("r",r),n.setAttribute("cx",t.x),n.setAttribute("cy",t.y),n.setAttribute("fill",t.color),o.appendChild(n)}));var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+a+" "+i+'" width="'+a+'" height="'+i+'">',l=o.innerHTML;if(void 0===l){var u=document.createElement("dummy"),c=o.childNodes;u.innerHTML="";for(var d=0;d<c.length;d+=1)u.appendChild(c[d].cloneNode(!0));l=u.innerHTML}return"data:image/svg+xml;base64,"+btoa(s+l+"</svg>")},i.prototype.fromData=function(e){var t=this;this.clear(),this._fromData(e,(function(e,n){return t._drawCurve(e,n.start,n.end)}),(function(e){return t._drawDot(e)})),this._data=e},i.prototype.toData=function(){return this._data},t.default=i}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(i,o),i}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".506da295.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="client:";n.l=function(r,a,i,o){if(e[r])e[r].push(a);else{var s,l;if(void 0!==i)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[a];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(f);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=i);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var a,i,o=r[0],s=r[1],l=r[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)l(n)}for(t&&t(r);u<o.length;u++)i=o[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkclient=self.webpackChunkclient||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{Decoder:function(){return Qu},Encoder:function(){return Ju},PacketType:function(){return Ku},protocol:function(){return $u}});var t={};n.r(t),n.d(t,{browserFiles:function(){return Zg},browserHTTPRequest:function(){return ny},concatenateArrayBuffers:function(){return Uv},copyModel:function(){return Ag},decodeWeights:function(){return Lv},encodeWeights:function(){return Ov},fromMemory:function(){return oy},getLoadHandlers:function(){return Jv},getModelArtifactsForJSON:function(){return Zv},getModelArtifactsInfoForJSON:function(){return Gv},getSaveHandlers:function(){return $v},http:function(){return ty},isHTTPScheme:function(){return Qg},listModels:function(){return Eg},loadWeights:function(){return Xg},moveModel:function(){return Ng},registerLoadRouter:function(){return Kv},registerSaveRouter:function(){return Yv},removeModel:function(){return _g},weightsLoaderFactory:function(){return Kg},withSaveHandler:function(){return sy}});var r={};n.r(r),n.d(r,{conv2d:function(){return Hk},depthwiseConv2d:function(){return Xk},matMul:function(){return Yk}});var a={};n.r(a),n.d(a,{json:function(){return rO}});var i={};n.r(i),n.d(i,{json:function(){return aO}});var o={};n.r(o),n.d(o,{json:function(){return iO}});var s={};n.r(s),n.d(s,{json:function(){return oO}});var l={};n.r(l),n.d(l,{json:function(){return sO}});var u={};n.r(u),n.d(u,{json:function(){return lO}});var c={};n.r(c),n.d(c,{json:function(){return uO}});var d={};n.r(d),n.d(d,{json:function(){return cO}});var h={};n.r(h),n.d(h,{json:function(){return dO}});var f={};n.r(f),n.d(f,{json:function(){return hO}});var p={};n.r(p),n.d(p,{json:function(){return fO}});var m={};n.r(m),n.d(m,{json:function(){return pO}});var v={};n.r(v),n.d(v,{json:function(){return mO}});var g={};n.r(g),n.d(g,{json:function(){return vO}});var y={};n.r(y),n.d(y,{json:function(){return gO}});var b={};n.r(b),n.d(b,{json:function(){return yO}});var x={};n.r(x),n.d(x,{json:function(){return bO}});var w={};n.r(w),n.d(w,{json:function(){return xO}});var k={};n.r(k),n.d(k,{json:function(){return wO}});var S={};n.r(S),n.d(S,{OP_SCOPE_SUFFIX:function(){return Cv},abs:function(){return Ly},acos:function(){return Py},acosh:function(){return Fy},add:function(){return jy},addN:function(){return zy},all:function(){return By},any:function(){return Uy},argMax:function(){return Wy},argMin:function(){return Vy},asin:function(){return Zy},asinh:function(){return Hy},atan:function(){return Gy},atan2:function(){return qy},atanh:function(){return Xy},avgPool:function(){return cb},avgPool3d:function(){return db},basicLSTMCell:function(){return yb},batchNorm:function(){return xb},batchNorm2d:function(){return wb},batchNorm3d:function(){return kb},batchNorm4d:function(){return Sb},batchToSpaceND:function(){return bb},bincount:function(){return Tb},booleanMaskAsync:function(){return Ek},broadcastArgs:function(){return Eb},broadcastTo:function(){return Cb},buffer:function(){return Fg},cast:function(){return jg},ceil:function(){return _b},clipByValue:function(){return Mb},clone:function(){return zg},complex:function(){return Mv},concat:function(){return hb},concat1d:function(){return Ab},concat2d:function(){return Ib},concat3d:function(){return Nb},concat4d:function(){return Rb},conv1d:function(){return Db},conv2d:function(){return Ob},conv2dTranspose:function(){return Pb},conv3d:function(){return Fb},conv3dTranspose:function(){return zb},cos:function(){return Bb},cosh:function(){return Ub},cosineWindow:function(){return Fk},cumsum:function(){return Wb},denseBincount:function(){return Vb},depthToSpace:function(){return Zb},depthwiseConv2d:function(){return Hb},diag:function(){return Gb},dilation2d:function(){return qb},div:function(){return Yb},divNoNan:function(){return Qb},dot:function(){return ex},dropout:function(){return Lk},einsum:function(){return tx},elu:function(){return nx},enclosingPowerOfTwo:function(){return Pk},equal:function(){return Kb},erf:function(){return rx},exp:function(){return ax},expandDims:function(){return ix},expm1:function(){return ox},eye:function(){return lx},fft:function(){return Jw},fill:function(){return ux},floor:function(){return cx},floorDiv:function(){return Xb},fused:function(){return r},gather:function(){return dx},gatherND:function(){return Dk},greater:function(){return hx},greaterEqual:function(){return fx},ifft:function(){return Qw},imag:function(){return px},image:function(){return KS},inTopKAsync:function(){return zk},irfft:function(){return ek},isFinite:function(){return mx},isInf:function(){return vx},isNaN:function(){return gx},leakyRelu:function(){return yx},less:function(){return bx},lessEqual:function(){return xx},linalg:function(){return $S},linspace:function(){return wx},localResponseNormalization:function(){return kx},log:function(){return Sx},log1p:function(){return Tx},logSigmoid:function(){return _x},logSoftmax:function(){return Nx},logSumExp:function(){return zx},logicalAnd:function(){return Bx},logicalNot:function(){return Ux},logicalOr:function(){return Wx},logicalXor:function(){return Vx},losses:function(){return JS},matMul:function(){return fb},max:function(){return Mx},maxPool:function(){return Zx},maxPool3d:function(){return Hx},maxPoolWithArgmax:function(){return Gx},maximum:function(){return qx},mean:function(){return Xx},meshgrid:function(){return $x},min:function(){return Jx},minimum:function(){return Qx},mirrorPad:function(){return ew},mod:function(){return tw},moments:function(){return rw},movingAverage:function(){return Ak},mul:function(){return pb},multiRNNCell:function(){return aw},multinomial:function(){return iw},neg:function(){return Ex},norm:function(){return Mk},notEqual:function(){return ow},oneHot:function(){return sw},ones:function(){return Kx},onesLike:function(){return lw},op:function(){return _v},outerProduct:function(){return uw},pad:function(){return cw},pad1d:function(){return dw},pad2d:function(){return hw},pad3d:function(){return fw},pad4d:function(){return pw},pool:function(){return vw},pow:function(){return gw},prelu:function(){return yw},print:function(){return Bg},prod:function(){return bw},rand:function(){return xw},randomGamma:function(){return Ew},randomNormal:function(){return Cw},randomUniform:function(){return _w},range:function(){return Mw},real:function(){return Aw},reciprocal:function(){return Iw},relu:function(){return Nw},relu6:function(){return Rw},reshape:function(){return ub},reverse:function(){return Ow},reverse1d:function(){return Dw},reverse2d:function(){return Lw},reverse3d:function(){return Pw},reverse4d:function(){return Fw},rfft:function(){return nk},round:function(){return jw},rsqrt:function(){return zw},scalar:function(){return Oy},scatterND:function(){return Rk},selu:function(){return Bw},separableConv2d:function(){return Uw},setdiff1dAsync:function(){return Vw},sigmoid:function(){return mb},sign:function(){return Zw},signal:function(){return YS},sin:function(){return Hw},sinh:function(){return Gw},slice:function(){return vb},slice1d:function(){return qw},slice2d:function(){return Xw},slice3d:function(){return Yw},slice4d:function(){return Kw},softmax:function(){return $w},softplus:function(){return Cx},spaceToBatchND:function(){return mw},sparse:function(){return QS},sparseToDense:function(){return Ok},spectral:function(){return XS},split:function(){return tk},sqrt:function(){return rk},square:function(){return nw},squaredDifference:function(){return ak},squeeze:function(){return ik},stack:function(){return ok},step:function(){return sk},stridedSlice:function(){return lk},string:function(){return eT},sub:function(){return Ax},sum:function(){return Ix},tan:function(){return uk},tanh:function(){return gb},tensor:function(){return Iv},tensor1d:function(){return ck},tensor2d:function(){return dk},tensor3d:function(){return dy},tensor4d:function(){return hk},tensor5d:function(){return fk},tensor6d:function(){return pk},tile:function(){return sx},topk:function(){return mk},transpose:function(){return Ck},truncatedNormal:function(){return vk},unique:function(){return gk},unsortedSegmentSum:function(){return yk},unstack:function(){return bk},variable:function(){return xk},where:function(){return $b},whereAsync:function(){return Sk},zeros:function(){return Yx},zerosLike:function(){return Jb}});var T=n(2791),E=n.t(T,2),C=n(1250),_=n(3433);function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var A=n(3144),I=n(9611);function N(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,I.Z)(e,t)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UK){return!1}}var D=n(1002),L=n(7326);function P(e,t){if(t&&("object"===(0,D.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,L.Z)(e)}function F(e){var t=O();return function(){var n,r=R(e);if(t){var a=R(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return P(this,n)}}function j(e,t,n){return j=O()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&(0,I.Z)(a,n.prototype),a},j.apply(null,arguments)}function z(e){var t="function"===typeof Map?new Map:void 0;return z=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return j(e,arguments,R(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,I.Z)(n,e)},z(e)}var B,U=n(9439),W=n(3878),V=n(9199),Z=n(181),H=n(5267);function G(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,Z.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(B||(B={}));var X,Y="popstate";function K(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function J(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(UK){}}}function Q(e,t){return{usr:e.state,key:e.key,idx:t}}function ee(e,t,n,r){return void 0===n&&(n=null),q({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?ne(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function te(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,i=e.hash,o=void 0===i?"":i;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function ne(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function re(e,t,n,r){void 0===r&&(r={});var a=r,i=a.window,o=void 0===i?document.defaultView:i,s=a.v5Compat,l=void 0!==s&&s,u=o.history,c=B.Pop,d=null,h=f();function f(){return(u.state||{idx:null}).idx}function p(){c=B.Pop;var e=f(),t=null==e?null:e-h;h=e,d&&d({action:c,location:v.location,delta:t})}function m(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:te(e);return K(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,u.replaceState(q({},u.state,{idx:h}),""));var v={get action(){return c},get location(){return e(o,u)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(Y,p),d=e,function(){o.removeEventListener(Y,p),d=null}},createHref:function(e){return t(o,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=B.Push;var r=ee(v.location,e,t);n&&n(r,e);var a=Q(r,h=f()+1),i=v.createHref(r);try{u.pushState(a,"",i)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;o.location.assign(i)}l&&d&&d({action:c,location:v.location,delta:1})},replace:function(e,t){c=B.Replace;var r=ee(v.location,e,t);n&&n(r,e);var a=Q(r,h=f()),i=v.createHref(r);u.replaceState(a,"",i),l&&d&&d({action:c,location:v.location,delta:0})},go:function(e){return u.go(e)}};return v}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(X||(X={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function ae(e,t,n){void 0===n&&(n="/");var r=ye(("string"===typeof t?ne(t):t).pathname||"/",n);if(null==r)return null;var a=ie(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var i=null,o=0;null==i&&o<a.length;++o)i=me(a[o],ge(r));return i}function ie(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var a=function(e,a,i){var o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(K(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=ke([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(K(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),ie(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:pe(s,e.index),routesMeta:l})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,i=G(oe(e.path));try{for(i.s();!(r=i.n()).done;){var o=r.value;a(e,t,o)}}catch(s){i.e(s)}finally{i.f()}}else a(e,t)})),t}function oe(e){var t=e.split("/");if(0===t.length)return[];var n,r=(n=t,(0,W.Z)(n)||(0,V.Z)(n)||(0,Z.Z)(n)||(0,H.Z)()),a=r[0],i=r.slice(1),o=a.endsWith("?"),s=a.replace(/\?$/,"");if(0===i.length)return o?[s,""]:[s];var l=oe(i.join("/")),u=[];return u.push.apply(u,(0,_.Z)(l.map((function(e){return""===e?s:[s,e].join("/")})))),o&&u.push.apply(u,(0,_.Z)(l)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var se=/^:\w+$/,le=3,ue=2,ce=1,de=10,he=-2,fe=function(e){return"*"===e};function pe(e,t){var n=e.split("/"),r=n.length;return n.some(fe)&&(r+=he),t&&(r+=ue),n.filter((function(e){return!fe(e)})).reduce((function(e,t){return e+(se.test(t)?le:""===t?ce:de)}),r)}function me(e,t){for(var n=e.routesMeta,r={},a="/",i=[],o=0;o<n.length;++o){var s=n[o],l=o===n.length-1,u="/"===a?t:t.slice(a.length)||"/",c=ve({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);var d=s.route;i.push({params:r,pathname:ke([a,c.pathname]),pathnameBase:Se(ke([a,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(a=ke([a,c.pathnameBase]))}return i}function ve(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);J("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");var i=new RegExp(a,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),r=(0,U.Z)(n,2),a=r[0],i=r[1],o=t.match(a);if(!o)return null;var s=o[0],l=s.replace(/(.)\/+$/,"$1"),u=o.slice(1),c=i.reduce((function(e,t,n){if("*"===t){var r=u[n]||"";l=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return J(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(u[n]||"",t),e}),{});return{params:c,pathname:s,pathnameBase:l,pattern:e}}function ge(e){try{return decodeURI(e)}catch(t){return J(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function ye(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function be(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function xe(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function we(e,t,n,r){var a;void 0===r&&(r=!1),"string"===typeof e?a=ne(e):(K(!(a=q({},e)).pathname||!a.pathname.includes("?"),be("?","pathname","search",a)),K(!a.pathname||!a.pathname.includes("#"),be("#","pathname","hash",a)),K(!a.search||!a.search.includes("#"),be("#","search","hash",a)));var i,o=""===e||""===a.pathname,s=o?"/":a.pathname;if(r||null==s)i=n;else{var l=t.length-1;if(s.startsWith("..")){for(var u=s.split("/");".."===u[0];)u.shift(),l-=1;a.pathname=u.join("/")}i=l>=0?t[l]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?ne(e):e,r=n.pathname,a=n.search,i=void 0===a?"":a,o=n.hash,s=void 0===o?"":o,l=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:l,search:Te(i),hash:Ee(s)}}(a,i),d=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}var ke=function(e){return e.join("/").replace(/\/\/+/g,"/")},Se=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},Te=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Ee=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Ce=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n)}(z(Error));function _e(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Me=["post","put","patch","delete"],Ae=(new Set(Me),["get"].concat(Me));new Set(Ae),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ie.apply(this,arguments)}var Ne=T.createContext(null);var Re=T.createContext(null);var Oe=T.createContext(null);var De=T.createContext(null);var Le=T.createContext(null);var Pe=T.createContext({outlet:null,matches:[],isDataRoute:!1});var Fe=T.createContext(null);function je(){return null!=T.useContext(Le)}function ze(){return je()||K(!1),T.useContext(Le).location}function Be(e){T.useContext(De).static||T.useLayoutEffect(e)}function Ue(){return T.useContext(Pe).isDataRoute?function(){var e=Je(Ge.UseNavigateStable).router,t=et(qe.UseNavigateStable),n=T.useRef(!1);Be((function(){n.current=!0}));var r=T.useCallback((function(r,a){void 0===a&&(a={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Ie({fromRouteId:t},a)))}),[e,t]);return r}():function(){je()||K(!1);var e=T.useContext(Ne),t=T.useContext(De),n=t.basename,r=t.navigator,a=T.useContext(Pe).matches,i=ze().pathname,o=JSON.stringify(xe(a).map((function(e){return e.pathnameBase}))),s=T.useRef(!1);Be((function(){s.current=!0}));var l=T.useCallback((function(t,a){if(void 0===a&&(a={}),s.current)if("number"!==typeof t){var l=we(t,JSON.parse(o),i,"path"===a.relative);null==e&&"/"!==n&&(l.pathname="/"===l.pathname?n:ke([n,l.pathname])),(a.replace?r.replace:r.push)(l,a.state,a)}else r.go(t)}),[n,r,o,i,e]);return l}()}function We(){var e=T.useContext(Pe).matches,t=e[e.length-1];return t?t.params:{}}function Ve(e,t){var n=(void 0===t?{}:t).relative,r=T.useContext(Pe).matches,a=ze().pathname,i=JSON.stringify(xe(r).map((function(e){return e.pathnameBase})));return T.useMemo((function(){return we(e,JSON.parse(i),a,"path"===n)}),[e,i,a,n])}function Ze(e,t,n){je()||K(!1);var r,a=T.useContext(De).navigator,i=T.useContext(Pe).matches,o=i[i.length-1],s=o?o.params:{},l=(o&&o.pathname,o?o.pathnameBase:"/"),u=(o&&o.route,ze());if(t){var c,d="string"===typeof t?ne(t):t;"/"===l||(null==(c=d.pathname)?void 0:c.startsWith(l))||K(!1),r=d}else r=u;var h=r.pathname||"/",f=ae(e,{pathname:"/"===l?h:h.slice(l.length)||"/"});var p=$e(f&&f.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:ke([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ke([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),i,n);return t&&p?T.createElement(Le.Provider,{value:{location:Ie({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:B.Pop}},p):p}function He(){var e=function(){var e,t=T.useContext(Fe),n=Qe(qe.UseRouteError),r=et(qe.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=_e(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),n?T.createElement("pre",{style:a},n):null,null)}var Ge,qe,Xe=T.createElement(He,null),Ye=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return(0,A.Z)(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?T.createElement(Pe.Provider,{value:this.props.routeContext},T.createElement(Fe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(T.Component);function Ke(e){var t=e.routeContext,n=e.match,r=e.children,a=T.useContext(Ne);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(Pe.Provider,{value:t},r)}function $e(e,t,n){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var i=e,o=null==(r=n)?void 0:r.errors;if(null!=o){var s=i.findIndex((function(e){return e.route.id&&(null==o?void 0:o[e.route.id])}));s>=0||K(!1),i=i.slice(0,Math.min(i.length,s+1))}return i.reduceRight((function(e,r,a){var s=r.route.id?null==o?void 0:o[r.route.id]:null,l=null;n&&(l=r.route.errorElement||Xe);var u=t.concat(i.slice(0,a+1)),c=function(){var t;return t=s?l:r.route.Component?T.createElement(r.route.Component,null):r.route.element?r.route.element:e,T.createElement(Ke,{match:r,routeContext:{outlet:e,matches:u,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?T.createElement(Ye,{location:n.location,revalidation:n.revalidation,component:l,error:s,children:c(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):c()}),null)}function Je(e){var t=T.useContext(Ne);return t||K(!1),t}function Qe(e){var t=T.useContext(Re);return t||K(!1),t}function et(e){var t=function(e){var t=T.useContext(Pe);return t||K(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||K(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Ge||(Ge={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(qe||(qe={}));var tt;function nt(e){var t=e.to,n=e.replace,r=e.state,a=e.relative;je()||K(!1);var i=T.useContext(Pe).matches,o=ze().pathname,s=Ue(),l=we(t,xe(i).map((function(e){return e.pathnameBase})),o,"path"===a),u=JSON.stringify(l);return T.useEffect((function(){return s(JSON.parse(u),{replace:n,state:r,relative:a})}),[s,u,a,n,r]),null}function rt(e){K(!1)}function at(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,a=void 0===r?null:r,i=e.location,o=e.navigationType,s=void 0===o?B.Pop:o,l=e.navigator,u=e.static,c=void 0!==u&&u;je()&&K(!1);var d=n.replace(/^\/*/,"/"),h=T.useMemo((function(){return{basename:d,navigator:l,static:c}}),[d,l,c]);"string"===typeof i&&(i=ne(i));var f=i,p=f.pathname,m=void 0===p?"/":p,v=f.search,g=void 0===v?"":v,y=f.hash,b=void 0===y?"":y,x=f.state,w=void 0===x?null:x,k=f.key,S=void 0===k?"default":k,E=T.useMemo((function(){var e=ye(m,d);return null==e?null:{location:{pathname:e,search:g,hash:b,state:w,key:S},navigationType:s}}),[d,m,g,b,w,S,s]);return null==E?null:T.createElement(De.Provider,{value:h},T.createElement(Le.Provider,{children:a,value:E}))}function it(e){var t=e.children,n=e.location;return Ze(st(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(tt||(tt={}));var ot=new Promise((function(){}));T.Component;function st(e,t){void 0===t&&(t=[]);var n=[];return T.Children.forEach(e,(function(e,r){if(T.isValidElement(e)){var a=[].concat((0,_.Z)(t),[r]);if(e.type!==T.Fragment){e.type!==rt&&K(!1),e.props.index&&e.props.children&&K(!1);var i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=st(e.props.children,a)),n.push(i)}else n.push.apply(n,st(e.props.children,a))}})),n}function lt(){return lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lt.apply(this,arguments)}function ut(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var ct=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var dt="startTransition";function ht(e){var t,n=e.basename,r=e.children,a=e.window,i=T.useRef();null==i.current&&(i.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),re((function(e,t){var n=e.location;return ee("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:te(t)}),null,t)));var o=i.current,s=T.useState({action:o.action,location:o.location}),l=(0,U.Z)(s,2),u=l[0],c=l[1],d=T.useCallback((function(e){dt in E?E[dt]((function(){return c(e)})):c(e)}),[c]);return T.useLayoutEffect((function(){return o.listen(d)}),[o,d]),T.createElement(at,{basename:n,children:r,location:u.location,navigationType:u.action,navigator:o})}var ft="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,pt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mt=T.forwardRef((function(e,t){var n,r=e.onClick,a=e.relative,i=e.reloadDocument,o=e.replace,s=e.state,l=e.target,u=e.to,c=e.preventScrollReset,d=ut(e,ct),h=T.useContext(De).basename,f=!1;if("string"===typeof u&&pt.test(u)&&(n=u,ft))try{var p=new URL(window.location.href),m=u.startsWith("//")?new URL(p.protocol+u):new URL(u),v=ye(m.pathname,h);m.origin===p.origin&&null!=v?u=v+m.search+m.hash:f=!0}catch(UK){}var g=function(e,t){var n=(void 0===t?{}:t).relative;je()||K(!1);var r=T.useContext(De),a=r.basename,i=r.navigator,o=Ve(e,{relative:n}),s=o.hash,l=o.pathname,u=o.search,c=l;return"/"!==a&&(c="/"===l?a:ke([a,l])),i.createHref({pathname:c,search:u,hash:s})}(u,{relative:a}),y=function(e,t){var n=void 0===t?{}:t,r=n.target,a=n.replace,i=n.state,o=n.preventScrollReset,s=n.relative,l=Ue(),u=ze(),c=Ve(e,{relative:s});return T.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==a?a:te(u)===te(c);l(e,{replace:n,state:i,preventScrollReset:o,relative:s})}}),[u,l,c,a,i,r,e,o,s])}(u,{replace:o,state:s,target:l,preventScrollReset:c,relative:a});return T.createElement("a",lt({},d,{href:n||g,onClick:f||i?r:function(e){r&&r(e),e.defaultPrevented||y(e)},ref:t,target:l}))}));var vt,gt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(vt||(vt={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(gt||(gt={}));var yt=n(7462),bt=n(423),xt=n(8444),wt=n(9316);var kt=function(e){var t=e.children,n=e.theme,r=(0,xt.Z)(),a=T.useMemo((function(){var e=null===r?n:function(e,t){return"function"===typeof t?t(e):(0,yt.Z)({},e,t)}(r,n);return null!=e&&(e[wt.Z]=null!==r),e}),[n,r]);return T.createElement(bt.Z.Provider,{value:a},t)},St=n(8317),Tt={WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box"},Et=function(e){return(0,yt.Z)({color:e.palette.text.primary},e.typography.body2,{backgroundColor:e.palette.background.default,"@media print":{backgroundColor:e.palette.common.white}})};var Ct=(0,St.Z)((function(e){return{"@global":{html:Tt,"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,yt.Z)({margin:0},Et(e),{"&::backdrop":{backgroundColor:e.palette.background.default}})}}}),{name:"MuiCssBaseline"})((function(e){var t=e.children,n=void 0===t?null:t;return e.classes,T.createElement(T.Fragment,null,n)})),_t=n(4942),Mt=n(5628),At=n(3401),It=n(663);var Nt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,At.Z)(e,(0,yt.Z)({defaultTheme:It.Z},t))},Rt=n(6909),Ot=(0,Mt.Z)({palette:{background:{default:"#fff"},primary:{light:"#DE0000",main:"#920000",dark:"#780000"}},overrides:{MuiCssBaseline:{"@global":{body:{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPositionX:"center",backgroundPositionY:"center",backgroundAttachment:"fixed","& ::-webkit-scrollbar":{width:"0.4em"},"& ::-webkit-scrollbar-track":{boxShadow:"inset 0 0 6px rgba(0,0,0,0.00)",webkitBoxShadow:"inset 0 0 6px rgba(0,0,0,0.00)"},"& ::-webkit-scrollbar-thumb":{borderRadius:10,backgroundColor:"rgb(160,160,160)"}}}},MuiOutlinedInput:{root:{borderRadius:20},input:{padding:10}},MuiInputLabel:{outlined:{transform:"translate(14px, 12px) scale(1)"}},MuiButton:{root:{}},MuiListItemIcon:{root:{justifyContent:"center"}}}},Rt._Y);window.matchMedia("(min-width: 660px)").matches;var Dt=Nt((function(e){return{pageContainer:(0,_t.Z)({},e.breakpoints.down("sm"),{padding:0}),backDrop:{zIndex:e.zIndex.drawer-1,marginTop:90,color:"#fff"}}})),Lt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:window.screen.width<500?"80%":"30%",bgcolor:"background.paper",border:"2px solid #000",borderRadius:20,boxShadow:24,p:4},Pt={fontFamily:"Raleway",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",height:"90%",bgcolor:"background.paper",border:"2px solid #000",borderRadius:20,boxShadow:24,p:4,overflowY:"auto"},Ft={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",height:"100%",bgcolor:"background.paper",border:"2px solid #000",borderRadius:20,boxShadow:24,p:4},jt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",height:"100%",bgcolor:"#414646",border:"2px solid #000",borderRadius:20,boxShadow:24,p:4},zt=function(e){return"superAdmin"===e?"Super Administrador":"admin"===e?"Administrador":"sapExecutive"===e?"Ejecutivo SAP":"inspectionWorker"===e?"Operario de Inspecci\xf3n":"maintenceOperator"===e?"Operario de Mantenci\xf3n":"shiftManager"===e?"Jefe de turno - Inspecci\xf3n y Mantenci\xf3n":"chiefMachinery"===e?"Jefe de maquinaria":"observer"===e?"Observador":void 0},Bt={storageURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.URL_STORAGE||"https://icvmantencion.blob.core.windows.net/plataforma-mantencion/",version:"versi\xf3n 2.9.4",storageApi:{account:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.AZURE_ACCOUNT,accountKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.TOKEN_SAS_BLOB,url:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.STORAGE_URL,urlWithKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.URL_SAS_BLOB,accessKeys:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.ACCESS_KEYS}},Ut=function(e){if(e){var t,n=new Date(e).getDay();1==n?t="Lunes":2==n?t="Martes":3==n?t="Miercoles":4==n?t="Jueves":5==n?t="Viernes":6==n?t="Sabado":7==n&&(t="Domingo");var r,a=new Date(e).getUTCDate(),i=new Date(e).getMonth();return 0==i?r="Enero":1==i?r="Febrero":2==i?r="Marzo":3==i?r="Abril":4==i?r="Mayo":5==i?r="Junio":6==i?r="Julio":7==i?r="Agosto":8==i?r="Septiembre":9==i?r="Octubre":10==i?r="Noviembre":11==i&&(r="Diciembre"),(t+" "+a+" DE "+r).toUpperCase()}return"Sin informaci\xf3n".toUpperCase()},Wt=function(e){var t=new Date(e).getUTCDate(),n=new Date(e).getMonth()+1,r=new Date(e).getFullYear();return n<10&&(n="0"+n),t<10&&(t="0"+t),e?t+"/"+n+"/"+r:"No informado"},Vt=function(e){if(e){console.log(e);var t=new Date(e).toISOString();console.log("Fecha!: ",t);var n=new Date(t);return n.toLocaleDateString("es-ES")+" "+n.toLocaleTimeString("es-ES")}return"Sin informaci\xf3n"},Zt=n(4569),Ht=n.n(Zt),Gt=function(e,t){var n={user:{email:e,password:t}};return Ht().post("/auth/login",n)},qt=function(e,t){var n={user:{rut:e,password:t}};return Ht().post("/auth/loginRut",n)},Xt=function(e){var t={email:e};return Ht().post("/auth/forgotpassword",t)},Yt=function(e,t){var n={password:e};return Ht().post("/auth/resetpassword/".concat(t),n)},Kt=function(){return Ht().get("/machines/getMachinesOfProject")},$t=function(){return Ht().get("/machines/readAllMachines")},Jt=function(e){var t={siteId:e};return Ht().post("/machines/getMachineBySiteId",t)},Qt=function(e){var t={machine:e};return Ht().post("/machines/saveMachineDataById",t)},en=function(){return Ht().get("/roles/getRoles")},tn=function(e,t){var n={userData:e,password:t};return Ht().post("/users/createUser",n)},nn=function(e,t){var n={userData:e,id:t};return Ht().post("/users/editUser",n)},rn=function(e,t){return Ht().post("/users/getUsers",{admin:e,isTest:t})},an=function(e){var t={id:e};return Ht().post("/users/getUser",t)},on=function(e){var t={id:e};return Ht().post("/users/deleteUser",t)},sn=function(e){var t={role:e};return Ht().post("/users/findByRole",t)},ln=function(e){var t={report:e};return Ht().post("/reports/createReport",t)},un=function(e){var t={report:e};return Ht().post("/reports/editReport",t)},cn=function(e){var t={report:e};return Ht().post("/reports/editReportById",t)},dn=function(e){var t={id:e};return Ht().post("/reports/deleteReport",t)},hn=function(){return Ht().get("/reports/getAllReports")},fn=function(e){var t={site:e};return Ht().post("/reports/getAllReportsbySite",t)},pn=function(e,t){var n={userId:e,site:t};return Ht().post("/reports/findMyAssignations",n)},mn=function(e){var t={equid:e};return Ht().post("/reports/getReportByEquid",t)},vn=function(){return Ht().get("/reports/getTotalReportsToIndex")},gn=function(e){var t={reportData:e};return Ht().post("/execution-report/getExecutionReportById",t)},yn=function(e){var t={reportData:e};return Ht().post("/execution-report/saveExecutionReport",t)},bn=function(e,t,n){var r=new FormData;r.append("image",e,e.name),r.append("path",t),r.append("containerName",n);return Ht().post("/azure-storage/uploadImage",r,{headers:{"Content-Type":"multipart/form-data"}})},xn=function(e){var t={_id:e};return Ht().post("/internalMessagesData/get-messages-by-user",t)},wn=function(){return Ht().get("/internalMessagesData/getAllMessages")},kn=function(e){var t={message:e};return Ht().post("/internalMessagesData/sendMessage",t)},Sn=function(e){var t={_id:e};return Ht().post("/internalMessagesData/removeMessage",t)},Tn=function(e){return Ht().post("/pdf-maker/createPdfDoc",{reportData:e})},En=function(e){var t={id:e};return Ht().post("/notifications/getNotificationsById",t)},Cn=function(e){var t={_id:e,state:!0};return Ht().post("/notifications/actualiceNotificationState",t)},_n=function(){return Ht().get("/patterns/getPatterns")},Mn=function(e){return Ht().post("/patterns/savePattern",e)},An=function(){return Ht().get("/patterns/getPatternDetails")},In=function(e){return Ht().post("/sites/getSiteById",{_id:e})},Nn=function(){return Ht().get("/sites/getSites")},Rn=n(5827),On=n.n(Rn),Dn=function(e){return new Promise((function(t){new(On())(e,{quality:.5,success:function(e){var n=new FileReader;n.onload=function(){t(n.result)},n.readAsDataURL(e)}})}))},Ln=function(e){return new Promise((function(t){var n=e.transaction(["Machines"],"readonly").objectStore("Machines");n.openCursor().onsuccess=function(e){e.target.result;n.getAll().onsuccess=function(e){t(e.target.result)}}}))},Pn={initDbMachines:function(){var e,t=window.indexedDB.open("Trucks",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("Machines",{keyPath:"id"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},agregar:function(e,t){t.transaction(["Machines"],"readwrite").objectStore("Machines").add(e).onsuccess=function(){}},obtener:function(e,t){t.transaction(["Machines"],"readonly").objectStore("Machines").get(e).onsuccess=function(e){}},actualizar:function(e,t){return new Promise((function(n){try{t.transaction(["Machines"],"readwrite").objectStore("Machines").put(e).onsuccess=function(){Ln(t).then((function(e){})),n(!0)}}catch(r){n(!1)}}))},eliminar:function(e,t){t.transaction(["Machines"],"readwrite").objectStore("Machines").delete(e).onsuccess=function(){Ln()}},consultar:Ln},Fn=function(e){var t=e.transaction(["pautas"],"readonly").objectStore("pautas"),n=t.openCursor();return new Promise((function(e){n.onsuccess=function(n){n.target.result;t.getAll().onsuccess=function(t){e(t.target.result)}}}))},jn={initDbPMs:function(){var e,t=window.indexedDB.open("Pautas",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("pautas",{keyPath:"id"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},agregar:function(e,t){t.transaction(["pautas"],"readwrite").objectStore("pautas").add(e)},obtener:function(e,t){return new Promise((function(n){t.transaction(["pautas"],"readonly").objectStore("pautas").get(Number(e)).onsuccess=function(e){n(e.target.result)}}))},actualizar:function(e,t){return new Promise((function(n){try{t.transaction(["pautas"],"readwrite").objectStore("pautas").put(e).onsuccess=function(){n(!0)}}catch(r){n(!1)}}))},eliminar:function(e,t){t.transaction(["pautas"],"readwrite").objectStore("pautas").delete(e).onsuccess=function(){Fn()}},consultar:Fn,consultarPorDato:function(e,t){return new Promise((function(e){t.transaction(["pautas"],"readonly").objectStore("pautas").openCursor().onsuccess=function(e){}}))}},zn=function(e){var t=e.transaction(["Obras"],"readonly").objectStore("Obras"),n=t.openCursor();return new Promise((function(e){n.onsuccess=function(n){n.target.result;t.getAll().onsuccess=function(t){e(t.target.result)}}}))},Bn={initDbObras:function(){var e,t=window.indexedDB.open("Sites",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("Obras",{keyPath:"id"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},agregar:function(e,t){t.transaction(["Obras"],"readwrite").objectStore("Obras").add(e)},obtener:function(e,t){t.transaction(["Obras"],"readonly").objectStore("Obras").get(e).onsuccess=function(e){}},actualizar:function(e,t){return new Promise((function(n){try{t.transaction(["Obras"],"readwrite").objectStore("Obras").put(e).onsuccess=function(){n(!0)}}catch(r){n(!1)}}))},eliminar:function(e,t){t.transaction(["Obras"],"readwrite").objectStore("Obras").delete(e).onsuccess=function(){zn()}},consultar:zn};function Un(){Un=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(M){l=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),s=new E(a||[]);return r(o,"_invoke",{value:w(e,n,s)}),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(M){return{type:"throw",arg:M}}}e.wrap=u;var d={};function h(){}function f(){}function p(){}var m={};l(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(C([])));g&&g!==t&&n.call(g,i)&&(m=g);var y=p.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,s){var l=c(e[r],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==(0,D.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,o,s)}),(function(e){a("throw",e,o,s)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return a("throw",e,o,s)}))}s(l.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return _()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function k(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var a=c(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return f.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(x.prototype),l(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(u(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(y),l(y,s,"Generator"),l(y,i,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;T(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Wn(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,a)}function Vn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Wn(i,r,a,o,s,"next",e)}function s(e){Wn(i,r,a,o,s,"throw",e)}o(void 0)}))}}var Zn=function(){var e,t=window.indexedDB.open("3Ds",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){var r=(e=t.target.result).createObjectStore("3dFilesList",{keyPath:"id"});r.createIndex("model","model",{unique:!1}),r.createIndex("name","name",{unique:!1}),r.createIndex("type","type",{unique:!1}),r.createIndex("brand","brand",{unique:!1}),r.createIndex("nameModel","nameModel",{unique:!1}),r.transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},Hn=function(e,t){return new Promise((function(n){t.transaction(["3dFilesList"],"readonly").objectStore("3dFilesList").index("nameModel").get(e).onsuccess=function(e){n(e.target.result)}}))},Gn=function(e){return new Promise((function(t){var n=e.transaction(["Equips"],"readonly").objectStore("Equips");n.openCursor().onsuccess=function(e){e.target.result;n.getAll().onsuccess=function(e){var n=new Array;n=e.target.result,t(n)}}}))},qn={initDbMachines:function(){var e,t=window.indexedDB.open("Machines",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("Equips",{keyPath:"id"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},agregar:function(e,t){t.transaction(["Equips"],"readwrite").objectStore("Equips").add(e).onsuccess=function(){}},obtener:function(e,t){t.transaction(["Equips"],"readonly").objectStore("Equips").get(e).onsuccess=function(e){}},actualizar:function(e,t){return new Promise((function(n){try{t.transaction(["Equips"],"readwrite").objectStore("Equips").put(e).onsuccess=function(){n(!0)}}catch(r){n(!1)}}))},eliminar:function(e,t){t.transaction(["Equips"],"readwrite").objectStore("Equips").delete(e).onsuccess=function(){Gn()}},consultar:Gn},Xn=function(){var e,t=window.indexedDB.open("Documentation",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("Reports",{keyPath:"idIndex"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},Yn=function(e,t){return new Promise((function(n){try{var r=t.transaction(["Reports"],"readwrite").objectStore("Reports").put(e);r.onsuccess=function(){n(!0)},r.onerror=function(e){console.log(e),n(!0)}}catch(a){console.log(a),n(!1)}}))},Kn=function(e,t){return new Promise((function(n){var r=t.transaction(["Reports"],"readwrite").objectStore("Reports").delete(e);r.onsuccess=function(){n(!0)},r.onerror=function(){n(!1)}}))},$n=function(e){var t=e.transaction(["Reports"],"readonly").objectStore("Reports"),n=t.openCursor();return new Promise((function(e){n.onsuccess=function(n){n.target.result;t.getAll().onsuccess=function(t){e(t.target.result)}}}))},Jn=function(){var e,t=window.indexedDB.open("Executions",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("Reports",{keyPath:"_id"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},Qn=function(e,t){return new Promise((function(n){try{var r=t.transaction(["Reports"],"readwrite").objectStore("Reports").put(e);r.onsuccess=function(){n(!0)},r.onerror=function(){n(!1)}}catch(a){n(a)}}))},er=function(e){return new Promise((function(t){var n=e.transaction(["Reports"],"readonly").objectStore("Reports");n.openCursor().onsuccess=function(e){e.target.result;n.getAll().onsuccess=function(e){var n=new Array;n=e.target.result,t(n)}}}))},tr=function(e){var t=e.transaction(["MachinesPartsList"],"readonly").objectStore("MachinesPartsList"),n=t.openCursor();return new Promise((function(e){n.onsuccess=function(n){n.target.result;t.getAll().onsuccess=function(t){e(t.target.result)}}}))},nr={initDb:function(){var e,t=window.indexedDB.open("MachinesParts",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("MachinesPartsList",{keyPath:"id"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},agregar:function(e,t){return new Promise((function(n){var r=t.transaction(["MachinesPartsList"],"readwrite").objectStore("MachinesPartsList").add(e);r.onsuccess=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tr(t);case 2:e.sent&&n(!0);case 4:case"end":return e.stop()}}),e)}))),r.onerror=function(e){n(!1)}}))},obtener:function(e,t){return new Promise((function(n){t.transaction(["MachinesPartsList"],"readonly").objectStore("MachinesPartsList").get(Number(e)).onsuccess=function(e){n(e.target.result)}}))},actualizar:function(e,t){return new Promise((function(n){try{t.transaction(["MachinesPartsList"],"readwrite").objectStore("MachinesPartsList").put(e).onsuccess=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(!0);case 1:case"end":return e.stop()}}),e)})))}catch(r){n(!1)}}))},eliminar:function(e,t){t.transaction(["MachinesPartsList"],"readwrite").objectStore("MachinesPartsList").delete(e).onsuccess=function(){tr()}},consultar:tr,buscarPorNombreModelo:function(e,t){return new Promise((function(n){t.transaction(["MachinesPartsList"],"readonly").objectStore("MachinesPartsList").index("nameModel").get(e).onsuccess=function(e){n(e.target.result)}}))}},rr=function(e){var t=e.transaction(["myUser"],"readonly").objectStore("myUser"),n=t.openCursor();return new Promise((function(e){n.onsuccess=function(n){n.target.result;t.getAll().onsuccess=function(t){e(t.target.result)}}}))},ar={initDb:function(){var e,t=window.indexedDB.open("User",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("myUser",{keyPath:"_id"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},agregar:function(e,t){t.transaction(["myUser"],"readwrite").objectStore("myUser").add(e)},obtener:function(e,t){return new Promise((function(n){t.transaction(["myUser"],"readonly").objectStore("myUser").get(Number(e)).onsuccess=function(e){n(e.target.result)}}))},actualizar:function(e,t){return new Promise((function(n){try{t.transaction(["myUser"],"readwrite").objectStore("myUser").put(e).onsuccess=function(){n(!0)}}catch(r){n(!1)}}))},eliminar:function(e,t){t.transaction(["myUser"],"readwrite").objectStore("myUser").delete(e).onsuccess=function(){rr()}},consultar:rr,consultarPorDato:function(e,t){return new Promise((function(e){t.transaction(["myUser"],"readonly").objectStore("myUser").openCursor().onsuccess=function(e){}}))}},ir=function(e){return new Promise(e?function(){var t=Vn(Un().mark((function t(n){var r;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,an(e);case 2:(r=t.sent).data?n("".concat(r.data.name," ").concat(r.data.lastName)):n("Test Name");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}():function(e){e("Sin informaci\xf3n")})},or=function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Vn(Un().mark((function e(n){var r,a,i,o,s,l,u,c,d;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sn("admin");case 2:return r=e.sent,e.next=5,sn("sapExecutive");case 5:return a=e.sent,e.next=8,sn("shiftManager");case 8:return i=e.sent,e.next=11,sn("chiefMachinery");case 11:o=e.sent,s=r.data,l=a.data,u=i.data,c=o.data,d=[],s.forEach((function(e,r){d.push(e.email),r==s.length-1&&l.forEach((function(e,r){d.push(e.email),r==l.length-1&&(1==t?u.forEach((function(e,t){d.push(e.email),t==u.length-1&&c.forEach((function(e,t){d.push(e.email),t==c.length-1&&n(d.toString())}))})):2==t?u.forEach((function(e,t){d.push(e.email),t==u.length-1&&n(d.toString())})):n(d.toString()))}))}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sr=function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Vn(Un().mark((function e(n){var r,a,i,o,s,l,u,c,d;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sn("admin");case 2:return r=e.sent,e.next=5,sn("sapExecutive");case 5:return a=e.sent,e.next=8,sn("shiftManager");case 8:return i=e.sent,e.next=11,sn("chiefMachinery");case 11:o=e.sent,s=new Array,l=new Array,s=r.data,l=a.data,u=i.data,c=o.data,d=new Array,d=[],s.forEach((function(e,r){d.push(e._id),r==s.length-1&&l.forEach((function(e,r){d.push(e._id),r==l.length-1&&(1==t?u.forEach((function(e,t){d.push(e._id),t==u.length-1&&(c.forEach((function(e,t){d.push(e._id)})),t==c.length-1&&n(d))})):2==t?u.forEach((function(e,t){d.push(e._id),t==u.length-1&&n(d)})):n(d))}))}));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new String;return"Neum\xe1ticos"===e?"Neumaticos":"Chassis"===e?"Chasis":"Direcci\xf3n"===e?"Sistema_direccion":"Sistema Neum\xe1tico"===e?"Sistema_neumatico":"Hidr\xe1ulico"===e?"Sistema_hidraulico":"Suspensi\xf3n"===e?"Suspension":"Mazas"===e?"Maza":"Transmisi\xf3n"===e||"Ejes"===e?"Transmision":"Mando Final"===e?"Mando_final":"Mando de Giro"===e?"Mando_de_giro":"Rodado"===e?"Sistema_rodado":"El\xe9ctrico"===e?"Electrico":"Implementos"===e?"Implemento":e};function ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(n),!0).forEach((function(t){(0,_t.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dr=n(184),hr={prefix:"fas",iconName:"arrow-circle-left",icon:[512,512,[],"f0a8","M256 504C119 504 8 393 8 256S119 8 256 8s248 111 248 248-111 248-248 248zm28.9-143.6L209.4 288H392c13.3 0 24-10.7 24-24v-16c0-13.3-10.7-24-24-24H209.4l75.5-72.4c9.7-9.3 9.9-24.8.4-34.3l-11-10.9c-9.4-9.4-24.6-9.4-33.9 0L107.7 239c-9.4 9.4-9.4 24.6 0 33.9l132.7 132.7c9.4 9.4 24.6 9.4 33.9 0l11-10.9c9.5-9.5 9.3-25-.4-34.3z"]},fr={prefix:"fas",iconName:"arrow-right",icon:[448,512,[],"f061","M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"]},pr={prefix:"fas",iconName:"arrow-up",icon:[448,512,[],"f062","M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"]},mr={prefix:"fas",iconName:"book",icon:[448,512,[],"f02d","M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"]},vr={prefix:"fas",iconName:"calendar",icon:[448,512,[],"f133","M12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm436-44v-36c0-26.5-21.5-48-48-48h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v36c0 6.6 5.4 12 12 12h424c6.6 0 12-5.4 12-12z"]},gr={prefix:"fas",iconName:"camera",icon:[512,512,[],"f030","M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"]},yr={prefix:"fas",iconName:"circle",icon:[512,512,[],"f111","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"]},br={prefix:"fas",iconName:"clipboard-list",icon:[384,512,[],"f46d","M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"]},xr={prefix:"fas",iconName:"clock",icon:[512,512,[],"f017","M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"]},wr={prefix:"fas",iconName:"comment",icon:[512,512,[],"f075","M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"]},kr={prefix:"fas",iconName:"comment-dots",icon:[512,512,[],"f4ad","M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"]},Sr={prefix:"fas",iconName:"cube",icon:[512,512,[],"f1b2","M239.1 6.3l-208 78c-18.7 7-31.1 25-31.1 45v225.1c0 18.2 10.3 34.8 26.5 42.9l208 104c13.5 6.8 29.4 6.8 42.9 0l208-104c16.3-8.1 26.5-24.8 26.5-42.9V129.3c0-20-12.4-37.9-31.1-44.9l-208-78C262 2.2 250 2.2 239.1 6.3zM256 68.4l192 72v1.1l-192 78-192-78v-1.1l192-72zm32 356V275.5l160-65v133.9l-160 80z"]},Tr={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"]},Er={prefix:"fas",iconName:"eraser",icon:[512,512,[],"f12d","M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"]},Cr={prefix:"fas",iconName:"eye",icon:[576,512,[],"f06e","M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"]},_r={prefix:"fas",iconName:"eye-slash",icon:[640,512,[],"f070","M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"]},Mr={prefix:"fas",iconName:"home",icon:[576,512,[],"f015","M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"]},Ar={prefix:"fas",iconName:"image",icon:[512,512,[],"f03e","M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"]},Ir={prefix:"fas",iconName:"info-circle",icon:[512,512,[],"f05a","M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"]},Nr={prefix:"fas",iconName:"list-alt",icon:[512,512,[],"f022","M464 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zM128 120c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm288-136v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12z"]},Rr={prefix:"fas",iconName:"list-ol",icon:[512,512,[],"f0cb","M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"]},Or={prefix:"fas",iconName:"map-marker-alt",icon:[384,512,[],"f3c5","M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"]},Dr={prefix:"fas",iconName:"newspaper",icon:[576,512,[],"f1ea","M552 64H88c-13.255 0-24 10.745-24 24v8H24c-13.255 0-24 10.745-24 24v272c0 30.928 25.072 56 56 56h472c26.51 0 48-21.49 48-48V88c0-13.255-10.745-24-24-24zM56 400a8 8 0 0 1-8-8V144h16v248a8 8 0 0 1-8 8zm236-16H140c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h152c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12zm208 0H348c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h152c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12zm-208-96H140c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h152c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12zm208 0H348c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h152c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12zm0-96H140c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h360c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12z"]},Lr={prefix:"fas",iconName:"paper-plane",icon:[512,512,[],"f1d8","M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"]},Pr={prefix:"fas",iconName:"paperclip",icon:[448,512,[],"f0c6","M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z"]},Fr={prefix:"fas",iconName:"pen",icon:[512,512,[],"f304","M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"]},jr={prefix:"fas",iconName:"plus",icon:[448,512,[],"f067","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]},zr={prefix:"fas",iconName:"robot",icon:[640,512,[],"f544","M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"]},Br={prefix:"fas",iconName:"save",icon:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"]},Ur={prefix:"fas",iconName:"search",icon:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]},Wr={prefix:"fas",iconName:"sign-out-alt",icon:[512,512,[],"f2f5","M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"]},Vr={prefix:"fas",iconName:"sliders-h",icon:[512,512,[],"f1de","M496 384H160v-16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h80v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h336c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-160h-80v-16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h336v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h80c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-160H288V48c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16C7.2 64 0 71.2 0 80v32c0 8.8 7.2 16 16 16h208v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h208c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16z"]},Zr={prefix:"fas",iconName:"sync",icon:[512,512,[],"f021","M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"]},Hr={prefix:"fas",iconName:"tools",icon:[512,512,[],"f7d9","M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"]},Gr={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"]},qr={prefix:"fas",iconName:"truck",icon:[640,512,[],"f0d1","M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"]},Xr={prefix:"fas",iconName:"user",icon:[448,512,[],"f007","M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"]},Yr={prefix:"fas",iconName:"user-cog",icon:[640,512,[],"f4fe","M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"]},Kr={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"]};function $r(e){return $r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$r(e)}function Jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Qr(e,t,n[t])}))}return e}function ta(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){a=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var na=function(){},ra={},aa={},ia={mark:na,measure:na};try{"undefined"!==typeof window&&(ra=window),"undefined"!==typeof document&&(aa=document),"undefined"!==typeof MutationObserver&&MutationObserver,"undefined"!==typeof performance&&(ia=performance)}catch(UK){}var oa=(ra.navigator||{}).userAgent,sa=void 0===oa?"":oa,la=ra,ua=aa,ca=ia,da=(la.document,!!ua.documentElement&&!!ua.head&&"function"===typeof ua.addEventListener&&"function"===typeof ua.createElement),ha=(~sa.indexOf("MSIE")||sa.indexOf("Trident/"),"___FONT_AWESOME___"),fa="fa",pa="svg-inline--fa",ma="data-fa-i2svg",va=(function(){try{return!0}catch(UK){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),ga=va.concat([11,12,13,14,15,16,17,18,19,20]),ya={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},ba=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",ya.GROUP,ya.SWAP_OPACITY,ya.PRIMARY,ya.SECONDARY].concat(va.map((function(e){return"".concat(e,"x")}))).concat(ga.map((function(e){return"w-".concat(e)}))),la.FontAwesomeConfig||{});if(ua&&"function"===typeof ua.querySelector){[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=ta(e,2),n=t[0],r=t[1],a=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=ua.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==a&&null!==a&&(ba[r]=a)}))}var xa=ea({},{familyPrefix:fa,replacementClass:pa,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},ba);xa.autoReplaceSvg||(xa.observeMutations=!1);var wa=ea({},xa);la.FontAwesomeConfig=wa;var ka=la||{};ka[ha]||(ka[ha]={}),ka[ha].styles||(ka[ha].styles={}),ka[ha].hooks||(ka[ha].hooks={}),ka[ha].shims||(ka[ha].shims=[]);var Sa=ka[ha],Ta=[];da&&((ua.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ua.readyState)||ua.addEventListener("DOMContentLoaded",(function e(){ua.removeEventListener("DOMContentLoaded",e),1,Ta.map((function(e){return e()}))})));var Ea,Ca="pending",_a="settled",Ma="fulfilled",Aa="rejected",Ia=function(){},Na="undefined"!==typeof n.g&&"undefined"!==typeof n.g.process&&"function"===typeof n.g.process.emit,Ra="undefined"===typeof setImmediate?setTimeout:setImmediate,Oa=[];function Da(){for(var e=0;e<Oa.length;e++)Oa[e][0](Oa[e][1]);Oa=[],Ea=!1}function La(e,t){Oa.push([e,t]),Ea||(Ea=!0,Ra(Da,0))}function Pa(e){var t=e.owner,n=t._state,r=t._data,a=e[n],i=e.then;if("function"===typeof a){n=Ma;try{r=a(r)}catch(UK){Ba(i,UK)}}Fa(i,r)||(n===Ma&&ja(i,r),n===Aa&&Ba(i,r))}function Fa(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"===typeof t||"object"===$r(t))){var r=t.then;if("function"===typeof r)return r.call(t,(function(r){n||(n=!0,t===r?za(e,r):ja(e,r))}),(function(t){n||(n=!0,Ba(e,t))})),!0}}catch(UK){return n||Ba(e,UK),!0}return!1}function ja(e,t){e!==t&&Fa(e,t)||za(e,t)}function za(e,t){e._state===Ca&&(e._state=_a,e._data=t,La(Wa,e))}function Ba(e,t){e._state===Ca&&(e._state=_a,e._data=t,La(Va,e))}function Ua(e){e._then=e._then.forEach(Pa)}function Wa(e){e._state=Ma,Ua(e)}function Va(e){e._state=Aa,Ua(e),!e._handled&&Na&&n.g.process.emit("unhandledRejection",e._data,e)}function Za(e){n.g.process.emit("rejectionHandled",e)}function Ha(e){if("function"!==typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof Ha===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){Ba(t,e)}try{e((function(e){ja(t,e)}),n)}catch(UK){n(UK)}}(e,this)}Ha.prototype={constructor:Ha,_state:Ca,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(Ia),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===Aa&&Na&&La(Za,this)),this._state===Ma||this._state===Aa?La(Pa,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},Ha.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new Ha((function(t,n){var r=[],a=0;function i(e){return a++,function(n){r[e]=n,--a||t(r)}}for(var o,s=0;s<e.length;s++)(o=e[s])&&"function"===typeof o.then?o.then(i(s),n):r[s]=o;a||t(r)}))},Ha.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new Ha((function(t,n){for(var r,a=0;a<e.length;a++)(r=e[a])&&"function"===typeof r.then?r.then(t,n):t(r)}))},Ha.resolve=function(e){return e&&"object"===$r(e)&&e.constructor===Ha?e:new Ha((function(t){t(e)}))},Ha.reject=function(e){return new Ha((function(t,n){n(e)}))};var Ga={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function qa(e){if(e&&da){var t=ua.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=ua.head.childNodes,r=null,a=n.length-1;a>-1;a--){var i=n[a],o=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=i)}return ua.head.insertBefore(t,r),e}}var Xa="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Ya(){for(var e=12,t="";e-- >0;)t+=Xa[62*Math.random()|0];return t}function Ka(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function $a(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n],";")}),"")}function Ja(e){return e.size!==Ga.size||e.x!==Ga.x||e.y!==Ga.y||e.rotate!==Ga.rotate||e.flipX||e.flipY}function Qa(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,a={transform:"translate(".concat(n/2," 256)")},i="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:a,inner:{transform:"".concat(i," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var ei={x:0,y:0,width:"100%",height:"100%"};function ti(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function ni(e){var t=e.icons,n=t.main,r=t.mask,a=e.prefix,i=e.iconName,o=e.transform,s=e.symbol,l=e.title,u=e.maskId,c=e.titleId,d=e.extra,h=e.watchable,f=void 0!==h&&h,p=r.found?r:n,m=p.width,v=p.height,g="fak"===a,y=g?"":"fa-w-".concat(Math.ceil(m/v*16)),b=[wa.replacementClass,i?"".concat(wa.familyPrefix,"-").concat(i):"",y].filter((function(e){return-1===d.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(d.classes).join(" "),x={children:[],attributes:ea({},d.attributes,{"data-prefix":a,"data-icon":i,class:b,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(v)})},w=g&&!~d.classes.indexOf("fa-fw")?{width:"".concat(m/v*16*.0625,"em")}:{};f&&(x.attributes[ma]=""),l&&x.children.push({tag:"title",attributes:{id:x.attributes["aria-labelledby"]||"title-".concat(c||Ya())},children:[l]});var k=ea({},x,{prefix:a,iconName:i,main:n,mask:r,maskId:u,transform:o,symbol:s,styles:ea({},w,d.styles)}),S=r.found&&n.found?function(e){var t,n=e.children,r=e.attributes,a=e.main,i=e.mask,o=e.maskId,s=e.transform,l=a.width,u=a.icon,c=i.width,d=i.icon,h=Qa({transform:s,containerWidth:c,iconWidth:l}),f={tag:"rect",attributes:ea({},ei,{fill:"white"})},p=u.children?{children:u.children.map(ti)}:{},m={tag:"g",attributes:ea({},h.inner),children:[ti(ea({tag:u.tag,attributes:ea({},u.attributes,h.path)},p))]},v={tag:"g",attributes:ea({},h.outer),children:[m]},g="mask-".concat(o||Ya()),y="clip-".concat(o||Ya()),b={tag:"mask",attributes:ea({},ei,{id:g,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,v]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(t=d,"g"===t.tag?t.children:[t])},b]};return n.push(x,{tag:"rect",attributes:ea({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(g,")")},ei)}),{children:n,attributes:r}}(k):function(e){var t=e.children,n=e.attributes,r=e.main,a=e.transform,i=$a(e.styles);if(i.length>0&&(n.style=i),Ja(a)){var o=Qa({transform:a,containerWidth:r.width,iconWidth:r.width});t.push({tag:"g",attributes:ea({},o.outer),children:[{tag:"g",attributes:ea({},o.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:ea({},r.icon.attributes,o.path)}]}]})}else t.push(r.icon);return{children:t,attributes:n}}(k),T=S.children,E=S.attributes;return k.children=T,k.attributes=E,s?function(e){var t=e.prefix,n=e.iconName,r=e.children,a=e.attributes,i=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ea({},a,{id:!0===i?"".concat(t,"-").concat(wa.familyPrefix,"-").concat(n):i}),children:r}]}]}(k):function(e){var t=e.children,n=e.main,r=e.mask,a=e.attributes,i=e.styles,o=e.transform;if(Ja(o)&&n.found&&!r.found){var s={x:n.width/n.height/2,y:.5};a.style=$a(ea({},i,{"transform-origin":"".concat(s.x+o.x/16,"em ").concat(s.y+o.y/16,"em")}))}return[{tag:"svg",attributes:a,children:t}]}(k)}var ri=function(){},ai=(wa.measurePerformance&&ca&&ca.mark&&ca.measure,function(e,t,n,r){var a,i,o,s=Object.keys(e),l=s.length,u=void 0!==r?function(e,t){return function(n,r,a,i){return e.call(t,n,r,a,i)}}(t,r):t;for(void 0===n?(a=1,o=e[s[0]]):(a=0,o=n);a<l;a++)o=u(o,e[i=s[a]],i,e);return o});function ii(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,a=Object.keys(t).reduce((function(e,n){var r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e}),{});"function"!==typeof Sa.hooks.addPack||r?Sa.styles[e]=ea({},Sa.styles[e]||{},a):Sa.hooks.addPack(e,a),"fas"===e&&ii("fa",t)}var oi=Sa.styles,si=Sa.shims,li=function(){var e=function(e){return ai(oi,(function(t,n,r){return t[r]=ai(n,e,{}),t}),{})};e((function(e,t,n){return t[3]&&(e[t[3]]=n),e})),e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in oi;ai(si,(function(e,n){var r=n[0],a=n[1],i=n[2];return"far"!==a||t||(a="fas"),e[r]={prefix:a,iconName:i},e}),{})};li();Sa.styles;function ui(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}function ci(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,a=e.children,i=void 0===a?[]:a;return"string"===typeof e?Ka(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(Ka(e[n]),'" ')}),"").trim()}(r),">").concat(i.map(ci).join(""),"</").concat(t,">")}var di=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],a=n.slice(1).join("-");if(r&&"h"===a)return e.flipX=!0,e;if(r&&"v"===a)return e.flipY=!0,e;if(a=parseFloat(a),isNaN(a))return e;switch(r){case"grow":e.size=e.size+a;break;case"shrink":e.size=e.size-a;break;case"left":e.x=e.x-a;break;case"right":e.x=e.x+a;break;case"up":e.y=e.y-a;break;case"down":e.y=e.y+a;break;case"rotate":e.rotate=e.rotate+a}return e}),t):t};function hi(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}hi.prototype=Object.create(Error.prototype),hi.prototype.constructor=hi;var fi={fill:"currentColor"},pi={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},mi={tag:"path",attributes:ea({},fi,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},vi=ea({},pi,{attributeName:"opacity"});ea({},fi,{cx:"256",cy:"364",r:"28"}),ea({},pi,{attributeName:"r",values:"28;14;28;28;14;28;"}),ea({},vi,{values:"1;0;1;1;0;1;"}),ea({},fi,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),ea({},vi,{values:"1;0;0;0;0;1;"}),ea({},fi,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),ea({},vi,{values:"0;0;1;1;0;0;"}),Sa.styles;function gi(e){var t=e[0],n=e[1],r=ta(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(wa.familyPrefix,"-").concat(ya.GROUP)},children:[{tag:"path",attributes:{class:"".concat(wa.familyPrefix,"-").concat(ya.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(wa.familyPrefix,"-").concat(ya.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}Sa.styles;var yi='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';function bi(){var e=fa,t=pa,n=wa.familyPrefix,r=wa.replacementClass,a=yi;if(n!==e||r!==t){var i=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");a=a.replace(i,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(s,".".concat(r))}return a}var xi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n.reduce(this._pullDefinitions,{});Object.keys(a).forEach((function(t){e.definitions[t]=ea({},e.definitions[t]||{},a[t]),ii(t,a[t]),li()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],a=r.prefix,i=r.iconName,o=r.icon;e[a]||(e[a]={}),e[a][i]=o})),e}}],n&&Jr(t.prototype,n),r&&Jr(t,r),e}();function wi(){wa.autoAddCss&&!Ei&&(qa(bi()),Ei=!0)}function ki(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return ci(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(da){var t=ua.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function Si(e){var t=e.prefix,n=void 0===t?"fa":t,r=e.iconName;if(r)return ui(Ti.definitions,n,r)||ui(Sa.styles,n,r)}var Ti=new xi,Ei=!1,Ci={transform:function(e){return di(e)}},_i=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:Si(t||{}),a=n.mask;return a&&(a=(a||{}).icon?a:Si(a||{})),e(r,ea({},n,{mask:a}))}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Ga:n,a=t.symbol,i=void 0!==a&&a,o=t.mask,s=void 0===o?null:o,l=t.maskId,u=void 0===l?null:l,c=t.title,d=void 0===c?null:c,h=t.titleId,f=void 0===h?null:h,p=t.classes,m=void 0===p?[]:p,v=t.attributes,g=void 0===v?{}:v,y=t.styles,b=void 0===y?{}:y;if(e){var x=e.prefix,w=e.iconName,k=e.icon;return ki(ea({type:"icon"},e),(function(){return wi(),wa.autoA11y&&(d?g["aria-labelledby"]="".concat(wa.replacementClass,"-title-").concat(f||Ya()):(g["aria-hidden"]="true",g.focusable="false")),ni({icons:{main:gi(k),mask:s?gi(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:x,iconName:w,transform:ea({},Ga,r),symbol:i,title:d,maskId:u,titleId:f,extra:{attributes:g,styles:b,classes:m}})}))}})),Mi=n(2007),Ai=n.n(Mi);function Ii(e){return Ii="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ii(e)}function Ni(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ri(Object(n),!0).forEach((function(t){Ni(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Di(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Li(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Pi(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var Fi=!1;try{Fi=!0}catch(UK){}function ji(e){return e&&"object"===Ii(e)&&e.prefix&&e.iconName&&e.icon?e:Ci.icon?Ci.icon(e):null===e?null:e&&"object"===Ii(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function zi(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Ni({},e,t):{}}function Bi(e){var t=e.forwardedRef,n=Di(e,["forwardedRef"]),r=n.icon,a=n.mask,i=n.symbol,o=n.className,s=n.title,l=n.titleId,u=ji(r),c=zi("classes",[].concat(Li(function(e){var t,n=e.spin,r=e.pulse,a=e.fixedWidth,i=e.inverse,o=e.border,s=e.listItem,l=e.flip,u=e.size,c=e.rotation,d=e.pull,h=(Ni(t={"fa-spin":n,"fa-pulse":r,"fa-fw":a,"fa-inverse":i,"fa-border":o,"fa-li":s,"fa-flip-horizontal":"horizontal"===l||"both"===l,"fa-flip-vertical":"vertical"===l||"both"===l},"fa-".concat(u),"undefined"!==typeof u&&null!==u),Ni(t,"fa-rotate-".concat(c),"undefined"!==typeof c&&null!==c&&0!==c),Ni(t,"fa-pull-".concat(d),"undefined"!==typeof d&&null!==d),Ni(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(h).map((function(e){return h[e]?e:null})).filter((function(e){return e}))}(n)),Li(o.split(" ")))),d=zi("transform","string"===typeof n.transform?Ci.transform(n.transform):n.transform),h=zi("mask",ji(a)),f=_i(u,Oi({},c,{},d,{},h,{symbol:i,title:s,titleId:l}));if(!f)return function(){var e;!Fi&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var p=f.abstract,m={ref:t};return Object.keys(n).forEach((function(e){Bi.defaultProps.hasOwnProperty(e)||(m[e]=n[e])})),Ui(p[0],m)}Bi.displayName="FontAwesomeIcon",Bi.propTypes={border:Ai().bool,className:Ai().string,mask:Ai().oneOfType([Ai().object,Ai().array,Ai().string]),fixedWidth:Ai().bool,inverse:Ai().bool,flip:Ai().oneOf(["horizontal","vertical","both"]),icon:Ai().oneOfType([Ai().object,Ai().array,Ai().string]),listItem:Ai().bool,pull:Ai().oneOf(["right","left"]),pulse:Ai().bool,rotation:Ai().oneOf([0,90,180,270]),size:Ai().oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Ai().bool,symbol:Ai().oneOfType([Ai().bool,Ai().string]),title:Ai().string,transform:Ai().oneOfType([Ai().string,Ai().object]),swapOpacity:Ai().bool},Bi.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var Ui=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var a=(n.children||[]).map((function(n){return e(t,n)})),i=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=function(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n=t.indexOf(":"),r=Pi(t.slice(0,n)),a=t.slice(n+1).trim();return r.startsWith("webkit")?e[function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(r)]=a:e[r]=a,e}),{})}(r);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[Pi(t)]=r}return e}),{attrs:{}}),o=r.style,s=void 0===o?{}:o,l=Di(r,["style"]);return i.attrs.style=Oi({},i.attrs.style,{},s),t.apply(void 0,[n.tag,Oi({},i.attrs,{},l)].concat(Li(a)))}.bind(null,T.createElement),Wi=n(5987),Vi=n(4164),Zi=n(503),Hi=n(3366),Gi=n(4578),qi=!1,Xi=T.createContext(null),Yi="unmounted",Ki="exited",$i="entering",Ji="entered",Qi="exiting",eo=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(a=Ki,r.appearStatus=$i):a=Ji:a=t.unmountOnExit||t.mountOnEnter?Yi:Ki,r.state={status:a},r.nextCallback=null,r}(0,Gi.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Yi?{status:Ki}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==$i&&n!==Ji&&(t=$i):n!==$i&&n!==Ji||(t=Qi)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===$i){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Vi.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ki&&this.setState({status:Yi})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[Vi.findDOMNode(this),r],i=a[0],o=a[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||qi?this.safeSetState({status:Ji},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,o),this.safeSetState({status:$i},(function(){t.props.onEntering(i,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:Ji},(function(){t.props.onEntered(i,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Vi.findDOMNode(this);t&&!qi?(this.props.onExit(r),this.safeSetState({status:Qi},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Ki},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Ki},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Vi.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=a[0],o=a[1];this.props.addEndListener(i,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===Yi)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,Hi.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return T.createElement(Xi.Provider,{value:null},"function"===typeof n?n(e,r):T.cloneElement(T.Children.only(n),r))},t}(T.Component);function to(){}eo.contextType=Xi,eo.propTypes={},eo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:to,onEntering:to,onEntered:to,onExit:to,onExiting:to,onExited:to},eo.UNMOUNTED=Yi,eo.EXITED=Ki,eo.ENTERING=$i,eo.ENTERED=Ji,eo.EXITING=Qi;var no=eo,ro=n(9806);function ao(){return(0,xt.Z)()||It.Z}var io=n(812),oo=function(e){return e.scrollTop};function so(e,t){var n=e.timeout,r=e.style,a=void 0===r?{}:r;return{duration:a.transitionDuration||"number"===typeof n?n:n[t.mode]||0,delay:a.transitionDelay}}function lo(e,t){var n=function(e,t){var n,r=t.getBoundingClientRect();if(t.fakeTransform)n=t.fakeTransform;else{var a=window.getComputedStyle(t);n=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("transform")}var i=0,o=0;if(n&&"none"!==n&&"string"===typeof n){var s=n.split("(")[1].split(")")[0].split(",");i=parseInt(s[4],10),o=parseInt(s[5],10)}return"left"===e?"translateX(".concat(window.innerWidth,"px) translateX(").concat(i-r.left,"px)"):"right"===e?"translateX(-".concat(r.left+r.width-i,"px)"):"up"===e?"translateY(".concat(window.innerHeight,"px) translateY(").concat(o-r.top,"px)"):"translateY(-".concat(r.top+r.height-o,"px)")}(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}var uo={enter:io.x9.enteringScreen,exit:io.x9.leavingScreen},co=T.forwardRef((function(e,t){var n=e.children,r=e.direction,a=void 0===r?"down":r,i=e.in,o=e.onEnter,s=e.onEntered,l=e.onEntering,u=e.onExit,c=e.onExited,d=e.onExiting,h=e.style,f=e.timeout,p=void 0===f?uo:f,m=e.TransitionComponent,v=void 0===m?no:m,g=(0,Wi.Z)(e,["children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),y=ao(),b=T.useRef(null),x=T.useCallback((function(e){b.current=Vi.findDOMNode(e)}),[]),w=(0,ro.Z)(n.ref,x),k=(0,ro.Z)(w,t),S=function(e){return function(t){e&&(void 0===t?e(b.current):e(b.current,t))}},E=S((function(e,t){lo(a,e),oo(e),o&&o(e,t)})),C=S((function(e,t){var n=so({timeout:p,style:h},{mode:"enter"});e.style.webkitTransition=y.transitions.create("-webkit-transform",(0,yt.Z)({},n,{easing:y.transitions.easing.easeOut})),e.style.transition=y.transitions.create("transform",(0,yt.Z)({},n,{easing:y.transitions.easing.easeOut})),e.style.webkitTransform="none",e.style.transform="none",l&&l(e,t)})),_=S(s),M=S(d),A=S((function(e){var t=so({timeout:p,style:h},{mode:"exit"});e.style.webkitTransition=y.transitions.create("-webkit-transform",(0,yt.Z)({},t,{easing:y.transitions.easing.sharp})),e.style.transition=y.transitions.create("transform",(0,yt.Z)({},t,{easing:y.transitions.easing.sharp})),lo(a,e),u&&u(e)})),I=S((function(e){e.style.webkitTransition="",e.style.transition="",c&&c(e)})),N=T.useCallback((function(){b.current&&lo(a,b.current)}),[a]);return T.useEffect((function(){if(!i&&"down"!==a&&"right"!==a){var e=(0,Zi.Z)((function(){b.current&&lo(a,b.current)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[a,i]),T.useEffect((function(){i||N()}),[i,N]),T.createElement(v,(0,yt.Z)({nodeRef:b,onEnter:E,onEntered:_,onEntering:C,onExit:A,onExited:I,onExiting:M,appear:!0,in:i,timeout:p},g),(function(e,t){return T.cloneElement(n,(0,yt.Z)({ref:k,style:(0,yt.Z)({visibility:"exited"!==e||i?void 0:"hidden"},h,n.props.style)},t))}))})),ho=co,fo=n(8182),po=n(1122),mo=n(794),vo=n(4667),go=n(1565);var yo="undefined"!==typeof window?T.useLayoutEffect:T.useEffect,bo=T.forwardRef((function(e,t){var n=e.children,r=e.container,a=e.disablePortal,i=void 0!==a&&a,o=e.onRendered,s=T.useState(null),l=s[0],u=s[1],c=(0,ro.Z)(T.isValidElement(n)?n.ref:null,t);return yo((function(){i||u(function(e){return e="function"===typeof e?e():e,Vi.findDOMNode(e)}(r)||document.body)}),[r,i]),yo((function(){if(l&&!i)return(0,go.Z)(t,l),function(){(0,go.Z)(t,null)}}),[t,l,i]),yo((function(){o&&(l||i)&&o()}),[o,l,i]),i?T.isValidElement(n)?T.cloneElement(n,{ref:c}):n:l?Vi.createPortal(n,l):l}));var xo=bo,wo=n(7545),ko=n(2216),So=n(9535);function To(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}var Eo=n(7636);function Co(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function _o(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function Mo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,i=[t,n].concat((0,_.Z)(r)),o=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===i.indexOf(e)&&-1===o.indexOf(e.tagName)&&Co(e,a)}))}function Ao(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function Io(e,t){var n,r=[],a=[],i=e.container;if(!t.disableScrollLock){if(function(e){var t=(0,vo.Z)(e);return t.body===e?(0,Eo.Z)(t).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(i)){var o=To();r.push({value:i.style.paddingRight,key:"padding-right",el:i}),i.style["padding-right"]="".concat(_o(i)+o,"px"),n=(0,vo.Z)(i).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){a.push(e.style.paddingRight),e.style.paddingRight="".concat(_o(e)+o,"px")}))}var s=i.parentElement,l="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:i;r.push({value:l.style.overflow,key:"overflow",el:l}),l.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){a[t]?e.style.paddingRight=a[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var No=function(){function e(){M(this,e),this.modals=[],this.containers=[]}return(0,A.Z)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&Co(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Mo(t,e.mountNode,e.modalRef,r,!0);var a=Ao(this.containers,(function(e){return e.container===t}));return-1!==a?(this.containers[a].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=Ao(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=Io(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=Ao(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&Co(e.modalRef,!0),Mo(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var a=r.modals[r.modals.length-1];a.modalRef&&Co(a.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var Ro=function(e){var t=e.children,n=e.disableAutoFocus,r=void 0!==n&&n,a=e.disableEnforceFocus,i=void 0!==a&&a,o=e.disableRestoreFocus,s=void 0!==o&&o,l=e.getDoc,u=e.isEnabled,c=e.open,d=T.useRef(),h=T.useRef(null),f=T.useRef(null),p=T.useRef(),m=T.useRef(null),v=T.useCallback((function(e){m.current=Vi.findDOMNode(e)}),[]),g=(0,ro.Z)(t.ref,v),y=T.useRef();return T.useEffect((function(){y.current=c}),[c]),!y.current&&c&&"undefined"!==typeof window&&(p.current=l().activeElement),T.useEffect((function(){if(c){var e=(0,vo.Z)(m.current);r||!m.current||m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex",-1),m.current.focus());var t=function(){null!==m.current&&(e.hasFocus()&&!i&&u()&&!d.current?m.current&&!m.current.contains(e.activeElement)&&m.current.focus():d.current=!1)},n=function(t){!i&&u()&&9===t.keyCode&&e.activeElement===m.current&&(d.current=!0,t.shiftKey?f.current.focus():h.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var a=setInterval((function(){t()}),50);return function(){clearInterval(a),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),s||(p.current&&p.current.focus&&p.current.focus(),p.current=null)}}}),[r,i,s,u,c]),T.createElement(T.Fragment,null,T.createElement("div",{tabIndex:0,ref:h,"data-test":"sentinelStart"}),T.cloneElement(t,{ref:g}),T.createElement("div",{tabIndex:0,ref:f,"data-test":"sentinelEnd"}))},Oo={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},Do=T.forwardRef((function(e,t){var n=e.invisible,r=void 0!==n&&n,a=e.open,i=(0,Wi.Z)(e,["invisible","open"]);return a?T.createElement("div",(0,yt.Z)({"aria-hidden":!0,ref:t},i,{style:(0,yt.Z)({},Oo.root,r?Oo.invisible:{},i.style)})):null}));var Lo=new No,Po=T.forwardRef((function(e,t){var n=(0,xt.Z)(),r=(0,mo.Z)({name:"MuiModal",props:(0,yt.Z)({},e),theme:n}),a=r.BackdropComponent,i=void 0===a?Do:a,o=r.BackdropProps,s=r.children,l=r.closeAfterTransition,u=void 0!==l&&l,c=r.container,d=r.disableAutoFocus,h=void 0!==d&&d,f=r.disableBackdropClick,p=void 0!==f&&f,m=r.disableEnforceFocus,v=void 0!==m&&m,g=r.disableEscapeKeyDown,y=void 0!==g&&g,b=r.disablePortal,x=void 0!==b&&b,w=r.disableRestoreFocus,k=void 0!==w&&w,S=r.disableScrollLock,E=void 0!==S&&S,C=r.hideBackdrop,_=void 0!==C&&C,M=r.keepMounted,A=void 0!==M&&M,I=r.manager,N=void 0===I?Lo:I,R=r.onBackdropClick,O=r.onClose,D=r.onEscapeKeyDown,L=r.onRendered,P=r.open,F=(0,Wi.Z)(r,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),j=T.useState(!0),z=j[0],B=j[1],U=T.useRef({}),W=T.useRef(null),V=T.useRef(null),Z=(0,ro.Z)(V,t),H=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(r),G=function(){return(0,vo.Z)(W.current)},q=function(){return U.current.modalRef=V.current,U.current.mountNode=W.current,U.current},X=function(){N.mount(q(),{disableScrollLock:E}),V.current.scrollTop=0},Y=(0,ko.Z)((function(){var e=function(e){return e="function"===typeof e?e():e,Vi.findDOMNode(e)}(c)||G().body;N.add(q(),e),V.current&&X()})),K=T.useCallback((function(){return N.isTopModal(q())}),[N]),$=(0,ko.Z)((function(e){W.current=e,e&&(L&&L(),P&&K()?X():Co(V.current,!0))})),J=T.useCallback((function(){N.remove(q())}),[N]);if(T.useEffect((function(){return function(){J()}}),[J]),T.useEffect((function(){P?Y():H&&u||J()}),[P,J,H,u,Y]),!A&&!P&&(!H||z))return null;var Q=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(n||{zIndex:So.Z}),ee={};return void 0===s.props.tabIndex&&(ee.tabIndex=s.props.tabIndex||"-1"),H&&(ee.onEnter=(0,wo.Z)((function(){B(!1)}),s.props.onEnter),ee.onExited=(0,wo.Z)((function(){B(!0),u&&J()}),s.props.onExited)),T.createElement(xo,{ref:$,container:c,disablePortal:x},T.createElement("div",(0,yt.Z)({ref:Z,onKeyDown:function(e){"Escape"===e.key&&K()&&(D&&D(e),y||(e.stopPropagation(),O&&O(e,"escapeKeyDown")))},role:"presentation"},F,{style:(0,yt.Z)({},Q.root,!P&&z?Q.hidden:{},F.style)}),_?null:T.createElement(i,(0,yt.Z)({open:P,onClick:function(e){e.target===e.currentTarget&&(R&&R(e),!p&&O&&O(e,"backdropClick"))}},o)),T.createElement(Ro,{disableEnforceFocus:v,disableAutoFocus:h,disableRestoreFocus:k,getDoc:G,isEnabled:K,open:P},T.cloneElement(s,ee))))})),Fo=Po,jo={entering:{opacity:1},entered:{opacity:1}},zo={enter:io.x9.enteringScreen,exit:io.x9.leavingScreen},Bo=T.forwardRef((function(e,t){var n=e.children,r=e.disableStrictModeCompat,a=void 0!==r&&r,i=e.in,o=e.onEnter,s=e.onEntered,l=e.onEntering,u=e.onExit,c=e.onExited,d=e.onExiting,h=e.style,f=e.TransitionComponent,p=void 0===f?no:f,m=e.timeout,v=void 0===m?zo:m,g=(0,Wi.Z)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),y=ao(),b=y.unstable_strictMode&&!a,x=T.useRef(null),w=(0,ro.Z)(n.ref,t),k=(0,ro.Z)(b?x:void 0,w),S=function(e){return function(t,n){if(e){var r=b?[x.current,t]:[t,n],a=(0,U.Z)(r,2),i=a[0],o=a[1];void 0===o?e(i):e(i,o)}}},E=S(l),C=S((function(e,t){oo(e);var n=so({style:h,timeout:v},{mode:"enter"});e.style.webkitTransition=y.transitions.create("opacity",n),e.style.transition=y.transitions.create("opacity",n),o&&o(e,t)})),_=S(s),M=S(d),A=S((function(e){var t=so({style:h,timeout:v},{mode:"exit"});e.style.webkitTransition=y.transitions.create("opacity",t),e.style.transition=y.transitions.create("opacity",t),u&&u(e)})),I=S(c);return T.createElement(p,(0,yt.Z)({appear:!0,in:i,nodeRef:b?x:void 0,onEnter:C,onEntered:_,onEntering:E,onExit:A,onExited:I,onExiting:M,timeout:v},g),(function(e,t){return T.cloneElement(n,(0,yt.Z)({style:(0,yt.Z)({opacity:0,visibility:"exited"!==e||i?void 0:"hidden"},jo[e],h,n.props.style),ref:k},t))}))})),Uo=Bo,Wo=T.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.invisible,o=void 0!==i&&i,s=e.open,l=e.transitionDuration,u=e.TransitionComponent,c=void 0===u?Uo:u,d=(0,Wi.Z)(e,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return T.createElement(c,(0,yt.Z)({in:s,timeout:l},d),T.createElement("div",{className:(0,fo.Z)(r.root,a,o&&r.invisible),"aria-hidden":!0,ref:t},n))})),Vo=(0,St.Z)({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(Wo),Zo=T.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.component,i=void 0===a?"div":a,o=e.square,s=void 0!==o&&o,l=e.elevation,u=void 0===l?1:l,c=e.variant,d=void 0===c?"elevation":c,h=(0,Wi.Z)(e,["classes","className","component","square","elevation","variant"]);return T.createElement(i,(0,yt.Z)({className:(0,fo.Z)(n.root,r,"outlined"===d?n.outlined:n["elevation".concat(u)],!s&&n.rounded),ref:t},h))})),Ho=(0,St.Z)((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),(0,yt.Z)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(Zo),Go={enter:io.x9.enteringScreen,exit:io.x9.leavingScreen},qo=T.forwardRef((function(e,t){var n=e.BackdropProps,r=e.children,a=e.classes,i=e.className,o=e.disableBackdropClick,s=void 0!==o&&o,l=e.disableEscapeKeyDown,u=void 0!==l&&l,c=e.fullScreen,d=void 0!==c&&c,h=e.fullWidth,f=void 0!==h&&h,p=e.maxWidth,m=void 0===p?"sm":p,v=e.onBackdropClick,g=e.onClose,y=e.onEnter,b=e.onEntered,x=e.onEntering,w=e.onEscapeKeyDown,k=e.onExit,S=e.onExited,E=e.onExiting,C=e.open,_=e.PaperComponent,M=void 0===_?Ho:_,A=e.PaperProps,I=void 0===A?{}:A,N=e.scroll,R=void 0===N?"paper":N,O=e.TransitionComponent,D=void 0===O?Uo:O,L=e.transitionDuration,P=void 0===L?Go:L,F=e.TransitionProps,j=e["aria-describedby"],z=e["aria-labelledby"],B=(0,Wi.Z)(e,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),U=T.useRef();return T.createElement(Fo,(0,yt.Z)({className:(0,fo.Z)(a.root,i),BackdropComponent:Vo,BackdropProps:(0,yt.Z)({transitionDuration:P},n),closeAfterTransition:!0},s?{disableBackdropClick:s}:{},{disableEscapeKeyDown:u,onEscapeKeyDown:w,onClose:g,open:C,ref:t},B),T.createElement(D,(0,yt.Z)({appear:!0,in:C,timeout:P,onEnter:y,onEntering:x,onEntered:b,onExit:k,onExiting:E,onExited:S,role:"none presentation"},F),T.createElement("div",{className:(0,fo.Z)(a.container,a["scroll".concat((0,po.Z)(R))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===U.current&&(U.current=null,v&&v(e),!s&&g&&g(e,"backdropClick"))},onMouseDown:function(e){U.current=e.target}},T.createElement(M,(0,yt.Z)({elevation:24,role:"dialog","aria-describedby":j,"aria-labelledby":z},I,{className:(0,fo.Z)(a.paper,a["paperScroll".concat((0,po.Z)(R))],a["paperWidth".concat((0,po.Z)(String(m)))],I.className,d&&a.paperFullScreen,f&&a.paperFullWidth)}),r))))})),Xo=(0,St.Z)((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":(0,_t.Z)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":(0,_t.Z)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":(0,_t.Z)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":(0,_t.Z)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":(0,_t.Z)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(qo),Yo=n(3108),Ko=n(1175);function $o(e,t){var n=Object.create(null);return e&&T.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,T.isValidElement)(e)?t(e):e}(e)})),n}function Jo(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Qo(e,t,n){var r=$o(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,a=Object.create(null),i=[];for(var o in e)o in t?i.length&&(a[o]=i,i=[]):i.push(o);var s={};for(var l in t){if(a[l])for(r=0;r<a[l].length;r++){var u=a[l][r];s[a[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<i.length;r++)s[i[r]]=n(i[r]);return s}(t,r);return Object.keys(a).forEach((function(i){var o=a[i];if((0,T.isValidElement)(o)){var s=i in t,l=i in r,u=t[i],c=(0,T.isValidElement)(u)&&!u.props.in;!l||s&&!c?l||!s||c?l&&s&&(0,T.isValidElement)(u)&&(a[i]=(0,T.cloneElement)(o,{onExited:n.bind(null,o),in:u.props.in,exit:Jo(o,"exit",e),enter:Jo(o,"enter",e)})):a[i]=(0,T.cloneElement)(o,{in:!1}):a[i]=(0,T.cloneElement)(o,{onExited:n.bind(null,o),in:!0,exit:Jo(o,"exit",e),enter:Jo(o,"enter",e)})}})),a}var es=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},ts=function(e){function t(t,n){var r,a=(r=e.call(this,t,n)||this).handleExited.bind((0,L.Z)(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}(0,Gi.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,a=t.children,i=t.handleExited;return{children:t.firstRender?(n=e,r=i,$o(n.children,(function(e){return(0,T.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:Jo(e,"appear",n),enter:Jo(e,"enter",n),exit:Jo(e,"exit",n)})}))):Qo(e,a,i),firstRender:!1}},n.handleExited=function(e,t){var n=$o(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,yt.Z)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,Hi.Z)(e,["component","childFactory"]),a=this.state.contextValue,i=es(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?T.createElement(Xi.Provider,{value:a},i):T.createElement(Xi.Provider,{value:a},T.createElement(t,r,i))},t}(T.Component);ts.propTypes={},ts.defaultProps={component:"div",childFactory:function(e){return e}};var ns=ts,rs="undefined"===typeof window?T.useEffect:T.useLayoutEffect;var as=function(e){var t=e.classes,n=e.pulsate,r=void 0!==n&&n,a=e.rippleX,i=e.rippleY,o=e.rippleSize,s=e.in,l=e.onExited,u=void 0===l?function(){}:l,c=e.timeout,d=T.useState(!1),h=d[0],f=d[1],p=(0,fo.Z)(t.ripple,t.rippleVisible,r&&t.ripplePulsate),m={width:o,height:o,top:-o/2+i,left:-o/2+a},v=(0,fo.Z)(t.child,h&&t.childLeaving,r&&t.childPulsate),g=(0,ko.Z)(u);return rs((function(){if(!s){f(!0);var e=setTimeout(g,c);return function(){clearTimeout(e)}}}),[g,s,c]),T.createElement("span",{className:p,style:m},T.createElement("span",{className:v}))},is=T.forwardRef((function(e,t){var n=e.center,r=void 0!==n&&n,a=e.classes,i=e.className,o=(0,Wi.Z)(e,["center","classes","className"]),s=T.useState([]),l=s[0],u=s[1],c=T.useRef(0),d=T.useRef(null);T.useEffect((function(){d.current&&(d.current(),d.current=null)}),[l]);var h=T.useRef(!1),f=T.useRef(null),p=T.useRef(null),m=T.useRef(null);T.useEffect((function(){return function(){clearTimeout(f.current)}}),[]);var v=T.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,o=e.cb;u((function(e){return[].concat((0,_.Z)(e),[T.createElement(as,{key:c.current,classes:a,timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i})])})),c.current+=1,d.current=o}),[a]),g=T.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=t.pulsate,i=void 0!==a&&a,o=t.center,s=void 0===o?r||t.pulsate:o,l=t.fakeElement,u=void 0!==l&&l;if("mousedown"===e.type&&h.current)h.current=!1;else{"touchstart"===e.type&&(h.current=!0);var c,d,g,y=u?null:m.current,b=y?y.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(b.width/2),d=Math.round(b.height/2);else{var x=e.touches?e.touches[0]:e,w=x.clientX,k=x.clientY;c=Math.round(w-b.left),d=Math.round(k-b.top)}if(s)(g=Math.sqrt((2*Math.pow(b.width,2)+Math.pow(b.height,2))/3))%2===0&&(g+=1);else{var S=2*Math.max(Math.abs((y?y.clientWidth:0)-c),c)+2,T=2*Math.max(Math.abs((y?y.clientHeight:0)-d),d)+2;g=Math.sqrt(Math.pow(S,2)+Math.pow(T,2))}e.touches?null===p.current&&(p.current=function(){v({pulsate:i,rippleX:c,rippleY:d,rippleSize:g,cb:n})},f.current=setTimeout((function(){p.current&&(p.current(),p.current=null)}),80)):v({pulsate:i,rippleX:c,rippleY:d,rippleSize:g,cb:n})}}),[r,v]),y=T.useCallback((function(){g({},{pulsate:!0})}),[g]),b=T.useCallback((function(e,t){if(clearTimeout(f.current),"touchend"===e.type&&p.current)return e.persist(),p.current(),p.current=null,void(f.current=setTimeout((function(){b(e,t)})));p.current=null,u((function(e){return e.length>0?e.slice(1):e})),d.current=t}),[]);return T.useImperativeHandle(t,(function(){return{pulsate:y,start:g,stop:b}}),[y,g,b]),T.createElement("span",(0,yt.Z)({className:(0,fo.Z)(a.root,i),ref:m},o),T.createElement(ns,{component:null,exit:!0},l))})),os=(0,St.Z)((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(T.memo(is)),ss=T.forwardRef((function(e,t){var n=e.action,r=e.buttonRef,a=e.centerRipple,i=void 0!==a&&a,o=e.children,s=e.classes,l=e.className,u=e.component,c=void 0===u?"button":u,d=e.disabled,h=void 0!==d&&d,f=e.disableRipple,p=void 0!==f&&f,m=e.disableTouchRipple,v=void 0!==m&&m,g=e.focusRipple,y=void 0!==g&&g,b=e.focusVisibleClassName,x=e.onBlur,w=e.onClick,k=e.onFocus,S=e.onFocusVisible,E=e.onKeyDown,C=e.onKeyUp,_=e.onMouseDown,M=e.onMouseLeave,A=e.onMouseUp,I=e.onTouchEnd,N=e.onTouchMove,R=e.onTouchStart,O=e.onDragLeave,D=e.tabIndex,L=void 0===D?0:D,P=e.TouchRippleProps,F=e.type,j=void 0===F?"button":F,z=(0,Wi.Z)(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),B=T.useRef(null);var U=T.useRef(null),W=T.useState(!1),V=W[0],Z=W[1];h&&V&&Z(!1);var H=(0,Ko.Z)(),G=H.isFocusVisible,q=H.onBlurVisible,X=H.ref;function Y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return(0,ko.Z)((function(r){return t&&t(r),!n&&U.current&&U.current[e](r),!0}))}T.useImperativeHandle(n,(function(){return{focusVisible:function(){Z(!0),B.current.focus()}}}),[]),T.useEffect((function(){V&&y&&!p&&U.current.pulsate()}),[p,y,V]);var K=Y("start",_),$=Y("stop",O),J=Y("stop",A),Q=Y("stop",(function(e){V&&e.preventDefault(),M&&M(e)})),ee=Y("start",R),te=Y("stop",I),ne=Y("stop",N),re=Y("stop",(function(e){V&&(q(e),Z(!1)),x&&x(e)}),!1),ae=(0,ko.Z)((function(e){B.current||(B.current=e.currentTarget),G(e)&&(Z(!0),S&&S(e)),k&&k(e)})),ie=function(){var e=Vi.findDOMNode(B.current);return c&&"button"!==c&&!("A"===e.tagName&&e.href)},oe=T.useRef(!1),se=(0,ko.Z)((function(e){y&&!oe.current&&V&&U.current&&" "===e.key&&(oe.current=!0,e.persist(),U.current.stop(e,(function(){U.current.start(e)}))),e.target===e.currentTarget&&ie()&&" "===e.key&&e.preventDefault(),E&&E(e),e.target===e.currentTarget&&ie()&&"Enter"===e.key&&!h&&(e.preventDefault(),w&&w(e))})),le=(0,ko.Z)((function(e){y&&" "===e.key&&U.current&&V&&!e.defaultPrevented&&(oe.current=!1,e.persist(),U.current.stop(e,(function(){U.current.pulsate(e)}))),C&&C(e),w&&e.target===e.currentTarget&&ie()&&" "===e.key&&!e.defaultPrevented&&w(e)})),ue=c;"button"===ue&&z.href&&(ue="a");var ce={};"button"===ue?(ce.type=j,ce.disabled=h):("a"===ue&&z.href||(ce.role="button"),ce["aria-disabled"]=h);var de=(0,ro.Z)(r,t),he=(0,ro.Z)(X,B),fe=(0,ro.Z)(de,he),pe=T.useState(!1),me=pe[0],ve=pe[1];T.useEffect((function(){ve(!0)}),[]);var ge=me&&!p&&!h;return T.createElement(ue,(0,yt.Z)({className:(0,fo.Z)(s.root,l,V&&[s.focusVisible,b],h&&s.disabled),onBlur:re,onClick:w,onFocus:ae,onKeyDown:se,onKeyUp:le,onMouseDown:K,onMouseLeave:Q,onMouseUp:J,onDragLeave:$,onTouchEnd:te,onTouchMove:ne,onTouchStart:ee,ref:fe,tabIndex:h?-1:L},ce,z),o,ge?T.createElement(os,(0,yt.Z)({ref:U,center:i},P)):null)})),ls=(0,St.Z)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(ss),us=T.forwardRef((function(e,t){var n=e.edge,r=void 0!==n&&n,a=e.children,i=e.classes,o=e.className,s=e.color,l=void 0===s?"default":s,u=e.disabled,c=void 0!==u&&u,d=e.disableFocusRipple,h=void 0!==d&&d,f=e.size,p=void 0===f?"medium":f,m=(0,Wi.Z)(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return T.createElement(ls,(0,yt.Z)({className:(0,fo.Z)(i.root,o,"default"!==l&&i["color".concat((0,po.Z)(l))],c&&i.disabled,"small"===p&&i["size".concat((0,po.Z)(p))],{start:i.edgeStart,end:i.edgeEnd}[r]),centerRipple:!0,focusRipple:!h,disabled:c,ref:t},m),T.createElement("span",{className:i.label},a))})),cs=(0,St.Z)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:(0,Yo.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,Yo.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,Yo.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(us),ds={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},hs=T.forwardRef((function(e,t){var n=e.align,r=void 0===n?"inherit":n,a=e.classes,i=e.className,o=e.color,s=void 0===o?"initial":o,l=e.component,u=e.display,c=void 0===u?"initial":u,d=e.gutterBottom,h=void 0!==d&&d,f=e.noWrap,p=void 0!==f&&f,m=e.paragraph,v=void 0!==m&&m,g=e.variant,y=void 0===g?"body1":g,b=e.variantMapping,x=void 0===b?ds:b,w=(0,Wi.Z)(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),k=l||(v?"p":x[y]||ds[y])||"span";return T.createElement(k,(0,yt.Z)({className:(0,fo.Z)(a.root,i,"inherit"!==y&&a[y],"initial"!==s&&a["color".concat((0,po.Z)(s))],p&&a.noWrap,h&&a.gutterBottom,v&&a.paragraph,"inherit"!==r&&a["align".concat((0,po.Z)(r))],"initial"!==c&&a["display".concat((0,po.Z)(c))]),ref:t},w))})),fs=(0,St.Z)((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(hs),ps=T.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.disableTypography,o=void 0!==i&&i,s=(0,Wi.Z)(e,["children","classes","className","disableTypography"]);return T.createElement("div",(0,yt.Z)({className:(0,fo.Z)(r.root,a),ref:t},s),o?n:T.createElement(fs,{component:"h2",variant:"h6"},n))})),ms=(0,St.Z)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(ps),vs=T.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.dividers,i=void 0!==a&&a,o=(0,Wi.Z)(e,["classes","className","dividers"]);return T.createElement("div",(0,yt.Z)({className:(0,fo.Z)(n.root,r,i&&n.dividers),ref:t},o))})),gs=(0,St.Z)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(vs),ys=T.forwardRef((function(e,t){return T.createElement(fs,(0,yt.Z)({component:"p",variant:"body1",color:"textSecondary",ref:t},e))})),bs=(0,St.Z)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(ys),xs=[0,1,2,3,4,5,6,7,8,9,10],ws=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function ks(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/t).concat(String(e).replace(String(n),"")||"px")}var Ss=T.forwardRef((function(e,t){var n=e.alignContent,r=void 0===n?"stretch":n,a=e.alignItems,i=void 0===a?"stretch":a,o=e.classes,s=e.className,l=e.component,u=void 0===l?"div":l,c=e.container,d=void 0!==c&&c,h=e.direction,f=void 0===h?"row":h,p=e.item,m=void 0!==p&&p,v=e.justify,g=e.justifyContent,y=void 0===g?"flex-start":g,b=e.lg,x=void 0!==b&&b,w=e.md,k=void 0!==w&&w,S=e.sm,E=void 0!==S&&S,C=e.spacing,_=void 0===C?0:C,M=e.wrap,A=void 0===M?"wrap":M,I=e.xl,N=void 0!==I&&I,R=e.xs,O=void 0!==R&&R,D=e.zeroMinWidth,L=void 0!==D&&D,P=(0,Wi.Z)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),F=(0,fo.Z)(o.root,s,d&&[o.container,0!==_&&o["spacing-xs-".concat(String(_))]],m&&o.item,L&&o.zeroMinWidth,"row"!==f&&o["direction-xs-".concat(String(f))],"wrap"!==A&&o["wrap-xs-".concat(String(A))],"stretch"!==i&&o["align-items-xs-".concat(String(i))],"stretch"!==r&&o["align-content-xs-".concat(String(r))],"flex-start"!==(v||y)&&o["justify-content-xs-".concat(String(v||y))],!1!==O&&o["grid-xs-".concat(String(O))],!1!==E&&o["grid-sm-".concat(String(E))],!1!==k&&o["grid-md-".concat(String(k))],!1!==x&&o["grid-lg-".concat(String(x))],!1!==N&&o["grid-xl-".concat(String(N))]);return T.createElement(u,(0,yt.Z)({className:F,ref:t},P))})),Ts=(0,St.Z)((function(e){return(0,yt.Z)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return xs.forEach((function(r){var a=e.spacing(r);0!==a&&(n["spacing-".concat(t,"-").concat(r)]={margin:"-".concat(ks(a,2)),width:"calc(100% + ".concat(ks(a),")"),"& > $item":{padding:ks(a,2)}})})),n}(e,"xs"),e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var r={};ws.forEach((function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var a="".concat(Math.round(e/12*1e8)/1e6,"%");r[t]={flexBasis:a,flexGrow:0,maxWidth:a}}else r[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?(0,yt.Z)(e,r):e[t.breakpoints.up(n)]=r}(t,e,n),t}),{}))}),{name:"MuiGrid"})(Ss),Es=Ts,Cs=n(7483);function _s(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var Ms=T.createContext();var As=Ms;function Is(e,t){return parseInt(e[t],10)||0}var Ns="undefined"!==typeof window?T.useLayoutEffect:T.useEffect,Rs={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},Os=T.forwardRef((function(e,t){var n=e.onChange,r=e.rows,a=e.rowsMax,i=e.rowsMin,o=e.maxRows,s=e.minRows,l=void 0===s?1:s,u=e.style,c=e.value,d=(0,Wi.Z)(e,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),h=o||a,f=r||i||l,p=T.useRef(null!=c).current,m=T.useRef(null),v=(0,ro.Z)(t,m),g=T.useRef(null),y=T.useRef(0),b=T.useState({}),x=b[0],w=b[1],k=T.useCallback((function(){var t=m.current,n=window.getComputedStyle(t),r=g.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var a=n["box-sizing"],i=Is(n,"padding-bottom")+Is(n,"padding-top"),o=Is(n,"border-bottom-width")+Is(n,"border-top-width"),s=r.scrollHeight-i;r.value="x";var l=r.scrollHeight-i,u=s;f&&(u=Math.max(Number(f)*l,u)),h&&(u=Math.min(Number(h)*l,u));var c=(u=Math.max(u,l))+("border-box"===a?i+o:0),d=Math.abs(u-s)<=1;w((function(e){return y.current<20&&(c>0&&Math.abs((e.outerHeightStyle||0)-c)>1||e.overflow!==d)?(y.current+=1,{overflow:d,outerHeightStyle:c}):e}))}),[h,f,e.placeholder]);T.useEffect((function(){var e=(0,Zi.Z)((function(){y.current=0,k()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[k]),Ns((function(){k()})),T.useEffect((function(){y.current=0}),[c]);return T.createElement(T.Fragment,null,T.createElement("textarea",(0,yt.Z)({value:c,onChange:function(e){y.current=0,p||k(),n&&n(e)},ref:v,rows:f,style:(0,yt.Z)({height:x.outerHeightStyle,overflow:x.overflow?"hidden":null},u)},d)),T.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:g,tabIndex:-1,style:(0,yt.Z)({},Rs,u)}))})),Ds=Os;function Ls(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Ps(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Ls(e.value)&&""!==e.value||t&&Ls(e.defaultValue)&&""!==e.defaultValue)}var Fs="undefined"===typeof window?T.useEffect:T.useLayoutEffect,js=T.forwardRef((function(e,t){var n=e["aria-describedby"],r=e.autoComplete,a=e.autoFocus,i=e.classes,o=e.className,s=(e.color,e.defaultValue),l=e.disabled,u=e.endAdornment,c=(e.error,e.fullWidth),d=void 0!==c&&c,h=e.id,f=e.inputComponent,p=void 0===f?"input":f,m=e.inputProps,v=void 0===m?{}:m,g=e.inputRef,y=(e.margin,e.multiline),b=void 0!==y&&y,x=e.name,w=e.onBlur,k=e.onChange,S=e.onClick,E=e.onFocus,C=e.onKeyDown,_=e.onKeyUp,M=e.placeholder,A=e.readOnly,I=e.renderSuffix,N=e.rows,R=e.rowsMax,O=e.rowsMin,D=e.maxRows,L=e.minRows,P=e.startAdornment,F=e.type,j=void 0===F?"text":F,z=e.value,B=(0,Wi.Z)(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),U=null!=v.value?v.value:z,W=T.useRef(null!=U).current,V=T.useRef(),Z=T.useCallback((function(e){0}),[]),H=(0,ro.Z)(v.ref,Z),G=(0,ro.Z)(g,H),q=(0,ro.Z)(V,G),X=T.useState(!1),Y=X[0],K=X[1],$=T.useContext(Ms);var J=_s({props:e,muiFormControl:$,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});J.focused=$?$.focused:Y,T.useEffect((function(){!$&&l&&Y&&(K(!1),w&&w())}),[$,l,Y,w]);var Q=$&&$.onFilled,ee=$&&$.onEmpty,te=T.useCallback((function(e){Ps(e)?Q&&Q():ee&&ee()}),[Q,ee]);Fs((function(){W&&te({value:U})}),[U,te,W]);T.useEffect((function(){te(V.current)}),[]);var ne=p,re=(0,yt.Z)({},v,{ref:q});"string"!==typeof ne?re=(0,yt.Z)({inputRef:q,type:j},re,{ref:null}):b?!N||D||L||R||O?(re=(0,yt.Z)({minRows:N||L,rowsMax:R,maxRows:D},re),ne=Ds):ne="textarea":re=(0,yt.Z)({type:j},re);return T.useEffect((function(){$&&$.setAdornedStart(Boolean(P))}),[$,P]),T.createElement("div",(0,yt.Z)({className:(0,fo.Z)(i.root,i["color".concat((0,po.Z)(J.color||"primary"))],o,J.disabled&&i.disabled,J.error&&i.error,d&&i.fullWidth,J.focused&&i.focused,$&&i.formControl,b&&i.multiline,P&&i.adornedStart,u&&i.adornedEnd,"dense"===J.margin&&i.marginDense),onClick:function(e){V.current&&e.currentTarget===e.target&&V.current.focus(),S&&S(e)},ref:t},B),P,T.createElement(As.Provider,{value:null},T.createElement(ne,(0,yt.Z)({"aria-invalid":J.error,"aria-describedby":n,autoComplete:r,autoFocus:a,defaultValue:s,disabled:J.disabled,id:h,onAnimationStart:function(e){te("mui-auto-fill-cancel"===e.animationName?V.current:{value:"x"})},name:x,placeholder:M,readOnly:A,required:J.required,rows:N,value:U,onKeyDown:C,onKeyUp:_},re,{className:(0,fo.Z)(i.input,v.className,J.disabled&&i.disabled,b&&i.inputMultiline,J.hiddenLabel&&i.inputHiddenLabel,P&&i.inputAdornedStart,u&&i.inputAdornedEnd,"search"===j&&i.inputTypeSearch,"dense"===J.margin&&i.inputMarginDense),onBlur:function(e){w&&w(e),v.onBlur&&v.onBlur(e),$&&$.onBlur?$.onBlur(e):K(!1)},onChange:function(e){if(!W){var t=e.target||V.current;if(null==t)throw new Error((0,Cs.Z)(1));te({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];v.onChange&&v.onChange.apply(v,[e].concat(r)),k&&k.apply(void 0,[e].concat(r))},onFocus:function(e){J.disabled?e.stopPropagation():(E&&E(e),v.onFocus&&v.onFocus(e),$&&$.onFocus?$.onFocus(e):K(!0))}}))),u,I?I((0,yt.Z)({},J,{startAdornment:P})):null)})),zs=(0,St.Z)((function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},a={opacity:t?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:(0,yt.Z)({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus:-ms-input-placeholder":a,"&:focus::-ms-input-placeholder":a},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(js),Bs=T.forwardRef((function(e,t){var n=e.disableUnderline,r=e.classes,a=e.fullWidth,i=void 0!==a&&a,o=e.inputComponent,s=void 0===o?"input":o,l=e.multiline,u=void 0!==l&&l,c=e.type,d=void 0===c?"text":c,h=(0,Wi.Z)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return T.createElement(zs,(0,yt.Z)({classes:(0,yt.Z)({},r,{root:(0,fo.Z)(r.root,!n&&r.underline),underline:null}),fullWidth:i,inputComponent:s,multiline:u,ref:t,type:d},h))}));Bs.muiName="Input";var Us=(0,St.Z)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(Bs),Ws=T.forwardRef((function(e,t){var n=e.disableUnderline,r=e.classes,a=e.fullWidth,i=void 0!==a&&a,o=e.inputComponent,s=void 0===o?"input":o,l=e.multiline,u=void 0!==l&&l,c=e.type,d=void 0===c?"text":c,h=(0,Wi.Z)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return T.createElement(zs,(0,yt.Z)({classes:(0,yt.Z)({},r,{root:(0,fo.Z)(r.root,!n&&r.underline),underline:null}),fullWidth:i,inputComponent:s,multiline:u,ref:t,type:d},h))}));Ws.muiName="Input";var Vs=(0,St.Z)((function(e){var t="light"===e.palette.type,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:r,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:t?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:r}},"&$focused":{backgroundColor:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(Ws),Zs=T.forwardRef((function(e,t){e.children;var n=e.classes,r=e.className,a=e.label,i=e.labelWidth,o=e.notched,s=e.style,l=(0,Wi.Z)(e,["children","classes","className","label","labelWidth","notched","style"]),u="rtl"===ao().direction?"right":"left";if(void 0!==a)return T.createElement("fieldset",(0,yt.Z)({"aria-hidden":!0,className:(0,fo.Z)(n.root,r),ref:t,style:s},l),T.createElement("legend",{className:(0,fo.Z)(n.legendLabelled,o&&n.legendNotched)},a?T.createElement("span",null,a):T.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var c=i>0?.75*i+8:.01;return T.createElement("fieldset",(0,yt.Z)({"aria-hidden":!0,style:(0,yt.Z)((0,_t.Z)({},"padding".concat((0,po.Z)(u)),8),s),className:(0,fo.Z)(n.root,r),ref:t},l),T.createElement("legend",{className:n.legend,style:{width:o?c:.01}},T.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))})),Hs=(0,St.Z)((function(e){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(Zs),Gs=T.forwardRef((function(e,t){var n=e.classes,r=e.fullWidth,a=void 0!==r&&r,i=e.inputComponent,o=void 0===i?"input":i,s=e.label,l=e.labelWidth,u=void 0===l?0:l,c=e.multiline,d=void 0!==c&&c,h=e.notched,f=e.type,p=void 0===f?"text":f,m=(0,Wi.Z)(e,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return T.createElement(zs,(0,yt.Z)({renderSuffix:function(e){return T.createElement(Hs,{className:n.notchedOutline,label:s,labelWidth:u,notched:"undefined"!==typeof h?h:Boolean(e.startAdornment||e.filled||e.focused)})},classes:(0,yt.Z)({},n,{root:(0,fo.Z)(n.root,n.underline),notchedOutline:null}),fullWidth:a,inputComponent:o,multiline:d,ref:t,type:p},m))}));Gs.muiName="Input";var qs=(0,St.Z)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:e.shape.borderRadius,"&:hover $notchedOutline":{borderColor:e.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:t}},"&$focused $notchedOutline":{borderColor:e.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:e.palette.error.main},"&$disabled $notchedOutline":{borderColor:e.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:e.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:t},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(Gs);function Xs(){return T.useContext(As)}var Ys=T.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=(e.color,e.component),o=void 0===i?"label":i,s=(e.disabled,e.error,e.filled,e.focused,e.required,(0,Wi.Z)(e,["children","classes","className","color","component","disabled","error","filled","focused","required"])),l=_s({props:e,muiFormControl:Xs(),states:["color","required","focused","disabled","error","filled"]});return T.createElement(o,(0,yt.Z)({className:(0,fo.Z)(r.root,r["color".concat((0,po.Z)(l.color||"primary"))],a,l.disabled&&r.disabled,l.error&&r.error,l.filled&&r.filled,l.focused&&r.focused,l.required&&r.required),ref:t},s),n,l.required&&T.createElement("span",{"aria-hidden":!0,className:(0,fo.Z)(r.asterisk,l.error&&r.error)},"\u2009","*"))})),Ks=(0,St.Z)((function(e){return{root:(0,yt.Z)({color:e.palette.text.secondary},e.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:e.palette.primary.main},"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),colorSecondary:{"&$focused":{color:e.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:e.palette.error.main}}}}),{name:"MuiFormLabel"})(Ys),$s=T.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.disableAnimation,i=void 0!==a&&a,o=(e.margin,e.shrink),s=(e.variant,(0,Wi.Z)(e,["classes","className","disableAnimation","margin","shrink","variant"])),l=Xs(),u=o;"undefined"===typeof u&&l&&(u=l.filled||l.focused||l.adornedStart);var c=_s({props:e,muiFormControl:l,states:["margin","variant"]});return T.createElement(Ks,(0,yt.Z)({"data-shrink":u,className:(0,fo.Z)(n.root,r,l&&n.formControl,!i&&n.animated,u&&n.shrink,"dense"===c.margin&&n.marginDense,{filled:n.filled,outlined:n.outlined}[c.variant]),classes:{focused:n.focused,disabled:n.disabled,error:n.error,required:n.required,asterisk:n.asterisk},ref:t},s))})),Js=(0,St.Z)((function(e){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:e.transitions.create(["color","transform"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}}),{name:"MuiInputLabel"})($s),Qs=n(3375),el=T.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.color,o=void 0===i?"primary":i,s=e.component,l=void 0===s?"div":s,u=e.disabled,c=void 0!==u&&u,d=e.error,h=void 0!==d&&d,f=e.fullWidth,p=void 0!==f&&f,m=e.focused,v=e.hiddenLabel,g=void 0!==v&&v,y=e.margin,b=void 0===y?"none":y,x=e.required,w=void 0!==x&&x,k=e.size,S=e.variant,E=void 0===S?"standard":S,C=(0,Wi.Z)(e,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),_=T.useState((function(){var e=!1;return n&&T.Children.forEach(n,(function(t){if((0,Qs.Z)(t,["Input","Select"])){var n=(0,Qs.Z)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}})),e})),M=_[0],A=_[1],I=T.useState((function(){var e=!1;return n&&T.Children.forEach(n,(function(t){(0,Qs.Z)(t,["Input","Select"])&&Ps(t.props,!0)&&(e=!0)})),e})),N=I[0],R=I[1],O=T.useState(!1),D=O[0],L=O[1],P=void 0!==m?m:D;c&&P&&L(!1);var F=T.useCallback((function(){R(!0)}),[]),j={adornedStart:M,setAdornedStart:A,color:o,disabled:c,error:h,filled:N,focused:P,fullWidth:p,hiddenLabel:g,margin:("small"===k?"dense":void 0)||b,onBlur:function(){L(!1)},onEmpty:T.useCallback((function(){R(!1)}),[]),onFilled:F,onFocus:function(){L(!0)},registerEffect:undefined,required:w,variant:E};return T.createElement(As.Provider,{value:j},T.createElement(l,(0,yt.Z)({className:(0,fo.Z)(r.root,a,"none"!==b&&r["margin".concat((0,po.Z)(b))],p&&r.fullWidth),ref:t},C),n))})),tl=(0,St.Z)({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(el),nl=T.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.component,o=void 0===i?"p":i,s=(e.disabled,e.error,e.filled,e.focused,e.margin,e.required,e.variant,(0,Wi.Z)(e,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),l=_s({props:e,muiFormControl:Xs(),states:["variant","margin","disabled","error","filled","focused","required"]});return T.createElement(o,(0,yt.Z)({className:(0,fo.Z)(r.root,("filled"===l.variant||"outlined"===l.variant)&&r.contained,a,l.disabled&&r.disabled,l.error&&r.error,l.filled&&r.filled,l.focused&&r.focused,l.required&&r.required,"dense"===l.margin&&r.marginDense),ref:t},s)," "===n?T.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):n)})),rl=(0,St.Z)((function(e){return{root:(0,yt.Z)({color:e.palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(nl),al=n(5352);n(7441);function il(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var ol={entering:{opacity:1,transform:il(1)},entered:{opacity:1,transform:"none"}},sl=T.forwardRef((function(e,t){var n=e.children,r=e.disableStrictModeCompat,a=void 0!==r&&r,i=e.in,o=e.onEnter,s=e.onEntered,l=e.onEntering,u=e.onExit,c=e.onExited,d=e.onExiting,h=e.style,f=e.timeout,p=void 0===f?"auto":f,m=e.TransitionComponent,v=void 0===m?no:m,g=(0,Wi.Z)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),y=T.useRef(),b=T.useRef(),x=ao(),w=x.unstable_strictMode&&!a,k=T.useRef(null),S=(0,ro.Z)(n.ref,t),E=(0,ro.Z)(w?k:void 0,S),C=function(e){return function(t,n){if(e){var r=w?[k.current,t]:[t,n],a=(0,U.Z)(r,2),i=a[0],o=a[1];void 0===o?e(i):e(i,o)}}},_=C(l),M=C((function(e,t){oo(e);var n,r=so({style:h,timeout:p},{mode:"enter"}),a=r.duration,i=r.delay;"auto"===p?(n=x.transitions.getAutoHeightDuration(e.clientHeight),b.current=n):n=a,e.style.transition=[x.transitions.create("opacity",{duration:n,delay:i}),x.transitions.create("transform",{duration:.666*n,delay:i})].join(","),o&&o(e,t)})),A=C(s),I=C(d),N=C((function(e){var t,n=so({style:h,timeout:p},{mode:"exit"}),r=n.duration,a=n.delay;"auto"===p?(t=x.transitions.getAutoHeightDuration(e.clientHeight),b.current=t):t=r,e.style.transition=[x.transitions.create("opacity",{duration:t,delay:a}),x.transitions.create("transform",{duration:.666*t,delay:a||.333*t})].join(","),e.style.opacity="0",e.style.transform=il(.75),u&&u(e)})),R=C(c);return T.useEffect((function(){return function(){clearTimeout(y.current)}}),[]),T.createElement(v,(0,yt.Z)({appear:!0,in:i,nodeRef:w?k:void 0,onEnter:M,onEntered:A,onEntering:_,onExit:N,onExited:R,onExiting:I,addEndListener:function(e,t){var n=w?e:t;"auto"===p&&(y.current=setTimeout(n,b.current||0))},timeout:"auto"===p?null:p},g),(function(e,t){return T.cloneElement(n,(0,yt.Z)({style:(0,yt.Z)({opacity:0,transform:il(.75),visibility:"exited"!==e||i?void 0:"hidden"},ol[e],h,n.props.style),ref:E},t))}))}));sl.muiSupportAuto=!0;var ll=sl;function ul(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function cl(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function dl(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function hl(e){return"function"===typeof e?e():e}var fl=T.forwardRef((function(e,t){var n=e.action,r=e.anchorEl,a=e.anchorOrigin,i=void 0===a?{vertical:"top",horizontal:"left"}:a,o=e.anchorPosition,s=e.anchorReference,l=void 0===s?"anchorEl":s,u=e.children,c=e.classes,d=e.className,h=e.container,f=e.elevation,p=void 0===f?8:f,m=e.getContentAnchorEl,v=e.marginThreshold,g=void 0===v?16:v,y=e.onEnter,b=e.onEntered,x=e.onEntering,w=e.onExit,k=e.onExited,S=e.onExiting,E=e.open,C=e.PaperProps,_=void 0===C?{}:C,M=e.transformOrigin,A=void 0===M?{vertical:"top",horizontal:"left"}:M,I=e.TransitionComponent,N=void 0===I?ll:I,R=e.transitionDuration,O=void 0===R?"auto":R,D=e.TransitionProps,L=void 0===D?{}:D,P=(0,Wi.Z)(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),F=T.useRef(),j=T.useCallback((function(e){if("anchorPosition"===l)return o;var t=hl(r),n=(t&&1===t.nodeType?t:(0,vo.Z)(F.current).body).getBoundingClientRect(),a=0===e?i.vertical:"center";return{top:n.top+ul(n,a),left:n.left+cl(n,i.horizontal)}}),[r,i.horizontal,i.vertical,o,l]),z=T.useCallback((function(e){var t=0;if(m&&"anchorEl"===l){var n=m(e);if(n&&e.contains(n)){var r=function(e,t){for(var n=t,r=0;n&&n!==e;)r+=(n=n.parentElement).scrollTop;return r}(e,n);t=n.offsetTop+n.clientHeight/2-r||0}0}return t}),[i.vertical,l,m]),B=T.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:ul(e,A.vertical)+t,horizontal:cl(e,A.horizontal)}}),[A.horizontal,A.vertical]),U=T.useCallback((function(e){var t=z(e),n={width:e.offsetWidth,height:e.offsetHeight},a=B(n,t);if("none"===l)return{top:null,left:null,transformOrigin:dl(a)};var i=j(t),o=i.top-a.vertical,s=i.left-a.horizontal,u=o+n.height,c=s+n.width,d=(0,Eo.Z)(hl(r)),h=d.innerHeight-g,f=d.innerWidth-g;if(o<g){var p=o-g;o-=p,a.vertical+=p}else if(u>h){var m=u-h;o-=m,a.vertical+=m}if(s<g){var v=s-g;s-=v,a.horizontal+=v}else if(c>f){var y=c-f;s-=y,a.horizontal+=y}return{top:"".concat(Math.round(o),"px"),left:"".concat(Math.round(s),"px"),transformOrigin:dl(a)}}),[r,l,j,z,B,g]),W=T.useCallback((function(){var e=F.current;if(e){var t=U(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[U]),V=T.useCallback((function(e){F.current=Vi.findDOMNode(e)}),[]);T.useEffect((function(){E&&W()})),T.useImperativeHandle(n,(function(){return E?{updatePosition:function(){W()}}:null}),[E,W]),T.useEffect((function(){if(E){var e=(0,Zi.Z)((function(){W()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[E,W]);var Z=O;"auto"!==O||N.muiSupportAuto||(Z=void 0);var H=h||(r?(0,vo.Z)(hl(r)).body:void 0);return T.createElement(Fo,(0,yt.Z)({container:H,open:E,ref:t,BackdropProps:{invisible:!0},className:(0,fo.Z)(c.root,d)},P),T.createElement(N,(0,yt.Z)({appear:!0,in:E,onEnter:y,onEntered:b,onExit:w,onExited:k,onExiting:S,timeout:Z},L,{onEntering:(0,wo.Z)((function(e,t){x&&x(e,t),W()}),L.onEntering)}),T.createElement(Ho,(0,yt.Z)({elevation:p,ref:V},_,{className:(0,fo.Z)(c.paper,_.className)}),u)))})),pl=(0,St.Z)({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(fl);var ml=T.createContext({}),vl=T.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.component,o=void 0===i?"ul":i,s=e.dense,l=void 0!==s&&s,u=e.disablePadding,c=void 0!==u&&u,d=e.subheader,h=(0,Wi.Z)(e,["children","classes","className","component","dense","disablePadding","subheader"]),f=T.useMemo((function(){return{dense:l}}),[l]);return T.createElement(ml.Provider,{value:f},T.createElement(o,(0,yt.Z)({className:(0,fo.Z)(r.root,a,l&&r.dense,!c&&r.padding,d&&r.subheader),ref:t},h),d,n))})),gl=(0,St.Z)({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(vl);function yl(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function bl(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function xl(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function wl(e,t,n,r,a,i){for(var o=!1,s=a(e,t,!!t&&n);s;){if(s===e.firstChild){if(o)return;o=!0}var l=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&xl(s,i)&&!l)return void s.focus();s=a(e,s,n)}}var kl="undefined"===typeof window?T.useEffect:T.useLayoutEffect,Sl=T.forwardRef((function(e,t){var n=e.actions,r=e.autoFocus,a=void 0!==r&&r,i=e.autoFocusItem,o=void 0!==i&&i,s=e.children,l=e.className,u=e.disabledItemsFocusable,c=void 0!==u&&u,d=e.disableListWrap,h=void 0!==d&&d,f=e.onKeyDown,p=e.variant,m=void 0===p?"selectedMenu":p,v=(0,Wi.Z)(e,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),g=T.useRef(null),y=T.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});kl((function(){a&&g.current.focus()}),[a]),T.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!g.current.style.width;if(e.clientHeight<g.current.clientHeight&&n){var r="".concat(To(),"px");g.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,g.current.style.width="calc(100% + ".concat(r,")")}return g.current}}}),[]);var b=T.useCallback((function(e){g.current=Vi.findDOMNode(e)}),[]),x=(0,ro.Z)(b,t),w=-1;T.Children.forEach(s,(function(e,t){T.isValidElement(e)&&(e.props.disabled||("selectedMenu"===m&&e.props.selected||-1===w)&&(w=t))}));var k=T.Children.map(s,(function(e,t){if(t===w){var n={};return o&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===m&&(n.tabIndex=0),T.cloneElement(e,n)}return e}));return T.createElement(gl,(0,yt.Z)({role:"menu",ref:x,className:l,onKeyDown:function(e){var t=g.current,n=e.key,r=(0,vo.Z)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),wl(t,r,h,c,yl);else if("ArrowUp"===n)e.preventDefault(),wl(t,r,h,c,bl);else if("Home"===n)e.preventDefault(),wl(t,null,h,c,yl);else if("End"===n)e.preventDefault(),wl(t,null,h,c,bl);else if(1===n.length){var a=y.current,i=n.toLowerCase(),o=performance.now();a.keys.length>0&&(o-a.lastTime>500?(a.keys=[],a.repeating=!0,a.previousKeyMatched=!0):a.repeating&&i!==a.keys[0]&&(a.repeating=!1)),a.lastTime=o,a.keys.push(i);var s=r&&!a.repeating&&xl(r,a);a.previousKeyMatched&&(s||wl(t,r,!1,c,yl,a))?e.preventDefault():a.previousKeyMatched=!1}f&&f(e)},tabIndex:a?0:-1},v),k)})),Tl=Sl,El={vertical:"top",horizontal:"right"},Cl={vertical:"top",horizontal:"left"},_l=T.forwardRef((function(e,t){var n=e.autoFocus,r=void 0===n||n,a=e.children,i=e.classes,o=e.disableAutoFocusItem,s=void 0!==o&&o,l=e.MenuListProps,u=void 0===l?{}:l,c=e.onClose,d=e.onEntering,h=e.open,f=e.PaperProps,p=void 0===f?{}:f,m=e.PopoverClasses,v=e.transitionDuration,g=void 0===v?"auto":v,y=e.TransitionProps,b=(y=void 0===y?{}:y).onEntering,x=(0,Wi.Z)(y,["onEntering"]),w=e.variant,k=void 0===w?"selectedMenu":w,S=(0,Wi.Z)(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"]),E=ao(),C=r&&!s&&h,_=T.useRef(null),M=T.useRef(null),A=-1;T.Children.map(a,(function(e,t){T.isValidElement(e)&&(e.props.disabled||("menu"!==k&&e.props.selected||-1===A)&&(A=t))}));var I=T.Children.map(a,(function(e,t){return t===A?T.cloneElement(e,{ref:function(t){M.current=Vi.findDOMNode(t),(0,go.Z)(e.ref,t)}}):e}));return T.createElement(pl,(0,yt.Z)({getContentAnchorEl:function(){return M.current},classes:m,onClose:c,TransitionProps:(0,yt.Z)({onEntering:function(e,t){_.current&&_.current.adjustStyleForScrollbar(e,E),d&&d(e,t),b&&b(e,t)}},x),anchorOrigin:"rtl"===E.direction?El:Cl,transformOrigin:"rtl"===E.direction?El:Cl,PaperProps:(0,yt.Z)({},p,{classes:(0,yt.Z)({},p.classes,{root:i.paper})}),open:h,ref:t,transitionDuration:g},S),T.createElement(Tl,(0,yt.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),c&&c(e,"tabKeyDown"))},actions:_,autoFocus:r&&(-1===A||s),autoFocusItem:C,variant:k},u,{className:(0,fo.Z)(i.list,u.className)}),I))})),Ml=(0,St.Z)({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(_l),Al=n(2497);function Il(e,t){return"object"===(0,D.Z)(t)&&null!==t?e===t:String(e)===String(t)}var Nl=T.forwardRef((function(e,t){var n=e["aria-label"],r=e.autoFocus,a=e.autoWidth,i=e.children,o=e.classes,s=e.className,l=e.defaultValue,u=e.disabled,c=e.displayEmpty,d=e.IconComponent,h=e.inputRef,f=e.labelId,p=e.MenuProps,m=void 0===p?{}:p,v=e.multiple,g=e.name,y=e.onBlur,b=e.onChange,x=e.onClose,w=e.onFocus,k=e.onOpen,S=e.open,E=e.readOnly,C=e.renderValue,_=e.SelectDisplayProps,M=void 0===_?{}:_,A=e.tabIndex,I=(e.type,e.value),N=e.variant,R=void 0===N?"standard":N,O=(0,Wi.Z)(e,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),D=(0,Al.Z)({controlled:I,default:l,name:"Select"}),L=(0,U.Z)(D,2),P=L[0],F=L[1],j=T.useRef(null),z=T.useState(null),B=z[0],W=z[1],V=T.useRef(null!=S).current,Z=T.useState(),H=Z[0],G=Z[1],q=T.useState(!1),X=q[0],Y=q[1],K=(0,ro.Z)(t,h);T.useImperativeHandle(K,(function(){return{focus:function(){B.focus()},node:j.current,value:P}}),[B,P]),T.useEffect((function(){r&&B&&B.focus()}),[r,B]),T.useEffect((function(){if(B){var e=(0,vo.Z)(B).getElementById(f);if(e){var t=function(){getSelection().isCollapsed&&B.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[f,B]);var $,J,Q=function(e,t){e?k&&k(t):x&&x(t),V||(G(a?null:B.clientWidth),Y(e))},ee=T.Children.toArray(i),te=function(e){return function(t){var n;if(v||Q(!1,t),v){n=Array.isArray(P)?P.slice():[];var r=P.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;e.props.onClick&&e.props.onClick(t),P!==n&&(F(n),b&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:n,name:g}}),b(t,e)))}},ne=null!==B&&(V?S:X);delete O["aria-invalid"];var re=[],ae=!1;(Ps({value:P})||c)&&(C?$=C(P):ae=!0);var ie=ee.map((function(e){if(!T.isValidElement(e))return null;var t;if(v){if(!Array.isArray(P))throw new Error((0,Cs.Z)(2));t=P.some((function(t){return Il(t,e.props.value)})),t&&ae&&re.push(e.props.children)}else(t=Il(P,e.props.value))&&ae&&(J=e.props.children);return t&&!0,T.cloneElement(e,{"aria-selected":t?"true":void 0,onClick:te(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));ae&&($=v?re.join(", "):J);var oe,se=H;!a&&V&&B&&(se=B.clientWidth),oe="undefined"!==typeof A?A:u?null:0;var le=M.id||(g?"mui-component-select-".concat(g):void 0);return T.createElement(T.Fragment,null,T.createElement("div",(0,yt.Z)({className:(0,fo.Z)(o.root,o.select,o.selectMenu,o[R],s,u&&o.disabled),ref:W,tabIndex:oe,role:"button","aria-disabled":u?"true":void 0,"aria-expanded":ne?"true":void 0,"aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[f,le].filter(Boolean).join(" ")||void 0,onKeyDown:function(e){if(!E){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),Q(!0,e))}},onMouseDown:u||E?null:function(e){0===e.button&&(e.preventDefault(),B.focus(),Q(!0,e))},onBlur:function(e){!ne&&y&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:P,name:g}}),y(e))},onFocus:w},M,{id:le}),function(e){return null==e||"string"===typeof e&&!e.trim()}($)?T.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):$),T.createElement("input",(0,yt.Z)({value:Array.isArray(P)?P.join(","):P,name:g,ref:j,"aria-hidden":!0,onChange:function(e){var t=ee.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=ee[t];F(n.props.value),b&&b(e,n)}},tabIndex:-1,className:o.nativeInput,autoFocus:r},O)),T.createElement(d,{className:(0,fo.Z)(o.icon,o["icon".concat((0,po.Z)(R))],ne&&o.iconOpen,u&&o.disabled)}),T.createElement(Ml,(0,yt.Z)({id:"menu-".concat(g||""),anchorEl:B,open:ne,onClose:function(e){Q(!1,e)}},m,{MenuListProps:(0,yt.Z)({"aria-labelledby":f,role:"listbox",disableListWrap:!0},m.MenuListProps),PaperProps:(0,yt.Z)({},m.PaperProps,{style:(0,yt.Z)({minWidth:se},null!=m.PaperProps?m.PaperProps.style:null)})}),ie))})),Rl=Nl,Ol=n(8499),Dl=(0,Ol.Z)(T.createElement("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Ll=T.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.disabled,i=e.IconComponent,o=e.inputRef,s=e.variant,l=void 0===s?"standard":s,u=(0,Wi.Z)(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return T.createElement(T.Fragment,null,T.createElement("select",(0,yt.Z)({className:(0,fo.Z)(n.root,n.select,n[l],r,a&&n.disabled),disabled:a,ref:o||t},u)),e.multiple?null:T.createElement(i,{className:(0,fo.Z)(n.icon,n["icon".concat((0,po.Z)(l))],a&&n.disabled)}))})),Pl=Ll,Fl=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},jl=T.createElement(Us,null),zl=T.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.IconComponent,i=void 0===a?Dl:a,o=e.input,s=void 0===o?jl:o,l=e.inputProps,u=(e.variant,(0,Wi.Z)(e,["children","classes","IconComponent","input","inputProps","variant"])),c=_s({props:e,muiFormControl:Xs(),states:["variant"]});return T.cloneElement(s,(0,yt.Z)({inputComponent:Pl,inputProps:(0,yt.Z)({children:n,classes:r,IconComponent:i,variant:c.variant,type:void 0},l,s?s.props.inputProps:{}),ref:t},u))}));zl.muiName="Select";(0,St.Z)(Fl,{name:"MuiNativeSelect"})(zl);var Bl=Fl,Ul=T.createElement(Us,null),Wl=T.createElement(Vs,null),Vl=T.forwardRef((function e(t,n){var r=t.autoWidth,a=void 0!==r&&r,i=t.children,o=t.classes,s=t.displayEmpty,l=void 0!==s&&s,u=t.IconComponent,c=void 0===u?Dl:u,d=t.id,h=t.input,f=t.inputProps,p=t.label,m=t.labelId,v=t.labelWidth,g=void 0===v?0:v,y=t.MenuProps,b=t.multiple,x=void 0!==b&&b,w=t.native,k=void 0!==w&&w,S=t.onClose,E=t.onOpen,C=t.open,_=t.renderValue,M=t.SelectDisplayProps,A=t.variant,I=void 0===A?"standard":A,N=(0,Wi.Z)(t,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),R=k?Pl:Rl,O=_s({props:t,muiFormControl:Xs(),states:["variant"]}).variant||I,D=h||{standard:Ul,outlined:T.createElement(qs,{label:p,labelWidth:g}),filled:Wl}[O];return T.cloneElement(D,(0,yt.Z)({inputComponent:R,inputProps:(0,yt.Z)({children:i,IconComponent:c,variant:O,type:void 0,multiple:x},k?{id:d}:{autoWidth:a,displayEmpty:l,labelId:m,MenuProps:y,onClose:S,onOpen:E,open:C,renderValue:_,SelectDisplayProps:(0,yt.Z)({id:d},M)},f,{classes:f?(0,al.Z)({baseClasses:o,newClasses:f.classes,Component:e}):o},h?h.props.inputProps:{}),ref:n},N))}));Vl.muiName="Select";var Zl=(0,St.Z)(Bl,{name:"MuiSelect"})(Vl),Hl={standard:Us,filled:Vs,outlined:qs},Gl=T.forwardRef((function(e,t){var n=e.autoComplete,r=e.autoFocus,a=void 0!==r&&r,i=e.children,o=e.classes,s=e.className,l=e.color,u=void 0===l?"primary":l,c=e.defaultValue,d=e.disabled,h=void 0!==d&&d,f=e.error,p=void 0!==f&&f,m=e.FormHelperTextProps,v=e.fullWidth,g=void 0!==v&&v,y=e.helperText,b=e.hiddenLabel,x=e.id,w=e.InputLabelProps,k=e.inputProps,S=e.InputProps,E=e.inputRef,C=e.label,_=e.multiline,M=void 0!==_&&_,A=e.name,I=e.onBlur,N=e.onChange,R=e.onFocus,O=e.placeholder,D=e.required,L=void 0!==D&&D,P=e.rows,F=e.rowsMax,j=e.maxRows,z=e.minRows,B=e.select,U=void 0!==B&&B,W=e.SelectProps,V=e.type,Z=e.value,H=e.variant,G=void 0===H?"standard":H,q=(0,Wi.Z)(e,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","maxRows","minRows","select","SelectProps","type","value","variant"]);var X={};if("outlined"===G&&(w&&"undefined"!==typeof w.shrink&&(X.notched=w.shrink),C)){var Y,K=null!==(Y=null===w||void 0===w?void 0:w.required)&&void 0!==Y?Y:L;X.label=T.createElement(T.Fragment,null,C,K&&"\xa0*")}U&&(W&&W.native||(X.id=void 0),X["aria-describedby"]=void 0);var $=y&&x?"".concat(x,"-helper-text"):void 0,J=C&&x?"".concat(x,"-label"):void 0,Q=Hl[G],ee=T.createElement(Q,(0,yt.Z)({"aria-describedby":$,autoComplete:n,autoFocus:a,defaultValue:c,fullWidth:g,multiline:M,name:A,rows:P,rowsMax:F,maxRows:j,minRows:z,type:V,value:Z,id:x,inputRef:E,onBlur:I,onChange:N,onFocus:R,placeholder:O,inputProps:k},X,S));return T.createElement(tl,(0,yt.Z)({className:(0,fo.Z)(o.root,s),disabled:h,error:p,fullWidth:g,hiddenLabel:b,ref:t,required:L,color:u,variant:G},q),C&&T.createElement(Js,(0,yt.Z)({htmlFor:x,id:J},w),C),U?T.createElement(Zl,(0,yt.Z)({"aria-describedby":$,id:x,labelId:J,value:Z,input:ee},W),i):ee,y&&T.createElement(rl,(0,yt.Z)({id:$},m),y))})),ql=(0,St.Z)({root:{}},{name:"MuiTextField"})(Gl),Xl=T.forwardRef((function(e,t){var n=e.disableSpacing,r=void 0!==n&&n,a=e.classes,i=e.className,o=(0,Wi.Z)(e,["disableSpacing","classes","className"]);return T.createElement("div",(0,yt.Z)({className:(0,fo.Z)(a.root,i,!r&&a.spacing),ref:t},o))})),Yl=(0,St.Z)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(Xl),Kl=T.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.color,o=void 0===i?"default":i,s=e.component,l=void 0===s?"button":s,u=e.disabled,c=void 0!==u&&u,d=e.disableElevation,h=void 0!==d&&d,f=e.disableFocusRipple,p=void 0!==f&&f,m=e.endIcon,v=e.focusVisibleClassName,g=e.fullWidth,y=void 0!==g&&g,b=e.size,x=void 0===b?"medium":b,w=e.startIcon,k=e.type,S=void 0===k?"button":k,E=e.variant,C=void 0===E?"text":E,_=(0,Wi.Z)(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),M=w&&T.createElement("span",{className:(0,fo.Z)(r.startIcon,r["iconSize".concat((0,po.Z)(x))])},w),A=m&&T.createElement("span",{className:(0,fo.Z)(r.endIcon,r["iconSize".concat((0,po.Z)(x))])},m);return T.createElement(ls,(0,yt.Z)({className:(0,fo.Z)(r.root,r[C],a,"inherit"===o?r.colorInherit:"default"!==o&&r["".concat(C).concat((0,po.Z)(o))],"medium"!==x&&[r["".concat(C,"Size").concat((0,po.Z)(x))],r["size".concat((0,po.Z)(x))]],h&&r.disableElevation,c&&r.disabled,y&&r.fullWidth),component:l,disabled:c,focusRipple:!p,focusVisibleClassName:(0,fo.Z)(r.focusVisible,v),ref:t,type:S},_),T.createElement("span",{className:r.label},M,n,A))})),$l=(0,St.Z)((function(e){return{root:(0,yt.Z)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:(0,Yo.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,Yo.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,Yo.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat((0,Yo.Fq)(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:(0,Yo.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat((0,Yo.Fq)(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:(0,Yo.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(Kl),Jl=(0,Ol.Z)(T.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Ql=(window.indexedDB,n(1176));var eu=n(6421),tu="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function nu(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||eu))return new XMLHttpRequest}catch(UK){}if(!t)try{return new(tu[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(UK){}}function ru(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var au=setTimeout,iu=clearTimeout;function ou(e,t){t.useNativeTimers?(e.setTimeoutFn=au.bind(tu),e.clearTimeoutFn=iu.bind(tu)):(e.setTimeoutFn=setTimeout.bind(tu),e.clearTimeoutFn=clearTimeout.bind(tu))}var su=n(3529);function lu(){return lu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},lu.apply(this,arguments)}var uu=Object.create(null);uu.open="0",uu.close="1",uu.ping="2",uu.pong="3",uu.message="4",uu.upgrade="5",uu.noop="6";var cu=Object.create(null);Object.keys(uu).forEach((function(e){cu[uu[e]]=e}));for(var du={type:"error",data:"parser error"},hu="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),fu="function"===typeof ArrayBuffer,pu=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)},mu=function(e,t,n){var r,a=e.type,i=e.data;return hu&&i instanceof Blob?t?n(i):pu(i,n):fu&&(i instanceof ArrayBuffer||(r=i,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?t?n(i):pu(new Blob([i]),n):n(uu[a]+(i||""))},vu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gu="undefined"===typeof Uint8Array?[]:new Uint8Array(256),yu=0;yu<64;yu++)gu[vu.charCodeAt(yu)]=yu;var bu="function"===typeof ArrayBuffer,xu=function(e,t){if(bu){var n=function(e){var t,n,r,a,i,o=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var u=new ArrayBuffer(o),c=new Uint8Array(u);for(t=0;t<s;t+=4)n=gu[e.charCodeAt(t)],r=gu[e.charCodeAt(t+1)],a=gu[e.charCodeAt(t+2)],i=gu[e.charCodeAt(t+3)],c[l++]=n<<2|r>>4,c[l++]=(15&r)<<4|a>>2,c[l++]=(3&a)<<6|63&i;return u}(e);return wu(n,t)}return{base64:!0,data:e}},wu=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},ku=function(e,t){if("string"!==typeof e)return{type:"message",data:wu(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:xu(e.substring(1),t)}:cu[n]?e.length>1?{type:cu[n],data:e.substring(1)}:{type:cu[n]}:du},Su=String.fromCharCode(30),Tu=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).writable=!1,ou((0,L.Z)(r),e),r.opts=e,r.query=e.query,r.readyState="",r.socket=e.socket,r}return(0,A.Z)(n,[{key:"onError",value:function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,lu(R(n.prototype),"emit",this).call(this,"error",r),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,lu(R(n.prototype),"emit",this).call(this,"open")}},{key:"onData",value:function(e){var t=ku(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){lu(R(n.prototype),"emit",this).call(this,"packet",e)}},{key:"onClose",value:function(){this.readyState="closed",lu(R(n.prototype),"emit",this).call(this,"close")}}]),n}(su.Q),Eu=n(5590),Cu=n(5988),_u=function(e){N(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.apply(this,arguments)).polling=!1,e}return(0,A.Z)(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emit("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(Su),r=[],a=0;a<n.length;a++){var i=ku(n[a],t);if(r.push(i),"error"===i.type)break}return r})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var n=e.length,r=new Array(n),a=0;e.forEach((function(e,i){mu(e,!1,(function(e){r[i]=e,++a===n&&t(r.join(Su))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emit("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=Eu()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=Cu.encode(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}}]),n}(Tu);function Mu(){}var Au=null!=new nu({xdomain:!1}).responseType,Iu=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),r=t.call(this,e),"undefined"!==typeof location){var a="https:"===location.protocol,i=location.port;i||(i=a?"443":"80"),r.xd="undefined"!==typeof location&&e.hostname!==location.hostname||i!==e.port,r.xs=e.secure!==a}var o=e&&e.forceBase64;return r.supportsBinary=Au&&!o,r}return(0,A.Z)(n,[{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Nu(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(function(e){n.onError("xhr post error",e)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t}}]),n}(_u),Nu=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),a=t.call(this),ou((0,L.Z)(a),r),a.opts=r,a.method=r.method||"GET",a.uri=e,a.async=!1!==r.async,a.data=void 0!==r.data?r.data:null,a.create(),a}return(0,A.Z)(n,[{key:"create",value:function(){var e=this,t=ru(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var r=this.xhr=new nu(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var a in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this.opts.extraHeaders[a])}catch(UK){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(UK){}try{r.setRequestHeader("Accept","*/*")}catch(UK){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(UK){return void this.setTimeoutFn((function(){e.onError(UK)}),0)}"undefined"!==typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success"),this.cleanup()}},{key:"onData",value:function(e){this.emit("data",e),this.onSuccess()}},{key:"onError",value:function(e){this.emit("error",e),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=Mu,e)try{this.xhr.abort()}catch(UK){}"undefined"!==typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&this.onData(e)}},{key:"abort",value:function(){this.cleanup()}}]),n}(su.Q);if(Nu.requestsCount=0,Nu.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",Ru);else if("function"===typeof addEventListener){addEventListener("onpagehide"in tu?"pagehide":"unload",Ru,!1)}function Ru(){for(var e in Nu.requests)Nu.requests.hasOwnProperty(e)&&Nu.requests[e].abort()}var Ou="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},Du=tu.WebSocket||tu.MozWebSocket,Lu="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),Pu=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).supportsBinary=!e.forceBase64,r}return(0,A.Z)(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=Lu?{}:ru(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Lu?new Du(e,t,n):t?new Du(e,t):new Du(e)}catch(r){return this.emit("error",r)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(){var n=e[r],a=r===e.length-1;mu(n,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(UK){}a&&Ou((function(){t.writable=!0,t.emit("drain")}),t.setTimeoutFn)}))},r=0;r<e.length;r++)n()}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=Eu()),this.supportsBinary||(e.b64=1);var r=Cu.encode(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!Du&&!("__initialize"in Du&&this.name===n.prototype.name)}}]),n}(Tu),Fu={websocket:Pu,polling:Iu},ju=function(e){N(n,e);var t=F(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M(this,n),r=t.call(this),e&&"object"===typeof e&&(a=e,e=null),e?(e=Ql(e),a.hostname=e.host,a.secure="https"===e.protocol||"wss"===e.protocol,a.port=e.port,e.query&&(a.query=e.query)):a.host&&(a.hostname=Ql(a.host).host),ou((0,L.Z)(r),a),r.secure=null!=a.secure?a.secure:"undefined"!==typeof location&&"https:"===location.protocol,a.hostname&&!a.port&&(a.port=r.secure?"443":"80"),r.hostname=a.hostname||("undefined"!==typeof location?location.hostname:"localhost"),r.port=a.port||("undefined"!==typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=a.transports||["polling","websocket"],r.readyState="",r.writeBuffer=[],r.prevBufferLen=0,r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},a),r.opts.path=r.opts.path.replace(/\/$/,"")+"/","string"===typeof r.opts.query&&(r.opts.query=Cu.decode(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"===typeof addEventListener&&(r.opts.closeOnBeforeunload&&addEventListener("beforeunload",(function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())}),!1),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close")},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return(0,A.Z)(n,[{key:"createTransport",value:function(e){var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Fu[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(UK){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(){t.onClose("transport close")}))}},{key:"probe",value:function(e){var t=this,r=this.createTransport(e),a=!1;n.priorWebsocketSuccess=!1;var i=function(){a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!a)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,t.transport.pause((function(){a||"closed"!==t.readyState&&(d(),t.setTransport(r),r.send([{type:"upgrade"}]),t.emitReserved("upgrade",r),r=null,t.upgrading=!1,t.flush())}))}else{var i=new Error("probe error");i.transport=r.name,t.emitReserved("upgradeError",i)}})))};function o(){a||(a=!0,d(),r.close(),r=null)}var s=function(e){var n=new Error("probe error: "+e);n.transport=r.name,o(),t.emitReserved("upgradeError",n)};function l(){s("transport closed")}function u(){s("socket closed")}function c(e){r&&e.name!==r.name&&o()}var d=function(){r.removeListener("open",i),r.removeListener("error",s),r.removeListener("close",l),t.off("close",u),t.off("upgrading",c)};r.once("open",i),r.once("error",s),r.once("close",l),this.once("close",u),this.once("upgrading",c),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var a={type:e,data:t,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){n.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(su.Q);ju.protocol=4;ju.protocol;var zu="function"===typeof ArrayBuffer,Bu=function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer},Uu=Object.prototype.toString,Wu="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Uu.call(Blob),Vu="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Uu.call(File);function Zu(e){return zu&&(e instanceof ArrayBuffer||Bu(e))||Wu&&e instanceof Blob||Vu&&e instanceof File}function Hu(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(Hu(e[n]))return!0;return!1}if(Zu(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Hu(e.toJSON(),!0);for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&Hu(e[a]))return!0;return!1}function Gu(e){var t=[],n=e.data,r=e;return r.data=qu(n,t),r.attachments=t.length,{packet:r,buffers:t}}function qu(e,t){if(!e)return e;if(Zu(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),a=0;a<e.length;a++)r[a]=qu(e[a],t);return r}if("object"===typeof e&&!(e instanceof Date)){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=qu(e[o],t));return i}return e}function Xu(e,t){return e.data=Yu(e.data,t),e.attachments=void 0,e}function Yu(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=Yu(e[n],t);else if("object"===typeof e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Yu(e[r],t));return e}var Ku,$u=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Ku||(Ku={}));var Ju=function(){function e(){M(this,e)}return(0,A.Z)(e,[{key:"encode",value:function(e){return e.type!==Ku.EVENT&&e.type!==Ku.ACK||!Hu(e)?[this.encodeAsString(e)]:(e.type=e.type===Ku.EVENT?Ku.BINARY_EVENT:Ku.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==Ku.BINARY_EVENT&&e.type!==Ku.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),t}},{key:"encodeAsBinary",value:function(e){var t=Gu(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}(),Qu=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.call(this)}return(0,A.Z)(n,[{key:"add",value:function(e){var t;if("string"===typeof e)(t=this.decodeString(e)).type===Ku.BINARY_EVENT||t.type===Ku.BINARY_ACK?(this.reconstructor=new ec(t),0===t.attachments&&lu(R(n.prototype),"emitReserved",this).call(this,"decoded",t)):lu(R(n.prototype),"emitReserved",this).call(this,"decoded",t);else{if(!Zu(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,lu(R(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===Ku[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Ku.BINARY_EVENT||r.type===Ku.BINARY_ACK){for(var a=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var i=e.substring(a,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===e.charAt(t+1)){for(var o=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(o,t)}else r.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var l=t+1;++t;){var u=e.charAt(t);if(null==u||Number(u)!=u){--t;break}if(t===e.length)break}r.id=Number(e.substring(l,t+1))}if(e.charAt(++t)){var c=function(e){try{return JSON.parse(e)}catch(UK){return!1}}(e.substr(t));if(!n.isPayloadValid(r.type,c))throw new Error("invalid payload");r.data=c}return r}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case Ku.CONNECT:return"object"===typeof t;case Ku.DISCONNECT:return void 0===t;case Ku.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case Ku.EVENT:case Ku.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case Ku.ACK:case Ku.BINARY_ACK:return Array.isArray(t)}}}]),n}(su.Q);var ec=function(){function e(t){M(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return(0,A.Z)(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=Xu(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function tc(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var nc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),rc=function(e){N(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this)).connected=!1,i.disconnected=!0,i.receiveBuffer=[],i.sendBuffer=[],i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=r,a&&a.auth&&(i.auth=a.auth),i.io._autoConnect&&i.open(),i}return(0,A.Z)(n,[{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[tc(e,"open",this.onopen.bind(this)),tc(e,"packet",this.onpacket.bind(this)),tc(e,"error",this.onerror.bind(this)),tc(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(nc.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.unshift(e);var a={type:Ku.EVENT,data:n,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){var i=this.ids++,o=n.pop();this._registerAckCallback(i,o),a.id=i}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?this.packet(a):this.sendBuffer.push(a)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n=this,r=this.flags.timeout;if(void 0!==r){var a=this.io.setTimeoutFn((function(){delete n.acks[e];for(var r=0;r<n.sendBuffer.length;r++)n.sendBuffer[r].id===e&&n.sendBuffer.splice(r,1);t.call(n,new Error("operation has timed out"))}),r);this.acks[e]=function(){n.io.clearTimeoutFn(a);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t.apply(n,[null].concat(r))}}else this.acks[e]=t}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e.packet({type:Ku.CONNECT,data:t})})):this.packet({type:Ku.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case Ku.CONNECT:if(e.data&&e.data.sid){var t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ku.EVENT:case Ku.BINARY_EVENT:this.onevent(e);break;case Ku.ACK:case Ku.BINARY_ACK:this.onack(e);break;case Ku.DISCONNECT:this.ondisconnect();break;case Ku.CONNECT_ERROR:this.destroy();var n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,r=G(this._anyListeners.slice());try{for(r.s();!(t=r.n()).done;){t.value.apply(this,e)}}catch(a){r.e(a)}finally{r.f()}}lu(R(n.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];t.packet({type:Ku.ACK,id:e,data:a})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e){this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){return e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Ku.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}}]),n}(su.Q),ac=n(8077),ic=function(t){N(r,t);var n=F(r);function r(t,a){var i,o;M(this,r),(i=n.call(this)).nsps={},i.subs=[],t&&"object"===typeof t&&(a=t,t=void 0),(a=a||{}).path=a.path||"/socket.io",i.opts=a,ou((0,L.Z)(i),a),i.reconnection(!1!==a.reconnection),i.reconnectionAttempts(a.reconnectionAttempts||1/0),i.reconnectionDelay(a.reconnectionDelay||1e3),i.reconnectionDelayMax(a.reconnectionDelayMax||5e3),i.randomizationFactor(null!==(o=a.randomizationFactor)&&void 0!==o?o:.5),i.backoff=new ac({min:i.reconnectionDelay(),max:i.reconnectionDelayMax(),jitter:i.randomizationFactor()}),i.timeout(null==a.timeout?2e4:a.timeout),i._readyState="closed",i.uri=t;var s=a.parser||e;return i.encoder=new s.Encoder,i.decoder=new s.Decoder,i._autoConnect=!1!==a.autoConnect,i._autoConnect&&i.open(),i}return(0,A.Z)(r,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new ju(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var a=tc(n,"open",(function(){r.onopen(),e&&e()})),i=tc(n,"error",(function(n){r.cleanup(),r._readyState="closed",t.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var o=this._timeout;0===o&&a();var s=this.setTimeoutFn((function(){a(),n.close(),n.emit("error",new Error("timeout"))}),o);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(a),this.subs.push(i),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(tc(e,"ping",this.onping.bind(this)),tc(e,"data",this.ondata.bind(this)),tc(e,"error",this.onerror.bind(this)),tc(e,"close",this.onclose.bind(this)),tc(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){this.decoder.add(e)}},{key:"ondecoded",value:function(e){this.emitReserved("packet",e)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n||(n=new rc(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),r}(su.Q),oc={};function sc(e,t){"object"===typeof e&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=Ql(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var a=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+t,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),a=r.source,i=r.id,o=r.path,s=oc[i]&&o in oc[i].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new ic(a,t):(oc[i]||(oc[i]=new ic(a,t)),n=oc[i]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}Object.assign(sc,{Manager:ic,Socket:rc,io:sc,connect:sc});var lc=sc(),uc=function(e,t){lc.on("notification_".concat(e._id),(function(e){console.log(e),t(e)}))},cc=function(e,t){lc.on("nuevo_reporte_".concat(e._id),(function(e){t(e)}))},dc=function(e){console.log("Revisando"),lc.emit("isConnected",{id:e._id,frontVersion:Bt.version})},hc=function(e,t,n,r,a,i,o,s){lc.emit(e,{title:r,from:t,subtitle:a,message:i,id:n,url:o,reportId:s||null})},fc=function(e,t,n,r,a,i,o){lc.emit(e,{title:n,from:t,subtitle:r,message:a,url:i,uid:o})},pc=function(e,t,n,r,a,i){lc.emit(e,{title:n,from:t,subtitle:r,message:a,url:i})},mc=n(7351);function vc(e,t){var n={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(n[r]=e[r])})),n}function gc(e){var t=function(t){var n=e(t);return t.css?(0,yt.Z)({},(0,mc.Z)(n,e((0,yt.Z)({theme:t.theme},t.css))),vc(t.css,[e.filterProps])):t.sx?(0,yt.Z)({},(0,mc.Z)(n,e((0,yt.Z)({theme:t.theme},t.sx))),vc(t.sx,[e.filterProps])):n};return t.propTypes={},t.filterProps=["css","sx"].concat((0,_.Z)(e.filterProps)),t}var yc=gc;var bc=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(e){return t.reduce((function(t,n){var r=n(e);return r?(0,mc.Z)(t,r):t}),{})};return r.propTypes={},r.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),r},xc=n(6086);function wc(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}var kc=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,a=e.themeKey,i=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=wc(e.theme,a)||{};return(0,xc.k)(e,n,(function(e){var t;return"function"===typeof o?t=o(e):Array.isArray(o)?t=o[e]||e:(t=wc(o,e)||e,i&&(t=i(t))),!1===r?t:(0,_t.Z)({},r,t)}))};return o.propTypes={},o.filterProps=[t],o};function Sc(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var Tc=bc(kc({prop:"border",themeKey:"borders",transform:Sc}),kc({prop:"borderTop",themeKey:"borders",transform:Sc}),kc({prop:"borderRight",themeKey:"borders",transform:Sc}),kc({prop:"borderBottom",themeKey:"borders",transform:Sc}),kc({prop:"borderLeft",themeKey:"borders",transform:Sc}),kc({prop:"borderColor",themeKey:"palette"}),kc({prop:"borderRadius",themeKey:"shape"})),Ec=kc({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),Cc=bc(Ec,kc({prop:"display"}),kc({prop:"overflow"}),kc({prop:"textOverflow"}),kc({prop:"visibility"}),kc({prop:"whiteSpace"})),_c=bc(kc({prop:"flexBasis"}),kc({prop:"flexDirection"}),kc({prop:"flexWrap"}),kc({prop:"justifyContent"}),kc({prop:"alignItems"}),kc({prop:"alignContent"}),kc({prop:"order"}),kc({prop:"flex"}),kc({prop:"flexGrow"}),kc({prop:"flexShrink"}),kc({prop:"alignSelf"}),kc({prop:"justifyItems"}),kc({prop:"justifySelf"})),Mc=bc(kc({prop:"gridGap"}),kc({prop:"gridColumnGap"}),kc({prop:"gridRowGap"}),kc({prop:"gridColumn"}),kc({prop:"gridRow"}),kc({prop:"gridAutoFlow"}),kc({prop:"gridAutoColumns"}),kc({prop:"gridAutoRows"}),kc({prop:"gridTemplateColumns"}),kc({prop:"gridTemplateRows"}),kc({prop:"gridTemplateAreas"}),kc({prop:"gridArea"})),Ac=bc(kc({prop:"position"}),kc({prop:"zIndex",themeKey:"zIndex"}),kc({prop:"top"}),kc({prop:"right"}),kc({prop:"bottom"}),kc({prop:"left"})),Ic=bc(kc({prop:"color",themeKey:"palette"}),kc({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"})),Nc=kc({prop:"boxShadow",themeKey:"shadows"});function Rc(e){return e<=1?"".concat(100*e,"%"):e}var Oc=kc({prop:"width",transform:Rc}),Dc=kc({prop:"maxWidth",transform:Rc}),Lc=kc({prop:"minWidth",transform:Rc}),Pc=kc({prop:"height",transform:Rc}),Fc=kc({prop:"maxHeight",transform:Rc}),jc=kc({prop:"minHeight",transform:Rc}),zc=(kc({prop:"size",cssProperty:"width",transform:Rc}),kc({prop:"size",cssProperty:"height",transform:Rc}),bc(Oc,Dc,Lc,Pc,Fc,jc,kc({prop:"boxSizing"}))),Bc=n(9908),Uc=bc(kc({prop:"fontFamily",themeKey:"typography"}),kc({prop:"fontSize",themeKey:"typography"}),kc({prop:"fontStyle",themeKey:"typography"}),kc({prop:"fontWeight",themeKey:"typography"}),kc({prop:"letterSpacing"}),kc({prop:"lineHeight"}),kc({prop:"textAlign"})),Wc=n(2110),Vc=n.n(Wc);function Zc(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.name,a=(0,Wi.Z)(n,["name"]);var i,o=r,s="function"===typeof t?function(e){return{root:function(n){return t((0,yt.Z)({theme:e},n))}}}:{root:t},l=(0,At.Z)(s,(0,yt.Z)({Component:e,name:r||e.displayName,classNamePrefix:o},a));t.filterProps&&(i=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);var u=T.forwardRef((function(t,n){var r=t.children,a=t.className,o=t.clone,s=t.component,u=(0,Wi.Z)(t,["children","className","clone","component"]),c=l(t),d=(0,fo.Z)(c.root,a),h=u;if(i&&(h=function(e,t){var n={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(n[r]=e[r])})),n}(h,i)),o)return T.cloneElement(r,(0,yt.Z)({className:(0,fo.Z)(r.props.className,d)},h));if("function"===typeof r)return r((0,yt.Z)({className:d},h));var f=s||e;return T.createElement(f,(0,yt.Z)({ref:n,className:d},h),r)}));return Vc()(u,e),u}}var Hc=function(e){var t=Zc(e);return function(e,n){return t(e,(0,yt.Z)({defaultTheme:It.Z},n))}},Gc=yc(bc(Tc,Cc,_c,Mc,Ac,Ic,Nc,zc,Bc.Z,Uc)),qc=Hc("div")(Gc,{name:"MuiBox"}),Xc=44,Yc=T.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.color,i=void 0===a?"primary":a,o=e.disableShrink,s=void 0!==o&&o,l=e.size,u=void 0===l?40:l,c=e.style,d=e.thickness,h=void 0===d?3.6:d,f=e.value,p=void 0===f?0:f,m=e.variant,v=void 0===m?"indeterminate":m,g=(0,Wi.Z)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),y={},b={},x={};if("determinate"===v||"static"===v){var w=2*Math.PI*((Xc-h)/2);y.strokeDasharray=w.toFixed(3),x["aria-valuenow"]=Math.round(p),y.strokeDashoffset="".concat(((100-p)/100*w).toFixed(3),"px"),b.transform="rotate(-90deg)"}return T.createElement("div",(0,yt.Z)({className:(0,fo.Z)(n.root,r,"inherit"!==i&&n["color".concat((0,po.Z)(i))],{determinate:n.determinate,indeterminate:n.indeterminate,static:n.static}[v]),style:(0,yt.Z)({width:u,height:u},b,c),ref:t,role:"progressbar"},x,g),T.createElement("svg",{className:n.svg,viewBox:"".concat(22," ").concat(22," ").concat(Xc," ").concat(Xc)},T.createElement("circle",{className:(0,fo.Z)(n.circle,s&&n.circleDisableShrink,{determinate:n.circleDeterminate,indeterminate:n.circleIndeterminate,static:n.circleStatic}[v]),style:y,cx:Xc,cy:Xc,r:(Xc-h)/2,fill:"none",strokeWidth:h})))})),Kc=(0,St.Z)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(Yc),$c=function(e){var t=e.open,n=e.progress,r=e.loadingData,a=e.withProgress;return(0,dr.jsx)(Fo,{open:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,dr.jsx)(qc,{sx:Lt,children:(0,dr.jsxs)("div",{style:{height:300,textAlign:"center"},children:[a&&(0,dr.jsx)(Kc,{variant:"determinate",size:200,value:Number(n)}),!a&&(0,dr.jsx)(Kc,{size:200}),(0,dr.jsx)("h2",{children:r})]})})})},Jc="undefined"===typeof window?T.useEffect:T.useLayoutEffect,Qc=T.forwardRef((function(e,t){var n=e.alignItems,r=void 0===n?"center":n,a=e.autoFocus,i=void 0!==a&&a,o=e.button,s=void 0!==o&&o,l=e.children,u=e.classes,c=e.className,d=e.component,h=e.ContainerComponent,f=void 0===h?"li":h,p=e.ContainerProps,m=(p=void 0===p?{}:p).className,v=(0,Wi.Z)(p,["className"]),g=e.dense,y=void 0!==g&&g,b=e.disabled,x=void 0!==b&&b,w=e.disableGutters,k=void 0!==w&&w,S=e.divider,E=void 0!==S&&S,C=e.focusVisibleClassName,_=e.selected,M=void 0!==_&&_,A=(0,Wi.Z)(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),I=T.useContext(ml),N={dense:y||I.dense||!1,alignItems:r},R=T.useRef(null);Jc((function(){i&&R.current&&R.current.focus()}),[i]);var O=T.Children.toArray(l),D=O.length&&(0,Qs.Z)(O[O.length-1],["ListItemSecondaryAction"]),L=T.useCallback((function(e){R.current=Vi.findDOMNode(e)}),[]),P=(0,ro.Z)(L,t),F=(0,yt.Z)({className:(0,fo.Z)(u.root,c,N.dense&&u.dense,!k&&u.gutters,E&&u.divider,x&&u.disabled,s&&u.button,"center"!==r&&u.alignItemsFlexStart,D&&u.secondaryAction,M&&u.selected),disabled:x},A),j=d||"li";return s&&(F.component=d||"div",F.focusVisibleClassName=(0,fo.Z)(u.focusVisible,C),j=ls),D?(j=F.component||d?j:"div","li"===f&&("li"===j?j="div":"li"===F.component&&(F.component="div")),T.createElement(ml.Provider,{value:N},T.createElement(f,(0,yt.Z)({className:(0,fo.Z)(u.container,m),ref:P},v),T.createElement(j,F,O),O.pop()))):T.createElement(ml.Provider,{value:N},T.createElement(j,(0,yt.Z)({ref:P},F),O))})),ed=(0,St.Z)((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}}),{name:"MuiListItem"})(Qc),td=T.forwardRef((function(e,t){var n=e.autoFocus,r=e.checked,a=e.checkedIcon,i=e.classes,o=e.className,s=e.defaultChecked,l=e.disabled,u=e.icon,c=e.id,d=e.inputProps,h=e.inputRef,f=e.name,p=e.onBlur,m=e.onChange,v=e.onFocus,g=e.readOnly,y=e.required,b=e.tabIndex,x=e.type,w=e.value,k=(0,Wi.Z)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),S=(0,Al.Z)({controlled:r,default:Boolean(s),name:"SwitchBase",state:"checked"}),E=(0,U.Z)(S,2),C=E[0],_=E[1],M=Xs(),A=l;M&&"undefined"===typeof A&&(A=M.disabled);var I="checkbox"===x||"radio"===x;return T.createElement(cs,(0,yt.Z)({component:"span",className:(0,fo.Z)(i.root,o,C&&i.checked,A&&i.disabled),disabled:A,tabIndex:null,role:void 0,onFocus:function(e){v&&v(e),M&&M.onFocus&&M.onFocus(e)},onBlur:function(e){p&&p(e),M&&M.onBlur&&M.onBlur(e)},ref:t},k),T.createElement("input",(0,yt.Z)({autoFocus:n,checked:r,defaultChecked:s,className:i.input,disabled:A,id:I&&c,name:f,onChange:function(e){var t=e.target.checked;_(t),m&&m(e,t)},readOnly:g,ref:h,required:y,tabIndex:b,type:x,value:w},d)),C?a:u)})),nd=(0,St.Z)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(td),rd=T.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.color,i=void 0===a?"secondary":a,o=e.edge,s=void 0!==o&&o,l=e.size,u=void 0===l?"medium":l,c=(0,Wi.Z)(e,["classes","className","color","edge","size"]),d=T.createElement("span",{className:n.thumb});return T.createElement("span",{className:(0,fo.Z)(n.root,r,{start:n.edgeStart,end:n.edgeEnd}[s],"small"===u&&n["size".concat((0,po.Z)(u))])},T.createElement(nd,(0,yt.Z)({type:"checkbox",icon:d,checkedIcon:d,classes:{root:(0,fo.Z)(n.switchBase,n["color".concat((0,po.Z)(i))]),input:n.input,checked:n.checked,disabled:n.disabled},ref:t},c)),T.createElement("span",{className:n.track}))})),ad=(0,St.Z)((function(e){return{root:{display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:"light"===e.palette.type?.12:.1}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,Yo.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.primary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,Yo.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.secondary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}}),{name:"MuiSwitch"})(rd),id=T.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.color,o=void 0===i?"default":i,s=e.component,l=void 0===s?"button":s,u=e.disabled,c=void 0!==u&&u,d=e.disableFocusRipple,h=void 0!==d&&d,f=e.focusVisibleClassName,p=e.size,m=void 0===p?"large":p,v=e.variant,g=void 0===v?"circular":v,y=(0,Wi.Z)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return T.createElement(ls,(0,yt.Z)({className:(0,fo.Z)(r.root,a,"large"!==m&&r["size".concat((0,po.Z)(m))],c&&r.disabled,"extended"===g&&r.extended,{primary:r.primary,secondary:r.secondary,inherit:r.colorInherit}[o]),component:l,disabled:c,focusRipple:!h,focusVisibleClassName:(0,fo.Z)(r.focusVisible,f),ref:t},y),T.createElement("span",{className:r.label},n))})),od=(0,St.Z)((function(e){return{root:(0,yt.Z)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(id),sd=function(e){var t=e.open,n=e.userModal,r=e.handleChange,a=e.checked,i=(e.permissionsReports,e.permissionsUsers,e.closeModal);return(0,dr.jsx)(Fo,{open:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,dr.jsxs)(qc,{sx:Lt,children:[(0,dr.jsx)("div",{style:{textAlign:"left",width:"100%"},children:(0,dr.jsx)("h2",{children:"Datos del Usuario"})}),(0,dr.jsxs)("div",{style:{width:"100%",height:"25vh"},children:[(0,dr.jsxs)("div",{style:{float:"left",width:"30%"},children:[(0,dr.jsx)("p",{children:(0,dr.jsx)("strong",{children:"Nombre y Apellido"})}),(0,dr.jsxs)("p",{children:[" ",n.name," ",n.lastName," "]}),(0,dr.jsx)("br",{}),(0,dr.jsx)("p",{children:(0,dr.jsx)("strong",{children:"Rol del usuario"})}),(0,dr.jsxs)("p",{children:[" ",n.roleTranslated," "]})]}),(0,dr.jsxs)("div",{style:{float:"left",width:"30%"},children:[(0,dr.jsx)("p",{children:(0,dr.jsx)("strong",{children:"Email"})}),(0,dr.jsxs)("p",{children:[" ",n.email]}),(0,dr.jsx)("br",{}),(0,dr.jsx)("p",{children:(0,dr.jsx)("strong",{children:"RUN"})}),(0,dr.jsxs)("p",{children:[" ",n.rut," "]})]}),(0,dr.jsx)("div",{style:{float:"right",width:"30%"},children:(0,dr.jsxs)(ed,{children:[(0,dr.jsx)(ad,{onChange:r,checked:a}),a&&(0,dr.jsx)("p",{children:"Usuario activo"}),!a&&(0,dr.jsx)("p",{children:"Usuario inactivo"})]})})]}),(0,dr.jsx)("div",{style:{width:"100%",height:"5vh",margin:10},children:(0,dr.jsx)("button",{style:{width:189,height:48,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D",position:"absolute",right:30},children:"Editar usuario"})}),(0,dr.jsx)(od,{onClick:function(){return i(n)},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,dr.jsx)(Jl,{style:{color:"#ccc"}})})]})})},ld=(0,Ol.Z)(T.createElement("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}),"Undo"),ud=function(e){var t=e.open,n=e.closeModal;return(0,dr.jsx)(Fo,{open:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,dr.jsxs)(qc,{sx:Lt,children:[(0,dr.jsxs)("div",{style:{textAlign:"left",width:"100%"},children:[(0,dr.jsxs)("h2",{children:["Versi\xf3n ",Bt.version]}),(0,dr.jsx)("li",{children:"Se corrige error al enviar t\xe9rmino de jornada."})]}),(0,dr.jsxs)("div",{style:{width:"100%",height:"25vh",overflowY:"auto"},children:[(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v2.9.3"}),(0,dr.jsx)("li",{children:"Se deshabilita actualizaci\xf3n de app por medio de vertical scrolling."}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v2.9.2"}),(0,dr.jsx)("li",{children:"Se corrige error de asignaci\xf3n de usuarios y bot\xf3n de sincronizaci\xf3n."}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v2.9.1"}),(0,dr.jsx)("li",{children:"Correcci\xf3n de errores"}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v2.9"}),(0,dr.jsx)("li",{children:"Se mejora el rendimiento y repara errores de bugs producto de"}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v2.6.4"}),(0,dr.jsx)("li",{children:"Cambios en Pautas. Ahora se pueden eliminar comentarios, fotos y el estado de ticket verde o amarillo a vac\xedo en caso de error."}),(0,dr.jsx)("li",{children:"Se aplican filtros en OT de maquinaria."}),(0,dr.jsx)("li",{children:"Otras modificaciones menores."}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v2.6.3"}),(0,dr.jsx)("li",{children:"Se permite el borrado de mensajes a usuarios que crean los mensajes o Admins"}),(0,dr.jsx)("li",{children:"Se agrega nueva vista de resumen de insumos o materiales, para ejecutivos SAP o Administradores"}),(0,dr.jsx)("strong",{children:"v2.6.2"}),(0,dr.jsx)("li",{children:"Reparaci\xf3n visualizaci\xf3n de pautas"}),(0,dr.jsx)("li",{children:"Se agrega en opciones un bot\xf3n para ver las pautas descargadas en el dispositivo"}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v2.6.1"}),(0,dr.jsx)("li",{children:"Se genera vista previa de la OT para Ejecutivo SAP y los administradores"}),(0,dr.jsx)("li",{children:"Se crea bot\xf3n de eliminaci\xf3n de mensajes de tareas para OTs"}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v2.6"}),(0,dr.jsx)("li",{children:"Reparaci\xf3n errore de carga de datos"}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v2.5.5"}),(0,dr.jsx)("li",{children:"Nueva m\xe1quina Bulldozer Caterpillar D10-T2"}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v.2.5"}),(0,dr.jsx)("li",{children:"Nuevas Obras y Nuevas m\xe1quinas."}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v.2.3.1"}),(0,dr.jsx)("li",{children:"Reparaciones menores en lista de Ordenes"}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v.2.3.1"}),(0,dr.jsx)("li",{children:"Error de login con R.U.N. resuelto"}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v.2.3"}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"Documentos PDF"}),(0,dr.jsx)("li",{children:"Se agrega Nro de Pauta en t\xedtulo de la OT"}),(0,dr.jsx)("li",{children:"Se agrega ID de Documento"}),(0,dr.jsx)("li",{children:"Se corrige nombre de la pauta al descargar"}),(0,dr.jsx)("strong",{children:"P\xe1gina Ordenes"}),(0,dr.jsx)("li",{children:"Se agrega primeros filtros (ordenar por OT y ordenar por Nro de M\xe1quina)"}),(0,dr.jsxs)("li",{children:["Se puede corregir n\xfamero SAP desde ventana emergente al presionar vot\xf3n ",(0,dr.jsx)("button",{style:{backgroundColor:"#F9F9F9",borderRadius:20,borderColor:"#757575",maxWidth:130,height:24,fontSize:12},children:"Ver"})]}),(0,dr.jsx)("strong",{children:"M\xe1quinas"}),(0,dr.jsxs)("li",{children:["Al ingresar a cada m\xe1quina, en el listado de las OT, puede ver un ",(0,dr.jsx)("a",{href:"#",children:"Enlace Documento"})," en caso de existir documento PDF creado."]}),(0,dr.jsx)("strong",{children:"Login"}),(0,dr.jsx)("li",{children:"Login por defecto queda por R.U.N."}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v.2.2.1"}),(0,dr.jsx)("li",{children:"Reparaci\xf3n de errores generados en versi\xf3n 2.2"}),(0,dr.jsx)("strong",{children:"v.2.2"}),(0,dr.jsx)("li",{children:"Se habilita multiusuarios."}),(0,dr.jsx)("strong",{children:"v.2.1"}),(0,dr.jsx)("li",{children:"Correcci\xf3n de errores al cierre de OT."}),(0,dr.jsx)("li",{children:"Todo usuario que no sea operario, obtendr\xe1 la pauta desde la base de datos. Con esto se espera que se elimine la informaci\xf3n."}),(0,dr.jsx)("p",{children:"Se ha actualizado la aplicaci\xf3n de servicios de Mantenimiento e Inspecci\xf3n."}),(0,dr.jsx)("strong",{children:"v.2.0"}),(0,dr.jsx)("li",{children:"Se agrega al servicio sistema de b\xfasqueda por Nombre, Rut y Correo Electr\xf3nico"}),(0,dr.jsx)("li",{children:"Se elimina la posibilidad al Jefe de Maquinaria la posibilidad de comentar."}),(0,dr.jsxs)("li",{children:["Se agrega al servicio restaurador de datos de ejecuci\xf3n de OT desde la cuenta de Operador o Mantenedor, utilizando bot\xf3n ",(0,dr.jsx)("strong",{children:"Restaurar"}),"."]}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,dr.jsx)(od,{color:"primary","aria-label":"add",children:(0,dr.jsx)(ld,{})})}),(0,dr.jsx)("div",{style:{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:"#ccc",paddingTop:0,marginBottom:50}}),(0,dr.jsx)("strong",{children:"v.1.9.9"}),(0,dr.jsx)("li",{children:"Modificaciones en vistas de Ordenes."}),(0,dr.jsx)("li",{children:"Se habilita vista de Ordenes para Jefe de Maquinaria. Este perfil no puede generar nuevo documento PDF por estar fuera del flujo de actualizaciones de la OT."}),(0,dr.jsx)("strong",{children:"v.1.9.8"}),(0,dr.jsx)("li",{children:"Reparaci\xf3n de fallos al subir las AST."}),(0,dr.jsx)("strong",{children:"v.1.9.7"}),(0,dr.jsx)("li",{children:"Reparaci\xf3n de fallos PDF."}),(0,dr.jsx)("strong",{children:"v.1.9.6"}),(0,dr.jsx)("li",{children:"Inserta im\xe1genes de comentarios en PDF."}),(0,dr.jsx)("strong",{children:"v.1.9.5"}),(0,dr.jsx)("li",{children:"Cambios en la generaci\xf3n del documento PDF. Ahora se crea autom\xe1ticamente al cerrar la OT por parte del Ejecutivo SAP, Admin o Super Admin."}),(0,dr.jsx)("li",{children:"Listado de OTs en p\xe1gina Ordenes, ordenados por Nro OT."}),(0,dr.jsx)("strong",{children:"v.1.9"}),(0,dr.jsx)("li",{children:"Se integra servicio Storage para im\xe1genes de la plataforma."}),(0,dr.jsx)("strong",{children:"v.1.8.9"}),(0,dr.jsx)("li",{children:"Cambios en forma de llenado de pauta, presionando el checkbox."}),(0,dr.jsx)("li",{children:"Mejoras de rendimiento."}),(0,dr.jsx)("strong",{children:"v.1.8.8"}),(0,dr.jsx)("li",{children:"Reparaci\xf3n de notificaciones."}),(0,dr.jsx)("li",{children:"Vista notificaciones de p\xe1gina de inicio se actualiza junto a la llegada de notificaciones push."}),(0,dr.jsx)("strong",{children:"v.1.8.7"}),(0,dr.jsx)("li",{children:"Cambios en los permisos de roles."}),(0,dr.jsx)("li",{children:"Correo para creaci\xf3n de usuarios opcional."}),(0,dr.jsx)("strong",{children:"v.1.8.6"}),(0,dr.jsx)("li",{children:"Se agrega login usando RUT."}),(0,dr.jsx)("li",{children:"Reparaci\xf3nes menores."}),(0,dr.jsx)("strong",{children:"v.1.8.5"}),(0,dr.jsx)("li",{children:"Reparaciones menores."}),(0,dr.jsx)("strong",{children:"v.1.8"}),(0,dr.jsx)("li",{children:"Modelo 3D de subsistema desde la OT."}),(0,dr.jsx)("li",{children:"Etiquetado de Pala y Cami\xf3n."}),(0,dr.jsx)("strong",{children:"v.1.7"}),(0,dr.jsx)("li",{children:"Se posicionan etiquetas de Pala y Cami\xf3n de acuerdo a indicaciones."}),(0,dr.jsx)("strong",{children:"v.1.6"}),(0,dr.jsx)("li",{children:"Se habilita vista 3D de m\xe1quinas. Solo cambi\xf3n Caterpillar 793-F cuenta con etiquetas en las partes."}),(0,dr.jsx)("li",{children:"Se habilita bot\xf3n de borrado del sistema en caso de requerir limpiar la memoria."}),(0,dr.jsx)("strong",{children:"v.1.5"}),(0,dr.jsx)("li",{children:"Se agrega elemento que permite borrar o cambiar la AST."}),(0,dr.jsx)("strong",{children:"v.1.4"}),(0,dr.jsx)("li",{children:"Optimizaciones. Cambios al proceso de flujo. Se corrige error al enviar OT finalizando sin conexi\xf3n."}),(0,dr.jsx)("strong",{children:"v.1.3"}),(0,dr.jsx)("li",{children:"Ajustes de usuarios. Correcci\xf3n en caso de cambios para la AST."}),(0,dr.jsx)("li",{children:"Correcci\xf3n de errores."}),(0,dr.jsx)("strong",{children:"v.1.2"}),(0,dr.jsx)("li",{children:"Cambios de vistas. Se agrega foto AST en pautas."}),(0,dr.jsx)("strong",{children:"v.1.1"}),(0,dr.jsx)("li",{children:"Se agrega listado de OTs asignadas a cada m\xe1quina."}),(0,dr.jsx)("li",{children:"Se ajustan cambios en pautas."}),(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:"v.1.0"}),(0,dr.jsx)("li",{children:"Habilitado producci\xf3n."})]}),(0,dr.jsx)(od,{onClick:function(){return n()},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,dr.jsx)(Jl,{style:{color:"#ccc"}})})]})})},cd=n(5203),dd=function(){function e(t,n){M(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return(0,A.Z)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),hd=function(){function e(){M(this,e)}return(0,A.Z)(e,[{key:"refCount",value:function(e){return fd("refCount")}},{key:"incRef",value:function(e){return fd("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return fd("time")}},{key:"read",value:function(e){return fd("read")}},{key:"readSync",value:function(e){return fd("readSync")}},{key:"readToGPU",value:function(e,t){return fd("readToGPU")}},{key:"numDataIds",value:function(){return fd("numDataIds")}},{key:"disposeData",value:function(e,t){return fd("disposeData")}},{key:"write",value:function(e,t,n){return fd("write")}},{key:"move",value:function(e,t,n,r,a){return fd("move")}},{key:"memory",value:function(){return fd("memory")}},{key:"floatPrecision",value:function(){return fd("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return fd("dispose")}}]),e}();function fd(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function pd(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,gd(e,--t,n)}function md(e,t,n){return Math.max(e,Math.min(t,n))}function vd(e){return e%2===0?e:e+1}function gd(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function yd(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function bd(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function xd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";bd(Td(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function wd(e){bd(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function kd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||Ld(e)&&!n)for(var r=0;r<e.length;++r)kd(e[r],t,n);else t.push(e);return t}function Sd(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Td(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ed(e){return e%1===0}function Cd(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function _d(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Md(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function Ad(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function Id(e,t){var n=t.length;return e=null==e?t.map((function(e,t){return t})):[].concat(e),bd(e.every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),bd(e.every((function(e){return Ed(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function Nd(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:Id(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Rd(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function Od(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Dd(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function Ld(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function Pd(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function Fd(e){return"string"===typeof e||e instanceof String}function jd(e){return"number"===typeof e}function zd(e){return Array.isArray(e)?zd(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":jd(e)?"float32":Fd(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function Bd(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Ud(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function Wd(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Vd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],l=t.slice(1),u=l.reduce((function(e,t){return e*t}))*(r?2:1),c=0;c<s;c++)a[c]=Vd(e+c*u,l,n,r);return a}function Zd(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return Vd(0,e,t,n)}function Hd(e,t){for(var n=Gd(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Gd(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function qd(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return Zd(e,new Float32Array(n));if("int32"===t)return Zd(e,new Int32Array(n));if("bool"===t)return Zd(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function Xd(e){e.forEach((function(t){bd(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function Yd(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Kd(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function $d(e){return e&&e.then&&"function"===typeof e.then}var Jd="tfjsflags",Qd=function(){function e(t){M(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=eh,this.populateURLFlags()}return(0,A.Z)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(th().getBool("IS_TEST")||th().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];th().getBool("IS_TEST")||th().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if($d(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(Jd in t)t[Jd].split(",").forEach((function(t){var n=t.split(":"),r=(0,U.Z)(n,2),a=r[0],i=r[1];e.urlFlags[a]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(a,i)}))}}}]),e}();function eh(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function th(){return rh}var nh,rh=null;function ah(){if(null==nh){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}nh=e}return nh}function ih(e,t){var n=function(){var e=ah();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var oh="Abs",sh="Acos",lh="Acosh",uh="Add",ch="AddN",dh="All",hh="Any",fh="ArgMax",ph="ArgMin",mh="Asin",vh="Asinh",gh="Atan",yh="Atanh",bh="Atan2",xh="AvgPool",wh="AvgPoolGrad",kh="AvgPool3D",Sh="AvgPool3DGrad",Th="BatchMatMul",Eh="BatchToSpaceND",Ch="Bincount",_h="BroadcastArgs",Mh="Cast",Ah="Ceil",Ih="ClipByValue",Nh="Complex",Rh="ComplexAbs",Oh="Concat",Dh="Conv2D",Lh="Conv2DBackpropFilter",Ph="Conv2DBackpropInput",Fh="Conv3D",jh="Conv3DBackpropFilterV2",zh="Conv3DBackpropInputV2",Bh="Cos",Uh="Cosh",Wh="Cumsum",Vh="CropAndResize",Zh="DenseBincount",Hh="DepthToSpace",Gh="DepthwiseConv2dNative",qh="DepthwiseConv2dNativeBackpropFilter",Xh="DepthwiseConv2dNativeBackpropInput",Yh="Diag",Kh="Dilation2D",$h="Dilation2DBackpropInput",Jh="Dilation2DBackpropFilter",Qh="RealDiv",ef="Einsum",tf="Elu",nf="EluGrad",rf="Erf",af="Equal",of="Exp",sf="ExpandDims",lf="Expm1",uf="FFT",cf="Fill",df="FlipLeftRight",hf="Floor",ff="FloorDiv",pf="FusedBatchNorm",mf="GatherV2",vf="GatherNd",gf="Greater",yf="GreaterEqual",bf="Identity",xf="IFFT",wf="Imag",kf="IsFinite",Sf="IsInf",Tf="IsNan",Ef="LeakyRelu",Cf="Less",_f="LessEqual",Mf="LinSpace",Af="Log",If="Log1p",Nf="LogicalAnd",Rf="LogicalNot",Of="LogicalOr",Df="LRN",Lf="LRNGrad",Pf="Max",Ff="Maximum",jf="MaxPool",zf="MaxPoolGrad",Bf="MaxPool3D",Uf="MaxPool3DGrad",Wf="MaxPoolWithArgmax",Vf="Mean",Zf="Min",Hf="Minimum",Gf="MirrorPad",qf="Mod",Xf="Multinomial",Yf="Multiply",Kf="Neg",$f="NotEqual",Jf="NonMaxSuppressionV3",Qf="NonMaxSuppressionV4",ep="NonMaxSuppressionV5",tp="OnesLike",np="OneHot",rp="Pack",ap="PadV2",ip="Pow",op="Prelu",sp="Prod",lp="Range",up="Real",cp="Reciprocal",dp="Relu",hp="Reshape",fp="ResizeNearestNeighbor",pp="ResizeNearestNeighborGrad",mp="ResizeBilinear",vp="ResizeBilinearGrad",gp="Relu6",yp="Reverse",bp="Round",xp="Rsqrt",wp="ScatterNd",kp="Select",Sp="Selu",Tp="Slice",Ep="Sin",Cp="Sinh",_p="Sign",Mp="Sigmoid",Ap="Softplus",Ip="Sqrt",Np="Sum",Rp="SpaceToBatchND",Op="SplitV",Dp="Softmax",Lp="SparseFillEmptyRows",Pp="SparseReshape",Fp="SparseSegmentMean",jp="SparseSegmentSum",zp="SparseToDense",Bp="SquaredDifference",Up="Square",Wp="StridedSlice",Vp="StringNGrams",Zp="StringSplit",Hp="StringToHashBucketFast",Gp="Sub",qp="Tan",Xp="Tanh",Yp="Tile",Kp="TopK",$p="Transform",Jp="Transpose",Qp="Unique",em="Unpack",tm="UnsortedSegmentSum",nm="ZerosLike",rm="Step",am="FromPixels",im="RotateWithOffset",om="_FusedMatMul",sm="FusedConv2D",lm="FusedDepthwiseConv2D";function um(){var e;th().getBool("IS_TEST")||th().getBool("PROD")||(e=console).warn.apply(e,arguments)}var cm=ih("kernelRegistry",(function(){return new Map})),dm=ih("gradRegistry",(function(){return new Map}));function hm(e,t){var n=gm(e,t);return cm.get(n)}function fm(e){return dm.get(e)}function pm(e){for(var t=cm.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=(0,U.Z)(i,2),s=o[0],l=o[1],u=s.split("_");(0,U.Z)(u,1)[0]===e&&n.push(l)}return n}function mm(e){var t=e.kernelName,n=e.backendName,r=gm(t,n);cm.has(r)&&um("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),cm.set(r,e)}function vm(e){var t=e.kernelName;dm.has(t)&&th().getBool("DEBUG")&&um("Overriding the gradient for '".concat(t,"'")),dm.set(t,e)}function gm(e,t){return"".concat(t,"_").concat(e)}var ym=n(8987),bm=n.n(ym)()||ym;function xm(e){return bm.fromString(e,!0,16)}var wm=xm("c3a5c85c97cb3127"),km=xm("b492b66fbe98f273"),Sm=xm("9ae16a3b2f90404f");function Tm(e){return e.xor(e.shru(47))}function Em(e,t,n){var r=e.slice(t,t+n);return bm.fromBytes(Array.from(r),!0,!0)}function Cm(e,t){return Em(e,t,8)}function _m(e,t){return Em(e,t,4)}function Mm(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function Am(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xm("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function Im(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=Mm(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(Mm(a,44)),[a.add(r),i.add(o)]}(Cm(e,t),Cm(e,t+8),Cm(e,t+16),Cm(e,t+24),n,r)}function Nm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=bm.fromNumber(81,!0);if(t<=32)return t<=16?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=Sm.add(2*t),r=Cm(e,0).add(Sm),a=Cm(e,t-8);return Am(Mm(a,37).mul(n).add(r),Mm(r,25).add(a).mul(n),n)}if(t>=4){var i=Sm.add(2*t);return Am(_m(e,0).shl(3).add(t),_m(e,t-4),i)}if(t>0){var o=e[0]+(e[t>>1]<<8),s=t+(e[t-1]<<2);return Tm(Sm.mul(o).xor(wm.mul(s))).mul(Sm)}return Sm}(e,t):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Sm.add(2*t),r=Cm(e,0).mul(km),a=Cm(e,8),i=Cm(e,t-8).mul(n),o=Cm(e,t-16).mul(Sm);return Am(Mm(r.add(a),43).add(Mm(i,30)).add(o),r.add(Mm(a.add(Sm),18)).add(i),n)}(e,t);if(t<=64)return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Sm.add(2*t),r=Cm(e,0).mul(Sm),a=Cm(e,8),i=Cm(e,t-8).mul(n),o=Cm(e,t-16).mul(Sm),s=Mm(r.add(a),43).add(Mm(i,30)).add(o),l=Am(s,r.add(Mm(a.add(Sm),18)).add(i),n),u=Cm(e,16).mul(n),c=Cm(e,24),d=s.add(Cm(e,t-32)).mul(n),h=l.add(Cm(e,t-24)).mul(n);return Am(Mm(u.add(c),43).add(Mm(d,30)).add(h),u.add(Mm(c.add(r),18)).add(d),n)}(e,t);var r=n,a=n.mul(km).add(113),i=Tm(a.mul(Sm).add(113)).mul(Sm),o=[bm.UZERO,bm.UZERO],s=[bm.UZERO,bm.UZERO];r=r.mul(Sm).add(Cm(e,0));var l=0,u=64*(t-1>>6),c=u+(t-1&63)-63;do{r=Mm(r.add(a).add(o[0]).add(Cm(e,l+8)),37).mul(km),a=Mm(a.add(o[1]).add(Cm(e,l+48)),42).mul(km),r=r.xor(s[1]),a=a.add(o[0]).add(Cm(e,l+40)),i=Mm(i.add(s[0]),33).mul(km),o=Im(e,l,o[1].mul(km),r.add(s[0])),s=Im(e,l+32,i.add(s[1]),a.add(Cm(e,l+16)));var d=[r,i];i=d[0],r=d[1],l+=64}while(l!==u);var h=km.add(i.and(255).shl(1));l=c,s[0]=s[0].add(t-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=Mm(r.add(a).add(o[0]).add(Cm(e,l+8)),37).mul(h),a=Mm(a.add(o[1]).add(Cm(e,l+48)),42).mul(h),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(Cm(e,l+40))),i=Mm(i.add(s[0]),33).mul(h),o=Im(e,l,o[1].mul(h),r.add(s[0])),s=Im(e,l+32,i.add(s[1]),a.add(Cm(e,l+16)));var f=[r,i];return i=f[0],r=f[1],Am(Am(o[0],s[0],h).add(Tm(a).mul(wm)).add(i),Am(o[1],s[1],h).add(r),h)}function Rm(e,t){return"string"===t?Lm(e):Om([e],t)}function Om(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=kd(e)),th().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function Dm(){return th().platform.now()}function Lm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",th().platform.encode(e,t)}function Pm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",th().platform.decode(e,t)}var Fm=function(){function e(t,n){M(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new jm)}return(0,A.Z)(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=Dm();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,l=G(r);try{for(l.s();!(s=l.n()).done;){s.value.dataSync()}}catch(d){l.e(d)}finally{l.f()}a=Promise.resolve({kernelMs:Dm()-o})}if(th().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var u=function(){var t=r[c];t.data().then((function(n){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(n,t.dtype,e)}))},c=0;c<r.length;c++)u();return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var jm=function(){function e(){M(this,e)}return(0,A.Z)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?_d("".concat(r,"ms"),9):r.error,s=_d(e,25),l=t.rank,u=t.size,c=_d(t.shape.toString(),14),d="";for(var h in a){var f=a[h];if(null!=f){var p=f.shape||t.shape,m=p.length;d+="".concat(h,": ").concat(m,"D ").concat(m>0?p:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(l,"D ").concat(c,"\t%c").concat(u,"\t%c").concat(d,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();var zm=20,Bm=3,Um=7;function Wm(e,t,n,r){var a=Wd(t),i=function(e,t,n,r){var a=Sd(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,l="complex64"===n?Gm(e):e;if(s>1)for(var u=0;u<a/i;u++)for(var c=u*i,d=0;d<i;d++)o[d]=Math.max(o[d],Vm(l[c+d],0,n).length);return o}(e,t,n,a),o=t.length,s=Hm(e,t,n,a,i),l=["Tensor"];return r&&(l.push("  dtype: ".concat(n)),l.push("  rank: ".concat(o)),l.push("  shape: [".concat(t,"]")),l.push("  values:")),l.push(s.map((function(e){return"    "+e})).join("\n")),l.join("\n")}function Vm(e,t,n){return _d(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(Um))," + ")+"".concat(parseFloat(e[1].toFixed(Um)),"j"):Fd(e)?"'".concat(e,"'"):"bool"===n?Zm(e):parseFloat(e.toFixed(Um)).toString(),t)}function Zm(e){return 0===e?"false":"true"}function Hm(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],l=t.length;if(0===l)return"complex64"===n?[Vm(Gm(e)[0],0,n)]:"bool"===n?[Zm(e[0])]:[e[0].toString()];if(1===l){if(s>zm){var u=Bm*o,c=Array.from(e.slice(0,u)),d=Array.from(e.slice((s-Bm)*o,s*o));return"complex64"===n&&(c=Gm(c),d=Gm(d)),["["+c.map((function(e,t){return Vm(e,a[t],n)})).join(", ")+", ..., "+d.map((function(e,t){return Vm(e,a[s-Bm+t],n)})).join(", ")+"]"]}return["["+("complex64"===n?Gm(e):Array.from(e)).map((function(e,t){return Vm(e,a[t],n)})).join(", ")+"]"]}var h=t.slice(1),f=r.slice(1),p=r[0]*o,m=[];if(s>zm){for(var v=0;v<Bm;v++){var g=v*p,y=g+p;m.push.apply(m,(0,_.Z)(Hm(e.slice(g,y),h,n,f,a,!1)))}m.push("...");for(var b=s-Bm;b<s;b++){var x=b*p,w=x+p;m.push.apply(m,(0,_.Z)(Hm(e.slice(x,w),h,n,f,a,b===s-1)))}}else for(var k=0;k<s;k++){var S=k*p,T=S+p;m.push.apply(m,(0,_.Z)(Hm(e.slice(S,T),h,n,f,a,k===s-1)))}var E=2===l?",":"";m[0]="["+m[0]+E;for(var C=1;C<m.length-1;C++)m[C]=" "+m[C]+E;for(var M=",\n",A=2;A<l;A++)M+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(i?"":M),m}function Gm(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var qm=function(){function e(t,n,r){var a=this;if(M(this,e),this.dtype=n,this.shape=t.slice(),this.size=Sd(t),null!=r){var i=r.length;bd(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Od(n,this.size),this.strides=Wd(t)}return(0,A.Z)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),bd(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var l=t[t.length-1],u=0;u<t.length-1;++u)l+=this.strides[u]*t[u];return this.values[l]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return Xm().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),Xm=null,Ym=null;var Km=function(){function e(t,n,r,a){M(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Sd(t),this.strides=Wd(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return(0,A.Z)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Ym.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return Ym.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Zd(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Zd(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=Vn(Un().mark((function e(){var t,n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=Xm().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return Pm(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),Xm().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=Xm().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Pm(e)}))}catch(a4){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,Xm().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(Xm().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ym.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),Ym.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Wm(this.dataSync(),this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),Ym.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),Xm().makeVariable(this,e,t,n)}}]),e}();function $m(){return ih("Tensor",(function(){return Km}))}Object.defineProperty(Km,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),$m();var Jm,Qm,ev,tv,nv,rv=function(e){N(n,e);var t=F(n);function n(e,r,a,i){var o;return M(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return(0,A.Z)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Td(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));Xm().disposeTensor(this),this.dataId=e.dataId,Xm().incRef(this,null)}},{key:"dispose",value:function(){Xm().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(Km);Object.defineProperty(rv,Symbol.hasInstance,{value:function(e){return e instanceof Km&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Jm||(Jm={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Qm||(Qm={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(ev||(ev={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(tv||(tv={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(nv||(nv={}));var av={float32:tv,int32:Qm,bool:ev,complex64:nv};function iv(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return av[e][t]}function ov(e){return iv(e,"int32")}function sv(e,t){if(e.dtype===t.dtype)return[e,t];var n=iv(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function lv(e,t){return t.some((function(t){return t.id===e.id}))}function uv(e){var t=[];return cv(e,t,new Set),t}function cv(e,t,n){if(null!=e)if(e instanceof Km)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),cv(o,t,n))}}}function dv(e){return null!=e.kernelName}var hv=function(){function e(){M(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return(0,A.Z)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),fv=function(){function e(t){M(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new hv}return(0,A.Z)(e,[{key:"ready",value:function(){var e=Vn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(um("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=Vn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Fm(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;pm(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;pm(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof hd||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,um("Initialization of backend ".concat(e," failed")),um(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return um("Initialization of backend ".concat(e," failed")),um(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(Uie){throw t(),Uie}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=vv.runKernel(bf,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return vv.runKernel(Mh,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=hm(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,l=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var u=dv(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(dv(e)){var c=e.kernelName,d=e.inputs,h=e.attrs;null==this.backendName&&this.backend;var f=hm(c,this.backendName);bd(null!=f,(function(){return"Cannot find registered kernel '".concat(c,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=f.kernelFunc({inputs:d,attrs:h,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(o){var s=a.getTensorsForGradient(c,d,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var p=e.forwardFunc,m=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return p(a.backend,m)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(u,e,t),t}}var v,g=e.inputs,y=e.attrs,b=dv(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(v=a.profiler.profileKernel(u,g,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(v),t=v.outputs):t=n()})),o&&this.addTapeNode(u,g,t,b,i,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-l,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map((function(e){return null!=g[e]?g[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:v.timeMs,extraInfo:v.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=fm(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(bd(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&Fd(e[0])&&(a=e.map((function(e){return Lm(e)})));var i=r.write(a,t,n),o=new Km(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),l=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=l-s.bytes,s.bytes=l}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a=new Km(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new rv(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Pd(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof rv||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*Pd(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a,i,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,_.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=G(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=24;break}return o=i.value,e.next=18,o.kernelTimeMs;case 18:return o.kernelTimeMs=e.sent,e.next=21,o.extraInfo;case 21:o.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},l=fm(e);null!=l&&(r=l.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Gd(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=uv(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(bd(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));bd(i instanceof Km,(function(){return"The result y returned by f() must be a tensor."}));var o=function(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],l=s.inputs;for(var u in l){for(var c=l[u],d=!1,h=0;h<t.length;h++)if(r[c.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var f={};f[n.id]=!0;for(var p={},m=e.length-1;m>=0;m--)for(var v=e[m],g=v.inputs,y=0;y<v.outputs.length;y++)if(f[v.outputs[y].id]){for(var b in g)f[g[b].id]=!0,p[v.id]=!0;break}for(var x=[],w=0;w<e.length;w++){var k=e[w];if(a[k.id]&&p[k.id]){var S={};for(var T in k.inputs){var E=k.inputs[T];r[E.id]&&(S[T]=E)}var C=Object.assign({},k);C.inputs=S,C.outputs=k.outputs,x.push(C)}}return x}(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?function(e){var t=Hd(Sd(e),"float32");return vv.makeTensor(t,e,"float32")}(i.shape):n,function(e,t,n,r){for(var a=function(){var a=t[i],o=[];if(a.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(a.kernelName,"."));var s=a.gradient(o),l=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var i=n((function(){return s[t]()}));if("float32"!==i.dtype)throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(i.dtype,"'"));var o=a.inputs[t];if(!Td(i.shape,o.shape))throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(i.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=i;else{var l=e[o.id];e[o.id]=r(l,i),l.dispose()}};for(var u in a.inputs)l(u)},i=t.length-1;i>=0;i--)a()}(e,o,(function(e){return r.tidy(e)}),gv);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=G(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return bd(Bd(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;bd(r.every((function(e){return e instanceof Km})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));return t.runKernelFunc({forwardFunc:function(t,n){return bd((i=e.apply(void 0,[].concat(r,[n]))).value instanceof Km,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),bd(Bd(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},backwardsFunc:function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];bd(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),bd(a.every((function(e){return e instanceof Km})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o},inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=Vn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Dm(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=Dm()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new hv,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function pv(){var e=ah();if(null==e._tfengine){var t=new Qd(e);e._tfengine=new fv(t)}return function(e){rh=e}(e._tfengine.ENV),function(e){Xm=e}((function(){return e._tfengine})),e._tfengine}fv.nextTensorId=0,fv.nextVariableId=0;var mv,vv=pv();function gv(e,t){var n={a:e,b:t};return vv.runKernel(uh,n)}function yv(e){if(void 0!==mv)return mv;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function bv(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var xv=th();function wv(e,t){var n=e;if(Ld(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Ld(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&th().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&kv(e,r,[]),r}function kv(e,t,n){if(n=n||[],Array.isArray(e)||Ld(e)){bd(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),bd(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)kv(e[a],r,n.concat(a))}else bd(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function Sv(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function Tv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Km)return Sv(r,e.dtype,t,n),e;var a=zd(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Sv(r,a,t,n),null==e||!Ld(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=wv(e,a);Ld(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?Om(e,a):kd(e,[],!0);return vv.makeTensor(s,o,a)}function Ev(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map((function(e,a){return Tv(e,"".concat(t,"[").concat(a,"]"),n,r)}))}xv.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),xv.registerFlag("IS_BROWSER",(function(){return bv()})),xv.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),xv.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),xv.registerFlag("PROD",(function(){return!1})),xv.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return xv.getBool("DEBUG")})),xv.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),xv.registerFlag("IS_TEST",(function(){return!1})),xv.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),xv.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1}));var Cv="__op";function _v(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=Cv;var a=function(){vv.startScope(n);try{var e=r.apply(void 0,arguments);return $d(e)&&console.error("Cannot return a Promise inside of tidy."),vv.endScope(e),e}catch(Uie){throw vv.endScope(null),Uie}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var Mv=_v({complex_:function(e,t){var n=Tv(e,"real","complex"),r=Tv(t,"imag","complex");xd(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return vv.runKernel(Nh,a)}});function Av(e,t,n,r){if(null==r&&(r=zd(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ld(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Xd(t);var a=Sd(t),i=Sd(n);bd(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],l=o!==n.length-1||s!==Sd(t.slice(o));bd(n[o]===t[o]||!l,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return Ld(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?Om(e,r):kd(e,[],!0),vv.makeTensor(e,t,r)}function Iv(e,t,n){return Av(e,t,wv(e,n),n)}var Nv={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},Rv=4;function Ov(e,t){return Dv.apply(this,arguments)}function Dv(){return Dv=Vn(Un().mark((function e(t,n){var r,a,i,o,s,l;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=Un().mark((function e(){var o,l,u,c;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i[s],"float32"===(l=Array.isArray(t)?t[s].tensor:t[o]).dtype||"int32"===l.dtype||"bool"===l.dtype||"string"===l.dtype||"complex64"===l.dtype){e.next=4;break}throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(l.dtype));case 4:u={name:o,shape:l.shape,dtype:l.dtype},"string"===l.dtype?(c=new Promise(function(){var e=Vn(Un().mark((function e(t){var n,r,a,i,o,s,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+Rv*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)s=n[o],u=new Uint8Array(new Uint32Array([s.length]).buffer),a.set(u,i),i+=Rv,a.set(s,i),i+=s.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.push(c)):a.push(l.data()),null!=n&&(u.group=n),r.push(u);case 8:case"end":return e.stop()}}),e)})),s=0;case 5:if(!(s<i.length)){e.next=10;break}return e.delegateYield(o(),"t0",7);case 7:++s,e.next=5;break;case 10:return e.next=12,Promise.all(a);case 12:return l=e.sent,e.abrupt("return",{data:Pv(l),specs:r});case 14:case"end":return e.stop()}}),e)}))),Dv.apply(this,arguments)}function Lv(e,t){var n,r,a={},i=0,o=G(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=s.name,u=s.dtype,c=s.shape,d=Sd(c),h=void 0;if("quantization"in s){var f=s.quantization;if("uint8"===f.dtype||"uint16"===f.dtype){if(!("min"in f)||!("scale"in f))throw new Error("Weight ".concat(s.name," with quantization ").concat(f.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==f.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(f.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==u)throw new Error("Weight ".concat(s.name," is quantized with ").concat(f.dtype," ")+"which only supports weights of type float32 not ".concat(u,"."))}var p=Nv[f.dtype],m=e.slice(i,i+d*p),v="uint8"===f.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===u)if("uint8"===f.dtype||"uint16"===f.dtype){h=new Float32Array(v.length);for(var g=0;g<v.length;g++){var y=v[g];h[g]=y*f.scale+f.min}}else{if("float16"!==f.dtype)throw new Error("Unsupported quantization type ".concat(f.dtype," ")+"for weight type float32.");void 0===n&&(n=qv()),h=n(v)}else{if("int32"!==u)throw new Error("Unsupported dtype in weight '".concat(l,"': ").concat(u));if("uint8"!==f.dtype&&"uint16"!==f.dtype)throw new Error("Unsupported quantization type ".concat(f.dtype," ")+"for weight type int32.");h=new Int32Array(v.length);for(var b=0;b<v.length;b++){var x=v[b];h[b]=Math.round(x*f.scale+f.min)}}i+=d*p}else if("string"===u){var w=Sd(s.shape);h=[];for(var k=0;k<w;k++){var S=new Uint32Array(e.slice(i,i+Rv))[0];i+=Rv;var T=new Uint8Array(e.slice(i,i+S));h.push(T),i+=S}}else{var E=Nv[u],C=e.slice(i,i+d*E);if("float32"===u)h=new Float32Array(C);else if("int32"===u)h=new Int32Array(C);else if("bool"===u)h=new Uint8Array(C);else{if("complex64"!==u)throw new Error("Unsupported dtype in weight '".concat(l,"': ").concat(u));h=new Float32Array(C);for(var _=new Float32Array(h.length/2),M=new Float32Array(h.length/2),A=0;A<_.length;A++)_[A]=h[2*A],M[A]=h[2*A+1];var I=Iv(_,c,"float32"),N=Iv(M,c,"float32");a[l]=Mv(I,N),I.dispose(),N.dispose()}i+=d*E}"complex64"!==u&&(a[l]=Iv(h,c,u))}}catch(R){o.e(R)}finally{o.f()}return a}function Pv(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var Fv="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function jv(e){return Fv?Buffer.byteLength(e):new Blob([e]).size}function zv(e){if(Fv)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function Bv(e){if(Fv){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function Uv(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Wv(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Vv(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function Zv(e,t){return Hv.apply(this,arguments)}function Hv(){return Hv=Vn(Un().mark((function e(t,n){var r,a,i,o,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:a=e.sent,i=(0,U.Z)(a,2),o=i[0],s=i[1],r.weightSpecs=o,r.weightData=s;case 11:return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)}))),Hv.apply(this,arguments)}function Gv(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:jv(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:jv(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function qv(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],l=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=l}return new Float32Array(a)}}var Xv=function(){function e(){M(this,e),this.saveRouters=[],this.loadRouters=[]}return(0,A.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),Yv=function(e){return Xv.registerSaveRouter(e)},Kv=function(e){return Xv.registerLoadRouter(e)},$v=function(e){return Xv.getSaveHandlers(e)},Jv=function(e,t){return Xv.getLoadHandlers(e,t)},Qv="tensorflowjs",eg="models_store",tg="model_info_store";function ng(){if(!th().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function rg(e){var t=e.result;t.createObjectStore(eg,{keyPath:"modelPath"}),t.createObjectStore(tg,{keyPath:"modelPath"})}var ag=function(){function e(t){if(M(this,e),this.indexedDB=ng(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return(0,A.Z)(e,[{key:"save",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(Qv,1);a.onupgradeneeded=function(){return rg(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(eg,"readonly"),s=o.objectStore(eg).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var l,u=Gv(t),c=i.transaction(tg,"readwrite"),d=c.objectStore(tg),h=d.put({modelPath:n.modelPath,modelArtifactsInfo:u});h.onsuccess=function(){var a=(l=i.transaction(eg,"readwrite")).objectStore(eg).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:u});a.onsuccess=function(){return e({modelArtifactsInfo:u})},a.onerror=function(e){var t=(d=c.objectStore(tg)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},h.onerror=function(e){return i.close(),r(h.error)},c.oncomplete=function(){null==l?i.close():l.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();ag.URL_SCHEME="indexeddb://";var ig=function(e){return th().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ag.URL_SCHEME)?(t=e.slice(ag.URL_SCHEME.length),new ag(t)):null;var t};Xv.registerSaveRouter(ig),Xv.registerLoadRouter(ig);var og=function(){function e(){M(this,e),this.indexedDB=ng()}return(0,A.Z)(e,[{key:"listModels",value:function(){var e=Vn(Un().mark((function e(){var t=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(Qv,1);r.onupgradeneeded=function(){return rg(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(tg,"readonly"),i=a.objectStore(tg).getAll();i.onsuccess=function(){var t,n={},r=G(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Vn(Un().mark((function e(t){var n=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(ag.URL_SCHEME)?r.slice(ag.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(Qv,1);a.onupgradeneeded=function(){return rg(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(tg,"readwrite"),s=o.objectStore(tg),l=s.get(t);l.onsuccess=function(){if(null==l.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(eg,"readwrite")).objectStore(eg).delete(t);a.onsuccess=function(){return e(l.result.modelArtifactsInfo)},a.onerror=function(e){return r(l.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(l.error)}},l.onerror=function(e){return i.close(),r(l.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),sg="/",lg="tensorflowjs_models",ug="info",cg="model_topology",dg="weight_specs",hg="weight_data",fg="model_metadata";function pg(e){return{info:[lg,e,ug].join(sg),topology:[lg,e,cg].join(sg),weightSpecs:[lg,e,dg].join(sg),weightData:[lg,e,hg].join(sg),modelMetadata:[lg,e,fg].join(sg)}}function mg(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function vg(e){var t=e.split(sg);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(sg)}var gg=function(){function e(t){if(M(this,e),!th().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=pg(this.modelPath)}return(0,A.Z)(e,[{key:"save",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Gv(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,zv(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),mg(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a,i,o,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=Bv(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();gg.URL_SCHEME="localstorage://";var yg=function(e){return th().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(gg.URL_SCHEME)?(t=e.slice(gg.URL_SCHEME.length),new gg(t)):null;var t};Xv.registerSaveRouter(yg),Xv.registerLoadRouter(yg);var bg=function(){function e(){M(this,e),bd(th().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),bd("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return(0,A.Z)(e,[{key:"listModels",value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a,i,o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=lg+sg,r=sg+ug,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=vg(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Vn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(gg.URL_SCHEME)?a.slice(gg.URL_SCHEME.length):a,n=pg(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),mg(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),xg="://",wg=function(){function e(){M(this,e),this.managers={}}return(0,A.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){bd(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(xg)&&(t=t.slice(0,t.indexOf(xg))),bd(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();bd(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function kg(e){if(-1===e.indexOf(xg))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(wg.getSchemes().join(",")));return{scheme:e.split(xg)[0],path:e.split(xg)[1]}}function Sg(e,t){return Tg.apply(this,arguments)}function Tg(){return Tg=Vn(Un().mark((function e(t,n){var r,a,i,o,s,l,u,c,d,h,f=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>2&&void 0!==f[2]&&f[2],bd(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),bd((a=Xv.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),bd(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],bd((o=Xv.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),bd(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],l=kg(t).scheme,u=kg(t).path,c=l===kg(t).scheme,e.next=15,i.load();case 15:if(d=e.sent,!r||!c){e.next=19;break}return e.next=19,wg.getManager(l).removeModel(u);case 19:return e.next=21,s.save(d);case 21:if(h=e.sent,!r||c){e.next=25;break}return e.next=25,wg.getManager(l).removeModel(u);case 25:return e.abrupt("return",h.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),Tg.apply(this,arguments)}function Eg(){return Cg.apply(this,arguments)}function Cg(){return(Cg=Vn(Un().mark((function e(){var t,n,r,a,i,o,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=wg.getSchemes(),n={},r=G(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,wg.getManager(i).listModels();case 9:for(s in o=e.sent)n[i+xg+s]=o[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function _g(e){return Mg.apply(this,arguments)}function Mg(){return Mg=Vn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=kg(t),r=wg.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)}))),Mg.apply(this,arguments)}function Ag(e,t){return Ig.apply(this,arguments)}function Ig(){return(Ig=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",Sg(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ng(e,t){return Rg.apply(this,arguments)}function Rg(){return(Rg=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",Sg(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Og=function(){function e(){M(this,e)}return(0,A.Z)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(th().get("IS_BROWSER")){th().setPlatform("browser",new Og);try{wg.registerManager(gg.URL_SCHEME,new bg)}catch(_ke){}try{wg.registerManager(ag.URL_SCHEME,new og)}catch(_ke){}}var Dg,Lg=function(){return n(5410)};var Pg=function(){function e(){M(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return(0,A.Z)(e,[{key:"fetch",value:function(e,t){return null!=th().global.fetch?th().global.fetch(e,t):(null==Dg&&(Dg=Lg()),Dg(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function Fg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",Xd(e),new qm(e,t,n)}th().get("IS_NODE")&&th().setPlatform("node",new Pg);var jg=_v({cast_:function(e,t){var n=Tv(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return vv.runKernel(Mh,r,a)}});var zg=_v({clone_:function(e){var t={x:Tv(e,"x","clone","string_or_numeric")};return vv.runKernel(bf,t)}});function Bg(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}pv(),Ym={buffer:Fg,cast:jg,clone:zg,print:Bg};function Ug(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var Wg=function(){function e(t){if(M(this,e),!th().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return(0,A.Z)(e,[{key:"save",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a,i,o,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Vv(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,Ug((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,Ug((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:Gv(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Wg.URL_SCHEME="downloads://";var Vg=function(){function e(t){if(M(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return(0,A.Z)(e,[{key:"load",value:function(){var e=Vn(Un().mark((function e(){var t=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=Zv(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=G(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,(0,_.Z)(o.weights)),a.push.apply(a,(0,_.Z)(o.paths))}}catch(_ke){i.e(_ke)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),l=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(l).then((function(e){return[r,Uv(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return Wv(e.name)})),i={},o=G(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=Wv(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(_ke){o.e(_ke)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return i}}]),e}();function Zg(e){return new Vg(e)}function Hg(e,t,n,r){!function(e){bd(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){bd(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),bd(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),bd(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function Gg(e,t){return qg.apply(this,arguments)}function qg(){return(qg=Vn(Un().mark((function e(t,n){var r,a,i,o,s,l,u,c,d;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?th().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,Hg(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,l=s.map((function(e){return e.arrayBuffer()})),u=.5,c=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(l);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,Hg(l,n.onProgress,u,c);case 26:e.t1=e.sent;case 27:return d=e.t1,e.abrupt("return",d);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xg(e){return Yg.apply(this,arguments)}function Yg(){return Yg=Vn(Un().mark((function e(t){var n,r,a,i,o=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=Kg((function(e){return Gg(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)}))),Yg.apply(this,arguments)}function Kg(e){return function(){var t=Vn(Un().mark((function t(n){var r,a,i,o,s,l,u,c,d,h,f,p,m=arguments;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"",a=m.length>2?m[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],l=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,u=Nv[r]*Sd(e.shape),c=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:u})};null!=a?a.forEach((function(t,n){t===e.name&&(c(),s[n]=!0)})):c(),l.push(e.name),n+=u}))})),s.every((function(e){return e}))){t.next=10;break}throw u=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(u.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(l.join(", "),"."));case 10:return c=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),d=[],c.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;d.push(t)}))})),t.next=15,e(d);case 15:return h=t.sent,f={},p=0,c.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=h[p+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),l=0,u=0;u<t;u++){var c=new Uint8Array(h[p+u]);s.set(c,l),l+=c.byteLength}o[e].forEach((function(e){var t=Lv(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)f[n]=t[n]})),p+=t})),t.abrupt("return",f);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}Xv.registerSaveRouter((function(e){return th().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Wg.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new Wg(e)}(e.slice(Wg.URL_SCHEME.length)):null}));var $g=function(){function e(t,n){if(M(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(bd("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=th().platform.fetch,bd(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&bd(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return(0,A.Z)(e,[{key:"save",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=Vv(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:Gv(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a,i,o=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",Zv(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a,i,o,s,l,u,c,d,h,f,p,m,v,g,y,b,x;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=Jg(n),a=(0,U.Z)(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,l=[],u=G(t);try{for(u.s();!(c=u.n()).done;)d=c.value,l.push.apply(l,(0,_.Z)(d.weights))}catch(_ke){u.e(_ke)}finally{u.f()}h=[],f=[],p=G(t);try{for(p.s();!(m=p.n()).done;){v=m.value,g=G(v.paths);try{for(g.s();!(y=g.n()).done;)b=y.value,null!=this.weightUrlConverter?f.push(this.weightUrlConverter(b)):h.push(s+b+o)}catch(_ke){g.e(_ke)}finally{g.f()}}}catch(_ke){p.e(_ke)}finally{p.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=h.push,e.t1=h,e.t2=_.Z,e.next=16,Promise.all(f);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,Gg(h,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return x=e.sent,e.abrupt("return",[l,Uv(x)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Jg(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function Qg(e){return null!=e.match($g.URL_SCHEME_REGEX)}$g.URL_SCHEME_REGEX=/^https?:\/\//;var ey=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return Qg(e)})):Qg(e))?ty(e,t):null};function ty(e,t){return new $g(e,t)}function ny(e,t){return ty(e,t)}Xv.registerSaveRouter(ey),Xv.registerLoadRouter(ey);var ry,ay=function(){function e(t){M(this,e),this.modelArtifacts=t}return(0,A.Z)(e,[{key:"load",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelArtifacts);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),iy=function(){function e(t){M(this,e),this.saveHandler=t}return(0,A.Z)(e,[{key:"save",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveHandler(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function oy(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new ay(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ay({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ay({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function sy(e){return new iy(e)}function ly(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function uy(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function cy(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}function dy(e,t,n){if(wd(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=wv(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Av(e,t,r,n)}function hy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(a){if(a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=hm(am,vv.backendName)){var l={pixels:e},u={numChannels:t};return vv.runKernel(am,l,u)}var c,d,h=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],f=(0,U.Z)(h,2),p=f[0],m=f[1];if(o)c=e.getContext("2d").getImageData(0,0,p,m).data;else if(r||n)c=e.data;else if(i||a||s){if(null==ry)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");ry=new OffscreenCanvas(1,1).getContext("2d")}else ry=document.createElement("canvas").getContext("2d");ry.canvas.width=p,ry.canvas.height=m,ry.drawImage(e,0,0,p,m),c=ry.getImageData(0,0,p,m).data}if(4===t)d=new Int32Array(c);else{var v=p*m;d=new Int32Array(v*t);for(var g=0;g<v;g++)for(var y=0;y<t;++y)d[g*t+y]=c[4*g+y]}return dy(d,[m,p,t],"int32")}var fy=_v({fromPixels_:hy}),py=-2,my=-1;function vy(e,t,n){var r=e.shape.length;bd(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),bd(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){bd(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function gy(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function yy(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function by(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function xy(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat((0,_.Z)(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){bd(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat((0,_.Z)(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(bd(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function wy(e,t,n,r,a,i,o,s,l){var u;if(null==r?(u=new Array(t.length)).fill(1):u=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var c=!1,d={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l},h=0;h<d.dims;h++)c&&0!==(1<<h&s)&&d.numAddAxisAfterEllipsis++,1<<h&o&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);var f={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(py),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(my),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,f);for(var p=!0,m=!0,v=!0,g=[],y=[],b=0;b<e.length;++b){if(0===f.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(f.shrinkAxisMask&1<<b),w=e[b];if(-1!==w){var k=[f.beginMask&1<<b,f.endMask&1<<b],S=[f.strides[b]>0?0:-1,f.strides[b]>0?w:w-1];if(x&&f.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&1===f.strides[b];var T=!!(f.beginMask&1<<b&&f.endMask&1<<b);if(f.beginValid&&f.endValid){if(x){var E=f.begin[b]<0?w+f.begin[b]:f.begin[b];if(f.begin[b]=E,f.end[b]=f.begin[b]+1,E<0||E>=w)throw Error("slice index ".concat(f.begin[b]," of dimension ").concat(b," out of bounds."))}else f.begin[b]=ky(f.begin[b],0,f.strides[b],w,k,S),f.end[b]=ky(f.end[b],1,f.strides[b],w,k,S);var C=1===f.strides[b]&&0===f.begin[b]&&f.end[b]===w;p=p&&C,m=m&&(0===b&&1===f.strides[b]||C)}else p=p&&1===f.strides[b]&&T,m=m&&(0===b&&1===f.strides[b]||T);var _=void 0,M=!1;if(f.beginValid&&f.endValid?(_=f.end[b]-f.begin[b],M=!0):x?(_=1,M=!0):T&&w>=0&&(_=f.strides[b]<0?-w:w,M=!0),M){var A=void 0;A=0===_||_<0!==f.strides[b]<0?0:Math.trunc(_/f.strides[b])+(_%f.strides[b]!==0?1:0),g.push(A)}else g.push(-1)}else g.push(x?1:-1)}for(var I=0;I<f.finalShapeGatherIndices.length;++I){var N=f.finalShapeGatherIndices[I];N>=0?y.push(g[N]):N===py&&y.push(1)}var R=y.filter((function(e,t){return f.finalShapeGatherIndices[t]!==py}));return{finalShapeSparse:R,finalShape:y,isIdentity:p,sliceDim0:m,isSimpleSlice:v,begin:f.begin,end:f.end,strides:f.strides}}function ky(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var Sy=function(){function e(){M(this,e)}return(0,A.Z)(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),Ty=function(){function e(){M(this,e),this.classNameMap={}}return(0,A.Z)(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function Ey(e){bd(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),bd("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),bd(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Ty.register(e)}function Cy(){return vv}function _y(){return vv.memory()}function My(e,t){return vv.tidy(e,t)}function Ay(e){uv(e).forEach((function(e){return e.dispose()}))}function Iy(e){return vv.keep(e)}function Ny(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return vv.registerBackend(e,t,n)}function Ry(e){return vv.customGrad(e)}function Oy(e,t){if((Ld(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Ld(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Av(e,[],[],t)}!function(e){e}((function(e){th().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}));var Dy=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return Ay(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return function(e,t){bd(Bd(e),(function(){return"The f passed in variableGrads(f) must be a function"})),bd(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof rv})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],vv.registeredVariables)t.push(vv.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;t=t.filter((function(e){return e.trainable})),bd(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."}));var o=vv.gradients(e,t,null,!0),s=o.value,l=o.grads;bd(l.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),bd(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var u={};return t.forEach((function(e,t){null!=l[t]&&(u[e.name]=l[t])})),null!=a&&a.forEach((function(e){return u[e.name]=null})),{value:s,grads:u}}(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&Ay(this.iterations_)}},{key:"saveIterations",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:Oy(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Sy);Object.defineProperty(Dy,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Ly=_v({abs_:function(e){var t=Tv(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return vv.runKernel(Rh,n)}var r={x:t};return vv.runKernel(oh,r)}});var Py=_v({acos_:function(e){var t={x:Tv(e,"x","acos")};return vv.runKernel(sh,t)}});var Fy=_v({acosh_:function(e){var t={x:Tv(e,"x","acosh")};return vv.runKernel(lh,t)}});var jy=_v({add_:function(e,t){var n=Tv(e,"a","add"),r=Tv(t,"b","add"),a=sv(n,r),i=(0,U.Z)(a,2),o={a:n=i[0],b:r=i[1]};return vv.runKernel(uh,o)}});var zy=_v({addN_:function(e){bd(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),bd(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return Tv(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!Td(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return vv.runKernel(ch,r)}});var By=_v({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Tv(e,"x","all","bool")},a={axis:t,keepDims:n};return vv.runKernel(dh,r,a)}});var Uy=_v({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Tv(e,"x","any","bool")},a={axis:t,keepDims:n};return vv.runKernel(hh,r,a)}});var Wy=_v({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Tv(e,"x","argMax")},r={axis:t};return vv.runKernel(fh,n,r)}});var Vy=_v({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Tv(e,"x","argMin")},r={axis:t};return vv.runKernel(ph,n,r)}});var Zy=_v({asin_:function(e){var t={x:Tv(e,"x","asin")};return vv.runKernel(mh,t)}});var Hy=_v({asinh_:function(e){var t={x:Tv(e,"x","asinh")};return vv.runKernel(vh,t)}});var Gy=_v({atan_:function(e){var t={x:Tv(e,"x","atan")};return vv.runKernel(gh,t)}});var qy=_v({atan2_:function(e,t){var n=Tv(e,"a","atan2"),r=Tv(t,"b","atan2"),a=sv(n,r),i=(0,U.Z)(a,2),o={a:n=i[0],b:r=i[1]};return vv.runKernel(bh,o)}});var Xy=_v({atanh_:function(e){var t={x:Tv(e,"x","atanh")};return vv.runKernel(yh,t)}});function Yy(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3];return Jy(e,[].concat((0,_.Z)(t),[o]),n,i,r,null,null,sb(a))}function Ky(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",l=tb(t),u=(0,U.Z)(l,2),c=u[0],d=u[1];if("channelsLast"===s)o=[c,d,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[c,d,e[1],e[1]]}return Jy(e,o,n,r,a,i,!1,s)}function $y(e,t,n,r,a,i){var o,s,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",u=nb(t),c=(0,U.Z)(u,3),d=c[0],h=c[1],f=c[2];if("NDHWC"===l)s="channelsLast",o=[d,h,f,e[4],e[4]];else{if("NCDHW"!==l)throw new Error("Unknown dataFormat ".concat(l));s="channelsFirst",o=[d,h,f,e[1],e[1]]}return Qy(e,o,n,r,a,!1,s,i)}function Jy(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",l=-1,u=-1,c=-1,d=-1;if("channelsLast"===s){var h=(0,U.Z)(e,4);l=h[0],u=h[1],c=h[2],d=h[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var f=(0,U.Z)(e,4);l=f[0],d=f[1],u=f[2],c=f[3]}var p,m=(0,U.Z)(t,4),v=m[0],g=m[1],y=m[3],b=tb(n),x=(0,U.Z)(b,2),w=x[0],k=x[1],S=tb(r),T=(0,U.Z)(S,2),E=T[0],C=T[1],_=rb(v,E),M=rb(g,C),A=function(e,t,n,r,a,i,o,s,l){var u,c,d;if("number"===typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,a){null==r&&(r=eb(e,t,n));var i=e[0],o=e[1],s=ab((i-t+2*r)/n+1,a),l=ab((o-t+2*r)/n+1,a);return[s,l]}([t,n],i,r,e,s);c=h[0],d=h[1]}else if("same"===e){c=Math.ceil(t/r),d=Math.ceil(n/a);var f=Math.max(0,(c-1)*r+i-t),p=Math.max(0,(d-1)*a+o-n),m=Math.floor(f/2),v=f-m,g=Math.floor(p/2);u={top:m,bottom:v,left:g,right:p-g,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),d=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===l?e[1][0]:e[2][0],b="channelsLast"===l?e[1][1]:e[2][1],x="channelsLast"===l?e[2][0]:e[3][0],w="channelsLast"===l?e[2][1]:e[3][1];u={top:y,bottom:b,left:x,right:w,type:0===y&&0===b&&0===x&&0===w?"VALID":"EXPLICIT"},c=ab((t-i+y+b)/r+1,s),d=ab((n-o+x+w)/a+1,s)}return{padInfo:u,outHeight:c,outWidth:d}}(a,u,c,w,k,_,M,i,s),I=A.padInfo,N=A.outHeight,R=A.outWidth,O=o?y*d:y;return"channelsFirst"===s?p=[l,O,N,R]:"channelsLast"===s&&(p=[l,N,R,O]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:c,inChannels:d,outHeight:N,outWidth:R,outChannels:O,padInfo:I,strideHeight:w,strideWidth:k,filterHeight:v,filterWidth:g,effectiveFilterHeight:_,effectiveFilterWidth:M,dilationHeight:E,dilationWidth:C,inShape:e,outShape:p,filterShape:t}}function Qy(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,l=-1,u=-1,c=-1,d=-1,h=-1;if("channelsLast"===o){var f=(0,U.Z)(e,5);l=f[0],u=f[1],c=f[2],d=f[3],h=f[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var p=(0,U.Z)(e,5);l=p[0],h=p[1],u=p[2],c=p[3],d=p[4]}var m,v=(0,U.Z)(t,5),g=v[0],y=v[1],b=v[2],x=v[4],w=nb(n),k=(0,U.Z)(w,3),S=k[0],T=k[1],E=k[2],C=nb(r),_=(0,U.Z)(C,3),M=_[0],A=_[1],I=_[2],N=rb(g,M),R=rb(y,A),O=rb(b,I),D=function(e,t,n,r,a,i,o,s,l,u,c){var d,h,f,p;if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,i){null==a&&(a=eb(e,t,r));var o=e[0],s=e[1],l=e[2],u=ab((o-t+2*a)/r+1,i),c=ab((s-t+2*a)/r+1,i),d=ab((l-t+2*a)/r+1,i);return[u,c,d,n]}([t,n,r,1],s,1,a,e,c);h=m[0],f=m[1],p=m[2]}else if("same"===e){var v=((h=Math.ceil(t/a))-1)*a+s-t,g=((f=Math.ceil(n/i))-1)*i+l-n,y=((p=Math.ceil(r/o))-1)*o+u-r,b=Math.floor(v/2),x=v-b,w=Math.floor(g/2),k=g-w,S=Math.floor(y/2);d={top:w,bottom:k,left:S,right:y-S,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-s+1)/a),f=Math.ceil((n-l+1)/i),p=Math.ceil((r-u+1)/o)}return{padInfo:d,outDepth:h,outHeight:f,outWidth:p}}(a,u,c,d,S,T,E,N,R,O,s),L=D.padInfo,P=D.outDepth,F=D.outHeight,j=D.outWidth,z=i?x*h:x;return"channelsFirst"===o?m=[l,z,P,F,j]:"channelsLast"===o&&(m=[l,P,F,j,z]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:d,inChannels:h,outDepth:P,outHeight:F,outWidth:j,outChannels:z,padInfo:L,strideDepth:S,strideHeight:T,strideWidth:E,filterDepth:g,filterHeight:y,filterWidth:b,effectiveFilterDepth:N,effectiveFilterHeight:R,effectiveFilterWidth:O,dilationDepth:M,dilationHeight:A,dilationWidth:I,inShape:e,outShape:m,filterShape:t}}function eb(e,t,n){var r=rb(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function tb(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function nb(e){return"number"===typeof e?[e,e,e]:e}function rb(e,t){return t<=1?e:e+(e-1)*(t-1)}function ab(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function ib(e){var t=tb(e),n=(0,U.Z)(t,3),r=n[0],a=n[1],i=n[2];return 1===r&&1===a&&1===i}function ob(e,t){return ib(e)||ib(t)}function sb(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function lb(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)bd(Ed(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){bd(Ed(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var ub=_v({reshape_:function(e,t){var n={x:Tv(e,"x","reshape","string_or_numeric")},r={shape:t};return vv.runKernel(hp,n,r)}});var cb=_v({avgPool_:function(e,t,n,r,a){var i=Tv(e,"x","avgPool","float32");bd(ob(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=ub(i,[1,i.shape[0],i.shape[1],i.shape[2]])),bd(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),lb("avgPool",r,a);var l={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=vv.runKernel(xh,l,u);return c=jg(c,i.dtype),s?ub(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var db=_v({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Tv(e,"x","avgPool3d","float32"),s=o,l=!1;4===o.rank&&(l=!0,s=ub(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),bd(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),bd("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),lb("avgPool3d",r,a);var u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=vv.runKernel(kh,u,c);return d=jg(d,s.dtype),l?ub(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var hb=_v({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;bd(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Ev(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return zg(n[0]);var r=n,a={axis:t};return vv.runKernel(Oh,r,a)}});var fb=_v({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Tv(e,"a","matMul"),i=Tv(t,"b","matMul"),o=sv(a,i),s=(0,U.Z)(o,2),l={a:a=s[0],b:i=s[1]},u={transposeA:n,transposeB:r};return vv.runKernel(Th,l,u)}});var pb=_v({mul_:function(e,t){var n=Tv(e,"a","mul"),r=Tv(t,"b","mul"),a=sv(n,r),i=(0,U.Z)(a,2),o={a:n=i[0],b:r=i[1]};return vv.runKernel(Yf,o)}});var mb=_v({sigmoid_:function(e){var t={x:Tv(e,"x","sigmoid","float32")};return vv.runKernel(Mp,t)}});var vb=_v({slice_:function(e,t,n){var r=Tv(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return vv.runKernel(Tp,a,i)}});var gb=_v({tanh_:function(e){var t={x:Tv(e,"x","tanh","float32")};return vv.runKernel(Xp,t)}});var yb=_v({basicLSTMCell_:function(e,t,n,r,a,i){var o=Tv(e,"forgetBias","basicLSTMCell"),s=Tv(t,"lstmKernel","basicLSTMCell"),l=Tv(n,"lstmBias","basicLSTMCell"),u=Tv(r,"data","basicLSTMCell"),c=Tv(a,"c","basicLSTMCell"),d=Tv(i,"h","basicLSTMCell"),h=hb([u,d],1),f=fb(h,s),p=jy(f,l),m=p.shape[0],v=p.shape[1]/4,g=[m,v],y=vb(p,[0,0],g),b=vb(p,[0,v],g),x=vb(p,[0,2*v],g),w=vb(p,[0,3*v],g),k=jy(pb(mb(y),gb(b)),pb(c,mb(jy(o,x))));return[k,pb(gb(k),mb(w))]}});var bb=_v({batchToSpaceND_:function(e,t,n){var r=Tv(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));bd(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),bd(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),bd(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return vv.runKernel(Eh,i,o)}});var xb=_v({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,l=Tv(e,"x","batchNorm"),u=Tv(t,"mean","batchNorm"),c=Tv(n,"variance","batchNorm");null!=a&&(o=Tv(a,"scale","batchNorm")),null!=r&&(s=Tv(r,"offset","batchNorm")),bd(u.rank===c.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),bd(null==s||u.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),bd(null==o||u.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var d=function(e){return 0===e.rank||1===e.rank?ub(e,[1,1,1,e.size]):2===e.rank?ub(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?ub(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(l),h={x:d,scale:o,offset:s,mean:u,variance:c},f={varianceEpsilon:i},p=vv.runKernel(pf,h,f);return ub(p,l.shape)}});var wb=_v({batchNorm2d_:function(e,t,n,r,a,i){var o,s,l=Tv(e,"x","batchNorm"),u=Tv(t,"mean","batchNorm"),c=Tv(n,"variance","batchNorm");return null!=a&&(o=Tv(a,"scale","batchNorm")),null!=r&&(s=Tv(r,"offset","batchNorm")),bd(2===l.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(l.rank,".")})),bd(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(u.rank,".")})),bd(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&bd(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&bd(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),xb(l,u,c,s,o,i)}});var kb=_v({batchNorm3d_:function(e,t,n,r,a,i){var o,s,l=Tv(e,"x","batchNorm"),u=Tv(t,"mean","batchNorm"),c=Tv(n,"variance","batchNorm");return null!=a&&(o=Tv(a,"scale","batchNorm")),null!=r&&(s=Tv(r,"offset","batchNorm")),bd(3===l.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(l.rank,".")})),bd(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(u.rank,".")})),bd(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&bd(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&bd(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),xb(l,u,c,s,o,i)}});var Sb=_v({batchNorm4d_:function(e,t,n,r,a,i){var o,s,l=Tv(e,"x","batchNorm"),u=Tv(t,"mean","batchNorm"),c=Tv(n,"variance","batchNorm");return null!=a&&(o=Tv(a,"scale","batchNorm")),null!=r&&(s=Tv(r,"offset","batchNorm")),bd(4===l.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(l.rank,".")})),bd(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(u.rank,".")})),bd(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&bd(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&bd(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),xb(l,u,c,s,o,i)}});var Tb=_v({bincount_:function(e,t,n){var r=Tv(e,"x","bincount"),a=Tv(t,"weights","bincount");bd("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),bd(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),bd(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return vv.runKernel(Ch,i,o)}});var Eb=_v({broadcastArgs_:function(e,t){var n=Tv(e,"s0","broadcastArgs","int32"),r=Tv(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return vv.runKernel(_h,a)}});var Cb=_v({broadcastTo_:function(e,t){var n=Tv(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=ub(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var l=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===l.length)return zg(n);var u={x:n},c={reps:o};return vv.runKernel(Yp,u,c)}});var _b=_v({ceil_:function(e){var t={x:Tv(e,"x","ceil","float32")};return vv.runKernel(Ah,t)}});var Mb=_v({clipByValue_:function(e,t,n){var r=Tv(e,"x","clipByValue");bd(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var a={x:r},i={clipValueMin:t,clipValueMax:n};return vv.runKernel(Ih,a,i)}});var Ab=_v({concat1d_:function(e){return hb(e,0)}});var Ib=_v({concat2d_:function(e,t){return hb(e,t)}});var Nb=_v({concat3d_:function(e,t){return hb(e,t)}});var Rb=_v({concat4d_:function(e,t){return hb(e,t)}});var Ob=_v({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Tv(e,"x","conv2d","float32"),l=Tv(t,"filter","conv2d","float32"),u=s,c=!1;3===s.rank&&(c=!0,u=ub(s,[1,s.shape[0],s.shape[1],s.shape[2]])),bd(4===u.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(u.rank,".")})),bd(4===l.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(l.rank,".")})),lb("conv2d",r,o);var d="NHWC"===a?u.shape[3]:u.shape[1];bd(d===l.shape[2],(function(){return"Error in conv2d: depth of input (".concat(d,") must match ")+"input depth for filter ".concat(l.shape[2],".")})),bd(ob(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}));var h={x:u,filter:l},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=vv.runKernel(Dh,h,f);return c?ub(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Db=_v({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=Tv(e,"x","conv1d"),l=Tv(t,"filter","conv1d"),u=s,c=!1;2===s.rank&&(c=!0,u=ub(s,[1,s.shape[0],s.shape[1]])),bd(3===u.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(u.rank,".")})),bd(3===l.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(l.rank,".")})),lb("conv1d",r,o),bd(u.shape[2]===l.shape[1],(function(){return"Error in conv1d: depth of input (".concat(u.shape[2],") must match ")+"input depth for filter ".concat(l.shape[1],".")})),bd(ob(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),bd("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var d=ub(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=ub(u,[u.shape[0],1,u.shape[1],u.shape[2]]),f=Ob(h,d,[1,n],r,"NHWC",[1,i],o);return ub(f,c?[f.shape[2],f.shape[3]]:[f.shape[0],f.shape[2],f.shape[3]])}});var Lb=_v({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;bd(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,l=t,u=!1;3===t.rank&&(u=!0,l=ub(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),bd(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),bd(4===l.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(l.rank)})),bd(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var c="NHWC"===i?s[3]:s[1],d="NHWC"===i?l.shape[3]:l.shape[1];bd(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),bd(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),lb("conv2dDerInput",a,o);var h={dy:l,filter:n},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},p=vv.runKernel(Ph,h,f);return u?ub(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Pb=_v({conv2dTranspose_:function(e,t,n,r,a,i){var o=Tv(e,"x","conv2dTranspose"),s=Tv(t,"filter","conv2dTranspose");return Lb(n,o,s,r,a,"NHWC",i)}});var Fb=_v({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=Tv(e,"x","conv3d"),s=Tv(t,"filter","conv3d"),l=o,u=!1;4===o.rank&&(u=!0,l=ub(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),bd(5===l.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(l.rank,".")})),bd(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),bd(l.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(l.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),bd(ob(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),bd("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var c={x:l,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:i},h=vv.runKernel(Fh,c,d);return u?ub(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var jb=_v({conv3DBackpropInput_:function(e,t,n,r,a){bd(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=ub(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var l=i[4],u=o.shape[4];bd(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),bd(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),bd(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),bd(l===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),bd(u===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(u,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var c={dy:o,filter:n},d={pad:a,strides:r,inputShape:i},h=vv.runKernel(zh,c,d);return s?ub(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var zb=_v({conv3dTranspose_:function(e,t,n,r,a){var i=Tv(e,"x","conv3dTranspose"),o=Tv(t,"filter","conv3dTranspose");return jb(n,i,o,r,a)}});var Bb=_v({cos_:function(e){var t={x:Tv(e,"x","cos","float32")};return vv.runKernel(Bh,t)}});var Ub=_v({cosh_:function(e){var t={x:Tv(e,"x","cosh","float32")};return vv.runKernel(Uh,t)}});var Wb=_v({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:Tv(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return vv.runKernel(Wh,a,i)}});var Vb=_v({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Tv(e,"x","denseBincount"),i=Tv(t,"weights","denseBincount");bd("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),bd(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),bd(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),bd(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")}));var o={x:a,weights:i},s={size:n,binaryOutput:r};return vv.runKernel(Zh,o,s)}});var Zb=_v({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=Tv(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];bd(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),bd(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),bd(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),bd(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},l={blockSize:t,dataFormat:n};return vv.runKernel(Hh,s,l)}});var Hb=_v({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Tv(e,"x","depthwiseConv2d","float32"),l=Tv(t,"filter","depthwiseConv2d","float32"),u=s,c=!1;3===s.rank&&(c=!0,u=ub(s,[1,s.shape[0],s.shape[1],s.shape[2]])),bd(4===u.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(u.rank,".")})),bd(4===l.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(l.rank,".")})),bd(u.shape[3]===l.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(u.shape[3],") must match the inChannels dimension in ")+"filter ".concat(l.shape[2],".")})),lb("depthwiseConv2d",r,o);var d={x:u,filter:l},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},f=vv.runKernel(Gh,d,h);return c?ub(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var Gb=_v({diag_:function(e){var t={x:Tv(e,"x","diag")};return vv.runKernel(Yh,t)}});var qb=_v({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=Tv(e,"x","dilation2d"),s=Tv(t,"filter","dilation2d");bd(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")})),bd(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),bd("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)}));var l=o,u=!1;3===o.rank&&(l=ub(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0);var c={x:l,filter:s},d={strides:n,pad:r,dilations:a},h=vv.runKernel(Kh,c,d);return u?ub(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var Xb=_v({floorDiv_:function(e,t){var n=Tv(e,"a","floorDiv"),r=Tv(t,"b","floorDiv"),a=sv(n,r),i=(0,U.Z)(a,2),o={a:n=i[0],b:r=i[1]};return vv.runKernel(ff,o)}});var Yb=_v({div_:function(e,t){var n=Tv(e,"a","div"),r=Tv(t,"b","div"),a=sv(n,r),i=(0,U.Z)(a,2);if(n=i[0],r=i[1],"int32"===n.dtype&&"int32"===r.dtype)return Xb(n,r);var o={a:n,b:r};return vv.runKernel(Qh,o,{})}});var Kb=_v({equal_:function(e,t){var n=Tv(e,"a","equal","string_or_numeric"),r=Tv(t,"b","equal","string_or_numeric"),a=sv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],cy(n.shape,r.shape);var o={a:n,b:r};return vv.runKernel(af,o)}});var $b=_v({where_:function(e,t,n){var r=Tv(t,"a","where"),a=Tv(n,"b","where"),i=Tv(e,"condition","where","bool"),o=cy(cy(i.shape,r.shape),a.shape),s={condition:Cb(i,o),t:Cb(r,o),e:Cb(a,o)};return vv.runKernel(kp,s)}});var Jb=_v({zerosLike_:function(e){var t={x:Tv(e,"x","zerosLike")};return vv.runKernel(nm,t)}});var Qb=_v({divNoNan_:function(e,t){var n=Tv(e,"a","div"),r=Tv(t,"b","div"),a=sv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1];var o=Yb(n,r),s=Jb(o),l=Kb(r,s);return $b(l,s,o)}});var ex=_v({dot_:function(e,t){var n=Tv(e,"t1","dot"),r=Tv(t,"t2","dot");bd((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(bd(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=ub(n,[1,-1]),s=ub(r,[-1,1]),l=fb(o,s);return ub(l,[])}if(1===n.rank&&2===r.rank){var u=ub(n,[1,-1]),c=ub(r,[r.shape[0],r.shape[1]]),d=fb(u,c);return ub(d,[d.size])}if(2===n.rank&&1===r.rank){var h=ub(r,[-1,1]),f=fb(n,h);return ub(f,[f.size])}var p=ub(r,[r.shape[0],r.shape[1]]);return fb(n,p)}});var tx=_v({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return Tv(e,"tensors".concat(t),"einsum")})),i={equation:e};return vv.runKernel(ef,a,i)}});var nx=_v({elu_:function(e){var t={x:Tv(e,"x","elu","float32")};return vv.runKernel(tf,t)}});var rx=_v({erf_:function(e){var t=Tv(e,"x","erf");bd("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=jg(t,"float32"));var n={x:t};return vv.runKernel(rf,n)}});var ax=_v({exp_:function(e){var t={x:Tv(e,"x","exp")};return vv.runKernel(of,t)}});var ix=_v({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Tv(e,"x","expandDims","string_or_numeric");bd(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return vv.runKernel(sf,r,a)}});var ox=_v({expm1_:function(e){var t={x:Tv(e,"x","expm1")};return vv.runKernel(lf,t)}});var sx=_v({tile_:function(e,t){var n=Tv(e,"x","tile","string_or_numeric");bd(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return vv.runKernel(Yp,r,a)}});var lx=_v({eye_:function(e,t,n){null==t&&(t=e);for(var r=Fg([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),a=e<=t?e:t,i=0;i<a;++i)r.set(1,i,i);var o=ub(r.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return sx(ix(o,0),[n[0],1,1]);if(2===n.length)return sx(ix(ix(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return sx(ix(ix(ix(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});function ux(e,t,n){var r={shape:e,value:t,dtype:n};return vv.runKernel(cf,{},r)}var cx=_v({floor_:function(e){var t={x:Tv(e,"x","floor","float32")};return vv.runKernel(hf,t)}});var dx=_v({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a={x:Tv(e,"x","gather"),indices:Tv(t,"indices","gather","int32")},i={axis:n,batchDims:r};return vv.runKernel(mf,a,i)}});var hx=_v({greater_:function(e,t){var n=Tv(e,"a","greater","string_or_numeric"),r=Tv(t,"b","greater","string_or_numeric"),a=sv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],cy(n.shape,r.shape);var o={a:n,b:r};return vv.runKernel(gf,o)}});var fx=_v({greaterEqual_:function(e,t){var n=Tv(e,"a","greaterEqual","string_or_numeric"),r=Tv(t,"b","greaterEqual","string_or_numeric"),a=sv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],cy(n.shape,r.shape);var o={a:n,b:r};return vv.runKernel(yf,o)}});var px=_v({imag_:function(e){var t={input:Tv(e,"input","imag")};return vv.runKernel(wf,t)}});var mx=_v({isFinite_:function(e){var t={x:Tv(e,"x","isFinite")};return vv.runKernel(kf,t)}});var vx=_v({isInf_:function(e){var t={x:Tv(e,"x","isInf")};return vv.runKernel(Sf,t)}});var gx=_v({isNaN_:function(e){var t={x:Tv(e,"x","isNaN")};return vv.runKernel(Tf,t)}});var yx=_v({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:Tv(e,"x","leakyRelu")},r={alpha:t};return vv.runKernel(Ef,n,r)}});var bx=_v({less_:function(e,t){var n=Tv(e,"a","less","string_or_numeric"),r=Tv(t,"b","less","string_or_numeric"),a=sv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],cy(n.shape,r.shape);var o={a:n,b:r};return vv.runKernel(Cf,o)}});var xx=_v({lessEqual_:function(e,t){var n=Tv(e,"a","lessEqual","string_or_numeric"),r=Tv(t,"b","lessEqual","string_or_numeric"),a=sv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],cy(n.shape,r.shape);var o={a:n,b:r};return vv.runKernel(_f,o)}});function wx(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return vv.runKernel(Mf,{},r)}var kx=_v({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=Tv(e,"x","localResponseNormalization");bd(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),bd(Ed(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=ub(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var l={x:o},u={depthRadius:t,bias:n,alpha:r,beta:a},c=vv.runKernel(Df,l,u);return s?ub(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Sx=_v({log_:function(e){var t={x:Tv(e,"x","log","float32")};return vv.runKernel(Af,t)}});var Tx=_v({log1p_:function(e){var t={x:Tv(e,"x","log1p")};return vv.runKernel(If,t)}});var Ex=_v({neg_:function(e){var t={x:Tv(e,"x","neg")};return vv.runKernel(Kf,t)}});var Cx=_v({softplus_:function(e){var t={x:Tv(e,"x","softplus")};return vv.runKernel(Ap,t)}});var _x=_v({logSigmoid_:function(e){var t=Tv(e,"x","logSigmoid"),n=Ry((function(e){return{value:Ex(Cx(Ex(e))),gradFunc:function(t){return pb(t,mb(Ex(e)))}}}));return n(t)}});var Mx=_v({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Tv(e,"x","max")},a={reductionIndices:t,keepDims:n};return vv.runKernel(Pf,r,a)}});var Ax=_v({sub_:function(e,t){var n=Tv(e,"a","sub"),r=Tv(t,"b","sub"),a=sv(n,r),i=(0,U.Z)(a,2),o={a:n=i[0],b:r=i[1]};return vv.runKernel(Gp,o)}});var Ix=_v({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Tv(e,"x","sum");"bool"===r.dtype&&(r=jg(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return vv.runKernel(Np,a,i)}});var Nx=_v({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Tv(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=Ry((function(e,n){var r=Mx(e,t,!0),a=Ax(e,r),i=Ax(jg(a,"float32"),Sx(Ix(ax(a),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var r=(0,U.Z)(n,1)[0],a=ax(r);return Ax(e,pb(Ix(e,t,!0),a))}}}));return r(n)}});function Rx(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Ox(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function Dx(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}(e,t.map((function(e){return 1})),t)}function Lx(e,t,n){bd(Rx(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function Px(e,t){if(Rx(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Fx(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function jx(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var zx=_v({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Tv(e,"x","logSumExp"),a=Id(t,r.shape),i=Mx(r,a,!0),o=Ax(r,i),s=ax(o),l=Ix(s,a),u=Sx(l),c=jy(ub(i,u.shape),u);if(n){var d=Dx(c.shape,a);return ub(c,d)}return c}});var Bx=_v({logicalAnd_:function(e,t){var n=Tv(e,"a","logicalAnd","bool"),r=Tv(t,"b","logicalAnd","bool");cy(n.shape,r.shape);var a={a:n,b:r};return vv.runKernel(Nf,a)}});var Ux=_v({logicalNot_:function(e){var t={x:Tv(e,"x","logicalNot","bool")};return vv.runKernel(Rf,t)}});var Wx=_v({logicalOr_:function(e,t){var n=Tv(e,"a","logicalOr","bool"),r=Tv(t,"b","logicalOr","bool");cy(n.shape,r.shape);var a={a:n,b:r};return vv.runKernel(Of,a)}});var Vx=_v({logicalXor_:function(e,t){var n=Tv(e,"a","logicalXor","bool"),r=Tv(t,"b","logicalXor","bool");return cy(n.shape,r.shape),Bx(Wx(e,t),Ux(Bx(e,t)))}});var Zx=_v({maxPool_:function(e,t,n,r,a){var i=Tv(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=ub(i,[1,i.shape[0],i.shape[1],i.shape[2]])),bd(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),bd(ob(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),lb("maxPool",r,a);var l={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=vv.runKernel(jf,l,u);return s?ub(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Hx=_v({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Tv(e,"x","maxPool3d"),s=o,l=!1;4===o.rank&&(l=!0,s=ub(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),bd(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),bd("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),lb("maxPool3d",r,a);var u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=vv.runKernel(Bf,u,c);return l?ub(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var Gx=_v({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={x:Tv(e,"x","maxPoolWithArgmax")},o={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},s=vv.runKernel(Wf,i,o);return{result:s[0],indexes:s[1]}}});var qx=_v({maximum_:function(e,t){var n=Tv(e,"a","maximum"),r=Tv(t,"b","maximum"),a=sv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],"bool"===n.dtype&&(n=jg(n,"int32"),r=jg(r,"int32")),cy(n.shape,r.shape);var o={a:n,b:r};return vv.runKernel(Ff,o)}});var Xx=_v({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Tv(e,"x","mean")},a={axis:t,keepDims:n};return vv.runKernel(Vf,r,a)}});function Yx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=Yx(e,"float32"),r=Yx(e,"float32");return Mv(n,r)}var a=Gd(Sd(e),t);return vv.makeTensor(a,e,t)}function Kx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=Kx(e,"float32"),r=Yx(e,"float32");return Mv(n,r)}var a=Hd(Sd(e),t);return vv.makeTensor(a,e,t)}function $x(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).indexing,r=void 0===n?"xy":n;if("xy"!==r&&"ij"!==r)throw new TypeError("".concat(r," is not a valid third argument to meshgrid"));if(void 0===e)return[];var a=Tv(e,"x","meshgrid",e instanceof Km?e.dtype:"float32");if(void 0===t)return[a];var i=Tv(t,"y","meshgrid",t instanceof Km?t.dtype:"float32"),o=Sd(a.shape),s=Sd(i.shape);return"xy"===r?(a=ub(a,[1,-1]),i=ub(i,[-1,1]),[fb(Kx([s,1],a.dtype),a),fb(i,Kx([1,o],i.dtype))]):(a=ub(a,[-1,1]),i=ub(i,[1,-1]),[fb(a,Kx([1,s],a.dtype)),fb(Kx([o,1],i.dtype),i)])}var Jx=_v({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Tv(e,"x","min")},a={axis:t,keepDims:n};return vv.runKernel(Zf,r,a)}});var Qx=_v({minimum_:function(e,t){var n=Tv(e,"a","minimum"),r=Tv(t,"b","minimum"),a=sv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],"bool"===n.dtype&&(n=jg(n,"int32"),r=jg(r,"int32")),cy(n.shape,r.shape);var o={a:n,b:r};return vv.runKernel(Hf,o)}});var ew=_v({mirrorPad_:function(e,t,n){bd("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=Tv(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");bd(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){bd(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),bd(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},l={x:r};return vv.runKernel(Gf,l,s)}});var tw=_v({mod_:function(e,t){var n=Tv(e,"a","mod"),r=Tv(t,"b","mod"),a=sv(n,r),i=(0,U.Z)(a,2),o={a:n=i[0],b:r=i[1]};return vv.runKernel(qf,o)}});var nw=_v({square_:function(e){var t=Tv(e,"x","square");return vv.runKernel("Square",{x:t},{})}});var rw=_v({moments_:function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Id(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=Tv(e,"x","moments")).shape),r=Xx(e,n,t),a=r.shape;t||(a=Dx(r.shape,n));var i=nw(Ax(jg(e,"float32"),ub(r,a)));return{mean:r,variance:Xx(i,n,t)}}});var aw=_v({multiRNNCell_:function(e,t,n,r){for(var a=Tv(t,"data","multiRNNCell"),i=Ev(n,"c","multiRNNCell"),o=Ev(r,"h","multiRNNCell"),s=a,l=[],u=0;u<e.length;u++){var c=e[u](s,i[u],o[u]);l.push(c[0]),l.push(c[1]),s=c[1]}for(var d=[],h=[],f=0;f<l.length;f+=2)d.push(l[f]),h.push(l[f+1]);return[d,h]}});var iw=_v({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Tv(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s={logits:1===o?ub(a,[1,-1]):a},l={numSamples:t,seed:n,normalized:r},u=vv.runKernel(Xf,s,l);return 1===o?ub(u,[u.size]):u}});var ow=_v({notEqual_:function(e,t){var n=Tv(e,"a","notEqual","string_or_numeric"),r=Tv(t,"b","notEqual","string_or_numeric"),a=sv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],cy(n.shape,r.shape);var o={a:n,b:r};return vv.runKernel($f,o)}});var sw=_v({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a={indices:Tv(e,"indices","oneHot","int32")},i={depth:t,onValue:n,offValue:r};return vv.runKernel(np,a,i)}});var lw=_v({onesLike_:function(e){var t={x:Tv(e,"x","onesLike")};return vv.runKernel(tp,t)}});var uw=_v({outerProduct_:function(e,t){var n=Tv(e,"v1","outerProduct"),r=Tv(t,"v2","outerProduct");bd(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=ub(n,[-1,1]),i=ub(r,[1,-1]);return fb(a,i)}});var cw=_v({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Tv(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return vv.runKernel(ap,i,a)}});var dw=_v({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return bd(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),cw(e,[t],n)}});var hw=_v({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return bd(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),cw(e,t,n)}});var fw=_v({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return bd(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),cw(e,t,n)}});var pw=_v({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return bd(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),cw(e,t,n)}});var mw=_v({spaceToBatchND_:function(e,t,n){var r=Tv(e,"x","spaceToBatchND");bd(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),bd(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),bd(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return vv.runKernel(Rp,a,i)}});var vw=_v({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var s=Tv(e,"x","maxPool"),l=s,u=!1;3===s.rank&&(u=!0,l=ub(s,[1,s.shape[0],s.shape[1],s.shape[2]])),bd(ob(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var c,d=Ky(l.shape,t,i,a,r),h=[d.dilationHeight,d.dilationWidth];c="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})),r=n.map((function(e){return e-1})),a=r.map((function(e){return Math.floor(e/2)})),i=r.map((function(e,t){return e-a[t]}));return r.map((function(e,t){return[a[t],i[t]]}))}([d.filterHeight,d.filterWidth],h):[[0,0],[0,0]];var f=1===h[0]&&1===h[1],p=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),l=t.map((function(e,t){return[r[t],s[t]]})),u=t.map((function(e,t){return[0,o[t]]}));return[l,u]}([d.inHeight,d.inWidth],h,c),m=(0,U.Z)(p,2),v=m[0],g=m[1],y=f?r:"valid",b=f?l:mw(l,h,v),x=("avg"===n?function(){return cb(b,t,i,y,o)}:function(){return Zx(b,t,i,y,o)})(),w=f?x:bb(x,h,g);return u?ub(w,[w.shape[1],w.shape[2],w.shape[3]]):w}});var gw=_v({pow_:function(e,t){var n=Tv(e,"base","pow"),r=Tv(t,"exp","pow"),a=sv(n,r),i=(0,U.Z)(a,2),o={a:n=i[0],b:r=i[1]};return vv.runKernel(ip,o)}});var yw=_v({prelu_:function(e,t){var n={x:Tv(e,"x","prelu"),alpha:Tv(t,"alpha","prelu")};return vv.runKernel(op,n)}});var bw=_v({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Tv(e,"x","prod");"bool"===r.dtype&&(r=jg(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return vv.runKernel(sp,a,i)}});var xw=_v({rand_:function(e,t,n){var r=Sd(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return vv.makeTensor(a,e,n)}}),ww=n(6699),kw=function(){function e(t,n,r,a,i){M(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=ww.alea(o.toString())}return(0,A.Z)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),Sw=function(){function e(t,n,r,a){M(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=ww.alea(i.toString()),this.randn=new kw(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return(0,A.Z)(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),Tw=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(M(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=ww.alea(i)}return(0,A.Z)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var Ew=_v({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new Sw(t,n,r,a),o=Fg(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var Cw=_v({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new kw(t,n,r,!1,a),o=Fg(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var _w=_v({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>4?arguments[4]:void 0,a=Fg(e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),i=new Tw(t,n,null,r),o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}});function Mw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return vv.runKernel(lp,{},a)}var Aw=_v({real_:function(e){var t={input:Tv(e,"input","real")};return vv.runKernel(up,t)}});var Iw=_v({reciprocal_:function(e){var t={x:Tv(e,"x","reciprocal")};return vv.runKernel(cp,t)}});var Nw=_v({relu_:function(e){var t={x:Tv(e,"x","relu")};return vv.runKernel(dp,t)}});var Rw=_v({relu6_:function(e){var t={x:Tv(e,"x","relu6")};return vv.runKernel(gp,t)}});var Ow=_v({reverse_:function(e,t){var n={x:Tv(e,"x","reverse")},r={dims:t};return vv.runKernel(yp,n,r)}});var Dw=_v({reverse1d_:function(e){var t=Tv(e,"x","reverse");return bd(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),Ow(t,0)}});var Lw=_v({reverse2d_:function(e,t){var n=Tv(e,"x","reverse");return bd(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),Ow(n,t)}});var Pw=_v({reverse3d_:function(e,t){var n=Tv(e,"x","reverse");return bd(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),Ow(n,t)}});var Fw=_v({reverse4d_:function(e,t){var n=Tv(e,"x","reverse");return bd(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),Ow(n,t)}});var jw=_v({round_:function(e){var t={x:Tv(e,"x","round")};return vv.runKernel(bp,t)}});var zw=_v({rsqrt_:function(e){var t={x:Tv(e,"x","rsqrt","float32")};return vv.runKernel(xp,t)}});var Bw=_v({selu_:function(e){var t={x:Tv(e,"x","selu")};return vv.runKernel(Sp,t)}});var Uw=_v({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=Tv(e,"x","separableConv2d"),l=Tv(t,"depthwiseFilter","separableConv2d"),u=Tv(n,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(3===s.rank&&(d=!0,c=ub(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");bd(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),bd(4===l.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(l.rank,".")})),bd(4===u.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(l.rank,".")})),bd(1===u.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(u.shape[0],".")})),bd(1===u.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(u.shape[1],".")}));var h=l.shape[2],f=l.shape[3];bd(u.shape[2]===h*f,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(h*f,", ")+"but got ".concat(u.shape[2],".")}));var p=Hb(c,l,r,a,o,i),m=Ob(p,u,1,"valid",o);return d?ub(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});function Ww(){return Ww=Vn(Un().mark((function e(t,n){var r,a,i,o,s,l,u,c,d,h,f;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Tv(t,"x","setdiff1d"),a=Tv(n,"y","setdiff1d"),bd(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),bd(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),bd(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return i=e.sent,e.next=10,a.data();case 10:for(o=e.sent,s=new Set(o),l=0,u=0;u<i.length;u++)s.has(i[u])||l++;for(c=new qm([l],r.dtype),d=new qm([l],"int32"),h=0,f=0;h<i.length;h++)s.has(i[h])||(c.values[f]=i[h],d.values[f]=h,f++);return e.abrupt("return",[c.toTensor(),d.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),Ww.apply(this,arguments)}var Vw=function(e,t){return Ww.apply(this,arguments)};var Zw=_v({sign_:function(e){var t={x:Tv(e,"x","sign")};return vv.runKernel(_p,t)}});var Hw=_v({sin_:function(e){var t={x:Tv(e,"x","sin","float32")};return vv.runKernel(Ep,t)}});var Gw=_v({sinh_:function(e){var t={x:Tv(e,"x","sinh")};return vv.runKernel(Cp,t)}});var qw=_v({slice1d_:function(e,t,n){var r=Tv(e,"x","slice1d");return bd(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),vb(r,[t],[n])}});var Xw=_v({slice2d_:function(e,t,n){var r=Tv(e,"x","slice2d");return bd(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),vb(r,t,n)}});var Yw=_v({slice3d_:function(e,t,n){var r=Tv(e,"x","slice3d");return bd(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),vb(r,t,n)}});var Kw=_v({slice4d_:function(e,t,n){var r=Tv(e,"x","slice4d");return bd(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),vb(r,t,n)}});var $w=_v({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Tv(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return vv.runKernel(Dp,r,a)}});var Jw=_v({fft_:function(e){bd("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return vv.runKernel(uf,t)}});var Qw=_v({ifft_:function(e){bd("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return vv.runKernel(xf,t)}});var ek=_v({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=ub(e,[r,n]);t=Qw(a)}else{var i=[r,2*(n-1)],o=ub(Aw(e),[r,n]),s=ub(px(e),[r,n]),l=Ow(vb(o,[0,1],[r,n-2]),1),u=pb(Ow(vb(s,[0,1],[r,n-2]),1),Oy(-1)),c=hb([o,l],1),d=hb([s,u],1),h=ub(Mv(c,d),[i[0],i[1]]);t=Qw(h)}if(t=Aw(t),3===e.rank&&0!==e.shape[0]){var f=t,p=e.shape[0];t=ub(t,[p,t.shape[0]/p,t.shape[1]]),f.dispose()}return t}});var tk=_v({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={x:Tv(e,"x","split")},a={numOrSizeSplits:t,axis:n};return vv.runKernel(Op,r,a)}});var nk=_v({rfft_:function(e,t){bd("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=vb(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=hb([e,Yx(s)],e.shape.length-1),r=t}else n=e;var l=Jb(n),u=ub(Mv(n,l),[a,r]),c=Jw(u),d=Math.floor(r/2)+1,h=Aw(c),f=px(c),p=tk(h,[d,r-d],h.shape.length-1),m=tk(f,[d,r-d],f.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=d,ub(Mv(p[0],m[0]),v)}});var rk=_v({sqrt_:function(e){var t={x:Tv(e,"x","sqrt","float32")};return vv.runKernel(Ip,t)}});var ak=_v({squaredDifference_:function(e,t){var n=Tv(e,"a","squaredDifference"),r=Tv(t,"b","squaredDifference"),a=sv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],cy(n.shape,r.shape);var o={a:n,b:r};return vv.runKernel(Bp,o,{})}});var ik=_v({squeeze_:function(e,t){var n=Tv(e,"x","squeeze");return ub(n,Nd(n.shape,t).newShape)}});var ok=_v({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ev(e,"tensors","stack","string_or_numeric");bd(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&bd(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return vv.runKernel(rp,r,a)}});var sk=_v({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Tv(e,"x","step")},r={alpha:t};return vv.runKernel(rm,n,r)}});var lk=_v({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u={x:Tv(e,"x","stridedSlice","string_or_numeric")},c={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};return vv.runKernel(Wp,u,c)}});var uk=_v({tan_:function(e){var t={x:Tv(e,"x","tan","float32")};return vv.runKernel(qp,t)}});function ck(e,t){wd(e);var n=wv(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Av(e,null,n,t)}function dk(e,t,n){if(wd(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=wv(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Av(e,t,r,n)}function hk(e,t,n){if(wd(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=wv(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Av(e,t,r,n)}function fk(e,t,n){if(wd(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=wv(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Av(e,t,r,n)}function pk(e,t,n){if(wd(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=wv(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Av(e,t=t||r,r,n)}var mk=_v({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Tv(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=vv.runKernel(Kp,i,o),l=(0,U.Z)(s,2);return{values:l[0],indices:l[1]}}});var vk=_v({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new kw(t,n,r,!0,a),o=Fg(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var gk=_v({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Tv(e,"x","unique","string_or_numeric");bd(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=vv.runKernel(Qp,r,a),o=(0,U.Z)(i,2);return{values:o[0],indices:o[1]}}});var yk=_v({unsortedSegmentSum_:function(e,t,n){var r=Tv(e,"x","unsortedSegmentSum"),a=Tv(t,"segmentIds","unsortedSegmentSum","int32");bd(Ed(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return vv.runKernel(tm,i,o)}});var bk=_v({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Tv(e,"x","unstack","string_or_numeric");bd(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return vv.runKernel(em,r,a)}});function xk(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return vv.makeVariable(e,t,n,r)}function wk(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=Fg(e,"int32"),i=Fg([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),l=o*e.length;i.values.set(s,l)}return i.toTensor()}function kk(){return(kk=Vn(Un().mark((function e(t){var n,r,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Tv(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=wk(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Sk=function(e){return kk.apply(this,arguments)};function Tk(){return Tk=Vn(Un().mark((function e(t,n,r){var a,i,o,s,l,u,c,d,h,f,p,m,v;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=Tv(t,"tensor","boolMask"),i=Tv(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,l=a.shape,bd(s>0,(function(){return"mask cannot be scalar"})),xd(l.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,c=o;c<o+s;c++)u*=l[c];return d=l.slice(0,o).concat([u],l.slice(o+s)),h=ub(a,d),f=ub(i,[-1]),e.next=14,Sk(f);case 14:return p=e.sent,m=ik(p,[1]),v=dx(h,m,o),t!==a&&a.dispose(),n!==i&&i.dispose(),m.dispose(),h.dispose(),f.dispose(),p.dispose(),e.abrupt("return",v);case 24:case"end":return e.stop()}}),e)}))),Tk.apply(this,arguments)}var Ek=function(e,t,n){return Tk.apply(this,arguments)};var Ck=_v({transpose_:function(e,t){var n=Tv(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),bd(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){bd(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1)return n.clone();var r={x:n},a={perm:t};return vv.runKernel(Jp,r,a)}});function _k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return Ly(e);if(1!==e.rank&&null===n)return _k(ub(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Ix(Ly(e),n);if(t===1/0)return Mx(Ly(e),n);if(t===-1/0)return Jx(Ly(e),n);if("euclidean"===t||2===t)return rk(Ix(gw(Ly(e),Oy(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Mx(Ix(Ly(e),n[0]),n[1]-1);if(t===1/0)return Mx(Ix(Ly(e),n[1]),n[0]);if(t===-1/0)return Jx(Ix(Ly(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return rk(Ix(nw(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Mk=_v({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=_k(e=Tv(e,"x","norm"),t,n),i=a.shape;if(r){var o=Id(n,e.shape);i=Dx(a.shape,o)}return ub(a,i)}});var Ak=_v({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=Tv(e,"v","movingAverage"),o=Tv(t,"x","movingAverage"),s=Tv(n,"decay","movingAverage");!function(e,t){bd(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}(i,o),bd(Td(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var l=Oy(1),u=Ax(l,s),c=pb(Ax(o,i),u);if(a){bd(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=Tv(r,"step","movingAverage");c=Yb(c,Ax(l,gw(s,d)))}return jy(i,c)}});function Ik(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}!function(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}(n,t,e)}function Nk(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var l=a<1?1:a;return{sliceRank:a,numUpdates:Sd(t.shape)/l,sliceSize:o,strides:[].concat((0,_.Z)(Wd(n.slice(0,a))),[1]),outputSize:Sd(n)}}var Rk=_v({scatterND_:function(e,t,n){var r=Tv(e,"indices","scatterND","int32"),a=Tv(t,"updates","scatterND");Ik(a,r,n);var i={indices:r,updates:a},o={shape:n};return vv.runKernel(wp,i,o)}});var Ok=_v({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Tv(e,"sparseIndices","sparseToDense","int32"),i=Tv(t,"sparseValues","sparseToDense"),o=Tv(r,"defaultValue","sparseToDense",i.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},l={outputShape:n};return vv.runKernel(zp,s,l)}});var Dk=_v({gatherND_:function(e,t){var n=Tv(t,"indices","gatherND","int32"),r={params:Tv(e,"x","gatherND","string_or_numeric"),indices:n};return vv.runKernel(vf,r)}});var Lk=_v({dropout_:function(e,t,n,r){var a=Tv(e,"x","dropout");if(bd("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),bd(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof Km?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(Td(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=Yb(cx(jy(_w(i,0,1,"float32",r),o)),o);return pb(a,s)}});function Pk(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Fk(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return ck(a,"float32")}function jk(){return jk=Vn(Un().mark((function e(t,n){var r,a,i,o,s,l,u,c,d,h,f,p,m,v,g,y=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:1,a=Tv(t,"predictions","inTopK"),i=Tv(n,"targets","inTopK"),bd(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),bd(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),xd(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],bd(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=10,a.data();case 10:return s=e.sent,e.next=13,i.data();case 13:l=e.sent,u=s.length/o,c=o,d=Rd("bool",u),h=0;case 17:if(!(h<u)){e.next=35;break}for(f=h*c,p=s.subarray(f,f+c),m=[],v=0;v<p.length;v++)m.push({value:p[v],index:v});m.sort((function(e,t){return t.value-e.value})),d[h]=0,g=0;case 25:if(!(g<r)){e.next=32;break}if(m[g].index!==l[h]){e.next=29;break}return d[h]=1,e.abrupt("break",32);case 29:g++,e.next=25;break;case 32:h++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",Iv(d,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),jk.apply(this,arguments)}var zk=function(e,t){return jk.apply(this,arguments)};var Bk=_v({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=ub(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var l=t;3===l.rank&&(l=ub(t,[1,t.shape[0],t.shape[1],t.shape[2]])),bd(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),bd(4===l.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(l.shape,".")})),bd(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var u="NHWC"===i?s.shape[3]:s.shape[1],c="NHWC"===i?l.shape[3]:l.shape[1];bd(u===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(u,") must ")+"match input depth in filter (".concat(n[2],".")})),bd(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(c,") must ")+"match output depth for filter (".concat(n[3],").")})),lb("conv2dDerFilter",a,o);var d={x:s,dy:l},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return vv.runKernel(Lh,d,h)}});function Uk(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return pb(e,sk(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function Wk(e,t){var n=t,r=uy(e.shape,t.shape);return r.length>0&&(n=Ix(n,r)),ub(n,e.shape)}function Vk(e,t,n,r){if("linear"===t)return e;if("relu"===t)return Nw(e);if("elu"===t)return nx(e);if("relu6"===t)return Rw(e);if("prelu"===t)return yw(e,n);if("leakyrelu"===t)return yx(e,r);if("sigmoid"===t)return mb(e);throw new Error("Unknown fused activation ".concat(t,"."))}var Zk=function(e,t){return!(e>0)||"linear"===t};var Hk=_v({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,l=void 0===s?[1,1]:s,u=e.dimRoundingMode,c=e.bias,d=e.activation,h=void 0===d?"linear":d,f=e.preluActivationWeights,p=e.leakyreluAlpha;if(h=h||"linear",!1===Zk(vv.state.gradientDepth,h)){var m=Ob(t,n,r,a,o,l,u);return null!=c&&(m=jy(m,c)),Vk(m,h,f,p)}var v=Tv(t,"x","conv2d","float32"),g=Tv(n,"filter","conv2d","float32"),y=v,b=!1;3===v.rank&&(b=!0,y=ub(v,[1,v.shape[0],v.shape[1],v.shape[2]])),bd(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(y.rank,".")})),bd(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(g.rank,".")})),lb("fused conv2d",a,u),bd(y.shape[3]===g.shape[2],(function(){return"Error in conv2d: depth of input (".concat(y.shape[3],") must match ")+"input depth for filter ".concat(g.shape[2],".")})),bd(ob(r,l),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(l,"'")})),bd("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var x,w,k=Jy(y.shape,g.shape,r,l,a,u);if(null!=c){var S=sv(x=Tv(c,"bias","fused conv2d"),v);x=(0,U.Z)(S,1)[0],cy(k.outShape,x.shape)}null!=f&&(w=Tv(f,"prelu weights","fused conv2d"));var T=function(e,t){var n=(0,U.Z)(t,4),i=n[0],o=n[1],s=n[2],u=n[3],c=Uk(e,s,h);bd(ib(l),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(l,"'")}));var d=[Lb(o.shape,c,i,r,a),Bk(o,c,i.shape,r,a)];if(null!=u){var f=Wk(u,c);d.push(f)}return d},E={x:y,filter:g,bias:x,preluActivationWeights:w},C={strides:r,pad:a,dataFormat:o,dilations:l,dimRoundingMode:u,activation:h,leakyreluAlpha:p};if(null==c){var _=Ry((function(e,t,n){var r=vv.runKernel(sm,E,C);return n([t,e,r]),b&&(r=ub(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:T}}));return _(y,g)}var M=Ry((function(e,t,n,r){var a=vv.runKernel(sm,E,C);return r([t,e,a,n]),b&&(a=ub(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:T}}));return M(y,g,x)}});var Gk=_v({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=ub(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var l=t;3===l.rank&&(l=ub(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var u={x:s,dy:l},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return vv.runKernel(qh,u,c)}});var qk=_v({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,l=!1;3===t.rank&&(l=!0,s=ub(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var u={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},d=vv.runKernel(Xh,u,c);return l?ub(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var Xk=_v({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,l=void 0===s?[1,1]:s,u=e.dimRoundingMode,c=e.bias,d=e.activation,h=void 0===d?"linear":d,f=e.preluActivationWeights,p=e.leakyreluAlpha;if(!1===Zk(vv.state.gradientDepth,h)){var m=Hb(t,n,r,a,o,l,u);return null!=c&&(m=jy(m,c)),Vk(m,h,f,p)}var v=Tv(t,"x","depthwiseConv2d","float32"),g=Tv(n,"filter","depthwiseConv2d","float32"),y=v,b=!1;3===v.rank&&(b=!0,y=ub(v,[1,v.shape[0],v.shape[1],v.shape[2]])),bd(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(y.rank,".")})),bd(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(g.rank,".")})),bd(y.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(y.shape[3],") must match the inChannels dimension in ")+"filter ".concat(g.shape[2],".")})),null==l&&(l=[1,1]),bd(ob(r,l),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(l,"'")})),lb("fused depthwiseConv2d",a,u);var x,w,k=Jy(y.shape,g.shape,r,l,a,u,!0);if(null!=c){var S=sv(x=Tv(c,"bias","fused conv2d"),v),T=(0,U.Z)(S,1);x=T[0],cy(k.outShape,x.shape)}null!=f&&(w=Tv(f,"prelu weights","fused depthwiseConv2d"));var E=function(e,t){bd(ib(l),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(l,"'")}));var n=(0,U.Z)(t,4),i=n[0],o=n[1],s=n[2],c=n[3],d=Uk(e,s,h),f=qk(o.shape,d,i,r,a,l,u),p=Gk(o,d,i.shape,r,a,l,u);return null!=c?[f,p,Wk(x,d)]:[f,p]},C={x:y,filter:g,bias:x,preluActivationWeights:w},_={strides:r,pad:a,dataFormat:o,dilations:l,dimRoundingMode:u,activation:h,leakyreluAlpha:p};if(null==c){var M=Ry((function(e,t,n){var r=vv.runKernel(lm,C,_);return n([t,e,r]),b&&(r=ub(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:E}}));return M(y,g)}var A=Ry((function(e,t,n,r){var a=vv.runKernel(lm,C,_);return r([t,e,a,n]),b&&(a=ub(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:E}}));return A(y,g,x)}});var Yk=_v({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,l=e.activation,u=void 0===l?"linear":l,c=e.preluActivationWeights,d=e.leakyreluAlpha;if(!1===Zk(vv.state.gradientDepth,u)){var h=fb(t,n,a,o);return null!=s&&(h=jy(h,s)),Vk(h,u,c,d)}var f=Tv(t,"a","fused matMul"),p=Tv(n,"b","fused matMul"),m=sv(f,p),v=(0,U.Z)(m,2);f=v[0],p=v[1];var g=a?f.shape[f.rank-2]:f.shape[f.rank-1],y=o?p.shape[p.rank-1]:p.shape[p.rank-2],b=a?f.shape[f.rank-1]:f.shape[f.rank-2],x=o?p.shape[p.rank-2]:p.shape[p.rank-1],w=f.shape.slice(0,-2),k=p.shape.slice(0,-2),S=Sd(w),T=Sd(k);bd(g===y,(function(){return"Error in fused matMul: inner shapes (".concat(g,") and (")+"".concat(y,") of Tensors with shapes ").concat(f.shape," and ")+"".concat(p.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var E,C,_=cy(f.shape.slice(0,-2),p.shape.slice(0,-2)).concat([b,x]),M=ub(f,a?[S,g,b]:[S,b,g]),A=ub(p,o?[T,x,y]:[T,y,x]);if(null!=s){var I=sv(E=Tv(s,"bias","fused matMul"),f);E=(0,U.Z)(I,1)[0],cy(_,E.shape)}null!=c&&(C=Tv(c,"prelu weights","fused matMul"));var N=function(e,t){var n,r,i=(0,U.Z)(t,4),l=i[0],c=i[1],d=i[2],h=i[3],f=Uk(ub(e,d.shape),d,u);return a||o?!a&&o?(n=fb(f,c,!1,!1),r=fb(f,l,!0,!1)):a&&!o?(n=fb(c,f,!1,!0),r=fb(l,f,!1,!1)):(n=fb(c,f,!0,!0),r=fb(f,l,!0,!0)):(n=fb(f,c,!1,!0),r=fb(l,f,!0,!1)),null!=s?[n,r,Wk(h,f)]:[n,r]},R={a:M,b:A,bias:E,preluActivationWeights:C},O={transposeA:a,transposeB:o,activation:u,leakyreluAlpha:d};if(null==s){var D=Ry((function(e,t,n){var r=vv.runKernel(om,R,O);return n([e,t,r]),{value:ub(r,_),gradFunc:N}}));return D(M,A)}var L=Ry((function(e,t,n,r){var a=vv.runKernel(om,R,O);return r([e,t,a,n]),{value:ub(a,_),gradFunc:N}}));return L(M,A,E)}});var Kk=_v({hammingWindow_:function(e){return Fk(e,.54,.46)}});var $k=_v({hannWindow_:function(e){return Fk(e,.5,.5)}});var Jk=_v({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(vb(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,l=hb([vb(e,i,t-s),ux([s],a)]);o.push(l),i+=n}return 0===o.length?dk([],[0,t]):ub(hb(o),[o.length,t])}});var Qk=_v({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$k;null==r&&(r=Pk(t));var i=Jk(e,t,n),o=pb(i,a(t));return nk(o,r)}});var eS=_v({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Tv(e,"image","cropAndResize"),s=Tv(t,"boxes","cropAndResize","float32"),l=Tv(n,"boxInd","cropAndResize","int32"),u=s.shape[0];bd(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),bd(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(u,",4] ")+"but had shape ".concat(s.shape,".")})),bd(1===l.rank&&l.shape[0]===u,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(u,"] ")+"but had shape ".concat(s.shape,".")})),bd(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),bd(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),bd("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var c={image:o,boxes:s,boxInd:l},d={method:a,extrapolationValue:i,cropSize:r};return vv.runKernel(Vh,c,d)}});var tS=_v({flipLeftRight_:function(e){var t=Tv(e,"image","flipLeftRight","float32");bd(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return vv.runKernel(df,n,{})}});var nS=_v({grayscaleToRGB_:function(e){var t=Tv(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];bd(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),bd(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,sx(t,a)}});var rS=_v({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Tv(e,"image","rotateWithOffset","float32");bd(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r};return vv.runKernel(im,i,o)}});function aS(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),bd(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),bd(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),bd(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),bd(1===t.rank,(function(){return"scores must be a 1D tensor"})),bd(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),bd(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var iS=_v({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=Tv(e,"boxes","nonMaxSuppression","float32"),o=Tv(t,"scores","nonMaxSuppression","float32"),s=aS(i,o,n,r,a),l={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return vv.runKernel(Jf,{boxes:i,scores:o},l)}});function oS(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||sS)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function sS(e,t){return e>t?1:e<t?-1:0}function lS(e,t,n,r,a){return dS(e,t,n,r,a,0)}function uS(e,t,n,r,a,i){return dS(e,t,n,r,a,0,!1,i,!0)}function cS(e,t,n,r,a,i){return dS(e,t,n,r,a,i,!0)}function dS(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=[],c=0;c<t.length;c++)t[c]>a&&u.push({score:t[c],boxIndex:c,suppressBeginIndex:0});u.sort(pS);for(var d=i>0?-.5/i:0,h=[],f=[];h.length<n&&u.length>0;){var p=u.pop(),m=p.score,v=p.boxIndex,g=p.suppressBeginIndex;if(m<a)break;for(var y=!1,b=h.length-1;b>=g;--b){var x=hS(e,v,h[b]);if(x>=r){y=!0;break}if(p.score=p.score*fS(r,d,x),p.score<=a)break}p.suppressBeginIndex=h.length,y||(p.score===m?(h.push(v),f.push(p.score)):p.score>a&&oS(u,p,pS))}var w=h.length,k=n-w;s&&k>0&&(h.push.apply(h,(0,_.Z)(new Array(k).fill(0))),f.push.apply(f,(0,_.Z)(new Array(k).fill(0))));var S={selectedIndices:h};return o&&(S.selectedScores=f),l&&(S.validOutputs=w),S}function hS(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),f=(s-i)*(l-o),p=(d-u)*(h-c);if(f<=0||p<=0)return 0;var m=Math.max(i,u),v=Math.max(o,c),g=Math.min(s,d),y=Math.min(l,h),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(f+p-b)}function fS(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function pS(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function mS(){return mS=Vn(Un().mark((function e(t,n,r){var a,i,o,s,l,u,c,d,h,f,p=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:.5,i=p.length>4&&void 0!==p[4]?p[4]:Number.NEGATIVE_INFINITY,o=Tv(t,"boxes","nonMaxSuppressionAsync"),s=Tv(n,"scores","nonMaxSuppressionAsync"),l=aS(o,s,r,a,i),r=l.maxOutputSize,a=l.iouThreshold,i=l.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return u=e.sent,c=u[0],d=u[1],h=lS(c,d,r,a,i),f=h.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",ck(f,"int32"));case 17:case"end":return e.stop()}}),e)}))),mS.apply(this,arguments)}var vS=function(e,t,n){return mS.apply(this,arguments)};var gS=_v({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Tv(e,"boxes","nonMaxSuppression"),s=Tv(t,"scores","nonMaxSuppression"),l=aS(o,s,n,r,a,i),u={boxes:o,scores:s},c={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:a=l.scoreThreshold,softNmsSigma:i=l.softNmsSigma},d=vv.runKernel(ep,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}});function yS(){return yS=Vn(Un().mark((function e(t,n,r){var a,i,o,s,l,u,c,d,h,f,p,m,v=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:.5,i=v.length>4&&void 0!==v[4]?v[4]:Number.NEGATIVE_INFINITY,o=v.length>5&&void 0!==v[5]?v[5]:0,s=Tv(t,"boxes","nonMaxSuppressionAsync"),l=Tv(n,"scores","nonMaxSuppressionAsync"),u=aS(s,l,r,a,i,o),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,o=u.softNmsSigma,e.next=12,Promise.all([s.data(),l.data()]);case 12:return c=e.sent,d=c[0],h=c[1],f=cS(d,h,r,a,i,o),p=f.selectedIndices,m=f.selectedScores,s!==t&&s.dispose(),l!==n&&l.dispose(),e.abrupt("return",{selectedIndices:ck(p,"int32"),selectedScores:ck(m)});case 19:case"end":return e.stop()}}),e)}))),yS.apply(this,arguments)}var bS=function(e,t,n){return yS.apply(this,arguments)};var xS=_v({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Tv(e,"boxes","nonMaxSuppression"),s=Tv(t,"scores","nonMaxSuppression"),l=aS(o,s,n,r,a,null),u={boxes:o,scores:s},c={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:i},d=vv.runKernel(Qf,u,c);return{selectedIndices:d[0],validOutputs:d[1]}}});function wS(){return wS=Vn(Un().mark((function e(t,n,r){var a,i,o,s,l,u,c,d,h,f,p,m,v,g,y,b,x=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>3&&void 0!==x[3]?x[3]:.5,i=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,o=x.length>5&&void 0!==x[5]&&x[5],s=Tv(t,"boxes","nonMaxSuppressionAsync"),l=Tv(n,"scores","nonMaxSuppressionAsync"),u=aS(s,l,r,a,i,null),c=u.maxOutputSize,d=u.iouThreshold,h=u.scoreThreshold,e.next=11,Promise.all([s.data(),l.data()]);case 11:return f=e.sent,p=(0,U.Z)(f,2),m=p[0],v=p[1],g=uS(m,v,c,d,h,o),y=g.selectedIndices,b=g.validOutputs,s!==t&&s.dispose(),l!==n&&l.dispose(),e.abrupt("return",{selectedIndices:ck(y,"int32"),validOutputs:Oy(b,"int32")});case 19:case"end":return e.stop()}}),e)}))),wS.apply(this,arguments)}var kS=function(e,t,n){return wS.apply(this,arguments)};var SS=_v({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Tv(e,"images","resizeBilinear");bd(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),bd(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),bd(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=ub(a,[1,a.shape[0],a.shape[1],a.shape[2]])),(0,U.Z)(t,0);var s={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},u=vv.runKernel(mp,s,l);return o?ub(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});var TS=_v({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Tv(e,"images","resizeNearestNeighbor");bd(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),bd(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),bd("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),bd(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=ub(a,[1,a.shape[0],a.shape[1],a.shape[2]])),(0,U.Z)(t,0);var s={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},u=vv.runKernel(fp,s,l);return o?ub(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});var ES=_v({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,l=Tv(e,"image","threshold"),u=l.shape[0]*l.shape[1],c=pb(ck([s]),255);if(bd(3===l.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(l.rank,".")})),bd(3===l.shape[2]||1===l.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(l.shape[2],".")})),bd("int32"===l.dtype||"float32"===l.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(l.dtype,".")})),bd("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===l.shape[2]){var d=tk(l,[1,1,1],-1),h=(0,U.Z)(d,3);t=h[0],n=h[1],r=h[2];var f=pb(t,.2989),p=pb(n,.587),m=pb(r,.114);a=jy(jy(f,p),m)}else a=e;"otsu"===i&&(c=function(e,t){for(var n,r,a,i,o,s,l=ck([-1]),u=ck([0]),c=ck([0]),d=0;d<e.size-1;d++){n=vb(e,0,d+1),r=vb(e,d+1),o=Yb(Ix(n),t),s=Yb(Ix(r),t);var h=Ix(pb(n,Mw(0,n.size)));a=Yb(h,Ix(n));var f=ux(r.shape,n.size),p=jy(Mw(0,r.size),f),m=pb(r,p);i=Yb(Ix(m),Ix(r));var v=Ax(a,i),g=Ax(a,i),y=pb(o,s);c=pb(pb(y,v),g);var b=hx(c,u);u=$b(b,c,u),l=$b(b,ck([d]),l)}return l}(Tb(jg(jw(a),"int32"),Iv([]),256),u));var v=o?xx(a,c):hx(a,c);return jg(pb(v,255),"int32")}});var CS=_v({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=Tv(e,"image","transform","float32"),s=Tv(t,"transforms","transform","float32");bd(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),bd(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),bd(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var l={image:o,transforms:s},u={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return vv.runKernel($p,l,u)}});var _S=_v({bandPart_:function(e,t,n){bd(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),bd(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=Tv(e,"a","bandPart");bd(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=r.shape.slice(-2),o=(0,U.Z)(i,2),s=o[0],l=o[1];if(!(t<=s))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(s,")."));if(!(n<=l))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(l,")."));t<0&&(t=s),n<0&&(n=l);var u=ub(Mw(0,s,1,"int32"),[-1,1]),c=Mw(0,l,1,"int32"),d=Ax(u,c),h=Bx(xx(d,Oy(+t,"int32")),fx(d,Oy(-n,"int32"))),f=Yx([s,l],r.dtype);return ub(ok(bk(ub(r,[-1,s,l])).map((function(e){return $b(h,e,f)}))),a)}});var MS=_v({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,bd(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){bd(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}else t=!0,e=tk(e,e.shape[0],0).map((function(e){return ik(e,[0])}));bd(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var i=[],o=e,s=function(e){i.push(vv.tidy((function(){var t=o[e];if(e>0)for(var n=0;n<e;++n){var r=pb(Ix(pb(i[n],t)),i[n]);t=Ax(t,r)}return Yb(t,Mk(t,"euclidean"))})))},l=0;l<e.length;++l)s(l);return t?ok(i,0):i}});function AS(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return vv.tidy((function(){bd(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=lx(n),i=zg(e),o=dk([[1]],[1,1]),s=zg(o),l=n>=r?r:n,u=function(e){var t=i,l=s,u=a,c=vv.tidy((function(){var t=vb(i,[e,e],[n-e,1]),l=Mk(t),u=vb(i,[e,e],[1,1]),c=$b(hx(u,0),dk([[-1]]),dk([[1]])),d=Ax(u,pb(c,l)),h=Yb(t,d);s=1===h.shape[0]?zg(o):hb([o,vb(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);var f=Ex(Yb(fb(c,d),l)),p=vb(i,[e,0],[n-e,r]),m=pb(f,s),v=Ck(s);if(0===e)i=Ax(p,fb(m,fb(v,p)));else{var g=Ax(p,fb(m,fb(v,p)));i=hb([vb(i,[0,0],[e,r]),g],0)}var y=Ck(m),b=vb(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=Ax(b,fb(fb(b,s),y));else{var x=Ax(b,fb(fb(b,s),y));a=hb([vb(a,[0,0],[n,e]),x],1)}return[s,i,a]})),d=(0,U.Z)(c,3);s=d[0],i=d[1],a=d[2],Ay([t,l,u])},c=0;c<l;++c)u(c);return!t&&n>r&&(a=vb(a,[0,0],[n,r]),i=vb(i,[0,0],[r,r])),[a,i]}))}var IS,NS=_v({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(bd(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return AS(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=bk(ub(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach((function(e){var n=AS(e,t),r=(0,U.Z)(n,2),o=r[0],s=r[1];a.push(o),i.push(s)})),[ub(ok(a,0),e.shape),ub(ok(i,0),e.shape)]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(IS||(IS={}));var RS=_v({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:IS.SUM_BY_NONZERO_WEIGHTS,r=Tv(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Tv(t,"weights","computeWeightedLoss"));var i=null==a?r:pb(r,a);if(n===IS.NONE)return i;if(n===IS.SUM)return Ix(i);if(n===IS.MEAN){if(null==a)return Xx(i);var o=r.size/a.size,s=Yb(Ix(i),Ix(a));return o>1?Yb(s,Oy(o)):s}if(n===IS.SUM_BY_NONZERO_WEIGHTS){if(null==a)return Yb(Ix(i),Oy(r.size));var l=pb(a,Kx(r.shape)),u=jg(Ix(ow(l,Oy(0))),"float32");return Yb(Ix(i),u)}throw Error("Unknown reduction: ".concat(n))}});var OS=_v({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:IS.SUM_BY_NONZERO_WEIGHTS,a=Tv(e,"labels","absoluteDifference"),i=Tv(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=Tv(n,"weights","absoluteDifference")),xd(a.shape,i.shape,"Error in absoluteDifference: ");var s=Ly(Ax(a,i));return RS(s,o,r)}});var DS=_v({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:IS.SUM_BY_NONZERO_WEIGHTS,i=Tv(e,"labels","cosineDistance"),o=Tv(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Tv(r,"weights","cosineDistance")),xd(i.shape,o.shape,"Error in cosineDistance: ");var l=Oy(1),u=Ax(l,Ix(pb(i,o),n,!0));return RS(u,s,a)}});var LS=_v({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:IS.SUM_BY_NONZERO_WEIGHTS,a=Tv(e,"labels","hingeLoss"),i=Tv(t,"predictions","hingeLoss"),o=null;null!=n&&(o=Tv(n,"weights","hingeLoss")),xd(a.shape,i.shape,"Error in hingeLoss: ");var s=Oy(1);a=Ax(pb(Oy(2),a),s);var l=Nw(Ax(s,pb(a,i)));return RS(l,o,r)}});var PS=_v({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:IS.SUM_BY_NONZERO_WEIGHTS,i=Tv(e,"labels","huberLoss"),o=Tv(t,"predictions","huberLoss"),s=null;null!=n&&(s=Tv(n,"weights","huberLoss")),xd(i.shape,o.shape,"Error in huberLoss: ");var l=Oy(r),u=Ly(Ax(o,i)),c=Qx(u,l),d=Ax(u,c),h=jy(pb(Oy(.5),nw(c)),pb(l,d));return RS(h,s,a)}});var FS=_v({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:IS.SUM_BY_NONZERO_WEIGHTS,i=Tv(e,"labels","logLoss"),o=Tv(t,"predictions","logLoss"),s=null;null!=n&&(s=Tv(n,"weights","logLoss")),xd(i.shape,o.shape,"Error in logLoss: ");var l=Oy(1),u=Oy(r),c=Ex(pb(i,Sx(jy(o,u)))),d=pb(Ax(l,i),Sx(jy(Ax(l,o),u))),h=Ax(c,d);return RS(h,s,a)}});var jS=_v({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:IS.SUM_BY_NONZERO_WEIGHTS,a=Tv(e,"labels","meanSquaredError"),i=Tv(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=Tv(n,"weights","meanSquaredError")),xd(a.shape,i.shape,"Error in meanSquaredError: ");var s=ak(a,i);return RS(s,o,r)}});var zS=_v({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:IS.SUM_BY_NONZERO_WEIGHTS,i=Tv(e,"multiClassLabels","sigmoidCrossEntropy"),o=Tv(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Tv(n,"weights","sigmoidCrossEntropy")),xd(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var l=Oy(r),u=Oy(1),c=Oy(.5);i=jy(pb(i,Ax(u,l)),pb(c,l))}var d=function(e,t){var n=Tv(e,"labels","sigmoidCrossEntropyWithLogits"),r=Tv(t,"logits","sigmoidCrossEntropyWithLogits");xd(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=Nw(r),i=pb(r,n),o=Tx(ax(Ex(Ly(r))));return jy(Ax(a,i),o)}(i,o);return RS(d,s,a)}});var BS=_v({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:IS.SUM_BY_NONZERO_WEIGHTS,i=Tv(e,"onehotLabels","softmaxCrossEntropy"),o=Tv(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Tv(n,"weights","softmaxCrossEntropy")),xd(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var l=Oy(r),u=Oy(1),c=Oy(i.shape[1]);i=jy(pb(i,Ax(u,l)),Yb(l,c))}var d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=Ry((function(e,t,r){var a=zx(t,[n],!0),i=Ax(jg(t,"float32"),a);r([e,i]);var o=Ex(pb(i,e));return{value:Ix(o,[n]),gradFunc:function(e,t){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=Dx(e.shape,[n]);return[pb(ub(e,o),Ax(jg(a,"float32"),ax(i))),pb(ub(e,o),Ax(ax(i),jg(a,"float32")))]}}}));return r(e,t)}(i,o);return RS(d,s,a)}});var US=_v({sparseFillEmptyRows_:function(e,t,n,r){var a=Tv(e,"indices","sparseFillEmptyRows","int32"),i=Tv(t,"values","sparseFillEmptyRows"),o=Tv(n,"denseShape","sparseFillEmptyRows","int32"),s=Tv(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var l={indices:a,values:i,denseShape:o,defaultValue:s},u=vv.runKernel(Lp,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}});var WS=_v({sparseReshape_:function(e,t,n){var r=Tv(e,"inputIndices","sparseReshape","int32"),a=Tv(t,"inputShape","sparseReshape","int32"),i=Tv(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=vv.runKernel(Pp,o);return{outputIndices:s[0],outputShape:s[1]}}});var VS=_v({sparseSegmentMean_:function(e,t,n){var r=Tv(e,"data","sparseSegmentMean"),a=Tv(t,"indices","sparseSegmentMean","int32"),i=Tv(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return vv.runKernel(Fp,o)}});var ZS=_v({sparseSegmentSum_:function(e,t,n){var r=Tv(e,"data","sparseSegmentSum"),a=Tv(t,"indices","sparseSegmentSum","int32"),i=Tv(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return vv.runKernel(jp,o)}});var HS=_v({stringNGrams_:function(e,t,n,r,a,i,o,s){var l=Tv(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error("Data must be a vector, saw: ".concat(l.shape));var u=Tv(t,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw new Error("Data splits must be of datatype int32");var c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:l,dataSplits:u},h=vv.runKernel(Vp,d,c);return{nGrams:h[0],nGramsSplits:h[1]}}});var GS=_v({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Tv(e,"input","stringSplit","string"),a=Tv(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=vv.runKernel(Zp,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});var qS=_v({stringToHashBucketFast_:function(e,t){var n=Tv(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return vv.runKernel(Hp,a,r)}}),XS={fft:Jw,ifft:Qw,rfft:nk,irfft:ek},YS={hammingWindow:Kk,hannWindow:$k,frame:Jk,stft:Qk},KS={flipLeftRight:tS,grayscaleToRGB:nS,resizeNearestNeighbor:TS,resizeBilinear:SS,rotateWithOffset:rS,cropAndResize:eS,nonMaxSuppression:iS,nonMaxSuppressionAsync:vS,nonMaxSuppressionWithScore:gS,nonMaxSuppressionWithScoreAsync:bS,nonMaxSuppressionPadded:xS,nonMaxSuppressionPaddedAsync:kS,threshold:ES,transform:CS},$S={bandPart:_S,gramSchmidt:MS,qr:NS},JS={absoluteDifference:OS,computeWeightedLoss:RS,cosineDistance:DS,hingeLoss:LS,huberLoss:PS,logLoss:FS,meanSquaredError:jS,sigmoidCrossEntropy:zS,softmaxCrossEntropy:BS},QS={sparseFillEmptyRows:US,sparseReshape:WS,sparseSegmentMean:VS,sparseSegmentSum:ZS},eT={stringNGrams:HS,stringSplit:GS,stringToHashBucketFast:qS},tT=function(e){N(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return M(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=vv.backend.epsilon()),a}return(0,A.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=vv.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:My((function(){return Jb(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:My((function(){return Jb(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;My((function(){var e=jy(pb(o,t.rho),pb(nw(i),1-t.rho)),n=pb(Yb(rk(jy(s,t.epsilon)),rk(jy(o,t.epsilon))),i),r=jy(pb(s,t.rho),pb(nw(n),1-t.rho));o.assign(e),s.assign(r);var l=jy(pb(n,-t.learningRate),a);a.assign(l)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(Ay(this.accumulatedGrads.map((function(e){return e.variable}))),Ay(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,_.Z)(this.accumulatedGrads),(0,_.Z)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(Dy);tT.className="Adadelta",Ey(tT);var nT=function(e){N(n,e);var t=F(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return M(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return(0,A.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=vv.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:My((function(){return ux(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;My((function(){var e=jy(o,nw(i));o.assign(e);var n=jy(pb(Yb(i,rk(jy(e,vv.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&Ay(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(Dy);nT.className="Adagrad",Ey(nT);var rT=function(e){N(n,e);var t=F(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return M(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],My((function(){i.accBeta1=Oy(r).variable(),i.accBeta2=Oy(a).variable()})),null==o&&(i.epsilon=vv.backend.epsilon()),i}return(0,A.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);My((function(){var r=Ax(1,t.accBeta1),a=Ax(1,t.accBeta2);n.forEach((function(n,i){var o=vv.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:My((function(){return Jb(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:My((function(){return Jb(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var l=t.accumulatedFirstMoment[i].variable,u=t.accumulatedSecondMoment[i].variable,c=jy(pb(l,t.beta1),pb(s,1-t.beta1)),d=jy(pb(u,t.beta2),pb(nw(s),1-t.beta2)),h=Yb(c,r),f=Yb(d,a);l.assign(c),u.assign(d);var p=jy(pb(Yb(h,jy(rk(f),t.epsilon)),-t.learningRate),o);o.assign(p)}})),t.accBeta1.assign(pb(t.accBeta1,t.beta1)),t.accBeta2.assign(pb(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Ay(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&Ay(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,_.Z)(this.accumulatedFirstMoment),(0,_.Z)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Vn(Un().mark((function e(t){var n,r=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,My((function(){r.accBeta1.assign(gw(r.beta1,r.iterations_+1)),r.accBeta2.assign(gw(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(Dy);rT.className="Adam",Ey(rT);var aT=function(e){N(n,e);var t=F(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return M(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],My((function(){i.iteration=Oy(0).variable(),i.accBeta1=Oy(r).variable()})),null==o&&(i.epsilon=vv.backend.epsilon()),i}return(0,A.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);My((function(){var r=Ax(1,t.accBeta1),a=Yb(-t.learningRate,jy(pb(t.iteration,t.decay),1));n.forEach((function(n,i){var o=vv.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Jb(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:Jb(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var l=t.accumulatedFirstMoment[i].variable,u=t.accumulatedWeightedInfNorm[i].variable,c=jy(pb(l,t.beta1),pb(s,1-t.beta1)),d=pb(u,t.beta2),h=Ly(s),f=qx(d,h);l.assign(c),u.assign(f);var p=jy(pb(Yb(a,r),Yb(c,jy(f,t.epsilon))),o);o.assign(p)}})),t.iteration.assign(jy(t.iteration,1)),t.accBeta1.assign(pb(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Ay(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&Ay(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(Dy);aT.className="Adamax",Ey(aT);var iT=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return(0,A.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);n.forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=vv.registeredVariables[n];My((function(){var e=jy(pb(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Iy(Oy(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(Dy);iT.className="SGD",Ey(iT);var oT=function(e){N(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return M(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=Oy(a.momentum),a}return(0,A.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=vv.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:My((function(){return Jb(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&My((function(){var e,n=jy(pb(t.m,i),o);e=t.useNesterov?jy(pb(t.c,jy(o,pb(n,t.m))),a):jy(pb(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&Ay(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(iT);oT.className="Momentum",Ey(oT);var sT=function(e){N(n,e);var t=F(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(M(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==o&&(r.epsilon=vv.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return(0,A.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=vv.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:My((function(){return Jb(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:My((function(){return Jb(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:My((function(){return Jb(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,l=t.accumulatedMoments[r].variable;My((function(){var e=jy(pb(s,t.decay),pb(nw(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=jy(pb(n,t.decay),pb(o,1-t.decay)),u=Yb(pb(o,t.learningRate),rk(Ax(e,jy(nw(i),t.epsilon)))),c=jy(pb(l,t.momentum),u);s.assign(e),n.assign(i),l.assign(c);var d=Ax(a,c);a.assign(d)}else{var h=jy(pb(s,t.decay),pb(nw(o),1-t.decay)),f=jy(pb(l,t.momentum),Yb(pb(o,t.learningRate),rk(jy(h,t.epsilon))));s.assign(h),l.assign(f);var p=Ax(a,f);a.assign(p)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&Ay(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&Ay(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&Ay(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,_.Z)(this.accumulatedMeanSquares),(0,_.Z)(this.accumulatedMoments)),this.centered&&t.push.apply(t,(0,_.Z)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Vn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(Dy);sT.className="RMSProp",Ey(sT);var lT=function(){function e(){M(this,e)}return(0,A.Z)(e,null,[{key:"sgd",value:function(e){return new iT(e)}},{key:"momentum",value:function(e,t){return new oT(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}},{key:"rmsprop",value:function(e){return new sT(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}},{key:"adam",value:function(){return new rT(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}},{key:"adadelta",value:function(){return new tT(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"adamax",value:function(){return new aT(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}},{key:"adagrad",value:function(e){return new nT(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}}]),e}(),uT={sgd:lT.sgd,momentum:lT.momentum,adadelta:lT.adadelta,adagrad:lT.adagrad,rmsprop:lT.rmsprop,adamax:lT.adamax,adam:lT.adam},cT="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function dT(){return new Promise((function(e){return cT((function(){return e()}))}))}function hT(e,t){var n=e[0].length;e.forEach((function(e,t){bd(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),bd(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)bd(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function fT(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var pT=30;function mT(e){return e<=pT?e:Ud(e,Math.floor(Math.sqrt(e)))}function vT(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function gT(e,t,n){var r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])(r=r.concat(t.slice(0))).push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);for(var a=t.length,i=0;i<a;++i)r=r.concat([e[i+1]/t[i],t[i]]);r=r.concat(e.slice(a+1))}return r}function yT(e,t){var n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(var r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{for(var a=[],i=[],o=1;o<e;++o)o>=2*t+1||o%2===1?i.push(o):a.push(o);n.push.apply(n,a),n.push(0),n.push.apply(n,i)}return n}function bT(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function xT(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function wT(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function kT(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===Sd(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var l=e.shape,u=a.slice();u.pop();for(var c=1,d=i;d<n;++d)c*=l[d],u.push(l[d]);var h=[].concat((0,_.Z)(Wd(e.shape).map((function(e){return e/c}))),[1]).slice(0,i);return[u,o,c,h]}var ST=1.7580993408473768,TT=1.0507009873554805,ET=.3275911,CT=.254829592,_T=-.284496736,MT=1.421413741,AT=-1.453152027,IT=1.061405429;function NT(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function RT(e,t){return{real:e[2*t],imag:e[2*t+1]}}function OT(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function DT(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var LT="->",PT=/->/g,FT=",",jT="...";function zT(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(PT,"").length)/LT.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(LT,'").'));var r=e.split(LT),a=(0,U.Z)(r,2),i=a[0],o=a[1];bd(-1===i.indexOf(jT),(function(){return'The ellipsis notation ("'.concat(jT,'") is not supported yet.')}));var s=i.split(FT),l=s.length;if(t!==l)throw new Error("Expected ".concat(l," input tensors, received ").concat(t));if(l>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var u=[],c=function(){var e=o[d];if(!s.some((function(t){return-1!==t.indexOf(e)})))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===u.indexOf(e)&&u.push(e)},d=0;d<o.length;++d)c();for(var h=0;h<i.length;++h){var f=i[h];-1===u.indexOf(f)&&f!==FT&&u.push(f)}for(var p=new Array(s.length),m=0;m<l;++m){if(new Set(s[m].split("")).size!==s[m].length)throw new Error("Found duplicate axes in input component ".concat(s[m],". ")+"Support for duplicate axes in input is not implemented yet.");p[m]=[];for(var v=0;v<s[m].length;++v)p[m].push(u.indexOf(s[m][v]))}for(var g=u.length,y=[],b=o.length;b<g;++b)y.push(b);return{allDims:u,summedDims:y,idDims:p}}function BT(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return n=n.filter((function(e){return-1!==e})),{permutationIndices:n,expandDims:a}}function UT(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:bd(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function WT(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var l,u=G(ZT(t,r[s]));try{for(u.s();!(l=u.n()).done;){var c=l.value;-1===o.indexOf(c)&&(a[s].push(c),o.push(c))}}catch(_ke){u.e(_ke)}finally{u.f()}}return{path:r,steps:a}}function VT(e){return e.every((function(e,t){return e===t}))}function ZT(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function HT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)bd(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);bd(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}bd(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function GT(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function qT(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function XT(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function YT(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function KT(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function $T(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],l=[],u=1,c=1,d=1,h=0;h<r;++h)l.push(e.shape[h]),u*=e.shape[h];for(var f=r;f<n;f++)l.push(e.shape[f]),c*=e.shape[f];for(var p=r;p<a;p++)l.push(t.shape[p]);for(var m=n+1;m<i;m++)l.push(e.shape[m]),d*=e.shape[m];return{batchSize:u,sliceSize:d,outerSize:c,dimSize:s,outputShape:l}}function JT(e){try{return e.map((function(e){return Pm(e)}))}catch(_ke){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(_ke))}}var QT={kernelName:oh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return pb(e,sk(jg(n,"float32"),-1))}}}},eE={kernelName:sh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){var t=nw(jg(n,"float32")),r=rk(Ax(Oy(1),t));return Ex(Yb(e,r))}}}},tE={kernelName:lh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){var t=rk(Ax(nw(jg(n,"float32")),1));return Yb(e,t)}}}},nE={kernelName:uh,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=cy(r.shape,a.shape);return{a:function(){var t=e,n=uy(r.shape,i);return n.length>0&&(t=Ix(t,n)),ub(t,r.shape)},b:function(){var t=e,n=uy(a.shape,i);return n.length>0&&(t=Ix(t,n)),ub(t,a.shape)}}}},rE={kernelName:ch,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},aE={kernelName:fh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return Jb(n)}}}},iE={kernelName:ph,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return Jb(n)}}}},oE={kernelName:mh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return Yb(e,rk(Ax(Oy(1),nw(jg(n,"float32")))))}}}},sE={kernelName:vh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){var t=rk(jy(Oy(1),nw(jg(n,"float32"))));return Yb(e,t)}}}},lE={kernelName:bh,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=cy(r.shape,a.shape);return{a:function(){var t=jy(nw(r),nw(a)),n=pb(e,Yb(a,t)),o=uy(r.shape,i);return o.length>0&&(n=Ix(n,o)),ub(n,r.shape)},b:function(){var t=jy(nw(r),nw(a)),n=Ex(pb(e,Yb(r,t))),o=uy(a.shape,i);return o.length>0&&(n=Ix(n,o)),ub(n,a.shape)}}}},uE={kernelName:gh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return Yb(e,jy(nw(jg(n,"float32")),1))}}}},cE={kernelName:yh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return Yb(e,Ax(Oy(1),nw(jg(n,"float32"))))}}}};var dE=_v({avgPool3dGrad_:function(e,t,n,r,a,i){var o=Tv(e,"dy","avgPool3dGrad"),s=Tv(t,"input","avgPool3dGrad"),l=o,u=s,c=!1;4===s.rank&&(c=!0,l=ub(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),u=ub(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),bd(5===l.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")})),bd(5===u.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(u.rank,".")})),lb("avgPool3dGrad",a,i);var d={dy:l,input:u},h={filterSize:n,strides:r,pad:a,dimRoundingMode:i},f=vv.runKernel(Sh,d,h);return c?ub(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}}),hE={kernelName:kh,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad,s=n.dimRoundingMode;return{x:function(){return dE(e,r,a,i,o,s)}}}};var fE=_v({avgPoolGrad_:function(e,t,n,r,a){var i=Tv(e,"dy","avgPoolGrad"),o=Tv(t,"input","avgPoolGrad");bd(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,l=i,u=!1;3===o.rank&&(u=!0,s=ub(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=ub(i,[1,i.shape[0],i.shape[1],i.shape[2]])),bd(4===l.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(l.rank,".")})),bd(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var c={dy:l,input:s},d={filterSize:n,strides:r,pad:a},h=vv.runKernel(wh,c,d);return u?ub(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),pE={kernelName:xh,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return fE(e,r,a,i,o)}}}},mE={kernelName:Th,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return fb(e,i,!1,!1)},b:function(){return fb(e,a,!0,!1)}}:o&&!s?{a:function(){return fb(i,e,!1,!0)},b:function(){return fb(a,e,!1,!1)}}:{a:function(){return fb(i,e,!0,!0)},b:function(){return fb(e,a,!0,!0)}}:{a:function(){return fb(e,i,!1,!0)},b:function(){return fb(a,e,!0,!1)}}}},vE={kernelName:Eh,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return mw(e,r,a)}}}},gE={kernelName:"BroadcastTo",gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var l=[],u=0;u<o.length;u++)o[u]>1&&l.push(u);return{x:function(){return Ix(e,l,!0)}}}},yE={kernelName:Mh,gradFunc:function(e){return{x:function(){return e.clone()}}}},bE={kernelName:Ah,gradFunc:function(e){return{x:function(){return Jb(e)}}}},xE={kernelName:Ih,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return $b(Bx(fx(r,a),xx(r,i)),e,Jb(e))}}}},wE={kernelName:Rh,inputsToSave:["x"],gradFunc:QT.gradFunc},kE={kernelName:Oh,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=Id(n.axis,t[0].shape)[0],i=r.map((function(e){return e[a]}));return tk(e,i,a).map((function(e){return function(){return e}}))}},SE={kernelName:Dh,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,l=n.pad,u=n.dataFormat;return bd(ib(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return Lb(a.shape,e,i,s,l,u)},filter:function(){return Bk(a,e,i.shape,s,l,u)}}}},TE={kernelName:Ph,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,l=n.dataFormat,u=n.dimRoundingMode;return{dy:function(){return Ob(e,i,o,s,l,1,u)},filter:function(){return Bk(e,a,i.shape,o,s,l,u)}}}};var EE=_v({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=ub(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=ub(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),bd(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),bd(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")})),bd(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),bd(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),bd(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:i,dy:o},l={strides:r,pad:a,filterShape:n};return vv.runKernel(jh,s,l)}}),CE={kernelName:Fh,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;bd(ib(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=(0,U.Z)(t,2),s=o[0],l=o[1];return{x:function(){return jb(s.shape,e,l,a,i)},filter:function(){return EE(s,e,l.shape,a,i)}}}},_E={kernelName:Bh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return pb(Ex(Hw(jg(n,"float32"))),e)}}}},ME={kernelName:Uh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return pb(Gw(jg(n,"float32")),e)}}}},AE={kernelName:Wh,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=Px([a],r.rank),n=Wb(e,a,i,!o);return null!=t&&(n=Ck(n,t)),n}}}},IE={kernelName:Gh,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==r?[1,1]:r;bd(ib(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var l=(0,U.Z)(t,2),u=l[0],c=l[1];return bd(4===u.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(u.rank,".")})),bd(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(c.rank,".")})),bd(u.shape[3]===c.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(u.shape[3],") must match the inChannels dimension ")+"in filter ".concat(c.shape[2],".")})),bd(ob(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),lb("depthwiseConv2d",i,o),{x:function(){return qk(u.shape,e,c,a,i,s,o)},filter:function(){return Gk(u,e,c.shape,a,i,s,o)}}}},NE={kernelName:Kh,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},s={x:a,filter:i,dy:e};return{x:function(){return vv.runKernel($h,o,n)},filter:function(){return vv.runKernel(Jh,s,n)}}}},RE={kernelName:tf,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:(0,U.Z)(t,1)[0]};return{x:function(){return vv.runKernel(nf,n)}}}},OE={kernelName:rf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0],r=pb(ax(Ex(nw(n))),2/Math.sqrt(Math.PI));return{x:function(){return pb(e,r)}}}},DE={kernelName:of,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return pb(e,n)}}}},LE={kernelName:sf,inputsToSave:["input"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{input:function(){return ub(e,n.shape)}}}},PE={kernelName:lf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return pb(e,ax(n))}}}},FE={kernelName:hf,gradFunc:function(e){return{x:function(){return Jb(e)}}}},jE={kernelName:ff,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=cy(r.shape,a.shape);return{a:function(){var t=Yb(e,jg(a,"float32")),n=uy(r.shape,i);return n.length>0?ub(Ix(t,n),r.shape):t},b:function(){var t=pb(e,jg(r,"float32")),n=uy(a.shape,i);n.length>0&&(t=ub(Ix(t,n),a.shape));var o=nw(a);return Ex(Yb(t,jg(o,"float32")))}}}},zE={kernelName:pf,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=(0,U.Z)(t,4),i=a[0],o=a[1],s=a[2],l=a[3],u=null==l?Oy(1):l,c=uy(o.shape,i.shape),d=[];if(1===o.rank){for(var h=0;h<i.shape.length-1;++h)d.push(i.shape[h]);d.push(1)}var f=Ax(i,o),p=pb(e,u),m=zw(jy(s,Oy(r))),v=pb(pb(pb(m,m),m),Oy(-.5));return{x:function(){return 1===o.rank?ub(pb(pb(e,sx(ub(m,[1,1,1,o.shape[0]]),d)),u),i.shape):ub(pb(pb(e,m),u),i.shape)},mean:function(){var e=pb(pb(m,Oy(-1)),p);return 1===o.rank&&(e=Ix(e,c)),ub(e,o.shape)},variance:function(){var e=pb(pb(v,f),p);return 1===o.rank&&(e=Ix(e,c)),ub(e,o.shape)},scale:function(){var t=pb(f,m),n=pb(e,t);return 1===o.rank&&(n=Ix(n,c)),ub(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=Ix(t,c)),ub(t,o.shape)}}}},BE={kernelName:mf,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.axis,s=Id(o,a.shape)[0];return{x:function(){var t=a.shape,n=i.size,r=t.slice(0,s),l=r.length,u=t.slice(o,t.length).slice(1),c=u.length,d=UE(0,l),h=UE(l+1,l+1+c),f=WE([r,[n],u]),p=ub(e,f),m=ub(i,[n]),v=WE([[l],d,h]),g=Ck(p,v),y=yk(g,m,a.shape[s]),b=Fx(v);return y=Ck(y,b)},indices:function(){return i}}}};function UE(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function WE(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var VE={kernelName:yf,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1];return{a:function(){return Jb(r)},b:function(){return Jb(a)}}}},ZE={kernelName:bf,gradFunc:function(e){return{x:function(){return jg(e,"float32")}}}},HE={kernelName:kf,gradFunc:function(e){return{x:function(){return Jb(e)}}}},GE={kernelName:Sf,gradFunc:function(e){return{x:function(){return Jb(e)}}}},qE={kernelName:Tf,gradFunc:function(e){return{x:function(){return Jb(e)}}}},XE={kernelName:Ef,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.alpha,i=hx(r,0);return{x:function(){return $b(i,e,pb(e,a))}}}},YE={kernelName:If,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return Yb(e,jy(n,1))}}}},KE={kernelName:Af,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return Yb(e,jg(n,"float32"))}}}},$E={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.axis;return{logits:function(){var t=ax(r);return Ax(e,pb(Ix(e,a,!0),t))}}}};var JE=_v({localResponseNormalizationBackprop_:function(e,t,n){var r={x:e,y:t,dy:n},a={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return vv.runKernel(Lf,r,a)}}),QE={kernelName:Df,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,l=n.alpha,u=n.beta;return{x:function(){return JE(a,i,e,o,s,l,u)}}}};function eC(e,t,n,r){return t.rank<n.rank&&(t=ub(t,Dx(t.shape,r))),e.rank<n.rank&&(e=ub(e,Dx(e.shape,r))),{x:function(){return pb(e,jg(Kb(n,t),e.dtype))}}}var tC={kernelName:Pf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=eC(e,t[1],a,Id(r,a.shape));return{x:function(){return i.x()}}}},nC={kernelName:Ff,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1];return{a:function(){return pb(e,jg(fx(r,a),"float32"))},b:function(){return pb(e,jg(bx(r,a),"float32"))}}}};var rC=_v({maxPool3dGrad_:function(e,t,n,r,a,i,o){var s=Tv(e,"dy","maxPool3dGrad"),l=Tv(t,"input","maxPool3dGrad"),u=Tv(n,"output","maxPool3dGrad"),c=s,d=l,h=u,f=!1;4===l.rank&&(f=!0,c=ub(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=ub(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=ub(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),bd(5===c.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(c.rank,".")})),bd(5===d.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(d.rank,".")})),bd(5===h.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(h.rank,".")})),lb("maxPool3dGrad",i,o);var p={dy:c,input:d,output:h},m={filterSize:r,strides:a,pad:i,dimRoundingMode:o},v=vv.runKernel(Uf,p,m);return f?ub(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}}),aC={kernelName:Bf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,l=n.pad,u=n.dimRoundingMode;return{x:function(){return rC(e,a,i,o,s,l,u)}}}};var iC=_v({maxPoolGrad_:function(e,t,n,r,a,i,o){var s=Tv(e,"dy","maxPoolGrad"),l=Tv(t,"input","maxPoolGrad"),u=Tv(n,"output","maxPoolGrad");bd(l.rank===s.rank,(function(){return"Rank of input (".concat(l.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),bd(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),bd(4===l.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(l.rank,".")})),lb("maxPoolGrad",i,o);var c={dy:s,input:l,output:u},d={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return vv.runKernel(zf,c,d)}}),oC={kernelName:jf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,l=n.pad;return{x:function(){return iC(e,a,i,o,s,l)}}}},sC={kernelName:Vf,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=Id(n.axis,r.shape),i=Sd(Ox(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=ub(e,t);return Yb(pb(n,Kx(r.shape,"float32")),i)}}}},lC={kernelName:Zf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=(0,U.Z)(t,2),i=a[0],o=eC(e,a[1],i,Id(r,i.shape));return{x:function(){return o.x()}}}},uC={kernelName:Hf,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1];return{a:function(){return pb(e,jg(xx(r,a),"float32"))},b:function(){return pb(e,jg(hx(r,a),"float32"))}}}},cC={kernelName:Gf,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return vb(e,a,r.shape)}}}},dC={kernelName:qf,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=cy(r.shape,a.shape);return{a:function(){var t=uy(r.shape,i);return t.length>0?ub(Ix(e,t),r.shape):e},b:function(){var t=pb(e,Ex(cx(Yb(r,a)))),n=uy(a.shape,i);return n.length>0?ub(Ix(t,n),a.shape):t}}}},hC={kernelName:Yf,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=cy(r.shape,a.shape);return{a:function(){var t=pb(e,jg(a,"float32")),n=uy(r.shape,i);return n.length>0?ub(Ix(t,n),r.shape):t},b:function(){var t=pb(e,jg(r,"float32")),n=uy(a.shape,i);return n.length>0?ub(Ix(t,n),a.shape):t}}}},fC={kernelName:Kf,gradFunc:function(e){return{x:function(){return Ex(e)}}}},pC={kernelName:tp,gradFunc:function(e){return{x:function(){return Jb(e)}}}},mC={kernelName:rp,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return bk(e,r).map((function(e){return function(){return e}}))}},vC={kernelName:ap,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return vb(e,a,r.shape)}}}},gC={kernelName:ip,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=(0,U.Z)(t,3),r=n[0],a=n[1],i=n[2],o=r,s=a,l=cy(o.shape,s.shape);return{a:function(){var t=jg(s,"float32"),n=pb(e,pb(t,gw(o,Ax(t,Oy(1))))),r=uy(o.shape,l);return r.length>0&&(n=Ix(n,r)),ub(n,o.shape)},b:function(){var t=hx(o,0),n=$b(t,Sx(o),Jb(o)),r=pb(e,pb(i,n)),a=uy(s.shape,l);return a.length>0&&(r=Ix(r,a)),ub(r,s.shape)}}}},yC={kernelName:op,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=hx(r,0);return{x:function(){return $b(i,e,pb(e,a))},alpha:function(){var t=$b(i,Jb(e),pb(e,r)),n=uy(a.shape,e.shape);return n.length>0&&(t=Ix(t,n)),ub(t,a.shape)}}}},bC={kernelName:Qh,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=cy(r.shape,a.shape);return{a:function(){var t=Yb(e,jg(a,"float32")),n=uy(r.shape,i);return n.length>0?ub(Ix(t,n),r.shape):t},b:function(){var t=pb(e,jg(r,"float32")),n=uy(a.shape,i);n.length>0&&(t=ub(Ix(t,n),a.shape));var o=nw(a);return Ex(Yb(t,jg(o,"float32")))}}}},xC={kernelName:cp,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return Yb(e,Ex(nw(n)))}}}},wC={kernelName:gp,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0],r=pb(xx(n,6),sk(n));return{x:function(){return pb(e,jg(r,"float32"))}}}},kC={kernelName:dp,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return pb(e,jg(sk(n),"float32"))}}}},SC={kernelName:hp,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return ub(e,n.shape)}}}},TC={kernelName:mp,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,U.Z)(t,1)[0]};return{images:function(){return vv.runKernel(vp,r,n)}}}},EC={kernelName:fp,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,U.Z)(t,1)[0]};return{images:function(){return vv.runKernel(pp,r,n)}}}},CC={kernelName:yp,gradFunc:function(e,t,n){var r=Id(n.dims,e.shape);return{x:function(){return Ow(e,r)}}}},_C={kernelName:bp,gradFunc:function(e){return{x:function(){return Jb(e)}}}},MC={kernelName:xp,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return Ex(Yb(e,pb(gw(n,1.5),2)))}}}},AC={kernelName:kp,inputsToSave:["condition"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{condition:function(){return jg(Jb(n),"float32")},t:function(){return pb(e,jg(n,e.dtype))},e:function(){return pb(e,jg(Ux(n),e.dtype))}}}},IC={kernelName:Sp,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){var t=hx(n,Oy(0)),r=Oy(ST),a=Oy(TT),i=pb(e,a),o=pb(pb(e,r),ax(jg(n,"float32")));return $b(t,i,o)}}}},NC={kernelName:Mp,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return pb(e,pb(n,Ax(Oy(1),n)))}}}},RC={kernelName:_p,gradFunc:function(e){return{x:function(){return Jb(e)}}}},OC={kernelName:Ep,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return pb(Bb(jg(n,"float32")),e)}}}},DC={kernelName:Cp,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return pb(Ub(jg(n,"float32")),e)}}}},LC={kernelName:Tp,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=(0,U.Z)(t,1)[0],a=n.begin,i=n.size,o=r.shape,s=xy(r,a,i),l=(0,U.Z)(s,2),u=l[0],c=l[1],d=[],h=0;h<e.rank;h++)d.push([u[h],o[h]-u[h]-c[h]]);return{x:function(){return cw(e,d)}}}},PC={kernelName:Dp,outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.dim,i=pb(e,r);return{logits:function(){return Ax(i,pb(Ix(i,[a],true),r))}}}},FC={kernelName:Ap,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return pb(e,mb(n))}}}},jC={kernelName:Rp,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return bb(e,r,a)}}}},zC={kernelName:Op,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return hb(e,r)}}}},BC={kernelName:Ip,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return Yb(e,pb(rk(jg(n,"float32")),2))}}}},UC={kernelName:Up,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return pb(e,pb(jg(n,"float32"),2))}}}},WC={kernelName:Bp,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=Oy(2);return{a:function(){return pb(e,pb(i,Ax(r,a)))},b:function(){return pb(e,pb(i,Ax(a,r)))}}}},VC={kernelName:rm,gradFunc:function(e){return{x:function(){return Jb(e)}}}},ZC={kernelName:Gp,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=cy(r.shape,a.shape);return{a:function(){var t=e,n=uy(r.shape,i);return n.length>0&&(t=Ix(t,n)),ub(t,r.shape)},b:function(){var t=e,n=uy(a.shape,i);return n.length>0&&(t=Ix(t,n)),ub(Ex(t),a.shape)}}}},HC={kernelName:Np,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=r.shape.slice();Id(n.axis,r.shape).forEach((function(e){a[e]=1}));var i=ub(e,a),o=pb(i,Kx(r.shape,"float32"));return{x:function(){return o}}}},GC={kernelName:qp,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return Yb(e,nw(Bb(n)))}}}},qC={kernelName:Xp,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return pb(Ax(Oy(1),nw(n)),e)}}}},XC={kernelName:Yp,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.reps;return{x:function(){var t=Jb(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=jy(t,vb(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=jy(t,vb(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var l=0;l<a[1];++l)for(var u=0;u<a[2];++u)t=jy(t,vb(e,[s*r.shape[0],l*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var c=0;c<a[0];++c)for(var d=0;d<a[1];++d)for(var h=0;h<a[2];++h)for(var f=0;f<a[3];++f)t=jy(t,vb(e,[c*r.shape[0],d*r.shape[1],h*r.shape[2],f*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},YC={kernelName:Jp,gradFunc:function(e,t,n){var r=Fx(n.perm);return{x:function(){return Ck(e,r)}}}},KC={kernelName:em,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return ok(e,r)}}}},$C={kernelName:tm,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return function(e,t){for(var n=qx(t,Jb(t)),r=dx(e,n),a=fx(t,Oy(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=ix(a,o+1);a=Bx(a,Kx(r.shape,"bool"));var s=Jb(r);return $b(a,r,s)}(e,n)}}}};for(var JC,QC={kernelName:nm,gradFunc:function(e){return{x:function(){return Jb(e)}}}},e_=0,t_=[QT,eE,tE,nE,rE,aE,iE,oE,sE,lE,uE,cE,hE,pE,mE,vE,gE,yE,bE,xE,wE,kE,TE,SE,CE,_E,ME,AE,IE,NE,bC,RE,OE,DE,LE,PE,jE,FE,zE,BE,VE,ZE,HE,GE,qE,XE,YE,KE,$E,QE,tC,tC,nC,aC,oC,sC,lC,uC,cC,dC,hC,fC,{kernelName:np,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return Yx(n.shape,"float32")}}}},pC,mC,vC,vC,gC,yC,xC,wC,kC,SC,TC,EC,CC,_C,MC,AC,IC,NC,RC,OC,DC,LC,PC,FC,jC,jC,zC,zC,BC,WC,UC,VC,ZC,HC,GC,qC,XC,YC,KC,$C,QC];e_<t_.length;e_++){vm(t_[e_])}function n_(){return null==JC&&(JC=vv.backend.epsilon()),JC}$m().prototype.abs=function(){return this.throwIfDisposed(),Ly(this)},$m().prototype.acos=function(){return this.throwIfDisposed(),Py(this)},$m().prototype.acosh=function(){return this.throwIfDisposed(),Fy(this)},$m().prototype.add=function(e){return this.throwIfDisposed(),jy(this,e)},$m().prototype.all=function(e,t){return this.throwIfDisposed(),By(this,e,t)},$m().prototype.any=function(e,t){return this.throwIfDisposed(),Uy(this,e,t)},$m().prototype.argMax=function(e){return this.throwIfDisposed(),Wy(this,e)},$m().prototype.argMin=function(e){return this.throwIfDisposed(),Vy(this,e)},$m().prototype.asScalar=function(){return this.throwIfDisposed(),bd(1===this.size,(function(){return"The array must have only 1 element."})),ub(this,[])},$m().prototype.asType=function(e){return this.throwIfDisposed(),jg(this,e)},$m().prototype.as1D=function(){return this.throwIfDisposed(),ub(this,[this.size])},$m().prototype.as2D=function(e,t){return this.throwIfDisposed(),ub(this,[e,t])},$m().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),ub(this,[e,t,n])},$m().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),ub(this,[e,t,n,r])},$m().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),ub(this,[e,t,n,r,a])},$m().prototype.asin=function(){return this.throwIfDisposed(),Zy(this)},$m().prototype.asinh=function(){return this.throwIfDisposed(),Hy(this)},$m().prototype.atan=function(){return this.throwIfDisposed(),Gy(this)},$m().prototype.atan2=function(e){return this.throwIfDisposed(),qy(this,e)},$m().prototype.atanh=function(){return this.throwIfDisposed(),Xy(this)},$m().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),cb(this,e,t,n,r)},$m().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),bb(this,e,t)},$m().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),xb(this,e,t,n,r,a)},$m().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Cb(this,e)},$m().prototype.cast=function(e){return this.throwIfDisposed(),jg(this,e)},$m().prototype.ceil=function(){return this.throwIfDisposed(),_b(this)},$m().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Mb(this,e,t)},$m().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Km&&(e=[e]),hb([this].concat((0,_.Z)(e)),t)},$m().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Db(this,e,t,n,r,a,i)},$m().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Pb(this,e,t,n,r,a)},$m().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Ob(this,e,t,n,r,a,i)},$m().prototype.cos=function(){return this.throwIfDisposed(),Bb(this)},$m().prototype.cosh=function(){return this.throwIfDisposed(),Ub(this)},$m().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),Wb(this,e,t,n)},$m().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Zb(this,e,t)},$m().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Hb(this,e,t,n,r,a,i)},$m().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),qb(this,e,t,n,r,a)},$m().prototype.divNoNan=function(e){return this.throwIfDisposed(),Qb(this,e)},$m().prototype.div=function(e){return this.throwIfDisposed(),Yb(this,e)},$m().prototype.dot=function(e){return this.throwIfDisposed(),ex(this,e)},$m().prototype.elu=function(){return this.throwIfDisposed(),nx(this)},$m().prototype.equal=function(e){return this.throwIfDisposed(),Kb(this,e)},$m().prototype.erf=function(){return this.throwIfDisposed(),rx(this)},$m().prototype.exp=function(){return this.throwIfDisposed(),ax(this)},$m().prototype.expandDims=function(e){return this.throwIfDisposed(),ix(this,e)},$m().prototype.expm1=function(){return this.throwIfDisposed(),ox(this)},$m().prototype.fft=function(){return this.throwIfDisposed(),Jw(this)},$m().prototype.flatten=function(){return this.throwIfDisposed(),ub(this,[this.size])},$m().prototype.floor=function(){return this.throwIfDisposed(),cx(this)},$m().prototype.floorDiv=function(e){return this.throwIfDisposed(),Xb(this,e)},$m().prototype.gather=function(e,t){return this.throwIfDisposed(),dx(this,e,t)},$m().prototype.greaterEqual=function(e){return this.throwIfDisposed(),fx(this,e)},$m().prototype.greater=function(e){return this.throwIfDisposed(),hx(this,e)},$m().prototype.ifft=function(){return this.throwIfDisposed(),Qw(this)},$m().prototype.irfft=function(){return this.throwIfDisposed(),ek(this)},$m().prototype.isFinite=function(){return this.throwIfDisposed(),mx(this)},$m().prototype.isInf=function(){return this.throwIfDisposed(),vx(this)},$m().prototype.isNaN=function(){return this.throwIfDisposed(),gx(this)},$m().prototype.leakyRelu=function(e){return this.throwIfDisposed(),yx(this,e)},$m().prototype.lessEqual=function(e){return this.throwIfDisposed(),xx(this,e)},$m().prototype.less=function(e){return this.throwIfDisposed(),bx(this,e)},$m().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),kx(this,e,t,n,r)},$m().prototype.logSigmoid=function(){return this.throwIfDisposed(),_x(this)},$m().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Nx(this,e)},$m().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),zx(this,e,t)},$m().prototype.log=function(){return this.throwIfDisposed(),Sx(this)},$m().prototype.log1p=function(){return this.throwIfDisposed(),Tx(this)},$m().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Bx(this,e)},$m().prototype.logicalNot=function(){return this.throwIfDisposed(),Ux(this)},$m().prototype.logicalOr=function(e){return this.throwIfDisposed(),Wx(this,e)},$m().prototype.logicalXor=function(e){return this.throwIfDisposed(),Vx(this,e)},$m().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),fb(this,e,t,n)},$m().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Zx(this,e,t,n,r)},$m().prototype.max=function(e,t){return this.throwIfDisposed(),Mx(this,e,t)},$m().prototype.maximum=function(e){return this.throwIfDisposed(),qx(this,e)},$m().prototype.mean=function(e,t){return this.throwIfDisposed(),Xx(this,e,t)},$m().prototype.min=function(e,t){return this.throwIfDisposed(),Jx(this,e,t)},$m().prototype.minimum=function(e){return this.throwIfDisposed(),Qx(this,e)},$m().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),ew(this,e,t)},$m().prototype.mod=function(e){return this.throwIfDisposed(),tw(this,e)},$m().prototype.mul=function(e){return this.throwIfDisposed(),pb(this,e)},$m().prototype.neg=function(){return this.throwIfDisposed(),Ex(this)},$m().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Mk(this,e,t,n)},$m().prototype.notEqual=function(e){return this.throwIfDisposed(),ow(this,e)},$m().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),sw(this,e,t,n)},$m().prototype.onesLike=function(){return this.throwIfDisposed(),lw(this)},$m().prototype.pad=function(e,t){return this.throwIfDisposed(),cw(this,e,t)},$m().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),vw(this,e,t,n,r,a,i)},$m().prototype.pow=function(e){return this.throwIfDisposed(),gw(this,e)},$m().prototype.prelu=function(e){return this.throwIfDisposed(),yw(this,e)},$m().prototype.prod=function(e,t){return this.throwIfDisposed(),bw(this,e,t)},$m().prototype.reciprocal=function(){return this.throwIfDisposed(),Iw(this)},$m().prototype.relu=function(){return this.throwIfDisposed(),Nw(this)},$m().prototype.relu6=function(){return this.throwIfDisposed(),Rw(this)},$m().prototype.reshapeAs=function(e){return this.throwIfDisposed(),ub(this,e.shape)},$m().prototype.reshape=function(e){return this.throwIfDisposed(),ub(this,e)},$m().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),SS(this,e,t,n)},$m().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),TS(this,e,t,n)},$m().prototype.reverse=function(e){return this.throwIfDisposed(),Ow(this,e)},$m().prototype.rfft=function(){return this.throwIfDisposed(),nk(this)},$m().prototype.round=function(){return this.throwIfDisposed(),jw(this)},$m().prototype.rsqrt=function(){return this.throwIfDisposed(),zw(this)},$m().prototype.selu=function(){return this.throwIfDisposed(),Bw(this)},$m().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Uw(this,e,t,n,r,a,i)},$m().prototype.sigmoid=function(){return this.throwIfDisposed(),mb(this)},$m().prototype.sign=function(){return this.throwIfDisposed(),Zw(this)},$m().prototype.sin=function(){return this.throwIfDisposed(),Hw(this)},$m().prototype.sinh=function(){return this.throwIfDisposed(),Gw(this)},$m().prototype.slice=function(e,t){return this.throwIfDisposed(),vb(this,e,t)},$m().prototype.softmax=function(e){return this.throwIfDisposed(),$w(this,e)},$m().prototype.softplus=function(){return this.throwIfDisposed(),Cx(this)},$m().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),mw(this,e,t)},$m().prototype.split=function(e,t){return this.throwIfDisposed(),tk(this,e,t)},$m().prototype.sqrt=function(){return this.throwIfDisposed(),rk(this)},$m().prototype.square=function(){return this.throwIfDisposed(),nw(this)},$m().prototype.squaredDifference=function(e){return this.throwIfDisposed(),ak(this,e)},$m().prototype.squeeze=function(e){return this.throwIfDisposed(),ik(this,e)},$m().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof Km?[this,e]:[this].concat((0,_.Z)(e));return ok(n,t)},$m().prototype.step=function(e){return this.throwIfDisposed(),sk(this,e)},$m().prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),lk(this,e,t,n,r,a,i,o,s)},$m().prototype.sub=function(e){return this.throwIfDisposed(),Ax(this,e)},$m().prototype.sum=function(e,t){return this.throwIfDisposed(),Ix(this,e,t)},$m().prototype.tan=function(){return this.throwIfDisposed(),uk(this)},$m().prototype.tanh=function(){return this.throwIfDisposed(),gb(this)},$m().prototype.tile=function(e){return this.throwIfDisposed(),sx(this,e)},$m().prototype.toBool=function(){return this.throwIfDisposed(),jg(this,"bool")},$m().prototype.toFloat=function(){return this.throwIfDisposed(),jg(this,"float32")},$m().prototype.toInt=function(){return this.throwIfDisposed(),jg(this,"int32")},$m().prototype.topk=function(e,t){return this.throwIfDisposed(),mk(this,e,t)},$m().prototype.transpose=function(e){return this.throwIfDisposed(),Ck(this,e)},$m().prototype.unique=function(e){return this.throwIfDisposed(),gk(this,e)},$m().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),yk(this,e,t)},$m().prototype.unstack=function(e){return this.throwIfDisposed(),bk(this,e)},$m().prototype.where=function(e,t){return this.throwIfDisposed(),$b(e,this,t)},$m().prototype.zerosLike=function(){return this.throwIfDisposed(),Jb(this)};var r_=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,e),Object.setPrototypeOf((0,L.Z)(r),n.prototype),r}return(0,A.Z)(n)}(z(Error)),a_=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,e),Object.setPrototypeOf((0,L.Z)(r),n.prototype),r}return(0,A.Z)(n)}(z(Error)),i_=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,e),Object.setPrototypeOf((0,L.Z)(r),n.prototype),r}return(0,A.Z)(n)}(z(Error)),o_=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,e),Object.setPrototypeOf((0,L.Z)(r),n.prototype),r}return(0,A.Z)(n)}(z(Error)),s_=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,e),Object.setPrototypeOf((0,L.Z)(r),n.prototype),r}return(0,A.Z)(n)}(z(Error));function l_(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function u_(e,t){if(!e)throw new s_(t)}function c_(e,t){var n,r=0,a=G(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(_ke){a.e(_ke)}finally{a.f()}return r}function d_(e){return 1===e.length?e[0]:e}function h_(e){return Array.isArray(e)?e:[e]}function f_(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function p_(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var m_={};function v_(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function g_(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return g_(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?g_(a):e[r]=a.value)}}function y_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var i,o=e;if(o in n)i=n[o];else if(o in m_)i=m_[o];else if(null==(i=t[o]))throw new i_("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var s=e;if(null==s.className||null==s.config)throw new i_("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");var l,u,c=s.className;if(c in n){var d=(0,U.Z)(n[c],2);l=d[0],u=d[1]}else if(c in m_){var h=(0,U.Z)(m_.className,2);l=h[0],u=h[1]}else if(c in t){var f=(0,U.Z)(t[c],2);l=f[0],u=f[1]}if(null==l)throw new i_("Unknown ".concat(r,": ").concat(c,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=u){for(var p={},m=0,v=Object.keys(m_);m<v.length;m++){var g=v[m];p[g]=m_[g]}for(var y=0,b=Object.keys(n);y<b.length;y++){var x=b[y];p[x]=n[x]}s.config.customObjects=p;for(var w=Object.assign({},m_),k=0,S=Object.keys(n);k<S.length;k++){var T=S[k];m_[T]=n[T]}g_(s.config);var E=u(l,s.config,n,a);return m_=Object.assign({},w),E}for(var C=Object.assign({},m_),_=0,M=Object.keys(n);_<M.length;_++){var A=M[_];m_[A]=n[A]}var I=new l(s.config);return m_=Object.assign({},C),I}function b_(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function x_(e){if(null==e)return e;var t,n=[],r=G(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(_ke){r.e(_ke)}finally{r.f()}return n}function w_(e){if(null==e)throw new i_("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function k_(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new i_("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function S_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return u_(n>=0),u_(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function T_(e,t){Array.isArray(e)?(bd(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return T_(e,"element ".concat(n+1," of ").concat(t))}))):bd(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(E_(e),".")}))}function E_(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return E_(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function C_(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function __(e,t){return My((function(){return rk(Ix(pb(e,e),t,!0))}))}var M_=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(Sy),A_=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,A.Z)(n,[{key:"apply",value:function(e){var t=this;return My((function(){var n=__(e,t.axis),r=Mb(n,0,t.maxValue);return pb(e,Yb(r,jy(n_(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(M_);A_.className="MaxNorm",Ey(A_);var I_=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,A.Z)(n,[{key:"apply",value:function(e){var t=this;return My((function(){return Yb(e,jy(n_(),__(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(M_);I_.className="UnitNorm",Ey(I_);var N_=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){return Nw(e)}}]),n}(M_);N_.className="NonNeg",Ey(N_);var R_=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,A.Z)(n,[{key:"apply",value:function(e){var t=this;return My((function(){var n=__(e,t.axis),r=jy(pb(t.rate,Mb(n,t.minValue,t.maxValue)),pb(1-t.rate,n));return pb(e,Yb(r,jy(n_(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(M_);R_.className="MinMaxNorm",Ey(R_);var O_={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function D_(e){return v_(e)}function L_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y_(e,Ty.getMap().classNameMap,t,"constraint")}function P_(e){return null==e?null:"string"===typeof e?L_({className:e in O_?O_[e]:e,config:{}}):e instanceof M_?e:L_(e)}var F_=["channelsFirst","channelsLast"],j_=["nearest","bilinear"],z_=["valid","same","causal"],B_=["max","avg"],U_=["sum","mul","concat","ave"],W_=new Map;function V_(e){k_(F_,"DataFormat",e)}function Z_(e){k_(z_,"PaddingMode",e)}function H_(e){k_(B_,"PoolMode",e)}var G_=[],q_="/";function X_(e,t){G_.push(e);try{var n=t();return G_.pop(),n}catch(UK){throw G_.pop(),UK}}function Y_(e){if(!J_(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===G_.length?"":G_.join(q_)+q_)+e}function K_(e){if(!J_(e))throw new Error("Not a valid tensor name: '"+e+"'");W_.has(e)||W_.set(e,0);var t=W_.get(e);if(W_.set(e,W_.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return W_.set(n,1),n}return e}var $_=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function J_(e){return!!e.match($_)}function Q_(e){return e===parseInt(e.toString(),10)}function eM(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function tM(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function nM(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function rM(e,t){if(t<e)throw new i_("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function aM(e,t){return jg(e,t)}function iM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),ub(e,n)}function oM(e,t,n){return My((function(){switch(e.rank){case 1:return qw(e,t,n);case 2:return Xw(e,[t,0],[n,e.shape[1]]);case 3:return Yw(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Kw(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return vb(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return vb(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new i_("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function sM(e,t,n){return My((function(){switch(e.rank){case 1:return qw(e,t,n);case 2:return Xw(e,[0,t],[e.shape[0],n]);case 3:return Yw(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Kw(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new i_("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function lM(e,t,n,r){return My((function(){switch(e.rank){case 1:return qw(e,t,n);case 2:switch(r){case 1:return oM(e,t,n);case 2:return sM(e,t,n);default:throw new i_("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return oM(e,t,n);case 2:return Yw(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return sM(e,t,n);default:throw new i_("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return oM(e,t,n);case 2:return Kw(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Kw(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return sM(e,t,n);default:throw new i_("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new i_("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function uM(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),hb(e,n)}function cM(e,t){switch(e.rank){case 1:return Ab([e,t]);case 2:return Ib([e,t],0);case 3:return Nb([e,t],0);case 4:return Rb([e,t],0);default:throw new i_("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function dM(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new i_("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return sx(e,t)}function hM(e){return Cw(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function fM(e,t,n,r){if(e.rank<2||t.rank<2)throw new o_("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new o_("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return Yk({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?vM(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),i=a.pop();e=ub(e,[-1,i]);var o=t.shape.slice(),s=o.pop(),l=o.pop(),u=[].concat((0,_.Z)(o),[s]),c=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=ub(Ck(t,c),[l,-1]);var d=[].concat((0,_.Z)(a),(0,_.Z)(u));return ub(Yk({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?vM(e.rank,r,"channelsLast"):null,activation:n}),d)}function pM(e,t,n){return My((function(){return t=Array.isArray(t)?ck(t,"int32"):jg(t,"int32"),dx(e,t,n)}))}function mM(e){return pb(e,e)}function vM(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new i_("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?ub(t,[1,r[0],1,1,1]):ub(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?ub(t,[1,1,1,1,r[0]]):ub(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?ub(t,[1,r[0],1,1]):ub(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?ub(t,[1,1,1,r[0]]):ub(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?ub(t,[1,r[0],1]):ub(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?ub(t,[1,1,r[0]]):ub(t,[1].concat(r))}else if(e<3)return t;throw new i_("Unsupported input rank by biasAdd: ".concat(t.rank))}function gM(e,t,n){return My((function(){return null==n&&(n="channelsLast"),V_(n),jy(e,vM(e.rank,t,n))}))}function yM(e,t,n,r){return My((function(){return Lk(e,t,n,r)}))}function bM(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}var xM=["fanIn","fanOut","fanAvg"],wM=["normal","uniform","truncatedNormal"];var kM=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(Sy),SM=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e,t){return Yx(e,t)}}]),n}(kM);SM.className="Zeros",Ey(SM);var TM=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e,t){return Kx(e,t)}}]),n}(kM);TM.className="Ones",Ey(TM);var EM=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),r=t.call(this),"object"!==typeof e)throw new i_("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new i_("config must have value set but got ".concat(e));return r.value=e.value,r}return(0,A.Z)(n,[{key:"apply",value:function(e,t){var n=this;return My((function(){return pb(Oy(n.value),Kx(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(kM);EM.className="Constant",Ey(EM);var CM=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return(0,A.Z)(n,[{key:"apply",value:function(e,t){return _w(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(kM);CM.className="RandomUniform",Ey(CM);var _M=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,A.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new o_("randomNormal does not support dType ".concat(t,"."));return hM(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(kM);_M.className="RandomNormal",Ey(_M);var MM=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,A.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new o_("truncatedNormal does not support dType ".concat(t,"."));return vk(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(kM);MM.className="TruncatedNormal",Ey(MM);var AM=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return(0,A.Z)(n,[{key:"apply",value:function(e,t){var n=this;return My((function(){if(2!==e.length||e[0]!==e[1])throw new i_("Identity matrix initializer can only be used for 2D square matrices.");return pb(n.gain,lx(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(kM);AM.className="Identity",Ey(AM);var IM=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),r=t.call(this),e.scale<0)throw new i_("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,function(e){k_(xM,"FanMode",e)}(r.mode),r.distribution=null==e.distribution?"normal":e.distribution,function(e){k_(wM,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return(0,A.Z)(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(V_(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=eM(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=eM(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=eM(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new o_("".concat(this.getClassName()," does not support dType ").concat(t,"."));return vk(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return _w(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(kM);IM.className="VarianceScaling",Ey(IM);var NM=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return(0,A.Z)(n,[{key:"getClassName",value:function(){return IM.className}}]),n}(IM);NM.className="GlorotUniform",Ey(NM);var RM=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return(0,A.Z)(n,[{key:"getClassName",value:function(){return IM.className}}]),n}(IM);RM.className="GlorotNormal",Ey(RM);var OM=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,A.Z)(n,[{key:"getClassName",value:function(){return IM.className}}]),n}(IM);OM.className="HeNormal",Ey(OM);var DM=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,A.Z)(n,[{key:"getClassName",value:function(){return IM.className}}]),n}(IM);DM.className="HeUniform",Ey(DM);var LM=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,A.Z)(n,[{key:"getClassName",value:function(){return IM.className}}]),n}(IM);LM.className="LeCunNormal",Ey(LM);var PM=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,A.Z)(n,[{key:"getClassName",value:function(){return IM.className}}]),n}(IM);PM.className="LeCunNormal",Ey(PM);var FM=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new o_("Random seed is not implemented for Orthogonal Initializer yet.");return r}return(0,A.Z)(n,[{key:"apply",value:function(e,t){var n=this;return My((function(){if(e.length<2)throw new o_("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=hM(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=$S.gramSchmidt(t);return e[0]>e[1]&&(r=Ck(r)),pb(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(kM);FM.className="Orthogonal",Ey(FM);var jM={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function zM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y_(e,Ty.getMap().classNameMap,t,"initializer")}function BM(e){return v_(e)}function UM(e){if("string"===typeof e){var t=e in jM?jM[e]:e;if("GlorotNormal"===t)return new RM;if("GlorotUniform"===t)return new NM;if("HeNormal"===t)return new OM;if("HeUniform"===t)return new DM;if("LeCunNormal"===t)return new LM;if("LeCunUniform"===t)return new PM;var n={};return n.className=t,n.config={},zM(n)}return e instanceof kM?e:zM(e)}var WM=0;function VM(){return WM++}var ZM={};function HM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in ZM||(ZM[e]=0),ZM[e]+=1,e+ZM[e].toString()}function GM(e){return Array.isArray(e)&&Array.isArray(e[0])}function qM(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function XM(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new i_("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function YM(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new i_("Expected exactly 1 Shape; got ".concat(e.length))}return e}function KM(e){var t,n=0,r=G(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(_ke){r.e(_ke)}finally{r.f()}return n}var $M="Variable",JM=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$M,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;M(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=VM(),r=null==r?$M:r,this.originalName=Y_(r),this.name=K_(this.originalName),this.trainable_=a,this.constraint=i,this.val=xk(t,this.trainable_,this.name,this.dtype)}return(0,A.Z)(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function QM(e){return e.map((function(e){return e.read()}))}function eA(e){e.forEach((function(e){e[0].write(e[1])}))}var tA=(0,A.Z)((function e(t){M(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),nA=(0,A.Z)((function e(t,n,r,a,i,o,s){M(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=VM(),null!=o&&(this.originalName=Y_(o),this.name=K_(this.originalName)),this.rank=n.length})),rA=0,aA=function(){function e(t,n){M(this,e),this.callArgs=n,this.id=rA++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=G(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(_ke){a.e(_ke)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return(0,A.Z)(e,[{key:"getConfig",value:function(){var e,t=[],n=G(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(_ke){n.e(_ke)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),iA=0,oA=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};M(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=iA++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=f_(i)+"_"+HM(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var l=r.dtype;null==l&&(l=r.inputDType),null==l&&(l="float32"),e.dtype=l}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return(0,A.Z)(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new a_("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new i_("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return d_(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return d_(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new r_("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new r_("Layer ".concat(this.name)+" is not connected, no input to return.");return d_(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new r_("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new r_("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return d_(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=h_(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=h_(this.inputSpec);if(e.length!==t.length)throw new i_("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new i_("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new i_("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new i_("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new i_("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var l=Number(s),u=a.axes[s],c=l>=0?o[l]:o[o.length+l];if(null!=u&&-1===[u,null].indexOf(c))throw new i_("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(l," of input shape to ")+"have value ".concat(u," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var d=0;d<a.shape.length;++d){var h=a.shape[d],f=r.shape[d];if(null!=h&&null!=f&&h!==f)throw new i_("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=h_(e),i=!0,o=G(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof nA)){i=!1;break}}}catch(_ke){o.e(_ke)}finally{o.f()}var s,l=!0,u=G(a);try{for(u.s();!(s=u.n()).done;){if(s.value instanceof nA){l=!1;break}}}catch(_ke){u.e(_ke)}finally{u.f()}if(i===l)throw new i_("Arguments to apply() must be all SymbolicTensors or all Tensors");return X_(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=G(h_(e));try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push(s.shape)}}catch(_ke){o.e(_ke)}finally{o.f()}n.build(d_(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&l&&(n._refCount=1)}if(n.assertInputCompatibility(e),l){var u,c=n.call(e,t),d=[],h=G(h_(c));try{for(h.s();!(u=h.n()).done;){var f=u.value;-1!==a.indexOf(f)&&(f=f.clone()),d.push(f)}}catch(_ke){h.e(_ke)}finally{h.f()}if(c=d_(d),null!=n.activityRegularizer)throw new o_("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return c}var p,m=function(e){e=h_(e);var t,n=[],r=G(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(_ke){r.e(_ke)}finally{r.f()}return d_(n)}(e),v=n.computeOutputShape(m),g="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?m[0]:m),p=null!=v&&v.length>0&&Array.isArray(v[0])?v.map((function(r,a){return new nA(g,r,n,h_(e),t,n.name,a)})):new nA(g,v,n,h_(e),t,n.name),n.addInboundNode(e,p,null,null,m,v,t),n._refCount++,null!=n.activityRegularizer)throw new o_("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return p}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new r_("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=G(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(_ke){n.e(_ke)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new r_("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new a_("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return KM(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){return QM(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;My((function(){var n=t.weights;if(n.length!==e.length)throw new i_('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=QM(n),i=0;i<a.length;++i){var o=a[i],s=n[i],l=e[i];if(!Td(o.shape,l.shape))throw new i_("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(l.shape));r.push([s,l])}eA(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new i_("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():UM("zeros"));var l=r.apply(t,n),u=new JM(l,n,e,i,o);return l.dispose(),null!=a&&this.addLoss((function(){return a.apply(u.read())})),null==i&&(i=!0),i?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=h_(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,(0,_.Z)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=h_(e);t=h_(t),n=h_(n),r=h_(r),a=qM(a),i=qM(i);var l,u=[],c=[],d=[],h=G(s);try{for(h.s();!(l=h.n()).done;){var f=l.value;u.push(f.sourceLayer),c.push(f.nodeIndex),d.push(f.tensorIndex)}}catch(_ke){h.e(_ke)}finally{h.f()}new aA({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:d,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(Sy);function sA(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,s=G(sA(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]));try{for(s.s();!(o=s.n()).done;){var l=o.value;-1===a.indexOf(l)&&a.push(l)}}catch(_ke){s.e(_ke)}finally{s.f()}}return a}var lA,uA=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:HM("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new i_("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new i_("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new i_("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new nA(r.dtype,r.batchInputShape,(0,L.Z)(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new aA({outboundLayer:(0,L.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return(0,A.Z)(n,[{key:"apply",value:function(e,t){throw new i_("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(oA);function cA(e){return dA.apply(this,arguments)}function dA(){return dA=Vn(Un().mark((function e(t){var n,r,a,i,o,s,l,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!==typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(l=e.sent,u=0;u<l.length;++u)t[r[u]]=l[u][0];Ay(a);case 12:case"end":return e.stop()}}),e)}))),dA.apply(this,arguments)}function hA(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}uA.className="InputLayer",Ey(uA),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(lA||(lA={}));var fA=function(){function e(){M(this,e),this.validationData=null}return(0,A.Z)(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),pA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;M(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return(0,A.Z)(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=G(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(_ke){n.e(_ke)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=G(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(_ke){n.e(_ke)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=G(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=G(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=G(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=G(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=G(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=G(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),mA=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.call(this)}return(0,A.Z)(n,[{key:"onEpochBegin",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a,i,o=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=Un().mark((function e(t){var a,i,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"number"===typeof(a=n[t])?(o.totals.hasOwnProperty(t)||(o.totals[t]=0),o.totals[t]=o.totals[t]+a*r):(t in o.totals?i=o.totals[t]:o.totals[t]=0,s=My((function(){return jy(o.totals[t],pb(a,r))})),o.totals[t]=s,null!=i&&i.dispose());case 2:case"end":return e.stop()}}),e)})),e.t0=Un().keys(n);case 5:if((e.t1=e.t0()).done){e.next=10;break}return i=e.t1.value,e.delegateYield(a(i),"t2",8);case 8:e.next=5;break;case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a,i,o=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=20;break}r=G(this.params.metrics),e.prev=2,i=Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.value,null!=o.totals[t]){e.next=3;break}return e.abrupt("return","continue");case 3:"number"===typeof o.totals[t]?n[t]=o.totals[t]/o.seen:My((function(){var e=pb(Yb(1,o.seen),o.totals[t]);n[t]=e,o.totals[t].dispose(),Iy(n[t])}));case 4:case"end":return e.stop()}}),e)})),r.s();case 5:if((a=r.n()).done){e.next=12;break}return e.delegateYield(i(),"t0",7);case 7:if("continue"!==e.t0){e.next=10;break}return e.abrupt("continue",10);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(2),r.e(e.t1);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[2,14,17,20]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(fA),vA=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"onTrainBegin",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Vn(Un().mark((function e(t,n){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a,i,o,s,l,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!==typeof i[o]&&(s=i[o],t.push(s.data()),n.push(a),r.push(o));return e.next=6,Promise.all(t);case 6:for(l=e.sent,u=0;u<l.length;++u)this.history[n[u]][r[u]].dispose(),this.history[n[u]][r[u]]=l[u][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fA),gA=function(e){N(n,e);var t=F(n);function n(e,r){var a;if(M(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||dT,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return jd(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():Dm();return function(){var i=null!=n?n():Dm();return i-a<t?r:(a=i,r=e.apply(void 0,arguments))}}(a.maybeWait.bind((0,L.Z)(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return(0,A.Z)(n,[{key:"maybeWait",value:function(){var e=Vn(Un().mark((function e(t,n,r){var a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,cA(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,cA(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Vn(Un().mark((function e(t,n){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,cA(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,cA(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Vn(Un().mark((function e(t,n){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,cA(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):jd(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,cA(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,cA(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(fA);function yA(e,t){return null==e&&(e={}),e instanceof fA?[e]:Array.isArray(e)&&e[0]instanceof fA?e:h_(e).map((function(e){return new gA(e,t)}))}var bA=function(){function e(){M(this,e)}return(0,A.Z)(e,null,[{key:"registerCallbackConstructor",value:function(t,n){bd(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new i_("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,(0,_.Z)(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function xA(e,t,n,r,a,i,o,s,l){var u=new vA,c=[new mA].concat((0,_.Z)(bA.createCallbacks(t)));null!=e&&c.push.apply(c,(0,_.Z)(e)),c.push(u);var d=new pA(c);return d.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:l}),{callbackList:d,history:u}}function wA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return y_(e,Ty.getMap().classNameMap,t,"layer",n)}function kA(e,t){return My((function(){"float32"!==e.dtype&&(e=jg(e,"float32"));var n=Ix(mM(e),t,!0),r=ux(n.shape,n_()),a=rk(qx(n,r));return Yb(e,a)}))}function SA(e,t){return My((function(){return Xx(mM(Ax(t,e)),-1)}))}function TA(e,t){return My((function(){return Xx(Ly(Ax(t,e)),-1)}))}function EA(e,t){return My((function(){var n=Ax(e,t),r=Mb(Ly(e),n_(),Number.MAX_VALUE),a=Ly(Yb(n,r));return pb(100,Xx(a,-1))}))}function CA(e,t){return My((function(){var n=Mb(t,n_(),Number.MAX_VALUE),r=Sx(jy(1,n)),a=Mb(e,n_(),Number.MAX_VALUE),i=Sx(jy(1,a));return Xx(mM(Ax(r,i)),-1)}))}function _A(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return My((function(){if(n)t=$w(t);else{var r=Ix(t,t.shape.length-1,!0);t=Yb(t,r)}return t=Mb(t,n_(),1-n_()),Ex(Ix(pb(jg(e,"float32"),Sx(t)),t.shape.length-1))}))}function MA(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return My((function(){var r=jg(cx(function(e){var t=[eM(e.shape)];return ub(e,t)}(e)),"int32"),a=(t=Mb(t,n_(),1-n_())).shape;return _A(ub(sw(r,a[a.length-1]),a),t,n)}))}function AA(e,t){return My((function(){var n;return n=Mb(t,n_(),1-n_()),n=Sx(Yb(n,Ax(1,n))),Xx(function(e,t){if(!Td(e.shape,t.shape))throw new i_("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return My((function(){var n=Nw(t),r=Ex(Ly(t));return jy(Ax(n,pb(t,e)),Tx(ax(r)))}))}(e,n),-1)}))}function IA(e,t){return My((function(){var n=Mb(e,n_(),1),r=Mb(t,n_(),1);return Ix(pb(e,Sx(Yb(n,r))),-1)}))}function NA(e,t){return My((function(){var n=kA(e,-1),r=kA(t,-1),a=pb(n,r);return Ex(Ix(a,-1))}))}bA.constructors={};var RA={meanSquaredError:SA,meanAbsoluteError:TA,meanAbsolutePercentageError:EA,meanSquaredLogarithmicError:CA,squaredHinge:function(e,t){return My((function(){var n=qx(0,Ax(1,pb(e,t)));return Xx(mM(n),-1)}))},hinge:function(e,t){return My((function(){var n=qx(0,Ax(1,pb(e,t)));return Xx(n,-1)}))},categoricalHinge:function(e,t){return My((function(){var n=Ix(pb(e,t),-1),r=Mx(pb(Ax(1,e),t),-1);return qx(0,jy(1,Ax(r,n)))}))},logcosh:function(e,t){return My((function(){var n=Math.log(2),r=Ax(t,e),a=Ax(jy(r,Cx(pb(-2,r))),n);return Xx(a,-1)}))},categoricalCrossentropy:_A,sparseCategoricalCrossentropy:MA,binaryCrossentropy:AA,kullbackLeiblerDivergence:IA,poisson:function(e,t){return My((function(){var n=Sx(jy(n_(),t));return Xx(Ax(t,pb(e,n)),-1)}))},cosineProximity:NA};function OA(e){if("string"===typeof e){if(e in RA)return RA[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new i_(t)}return e}function DA(e,t){return My((function(){var n=pb(.5,lw(t)),r=aM(hx(t,n),e.dtype);return Xx(Kb(e,r),-1)}))}function LA(e,t){return My((function(){return aM(Kb(Wy(e,-1),Wy(t,-1)),"float32")}))}function PA(e,t){return My((function(){return jg(Ix(Bx(Kb(e,1),Kb(t,1))),"float32")}))}function FA(e,t){return AA(e,t)}function jA(e,t){return e.rank===t.rank&&(e=ik(e,[e.rank-1])),(t=Wy(t,-1)).dtype!==e.dtype&&(t=jg(t,e.dtype)),jg(Kb(e,t),"float32")}var zA=_A,BA=MA,UA={binaryAccuracy:DA,categoricalAccuracy:LA,precision:function(e,t){return My((function(){var n=PA(e,t),r=function(e,t){return My((function(){return jg(Ix(Bx(Kb(e,0),Kb(t,1))),"float32")}))}(e,t),a=jy(n,r);return jg($b(hx(a,0),Yb(n,a),0),"float32")}))},categoricalCrossentropy:zA,sparseCategoricalCrossentropy:BA,mse:SA,MSE:SA,mae:TA,MAE:TA,mape:EA,MAPE:EA,cosine:NA};function WA(e){if(u_(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(RA);n<r.length;n++){var a=r[n];if(RA[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(UA);i<o.length;i++){var s=o[i];if(UA[s]===e){t=s;break}}return void 0!==t?t:e.name}var VA=1048576;function ZA(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!HA(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>VA&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(VA,"."))}}function HA(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!HA(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=G(e);try{for(i.s();!(a=i.n()).done;){if(!HA(a.value))return!1}}catch(_ke){i.e(_ke)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function GA(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=function(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,(0,_.Z)(s))}if(t){var l,u=G(e.layers);try{for(u.s();!(l=u.n()).done;){var c,d=l.value,h=!1,f=G(d.inboundNodes);try{for(f.s();!(c=f.n()).done;){var p=c.value;if(-1!==r.indexOf(p)){if(h){t=!1;break}h=!0}}}catch(_ke){f.e(_ke)}finally{f.f()}if(!t)break}}catch(_ke){u.e(_ke)}finally{u.f()}}return t}(e),o=["Layer (type)","Output shape","Param #"];if(i?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var l;(l=r).push.apply(l,(0,_.Z)(e.nodesByDepth[s]))}a("_".repeat(t)),qA(o,n,a),a("=".repeat(t));for(var u=e.layers,c=0;c<u.length;++c)i?XA(u[c],n,a):YA(u[c],n,r,a),a((c===u.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var d=function(e){var t;t=null!=e.collectedTrainableWeights?KM(e.collectedTrainableWeights):KM(e.trainableWeights);return t}(e),h=KM(e.nonTrainableWeights);a("Total params: ".concat(d+h)),a("Trainable params: ".concat(d)),a("Non-trainable params: ".concat(h)),a("_".repeat(t))}function qA(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function XA(e,t,n){var r;try{r=JSON.stringify(e.outputShape)}catch(_ke){r="multiple"}var a=e.name,i=e.getClassName();qA(["".concat(a," (").concat(i,")"),r,e.countParams().toString()],t,n)}function YA(e,t,n,r){var a;try{a=JSON.stringify(e.outputShape)}catch(_ke){a="multiple"}var i,o=[],s=G(e.inboundNodes);try{for(s.s();!(i=s.n()).done;){var l=i.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(l)))for(var u=0;u<l.inboundLayers.length;++u){var c=l.inboundLayers[u].name,d=l.nodeIndices[u],h=l.tensorIndices[u];o.push("".concat(c,"[").concat(d,"][").concat(h,"]"))}}}catch(_ke){s.e(_ke)}finally{s.f()}var f=e.name,p=e.getClassName(),m=0===o.length?"":o[0];qA(["".concat(f," (").concat(p,")"),a,e.countParams().toString(),m],t,r);for(var v=1;v<o.length;++v)qA(["","","",o[v]],t,r)}function KA(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function $A(e,t){if(null===e)return null;if("string"===typeof e)return p_(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];KA(t,a,i)?n.push(i):n.push($A(i,t))}return n}for(var o={},s=0,l=Object.keys(e);s<l.length;s++){var u=l[s],c=e[u];if("name"===u&&"string"===typeof c)o[u]=c;else{var d=p_(u);o[d]=$A(c,d)}}return o}function JA(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return f_(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];KA(t,a,i)?n.push(i):n.push(JA(i,t))}return n}for(var o={},s=0,l=Object.keys(e);s<l.length;s++){var u=l[s],c=e[u],d=f_(u);o[d]="name"!==u&&"className"!==u||"string"!==typeof c?JA(c,u):c}return o}var QA="3.13.0";var eI=function(){function e(t){if(M(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=G(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(_ke){a.e(_ke)}finally{a.f()}}}return(0,A.Z)(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new i_("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return jg(t,e.dtype)}catch(_ke){throw new i_("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof nA){if(null==this.id2Value[e.id])throw new i_("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new i_("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof nA){if(null==this.id2Value[e.id])throw new i_("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new i_("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&Ay(this.id2Mask)}}]),e}(),tI={},nI={};function rI(e,t,n,r){var a,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],l=s.map((function(e){return e.name})),u=[],c=t.names(),d=G(l);try{for(d.s();!(a=d.n()).done;){var h=a.value;-1!==c.indexOf(h)?u.push(t.getValue(h)):u.push(null)}}catch(_ke){d.e(_ke)}finally{d.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var f,p,m=l.join(",")+"|"+t.names().join(",");if(null==tI[m]){var v=function(e,t){bd(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=iI(e[0],t);n=a.sorted,r=a.recipientMap}else{var i,o=new Set,s=G(e);try{for(s.s();!(i=s.n()).done;){var l,u=iI(i.value,t),c=u.sorted,d=u.recipientMap,h=G(c);try{for(h.s();!(l=h.n()).done;){var f=l.value;o.has(f.name)||(n.push(f),o.add(f.name))}}catch(_ke){h.e(_ke)}finally{h.f()}var p=function(e){null==r[e]&&(r[e]=new Set),d[e].forEach((function(t){return r[e].add(t)}))};for(var m in d)p(m)}}catch(_ke){s.e(_ke)}finally{s.f()}}return{sorted:n,recipientCounts:aI(r)}}(s,t);f=v.sorted,p=v.recipientCounts,tI[m]=f,nI[m]=p}f=tI[m],p={},i||Object.assign(p,nI[m]);for(var g=new eI(t),y=0;y<f.length;++y){if(null!=r){var b=_y().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=f[y],w=x.sourceLayer;if(!(w instanceof uA)){var k,S=[],T=[],E=[],C=!1,_=G(x.inputs);try{for(_.s();!(k=_.n()).done;){var M=k.value,A=g.getValue(M),I=g.getMask(M);S.push(A),T.push(I),null!=I&&(C=!0),i||(p[M.name]--,0!==p[M.name]||t.hasKey(M)||-1!==l.indexOf(M.name)||A.isDisposed||!0===M.sourceLayer.stateful||E.push(A))}}catch(_ke){_.e(_ke)}finally{_.f()}C&&((n=n||{}).mask=T[0]);var N=h_(w.apply(S,n)),R=null;w.supportsMasking&&(R=w.computeMask(S,T));for(var O=oI(x),D=Array.isArray(O)?O:[O],L=0;L<D.length;++L){g.hasKey(D[L])||g.add(D[L],N[L],Array.isArray(R)?R[0]:R);var P=l.indexOf(D[L].name);-1!==P&&(u[P]=N[L])}i||Ay(E)}}return g.disposeMasks(),o?u:u[0]}function aI(e){var t={};for(var n in e)t[n]=e[n].size;return t}function iI(e,t){var n,r=new Set,a=[],i={},o=G(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(_ke){o.e(_ke)}finally{o.f()}var l=[],u=[];for(l.push(e);l.length>0;){var c=l[l.length-1];if(r.has(c.name))l.pop();else{var d=u[u.length-1]===l.length-1;if(0===c.inputs.length||d)l.pop(),a.push(c),r.add(c.name),d&&u.pop();else{u.push(l.length-1);var h,f=G(c.inputs);try{for(f.s();!(h=f.n()).done;){var p=h.value;null==i[p.name]&&(i[p.name]=new Set),i[p.name].add(c.name),r.has(p.name)||l.push(p)}}catch(_ke){f.e(_ke)}finally{f.f()}}}}return{sorted:a,recipientMap:i}}function oI(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=G(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(_ke){i.e(_ke)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}var sI=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=HM(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],x_(r.inputs).length!==r.inputs.length)throw new i_("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));x_(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=G(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=s.sourceLayer,u=s.nodeIndex,c=s.tensorIndex;r.outputLayers.push(l),r.outputLayersNodeIndices.push(u),r.outputLayersTensorIndices.push(c)}}catch(_ke){o.e(_ke)}finally{o.f()}var d,h=G(r.inputs);try{for(h.s();!(d=h.n()).done;){var f=d.value,p=f.sourceLayer,m=f.nodeIndex,v=f.tensorIndex;u_(0===m,"input layer has >1 nodes"),u_(0===v,"input layer has >1 tensors"),r.inputLayers.push(p),r.inputLayersNodeIndices.push(m),r.inputLayersTensorIndices.push(v)}}catch(_ke){h.e(_ke)}finally{h.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var g=0;g<r.inputLayers.length;g++){var y=r.inputLayers[g];if(!(y instanceof uA))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(g," (0-based) originates ")+"from layer type ".concat(y.getClassName(),"."));r.inputNames.push(y.name),r.feedInputShapes.push(y.batchInputShape),r.feedInputNames.push(y.name)}var b,x=G(r.outputLayers);try{for(x.s();!(b=x.n()).done;){var w=b.value;r.outputNames.push(w.name)}}catch(_ke){x.e(_ke)}finally{x.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var k,S={},T={},E={},C={},_={},A=[],I=function e(t,a,i,o,s,l){null!=o&&null!=s&&null!=l||(o=t.sourceLayer,s=t.nodeIndex,l=t.tensorIndex);var u=o.inboundNodes[s];if(-1!==i.indexOf(u))throw new a_("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(u)){r.containerNodes.add(n.nodeKey(o,s)),o.id in _||(_[o.id]=Object.keys(_).length),-1===i.indexOf(u)&&i.push(u);for(var c=u.inboundLayers.length,d=0;d<c;d++){e(u.inputTensors[d],a,i,u.inboundLayers[d],u.nodeIndices[d],u.tensorIndices[d])}for(a.push(u);i.indexOf(u)>=0;)i.splice(i.indexOf(u),1);A.push(u)}},N=[],R=[],O=G(r.outputs);try{for(O.s();!(k=O.n()).done;){I(k.value,N,R)}}catch(_ke){O.e(_ke)}finally{O.f()}var D,P=G(A.slice().reverse());try{for(P.s();!(D=P.n()).done;){var F=D.value;T[F.id]=F,F.id in S||(S[F.id]=0);var j=S[F.id],z=null==E[F.outboundLayer.id]?0:E[F.outboundLayer.id];j=Math.max(j,z),E[F.outboundLayer.id]=j,C[F.outboundLayer.id]=F.outboundLayer,S[F.id]=j;for(var B=0;B<F.inboundLayers.length;B++){var U=F.inboundLayers[B],W=F.nodeIndices[B],V=U.inboundNodes[W],Z=null==S[V.id]?0:S[V.id];S[V.id]=Math.max(j+1,Z),T[V.id]=V}}}catch(_ke){P.e(_ke)}finally{P.f()}var H={};for(var q in S){var X=S[q];X in H||(H[X]=[]),H[X].push(T[q])}var Y={};for(var K in E){var $=E[K];$ in Y||(Y[$]=[]),Y[$].push(C[K])}var J=Object.keys(Y).map((function(e){return parseInt(e,10)})).sort(b_);r.layers=[];var Q,ee=G(J);try{for(ee.s();!(Q=ee.n()).done;){var te=Y[Q.value];te.sort((function(e,t){var n=_[e.id],r=_[t.id];return n<r?-1:n>r?1:0}));var ne,re=G(te);try{for(re.s();!(ne=re.n()).done;){var ae=ne.value;ae instanceof n&&r.internalContainerRefs.push(ae),r.layers.push(ae)}}catch(_ke){re.e(_ke)}finally{re.f()}}}catch(_ke){ee.e(_ke)}finally{ee.f()}r.layersByDepth=Y,J=Object.keys(H).map((function(e){return parseInt(e,10)})).sort(b_);var ie,oe=r.inputs.slice(),se=[],le=G(J);try{for(le.s();!(ie=le.n()).done;){var ue,ce=G(H[ie.value]);try{for(ce.s();!(ue=ce.n()).done;){var de=ue.value,he=de.outboundLayer;if(null!=he){var fe,pe=G(de.inputTensors);try{for(pe.s();!(fe=pe.n()).done;){var me=fe.value;if(-1===oe.indexOf(me))throw new a_("Graph disconnected: cannot obtain value for tensor ".concat(me)+' at layer "'.concat(he.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(se))}}catch(_ke){pe.e(_ke)}finally{pe.f()}var ve,ge=G(de.outputTensors);try{for(ge.s();!(ve=ge.n()).done;){var ye=ve.value;oe.push(ye)}}catch(_ke){ge.e(_ke)}finally{ge.f()}se.push(he.name)}}}catch(_ke){ce.e(_ke)}finally{ce.f()}}}catch(_ke){le.e(_ke)}finally{le.f()}r.nodesByDepth=H;var be,xe=r.layers.map((function(e){return e.name})),we=G(xe);try{var ke=function(){var e=be.value,t=xe.filter((function(t){return t===e})).length;if(1!==t)throw new a_('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(xe))};for(we.s();!(be=we.n()).done;)ke()}catch(_ke){we.e(_ke)}finally{we.f()}return r.outboundNodes=[],r.inboundNodes=[],new aA({outboundLayer:(0,L.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return(0,A.Z)(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=G(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(_ke){n.e(_ke)}finally{n.f()}var a,i=G(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(_ke){i.e(_ke)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new i_("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=G(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(_ke){n.e(_ke)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=G(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,_.Z)(r.nonTrainableWeights))}}catch(_ke){n.e(_ke)}finally{n.f()}if(!this.trainable){var a,i=[],o=G(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,(0,_.Z)(s.trainableWeights))}}catch(_ke){o.e(_ke)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=G(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=G(t.value.weights);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(null!=r[l.originalName])throw new i_("Duplicate weight name: ".concat(l.originalName));r[l.originalName]=l,a++}}catch(_ke){s.e(_ke)}finally{s.f()}}}catch(_ke){i.e(_ke)}finally{i.f()}var u=[];for(var c in e){var d=c;if(null==r[c]){var h=c.split("/");d=h.slice(0,-2).concat([h[h.length-1]]).join("/")}if(null!=r[d])u.push([r[d],e[c]]);else if(n)throw new i_("Provided weight data has no target variable: ".concat(c));delete r[d]}if(n){var f=[];for(var p in r)f.push(p);if(f.length>0)throw new i_("".concat(f.length," of ").concat(a," weights are not set: ")+"".concat(f))}eA(u)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(QA),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=JA(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return My((function(){e=h_(e);for(var r=new eI,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return rI(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return My((function(){var r;return e=h_(e),r=null==t?l_(null,e.length):h_(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=qM(e);if(t.length!==this.inputLayers.length)throw new i_("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(b_);if(o.length>1){var s,l=G(o);try{for(l.s();!(s=l.n()).done;){var u,c=s.value,d=G(this.nodesByDepth[c]);try{for(d.s();!(u=d.n()).done;){var h=u.value,f=h.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(f.id)){for(var p=[],m=0;m<h.inboundLayers.length;m++){var v=h.inboundLayers[m],g=h.nodeIndices[m],y=h.tensorIndices[m],b=n["".concat(v.name,"_").concat(g,"_").concat(y)];p.push(b)}for(var x=qM(f.computeOutputShape(d_(p))),w=f.inboundNodes.indexOf(h),k=0;k<x.length;k++){n["".concat(f.name,"_").concat(w,"_").concat(k)]=x[k]}}}}catch(_ke){d.e(_ke)}finally{d.f()}}}catch(_ke){l.e(_ke)}finally{l.f()}}for(var S=[],T=[],E=0;E<this.outputLayers.length;E++){var C=this.outputLayers[E],_=this.outputLayersNodeIndices[E],M=this.outputLayersTensorIndices[E],A="".concat(C.name,"_").concat(_,"_").concat(M);T.push(A)}for(var I=0;I<T.length;I++){var N=T[I];u_(N in n),S.push(n[N])}return d_(S)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=l_(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}var s,l=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(b_),u=G(l);try{for(u.s();!(s=u.n()).done;){var c,d=s.value,h=G(this.nodesByDepth[d]);try{for(h.s();!(c=h.n()).done;){var f,p=c.value,m=p.outboundLayer,v=p.inputTensors,g=p.outputTensors,y=new Array,b=G(v);try{for(b.s();!(f=b.n()).done;){var x=f.value;x.id in n&&y.push(n[x.id])}}catch(_ke){b.e(_ke)}finally{b.f()}if(y.length===v.length){var w={},k=void 0,S=void 0,T=void 0,E=void 0;if(null!=p.callArgs&&(w=p.callArgs),1===y.length){var C=(0,U.Z)(y[0],2),_=C[0],M=C[1];null==w.mask&&(w.mask=M),T=h_(m.call(_,w)),E=h_(m.computeMask(_,M)),k=[_],S=[M]}else k=y.map((function(e){return e[0]})),S=y.map((function(e){return e[1]})),null==w.mask&&(w.mask=S),T=h_(m.call(k,w)),E=h_(m.computeMask(k,S));if(m.activityRegularizer)throw new o_("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var A=0;A<g.length;++A){var I=g[A],N=T[A],R=E[A];n[I.id]=[N,R]}}}}catch(_ke){h.e(_ke)}finally{h.f()}}}catch(_ke){u.e(_ke)}finally{u.f()}var O,D=[],L=[],P=[],F=G(this.outputs);try{for(F.s();!(O=F.n()).done;){var j=O.value;u_(j.id in n,"Could not compute output ".concat(j.name," : ").concat(j.id));var z=(0,U.Z)(n[j.id],2),B=z[0],W=z[1];P.push(B.shape),D.push(B),L.push(W)}}catch(_ke){F.e(_ke)}finally{F.f()}return[D,L,P]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=G(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var l=n.nodeKey(o,s);this.containerNodes.has(l)&&(a[l]=t,t+=1)}}}catch(_ke){i.e(_ke)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new i_("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new i_("Provide either a layer name or layer index");var n,r=G(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(_ke){r.e(_ke)}finally{r.f()}throw new i_("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return My((function(){var t,r=[],a=G(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,(0,_.Z)(i.calculateLosses()))}}catch(_ke){a.e(_ke)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=G(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),l=o.getConfig(),u=[],c=0;c<o.inboundNodes.length;c++){var d=o.inboundNodes[c],h=n.nodeKey(o,c),f={};if(this.containerNodes.has(h)){if(d.callArgs)try{JSON.stringify(d.callArgs),f=d.callArgs}catch(_ke){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(d.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),f={}}if(d.inboundLayers.length>0){for(var p=[],m=0;m<d.inboundLayers.length;m++){var v=d.inboundLayers[m],g=d.nodeIndices[m],y=d.tensorIndices[m],b=r[n.nodeKey(v,g)];null==b&&(b=0),p.push([v.name,b,y,f])}u.push(p)}}}var x={};x.name=o.name,x.className=s,x.config=l,x.inboundNodes=u,a.push(x)}}catch(_ke){i.e(_ke)}finally{i.f()}t.layers=a;for(var w=[],k=0;k<this.inputLayers.length;k++){var S=this.inputLayers[k],T=this.inputLayersNodeIndices[k],E=n.nodeKey(S,T);if(this.containerNodes.has(E)){var C=r[E];null!==C&&void 0!==C||(C=0);var _=this.inputLayersTensorIndices[k];w.push([S.name,C,_])}}t.inputLayers=w;for(var M=[],A=0;A<this.outputLayers.length;A++){var I=this.outputLayers[A],N=this.outputLayersNodeIndices[A],R=n.nodeKey(I,N);if(this.containerNodes.has(R)){var O=r[R];null!==O&&void 0!==O||(O=0);var D=this.outputLayersTensorIndices[A];M.push([I.name,O,D])}}return t.outputLayers=M,t}},{key:"stateful",get:function(){if(this._stateful)throw new i_("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=G(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(_ke){t.e(_ke)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;My((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=G(t);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l[0],c=l[1],d=l[2];if(n=null==l[3]?{}:l[3],!(u in r))return void i(e,t);var h=r[u];if(h.inboundNodes.length<=c)return void i(e,t);var f=h.inboundNodes[c];o.push(f.outputTensors[d])}}catch(_ke){s.e(_ke)}finally{s.f()}o.length>0&&e.apply(d_(o),n)}function s(e){var a=e.name,o=wA(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new i_("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var l,u=t.name,c=t.layers,d=G(c);try{for(d.s();!(l=d.n()).done;){s(l.value)}}catch(_ke){d.e(_ke)}finally{d.f()}for(;!w_(a);){var h,f=G(c);try{for(f.s();!(h=f.n()).done;){var p=h.value,m=r[p.name];if(m.name in a){var v=a[m.name];delete a[m.name];var g,y=G(v);try{for(y.s();!(g=y.n()).done;){o(m,g.value)}}catch(_ke){y.e(_ke)}finally{y.f()}}}}catch(_ke){f.e(_ke)}finally{f.f()}}var b,x=[],w=[],k=G(t.inputLayers);try{for(k.s();!(b=k.n()).done;){var S=b.value,T=S[0],E=S[1],C=S[2];u_(T in r);var _=r[T].inboundNodes[E].outputTensors;x.push(_[C])}}catch(_ke){k.e(_ke)}finally{k.f()}var M,A=G(t.outputLayers);try{for(A.s();!(M=A.n()).done;){var I=M.value,N=I[0],R=I[1],O=I[2];u_(N in r);var D=r[N].inboundNodes[R].outputTensors;w.push(D[O])}}catch(_ke){A.e(_ke)}finally{A.f()}return new e({inputs:x,outputs:w,name:u})}}]),n}(oA);function lI(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function uI(e,t){return lI(e,t,"classWeight")}function cI(e,t,n,r){return dI.apply(this,arguments)}function dI(){return dI=Vn(Un().mark((function e(t,n,r,a){var i,o,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return i=My((function(){if(1===t.shape.length)return zg(t);if(2===t.shape.length){if(t.shape[1]>1){return Wy(t,1)}if(1===t.shape[1])return ub(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),Ay(i),s=[],o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",ck(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)}))),dI.apply(this,arguments)}function hI(e,t){return pb(e,t)}var fI=32;function pI(e,t){var n,r,a=t;n=a.xs,r=a.ys,bd(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var i=mI("input",e.inputNames,n),o=mI("output",e.outputNames,r),s=i[0].shape[0];bd(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),bd(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var l=function(t){bd(i[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},u=0;u<i.length;u++)l(u);for(var c=function(t){bd(o[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},d=0;d<o.length;d++)c(d);return{xs:i,ys:o}}function mI(e,t,n){if(n instanceof Km)return[n];if(Array.isArray(n))return bd(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],i=G(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null==n[o])throw new i_("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));a.push(n[o])}}catch(_ke){i.e(_ke)}finally{i.f()}return a}function vI(e){if(3===e.length)throw new o_("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function gI(e,t,n){return yI.apply(this,arguments)}function yI(){return yI=Vn(Un().mark((function e(t,n,r){var a,i,o,s,l,u,c,d,h,f,p,m,v,g,y,b,x,w,k,S,T,E,C,_,M,A,I,N,R,O,D,L,P;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,bd(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),bd(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),bd(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),bd(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),bd(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(i=null!=r.validationData)&&(xI(r.validationData)?bd(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(l=vI(r.validationData),o=l.xs,s=l.ys)),u=t.makeTrainFunction(),c=t.getDedupedMetricsNames(),d=i?c.slice().concat(c.map((function(e){return"val_"+e}))):c.slice(),h=yA(r.callbacks,r.yieldEvery),f=null==r.verbose?1:r.verbose,p=xA(h,f,r.epochs,null,null,bI(n,r),null,i,d),m=p.callbackList,v=p.history,m.setModel(t),t.history=v,e.next=22,m.onTrainBegin();case 22:return t.stopTraining_=!1,g=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:y=e.sent;case 27:if(!(g<r.epochs)){e.next=98;break}return b={},e.next=31,m.onEpochBegin(g);case 31:if(x=0,w=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:y=e.sent;case 37:if(a&&!(x<r.batchesPerEpoch)){e.next=91;break}return e.next=40,y.next();case 40:if(k=e.sent,!a||!k.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(x," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==k.value){e.next=73;break}return S=pI(t,k.value),T=S.xs,E=S.ys,(C={}).batch=w,C.size=T[0].shape[0],e.next=51,m.onBatchBegin(w,C);case 51:if(_=[],null==r.classWeight){e.next=64;break}M=uI(r.classWeight,t.outputNames),A=0;case 55:if(!(A<M.length)){e.next=64;break}return e.t0=_,e.next=59,cI(E[A],null,M[A]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++A,e.next=55;break;case 64:for(I=T.concat(E).concat(_),N=u(I),Ay(I),R=0;R<c.length;++R)O=c[R],D=N[R],C[O]=D,Iy(D);return e.next=70,m.onBatchEnd(w,C);case 70:hA(C),w++,x++;case 73:if(!(a?x>=r.batchesPerEpoch:k.done)){e.next=87;break}if(!i){e.next=86;break}if(L=void 0,!xI(r.validationData)){e.next=84;break}return e.t2=h_,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,L=(0,e.t2)(e.t3),e.next=85;break;case 84:L=h_(t.evaluate(o,s,{batchSize:null==r.validationBatchSize?fI:r.validationBatchSize,verbose:0}));case 85:for(P=0;P<t.metricsNames.length;++P)b["val_".concat(t.metricsNames[P])]=L[P];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,m.onEpochEnd(g,b);case 93:if(g++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,m.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),yI.apply(this,arguments)}function bI(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function xI(e){return"function"===typeof e.iterator}function wI(e,t,n){return kI.apply(this,arguments)}function kI(){return kI=Vn(Un().mark((function e(t,n,r){var a,i,o,s,l,u,c,d,h;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,o=[],!(r.verbose>0)){e.next=6;break}throw new o_("Verbose mode is not implemented yet.");case 6:if(bd(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),"function"!==typeof n.next){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,l=0,u=0,c=Un().mark((function e(){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,o=My((function(){if(n.value){var e=pI(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),c=My((function(){return i(s)}));if(Ay(s),0===u)for(var d=0;d<c.length;++d)o.push(Oy(0));for(var h=s[0].shape[0],f=function(e){var t=c[e],n=o[e];o[e]=My((function(){return jy(o[e],pb(h,t))})),u>0&&Ay(n)},p=0;p<c.length;++p)f(p);Ay(c),l+=h,++u}return o})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(u<r.batches)){e.next=25;break}return e.delegateYield(c(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(d=0;d<o.length;++d)h=o[d],o[d]=Yb(o[d],l),Ay(h);return e.abrupt("return",d_(o));case 27:case"end":return e.stop()}}),e)}))),kI.apply(this,arguments)}function SI(e){bd(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function TI(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return oM(e,t,n-t)})):oM(e,t,n-t)}function EI(e,t){return My((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return EI(e,t)})):pM(e,"int32"===t.dtype?t:jg(t,"int32"))}))}function CI(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function _I(e,t,n,r,a,i,o,s,l,u,c,d,h,f,p){return MI.apply(this,arguments)}function MI(){return MI=Vn(Un().mark((function e(t,n,r,a,i,o,s,l,u,c,d,h,f,p,m){var v,g,y,b,x,w,k,S;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==i&&(i=32),null==o&&(o=1),null==d&&(d=!0),null==f&&(f=0),v=!1,null!=u&&null!=c&&(v=!0),null==m){e.next=10;break}if(v=!0,null!=p){e.next=10;break}throw new i_("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(g=t.checkNumSamples(r,i,p,"steps_per_epoch"))&&(y=rM(0,g)),null==s&&(s=1),b=xA(l,s,o,f,g,p,i,v,h),x=b.callbackList,w=b.history,x.setModel(t),t.history=w,e.next=18,x.onTrainBegin();case 18:t.stopTraining_=!1,k=Un().mark((function e(){var o,s,l,h,f;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.onEpochBegin(S);case 2:if(o={},null==p){e.next=7;break}throw new o_("stepsPerEpoch mode is not implemented yet.");case 7:if("batch"!==d){e.next=11;break}throw new o_("batch shuffling is not implemneted yet");case 11:d&&pd(y);case 12:s=ck(y),l=CI(g,i),h=Un().mark((function e(d){var h;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h={},e.next=3,x.onBatchBegin(d,h);case 3:return My((function(){var e=l[d][0],f=l[d][1],p=oM(s,e,f-e);h.batch=d,h.size=f-e;for(var m=EI(r,p),g=n(m),y=0;y<a.length;++y){var b=a[y],x=g[y];h[b]=x,Iy(x)}if(d===l.length-1&&v)for(var w=t.testLoop(u,c,i),k=0;k<a.length;++k){var S=a[k],T=w[k];Iy(T),o["val_"+S]=T}})),e.next=6,x.onBatchEnd(d,h);case 6:if(hA(h),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),f=0;case 16:if(!(f<l.length)){e.next=24;break}return e.delegateYield(h(f),"t0",18);case 18:if("break"!==e.t0){e.next=21;break}return e.abrupt("break",24);case 21:++f,e.next=16;break;case 24:s.dispose();case 25:return e.next=27,x.onEpochEnd(S,o);case 27:if(!t.stopTraining_){e.next=29;break}return e.abrupt("return","break");case 29:case"end":return e.stop()}}),e)})),S=f;case 21:if(!(S<o)){e.next=29;break}return e.delegateYield(k(),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++S,e.next=21;break;case 29:return e.next=31,x.onTrainEnd();case 31:return e.next=33,t.history.syncData();case 33:return e.abrupt("return",t.history);case 34:case"end":return e.stop()}}),e)}))),MI.apply(this,arguments)}function AI(e,t,n){return II.apply(this,arguments)}function II(){return II=Vn(Un().mark((function e(t,n,r){var a,i,o,s,l,u,c,d,h,f,p,m,v,g,y,b,x,w,k,S,T,E,C,_,M=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=M.length>3&&void 0!==M[3]?M[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,SI(p=null==a.batchSize?32:a.batchSize),!1,e.next=10,t.standardizeUserData(n,r,a.sampleWeight,a.classWeight,false,p);case 10:if(m=e.sent,i=m[0],o=m[1],f=m[2],v=!1,!(null!=a.validationData&&a.validationData.length>0)){e.next=36;break}if(v=!0,2!==a.validationData.length){e.next=22;break}u=a.validationData[0],c=a.validationData[1],e.next=27;break;case 22:if(3!==a.validationData.length){e.next=26;break}throw new o_("validationData including sample weights is not supported yet.");case 26:throw new i_("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(a.validationData," is invalid."));case 27:return!0,e.next=30,t.standardizeUserData(u,c,null,null,true,p);case 30:y=e.sent,d=y[0],h=y[1],g=d.concat(h),e.next=37;break;case 36:null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1?(v=!0,b=Math.floor(i[0].shape[0]*(1-a.validationSplit)),x=i[0].shape[0],d=TI(i,b,x),s=i,i=TI(i,0,b),h=TI(o,b,x),l=o,o=TI(o,0,b),g=d.concat(h)):null!=a.validationSteps&&(v=!0);case 37:return w=i.concat(o).concat(f),t.checkTrainableWeightsConsistency(),k=t.makeTrainFunction(),S=t.getDedupedMetricsNames(),v?(t.makeTestFunction(),T=t.testFunction,E=S.slice().concat(S.map((function(e){return"val_"+e})))):(T=null,g=[],E=S.slice()),C=yA(a.callbacks,a.yieldEvery),e.next=45,_I(t,k,w,S,p,a.epochs,a.verbose,C,T,g,a.shuffle,E,a.initialEpoch,null,null);case 45:return _=e.sent,e.abrupt("return",_);case 47:return e.prev=47,t.isTraining=!1,RI(i,n),RI(o,r),RI(s,n),RI(l,r),RI(d,u),RI(h,c),null!=f&&Ay(f),e.finish(47);case 57:case"end":return e.stop()}}),e,null,[[4,,47,57]])}))),II.apply(this,arguments)}function NI(e){var t=[];e instanceof Km&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(iM(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function RI(e,t){if(null!=e){var n=[];if(t instanceof Km)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof Km)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function OI(e){return Array.isArray(e)}function DI(e){return!function(e){return e instanceof Km}(e)&&!OI(e)}function LI(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(OI(e)&&e.length>0)o=!0;else if(DI(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new i_("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(DI(e)){r=[];var l,u=G(t);try{for(u.s();!(l=u.n()).done;){var c=l.value;if(null==e[c])throw new i_('No data provided for "'.concat(c,'". Need data for each key in: ')+"".concat(t));r.push(e[c])}}catch(_ke){u.e(_ke)}finally{u.f()}}else if(OI(e)){if(e.length!==t.length)throw new i_("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new i_("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=NI(r),null!=n)for(var d=0;d<t.length;++d)if(null!=n[d]){var h=r[d];if(h.shape.length!==n[d].length)throw new i_("Error when checking ".concat(i,": expected ").concat(t[d]," ")+"to have ".concat(n[d].length," dimension(s). but got array with ")+"shape ".concat(h.shape));for(var f=0;f<n[d].length;++f)if(0!==f||a){var p=h.shape[f],m=n[d][f];if(null!=m&&m>=0&&p!==m)throw new i_("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[d].slice(1,n[d].length),"] ")+"(i.e.,tensor shape [*,".concat(n[d].slice(1,n[d].length),"])")+" but the ".concat(i," received an input with ").concat(h.shape[0])+" examples, each with shape [".concat(h.shape.slice(1,h.shape.length),"]")+" (tensor shape [".concat(h.shape,"])"))}}return r}function PI(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new i_("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new i_("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new i_("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var l=0;l<n[o].length;++l)if(0!==l||a){var u=s.shape[l],c=n[o][l];if(null!=c&&c!==u)throw new i_("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var FI=function(e){N(r,e);var n=F(r);function r(e){var t;return M(this,r),(t=n.call(this,e)).isTraining=!1,t}return(0,A.Z)(r,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new i_("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");GA(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return uT.adagrad(.01)},Adadelta:function(){return uT.adadelta(1,.95,n_())},Adam:function(){return uT.adam(.001,.9,.999,n_())},Adamax:function(){return uT.adamax(.002,.9,.999,n_(),0)},RMSProp:function(){return uT.rmsprop(.001,.9,0,n_())},SGD:function(){return uT.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new i_("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Dy))throw new i_("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new i_("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return OA(e)}))}else{var a=OA(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var i in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(i))throw new i_('Unknown entry in loss dictionary: "'.concat(i,'". ')+"Only expected the following keys: ".concat(this.outputNames));var o,s=G(this.outputNames);try{for(s.s();!(o=s.n()).done;){var l=o.value;null==e.loss[l]&&console.warn('Output "'.concat(l,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(l," during training")),n.push(OA(e.loss[l]))}}catch(_ke){s.e(_ke)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var u=0;u<this.outputs.length;++u){var c=this.internalOutputShapes[u],d=this.outputNames[u];this.feedOutputNames.push(d),this.feedOutputShapes.push(c),this.feedLossFns.push(this.lossFunctions[u])}var h=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],X_("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===h.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var f=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=G(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(_ke){i.e(_ke)}finally{i.f()}return a}(e.metrics,this.outputNames);X_("metric",(function(){for(var e=function(e){if(-1!==h.indexOf(e))return"continue";!function(n){var r,a,i,o,s=G(n);try{var l=function(){var n,s=o.value;if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){var l,u=t.internalOutputShapes[e];1===u[u.length-1]||t.lossFunctions[e]===AA?-1!==["accuracy","acc"].indexOf(s)?a=DA:-1!==["crossentropy","ce"].indexOf(s)&&(a=FA):t.lossFunctions[e]===MA?-1!==["accuracy","acc"].indexOf(s)?a=jA:-1!==["crossentropy","ce"].indexOf(s)&&(a=BA):-1!==["accuracy","acc"].indexOf(s)?a=LA:-1!==["crossentropy","ce"].indexOf(s)&&(a=zA),-1!==["accuracy","acc"].indexOf(s)?l="acc":-1!==["crossentropy","ce"].indexOf(s)&&(l="ce"),i=a,r=""+l}else{var c=function(e){if("string"===typeof e&&e in UA)return UA[e];if("string"!==typeof e&&null!=e)return e;throw new i_("Unknown metric ".concat(e))}(s);i=c,r=""+WA(s)}X_(r,(function(){n=i})),function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])}(e,r,n)};for(s.s();!(o=s.n()).done;)l()}catch(_ke){s.e(_ke)}finally{s.f()}}(f[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;SI(r);var a=this.standardizeUserDataXY(e,t,!0,r);try{var i=a[0].concat(a[1]);this.makeTestFunction();var o=this.testFunction;return d_(this.testLoop(o,i,r,n.verbose,n.steps))}finally{RI(a[0],e),RI(a[1],t)}}},{key:"evaluateDataset",value:function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",wI(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new i_("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new i_("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new i_("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new eI;if(e instanceof Km&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new i_("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var s,l=G(this.inputs);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=e[u.name];if(null==c)throw new i_("No value is provided for the model's input ".concat(u.name));i.add(u,c)}}catch(_ke){l.e(_ke)}finally{l.f()}}var d=rI(a,i);return n?d:d[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=l_(null,e.length),r=e.length,a=G(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),l=0;l<e.length;++l){var u=s.indexOf(e[l]);if(-1!==u&&(n[l]=o[u],r--),0===r)break}if(0===r)break}}catch(_ke){a.e(_ke)}finally{a.f()}if(r>0){var c=[];throw n.forEach((function(t,n){null==t&&c.push(e[n])})),new i_("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(c)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return My((function(){var a=t.checkNumSamples(e);if(r)throw new o_("Verbose predictLoop() is not implemented yet.");for(var i=CI(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){var r=My((function(){var r=i[n][0],a=i[n][1],o=TI(e,r,a),s=[];if(Array.isArray(o))for(var l=0;l<o.length;++l)s.push({key:t.inputs[l],value:o[l]});else s.push({key:t.inputs[0],value:o});var u=new eI(s);return rI(t.outputs,u)}));r.forEach((function(e,t){return o[t].push(e)}))},l=0;l<i.length;++l)s(l);return d_(o.map((function(e){return hb(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=NI(e);PI(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return SI(r),this.predictLoop(n,r)}finally{RI(n,e)}}},{key:"predictOnBatch",value:function(e){PI(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new a_("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a];this.feedLossFns[a]===MA?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(function(e,t,n){var r=x_(e.map((function(e){return e.shape[0]})));r.sort();var a=x_(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new i_("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new i_("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!Td(r,a))throw new i_("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}(e=LI(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=LI(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){for(var r=[SA,AA,_A],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===_A&&1===i.shape[i.shape.length-1])throw new i_("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var l=i.shape.slice(1),u=s.slice(1),c=0;c<l.length;++c){var d=l[c],h=u[c];if(null!=h&&d!==h)throw new i_("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new i_("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=Vn(Un().mark((function e(t,n,r,a){var i,o,s,l,u,c,d,h,f,p=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(p.length>4&&void 0!==p[4])||p[4],o=p.length>5?p[5]:void 0,s=this.standardizeUserDataXY(t,n,i,o),l=(0,U.Z)(s,2),u=l[0],c=l[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(d=null,null==a){e.next=19;break}h=uI(a,this.outputNames),d=[],f=0;case 10:if(!(f<h.length)){e.next=19;break}return e.t0=d,e.next=14,cI(c[f],null,h[f]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++f,e.next=10;break;case 19:return e.abrupt("return",[u,c,d]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return My((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new o_("Verbose mode is not implemented yet.");if(null!=i)throw new o_("steps mode in testLoop() is not implemented yet");for(var l=CI(o,n),u=ck(rM(0,o)),c=0;c<l.length;++c){var d=l[c][0],h=l[c][1],f=oM(u,d,h-d),p=EI(t,f),m=e(p);if(0===c)for(var v=0;v<m.length;++v)s.push(Oy(0));for(var g=0;g<m.length;++g){var y=m[g];s[g]=jy(s[g],pb(h-d,y))}}for(var b=0;b<s.length;++b)s[b]=Yb(s[b],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(c_(e,r)>1){var i=c_(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()})),l=e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var l,u=new eI(t),c=rI(e.outputs,u,{training:!0}),d=0;d<e.lossFunctions.length;++d){var h=(0,e.lossFunctions[d])(a[d],c[d]);null!=i[d]&&(h=hI(h,i[d]));var f=Xx(h);n.push(f),l=0===d?h:jy(l,h)}for(var p=0;p<e.metricsTensors.length;++p){var m=void 0;if(e.outputs.length>1&&p<e.outputs.length)m=n[p];else{var v=e.metricsTensors[p][0],g=e.metricsTensors[p][1];m=Xx(v(a[g],c[g]))}Iy(m),o.push(m)}return l=Xx(l),e.calculateLosses().forEach((function(e){l=jy(l,e)})),l}),!0,s);return[l].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return My((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var l=new eI(o),u=rI(e.outputs,l),c=0;c<e.lossFunctions.length;++c){var d=e.lossFunctions[c],h=Xx(d(i[c],u[c]));n=0===c?h:jy(n,h),r.push(n)}for(var f=0;f<e.metricsTensors.length;++f){var p=e.metricsTensors[f][0],m=e.metricsTensors[f][1],v=Xx(p(i[m],u[m]));r.push(v)}return r}))}}},{key:"fit",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",AI(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gI(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a,i,o,s,l,u,c,d,h;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction(),s=o(a.concat(i)),l=[],u=G(s),e.prev=9,u.s();case 11:if((c=u.n()).done){e.next=19;break}return d=c.value,e.next=15,d.data();case 15:h=e.sent,l.push(h[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),u.e(e.t0);case 24:return e.prev=24,u.f(),e.finish(24);case 27:return Ay(s),RI(r[0],t),RI(r[1],n),e.abrupt("return",d_(l));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=lu(R(r.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=_y().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-_y().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=f_(this.loss);else if(Array.isArray(this.loss)){var t,n=G(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(_ke){n.e(_ke)}finally{n.f()}e=this.loss.map((function(e){return f_(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!==typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=f_(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[f_(WA(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return f_(WA(e))}));var e={};for(var t in this.metrics)e[t]=f_(WA(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=wA($A(e.optimizer_config));if("string"===typeof e.loss)t=p_(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return p_(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=p_(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return p_(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=p_(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var e=Vn(Un().mark((function e(n,r){var a,i,o,s,l,u,c,d,h;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof n){e.next=9;break}if(0!==(a=$v(n)).length){e.next=6;break}throw new i_("Cannot find any save handlers for URL '".concat(n,"'"));case 6:if(!(a.length>1)){e.next=8;break}throw new i_("Found more than one (".concat(a.length,") save handlers for ")+"URL '".concat(n,"'"));case 8:n=a[0];case 9:if(null!=n.save){e.next=11;break}throw new i_("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.next=13,Ov(this.getNamedWeights(r));case 13:if(i=e.sent,!1,null,o=this.toJSON(null,false),s={modelTopology:o,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(QA),convertedBy:null},!(null!=r&&r.includeOptimizer)||null==this.optimizer){e.next=34;break}return s.trainingConfig=this.getTrainingConfig(),u="optimizer",e.t0=t,e.next=25,this.optimizer.getWeights();case 25:return e.t1=e.sent,e.t2=u,e.next=29,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 29:c=e.sent,d=c.data,h=c.specs,(l=i.specs).push.apply(l,(0,_.Z)(h)),i.data=Uv([i.data,d]);case 34:return null!=this.userDefinedMetadata&&(!0,ZA(this.userDefinedMetadata,this.name,true),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=i.data,s.weightSpecs=i.specs,e.abrupt("return",n.save(s));case 38:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){ZA(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),r}(sI);FI.className="Model",Ey(FI);var jI=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n)}(FI);jI.className="Functional",Ey(jI);var zI=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:HM("sequential_"),null!=e.layers){var a,i=G(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(_ke){i.e(_ke)}finally{i.f()}}return r}return(0,A.Z)(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new i_("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof FI;if(r){if(1!==(t=e).outputs.length)throw new i_("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new i_("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new i_("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new i_("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new uA({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new i_("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new i_("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=sA(this.outputs[0])}this.inboundNodes=[],new aA({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:l_(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(YM(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new FI({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),lu(R(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),lu(R(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new a_("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new a_("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new a_("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new a_("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new i_("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new i_("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=G(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(_ke){n.e(_ke)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new i_("Legacy serialization format not supported yet.");r=t}else bd(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof n))throw new o_("Sequential.fromConfig called on non-Sequential input: ".concat(o));var s,l=G(r);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=wA(u,undefined,a);a&&c.setFastWeightInitDuringBuild(!0),o.add(c)}}catch(_ke){l.e(_ke)}finally{l.f()}return o}}]),n}(FI);zI.className="Sequential",Ey(zI);var BI=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(Sy),UI=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new o_("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return nx(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}]),n}(BI);UI.className="elu",Ey(UI);var WI=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){return Bw(e)}}]),n}(BI);WI.className="selu",Ey(WI);var VI=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){return Nw(e)}}]),n}(BI);VI.className="relu",Ey(VI);var ZI=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){return My((function(){return Qx(6,Nw(e))}))}}]),n}(BI);ZI.className="relu6",Ey(ZI);var HI=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){return e}}]),n}(BI);HI.className="linear",Ey(HI);var GI=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){return mb(e)}}]),n}(BI);GI.className="sigmoid",Ey(GI);var qI=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){return function(e){return My((function(){var t=jy(.5,pb(.2,e));return Mb(t,0,1)}))}(e)}}]),n}(BI);qI.className="hardSigmoid",Ey(qI);var XI=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){return Cx(e)}}]),n}(BI);XI.className="softplus",Ey(XI);var YI=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){return function(e){return My((function(){return Yb(e,jy(Ly(e),1))}))}(e)}}]),n}(BI);YI.className="softsign",Ey(YI);var KI=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){return gb(e)}}]),n}(BI);KI.className="tanh",Ey(KI);var $I=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){return $w(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}]),n}(BI);$I.className="softmax",Ey($I);var JI=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){return Nx(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}]),n}(BI);JI.className="logSoftmax",Ey(JI);var QI=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return My((function(){return pb(mb(pb(e,t)),e)}))}}]),n}(BI);QI.className="swish",Ey(QI);var eN=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e){return My((function(){return pb(e,gb(Cx(e)))}))}}]),n}(BI);function tN(e){return e.getClassName()}function nN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y_(e,Ty.getMap().classNameMap,t,"activation")}function rN(e){if(null==e){var t={className:"linear",config:{}};return nN(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},nN(n)}return e instanceof BI?e:nN(e)}function aN(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}eN.className="mish",Ey(eN);var iN=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n)}(Sy),oN=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this),aN(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return(0,A.Z)(n,[{key:"apply",value:function(e){var t=this;return My((function(){var n=Yx([1]);return t.hasL1&&(n=jy(n,Ix(pb(t.l1,Ly(e))))),t.hasL2&&(n=jy(n,Ix(pb(t.l2,mM(e))))),ub(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(iN);oN.className="L1L2",Ey(oN);var sN={l1l2:"L1L2"};function lN(e){return v_(e)}function uN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y_(e,Ty.getMap().classNameMap,t,"regularizer")}function cN(e){return null==e?null:"string"===typeof e?uN({className:e in sN?sN[e]:e,config:{}}):e instanceof iN?e:uN(e)}var dN=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return(0,A.Z)(n,[{key:"call",value:function(e,t){e=XM(e);var n=Nw(e);return null!=this.maxValue&&(n=Mb(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);dN.className="ReLU",Ey(dN);var hN=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,A.Z)(n,[{key:"call",value:function(e,t){var n=XM(e);return yx(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);hN.className="LeakyReLU",Ey(hN);var fN=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=UM(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=cN(e.alphaRegularizer),r.alphaConstraint=P_(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new i_("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return(0,A.Z)(n,[{key:"build",value:function(e){var t=(e=YM(e)).slice(1);if(null!=this.sharedAxes){var n,r=G(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(_ke){r.e(_ke)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new tA({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=XM(e),yw(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:BM(this.alphaInitializer),alphaRegularizer:lN(this.alphaRegularizer),alphaConstraint:D_(this.alphaConstraint),sharedAxes:this.sharedAxes},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);fN.className="PReLU",Ey(fN);var pN=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new o_("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,A.Z)(n,[{key:"call",value:function(e,t){var n=XM(e);return nx(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);pN.className="ELU",Ey(pN);var mN=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return(0,A.Z)(n,[{key:"call",value:function(e,t){var n=XM(e);return pb(n,jg(hx(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);mN.className="ThresholdedReLU",Ey(mN);var vN=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new $I).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return(0,A.Z)(n,[{key:"call",value:function(e,t){var n=XM(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);function gN(e,t,n){if("number"===typeof e)return l_(e,t);if(e.length!==t)throw new i_("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if(!Q_(a))throw new i_("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e}function yN(e,t,n,r){var a;return null==e?e:(a="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((a+r-1)/r))}function bN(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+nM([n-t,0]);else{if("same"!==r)throw new i_("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function xN(e,t){return My((function(){return V_(t),"channelsFirst"===t?Ck(e,[0,2,3,1]):e}))}function wN(e,t){return My((function(){return V_(t),"channelsFirst"===t?Ck(e,[0,2,3,4,1]):e}))}function kN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return My((function(){if(null==i&&(i="channelsLast"),V_(i),3!==e.shape.length)throw new i_("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new i_("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new i_("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=Ck(e,[0,2,1])),"causal"===a)throw new o_("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=Db(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=gM(s,n)),s}))}function SN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return My((function(){if(null==i&&(i="channelsLast"),V_(i),3!==e.rank&&4!==e.rank)throw new i_("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new i_("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var l=xN(e,i);if("causal"===a)throw new o_("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Hk({x:l,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(l=Ck(l,[0,3,1,2])),l}))}function TN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return My((function(){if(null==i&&(i="channelsLast"),V_(i),4!==e.rank&&5!==e.rank)throw new i_("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new i_("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=wN(e,i);if("causal"===a)throw new o_("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=Fb(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=gM(s,n)),"channelsFirst"===i&&(s=Ck(s,[0,4,1,2,3])),s}))}vN.className="Softmax",Ey(vN);var EN=function(e){N(n,e);var t=F(n);function n(e,r){var a;if(M(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,T_(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new o_("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=gN(r.kernelSize,e,"kernelSize"),a.strides=gN(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,Z_(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,V_(a.dataFormat),a.activation=rN(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=UM(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=P_(r.biasConstraint),a.biasRegularizer=cN(r.biasRegularizer),a.activityRegularizer=cN(r.activityRegularizer),a.dilationRate=gN(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new i_("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new i_("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new i_("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return(0,A.Z)(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:tN(this.activation),useBias:this.useBias,biasInitializer:BM(this.biasInitializer),biasRegularizer:lN(this.biasRegularizer),activityRegularizer:lN(this.activityRegularizer),biasConstraint:D_(this.biasConstraint)},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(u_("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!S_(e.kernelSize,"number",1,3))throw new i_("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(oA),CN=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,T_(a.filters,"filters"),a.kernelInitializer=UM(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=P_(r.kernelConstraint),a.kernelRegularizer=cN(r.kernelRegularizer),a}return(0,A.Z)(n,[{key:"build",value:function(e){e=YM(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new i_("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(0,_t.Z)({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return My((function(){var t;e=XM(e);var r=null==n.bias?null:n.bias.read(),a=C_(n.activation.getClassName());if(null!=a&&2===n.rank)t=SN(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=kN(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=SN(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new o_("convolutions greater than 3D are not implemented yet.");t=TN(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=YM(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=yN(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:BM(this.kernelInitializer),kernelRegularizer:lN(this.kernelRegularizer),kernelConstraint:D_(this.kernelConstraint)},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new i_("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(EN),_N=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return(0,A.Z)(n,[{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!S_(e.kernelSize,"number",1,2))throw new i_("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(CN);_N.className="Conv2D",Ey(_N);var MN=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return(0,A.Z)(n,[{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new i_("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(CN);MN.className="Conv3D",Ey(MN);var AN=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,e)).inputSpec=[new tA({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new i_("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,A.Z)(n,[{key:"build",value:function(e){if(4!==(e=YM(e)).length)throw new i_("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new i_("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new tA({ndim:4,axes:(0,_t.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return My((function(){var t=XM(e);if(4!==t.shape.length)throw new i_("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],l=i[a],u=n.kernelSize[0],c=n.kernelSize[1],d=n.strides[0],h=n.strides[1],f=[o,bN(s,d,u,n.padding),bN(l,h,c,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=Ck(t,[0,2,3,1]));var p=Pb(t,n.kernel.read(),f,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(p=Ck(p,[0,3,1,2])),null!=n.bias&&(p=gM(p,n.bias.read(),n.dataFormat)),null!=n.activation&&(p=n.activation.apply(p)),p}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=YM(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],l=this.strides[1];return a[t]=this.filters,a[n]=bN(a[n],s,i,this.padding),a[r]=bN(a[r],l,o,this.padding),a}},{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(_N);AN.className="Conv2DTranspose",Ey(AN);var IN=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,e)).inputSpec=[new tA({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new i_("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,A.Z)(n,[{key:"build",value:function(e){if(5!==(e=YM(e)).length)throw new i_("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new i_("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new tA({ndim:5,axes:(0,_t.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return My((function(){var t=XM(e);if(5!==t.shape.length)throw new i_("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i,o=t.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,r=3,a=4):(i=1,r=2,a=3);var l=o[i],u=o[r],c=o[a],d=n.kernelSize[0],h=n.kernelSize[1],f=n.kernelSize[2],p=n.strides[0],m=n.strides[1],v=n.strides[2],g=[s,bN(l,p,d,n.padding),bN(u,m,h,n.padding),bN(c,v,f,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=Ck(t,[0,2,3,4,1]));var y=zb(t,n.kernel.read(),g,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=Ck(y,[0,4,1,2,3])),null!==n.bias&&(y=gM(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,i=(e=YM(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var o=this.kernelSize[0],s=this.kernelSize[1],l=this.kernelSize[2],u=this.strides[0],c=this.strides[1],d=this.strides[2];return i[t]=this.filters,i[n]=bN(i[n],u,o,this.padding),i[r]=bN(i[r],c,s,this.padding),i[a]=bN(i[a],d,l,this.padding),i}},{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(MN);IN.className="Conv3DTranspose",Ey(IN);var NN=function(e){N(n,e);var t=F(n);function n(e,r){var a;if(M(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new i_("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new i_("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new i_("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=UM(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=cN(r.depthwiseRegularizer),a.depthwiseConstraint=P_(r.depthwiseConstraint),a.pointwiseInitializer=UM(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=cN(r.pointwiseRegularizer),a.pointwiseConstraint=P_(r.pointwiseConstraint),a}return(0,A.Z)(n,[{key:"build",value:function(e){if((e=YM(e)).length<this.rank+2)throw new i_("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new i_("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new tA({ndim:this.rank+2,axes:(0,_t.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return My((function(){var t;if(e=XM(e),1===n.rank)throw new o_("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=Ck(e,[0,2,3,1])),t=Uw(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=gM(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=Ck(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=BM(this.depthwiseInitializer),e.pointwiseInitializer=BM(this.pointwiseInitializer),e.depthwiseRegularizer=lN(this.depthwiseRegularizer),e.pointwiseRegularizer=lN(this.pointwiseRegularizer),e.depthwiseConstraint=D_(this.depthwiseConstraint),e.pointwiseConstraint=D_(this.pointwiseConstraint),e}}]),n}(CN);NN.className="SeparableConv";var RN=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,2,e)}return(0,A.Z)(n)}(NN);RN.className="SeparableConv2D",Ey(RN);var ON=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return(0,A.Z)(n,[{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!S_(e.kernelSize,"number",1,1))throw new i_("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(CN);ON.className="Conv1D",Ey(ON);var DN=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return(0,A.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return My((function(){if(e=XM(e),"channelsLast"===n.dataFormat){var t=lM(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return lM(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=lM(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return lM(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);DN.className="Cropping2D",Ey(DN);var LN=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,V_(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){k_(j_,"InterpolationFormat",e)}(r.interpolation),r}return(0,A.Z)(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return My((function(){var t=XM(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=Ck(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?KS.resizeNearestNeighbor(t,[a,i]):KS.resizeBilinear(t,[a,i]);return Ck(o,[0,3,1,2])}var s=n.size[0]*r[1],l=n.size[1]*r[2];return"nearest"===n.interpolation?KS.resizeNearestNeighbor(t,[s,l]):KS.resizeBilinear(t,[s,l])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);LN.className="UpSampling2D",Ey(LN);var PN=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=UM(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=P_(e.depthwiseConstraint),r.depthwiseRegularizer=cN(e.depthwiseRegularizer),r}return(0,A.Z)(n,[{key:"build",value:function(e){if((e=YM(e)).length<4)throw new i_("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new i_("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return My((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return My((function(){null==a&&(a="channelsLast"),V_(a);var o=xN(e,a);if(4!==e.rank)throw new i_("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new i_("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=Hb(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=Ck(o,[0,3,1,2])),o}))}(e=XM(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=gM(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=YM(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=yN(t,this.kernelSize[0],this.padding,this.strides[0]),i=yN(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=BM(this.depthwiseInitializer),e.depthwiseRegularizer=lN(this.depthwiseRegularizer),e.depthwiseConstraint=D_(this.depthwiseRegularizer),e}}]),n}(EN);function FN(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new i_("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function jN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return My((function(){var l=t.shape.length;if(l<3)throw new i_("Input should be at least 3D, but is ".concat(l,"D."));var u=[1,0].concat(rM(2,l));if(t=Ck(t,u),null!=i)throw new o_("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=jg(jg(a,"bool"),"float32")).rank===l-1&&(a=ix(a,-1)),a=Ck(a,u)),r&&(t=Ow(t,0),null!=a&&(a=Ow(a,0)));var c,d,h=[],f=n,p=t.shape[0],m=bk(t);null!=a&&(d=bk(a));for(var v,g=function(t){var n=m[t],r=My((function(){return e(n,f)}));if(null==a)c=r[0],f=r[1];else{var i=My((function(){var e=d[t],n=Ax(lw(e),e),a=jy(pb(r[0],e),pb(f[0],n)),i=f.map((function(t,a){return jy(pb(r[1][a],e),pb(t,n))}));return{output:a,newStates:i}}));c=i.output,f=i.newStates}s&&h.push(c)},y=0;y<p;++y)g(y);if(s){v=ok(h,1)}return[c,v,f]}))}PN.className="DepthwiseConv2D",Ey(PN);var zN=function(e){N(n,e);var t=F(n);function n(e){var r,a;if(M(this,n),r=t.call(this,e),null==e.cell)throw new i_("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new qN({cells:e.cell}):e.cell).stateSize)throw new i_("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new tA({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return(0,A.Z)(n,[{key:"getStates",value:function(){return null==this.states_?rM(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){GM(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=G(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(_ke){o.e(_ke)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return My((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new o_("Constants support is not implemented in RNN yet.");GM(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new tA({shape:[t,null].concat((0,_.Z)(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Td(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new i_("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new tA({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];My((function(){if(!t.stateful)throw new r_("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new i_("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return Yx([r,e])})):t.states_=[Yx([r,t.cell.stateSize])];else if(null==e)Ay(t.states_),null!=t.keptStates&&(Ay(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return Yx([r,e])})):t.states_[0]=Yx([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new i_("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):Ay(t.states_);for(var a=0;a<t.states_.length;++a){var i=e[a],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,o];if(!Td(i.shape,s))throw new i_("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(i.shape));t.states_[a]=i}}t.states_=t.states_.map((function(e){return Iy(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=FN(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var l,u=G(r);try{for(u.s();!(l=u.n()).done;){var c=l.value;this.stateSpec.push(new tA({shape:c.shape}))}}catch(_ke){u.e(_ke)}finally{u.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof nA){var d=[e].concat(o),h=this.inputSpec.concat(s),f=this.inputSpec;this.inputSpec=h;var p=lu(R(n.prototype),"apply",this).call(this,d,t);return this.inputSpec=f,p}return lu(R(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return My((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=XM(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new i_("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},l=jN((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),u=l[0],c=l[1],d=l[2];n.stateful&&n.resetStates(d,a);var h=n.returnSequences?c:u;return n.returnState?[h].concat(d):h}))}},{key:"getInitialState",value:function(e){var t=this;return My((function(){var n=Yx(e.shape);return n=iM(n=Ix(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?dM(n,[1,e]):n})):t.cell.stateSize>1?[dM(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){lu(R(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=wA(t.cell,n);return new e(Object.assign(t,{cell:r}))}}]),n}(oA);zN.className="RNN",Ey(zN);var BN=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n)}(oA),UN=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,T_(r.units,"units"),r.activation=rN(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=UM(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=UM(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=UM(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=cN(e.kernelRegularizer),r.recurrentRegularizer=cN(e.recurrentRegularizer),r.biasRegularizer=cN(e.biasRegularizer),r.kernelConstraint=P_(e.kernelConstraint),r.recurrentConstraint=P_(e.recurrentConstraint),r.biasConstraint=P_(e.biasConstraint),r.dropout=tM([1,nM([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=tM([1,nM([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,A.Z)(n,[{key:"build",value:function(e){e=YM(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return My((function(){if(2!==e.length)throw new i_("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=XN({ones:function(){return lw(e)},rate:n.dropout,training:i,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=XN({ones:function(){return lw(r)},rate:n.recurrentDropout,training:i,dropoutFunc:n.dropoutFunc}));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=fM(null!=o?pb(e,o):e,n.kernel.read()),null!=n.bias&&(a=gM(a,n.bias.read())),null!=s&&(r=pb(r,s));var l=jy(a,fM(r,n.recurrentKernel.read()));return null!=n.activation&&(l=n.activation.apply(l)),[l,l]}))}},{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:tN(this.activation),useBias:this.useBias,kernelInitializer:BM(this.kernelInitializer),recurrentInitializer:BM(this.recurrentInitializer),biasInitializer:BM(this.biasInitializer),kernelRegularizer:lN(this.kernelRegularizer),recurrentRegularizer:lN(this.recurrentRegularizer),biasRegularizer:lN(this.biasRegularizer),activityRegularizer:lN(this.activityRegularizer),kernelConstraint:D_(this.kernelConstraint),recurrentConstraint:D_(this.recurrentConstraint),biasConstraint:D_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}]),n}(BN);UN.className="SimpleRNNCell",Ey(UN);var WN=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),e.cell=new UN(e),t.call(this,e)}return(0,A.Z)(n,[{key:"call",value:function(e,t){var r=this;return My((function(){null!=r.cell.dropoutMask&&(Ay(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Ay(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return lu(R(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(zN);WN.className="SimpleRNN",Ey(WN);var VN=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new i_("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,T_(r.units,"units"),r.activation=rN(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=rN(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=UM(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=UM(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=UM(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=cN(e.kernelRegularizer),r.recurrentRegularizer=cN(e.recurrentRegularizer),r.biasRegularizer=cN(e.biasRegularizer),r.kernelConstraint=P_(e.kernelConstraint),r.recurrentConstraint=P_(e.recurrentConstraint),r.biasConstraint=P_(e.biasConstraint),r.dropout=tM([1,nM([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=tM([1,nM([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,A.Z)(n,[{key:"build",value:function(e){var t=(e=YM(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return My((function(){if(2!==e.length)throw new i_("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=XN({ones:function(){return lw(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=XN({ones:function(){return lw(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var i,o,s,l=n.dropoutMask,u=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=pb(e,l[0]));var c=fM(e,n.kernel.read());n.useBias&&(c=gM(c,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=pb(a,u[0]));var d=n.recurrentKernel.read(),h=tk(d,[2*n.units,n.units],d.rank-1),f=(0,U.Z)(h,2),p=f[0],m=f[1],v=fM(a,p),g=tk(c,3,c.rank-1),y=(0,U.Z)(g,3),b=y[0],x=y[1],w=y[2],k=tk(v,2,v.rank-1),S=(0,U.Z)(k,2),T=S[0],E=S[1];i=n.recurrentActivation.apply(jy(b,T)),o=n.recurrentActivation.apply(jy(x,E));var C=fM(pb(o,a),m);s=n.activation.apply(jy(w,C));var _=jy(pb(i,a),pb(jy(1,Ex(i)),s));return[_,_]}))}},{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:tN(this.activation),recurrentActivation:tN(this.recurrentActivation),useBias:this.useBias,kernelInitializer:BM(this.kernelInitializer),recurrentInitializer:BM(this.recurrentInitializer),biasInitializer:BM(this.biasInitializer),kernelRegularizer:lN(this.kernelRegularizer),recurrentRegularizer:lN(this.recurrentRegularizer),biasRegularizer:lN(this.biasRegularizer),activityRegularizer:lN(this.activityRegularizer),kernelConstraint:D_(this.kernelConstraint),recurrentConstraint:D_(this.recurrentConstraint),biasConstraint:D_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}]),n}(BN);VN.className="GRUCell",Ey(VN);var ZN=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new VN(e),t.call(this,e)}return(0,A.Z)(n,[{key:"call",value:function(e,t){var r=this;return My((function(){null!=r.cell.dropoutMask&&(Ay(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Ay(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return lu(R(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(zN);ZN.className="GRU",Ey(ZN);var HN=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,T_(r.units,"units"),r.activation=rN(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=rN(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=UM(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=UM(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=UM(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=cN(e.kernelRegularizer),r.recurrentRegularizer=cN(e.recurrentRegularizer),r.biasRegularizer=cN(e.biasRegularizer),r.kernelConstraint=P_(e.kernelConstraint),r.recurrentConstraint=P_(e.recurrentConstraint),r.biasConstraint=P_(e.biasConstraint),r.dropout=tM([1,nM([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=tM([1,nM([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,A.Z)(n,[{key:"build",value:function(e){var t,n,r=(e=YM(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new TM).apply([i]),o=a.apply([2*i]);return cM(cM(n,r),o)}}]),n}(kM),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return My((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new i_("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=XN({ones:function(){return lw(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=XN({ones:function(){return lw(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var o,s,l,u,c=n.dropoutMask,d=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=pb(e,c[0]));var h=fM(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=pb(a,d[0])),h=jy(h,fM(a,n.recurrentKernel.read())),n.useBias&&(h=gM(h,n.bias.read()));var f=tk(h,4,h.rank-1),p=(0,U.Z)(f,4),m=p[0],v=p[1],g=p[2],y=p[3];o=n.recurrentActivation.apply(m),s=n.recurrentActivation.apply(v),l=jy(pb(s,i),pb(o,n.activation.apply(g))),u=n.recurrentActivation.apply(y);var b=pb(u,n.activation.apply(l));return[b,b,l]}))}},{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:tN(this.activation),recurrentActivation:tN(this.recurrentActivation),useBias:this.useBias,kernelInitializer:BM(this.kernelInitializer),recurrentInitializer:BM(this.recurrentInitializer),biasInitializer:BM(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:lN(this.kernelRegularizer),recurrentRegularizer:lN(this.recurrentRegularizer),biasRegularizer:lN(this.biasRegularizer),activityRegularizer:lN(this.activityRegularizer),kernelConstraint:D_(this.kernelConstraint),recurrentConstraint:D_(this.recurrentConstraint),biasConstraint:D_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}]),n}(BN);HN.className="LSTMCell",Ey(HN);var GN=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new HN(e),t.call(this,e)}return(0,A.Z)(n,[{key:"call",value:function(e,t){var r=this;return My((function(){null!=r.cell.dropoutMask&&(Ay(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Ay(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return lu(R(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(zN);GN.className="LSTM",Ey(GN);var qN=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).cells=e.cells,r}return(0,A.Z)(n,[{key:"stateSize",get:function(){var e,t=[],n=G(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,(0,_.Z)(r.stateSize)):t.push(r.stateSize)}}catch(_ke){n.e(_ke)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return My((function(){var r,a=e.slice(1),i=[],o=G(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(_ke){o.e(_ke)}finally{o.f()}i.reverse();for(var l,u=[],c=0;c<n.cells.length;++c){var d=n.cells[c];a=i[c],l=0===c?[e[0]].concat(a):[l[0]].concat(a),l=d.call(l,t),u.push(l.slice(1))}a=[];var h,f=G(u.slice().reverse());try{for(f.s();!(h=f.n()).done;){var p,m=h.value;(p=a).push.apply(p,(0,_.Z)(m))}}catch(_ke){f.e(_ke)}finally{f.f()}return[l[0]].concat(a)}))}},{key:"build",value:function(e){var t;GM(e)&&(e=e[0]),this.cells.forEach((function(n,r){X_("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign({},e,t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=G(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,_.Z)(r.trainableWeights))}}catch(_ke){n.e(_ke)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=G(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,_.Z)(r.nonTrainableWeights))}}catch(_ke){n.e(_ke)}finally{n.f()}if(!this.trainable){var a,i=[],o=G(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,(0,_.Z)(s.trainableWeights))}}catch(_ke){o.e(_ke)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=G(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,_.Z)(r.weights))}}catch(_ke){n.e(_ke)}finally{n.f()}return QM(t)}},{key:"setWeights",value:function(e){var t,n=[],r=G(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)n.push([a.weights[s],o[s]])}catch(_ke){r.e(_ke)}finally{r.f()}eA(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=G(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(wA(o,r))}}catch(_ke){i.e(_ke)}finally{i.f()}return new e({cells:a})}}]),n}(BN);function XN(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=e.dropoutFunc,l=function(){return null!=s?s(t(),n):yM(t(),n)},u=function(){return bM(l,t,a)};return!o||o<=1?Iy(u().clone()):Array(o).fill(void 0).map(u).map((function(e){return Iy(e.clone())}))}qN.className="StackedRNNCells",Ey(qN);var YN=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},KN=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),e.unroll)throw new o_("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new o_("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new tA({ndim:5})],r}return(0,A.Z)(n,[{key:"call",value:function(e,t){var r=this;return My((function(){if(null!=r.cell.dropoutMask&&(Ay(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Ay(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new i_("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return lu(R(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat((0,_.Z)(t.slice(2)))),this.returnState&&(t=[t].concat((0,_.Z)(Array(2).fill([e[0]].concat((0,_.Z)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return My((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=Yx([a[0]].concat((0,_.Z)(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(i):[i]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];My((function(){if(!t.stateful)throw new r_("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat((0,_.Z)(a.slice(2)));if(null==r[0])throw new i_("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return Yx(i)})):t.states_=[Yx(i)];else if(null==e)Ay(t.states_),null!=t.keptStates&&(Ay(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return Yx(i)})):t.states_[0]=Yx(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new i_("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):Ay(t.states_);for(var o=0;o<t.states_.length;++o){var s=e[o],l=i;if(!Td(s.shape,l))throw new i_("State ".concat(o," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(l,", received shape=").concat(s.shape));t.states_[o]=s}}t.states_=t.states_.map((function(e){return Iy(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,l="channelsFirst"===n,u=e[l?3:2],c=e[l?4:3],d=yN(u,a[0],i,o[0],s[0]),h=yN(c,a[1],i,o[1],s[1]);return[].concat((0,_.Z)(e.slice(0,2)),(0,_.Z)(l?[r,d,h]:[d,h,r]))}}]),n}(zN);KN.className="ConvRNN2D";var $N=function(e){N(n,e);var t=F(n);function n(e){var r;M(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,l=e.dataFormat,u=e.dilationRate;return(r=t.call(this,Object.assign({},e,{units:a}))).filters=a,T_(r.filters,"filters"),r.kernelSize=gN(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return T_(e,"kernelSize")})),r.strides=gN(o||1,2,"strides"),r.strides.forEach((function(e){return T_(e,"strides")})),r.padding=s||"valid",Z_(r.padding),r.dataFormat=l||"channelsLast",V_(r.dataFormat),r.dilationRate=gN(u||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return T_(e,"dilationRate")})),r}return(0,A.Z)(n,[{key:"build",value:function(e){var t;e=YM(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new i_("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,l=this.filters;o=new(t=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"apply",value:function(e,t){return uM([s.apply([l]),Kx([l]),s.apply([2*l])])}}]),n}(kM),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return My((function(){if(3!==e.length)throw new i_("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=XN({ones:function(){return lw(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var s=n.dropoutMask,l=function(e,t,n){return t&&t[n]?pb(t[n],e):e},u=l(a,s,0),c=l(a,s,1),d=l(a,s,2),h=l(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=XN({ones:function(){return lw(i)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var f=n.recurrentDropoutMask,p=l(i,f,0),m=l(i,f,1),v=l(i,f,2),g=l(i,f,3),y=tk(n.kernel.read(),4,3),b=(0,U.Z)(y,4),x=b[0],w=b[1],k=b[2],S=b[3],T=n.useBias?tk(n.bias.read(),4):[null,null,null,null],E=(0,U.Z)(T,4),C=E[0],_=E[1],M=E[2],A=E[3];u=n.inputConv(u,x,C,n.padding),c=n.inputConv(c,w,_,n.padding),d=n.inputConv(d,k,M,n.padding),h=n.inputConv(h,S,A,n.padding);var I=tk(n.recurrentKernel.read(),4,3),N=(0,U.Z)(I,4),R=N[0],O=N[1],D=N[2],L=N[3];p=n.recurrentConv(p,R),m=n.recurrentConv(m,O),v=n.recurrentConv(v,D),g=n.recurrentConv(g,L);var P=n.recurrentActivation.apply(jy(u,p)),F=n.recurrentActivation.apply(jy(c,m)),j=jy(pb(F,o),pb(P,n.activation.apply(jy(d,v)))),z=pb(n.recurrentActivation.apply(jy(h,g)),n.activation.apply(j));return[z,z,j]}))}},{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this),t=(e.units,YN(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},t,r)}},{key:"inputConv",value:function(e,t,n,r){var a=Ob(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?gM(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return Ob(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(HN);$N.className="ConvLSTM2DCell",Ey($N);var JN=function(e){N(n,e);var t=F(n);function n(e){M(this,n);var r=new $N(e);return t.call(this,Object.assign({},e,{cell:r}))}return(0,A.Z)(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(KN);JN.className="ConvLSTM2D",Ey(JN);var QN=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return(0,A.Z)(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return My((function(){n.invokeCallHook(e,t);var r=XM(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return bM((function(){return yM(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return lu(R(n.prototype),"dispose",this).call(this)}}]),n}(oA);QN.className="Dropout",Ey(QN);var eR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return(0,A.Z)(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(QN);eR.className="SpatialDropout1D",Ey(eR);var tR=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,T_(r.units,"units"),r.activation=rN(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=UM(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=UM(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=P_(e.kernelConstraint),r.biasConstraint=P_(e.biasConstraint),r.kernelRegularizer=cN(e.kernelRegularizer),r.biasRegularizer=cN(e.biasRegularizer),r.activityRegularizer=cN(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return(0,A.Z)(n,[{key:"build",value:function(e){var t=(e=YM(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(0,_t.Z)({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=YM(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return My((function(){n.invokeCallHook(e,t);var r,a=XM(e),i=C_(n.activation.getClassName());return null!=i?r=fM(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=fM(a,n.kernel.read()),null!=n.bias&&(r=gM(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:tN(this.activation),useBias:this.useBias,kernelInitializer:BM(this.kernelInitializer),biasInitializer:BM(this.biasInitializer),kernelRegularizer:lN(this.kernelRegularizer),biasRegularizer:lN(this.biasRegularizer),activityRegularizer:lN(this.activityRegularizer),kernelConstraint:D_(this.kernelConstraint),biasConstraint:D_(this.biasConstraint)},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);tR.className="Dense",Ey(tR);var nR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return(0,A.Z)(n,[{key:"computeOutputShape",value:function(e){var t,n=G((e=YM(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new i_('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(_ke){n.e(_ke)}finally{n.f()}return[e[0],eM(e,1)]}},{key:"call",value:function(e,t){var n=this;return My((function(){n.invokeCallHook(e,t);var r=XM(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=Ck(r,a)}return function(e){if(e.rank<=1)throw new i_("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],eM(e.shape,1)];return ub(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);nR.className="Flatten",Ey(nR);var rR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=rN(e.activation),r}return(0,A.Z)(n,[{key:"call",value:function(e,t){var n=this;return My((function(){n.invokeCallHook(e,t);var r=XM(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:tN(this.activation)},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);rR.className="Activation",Ey(rR);var aR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return(0,A.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return My((function(){return function(e,t){return My((function(){if(2!==e.shape.length)throw new i_("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));return dM(iM(e,1),[1,t,1])}))}(e=XM(e),n.n)}))}},{key:"getConfig",value:function(){var e={n:this.n},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);aR.className="RepeatVector",Ey(aR);var iR=function(e){N(n,e);var t=F(n);function n(e){var r;M(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return(0,A.Z)(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new i_("Can only specifiy one unknown dimension.");i=o}else a*=s}var l=eM(e);if(null!==i){if(0===a||l%a!==0)throw new i_(n);r[i]=l/a}else if(l!==a)throw new i_(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return My((function(){n.invokeCallHook(e,t);var r=XM(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return ub(r,i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);iR.className="Reshape",Ey(iR);var oR=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=rM(1,e.dims.length+1);if(!Td(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new tA({ndim:r.dims.length+1})],r}return(0,A.Z)(n,[{key:"computeOutputShape",value:function(e){var t=(e=YM(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return Ck(XM(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);oR.className="Permute",Ey(oR);var sR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return(0,A.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=XM(e);return Uy(ow(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return My((function(){n.invokeCallHook(e,t);var r=XM(e),a=Uy(ow(r,n.maskValue),-1,!0);return pb(r,jg(a,r.dtype))}))}}]),n}(oA);sR.className="Masking",Ey(sR);var lR=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(h_(e.inputLength))}return r.inputDim=e.inputDim,T_(r.inputDim,"inputDim"),r.outputDim=e.outputDim,T_(r.outputDim,"outputDim"),r.embeddingsInitializer=UM(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=cN(e.embeddingsRegularizer),r.activityRegularizer=cN(e.activityRegularizer),r.embeddingsConstraint=P_(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return(0,A.Z)(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return My((function(){return n.maskZero?(e=XM(e),ow(e,Jb(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=YM(e),null==this.inputLength)return[].concat((0,_.Z)(e),[this.outputDim]);var t=h_(this.inputLength);if(t.length!==e.length-1)throw new i_('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new i_('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat((0,_.Z)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return My((function(){n.invokeCallHook(e,t);var r=XM(e);"int32"!==r.dtype&&(r=aM(r,"int32"));var a=pM(n.embeddings.read(),ub(r,[r.size]));return ub(a,YM(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:BM(this.embeddingsInitializer),embeddingsRegularizer:lN(this.embeddingsRegularizer),activityRegularizer:lN(this.activityRegularizer),embeddingsConstraint:D_(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);lR.className="Embedding",Ey(lR);var uR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return(0,A.Z)(n,[{key:"mergeFunction",value:function(e){throw new o_}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new i_("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[YM(e)]),e.length<2)throw new i_("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=G(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(_ke){r.e(_ke)}finally{r.f()}if((n=x_(n)).length>1)throw new i_("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var l=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===x_(l).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return My((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=nM(r),o=G(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,l=s.rank,u=0;u<i-l;++u)s=iM(s,1);t.push(s)}}catch(_ke){o.e(_ke)}finally{o.f()}return n.mergeFunction(t)}var c,d=!1,h=G(e);try{for(h.s();!(c=h.n()).done;){var f=c.value,p=f.rank;if(null==p){var m=f.shape,v=m[0],g=m.slice(1).concat([v]),y=ub(f,[v].concat(eM(m.slice(1))));y=Ck(y,[1,0]),y=ub(y,g),t.push(y),d=!0}else if(p>1){var b=rM(1,p).concat([0]);t.push(Ck(f,b)),d=!0}else t.push(f)}}catch(_ke){h.e(_ke)}finally{h.f()}var x=n.mergeFunction(t),w=x.rank;if(d)if(null==w){var k=x.shape,S=k[k.length-1],T=[S].concat(k.slice(0,k.length-1));x=ub(Ck(ub(x,[-1,S]),[1,0]),T)}else if(w>1){var E=[w-1].concat(rM(0,w-1));x=Ck(x,E)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=G(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(_ke){o.e(_ke)}finally{o.f()}return t=1===(i=x_(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return My((function(){if(null==t)return null;if(!Array.isArray(t))throw new i_("`mask` should be an Array");if(!Array.isArray(e))throw new i_("`inputs` should be an Array");if(t.length!==e.length)throw new i_("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;t=t.map((function(e){return null==e?e:ix(e,0)}));for(var n=t[0],r=1;r<t.length-1;++r)n=Bx(n,t[r]);return n}))}}]),n}(oA),cR=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"mergeFunction",value:function(e){return My((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=jy(t,e[n]);return t}))}}]),n}(uR);cR.className="Add",Ey(cR);var dR=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"mergeFunction",value:function(e){return My((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=pb(t,e[n]);return t}))}}]),n}(uR);dR.className="Multiply",Ey(dR);var hR=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"mergeFunction",value:function(e){return My((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=jy(t,e[n]);return pb(1/e.length,t)}))}}]),n}(uR);hR.className="Average",Ey(hR);var fR=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"mergeFunction",value:function(e){return My((function(){for(var t=e[0],n=1;n<e.length;++n)t=qx(t,e[n]);return t}))}}]),n}(uR);fR.className="Maximum",Ey(fR);var pR=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"mergeFunction",value:function(e){return My((function(){for(var t=e[0],n=1;n<e.length;++n)t=Qx(t,e[n]);return t}))}}]),n}(uR);pR.className="Minimum",Ey(pR);var mR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,A.Z)(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new i_("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=G(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(_ke){r.e(_ke)}finally{r.f()}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var s,l=!1,u=G(a);try{for(u.s();!(s=u.n()).done;){if(Td(s.value,o)){l=!0;break}}}catch(_ke){u.e(_ke)}finally{u.f()}l||a.push(o)}if(a.length>1)throw new i_("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return My((function(){return uM(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new i_("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=G(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(_ke){i.e(_ke)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new i_("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new i_("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new i_("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return My((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push(jg(lw(e[i]),"bool")):t[i].rank<e[i].rank?a.push(ix(t[i],-1)):a.push(t[i]);var o=hb(a,n.axis);return By(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(uR);function vR(e,t){for(;e<0;)e+=t;return e}mR.className="Concatenate",Ey(mR);var gR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,A.Z)(n,[{key:"build",value:function(e){bd(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new o_("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new i_("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new i_("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return vR(t,e[n].shape.length)})):[vR(this.axes,n.shape.length),vR(this.axes,r.shape.length)],this.normalize&&(n=kA(n,t[0]),r=kA(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new o_("batchDot is not implemented for tensors of 4D or higher rank yet");if(bd(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),bd(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new o_("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return My((function(){var n,o;if(r>a){n=r-a;for(var s=[],l=0;l<n;++l)s.push(1);t=ub(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var u=[],c=0;c<n;++c)u.push(1);e=ub(e,e.shape.concat(u))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?Ix(pb(e,t),i[0]):Ix(pb(Ck(e,[1,0]),t),i[1]);else{var d=i[0]!==e.shape.length-1,h=i[1]===t.shape.length-1;o=fb(e,t,d,h)}if(n>0){for(var f,p=[],m=f=r>a?r+a-3:r-1;m<f+n;++m)p.push(m);o=ik(o,p)}return 1===o.shape.length&&(o=ix(o,1)),o}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[vR(this.axes,e.length),vR(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){bd(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new o_("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(uR);gR.className="Dot",Ey(gR);var yR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return(0,A.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return My((function(){n.invokeCallHook(e,t);var r=XM(e);return bM((function(){return jy(hM(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(oA);yR.className="GaussianNoise",Ey(yR);var bR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return(0,A.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return My((function(){n.invokeCallHook(e,t);var r=XM(e);if(n.rate>0&&n.rate<1){return bM((function(){var e=Math.sqrt(n.rate/(1-n.rate));return pb(r,hM(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(oA);bR.className="GaussianDropout",Ey(bR);var xR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return(0,A.Z)(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||XM(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=lu(R(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return My((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return bM((function(){var t=XM(e),a=-1.7580993408473766,i=fx(_w(r),n.rate);i=aM(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate,l=jy(pb(t,i),pb(jy(i,-1),a));return jy(pb(l,o),s)}),(function(){return XM(e)}),t.training||!1)}return e}))}}]),n}(oA);function wR(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=wb(e,t,n,r,a,o);else if(3===e.rank)i=kb(e,t,n,r,a,o);else{if(4!==e.rank)throw new o_("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=Sb(e,t,n,r,a,o)}return i}function kR(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Td(r.slice().sort(),rM(0,e.rank-1))?function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return My((function(){var i=rw(e,r),o=i.mean,s=i.variance;return[wR(e,o,s,n,t,a),o,s]}))}(e,t,n,r,a):function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return My((function(){var i,o=rw(e,r),s=o.mean,l=o.variance,u=[],c=G(rM(0,e.rank));try{for(c.s();!(i=c.n()).done;){var d=i.value;-1!==r.indexOf(d)?u.push(1):u.push(e.shape[d])}}catch(_ke){c.e(_ke)}finally{c.f()}var h=ub(s,u),f=ub(l,u),p=null==t?null:ub(t,u),m=null==n?null:ub(n,u);return[wR(e,h,f,m,p,a),s,l]}))}(e,t,n,r,a)}xR.className="AlphaDropout",Ey(xR);var SR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=UM(e.betaInitializer||"zeros"),r.gammaInitializer=UM(e.gammaInitializer||"ones"),r.movingMeanInitializer=UM(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=UM(e.movingVarianceInitializer||"ones"),r.betaConstraint=P_(e.betaConstraint),r.gammaConstraint=P_(e.gammaConstraint),r.betaRegularizer=cN(e.betaRegularizer),r.gammaRegularizer=cN(e.gammaRegularizer),r}return(0,A.Z)(n,[{key:"build",value:function(e){e=YM(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new i_("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new tA({ndim:e.length,axes:(0,_t.Z)({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return My((function(){var r=null!=t.training&&t.training,a=XM(e),i=a.shape,o=i.length,s=rM(0,o),l=n.axis>=0?n.axis:n.axis+o;s.splice(l,1);var u=l_(1,o);u[l]=i[l];var c=s.slice();c.sort();var d=!Td(c,rM(0,o).slice(0,o-1));if(!r)return function(){if(d){var e=ub(n.movingMean.read(),u),t=ub(n.movingVariance.read(),u),r=n.center?ub(n.beta.read(),u):null,i=n.scale?ub(n.gamma.read(),u):null;return wR(a,e,t,r,i,n.epsilon)}return wR(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var h=kR(a,n.gamma.read(),n.beta.read(),s,n.epsilon),f=(0,U.Z)(h,3),p=f[0],m=f[1],v=f[2],g=function(e,t,n){My((function(){var r=1-n,a=e.read(),i=pb(Ax(a,t),r);e.write(Ax(a,i))}))};return g(n.movingMean,m,n.momentum),g(n.movingVariance,v,n.momentum),p}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:BM(this.betaInitializer),gammaInitializer:BM(this.gammaInitializer),movingMeanInitializer:BM(this.movingMeanInitializer),movingVarianceInitializer:BM(this.movingVarianceInitializer),betaRegularizer:lN(this.betaRegularizer),gammaRegularizer:lN(this.gammaRegularizer),betaConstraint:D_(this.betaConstraint),gammaConstraint:D_(this.gammaConstraint)},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);SR.className="BatchNormalization",Ey(SR);var TR=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=G(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(_ke){i.e(_ke)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=UM(e.betaInitializer||"zeros"),r.gammaInitializer=UM(e.gammaInitializer||"ones"),r.betaRegularizer=cN(e.betaRegularizer),r.gammaRegularizer=cN(e.gammaRegularizer),r.supportsMasking=!0,r}return(0,A.Z)(n,[{key:"build",value:function(e){var t=(e=YM(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=G(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(_ke){a.e(_ke)}finally{a.f()}if(this.axis.length!==x_(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=XM(e),a=r.shape,i=a.length;return My((function(){var e,t=rw(r,n.axis,!0),o=t.mean,s=t.variance,l=l_(1,i),u=G(n.axis);try{for(u.s();!(e=u.n()).done;){var c=e.value;l[c]=a[c]}}catch(_ke){u.e(_ke)}finally{u.f()}for(var d=function(e){return null!=e&&e.shape.length!==i?ub(e,l):e},h=d(n.gamma.read()),f=d(n.beta.read()),p=[],m=[],v=0;v<i;++v)-1!==n.axis.indexOf(v)?(p.push(a[v]),m.push(1)):(p.push(1),m.push(a[v]));return o=sx(o,p),s=sx(s,p),h=sx(h,m),f=sx(f,m),wR(r,o,s,f,h,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:BM(this.betaInitializer),gammaInitializer:BM(this.gammaInitializer),betaRegularizer:lN(this.betaRegularizer),gammaRegularizer:lN(this.gammaRegularizer)},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);TR.className="LayerNormalization",Ey(TR);var ER=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new i_("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new i_("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new i_("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new tA({ndim:4})],r}return(0,A.Z)(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=YM(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return My((function(){return function(e,t,n){return My((function(){if(4!==e.rank)throw new i_("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new i_("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new i_("Unknown data format: ".concat(n,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],cw(e,r)}))}(XM(e),n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA);function CR(e,t,n,r,a,i){return My((function(){var o;V_(a),H_(i),Z_(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=xN(e,a);var s="same"===r?"same":"valid";return o="max"===i?Zx(e,t,n,s):cb(e,t,n,s),"channelsFirst"===a&&(o=Ck(o,[0,3,1,2])),o}))}function _R(e,t,n,r,a,i){return My((function(){var o;V_(a),H_(i),Z_(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=wN(e,a);var s="same"===r?"same":"valid";return o="max"===i?Hx(e,t,n,s):db(e,t,n,s),"channelsFirst"===a&&(o=Ck(o,[0,4,1,2,3])),o}))}ER.className="ZeroPadding2D",Ey(ER);var MR=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new i_("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(T_(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new i_("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return T_(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,Z_(r.padding),r.inputSpec=[new tA({ndim:3})],r}return(0,A.Z)(n,[{key:"computeOutputShape",value:function(e){var t=yN((e=YM(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return My((function(){n.invokeCallHook(e,t),e=iM(XM(e),2);var r=n.poolingFunction(XM(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return ik(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA),AR=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return V_(a),Z_(r),CR(e,t,n,r,a,"max")}}]),n}(MR);AR.className="MaxPooling1D",Ey(AR);var IR=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return V_(a),Z_(r),CR(e,t,n,r,a,"avg")}}]),n}(MR);IR.className="AveragePooling1D",Ey(IR);var NR=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new i_("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return T_(r.poolSize,"poolSize"),T_(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,V_(r.dataFormat),Z_(r.padding),r.inputSpec=[new tA({ndim:4})],r}return(0,A.Z)(n,[{key:"computeOutputShape",value:function(e){e=YM(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=yN(t,this.poolSize[0],this.padding,this.strides[0]),n=yN(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return My((function(){return n.invokeCallHook(e,t),n.poolingFunction(XM(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA),RR=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return V_(a),Z_(r),CR(e,t,n,r,a,"max")}}]),n}(NR);RR.className="MaxPooling2D",Ey(RR);var OR=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return V_(a),Z_(r),CR(e,t,n,r,a,"avg")}}]),n}(NR);OR.className="AveragePooling2D",Ey(OR);var DR=function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new i_("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return T_(r.poolSize,"poolSize"),T_(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,V_(r.dataFormat),Z_(r.padding),r.inputSpec=[new tA({ndim:5})],r}return(0,A.Z)(n,[{key:"computeOutputShape",value:function(e){e=YM(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=yN(t,this.poolSize[0],this.padding,this.strides[0]),n=yN(n,this.poolSize[1],this.padding,this.strides[1]),r=yN(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return My((function(){return n.invokeCallHook(e,t),n.poolingFunction(XM(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA),LR=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return V_(a),Z_(r),_R(e,t,n,r,a,"max")}}]),n}(DR);LR.className="MaxPooling3D",Ey(LR);var PR=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return V_(a),Z_(r),_R(e,t,n,r,a,"avg")}}]),n}(DR);PR.className="AveragePooling3D",Ey(PR);var FR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).inputSpec=[new tA({ndim:3})],r}return(0,A.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new o_}}]),n}(oA),jR=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e||{})}return(0,A.Z)(n,[{key:"call",value:function(e,t){return My((function(){var t=XM(e);return Xx(t,1)}))}}]),n}(FR);jR.className="GlobalAveragePooling1D",Ey(jR);var zR=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e||{})}return(0,A.Z)(n,[{key:"call",value:function(e,t){return My((function(){var t=XM(e);return Mx(t,1)}))}}]),n}(FR);zR.className="GlobalMaxPooling1D",Ey(zR);var BR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,V_(r.dataFormat),r.inputSpec=[new tA({ndim:4})],r}return(0,A.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new o_}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(oA),UR=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"call",value:function(e,t){var n=this;return My((function(){var t=XM(e);return"channelsLast"===n.dataFormat?Xx(t,[1,2]):Xx(t,[2,3])}))}}]),n}(BR);UR.className="GlobalAveragePooling2D",Ey(UR);var WR=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"call",value:function(e,t){var n=this;return My((function(){var t=XM(e);return"channelsLast"===n.dataFormat?Mx(t,[1,2]):Mx(t,[2,3])}))}}]),n}(BR);WR.className="GlobalMaxPooling2D",Ey(WR);var VR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).layer=e.layer,r}return(0,A.Z)(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){lu(R(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=wA(t.layer,n);delete t.layer;var a={layer:r};return Object.assign(a,t),new e(a)}}]),n}(oA),ZR=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return(0,A.Z)(n,[{key:"build",value:function(e){if((e=YM(e)).length<3)throw new i_("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),lu(R(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=YM(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return My((function(){return jN((function(e,r){return[XM(n.layer.call(e,t)),[]]}),e=XM(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(VR);ZR.className="TimeDistributed",Ey(ZR);var HR=function(e){N(n,e);var t=F(n);function n(e){var r;M(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=wA(i),a.goBackwards=!0!==a.goBackwards;var o={};if(o.className=e.layer.getClassName(),o.config=a,r.backwardLayer=wA(o),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){k_(U_,"BidirectionalMergeMode",e)}(r.mergeMode),e.weights)throw new o_("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return(0,A.Z)(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):d_(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=FN(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return lu(R(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var l=r.length;if(l%2>0)throw new i_("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,(0,_.Z)(r));var u=r.map((function(e){return new tA({shape:e.shape})}));this.forwardLayer.stateSpec=u.slice(0,l/2),this.backwardLayer.stateSpec=u.slice(l/2),s.push.apply(s,(0,_.Z)(u))}if(null!=a)throw new o_("Support for constants in Bidirectional layers is not implemented yet.");for(var c=o[0]instanceof nA,d=0,h=o;d<h.length;d++){if(h[d]instanceof nA!==c)throw new i_("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(c){var f=[e].concat(o),p=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=p;var v=lu(R(n.prototype),"apply",this).call(this,f,t);return this.inputSpec=m,v}return lu(R(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return My((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var l=s.slice(0,s.length/2),u=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:l})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:u}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=Ow(a,1)),"concat"===n.mergeMode?o=uM([r,a]):"sum"===n.mergeMode?o=jy(r,a):"ave"===n.mergeMode?o=pb(.5,jy(r,a)):"mul"===n.mergeMode?o=pb(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;X_(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),X_(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){lu(R(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=lu(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=wA(t.layer);if(delete t.layer,null!=t.numConstants)throw new o_("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(VR);HR.className="Bidirectional",Ey(HR);var GR,qR;th().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(GR||(GR={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(qR||(qR={}));var XR={};function YR(e){return XR[e]}function KR(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd;if("tensor"===i.type)return $R(t.inputNames[i.inputIndexStart],n,r,a);if("tensors"===i.type)return t.inputNames.slice(o,s).map((function(e){return $R(e,n,r,a)}));var l=$R(t.inputNames.slice(o)[0],n,r,a),u=l.dataSync();return"number"===i.type?u[0]:Zd(l.shape,u)}var c=t.attrParams[e];return c&&c.value}function $R(e,t,n,r){var a=eO(e),i=(0,U.Z)(a,2),o=i[0],s=i[1];if(null!=r){var l=r.getHashTableHandleByName(o);if(null!=l)return l}var u=n.currentContextIds.find((function(e){return!!t[QR(o,e)]}));return void 0!==u?t[QR(o,u)][s]:void 0}function JR(e,t){var n=eO(e),r=(0,U.Z)(n,3),a=r[0],i=r[1],o=r[2];return[QR(a,t&&t.currentContextId),i,o]}function QR(e,t){return t?"".concat(e,"-").concat(t):e}function eO(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function tO(e,t,n){var r=KR("pad",e,t,n);if("explicit"===r){r=KR("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function nO(e){return e.kept?e:zg(e)}var rO=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],aO=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],iO=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],oO=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],sO=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],lO=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],uO=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],cO=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],dO=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],hO=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],fO=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],pO=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],mO=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],vO=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],gO=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],yO=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],bO=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],xO=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],wO=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],kO=function(){function e(){var t;M(this,e);var n=[a,i,o,s,l,u,c,d,h,f,p,m,v,g,y,b,x,w,k],r=(t=[]).concat.apply(t,(0,_.Z)(n.map((function(e){return e.json}))));this.opMappers=r.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return(0,A.Z)(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):null!=n.input&&0!==n.input.length||o.push(e[n.name]),e}),{}),l=[],u=[],c={},d={};null!=n&&(c=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));var h=Object.keys(s);h.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=JR(e),a=(0,U.Z)(r,3),i=a[0],o=a[2],l=s[i];if(null!=l.outputs){var u=l.outputs.indexOf(o);if(-1!==u){var c="".concat(i,":").concat(u);t.inputNames[n]=c}}t.inputs.push(l),l.children.push(t)}))})),0===Object.keys(d).length?h.forEach((function(e){var t=s[e];0===t.children.length&&u.push(t)})):Object.keys(d).forEach((function(e){var t=JR(e),n=(0,U.Z)(t,1)[0],r=s[n];null!=r&&(r.signatureKey=d[e],u.push(r))})),Object.keys(c).length>0?Object.keys(c).forEach((function(e){var t=JR(e),n=(0,U.Z)(t,1)[0],r=s[n];r&&(r.signatureKey=c[e],l.push(r))})):l=a;var f={};null!=e.library&&null!=e.library.function&&(f=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var p={nodes:s,inputs:l,outputs:u,weights:i,placeholders:a,signature:n,functions:f};return o.length>0&&(p.initNodes=o),p}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=YR(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=TO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=TO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=DO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=DO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=CO(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=CO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=OO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=OO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=EO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=EO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=PO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=PO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=RO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=RO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=LO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=LO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=AO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=AO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=IO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=IO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=MO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=MO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=JR(e.name),n=(0,U.Z)(t,1)[0],r={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:_O(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,i.push(r),a[n]=r})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=JR(e),i=(0,U.Z)(r,3),o=i[0],s=i[2],l=a[o];if(null!=l.outputs){var u=l.outputs.indexOf(s);if(-1!==u){var c="".concat(o,":").concat(u);t.inputNames[n]=c}}t.inputs.push(l),l.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=JR(s[e.name]),n=(0,U.Z)(t,2),r=n[0],i=n[1],l=a[r];null!=l&&(l.defaultOutput=i,o.push(l))}));var l=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:l}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function SO(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=th().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function TO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?SO(a.s,r):n}function EO(e,t,n){var r=e[t];return r?r.b:n}function CO(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function _O(e){switch("string"===typeof e&&(e=GR[e]),e){case GR.DT_FLOAT:case GR.DT_HALF:return"float32";case GR.DT_INT32:case GR.DT_INT64:case GR.DT_INT8:case GR.DT_UINT8:return"int32";case GR.DT_BOOL:return"bool";case GR.DT_DOUBLE:return"float32";case GR.DT_STRING:return"string";default:return null}}function MO(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function AO(e,t,n){var r=e[t];return r&&r.type?_O(r.type):n}function IO(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return _O(e)})):n}function NO(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function RO(e,t,n){var r=e[t];return r&&r.shape?NO(r.shape):n}function OO(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function DO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return SO(e,r)})):n}function LO(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return NO(e)})):n}function PO(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var FO=function(){function e(t,n,r){var a=this;M(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return(0,A.Z)(e,[{key:"getInput",value:function(e){return $R(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return $R(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return CO(this.node.rawAttrs,e,t);if(null!=n.s)return TO(this.node.rawAttrs,e,t);if(null!=n.b)return EO(this.node.rawAttrs,e,t);if(null!=n.shape)return RO(this.node.rawAttrs,e,t);if(null!=n.type)return AO(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return OO(this.node.rawAttrs,e,t);if(null!=n.list.s)return DO(this.node.rawAttrs,e,t);if(null!=n.list.shape)return LO(this.node.rawAttrs,e,t);if(null!=n.list.b)return PO(this.node.rawAttrs,e,t);if(null!=n.list.type)return IO(this.node.rawAttrs,e,t)}return t}}]),e}();function jO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){bd(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];bd(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function zO(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function BO(e,t,n){var r=UO(e,n),a=!zO(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=UO(e.shape,r)})),!zO(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function UO(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var WO=function(){function e(t,n,r,a,i,o,s){M(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Oy(0),Iy(this.idTensor)}return(0,A.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),jO(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,Iy(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return Iv([],[0].concat(this.elementShape));var r=this.readMany(e);return jO(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),ok(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return Iv([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return jO(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),hb(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,(0,_.Z)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,bk(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];My((function(){t=ub(t,[1,r,i]);for(var s=0;s<e.length;++s){var l=[0,0===s?0:a[s-1],0],u=[1,e[s],i];o[s]=ub(vb(t,l,u),n.elementShape)}return o}));for(var s=[],l=0;l<e.length;l++)s[l]=l;this.writeMany(s,o)}}]),e}(),VO=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;M(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));jO(n,e.shape,"TensorList shape mismatch: "),Iy(e)})),this.idTensor=Oy(0),this.maxNumElements=a,Iy(this.idTensor)}return(0,A.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e((0,_.Z)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));jO(e,this.elementShape,"TensorList shape mismatch: ");var a=BO(this.elementShape,this.tensors,e);return My((function(){var e=n.tensors.map((function(e){return ub(e,a)}));return ok(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=BO(this.elementShape,this.tensors,e),r=this.tensors.pop();return jO(r.shape,e,"TensorList shape mismatch: "),ub(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(jO(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Iy(e),this.tensors.push(e)}},{key:"resize",value:function(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));this.tensors.length=e}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));jO(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=BO(this.elementShape,this.tensors,t);return ub(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));jO(this.elementShape,t.shape,"TensorList shape mismatch: "),Iy(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));jO(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=BO(this.elementShape,this.tensors,n);return 0===e.length?Iv([],[0].concat(a)):My((function(){var t=e.map((function(e){return ub(r.tensors[e],a)}));return ok(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));jO(this.elementShape,t,"TensorList shape mismatch: ");var r=BO(this.elementShape,this.tensors,t);return 0===this.size()?Iv([],[0].concat(r)):My((function(){var e=n.tensors.map((function(e){return ub(e,r)}));return hb(e,0)}))}}]),e}();function ZO(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));jO(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=bk(e);return new VO(a,t,r)}function HO(e,t,n){return new VO([],e,t,n)}function GO(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,(0,_.Z)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new VO([],n,e.dtype,r),o=bk(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function qO(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=UO(e.shape.slice(1),n),o=0===r?0:e.size/r,s=My((function(){var n=[];e=ub(e,[1,r,o]);for(var s=0;s<t.length;++s){var l=[0,0===s?0:a[s-1],0],u=[1,t[s],o];n[s]=ub(vb(e,l,u),i)}return e.dispose(),n})),l=new VO([],n,e.dtype,t.length),u=0;u<s.length;u++)l.setItem(u,s[u]);return l}var XO=function(){var e=Vn(Un().mark((function e(t,n,r){var a,i,o,s,l,u,c,d,h,f,p,m,v,g,y,b,x,w,k,S,T,E,C,_,M,A,I,N,R,O,D,L,P,F,j,z,B,U,W,V,Z,H,G,q,X,Y,K,$,J,Q,ee,te,ne,re,ae,ie,oe,se,le,ue,ce,de,he,fe,pe,me,ve,ge,ye,be,xe,we,ke,Se,Te,Ee,Ce,_e,Me,Ae,Ie,Ne,Re,Oe,De,Le,Pe,Fe,je,ze,Be,Ue,We,Ve,Ze,He,Ge,qe,Xe,Ye,Ke,$e,Je;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?33:"Switch"===e.t0?35:"Merge"===e.t0?46:"Enter"===e.t0?51:"Exit"===e.t0?55:"NextIteration"===e.t0?58:"TensorArrayV3"===e.t0?61:"TensorArrayWriteV3"===e.t0?71:"TensorArrayReadV3"===e.t0?77:"TensorArrayGatherV3"===e.t0?81:"TensorArrayScatterV3"===e.t0?86:"TensorArrayConcatV3"===e.t0?92:"TensorArraySplitV3"===e.t0?96:"TensorArraySizeV3"===e.t0?102:"TensorArrayCloseV3"===e.t0?105:"TensorListSetItem"===e.t0?109:"TensorListGetItem"===e.t0?115:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?121:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?128:"TensorListGather"===e.t0?135:"TensorListStack"===e.t0?141:"TensorListFromTensor"===e.t0?147:"TensorListConcat"===e.t0?153:"TensorListPushBack"===e.t0?158:"TensorListPopBack"===e.t0?163:"TensorListSplit"===e.t0?168:174;break;case 3:return a=KR("thenBranch",t,n,r),i=KR("elseBranch",t,n,r),o=KR("cond",t,n,r),s=KR("args",t,n,r),e.next=9,o.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return l=KR("body",t,n,r),u=KR("cond",t,n,r),c=KR("args",t,n,r),e.next=20,r.functionMap[u].executeFunctionAsync(c,r.tensorArrayMap,r.tensorListMap);case 20:return d=e.sent,h=c.map((function(e){return e.id})),e.next=24,d[0].data();case 24:f=e.sent,d.forEach((function(e){e.kept||-1!==h.indexOf(e.id)||e.dispose()})),p=c,m=Un().mark((function e(){var t,n,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p,e.next=3,r.functionMap[l].executeFunctionAsync(p,r.tensorArrayMap,r.tensorListMap);case 3:return p=e.sent,n=p.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==h.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[u].executeFunctionAsync(p,r.tensorArrayMap,r.tensorListMap);case 8:return a=e.sent,e.next=11,a[0].data();case 11:f=e.sent,a.forEach((function(e){e.kept||-1!==h.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 28:if(!f[0]){e.next=32;break}return e.delegateYield(m(),"t1",30);case 30:e.next=28;break;case 32:return e.abrupt("return",p);case 33:return v=KR("pred",t,n,r),e.abrupt("return",[nO(v)]);case 35:return g=KR("pred",t,n,r),(y=KR("data",t,n,r)).kept||(y=nO(y)),e.next=40,g.data();case 40:if(!e.sent[0]){e.next=44;break}e.t2=[void 0,y],e.next=45;break;case 44:e.t2=[y,void 0];case 45:return e.abrupt("return",e.t2);case 46:if(b=t.inputNames.find((function(e){return void 0!==$R(e,n,r)})),!b){e.next=50;break}return x=$R(b,n,r),e.abrupt("return",[nO(x)]);case 50:return e.abrupt("return",void 0);case 51:return w=KR("frameName",t,n,r),k=KR("tensor",t,n,r),r.enterFrame(w),e.abrupt("return",[nO(k)]);case 55:return S=KR("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[nO(S)]);case 58:return T=KR("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[nO(T)]);case 61:return E=KR("size",t,n,r),C=KR("dtype",t,n,r),_=KR("elementShape",t,n,r),M=KR("dynamicSize",t,n,r),A=KR("clearAfterRead",t,n,r),I=KR("identicalElementShapes",t,n,r),N=KR("name",t,n,r),R=new WO(N,C,E,_,I,M,A),r.addTensorArray(R),e.abrupt("return",[R.idTensor,Oy(1)]);case 71:return O=KR("tensorArrayId",t,n,r),D=KR("index",t,n,r),L=KR("tensor",t,n,r),(P=r.getTensorArray(O.id)).write(D,L),e.abrupt("return",[P.idTensor]);case 77:return F=KR("tensorArrayId",t,n,r),j=KR("index",t,n,r),z=r.getTensorArray(F.id),e.abrupt("return",[z.read(j)]);case 81:return B=KR("tensorArrayId",t,n,r),U=KR("indices",t,n,r),W=KR("dtype",t,n,r),V=r.getTensorArray(B.id),e.abrupt("return",[V.gather(U,W)]);case 86:return Z=KR("tensorArrayId",t,n,r),H=KR("indices",t,n,r),G=KR("tensor",t,n,r),(q=r.getTensorArray(Z.id)).scatter(H,G),e.abrupt("return",[q.idTensor]);case 92:return X=KR("tensorArrayId",t,n,r),Y=r.getTensorArray(X.id),K=KR("dtype",t,n,r),e.abrupt("return",[Y.concat(K)]);case 96:return $=KR("tensorArrayId",t,n,r),J=KR("tensor",t,n,r),Q=KR("lengths",t,n,r),(ee=r.getTensorArray($.id)).split(Q,J),e.abrupt("return",[ee.idTensor]);case 102:return te=KR("tensorArrayId",t,n,r),ne=r.getTensorArray(te.id),e.abrupt("return",[Oy(ne.size(),"int32")]);case 105:return re=KR("tensorArrayId",t,n,r),(ae=r.getTensorArray(re.id)).clearAndClose(),e.abrupt("return",[ae.idTensor]);case 109:return ie=KR("tensorListId",t,n,r),oe=KR("index",t,n,r),se=KR("tensor",t,n,r),(le=r.getTensorList(ie.id)).setItem(oe,se),e.abrupt("return",[le.idTensor]);case 115:return ue=KR("tensorListId",t,n,r),ce=KR("index",t,n,r),de=KR("elementShape",t,n,r),he=KR("elementDType",t,n,r),fe=r.getTensorList(ue.id),e.abrupt("return",[fe.getItem(ce,de,he)]);case 121:return pe=KR("indices",t,n,r),me=KR("tensor",t,n,r),ve=KR("elementShape",t,n,r),ge=KR("numElements",t,n,r),ye=GO(me,pe,ve,ge),r.addTensorList(ye),e.abrupt("return",[ye.idTensor]);case 128:return be=KR("elementShape",t,n,r),xe=KR("elementDType",t,n,r),we="TensorListReserve"===t.op?"numElements":"maxNumElements",ke=KR(we,t,n,r),Se=HO(be,xe,ke),r.addTensorList(Se),e.abrupt("return",[Se.idTensor]);case 135:return Te=KR("tensorListId",t,n,r),Ee=KR("indices",t,n,r),Ce=KR("elementShape",t,n,r),_e=KR("elementDType",t,n,r),Me=r.getTensorList(Te.id),e.abrupt("return",[Me.gather(Ee,_e,Ce)]);case 141:return Ae=KR("tensorListId",t,n,r),Ie=KR("elementShape",t,n,r),Ne=KR("elementDType",t,n,r),Re=KR("numElements",t,n,r),Oe=r.getTensorList(Ae.id),e.abrupt("return",[Oe.stack(Ie,Ne,Re)]);case 147:return De=KR("tensor",t,n,r),Le=KR("elementShape",t,n,r),Pe=KR("elementDType",t,n,r),Fe=ZO(De,Le,Pe),r.addTensorList(Fe),e.abrupt("return",[Fe.idTensor]);case 153:return je=KR("tensorListId",t,n,r),ze=r.getTensorList(je.id),Be=KR("dtype",t,n,r),Ue=KR("elementShape",t,n,r),e.abrupt("return",[ze.concat(Be,Ue)]);case 158:return We=KR("tensorListId",t,n,r),Ve=KR("tensor",t,n,r),(Ze=r.getTensorList(We.id)).pushBack(Ve),e.abrupt("return",[Ze.idTensor]);case 163:return He=KR("tensorListId",t,n,r),Ge=KR("elementShape",t,n,r),qe=KR("elementDType",t,n,r),Xe=r.getTensorList(He.id),e.abrupt("return",[Xe.popBack(Ge,qe)]);case 168:return Ye=KR("tensor",t,n,r),Ke=KR("elementShape",t,n,r),$e=KR("lengths",t,n,r),Je=qO(Ye,$e,Ke),r.addTensorList(Je),e.abrupt("return",[Je.idTensor]);case 174:throw TypeError("Node type ".concat(t.op," is not implemented"));case 175:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function YO(e,t,n){var r=KR("fusedOps",e,t,n),a=(0,U.Z)(r,2),i=a[0],o=a[1],s="biasadd"===i,l=!s,u="prelu"===o,c="fusedbatchnorm"===i,d=KR("numArgs",e,t,n);if(s){if(u&&2!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&s&&1!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var h=KR("strides",e,t,n),f=tO(e,t,n),p=KR("dataFormat",e,t,n).toUpperCase(),m=KR("dilations",e,t,n),v=KR("args",e,t,n),g=(0,U.Z)(v,2),y=g[0],b=g[1];return l&&(b=y,y=void 0),{stride:h,pad:f,dataFormat:p,dilations:m,biasArg:y,preluArg:b,activationFunc:o,leakyreluAlpha:KR("leakyreluAlpha",e,t,n)}}function KO(e,t,n){return{boxes:KR("boxes",e,t,n),scores:KR("scores",e,t,n),maxOutputSize:KR("maxOutputSize",e,t,n),iouThreshold:KR("iouThreshold",e,t,n),scoreThreshold:KR("scoreThreshold",e,t,n),softNmsSigma:KR("softNmsSigma",e,t,n)}}var $O=function(){var e=Vn(Un().mark((function e(t,n,r){var a,i,o,s,l,u,c,d,h,f,p,m,v,g,y,b,x,w,k,S,T,E,C,_;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?8:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?14:"Where"===e.t0?19:"ListDiff"===e.t0?26:27;break;case 3:return a=KO(t,n,r),i=a.boxes,o=a.scores,s=a.maxOutputSize,l=a.iouThreshold,u=a.scoreThreshold,c=a.softNmsSigma,e.next=6,KS.nonMaxSuppressionWithScoreAsync(i,o,s,l,u,c);case 6:return d=e.sent,e.abrupt("return",[d.selectedIndices,d.selectedScores]);case 8:return h=KO(t,n,r),f=h.boxes,p=h.scores,m=h.maxOutputSize,v=h.iouThreshold,g=h.scoreThreshold,y=KR("padToMaxOutputSize",t,n,r),e.next=12,KS.nonMaxSuppressionPaddedAsync(f,p,m,v,g,y);case 12:return b=e.sent,e.abrupt("return",[b.selectedIndices,b.validOutputs]);case 14:return x=KO(t,n,r),w=x.boxes,k=x.scores,S=x.maxOutputSize,T=x.iouThreshold,E=x.scoreThreshold,e.next=17,KS.nonMaxSuppressionAsync(w,k,S,T,E);case 17:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 19:return C=jg(KR("condition",t,n,r),"bool"),e.next=22,Sk(C);case 22:return e.t2=e.sent,_=[e.t2],C.dispose(),e.abrupt("return",_);case 26:return e.abrupt("return",Vw(KR("x",t,n,r),KR("y",t,n,r)));case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),JO=function(){function e(t,n){M(this,e),this.keyDType=t,this.valueDType=n,this.handle=Oy(0),this.tensorMap=new Map,Iy(this.handle)}return(0,A.Z)(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return Oy(this.size(),"int32")}},{key:"import",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",My((function(){var e=bk(n),t=r.length,i=e.length;bd(t===i,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(i," ")+"elements."}));for(var o=0;o<t;o++){var s=r[o],l=e[o];Iy(l),a.tensorMap.set(s,l)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",My((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return ok(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),QO=function(){var e=Vn(Un().mark((function e(t,n,r,a){var i,o,s,l,u,c,d,h,f,p,m,v,g;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?8:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?16:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?24:27;break;case 3:return i=KR("keyDType",t,n,r),o=KR("valueDType",t,n,r),s=new JO(i,o),a.addHashTable(t.name,s),e.abrupt("return",[s.handle]);case 8:return l=KR("tableHandle",t,n,r,a),u=KR("keys",t,n,r),c=KR("values",t,n,r),d=a.getHashTableById(l.id),e.next=14,d.import(u,c);case 14:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 16:return h=KR("tableHandle",t,n,r,a),f=KR("keys",t,n,r),p=KR("defaultValue",t,n,r),m=a.getHashTableById(h.id),e.next=22,m.find(f,p);case 22:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 24:return v=KR("tableHandle",t,n,r,a),g=a.getHashTableById(v.id),e.abrupt("return",[g.tensorSize()]);case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();function eD(e,t,n,r){var a=function(e,t,n){switch(e.category){case"arithmetic":return My((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[jy(KR("a",e,t,n),KR("b",e,t,n))];case"AddN":return[zy(KR("tensors",e,t,n))];case"FloorMod":case"Mod":return[tw(KR("a",e,t,n),KR("b",e,t,n))];case"Mul":return[pb(KR("a",e,t,n),KR("b",e,t,n))];case"RealDiv":case"Div":return[Yb(KR("a",e,t,n),KR("b",e,t,n))];case"DivNoNan":return[Qb(KR("a",e,t,n),KR("b",e,t,n))];case"FloorDiv":return[Xb(KR("a",e,t,n),KR("b",e,t,n))];case"Sub":return[Ax(KR("a",e,t,n),KR("b",e,t,n))];case"Minimum":return[Qx(KR("a",e,t,n),KR("b",e,t,n))];case"Maximum":return[qx(KR("a",e,t,n),KR("b",e,t,n))];case"Pow":return[gw(KR("a",e,t,n),KR("b",e,t,n))];case"SquaredDifference":return[ak(KR("a",e,t,n),KR("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"basic_math":return My((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[Ly(KR("x",e,t,n))];case"Acos":return[Py(KR("x",e,t,n))];case"Acosh":return[Fy(KR("x",e,t,n))];case"Asin":return[Zy(KR("x",e,t,n))];case"Asinh":return[Hy(KR("x",e,t,n))];case"Atan":return[Gy(KR("x",e,t,n))];case"Atan2":return[qy(KR("x",e,t,n),KR("y",e,t,n))];case"Atanh":return[Xy(KR("x",e,t,n))];case"Ceil":return[_b(KR("x",e,t,n))];case"Complex":return[Mv(KR("real",e,t,n),KR("imag",e,t,n))];case"Cos":return[Bb(KR("x",e,t,n))];case"Cosh":return[Ub(KR("x",e,t,n))];case"Elu":return[nx(KR("x",e,t,n))];case"Erf":return[rx(KR("x",e,t,n))];case"Exp":return[ax(KR("x",e,t,n))];case"Expm1":return[ox(KR("x",e,t,n))];case"Floor":return[cx(KR("x",e,t,n))];case"Log":return[Sx(KR("x",e,t,n))];case"Log1p":return[Tx(KR("x",e,t,n))];case"Imag":return[px(KR("x",e,t,n))];case"Neg":return[Ex(KR("x",e,t,n))];case"Reciprocal":return[Iw(KR("x",e,t,n))];case"Real":return[Aw(KR("x",e,t,n))];case"Relu":return[Nw(KR("x",e,t,n))];case"Round":return[jw(KR("x",e,t,n))];case"Selu":return[Bw(KR("x",e,t,n))];case"Sigmoid":return[mb(KR("x",e,t,n))];case"Sin":return[Hw(KR("x",e,t,n))];case"Sign":return[Zw(KR("x",e,t,n))];case"Sinh":return[Gw(KR("x",e,t,n))];case"Softplus":return[Cx(KR("x",e,t,n))];case"Sqrt":return[rk(KR("x",e,t,n))];case"Square":return[nw(KR("x",e,t,n))];case"Tanh":return[gb(KR("x",e,t,n))];case"Tan":return[uk(KR("x",e,t,n))];case"ClipByValue":return[Mb(KR("x",e,t,n),KR("clipValueMin",e,t,n),KR("clipValueMax",e,t,n))];case"Relu6":return[Rw(KR("x",e,t,n))];case"Rsqrt":return[zw($R(e.inputNames[0],t,n))];case"Prod":return[bw(KR("x",e,t,n),KR("axes",e,t,n))];case"LeakyRelu":return[yx(KR("x",e,t,n),KR("alpha",e,t,n))];case"Prelu":return[yw(KR("x",e,t,n),KR("alpha",e,t,n))];case"IsNan":return[gx($R(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"control":return XO(e,t,n);case"convolution":return My((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=KR("stride",e,t,n),a=KR("pad",e,t,n),i=KR("dataFormat",e,t,n).toUpperCase(),o=KR("dilation",e,t,n);return[Db(KR("x",e,t,n),KR("filter",e,t,n),r,a,i,o)];case"Conv2D":var s=KR("strides",e,t,n),l=tO(e,t,n),u=KR("dataFormat",e,t,n).toUpperCase(),c=KR("dilations",e,t,n);return[Ob(KR("x",e,t,n),KR("filter",e,t,n),[s[1],s[2]],l,u,[c[1],c[2]])];case"_FusedConv2D":var d=YO(e,t,n),h=d.stride,f=d.pad,p=d.dataFormat,m=d.dilations,v=d.biasArg,g=d.preluArg,y=d.activationFunc,b=d.leakyreluAlpha;return[Hk({x:KR("x",e,t,n),filter:KR("filter",e,t,n),strides:[h[1],h[2]],pad:f,dataFormat:p,dilations:[m[1],m[2]],bias:v,activation:y,preluActivationWeights:g,leakyreluAlpha:b})];case"FusedDepthwiseConv2dNative":var x=YO(e,t,n),w=x.stride,k=x.pad,S=x.dataFormat,T=x.dilations,E=x.biasArg,C=x.preluArg,_=x.activationFunc,M=x.leakyreluAlpha;return[Xk({x:KR("x",e,t,n),filter:KR("filter",e,t,n),strides:[w[1],w[2]],pad:k,dataFormat:S,dilations:[T[1],T[2]],bias:E,activation:_,preluActivationWeights:C,leakyreluAlpha:M})];case"Conv2DBackpropInput":case"Conv2dTranspose":var A=KR("outputShape",e,t,n),I=KR("strides",e,t,n),N=tO(e,t,n);return[Pb(KR("x",e,t,n),KR("filter",e,t,n),A,[I[1],I[2]],N)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var R=KR("strides",e,t,n),O=tO(e,t,n),D=KR("dilations",e,t,n),L=KR("dataFormat",e,t,n).toUpperCase();return[Hb(KR("input",e,t,n),KR("filter",e,t,n),[R[1],R[2]],O,L,[D[1],D[2]])];case"Conv3D":var P=KR("strides",e,t,n),F=KR("pad",e,t,n),j=KR("dataFormat",e,t,n).toUpperCase(),z=KR("dilations",e,t,n);return[Fb(KR("x",e,t,n),KR("filter",e,t,n),[P[1],P[2],P[3]],F,j,[z[1],z[2],z[3]])];case"AvgPool":var B=KR("strides",e,t,n),U=KR("pad",e,t,n),W=KR("kernelSize",e,t,n);return[cb(KR("x",e,t,n),[W[1],W[2]],[B[1],B[2]],U)];case"MaxPool":var V=KR("strides",e,t,n),Z=KR("pad",e,t,n),H=KR("kernelSize",e,t,n);return[Zx(KR("x",e,t,n),[H[1],H[2]],[V[1],V[2]],Z)];case"MaxPoolWithArgmax":var G=KR("strides",e,t,n),q=KR("pad",e,t,n),X=KR("kernelSize",e,t,n),Y=KR("includeBatchInIndex",e,t,n),K=Gx(KR("x",e,t,n),[X[1],X[2]],[G[1],G[2]],q,Y);return[K.result,K.indexes];case"AvgPool3D":var $=KR("strides",e,t,n),J=KR("pad",e,t,n),Q=KR("kernelSize",e,t,n);return[db(KR("x",e,t,n),[Q[1],Q[2],Q[3]],[$[1],$[2],$[3]],J)];case"MaxPool3D":var ee=KR("strides",e,t,n),te=KR("pad",e,t,n),ne=KR("kernelSize",e,t,n);return[Hx(KR("x",e,t,n),[ne[1],ne[2],ne[3]],[ee[1],ee[2],ee[3]],te)];case"Dilation2D":var re=KR("strides",e,t,n),ae=KR("pad",e,t,n),ie=KR("dilations",e,t,n),oe=re[1],se=re[2],le=ie[1],ue=ie[2];return[qb(KR("x",e,t,n),KR("filter",e,t,n),[oe,se],ae,[le,ue],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"creation":return My((function(){return function(e,t,n){switch(e.op){case"Fill":var r=KR("shape",e,t,n),a=KR("dtype",e,t,n);return[ux(r,KR("value",e,t,n),a)];case"LinSpace":return[wx(KR("start",e,t,n),KR("stop",e,t,n),KR("num",e,t,n))];case"Multinomial":var i=KR("logits",e,t,n),o=KR("numSamples",e,t,n),s=KR("seed",e,t,n);return[iw(i,o,s)];case"OneHot":var l=KR("indices",e,t,n),u=KR("depth",e,t,n),c=KR("onValue",e,t,n),d=KR("offValue",e,t,n);return[sw(l,u,c,d)];case"Ones":return[Kx(KR("shape",e,t,n),KR("dtype",e,t,n))];case"OnesLike":return[lw(KR("x",e,t,n))];case"RandomUniform":return[_w(KR("shape",e,t,n),KR("minval",e,t,n),KR("maxval",e,t,n),KR("dtype",e,t,n))];case"Range":return[Mw(KR("start",e,t,n),KR("stop",e,t,n),KR("step",e,t,n),KR("dtype",e,t,n))];case"TruncatedNormal":var h=KR("shape",e,t,n),f=KR("mean",e,t,n),p=KR("stdDev",e,t,n),m=KR("seed",e,t,n);return[vk(h,f,p,KR("dtype",e,t,n),m)];case"Zeros":return[Yx(KR("shape",e,t,n),KR("dtype",e,t,n))];case"ZerosLike":return[Jb(KR("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"dynamic":return $O(e,t,n);case"evaluation":return My((function(){return function(e,t,n){switch(e.op){case"TopKV2":var r=KR("x",e,t,n),a=KR("k",e,t,n),i=KR("sorted",e,t,n),o=mk(r,a,i);return[o.values,o.indices];case"Unique":var s=KR("x",e,t,n),l=gk(s);return[l.values,l.indices];case"UniqueV2":var u=KR("x",e,t,n),c=KR("axis",e,t,n),d=gk(u,c);return[d.values,d.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"image":return My((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=KR("images",e,t,n),a=KR("size",e,t,n),i=KR("alignCorners",e,t,n),o=KR("halfPixelCenters",e,t,n);return[KS.resizeBilinear(r,[a[0],a[1]],i,o)];case"ResizeNearestNeighbor":var s=KR("images",e,t,n),l=KR("size",e,t,n),u=KR("alignCorners",e,t,n),c=KR("halfPixelCenters",e,t,n);return[KS.resizeNearestNeighbor(s,[l[0],l[1]],u,c)];case"CropAndResize":var d=KR("image",e,t,n),h=KR("boxes",e,t,n),f=KR("boxInd",e,t,n),p=KR("cropSize",e,t,n),m=KR("method",e,t,n),v=KR("extrapolationValue",e,t,n);return[KS.cropAndResize(d,h,f,p,m,v)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"graph":return My((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=KR("default",e,t,n);return[$R(e.name,t,n)||r];case"Placeholder":return[$R(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[nO(KR("x",e,t,n))];case"IdentityN":return KR("x",e,t,n).map((function(e){return nO(e)}));case"Shape":return[ck(KR("x",e,t,n).shape,"int32")];case"ShapeN":return KR("x",e,t,n).map((function(e){return ck(e.shape)}));case"Size":return[Oy(KR("x",e,t,n).size,"int32")];case"Rank":return[Oy(KR("x",e,t,n).rank,"int32")];case"NoOp":return[Oy(1)];case"Print":var a=KR("x",e,t,n),i=KR("data",e,t,n),o=KR("message",e,t,n),s=KR("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(var l=0;l<i.length;l++)console.log(Array.prototype.slice.call(i[l].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"logical":return My((function(){return function(e,t,n){switch(e.op){case"Equal":return[Kb(KR("a",e,t,n),KR("b",e,t,n))];case"NotEqual":return[ow(KR("a",e,t,n),KR("b",e,t,n))];case"Greater":return[hx(KR("a",e,t,n),KR("b",e,t,n))];case"GreaterEqual":return[fx(KR("a",e,t,n),KR("b",e,t,n))];case"Less":return[bx(KR("a",e,t,n),KR("b",e,t,n))];case"LessEqual":return[xx(KR("a",e,t,n),KR("b",e,t,n))];case"LogicalAnd":return[Bx(KR("a",e,t,n),KR("b",e,t,n))];case"LogicalNot":return[Ux(KR("a",e,t,n))];case"LogicalOr":return[Wx(KR("a",e,t,n),KR("b",e,t,n))];case"Select":case"SelectV2":return[$b(KR("condition",e,t,n),KR("a",e,t,n),KR("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"matrices":return My((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[fb(KR("a",e,t,n),KR("b",e,t,n),KR("transposeA",e,t,n),KR("transposeB",e,t,n))];case"Einsum":return[tx.apply(S,[KR("equation",e,t,n)].concat((0,_.Z)(KR("tensors",e,t,n))))];case"Transpose":return[Ck(KR("x",e,t,n),KR("perm",e,t,n))];case"_FusedMatMul":var r=KR("fusedOps",e,t,n),a=(0,U.Z)(r,2),i=a[0],o=a[1],s="biasadd"===i,l="prelu"===o,u=KR("numArgs",e,t,n),c=KR("leakyreluAlpha",e,t,n);if(s){if(l&&2!==u)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&1!==u)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var d=KR("args",e,t,n),h=(0,U.Z)(d,2),f=h[0],p=h[1];return[Yk({a:KR("a",e,t,n),b:KR("b",e,t,n),transposeA:KR("transposeA",e,t,n),transposeB:KR("transposeB",e,t,n),bias:f,activation:o,preluActivationWeights:p,leakyreluAlpha:c})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"normalization":return My((function(){return function(e,t,n){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[xb(KR("x",e,t,n),KR("mean",e,t,n),KR("variance",e,t,n),KR("offset",e,t,n),KR("scale",e,t,n),KR("epsilon",e,t,n))];case"LRN":return[kx(KR("x",e,t,n),KR("radius",e,t,n),KR("bias",e,t,n),KR("alpha",e,t,n),KR("beta",e,t,n))];case"Softmax":return[$w(KR("x",e,t,n))];case"LogSoftmax":return[Nx(KR("x",e,t,n))];case"SparseToDense":return[Ok(KR("sparseIndices",e,t,n),KR("outputShape",e,t,n),KR("sparseValues",e,t,n),KR("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"reduction":return My((function(){return function(e,t,n){switch(e.op){case"Max":var r=KR("axis",e,t,n),a=KR("keepDims",e,t,n);return[Mx(KR("x",e,t,n),r,a)];case"Mean":var i=KR("axis",e,t,n),o=KR("keepDims",e,t,n);return[Xx(KR("x",e,t,n),i,o)];case"Min":var s=KR("axis",e,t,n),l=KR("keepDims",e,t,n);return[Jx(KR("x",e,t,n),s,l)];case"Sum":var u=KR("axis",e,t,n),c=KR("keepDims",e,t,n);return[Ix(KR("x",e,t,n),u,c)];case"All":var d=KR("axis",e,t,n),h=KR("keepDims",e,t,n);return[By(KR("x",e,t,n),d,h)];case"Any":var f=KR("axis",e,t,n),p=KR("keepDims",e,t,n);return[Uy(KR("x",e,t,n),f,p)];case"ArgMax":var m=KR("axis",e,t,n);return[Wy(KR("x",e,t,n),m)];case"ArgMin":var v=KR("axis",e,t,n);return[Vy(KR("x",e,t,n),v)];case"Prod":var g=KR("axis",e,t,n),y=KR("keepDims",e,t,n);return[bw(KR("x",e,t,n),g,y)];case"Cumsum":var b=KR("axis",e,t,n),x=KR("exclusive",e,t,n),w=KR("reverse",e,t,n);return[Wb(KR("x",e,t,n),b,x,w)];case"Bincount":var k=KR("x",e,t,n),S=KR("weights",e,t,n),T=KR("size",e,t,n);return[Tb(k,S,T)];case"DenseBincount":var E=KR("x",e,t,n),C=KR("weights",e,t,n),_=KR("size",e,t,n),M=KR("binaryOutput",e,t,n);return[Vb(E,C,_,M)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"slice_join":return My((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=KR("n",e,t,n),a=KR("axis",e,t,n),i=KR("tensors",e,t,n);return i=i.slice(0,r),[hb(i,a)];case"Gather":var o=KR("x",e,t,n),s=KR("indices",e,t,n);return[dx(o,jg(s,"int32"),0)];case"GatherV2":var l=KR("axis",e,t,n),u=KR("batchDims",e,t,n),c=KR("x",e,t,n),d=KR("indices",e,t,n);return[dx(c,jg(d,"int32"),l,u)];case"Reverse":for(var h=KR("dims",e,t,n),f=[],p=0;p<h.length;p++)h[p]&&f.push(p);var m=KR("x",e,t,n);return[Ow(m,f)];case"ReverseV2":var v=KR("axis",e,t,n),g=KR("x",e,t,n);return[Ow(g,v)];case"Slice":var y=KR("begin",e,t,n),b=KR("size",e,t,n);return[vb(KR("x",e,t,n),y,b)];case"StridedSlice":var x=KR("begin",e,t,n),w=KR("end",e,t,n),k=KR("strides",e,t,n),S=KR("beginMask",e,t,n),T=KR("endMask",e,t,n),E=KR("ellipsisMask",e,t,n),C=KR("newAxisMask",e,t,n),_=KR("shrinkAxisMask",e,t,n),M=KR("x",e,t,n);return[lk(M,x,w,k,S,T,E,C,_)];case"Pack":return My((function(){var r=KR("axis",e,t,n),a=KR("tensors",e,t,n),i=a[0].shape,o=ik(a[0]).shape,s=a.map((function(e){var t=Td(e.shape,i);if(!t&&!Td(ik(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:ub(e,i)}));return[ok(s,r)]}));case"Unpack":var A=KR("axis",e,t,n),I=KR("tensor",e,t,n);return bk(I,A);case"Tile":var N=KR("reps",e,t,n);return[sx(KR("x",e,t,n),N)];case"Split":case"SplitV":var R=KR("axis",e,t,n),O=KR("numOrSizeSplits",e,t,n),D=KR("x",e,t,n);return tk(D,O,R);case"ScatterNd":var L=KR("indices",e,t,n),P=KR("values",e,t,n),F=KR("shape",e,t,n);return[Rk(L,P,F)];case"GatherNd":var j=KR("x",e,t,n),z=KR("indices",e,t,n);return[Dk(j,z)];case"SparseToDense":var B=KR("sparseIndices",e,t,n),U=KR("outputShape",e,t,n),W=KR("sparseValues",e,t,n),V=KR("defaultValue",e,t,n);return[Ok(B,W,U,W.dtype===V.dtype?V:jg(V,W.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"sparse":return My((function(){return function(e,t,n){switch(e.op){case"SparseFillEmptyRows":var r=QS.sparseFillEmptyRows(KR("indices",e,t,n),KR("values",e,t,n),KR("denseShape",e,t,n),KR("defaultValue",e,t,n));return[r.outputIndices,r.outputValues,r.emptyRowIndicator,r.reverseIndexMap];case"SparseReshape":var a=QS.sparseReshape(KR("inputIndices",e,t,n),KR("inputShape",e,t,n),KR("newShape",e,t,n));return[a.outputIndices,a.outputShape];case"SparseSegmentMean":return[QS.sparseSegmentMean(KR("data",e,t,n),KR("indices",e,t,n),KR("segmentIds",e,t,n))];case"SparseSegmentSum":return[QS.sparseSegmentSum(KR("data",e,t,n),KR("indices",e,t,n),KR("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"spectral":return My((function(){return function(e,t,n){switch(e.op){case"FFT":return[Jw(KR("x",e,t,n))];case"IFFT":return[Qw(KR("x",e,t,n))];case"RFFT":return[nk(KR("x",e,t,n))];case"IRFFT":return[ek(KR("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"string":return My((function(){return function(e,t,n){switch(e.op){case"StringNGrams":var r=eT.stringNGrams(KR("data",e,t,n),KR("dataSplits",e,t,n),KR("separator",e,t,n),KR("nGramWidths",e,t,n),KR("leftPad",e,t,n),KR("rightPad",e,t,n),KR("padWidth",e,t,n),KR("preserveShortSequences",e,t,n));return[r.nGrams,r.nGramsSplits];case"StringSplit":var a=eT.stringSplit(KR("input",e,t,n),KR("delimiter",e,t,n),KR("skipEmpty",e,t,n));return[a.indices,a.values,a.shape];case"StringToHashBucketFast":return[eT.stringToHashBucketFast(KR("input",e,t,n),KR("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"transformation":return My((function(){return function(e,t,n){switch(e.op){case"Cast":return[jg(KR("x",e,t,n),KR("dtype",e,t,n))];case"ExpandDims":var r=KR("axis",e,t,n);return[ix(KR("x",e,t,n),r)];case"Squeeze":var a=KR("axis",e,t,n);return[ik(KR("x",e,t,n),a)];case"Reshape":return[ub(KR("x",e,t,n),KR("shape",e,t,n))];case"MirrorPad":return[ew(KR("x",e,t,n),KR("padding",e,t,n),KR("mode",e,t,n))];case"PadV2":case"Pad":return[cw(KR("x",e,t,n),KR("padding",e,t,n),KR("constantValue",e,t,n))];case"SpaceToBatchND":var i=KR("blockShape",e,t,n),o=KR("paddings",e,t,n);return[mw(KR("x",e,t,n),i,o)];case"BatchToSpaceND":var s=KR("blockShape",e,t,n),l=KR("crops",e,t,n);return[bb(KR("x",e,t,n),s,l)];case"DepthToSpace":var u=KR("blockSize",e,t,n),c=KR("dataFormat",e,t,n).toUpperCase();return[Zb(KR("x",e,t,n),u,c)];case"BroadcastTo":return[Cb(KR("x",e,t,n),KR("shape",e,t,n))];case"BroadcastArgs":return[Eb(KR("s0",e,t,n),KR("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"hash_table":return QO(e,t,n,r);case"custom":var a=YR(e.op);if(a&&a.customExecutor)return a.customExecutor(new FO(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return $d(a)?a.then((function(e){return[].concat(e)})):[].concat(a)}var tD=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};M(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return(0,A.Z)(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function nD(e,t,n,r){var a=new Set,i=[],o=null,s=null,l=new Set,u=Object.keys(e).map((function(e){return eO(e)[0]})),c=[];null!=r&&(c=r.map((function(e){return eO(e.name)[0]})));for(var d=(0,_.Z)(t);d.length>0;){var h=d.pop();(oD(h)||sD(h)||lD(h))&&null==o&&(s=(o=h).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(h.name),null==n[h.name]&&(-1===u.indexOf(h.name)&&-1===c.indexOf(h.name)&&(0!==h.inputs.length?h.inputs.forEach((function(e){l.has(e.name)||(l.add(e.name),d.push(e))})):i.push(h.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var rD=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],aD=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],iD=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function oD(e){return rD.indexOf(e.op)>=0}function sD(e){return aD.indexOf(e.op)>=0}function lD(e){return iD.indexOf(e.op)>=0}var uD=function(){function e(t,n){var r=this;M(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return(0,A.Z)(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,(0,_.Z)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=nD(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(e){return eO(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;o.forEach((function(e){r.has(e.name)&&i.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&i.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&i.push(e)}));for(var l=new Set,u=[];i.length>0;){var c=i.pop();l.add(c.name),t[c.name]||u.push(c),c.children.forEach((function(e){!l.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return l.has(e.name)}))&&i.push(e)}))}return u}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[eO(e)[0]]})),i=t.map((function(e){return eO(e)[0]})),o=i.map((function(e){return n.graph.nodes[e]}));this.resetIntermediateTensors(),0===o.length&&(o=this._outputs);var s=this.getCompilationKey(a,o),l=this.compiledMap.get(s);null==l&&(l=this.compile(e,o),this.compiledMap.set(s,l));var u={},c={};return My((function(){var r=new tD(n.weightMap,u,c,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=eO(t),r=(0,U.Z)(n,2),i=r[0],o=[];o[r[1]]=e[t],a[i]=o}));for(var o=n.getFrozenTensorIds(a),s={},d=0;d<l.length;d++){var h=l[d];if(!a[h.name]){var f=eD(h,a,r,n._resourceManager);if($d(f))throw new Error("The execution of the op '".concat(h.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[h.name]=f,n.checkTensorForDisposal(h.name,h,a,r,o,i,s)}}return null==n.parent&&r.dispose(o),t.map((function(e){return $R(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){var s=this;"control"!==t.category&&-1===i.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var i=function(e,t,n){return t[QR(e,n.currentContextId)]}(e.name,n,r);null!=i&&i.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var n=o[e.id];if(1===n){if(s.keepTensorForDebug){var i=JR(t.name,r),l=(0,U.Z)(i,2),u=l[0],c=l[1];s.intermediateTensors[u]||(s.intermediateTensors[u]=[]),s.intermediateTensors[u][c]=e}else e.dispose();delete o[e.id]}else null!=n&&o[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){var e=this;this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach((function(t){return e.intermediateTensors[t].forEach((function(e){return e.dispose()}))})),this.disposeTensorsMap())}},{key:"disposeTensorsMap",value:function(){var e=this;this.tensorsMap&&Object.keys(this.tensorsMap).forEach((function(t){e.tensorsMap[t].forEach((function(t){!t||t.kept||t.isDisposed||e.keepIds.has(t.id)||t.dispose()}))}))}},{key:"getIntermediateTensors",value:function(){return this.tensorsMap}},{key:"resetIntermediateTensors",value:function(){for(var e in this.intermediateTensors)this.intermediateTensors[e].forEach((function(e){return e.dispose()})),delete this.intermediateTensors[e]}},{key:"_executeAsync",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a,i,o,s,l,u,c=this,d=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=d.length>3&&void 0!==d[3]?d[3]:{},i=d.length>4&&void 0!==d[4]?d[4]:{},(r=d.length>2&&void 0!==d[2]&&d[2])||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=th().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(UK){console.warn(UK.message)}return this.resetIntermediateTensors(),o=new tD(this.weightMap,a,i,this.functionExecutorMap),e.next=9,this.executeWithControlFlow(t,o,n,r);case 9:return this.tensorsMap=e.sent,s=n.map((function(e){return $R(e,c.tensorsMap,o)})),l=s.map((function(e){return e.id})),u=Object.keys(t).map((function(e){return t[e].id})),this.keepIds=new Set([].concat((0,_.Z)(l),(0,_.Z)(u),(0,_.Z)(this.weightIds))),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&o.dispose(this.keepIds),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=Vn(Un().mark((function e(t,n,r){var a,i=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=Vn(Un().mark((function e(t,n,r,a){var i,o,s,l,u,c,d,h,f,p,m,v,g,y,b,x,w,k=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return k.graph.nodes[eO(e)[0]]})),s=r.map((function(e){return eO(e)[0]})),0===(l=s.map((function(e){return k.graph.nodes[e]}))).length&&(l=this._outputs),u=nD(t,l,this.weightMap,this._initNodes),c=u.usedNodes,d=u.missingInputs,h=u.dynamicNode,f=u.syncInputs,p=[].concat((0,_.Z)(o),(0,_.Z)(this.graph.weights),(0,_.Z)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=eO(e),r=(0,U.Z)(n,2),a=r[0],i=[];i[r[1]]=t[e],m[a]=i})),v={},g=this.getFrozenTensorIds(m),y={};case 12:if(!(p.length>0)){e.next=18;break}return b=this.processStack(o,p,n,m,y,g,s,v,c),e.next=16,Promise.all(b);case 16:e.next=12;break;case 18:if(null!=h||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((x=l.filter((function(e){return!oD(e)&&!$R(e.name,m,n)})).map((function(e){return e.name}))).length>0)){e.next=24;break}throw w="",null!=h&&(w="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(f,"]")),new Error("Cannot compute the outputs [".concat(x,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(d,"]. ").concat(w));case 24:return e.abrupt("return",m);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,s,l){for(var u=this,c=[],d=function(){var e=t.pop();n.currentContext=e.contexts;var d="";if("Enter"===e.node.op&&KR("isConstant",e.node,r,n)){var h=JR(e.node.name,n),f=(0,U.Z)(h,1);d=f[0]}if(null==r[e.node.name]){var p=eD(e.node,r,n,u._resourceManager);if(!d){var m=JR(e.node.name,n),v=(0,U.Z)(m,1);d=v[0]}var g=n.currentContext;$d(p)?c.push(p.then((function(c){return r[d]=c,n.currentContext=g,u.checkTensorForDisposal(d,e.node,r,n,i,o,s),u.processChildNodes(e.node,t,n,r,a,l),c}))):(r[d]=p,u.checkTensorForDisposal(d,e.node,r,n,i,o,s),u.processChildNodes(e.node,t,n,r,a,l))}else u.processChildNodes(e.node,t,n,r,a,l)};t.length>0;)d();return c}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=JR(e.name,n),s=(0,U.Z)(o,1)[0];!a[s]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!$R(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!$R(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=eO(n),i=(0,U.Z)(a,1)[0],o=t.graph.nodes[i];if(o.attrParams.shape&&o.attrParams.shape.value){var s=o.attrParams.shape.value,l=s.length===r.shape.length&&r.shape.every((function(e,t){return-1===s[t]||s[t]===e}));bd(l,(function(){return"The shape of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be [".concat(s,"], but was ")+"[".concat(r.shape,"]")}))}o.attrParams.dtype&&o.attrParams.dtype.value&&bd(r.dtype===o.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(o.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=eO(e),r=(0,U.Z)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=eO(e),r=(0,U.Z)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),cD=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};M(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return(0,A.Z)(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),dD="?tfjs-format=file",hD="model.json",fD=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};M(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new cD}return(0,A.Z)(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=ny(e,this.loadOptions);else{var t=Jv(e,this.loadOptions);if(0===t.length)t.push(ny(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.findIOHandler(),null!=this.handler.load){e.next=3;break}throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,this.handler.load();case 5:return t=e.sent,e.abrupt("return",this.loadSync(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadSync",value:function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var r=Lv(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new uD(kO.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=kO.Instance.transformGraph(e.modelInitializer);this.initializer=new uD(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var e=Vn(Un().mark((function e(t,n){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=$v(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){return this.execute(e,this.outputNodes)}},{key:"normalizeInputs",value:function(e){if(!(e instanceof Km)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=Vn(Un().mark((function e(t,n){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=4,this.executor.executeAsync(t,n);case 4:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),e}();function pD(e){return mD.apply(this,arguments)}function mD(){return mD=Vn(Un().mark((function e(t){var n,r,a=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t="".concat(t).concat(hD).concat(dD)),r=new fD(t,n),e.next=8,r.load();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),mD.apply(this,arguments)}function vD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(xD(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=vD(e[o],t,n,r);i[o]=s}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function gD(e){return yD(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:bD)}function yD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(xD(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=e.map((function(e){return e[r]})),o=yD(a,t,n);i[r]=o};for(var s in r)o(s);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function bD(e){return null===e?null:xD(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function xD(e){var t=!1;th().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof n(4977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof Km)&&!(e instanceof Promise)&&!t)}function wD(e){return function(e,t){return vD(e,t)}(e,kD)}function kD(e){return e instanceof Km?{value:e.clone(),recurse:!1}:xD(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var SD=function(){function e(t){if(M(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return(0,A.Z)(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=G(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(_ke){n.e(_ke)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),TD=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.call(this,n.INITIAL_CAPACITY)}return(0,A.Z)(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){lu(R(n.prototype),"isFull",this).call(this)&&this.expand(),lu(R(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){lu(R(n.prototype),"isFull",this).call(this)&&this.expand(),lu(R(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(SD);function ED(e){return new ID(e)}function CD(e,t){return new UD(e,t)}TD.INITIAL_CAPACITY=32;var _D,MD=function(){function e(){M(this,e)}return(0,A.Z)(e,[{key:"toArray",value:function(){var e=Vn(Un().mark((function e(){var t,n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Vn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=Vn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new FD(this,e)}},{key:"filter",value:function(e){return new LD(this,e)}},{key:"map",value:function(e){return new PD(this,e)}},{key:"mapAsync",value:function(e){return new jD(this,e)}},{key:"serialMapAsync",value:function(e){return new jD(this,e).serial()}},{key:"flatmap",value:function(e){return new BD(this,e)}},{key:"forEachAsync",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){return new DD(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bD;return this.rowMajorBatch(e,t).map((function(e){return gD(e,n)}))}},{key:"concatenate",value:function(e,t){return new UD(new AD([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new OD(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new RD(this,e)}},{key:"prefetch",value:function(e){return new WD(this,e)}},{key:"shuffle",value:function(e,t){return new VD(this,e,t)}},{key:"serial",value:function(){return new ND(this)}}]),e}(),AD=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).items=e,r.trav=0,r}return(0,A.Z)(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:wD(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(MD),ID=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).nextFn=e,r}return(0,A.Z)(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(MD),ND=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return(0,A.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=Vn(Un().mark((function e(){var t=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(MD),RD=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,A.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=Vn(Un().mark((function e(){var t=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:Ay(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(MD),OD=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return(0,A.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(MD),DD=function(e){N(n,e);var t=F(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return M(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,A.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=Vn(Un().mark((function e(){var t=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Vn(Un().mark((function e(){var t,n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(MD),LD=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,A.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=Vn(Un().mark((function e(){var t=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:Ay(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(MD),PD=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,A.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a,i,o,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=uv(t.value),r=this.transform(t.value),a=uv(r),i=G(n);try{for(i.s();!(o=i.n()).done;)lv(s=o.value,a)||s.dispose()}catch(_ke){i.e(_ke)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(MD),FD=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,A.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=Vn(Un().mark((function e(){var t=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(MD),jD=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,A.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a,i,o,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=uv(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=uv(r),i=G(n);try{for(i.s();!(o=i.n()).done;)lv(s=o.value,a)||s.dispose()}catch(_ke){i.e(_ke)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(MD),zD=function(e){N(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).outputQueue=new TD,e.lastRead=Promise.resolve({value:null,done:!1}),e}return(0,A.Z)(n,[{key:"next",value:function(){var e=Vn(Un().mark((function e(){var t=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(MD),BD=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,A.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a,i,o,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=uv(t.value),r=this.transform(t.value),a=uv(r),this.outputQueue.pushAll(r),i=G(n);try{for(i.s();!(o=i.n()).done;)lv(s=o.value,a)||s.dispose()}catch(_ke){i.e(_ke)}finally{i.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(zD),UD=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return(0,A.Z)(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=Vn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(MD);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(_D||(_D={}));var WD=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new SD(r),a}return(0,A.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(MD),VD=function(e){N(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=ww.alea(a||Dm().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return(0,A.Z)(n,[{key:"next",value:function(){var e=Vn(Un().mark((function e(){var t=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=Vn(Un().mark((function e(){var t,n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(WD),ZD=function(){function e(){M(this,e),this.size=null}return(0,A.Z)(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return bd(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),HD(Vn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,GD));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,HD(Vn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,HD(Vn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return My((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return HD(Vn(Un().mark((function n(){return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return My((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return HD(Vn(Un().mark((function n(){return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return HD(Vn(Un().mark((function n(){return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,HD(Vn(Un().mark((function t(){var r;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=ED(Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",CD(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,HD(Vn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=ww.alea(t||Dm().toString());return HD(Vn(Un().mark((function t(){var i;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,HD(Vn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function HD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){N(a,n);var r=F(a);function a(){var e;return M(this,a),(e=r.apply(this,arguments)).size=t,e}return(0,A.Z)(a,[{key:"iterator",value:function(){var t=Vn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(ZD))}function GD(e){if(null===e)return null;var t,n=e[0];return null==(t=n)||function(e){return null===e||"object"!==typeof e&&"function"!==typeof e}(t)||Array.isArray(t)||"object"===typeof t&&t instanceof Km||Ld(t)?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Km?ok(e):Iv(e)}(e),recurse:!1}:{value:null,recurse:!0}}ZD.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function qD(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&bd("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var XD=wk,YD=function(e){N(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new dd((0,L.Z)(e),Cy()),e}return(0,A.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,th().get("IS_NODE")&&um("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Fd(n[0])){var a=n.map((function(e){return Lm(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?NT(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return Pm(e)}))}catch(a4){throw new Error("Failed to decode encoded string bytes into utf-8")}return Fg(e.shape,e.dtype,n)}},{key:"makeOutput",value:function(e,t,n){var r=this.write(e,t,n);return Cy().makeTensorFromDataId(r,t,n,this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e).complexTensorInfos;null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=Vn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Dm(),t(),r=Dm()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){qD([e],"where");var t=this.readSync(e.dataId);return XD(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return lu(R(n.prototype),"epsilon",this).call(this)}}]),n}(hd);YD.nextDataId=0;function KD(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(qD(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var l=o,u=l.data.get(s.dataId).values,c=Sd(s.shape),d=n||s.dtype,h=Od(d,c),f=0;f<c;++f)h[f]=t(u[f],i);return l.makeTensorInfo(s.shape,d,h)}}function $D(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(qD(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var l=o,u=l.data.get(s.dataId).values,c=n||s.dtype,d=t(u,c,i);return l.makeTensorInfo(s.shape,c,d)}}Ny("cpu",(function(){return new YD}),1);var JD=KD(tf,(function(e){return e>=0?e:Math.exp(e)-1})),QD={kernelName:tf,backendName:"cpu",kernelFunc:JD};function eL(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var tL={kernelName:bf,backendName:"cpu",kernelFunc:eL};function nL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;qD([a],"leakyRelu");for(var o=Sd(a.shape),s=n.data.get(a.dataId).values,l=Rd("float32",o),u=0;u<s.length;u++)l[u]=s[u]<0?i*s[u]:s[u];return n.makeTensorInfo(a.shape,"float32",l)}var rL={kernelName:Ef,backendName:"cpu",kernelFunc:nL};function aL(e){return function(t,n,r,a,i){var o=cy(t,n),s=o.length,l=Wd(o),u=Rd(i,Sd(o)),c=t.length,d=n.length,h=Wd(t),f=Wd(n),p=ly(t,o),m=ly(n,o);if(p.length+m.length===0)for(var v=0;v<u.length;++v)u[v]=e(r[v%r.length],a[v%a.length]);else for(var g=function(){var t=Kd(y,s,l),n=t.slice(-c);p.forEach((function(e){return n[e]=0}));var i=Yd(n,c,h),o=t.slice(-d);m.forEach((function(e){return o[e]=0}));var v=Yd(o,d,f);u[y]=e(r[i],a[v])},y=0;y<u.length;++y)g();return[u,o]}}var iL=aL((function(e,t){return e<0?t*e:e}));function oL(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;qD([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=iL(r.shape,a.shape,i,o,"float32"),l=(0,U.Z)(s,2),u=l[0],c=l[1];return n.makeTensorInfo(c,"float32",u)}var sL={kernelName:op,backendName:"cpu",kernelFunc:oL},lL=KD(dp,(function(e){return Math.max(0,e)})),uL={kernelName:dp,backendName:"cpu",kernelFunc:lL},cL=KD(gp,(function(e){return Math.min(Math.max(0,e),6)})),dL={kernelName:gp,backendName:"cpu",kernelFunc:cL};function hL(e){return function(t,n,r){for(var a=Rd(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}var fL=hL((function(e){return 1/(1+Math.exp(-e))})),pL=KD(Mp,(function(e){return 1/(1+Math.exp(-e))})),mL={kernelName:Mp,backendName:"cpu",kernelFunc:pL};function vL(e,t,n,r,a){if("linear"===n)return eL({inputs:{x:t},backend:e});if("relu"===n)return lL({inputs:{x:t},backend:e});if("elu"===n)return JD({inputs:{x:t},backend:e});if("relu6"===n)return cL({inputs:{x:t},backend:e});if("prelu"===n)return oL({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return nL({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return pL({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function gL(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var yL={kernelName:Nh,backendName:"cpu",kernelFunc:gL};function bL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n)return gL({inputs:{real:bL(e,t,"float32"),imag:bL(e,t,"float32")},backend:e});var r=Gd(Sd(t),n);return e.makeTensorInfo(t,n,r)}function xL(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var wL={kernelName:up,backendName:"cpu",kernelFunc:xL};function kL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return eL({inputs:{x:a},backend:n});var o=bL(n,a.shape,a.dtype),s=kL({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),l=gL({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}if("complex64"===a.dtype){var u=xL({inputs:{input:a},backend:n}),c=kL({inputs:{x:u},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(u),c}if(!Dd(a.dtype,i)){var d=eL({inputs:{x:a},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:i}}if("int32"===i){var h=n.data.get(a.dataId).values,f=Int32Array.from(h);return n.makeTensorInfo(a.shape,"int32",f)}if("bool"===i){var p=n.data.get(a.dataId).values,m=Om([0],a.dtype),v=aL((function(e,t){return e!==t?1:0}))(a.shape,[],p,m,"bool"),g=(0,U.Z)(v,2),y=g[0],b=g[1];return n.makeTensorInfo(b,"bool",y)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}var SL={kernelName:Mh,backendName:"cpu",kernelFunc:kL};function TL(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,l=i;qD([o,s],e);var u=l.data.get(o.dataId).values,c=l.data.get(s.dataId).values,d="string"===o.dtype?JT(u):u,h="string"===o.dtype?JT(c):c,f=r||o.dtype,p=t(o.shape,s.shape,d,h,f),m=(0,U.Z)(p,2),v=m[0],g=m[1];return l.makeTensorInfo(g,f,v)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,l=i;if("complex64"===o.dtype||"complex64"===s.dtype){var u=kL({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,h=c.complexTensorInfos.imag,f=l.data.get(d.dataId).values,p=l.data.get(h.dataId).values,m=kL({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(m.dataId),g=v.complexTensorInfos.real,y=v.complexTensorInfos.imag,b=l.data.get(g.dataId).values,x=l.data.get(y.dataId).values,w=n(o.shape,s.shape,f,p,b,x),k=(0,U.Z)(w,3),S=k[0],T=k[1],E=k[2],C=l.makeTensorInfo(E,"float32",S),_=l.makeTensorInfo(E,"float32",T),M=gL({inputs:{real:C,imag:_},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(C),l.disposeIntermediateTensorInfo(_),M}var A=l.data.get(o.dataId).values,I=l.data.get(s.dataId).values,N=r||o.dtype,R=t(o.shape,s.shape,A,I,N),O=(0,U.Z)(R,2),D=O[0],L=O[1];return l.makeTensorInfo(L,N,D)}}function EL(e){return function(t,n,r,a,i,o){var s=cy(t,n),l=Sd(s),u=s.length,c=Wd(s),d=Rd("float32",l),h=Rd("float32",l),f=ly(t,s),p=ly(n,s),m=NT(r,a),v=NT(i,o),g=t.length,y=Wd(t),b=n.length,x=Wd(n);if(f.length+p.length===0)for(var w=0;w<d.length;w++){var k=w%m.length,S=w%v.length,T=e(m[2*k],m[2*k+1],v[2*S],v[2*S+1]);d[w]=T.real,h[w]=T.imag}else for(var E=function(){var t=Kd(C,u,c),n=t.slice(-g);f.forEach((function(e){return n[e]=0}));var r=Yd(n,g,y),a=t.slice(-b);p.forEach((function(e){return a[e]=0}));var i=Yd(a,b,x),o=e(m[2*r],m[2*r+1],v[2*i],v[2*i+1]);d[C]=o.real,h[C]=o.imag},C=0;C<d.length;C++)E();return[d,h,s]}}var CL=aL((function(e,t){return e+t})),_L=EL((function(e,t,n,r){return{real:e+n,imag:t+r}})),ML=TL(uh,CL,_L),AL={kernelName:uh,backendName:"cpu",kernelFunc:ML};function IL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=Sd(a.shape),s=Ad(i,o),l=Sd(s);bd(o===l,(function(){return"The new shape (".concat(s,") has ").concat(l," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var u=n.data.get(a.dataId);if(null!=u.complexTensorInfos){var c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var NL={kernelName:hp,backendName:"cpu",kernelFunc:IL};function RL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;qD([a,i],"matMul");var l=a.shape.length,u=i.shape.length,c=o?a.shape[l-2]:a.shape[l-1],d=s?i.shape[u-1]:i.shape[u-2],h=o?a.shape[l-1]:a.shape[l-2],f=s?i.shape[u-2]:i.shape[u-1],p=a.shape.slice(0,-2),m=i.shape.slice(0,-2),v=Sd(p),g=Sd(m),y=cy(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,f]);bd(c===d,(function(){return"Error in matMul: inner shapes (".concat(c,") and (")+"".concat(d,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")}));for(var b=s?[g,f,d]:[g,d,f],x=IL({inputs:{x:a},backend:n,attrs:{shape:o?[v,c,h]:[v,h,c]}}),w=IL({inputs:{x:i},backend:n,attrs:{shape:b}}),k=o?x.shape[1]:x.shape[2],S=o?x.shape[2]:x.shape[1],T=s?w.shape[1]:w.shape[2],E=Math.max(v,g),C=n.data.get(x.dataId).values,_=n.data.get(w.dataId).values,M=Wd(x.shape),A=Wd(w.shape),I=o?[M[0],1,M[1]]:[M[0],M[1],1],N=(0,U.Z)(I,3),R=N[0],O=N[1],D=N[2],L=s?[1,A[1],A[0]]:[A[1],1,A[0]],P=(0,U.Z)(L,3),F=P[0],j=P[1],z=P[2],B=S*T,W=Fg([E,S,T],x.dtype),V=W.values,Z=n.blockSize,H=0;H<E;H++)for(var G=0;G<S;G+=Z)for(var q=0;q<T;q+=Z)for(var X=0;X<k;X+=Z)for(var Y=Math.min(G+Z,S),K=Math.min(q+Z,T),$=Math.min(X+Z,k),J=G;J<Y;J++)for(var Q=q;Q<K;Q++){for(var ee=0,te=X;te<$;te++){var ne=Math.min(H,v-1)*R,re=Math.min(H,g-1)*z;ee+=C[ne+J*O+te*D]*_[te*F+Q*j+re]}V[H*B+(J*T+Q)]+=ee}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(y,W.dtype,W.values)}var OL={kernelName:Th,backendName:"cpu",kernelFunc:RL};var DL={kernelName:om,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,l=a.b,u=a.bias,c=a.preluActivationWeights,d=o.transposeA,h=o.transposeB,f=o.activation,p=o.leakyreluAlpha,m=[];t=RL({inputs:{a:s,b:l},attrs:{transposeA:d,transposeB:h},backend:i}),u&&(n=ML({inputs:{a:t,b:u},backend:i}),m.push(t),t=n),f&&(r=vL(i,t,f,c,p),m.push(t),t=r);for(var v=0,g=m;v<g.length;v++){var y=g[v];i.disposeIntermediateTensorInfo(y)}return t}};function LL(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var PL={kernelName:oh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;qD(t,"abs");var r=new Float32Array(Sd(t.shape));return r=LL(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},FL=KD(sh,(function(e){return Math.acos(e)})),jL={kernelName:sh,backendName:"cpu",kernelFunc:FL},zL=KD(lh,(function(e){return Math.acosh(e)})),BL={kernelName:lh,backendName:"cpu",kernelFunc:zL};var UL={kernelName:ch,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;qD(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=Fg(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var l=a[s],u=0;u<o.length;u++)o[u]+=l[u];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function WL(e,t,n,r,a){for(var i=t.length,o=Sd(t),s=Wd(t),l=Wd(a),u=Rd(n,Sd(a)),c=0;c<o;++c){for(var d=Kd(c,i,s),h=new Array(d.length),f=0;f<h.length;f++)h[f]=d[r[f]];u[Yd(h,i,l)]=e[c]}return u}function VL(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;qD(a,"transpose");for(var o=a.shape.length,s=new Array(o),l=0;l<s.length;l++)s[l]=a.shape[i[l]];var u=WL(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(u,s,a.dtype),shape:s,dtype:a.dtype}}var ZL={kernelName:Jp,backendName:"cpu",kernelFunc:VL};var HL={kernelName:dh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;qD(a,"all");var s=Id(i,a.shape),l=s,u=Px(l,a.shape.length),c=a;null!=u&&(c=VL({inputs:{x:a},backend:n,attrs:{perm:u}}),l=jx(l.length,a.shape.length)),Lx("all",l,c.shape.length);for(var d=Ox(c.shape,l),h=(0,U.Z)(d,2),f=h[0],p=Sd(h[1]),m=Gd(Sd(f),c.dtype),v=n.data.get(c.dataId).values,g=0;g<m.length;++g){for(var y=g*p,b=v[y],x=0;x<p;++x){var w=v[y+x];b=b&&w}m[g]=b}null!=u&&n.disposeIntermediateTensorInfo(c);var k=n.makeTensorInfo(f,c.dtype,m);if(o){var S=IL({inputs:{x:k},backend:n,attrs:{shape:Dx(f,s)}});return n.disposeIntermediateTensorInfo(k),S}return k}};var GL={kernelName:hh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;qD(a,"any");var s=Id(i,a.shape),l=s,u=Px(l,a.shape.length),c=a;null!=u&&(c=VL({inputs:{x:a},backend:n,attrs:{perm:u}}),l=jx(l.length,a.shape.length)),Lx("any",l,c.shape.length);for(var d=Ox(c.shape,l),h=(0,U.Z)(d,2),f=h[0],p=Sd(h[1]),m=Gd(Sd(f),c.dtype),v=n.data.get(c.dataId).values,g=0;g<m.length;++g){for(var y=g*p,b=v[y],x=0;x<p;++x){var w=v[y+x];b=b||w}m[g]=b}null!=u&&n.disposeIntermediateTensorInfo(c);var k=n.makeTensorInfo(f,c.dtype,m);if(o){var S=IL({inputs:{x:k},backend:n,attrs:{shape:Dx(f,s)}});return n.disposeIntermediateTensorInfo(k),S}return k}};var qL={kernelName:fh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;qD(a,"argMax");var o=Id(i,a.shape),s=Px(o,a.shape.length),l=a,u=[];null!=s&&(l=VL({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=jx(o.length,l.shape.length)),Lx("argMax",o=[o[0]],l.shape.length);for(var c=Ox(l.shape,o),d=(0,U.Z)(c,2),h=d[0],f=d[1],p=Gd(Sd(h),"int32"),m=Sd(f),v=n.data.get(l.dataId).values,g=0;g<p.length;++g){for(var y=g*m,b=v[y],x=0,w=0;w<m;++w){var k=v[y+w];k>b&&(b=k,x=w)}p[g]=x}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(h,"int32",p)}};var XL={kernelName:ph,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;qD(a,"argMin");var o=Id(i,a.shape),s=Px(o,a.shape.length),l=a,u=[];null!=s&&(l=VL({inputs:{x:a},backend:n,attrs:{perm:s}}),u.push(l),o=jx(o.length,l.shape.length)),Lx("argMin",o=[o[0]],l.shape.length);for(var c=Ox(l.shape,o),d=(0,U.Z)(c,2),h=d[0],f=d[1],p=Gd(Sd(h),"int32"),m=Sd(f),v=n.data.get(l.dataId).values,g=0;g<p.length;++g){for(var y=g*m,b=v[y],x=0,w=0;w<m;++w){var k=v[y+w];k<b&&(b=k,x=w)}p[g]=x}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(h,"int32",p)}},YL=KD(mh,(function(e){return Math.asin(e)})),KL={kernelName:mh,backendName:"cpu",kernelFunc:YL},$L=KD(vh,(function(e){return Math.asinh(e)})),JL={kernelName:vh,backendName:"cpu",kernelFunc:$L},QL=KD(gh,(function(e){return Math.atan(e)})),eP={kernelName:gh,backendName:"cpu",kernelFunc:QL},tP=aL((function(e,t){return Math.atan2(e,t)})),nP=TL(bh,tP),rP={kernelName:bh,backendName:"cpu",kernelFunc:nP},aP=KD(yh,(function(e){return Math.atanh(e)})),iP={kernelName:yh,backendName:"cpu",kernelFunc:aP};function oP(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,l=a.dilationHeight,u=a.dilationWidth,c=a.effectiveFilterHeight,d=a.effectiveFilterWidth,h=a.padInfo.top,f=a.padInfo.left,p="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Fg(a.outShape,n),v=m.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var w=x*g,k=x*r[0],S=0;S<a.inChannels;++S)for(var T=0;T<a.outHeight;++T)for(var E=T*o-h,C=Math.max(0,E),_=Math.min(a.inHeight,c+E),M=w+T*y,A=0;A<a.outWidth;++A){for(var I=A*s-f,N=Math.max(0,I),R=Math.min(a.inWidth,d+I),O=p,D=0,L=0,P=C;P<_;P+=l){for(var F=k+P*r[1],j=N;j<R;j+=u){var z=e[F+j*r[2]+S];"max"===i&&z>O?O=z:"avg"===i&&(D+=z,L++)}if(isNaN(O))break}v[M+A*b+S]="avg"===i?D/L:O}return m}function sP(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Fg(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=r.padInfo.top,p=r.padInfo.left,m=Fg(t,n,e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var b=y*s-f,x=b;x<0;)x+=u;for(var w=Math.min(r.inHeight,d+b),k=0;k<r.outWidth;++k){for(var S=k*l-p,T=S;T<0;)T+=c;for(var E=Math.min(r.inWidth,h+S),C=Number.NEGATIVE_INFINITY,_=-1,M=x;M<w;M+=u)for(var A=M-b,I=T;I<E;I+=c){var N=I-S,R=m.get(v,M,I,g);R>C&&(C=R,_=a?i?((v*r.inHeight+M)*r.inWidth+I)*r.inChannels+g:(M*r.inWidth+I)*r.inChannels+g:A*h+N)}o.set(_,v,y,k,g)}}return o}function lP(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,l=a.strideWidth,u=a.dilationDepth,c=a.dilationHeight,d=a.dilationWidth,h=a.effectiveFilterDepth,f=a.effectiveFilterHeight,p=a.effectiveFilterWidth,m=a.padInfo.front,v=a.padInfo.top,g=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Fg(a.outShape,n),x=b.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],S=a.outShape[3]*a.outShape[4],T=a.outShape[4],E=0;E<a.batchSize;++E)for(var C=E*w,_=E*r[0],M=0;M<a.inChannels;++M)for(var A=0;A<a.outDepth;++A){for(var I=A*o-m,N=I;N<0;)N+=u;for(var R=Math.min(a.inDepth,h+I),O=C+A*k,D=0;D<a.outHeight;++D){for(var L=D*s-v,P=L;P<0;)P+=c;for(var F=Math.min(a.inHeight,f+L),j=O+D*S,z=0;z<a.outWidth;++z){for(var B=z*l-g,U=B;U<0;)U+=d;for(var W=Math.min(a.inWidth,p+B),V=j+z*T,Z=y,H=0,G=0,q=N;q<R;q+=u){for(var X=_+q*r[1],Y=P;Y<F;Y+=c){for(var K=X+Y*r[2],$=U;$<W;$+=d){var J=e[K+$*r[3]+M];if("max"===i&&J>Z?Z=J:"avg"===i&&(H+=J,G++),isNaN(Z))break}if(isNaN(Z))break}if(isNaN(Z))break}x[V+M]="avg"===i?H/G:Z}}}return b}var uP={kernelName:xh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;qD(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,l=r.dimRoundingMode;bd(ob(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var u,c=Ky(a.shape,i,o,1,s,l);if(1===c.filterWidth&&1===c.filterHeight&&Td(c.inShape,c.outShape))u=eL({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,h=Wd(a.shape),f=oP(d,a.shape,a.dtype,h,c,"avg");u=n.makeTensorInfo(c.outShape,a.dtype,f.values)}return u}};var cP={kernelName:kh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,l=r.dimRoundingMode,u=r.dataFormat;qD(a,"avgPool3d");var c=$y(a.shape,i,o,1,s,l,u),d=lP(n.data.get(a.dataId).values,a.shape,a.dtype,Wd(a.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};var dP={kernelName:Sh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,l=r.pad,u=r.dimRoundingMode;qD([a,i],"avgPool3DGrad");for(var c=$y(i.shape,o,s,1,l,u),d=c.strideDepth,h=c.strideHeight,f=c.strideWidth,p=c.filterDepth,m=c.filterHeight,v=c.filterWidth,g=c.dilationDepth,y=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,k=c.effectiveFilterWidth,S=x-1-c.padInfo.front,T=k-1-c.padInfo.left,E=w-1-c.padInfo.top,C=Fg(i.shape,"float32"),_=1/(p*m*v),M=n.bufferSync(a),A=0;A<c.batchSize;++A)for(var I=0;I<c.inChannels;++I)for(var N=0;N<c.inDepth;++N)for(var R=0;R<c.inHeight;++R)for(var O=0;O<c.inWidth;++O){for(var D=N-S,L=R-E,P=O-T,F=0,j=0;j<x;j+=g){var z=(D+j)/d;if(!(z<0||z>=c.outDepth||Math.floor(z)!==z))for(var B=0;B<w;B+=y){var U=(L+B)/h;if(!(U<0||U>=c.outHeight||Math.floor(U)!==U))for(var W=0;W<k;W+=b){var V=(P+W)/f;if(!(V<0||V>=c.outWidth||Math.floor(V)!==V))F+=M.get(A,z,U,V,I)}}}C.set(F*_,A,N,R,O,I)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};var hP={kernelName:wh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;qD([a,i],"avgPoolGrad");for(var s=r.filterSize,l=r.strides,u=r.pad,c=Ky(o.shape,s,l,1,u),d=c.strideHeight,h=c.strideWidth,f=c.filterHeight,p=c.filterWidth,m=c.dilationHeight,v=c.dilationWidth,g=c.effectiveFilterHeight,y=c.effectiveFilterWidth,b=y-1-c.padInfo.left,x=g-1-c.padInfo.top,w=Fg(o.shape,"float32"),k=1/(f*p),S=n.data.get(a.dataId).values,T=Fg(a.shape,"float32",S),E=0;E<c.batchSize;++E)for(var C=0;C<c.inChannels;++C)for(var _=0;_<c.inHeight;++_)for(var M=0;M<c.inWidth;++M){for(var A=_-x,I=M-b,N=0,R=0;R<g;R+=m){var O=(A+R)/d;if(!(O<0||O>=c.outHeight||Math.floor(O)!==O))for(var D=0;D<y;D+=v){var L=(I+D)/h;if(!(L<0||L>=c.outWidth||Math.floor(L)!==L))N+=T.get(E,O,L,C)}}w.set(N*k,E,_,M,C)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var fP={kernelName:pf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,l=t.variance;bd(s.shape.length===l.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),bd(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),bd(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),qD([a,s,l,i,o],"batchNorm");var u=r.varianceEpsilon;null==u&&(u=.001);for(var c=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,h=n.data.get(l.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),v=p.length,g=f.length,y=h.length,b=d.length,x=0,w=0,k=0,S=0,T=0;T<c.length;++T)m[T]=p[x++]+(c[T]-d[w++])*f[k++]/Math.sqrt(h[S++]+u),x>=v&&(x=0),w>=b&&(w=0),k>=g&&(k=0),S>=y&&(S=0);return n.makeTensorInfo(a.shape,a.dtype,m)}};function pP(e,t,n,r,a){var i=yy(r,t,n),o=Sd(n),s=Wd(r);if(i){var l=by(t,s);return"string"===a?e.slice(l,l+o):e.subarray(l,l+o)}for(var u=Fg(r,a,"string"===a?JT(e):e),c=Fg(n,a),d=0;d<c.size;++d){var h=c.indexToLoc(d),f=h.map((function(e,n){return e+t[n]}));c.set.apply(c,[u.get.apply(u,(0,_.Z)(f))].concat((0,_.Z)(h)))}return"string"===a?c.values.map((function(e){return Lm(e)})):c.values}function mP(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;qD(a,"slice");var s=xy(a,i,o),l=(0,U.Z)(s,2),u=l[0],c=l[1];vy(a,u,c);var d=pP(n.data.get(a.dataId).values,u,c,a.shape,a.dtype);return n.makeTensorInfo(c,a.dtype,d)}var vP={kernelName:Tp,backendName:"cpu",kernelFunc:mP};var gP={kernelName:Eh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;qD([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),l=gT(a.shape,i,s),u=yT(l.length,i.length),c=bT(a.shape,i,s),d=xT(o,i.length),h=wT(c,o,i.length),f=IL({inputs:{x:a},backend:n,attrs:{shape:l}}),p=VL({inputs:{x:f},backend:n,attrs:{perm:u}}),m=IL({inputs:{x:p},backend:n,attrs:{shape:c}}),v=mP({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),v}};function yP(e,t,n,r,a){for(var i=Sd(r),o=Gd(a,n),s=0;s<e.length;s++){var l=e[s];if(l<0)throw new Error("Input x must be non-negative!");l>=a||(o[l]+=i>0?t[s]:1)}return o}function bP(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=Fg([a,n],t.dtype),s=0;s<a;s++)for(var l=0;l<i;l++){var u=e.get(s,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,s,u):t.size>0?o.set(o.get(s,u)+t.get(s,l),s,u):o.set(o.get(s,u)+1,s,u))}return o}var xP={kernelName:Ch,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=yP(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};var wP={kernelName:_h,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=cy(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},kP=hL((function(e){return Math.ceil(e)})),SP=$D(Ah,kP),TP={kernelName:Ah,backendName:"cpu",kernelFunc:SP},EP=KD(Ih,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),CP={kernelName:Ih,backendName:"cpu",kernelFunc:EP},_P={kernelName:Rh,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(Sd(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,u=0;u<s.length;u++){var c=s[u],d=l[u];r[u]=Math.hypot(c,d)}return n.makeOutput(r,t.shape,"float32")}};function MP(e,t,n,r){var a=Od(n,Sd(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=Sd(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?JT(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var l=s*t[1]+o,u=0;u<e.shape[1];++u)a[l+u]=r[i++];o+=e.shape[1]}))}return a}function AP(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var IP={kernelName:wf,backendName:"cpu",kernelFunc:AP};function NP(e){var t=e.inputs,n=e.backend,r=Id(e.attrs.axis,t[0].shape)[0],a=fT(t.map((function(e){return e.shape})),r);if(0===Sd(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return Sd(e.shape)>0}));if(1===i.length)return eL({inputs:{x:i[0]},backend:n});var o=i.map((function(e){return e.shape}));if(hT(o,r),"complex64"===i[0].dtype){var s=i.map((function(e){return xL({inputs:{input:e},backend:n})})),l=i.map((function(e){return AP({inputs:{input:e},backend:n})})),u=NP({inputs:s,backend:n,attrs:{axis:r}}),c=NP({inputs:l,backend:n,attrs:{axis:r}}),d=gL({inputs:{real:u,imag:c},backend:n});return s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),d}var h=i.map((function(e){var t=Sd(e.shape.slice(r));return IL({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),f=h.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=fT(h.map((function(e){return e.shape})),1);var p=1===h[0].shape[0],m=MP(f,a,t[0].dtype,p),v=fT(i.map((function(e){return e.shape})),r),g=n.makeTensorInfo(v,t[0].dtype,m);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}var RP={kernelName:Oh,backendName:"cpu",kernelFunc:NP};function OP(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,l=r.dataFormat,u=r.dilations,c=r.dimRoundingMode;qD([a,i],"conv2d");for(var d=sb(l),h=Jy(a.shape,i.shape,o,u,s,c,!1,d),f=h.filterHeight,p=h.filterWidth,m=h.dilationHeight,v=h.dilationWidth,g=h.padInfo.left,y=h.padInfo.top,b="channelsLast"===h.dataFormat,x=new qm(h.outShape,a.dtype),w=Wd(a.shape),k=Wd(i.shape),S=w[0],T=b?w[1]:w[2],E=b?w[2]:1,C=b?1:w[1],_=x.strides[0],M=b?x.strides[1]:x.strides[2],A=b?x.strides[2]:1,I=b?1:x.strides[1],N=n.data.get(a.dataId).values,R=n.data.get(i.dataId).values,O=x.values,D=0;D<h.batchSize;++D)for(var L=D*S,P=D*_,F=0;F<h.outHeight;++F)for(var j=P+F*M,z=F*h.strideHeight-y,B=0;B<f;++B){var U=z+B*m;if(!(U<0||U>=h.inHeight))for(var W=B*k[0],V=L+U*T,Z=0;Z<h.outWidth;++Z)for(var H=j+Z*A,G=Z*h.strideWidth-g,q=0;q<p;++q){var X=G+q*v;if(!(X<0||X>=h.inWidth))for(var Y=V+X*E,K=W+q*k[1],$=0;$<h.inChannels;++$){for(var J=N[Y+$*C],Q=0;Q<h.outChannels;++Q)O[H+Q*I]+=J*R[K+Q];K+=h.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,O)}var DP={kernelName:Dh,backendName:"cpu",kernelFunc:OP};var LP={kernelName:Lh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,l=r.dataFormat,u=r.dimRoundingMode,c=r.filterShape;qD([a,i],"conv2dBackpropFilter");for(var d=sb(l),h=Jy(a.shape,c,o,1,s,u,!1,d),f=h.strideHeight,p=h.strideWidth,m=h.filterHeight,v=h.filterWidth,g="channelsLast"===h.dataFormat,y=new qm(h.filterShape,"float32"),b=h.padInfo.left,x=h.padInfo.top,w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,S=new qm(a.shape,a.dtype,w),T=new qm(i.shape,i.dtype,k),E=0;E<m;++E)for(var C=Math.max(0,Math.ceil((x-E)/f)),_=Math.min(h.outHeight,(h.inHeight+x-E)/f),M=0;M<v;++M)for(var A=Math.max(0,Math.ceil((b-M)/p)),I=Math.min(h.outWidth,(h.inWidth+b-M)/p),N=0;N<h.inChannels;++N)for(var R=0;R<h.outChannels;++R){for(var O=0,D=0;D<h.batchSize;++D)for(var L=C;L<_;++L)for(var P=E+L*f-x,F=A;F<I;++F){var j=M+F*p-b;O+=g?S.get(D,P,j,N)*T.get(D,L,F,R):S.get(D,N,P,j)*T.get(D,R,L,F)}y.set(O,E,M,N,R)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var PP={kernelName:Ph,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,l=r.pad,u=r.dataFormat,c=r.dimRoundingMode;qD([a,i],"conv2dBackpropInput");var d=Wd(i.shape),h=Wd(a.shape),f=sb(u),p=Jy(o,i.shape,s,1,l,c,!1,f),m=new qm(p.inShape,"float32"),v=m.values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,b=(0,U.Z)(d,3),x=b[0],w=b[1],k=b[2],S=p.batchSize,T=p.filterHeight,E=p.filterWidth,C=p.inChannels,_=p.inHeight,M=p.inWidth,A=p.outChannels,I=p.outHeight,N=p.outWidth,R=p.strideHeight,O=p.strideWidth;f=p.dataFormat;for(var D=T-1-p.padInfo.top,L=E-1-p.padInfo.left,P="channelsLast"===f,F=m.strides[0],j=P?m.strides[1]:m.strides[2],z=P?m.strides[2]:1,B=P?1:m.strides[1],W=h[0],V=P?h[1]:h[2],Z=P?h[2]:1,H=P?1:h[1],G=0;G<S;++G)for(var q=0;q<C;++q)for(var X=0;X<_;++X)for(var Y=X-D,K=Math.max(0,Math.ceil(Y/R)),$=Math.min(I,(T+Y)/R),J=0;J<M;++J){for(var Q=J-L,ee=Math.max(0,Math.ceil(Q/O)),te=Math.min(N,(E+Q)/O),ne=0,re=K;re<$;++re)for(var ae=re*R-Y,ie=ee;ie<te;++ie)for(var oe=W*G+V*re+Z*ie,se=x*(T-1-ae)+w*(E-1-(ie*O-Q))+k*q,le=0;le<A;++le){ne+=g[oe+H*le]*y[se+le]}v[F*G+j*X+z*J+B*q]=ne}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var FP={kernelName:Fh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,l=r.dilations;qD([a,i],"conv3d");for(var u=Qy(a.shape,i.shape,o,l,s),c=u.filterDepth,d=u.filterHeight,h=u.filterWidth,f=u.dilationDepth,p=u.dilationHeight,m=u.dilationWidth,v=u.padInfo,g=v.front,y=v.left,b=v.top,x=new qm(u.outShape,a.dtype),w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,S=x.values,T=Wd(a.shape),E=Wd(i.shape),C=0;C<u.batchSize;++C)for(var _=C*T[0],M=C*x.strides[0],A=0;A<u.outDepth;++A)for(var I=M+A*x.strides[1],N=A*u.strideDepth-g,R=0;R<c;++R){var O=N+R*f;if(!(O<0||O>=u.inDepth))for(var D=R*E[0],L=_+O*T[1],P=0;P<u.outHeight;++P)for(var F=I+P*x.strides[2],j=P*u.strideHeight-b,z=0;z<d;++z){var B=j+z*p;if(!(B<0||B>=u.inHeight))for(var U=D+z*E[1],W=L+B*T[2],V=0;V<u.outWidth;++V)for(var Z=F+V*u.outChannels,H=V*u.strideWidth-y,G=0;G<h;++G){var q=H+G*m;if(!(q<0||q>=u.inWidth))for(var X=U+G*E[2],Y=W+q*u.inChannels,K=X,$=0;$<u.inChannels;++$){for(var J=w[Y+$],Q=0;Q<u.outChannels;++Q)S[Z+Q]+=J*k[K+Q];K+=u.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var jP={kernelName:jh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,l=r.filterShape;qD([a,i],"conv3dBackpropFilterV2");for(var u=Wd(a.shape),c=Wd(i.shape),d=Qy(a.shape,l,o,1,s),h=d.strideDepth,f=d.strideHeight,p=d.strideWidth,m=d.filterDepth,v=d.filterHeight,g=d.filterWidth,y=new qm(d.filterShape,"float32"),b=y.values,x=(0,U.Z)(y.strides,4),w=x[0],k=x[1],S=x[2],T=x[3],E=n.data.get(i.dataId).values,C=(0,U.Z)(c,4),_=C[0],M=C[1],A=C[2],I=C[3],N=n.data.get(a.dataId).values,R=(0,U.Z)(u,4),O=R[0],D=R[1],L=R[2],P=R[3],F=d.padInfo.front,j=d.padInfo.left,z=d.padInfo.top,B=0;B<m;++B)for(var W=Math.max(0,Math.ceil((F-B)/h)),V=Math.min(d.outDepth,(d.inDepth+F-B)/h),Z=B*w,H=0;H<v;++H)for(var G=Math.max(0,Math.ceil((z-H)/f)),q=Math.min(d.outHeight,(d.inHeight+z-H)/f),X=H*k+Z,Y=0;Y<g;++Y)for(var K=Math.max(0,Math.ceil((j-Y)/p)),$=Math.min(d.outWidth,(d.inWidth+j-Y)/p),J=Y*S+X,Q=0;Q<d.inChannels;++Q)for(var ee=Q*T+J,te=0;te<d.outChannels;++te){for(var ne=0,re=0;re<d.batchSize;++re)for(var ae=re*O,ie=re*_,oe=W;oe<V;++oe)for(var se=(B+oe*h-F)*D+ae,le=oe*M+ie,ue=G;ue<q;++ue)for(var ce=(H+ue*f-z)*L+se,de=ue*A+le,he=K;he<$;++he){var fe=he*I+de;ne+=N[(Y+he*p-j)*P+ce+Q]*E[fe+te]}b[ee+te]=ne}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var zP={kernelName:zh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,l=r.inputShape;qD([a],"conv3dBackpropInputV2");for(var u=Wd(a.shape),c=Wd(i.shape),d=Qy(l,i.shape,s,1,o),h=new qm(d.inShape,"float32"),f=h.values,p=(0,U.Z)(h.strides,4),m=p[0],v=p[1],g=p[2],y=p[3],b=n.data.get(a.dataId).values,x=(0,U.Z)(u,4),w=x[0],k=x[1],S=x[2],T=x[3],E=n.data.get(i.dataId).values,C=(0,U.Z)(c,4),_=C[0],M=C[1],A=C[2],I=C[3],N=d.batchSize,R=d.filterDepth,O=d.filterHeight,D=d.filterWidth,L=d.inChannels,P=d.inDepth,F=d.inHeight,j=d.inWidth,z=d.outChannels,B=d.outDepth,W=d.outHeight,V=d.outWidth,Z=d.strideDepth,H=d.strideHeight,G=d.strideWidth,q=R-1-d.padInfo.front,X=O-1-d.padInfo.top,Y=D-1-d.padInfo.left,K=0;K<N;++K)for(var $=0;$<L;++$)for(var J=0;J<P;++J)for(var Q=J-q,ee=Math.max(0,Math.ceil(Q/Z)),te=Math.min(B,(R+Q)/Z),ne=0;ne<F;++ne)for(var re=ne-X,ae=Math.max(0,Math.ceil(re/H)),ie=Math.min(W,(O+re)/H),oe=0;oe<j;++oe){for(var se=oe-Y,le=Math.max(0,Math.ceil(se/G)),ue=Math.min(V,(D+se)/G),ce=0,de=ee;de<te;++de)for(var he=de*Z-Q,fe=ae;fe<ie;++fe)for(var pe=fe*H-re,me=le;me<ue;++me)for(var ve=w*K+k*de+S*fe+T*me,ge=_*(R-1-he)+M*(O-1-pe)+A*(D-1-(me*G-se))+I*$,ye=0;ye<z;++ye){ce+=b[ve+ye]*E[ge+ye]}f[m*K+v*J+g*ne+y*oe+$]=ce}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},BP=KD(Bh,(function(e){return Math.cos(e)})),UP={kernelName:Bh,backendName:"cpu",kernelFunc:BP},WP=KD(Uh,(function(e){return Math.cosh(e)})),VP={kernelName:Uh,backendName:"cpu",kernelFunc:WP};var ZP={kernelName:Vh,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,l=r.method,u=r.extrapolationValue,c=(0,U.Z)(a.shape,4),d=c[0],h=c[1],f=c[2],p=c[3],m=i.shape[0],v=(0,U.Z)(s,2),g=v[0],y=v[1],b=Fg([m,g,y,p],"float32"),x=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,k=n.data.get(a.dataId).values,S=Wd(a.shape),T=Wd(b.shape),E=0;E<m;E++){var C=4*E,_=x[C],M=x[C+1],A=x[C+2],I=x[C+3],N=w[E];if(!(N>=d))for(var R=g>1?(A-_)*(h-1)/(g-1):0,O=y>1?(I-M)*(f-1)/(y-1):0,D=0;D<g;D++){var L=g>1?_*(h-1)+D*R:.5*(_+A)*(h-1);if(L<0||L>h-1)for(var P=0;P<y;P++)for(var F=0;F<p;F++){var j=F+P*T[2]+D*T[1]+E*T[0];b.values[j]=u}else if("bilinear"===l)for(var z=Math.floor(L),B=Math.ceil(L),W=L-z,V=0;V<y;V++){var Z=y>1?M*(f-1)+V*O:.5*(M+I)*(f-1);if(Z<0||Z>f-1)for(var H=0;H<p;H++){var G=H+V*T[2]+D*T[1]+E*T[0];b.values[G]=u}else for(var q=Math.floor(Z),X=Math.ceil(Z),Y=Z-q,K=0;K<p;K++){var $=K+q*S[2]+z*S[1]+N*S[0],J=k[$],Q=k[$=K+X*S[2]+z*S[1]+N*S[0]],ee=k[$=K+q*S[2]+B*S[1]+N*S[0]],te=J+(Q-J)*Y,ne=ee+(k[$=K+X*S[2]+B*S[1]+N*S[0]]-ee)*Y;$=K+V*T[2]+D*T[1]+E*T[0],b.values[$]=te+(ne-te)*W}}else for(var re=0;re<y;++re){var ae=y>1?M*(f-1)+re*O:.5*(M+I)*(f-1);if(ae<0||ae>f-1)for(var ie=0;ie<p;ie++){var oe=ie+re*T[2]+D*T[1]+E*T[0];b.values[oe]=u}else for(var se=Math.round(ae),le=Math.round(L),ue=0;ue<p;ue++){var ce=ue+se*S[2]+le*S[1]+N*S[0],de=ue+re*T[2]+D*T[1]+E*T[0];b.values[de]=k[ce]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var HP={kernelName:Wh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;qD(a,"cumsum");var l=Px([i],a.shape.length),u=a;null!=l&&(u=VL({inputs:{x:a},backend:n,attrs:{perm:l}}));var c=jx(1,a.shape.length)[0];if(c!==u.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(u.shape.length-1," but got axis=").concat(c));for(var d=iv(u.dtype,"int32"),h=Gd(Sd(u.shape),d),f=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},v=0;v<f.length;v+=p)for(var g=0;g<p;g++){var y=m(v,g);if(0===g)h[y]=o?0:f[y];else{var b=m(v,g-1);h[y]=o?f[b]+h[b]:f[y]+h[b]}}var x=n.makeTensorInfo(u.shape,d,h);if(null!=l){var w=VL({inputs:{x:x},backend:n,attrs:{perm:Fx(l)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(u),w}return x}};var GP={kernelName:Zh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var l=yP(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var u=bP(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var qP={kernelName:Hh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;bd("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)}));for(var s=a.shape[0],l=a.shape[1],u=a.shape[2],c=a.shape[3],d=l*i,h=u*i,f=c/(i*i),p=n.data.get(a.dataId).values,m=new Float32Array(s*d*h*f),v=0,g=0;g<s;++g)for(var y=0;y<d;++y)for(var b=Math.floor(y/i),x=y%i,w=0;w<h;++w)for(var k=Math.floor(w/i),S=(x*i+w%i)*f,T=0;T<f;++T){var E=T+S+c*(k+u*(b+l*g));m[v++]=p[E]}return n.makeTensorInfo([s,d,h,f],a.dtype,m)}};function XP(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,l=r.dilations,u=r.dimRoundingMode;qD([a,i],"depthwiseConv2DNative");var c=Wd(a.shape),d=Wd(i.shape),h=l;null==h&&(h=[1,1]),bd(ob(o,h),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(h,"'")}));for(var f=Jy(a.shape,i.shape,o,h,s,u,!0),p=f.filterHeight,m=f.filterWidth,v=f.dilationHeight,g=f.dilationWidth,y=f.padInfo,b=y.left,x=y.top,w=f.outChannels/f.inChannels,k=new qm(f.outShape,a.dtype),S=n.data.get(a.dataId).values,T=n.data.get(i.dataId).values,E=k.values,C=0;C<f.batchSize;++C)for(var _=C*c[0],M=C*k.strides[0],A=0;A<f.outHeight;++A)for(var I=M+A*k.strides[1],N=A*f.strideHeight-x,R=0;R<p;++R){var O=N+R*v;if(!(O<0||O>=f.inHeight))for(var D=R*d[0],L=_+O*c[1],P=0;P<f.outWidth;++P)for(var F=I+P*k.strides[2],j=P*f.strideWidth-b,z=0;z<m;++z){var B=j+z*g;if(!(B<0||B>=f.inWidth))for(var U=D+z*d[1],W=L+B*f.inChannels,V=F,Z=U,H=0;H<f.inChannels;++H){for(var G=S[W+H],q=0;q<w;++q)E[V+q]+=G*T[Z+q];V+=w,Z+=w}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}var YP={kernelName:Gh,backendName:"cpu",kernelFunc:XP};var KP={kernelName:qh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,l=r.pad,u=r.dimRoundingMode,c=r.filterShape;qD([a,i],"depthwiseConv2dNativeBackpropFilter");for(var d=Jy(a.shape,c,o,s,l,u,!0),h=d.strideHeight,f=d.strideWidth,p=d.filterHeight,m=d.filterWidth,v=new qm(d.filterShape,"float32"),g=d.padInfo.left,y=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(a.dataId).values,w=new qm(a.shape,a.dtype,x),k=n.data.get(i.dataId).values,S=new qm(i.shape,i.dtype,k),T=0;T<p;++T)for(var E=Math.max(0,Math.ceil((y-T)/h)),C=Math.min(d.outHeight,(d.inHeight+y-T)/h),_=0;_<m;++_)for(var M=Math.max(0,Math.ceil((g-_)/f)),A=Math.min(d.outWidth,(d.inWidth+g-_)/f),I=0;I<d.outChannels;++I){for(var N=Math.trunc(I/b),R=I%b,O=0,D=0;D<d.batchSize;++D)for(var L=E;L<C;++L)for(var P=T+L*h-y,F=M;F<A;++F){var j=_+F*f-g;O+=w.get(D,P,j,N)*S.get(D,L,F,I)}v.set(O,T,_,N,R)}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var $P={kernelName:Xh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,l=r.pad,u=r.dimRoundingMode,c=r.inputShape;qD([a,i],"depthwiseConv2DNativeBackpropInput");for(var d=Wd(a.shape),h=Wd(i.shape),f=Jy(c,i.shape,o,s,l,u,!0),p=new qm(f.inShape,"float32"),m=p.values,v=(0,U.Z)(p.strides,3),g=v[0],y=v[1],b=v[2],x=n.data.get(a.dataId).values,w=(0,U.Z)(d,3),k=w[0],S=w[1],T=w[2],E=n.data.get(i.dataId).values,C=(0,U.Z)(h,3),_=C[0],M=C[1],A=C[2],I=f.batchSize,N=f.filterHeight,R=f.filterWidth,O=f.inChannels,D=f.inHeight,L=f.inWidth,P=f.outChannels,F=f.outHeight,j=f.outWidth,z=f.strideHeight,B=f.strideWidth,W=N-1-f.padInfo.top,V=R-1-f.padInfo.left,Z=P/O,H=0;H<I;++H)for(var G=0;G<O;++G)for(var q=0;q<D;++q)for(var X=q-W,Y=Math.max(0,Math.ceil(X/z)),K=Math.min(F,(N+X)/z),$=0;$<L;++$){for(var J=$-V,Q=Math.max(0,Math.ceil(J/B)),ee=Math.min(j,(R+J)/B),te=0,ne=Y;ne<K;++ne)for(var re=ne*z-X,ae=Q;ae<ee;++ae)for(var ie=k*H+S*ne+T*ae,oe=_*(N-1-re)+M*(R-1-(ae*B-J))+A*G,se=0;se<Z;++se){te+=x[ie+(G*Z+se)]*E[oe+se]}m[g*H+y*q+b*$+G]=te}return n.makeTensorInfo(p.shape,p.dtype,p.values)}};var JP={kernelName:Yh,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=Sd(r.shape),i=n.data.get(r.dataId).values,o=Fg([a,a],r.dtype),s=o.values,l=0;l<i.length;l++)s[l*a+l]=i[l];var u=[].concat((0,_.Z)(r.shape),(0,_.Z)(r.shape));return n.makeTensorInfo(u,o.dtype,o.values)}},QP={kernelName:Kh,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,l=r.dilations,u=n,c=u.data.get(a.dataId).values,d=a.shape.length,h=u.data.get(i.dataId).values,f=i.shape.length,p=Yy(a.shape,i.shape,o,s,"NHWC",l),m=p.batchSize,v=p.inHeight,g=p.inWidth,y=p.inChannels,b=p.outHeight,x=p.outWidth,w=p.padInfo,k=p.strideHeight,S=p.strideWidth,T=p.filterHeight,E=p.filterWidth,C=p.dilationHeight,_=p.dilationWidth,M=p.outShape,A=Sd(M),I=M.length,N=Od(a.dtype,A),R=0;R<m;++R)for(var O=0;O<b;++O)for(var D=O*k-w.top,L=0;L<x;++L)for(var P=L*S-w.left,F=0;F<y;++F){for(var j=Number.MIN_SAFE_INTEGER,z=0;z<T;++z){var B=D+z*C;if(B>=0&&B<v)for(var U=0;U<E;++U){var W=P+U*_;if(W>=0&&W<g){var V=Yd([R,B,W,F],d,Wd(a.shape)),Z=Yd([z,U,F],f,Wd(i.shape)),H=c[V]+h[Z];H>j&&(j=H)}}}N[Yd([R,O,L,F],I,Wd(M))]=j}return{dataId:u.write(Om(N,a.dtype),M,a.dtype),shape:M,dtype:a.dtype}}},eF={kernelName:Jh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,l=r.pad,u=r.dilations,c=n,d=Zd(a.shape,c.data.get(a.dataId).values),h=Zd(i.shape,c.data.get(i.dataId).values),f=Yy(a.shape,i.shape,s,l,"NHWC",u),p=f.batchSize,m=f.inHeight,v=f.inWidth,g=f.inChannels,y=f.outHeight,b=f.outWidth,x=f.padInfo,w=f.strideHeight,k=f.strideWidth,S=f.filterHeight,T=f.filterWidth,E=f.dilationHeight,C=f.dilationWidth,_=f.outShape;bd(o.rank===_.length,(function(){return"Error in ".concat(Jh,", dy ")+"must have the same rank as output ".concat(_.length,", but got ")+"".concat(o.rank)}));for(var M=Zd(_,c.data.get(o.dataId).values),A=qd(i.shape,i.dtype),I=0;I<p;++I)for(var N=0;N<y;++N)for(var R=N*w-x.top,O=0;O<b;++O)for(var D=O*k-x.left,L=0;L<g;++L){for(var P=Number.MIN_SAFE_INTEGER,F=0,j=0,z=0;z<S;++z){var B=R+z*E;if(B>=0&&B<m)for(var U=0;U<T;++U){var W=D+U*C;if(W>=0&&W<v){var V=d[I][B][W][L]+h[z][U][L];V>P&&(P=V,F=z,j=U)}}}A[F][j][L]+=M[I][N][O][L]}return{dataId:c.write(Om(A,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},tF={kernelName:$h,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,l=r.pad,u=r.dilations,c=n,d=Zd(a.shape,c.data.get(a.dataId).values),h=Zd(i.shape,c.data.get(i.dataId).values),f=Yy(a.shape,i.shape,s,l,"NHWC",u),p=f.batchSize,m=f.inHeight,v=f.inWidth,g=f.inChannels,y=f.outHeight,b=f.outWidth,x=f.padInfo,w=f.strideHeight,k=f.strideWidth,S=f.filterHeight,T=f.filterWidth,E=f.dilationHeight,C=f.dilationWidth,_=f.outShape;bd(o.rank===_.length,(function(){return"Error in ".concat($h,", dy ")+"must have the same rank as output ".concat(_.length,", but got ")+"".concat(o.rank)}));for(var M=Zd(_,c.data.get(o.dataId).values),A=qd(a.shape,a.dtype),I=0;I<p;++I)for(var N=0;N<y;++N)for(var R=N*w-x.top,O=0;O<b;++O)for(var D=O*k-x.left,L=0;L<g;++L){for(var P=Number.MIN_SAFE_INTEGER,F=R<0?0:R,j=D<0?0:D,z=0;z<S;++z){var B=R+z*E;if(B>=0&&B<m)for(var U=0;U<T;++U){var W=D+U*C;if(W>=0&&W<v){var V=d[I][B][W][L]+h[z][U][L];V>P&&(P=V,F=B,j=W)}}}A[I][F][j][L]+=M[I][N][O][L]}return{dataId:c.write(Om(A,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},nF=aL((function(e,t){return e*t})),rF=EL((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),aF=TL(Yf,nF,rF),iF={kernelName:Yf,backendName:"cpu",kernelFunc:aF};function oF(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims;qD(i,"sum");var l=(t="bool"===i.dtype?kL({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):eL({inputs:{x:i},backend:r})).shape.length,u=Id(o,t.shape),c=Px(u,l),d=u,h=t;null!=c&&(h=VL({inputs:{x:t},backend:r,attrs:{perm:c}}),d=jx(d.length,l)),Lx("sum",d,h.shape.length);for(var f=Ox(h.shape,d),p=(0,U.Z)(f,2),m=p[0],v=p[1],g=bL(r,m,iv(h.dtype,"int32")),y=Sd(v),b=r.data.get(g.dataId).values,x=r.data.get(h.dataId).values,w=0;w<b.length;++w){for(var k=w*y,S=0,T=0;T<y;++T)S+=x[k+T];b[w]=S}if(s){var E=g;g=IL({inputs:{x:g},backend:r,attrs:{shape:Dx(g.shape,u)}}),r.disposeIntermediateTensorInfo(E)}return r.disposeIntermediateTensorInfo(t),null!=c&&r.disposeIntermediateTensorInfo(h),g}var sF={kernelName:Np,backendName:"cpu",kernelFunc:oF};var lF={kernelName:ef,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=zT(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;UT(i.length,s,r);for(var l=WT(o,s),u=l.path,c=l.steps,d=c.length,h=null,f=i.length,p=[],m=0;m<d;++m){var v,g=G(c[m]);try{for(g.s();!(v=g.n()).done;){var y=v.value,b=BT(f,s[y]),x=b.permutationIndices,w=b.expandDims,k=void 0;VT(x)?k=r[y]:(k=VL({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),p.push(k));for(var S=k.shape.slice(),T=0;T<w.length;++T)S.splice(w[T],0,1);Td(k.shape,S)||(k=IL({inputs:{x:k},backend:n,attrs:{shape:S}}),p.push(k)),null===h?h=k:(h=aF({inputs:{a:k,b:h},backend:n}),p.push(h))}}catch(_ke){g.e(_ke)}finally{g.f()}m<d-1&&(u[m]>=0&&(h=oF({inputs:{x:h},backend:n,attrs:{axis:u[m]-(i.length-f),keepDims:!1}}),p.push(h)),f--)}for(var E=0,C=p;E<C.length;E++){var _=C[E];_!==h&&n.disposeIntermediateTensorInfo(_)}return h}};var uF={kernelName:nf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;qD([r,a],"eluGrad");for(var i=new Float32Array(Sd(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,l=0;l<o.length;++l){var u=o[l];i[l]=u>=1?s[l]:s[l]*(u+1)}return n.makeTensorInfo(a.shape,"float32",i)}},cF=aL((function(e,t){return e===t?1:0})),dF=TL(af,cF,null,"bool"),hF={kernelName:af,backendName:"cpu",kernelFunc:dF},fF=KD(rf,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))})),pF={kernelName:rf,backendName:"cpu",kernelFunc:fF},mF=hL((function(e){return Math.exp(e)})),vF=$D(of,mF,"float32"),gF={kernelName:of,backendName:"cpu",kernelFunc:vF};function yF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),l=i;return i<0&&(bd(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),l=o+i+1),s.splice(l,0,1),IL({inputs:{x:a},backend:n,attrs:{shape:s}})}var bF={kernelName:sf,backendName:"cpu",kernelFunc:yF},xF=hL((function(e){return Math.expm1(e)})),wF=$D(lf,xF),kF={kernelName:lf,backendName:"cpu",kernelFunc:wF},SF=aL((function(e,t){return e/t})),TF=TL(Qh,SF),EF={kernelName:Qh,backendName:"cpu",kernelFunc:TF},CF=aL((function(e,t){return e-t})),_F=EL((function(e,t,n,r){return{real:e-n,imag:t-r}})),MF=TL(Gp,CF,_F),AF={kernelName:Gp,backendName:"cpu",kernelFunc:MF};function IF(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[a,i],c=Sd(u),d=Rd("float32",c),h=Rd("float32",c),f=0;f<a;f++){for(var p=mP({inputs:{x:s},backend:n,attrs:{begin:[f,0],size:[1,i]}}),m=mP({inputs:{x:l},backend:n,attrs:{begin:[f,0],size:[1,i]}}),v=gL({inputs:{real:p,imag:m},backend:n}),g=NF(v,t,n),y=NT(g.real,g.imag),b=0;b<i;b++){var x=RT(y,b);d[f*i+b]=x.real,h[f*i+b]=x.imag}n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v)}var w=n.makeTensorInfo(u,"float32",d),k=n.makeTensorInfo(u,"float32",h),S=gL({inputs:{real:w,imag:k},backend:n});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(k),S}function NF(e,t,n){var r=Sd(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((g=r)&g-1)){var s=RF(i,o,r,t,n),l=[e.shape[0],e.shape[1]];if(t){var u=n.makeTensorInfo(l,"float32",s.real),c=n.makeTensorInfo(l,"float32",s.imag),d=n.makeTensorInfo([],"float32",Rm(r,"float32")),h=eL({inputs:{x:d},backend:n}),f=EF.kernelFunc({inputs:{a:u,b:d},backend:n}),p=EF.kernelFunc({inputs:{a:c,b:h},backend:n}),m=n.data.get(f.dataId).values,v=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),{real:m,imag:v}}return s}var g,y=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var l=DT(a*s,t,n),u=RT(e,s);i+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(i/=t,o/=t),OT(r,i,o,a)}return r}(NT(i,o),r,t);return function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(y)}function RF(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=NT(e,t),o=n/2,s=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(i),l=s.real,u=s.imag,c=[l.length],d=a.makeTensorInfo(c,"float32",l),h=a.makeTensorInfo(c,"float32",u),f=gL({inputs:{real:d,imag:h},backend:a}),p=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(i),m=p.real,v=p.imag,g=[m.length],y=a.makeTensorInfo(g,"float32",m),b=a.makeTensorInfo(g,"float32",v),x=gL({inputs:{real:y,imag:b},backend:a}),w=RF(l,u,o,r,a),k=w.real,S=w.imag,T=[k.length],E=a.makeTensorInfo(T,"float32",k),C=a.makeTensorInfo(T,"float32",S),_=gL({inputs:{real:E,imag:C},backend:a}),M=RF(m,v,o,r,a),A=M.real,I=M.imag,N=[A.length],R=a.makeTensorInfo(N,"float32",A),O=a.makeTensorInfo(N,"float32",I),D=gL({inputs:{real:R,imag:O},backend:a}),L=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}(n,r),P=[L.real.length],F=a.makeTensorInfo(P,"float32",L.real),j=a.makeTensorInfo(P,"float32",L.imag),z=gL({inputs:{real:F,imag:j},backend:a}),B=aF({inputs:{a:z,b:D},backend:a}),U=ML({inputs:{a:_,b:B},backend:a}),W=MF({inputs:{a:_,b:B},backend:a}),V=xL({inputs:{input:U},backend:a}),Z=xL({inputs:{input:W},backend:a}),H=AP({inputs:{input:U},backend:a}),G=AP({inputs:{input:W},backend:a}),q=NP({inputs:[V,Z],backend:a,attrs:{axis:0}}),X=NP({inputs:[H,G],backend:a,attrs:{axis:0}}),Y=a.data.get(q.dataId).values,K=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(X),{real:Y,imag:K}}var OF={kernelName:uf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Sd(r.shape),i=r.shape[r.shape.length-1],o=IL({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=IF(o,!1,n),l=IL({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}};function DF(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||zd(a),o=Od(i,Sd(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var LF={kernelName:cf,backendName:"cpu",kernelFunc:DF};var PF={kernelName:df,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=Rd(r.dtype,Sd(r.shape)),o=(0,U.Z)(r.shape,4),s=o[0],l=o[1],u=o[2],c=o[3],d=a.data.get(r.dataId).values,h=0;h<s;h++)for(var f=h*u*l*c,p=0;p<l;p++)for(var m=p*(u*c),v=0;v<u;v++)for(var g=v*c,y=0;y<c;y++){var b=Math.round(u-v-1),x=f+m+g+y,w=d[x];if(b>=0&&b<u)w=d[f+m+b*c+y];i[x]=w}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},FF=hL((function(e){return Math.floor(e)})),jF=$D(hf,FF),zF={kernelName:hf,backendName:"cpu",kernelFunc:jF},BF=aL((function(e,t){return Math.floor(e/t)})),UF=TL(ff,BF,null,"int32"),WF={kernelName:ff,backendName:"cpu",kernelFunc:UF};var VF={kernelName:sm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,l=r.strides,u=r.pad,c=r.dataFormat,d=r.dilations,h=r.dimRoundingMode,f=r.activation,p=r.leakyreluAlpha,m=OP({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h}});if(o){var v=m;m=ML({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(f){var g=m;m=vL(n,m,f,s,p),n.disposeIntermediateTensorInfo(g)}return m}};var ZF={kernelName:lm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,l=r.strides,u=r.pad,c=r.dataFormat,d=r.dilations,h=r.dimRoundingMode,f=r.activation,p=r.leakyreluAlpha,m=XP({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h}});if(o){var v=m;m=ML({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(f){var g=m;m=vL(n,m,f,s,p),n.disposeIntermediateTensorInfo(g)}return m}};function HF(e,t,n,r,a,i,o,s,l){for(var u=Fg([r,i],n),c=0;c<r;c++){for(var d=[],h=0,f=0;f<a;f++){var p=e[c*a+f];h+=p*o[f],d.push(p)}if(h<0||h>=l/i)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(s));for(var m=0;m<i;m++)u.values[c*i+m]=t.get.apply(t,(0,_.Z)(t.indexToLoc(h*i+m)))}return u}var GF={kernelName:vf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=Sd(r.shape),o=a.shape,s=o[o.length-1],l=kT(r,a),u=(0,U.Z)(l,4),c=u[0],d=u[1],h=u[2],f=u[3];if(0===d)return n.makeTensorInfo(c,r.dtype,[]);var p=HF(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,d,s,h,f,r.shape,i);return n.makeTensorInfo(c,r.dtype,p.values)}};function qF(e,t,n){for(var r=Fg(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],l=t.locToIndex([o,s]);i[2]=t.values[l];var u=e.locToIndex(i);0<=u&&u<e.values.length&&(r.values[a]=e.values[u])}return r}var XF={kernelName:mf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;qD([a,i],"gatherV2");for(var l=Id(o,a.shape)[0],u=n.data.get(i.dataId).values,c=a.shape[l],d=function(){var e=u[h];bd(e<=c-1&&e>=0,(function(){return"GatherV2: the index value ".concat(e," is not in [0, ").concat(c-1,"]")}))},h=0;h<u.length;++h)d();var f=s;null==s&&(f=0);var p=Sd(i.shape),m=$T(a,i,l,f),v=IL({inputs:{x:a},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),g=IL({inputs:{x:i},backend:n,attrs:{shape:[m.batchSize,p/m.batchSize]}}),y=[m.batchSize,m.outerSize,p/m.batchSize,m.sliceSize],b=n.bufferSync(g),x=qF(n.bufferSync(v),b,y);return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(m.outputShape,x.dtype,x.values)}},YF=aL((function(e,t){return e>t?1:0})),KF=TL(gf,YF,null,"bool"),$F={kernelName:gf,backendName:"cpu",kernelFunc:KF},JF=aL((function(e,t){return e>=t?1:0})),QF=TL(yf,JF,null,"bool"),ej={kernelName:yf,backendName:"cpu",kernelFunc:QF};var tj={kernelName:xf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Sd(r.shape),i=r.shape[r.shape.length-1],o=IL({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=IF(o,!0,n),l=IL({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}},nj=KD(kf,(function(e){return Number.isFinite(e)?1:0}),"bool"),rj={kernelName:kf,backendName:"cpu",kernelFunc:nj},aj=KD(Sf,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),ij={kernelName:Sf,backendName:"cpu",kernelFunc:aj},oj=KD(Tf,(function(e){return Number.isNaN(e)?1:0}),"bool"),sj={kernelName:Tf,backendName:"cpu",kernelFunc:oj},lj=aL((function(e,t){return e<t?1:0})),uj=TL(Cf,lj,null,"bool"),cj={kernelName:Cf,backendName:"cpu",kernelFunc:uj},dj=aL((function(e,t){return e<=t?1:0})),hj=TL(_f,dj,null,"bool"),fj={kernelName:_f,backendName:"cpu",kernelFunc:hj};function pj(e,t,n){var r=(t-e)/(n-1),a=Gd(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var mj={kernelName:Mf,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=pj(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},vj=hL((function(e){return Math.log(e)})),gj=$D(Af,vj),yj={kernelName:Af,backendName:"cpu",kernelFunc:gj},bj=KD(If,(function(e){return Math.log1p(e)})),xj={kernelName:If,backendName:"cpu",kernelFunc:bj},wj=aL((function(e,t){return e&&t})),kj=TL(Nf,wj,null,"bool"),Sj={kernelName:Nf,backendName:"cpu",kernelFunc:kj},Tj=KD(Rf,(function(e){return e?0:1}),"bool"),Ej={kernelName:Rf,backendName:"cpu",kernelFunc:Tj},Cj=aL((function(e,t){return e||t})),_j=TL(Of,Cj,null,"bool"),Mj={kernelName:Of,backendName:"cpu",kernelFunc:_j};var Aj={kernelName:Df,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,l=r.beta;qD(a,"LRN");var u=a.shape[3],c=u-1,d=n.data.get(a.dataId).values,h=Sd(a.shape),f=new Float32Array(h);function p(e){for(var t=e%u,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,c),a=0;n<=r;n++){var o=d[n];a+=o*o}return a}for(var m=0;m<h;m++){var v=p(m),g=d[m]*Math.pow(o+s*v,-l);f[m]=g}return n.makeTensorInfo(a.shape,a.dtype,f)}};var Ij={kernelName:Lf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,l=r.bias,u=r.alpha,c=r.beta;qD(o,"LRNGrad");for(var d=Sd(o.shape),h=o.shape[3],f=n.data.get(o.dataId).values,p=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,v=new Float32Array(d),g=d,y=0;y<g;y++){for(var b=y%h,x=y-b+Math.max(0,b-s),w=y-b+Math.min(h,b+s+1),k=0,S=x;S<w;S++)k+=Math.pow(p[S],2);k=u*k+l;for(var T=x;T<w;T++){var E=-2*u*c*p[T]*m[y]/k;y===T&&(E+=Math.pow(k,-c)),E*=f[y],v[T]+=E}}return n.makeTensorInfo(o.shape,a.dtype,v)}};function Nj(e,t,n,r){for(var a=Rd(r,Sd(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],l=0;l<t;++l){var u=e[o+l];(Number.isNaN(u)||u>s)&&(s=u)}a[i]=s}return a}function Rj(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=n,l=a.shape,u=l.length,c=Id(i,l),d=c,h=Px(d,u),f=s.data.get(a.dataId).values;if(null!=h){for(var p=new Array(u),m=0;m<p.length;m++)p[m]=l[h[m]];f=WL(f,l,a.dtype,h,p),d=jx(d.length,u),l=p}qD(a,"max"),Lx("max",d,u);var v=Ox(l,d),g=(0,U.Z)(v,2),y=g[0],b=Nj(f,Sd(g[1]),y,a.dtype),x=s.write(b,y,a.dtype),w=y;o&&(w=Dx(y,c));return{dataId:x,shape:w,dtype:a.dtype}}var Oj={kernelName:Pf,backendName:"cpu",kernelFunc:Rj},Dj=aL((function(e,t){return Math.max(e,t)})),Lj=TL(Ff,Dj),Pj={kernelName:Ff,backendName:"cpu",kernelFunc:Lj};var Fj={kernelName:jf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;qD(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,l=r.dimRoundingMode;bd(ob(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var u,c=Ky(a.shape,i,o,1,s,l);if(1===c.filterWidth&&1===c.filterHeight&&Td(c.inShape,c.outShape))u=eL({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,h=Wd(a.shape),f=oP(d,a.shape,a.dtype,h,c,"max");u=n.makeTensorInfo(c.outShape,a.dtype,f.values)}return u}};var jj={kernelName:Bf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,l=r.dimRoundingMode,u=r.dataFormat;qD(a,"maxPool3d");var c=$y(a.shape,i,o,1,s,l,u),d=lP(n.data.get(a.dataId).values,a.shape,a.dtype,Wd(a.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};var zj={kernelName:Uf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,l=r.pad,u=r.dimRoundingMode;qD([a,i],"maxPool3DGrad");for(var c=$y(i.shape,o,s,1,l,u),d=function(e,t){for(var n=Fg(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,f=t.padInfo.top,p=t.padInfo.left,m=0;m<t.batchSize;++m)for(var v=0;v<t.inChannels;++v)for(var g=0;g<t.outDepth;++g){for(var y=g*r-h,b=y;b<0;)b+=o;for(var x=Math.min(t.inDepth,u+y),w=0;w<t.outHeight;++w){for(var k=w*a-f,S=k;S<0;)S+=s;for(var T=Math.min(t.inHeight,c+k),E=0;E<t.outWidth;++E){for(var C=E*i-p,_=C;_<0;)_+=l;for(var M=Math.min(t.inWidth,d+C),A=Number.NEGATIVE_INFINITY,I=-1,N=b;N<x;N+=o)for(var R=N-y,O=S;O<T;O+=s)for(var D=O-k,L=_;L<M;L+=l){var P=L-C,F=e.get(m,N,O,L,v);F>=A&&(A=F,I=R*c*d+D*c+P)}n.set(I,m,g,w,E,v)}}}return n}(n.bufferSync(i),c),h=c.strideDepth,f=c.strideHeight,p=c.strideWidth,m=c.dilationDepth,v=c.dilationHeight,g=c.dilationWidth,y=c.effectiveFilterDepth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=y-1-c.padInfo.front,k=x-1-c.padInfo.left,S=b-1-c.padInfo.top,T=Fg(i.shape,"float32"),E=n.bufferSync(a),C=0;C<c.batchSize;++C)for(var _=0;_<c.inChannels;++_)for(var M=0;M<c.inDepth;++M)for(var A=0;A<c.inHeight;++A)for(var I=0;I<c.inWidth;++I){for(var N=M-w,R=A-S,O=I-k,D=0,L=0;L<y;L+=m){var P=(N+L)/h;if(!(P<0||P>=c.outDepth||Math.floor(P)!==P))for(var F=0;F<b;F+=v){var j=(R+F)/f;if(!(j<0||j>=c.outHeight||Math.floor(j)!==j))for(var z=0;z<x;z+=g){var B=(O+z)/p;if(!(B<0||B>=c.outWidth||Math.floor(B)!==B)){var U=y*b*x-1-d.get(C,P,j,B,_)===L*b*x+F*x+z?1:0;if(0!==U)D+=E.get(C,P,j,B,_)*U}}}}T.set(D,C,M,A,I,_)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}};var Bj={kernelName:zf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;qD([i,t.output],"maxPoolGrad");for(var s=r.filterSize,l=r.strides,u=r.pad,c=r.dimRoundingMode,d=Ky(o.shape,s,l,1,u,c),h=n.data.get(o.dataId).values,f=Fg(d.outShape,o.dtype,sP(h,o.shape,o.dtype,d).values),p=d.strideHeight,m=d.strideWidth,v=d.dilationHeight,g=d.dilationWidth,y=d.effectiveFilterHeight,b=d.effectiveFilterWidth,x=b-1-d.padInfo.left,w=y-1-d.padInfo.top,k=Fg(o.shape,"float32"),S=n.data.get(a.dataId).values,T=Fg(a.shape,"float32",S),E=0;E<d.batchSize;++E)for(var C=0;C<d.inChannels;++C)for(var _=0;_<d.inHeight;++_)for(var M=0;M<d.inWidth;++M){for(var A=_-w,I=M-x,N=0,R=0;R<y;R+=v){var O=(A+R)/p;if(!(O<0||O>=d.outHeight||Math.floor(O)!==O))for(var D=0;D<b;D+=g){var L=(I+D)/m;if(!(L<0||L>=d.outWidth||Math.floor(L)!==L)){var P=y*b-1-f.get(E,O,L,C)===R*b+D?1:0;if(0!==P)N+=T.get(E,O,L,C)*P}}}k.set(N,E,_,M,C)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var Uj={kernelName:Wf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,l=n.includeBatchInIndex,u=r;qD(a,"MaxPoolWithArgmax");var c=u.data.get(a.dataId).values,d=Ky(a.shape,i,o,[1,1],s),h=function(e,t,n,r,a){var i=oP(e,0,n,Wd(t),a,"max"),o=sP(e,t,n,a,!0,r);return[i.values,o.values]}(c,a.shape,a.dtype,l,d),f=(0,U.Z)(h,2),p=f[0],m=f[1],v=u.write(p,d.outShape,a.dtype),g=u.write(m,d.outShape,a.dtype);return[{dataId:v,shape:d.outShape,dtype:a.dtype},{dataId:g,shape:d.outShape,dtype:"int32"}]}};var Wj={kernelName:Vf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=Id(i,a.shape),l=Sd(Ox(a.shape,s)[1]),u=[],c=n.makeTensorInfo([],"float32",new Float32Array([l]));u.push(c);var d=kL({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});u.push(d);var h=TF({inputs:{a:d,b:c},backend:n});u.push(h);var f=oF({inputs:{x:h},backend:n,attrs:{axis:i,keepDims:o}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),f}};var Vj={kernelName:Zf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;qD(a,"min");var s=Id(i,a.shape),l=s,u=Px(l,a.shape.length),c=a;null!=u&&(c=VL({inputs:{x:a},backend:n,attrs:{perm:u}}),l=jx(l.length,a.shape.length)),Lx("min",l,c.shape.length);for(var d=Ox(c.shape,l),h=(0,U.Z)(d,2),f=h[0],p=Sd(h[1]),m=Gd(Sd(f),c.dtype),v=n.data.get(c.dataId).values,g=0;g<m.length;++g){for(var y=g*p,b=v[y],x=0;x<p;++x){var w=v[y+x];(Number.isNaN(w)||w<b)&&(b=w)}m[g]=b}null!=u&&n.disposeIntermediateTensorInfo(c);var k=n.makeTensorInfo(f,c.dtype,m);if(o){var S=IL({inputs:{x:k},backend:n,attrs:{shape:Dx(f,s)}});return n.disposeIntermediateTensorInfo(k),S}return k}},Zj=aL((function(e,t){return Math.min(e,t)})),Hj=TL(Hf,Zj),Gj={kernelName:Hf,backendName:"cpu",kernelFunc:Hj};var qj={kernelName:Gf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;qD(a,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),l=i.map((function(e){return e[0]})),u=i.map((function(e,t){return e[0]+a.shape[t]})),c="reflect"===o?0:1,d=n.data.get(a.dataId).values,h=a.shape.length,f=Wd(a.shape),p=Sd(s),m=s.length,v=Wd(s),g=Rd(a.dtype,p),y=0;y<p;y++){for(var b=Kd(y,m,v),x=0;x<m;x++)b[x]<l[x]?b[x]=2*l[x]-b[x]-c:b[x]>=u[x]&&(b[x]=2*(u[x]-1)-b[x]+c);b=b.map((function(e,t){return e-l[t]}));var w=Yd(b,h,f);g[y]=d[w]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},Xj=aL((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),Yj=TL(qf,Xj),Kj={kernelName:qf,backendName:"cpu",kernelFunc:Yj};function $j(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(o," and dim was ").concat(s));var l=Id([s],a.shape),u=Rj({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Dx(u.shape,l),d=IL({inputs:{x:u},backend:n,attrs:{shape:c}}),h=MF({inputs:{a:a,b:d},backend:n}),f=vF({inputs:{x:h},backend:n}),p=oF({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),m=IL({inputs:{x:p},backend:n,attrs:{shape:c}}),v=TF({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),v}var Jj={kernelName:Dp,backendName:"cpu",kernelFunc:$j};var Qj={kernelName:Xf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;qD(a,"multinomial");for(var l=s?a:$j({inputs:{logits:a},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,h=[u,i],f=Gd(Sd(h),"int32"),p=0;p<u;++p){var m=p*c,v=new Float32Array(c-1);v[0]=d[m];for(var g=1;g<v.length;++g)v[g]=v[g-1]+d[m+g];for(var y=ww.alea(o.toString()),b=p*i,x=0;x<i;++x){var w=y();f[b+x]=v.length;for(var k=0;k<v.length;k++)if(w<v[k]){f[b+x]=k;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",f)}};function ez(e,t,n){var r=Rm(-1,n);return nF([],t,r,e,n)}var tz={kernelName:Kf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;qD(r,"neg");var a=ez(n.data.get(r.dataId).values,r.shape,r.dtype),i=(0,U.Z)(a,2),o=i[0],s=i[1];return n.makeTensorInfo(s,r.dtype,o)}},nz=lS;var rz={kernelName:Jf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,l=r.scoreThreshold;qD(a,"NonMaxSuppression");var u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,d=nz(u,c,o,s,l).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},az=uS;var iz={kernelName:Qf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,l=r.scoreThreshold,u=r.padToMaxOutputSize;qD(a,"NonMaxSuppressionPadded");var c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,h=az(c,d,o,s,l,u),f=h.selectedIndices,p=h.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},oz=cS;var sz={kernelName:ep,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,l=r.scoreThreshold,u=r.softNmsSigma;qD(a,"NonMaxSuppressionWithScore");var c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,h=oz(c,d,o,s,l,u),f=h.selectedIndices,p=h.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},lz=aL((function(e,t){return e!==t?1:0})),uz=TL($f,lz,null,"bool"),cz={kernelName:$f,backendName:"cpu",kernelFunc:uz};var dz={kernelName:np,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue;qD(a,"oneHot");var l=Sd(a.shape),u=new Float32Array(l*i);u.fill(s);for(var c=n.data.get(a.dataId).values,d=0;d<l;++d)c[d]>=0&&c[d]<i&&(u[d*i+c[d]]=o);return n.makeTensorInfo([].concat((0,_.Z)(a.shape),[i]),"int32",u)}};function hz(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=xL({inputs:{input:r},backend:n}),i=hz({inputs:{x:a},backend:n}),o=AP({inputs:{input:r},backend:n}),s=hz({inputs:{x:o},backend:n}),l=gL({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}return DF({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var fz={kernelName:nm,backendName:"cpu",kernelFunc:hz};var pz={kernelName:tp,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=xL({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=AP({inputs:{input:a},backend:r}),l=hz({inputs:{x:s},backend:r}),u=gL({inputs:{real:o,imag:l},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(l),u}return DF({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function mz(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return yF({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){xd(a,e.shape,"All tensors passed to stack must have matching shapes"),bd(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=yF({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),l=NP({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}var vz={kernelName:rp,backendName:"cpu",kernelFunc:mz};var gz={kernelName:ap,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;qD(a,"pad");var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),l=i.map((function(e){return e[0]})),u=n.data.get(a.dataId).values,c=Sd(a.shape),d=a.shape.length,h=Wd(a.shape),f=Sd(s),p=s.length,m=Wd(s),v=Rd(a.dtype,f);0!==o&&v.fill(o);for(var g=0;g<c;g++){var y=Kd(g,d,h).map((function(e,t){return e+l[t]}));v[Yd(y,p,m)]=u[g]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}},yz=aL((function(e,t){return Math.pow(e,t)})),bz=TL(ip,yz),xz={kernelName:ip,backendName:"cpu",kernelFunc:bz};function wz(e,t,n,r){for(var a=Ox(e,r),i=(0,U.Z)(a,2),o=i[0],s=i[1],l=iv(t,"int32"),u=Gd(Sd(o),l),c=Sd(s),d=0;d<u.length;++d){for(var h=d*c,f=1,p=0;p<c;++p)f*=n[h+p];u[d]=f}return{outVals:u,outShape:o,outDtype:l}}var kz={kernelName:sp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;qD(a,"prod");var s=a.shape.length,l=Id(i,a.shape),u=Px(l,s),c=l,d=a,h=[];null!=u&&(d=VL({inputs:{x:a},backend:n,attrs:{perm:u}}),h.push(d),c=jx(c.length,s));var f=n.data.get(d.dataId).values,p=wz(d.shape,d.dtype,f,c),m=p.outVals,v=p.outShape,g=p.outDtype,y=v;return o&&(y=Dx(v,l)),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,g,m)}};function Sz(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Gd(0,r);var a=Gd(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return a}var Tz={kernelName:lp,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=Sz(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},Ez=KD(cp,(function(e){return 1/e})),Cz={kernelName:cp,backendName:"cpu",kernelFunc:Ez};var _z={kernelName:mp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;qD(a,"resizeBilinear");for(var l=Wd(a.shape),u=(0,U.Z)(s,2),c=u[0],d=u[1],h=(0,U.Z)(a.shape,4),f=h[0],p=h[1],m=h[2],v=h[3],g=n.data.get(a.dataId).values,y=new Float32Array(Sd([f,c,d,v])),b=[i&&c>1?p-1:p,i&&d>1?m-1:m],x=[i&&c>1?c-1:c,i&&d>1?d-1:d],w=0,k=b[0]/x[0],S=b[1]/x[1],T=0;T<f;T++)for(var E=0;E<c;E++){var C=void 0;C=o?k*(E+.5)-.5:k*E;for(var _=Math.max(0,Math.floor(C)),M=C-_,A=Math.min(p-1,Math.ceil(C)),I=T*l[0]+_*l[1],N=T*l[0]+A*l[1],R=0;R<d;R++){var O=void 0;O=o?S*(R+.5)-.5:S*R;for(var D=Math.max(0,Math.floor(O)),L=O-D,P=Math.min(m-1,Math.ceil(O)),F=I+D*l[2],j=N+D*l[2],z=I+P*l[2],B=N+P*l[2],W=0;W<v;W++){var V=g[F+W],Z=g[j+W],H=V+(g[z+W]-V)*L,G=H+(Z+(g[B+W]-Z)*L-H)*M;y[w++]=G}}}return n.makeTensorInfo([f,c,d,v],"float32",y)}};var Mz={kernelName:vp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;qD([i,a],"resizeBilinearGrad");for(var s=Wd(a.shape),l=(0,U.Z)(a.shape,4),u=l[0],c=l[1],d=l[2],h=l[3],f=(0,U.Z)(i.shape,3),p=f[1],m=f[2],v=new Float32Array(u*c*d*h),g=[o&&p>1?c-1:c,o&&m>1?d-1:d],y=[o&&p>1?p-1:p,o&&m>1?m-1:m],b=g[0]/y[0],x=g[1]/y[1],w=n.data.get(i.dataId).values,k=0,S=0;S<u;S++)for(var T=S*s[0],E=0;E<p;E++)for(var C=E*b,_=Math.floor(C),M=Math.min(Math.ceil(C),c-1),A=T+_*s[1],I=T+M*s[1],N=C-_,R=1-N,O=0;O<m;O++)for(var D=O*x,L=Math.floor(D),P=Math.min(Math.ceil(D),d-1),F=D-L,j=1-F,z=A+L*s[2],B=A+P*s[2],W=I+L*s[2],V=I+P*s[2],Z=R*j,H=R*F,G=N*j,q=N*F,X=0;X<h;X++){var Y=w[k++];v[z+X]+=Y*Z,v[B+X]+=Y*H,v[W+X]+=Y*G,v[V+X]+=Y*q}return n.makeTensorInfo([u,d,c,h],"float32",v)}};var Az={kernelName:fp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;qD(a,"resizeNearestNeighbor");for(var l=Wd(a.shape),u=(0,U.Z)(s,2),c=u[0],d=u[1],h=(0,U.Z)(a.shape,4),f=h[0],p=h[1],m=h[2],v=h[3],g=n.data.get(a.dataId).values,y=new Float32Array(f*c*d*v),b=[i&&c>1?p-1:p,i&&d>1?m-1:m],x=[i&&c>1?c-1:c,i&&d>1?d-1:d],w=b[0]/x[0],k=b[1]/x[1],S=0,T=0;T<f;T++)for(var E=T*l[0],C=0;C<c;C++){var _=o?w*(C+.5):w*C,M=Math.min(p-1,i?Math.round(_):Math.floor(_));o&&(M=Math.max(0,M));for(var A=E+M*l[1],I=0;I<d;I++){var N=o?k*(I+.5):k*I,R=Math.min(m-1,i?Math.round(N):Math.floor(N));o&&(R=Math.max(0,R));for(var O=A+R*l[2],D=0;D<v;D++){var L=g[O+D];y[S++]=L}}}return n.makeTensorInfo([f,c,d,v],a.dtype,y)}};var Iz={kernelName:pp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;qD([i,a],"resizeNearestNeighborGrad");for(var s=Wd(a.shape),l=Wd(i.shape),u=(0,U.Z)(a.shape,4),c=u[0],d=u[1],h=u[2],f=u[3],p=(0,U.Z)(i.shape,3),m=p[1],v=p[2],g=new Float32Array(c*d*h*f),y=n.data.get(i.dataId).values,b=[o&&m>1?d-1:d,o&&v>1?h-1:h],x=[o&&m>1?m-1:m,o&&v>1?v-1:v],w=b[0]/x[0],k=b[1]/x[1],S=1/w,T=1/k,E=2*Math.ceil(S)+2,C=2*Math.ceil(T)+2,_=0;_<c;_++)for(var M=_*s[0],A=0;A<d;A++)for(var I=M+A*s[1],N=Math.floor(A*S),R=Math.floor(N-E/2),O=0;O<h;O++)for(var D=I+O*s[2],L=Math.floor(O*T),P=Math.floor(L-C/2),F=0;F<f;F++){for(var j=0,z=0;z<E;z++){var B=z+R;if(!(B<0||B>=m)){var W=M+B*l[1],V=B*w;if(A===Math.min(d-1,o?Math.round(V):Math.floor(V)))for(var Z=0;Z<C;Z++){var H=Z+P;if(!(H<0||H>=v)){var G=W+H*l[2],q=H*k;O===Math.min(h-1,o?Math.round(q):Math.floor(q))&&(j+=y[G+F])}}}}g[D+F]=j}return n.makeTensorInfo(a.shape,a.dtype,g)}};var Nz={kernelName:yp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;qD(a,"reverse");var o=a.shape.length,s=Id(i,a.shape);if(0===o)return eL({inputs:{x:a},backend:n});for(var l=new qm(a.shape,a.dtype),u=n.bufferSync(a),c=function(){var e=l.indexToLoc(d),t=e.slice();s.forEach((function(e){return t[e]=a.shape[e]-1-t[e]})),l.set.apply(l,[u.get.apply(u,(0,_.Z)(t))].concat((0,_.Z)(e)))},d=0;d<l.size;d++)c();return n.makeTensorInfo(l.shape,l.dtype,l.values)}},Rz={kernelName:im,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,l=r,u=Rd(a.dtype,Sd(a.shape)),c=(0,U.Z)(a.shape,4),d=c[0],h=c[1],f=c[2],p=c[3],m=vT(s,h,f),v=(0,U.Z)(m,2),g=v[0],y=v[1],b=Math.sin(i),x=Math.cos(i),w=l.data.get(a.dataId).values,k=0;k<d;k++)for(var S=k*f*h*p,T=0;T<h;T++)for(var E=T*(f*p),C=0;C<f;C++)for(var _=C*p,M=0;M<p;M++){var A=[d,T,C,M],I=A[2],N=A[1],R=(I-g)*x-(N-y)*b,O=(I-g)*b+(N-y)*x;R=Math.round(R+g),O=Math.round(O+y);var D=o;if("number"!==typeof o&&(D=3===M?255:o[M]),R>=0&&R<f&&O>=0&&O<h)D=w[S+O*(f*p)+R*p+M];u[S+E+_+M]=D}return{dataId:l.write(u,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},Oz=KD(bp,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),Dz={kernelName:bp,backendName:"cpu",kernelFunc:Oz},Lz=hL((function(e){return 1/Math.sqrt(e)})),Pz=$D(xp,Lz),Fz={kernelName:xp,backendName:"cpu",kernelFunc:Pz};function jz(e,t,n,r,a,i,o,s,l,u){var c=[r/a,a],d=e.values,h=t.values;if(0===r)return Fg(n,t.dtype);var f=Fg(c,t.dtype);f.values.fill(l);for(var p=0;p<i;p++){for(var m=[],v=0,g=0;g<o;g++){var y=d[p*o+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var b=0;b<a;b++)u?f.values[v*a+b]+=h[p*a+b]:f.values[v*a+b]=0===t.rank?h[0]:h[p*a+b]}return f}var zz={kernelName:wp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=Nk(0,a,o),l=s.sliceRank,u=s.numUpdates,c=s.sliceSize,d=s.strides,h=s.outputSize,f=jz(n.bufferSync(a),n.bufferSync(i),o,h,c,u,l,d,0,!0);return n.makeTensorInfo(o,f.dtype,f.values)}};var Bz={kernelName:kp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;qD([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=iv(a.dtype,i.dtype),d=Gd(Sd(a.shape),c),h=0,f=0===o||o>1||1===a.shape.length?1:Sd(a.shape.slice(1)),p=0;p<s.length;p++)for(var m=0;m<f;m++)1===s[p]?d[h++]=l[p]:d[h++]=u[p];return n.makeTensorInfo(a.shape,c,d)}},Uz=KD(Sp,(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)})),Wz={kernelName:Sp,backendName:"cpu",kernelFunc:Uz},Vz=KD(_p,(function(e){return e<0?-1:e>0?1:0})),Zz={kernelName:_p,backendName:"cpu",kernelFunc:Vz},Hz=KD(Ep,(function(e){return Math.sin(e)})),Gz={kernelName:Ep,backendName:"cpu",kernelFunc:Hz},qz=KD(Cp,(function(e){return Math.sinh(e)})),Xz={kernelName:Cp,backendName:"cpu",kernelFunc:qz},Yz=Math.log(1.1920928955078125e-7)+2,Kz=KD(Ap,(function(e){var t=e>-Yz,n=e<Yz,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),$z={kernelName:Ap,backendName:"cpu",kernelFunc:Kz};var Jz={kernelName:Rp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;qD([a],"spaceToBatchND");var s=Sd(i),l=[[0,0]];l.push.apply(l,(0,_.Z)(o));for(var u=1+i.length;u<a.shape.length;++u)l.push([0,0]);var c=gz.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),d=gT(c.shape,i,s,!1),h=yT(d.length,i.length,!1),f=bT(c.shape,i,s,!1),p=IL({inputs:{x:c},backend:n,attrs:{shape:d}}),m=VL({inputs:{x:p},backend:n,attrs:{perm:h}}),v=IL({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),v}};function Qz(e,t,n,r,a,i,o){var s=t[0],l=i[0],u=new Array(l),c=new Array(s),d=t[1];if(0===l){if(0!==s)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(s));return[Od(n,0),[0,d],Od(a,0),u,c]}for(var h=!0,f=0,p=new Array(l).fill(0),m=0;m<s;++m){var v=e[m*d];if(v<0)throw new Error(GT(m,v));if(v>=l)throw new Error(qT(m,v,l));++p[v],h=h&&v>=f,f=v}for(var g=!0,y=0;y<l;++y){var b=0===p[y];u[y]=b,g=g&&!b,p[y]=Math.max(p[y],1),y>0&&(p[y]+=p[y-1])}if(g&&h){for(var x=e,w=r,k=0;k<s;++k)c[k]=k;return[x,[s,d],w,u,c]}for(var S=p[l-1],T=Od(n,S*d),E=Od(a,S),C=new Array(l).fill(0),_=0;_<s;++_){var M=e[_*d],A=C[M],I=(0===M?0:p[M-1])+A;C[M]++;for(var N=0;N<d;++N)T[I*d+N]=e[_*d+N];E[I]=r[_],c[_]=I}for(var R=0;R<l;++R){if(0===C[R]){var O=0===R?0:p[R-1];T[O*d+0]=R;for(var D=1;D<d;++D)T[O*d+D]=0;E[O]=o}}return[T,[S,d],E,u,c]}var eB={kernelName:Lp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],d=Qz(s,r.shape,r.dtype,l,a.dtype,u,c),h=(0,U.Z)(d,5),f=h[0],p=h[1],m=h[2],v=h[3],g=h[4];return[n.makeTensorInfo(p,r.dtype,f),n.makeTensorInfo([p[0]],a.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};function tB(e,t,n,r,a){for(var i,o=Sd(r),s=t[0],l=a.length,u=[],c=1,d=-1,h=0;h<l;++h){var f=a[h];if(-1===f){if(-1!==d)throw new Error((i=h,"only one output dimension may be -1, not both ".concat(d," and ").concat(i)));d=h,u.push(1)}else{if(f<0)throw new Error(XT(h,f));c*=f,u.push(f)}}if(-1!==d){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var p=Math.trunc(o/c);if(c*p!==o)throw new Error(function(e,t){var n=Sd(e),r=Sd(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}(r,u));u[d]=p}if(Sd(u)!==o)throw new Error(function(e,t){var n=Sd(e),r=Sd(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}(r,u));var m=r.length,v=[];if(m>0){v[m-1]=1;for(var g=m-2;g>=0;--g)v[g]=v[g+1]*r[g+1]}var y=[];if(l>0){y[l-1]=1;for(var b=l-2;b>=0;--b)y[b]=y[b+1]*u[b+1]}for(var x=Od(n,s*l),w=0;w<s;++w){for(var k=0,S=0;S<m;++S)k+=e[w*m+S]*v[S];for(var T=0;T<l;++T)x[w*l+T]=Math.trunc(k/y[T]),k%=y[T]}return[x,[s,l],u]}var nB={kernelName:Pp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),u=tB(s,r.shape,r.dtype,o,l),c=(0,U.Z)(u,3),d=c[0],h=c[1],f=c[2];return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}};function rB(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,l=[t[0],e.length/t[0]],u=l[1],c=s>0?a[s-1]+1:0;if(c<0)throw new Error("segment ids must be >= 0");var d=t.slice();d[0]=c;var h=d.reduce((function(e,t){return e*t}),1),f=Od(n,h);if(0===s)return c>0&&f.fill(o),[f,d];if(c<=0)throw new Error("segment ids must be >= 0");for(var p=0,m=1,v=0,g=a[p];;){var y=0;if(m<s){if(g===(y=a[m])){++m;continue}if(g>=y)throw new Error("segment ids are not increasing")}if(g<0||g>=c)throw new Error(YT(g,c));g>v&&f.fill(o,v*u,g*u);for(var b=p;b<m;++b){var x=r[b];if(x<0||x>=l[0])throw new Error(KT(b,r[b],l[0]));for(var w=0;w<u;w++)f[g*u+w]+=e[x*u+w]}if(i)for(var k=0;k<u;k++)f[g*u+k]/=m-p;if(p=m,v=g+1,g=y,++m>s)break}return v<c&&f.fill(o,v*u,c*u),[f,d]}var aB={kernelName:Fp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,u=rB(o,r.shape,r.dtype,s,l,!0),c=(0,U.Z)(u,2),d=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,d)}};var iB={kernelName:jp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,u=rB(o,r.shape,r.dtype,s,l),c=(0,U.Z)(u,2),d=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,d)}};var oB={kernelName:zp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,l=Nk(0,a,s),u=l.sliceRank,c=l.numUpdates,d=l.sliceSize,h=l.strides,f=l.outputSize,p=jz(n.bufferSync(a),n.bufferSync(i),s,f,d,c,u,h,n.data.get(o.dataId).values[0],!1);return n.makeTensorInfo(s,p.dtype,p.values)}};var sB={kernelName:Op,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=Id(r.axis,a.shape)[0],s=HT(a,i,o),l=new Array(a.shape.length).fill(0),u=a.shape.slice();return s.map((function(e){var t=(0,_.Z)(u);t[o]=e;var r=mP({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[o]+=e,r}))}},lB=hL((function(e){return Math.sqrt(e)})),uB=KD(Ip,(function(e){return Math.sqrt(e)})),cB={kernelName:Ip,backendName:"cpu",kernelFunc:uB},dB={kernelName:Up,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;qD(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var l=i[s];o[s]=l*l}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},hB=aL((function(e,t){var n=e-t;return n*n})),fB=TL(Bp,hB),pB={kernelName:Bp,backendName:"cpu",kernelFunc:fB},mB=KD(rm,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),vB={kernelName:rm,backendName:"cpu",kernelFunc:mB};function gB(e,t,n,r){for(var a=Fg(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),l=0;l<s.length;l++)s[l]=o[l]*n[l]+r[l];a.set.apply(a,[t.get.apply(t,s)].concat((0,_.Z)(o)))}return a}var yB={kernelName:Wp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,l=r.beginMask,u=r.endMask,c=r.ellipsisMask,d=r.newAxisMask,h=r.shrinkAxisMask;qD(a,"stridedSlice");var f,p=wy(a.shape,i,o,s,l,u,c,d,h),m=p.finalShapeSparse,v=p.finalShape,g=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,w=p.end,k=p.strides;if(g)f=IL({inputs:{x:a},backend:n,attrs:{shape:v}});else if(y||b){bd(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var S=gy(x,w,k),T=mP({inputs:{x:a},backend:n,attrs:{begin:x,size:S}});f=IL({inputs:{x:T},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(T)}else{var E=gB(m,n.bufferSync(a),k,x);f=n.makeTensorInfo(v,E.dtype,E.values)}return f}},bB=function(){function e(t,n,r,a,i,o){M(this,e),this.separator=Lm(t),this.nGramWidths=n,this.leftPad=Lm(r),this.rightPad=Lm(a),this.padWidth=i,this.preserveShort=o}return(0,A.Z)(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(){var s=o.getPadWidth(i),u=Math.max(0,s-l),c=Math.max(0,s-(a-(l+1))),d=i-(u+c),h=t+(u>0?0:l-s),f=0;f+=u*o.leftPad.length;for(var p=0;p<d;++p)f+=e[h+p].length;f+=c*o.rightPad.length,f+=(u+c+d-1)*o.separator.length,n[r+l]=new Uint8Array(f);for(var m=n[r+l],v=0,g=function(e){return e.forEach((function(e){return m[v++]=e}))},y=0;y<u;++y)g(o.leftPad),g(o.separator);for(var b=0;b<d-1;++b)g(e[h+b]),g(o.separator);if(d>0){g(e[h+d-1]);for(var x=0;x<c;++x)g(o.separator),g(o.rightPad)}else{for(var w=0;w<c-1;++w)g(o.rightPad),g(o.separator);g(o.rightPad)}},l=0;l<a;++l)s()}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var l=a-1,u=Od("int32",a);if(0===r||0===a){for(var c=new Array(r),d=0;d<=l;++d)u[d]=0;return[c,u]}u[0]=0;for(var h=function(){var e=t[f]-t[f-1],r=0;n.nGramWidths.forEach((function(t){r+=n.getNumNGrams(e,t)})),n.preserveShort&&e>0&&0===r&&(r=1),u[f]=u[f-1]+r},f=1;f<=l;++f)h();for(var p=new Array(u[l]),m=function(r){var a=t[r],i=u[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],l=n.getNumNGrams(s,o);n.createNGrams(e,a,p,i,l,o),i+=l})),n.preserveShort&&i===u[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,p,i,1,s)}},v=0;v<l;++v)m(v);return[p,u]}}]),e}();function xB(e,t,n,r,a,i,o,s){return new bB(n,r,a,i,o,s).compute(e,t)}var wB={kernelName:Vp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,l=r.padWidth,u=r.preserveShortSequences,c=t.data,d=t.dataSplits,h=xB(n.data.get(c.dataId).values,n.data.get(d.dataId).values,a,i,o,s,l,u),f=(0,U.Z)(h,2),p=f[0],m=f[1];return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}};function kB(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var s=t[0],l=e.indexOf(s);-1!==l;){var u=e.subarray(0,l);n&&0===u.length||r.push(u),l=(e=e.subarray(l+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var c=0;c<e.length;++c)r.push(e.subarray(c,c+1))}function SB(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),l=0;l<r;++l){var u=a.length;kB(e[l],t,n,a);var c=a.length-u;s[l]=c,i+=c,o=Math.max(o,c)}for(var d=Od("int32",2*i),h=new Array(i),f=[r,o],p=0,m=0;m<r;++m)for(var v=0;v<s[m];++v)d[2*p]=m,d[2*p+1]=v,h[p]=a[p],++p;return[d,h,f]}var TB={kernelName:Zp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=SB(n.data.get(a.dataId).values,n.data.get(i.dataId).values[0],r),s=(0,U.Z)(o,3),l=s[0],u=s[1],c=s[2],d=u.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(c))]}};function EB(e,t){for(var n=Od("int32",e.length),r=0;r<e.length;++r)n[r]=Nm(e[r]).modulo(t).getLowBitsUnsigned();return n}var CB={kernelName:Hp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=EB(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",i)}},_B=KD(qp,(function(e){return Math.tan(e)})),MB={kernelName:qp,backendName:"cpu",kernelFunc:_B},AB=KD(Xp,(function(e){return Math.tanh(e)}));function IB(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=Fg(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),l=0;l<s.length;l++)s[l]=o[l]%e.shape[l];var u=e.locToIndex(s);a.values[i]=e.values[u]}return a}var NB={kernelName:Yp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;qD(a,"tile");var o=IB(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},RB=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function OB(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2);OB(e,t,Math.max(n,Math.floor(t-i*s/a+l)),Math.min(r,Math.floor(t+(a-i)*s/a+l)))}var u=e[t],c=n,d=r;for(gd(e,n,t),RB(e[r],u)>0&&gd(e,n,r);c<d;){for(gd(e,c,d),c++,d--;RB(e[c],u)<0;)c+=1;for(;RB(e[d],u)>0;)d-=1}0===RB(e[n],u)?gd(e,n,d):gd(e,d+=1,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function DB(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,l=Rd(n,o*r),u=Rd("int32",o*r),c=function(){var t=d*s,n=e.subarray(t,t+s),i=new Array(n.length);n.forEach((function(e,t){return i[t]={value:e,index:t}})),r<i.length&&(OB(i,r),i=i.slice(0,r)),a&&i.sort(RB);for(var o=d*r,c=l.subarray(o,o+r),h=u.subarray(o,o+r),f=0;f<r;f++)c[f]=i[f].value,h[f]=i[f].index},d=0;d<o;d++)c();var h=t.slice();return h[h.length-1]=r,[Fg(h,n,l),Fg(h,"int32",u)]}var LB={kernelName:Kp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;qD(a,"topk");var s=DB(n.data.get(a.dataId).values,a.shape,a.dtype,i,o),l=(0,U.Z)(s,2),u=l[0],c=l[1];return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};var PB={kernelName:$p,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=t.transforms,o=n.interpolation,s=n.fillMode,l=n.fillValue,u=n.outputShape,c=(0,U.Z)(a.shape,4),d=c[0],h=c[1],f=c[2],p=c[3],m=null!=u?u:[h,f],v=(0,U.Z)(m,2),g=v[0],y=v[1],b=[d,g,y,p],x=Wd(a.shape),w=x[0],k=x[1],S=x[2],T=Rd(a.dtype,Sd(b));T.fill(l);for(var E=r.data.get(a.dataId).values,C=r.data.get(i.dataId).values,_=0;_<d;++_){for(var M=1===i.shape[0]?C:C.subarray(8*_,8*_+8),A=0;A<g;++A)for(var I=0;I<y;++I)for(var N=0;N<p;++N){var R=void 0,O=M[6]*I+M[7]*A+1;if(0!==O){var D=(M[0]*I+M[1]*A+M[2])/O,L=(M[3]*I+M[4]*A+M[5])/O,P=FB(D,f,s),F=FB(L,h,s);switch(o){case"nearest":R=zB(E,h,f,w,k,S,_,F,P,N,l);break;case"bilinear":R=BB(E,h,f,w,k,S,_,F,P,N,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(o))}T[_*w+A*k+I*S+N]=R}}return r.makeTensorInfo(b,a.dtype,T)}return{dataId:r.write(T,b,a.dtype),shape:a.shape,dtype:a.dtype}}};function FB(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return md(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return md(0,n,t-1)}(e,t);case"nearest":return function(e,t){return md(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function jB(e,t,n,r,a,i,o,s,l,u,c){return 0<=s&&s<t&&0<=l&&l<n?e[o*r+s*a+l*i+u]:c}function zB(e,t,n,r,a,i,o,s,l,u,c){return jB(e,t,n,r,a,i,o,Math.round(s),Math.round(l),u,c)}function BB(e,t,n,r,a,i,o,s,l,u,c){var d=Math.floor(s),h=Math.floor(l),f=d+1,p=h+1;return(f-s)*((p-l)*jB(e,t,n,r,a,i,o,d,h,u,c)+(l-h)*jB(e,t,n,r,a,i,o,d,p,u,c))+(s-d)*((p-l)*jB(e,t,n,r,a,i,o,f,h,u,c)+(l-h)*jB(e,t,n,r,a,i,o,f,p,u,c))}function UB(e,t,n,r){for(var a=Id(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var l={},u=new Int32Array(n[a]),c=new qm(i,r,e),d=[],h=1===i[0]&&1===i[2],f=0;f<n[a];f++){var p=void 0;if(h)p=e[f].toString();else{for(var m=[],v=0;v<i[0];v++)for(var g=0;g<i[2];g++)m.push(c.get(v,f,g));p=m.join(",")}if(void 0!==l[p])u[f]=l[p];else{var y=Object.keys(l).length;l[p]=y,u[f]=y,d.push(f)}}var b=i.slice();b[1]=Object.keys(l).length;var x=new qm(b,r);d.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)x.set(c.get(n,e,r),n,t,r)}));var w=n.slice();return w[a]=b[1],{outputValues:x.values,outputShape:w,indices:u}}var WB={kernelName:Qp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;qD(i,"unique");var o=UB(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,l=o.outputShape,u=o.indices;return[r.makeTensorInfo(l,i.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}};var VB={kernelName:em,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],l=new Array(o-1),u=0,c=0;c<o;c++)c!==i&&(l[u++]=a.shape[c]);var d=new Array(o).fill(0),h=a.shape.slice();h[i]=1;for(var f=new Array(s),p=0;p<f.length;p++){d[i]=p;var m=mP({inputs:{x:a},backend:n,attrs:{begin:d,size:h}});f[p]=IL({inputs:{x:m},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(m)}return f}};for(var ZB={kernelName:tm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;qD(a,"unsortedSegmentSum");for(var s=[],l=[],u=a.shape.length-i.shape.length,c=i,d=0;d<u;++d){var h=yF({inputs:{input:c},backend:n,attrs:{dim:d+1}});c=h,l.push(h)}for(var f=0;f<o;++f){var p=Rm(f,"int32"),m=n.makeTensorInfo([],"int32",p),v=dF({inputs:{a:m,b:c},backend:n}),g=kL({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),y=aF({inputs:{a:g,b:a},backend:n}),b=oF({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),l.push(m),l.push(v),l.push(g),l.push(y),l.push(b)}var x=mz({inputs:s,backend:n,attrs:{axis:0}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},HB=0,GB=[DL,PL,jL,BL,AL,UL,HL,GL,qL,XL,KL,JL,eP,rP,iP,uP,cP,dP,hP,OL,fP,gP,xP,wP,SL,TP,CP,yL,_P,RP,DP,LP,PP,FP,jP,zP,UP,VP,ZP,HP,GP,qP,YP,KP,$P,JP,QP,eF,tF,lF,QD,uF,hF,pF,gF,bF,kF,OF,LF,PF,zF,WF,VF,ZF,GF,XF,$F,ej,tL,tj,IP,rj,ij,sj,rL,cj,fj,mj,yj,xj,Sj,Ej,Mj,Aj,Ij,Oj,Pj,Fj,jj,zj,Bj,Uj,Wj,Vj,Gj,qj,Kj,Qj,iF,tz,rz,iz,sz,cz,dz,pz,vz,gz,xz,sL,kz,Tz,wL,EF,Cz,uL,dL,NL,_z,Mz,Az,Iz,Nz,Rz,Dz,Fz,zz,Bz,Wz,mL,Zz,Gz,Xz,vP,Jj,$z,Jz,eB,nB,aB,iB,oB,sB,cB,dB,pB,vB,yB,wB,TB,CB,AF,sF,MB,{kernelName:Xp,backendName:"cpu",kernelFunc:AB},NB,LB,PB,ZL,WB,VB,ZB,fz];HB<GB.length;HB++){mm(GB[HB])}var qB,XB,YB,KB={},$B={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function JB(e,t){if(!(e in KB)){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;if(n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete KB[e]}),!1),1===e)return n.getContext("webgl",$B)||n.getContext("experimental-webgl",$B);return n.getContext("webgl2",$B)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;KB[e]=n}var r=KB[e];return null==r||r.isContextLost()?(delete KB[e],JB(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),KB[e])}function QB(e,t){return[t,e]}function eU(e){var t=Sd(e);return Cd(Math.ceil(t/4))}function tU(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function nU(e,t){var n,r,a,i,o,s,l,u,c,d,h=e;return 2===th().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,a=h.RGBA16F,i=h.RGBA32F,o=h.RED,l=4,u=1,c=h.HALF_FLOAT,d=h.FLOAT,s=h.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=h.RGBA,o=e.RGBA,l=4,u=4,c=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:l,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:d}}function rU(e,t){var n=t();return th().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(qB||(qB={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(XB||(XB={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(YB||(YB={}));function aU(e){return!!(th().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function iU(e,t){return vU(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function oU(e,t){var n=vU(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(rU(e,(function(){return e.shaderSource(n,t)})),rU(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=uU.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return _d((t+1).toString(),i)+e})),s=0,l=0;l<o.length;l++)s=Math.max(o[l].length,s);var u=o.slice(0,r-1),c=o.slice(r-1,r),d=o.slice(r);console.log(u.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(_d(c[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var sU,lU,uU=/ERROR: [0-9]+:([0-9]+):/g;function cU(e,t){if(rU(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function dU(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(rU(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),rU(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),rU(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function hU(e,t,n,r){rU(e,(function(){return function(e,t,n){gU(e,n),rU(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),rU(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),rU(e,(function(){return e.uniform1i(n,r)}))}function fU(e,t,n){rU(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),rU(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function pU(e,t){rU(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),rU(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function mU(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function vU(e,t,n){var r=rU(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function gU(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function yU(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Sd(e.slice(0,e.length-t))}function bU(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function xU(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[yU(e)].concat((0,_.Z)(bU(e)))),t}function wU(e){return e%2===0}function kU(e,t){if(Td(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(wU(n)&&wU(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&wU(e[0])&&wU(t[0])}function SU(e,t){return null!=e.getExtension(t)}function TU(e){try{if(null!=JB(e))return!0}catch(UK){return console.log("Error when getting WebGL context: ",UK),!1}return!1}function EU(e){if(0===e)return!1;var t=JB(e);if(1!==e){if(SU(t,"EXT_color_buffer_float"))return CU(t);var n="EXT_color_buffer_half_float";if(SU(t,n)){var r=t.getExtension(n);return function(e,t){var n=nU(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!SU(t,"OES_texture_float")&&(!!SU(t,"WEBGL_color_buffer_float")&&CU(t))}function CU(e){var t=nU(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function _U(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&bd("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var MU=th();function AU(){var e,t,n,r,a,i,o,s,l,u;return 2===th().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}function IU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Wd(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function NU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Wd(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function RU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=function(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}function OU(e){var t=Wd(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}MU.registerFlag("HAS_WEBGL",(function(){return MU.getNumber("WEBGL_VERSION")>0})),MU.registerFlag("WEBGL_VERSION",(function(){return TU(2)?2:TU(1)?1:0})),MU.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),MU.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===MU.get("WEBGL_VERSION")})),MU.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),MU.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),MU.registerFlag("WEBGL_PACK",(function(){return MU.getBool("HAS_WEBGL")})),MU.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return MU.getBool("WEBGL_PACK")})),MU.registerFlag("WEBGL_PACK_CLIP",(function(){return MU.getBool("WEBGL_PACK")})),MU.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return MU.getBool("WEBGL_PACK")})),MU.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return MU.getBool("WEBGL_PACK")})),MU.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return MU.getBool("WEBGL_PACK")})),MU.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return MU.getBool("WEBGL_PACK")})),MU.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return MU.getBool("WEBGL_PACK")})),MU.registerFlag("WEBGL_PACK_REDUCE",(function(){return MU.getBool("WEBGL_PACK")})),MU.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return MU.getBool("WEBGL_PACK")})),MU.registerFlag("WEBGL_CONV_IM2COL",(function(){return MU.getBool("WEBGL_PACK")})),MU.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==sU){var t=JB(e);sU=t.getParameter(t.MAX_TEXTURE_SIZE)}return sU}(MU.getNumber("WEBGL_VERSION"))})),MU.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==lU){var t=JB(e);lU=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,lU)}(MU.getNumber("WEBGL_VERSION"))})),MU.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=MU.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=JB(e);return SU(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:SU(t,"EXT_disjoint_timer_query")?1:0}(e)})),MU.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return MU.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!yv()})),MU.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=JB(e);if(1===e){if(!SU(t,"OES_texture_float"))return!1}else if(!SU(t,"EXT_color_buffer_float"))return!1;return CU(t)}(MU.getNumber("WEBGL_VERSION"))})),MU.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!MU.getBool("WEBGL_FORCE_F16_TEXTURES")&&MU.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),MU.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return EU(MU.getNumber("WEBGL_VERSION"))})),MU.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=MU.getNumber("WEBGL_VERSION"))&&null!=JB(e).fenceSync;var e})),MU.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return MU.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),MU.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),MU.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return yv()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),MU.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),MU.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),MU.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),MU.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var DU="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",LU=ly;function PU(e,t,n){var r=[];if(e.forEach((function(e){var t=Sd(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(GU(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?jU(e,r):FU(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,l=LU(e.shapeInfo.logicalShape,t.logicalShape),u=HU(s),c=s-o,d=["x","y","z","w","u","v"];n=0===o?"":s<2&&l.length>=1?"coords = 0;":l.map((function(e){return"coords.".concat(d[e+c]," = 0;")})).join("\n");var h="";h=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+c])})).join(", ");var f="return outputValue;",p=1===Sd(e.shapeInfo.logicalShape),m=Sd(t.logicalShape),v=1===m;if(1!==o||p||v){if(p&&!v)f=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){var g=o-2,y=o-1;l.indexOf(g)>-1&&l.indexOf(y)>-1?f="return vec4(outputValue.x);":l.indexOf(g)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(y)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(u," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(h,");\n      ").concat(f,"\n    }\n  ")}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===l&&null==e.shapeInfo.flatOffset&&Td(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var u,c=HU(l),d=LU(e.shapeInfo.logicalShape,t.logicalShape),h=l-s,f=["x","y","z","w","u","v"];u=0===s?"":l<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(f[e+h]," = 0;")})).join("\n");var p="";p=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+h])})).join(", ");return"\n    float ".concat(a,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(u,"\n      return get").concat(r,"(").concat(p,");\n    }\n  ")}(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),l=t.texShape,u=AU(),c=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(u),d=function(e){var t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(zU,"\n    ").concat(BU,"\n    ").concat(UU,"\n  ");return t}(u);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Td(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",l="b, r, c",u=2;u<e.length-1;u++)o*=e[e.length-u-1],s="\n      int b".concat(u," = index / ").concat(o,";\n      index -= b").concat(u," * ").concat(o,";\n    ")+s,l="b".concat(u,", ")+l;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(l,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,l,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(u)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(Td(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=NU(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=IU(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=NU(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=IU(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=IU(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=IU(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,l,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(u)),n.packedInputs&&(d+=WU),[d,c,i,o,a,s,n.userCode].join("\n")}function FU(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=(0,U.Z)(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=VU(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var l=(0,U.Z)(e.shapeInfo.texShape,2),u=l[0],c=l[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(u,", ").concat(c,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(ZU(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=VU(n);if(1===o)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===i)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&Td(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var l=Nd(n),u=l.newShape,c=l.keptDims,d=u;if(d.length<n.length){var h=qU(e,d),f=["row","col"];return"\n      ".concat(FU(h,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(XU(f,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(ZU(e),"\n      }\n    ");var p=i[0],m=i[1],v=VU(r);if(1===m)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===p)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(m,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(t)return"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(v,";\n    vec2 uv = uvFromFlat(").concat(p,", ").concat(m,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=Nd(n),l=s.newShape,u=s.keptDims,c=l;if(c.length<n.length){var d=qU(e,c),h=["row","col","depth"];return"\n        ".concat(FU(d,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(XU(h,u),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(ZU(e),"\n      }\n    ");var f=e.shapeInfo.texShape,p=f[0],m=f[1],v=e.shapeInfo.flatOffset;if(m===i&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(m,".0, ").concat(p,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(m===o&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(m,".0, ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var g=VU(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(m,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,l=Nd(n),u=l.newShape,c=l.keptDims;if(u.length<n.length){var d=qU(e,u),h=["row","col","depth","depth2"];return"\n      ".concat(FU(d,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(XU(h,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(ZU(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,m=p[0],v=p[1],g="int stride2 = ".concat(r,"Shape[3];"),y="int stride1 = ".concat(r,"Shape[2] * stride2;"),b="int stride0 = ".concat(r,"Shape[1] * stride1;");if(v===s&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(g,"\n        ").concat(y,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(v===i&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var x=VU(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(g,"\n      ").concat(y,"\n      ").concat(b,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(x,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index + ").concat(x,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,l=Nd(t),u=l.newShape,c=l.keptDims;if(u.length<t.length){var d=qU(e,u),h=["row","col","depth","depth2","depth3"];return"\n      ".concat(FU(d),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(XU(h,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(ZU(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,m=p[0],v=p[1];if(v===s&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=VU(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Nd(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=qU(e,i),l=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(FU(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(XU(l,o),");\n      }\n    ")}var u=t[5],c=t[4]*u,d=t[3]*c,h=t[2]*d,f=t[1]*h;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(f,", ").concat(h,", ").concat(d,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(ZU(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,m=e.shapeInfo.texShape,v=m[0],g=m[1];if(g===f&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(h,", ").concat(d,", ").concat(c,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(g===u&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var y=VU(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(f," + col * ").concat(h," + depth * ").concat(d," +\n          depth2 * ").concat(c," + depth3 * ").concat(u," + depth4 + ").concat(y,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(g,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function jU(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=AU();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=AU();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],l=AU();if(null!=i&&Td(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(c,", ").concat(u[0],", ").concat(u[1],", row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],l=qU(e,n.slice(1)),u=["b","row","col"];return"\n        ".concat(jU(l,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(XU(u,s),");\n        }\n      ")}var c=AU();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ");var d=o[0],h=o[1],f=Math.ceil(n[2]/2),p=f*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(d,", ").concat(h,", ").concat(p,", ").concat(f,", b, row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=AU();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=l[0],c=l[1],d=Math.ceil(i[o-1]/2),h=d*Math.ceil(i[o-2]/2),f="int b, int row, int col",p="b * ".concat(h," + (row / 2) * ").concat(d," + (col / 2)"),m=2;m<o-1;m++)f="int b".concat(m,", ")+f,h*=i[o-m-1],p="b".concat(m," * ").concat(h," + ")+p;return"\n    vec4 ".concat(r,"(").concat(f,") {\n      int index = ").concat(p,";\n      int texR = index / ").concat(c,";\n      int texC = index - texR * ").concat(c,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(c,", ").concat(u,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var zU="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",BU="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",UU="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",WU="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function VU(e){return"offset".concat(e)}function ZU(e){var t=e.name,n=Sd(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function HU(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function GU(e,t,n){var r=Nd(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],l=s?t.slice(1):a,u=!e&&o>1&&!Td(t,n)&&a.length<o||s;return{useSqueezeShape:u,uniformShape:u?l:t,keptDims:i}}function qU(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function XU(e,t){return t.map((function(t){return e[t]})).join(", ")}function YU(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!Td(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!Td(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function KU(e){return th().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var $U=(0,A.Z)((function e(t){M(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=qB.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=AU();this.outputShape=t,this.enableShapeUniforms=KU(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?NU(["r","c","d"],t):IU(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),JU=(0,A.Z)((function e(t){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=qB.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=AU();this.outputShape=t,this.enableShapeUniforms=KU(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?NU(["r","c","d"],t):IU(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),QU=(0,A.Z)((function e(t){M(this,e),this.variableNames=["A"],this.outTexUsage=XB.DOWNLOAD;var n=AU();this.outputShape=t,this.userCode="\n      ".concat(DU,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),eW=(0,A.Z)((function e(t){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=XB.DOWNLOAD;var n=AU();this.outputShape=t,this.userCode="\n      ".concat(DU,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),tW=(0,A.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];M(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=AU();this.outputShape=t,this.enableShapeUniforms=KU(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":OU(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),nW=(0,A.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];M(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=AU();this.outputShape=t,this.enableShapeUniforms=KU(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var l=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(l,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(l,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(l,"] = values[2];\n            } else {\n              result[").concat(l,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":OU(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")}));function rW(e){var t=AU();return function(e,t){var n=vU(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(rU(e,(function(){return e.shaderSource(n,t)})),rU(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function aW(e){return function(e,t){var n=vU(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return rU(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),rU(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function iW(e){return function(e,t){var n=vU(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return rU(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),rU(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function oW(e,t,n,r,a,i){!function(e,t){var n=th().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);var o=function(e){return vU(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return rU(e,(function(){return e.bindTexture(s,o)})),rU(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),rU(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),rU(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),rU(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===th().getNumber("WEBGL_VERSION")?rU(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):rU(e,(function(){return e.texStorage2D(s,1,r,t,n)})),rU(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function sW(e){return e.internalFormatFloat}function lW(e){return e.internalFormatHalfFloat}function uW(e){return e.downloadTextureFormat}function cW(e){return e.internalFormatPackedFloat}function dW(e){return e.internalFormatPackedHalfFloat}function hW(e,t,n,r,a,i,o,s){var l=e,u=new Float32Array(function(e,t){var n=tU(e,t),r=(0,U.Z)(n,2);return r[0]*r[1]*4}(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}var fW=function(){function e(t){M(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=th().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){KB[e]=t}(n,t)):this.gl=JB(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(1===th().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=iU(this.gl,"OES_texture_float"),SU(this.gl,i))this.textureHalfFloatExtension=iU(this.gl,i);else if(th().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),SU(this.gl,a))this.colorBufferHalfFloatExtension=iU(this.gl,a);else if(th().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",SU(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!SU(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=aW(this.gl),this.indexBuffer=iW(this.gl),this.framebuffer=function(e){return vU(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=nU(this.gl,this.textureHalfFloatExtension)}return(0,A.Z)(e,[{key:"debug",get:function(){return th().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;rU(t,(function(){return t.finish()})),rU(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),rU(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),rU(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),rU(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),rU(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=QB(t,n),i=(0,U.Z)(a,2);return oW(e,i[0],i[1],sW(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=QB(t,n),i=(0,U.Z)(a,2);return oW(e,i[0],i[1],lW(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=QB(t,n),i=(0,U.Z)(a,2);return oW(e,i[0],i[1],uW(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){rU(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===th().getNumber("WEBGL_VERSION")?rU(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):rU(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===th().getNumber("WEBGL_VERSION")?rU(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):rU(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),rU(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,s,l;rU(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,l=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,l=i.internalFormatPackedFloat),o.set(a),2===th().getNumber("WEBGL_VERSION")?rU(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):rU(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,s,o)})),rU(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=tU(t,n),i=(0,U.Z)(a,2);return oW(e,i[0],i[1],dW(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=tU(t,n),i=(0,U.Z)(a,2);return oW(e,i[0],i[1],cW(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(pU(this.gl,this.framebuffer),this.outputTexture=null),rU(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=QB(t,n),i=(0,U.Z)(a,2),o=i[0],s=i[1],l=new Uint8Array(t*n*4);return rU(e,(function(){return e.readPixels(0,0,o,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,l)})),new Float32Array(l.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return hW(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();rU(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return rU(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),rU(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),rU(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(th().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else th().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,th().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return rU(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=rW(n));var r=function(e){return vU(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return rU(n,(function(){return n.attachShader(r,t.vertexShader)})),rU(n,(function(){return n.attachShader(r,e)})),function(e,t){if(rU(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,r),this.debug&&cU(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return rU(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),dU(e,t,"clipSpacePos",n,3,20,0)&&dU(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&rU(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&cU(this.gl,this.program),rU(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return vU(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),rU(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),hU(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=tU(t,n),a=(0,U.Z)(r,2),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,i,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&cU(this.gl,this.program),mU(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),rU(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),rU(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=iU(this.gl,2===th().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===th().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==th().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=Vn(Un().mark((function e(t){var n=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Md((function(){return n.disposed||n.isQueryAvailable(t,th().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,th().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||Md((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),fU(this.gl,e,this.framebuffer),this.debug&&mU(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(fU(this.gl,this.outputTexture,this.framebuffer),this.debug&&mU(this.gl)):pU(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;fU(r,e,this.framebuffer),this.debug&&mU(r),this.outputTexture=e,rU(r,(function(){return r.viewport(0,0,t,n)})),rU(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),rU(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var pW=CL,mW=yP,vW=bP,gW=kP,yW=MP,bW=cF,xW=mF,wW=xF,kW=FF,SW=HF,TW=qF,EW=YF,CW=JF,_W=lj,MW=dj,AW=pj,IW=vj,NW=Nj,RW=Dj,OW=Zj,DW=nF,LW=ez,PW=lz,FW=wz,jW=Sz,zW=Lz,BW=fL,UW=LL,WW=pP,VW=Qz,ZW=tB,HW=rB,GW=lB,qW=gB,XW=xB,YW=SB,KW=EB,$W=CF,JW=IB,QW=DB,eV=WL,tV=UB;function nV(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function rV(e,t){return 1===t?[e]:nV(e,t)}var aV=function(){function e(t){if(M(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=KU(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=rV("rc",this.rank),r=HU(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return(0,A.Z)(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),iV=(0,A.Z)((function e(t,n){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=KU(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?RU(["r","c","d"],"inputShape"):IU(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":OU(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var oV=function(){function e(t){M(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return(0,A.Z)(e,[{key:"acquireTexture",value:function(e,t,n){var r=lV(t,n),a=uV(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=sV(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===YB.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===YB.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===YB.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===YB.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===YB.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=lV(n,r),i=uV(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=sV(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=th().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var l=this.usedTextures[i],u=l.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(u,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function sV(e,t,n,r,a){var i,o=function(e,t){switch(e){case YB.PACKED_2X2_FLOAT32:return cW(t);case YB.PACKED_2X2_FLOAT16:return dW(t);case YB.UNPACKED_FLOAT32:return sW(t);case YB.UNPACKED_FLOAT16:return lW(t);case YB.PACKED_4X1_UNSIGNED_BYTE:return uW(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=tU(e[0],e[1]),l=(0,U.Z)(s,2);i=l[0]*l[1]}else{var u=QB(e[0],e[1]),c=(0,U.Z)(u,2);i=c[0]*c[1]}var d=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*d}function lV(e,t){if(e===XB.UPLOAD)return YB.PACKED_2X2_FLOAT32;if(e===XB.RENDER||null==e)return function(e){return th().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?YB.PACKED_2X2_FLOAT32:YB.UNPACKED_FLOAT32:e?YB.PACKED_2X2_FLOAT16:YB.UNPACKED_FLOAT16}(t);if(e===XB.DOWNLOAD||e===XB.PIXELS)return YB.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function uV(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var cV=(0,A.Z)((function e(t,n){M(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=KU(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),dV="if (isnan(x)) return x;",hV="return x;",fV="return abs(x);";var pV="return (x >= 0.0) ? x : (exp(x) - 1.0);",mV=dV+"\n  return (x < 0.0) ? 0.0 : x;\n",vV=dV+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",gV="return x;",yV="return 1.0 / (1.0 + exp(-1.0 * x));",bV="return x;",xV="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",wV="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",kV="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",SV="return 1.0 / (1.0 + exp(-1.0 * x));",TV=(0,A.Z)((function e(t,n){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=KU(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),EV=(0,A.Z)((function e(t){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=KU(this.outputShape.length);var n=t.length,r=rV("rc",n),a=HU(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),CV=wk,_V={};var MV=th().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var AV=function(e){N(n,e);var t=F(n);function n(e){var r,a,i;if(M(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!th().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof fW)a=e;else{var o=JB(th().getNumber("WEBGL_VERSION"),e);a=new fW(o)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=JB(th().getNumber("WEBGL_VERSION"));a=new fW(s),r.binaryCache=((i=th().getNumber("WEBGL_VERSION"))in _V||(_V[i]={}),_V[i]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new oV(r.gpgpu),r.numMBBeforeWarning=null==th().global.screen?1024:th().global.screen.height*th().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new dd((0,L.Z)(r),Cy()),r}return(0,A.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((th().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||th().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:XB.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(th().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:XB.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var l;l=s?new TV(o,gV):new cV(o,gV);var u=this.runWebGLProgram(l,[{dataId:e,shape:o,dtype:r}],r),c=this.readSync(u.dataId);return this.disposeIntermediateTensorInfo(u),c}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,h,f=null!=this.activeTimers;(f&&(d=Dm()),"complex64"===r)?h=NT(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):h=this.getValuesFromTexture(e);return f&&(this.downloadWaitMs+=Dm()-d),this.convertAndCacheOnCPU(e,h)}},{key:"read",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a,i,o,s,l,u,c,d,h,f,p,m,v,g,y,b,x,w,k,S,T;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,l=r.complexTensorInfos,u=r.isPacked,null==o){e.next=11;break}return c=u?new TV(i,gV):new cV(i,gV),d=this.runWebGLProgram(c,[{dataId:t,shape:i,dtype:s}],s),h=this.read(d.dataId),this.disposeIntermediateTensorInfo(d),e.abrupt("return",h);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!th().getBool("DEBUG")){e.next=16;break}if(th().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==th().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(f=null,"complex64"!==s&&th().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),v=this.texData.get(p.dataId),f=(m=this.gpgpu).createBufferFromTexture.apply(m,[v.texture.texture].concat((0,_.Z)(eU(i))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(l.real.dataId),this.read(l.imag.dataId)]);case 25:y=e.sent,b=y[0],x=y[1],g=NT(b,x),e.next=32;break;case 31:null==f?g=this.getValuesFromTexture(t):(w=Sd(i),g=this.gpgpu.downloadFloat32MatrixFromBuffer(f,w));case 32:return null!=p&&this.disposeIntermediateTensorInfo(p),null!=f&&rU(k=this.gpgpu.gl,(function(){return k.deleteBuffer(f)})),S=this.convertAndCacheOnCPU(t,g),T=this.pendingRead.get(t),this.pendingRead.delete(t),T.forEach((function(e){return e(S)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Cy().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",S);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,l=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var u;u=s?new TV(a,gV):new cV(a,gV);var c=this.runWebGLProgram(u,[{dataId:e,shape:a,dtype:o}],o),d=this.readToGPU(c,t);return this.disposeIntermediateTensorInfo(c),d}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var h=this.decode(e,t.customTexShape),f=Cy().makeTensorFromDataId(h.dataId,h.shape,h.dtype),p=this.texData.get(h.dataId);return Object.assign({tensorRef:f},p.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return Pm(e)}))}catch(a4){throw new Error("Failed to decode encoded string bytes into utf-8")}return Fg(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!aU(n)){if(th().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=Sd(n);if(th().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),l=this.texData.get(s.dataId),u=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[l.texture.texture].concat((0,_.Z)(eU(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),u}var c=th().getBool("WEBGL_PACK")&&!0===a,d=c?xU(n):n,h=c?new eW(d):new QU(d),f=this.runWebGLProgram(h,[{shape:d,dtype:r,dataId:e}],"float32"),p=this.texData.get(f.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture.texture,p.texShape[0],p.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(f),m}},{key:"timerAvailable",value:function(){return th().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=kd(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=kd(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return Vn(Un().mark((function e(){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(th().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=yd(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return th().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Dm(),endMs:null}}},{key:"endTimer",value:function(e){return th().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Dm(),e)}},{key:"getQueryTime",value:function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(th().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e).complexTensorInfos;return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,l=s&&s.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:MV;return th().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&Sd(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){um("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return CV(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new TV(e.shape,t),a=this.compileAndRun(r,[e],n);return Cy().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=UW(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(th().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,fV,e.dtype);var n=new cV(e.shape,fV),r=this.compileAndRun(n,[e]);return Cy().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Fd(n[0])){var a=n.map((function(e){return Lm(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return Cy().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new EV(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new aV(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[yU(e.shape)].concat((0,_.Z)(bU(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[yU(t)].concat((0,_.Z)(bU(t))),i=new iV(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;null!=t&&bd(Sd(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var o,s=xU(a);o=r?new JU(s):new $U(s);var l=[null!=t?t:eU(s)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,l,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),l=this.texData.get(s.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===qB.DENSE){var u=null!=o?o:eU(e.outputShape);l.texShape=u.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(l.usage=e.outTexUsage),0===Sd(s.shape))return l.values=Rd(s.dtype,0),s;var c=[],d=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Sd(t.shape)<=th().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),c.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!kU(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),c.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var h,f={shape:s.shape,texData:l,isUniform:!1},p=function(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=GU(e.packedInputs,t.shape,i),s=o.useSqueezeShape,l=o.uniformShape,u=o.keptDims,c="",d="",h="";if(1===l.length&&e.packedInputs){var f=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];c="".concat(f[0]>1,"_").concat(f[1]>1)}else if(2!==l.length||e.packedInputs){if(l.length>2&&!e.packedInputs){var p=Wd(l);h="".concat(p[0]===i[1],"_").concat(p[p.length-1]===i[1])}}else d="".concat(l[0]>1,"_").concat(l[1]>1);var m=t.shape.length,v=2===l.length&&Td(t.shape,i),g=1===Sd(t.shape),y=ly(t.shape,n.shape),b=!e.packedInputs&&m===n.shape.length&&Td(i,n.texData.texShape),x=e.packedInputs||l.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(m,"_").concat(b,"_").concat(s?u:"","_").concat(l.length,"_").concat(g,"_").concat(y,"_").concat(v,"_").concat(c,"_").concat(d,"_").concat(h,"_").concat(x,"_").concat(a)}else{var w=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(w,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+"_"+r+"_"+a+"".concat(th().getNumber("WEBGL_VERSION"))}(e,d,f),m=this.getAndSaveBinary(p,(function(){return function(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=PU(a,o,t),l=oU(e.gl,s),u=e.createProgram(l),c=null,d=e.getUniformLocation(u,"NAN",!1);1===th().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(u,"INFINITY",!1));for(var h,f,p,m=!1,v={},g={},y={},b=0;b<t.variableNames.length;b++){var x=t.variableNames[b];v[x]=e.getUniformLocation(u,x,m),v["offset".concat(x)]=e.getUniformLocation(u,"offset".concat(x),m),t.enableShapeUniforms&&(g["".concat(x,"Shape")]=e.getUniformLocation(u,"".concat(x,"Shape"),m),y["".concat(x,"TexShape")]=e.getUniformLocation(u,"".concat(x,"TexShape"),m))}t.enableShapeUniforms&&(h=e.getUniformLocation(u,"outShape",m),p=e.getUniformLocation(u,"outShapeStrides",m),f=e.getUniformLocation(u,"outTexShape",m));var w=[];return t.customUniforms&&t.customUniforms.forEach((function(t,n){w[n]=e.getUniformLocation(u,t.name,m)})),{program:t,fragmentShader:l,source:s,webGLProgram:u,uniformLocations:v,customUniformLocations:w,inShapeInfos:i,outShapeInfo:o,infLoc:c,nanLoc:d,inShapesLocations:g,inTexShapesLocations:y,outShapeLocation:h,outShapeStridesLocation:p,outTexShapeLocation:f}}(a.gpgpu,e,d,f)})),v=null!=this.activeTimers;v&&(h=this.startTimer()),function(e,t,n,r,a){t.program.enableShapeUniforms||(YU(t.inShapeInfos,n),YU([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===th().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],l=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var u=GU(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(u.length){case 1:e.gl.uniform1iv(s,new Int32Array(u));break;case 2:e.gl.uniform2iv(s,new Int32Array(u));break;case 3:e.gl.uniform3iv(s,new Int32Array(u));break;case 4:e.gl.uniform4iv(s,new Int32Array(u))}}if(l&&e.gl.uniform2i(l,n.texData.texShape[0],n.texData.texShape[1]),null!=i)if(n.isUniform)if(Sd(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var c=n.uniformValues;c instanceof Float32Array||(c=new Float32Array(c)),e.gl.uniform1fv(i,c)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var l=Wd(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var i=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(i,o)}})),e.executeProgram()}(this.gpgpu,m,d,f,r),c.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),v&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)}));var g=th().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var y=Dm();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!th().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!th().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=My((function(){if(!th().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=th().getBool("DEBUG");th().set("DEBUG",!1);var n=e.abs(Oy(1e-8)).dataSync()[0];if(th().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var l,u=null!=this.activeTimers;u&&(l=Dm());var c=t.texShape;if(null==c&&(c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=th().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,e=e.map((function(t,n){return n>=e.length-2?vd(e[n]):e[n]})),1===e.length&&(e=[2,e[0]])),2!==e.length){var r=Nd(e);e=r.newShape}var a=Sd(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var i=yU(e),o=2,s=2;if(e.length){var l=bU(e),u=(0,U.Z)(l,2);o=u[0],s=u[1]}return Cd(a=i*(o/2)*(s/2)).map((function(e){return 2*e}))}return Cd(a)}(n,s),t.texShape=c),null!=a){var d,h=xU(n),f=c[1],p=c[0],m=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(s||!m){var v=tU(c[0],c[1]),g=(0,U.Z)(v,2);f=g[0],p=g[1]}d=s?new nW(h,m):new tW(h,m);var y=m?[p,f]:c,b=this.makeTensorInfo(y,r),x=this.texData.get(b.dataId);x.usage=m?XB.PIXELS:XB.UPLOAD,x.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),f,p,a);var w=[[p,f]],k=this.runWebGLProgram(d,[b],r,w,!0),S=this.texData.get(k.dataId);t.texture=S.texture,t.texShape=S.texShape,t.isPacked=S.isPacked,t.usage=S.usage,this.disposeIntermediateTensorInfo(b),this.texData.delete(k.dataId),t.values=null,u&&(this.uploadWaitMs+=Dm()-l)}else{var T=this.acquireTexture(c,o,r,s);t.texture=T}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*Pd(t)}}]),n}(hd);AV.nextDataId=0;bv()&&Ny("webgl",(function(){return new AV}),2);var IV="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",NV=(0,A.Z)((function e(t,n,r){M(this,e),this.variableNames=["A","B"],this.outputShape=cy(n,r),this.enableShapeUniforms=KU(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),RV="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n",OV=(0,A.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];M(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=cy(n,r);var i=this.outputShape.length;this.enableShapeUniforms=KU(i);var o="";if(a)if(0===i||1===Sd(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=HU(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var l=rV("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(l[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(l[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(l[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(l[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function DV(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var LV={kernelName:bf,backendName:"webgl",kernelFunc:DV};function PV(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=DV({inputs:{x:r},backend:n}),l=DV({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:l},i}var FV={kernelName:Nh,backendName:"webgl",kernelFunc:PV},jV="return (a < 0.) ? b * a : a;",zV="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var BV={kernelName:Ef,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",Rm(i,"float32")),s=th().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new OV(zV,a.shape,o.shape):new NV(jV,a.shape,o.shape),l=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),l}},UV="return (a < 0.) ? b * a : a;",WV="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var VV={kernelName:op,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=th().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new OV(WV,r.shape,a.shape):new NV(UV,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}},ZV="if (isnan(x)) return x;";function HV(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,l=o.x,u=s,c=a||l.dtype;if(u.shouldExecuteOnCPU([l])&&null!=r){var d=u.texData.get(l.dataId),h=r(d.values,c);return u.makeTensorInfo(l.shape,c,h)}return i=th().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new TV(l.shape,n):new cV(l.shape,t),u.runWebGLProgram(i,[l],c)}}function GV(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,l=e.dtype;return function(e){var r=e.inputs,i=e.backend,u=r.a,c=r.b,d=i;if(o&&"complex64"===u.dtype){var h=d.texData.get(u.dataId),f=d.texData.get(c.dataId),p=[[h.complexTensorInfos.real,f.complexTensorInfos.real],[h.complexTensorInfos.imag,f.complexTensorInfos.imag]].map((function(e){var n=(0,U.Z)(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:u.shape},o={dataId:a.dataId,dtype:a.dtype,shape:c.shape},s=new NV(t,u.shape,c.shape);return d.runWebGLProgram(s,[i,o],iv(r.dtype,a.dtype))})),m=(0,U.Z)(p,2),v=m[0],g=m[1],y=PV({inputs:{real:v,imag:g},backend:d});return d.disposeIntermediateTensorInfo(v),d.disposeIntermediateTensorInfo(g),y}var b,x=l||iv(u.dtype,c.dtype);if(("string"===u.dtype||"string"===c.dtype||d.shouldExecuteOnCPU([u,c]))&&null!=s){var w=d.texData.get(u.dataId).values,k=d.texData.get(c.dataId).values,S="string"===u.dtype?JT(w):w,T="string"===u.dtype?JT(k):k,E=s(u.shape,c.shape,S,T,x),C=(0,U.Z)(E,2),_=C[0],M=C[1],A=d.makeTensorInfo(M,x);return d.texData.get(A.dataId).values=_,A}return b=th().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new OV(n,u.shape,c.shape,a):new NV(t,u.shape,c.shape),d.runWebGLProgram(b,[u,c],x)}}function qV(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?bV:hV;if("relu"===e)return t?wV:mV;if("elu"===e)return t?xV:pV;if("relu6"===e)return t?kV:vV;if("prelu"===e)return t?WV:UV;if("leakyrelu"===e)return t?zV:jV;if("sigmoid"===e)return t?SV:yV;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var XV=(0,A.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8];M(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=KU(this.outputShape.length);var c=a?t[1]:t[2],d=Math.ceil(c/2),h=a?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",p=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],v="",g="";s&&(v=l?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):u?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(v,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(d,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(f,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(m[0],");\n          result += (").concat(p[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")})),YV={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},KV=(0,A.Z)((function e(t,n,r){M(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=cy(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),$V="return a * b;";function JV(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=iv(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),l=r.texData.get(i.dataId),u=new KV(YV.REAL,a.shape,i.shape),c=new KV(YV.IMAG,a.shape,i.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],h=r.runWebGLProgram(u,d,"float32"),f=r.runWebGLProgram(c,d,"float32"),p=PV({inputs:{real:h,imag:f},backend:r});return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(f),p}if(r.shouldExecuteOnCPU([a,i])){var m=r.texData.get(a.dataId),v=r.texData.get(i.dataId),g=DW(a.shape,i.shape,m.values,v.values,o),y=(0,U.Z)(g,2),b=y[0],x=y[1],w=r.makeTensorInfo(x,o);return r.texData.get(w.dataId).values=b,w}return t=th().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new OV($V,a.shape,i.shape):new NV($V,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var QV={kernelName:Yf,backendName:"webgl",kernelFunc:JV};function eZ(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=Sd(a.shape),l=Ad(i,s),u=Sd(l);bd(s===u,(function(){return"The new shape (".concat(l,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var c=o.texData.get(a.dataId);return!c.isPacked||kU(a.shape,l)||null!==c.texture&&kU(c.shape,l)?(o.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype}):function(e,t,n){var r=[yU(e.shape)].concat((0,_.Z)(bU(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[yU(t)].concat((0,_.Z)(bU(t))),o=new iV(i,r),s=[r],l=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(a,l,o)}var tZ={kernelName:hp,backendName:"webgl",kernelFunc:eZ},nZ=(0,A.Z)((function e(t,n){M(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),l=r%4,u="sumValue += dot(values, ones);";if(null!=n){var c=1/n;u="sumValue += dot(values * ".concat(Ed(c)?c.toPrecision(2):c,", ones);")}var d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(u,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(u,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(u,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(u,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),rZ=(0,A.Z)((function e(t,n){M(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",l="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",l="min"):"max"===n&&(s="-1.0 / 1e-20",l="max");var u="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?u="sumValue":"prod"===n?u="prodValue":"all"===n?u="allValue":"any"===n&&(u="anyValue");var c=4*Math.floor(r/4),d=r%4,h="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(l,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(l,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),f="vec4";"all"===n?(s="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===n&&(s="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===d,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===d,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===d,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(u,");\n      }\n    ")}));function aZ(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=mT(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,l=a[o],u=l.inSize,c=l.windowSize,d=l.outSize,h=void 0;h="mean"===n?0===o?new nZ({windowSize:c,inSize:u,batchSize:e.shape[0],outSize:d},u):new nZ({windowSize:c,inSize:u,batchSize:e.shape[0],outSize:d}):new rZ({windowSize:c,inSize:u,batchSize:e.shape[0],outSize:d},n),s=i,i=r.runWebGLProgram(h,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var iZ=(0,A.Z)((function e(t,n){M(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=HU(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var oZ=(0,A.Z)((function e(t,n){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=HU(this.rank),o=nV("rc",this.rank),s=new Array(this.rank),l=0;l<n.length;l++)s[n[l]]=o[l];var u="vec2(".concat(s.slice(-2).join(),")"),c="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(u,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(c,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(c,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function sZ(e,t,n){var r=th().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oZ(e.shape,t):new iZ(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function lZ(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=Id(a,e.shape),s=o,l=Px(s,i),u=null!=l,c=e;u&&(c=sZ(e,l,r),s=jx(s.length,i)),Lx("sum",s,i);var d=Ox(c.shape,s),h=(0,U.Z)(d,2),f=h[0],p=h[1],m=f;n&&(m=Dx(f,o));var v=Sd(p),g=eZ({inputs:{x:c},attrs:{shape:[Sd(e.shape)/v,v]},backend:r}),y=aZ(g,ov(e.dtype),"sum",r),b=eZ({inputs:{x:y},attrs:{shape:m},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(y),u&&r.disposeIntermediateTensorInfo(c),b}(t.x,r.axis,r.keepDims,n)}var uZ={kernelName:Np,backendName:"webgl",kernelFunc:lZ};function cZ(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,l=i.shape.length,u=new Array(l),c=0;c<u.length;c++)u[c]=i.shape[o[c]];if(s.shouldExecuteOnCPU([i])){var d=s.texData.get(i.dataId).values,h=eV(d,i.shape,i.dtype,o,u);t=s.makeTensorInfo(u,i.dtype),s.texData.get(t.dataId).values=h}else t=sZ(i,o,s);return t}var dZ={kernelName:Jp,backendName:"webgl",kernelFunc:cZ},hZ=1e3;function fZ(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,l=e.preluActivationWeights,u=void 0===l?null:l,c=e.leakyreluAlpha,d=void 0===c?0:c,h=e.activation,f=void 0===h?null:h,p=t.shape.length,m=n.shape.length,v=r?t.shape[p-2]:t.shape[p-1],g=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[p-1]:t.shape[p-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),w=n.shape.slice(0,-2),k=Sd(x),S=Sd(w),T=cy(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);bd(v===g,(function(){return"Error in matMul: inner shapes (".concat(v,") and (")+"".concat(g,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var E,C=r?[k,v,y]:[k,y,v],_=a?[S,b,g]:[S,g,b],M=eZ({inputs:{x:t},backend:i,attrs:{shape:C}}),A=eZ({inputs:{x:n},backend:i,attrs:{shape:_}}),I=[M,A],N=Math.max(k,S),R=r?M.shape[1]:M.shape[2],O=null!=s,D=null!=u,L="leakyrelu"===f,P=null!=f?qV(f,!0):null;if((1===y||1===b)&&R>hZ&&!1===(O||D||L||null!=P)){var F=M,j=A;r&&(F=cZ({inputs:{x:M},backend:i,attrs:{perm:[0,2,1]}}),I.push(F)),a&&(j=cZ({inputs:{x:A},backend:i,attrs:{perm:[0,2,1]}}),I.push(j));var z=1===b,B=F;1!==b&&(B=eZ({inputs:{x:F},backend:i,attrs:{shape:[N,R,1]}}),I.push(B));var U=1===b?2:1,W=j;z&&(W=eZ({inputs:{x:j},backend:i,attrs:{shape:[N,1,R]}}),I.push(W));var V=JV({inputs:{a:B,b:W},backend:i});E=lZ({inputs:{x:V},backend:i,attrs:{axis:U,keepDims:!0}}),I.push(V)}else{var Z=iv(t.dtype,n.dtype),H=new XV(C,_,[N,y,b],r,a,O,P,D,L),G=[M,A];if(null!=s&&G.push(s),D&&G.push(u),L){var q=i.makeTensorInfo([],"float32",Rm(d,"float32"));G.push(q),I.push(q)}E=i.runWebGLProgram(H,G,Z)}var X=eZ({inputs:{x:E},backend:i,attrs:{shape:T}});I.push(E);for(var Y=0,K=I;Y<K.length;Y++){var $=K[Y];i.disposeIntermediateTensorInfo($)}return X}var pZ={kernelName:om,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,l=r.transposeA,u=r.transposeB,c=r.activation;return fZ({a:a,b:i,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:c})}},mZ="return abs(x);";var vZ={kernelName:oh,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=UW(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=th().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new TV(a.shape,mZ):new cV(a.shape,mZ),r.runWebGLProgram(t,[a],a.dtype)}},gZ=HV({opSnippet:dV+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),yZ={kernelName:sh,backendName:"webgl",kernelFunc:gZ},bZ=HV({opSnippet:dV+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),xZ={kernelName:lh,backendName:"webgl",kernelFunc:bZ},wZ="return a + b;",kZ=GV({opSnippet:wZ,packedOpSnippet:wZ,supportsComplex:!0,cpuKernelImpl:pW}),SZ={kernelName:uh,backendName:"webgl",kernelFunc:kZ},TZ=(0,A.Z)((function e(t,n){M(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),EZ=(0,A.Z)((function e(t,n){M(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var CZ={kernelName:ch,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return DV({inputs:{x:a[0]},backend:r});if(a.length>th().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var l=a.map((function(e){return e.dtype})).reduce((function(e,t){return iv(e,t)})),u=a.map((function(e){return e.shape})),c=th().getBool("WEBGL_PACK")?new EZ(a[0].shape,u):new TZ(a[0].shape,u);return r.runWebGLProgram(c,a,l)}};var _Z={kernelName:dh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,l=Id(i,a.shape),u=l,c=Px(u,s),d=a;null!=c&&(d=cZ({inputs:{x:a},backend:n,attrs:{perm:c}}),u=jx(u.length,s)),Lx("all",u,s);var h,f=Ox(d.shape,u),p=(0,U.Z)(f,2),m=p[0],v=eZ({inputs:{x:d},backend:n,attrs:{shape:[-1,Sd(p[1])]}}),g=aZ(v,v.dtype,"all",n);return h=eZ(o?{inputs:{x:g},backend:n,attrs:{shape:Dx(m,l)}}:{inputs:{x:g},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(d),h}};var MZ={kernelName:hh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,l=Id(i,a.shape),u=l,c=Px(u,s),d=a;null!=c&&(d=cZ({inputs:{x:a},backend:n,attrs:{perm:c}}),u=jx(u.length,s)),Lx("any",u,s);var h,f=Ox(d.shape,u),p=(0,U.Z)(f,2),m=p[0],v=eZ({inputs:{x:d},backend:n,attrs:{shape:[-1,Sd(p[1])]}}),g=aZ(v,v.dtype,"any",n);return h=eZ(o?{inputs:{x:g},backend:n,attrs:{shape:Dx(m,l)}}:{inputs:{x:g},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(d),h}},AZ=(0,A.Z)((function e(t,n,r){M(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(l,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),IZ=(0,A.Z)((function e(t,n,r,a){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,bd(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,l,u=this.outputShape,c=u.length,d=HU(c),h=rV("coords",c);if(1===o){var f=HU(l=c+1);s="\n        ".concat(f," sourceLocR = ").concat(f,"(").concat(h.join(),", 0);\n        ++").concat(h[c-1],";\n        ").concat(f," sourceLocG = ").concat(f,"(").concat(h.join(),", 0);\n        ++").concat(h[c-2],";\n        ").concat(f," sourceLocA = ").concat(f,"(").concat(h.join(),", 0);\n        --").concat(h[c-1],";\n        ").concat(f," sourceLocB = ").concat(f,"(").concat(h.join(),", 0);\n        --").concat(h[c-2],";")}else l=c,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(h[c-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(h[c-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(h[c-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(h[c-2],";");var p=["x","y","z","w","u","v"].slice(0,l),m="."+p[l-1],v=p.map((function(e){return"int "+e})),g=rV("sourceLocR",l-1).concat("inIdx.r"),y=rV("sourceLocG",l-1).concat("inIdx.g"),b=rV("sourceLocB",l-1).concat("inIdx.b"),x=rV("sourceLocA",l-1).concat("inIdx.a"),w="max"===r?"greaterThan":"lessThan",k=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),S="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),T=a?"":"\n      float getBestIndicesAChannel(".concat(v.join(),") {\n        return getChannel(getBestIndicesA(").concat(p.join(),"),\n                                          vec2(").concat(p.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(v.join(),") {\n        return getChannel(getA(").concat(p.join(),"),\n                               vec2(").concat(p.slice(-2).join(),"));\n      }\n      ").concat(T,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(h[c-1]," < ").concat(u[c-1]-1,";\n        bool hasNextRow = ").concat(h[c-2]," < ").concat(u[c-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(S,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(k,"\n          vec4 candidate = ").concat(S,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(w,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function NZ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=mT(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},l=new AZ(s,n,null==r),u=[t];null!=r&&u.push(r);var c=e.runWebGLProgram(l,u,"int32");if(1===c.shape[1])return c;var d=NZ(e,t,n,c);return e.disposeIntermediateTensorInfo(c),d}function RZ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=mT(a[a.length-1]),o=new IZ(a,i,n,null==r),s=null==r?[t]:[t,r],l=e.runWebGLProgram(o,s,"int32");if(l.shape.length===t.shape.length){var u=RZ(e,t,n,l);return e.disposeIntermediateTensorInfo(l),u}return l}function OZ(e,t,n,r){var a=[n];if(Lx("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!th().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var l=Ox(s.shape,a),u=(0,U.Z)(l,2),c=u[0],d=Sd(u[1]),h=eZ({inputs:{x:s},backend:e,attrs:{shape:[-1,d]}});i.push(h);var f=NZ(e,h,r);i.push(f);var p=eZ({inputs:{x:f},backend:e,attrs:{shape:c}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),p}return RZ(e,t,r)}var DZ={kernelName:fh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=Id(r.axis,a.shape),o=Px(i,a.shape.length),s=a,l=[];null!=o&&(s=cZ({inputs:{x:a},backend:n,attrs:{perm:o}}),l.push(s),i=jx(i.length,s.shape.length)),Lx("argMax",[i[0]],s.shape.length);var u=OZ(n,s,i[0],"max");return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}};var LZ={kernelName:ph,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=Id(r.axis,a.shape),o=Px(i,a.shape.length),s=a,l=[];null!=o&&(s=cZ({inputs:{x:a},backend:n,attrs:{perm:o}}),l.push(s),i=jx(i.length,s.shape.length)),Lx("argMin",[i[0]],s.shape.length);var u=OZ(n,s,i[0],"min");return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}},PZ=HV({opSnippet:dV+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),FZ={kernelName:mh,backendName:"webgl",kernelFunc:PZ},jZ=HV({opSnippet:dV+"return log(x + sqrt(x * x + 1.0));"}),zZ={kernelName:vh,backendName:"webgl",kernelFunc:jZ},BZ=HV({opSnippet:dV+"\n  return atan(x);\n"}),UZ={kernelName:gh,backendName:"webgl",kernelFunc:BZ},WZ=GV({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),VZ={kernelName:bh,backendName:"webgl",kernelFunc:WZ},ZZ=HV({opSnippet:dV+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),HZ={kernelName:yh,backendName:"webgl",kernelFunc:ZZ},GZ=(0,A.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(M(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,l=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,d=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,v="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(m||(y="-1.0 / 1e-20"),r){this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(l,");\n        const ivec2 pads = ivec2(").concat(f,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(">="," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?v:g:"wR * ".concat(h," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var b="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(b="avgValue / count");var x=4*Math.floor(o/4),w=o%4,k="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(u,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(x,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat(k,"\n          }\n\n          int xC = xCCorner + ").concat(x,";\n          if (").concat(1===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(k,"\n          } else if (").concat(2===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(k,"\n          } else if (").concat(3===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat(k,"\n          }\n        }\n        setOutput(").concat(b,");\n      }\n    ")}})),qZ=(0,A.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(M(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,l=t.strideHeight,u=t.strideWidth,c=t.dilationDepth,d=t.dilationHeight,h=t.dilationWidth,f=t.effectiveFilterDepth,p=t.effectiveFilterHeight,m=t.effectiveFilterWidth,v=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(l,", ").concat(u,");\n        const ivec3 pads = ivec3(").concat(v,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(f,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(h,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(">="," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(p," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(w="avgValue / count");var k=4*Math.floor(o/4),S=o%4,T="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(l,", ").concat(u,");\n      const ivec3 pads = ivec3(").concat(v,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(k,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(h,", ch)\n              );\n\n              ").concat(T,"\n            }\n\n            int xC = xCCorner + ").concat(k,";\n            if (").concat(1===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(T,"\n            } else if (").concat(2===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(T,"\n            } else if (").concat(3===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                initializationValue\n              );\n\n              ").concat(T,"\n            }\n          }\n          setOutput(").concat(w,");\n        }\n      }\n    ")}}));var XZ={kernelName:xh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;_U(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,l=r.dimRoundingMode;bd(ob(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var u=Ky(a.shape,i,o,1,s,l);if(1===u.filterWidth&&1===u.filterHeight&&Td(u.inShape,u.outShape))return DV({inputs:{x:a},backend:n});var c=new GZ(u,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}};var YZ={kernelName:kh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,l=r.dimRoundingMode,u=r.dataFormat,c=$y(a.shape,i,o,[1,1,1],s,l,u),d=new qZ(c,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}},KZ=(0,A.Z)((function e(t){M(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,l=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=l-1-t.padInfo.top,d=u-1-t.padInfo.left,h=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(c,", ").concat(d,");\n      const float avgMultiplier = float(").concat(h,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(l,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(u,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),$Z=(0,A.Z)((function e(t){M(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,d=t.effectiveFilterDepth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=d-1-t.padInfo.front,m=h-1-t.padInfo.top,v=f-1-t.padInfo.left,g=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(m,", ").concat(v,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(l,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(u,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(c,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var JZ={kernelName:Sh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,l=r.pad,u=r.dimRoundingMode,c=$y(i.shape,o,s,[1,1,1],l,u),d=new $Z(c);return n.runWebGLProgram(d,[a],i.dtype)}};var QZ={kernelName:wh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;_U([a,i],"avgPoolGrad");var s=r.filterSize,l=r.strides,u=r.pad,c=Ky(o.shape,s,l,1,u),d=new KZ(c);return n.runWebGLProgram(d,[a],o.dtype)}};var eH={kernelName:Th,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return fZ({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},tH=(0,A.Z)((function e(t,n,r,a,i,o){M(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],cy(t,n),cy(t,r);var s="0.0";null!=a&&(cy(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var l="1.0";null!=i&&(cy(t,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(l,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),nH=(0,A.Z)((function e(t,n,r,a,i,o){M(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],cy(t,n),cy(t,r);var s="vec4(0.0)";null!=a&&(cy(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var l="vec4(1.0)";null!=i&&(cy(t,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(l,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),rH={kernelName:pf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,l=t.scale;bd(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),bd(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),bd(null==l||i.shape.length===l.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var u=r.varianceEpsilon;null==u&&(u=.001);var c=[a,i,o],d=null;null!=s&&(d=s.shape,c.push(s));var h=null;null!=l&&(h=l.shape,c.push(l));var f=th().getBool("WEBGL_PACK_NORMALIZATION")?new nH(a.shape,i.shape,o.shape,d,h,u):new tH(a.shape,i.shape,o.shape,d,h,u);return n.runWebGLProgram(f,c,c[0].dtype)}},aH=(0,A.Z)((function e(t){M(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=HU(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return iH.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(iH[t]," = start[").concat(t,"] + coords.").concat(iH[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),iH=["x","y","z","w","u","v"];var oH=(0,A.Z)((function e(t){M(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=HU(this.rank),r=rV("coords",this.rank),a=rV("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),l=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),u=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(u,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")}));function sH(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=xy(a,r.begin,r.size),o=(0,U.Z)(i,2),s=o[0],l=o[1];if(vy(a,s,l),0===Sd(l))return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var u=n.texData.get(a.dataId),c=WW(u.values,s,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,c)}var d=n.texData.get(a.dataId).isPacked,h=yy(a.shape,s,l);if(d||!h){var f=th().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oH(l):new aH(l),p=[s];return n.runWebGLProgram(f,[a],a.dtype,p)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=by(t,Wd(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}(a,s,l,n)}var lH={kernelName:Tp,backendName:"webgl",kernelFunc:sH},uH={kernelName:Eh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;bd(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),l=gT(a.shape,i,s),u=yT(l.length,i.length),c=bT(a.shape,i,s),d=xT(o,i.length),h=wT(c,o,i.length),f=[],p=eZ({inputs:{x:a},backend:n,attrs:{shape:l}}),m=cZ({inputs:{x:p},backend:n,attrs:{perm:u}}),v=eZ({inputs:{x:m},backend:n,attrs:{shape:c}}),g=sH({inputs:{x:v},backend:n,attrs:{begin:d,size:h}});return f.push(p),f.push(m),f.push(v),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var cH={kernelName:Ch,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),l=n.readSync(i.dataId),u=mW(s,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}};var dH={kernelName:_h,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=cy(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},hH=GV({opSnippet:"return float(a != b);",cpuKernelImpl:PW,dtype:"bool"}),fH={kernelName:$f,backendName:"webgl",kernelFunc:hH};function pH(e){var t=e.inputs,n=e.backend,r=t.input;return DV({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var mH={kernelName:up,backendName:"webgl",kernelFunc:pH},vH="return float(int(x));";var gH={kernelName:Mh,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return DV({inputs:{x:i},backend:r});var s=Yx(i.shape),l=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),u=PV({inputs:{real:l,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(l),u}if("complex64"===i.dtype){var c=pH({inputs:{input:i},backend:r}),d=e({inputs:{x:c},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(c),d}if(!Dd(i.dtype,o)){var h=DV({inputs:{x:i},backend:r});return{dataId:h.dataId,shape:h.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new cV(e.shape,vH),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var f=r.makeTensorInfo([],"bool",Rd("bool",1)),p=hH({inputs:{a:i,b:f},backend:r});return r.disposeIntermediateTensorInfo(f),p}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},yH="return ceil(x);",bH=HV({opSnippet:yH,packedOpSnippet:yH,cpuKernelImpl:gW}),xH={kernelName:Ah,backendName:"webgl",kernelFunc:bH},wH=(0,A.Z)((function e(t){M(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),kH=(0,A.Z)((function e(t){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var SH={kernelName:Ih,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=th().getBool("WEBGL_PACK_CLIP")?new kH(i.shape):new wH(i.shape);var l=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,l)}},TH=(0,A.Z)((function e(t){M(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function EH(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var CH={kernelName:Rh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new TH(r.shape),o=[EH(r,a.complexTensorInfos.real),EH(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},_H=(0,A.Z)((function e(t){M(this,e),this.outputShape=[],this.outputShape=fT(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,l=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(l,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),MH=(0,A.Z)((function e(t,n){M(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=fT(t,n);var r=this.outputShape,a=r.length,i=HU(a),o=rV("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var l=new Array(t.length-1);l[0]=t[0][n];for(var u=1;u<l.length;u++)l[u]=l[u-1]+t[u][n];for(var c=s[n],d=s.slice(-2),h=s.join(),f="if (".concat(c," < ").concat(l[0],") {\n        return getChannel(\n            getT0(").concat(h,"), vec2(").concat(d.join(),"));\n        }"),p=1;p<l.length;p++){var m=l[p-1];f+="\n        if (".concat(c," < ").concat(l[p],"  && ").concat(c," >= ").concat(l[p-1],") {\n          return getChannel(\n            getT").concat(p,"(").concat(AH(s,c,m),"),\n            vec2(").concat(AH(d,c,m),"));\n        }")}var v=l.length,g=l[l.length-1];f+="\n        return getChannel(\n          getT".concat(v,"(").concat(AH(s,c,g),"),\n          vec2(").concat(AH(d,c,g),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(f,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function AH(e,t,n){var r=e.indexOf(t),a=e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e}));return a.join()}function IH(e){var t=e.inputs,n=e.backend,r=t.input;return DV({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var NH={kernelName:wf,backendName:"webgl",kernelFunc:IH};function RH(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return pH({inputs:{input:e},backend:n})})),i=e.map((function(e){return IH({inputs:{input:e},backend:n})})),o=RH(a,t,n),s=RH(i,t,n),l=PV({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}var u=n.shouldExecuteOnCPU(e);if("string"===r&&(u=!0),u){var c=e.map((function(e){var r=Sd(e.shape.slice(t));return eZ({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),d=c.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),h=fT(c.map((function(e){return e.shape})),1),f=1===c[0].shape[0],p=yW(d,h,r,f),m=fT(e.map((function(e){return e.shape})),t),v=n.makeTensorInfo(m,r,p);return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}if(e.length>th().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var g=Math.floor(e.length/2),y=RH(e.slice(0,g),t,n),b=RH(e.slice(g),t,n),x=RH([y,b],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}if(th().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var w=new MH(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(w,e,r)}var k=function(e,t,n){var r=fT(e.map((function(e){return e.shape})),t),a=e.map((function(e){return eZ({inputs:{x:e},attrs:{shape:[-1,Sd(e.shape.slice(t))]},backend:n})}));return{tensors2D:a,outShape:r}}(e,t,n),S=k.tensors2D,T=k.outShape,E=new _H(S.map((function(e){return e.shape}))),C=n.runWebGLProgram(E,S,r);S.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var _=eZ({inputs:{x:C},attrs:{shape:T},backend:n});return n.disposeIntermediateTensorInfo(C),_}function OH(e){var t=e.inputs,n=e.backend,r=Id(e.attrs.axis,t[0].shape)[0],a=fT(t.map((function(e){return e.shape})),r);if(0===Sd(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return Sd(e.shape)>0}));if(1===i.length)return DV({inputs:{x:i[0]},backend:n});var o=i.map((function(e){return e.shape}));return hT(o,r),RH(i,r,n)}var DH={kernelName:Oh,backendName:"webgl",kernelFunc:OH},LH=(0,A.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];M(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,l=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,h=t.filterHeight,f=t.filterWidth,p=4*Math.floor(t.inChannels/4),m=t.inChannels%4,v="channelsLast"===t.dataFormat,g=v?1:2,y=v?2:3,b=v?3:1,x="",w="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),w="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(c,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(f,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(v,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(v,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(k,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")})),PH=(0,A.Z)((function e(t){M(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,d=t.filterDepth,h=t.filterHeight,f=t.filterWidth,p=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(l,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,"; wR++) {\n            int xR = xRCorner + wR * ").concat(u,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),FH=(0,A.Z)((function e(t,n){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=KU(this.outputShape.length);for(var r=n.dataFormat,a=AU(),i="channelsLast"===r,o=i?0:1,s=i?1:2,l=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":"if(blockIndex < ".concat(t[1]," && pos < ").concat(t[0],") {"),u="",c=0;c<=1;c++)for(var d=0;d<=1;d++)u+="\n          blockIndex = rc.y + ".concat(d,";\n          pos = rc.x + ").concat(c,";\n\n          ").concat(l,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*c+d,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*c+d,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(u,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function jH(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,l=e.preluActivationWeights,u=void 0===l?null:l,c=e.leakyreluAlpha,d=void 0===c?0:c,h=e.activation,f=void 0===h?null:h,p=n.shape,m=i.texData.get(n.dataId),v=a.inChannels,g=p[0]*p[1]*p[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(!((1===g||1===y)&&v>hZ)&&m.isPacked&&b&&null!=m.texture&&p[2]%2!==0&&Td(m.shape.slice(-3),p.slice(-3))){var w=p[0]*p[1]*(p[2]+1),k={dataId:n.dataId,shape:[1,w,a.inChannels],dtype:n.dtype},S=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,bd(kU(m.shape,k.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(k.shape," isn't free")}));var T=eZ({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(T);var E=fZ({a:k,b:T,backend:i,transposeA:false,transposeB:false,bias:s,activation:f,preluActivationWeights:u,leakyreluAlpha:d}),C=i.texData.get(E.dataId);bd(C.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=S,C.shape=a.outShape,(t=DV({inputs:{x:E},backend:i})).shape=a.outShape,x.push(E)}else{var _=eZ({inputs:{x:n},backend:i,attrs:{shape:[1,b?p[0]*p[1]*p[2]:p[0]*p[2]*p[3],a.inChannels]}}),M=eZ({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),A=fZ({a:_,b:M,transposeA:false,transposeB:false,backend:i,bias:s,activation:f,preluActivationWeights:u,leakyreluAlpha:d});t=eZ({inputs:{x:A},backend:i,attrs:{shape:a.outShape}}),x.push(_),x.push(M),x.push(A)}for(var I=0,N=x;I<N.length;I++){var R=N[I];i.disposeIntermediateTensorInfo(R)}return t}function zH(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,l=void 0===s?null:s,u=e.leakyreluAlpha,c=void 0===u?0:u,d=e.activation,h=void 0===d?null:d,f=r.filterWidth,p=r.filterHeight,m=r.inChannels,v=r.outWidth,g=r.outHeight,y="channelsLast"===r.dataFormat,b=f*p*m,x=g*v,w=[b,x],k=[],S=eZ({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),T=eZ({inputs:{x:n},backend:a,attrs:{shape:[1,b,Sd(n.shape)/b]}});k.push(S),k.push(T);var E=new FH(w,r),C=[S.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],_=a.runWebGLProgram(E,[S],"float32",C),M=eZ({inputs:{x:_},backend:a,attrs:{shape:[1,w[0],w[1]]}});k.push(_),k.push(M);var A=null!=o,I=null!=l,N="leakyrelu"===h,R=h?qV(h,!0):null,O=new XV(M.shape,T.shape,[1,x,r.outChannels],!0,!1,A,R,I,N),D=[M,T];if(o&&D.push(o),I&&D.push(l),N){var L=a.makeTensorInfo([],"float32",Rm(c,"float32"));D.push(L),k.push(L)}var P=a.runWebGLProgram(O,D,"float32"),F=eZ({inputs:{x:P},backend:a,attrs:{shape:y?[1,g,v,r.outChannels]:[1,r.outChannels,g,v]}});k.push(P);for(var j=0,z=k;j<z.length;j++){var B=z[j];a.disposeIntermediateTensorInfo(B)}return F}var BH={kernelName:Dh,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,l=a.pad,u=a.dataFormat,c=a.dilations,d=a.dimRoundingMode,h=sb(u),f=Jy(i.shape,o.shape,s,c,l,d,!1,h);if(1!==f.filterHeight||1!==f.filterWidth||1!==f.dilationHeight||1!==f.dilationWidth||1!==f.strideHeight||1!==f.strideWidth||"SAME"!==f.padInfo.type&&"VALID"!==f.padInfo.type)if(th().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=zH({x:i,filter:o,convInfo:f,backend:r});else{var p=new LH(f);t=r.runWebGLProgram(p,[i,o],"float32")}else t=jH({x:i,filter:o,convInfo:f,backend:r});var m=eZ({inputs:{x:t},backend:r,attrs:{shape:f.outShape}});return r.disposeIntermediateTensorInfo(t),m}},UH=(0,A.Z)((function e(t){M(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),WH=(0,A.Z)((function e(t){M(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,l=r-1-t.padInfo.left,u=o?1:2,c=o?2:3,d=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(l,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(u,"], coords[").concat(c,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),VH=(0,A.Z)((function e(t){M(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),ZH=(0,A.Z)((function e(t){M(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,l=n-1-t.padInfo.front,u=r-1-t.padInfo.top,c=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(l,", ").concat(u,", ").concat(c,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var HH={kernelName:Lh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,l=r.dataFormat,u=r.dimRoundingMode,c=r.filterShape,d=sb(l),h=Jy(a.shape,c,o,1,s,u,!1,d),f=new UH(h);return n.runWebGLProgram(f,[a,i],"float32")}};var GH={kernelName:Ph,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,l=r.pad,u=r.dataFormat,c=r.dimRoundingMode,d=sb(u),h=Jy(o,i.shape,s,1,l,c,!1,d),f=new WH(h);return n.runWebGLProgram(f,[a,i],"float32")}};var qH={kernelName:Fh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,l=r.dilations,u=Qy(a.shape,i.shape,o,l,s),c=new PH(u);return n.runWebGLProgram(c,[a,i],"float32")}};var XH={kernelName:jh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,l=r.filterShape,u=Qy(a.shape,l,o,1,s),c=new VH(u);return n.runWebGLProgram(c,[a,i],"float32")}};var YH={kernelName:zh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,l=Qy(r.inputShape,i.shape,s,1,o),u=new ZH(l);return n.runWebGLProgram(u,[a,i],"float32")}},KH=HV({opSnippet:ZV+"\n  return cos(x);\n"}),$H={kernelName:Bh,backendName:"webgl",kernelFunc:KH},JH=HV({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),QH={kernelName:Uh,backendName:"webgl",kernelFunc:JH},eG=(0,A.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=(0,U.Z)(t,4),s=o[0],l=o[1],u=o[2],c=o[3],d=(0,U.Z)(n,1)[0],h=(0,U.Z)(r,2),f=h[0],p=h[1];this.outputShape=[d,f,p,c];var m="bilinear"===a?1:0,v="".concat(l-1,".0"),g="".concat(u-1,".0"),y=f>1?["".concat((l-1)/(f-1)),"(y2-y1) * height_ratio","y1*".concat(v," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(v)],b=(0,U.Z)(y,3),x=b[0],w=b[1],k=b[2],S=p>1?["".concat((u-1)/(p-1)),"(x2-x1) * width_ratio","x1*".concat(g," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(g)],T=(0,U.Z)(S,3),E=T[0],C=T[1],_=T[2];this.userCode="\n      const float height_ratio = float(".concat(x,");\n      const float width_ratio = float(").concat(E,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(w,";\n        float width_scale = ").concat(C,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(v," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(_,";\n        if( in_x < 0.0 || in_x > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),tG={kernelName:Vh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,l=r.method,u=r.extrapolationValue,c=new eG(a.shape,i.shape,s,l,u);return n.runWebGLProgram(c,[a,i,o],"float32")}},nG=(0,A.Z)((function e(t,n,r){M(this,e),this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;var a=t.length,i=n?"0.0":"getX(".concat(rG(a,"coords"),")"),o=t[t.length-1],s="",l="";n?(s=r?"end != ".concat(o-1):"end != 0",l=r?"end + 1":"end - 1"):(s=r?"end + pow2 < ".concat(o):"end >= pow2",l=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(HU(a)," coords = getOutputCoords();\n        int end = ").concat(aG(a,"coords"),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(l,";\n          ").concat(aG(a,"coords")," = idx;\n          val += getX(").concat(rG(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}));function rG(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function aG(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}var iG={kernelName:Wh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,l=a.shape.length,u=Px([i],l),c=a;null!=u&&(c=cZ({inputs:{x:a},backend:n,attrs:{perm:u}}));var d=jx(1,l)[0];if(d!==l-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(a.shape.length-1," ")+"but got axis=".concat(i));for(var h=c.shape[d],f=DV({inputs:{x:c},backend:n}),p=0;p<=Math.ceil(Math.log2(h))-1;p++){var m=new nG(c.shape,!1,s),v=[[p]],g=f;f=n.runWebGLProgram(m,[f],f.dtype,v),n.disposeIntermediateTensorInfo(g)}if(o){var y=new nG(c.shape,o,s),b=f;f=n.runWebGLProgram(y,[f],f.dtype),n.disposeIntermediateTensorInfo(b)}if(null!=u){var x=cZ({inputs:{x:f},backend:n,attrs:{perm:Fx(u)}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(c),x}return f}};var oG={kernelName:Zh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var l=n.readSync(a.dataId),u=n.readSync(i.dataId),c=mW(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}if(2===a.shape.length){var d=n.bufferSync(a),h=n.bufferSync(i),f=vW(d,h,o,s);return n.makeTensorInfo(f.shape,i.dtype,f.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},sG=function(){function e(t,n,r){M(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return(0,A.Z)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var lG={kernelName:Hh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],l=("NHWC"===o?a.shape[1]:a.shape[2])*i,u=("NHWC"===o?a.shape[2]:a.shape[3])*i,c=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d=new sG("NHWC"===o?[s,l,u,c]:[s,c,l,u],i,o);return n.runWebGLProgram(d,[a],a.dtype)}},uG=(0,A.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];M(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=KU(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,l=t.outChannels/t.inChannels,u="",c="";r&&(u=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),c="result = activation(result);");var d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(u,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(l,";\n        int q = d2 - d1 * ").concat(l,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(d,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")})),cG=(0,A.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];M(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=KU(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,l=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,h=d,f="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",p=0;p<d;p++)f+="\n          vec4 xTexelC".concat(2*p,";\n          int xTexelC").concat(2*p,"Ready;\n          vec4 xTexelC").concat(2*p+1,";\n          int xTexelC").concat(2*p+1,"Ready;\n          vec4 xC").concat(p,";");f+="\n    for (int r = 0; r < ".concat(c,"; r++) {\n      ");for(var m=0;m<d;m++)f+="\n          xTexelC".concat(2*m," = vec4(0.0);\n          xTexelC").concat(2*m,"Ready = 0;\n          xTexelC").concat(2*m+1," = vec4(0.0);\n          xTexelC").concat(2*m+1,"Ready = 0;\n          xC").concat(m," = vec4(0.0);");f+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var v=0;v<(h+1)/2;v++){var g=2*v;if(f+="\n          xC = xCCorner + ".concat(g*u,";\n          "),1===l){if(g<d&&(s%2===1?(f+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n              "),f+=1===u&&g>0?"\n                xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                  } else {\n                    xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                  }\n                  ")):f+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xC").concat(g," = xTexelC").concat(g,";\n                "),g+1<d)){var y=s%2===0?vd(u):u;u%2===0&&s%2===1||u%2!==0&&s%2!==1?(f+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                    xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(g+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(g+1,"Ready = 1;\n                  }\n                  "),u>1&&(f+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                      xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(g,"Ready = 1;\n                    }\n                    ")),f+="\n                  xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                  ")):f+=1===y?"\n                    xC".concat(g+1," = xTexelC").concat(g,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                      xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(g+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(g+1,"Ready = 1;\n                    }\n\n                    xC").concat(g+1," = xTexelC").concat(g+1,";\n                    ")}}else g<d&&(s%2===1?(f+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n              "),g+1<d&&(f+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                "))):(f+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(\n                  xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n              "),g+1<d&&(f+="\n                  xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                "))));g<d&&(f+="\n            wTexel = getW(r, ".concat(g,", d1, q);\n            dotProd += xC").concat(g," * vec4(wTexel.xz, wTexel.xz);\n          "),g+1<d&&(f+="\n              wTexel = getW(r, ".concat(g+1,", d1, q);\n              dotProd += xC").concat(g+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}f+="\n    }\n  ",f+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(f,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var dG={kernelName:Gh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,l=r.dilations,u=r.dimRoundingMode,c=l;null==c&&(c=[1,1]),bd(ob(o,c),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(c,"'")}));var d,h=Jy(a.shape,i.shape,o,c,s,u,!0);d=th().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new cG(h):new uG(h);var f=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(d,[a,i],"float32",f)}},hG=(0,A.Z)((function e(t){M(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),fG=(0,A.Z)((function e(t){M(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,l=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(l,"; dm++) {\n              int d2 = d1 * ").concat(l," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var pG={kernelName:qh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,l=r.pad,u=r.dimRoundingMode,c=r.filterShape,d=Jy(a.shape,c,o,s,l,u,!0),h=new hG(d);return n.runWebGLProgram(h,[a,i],"float32")}};var mG={kernelName:Xh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,l=r.pad,u=r.dimRoundingMode,c=Jy(r.inputShape,i.shape,o,s,l,u,!0),d=new fG(c);return n.runWebGLProgram(d,[a,i],"float32")}},vG=(0,A.Z)((function e(t){M(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var gG={kernelName:Yh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,_.Z)(r.shape),(0,_.Z)(r.shape)),i=Sd(r.shape),o=eZ({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new vG(i),l=n.runWebGLProgram(s,[o],o.dtype),u=eZ({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}},yG=(0,A.Z)((function e(t){M(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,l=t.filterWidth,u=t.dilationHeight,c=t.dilationWidth,d=a.top,h=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(h,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(u,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(l,"; w++) {\n              int wIn = wBeg + w * ").concat(c,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var bG={kernelName:Kh,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,l=a.pad,u=a.dilations,c=Yy(i.shape,o.shape,s,l,"NHWC",u),d=new yG(c),h=eZ({inputs:{x:t=r.runWebGLProgram(d,[i,o],"float32")},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(t),h}};var xG={kernelName:ef,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=zT(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;UT(i.length,s,r);for(var l=WT(o,s),u=l.path,c=l.steps,d=c.length,h=null,f=i.length,p=[],m=0;m<d;++m){var v,g=G(c[m]);try{for(g.s();!(v=g.n()).done;){var y=v.value,b=BT(f,s[y]),x=b.permutationIndices,w=b.expandDims,k=void 0;VT(x)?k=r[y]:(k=cZ({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),p.push(k));for(var S=k.shape.slice(),T=0;T<w.length;++T)S.splice(w[T],0,1);Td(k.shape,S)||(k=eZ({inputs:{x:k},backend:n,attrs:{shape:S}}),p.push(k)),null===h?h=k:(h=JV({inputs:{a:k,b:h},backend:n}),p.push(h))}}catch(_ke){g.e(_ke)}finally{g.f()}m<d-1&&(u[m]>=0&&(h=lZ({inputs:{x:h},backend:n,attrs:{axis:u[m]-(i.length-f),keepDims:!1}}),p.push(h)),f--)}for(var E=0,C=p;E<C.length;E++){var _=C[E];_!==h&&n.disposeIntermediateTensorInfo(_)}return h}},wG=HV({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),kG={kernelName:tf,backendName:"webgl",kernelFunc:wG},SG={kernelName:nf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=th().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new OV("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new NV("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},TG=GV({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:bW}),EG={kernelName:af,backendName:"webgl",kernelFunc:TG},CG=HV({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(ET,";\n  float a1 = ").concat(CT,";\n  float a2 = ").concat(_T,";\n  float a3 = ").concat(MT,";\n  float a4 = ").concat(AT,";\n  float a5 = ").concat(IT,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),_G={kernelName:rf,backendName:"webgl",kernelFunc:CG},MG=HV({opSnippet:ZV+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:xW,dtype:"float32"}),AG={kernelName:of,backendName:"webgl",kernelFunc:MG};function IG(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),l=a;return a<0&&(bd(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),l=o+a+1),s.splice(l,0,1),eZ({inputs:{x:i},backend:r,attrs:{shape:s}})}var NG={kernelName:sf,backendName:"webgl",kernelFunc:IG},RG="return exp(x) - 1.0;",OG=HV({opSnippet:RG,packedOpSnippet:RG,cpuKernelImpl:wW}),DG={kernelName:lf,backendName:"webgl",kernelFunc:OG},LG=(0,A.Z)((function e(t,n,r){M(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function PG(e,t,n){var r=n.texData.get(e.dataId),a=Sd(e.shape),i=e.shape[e.shape.length-1],o=eZ({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,l=new LG("real",s,t),u=new LG("imag",s,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(l,c,"float32"),h=n.runWebGLProgram(u,c,"float32"),f=PV({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);var p=eZ({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(f),p}var FG={kernelName:uf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return PG(t.input,!1,n)}},jG=(0,A.Z)((function e(t,n){M(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function zG(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||zd(a))){var o=Od(i,Sd(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new jG(r,a),l=[[a]];return t.runWebGLProgram(s,[],i,l)}var BG,UG={kernelName:cf,backendName:"webgl",kernelFunc:zG},WG=(0,A.Z)((function e(t){M(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),VG={kernelName:df,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new WG(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},ZG="return floor(x);",HG=HV({opSnippet:ZG,packedOpSnippet:ZG,cpuKernelImpl:kW}),GG={kernelName:hf,backendName:"webgl",kernelFunc:HG},qG=GV({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),XG={kernelName:ff,backendName:"webgl",kernelFunc:qG},YG=(0,A.Z)((function e(t){M(this,e),this.variableNames=["A"];var n=AU(),r=(0,U.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),KG=(0,A.Z)((function e(t){M(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=AU(),r=(0,U.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),$G={kernelName:am,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,l=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],u=(0,U.Z)(l,2),c=u[0],d=u[1],h=[d,c],f=[d,c,i];(s||o)&&(null==BG&&(BG=document.createElement("canvas").getContext("2d")),BG.canvas.width=c,BG.canvas.height=d,BG.drawImage(a,0,0,c,d),a=BG.canvas);var p=n.makeTensorInfo(h,"int32");n.texData.get(p.dataId).usage=XB.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),a);var m=th().getBool("WEBGL_PACK")?new KG(f):new YG(f),v=n.runWebGLProgram(m,[p],"int32");return n.disposeData(p.dataId),v}};var JG={kernelName:sm,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,l=n.preluActivationWeights,u=a.strides,c=a.pad,d=a.dataFormat,h=a.dilations,f=a.dimRoundingMode,p=a.activation,m=a.leakyreluAlpha,v=sb(d),g=Jy(i.shape,o.shape,u,h,c,f,!1,v),y=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(th().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=zH({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:p,preluActivationWeights:l,leakyreluAlpha:m});else{var b=null!=s,x=null!=l,w="leakyrelu"===p,k=p?qV(p,!1):null,S=new LH(g,b,k,x,w),T=[i,o];if(s&&T.push(s),l&&T.push(l),w){var E=r.makeTensorInfo([],"float32",Rm(m,"float32"));T.push(E),y.push(E)}t=r.runWebGLProgram(S,T,"float32")}else t=jH({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:p,preluActivationWeights:l,leakyreluAlpha:m});var C=eZ({inputs:{x:t},backend:r,attrs:{shape:g.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),C}};var QG={kernelName:lm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,l=r.strides,u=r.pad,c=r.dilations,d=r.dimRoundingMode,h=r.activation,f=r.leakyreluAlpha,p=[],m=c;null==m&&(m=[1,1]),bd(ob(l,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(l," and dilations '").concat(m,"'")}));var v,g=Jy(a.shape,i.shape,l,m,u,d,!0),y=th().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=h?qV(h,y):null,x=[a,i],w=null!=o,k=null!=s,S="leakyrelu"===h;if(w&&x.push(o),k&&x.push(s),S){var T=n.makeTensorInfo([],"float32",Rm(f,"float32"));x.push(T),p.push(T)}v=y?new cG(g,w,b,k,S):new uG(g,w,b,k,S);var E=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],C=n.runWebGLProgram(v,x,"float32",E);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),C}},eq=(0,A.Z)((function e(t,n,r){M(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=HU(n.length),i=HU(r.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(o,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")}));var tq={kernelName:vf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=Sd(r.shape),l=kT(r,a),u=(0,U.Z)(l,4),c=u[0],d=u[1],h=u[2],f=u[3],p=eZ({inputs:{x:a},backend:n,attrs:{shape:[d,o]}}),m=eZ({inputs:{x:r},backend:n,attrs:{shape:[Sd(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var v=n.readSync(a.dataId),g=n.bufferSync(r),y=SW(v,g,r.dtype,d,o,h,f,r.shape,s);return n.makeTensorInfo(c,r.dtype,y.values)}var b=new eq(o,f,[d,h]),x=n.runWebGLProgram(b,[m,p],m.dtype),w=eZ({inputs:{x:x},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),w}},nq=(0,A.Z)((function e(t,n){M(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=HU(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function rq(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,l=Id(o,a.shape)[0];if(th().get("DEBUG"))for(var u=n.readSync(i.dataId),c=a.shape[l],d=function(){var e=u[h];bd(e<=c-1&&e>=0,(function(){return"GatherV2: the index value ".concat(e," is not in [0, ").concat(c-1,"]")}))},h=0;h<u.length;++h)d();var f=$T(a,i,l,s),p=Sd(i.shape),m=[],v=eZ({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),g=eZ({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,p/f.batchSize]}});m.push(v),m.push(g);var y=[f.batchSize,f.outerSize,p/f.batchSize,f.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var b=n.bufferSync(g),x=n.bufferSync(v),w=TW(x,b,y);return m.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f.outputShape,w.dtype,w.values)}var k=new nq(v.shape,y),S=n.runWebGLProgram(k,[v,g],v.dtype);m.push(S);var T=eZ({inputs:{x:S},backend:n,attrs:{shape:f.outputShape}});return m.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),T}var aq={kernelName:mf,backendName:"webgl",kernelFunc:rq},iq=GV({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:EW,dtype:"bool"}),oq={kernelName:gf,backendName:"webgl",kernelFunc:iq},sq=GV({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:CW}),lq={kernelName:yf,backendName:"webgl",kernelFunc:sq};var uq={kernelName:xf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return PG(t.input,!0,n)}},cq=HV({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),dq={kernelName:kf,backendName:"webgl",kernelFunc:cq},hq=HV({opSnippet:"return float(isinf(x));",dtype:"bool"}),fq={kernelName:Sf,backendName:"webgl",kernelFunc:hq},pq=HV({opSnippet:"return float(isnan(x));",dtype:"bool"}),mq={kernelName:Tf,backendName:"webgl",kernelFunc:pq},vq=GV({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:_W,dtype:"bool"}),gq={kernelName:Cf,backendName:"webgl",kernelFunc:vq},yq=GV({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:MW,dtype:"bool"}),bq={kernelName:_f,backendName:"webgl",kernelFunc:yq};var xq={kernelName:Mf,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=AW(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},wq=HV({opSnippet:ZV+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:IW}),kq={kernelName:Af,backendName:"webgl",kernelFunc:wq},Sq=HV({opSnippet:ZV+"\n  return log(1.0 + x);\n"}),Tq={kernelName:If,backendName:"webgl",kernelFunc:Sq},Eq=GV({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),Cq={kernelName:Nf,backendName:"webgl",kernelFunc:Eq},_q=HV({opSnippet:"return float(!(x >= 1.0));"}),Mq={kernelName:Rf,backendName:"webgl",kernelFunc:_q},Aq=GV({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),Iq={kernelName:Of,backendName:"webgl",kernelFunc:Aq},Nq=(0,A.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,l=t[3]-1;this.outputShape=t;var u="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(u,")"):1===i?"1.0/(".concat(u,")"):"exp(log(".concat(u,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(l,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),Rq=(0,A.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,l=t[3]-1;this.outputShape=t;var u="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(u,")"):1===i?"1.0/(".concat(u,")"):"exp(log(".concat(u,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(l,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),Oq={kernelName:Df,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,l=r.beta,u=th().getBool("WEBGL_PACK_NORMALIZATION")?new Rq(a.shape,i,o,s,l):new Nq(a.shape,i,o,s,l);return n.runWebGLProgram(u,[a],a.dtype)}},Dq=(0,A.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),Lq={kernelName:Lf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,l=r.bias,u=r.alpha,c=r.beta,d=new Dq(a.shape,s,l,u,c);return n.runWebGLProgram(d,[a,i,o],a.dtype)}};function Pq(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,l=Id(i,a.shape),u=l,c=Px(u,s),d=null!=c,h=n.shouldExecuteOnCPU([a]),f=a;if(d){if(h){for(var p=n.texData.get(f.dataId).values,m=new Array(s),v=0;v<m.length;v++)m[v]=a.shape[c[v]];var g=eV(p,a.shape,a.dtype,c,m);f=n.makeTensorInfo(m,a.dtype),n.texData.get(f.dataId).values=g}else f=sZ(a,c,n);u=jx(u.length,s)}Lx("max",u,s);var y,b=Ox(f.shape,u),x=(0,U.Z)(b,2),w=x[0],k=x[1],S=w;if(o&&(S=Dx(w,l)),h){var T=n.texData.get(f.dataId).values,E=NW(T,Sd(k),S,a.dtype);y=n.makeTensorInfo(S,a.dtype),n.texData.get(y.dataId).values=E}else y=function(e,t,n,r){var a=Sd(t),i=eZ({inputs:{x:e},attrs:{shape:[Sd(e.shape)/a,a]},backend:r}),o=aZ(i,e.dtype,"max",r),s=eZ({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(f,k,S,n);return d&&n.disposeIntermediateTensorInfo(f),y}var Fq={kernelName:Pf,backendName:"webgl",kernelFunc:Pq},jq=GV({opSnippet:IV+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+RV+"\n  return result;\n",cpuKernelImpl:RW}),zq={kernelName:Ff,backendName:"webgl",kernelFunc:jq};var Bq={kernelName:jf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;_U(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,l=r.dimRoundingMode;bd(ob(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var u=Ky(a.shape,i,o,1,s,l);if(1===u.filterWidth&&1===u.filterHeight&&Td(u.inShape,u.outShape))return DV({inputs:{x:a},backend:n});var c=new GZ(u,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}};var Uq={kernelName:Bf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,l=r.dataFormat,u=r.dimRoundingMode,c=$y(a.shape,i,o,[1,1,1],s,u,l),d=new qZ(c,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}},Wq=(0,A.Z)((function e(t){M(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,l=o-1-t.padInfo.left,u=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(l,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(u," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Vq=(0,A.Z)((function e(t){M(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,l=t.effectiveFilterDepth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=l-1-t.padInfo.front,h=u-1-t.padInfo.top,f=c-1-t.padInfo.left,p=l*u*c-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(h,", ").concat(f,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(l,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(u," * ").concat(c," +\n                  wR * ").concat(c," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var Zq={kernelName:Uf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,l=r.pad,u=r.dimRoundingMode,c=$y(i.shape,o,s,[1,1,1],l,u),d=new qZ(c,"max",!0),h=n.runWebGLProgram(d,[i],i.dtype),f=new Vq(c),p=n.runWebGLProgram(f,[a,h],i.dtype);return n.disposeIntermediateTensorInfo(h),p}};var Hq={kernelName:zf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;_U([i,t.output],"maxPoolGrad");var s=r.filterSize,l=r.strides,u=r.pad,c=r.dimRoundingMode,d=Ky(o.shape,s,l,1,u,c),h=new GZ(d,"max",!0),f=n.runWebGLProgram(h,[o],o.dtype),p=new Wq(d),m=n.runWebGLProgram(p,[a,f],o.dtype);return n.disposeIntermediateTensorInfo(f),m}};var Gq={kernelName:Wf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,l=n.includeBatchInIndex,u=r;bd(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var c=[1,1];bd(ob(o,c),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(c,"'")}));var d=Ky(a.shape,i,o,c,s),h=function(e,t,n,r){var a=new GZ(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new GZ(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,l,d,u),f=(0,U.Z)(h,2);return[f[0],f[1]]}};var qq={kernelName:Vf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,l=a.shape.length,u=Id(o,a.shape),c=u,d=Px(c,l),h=null!=d,f=s.shouldExecuteOnCPU([a]),p=[],m=a;if(h){if(f){for(var v=s.texData.get(m.dataId).values,g=new Array(l),y=0;y<g.length;y++)g[y]=a.shape[d[y]];var b=eV(v,a.shape,a.dtype,d,g);m=s.makeTensorInfo(g,a.dtype),s.texData.get(m.dataId).values=b}else m=sZ(a,d,s);p.push(m),c=jx(c.length,l)}Lx("sum",c,l);var x=Ox(m.shape,c),w=(0,U.Z)(x,2),k=w[0],S=w[1],T=k;i&&(T=Dx(k,u));for(var E=function(e,t,n,r){var a=Sd(t),i=eZ({inputs:{x:e},attrs:{shape:[Sd(e.shape)/a,a]},backend:r}),o=aZ(i,"float32","mean",r),s=eZ({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(m,S,T,s),C=0,_=p;C<_.length;C++){var M=_[C];s.disposeIntermediateTensorInfo(M)}return E}};var Xq={kernelName:Zf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,l=Id(i,a.shape),u=l,c=Px(u,s),d=a;null!=c&&(d=cZ({inputs:{x:a},backend:n,attrs:{perm:c}}),u=jx(u.length,a.shape.length)),Lx("min",u,s);var h,f=Ox(d.shape,u),p=(0,U.Z)(f,2),m=p[0],v=eZ({inputs:{x:d},backend:n,attrs:{shape:[-1,Sd(p[1])]}}),g=aZ(v,v.dtype,"min",n);return h=eZ(o?{inputs:{x:g},backend:n,attrs:{shape:Dx(m,l)}}:{inputs:{x:g},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(d),h}},Yq=GV({opSnippet:IV+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+RV+"\n  return result;\n",cpuKernelImpl:OW}),Kq={kernelName:Hf,backendName:"webgl",kernelFunc:Yq},$q=(0,A.Z)((function e(t,n,r){M(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=HU(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),u="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(u,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(u,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(l,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(u,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(u,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),Jq=(0,A.Z)((function e(t,n,r){M(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=HU(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),l=rV("rc",a),u=rV("source",a),c="".concat(l[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(u.slice(-2).join(),")"),h="reflect"===r?0:1,f="";if(1===a){var p="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(h,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(h,";\n        }\n        source -= start;\n      ");f="\n        ".concat(i," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(u.join(),"), ").concat(d,");\n        ").concat(l[a-1]," += 1;\n        if(").concat(c,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(u.join(),"), ").concat(d,");\n        }\n      ")}else{var m="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(h,") +\n                gte * ((end - 1) * 2 - source + ").concat(h,");\n        source -= start;\n      ");f="\n        ".concat(i," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(u.join(),"), ").concat(d,");\n        ").concat(l[a-1]," += 1;\n        if(").concat(c,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(u.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(l[a-2]," += 1;\n        if(").concat(l[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(u.join(),"), ").concat(d,");\n          ").concat(l[a-1]," += 1;\n          if(").concat(c,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(u.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")})),Qq={kernelName:Gf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=th().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Jq(a.shape,i,o):new $q(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},eX=GV({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  "+RV+"\n  return result;\n"}),tX={kernelName:qf,backendName:"webgl",kernelFunc:eX},nX=(0,A.Z)((function e(t,n,r){M(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),rX=GV({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),aX={kernelName:Qh,backendName:"webgl",kernelFunc:rX},iX="return a - b;",oX=GV({opSnippet:iX,packedOpSnippet:iX,supportsComplex:!0,cpuKernelImpl:$W}),sX={kernelName:Gp,backendName:"webgl",kernelFunc:oX};function lX(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=Id([r.dim],a.shape),o=Pq({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),s=Dx(o.shape,i),l=eZ({inputs:{x:o},backend:n,attrs:{shape:s}}),u=oX({inputs:{a:a,b:l},backend:n}),c=MG({inputs:{x:u},backend:n}),d=lZ({inputs:{x:c},backend:n,attrs:{axis:i,keepDims:!1}}),h=eZ({inputs:{x:d},backend:n,attrs:{shape:s}}),f=rX({inputs:{a:c,b:h},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),f}var uX={kernelName:Dp,backendName:"webgl",kernelFunc:lX};var cX={kernelName:Xf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,l=s?a:lX({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new nX(u,c,i),h=[[o]],f=n.runWebGLProgram(d,[l],"int32",h);return s||n.disposeIntermediateTensorInfo(l),f}},dX=dV+"\n  return -x;\n";var hX={kernelName:Kf,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=LW(i.values,a.shape,a.dtype),s=(0,U.Z)(o,2),l=s[0],u=s[1];return r.makeTensorInfo(u,a.dtype,l)}return t=th().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new TV(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new cV(a.shape,dX),r.runWebGLProgram(t,[a],a.dtype)}},fX=lS;var pX={kernelName:Jf,backendName:"webgl",kernelFunc:function(e){um("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,l=r.scoreThreshold,u=n.readSync(a.dataId),c=n.readSync(i.dataId),d=fX(u,c,o,s,l).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},mX=uS;var vX={kernelName:Qf,backendName:"webgl",kernelFunc:function(e){um("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,l=r.scoreThreshold,u=r.padToMaxOutputSize,c=n.readSync(a.dataId),d=n.readSync(i.dataId),h=mX(c,d,o,s,l,u),f=h.selectedIndices,p=h.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},gX=cS;var yX={kernelName:ep,backendName:"webgl",kernelFunc:function(e){um("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,l=r.scoreThreshold,u=r.softNmsSigma,c=n.readSync(a.dataId),d=n.readSync(i.dataId),h=gX(c,d,o,s,l,u),f=h.selectedIndices,p=h.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},bX=(0,A.Z)((function e(t,n,r,a){M(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),xX={kernelName:np,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,l=Sd(a.shape),u=new bX(l,i,o,s),c=eZ({inputs:{x:a},backend:n,attrs:{shape:[l]}}),d=n.runWebGLProgram(u,[c],a.dtype);n.disposeIntermediateTensorInfo(c);var h=eZ({inputs:{x:d},backend:n,attrs:{shape:[].concat((0,_.Z)(a.shape),[i])}});return n.disposeIntermediateTensorInfo(d),h}};function wX(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=pH({inputs:{input:r},backend:n}),i=wX({inputs:{x:a},backend:n}),o=IH({inputs:{input:r},backend:n}),s=wX({inputs:{x:o},backend:n}),l=PV({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}return zG({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var kX={kernelName:nm,backendName:"webgl",kernelFunc:wX};var SX={kernelName:tp,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=pH({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=IH({inputs:{input:a},backend:r}),l=wX({inputs:{x:s},backend:r}),u=PV({inputs:{real:o,imag:l},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(l),u}return zG({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var TX={kernelName:rp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return IG({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){xd(a,e.shape,"All tensors passed to stack must have matching shapes"),bd(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=IG({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),l=OH({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}},EX=(0,A.Z)((function e(t,n,r){M(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=HU(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(l,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),CX=(0,A.Z)((function e(t,n,r){M(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=HU(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),l=rV("rc",a),u=rV("source",a),c="".concat(l[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(u.slice(-2).join(),")"),h=["".concat(i," rc = outputLoc;"),"".concat(l[a-1]," += 1;\n       if(").concat(c,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(l[a-2]," += 1;\n       if(").concat(l[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(l[a-1]," += 1;\n         if(").concat(c,") {")],f=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",m=0,v=1===a?2:4;m<v;m++)p+="\n        ".concat(h[m],"\n        if (").concat(f,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(u.join(),"), ").concat(d,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),_X=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===Sd(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return zG({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var l=th().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new CX(a.shape,i,o):new EX(a.shape,i,o),u=[[o]];return n.runWebGLProgram(l,[a],a.dtype,u)},MX={kernelName:ap,backendName:"webgl",kernelFunc:_X},AX=GV({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  "+RV+"\n  return result;\n"}),IX={kernelName:ip,backendName:"webgl",kernelFunc:AX};var NX={kernelName:sp,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,l=i.shape.length,u=[],c=Id(o,i.shape),d=c,h=Px(d,l),f=i;if(null!=h&&(f=cZ({inputs:{x:i},backend:r,attrs:{perm:h}}),d=jx(d.length,l),u.push(f)),Lx("prod",d,l),r.shouldExecuteOnCPU([f])){var p=r.texData.get(f.dataId).values,m=FW(f.shape,f.dtype,p,d),v=m.outVals,g=m.outShape,y=m.outDtype;t=r.makeTensorInfo(g,y,v)}else{var b=Ox(f.shape,d),x=(0,U.Z)(b,2),w=x[0],k=Sd(x[1]),S=eZ({inputs:{x:f},backend:r,attrs:{shape:[-1,k]}}),T=aZ(S,ov(i.dtype),"prod",r);t=eZ({inputs:{x:T},backend:r,attrs:{shape:w}}),u.push(S),u.push(T)}if(s){u.push(t);var E=Dx(t.shape,c);t=eZ({inputs:{x:t},backend:r,attrs:{shape:E}})}return u.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},RX=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=jW(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},OX={kernelName:lp,backendName:"webgl",kernelFunc:RX},DX=HV({opSnippet:"return 1.0 / x;"}),LX={kernelName:cp,backendName:"webgl",kernelFunc:DX},PX=HV({opSnippet:dV+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),FX={kernelName:dp,backendName:"webgl",kernelFunc:PX},jX=HV({opSnippet:dV+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),zX={kernelName:gp,backendName:"webgl",kernelFunc:jX},BX=(0,A.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,U.Z)(t,4),s=o[0],l=o[1],u=o[2],c=o[3];this.outputShape=[s,n,r,c];var d,h=[a&&n>1?l-1:l,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/f[0],",\n          ").concat(h[1]/f[1],");\n      const vec2 inputShapeRC = vec2(").concat(l,".0, ").concat(u,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),UX=(0,A.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,U.Z)(t,4),s=o[0],l=o[1],u=o[2],c=o[3];this.outputShape=[s,n,r,c];var d,h=[a&&n>1?l-1:l,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/f[0],",\n          ").concat(h[1]/f[1],",\n          ").concat(h[1]/f[1],");\n      const vec3 inputShapeRC = vec3(").concat(l,".0, ").concat(u,".0,\n                                     ").concat(u,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var WX={kernelName:mp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,l=(0,U.Z)(s,2),u=l[0],c=l[1],d=th().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new UX(a.shape,u,c,i,o):new BX(a.shape,u,c,i,o);return n.runWebGLProgram(d,[a],"float32")}},VX=(0,A.Z)((function e(t,n,r){M(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,U.Z)(n,3),i=a[1],o=a[2],s=(0,U.Z)(t,3),l=s[1],u=s[2],c=[r&&l>1?i-1:i,r&&u>1?o-1:o],d=[r&&l>1?l-1:l,r&&u>1?u-1:u],h=c[0]/d[0],f=c[1]/d[1],p=1/h,m=1/f,v=2*Math.ceil(p)+2,g=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(f,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(l,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(u,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var ZX={kernelName:vp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new VX(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},HX=(0,A.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,U.Z)(t,4),s=o[0],l=o[1],u=o[2],c=o[3];this.outputShape=[s,n,r,c];var d,h=[a&&n>1?l-1:l,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";d=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/f[0],",\n          ").concat(h[1]/f[1],");\n      const vec2 inputShapeRC = vec2(").concat(l,".0, ").concat(u,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(p,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),GX=(0,A.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,U.Z)(t,4),s=o[0],l=o[1],u=o[2],c=o[3];this.outputShape=[s,n,r,c];var d,h=[a&&n>1?l-1:l,a&&r>1?u-1:u],f=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";d=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/f[0],",\n          ").concat(h[1]/f[1],",\n          ").concat(h[1]/f[1],");\n      const vec3 inputShapeRC = vec3(").concat(l,".0, ").concat(u,".0,\n                                     ").concat(u,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(p,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var qX={kernelName:fp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,l=(0,U.Z)(s,2),u=l[0],c=l[1],d=th().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new GX(a.shape,u,c,i,o):new HX(a.shape,u,c,i,o);return n.runWebGLProgram(d,[a],a.dtype)}},XX=(0,A.Z)((function e(t,n,r){M(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,U.Z)(n,3),i=a[1],o=a[2],s=(0,U.Z)(t,3),l=s[1],u=s[2],c=[r&&l>1?i-1:i,r&&u>1?o-1:o],d=[r&&l>1?l-1:l,r&&u>1?u-1:u],h=c[0]/d[0],f=c[1]/d[1],p=1/h,m=1/f,v=2*Math.ceil(p)+2,g=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(f,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(l,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(u,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(c[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(c[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var YX={kernelName:pp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new XX(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},KX=(0,A.Z)((function e(t,n){M(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=HU(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),$X=(0,A.Z)((function e(t,n){M(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=rV("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=HU(r);function l(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return l(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",l(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",l(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",l(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var JX={kernelName:yp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=Id(i,a.shape);if(0===o)return DV({inputs:{x:a},backend:n});var l=th().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $X(a.shape,s):new KX(a.shape,s);return n.runWebGLProgram(l,[a],a.dtype)}},QX=(0,A.Z)((function e(t,n){M(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),eY={kernelName:im,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,l=r,u=new QX(a.shape,o),c=vT(s,a.shape[1],a.shape[2]),d=(0,U.Z)(c,2),h=[[d[0],d[1],Math.sin(i),Math.cos(i)]];return l.runWebGLProgram(u,[a],a.dtype,h)}},tY=HV({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),nY={kernelName:bp,backendName:"webgl",kernelFunc:tY},rY=HV({opSnippet:"return inversesqrt(x);",cpuKernelImpl:zW}),aY={kernelName:xp,backendName:"webgl",kernelFunc:rY},iY=(0,A.Z)((function e(t,n,r,a,i,o){M(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=HU(i.length),l=HU(o.length),u="";1===r?u="i":2===r&&(u="i, j");var c="getIndices(".concat(u,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var h="getUpdates(".concat(d,")"),f=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(c,");\n              flattenedIndex += index * ").concat(f,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var oY={kernelName:wp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=Nk(0,a,o),l=s.sliceRank,u=s.numUpdates,c=s.sliceSize,d=s.strides,h=s.outputSize,f=[h/c,c];if(0===h)return n.makeTensorInfo(o,a.dtype);var p=eZ({inputs:{x:a},backend:n,attrs:{shape:[u,l]}}),m=eZ({inputs:{x:i},backend:n,attrs:{shape:[u,c]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new iY(u,l,p.shape.length,m.shape.length,d,f),y=n.runWebGLProgram(g,[m,p,v],m.dtype),b=eZ({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),b}},sY=(0,A.Z)((function e(t,n,r){var a,i;if(M(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],l=[],u=0;u<n.length;u++)l.push("".concat(o[u])),u<t&&s.push("".concat(o[u]));a=s.join(),i=l.join()}var c=HU(r);this.userCode="\n      void main() {\n        ".concat(c," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var lY={kernelName:kp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new sY(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],iv(a.dtype,i.dtype))}},uY=HV({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(ST,";\n  float scale = ").concat(TT,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),cY={kernelName:Sp,backendName:"webgl",kernelFunc:uY},dY=HV({opSnippet:ZV+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:BW}),hY={kernelName:Mp,backendName:"webgl",kernelFunc:dY},fY=HV({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),pY={kernelName:_p,backendName:"webgl",kernelFunc:fY},mY=HV({opSnippet:ZV+"\n  return sin(x);\n"}),vY={kernelName:Ep,backendName:"webgl",kernelFunc:mY},gY=HV({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),yY={kernelName:Cp,backendName:"webgl",kernelFunc:gY},bY=HV({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),xY={kernelName:Ap,backendName:"webgl",kernelFunc:bY},wY={kernelName:Rp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;bd(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),l=[[0,0]];l.push.apply(l,(0,_.Z)(o));for(var u=1+i.length;u<a.shape.length;++u)l.push([0,0]);var c=[],d=_X({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),h=gT(d.shape,i,s,!1),f=yT(h.length,i.length,!1),p=bT(d.shape,i,s,!1),m=eZ({inputs:{x:d},backend:n,attrs:{shape:h}}),v=cZ({inputs:{x:m},backend:n,attrs:{perm:f}}),g=eZ({inputs:{x:v},backend:n,attrs:{shape:p}});return c.push(d),c.push(m),c.push(v),c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var kY={kernelName:Lp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),l=n.readSync(a.dataId),u=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],d=VW(s,r.shape,r.dtype,l,a.dtype,u,c),h=(0,U.Z)(d,5),f=h[0],p=h[1],m=h[2],v=h[3],g=h[4];return[n.makeTensorInfo(p,r.dtype,f),n.makeTensorInfo([p[0]],a.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};var SY={kernelName:Pp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),u=ZW(s,r.shape,r.dtype,o,l),c=(0,U.Z)(u,3),d=c[0],h=c[1],f=c[2];return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([f.length],i.dtype,new Int32Array(f))]}};var TY={kernelName:Fp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),u=HW(o,r.shape,r.dtype,s,l,!0),c=(0,U.Z)(u,2),d=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,d)}};var EY={kernelName:jp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),u=HW(o,r.shape,r.dtype,s,l),c=(0,U.Z)(u,2),d=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,d)}};var CY={kernelName:zp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,l=Nk(0,a,s),u=l.sliceRank,c=l.numUpdates,d=l.strides,h=l.outputSize,f=new iY(c,u,a.shape.length,i.shape.length,d,[h,1],!1),p=n.runWebGLProgram(f,[i,a,o],i.dtype),m=eZ({inputs:{x:p},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(p),m}};var _Y={kernelName:Op,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=Id(r.axis,a.shape)[0],s=HT(a,i,o),l=a.shape.length,u=new Array(l).fill(0),c=a.shape.slice();return s.map((function(e){var t=(0,_.Z)(c);t[o]=e;var r=sH({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r}))}},MY="return sqrt(x);",AY=HV({opSnippet:MY,packedOpSnippet:MY,cpuKernelImpl:GW}),IY={kernelName:Ip,backendName:"webgl",kernelFunc:AY},NY={kernelName:Up,backendName:"webgl",kernelFunc:HV({opSnippet:"return x * x;"})},RY="return (a - b) * (a - b);",OY=GV({opSnippet:RY,packedOpSnippet:RY}),DY={kernelName:Bp,backendName:"webgl",kernelFunc:OY};var LY={kernelName:rm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=dV+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new cV(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},PY=(0,A.Z)((function e(t,n,r){M(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=HU(r.length),o=HU(r.length),s="";if(1===a)s="coords * strides + begin";else{var l=0;s=r.map((function(e,t){return l++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(l-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var FY={kernelName:Wp,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,l=a.strides,u=a.beginMask,c=a.endMask,d=a.ellipsisMask,h=a.newAxisMask,f=a.shrinkAxisMask,p=wy(i.shape,o,s,l,u,c,d,h,f),m=p.finalShapeSparse,v=p.finalShape,g=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,w=p.end,k=p.strides;if(g)t=eZ({inputs:{x:i},backend:r,attrs:{shape:v}});else if(y||b){bd(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var S=gy(x,w,k),T=sH({inputs:{x:i},backend:r,attrs:{begin:x,size:S}});t=eZ({inputs:{x:T},backend:r,attrs:{shape:v}}),r.disposeIntermediateTensorInfo(T)}else{if(r.shouldExecuteOnCPU([i])){var E=r.readSync(i.dataId),C=Fg(i.shape,i.dtype,E),_=qW(m,C,k,x);t=r.makeTensorInfo(v,i.dtype,_.values)}else{var M=new PY(x,k,m);t=r.runWebGLProgram(M,[i],i.dtype)}}var A=eZ({inputs:{x:t},backend:r,attrs:{shape:v}});return r.disposeIntermediateTensorInfo(t),A}};var jY={kernelName:Vp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,l=r.padWidth,u=r.preserveShortSequences,c=t.data,d=t.dataSplits,h=n.readSync(c.dataId),f=n.readSync(d.dataId),p=XW(h,f,a,i,o,s,l,u),m=(0,U.Z)(p,2),v=m[0],g=m[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(d.shape,"int32",g)]}};var zY={kernelName:Zp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],l=YW(o,s,r),u=(0,U.Z)(l,3),c=u[0],d=u[1],h=u[2],f=d.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};var BY={kernelName:Hp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=KW(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},UY=HV({opSnippet:"return tan(x);"}),WY={kernelName:qp,backendName:"webgl",kernelFunc:UY},VY=HV({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),ZY={kernelName:Xp,backendName:"webgl",kernelFunc:VY},HY=(0,A.Z)((function e(t,n){M(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=HU(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function GY(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return Pm(e)})):o,l=Fg(a.shape,a.dtype,s),u=JW(l,i);return n.makeTensorInfo(u.shape,u.dtype,u.values)}var c=new HY(a.shape,i);return n.runWebGLProgram(c,[a],a.dtype)}var qY={kernelName:Yp,backendName:"webgl",kernelFunc:GY},XY=(0,A.Z)((function e(t){M(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),YY=(0,A.Z)((function e(t){M(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function KY(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function $Y(e){for(var t=1;t<e;)t*=2;return t}var JY={kernelName:Kp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=th().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=th().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=a.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([a])||c<s||i>l){var d=n.readSync(a.dataId),h=QW(d,u,a.dtype,i,o),f=(0,U.Z)(h,2),p=f[0],m=f[1];return[n.makeTensorInfo(p.shape,p.dtype,p.values),n.makeTensorInfo(m.shape,m.dtype,m.values)]}if(0===i)return u[u.length-1]=0,[n.makeTensorInfo(u,a.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===c)return[a,zG({attrs:{shape:u,dtype:"int32",value:0},backend:n})];var v=n.texData.get(a.dataId),g=null!==v&&v.isPacked,y=g?n.unpackTensor(a):a,b=Sd(u)/c,x=eZ({inputs:{x:y},attrs:{shape:[b,c]},backend:n});g&&KY(n,y);for(var w=$Y(i),k=$Y(c),S=null,T=function(){return null===S?[x,x]:[x,S]},E=function(e,t,r){var a=T(),i=new XY(r),o=[[c],[null===S?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=S;S=n.runWebGLProgram(i,a,"int32",o),KY(n,s)},C=1;C<w;C*=2)for(var _=2*C,M=C;M>=1;M/=2)E(_,M,[b,k]);for(var A=k;A>w;A/=2){var I=T(),N=new YY([b,A/2]),R=[[c],[null===S?1:0],[w]],O=S;S=n.runWebGLProgram(N,I,"int32",R),KY(n,O);for(var D=w/2,L=2*D,P=D;P>=1;P/=2)E(L,P,S.shape)}var F=S;S=sH({inputs:{x:S},backend:n,attrs:{begin:0,size:[b,i]}}),KY(n,F);var j=rq({inputs:{x:x,indices:S},backend:n,attrs:{axis:1,batchDims:1}});KY(n,x);var z=u.slice(0,-1);z.push(i),F=S,S=eZ({inputs:{x:S},attrs:{shape:z},backend:n}),KY(n,F);var B=j;return j=eZ({inputs:{x:j},attrs:{shape:z},backend:n}),KY(n,B),[j,S]}},QY=(0,A.Z)((function e(t,n,r,a,i,o){M(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,l="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(l," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var eK={kernelName:$p,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,l=r.fillValue,u=r.outputShape,c=(0,U.Z)(a.shape,4),d=c[0],h=c[1],f=c[2],p=c[3],m=null!=u?u:[h,f],v=(0,U.Z)(m,2),g=v[0],y=v[1],b=new QY(h,f,o,s,l,[d,g,y,p]);return n.runWebGLProgram(b,[a,i],"float32")}};var tK={kernelName:Qp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;_U(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=tV(o,a,i.shape,i.dtype),l=s.outputValues,u=s.outputShape,c=s.indices;return[r.makeTensorInfo(u,i.dtype,l),r.makeTensorInfo([c.length],"int32",c)]}};var nK={kernelName:em,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,l=a.shape[i],u=new Array(s-1),c=0,d=0;d<s;d++)d!==i&&(u[c++]=o.shape[d]);var h=[],f=new Array(s).fill(0),p=o.shape.slice();p[i]=1;for(var m=new Array(l),v=0;v<m.length;v++){f[i]=v;var g=sH({inputs:{x:o},backend:n,attrs:{begin:f,size:p}}),y=eZ({inputs:{x:g},backend:n,attrs:{shape:u}});m[v]=y,h.push(g)}return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},rK=(0,A.Z)((function e(t,n){M(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var l=4*Math.floor(r/4),u=r%4,c="\n        sumValue += dot(values, segFilter);\n    ",d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(h,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var aK={kernelName:tm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,l=[],u=0,c=Px([u],s),d=a;null!=c&&(d=cZ({inputs:{x:a},backend:n,attrs:{perm:c}}),l.push(d),u=jx(1,s)[0]);var h=function(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}(d.shape,u,o),f=Sd([d.shape[u]]),p=eZ({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(p);var m=function e(t,r,a,i,o){var s=t.shape[0],u=t.shape[1],c=function(e,t){var n,r=!1;for(e<=pT?(n=e,r=!0):n=Ud(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Ud(e,n+1);return n}(u,o),d=new rK({windowSize:c,inSize:u,batchSize:s,numSegments:o},r),h=n.compileAndRun(d,[t,a],i);if(l.push(h),h.shape[1]===o)return h;var f=RX({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=GY({inputs:{x:f},backend:n,attrs:{reps:[u/c]}});return l.push(f),l.push(p),e(h,r,p,i,o)}(p,"unsortedSegmentSum",i,ov(a.dtype),o),v=eZ({inputs:{x:m},backend:n,attrs:{shape:h}}),g=v;if(null!=c){l.push(v);var y=Fx(c);g=cZ({inputs:{x:g},backend:n,attrs:{perm:y}})}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},iK=0,oK=[pZ,vZ,yZ,xZ,SZ,CZ,_Z,MZ,DZ,LZ,FZ,zZ,UZ,VZ,HZ,XZ,YZ,JZ,QZ,eH,rH,uH,cH,dH,gH,xH,SH,FV,CH,DH,BH,HH,GH,qH,XH,YH,$H,QH,tG,iG,oG,lG,dG,pG,mG,gG,bG,xG,kG,SG,EG,_G,AG,NG,DG,FG,UG,VG,GG,XG,$G,JG,QG,tq,aq,oq,lq,LV,uq,NH,dq,fq,mq,BV,gq,bq,xq,kq,Tq,Cq,Mq,Iq,Oq,Lq,Fq,zq,Bq,Uq,Zq,Hq,Gq,qq,Xq,Kq,Qq,tX,cX,QV,hX,pX,vX,yX,fH,xX,SX,TX,MX,IX,VV,NX,OX,mH,aX,LX,FX,zX,tZ,WX,ZX,qX,YX,JX,eY,nY,aY,oY,lY,cY,hY,pY,vY,yY,lH,uX,xY,wY,kY,SY,TY,EY,CY,_Y,IY,NY,DY,LY,FY,jY,zY,BY,sX,uZ,WY,ZY,qY,JY,eK,dZ,tK,nK,aK,kX];iK<oK.length;iK++){mm(oK[iK])}var sK=function(e){var t=e.open,n=e.closeModal,r="/icv_web_model/model.json",a=["Pala","Cuerpo","Cabina_Pala","Oruga","Brazo","Balde","Trasero_Pala","Camion","Neumaticos","Tolva","Cabina_Camion","Parrilla","Trasero_Camion"],i=(0,T.useState)(null),o=(0,U.Z)(i,2),s=o[0],l=o[1],u=(0,T.useState)(""),c=(0,U.Z)(u,2),d=c[0],h=c[1],f=(0,T.useState)(!1),p=(0,U.Z)(f,2),m=p[0],v=p[1],g=(0,T.useState)(!1),y=(0,U.Z)(g,2),b=y[0],x=y[1];(0,T.useEffect)((function(){var e=!1;if(!e)return pD(r).then((function(t){e||l(t)})),function(){e=!0}}),[]);var w=function(e,t,n){var r=e.naturalWidth,a=e.naturalHeight;n.clearRect(0,0,n.canvas.width,n.canvas.height),n.fillStyle="#000000",n.fillRect(0,0,t.width,t.height);var i=Math.min(t.width/e.naturalWidth,t.height/e.naturalHeight),o=Math.round(r*i),s=Math.round(a*i);n.drawImage(e,0,0,r,a,(t.width-o)/2,(t.height-s)/2,o,s)},k=function(){var e=Vn(Un().mark((function e(t){var n,r,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=document.getElementById("canvas"),r=n.getContext("2d"),w(t.target,n,r),i=My((function(){return KS.resizeBilinear(fy(n),[640,640]).div(255).expandDims(0)})),s&&i&&s.executeAsync(i).then((function(e){v(!1),x(!0);var t="16px sans-serif";r.font=t,r.textBaseline="top";var i,o=(0,U.Z)(e,4),s=o[0],l=o[1],u=o[2],c=o[3],d=s.dataSync(),h=l.dataSync(),f=u.dataSync(),p=c.dataSync()[0];for(Ay(e),i=0;i<p;++i){var m=d.slice(4*i,4*(i+1)),g=(0,U.Z)(m,4),y=g[0],b=g[1],w=g[2],k=g[3];y*=n.width,w*=n.width,b*=n.height;var S=w-y,T=(k*=n.height)-b,E=a[f[i]],C=h[i].toFixed(2);r.strokeStyle="#00FFFF",r.lineWidth=4,r.strokeRect(y,b,S,T),r.fillStyle="#00FFFF";var _=r.measureText(E+":"+C).width,M=parseInt(t,10);r.fillRect(y,b,_+4,M+4)}for(i=0;i<p;++i){var A=d.slice(4*i,4*(i+1)),I=(0,U.Z)(A,3),N=I[0],R=I[1];N*=n.width,R*=n.height;var O=a[f[i]],D=h[i].toFixed(2);r.fillStyle="#000000",r.fillText(O+":"+D,N,R)}})).catch((function(e){v(!1),alert("Se detecta que la m\xe1quina no est\xe1 completa en la im\xe1gen. Por favor al\xe9jese de la m\xe1quina para que el sistema logre identificar todas las partes.")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,dr.jsx)(Fo,{open:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,dr.jsxs)(qc,{sx:Ft,children:[(0,dr.jsxs)("div",{className:"Dropzone-page",children:[(0,dr.jsxs)("h3",{children:["Inserte su im\xe1gen. ",(0,dr.jsx)("br",{})," Para cambiar solo vuelva a tocar el cuadrado."]}),s?(0,dr.jsxs)(cd.Z,{className:"Dropzone",accept:"image/jpeg, image/png, .jpg, .jpeg, .png",multiple:!1,onDrop:function(e,t,n){b?(v(!0),pD(r).then((function(t){l(t),setTimeout((function(){h(e[0].preview||n[0])}),2e3)}))):(v(!0),setTimeout((function(){h(e[0].preview||n[0])}),2e3))},children:[d?(0,dr.jsx)("img",{alt:"upload preview",onLoad:k,className:"Dropzone-img",src:d}):(0,dr.jsx)("h2",{children:"Presione para elegir una foto desde el archivo"}),(0,dr.jsx)("canvas",{id:"canvas",width:"640",height:"640"})]}):(0,dr.jsx)("div",{className:"Dropzone",children:"Cargando modelo..."})]}),(0,dr.jsx)($c,{open:m,withProgress:!1,loadingData:"Cargando datos..."}),(0,dr.jsx)(od,{onClick:function(){n()},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,dr.jsx)(Jl,{style:{color:"#ccc"}})})]})})},lK=(n.p,function(e){var t=e.open,n=(e.report,e.closeModal),r=(0,T.useState)([]),a=(0,U.Z)(r,2),i=a[0],o=a[1],s=(0,T.useState)(""),l=(0,U.Z)(s,2),u=l[0],c=l[1],d=(0,T.useState)(""),h=(0,U.Z)(d,2),f=h[0],p=h[1],m=localStorage.getItem("_id"),v=Ue();(0,T.useEffect)((function(){xn(m).then((function(e){o(e.data.reverse())}))}),[]);return(0,dr.jsx)(Fo,{open:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,dr.jsxs)(qc,{sx:Pt,children:[(0,dr.jsxs)(Es,{container:!0,style:{paddingTop:50},children:[(0,dr.jsx)(Es,{item:!0,xl:4,md:3,sm:2,xs:null}),(0,dr.jsxs)(Es,{item:!0,xl:4,md:6,sm:8,xs:12,children:[(0,dr.jsxs)("div",{children:[(0,dr.jsx)("h1",{children:"Dejenos sus comentarios de la aplicaci\xf3n."}),(0,dr.jsx)(Us,{value:f,onChange:function(e){p(e.target.value)},placeholder:"Asunto",style:{width:"100%",fontSize:18,fontFamily:"Raleway"}}),(0,dr.jsx)("br",{}),(0,dr.jsx)("br",{}),(0,dr.jsx)(Ds,{"aria-label":"empty textarea",placeholder:"Deje su comentario",minRows:10,maxRows:15,style:{width:"100%",fontSize:18,fontFamily:"Raleway"},value:u,onChange:function(e){c(e.target.value)}})]}),(0,dr.jsx)("br",{}),(0,dr.jsx)("br",{}),(0,dr.jsx)($l,{variant:"contained",color:"primary",style:{borderRadius:50},onClick:function(){!function(){if(f.length>0&&u.length>1){var e={sendDate:Date.now(),message:u,from:localStorage.getItem("_id"),subject:f};navigator.onLine?kn(e).then((function(e){xn(m).then((function(e){o(e.data.reverse())})),alert("Mensaje enviado."),c(""),p("")})):alert("Error de red")}else alert("Asunto y comentario son obligatorios.")}()},children:"Enviar Mensaje"}),("admin"===localStorage.getItem("role")||"sapExecutive"===localStorage.getItem("role")||"superAdmin"===localStorage.getItem("role"))&&(0,dr.jsx)($l,{variant:"contained",color:"primary",style:{borderRadius:50,marginLeft:10},onClick:function(){n(),v("/internal-messages")},children:"Listado de mensajes"})]}),(0,dr.jsx)(Es,{item:!0,xl:4,md:3,sm:2,xs:null})]}),(0,dr.jsxs)(Es,{container:!0,style:{paddingTop:50},children:[(0,dr.jsx)(Es,{item:!0,xl:4,md:3,sm:2,xs:null}),(0,dr.jsx)(Es,{item:!0,xl:4,md:6,sm:8,xs:12,children:(0,dr.jsx)("div",{style:{overFlow:"auto",maxHeight:200,display:"block"},children:i.map((function(e,t){return e.answer||(e.answer="No hay respuesta."),(0,dr.jsxs)("div",{style:{width:"100%",fontSize:16,padding:10,borderRadius:20,borderStyle:"solid",borderWidth:1,borderColor:"#000",marginBottom:30},children:[(0,dr.jsx)("div",{style:{position:"relative",top:0,width:"100%"},children:(0,dr.jsx)(od,{onClick:function(){!function(e,t){navigator.onLine&&confirm("Confirme la eliminaci\xf3n de su consulta.")&&Sn(e).then((function(e){var t=i.filter((function(t){if(t._id!==e.data._id)return t}));o(t),alert("Mensaje borrado.")}))}(e._id)},style:{position:"absolute",right:0,top:0,boxShadow:"none",backgroundColor:"transparent"},children:(0,dr.jsx)(Jl,{style:{color:"#ccc"}})})}),(0,dr.jsx)("p",{children:(0,dr.jsx)("b",{children:e.subject})}),(0,dr.jsx)("p",{style:{whiteSpace:"pre-line"},children:e.message}),(0,dr.jsxs)("p",{style:{textAlign:"right"},children:["Enviado ",Vt(e.sendDate)," "]}),(0,dr.jsx)("p",{children:(0,dr.jsx)("b",{children:"Respuesta:"})}),(0,dr.jsx)("p",{children:e.answer})]},t)}))})}),(0,dr.jsx)(Es,{item:!0,xl:4,md:3,sm:2,xs:null})]}),(0,dr.jsx)(od,{onClick:n,style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,dr.jsx)(Jl,{style:{color:"#ccc"}})})]})})}),uK=n(97),cK=n.n(uK),dK=function(e){var t=e.open,n=e.handleClose,r=e.astList,a=(0,T.useState)(screen.height),i=(0,U.Z)(a,2),o=i[0],s=i[1],l=(0,T.useState)(screen.width),u=(0,U.Z)(l,2),c=u[0],d=u[1];window.addEventListener("resize",(function(e){s(e.target.screen.availHeight),d(e.target.screen.availWidth)}));var h={width:c,height:o,facingMode:"user"};return(0,dr.jsx)(Fo,{open:t,style:{backgroundColor:"#ccc"},id:"cameraModal",children:(0,dr.jsx)("div",{style:{textAlign:"center"},children:(0,dr.jsx)(cK(),{audio:!1,height:o,screenshotFormat:"image/jpeg",width:c,videoConstraints:h,children:function(e){var t=e.getScreenshot;return(0,dr.jsx)("div",{style:{position:"absolute",width:"100%",textAlign:"center",bottom:100},children:(0,dr.jsx)(cs,{onClick:function(){var e=t();r.push({id:Date.now(),image:e}),n()},children:(0,dr.jsx)(Bi,{icon:gr})})})}})})})},hK=T.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.color,i=void 0===a?"primary":a,o=e.position,s=void 0===o?"fixed":o,l=(0,Wi.Z)(e,["classes","className","color","position"]);return T.createElement(Ho,(0,yt.Z)({square:!0,component:"header",elevation:4,className:(0,fo.Z)(n.root,n["position".concat((0,po.Z)(s))],n["color".concat((0,po.Z)(i))],r,"fixed"===s&&"mui-fixed"),ref:t},l))})),fK=(0,St.Z)((function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}}),{name:"MuiAppBar"})(hK),pK=T.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.component,i=void 0===a?"div":a,o=e.disableGutters,s=void 0!==o&&o,l=e.variant,u=void 0===l?"regular":l,c=(0,Wi.Z)(e,["classes","className","component","disableGutters","variant"]);return T.createElement(i,(0,yt.Z)({className:(0,fo.Z)(n.root,n[u],r,!s&&n.gutters),ref:t},c))})),mK=(0,St.Z)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center"},gutters:(0,_t.Z)({paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),regular:e.mixins.toolbar,dense:{minHeight:48}}}),{name:"MuiToolbar"})(pK),vK="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPkAAAD6CAYAAABj2+E+AAABVWlDQ1BEaXNwbGF5IFAzAAAoz2NgYFJJLCjIYWFgYMjNKykKcndSiIiMUmB/yMAOhLwMYgwKicnFBY4BAT5AJQwwGgkwMjB8uwYiGRgu64LMOiU1tUm1XsDXYqbw1YuvRJsY8AOulNTiZCD9B4hTkwuKSoBGpgDZyuUlBSB2B5AtUgR0FJA9B8ROh7A3gNhJEPYRsJqQIGcg+waQrZCckQg0g/EHkK2ThCSejsSG2gsC3C6ZxQU5iZUKAcYMVAclqRUlINo5v6CyKDM9o0TBERhKqQqeecl6OgpGBobmDAygMIeo/hwIDktGsTMIseb7DAy2+////78bIea1n4FhI1An106EmIYFA4MgNwPDiZ0FiUWJYCFmIGZKS2Ng+LScgYE3koFB+AJQT3RxmrERJPZ4nBgYWO/9//9ZjYGBfTIDw98J////XvT//9/FQM13GBgO5AEAFwJl7w8EHeAAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAnOaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMTEtMTNUMDk6Mzk6NTgtMDM6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMTEtMTNUMDk6Mzk6NTgtMDM6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTExLTEzVDA5OjM5OjU4LTAzOjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk5MzM4Y2ZlLWEyODctNDk2MC1iODcyLTk5YWY2YWRjYzYwYSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjJkZTFlNjU4LTg3NDEtYmY0YS05NzYyLTVlZjMxNzAxM2Q3YyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyMjhiZDNiLWViZDEtNDM3Ny04N2UxLTkwNDMxNmNjZmIwOSIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IkRpc3BsYXkgUDMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MjI4YmQzYi1lYmQxLTQzNzctODdlMS05MDQzMTZjY2ZiMDkiIHN0RXZ0OndoZW49IjIwMTktMTEtMTNUMDk6Mzk6NTgtMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTkzMzhjZmUtYTI4Ny00OTYwLWI4NzItOTlhZjZhZGNjNjBhIiBzdEV2dDp3aGVuPSIyMDE5LTExLTEzVDA5OjM5OjU4LTAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPjAwNjQ2MkNDRjBEN0QxMUI4RkYyRTQxQTc0NjAyQzRGPC9yZGY6bGk+IDxyZGY6bGk+MUMwODU5NjM2MTVEOTlDOEY4MDlEOEQ2MzEwNjk2MTI8L3JkZjpsaT4gPHJkZjpsaT4xQzYxNjVFODQwNTlBRjBCQUNFQzcwMUNFRUE4ODUzODwvcmRmOmxpPiA8cmRmOmxpPjU3NjEzM0IwMTc1ODM0QTM5OTRBQTA4RjYxRUJCQzE2PC9yZGY6bGk+IDxyZGY6bGk+NUZCQzczNEJBQzk2MzYxMDI0NzFDMkMxRDQzRkNENUU8L3JkZjpsaT4gPHJkZjpsaT44NEJFRkM1N0VDRjBBMkQ2MTFCRTM4QjIyODU0NDFFQjwvcmRmOmxpPiA8cmRmOmxpPkIxQkEyNkY5RDM3QzE4MTg3RjMwMzRBQTFCQkIzNUVBPC9yZGY6bGk+IDxyZGY6bGk+Q0JDOTNCMzBEQ0YxNkU3RDgzMzYyNDdBMDAyOTU4MzM8L3JkZjpsaT4gPHJkZjpsaT5GOEVEOEI3NEZGRkVDNkRBNDExNzZGRDUyNzY5NTk1NTwvcmRmOmxpPiA8cmRmOmxpPkZFNkJEMEJBNUJFQzE5RDQ3OTE0NEMxNTJDQkJDRUYyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowMEMyNkRBQzI0MjA2ODExOERCQkQ4MzgxN0Q4NjVFNTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6NjgyNWRjMjQtY2ZhOC00ODBlLWE5MmItMmUzNDM5ZThhNWQ0PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo2OUQ3QUJCNDIxMjA2ODExOEY2MkVGRUNFNjdBQ0M0MzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6QTZDNzJERDQwNzIwNjgxMTk1RkVDRDVERDFDODBCMTU8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkQxQjVGNTREQTFDMjExRTFBQzZEQ0JBNUM5RDJGMjAwPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpFMUI3NzlGNzM2MjA2ODExOTEwOUQyOEQxMkM0ODBCNzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6Y2Q3YzM4MWQtM2M1Yy00ZGYxLTg2NWEtODFkZDBlOWI5NDFhPC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HBn8IgAAD+lJREFUeF7t3QlslfWax/GnLTule2lpAaGsIt4rXHZkkaWUTa2CDE7UmQR09Dp4NTG5hnGJjnGJUclMzOio6L3qzCAqA5dNwYV1FOPGDKC54IJQkVX2rTh9Xv8VkJ5z3tO+5z2Hx+8nOeH/vG1SKPmd9z3/Ne3HGgLArHT3JwCjCDlgHCEHjCPkgHGEHDCOkAPGEXLAOEIOGEfIAeMIOWAcIQeMI+SAcYQcMI6QA8YRcsA4Qg4YR8gB4wg5YBwhB4wj5IBxhBwwjpADxhFywDhCDhhHyAHjCDlgHCEHjCPkgHGEHDCOkAPGEXLAOEIOGEfIAeMIOWAcIQeMI+SAcYQcMI6QA8YRcsA4Qg4YR8gB4wg5YBwhB4wj5IBxhBwwjpADxhFywDhCDhhHyAHjCDlgHCEHjCPkgHGEHDCOkAPGEXLAOEIOGEfIAeMIOWAcIQeMI+SAcYQcMI6QA8YRcsA4Qg4YR8gB4wg5YBwhB4wj5IBxhBwwjpADxhFywDhCDhhHyAHjCDlgHCEHjEv7sYZrI4IvvvhCli9fLlu2bJHjx49Lfn6+9OnTR0aMGCHNmjVz3wWkJkIeg4Z7/vz5rjpb69at5dZbb5Xs7Gx3BUg9PK5HoXfwSAFX33//vbz44ouuAlITIY/irbfecq3INm/eLF999ZWrgNRDyKP48ssvXSs6DTqQqgh5FCdPnnSt6Px+H5AMhDyKwsJC14pOO+CAVEXIo+jfv79rRZaZmSk9evRwFZB6CHkUw4YNkw4dOrjqXGlpaTJlyhRp2rSpuwKkHsbJYzh27JjMnTtX1q1bJ2f+qvLy8mTy5MncxZHyCLlPP/zwg9fbfuLECS/gHTt2lPR0HoSQ+gg5YBy3IsA4Qg4Yx+N6FMuWLfNesTz88MOulViHDh2S3bt3e6/9+/d7/QP6Uo0aNfJWxOlimZycHCkqKoqr1//I1m9k13vvuCp8Ob/rI60uvMhV/vxYXS07/vLfrvqF9HQpnnilK37dCHkUixcvliVLlrgqslmzZrlWsHbu3CkbNmzwlrhqp592/vmlw3u6JFaHALt06SLdu3f3wh/JyQP7ZfXIIXLq2FF3JVy5/QbIJf8e32KfXe8sl/V/uMVVZ8sfMlx+869Pu+rXjZBHkYyQ6x167dq18vHHH0tVVZW7GowLLrhA+vbt662Fb968ubt62sa7/yjfzX/DVeEbsOBNad7+AlfF9tk//oPsXlH304cGXIMOPpOnjK1bt8oLL7wg9957ryxatCjwgKuvv/7aG/O/55575NVXX5W9e/e6r/ykTeUk10qO7a/Nca3Yjn1XJXtWveeqszUrKZW8wUNdBUKeZDt27JDZs2fLY4895t29T5065b6SOLq7zapVq+SBBx7wwn7gwAHvek7vPtKirJPXToaqea/JqZq/mx/6vT9G+F2VTp4qacxh+Bm/iSTRlWt6x9ZOu08++cRdDVd1dbUX9gcffFA2btzoXSu5arL3ZzKc2LdXdi5b6qrINNwa8rqkN25c80RytaugCHkSbNu2TR599FFZunRpKHfuWI4cOfLzxhfaI61BSRY/j+x7Vq+Uo1XbXXW2wvIKaZyb5yooQh6y999/X5544gnvMT0VNc7JlYKR5a4K374PP5DDW6JvwrH99chvBKXX/K1roRYhD4kOYsybN09eeeWVn8e2U1UyH9nVtrn/6VrnOr5rl+yOMJ6f2a27ZF/Sy1WoRchDoI/kL7/8srzzTvCTTXQoLOilrjpm3bxde1eF77sF8+TUsWOuOlvVvLneJJi6lF4z1bVwJsbJowhinFx/vS+99JJ8+OGH7kr96O4zOqmlrKzMm82mu9acuee7/hydEac7yOrwm37G1s602p7zWCoqKmTs2LGuEvn62X+TLf/yhKvCd+E/P3LujLWaf+P/TBgtR77d6i6cltGypQxevloy6hj//7Uj5FEEEfLXX39d3nuv7vHcWFq1aiUDBgzwJrBosOOl/7XffPONrFmzRj766CNv6CySX4ZcH4vXlA+NeNdMtOzf9pLefzr7sX3v+2vlkxv/zlVnazv1Ounyx39yFc5EyKNoaMh1eErHoeOVlZUl5eXlXsAbB9TTffjwYXn77bfl3XffrbNP4JchV+tv/73sejv23P1E6Td3gbTs0tVVNR97at6kzpx22yizlc7fdRUi4TN5gujsMr2Lx0Pnmw8fPlxmzpwpQ4YMCSzgqkWLFjJhwgS5++67pWfPnu5qdCVXXeNaybH9tf9yrZ+kN2kijVpl/fwi4P4Q8gTQLaN0iqpONvFL79633HKLVFZWJvR8NV2lNn36dLn22mtjvonkDR4iTYvbuCp8VfPfkOojR1yF+iLkCbBw4ULZs2ePq2IrLS2VO++8U7p2Pf1ommi6E+1tt93mvblEolND21yZvNlj1dqRuGShq1BfhDxg2tG1YsUKV8XWuXNnmTFjRtSwJUq7du3kjjvukNzcXHflXCWVk5I6D3z7q5HHzOEPIQ/YggULvF5tP9q2bSvTpk1L6vHHGnA9mTXSm4w+rucNutRV4dv/f+vl4KYNrkJ9EPIA6Smo+vJDQ3XTTTfVua47bAUFBTJ48GBXnavk6imulRzb5vyHa6E+CHmA/JyCqrQX/YYbbkjKI3p95A+7TJrkF7gqfDsW/8X7fI76IeQB0QUnfu/iQ4cO9T6Lny/SMjKS2wF3+HBN0Be4CvEi5AHRWWV+6BDWuHHjXHX+aJPsRSs8stcbIQ+AdrTpri5+jBw5MqkdbfXVvG07b+FKshz8fJPs/9/PXIV4EPIA6LCZn51UdS76oEGDXHX+KZmU3A44htPqh5AHQLdN9qNfv36BTlUNW8Flo6RxlG2dE23H4oXe1tGIDyEPgO6J7oeG/Hymc8eLJ1a6Kny6OGXPWn99HziNkAdAF6PEoiehFhcXu+r8lcxdY9KbNpPc/gNdBb8IeQCOHo196kiY89ITSbdszu71O1eFq2jseGmcne0q+EXIQ6Knl1hRcnVylqCWXnOtayEehDwkun2TFYWjx/y0YUOIWl3U03shfoQ8JPqZ3IqMZs2leOIVrgpH2ylstVxfhDwkqbAQJUhhnpvWKCtLWlecf7MEUwUhD0nQ2yYnW2a3CyXrootdlVhtrrja61lH/RDykOiWUNa0CakDjv3UG4aQh8RiyIsqxktGixauSoy8gZfGdWY5zkXIQxLPnm/nCz3QoHVN0BOJu3jDEfKQ6MkmFiVyzLxpUbHkD7/MVagvQh6Sb7/91rVsyer5G8ns2s1VwdJVb2npGa5CfRHyADRp0sS1Ivv8889dy55EbCiR1qhR0g93sIKQB6B9+9gngOrj+u7du11lS/GEKwIf4iocMVqaFCRvXzlLCHkAOnTo4FrRffDBB65lix5ZVDiq3FXBKJ3CPPWgEPIA9OjRw7Wi05DrWeUWBblrTMuyzpLT5/xee59KCHkAOnbsKJmZma6KTIfR1q1b5ypbcnr3kRYdOrqqYUoYNgsUIQ9Aenq6XHyxvymeS5curfPoYAuCGE7TyTXFl1/pKgSBkAfk0kv9HSWknW/LliXvzO9EKr68UtIbuIdd0bjLpVHL2E9F8I+QB0TPNfPbAach37Ztm6vsaJyTKwWXjXRV/dDhFjxCHqBRo0a5VnQnT56U559/Xo6k0Nnbfg9pjKVk0t+4VvyyL+mdsIk1v2aEPEA9e/b0vc3Trl27vKBXV1e7K8mzf/9+efPNN13VMHoAQ7PStq6KD9s7JQYhD5AeZDhx4kRXxaZnp82ePTupQT906JA89dRT3ptOIGp+B/XZ0bVxbp4Ulle4CkEi5AHr0qWL9O3b11WxrV+/Xp5++mlfO74GTYP95JNPSlVVlbsSjDZXTop7znlJ5aQGd9qhboQ8ASorK32Nm9fSee2PP/64bN++3V1JPD31RX9mIlbH6XTU/GHDXeWD3v0n1/+zPKIj5AnQsmVLue6667zHd7/06GMN3fLlyxP6+K6bV8yZM8d7etBH9VpBj93HM2aeP2S4NCspdRWCRsgTpHv37lJREd9nTA3a/Pnz5ZFHHvEe44Pq8Vb6xrFy5Uq5//77ZfXq1e7qadrjH6S8wUO89eB+sDFEYhHyBBozZoz06tXLVf7pXf3ZZ5+Vhx56yAvmmXfceO3du1cWLVok9913n8ydO1cOHjzovpJY+pncz46u2hOvbwhInLSau0VwtwtjFi9eLEuWLHFVZLNmzXKtc+kd9JlnnpFNmza5K/HTabOdO3f2XmVlZVJUVCRZWVnuq6fpf6XOj9eOND2EcePGjb4n3ei03GnTprkqGEertsvasSP0L+aunKvTH+6U9n8f7M/F2Qh5FEGEXB0/flyee+65BgX9l/QIZP3sr1s968o27Z3XV30/Wyci5Oqz30+X3atWuOps2ps+aNlKb6YcEofH9RDozjE33nij9O7d211pOA3zvn37vEf7nTt3yoEDB1Jy4Uu0XWNajxlHwENAyEOSkZEh119/vYwfPz6uXvfzXcGwEdIkv+4dXlhSGg5CHiINd3l5udx8883SqlW4BwYmi+7V1uaKq1x1mp7Akv3b+DslET9CngTdunWTmTNnyoABA9yV5NKnDO3US5S6etlZbRYeQp4kegDi1KlTZcaMGb6XqCaCdrjdddddMnx4HDPU4qQnoOjClVq6XrxonP85/mgYQp5knTp1kttvv12mT5/uDY+FQT826Io5/bnao15YWOi+kjhndsAV1zy+Zxg75TWVMYQWRVBDaPHQcW2dkfbpp58GPnElPz/f6+EfOHCg1w7TqePHZc3oIXJi3z7p/8YiaVHWyX0FiUbIo0hGyGvp2PeWLVu8hST659atW+OeeqpDd7onfNeuXb1pttpOZs/+Xx97SA5s3CC9nvuzu4IwEPIodAzazyotv5s4NoQGvPaABl0iqnd5HRev3V1GP+PrBJmcnBzvVVxcLAUFBSk1XHdoy1/l8ObNUjh6jLuCMBBywDg63gDjCDlgHCEHjCPkgHGEHDCOkAPGEXLAOEIOGEfIAeMIOWAcIQeMI+SAcYQcMI6QA8YRcsA4Qg4YR8gB4wg5YBwhB4wj5IBxhBwwjpADxhFywDhCDhhHyAHjCDlgHCEHjCPkgHGEHDCOkAPGEXLAOEIOGEfIAeMIOWAcIQeMI+SAcYQcMI6QA8YRcsA4Qg4YR8gB4wg5YBwhB4wj5IBxhBwwjpADxhFywDhCDhhHyAHjCDlgHCEHjCPkgHGEHDCOkAPGEXLAOEIOGEfIAeMIOWAcIQeMI+SAcYQcMI6QA8YRcsA4Qg4YR8gB4wg5YBwhB4wj5IBxhBwwjpADxhFywDhCDhhHyAHjCDlgHCEHjCPkgHGEHDCOkAPGEXLAOEIOGEfIAeMIOWAcIQeMI+SAcYQcMI6QA8YRcsA4Qg4YR8gB4wg5YBwhB4wj5IBxhBwwjpADpon8P160iYdFVeG6AAAAAElFTkSuQmCC",gK=n(2120),yK=n.n(gK),bK=Nt((function(e){return{appbar:{height:80,width:"100%",backgroundColor:"#fff",borderBottomRightRadius:30,color:"#000"},locationIcon:{height:60,width:100,display:"flex",alignItems:"center",justifyContent:"center"},locationText:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"center",fontSize:"1rem"},languageSelector:{marginRight:15,"&.MuiInputBase-root":{color:"white"},"& .MuiSelect-icon":{color:"white"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white!important"}}}})),xK=function(){var e=bK(),t=(0,T.useContext)(Jwe).isOnline,n=$we().navBarOpen,r=Vwe(),a=r.isAuthenticated,i=r.userData,o=r.admin,s=r.site,l=rke().message,u=Ue();(0,T.useEffect)((function(){console.log("La red est\xe1 o no conectada: ",t),t||yK()({icon:vK,title:"Alerta",subtitle:"P\xe9rdida de conexi\xf3n",message:"El dispositivo no cuenta con conexi\xf3n a internet.",theme:"red",native:!0})}),[t]);return(0,dr.jsx)(fK,{className:e.appbar,children:(0,dr.jsx)("div",{className:"header-bar",children:(0,dr.jsxs)(mK,{children:[!n&&(0,dr.jsx)(mt,{to:"/",children:(0,dr.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAABpCAYAAADoScsPAAABVWlDQ1BEaXNwbGF5IFAzAAAoz2NgYFJJLCjIYWFgYMjNKykKcndSiIiMUmB/yMAOhLwMYgwKicnFBY4BAT5AJQwwGgkwMjB8uwYiGRgu64LMOiU1tUm1XsDXYqbw1YuvRJsY8AOulNTiZCD9B4hTkwuKSoBGpgDZyuUlBSB2B5AtUgR0FJA9B8ROh7A3gNhJEPYRsJqQIGcg+waQrZCckQg0g/EHkK2ThCSejsSG2gsC3C6ZxQU5iZUKAcYMVAclqRUlINo5v6CyKDM9o0TBERhKqQqeecl6OgpGBobmDAygMIeo/hwIDktGsTMIseb7DAy2+////78bIea1n4FhI1An106EmIYFA4MgNwPDiZ0FiUWJYCFmIGZKS2Ng+LScgYE3koFB+AJQT3RxmrERJPZ4nBgYWO/9//9ZjYGBfTIDw98J////XvT//9/FQM13GBgO5AEAFwJl7w8EHeAAAAAJcEhZcwAACxMAAAsTAQCanBgAAAnOaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMTEtMTNUMDk6Mzk6NTgtMDM6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMTEtMTNUMDk6Mzk6NTgtMDM6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTExLTEzVDA5OjM5OjU4LTAzOjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk5MzM4Y2ZlLWEyODctNDk2MC1iODcyLTk5YWY2YWRjYzYwYSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjJkZTFlNjU4LTg3NDEtYmY0YS05NzYyLTVlZjMxNzAxM2Q3YyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyMjhiZDNiLWViZDEtNDM3Ny04N2UxLTkwNDMxNmNjZmIwOSIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IkRpc3BsYXkgUDMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MjI4YmQzYi1lYmQxLTQzNzctODdlMS05MDQzMTZjY2ZiMDkiIHN0RXZ0OndoZW49IjIwMTktMTEtMTNUMDk6Mzk6NTgtMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTkzMzhjZmUtYTI4Ny00OTYwLWI4NzItOTlhZjZhZGNjNjBhIiBzdEV2dDp3aGVuPSIyMDE5LTExLTEzVDA5OjM5OjU4LTAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPjAwNjQ2MkNDRjBEN0QxMUI4RkYyRTQxQTc0NjAyQzRGPC9yZGY6bGk+IDxyZGY6bGk+MUMwODU5NjM2MTVEOTlDOEY4MDlEOEQ2MzEwNjk2MTI8L3JkZjpsaT4gPHJkZjpsaT4xQzYxNjVFODQwNTlBRjBCQUNFQzcwMUNFRUE4ODUzODwvcmRmOmxpPiA8cmRmOmxpPjU3NjEzM0IwMTc1ODM0QTM5OTRBQTA4RjYxRUJCQzE2PC9yZGY6bGk+IDxyZGY6bGk+NUZCQzczNEJBQzk2MzYxMDI0NzFDMkMxRDQzRkNENUU8L3JkZjpsaT4gPHJkZjpsaT44NEJFRkM1N0VDRjBBMkQ2MTFCRTM4QjIyODU0NDFFQjwvcmRmOmxpPiA8cmRmOmxpPkIxQkEyNkY5RDM3QzE4MTg3RjMwMzRBQTFCQkIzNUVBPC9yZGY6bGk+IDxyZGY6bGk+Q0JDOTNCMzBEQ0YxNkU3RDgzMzYyNDdBMDAyOTU4MzM8L3JkZjpsaT4gPHJkZjpsaT5GOEVEOEI3NEZGRkVDNkRBNDExNzZGRDUyNzY5NTk1NTwvcmRmOmxpPiA8cmRmOmxpPkZFNkJEMEJBNUJFQzE5RDQ3OTE0NEMxNTJDQkJDRUYyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowMEMyNkRBQzI0MjA2ODExOERCQkQ4MzgxN0Q4NjVFNTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6NjgyNWRjMjQtY2ZhOC00ODBlLWE5MmItMmUzNDM5ZThhNWQ0PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo2OUQ3QUJCNDIxMjA2ODExOEY2MkVGRUNFNjdBQ0M0MzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6QTZDNzJERDQwNzIwNjgxMTk1RkVDRDVERDFDODBCMTU8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkQxQjVGNTREQTFDMjExRTFBQzZEQ0JBNUM5RDJGMjAwPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpFMUI3NzlGNzM2MjA2ODExOTEwOUQyOEQxMkM0ODBCNzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6Y2Q3YzM4MWQtM2M1Yy00ZGYxLTg2NWEtODFkZDBlOWI5NDFhPC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HBn8IgAAB6ZJREFUeNrtnX1oVlUcx+82ddOardSYgmZTwwm+la0MbZQRNSlXWFLCUMOMslWGFma4CjQEUysqNGOlYLM/XBnRaqZh2RuhEZmVurQXZUZppqbLPX1P/CZPj8+9O+c+595z77m/Ax98u297fh/Pc8/b7zipVMphGFn4Q2BYGIaFYVgYhoVhWBiGYWEYFoZhYRgWhmFhGBaGYbQL01Fqa2uvBU3gGEiBPeAp0NPhEtliRBhIMY8kycZ3oB+HhoX5D8gwwUOWDj7k0LAwHcI0SwgjGMvhYWGEMMclhZnL4WFhhDCnJYVZwOFhYYQwuySFuZ3Dw8IIYR6VkKUVnMvhYWGEMEVgm4cs4ivrFg4NC5PeD1MM6kF7hiw/gioOCwtzVk8vidMPTAY1YDwo4JCwMK7CcGFhWBgWhoXhYr5ZfbgzwvoAcK9e4HIwBTxAz1dHzAf3iVYbHaPU1P9gxCWDwIMGuVT188A5XcA0F2pMCFMn03EXoCBDSIz14GfJTsQORKtuN1gLZoD+nXz4JeA4SBlikw9hJnlc7+1ECIPr9QWPg68VBZHhUzAbnOcSgHqDwggGKwqz0eNaE60WBte5DDSAtgBEyURMBHsBDMgIwHjDwixRkKU/OO1ynRaQb6UwOH8oeCMESbJxisS5MC0QOw0KcwgUSgqz0OM6j5h66Q1MGJxXCJ4MqUbpjD/ADRSIOYZrmTslZMkH+1zOPwn6WCUMzhkJvo2AKOnUUTB604duSpgtEsJUeZy/1mSzWrswOH46OBExWc4IQwFZZ7iWKe9EmA0e515lhTA4Lg8sjaAo2YSZYFiY5R6ylII2l/N2mO640yIMjukCXg0o0KLz8KhmYfLAboPC/A6KXISZ73HerNgLQzXLGg0BFUtaXgRTqQneM+M++aAPGAfuoSkZB/0IIxGYMKjJIosQeY/L8X+Cc2wQZkUOkoiALwLlPltiQtYrwOq0RXiywnhV/WGwLYswXl+Vz0ZhLCknYfBv9/oU5QCNC3XX2IN8Psl3QkYYiZfLMBie8TyFNITRQV7UBh99C4O/rwAnFUURUz6XBbkElyaCvSkpTJVhYZ6L22i1L2HESDFoUZTlV7GGO8SR7+kZ667qXDrI9hsU5qz3EluFWa4oy3ZQGvZ8EXp5PuAmDElTZ7iWuctqYfDnMQoL4ASbTWaBEAOQYJ+HMF6DfGHwue3CNCvI8qXbVIOQpRkMZnl0lr1juJYZbaUwlEdGpSVU6sSgIGDVhoVZaaswzQqtocq4zI2lqZAHDQpzFBRbJQzNa5GtXZbHbUI1ArbIcC0zyzZhlknK8kscU50hYGWGhdlhjTDUBS87Sbs2rss2xERtw9JU2CJMhcLYUPcYCzPFsDCrbRHmCcnjljgxLjSW85tBYcQymBIbhHlP8rhhTswLArbUcC1zmw3CHJE4psWxoIjpk4ZrmAtsEEaGlx1LCoK21ZAwr9jyDiPD3RYJU2NImDFJEqbSImF6gMMhy/KFTf0wMgx0LCpiclPIwkxLmjAllgkzKuRVBN2TJox1OfHEXJWQhFlq1Wh1EmsYEmZmFNOA2CJMfwuFKaapB0HK0uT3+eIuzDjHwoKArgpYmOqkCjPDUmEqApTlJ1CQVGGedywtCOpXAQmT0y4xURbmmMQxuywW5v4AZDklluvaKswWyePKLBUmiAycDbk+V5SFWewnQ4Jl0qzRLEylzcJcLXmcWD7bxVJhdGbg/EbHM0VZmALaaEvm2GkW1zK7NAkz22phxMPh15WSwohN0ossFeZhTWuQeiZBmNF+sz1ZJIyODJwv6XqeOKx8/ERSmL/BKEulWZ+jMCOSJEy1Qi3zQxQW4qc9e54mYXLJwPmRzp8pDsKIBW2fKUizCXSLgCyluvbepsSFe30KMzVRwtCHf43ikMEGk9LQHkxi55R6jV9LfjJwtoJuiROGgqCak/d9E+utcc9BlM41pVkYkYHzH0VhFuv++eIkTC+FfpkOxN4Dw0OU5UZwKO3+9TqvDwEaFWRpBwMTKwwF5HrF1GUpSok6F3QNUJRiShCdee8GzcJMVBBmYxA/axzz9C70ORViJ7W48jWK0o12Y3Or+Ro1C1NA81lkhKliYZwz6dxfz2EOzU5K8Nw7B1EG0L5MBzq5V6PugElm4BQtqnwW5v//s5tynHzVRunQFlArrK+HoGXgZhpB36FwjyCEuYjeT7yEmRfU12+cdzPpAd7VvIuJSMq8n2qh7yn3TC77MDUGEbROMnCKYYTeLIx7TbMuwvslBSXMrR7CvBZkSzD2O7JRT/BjPlpPcRamq0cGzrEsjJw41ynuZRRbYUiaxVlk2R50X5Ntu8qW0D5GUZBF7LryUIDCDM4izEwWxp8448E2kzULGBLCtIf0DJxHctmlJNHCpIlzE9gakiTt4C1wZYjzZO5IE2ZFGPe0Wpg0cUZS131rAKLspV3ZLg57oDMjA2c5C6N/zEdMLK8UqVrBxzRLT1WQv2h7nQWUSzjPMVggyjNgc1j3MyHMUBrT8SSk0eVCMZpN95xDPbkraPfYevr90zSUMEm8l+gci9IkzDAw2VphmGTCHwLDwjAsDMPCMCwMw8IwDAvDsDAMC8OwMAwLw7AwDOPGv3Wb5ZG6WpljAAAAAElFTkSuQmCC",height:75})}),a&&i&&(0,dr.jsx)(T.Fragment,{children:(0,dr.jsx)("div",{className:"user-name",onClick:function(){u("/user-profile")},children:(0,dr.jsxs)("dl",{children:[(0,dr.jsx)("dt",{style:{margin:0},children:(0,dr.jsxs)("div",{children:[" ",(0,dr.jsxs)("p",{className:"nombre",children:[" ",i.name," ",i.lastName," "]})," "]})}),(0,dr.jsxs)(Es,{container:!0,children:[i.roles&&i.roles.map((function(e,t){return(0,dr.jsxs)(Es,{item:!0,style:{marginRight:10},children:[(n=e,"superAdmin"===n?"Super Administrador":"admin"===n?"Administrador":"sapExecutive"===n?"Ejecutivo SAP":"inspectionWorker"===n?"Operario de Inspecci\xf3n":"maintenceOperator"===n?"Operario de Mantenci\xf3n":"shiftManager"===n?"Jefe de turno - Inspecci\xf3n y Mantenci\xf3n":"chiefMachinery"===n?"Jefe de maquinaria":"observer"===n?"Observador":void 0)," |"]},t);var n})),(0,dr.jsx)(Es,{item:!0,children:s&&s.descripcion})]})]})})}),(0,dr.jsxs)("div",{style:{position:"absolute",right:10},children:[o&&(0,dr.jsx)("button",{onClick:function(){pc("test",localStorage.getItem("_id"),"Env\xedo prueba","Todos los usuarios","Se env\xeda notificaci\xf3n de prueba a todos los usuarios.")},children:"Notif. Test"}),(0,dr.jsxs)("p",{children:[" ",(0,dr.jsx)("b",{children:l.length>0&&l})," ",(0,dr.jsx)(Bi,{icon:yr,color:t?"#2FB83F":"#B62800"})," ",t?"Online":"Offline"]}),!t&&(0,dr.jsx)("p",{children:"Sin red"})]})]})})})},wK=n(9864),kK=Nt((function(e){return{button:{borderRadius:20,maxWidth:400,minWidth:300,width:"100%"}}})),SK=function(){var e=Xwe().dictionary,t=Vwe(),n=t.login,r=t.loginRut,a=(0,T.useState)(""),i=(0,U.Z)(a,2),o=i[0],s=i[1],l=(0,T.useState)(""),u=(0,U.Z)(l,2),c=u[0],d=u[1],h=(0,T.useState)(""),f=(0,U.Z)(h,2),p=f[0],m=f[1],v=(0,T.useState)("rut"),g=(0,U.Z)(v,2),y=g[0],b=g[1],x=(0,T.useState)("email"),w=(0,U.Z)(x,2),k=w[0],S=w[1],E=kK(),C=Ue(),_=ze(),M=(0,T.useState)("password"),A=(0,U.Z)(M,2),I=A[0],N=A[1],R=function(e){var t;switch(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.name){case"rut":return d((0,wK.format)(e.target.value));case"email":return s(e.target.value);case"password":return m(e.target.value)}};(0,T.useEffect)((function(){_.pathname.length}),[]);var O=function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"email"!==y){e.next=8;break}return e.next=4,n(o,p);case 4:e.sent.state&&C("/welcome",{replace:!0}),e.next=13;break;case 8:if("rut"!==y){e.next=13;break}return e.next=11,r(c,p);case 11:e.sent.state&&C("/welcome",{replace:!0});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,dr.jsx)(Es,{container:!0,style:{padding:10,height:"50%"},alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("form",{onSubmit:O,children:(0,dr.jsxs)(Es,{container:!0,item:!0,spacing:2,children:["rut"===y&&(0,dr.jsx)(Es,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:(0,dr.jsx)(ql,{type:"text",name:"rut",label:e.login.rutField,value:c,onChange:R,variant:"outlined",style:{maxWidth:400,minWidth:300,width:"100%"}})}),"email"===y&&(0,dr.jsx)(Es,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:(0,dr.jsx)(ql,{type:"email",name:"email",label:e.login.emailField,value:o,onChange:R,variant:"outlined",style:{maxWidth:400,minWidth:300,width:"100%"}})}),(0,dr.jsxs)(Es,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:[(0,dr.jsx)(ql,{type:I,name:"password",label:e.login.passwordField,value:p,onChange:R,variant:"outlined",style:{maxWidth:400,minWidth:300,width:"100%"}}),(0,dr.jsxs)(cs,{style:{width:0,position:"relative",right:25,zIndex:1,padding:0},onClick:function(){N("password"===I?"text":"password")},children:["password"===I&&(0,dr.jsx)(Bi,{icon:Cr}),"text"===I&&(0,dr.jsx)(Bi,{icon:_r})]})]}),(0,dr.jsx)(Es,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:(0,dr.jsx)($l,{className:E.button,style:{marginBottom:20},type:"submit",variant:"contained",color:"primary",children:e.login.loginButton})}),(0,dr.jsx)(Es,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:(0,dr.jsxs)($l,{className:E.button,variant:"contained",onClick:function(){"email"===y?(b("rut"),S("email")):(b("email"),S("rut"))},children:["Usar ",k]})}),(0,dr.jsx)(Es,{item:!0,xs:12,container:!0,justifyContent:"center",children:"rut"===k&&(0,dr.jsx)("p",{className:"link-text",onClick:function(){C("/reset-password")},children:e.login.forgotPasswordText})})]})})})},TK={left:"right",right:"left",top:"down",bottom:"up"};var EK,CK,_K,MK,AK={enter:io.x9.enteringScreen,exit:io.x9.leavingScreen},IK=T.forwardRef((function(e,t){var n=e.anchor,r=void 0===n?"left":n,a=e.BackdropProps,i=e.children,o=e.classes,s=e.className,l=e.elevation,u=void 0===l?16:l,c=e.ModalProps,d=(c=void 0===c?{}:c).BackdropProps,h=(0,Wi.Z)(c,["BackdropProps"]),f=e.onClose,p=e.open,m=void 0!==p&&p,v=e.PaperProps,g=void 0===v?{}:v,y=e.SlideProps,b=e.TransitionComponent,x=void 0===b?ho:b,w=e.transitionDuration,k=void 0===w?AK:w,S=e.variant,E=void 0===S?"temporary":S,C=(0,Wi.Z)(e,["anchor","BackdropProps","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"]),_=ao(),M=T.useRef(!1);T.useEffect((function(){M.current=!0}),[]);var A=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?TK[t]:t}(_,r),I=T.createElement(Ho,(0,yt.Z)({elevation:"temporary"===E?u:0,square:!0},g,{className:(0,fo.Z)(o.paper,o["paperAnchor".concat((0,po.Z)(A))],g.className,"temporary"!==E&&o["paperAnchorDocked".concat((0,po.Z)(A))])}),i);if("permanent"===E)return T.createElement("div",(0,yt.Z)({className:(0,fo.Z)(o.root,o.docked,s),ref:t},C),I);var N=T.createElement(x,(0,yt.Z)({in:m,direction:TK[A],timeout:k,appear:M.current},y),I);return"persistent"===E?T.createElement("div",(0,yt.Z)({className:(0,fo.Z)(o.root,o.docked,s),ref:t},C),N):T.createElement(Fo,(0,yt.Z)({BackdropProps:(0,yt.Z)({},a,d,{transitionDuration:k}),BackdropComponent:Vo,className:(0,fo.Z)(o.root,o.modal,s),open:m,onClose:f,ref:t},C,h),N)})),NK=(0,St.Z)((function(e){return{root:{},docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100%"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}}),{name:"MuiDrawer",flip:!1})(IK),RK=(0,Ol.Z)(T.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu"),OK=Nt((function(e){return{drawer:{width:250,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:330,maxWidth:"100vw",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflow:"hidden"},drawerClose:{width:"15vw",maxWidth:99,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:" hidden"},drawerPaper:{marginTop:0,backgroundColor:"#212121",border:"none",borderEndEndRadius:30,borderTopRightRadius:30},drawerContainer:{position:"relative"},drawerBottom:{position:"absolute",backgroundColor:"rgb(228, 228, 228)",width:"100%",display:"flex",bottom:0,padding:5},bottomButtons:{height:54,width:54},sideButtons:{width:"5vh",maxWidth:26,height:"2.5vh",color:"#FFFFFF"},sideButtonsCloseMenu:{width:26,height:26,color:"#FFFFFF",paddingBottom:100,paddingTop:40},sideButtonsOpenMenu:{width:26,height:26,color:"#FFFFFF",paddingBottom:20,paddingTop:40},divider:{width:"100%",backgroundColor:"rgba(255, 255, 255, 0.18)"},searchField:{"& .MuiFormLabel-root":{color:"white"},"& .Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white!important"},"& .fa-search":{color:"white"},"& .MuiInputBase-input":{color:"white"}},listItemText:{whiteSpace:"normal",color:"white",fontWeight:"bold"}}})),DK=function(){var e,t,n=Vwe(),r=n.isSapExecutive,a=n.isShiftManager,i=n.isChiefMachinery,o=n.admin,s=n.logout,l=rke().getReports,u=OK(),c=$we(),d=c.navBarOpen,h=c.handleNavBar,f=(0,T.useState)(""),p=(0,U.Z)(f,2),m=p[0],v=p[1],g=ze(),y=(0,T.useState)(!0),b=(0,U.Z)(y,2),x=b[0],w=b[1],k=(0,T.useState)(!0),S=(0,U.Z)(k,2),E=S[0],C=S[1],_=(0,T.useState)(!1),M=(0,U.Z)(_,2),A=M[0],I=M[1],N=(0,T.useState)(!1),R=(0,U.Z)(N,2),O=R[0],D=R[1],L=(0,T.useState)(!1),P=(0,U.Z)(L,2),F=P[0],j=P[1],z=function(){d&&h()},B={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return B.Android()||B.BlackBerry()||B.iOS()||B.Opera()||B.Windows()},other:function(){return navigator.userAgent.match(/Mozilla/i)||navigator.userAgent.match(/AppleWebKit/i)||navigator.userAgent.match(/Chrome/i)||navigator.userAgent.match(/Safari/i)}};return(0,T.useEffect)((function(){o&&w(!1),(o||r||a||i)&&C(!1)}),[o,r,a,i]),(0,T.useEffect)((function(){g&&v(g.pathname)}),[g]),(0,dr.jsx)("div",{children:(0,dr.jsx)(NK,{className:(0,fo.Z)((0,fo.Z)(u.drawer,(e={},(0,_t.Z)(e,u.drawerOpen,d),(0,_t.Z)(e,u.drawerClose,!d),e))),variant:"permanent",classes:{paper:(0,fo.Z)(u.drawerPaper,(t={},(0,_t.Z)(t,u.drawerOpen,d),(0,_t.Z)(t,u.drawerClose,!d),t))},children:(0,dr.jsxs)("div",{className:u.drawerContainer,children:[(0,dr.jsx)(Es,{container:!0,spacing:2,style:{padding:d?8:"8px 0 0 0"},children:(0,dr.jsxs)(Es,{item:!0,xs:12,container:!0,children:[(0,dr.jsx)("div",{style:{width:"100%",textAlign:d?"right":"center"},children:(0,dr.jsx)(cs,{title:d?"Cerrar Men\xfa":"Abrir Men\xfa",onClick:h,className:d?u.sideButtonsOpenMenu:u.sideButtonsCloseMenu,children:d?(0,dr.jsx)(Jl,{}):(0,dr.jsx)(RK,{})})}),d&&(0,dr.jsxs)("div",{style:{padding:10},children:[(0,dr.jsx)("img",{height:60,src:"./assets/Logologo_icv_1.svg",alt:""}),(0,dr.jsx)("p",{style:{color:"#fff",margin:0},children:"Ingenier\xeda Civil Vicente"})]}),(0,dr.jsx)("div",{style:{height:1,backgroundColor:"#fff",width:"100%",marginRight:10,marginLeft:10}}),(0,dr.jsx)("div",{style:{width:"100%",marginTop:40,textAlign:d?"left":"center"},children:(0,dr.jsx)(cs,{onClick:z,title:"Inicio",children:(0,dr.jsxs)(mt,{to:"/welcome",className:u.sideButtons,style:{textDecoration:"none",color:"/welcome"===m?"#BE2E26":"#FFFFFF"},children:[(0,dr.jsx)(Bi,{icon:Mr})," ",d?" Inicio":""]})})}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,dr.jsx)(cs,{onClick:z,title:"Listado Asignaciones",children:(0,dr.jsxs)(mt,{to:"/assignment",className:u.sideButtons,style:{color:m.includes("/assignment")?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,dr.jsx)(Bi,{icon:Nr})," ",d?" Listado Asignaciones":""]})})}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,dr.jsx)(cs,{onClick:z,title:"M\xe1quinas",children:(0,dr.jsxs)(mt,{to:"/machines",className:u.sideButtons,style:{textDecoration:"none",color:m.match("/machines")?"#BE2E26":"#FFFFFF"},children:[(0,dr.jsx)(Bi,{icon:qr})," ",d?" M\xe1quinas":""]})})}),!x&&(0,dr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,dr.jsx)(cs,{onClick:z,title:"Obras",children:(0,dr.jsxs)(mt,{to:"/sites",className:u.sideButtons,style:{color:"/sites"===m?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,dr.jsx)(Bi,{icon:Or})," ",d?" Obras":""]})})}),!E&&(0,dr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,dr.jsx)(cs,{onClick:z,title:"Ordenes de Trabajo",children:(0,dr.jsxs)(mt,{to:"/reports",className:u.sideButtons,style:{color:m.includes("/reports")?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,dr.jsx)(Bi,{icon:br})," ",d?" Ordenes de Trabajo":""]})})}),!x&&(0,dr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,dr.jsx)(cs,{onClick:z,title:"Administraci\xf3n",children:(0,dr.jsxs)(mt,{to:"/administration",className:u.sideButtons,style:{color:m.includes("/administration")||m.includes("/users")||m.includes("/edit-user")||m.includes("/new-users")||m.includes("/patterns")?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,dr.jsx)(Bi,{icon:Yr})," ",d?" Administraci\xf3n":""]})})}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,dr.jsx)(cs,{onClick:z,title:"Perfil",children:(0,dr.jsxs)(mt,{to:"/user-profile",className:u.sideButtons,style:{color:m.includes("/user-profile")?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,dr.jsx)(Bi,{icon:Xr})," ",d?" Perfil":""]})})}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,dr.jsx)(cs,{onClick:z,title:"Actualizar",onClickCapture:function(){l()},children:(0,dr.jsxs)("div",{className:u.sideButtons,style:{color:"#FFFFFF",textDecoration:"none"},children:[(0,dr.jsx)(Bi,{icon:Zr})," ",d?" Actualizar":""]})})}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,dr.jsx)(cs,{onClick:z,title:"Int. Artificial",onClickCapture:function(){D(!0)},children:(0,dr.jsxs)("div",{className:u.sideButtons,style:{color:"/pms"===m?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,dr.jsx)(Bi,{icon:zr})," ",d?" Int. Artificial":""]})})}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,dr.jsx)(cs,{onClick:z,title:"Mensajes App",onClickCapture:function(){j(!0)},children:(0,dr.jsxs)("div",{className:u.sideButtons,style:{color:"/pms"===m?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,dr.jsx)(Bi,{icon:wr})," ",d?" Mensajes App":""]})})}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,dr.jsx)(cs,{onClick:z,title:"Informaci\xf3n",onClickCapture:function(){I(!0)},children:(0,dr.jsxs)("div",{className:u.sideButtons,style:{color:"/information"===m?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,dr.jsx)(Bi,{icon:Ir})," ",d?" Informaci\xf3n":""]})})}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,dr.jsx)(cs,{onClick:z,title:"Informaci\xf3n",onClickCapture:function(){B.Android()?window.location.replace("market://details?id=org.opencascade.cadassistant"):alert("Su dispositivo no cuenta con el link a Cad Assistant")},children:(0,dr.jsxs)("div",{className:u.sideButtons,style:{color:"/information"===m?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,dr.jsx)(Bi,{icon:Sr})," ",d?" Cad Assistant":""]})})}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,dr.jsx)(cs,{onClick:z,title:"Opciones",children:(0,dr.jsxs)(mt,{to:"/options",className:u.sideButtons,style:{color:"/options"===m?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,dr.jsx)(Bi,{icon:Vr})," ",d?" Opciones":""]})})}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,dr.jsx)(cs,{onClick:s,title:"Cerrar Sesi\xf3n",children:(0,dr.jsxs)("div",{className:u.sideButtons,children:[(0,dr.jsx)(Bi,{icon:Wr})," ",d?" Cerrar Sesi\xf3n":""]})})})]})}),A&&(0,dr.jsx)(ud,{open:A,closeModal:function(){I(!1)}}),O&&(0,dr.jsx)(sK,{open:O,closeModal:function(){D(!1)}}),F&&(0,dr.jsx)(lK,{open:F,closeModal:function(){j(!1)}})]})})})},LK=Nt((function(e){return{button:{borderRadius:20,maxWidth:400,minWidth:300,width:"100%"}}})),PK=function(){var e=Xwe().dictionary,t=(Vwe().login,(0,T.useState)("")),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=(0,T.useState)(!1),o=(0,U.Z)(i,2),s=o[0],l=o[1],u=LK(),c=Ue(),d=function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),e.next=4,h();case 4:n=e.sent,console.log(n),n.data.status?"no-email"===n.data.status&&(alert(n.data.message),l(!1)):(alert(n.data.message),l(!1),c("/",{replace:!0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("No se pudo obtener el reset");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){return new Promise((function(e){Xt(r).then((function(t){e(t)})).catch((function(t){e(t)}))}))};return(0,dr.jsxs)(Es,{container:!0,style:{padding:20,height:"50%"},alignItems:"center",justifyContent:"center",children:[(0,dr.jsx)("form",{onSubmit:d,children:(0,dr.jsxs)(Es,{container:!0,item:!0,spacing:2,children:[(0,dr.jsx)(Es,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:(0,dr.jsx)(ql,{type:"email",name:"email",label:e.login.emailField,value:r,onChange:function(e){var t;if("email"===(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.name))return a(e.target.value)},variant:"outlined",style:{maxWidth:400,minWidth:300,width:"100%"}})}),(0,dr.jsx)(Es,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:(0,dr.jsx)($l,{className:u.button,type:"submit",variant:"contained",color:"primary",children:"SOLICITAR"})}),(0,dr.jsx)(Es,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:(0,dr.jsx)($l,{className:u.button,variant:"contained",color:"primary",onClick:function(){c(-1)},children:"VOLVER"})})]})}),s&&(0,dr.jsx)($c,{open:s,loadingData:"Solicitando restablecer contrase\xf1a",withProgress:!1})]})},FK=Nt((function(e){return{button:{borderRadius:20,maxWidth:400,minWidth:300,width:"100%"}}})),jK=function(e){var t=e.id,n=Xwe().dictionary,r=(0,T.useState)(""),a=(0,U.Z)(r,2),i=a[0],o=a[1],s=(0,T.useState)(""),l=(0,U.Z)(s,2),u=l[0],c=l[1],d=(0,T.useState)(""),h=(0,U.Z)(d,2),f=h[0],p=h[1],m=(0,T.useState)(!1),v=(0,U.Z)(m,2),g=v[0],y=v[1],b=(0,T.useState)(!1),x=(0,U.Z)(b,2),w=x[0],k=x[1],S=FK(),E=Ue(),C=(0,T.useState)("password"),_=(0,U.Z)(C,2),M=_[0],A=_[1],I=(0,T.useState)("password"),N=(0,U.Z)(I,2),R=N[0],O=N[1];(0,T.useEffect)((function(){p(t)}),[]);var D=function(e){var t;switch(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.name){case"password":return o(e.target.value);case"confirmPassword":return c(e.target.value)}},L=function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i===u?i.length>5?Yt(i,f).then((function(e){alert("Contrase\xf1a cambiada con \xe9xito"),E("/")})).catch((function(e){alert("Error al crear contrase\xf1a. El correo utilizado est\xe1 vencido. Revise si le ha llegado un correo nuevo con la solicitud de restauraci\xf3n de contrase\xf1a actualizado o espere un m\xe1ximo de 10 minutos m\xe1s. Si el error persiste, contacte al administrador.")})):alert("Contrase\xf1a debe contener al menos 6 car\xe1cteres."):alert("Contrase\xf1as ingresadas no coinciden");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(e){y(i!==u),i.length<6?k(!0):k(!1)};return(0,dr.jsx)(Es,{container:!0,style:{padding:20,height:"50%"},alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("form",{children:(0,dr.jsxs)(Es,{container:!0,item:!0,spacing:2,children:[(0,dr.jsxs)(Es,{item:!0,xs:12,container:!0,justifyContent:"center",children:[(0,dr.jsx)(ql,{type:M,name:"password",label:n.restorePassword.passwordField,value:i,onChange:D,onBlur:function(e){return P()},variant:"outlined",style:{maxWidth:400,minWidth:300,width:"100%"},id:"password"}),(0,dr.jsxs)(cs,{style:{width:0,position:"relative",right:25,zIndex:1,padding:0},onClick:function(){A("password"===M?"text":"password")},children:["password"===M&&(0,dr.jsx)(Bi,{icon:Cr}),"text"===M&&(0,dr.jsx)(Bi,{icon:_r})]})]}),(0,dr.jsxs)(Es,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:10},children:[(0,dr.jsx)(ql,{type:R,name:"confirmPassword",label:n.restorePassword.confirmPasswordField,value:u,onChange:D,onBlur:function(e){return P()},variant:"outlined",style:{maxWidth:400,minWidth:300,width:"100%"},id:"c_password"}),(0,dr.jsxs)(cs,{style:{width:0,position:"relative",right:25,zIndex:1,padding:0},onClick:function(){O("password"===R?"text":"password")},children:["password"===R&&(0,dr.jsx)(Bi,{icon:Cr}),"text"===R&&(0,dr.jsx)(Bi,{icon:_r})]})]}),w&&(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,dr.jsx)("p",{style:{color:"red"},children:(0,dr.jsx)("strong",{children:"Contrase\xf1as deben ser de 6 car\xe1cteres m\xednimo"})})}),g&&(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,dr.jsx)("p",{style:{color:"red"},children:(0,dr.jsx)("strong",{children:"Contrase\xf1as no coinciden"})})}),(0,dr.jsx)(Es,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:10},children:(0,dr.jsx)($l,{className:S.button,variant:"contained",color:"primary",onClick:function(){L()},children:n.restorePassword.button})}),(0,dr.jsx)(Es,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:10},children:(0,dr.jsx)($l,{className:S.button,variant:"contained",color:"primary",onClick:function(){E("/",{replace:!0})},children:n.restorePassword.cancel})})]})})})};Nt((function(e){return{}})),Nt((function(e){return{}}));function zK(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var BK="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,UK=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t!==n;){var r=t.nextSibling;e.removeChild(t),t=r}},WK="{{lit-".concat(String(Math.random()).slice(2),"}}"),VK="\x3c!--".concat(WK,"--\x3e"),ZK=new RegExp("".concat(WK,"|").concat(VK)),HK=(0,A.Z)((function e(t,n){M(this,e),this.parts=[],this.element=n;for(var r=[],a=[],i=document.createTreeWalker(n.content,133,null,!1),o=0,s=-1,l=0,u=t.strings,c=t.values.length;l<c;){var d=i.nextNode();if(null!==d){if(s++,1===d.nodeType){if(d.hasAttributes()){for(var h=d.attributes,f=h.length,p=0,m=0;m<f;m++)GK(h[m].name,"$lit$")&&p++;for(;p-- >0;){var v=u[l],g=YK.exec(v)[2],y=g.toLowerCase()+"$lit$",b=d.getAttribute(y);d.removeAttribute(y);var x=b.split(ZK);this.parts.push({type:"attribute",index:s,name:g,strings:x}),l+=x.length-1}}"TEMPLATE"===d.tagName&&(a.push(d),i.currentNode=d.content)}else if(3===d.nodeType){var w=d.data;if(w.indexOf(WK)>=0){for(var k=d.parentNode,S=w.split(ZK),T=S.length-1,E=0;E<T;E++){var C=void 0,_=S[E];if(""===_)C=XK();else{var A=YK.exec(_);null!==A&&GK(A[2],"$lit$")&&(_=_.slice(0,A.index)+A[1]+A[2].slice(0,-5)+A[3]),C=document.createTextNode(_)}k.insertBefore(C,d),this.parts.push({type:"node",index:++s})}""===S[T]?(k.insertBefore(XK(),d),r.push(d)):d.data=S[T],l+=T}}else if(8===d.nodeType)if(d.data===WK){var I=d.parentNode;null!==d.previousSibling&&s!==o||(s++,I.insertBefore(XK(),d)),o=s,this.parts.push({type:"node",index:s}),null===d.nextSibling?d.data="":(r.push(d),s--),l++}else for(var N=-1;-1!==(N=d.data.indexOf(WK,N+1));)this.parts.push({type:"node",index:-1}),l++}else i.currentNode=a.pop()}for(var R=0,O=r;R<O.length;R++){var D=O[R];D.parentNode.removeChild(D)}})),GK=function(e,t){var n=e.length-t.length;return n>=0&&e.slice(n)===t},qK=function(e){return-1!==e.index},XK=function(){return document.createComment("")},YK=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function KK(e,t){for(var n=e.element.content,r=e.parts,a=document.createTreeWalker(n,133,null,!1),i=JK(r),o=r[i],s=-1,l=0,u=[],c=null;a.nextNode();){s++;var d=a.currentNode;for(d.previousSibling===c&&(c=null),t.has(d)&&(u.push(d),null===c&&(c=d)),null!==c&&l++;void 0!==o&&o.index===s;)o.index=null!==c?-1:o.index-l,o=r[i=JK(r,i)]}u.forEach((function(e){return e.parentNode.removeChild(e)}))}var $K=function(e){for(var t=11===e.nodeType?0:1,n=document.createTreeWalker(e,133,null,!1);n.nextNode();)t++;return t},JK=function(e){for(var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)+1;t<e.length;t++){var n=e[t];if(qK(n))return t}return-1},QK=new WeakMap,e$=function(e){return"function"==typeof e&&QK.has(e)},t$={},n$={},r$=function(){function e(t,n,r){M(this,e),this.__parts=[],this.template=t,this.processor=n,this.options=r}return(0,A.Z)(e,[{key:"update",value:function(e){var t,n=0,r=G(this.__parts);try{for(r.s();!(t=r.n()).done;){var a=t.value;void 0!==a&&a.setValue(e[n]),n++}}catch(_ke){r.e(_ke)}finally{r.f()}var i,o=G(this.__parts);try{for(o.s();!(i=o.n()).done;){var s=i.value;void 0!==s&&s.commit()}}catch(_ke){o.e(_ke)}finally{o.f()}}},{key:"_clone",value:function(){for(var e,t=BK?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),n=[],r=this.template.parts,a=document.createTreeWalker(t,133,null,!1),i=0,o=0,s=a.nextNode();i<r.length;)if(e=r[i],qK(e)){for(var l;o<e.index;)o++,"TEMPLATE"===s.nodeName&&(n.push(s),a.currentNode=s.content),null===(s=a.nextNode())&&(a.currentNode=n.pop(),s=a.nextNode());if("node"===e.type){var u=this.processor.handleTextExpression(this.options);u.insertAfterNode(s.previousSibling),this.__parts.push(u)}else(l=this.__parts).push.apply(l,(0,_.Z)(this.processor.handleAttributeExpressions(s,e.name,e.strings,this.options)));i++}else this.__parts.push(void 0),i++;return BK&&(document.adoptNode(t),customElements.upgrade(t)),t}}]),e}(),a$=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:function(e){return e}}),i$=" ".concat(WK," "),o$=function(){function e(t,n,r,a){M(this,e),this.strings=t,this.values=n,this.type=r,this.processor=a}return(0,A.Z)(e,[{key:"getHTML",value:function(){for(var e=this.strings.length-1,t="",n=!1,r=0;r<e;r++){var a=this.strings[r],i=a.lastIndexOf("\x3c!--");n=(i>-1||n)&&-1===a.indexOf("--\x3e",i+1);var o=YK.exec(a);t+=null===o?a+(n?i$:VK):a.substr(0,o.index)+o[1]+o[2]+"$lit$"+o[3]+WK}return t+=this.strings[e]}},{key:"getTemplateElement",value:function(){var e=document.createElement("template"),t=this.getHTML();return void 0!==a$&&(t=a$.createHTML(t)),e.innerHTML=t,e}}]),e}(),s$=function(e){return null===e||!("object"==typeof e||"function"==typeof e)},l$=function(e){return Array.isArray(e)||!(!e||!e[Symbol.iterator])},u$=function(){function e(t,n,r){M(this,e),this.dirty=!0,this.element=t,this.name=n,this.strings=r,this.parts=[];for(var a=0;a<r.length-1;a++)this.parts[a]=this._createPart()}return(0,A.Z)(e,[{key:"_createPart",value:function(){return new c$(this)}},{key:"_getValue",value:function(){var e=this.strings,t=e.length-1,n=this.parts;if(1===t&&""===e[0]&&""===e[1]){var r=n[0].value;if("symbol"==typeof r)return String(r);if("string"==typeof r||!l$(r))return r}for(var a="",i=0;i<t;i++){a+=e[i];var o=n[i];if(void 0!==o){var s=o.value;if(s$(s)||!l$(s))a+="string"==typeof s?s:String(s);else{var l,u=G(s);try{for(u.s();!(l=u.n()).done;){var c=l.value;a+="string"==typeof c?c:String(c)}}catch(_ke){u.e(_ke)}finally{u.f()}}}}return a+=e[t]}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}]),e}(),c$=function(){function e(t){M(this,e),this.value=void 0,this.committer=t}return(0,A.Z)(e,[{key:"setValue",value:function(e){e===t$||s$(e)&&e===this.value||(this.value=e,e$(e)||(this.committer.dirty=!0))}},{key:"commit",value:function(){for(;e$(this.value);){var e=this.value;this.value=t$,e(this)}this.value!==t$&&this.committer.commit()}}]),e}(),d$=function(){function e(t){M(this,e),this.value=void 0,this.__pendingValue=void 0,this.options=t}return(0,A.Z)(e,[{key:"appendInto",value:function(e){this.startNode=e.appendChild(XK()),this.endNode=e.appendChild(XK())}},{key:"insertAfterNode",value:function(e){this.startNode=e,this.endNode=e.nextSibling}},{key:"appendIntoPart",value:function(e){e.__insert(this.startNode=XK()),e.__insert(this.endNode=XK())}},{key:"insertAfterPart",value:function(e){e.__insert(this.startNode=XK()),this.endNode=e.endNode,e.endNode=this.startNode}},{key:"setValue",value:function(e){this.__pendingValue=e}},{key:"commit",value:function(){if(null!==this.startNode.parentNode){for(;e$(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=t$,e(this)}var t=this.__pendingValue;t!==t$&&(s$(t)?t!==this.value&&this.__commitText(t):t instanceof o$?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):l$(t)?this.__commitIterable(t):t===n$?(this.value=n$,this.clear()):this.__commitText(t))}}},{key:"__insert",value:function(e){this.endNode.parentNode.insertBefore(e,this.endNode)}},{key:"__commitNode",value:function(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}},{key:"__commitText",value:function(e){var t=this.startNode.nextSibling,n="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=n:this.__commitNode(document.createTextNode(n)),this.value=e}},{key:"__commitTemplateResult",value:function(e){var t=this.options.templateFactory(e);if(this.value instanceof r$&&this.value.template===t)this.value.update(e.values);else{var n=new r$(t,e.processor,this.options),r=n._clone();n.update(e.values),this.__commitNode(r),this.value=n}}},{key:"__commitIterable",value:function(t){Array.isArray(this.value)||(this.value=[],this.clear());var n,r,a=this.value,i=0,o=G(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;void 0===(n=a[i])&&(n=new e(this.options),a.push(n),0===i?n.appendIntoPart(this):n.insertAfterPart(a[i-1])),n.setValue(s),n.commit(),i++}}catch(_ke){o.e(_ke)}finally{o.f()}i<a.length&&(a.length=i,this.clear(n&&n.endNode))}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startNode;UK(this.startNode.parentNode,e.nextSibling,this.endNode)}}]),e}(),h$=function(){function e(t,n,r){if(M(this,e),this.value=void 0,this.__pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=n,this.strings=r}return(0,A.Z)(e,[{key:"setValue",value:function(e){this.__pendingValue=e}},{key:"commit",value:function(){for(;e$(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=t$,e(this)}if(this.__pendingValue!==t$){var t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=t$}}}]),e}(),f$=function(e){N(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this,e,r,a)).single=2===a.length&&""===a[0]&&""===a[1],i}return(0,A.Z)(n,[{key:"_createPart",value:function(){return new p$(this)}},{key:"_getValue",value:function(){return this.single?this.parts[0].value:lu(R(n.prototype),"_getValue",this).call(this)}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}]),n}(u$),p$=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n)}(c$),m$=!1;!function(){try{var e={get capture(){return m$=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(BK){}}();var v$=function(){function e(t,n,r){var a=this;M(this,e),this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=n,this.eventContext=r,this.__boundHandleEvent=function(e){return a.handleEvent(e)}}return(0,A.Z)(e,[{key:"setValue",value:function(e){this.__pendingValue=e}},{key:"commit",value:function(){for(;e$(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=t$,e(this)}if(this.__pendingValue!==t$){var t=this.__pendingValue,n=this.value,r=null==t||null!=n&&(t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive),a=null!=t&&(null==n||r);r&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),a&&(this.__options=g$(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=t$}}},{key:"handleEvent",value:function(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}]),e}(),g$=function(e){return e&&(m$?{capture:e.capture,passive:e.passive,once:e.once}:e.capture)};function y$(e){var t=b$.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},b$.set(e.type,t));var n=t.stringsArray.get(e.strings);if(void 0!==n)return n;var r=e.strings.join(WK);return void 0===(n=t.keyString.get(r))&&(n=new HK(e,e.getTemplateElement()),t.keyString.set(r,n)),t.stringsArray.set(e.strings,n),n}var b$=new Map,x$=new WeakMap,w$=function(e,t,n){var r=x$.get(t);void 0===r&&(UK(t,t.firstChild),x$.set(t,r=new d$(Object.assign({templateFactory:y$},n))),r.appendInto(t)),r.setValue(e),r.commit()},k$=new(function(){function e(){M(this,e)}return(0,A.Z)(e,[{key:"handleAttributeExpressions",value:function(e,t,n,r){var a=t[0];return"."===a?new f$(e,t.slice(1),n).parts:"@"===a?[new v$(e,t.slice(1),r.eventContext)]:"?"===a?[new h$(e,t.slice(1),n)]:new u$(e,t,n).parts}},{key:"handleTextExpression",value:function(e){return new d$(e)}}]),e}());"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");var S$=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new o$(e,n,"html",k$)},T$=function(e,t){return"".concat(e,"--").concat(t)},E$=!0;void 0===window.ShadyCSS?E$=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),E$=!1);var C$=function(e){return function(t){var n=T$(t.type,e),r=b$.get(n);void 0===r&&(r={stringsArray:new WeakMap,keyString:new Map},b$.set(n,r));var a=r.stringsArray.get(t.strings);if(void 0!==a)return a;var i=t.strings.join(WK);if(void 0===(a=r.keyString.get(i))){var o=t.getTemplateElement();E$&&window.ShadyCSS.prepareTemplateDom(o,e),a=new HK(t,o),r.keyString.set(i,a)}return r.stringsArray.set(t.strings,a),a}},_$=["html","svg"],M$=new Set;window.JSCompiler_renameProperty=function(e,t){return e};var A$={toAttribute:function(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute:function(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},I$=function(e,t){return t!==e&&(t==t||e==e)},N$={attribute:!0,type:String,converter:A$,reflect:!1,hasChanged:I$},R$=function(e){N(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).initialize(),e}return(0,A.Z)(n,[{key:"initialize",value:function(){var e=this;this._updateState=0,this._updatePromise=new Promise((function(t){return e._enableUpdatingResolver=t})),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}},{key:"_saveInstanceProperties",value:function(){var e=this;this.constructor._classProperties.forEach((function(t,n){if(e.hasOwnProperty(n)){var r=e[n];delete e[n],e._instanceProperties||(e._instanceProperties=new Map),e._instanceProperties.set(n,r)}}))}},{key:"_applyInstanceProperties",value:function(){var e=this;this._instanceProperties.forEach((function(t,n){return e[n]=t})),this._instanceProperties=void 0}},{key:"connectedCallback",value:function(){this.enableUpdating()}},{key:"enableUpdating",value:function(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){t!==n&&this._attributeToProperty(e,n)}},{key:"_propertyToAttribute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N$,r=this.constructor,a=r._attributeNameForProperty(e,n);if(void 0!==a){var i=r._propertyValueToAttribute(t,n);if(void 0===i)return;this._updateState=8|this._updateState,null==i?this.removeAttribute(a):this.setAttribute(a,i),this._updateState=-9&this._updateState}}},{key:"_attributeToProperty",value:function(e,t){if(!(8&this._updateState)){var n=this.constructor,r=n._attributeToPropertyMap.get(e);if(void 0!==r){var a=n.getPropertyOptions(r);this._updateState=16|this._updateState,this[r]=n._propertyValueFromAttribute(t,a),this._updateState=-17&this._updateState}}}},{key:"requestUpdateInternal",value:function(e,t,n){var r=!0;if(void 0!==e){var a=this.constructor;n=n||a.getPropertyOptions(e),a._valueHasChanged(this[e],t,n.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==n.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,n))):r=!1}!this._hasRequestedUpdate&&r&&(this._updatePromise=this._enqueueUpdate())}},{key:"requestUpdate",value:function(e,t){return this.requestUpdateInternal(e,t),this.updateComplete}},{key:"_enqueueUpdate",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._updateState=4|this._updateState,e.prev=1,e.next=4,this._updatePromise;case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:if(t=this.performUpdate(),e.t1=null!=t,!e.t1){e.next=13;break}return e.next=13,t;case 13:return e.abrupt("return",!this._hasRequestedUpdate);case 14:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"_hasRequestedUpdate",get:function(){return 4&this._updateState}},{key:"hasUpdated",get:function(){return 1&this._updateState}},{key:"performUpdate",value:function(){if(this._hasRequestedUpdate){this._instanceProperties&&this._applyInstanceProperties();var e=!1,t=this._changedProperties;try{(e=this.shouldUpdate(t))?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}}},{key:"_markUpdated",value:function(){this._changedProperties=new Map,this._updateState=-5&this._updateState}},{key:"updateComplete",get:function(){return this._getUpdateComplete()}},{key:"_getUpdateComplete",value:function(){return this.getUpdateComplete()}},{key:"getUpdateComplete",value:function(){return this._updatePromise}},{key:"shouldUpdate",value:function(e){return!0}},{key:"update",value:function(e){var t=this;void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((function(e,n){return t._propertyToAttribute(n,t[n],e)})),this._reflectingProperties=void 0),this._markUpdated()}},{key:"updated",value:function(e){}},{key:"firstUpdated",value:function(e){}}],[{key:"observedAttributes",get:function(){var e=this;this.finalize();var t=[];return this._classProperties.forEach((function(n,r){var a=e._attributeNameForProperty(r,n);void 0!==a&&(e._attributeToPropertyMap.set(a,r),t.push(a))})),t}},{key:"_ensureClassProperties",value:function(){var e=this;if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;var t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((function(t,n){return e._classProperties.set(n,t)}))}}},{key:"createProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N$;if(this._ensureClassProperties(),this._classProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){var n="symbol"==typeof e?Symbol():"__".concat(e),r=this.getPropertyDescriptor(e,n,t);void 0!==r&&Object.defineProperty(this.prototype,e,r)}}},{key:"getPropertyDescriptor",value:function(e,t,n){return{get:function(){return this[t]},set:function(r){var a=this[e];this[t]=r,this.requestUpdateInternal(e,a,n)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function(e){return this._classProperties&&this._classProperties.get(e)||N$}},{key:"finalize",value:function(){var e=Object.getPrototypeOf(this);if(e.hasOwnProperty("finalized")||e.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){var t,n=this.properties,r=G([].concat((0,_.Z)(Object.getOwnPropertyNames(n)),(0,_.Z)("function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n):[])));try{for(r.s();!(t=r.n()).done;){var a=t.value;this.createProperty(a,n[a])}}catch(_ke){r.e(_ke)}finally{r.f()}}}},{key:"_attributeNameForProperty",value:function(e,t){var n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}},{key:"_valueHasChanged",value:function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:I$)(e,t)}},{key:"_propertyValueFromAttribute",value:function(e,t){var n=t.type,r=t.converter||A$,a="function"==typeof r?r:r.fromAttribute;return a?a(e,n):e}},{key:"_propertyValueToAttribute",value:function(e,t){if(void 0!==t.reflect){var n=t.type,r=t.converter;return(r&&r.toAttribute||A$.toAttribute)(e,n)}}}]),n}(z(HTMLElement));R$.finalized=!0;function O$(e){return function(t,n){return void 0!==n?function(e,t,n){t.constructor.createProperty(n,e)}(e,t,n):function(e,t){return"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher:function(n){n.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer:function(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher:function(n){n.createProperty(t.key,e)}}}(e,t)}}var D$=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,L$=Symbol(),P$=function(){function e(t,n){if(M(this,e),n!==L$)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}return(0,A.Z)(e,[{key:"styleSheet",get:function(){return void 0===this._styleSheet&&(D$?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}},{key:"toString",value:function(){return this.cssText}}]),e}();(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");var F$={},j$=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"initialize",value:function(){lu(R(n.prototype),"initialize",this).call(this),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}},{key:"createRenderRoot",value:function(){return this.attachShadow(this.constructor.shadowRootOptions)}},{key:"adoptStyles",value:function(){var e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?D$?this.renderRoot.adoptedStyleSheets=e.map((function(e){return e instanceof CSSStyleSheet?e:e.styleSheet})):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map((function(e){return e.cssText})),this.localName))}},{key:"connectedCallback",value:function(){lu(R(n.prototype),"connectedCallback",this).call(this),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}},{key:"update",value:function(e){var t=this,r=this.render();lu(R(n.prototype),"update",this).call(this,e),r!==F$&&this.constructor.render(r,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((function(e){var n=document.createElement("style");n.textContent=e.cssText,t.renderRoot.appendChild(n)})))}},{key:"render",value:function(){return F$}}],[{key:"getStyles",value:function(){return this.styles}},{key:"_getUniqueStyles",value:function(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_styles",this))){var e=this.getStyles();if(Array.isArray(e)){var t=function e(t,n){return t.reduceRight((function(t,n){return Array.isArray(n)?e(n,t):(t.add(n),t)}),n)}(e,new Set),n=[];t.forEach((function(e){return n.unshift(e)})),this._styles=n}else this._styles=void 0===e?[]:[e];this._styles=this._styles.map((function(e){if(e instanceof CSSStyleSheet&&!D$){var t=Array.prototype.slice.call(e.cssRules).reduce((function(e,t){return e+t.cssText}),"");return new P$(String(t),L$)}return e}))}}}]),n}(R$);j$.finalized=!0,j$.render=function(e,t,n){if(!n||"object"!=typeof n||!n.scopeName)throw new Error("The `scopeName` option is required.");var r=n.scopeName,a=x$.has(t),i=E$&&11===t.nodeType&&!!t.host,o=i&&!M$.has(r),s=o?document.createDocumentFragment():t;if(w$(e,s,Object.assign({templateFactory:C$(r)},n)),o){var l=x$.get(s);x$.delete(s),function(e,t,n){M$.add(e);var r=n?n.element:document.createElement("template"),a=t.querySelectorAll("style"),i=a.length;if(0!==i){for(var o=document.createElement("style"),s=0;s<i;s++){var l=a[s];l.parentNode.removeChild(l),o.textContent+=l.textContent}!function(e){_$.forEach((function(t){var n=b$.get(T$(t,e));void 0!==n&&n.keyString.forEach((function(e){var t=e.element.content,n=new Set;Array.from(t.querySelectorAll("style")).forEach((function(e){n.add(e)})),KK(e,n)}))}))}(e);var u=r.content;n?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.element.content,a=e.parts;if(null!=n)for(var i=document.createTreeWalker(r,133,null,!1),o=JK(a),s=0,l=-1;i.nextNode();)for(l++,i.currentNode===n&&(s=$K(t),n.parentNode.insertBefore(t,n));-1!==o&&a[o].index===l;){if(s>0){for(;-1!==o;)a[o].index+=s,o=JK(a,o);return}o=JK(a,o)}else r.appendChild(t)}(n,o,u.firstChild):u.insertBefore(o,u.firstChild),window.ShadyCSS.prepareTemplateStyles(r,e);var c=u.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==c)t.insertBefore(c.cloneNode(!0),t.firstChild);else if(n){u.insertBefore(o,u.firstChild);var d=new Set;d.add(o),KK(n,d)}}else window.ShadyCSS.prepareTemplateStyles(r,e)}(r,s,l.value instanceof r$?l.value.template:void 0),UK(t,t.firstChild),t.appendChild(s),x$.set(t,l)}!a&&i&&window.ShadyCSS.styleElement(t.host)},j$.shadowRootOptions={mode:"open"};var z$=null!=navigator.xr&&null!=self.XRSession&&null!=navigator.xr.isSessionSupported,B$=z$&&self.XRSession.prototype.requestHitTestSource,U$=null!=self.ResizeObserver,W$=null!=self.IntersectionObserver,V$=B$;(function(){var e=navigator.userAgent||navigator.vendor||self.opera;/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))})(),/\bCrOS\b/.test(navigator.userAgent);var Z$=/android/i.test(navigator.userAgent),H$=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,G$=function(){var e=document.createElement("a");return Boolean(e.relList&&e.relList.supports&&e.relList.supports("ar"))}();/Safari\//.test(navigator.userAgent);var q$=/firefox/i.test(navigator.userAgent),X$=/OculusBrowser/.test(navigator.userAgent);H$&&/CriOS\//.test(navigator.userAgent);for(var Y$=Z$&&!q$&&!X$,K$=S$(EK||(EK=zK(['\n<style>\n:host {\n  display: block;\n  position: relative;\n  contain: strict;\n  width: 300px;\n  height: 150px;\n}\n\n/* NOTE: This ruleset is our integration surface area with the\n * :focus-visible polyfill.\n *\n * @see https://github.com/WICG/focus-visible/pull/196 */\n:host([data-js-focus-visible]:focus:not(.focus-visible)),\n:host([data-js-focus-visible]) :focus:not(.focus-visible) {\n  outline: none;\n}\n\n.container {\n  position: relative;\n}\n\n.userInput {\n  width: 100%;\n  height: 100%;\n  display: block;\n  position: relative;\n  overflow: hidden;\n}\n\ncanvas {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  /* NOTE(cdata): Chrome 76 and below apparently have a bug\n   * that causes our canvas not to display pixels unless it is\n   * on its own render layer\n   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893\n   */\n  transform: translateZ(0);\n}\n\ncanvas.show {\n  display: block;\n}\n\n/* Adapted from HTML5 Boilerplate\n *\n * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */\n.screen-reader-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n}\n\n.slot {\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.slot > * {\n  pointer-events: initial;\n}\n\n.annotation-wrapper ::slotted(*) {\n  opacity: var(--max-hotspot-opacity, 1);\n  transition: opacity 0.3s;\n}\n\n.pointer-tumbling .annotation-wrapper ::slotted(*) {\n  pointer-events: none;\n}\n\n.annotation-wrapper ::slotted(*) {\n  pointer-events: initial;\n}\n\n.annotation-wrapper.hide ::slotted(*) {\n  opacity: var(--min-hotspot-opacity, 0.25);\n}\n\n.slot.poster {\n  opacity: 0;\n  transition: opacity 0.3s 0.3s;\n  background-color: inherit;\n}\n\n.slot.poster.show {\n  opacity: 1;\n  transition: none;\n}\n\n.slot.poster.quick {\n  transition: none;\n}\n\n.slot.poster > * {\n  pointer-events: initial;\n}\n\n.slot.poster:not(.show) > * {\n  pointer-events: none;\n}\n\n#default-poster {\n  width: 100%;\n  height: 100%;\n  /* The default poster is a <button> so we need to set display\n   * to prevent it from being affected by text-align: */\n  display: block;\n  position: absolute;\n  border: none;\n  padding: 0;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: var(--poster-color, #fff);\n  background-image: var(--poster-image, none);\n}\n\n#default-progress-bar {\n  display: block;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  overflow: hidden;\n}\n\n#default-progress-bar > .mask {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: var(--progress-mask, #fff);\n  transition: opacity 0.3s;\n  opacity: 0.2;\n}\n\n#default-progress-bar > .bar {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: var(--progress-bar-height, 5px);\n  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));\n  transition: transform 0.09s;\n  transform-origin: top left;\n  transform: scaleX(0);\n  overflow: hidden;\n}\n\n#default-progress-bar > .bar.hide {\n  transition: opacity 0.3s 1s;\n  opacity: 0;\n}\n\n.slot.interaction-prompt {\n  display: var(--interaction-prompt-display, flex);\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  align-items: center;\n  justify-content: center;\n\n  opacity: 0;\n  will-change: opacity;\n  overflow: hidden;\n  transition: opacity 0.3s;\n}\n\n.slot.interaction-prompt.visible {\n  opacity: 1;\n}\n\n.slot.interaction-prompt > .animated-container {\n  will-change: transform, opacity;\n}\n\n.slot.interaction-prompt > * {\n  pointer-events: none;\n}\n\n.slot.ar-button {\n  -moz-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  user-select: none;\n\n  display: var(--ar-button-display, block);\n}\n\n.slot.ar-button:not(.enabled) {\n  display: none;\n}\n\n.fab {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  background-color: #fff;\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);\n  border-radius: 100px;\n}\n\n.fab > * {\n  opacity: 0.87;\n}\n\n#default-ar-button {\n  position: absolute;\n  bottom: 16px;\n  right: 16px;\n  transform: scale(var(--ar-button-scale, 1));\n  transform-origin: bottom right;\n}\n\n.slot.default {\n  pointer-events: none;\n}\n\n.slot.progress-bar {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button:not(.enabled) {\n  display: none;\n}\n\n#default-exit-webxr-ar-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  width: 40px;\n  height: 40px;\n  box-sizing: border-box;\n}\n\n#default-exit-webxr-ar-button > svg {\n  fill: #fff;\n}\n</style>\n<div class="container">\n  <div class="userInput" tabindex="0" role="img"\n      aria-label="A depiction of a 3D model"\n      aria-live="polite">\n      <div class="slot canvas">\n        <slot name="canvas">\n          <canvas></canvas>\n        </slot>\n      </div>\n  </div>\n\n  \x3c!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM\n        will have their <slot> elements removed by ShadyCSS --\x3e\n  <div class="slot poster">\n    <slot name="poster">\n      <button type="button" id="default-poster" aria-hidden="true" aria-label="Activate to view in 3D!"></button>\n    </slot>\n  </div>\n\n  <div class="slot ar-button">\n    <slot name="ar-button">\n      <a id="default-ar-button" part="default-ar-button" class="fab"\n          tabindex="2"\n          aria-label="View this 3D model up close">\n        ','\n      </a>\n    </slot>\n  </div>\n\n  <div class="slot interaction-prompt">\n    <div class="animated-container">\n      <slot name="interaction-prompt" aria-hidden="true">\n        ','\n      </slot>\n    </div>\n  </div>\n\n  <div class="slot default">\n    <slot></slot>\n\n    <div class="slot progress-bar">\n      <slot name="progress-bar">\n        <div id="default-progress-bar" aria-hidden="true">\n          <div class="mask" part="default-progress-mask"></div>\n          <div class="bar" part="default-progress-bar"></div>\n        </div>\n      </slot>\n    </div>\n    \n    <div class="slot exit-webxr-ar-button">\n      <slot name="exit-webxr-ar-button">\n        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"\n            tabindex="3"\n            aria-label="Exit AR"\n            aria-hidden="true">\n          ',"\n        </a>\n      </slot>\n    </div>\n  </div>\n</div>"])),S$(CK||(CK=zK(['\n<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"\n\t xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"\n\t viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">\n<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>\n<g id="Art_layer">\n\t<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>\n\t<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>\n\t<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>\n\t<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>\n\t<g>\n\t\t<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3\n\t\t\tl5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62\n\t\t\tl4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>\n\t</g>\n</g>\n</svg>']))),S$(_K||(_K=zK(['\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">\n    <defs>\n        <path id="A" d="M.001.232h24.997V36H.001z" />\n    </defs>\n    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">\n        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />\n        <g transform="translate(11 3)">\n            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />\n            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />\n            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />\n            <g transform="translate(0 .769)">\n                <mask id="B" fill="#fff">\n                    <use xlink:href="#A" />\n                </mask>\n                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />\n            </g>\n        </g>\n    </g>\n</svg>']))),S$(MK||(MK=zK(['\n<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">\n    \x3c!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement\n         support for dynamic re-coloring of UI components --\x3e\n    <defs>\n      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">\n        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>\n        <feOffset dx="0" dy="0" result="offsetblur"/>\n        <feFlood flood-color="#000000"/>\n        <feComposite in2="offsetblur" operator="in"/>\n        <feMerge>\n          <feMergeNode/>\n          <feMergeNode in="SourceGraphic"/>\n        </feMerge>\n      </filter>\n    </defs>\n    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'])))),$$=function(){function e(){M(this,e)}return(0,A.Z)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,a=n.length;r<a;r++)n[r].call(this,e);e.target=null}}}}]),e}(),J$=1234567,Q$=Math.PI/180,eJ=180/Math.PI,tJ=[],nJ=0;nJ<256;nJ++)tJ[nJ]=(nJ<16?"0":"")+nJ.toString(16);var rJ="undefined"!=typeof crypto&&"randomUUID"in crypto;function aJ(){if(rJ)return crypto.randomUUID().toUpperCase();var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(tJ[255&e]+tJ[e>>8&255]+tJ[e>>16&255]+tJ[e>>24&255]+"-"+tJ[255&t]+tJ[t>>8&255]+"-"+tJ[t>>16&15|64]+tJ[t>>24&255]+"-"+tJ[63&n|128]+tJ[n>>8&255]+"-"+tJ[n>>16&255]+tJ[n>>24&255]+tJ[255&r]+tJ[r>>8&255]+tJ[r>>16&255]+tJ[r>>24&255]).toUpperCase()}function iJ(e,t,n){return Math.max(t,Math.min(n,e))}function oJ(e,t){return(e%t+t)%t}function sJ(e,t,n){return(1-n)*e+n*t}function lJ(e){return 0==(e&e-1)&&0!==e}function uJ(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function cJ(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var dJ=Object.freeze({__proto__:null,DEG2RAD:Q$,RAD2DEG:eJ,generateUUID:aJ,clamp:iJ,euclideanModulo:oJ,mapLinear:function(e,t,n,r,a){return r+(e-t)*(a-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:sJ,damp:function(e,t,n,r){return sJ(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(oJ(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(J$=e%2147483647),((J$=16807*J$%2147483647)-1)/2147483646},degToRad:function(e){return e*Q$},radToDeg:function(e){return e*eJ},isPowerOfTwo:lJ,ceilPowerOfTwo:uJ,floorPowerOfTwo:cJ,setQuaternionFromProperEuler:function(e,t,n,r,a){var i=Math.cos,o=Math.sin,s=i(n/2),l=o(n/2),u=i((t+r)/2),c=o((t+r)/2),d=i((t-r)/2),h=o((t-r)/2),f=i((r-t)/2),p=o((r-t)/2);switch(a){case"XYX":e.set(s*c,l*d,l*h,s*u);break;case"YZY":e.set(l*h,s*c,l*d,s*u);break;case"ZXZ":e.set(l*d,l*h,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*f,s*u);break;case"YXY":e.set(l*f,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}}),hJ=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;M(this,t),this.x=e,this.y=n}return(0,A.Z)(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),a=this.x-e.x,i=this.y-e.y;return this.x=a*n-i*r+e.x,this.y=a*r+i*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:e,value:Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);hJ.prototype.isVector2=!0;var fJ,pJ=function(){function e(){M(this,e),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return(0,A.Z)(e,[{key:"set",value:function(e,t,n,r,a,i,o,s,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=a,u[5]=s,u[6]=n,u[7]=i,u[8]=l,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,a=this.elements,i=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],x=r[2],w=r[5],k=r[8];return a[0]=i*p+o*g+s*x,a[3]=i*m+o*y+s*w,a[6]=i*v+o*b+s*k,a[1]=l*p+u*g+c*x,a[4]=l*m+u*y+c*w,a[7]=l*v+u*b+c*k,a[2]=d*p+h*g+f*x,a[5]=d*m+h*y+f*w,a[8]=d*v+h*b+f*k,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*i*u-t*o*l-n*a*u+n*o*s+r*a*l-r*i*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*i-o*l,d=o*s-u*a,h=l*a-i*s,f=t*c+n*d+r*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var p=1/f;return e[0]=c*p,e[1]=(r*l-u*n)*p,e[2]=(o*n-r*i)*p,e[3]=d*p,e[4]=(u*t-r*s)*p,e[5]=(r*a-o*t)*p,e[6]=h*p,e[7]=(n*s-l*t)*p,e[8]=(i*t-n*a)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,a,i,o){var s=Math.cos(a),l=Math.sin(a);return this.set(n*s,n*l,-n*(s*i+l*o)+i+e,-r*l,r*s,-r*(-l*i+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,a=r[0],i=r[3],o=r[6],s=r[1],l=r[4],u=r[7];return r[0]=t*a+n*s,r[3]=t*i+n*l,r[6]=t*o+n*u,r[1]=-n*a+t*s,r[4]=-n*i+t*l,r[7]=-n*o+t*u,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function mJ(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function vJ(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}pJ.prototype.isMatrix3=!0;var gJ=function(){function e(){M(this,e)}return(0,A.Z)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===fJ&&(fJ=vJ("canvas")),fJ.width=e.width,fJ.height=e.height;var n=fJ.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=fJ}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}]),e}(),yJ=0,bJ=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1001,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1001,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1006,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1008,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1023,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1009,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:3e3;return M(this,n),e=t.call(this),Object.defineProperty((0,L.Z)(e),"id",{value:yJ++}),e.uuid=aJ(),e.name="",e.image=r,e.mipmaps=[],e.mapping=a,e.wrapS=i,e.wrapT=o,e.magFilter=s,e.minFilter=l,e.anisotropy=d,e.format=u,e.internalFormat=null,e.type=c,e.offset=new hJ(0,0),e.repeat=new hJ(1,1),e.center=new hJ(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new pJ,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=h,e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e}return(0,A.Z)(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=aJ()),!t&&void 0===e.images[r.uuid]){var a;if(Array.isArray(r)){a=[];for(var i=0,o=r.length;i<o;i++)r[i].isDataTexture?a.push(xJ(r[i].image)):a.push(xJ(r[i]))}else a=xJ(r);e.images[r.uuid]={uuid:r.uuid,url:a}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}($$);function xJ(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?gJ.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}bJ.DEFAULT_IMAGE=void 0,bJ.DEFAULT_MAPPING=300,bJ.prototype.isTexture=!0;var wJ=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;M(this,t),this.x=e,this.y=n,this.z=r,this.w=a}return(0,A.Z)(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,a=this.w,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12]*a,this.y=i[1]*t+i[5]*n+i[9]*r+i[13]*a,this.z=i[2]*t+i[6]*n+i[10]*r+i[14]*a,this.w=i[3]*t+i[7]*n+i[11]*r+i[15]*a,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,a,i=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],d=s[1],h=s[5],f=s[9],p=s[2],m=s[6],v=s[10];if(Math.abs(u-d)<i&&Math.abs(c-p)<i&&Math.abs(f-m)<i){if(Math.abs(u+d)<o&&Math.abs(c+p)<o&&Math.abs(f+m)<o&&Math.abs(l+h+v-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(l+1)/2,y=(h+1)/2,b=(v+1)/2,x=(u+d)/4,w=(c+p)/4,k=(f+m)/4;return g>y&&g>b?g<i?(n=0,r=.707106781,a=.707106781):(r=x/(n=Math.sqrt(g)),a=w/n):y>b?y<i?(n=.707106781,r=0,a=.707106781):(n=x/(r=Math.sqrt(y)),a=k/r):b<i?(n=.707106781,r=.707106781,a=0):(n=w/(a=Math.sqrt(b)),r=k/a),this.set(n,r,a,t),this}var S=Math.sqrt((m-f)*(m-f)+(c-p)*(c-p)+(d-u)*(d-u));return Math.abs(S)<.001&&(S=1),this.x=(m-f)/S,this.y=(c-p)/S,this.z=(d-u)/S,this.w=Math.acos((l+h+v-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:e,value:Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);wJ.prototype.isVector4=!0;var kJ=function(e){N(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return M(this,n),(a=t.call(this)).width=e,a.height=r,a.depth=1,a.scissor=new wJ(0,0,e,r),a.scissorTest=!1,a.viewport=new wJ(0,0,e,r),a.texture=new bJ(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),a.texture.isRenderTargetTexture=!0,a.texture.image={width:e,height:r,depth:1},a.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,a.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,a.texture.minFilter=void 0!==i.minFilter?i.minFilter:1006,a.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,a.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,a.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,a}return(0,A.Z)(n,[{key:"setTexture",value:function(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}},{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=cr({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}($$);kJ.prototype.isWebGLRenderTarget=!0,function(e){N(n,e);var t=F(n);function n(e,r,a){var i;M(this,n);var o=(i=t.call(this,e,r)).texture;i.texture=[];for(var s=0;s<a;s++)i.texture[s]=o.clone();return i}return(0,A.Z)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,a=this.texture.length;r<a;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}]),n}(kJ).prototype.isWebGLMultipleRenderTargets=!0;var SJ=function(e){N(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this,e,r,a)).samples=4,i}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.samples=e.samples,this}}]),n}(kJ);SJ.prototype.isWebGLMultisampleRenderTarget=!0;var TJ=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;M(this,e),this._x=t,this._y=n,this._z=r,this._w=a}return(0,A.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,a=e._z,i=e._order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(r/2),c=o(a/2),d=s(n/2),h=s(r/2),f=s(a/2);switch(i){case"XYZ":this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f;break;case"YXZ":this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f;break;case"ZXY":this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f;break;case"ZYX":this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f;break;case"YZX":this._x=d*u*c+l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c-d*h*f;break;case"XZY":this._x=d*u*c-l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+i)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],a=t[8],i=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],d=n+o+c;if(d>0){var h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(u-s)*h,this._y=(a-l)*h,this._z=(i-r)*h}else if(n>o&&n>c){var f=2*Math.sqrt(1+n-o-c);this._w=(u-s)/f,this._x=.25*f,this._y=(r+i)/f,this._z=(a+l)/f}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(a-l)/p,this._x=(r+i)/p,this._y=.25*p,this._z=(s+u)/p}else{var m=2*Math.sqrt(1+c-n-o);this._w=(i-r)/m,this._x=(a+l)/m,this._y=(s+u)/m,this._z=.25*m}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(iJ(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,a=e._z,i=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+i*o+r*l-a*s,this._y=r*u+i*s+a*o-n*l,this._z=a*u+i*l+n*s-r*o,this._w=i*u-n*o-r*s-a*l,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,a=this._z,i=this._w,o=i*e._w+n*e._x+r*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=i,this._x=n,this._y=r,this._z=a,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-t;return this._w=l*i+t*this._w,this._x=l*n+t*this._x,this._y=l*r+t*this._y,this._z=l*a+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(s),c=Math.atan2(u,o),d=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=i*d+this._w*h,this._x=n*d+this._x*h,this._y=r*d+this._y*h,this._z=a*d+this._z*h,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(a),n*Math.cos(a),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}},{key:"slerpFlat",value:function(e,t,n,r,a,i,o){var s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],d=a[i+0],h=a[i+1],f=a[i+2],p=a[i+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===o)return e[t+0]=d,e[t+1]=h,e[t+2]=f,void(e[t+3]=p);if(c!==p||s!==d||l!==h||u!==f){var m=1-o,v=s*d+l*h+u*f+c*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,v*g);m=Math.sin(m*x)/b,o=Math.sin(o*x)/b}var w=o*g;if(s=s*m+d*w,l=l*m+h*w,u=u*m+f*w,c=c*m+p*w,m===1-o){var k=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=k,l*=k,u*=k,c*=k}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,a,i){var o=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=a[i],d=a[i+1],h=a[i+2],f=a[i+3];return e[t]=o*f+u*c+s*h-l*d,e[t+1]=s*f+u*d+l*c-o*h,e[t+2]=l*f+u*h+o*d-s*c,e[t+3]=u*f-o*c-s*d-l*h,e}}]),e}();TJ.prototype.isQuaternion=!0;var EJ=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;M(this,t),this.x=e,this.y=n,this.z=r}return(0,A.Z)(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_J.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(_J.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*r,this.y=a[1]*t+a[4]*n+a[7]*r,this.z=a[2]*t+a[5]*n+a[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements,i=1/(a[3]*t+a[7]*n+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*r+a[12])*i,this.y=(a[1]*t+a[5]*n+a[9]*r+a[13])*i,this.z=(a[2]*t+a[6]*n+a[10]*r+a[14])*i,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.x,i=e.y,o=e.z,s=e.w,l=s*t+i*r-o*n,u=s*n+o*t-a*r,c=s*r+a*n-i*t,d=-a*t-i*n-o*r;return this.x=l*s+d*-a+u*-o-c*-i,this.y=u*s+d*-i+c*-a-l*-o,this.z=c*s+d*-o+l*-i-u*-a,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r,this.y=a[1]*t+a[5]*n+a[9]*r,this.z=a[2]*t+a[6]*n+a[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,a=e.z,i=t.x,o=t.y,s=t.z;return this.x=r*s-a*o,this.y=a*i-n*s,this.z=n*o-r*i,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return CJ.copy(this).projectOnVector(e),this.sub(CJ)}},{key:"reflect",value:function(e){return this.sub(CJ.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(iJ(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:e,value:Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);EJ.prototype.isVector3=!0;var CJ=new EJ,_J=new TJ,MJ=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EJ(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EJ(-1/0,-1/0,-1/0);M(this,e),this.min=t,this.max=n}return(0,A.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,a=-1/0,i=-1/0,o=-1/0,s=0,l=e.length;s<l;s+=3){var u=e[s],c=e[s+1],d=e[s+2];u<t&&(t=u),c<n&&(n=c),d<r&&(r=d),u>a&&(a=u),c>i&&(i=c),d>o&&(o=d)}return this.min.set(t,n,r),this.max.set(a,i,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,a=-1/0,i=-1/0,o=-1/0,s=0,l=e.count;s<l;s++){var u=e.getX(s),c=e.getY(s),d=e.getZ(s);u<t&&(t=u),c<n&&(n=c),d<r&&(r=d),u>a&&(a=u),c>i&&(i=c),d>o&&(o=d)}return this.min.set(t,n,r),this.max.set(a,i,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=IJ.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),NJ.copy(t.boundingBox),NJ.applyMatrix4(e.matrixWorld),this.union(NJ));for(var n=e.children,r=0,a=n.length;r<a;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,IJ),IJ.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(jJ),zJ.subVectors(this.max,jJ),RJ.subVectors(e.a,jJ),OJ.subVectors(e.b,jJ),DJ.subVectors(e.c,jJ),LJ.subVectors(OJ,RJ),PJ.subVectors(DJ,OJ),FJ.subVectors(RJ,DJ);var t=[0,-LJ.z,LJ.y,0,-PJ.z,PJ.y,0,-FJ.z,FJ.y,LJ.z,0,-LJ.x,PJ.z,0,-PJ.x,FJ.z,0,-FJ.x,-LJ.y,LJ.x,0,-PJ.y,PJ.x,0,-FJ.y,FJ.x,0];return!!WJ(t,RJ,OJ,DJ,zJ)&&(!!WJ(t=[1,0,0,0,1,0,0,0,1],RJ,OJ,DJ,zJ)&&(BJ.crossVectors(LJ,PJ),WJ(t=[BJ.x,BJ.y,BJ.z],RJ,OJ,DJ,zJ)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return IJ.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(IJ).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(AJ[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),AJ[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),AJ[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),AJ[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),AJ[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),AJ[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),AJ[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),AJ[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(AJ)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();MJ.prototype.isBox3=!0;var AJ=[new EJ,new EJ,new EJ,new EJ,new EJ,new EJ,new EJ,new EJ],IJ=new EJ,NJ=new MJ,RJ=new EJ,OJ=new EJ,DJ=new EJ,LJ=new EJ,PJ=new EJ,FJ=new EJ,jJ=new EJ,zJ=new EJ,BJ=new EJ,UJ=new EJ;function WJ(e,t,n,r,a){for(var i=0,o=e.length-3;i<=o;i+=3){UJ.fromArray(e,i);var s=a.x*Math.abs(UJ.x)+a.y*Math.abs(UJ.y)+a.z*Math.abs(UJ.z),l=t.dot(UJ),u=n.dot(UJ),c=r.dot(UJ);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}var VJ=new MJ,ZJ=new EJ,HJ=new EJ,GJ=new EJ,qJ=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EJ,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;M(this,e),this.center=t,this.radius=n}return(0,A.Z)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):VJ.setFromPoints(e).getCenter(n);for(var r=0,a=0,i=e.length;a<i;a++)r=Math.max(r,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){GJ.subVectors(e,this.center);var t=GJ.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(GJ.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(e){return HJ.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(ZJ.copy(e.center).add(HJ)),this.expandByPoint(ZJ.copy(e.center).sub(HJ)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),XJ=new EJ,YJ=new EJ,KJ=new EJ,$J=new EJ,JJ=new EJ,QJ=new EJ,eQ=new EJ,tQ=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EJ,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EJ(0,0,-1);M(this,e),this.origin=t,this.direction=n}return(0,A.Z)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,XJ)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=XJ.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(XJ.copy(this.direction).multiplyScalar(t).add(this.origin),XJ.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){YJ.copy(e).add(t).multiplyScalar(.5),KJ.copy(t).sub(e).normalize(),$J.copy(this.origin).sub(YJ);var a,i,o,s,l=.5*e.distanceTo(t),u=-this.direction.dot(KJ),c=$J.dot(this.direction),d=-$J.dot(KJ),h=$J.lengthSq(),f=Math.abs(1-u*u);if(f>0)if(i=u*c-d,s=l*f,(a=u*d-c)>=0)if(i>=-s)if(i<=s){var p=1/f;o=(a*=p)*(a+u*(i*=p)+2*c)+i*(u*a+i+2*d)+h}else i=l,o=-(a=Math.max(0,-(u*i+c)))*a+i*(i+2*d)+h;else i=-l,o=-(a=Math.max(0,-(u*i+c)))*a+i*(i+2*d)+h;else i<=-s?o=-(a=Math.max(0,-(-u*l+c)))*a+(i=a>0?-l:Math.min(Math.max(-l,-d),l))*(i+2*d)+h:i<=s?(a=0,o=(i=Math.min(Math.max(-l,-d),l))*(i+2*d)+h):o=-(a=Math.max(0,-(u*l+c)))*a+(i=a>0?l:Math.min(Math.max(-l,-d),l))*(i+2*d)+h;else i=u>0?-l:l,o=-(a=Math.max(0,-(u*i+c)))*a+i*(i+2*d)+h;return n&&n.copy(this.direction).multiplyScalar(a).add(this.origin),r&&r.copy(KJ).multiplyScalar(i).add(YJ),o}},{key:"intersectSphere",value:function(e,t){XJ.subVectors(e.center,this.origin);var n=XJ.dot(this.direction),r=XJ.dot(XJ)-n*n,a=e.radius*e.radius;if(r>a)return null;var i=Math.sqrt(a-r),o=n-i,s=n+i;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,a,i,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),u>=0?(a=(e.min.y-d.y)*u,i=(e.max.y-d.y)*u):(a=(e.max.y-d.y)*u,i=(e.min.y-d.y)*u),n>i||a>r?null:((a>n||n!=n)&&(n=a),(i<r||r!=r)&&(r=i),c>=0?(o=(e.min.z-d.z)*c,s=(e.max.z-d.z)*c):(o=(e.max.z-d.z)*c,s=(e.min.z-d.z)*c),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,XJ)}},{key:"intersectTriangle",value:function(e,t,n,r,a){JJ.subVectors(t,e),QJ.subVectors(n,e),eQ.crossVectors(JJ,QJ);var i,o=this.direction.dot(eQ);if(o>0){if(r)return null;i=1}else{if(!(o<0))return null;i=-1,o=-o}$J.subVectors(this.origin,e);var s=i*this.direction.dot(QJ.crossVectors($J,QJ));if(s<0)return null;var l=i*this.direction.dot(JJ.cross($J));if(l<0)return null;if(s+l>o)return null;var u=-i*$J.dot(eQ);return u<0?null:this.at(u/o,a)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),nQ=function(){function e(){M(this,e),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return(0,A.Z)(e,[{key:"set",value:function(e,t,n,r,a,i,o,s,l,u,c,d,h,f,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=a,v[5]=i,v[9]=o,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=d,v[3]=h,v[7]=f,v[11]=p,v[15]=m,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/rQ.setFromMatrixColumn(e,0).length(),a=1/rQ.setFromMatrixColumn(e,1).length(),i=1/rQ.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*i,t[9]=n[9]*i,t[10]=n[10]*i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,a=e.z,i=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(a),c=Math.sin(a);if("XYZ"===e.order){var d=i*u,h=i*c,f=o*u,p=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=h+f*l,t[5]=d-p*l,t[9]=-o*s,t[2]=p-d*l,t[6]=f+h*l,t[10]=i*s}else if("YXZ"===e.order){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m+y*o,t[4]=g*o-v,t[8]=i*l,t[1]=i*c,t[5]=i*u,t[9]=-o,t[2]=v*o-g,t[6]=y+m*o,t[10]=i*s}else if("ZXY"===e.order){var b=s*u,x=s*c,w=l*u,k=l*c;t[0]=b-k*o,t[4]=-i*c,t[8]=w+x*o,t[1]=x+w*o,t[5]=i*u,t[9]=k-b*o,t[2]=-i*l,t[6]=o,t[10]=i*s}else if("ZYX"===e.order){var S=i*u,T=i*c,E=o*u,C=o*c;t[0]=s*u,t[4]=E*l-T,t[8]=S*l+C,t[1]=s*c,t[5]=C*l+S,t[9]=T*l-E,t[2]=-l,t[6]=o*s,t[10]=i*s}else if("YZX"===e.order){var _=i*s,M=i*l,A=o*s,I=o*l;t[0]=s*u,t[4]=I-_*c,t[8]=A*c+M,t[1]=c,t[5]=i*u,t[9]=-o*u,t[2]=-l*u,t[6]=M*c+A,t[10]=_-I*c}else if("XZY"===e.order){var N=i*s,R=i*l,O=o*s,D=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=N*c+D,t[5]=i*u,t[9]=R*c-O,t[2]=O*c-R,t[6]=o*u,t[10]=D*c+N}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(iQ,e,oQ)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return uQ.subVectors(e,t),0===uQ.lengthSq()&&(uQ.z=1),uQ.normalize(),sQ.crossVectors(n,uQ),0===sQ.lengthSq()&&(1===Math.abs(n.z)?uQ.x+=1e-4:uQ.z+=1e-4,uQ.normalize(),sQ.crossVectors(n,uQ)),sQ.normalize(),lQ.crossVectors(uQ,sQ),r[0]=sQ.x,r[4]=lQ.x,r[8]=uQ.x,r[1]=sQ.y,r[5]=lQ.y,r[9]=uQ.y,r[2]=sQ.z,r[6]=lQ.z,r[10]=uQ.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,a=this.elements,i=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=r[0],k=r[4],S=r[8],T=r[12],E=r[1],C=r[5],_=r[9],M=r[13],A=r[2],I=r[6],N=r[10],R=r[14],O=r[3],D=r[7],L=r[11],P=r[15];return a[0]=i*w+o*E+s*A+l*O,a[4]=i*k+o*C+s*I+l*D,a[8]=i*S+o*_+s*N+l*L,a[12]=i*T+o*M+s*R+l*P,a[1]=u*w+c*E+d*A+h*O,a[5]=u*k+c*C+d*I+h*D,a[9]=u*S+c*_+d*N+h*L,a[13]=u*T+c*M+d*R+h*P,a[2]=f*w+p*E+m*A+v*O,a[6]=f*k+p*C+m*I+v*D,a[10]=f*S+p*_+m*N+v*L,a[14]=f*T+p*M+m*R+v*P,a[3]=g*w+y*E+b*A+x*O,a[7]=g*k+y*C+b*I+x*D,a[11]=g*S+y*_+b*N+x*L,a[15]=g*T+y*M+b*R+x*P,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],a=e[12],i=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],d=e[10],h=e[14];return e[3]*(+a*s*c-r*l*c-a*o*d+n*l*d+r*o*h-n*s*h)+e[7]*(+t*s*h-t*l*d+a*i*d-r*i*h+r*l*u-a*s*u)+e[11]*(+t*l*c-t*o*h-a*i*c+n*i*h+a*o*u-n*l*u)+e[15]*(-r*o*u-t*s*c+t*o*d+r*i*c-n*i*d+n*s*u)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],v=e[15],g=c*m*l-p*d*l+p*s*h-o*m*h-c*s*v+o*d*v,y=f*d*l-u*m*l-f*s*h+i*m*h+u*s*v-i*d*v,b=u*p*l-f*c*l+f*o*h-i*p*h-u*o*v+i*c*v,x=f*c*s-u*p*s-f*o*d+i*p*d+u*o*m-i*c*m,w=t*g+n*y+r*b+a*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var k=1/w;return e[0]=g*k,e[1]=(p*d*a-c*m*a-p*r*h+n*m*h+c*r*v-n*d*v)*k,e[2]=(o*m*a-p*s*a+p*r*l-n*m*l-o*r*v+n*s*v)*k,e[3]=(c*s*a-o*d*a-c*r*l+n*d*l+o*r*h-n*s*h)*k,e[4]=y*k,e[5]=(u*m*a-f*d*a+f*r*h-t*m*h-u*r*v+t*d*v)*k,e[6]=(f*s*a-i*m*a-f*r*l+t*m*l+i*r*v-t*s*v)*k,e[7]=(i*d*a-u*s*a+u*r*l-t*d*l-i*r*h+t*s*h)*k,e[8]=b*k,e[9]=(f*c*a-u*p*a-f*n*h+t*p*h+u*n*v-t*c*v)*k,e[10]=(i*p*a-f*o*a+f*n*l-t*p*l-i*n*v+t*o*v)*k,e[11]=(u*o*a-i*c*a-u*n*l+t*c*l+i*n*h-t*o*h)*k,e[12]=x*k,e[13]=(u*p*r-f*c*r+f*n*d-t*p*d-u*n*m+t*c*m)*k,e[14]=(f*o*r-i*p*r-f*n*s+t*p*s+i*n*m-t*o*m)*k,e[15]=(i*c*r-u*o*r+u*n*s-t*c*s-i*n*d+t*o*d)*k,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,a=e.z;return t[0]*=n,t[4]*=r,t[8]*=a,t[1]*=n,t[5]*=r,t[9]*=a,t[2]*=n,t[6]*=r,t[10]*=a,t[3]*=n,t[7]*=r,t[11]*=a,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),a=1-n,i=e.x,o=e.y,s=e.z,l=a*i,u=a*o;return this.set(l*i+n,l*o-r*s,l*s+r*o,0,l*o+r*s,u*o+n,u*s-r*i,0,l*s-r*o,u*s+r*i,a*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,a,i){return this.set(1,n,a,0,e,1,i,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,a=t._x,i=t._y,o=t._z,s=t._w,l=a+a,u=i+i,c=o+o,d=a*l,h=a*u,f=a*c,p=i*u,m=i*c,v=o*c,g=s*l,y=s*u,b=s*c,x=n.x,w=n.y,k=n.z;return r[0]=(1-(p+v))*x,r[1]=(h+b)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(h-b)*w,r[5]=(1-(d+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(f+y)*k,r[9]=(m-g)*k,r[10]=(1-(d+p))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,a=rQ.set(r[0],r[1],r[2]).length(),i=rQ.set(r[4],r[5],r[6]).length(),o=rQ.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],aQ.copy(this);var s=1/a,l=1/i,u=1/o;return aQ.elements[0]*=s,aQ.elements[1]*=s,aQ.elements[2]*=s,aQ.elements[4]*=l,aQ.elements[5]*=l,aQ.elements[6]*=l,aQ.elements[8]*=u,aQ.elements[9]*=u,aQ.elements[10]*=u,t.setFromRotationMatrix(aQ),n.x=a,n.y=i,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,a,i){void 0===i&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*a/(t-e),l=2*a/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),d=-(i+a)/(i-a),h=-2*i*a/(i-a);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,a,i){var o=this.elements,s=1/(t-e),l=1/(n-r),u=1/(i-a),c=(t+e)*s,d=(n+r)*l,h=(i+a)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();nQ.prototype.isMatrix4=!0;var rQ=new EJ,aQ=new nQ,iQ=new EJ(0,0,0),oQ=new EJ(1,1,1),sQ=new EJ,lQ=new EJ,uQ=new EJ,cQ=new nQ,dQ=new TJ,hQ=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;M(this,e),this._x=t,this._y=n,this._z=r,this._order=a}return(0,A.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,a=r[0],i=r[4],o=r[8],s=r[1],l=r[5],u=r[9],c=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(iJ(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-i,a)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-iJ(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,a),this._z=0);break;case"ZXY":this._x=Math.asin(iJ(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-i,l)):(this._y=0,this._z=Math.atan2(s,a));break;case"ZYX":this._y=Math.asin(-iJ(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,a)):(this._x=0,this._z=Math.atan2(-i,l));break;case"YZX":this._z=Math.asin(iJ(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,a)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-iJ(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return cQ.makeRotationFromQuaternion(e),this.setFromRotationMatrix(cQ,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return dQ.setFromEuler(this),this.setFromQuaternion(dQ,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new EJ(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}]),e}();hQ.prototype.isEuler=!0,hQ.DefaultOrder="XYZ",hQ.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var fQ=function(){function e(){M(this,e),this.mask=1}return(0,A.Z)(e,[{key:"set",value:function(e){this.mask=1<<e|0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!=(this.mask&e.mask)}}]),e}(),pQ=0,mQ=new EJ,vQ=new TJ,gQ=new nQ,yQ=new EJ,bQ=new EJ,xQ=new EJ,wQ=new TJ,kQ=new EJ(1,0,0),SQ=new EJ(0,1,0),TQ=new EJ(0,0,1),EQ={type:"added"},CQ={type:"removed"},_Q=function(e){N(n,e);var t=F(n);function n(){var e;M(this,n),e=t.call(this),Object.defineProperty((0,L.Z)(e),"id",{value:pQ++}),e.uuid=aJ(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new EJ,a=new hQ,i=new TJ,o=new EJ(1,1,1);return a._onChange((function(){i.setFromEuler(a,!1)})),i._onChange((function(){a.setFromQuaternion(i,void 0,!1)})),Object.defineProperties((0,L.Z)(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:a},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new nQ},normalMatrix:{value:new pJ}}),e.matrix=new nQ,e.matrixWorld=new nQ,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new fQ,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return(0,A.Z)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return vQ.setFromAxisAngle(e,t),this.quaternion.multiply(vQ),this}},{key:"rotateOnWorldAxis",value:function(e,t){return vQ.setFromAxisAngle(e,t),this.quaternion.premultiply(vQ),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(kQ,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(SQ,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(TQ,e)}},{key:"translateOnAxis",value:function(e,t){return mQ.copy(e).applyQuaternion(this.quaternion),this.position.add(mQ.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(kQ,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(SQ,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(TQ,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(gQ.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?yQ.copy(e):yQ.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),bQ.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?gQ.lookAt(bQ,yQ,this.up):gQ.lookAt(yQ,bQ,this.up),this.quaternion.setFromRotationMatrix(gQ),r&&(gQ.extractRotation(r.matrixWorld),vQ.setFromRotationMatrix(gQ),this.quaternion.premultiply(vQ.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(EQ)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(CQ)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(CQ)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),gQ.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),gQ.multiply(e.parent.matrixWorld)),e.applyMatrix4(gQ),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var a=this.children[n].getObjectByProperty(e,t);if(void 0!==a)return a}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bQ,e,xQ),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bQ,wQ,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,a=0,i=r.length;a<i;a++)r[a].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function a(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);var i=this.geometry.parameters;if(void 0!==i&&void 0!==i.shapes){var o=i.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var u=o[s];a(e.shapes,u)}else a(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],d=0,h=this.material.length;d<h;d++)c.push(a(e.materials,this.material[d]));r.material=c}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(var f=0;f<this.children.length;f++)r.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var m=this.animations[p];r.animations.push(a(e.animations,m))}}if(t){var v=S(e.geometries),g=S(e.materials),y=S(e.textures),b=S(e.images),x=S(e.shapes),w=S(e.skeletons),k=S(e.animations);v.length>0&&(n.geometries=v),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),b.length>0&&(n.images=b),x.length>0&&(n.shapes=x),w.length>0&&(n.skeletons=w),k.length>0&&(n.animations=k)}return n.object=r,n;function S(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}($$);_Q.DefaultUp=new EJ(0,1,0),_Q.DefaultMatrixAutoUpdate=!0,_Q.prototype.isObject3D=!0;var MQ=new EJ,AQ=new EJ,IQ=new EJ,NQ=new EJ,RQ=new EJ,OQ=new EJ,DQ=new EJ,LQ=new EJ,PQ=new EJ,FQ=new EJ,jQ=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EJ,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EJ,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new EJ;M(this,e),this.a=t,this.b=n,this.c=r}return(0,A.Z)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return MQ.subVectors(this.c,this.b),AQ.subVectors(this.a,this.b),.5*MQ.cross(AQ).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,a,i){return e.getUV(t,this.a,this.b,this.c,n,r,a,i)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,a=this.a,i=this.b,o=this.c;RQ.subVectors(i,a),OQ.subVectors(o,a),LQ.subVectors(e,a);var s=RQ.dot(LQ),l=OQ.dot(LQ);if(s<=0&&l<=0)return t.copy(a);PQ.subVectors(e,i);var u=RQ.dot(PQ),c=OQ.dot(PQ);if(u>=0&&c<=u)return t.copy(i);var d=s*c-u*l;if(d<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(a).addScaledVector(RQ,n);FQ.subVectors(e,o);var h=RQ.dot(FQ),f=OQ.dot(FQ);if(f>=0&&h<=f)return t.copy(o);var p=h*l-s*f;if(p<=0&&l>=0&&f<=0)return r=l/(l-f),t.copy(a).addScaledVector(OQ,r);var m=u*f-h*c;if(m<=0&&c-u>=0&&h-f>=0)return DQ.subVectors(o,i),r=(c-u)/(c-u+(h-f)),t.copy(i).addScaledVector(DQ,r);var v=1/(m+p+d);return n=p*v,r=d*v,t.copy(a).addScaledVector(RQ,n).addScaledVector(OQ,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),MQ.subVectors(e,t),r.cross(MQ);var a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,a){MQ.subVectors(r,t),AQ.subVectors(n,t),IQ.subVectors(e,t);var i=MQ.dot(MQ),o=MQ.dot(AQ),s=MQ.dot(IQ),l=AQ.dot(AQ),u=AQ.dot(IQ),c=i*l-o*o;if(0===c)return a.set(-2,-1,-1);var d=1/c,h=(l*s-o*u)*d,f=(i*u-o*s)*d;return a.set(1-h-f,f,h)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,NQ),NQ.x>=0&&NQ.y>=0&&NQ.x+NQ.y<=1}},{key:"getUV",value:function(e,t,n,r,a,i,o,s){return this.getBarycoord(e,t,n,r,NQ),s.set(0,0),s.addScaledVector(a,NQ.x),s.addScaledVector(i,NQ.y),s.addScaledVector(o,NQ.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return MQ.subVectors(n,t),AQ.subVectors(e,t),MQ.cross(AQ).dot(r)<0}}]),e}(),zQ=0,BQ=function(e){N(n,e);var t=F(n);function n(){var e;return M(this,n),e=t.call(this),Object.defineProperty((0,L.Z)(e),"id",{value:zQ++}),e.uuid=aJ(),e.name="",e.type="Material",e.fog=!0,e.blending=1,e.side=0,e.vertexColors=!1,e.opacity=1,e.format=1023,e.transparent=!1,e.blendSrc=204,e.blendDst=205,e.blendEquation=100,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=7680,e.stencilZFail=7680,e.stencilZPass=7680,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return(0,A.Z)(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenTint&&this.sheenTint.isColor&&(n.sheenTint=this.sheenTint.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(n.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(n.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(n.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),1023!==this.format&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var a=r(e.textures),i=r(e.images);a.length>0&&(n.textures=a),i.length>0&&(n.images=i)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var a=0;a!==r;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}($$);BQ.prototype.isMaterial=!0;var UQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},WQ={h:0,s:0,l:0},VQ={h:0,s:0,l:0};function ZQ(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function HQ(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function GQ(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var qQ=function(){function e(t,n,r){return M(this,e),void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return(0,A.Z)(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,n){return this.r=e,this.g=t,this.b=n,this}},{key:"setHSL",value:function(e,t,n){if(e=oJ(e,1),t=iJ(t,0,1),n=iJ(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=ZQ(a,r,e+1/3),this.g=ZQ(a,r,e),this.b=ZQ(a,r,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,a=n[1],i=n[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(o,s,l)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){var u=n[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=UQ[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}},{key:"copyLinearToGamma",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=HQ(e.r),this.g=HQ(e.g),this.b=HQ(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=GQ(e.r),this.g=GQ(e.g),this.b=GQ(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t,n,r=this.r,a=this.g,i=this.b,o=Math.max(r,a,i),s=Math.min(r,a,i),l=(s+o)/2;if(s===o)t=0,n=0;else{var u=o-s;switch(n=l<=.5?u/(o+s):u/(2-o-s),o){case r:t=(a-i)/u+(a<i?6:0);break;case a:t=(i-r)/u+2;break;case i:t=(r-a)/u+4}t/=6}return e.h=t,e.s=n,e.l=l,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(WQ),WQ.h+=e,WQ.s+=t,WQ.l+=n,this.setHSL(WQ.h,WQ.s,WQ.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(WQ),e.getHSL(VQ);var n=sJ(WQ.h,VQ.h,t),r=sJ(WQ.s,VQ.s,t),a=sJ(WQ.l,VQ.l,t);return this.setHSL(n,r,a),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();qQ.NAMES=UQ,qQ.prototype.isColor=!0,qQ.prototype.r=1,qQ.prototype.g=1,qQ.prototype.b=1;var XQ=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="MeshBasicMaterial",r.color=new qQ(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(BQ);XQ.prototype.isMeshBasicMaterial=!0;var YQ=new EJ,KQ=new hJ,$Q=function(){function e(t,n,r){if(M(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}return(0,A.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new qQ),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new hJ),t[n++]=i.x,t[n++]=i.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new EJ),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new wJ),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)KQ.fromBufferAttribute(this,t),KQ.applyMatrix3(e),this.setXY(t,KQ.x,KQ.y);else if(3===this.itemSize)for(var r=0,a=this.count;r<a;r++)YQ.fromBufferAttribute(this,r),YQ.applyMatrix3(e),this.setXYZ(r,YQ.x,YQ.y,YQ.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)YQ.x=this.getX(t),YQ.y=this.getY(t),YQ.z=this.getZ(t),YQ.applyMatrix4(e),this.setXYZ(t,YQ.x,YQ.y,YQ.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)YQ.x=this.getX(t),YQ.y=this.getY(t),YQ.z=this.getZ(t),YQ.applyNormalMatrix(e),this.setXYZ(t,YQ.x,YQ.y,YQ.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)YQ.x=this.getX(t),YQ.y=this.getY(t),YQ.z=this.getZ(t),YQ.transformDirection(e),this.setXYZ(t,YQ.x,YQ.y,YQ.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,a){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=a,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();$Q.prototype.isBufferAttribute=!0;var JQ=function(e){N(n,e);var t=F(n);function n(e,r,a){return M(this,n),t.call(this,new Uint16Array(e),r,a)}return(0,A.Z)(n)}($Q),QQ=function(e){N(n,e);var t=F(n);function n(e,r,a){return M(this,n),t.call(this,new Uint32Array(e),r,a)}return(0,A.Z)(n)}($Q);(function(e){N(n,e);var t=F(n);function n(e,r,a){return M(this,n),t.call(this,new Uint16Array(e),r,a)}return(0,A.Z)(n)})($Q).prototype.isFloat16BufferAttribute=!0;var e0=function(e){N(n,e);var t=F(n);function n(e,r,a){return M(this,n),t.call(this,new Float32Array(e),r,a)}return(0,A.Z)(n)}($Q),t0=0,n0=new nQ,r0=new _Q,a0=new EJ,i0=new MJ,o0=new MJ,s0=new EJ,l0=function(e){N(n,e);var t=F(n);function n(){var e;return M(this,n),e=t.call(this),Object.defineProperty((0,L.Z)(e),"id",{value:t0++}),e.uuid=aJ(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return(0,A.Z)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(mJ(e)>65535?QQ:JQ)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new pJ).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(e),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return n0.makeRotationFromQuaternion(e),this.applyMatrix4(n0),this}},{key:"rotateX",value:function(e){return n0.makeRotationX(e),this.applyMatrix4(n0),this}},{key:"rotateY",value:function(e){return n0.makeRotationY(e),this.applyMatrix4(n0),this}},{key:"rotateZ",value:function(e){return n0.makeRotationZ(e),this.applyMatrix4(n0),this}},{key:"translate",value:function(e,t,n){return n0.makeTranslation(e,t,n),this.applyMatrix4(n0),this}},{key:"scale",value:function(e,t,n){return n0.makeScale(e,t,n),this.applyMatrix4(n0),this}},{key:"lookAt",value:function(e){return r0.lookAt(e),r0.updateMatrix(),this.applyMatrix4(r0.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(a0).negate(),this.translate(a0.x,a0.y,a0.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new e0(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new MJ);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new EJ(-1/0,-1/0,-1/0),new EJ(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var a=t[n];i0.setFromBufferAttribute(a),this.morphTargetsRelative?(s0.addVectors(this.boundingBox.min,i0.min),this.boundingBox.expandByPoint(s0),s0.addVectors(this.boundingBox.max,i0.max),this.boundingBox.expandByPoint(s0)):(this.boundingBox.expandByPoint(i0.min),this.boundingBox.expandByPoint(i0.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new qJ);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new EJ,1/0);if(e){var n=this.boundingSphere.center;if(i0.setFromBufferAttribute(e),t)for(var r=0,a=t.length;r<a;r++){var i=t[r];o0.setFromBufferAttribute(i),this.morphTargetsRelative?(s0.addVectors(i0.min,o0.min),i0.expandByPoint(s0),s0.addVectors(i0.max,o0.max),i0.expandByPoint(s0)):(i0.expandByPoint(o0.min),i0.expandByPoint(o0.max))}i0.getCenter(n);for(var o=0,s=0,l=e.count;s<l;s++)s0.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(s0));if(t)for(var u=0,c=t.length;u<c;u++)for(var d=t[u],h=this.morphTargetsRelative,f=0,p=d.count;f<p;f++)s0.fromBufferAttribute(d,f),h&&(a0.fromBufferAttribute(e,f),s0.add(a0)),o=Math.max(o,n.distanceToSquared(s0));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,a=t.normal.array,i=t.uv.array,o=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new $Q(new Float32Array(4*o),4));for(var s=t.tangent.array,l=[],u=[],c=0;c<o;c++)l[c]=new EJ,u[c]=new EJ;var d=new EJ,h=new EJ,f=new EJ,p=new hJ,m=new hJ,v=new hJ,g=new EJ,y=new EJ,b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(var x=0,w=b.length;x<w;++x)for(var k=b[x],S=k.start,T=S,E=S+k.count;T<E;T+=3)P(n[T+0],n[T+1],n[T+2]);for(var C=new EJ,_=new EJ,M=new EJ,A=new EJ,I=0,N=b.length;I<N;++I)for(var R=b[I],O=R.start,D=O,L=O+R.count;D<L;D+=3)F(n[D+0]),F(n[D+1]),F(n[D+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function P(e,t,n){d.fromArray(r,3*e),h.fromArray(r,3*t),f.fromArray(r,3*n),p.fromArray(i,2*e),m.fromArray(i,2*t),v.fromArray(i,2*n),h.sub(d),f.sub(d),m.sub(p),v.sub(p);var a=1/(m.x*v.y-v.x*m.y);isFinite(a)&&(g.copy(h).multiplyScalar(v.y).addScaledVector(f,-m.y).multiplyScalar(a),y.copy(f).multiplyScalar(m.x).addScaledVector(h,-v.x).multiplyScalar(a),l[e].add(g),l[t].add(g),l[n].add(g),u[e].add(y),u[t].add(y),u[n].add(y))}function F(e){M.fromArray(a,3*e),A.copy(M);var t=l[e];C.copy(t),C.sub(M.multiplyScalar(M.dot(t))).normalize(),_.crossVectors(A,t);var n=_.dot(u[e])<0?-1:1;s[4*e]=C.x,s[4*e+1]=C.y,s[4*e+2]=C.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new $Q(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,a=n.count;r<a;r++)n.setXYZ(r,0,0,0);var i=new EJ,o=new EJ,s=new EJ,l=new EJ,u=new EJ,c=new EJ,d=new EJ,h=new EJ;if(e)for(var f=0,p=e.count;f<p;f+=3){var m=e.getX(f+0),v=e.getX(f+1),g=e.getX(f+2);i.fromBufferAttribute(t,m),o.fromBufferAttribute(t,v),s.fromBufferAttribute(t,g),d.subVectors(s,o),h.subVectors(i,o),d.cross(h),l.fromBufferAttribute(n,m),u.fromBufferAttribute(n,v),c.fromBufferAttribute(n,g),l.add(d),u.add(d),c.add(d),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,b=t.count;y<b;y+=3)i.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),d.subVectors(s,o),h.subVectors(i,o),d.cross(h),n.setXYZ(y+0,d.x,d.y,d.z),n.setXYZ(y+1,d.x,d.y,d.z),n.setXYZ(y+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var a=n[r].array,i=e.attributes[r],o=i.array,s=i.itemSize*t,l=Math.min(o.length,a.length-s),u=0,c=s;u<l;u++,c++)a[c]=o[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)s0.fromBufferAttribute(e,t),s0.normalize(),e.setXYZ(t,s0.x,s0.y,s0.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,a=e.normalized,i=new n.constructor(t.length*r),o=0,s=0,l=0,u=t.length;l<u;l++){o=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(var c=0;c<r;c++)i[s++]=n[o++]}return new $Q(i,r,a)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,a=this.attributes;for(var i in a){var o=e(a[i],r);t.setAttribute(i,o)}var s=this.morphAttributes;for(var l in s){for(var u=[],c=s[l],d=0,h=c.length;d<h;d++){var f=e(c[d],r);u.push(f)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,m=0,v=p.length;m<v;m++){var g=p[m];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var a=this.attributes;for(var i in a){var o=a[i];e.data.attributes[i]=o.toJSON(e.data)}var s={},l=!1;for(var u in this.morphAttributes){for(var c=this.morphAttributes[u],d=[],h=0,f=c.length;h<f;h++){var p=c[h];d.push(p.toJSON(e.data))}d.length>0&&(s[u]=d,l=!0)}l&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var m=this.groups;m.length>0&&(e.data.groups=JSON.parse(JSON.stringify(m)));var v=this.boundingSphere;return null!==v&&(e.data.boundingSphere={center:v.center.toArray(),radius:v.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var a in r){var i=r[a];this.setAttribute(a,i.clone(t))}var o=e.morphAttributes;for(var s in o){for(var l=[],u=o[s],c=0,d=u.length;c<d;c++)l.push(u[c].clone(t));this.morphAttributes[s]=l}this.morphTargetsRelative=e.morphTargetsRelative;for(var h=e.groups,f=0,p=h.length;f<p;f++){var m=h[f];this.addGroup(m.start,m.count,m.materialIndex)}var v=e.boundingBox;null!==v&&(this.boundingBox=v.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}($$);l0.prototype.isBufferGeometry=!0;var u0=new nQ,c0=new tQ,d0=new qJ,h0=new EJ,f0=new EJ,p0=new EJ,m0=new EJ,v0=new EJ,g0=new EJ,y0=new EJ,b0=new EJ,x0=new EJ,w0=new hJ,k0=new hJ,S0=new hJ,T0=new EJ,E0=new EJ,C0=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new l0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new XQ;return M(this,n),(e=t.call(this)).type="Mesh",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,i=r.length;a<i;a++){var o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(e,t){var n,r=this.geometry,a=this.material,i=this.matrixWorld;if(void 0!==a&&(null===r.boundingSphere&&r.computeBoundingSphere(),d0.copy(r.boundingSphere),d0.applyMatrix4(i),!1!==e.ray.intersectsSphere(d0)&&(u0.copy(i).invert(),c0.copy(e.ray).applyMatrix4(u0),null===r.boundingBox||!1!==c0.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var o=r.index,s=r.attributes.position,l=r.morphAttributes.position,u=r.morphTargetsRelative,c=r.attributes.uv,d=r.attributes.uv2,h=r.groups,f=r.drawRange;if(null!==o)if(Array.isArray(a))for(var p=0,m=h.length;p<m;p++)for(var v=h[p],g=a[v.materialIndex],y=Math.max(v.start,f.start),b=Math.min(o.count,Math.min(v.start+v.count,f.start+f.count));y<b;y+=3){var x=o.getX(y),w=o.getX(y+1),k=o.getX(y+2);(n=_0(this,g,e,c0,s,l,u,c,d,x,w,k))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=v.materialIndex,t.push(n))}else for(var S=Math.max(0,f.start),T=Math.min(o.count,f.start+f.count);S<T;S+=3){var E=o.getX(S),C=o.getX(S+1),_=o.getX(S+2);(n=_0(this,a,e,c0,s,l,u,c,d,E,C,_))&&(n.faceIndex=Math.floor(S/3),t.push(n))}else if(void 0!==s)if(Array.isArray(a))for(var M=0,A=h.length;M<A;M++)for(var I=h[M],N=a[I.materialIndex],R=Math.max(I.start,f.start),O=Math.min(s.count,Math.min(I.start+I.count,f.start+f.count));R<O;R+=3)(n=_0(this,N,e,c0,s,l,u,c,d,R,R+1,R+2))&&(n.faceIndex=Math.floor(R/3),n.face.materialIndex=I.materialIndex,t.push(n));else for(var D=Math.max(0,f.start),L=Math.min(s.count,f.start+f.count);D<L;D+=3)(n=_0(this,a,e,c0,s,l,u,c,d,D,D+1,D+2))&&(n.faceIndex=Math.floor(D/3),t.push(n))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(_Q);function _0(e,t,n,r,a,i,o,s,l,u,c,d){h0.fromBufferAttribute(a,u),f0.fromBufferAttribute(a,c),p0.fromBufferAttribute(a,d);var h=e.morphTargetInfluences;if(i&&h){y0.set(0,0,0),b0.set(0,0,0),x0.set(0,0,0);for(var f=0,p=i.length;f<p;f++){var m=h[f],v=i[f];0!==m&&(m0.fromBufferAttribute(v,u),v0.fromBufferAttribute(v,c),g0.fromBufferAttribute(v,d),o?(y0.addScaledVector(m0,m),b0.addScaledVector(v0,m),x0.addScaledVector(g0,m)):(y0.addScaledVector(m0.sub(h0),m),b0.addScaledVector(v0.sub(f0),m),x0.addScaledVector(g0.sub(p0),m)))}h0.add(y0),f0.add(b0),p0.add(x0)}e.isSkinnedMesh&&(e.boneTransform(u,h0),e.boneTransform(c,f0),e.boneTransform(d,p0));var g=function(e,t,n,r,a,i,o,s){if(null===(1===t.side?r.intersectTriangle(o,i,a,!0,s):r.intersectTriangle(a,i,o,2!==t.side,s)))return null;E0.copy(s),E0.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(E0);return l<n.near||l>n.far?null:{distance:l,point:E0.clone(),object:e}}(e,t,n,r,h0,f0,p0,T0);if(g){s&&(w0.fromBufferAttribute(s,u),k0.fromBufferAttribute(s,c),S0.fromBufferAttribute(s,d),g.uv=jQ.getUV(T0,h0,f0,p0,w0,k0,S0,new hJ)),l&&(w0.fromBufferAttribute(l,u),k0.fromBufferAttribute(l,c),S0.fromBufferAttribute(l,d),g.uv2=jQ.getUV(T0,h0,f0,p0,w0,k0,S0,new hJ));var y={a:u,b:c,c:d,normal:new EJ,materialIndex:0};jQ.getNormal(h0,f0,p0,y.normal),g.face=y}return g}C0.prototype.isMesh=!0;var M0=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;M(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:a,depth:i,widthSegments:o,heightSegments:s,depthSegments:l};var u=(0,L.Z)(e);o=Math.floor(o),s=Math.floor(s),l=Math.floor(l);var c=[],d=[],h=[],f=[],p=0,m=0;function v(e,t,n,r,a,i,o,s,l,v,g){for(var y=i/l,b=o/v,x=i/2,w=o/2,k=s/2,S=l+1,T=v+1,E=0,C=0,_=new EJ,M=0;M<T;M++)for(var A=M*b-w,I=0;I<S;I++){var N=I*y-x;_[e]=N*r,_[t]=A*a,_[n]=k,d.push(_.x,_.y,_.z),_[e]=0,_[t]=0,_[n]=s>0?1:-1,h.push(_.x,_.y,_.z),f.push(I/l),f.push(1-M/v),E+=1}for(var R=0;R<v;R++)for(var O=0;O<l;O++){var D=p+O+S*R,L=p+O+S*(R+1),P=p+(O+1)+S*(R+1),F=p+(O+1)+S*R;c.push(D,L,F),c.push(L,P,F),C+=6}u.addGroup(m,C,g),m+=C,p+=E}return v("z","y","x",-1,-1,i,a,r,l,s,0),v("z","y","x",1,-1,i,a,-r,l,s,1),v("x","z","y",1,1,r,i,a,o,l,2),v("x","z","y",1,-1,r,i,-a,o,l,3),v("x","y","z",1,-1,r,a,i,o,s,4),v("x","y","z",-1,-1,r,a,-i,o,s,5),e.setIndex(c),e.setAttribute("position",new e0(d,3)),e.setAttribute("normal",new e0(h,3)),e.setAttribute("uv",new e0(f,2)),e}return(0,A.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(l0);function A0(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var a=e[n][r];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?t[n][r]=a.clone():Array.isArray(a)?t[n][r]=a.slice():t[n][r]=a}return t}function I0(e){for(var t={},n=0;n<e.length;n++){var r=A0(e[n]);for(var a in r)t[a]=r[a]}return t}var N0={clone:A0,merge:I0},R0=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(e)),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=A0(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=lu(R(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}]),n}(BQ);R0.prototype.isShaderMaterial=!0;var O0=function(e){N(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).type="Camera",e.matrixWorldInverse=new nQ,e.projectionMatrix=new nQ,e.projectionMatrixInverse=new nQ,e}return(0,A.Z)(n,[{key:"copy",value:function(e,t){return lu(R(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){lu(R(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){lu(R(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(_Q);O0.prototype.isCamera=!0;var D0=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return M(this,n),(e=t.call(this)).type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=i,e.far=o,e.focus=10,e.aspect=a,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return(0,A.Z)(n,[{key:"copy",value:function(e,t){return lu(R(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*eJ*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Q$*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*eJ*Math.atan(Math.tan(.5*Q$*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,a,i){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=i,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Q$*this.fov)/this.zoom,n=2*t,r=this.aspect*n,a=-.5*r,i=this.view;if(null!==this.view&&this.view.enabled){var o=i.fullWidth,s=i.fullHeight;a+=i.offsetX*r/o,t-=i.offsetY*n/s,r*=i.width/o,n*=i.height/s}var l=this.filmOffset;0!==l&&(a+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=lu(R(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(O0);D0.prototype.isPerspectiveCamera=!0;var L0=function(e){N(n,e);var t=F(n);function n(e,r,a){var i;if(M(this,n),(i=t.call(this)).type="CubeCamera",!0!==a.isWebGLCubeRenderTarget)return P(i,void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."));i.renderTarget=a;var o=new D0(90,1,e,r);o.layers=i.layers,o.up.set(0,-1,0),o.lookAt(new EJ(1,0,0)),i.add(o);var s=new D0(90,1,e,r);s.layers=i.layers,s.up.set(0,-1,0),s.lookAt(new EJ(-1,0,0)),i.add(s);var l=new D0(90,1,e,r);l.layers=i.layers,l.up.set(0,0,1),l.lookAt(new EJ(0,1,0)),i.add(l);var u=new D0(90,1,e,r);u.layers=i.layers,u.up.set(0,0,-1),u.lookAt(new EJ(0,-1,0)),i.add(u);var c=new D0(90,1,e,r);c.layers=i.layers,c.up.set(0,-1,0),c.lookAt(new EJ(0,0,1)),i.add(c);var d=new D0(90,1,e,r);return d.layers=i.layers,d.up.set(0,-1,0),d.lookAt(new EJ(0,0,-1)),i.add(d),P(i)}return(0,A.Z)(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=(0,U.Z)(this.children,6),a=r[0],i=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=e.xr.enabled,d=e.getRenderTarget();e.xr.enabled=!1;var h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,a),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(d),e.xr.enabled=c}}]),n}(_Q),P0=function(e){N(n,e);var t=F(n);function n(e,r,a,i,o,s,l,u,c,d){var h;return M(this,n),(h=t.call(this,e=void 0!==e?e:[],r=void 0!==r?r:301,a,i,o,s,l,u,c,d)).flipY=!1,h}return(0,A.Z)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(bJ);P0.prototype.isCubeTexture=!0;var F0=function(e){N(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=a),i=t.call(this,e,e,r),r=r||{},i.texture=new P0(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),i.texture.isRenderTargetTexture=!0,i.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,i.texture.minFilter=void 0!==r.minFilter?r.minFilter:1006,i.texture._needsFlipEnvMap=!1,i}return(0,A.Z)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.format=1023,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",a="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",i=new M0(5,5,5),o=new R0({name:"CubemapFromEquirect",uniforms:A0(n),vertexShader:r,fragmentShader:a,side:1,blending:0});o.uniforms.tEquirect.value=t;var s=new C0(i,o),l=t.minFilter;return 1008===t.minFilter&&(t.minFilter=1006),new L0(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var a=e.getRenderTarget(),i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(a)}}]),n}(kJ);F0.prototype.isWebGLCubeRenderTarget=!0;var j0=new EJ,z0=new EJ,B0=new pJ,U0=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EJ(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;M(this,e),this.normal=t,this.constant=n}return(0,A.Z)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=j0.subVectors(n,t).cross(z0.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(j0),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(n).multiplyScalar(a).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||B0.getNormalMatrix(e),r=this.coplanarPoint(j0).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(a),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();U0.prototype.isPlane=!0;var W0=new qJ,V0=new EJ,Z0=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new U0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new U0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new U0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new U0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new U0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new U0;M(this,e),this.planes=[t,n,r,a,i,o]}return(0,A.Z)(e,[{key:"set",value:function(e,t,n,r,a,i){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(a),o[5].copy(i),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],a=n[1],i=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],d=n[8],h=n[9],f=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,c-s,p-d,y-m).normalize(),t[1].setComponents(o+r,c+s,p+d,y+m).normalize(),t[2].setComponents(o+a,c+l,p+h,y+v).normalize(),t[3].setComponents(o-a,c-l,p-h,y-v).normalize(),t[4].setComponents(o-i,c-u,p-f,y-g).normalize(),t[5].setComponents(o+i,c+u,p+f,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),W0.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(W0)}},{key:"intersectsSprite",value:function(e){return W0.center.set(0,0,0),W0.radius=.7071067811865476,W0.applyMatrix4(e.matrixWorld),this.intersectsSphere(W0)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,a=0;a<6;a++)if(t[a].distanceToPoint(n)<r)return!1;return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(V0.x=r.normal.x>0?e.max.x:e.min.x,V0.y=r.normal.y>0?e.max.y:e.min.y,V0.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(V0)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function H0(){var e=null,t=!1,n=null,r=null;function a(t,i){n(t,i),r=e.requestAnimationFrame(a)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(a),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function G0(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,a){if(t.isGLBufferAttribute){var i=r.get(t);(!i||i.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var a=t.array,i=t.usage,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,a,i),t.onUploadCallback();var s=5126;return a instanceof Float32Array?s=5126:a instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):a instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:a instanceof Int16Array?s=5122:a instanceof Uint32Array?s=5125:a instanceof Int32Array?s=5124:a instanceof Int8Array?s=5120:(a instanceof Uint8Array||a instanceof Uint8ClampedArray)&&(s=5121),{buffer:o,type:s,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,a)):o.version<t.version&&(function(t,r,a){var i=r.array,o=r.updateRange;e.bindBuffer(a,t),-1===o.count?e.bufferSubData(a,0,i):(n?e.bufferSubData(a,o.offset*i.BYTES_PER_ELEMENT,i,o.offset,o.count):e.bufferSubData(a,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,t,a),o.version=t.version)}}}}var q0=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;M(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:a,widthSegments:i,heightSegments:o};for(var s=r/2,l=a/2,u=Math.floor(i),c=Math.floor(o),d=u+1,h=c+1,f=r/u,p=a/c,m=[],v=[],g=[],y=[],b=0;b<h;b++)for(var x=b*p-l,w=0;w<d;w++){var k=w*f-s;v.push(k,-x,0),g.push(0,0,1),y.push(w/u),y.push(1-b/c)}for(var S=0;S<c;S++)for(var T=0;T<u;T++){var E=T+d*S,C=T+d*(S+1),_=T+1+d*(S+1),A=T+1+d*S;m.push(E,C,A),m.push(C,_,A)}return e.setIndex(m),e.setAttribute("position",new e0(v,3)),e.setAttribute("normal",new e0(g,3)),e.setAttribute("uv",new e0(y,2)),e}return(0,A.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(l0),X0={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenTint, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenTint * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenTint = sheenTint;\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenTint;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenTint, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenTint;\n\tuniform float sheenRoughness;\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Y0={common:{diffuse:{value:new qQ(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new pJ},uv2Transform:{value:new pJ},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new hJ(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qQ(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qQ(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new pJ}},sprite:{diffuse:{value:new qQ(16777215)},opacity:{value:1},center:{value:new hJ(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new pJ}}},K0={basic:{uniforms:I0([Y0.common,Y0.specularmap,Y0.envmap,Y0.aomap,Y0.lightmap,Y0.fog]),vertexShader:X0.meshbasic_vert,fragmentShader:X0.meshbasic_frag},lambert:{uniforms:I0([Y0.common,Y0.specularmap,Y0.envmap,Y0.aomap,Y0.lightmap,Y0.emissivemap,Y0.fog,Y0.lights,{emissive:{value:new qQ(0)}}]),vertexShader:X0.meshlambert_vert,fragmentShader:X0.meshlambert_frag},phong:{uniforms:I0([Y0.common,Y0.specularmap,Y0.envmap,Y0.aomap,Y0.lightmap,Y0.emissivemap,Y0.bumpmap,Y0.normalmap,Y0.displacementmap,Y0.fog,Y0.lights,{emissive:{value:new qQ(0)},specular:{value:new qQ(1118481)},shininess:{value:30}}]),vertexShader:X0.meshphong_vert,fragmentShader:X0.meshphong_frag},standard:{uniforms:I0([Y0.common,Y0.envmap,Y0.aomap,Y0.lightmap,Y0.emissivemap,Y0.bumpmap,Y0.normalmap,Y0.displacementmap,Y0.roughnessmap,Y0.metalnessmap,Y0.fog,Y0.lights,{emissive:{value:new qQ(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:X0.meshphysical_vert,fragmentShader:X0.meshphysical_frag},toon:{uniforms:I0([Y0.common,Y0.aomap,Y0.lightmap,Y0.emissivemap,Y0.bumpmap,Y0.normalmap,Y0.displacementmap,Y0.gradientmap,Y0.fog,Y0.lights,{emissive:{value:new qQ(0)}}]),vertexShader:X0.meshtoon_vert,fragmentShader:X0.meshtoon_frag},matcap:{uniforms:I0([Y0.common,Y0.bumpmap,Y0.normalmap,Y0.displacementmap,Y0.fog,{matcap:{value:null}}]),vertexShader:X0.meshmatcap_vert,fragmentShader:X0.meshmatcap_frag},points:{uniforms:I0([Y0.points,Y0.fog]),vertexShader:X0.points_vert,fragmentShader:X0.points_frag},dashed:{uniforms:I0([Y0.common,Y0.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:X0.linedashed_vert,fragmentShader:X0.linedashed_frag},depth:{uniforms:I0([Y0.common,Y0.displacementmap]),vertexShader:X0.depth_vert,fragmentShader:X0.depth_frag},normal:{uniforms:I0([Y0.common,Y0.bumpmap,Y0.normalmap,Y0.displacementmap,{opacity:{value:1}}]),vertexShader:X0.meshnormal_vert,fragmentShader:X0.meshnormal_frag},sprite:{uniforms:I0([Y0.sprite,Y0.fog]),vertexShader:X0.sprite_vert,fragmentShader:X0.sprite_frag},background:{uniforms:{uvTransform:{value:new pJ},t2D:{value:null}},vertexShader:X0.background_vert,fragmentShader:X0.background_frag},cube:{uniforms:I0([Y0.envmap,{opacity:{value:1}}]),vertexShader:X0.cube_vert,fragmentShader:X0.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:X0.equirect_vert,fragmentShader:X0.equirect_frag},distanceRGBA:{uniforms:I0([Y0.common,Y0.displacementmap,{referencePosition:{value:new EJ},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:X0.distanceRGBA_vert,fragmentShader:X0.distanceRGBA_frag},shadow:{uniforms:I0([Y0.lights,Y0.fog,{color:{value:new qQ(0)},opacity:{value:1}}]),vertexShader:X0.shadow_vert,fragmentShader:X0.shadow_frag}};function $0(e,t,n,r,a){var i,o,s=new qQ(0),l=0,u=null,c=0,d=null;function h(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,a)}return{getClearColor:function(){return s},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),h(s,l=t)},getClearAlpha:function(){return l},setClearAlpha:function(e){h(s,l=e)},render:function(n,a){var f=!1,p=!0===a.isScene?a.background:null;p&&p.isTexture&&(p=t.get(p));var m=e.xr,v=m.getSession&&m.getSession();v&&"additive"===v.environmentBlendMode&&(p=null),null===p?h(s,l):p&&p.isColor&&(h(p,1),f=!0),(e.autoClear||f)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||306===p.mapping)?(void 0===o&&((o=new C0(new M0(1,1,1),new R0({name:"BackgroundCubeMaterial",uniforms:A0(K0.cube.uniforms),vertexShader:K0.cube.vertexShader,fragmentShader:K0.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(o)),o.material.uniforms.envMap.value=p,o.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,u===p&&c===p.version&&d===e.toneMapping||(o.material.needsUpdate=!0,u=p,c=p.version,d=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null)):p&&p.isTexture&&(void 0===i&&((i=new C0(new q0(2,2),new R0({name:"BackgroundMaterial",uniforms:A0(K0.background.uniforms),vertexShader:K0.background.vertexShader,fragmentShader:K0.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(i)),i.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),i.material.uniforms.uvTransform.value.copy(p.matrix),u===p&&c===p.version&&d===e.toneMapping||(i.material.needsUpdate=!0,u=p,c=p.version,d=e.toneMapping),n.unshift(i,i.geometry,i.material,0,0,null))}}}function J0(e,t,n,r){var a=e.getParameter(34921),i=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==i,s={},l=h(null),u=l;function c(t){return r.isWebGL2?e.bindVertexArray(t):i.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):i.deleteVertexArrayOES(t)}function h(e){for(var t=[],n=[],r=[],i=0;i<a;i++)t[i]=0,n[i]=0,r[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){for(var e=u.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function p(e){m(e,0)}function m(n,a){var i=u.newAttributes,o=u.enabledAttributes,s=u.attributeDivisors;i[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==a&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,a),s[n]=a)}function v(){for(var t=u.newAttributes,n=u.enabledAttributes,r=0,a=n.length;r<a;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function g(t,n,a,i,o,s){!0!==r.isWebGL2||5124!==a&&5125!==a?e.vertexAttribPointer(t,n,a,i,o,s):e.vertexAttribIPointer(t,n,a,o,s)}function y(){b(),u!==l&&c((u=l).object)}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(a,l,d,y,b){var x=!1;if(o){var w=function(t,n,a){var o=!0===a.wireframe,l=s[t.id];void 0===l&&(l={},s[t.id]=l);var u=l[n.id];void 0===u&&(u={},l[n.id]=u);var c=u[o];return void 0===c&&(c=h(r.isWebGL2?e.createVertexArray():i.createVertexArrayOES()),u[o]=c),c}(y,d,l);u!==w&&c((u=w).object),x=function(e,t){var n=u.attributes,r=e.attributes,a=0;for(var i in r){var o=n[i],s=r[i];if(void 0===o)return!0;if(o.attribute!==s)return!0;if(o.data!==s.data)return!0;a++}return u.attributesNum!==a||u.index!==t}(y,b),x&&function(e,t){var n={},r=e.attributes,a=0;for(var i in r){var o=r[i],s={};s.attribute=o,o.data&&(s.data=o.data),n[i]=s,a++}u.attributes=n,u.attributesNum=a,u.index=t}(y,b)}else{var k=!0===l.wireframe;u.geometry===y.id&&u.program===d.id&&u.wireframe===k||(u.geometry=y.id,u.program=d.id,u.wireframe=k,x=!0)}!0===a.isInstancedMesh&&(x=!0),null!==b&&n.update(b,34963),x&&(function(a,i,o,s){if(!1!==r.isWebGL2||!a.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==t.get("ANGLE_instanced_arrays")){f();var l=s.attributes,u=o.getAttributes(),c=i.defaultAttributeValues;for(var d in u){var h=u[d];if(h.location>=0){var y=l[d];if(void 0===y&&("instanceMatrix"===d&&a.instanceMatrix&&(y=a.instanceMatrix),"instanceColor"===d&&a.instanceColor&&(y=a.instanceColor)),void 0!==y){var b=y.normalized,x=y.itemSize,w=n.get(y);if(void 0===w)continue;var k=w.buffer,S=w.type,T=w.bytesPerElement;if(y.isInterleavedBufferAttribute){var E=y.data,C=E.stride,_=y.offset;if(E&&E.isInstancedInterleavedBuffer){for(var M=0;M<h.locationSize;M++)m(h.location+M,E.meshPerAttribute);!0!==a.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=E.meshPerAttribute*E.count)}else for(var A=0;A<h.locationSize;A++)p(h.location+A);e.bindBuffer(34962,k);for(var I=0;I<h.locationSize;I++)g(h.location+I,x/h.locationSize,S,b,C*T,(_+x/h.locationSize*I)*T)}else{if(y.isInstancedBufferAttribute){for(var N=0;N<h.locationSize;N++)m(h.location+N,y.meshPerAttribute);!0!==a.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)}else for(var R=0;R<h.locationSize;R++)p(h.location+R);e.bindBuffer(34962,k);for(var O=0;O<h.locationSize;O++)g(h.location+O,x/h.locationSize,S,b,x*T,x/h.locationSize*O*T)}}else if(void 0!==c){var D=c[d];if(void 0!==D)switch(D.length){case 2:e.vertexAttrib2fv(h.location,D);break;case 3:e.vertexAttrib3fv(h.location,D);break;case 4:e.vertexAttrib4fv(h.location,D);break;default:e.vertexAttrib1fv(h.location,D)}}}}v()}}(a,l,d,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){for(var e in y(),s){var t=s[e];for(var n in t){var r=t[n];for(var a in r)d(r[a].object),delete r[a];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var a in r)d(r[a].object),delete r[a];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var a in r)d(r[a].object),delete r[a];delete n[e.id]}}},initAttributes:f,enableAttribute:p,disableUnusedAttributes:v}}function Q0(e,t,n,r){var a,i=r.isWebGL2;this.setMode=function(e){a=e},this.render=function(t,r){e.drawArrays(a,t,r),n.update(r,a,1)},this.renderInstances=function(r,o,s){if(0!==s){var l,u;if(i)l=e,u="drawArraysInstanced";else if(u="drawArraysInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](a,r,o,s),n.update(o,a,s)}}}function e1(e,t,n){var r;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var i="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=a(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=i||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),d=e.getParameter(35660),h=e.getParameter(3379),f=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),v=e.getParameter(36348),g=e.getParameter(36349),y=d>0,b=i||t.has("OES_texture_float");return{isWebGL2:i,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:a,precision:o,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:i?e.getParameter(36183):0}}function t1(e){var t=this,n=null,r=0,a=!1,i=!1,o=new U0,s=new pJ,l={value:null,needsUpdate:!1};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,a){var i=null!==e?e.length:0,u=null;if(0!==i){if(u=l.value,!0!==a||null===u){var c=r+4*i,d=n.matrixWorldInverse;s.getNormalMatrix(d),(null===u||u.length<c)&&(u=new Float32Array(c));for(var h=0,f=r;h!==i;++h,f+=4)o.copy(e[h]).applyMatrix4(d,s),o.normal.toArray(u,f),u[f+3]=o.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=i,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,i){var o=0!==e.length||t||0!==r||a;return a=t,n=c(e,i,0),r=e.length,o},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,u()},this.setState=function(t,o,s){var d=t.clippingPlanes,h=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!a||null===d||0===d.length||i&&!f)i?c(null):u();else{var m=i?0:r,v=4*m,g=p.clippingState||null;l.value=g,g=c(d,o,v,s);for(var y=0;y!==v;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=m}}}function n1(e){var t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var a=t.get(n);void 0!==a&&(t.delete(n),a.dispose())}return{get:function(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){var i=a.mapping;if(303===i||304===i){if(t.has(a))return n(t.get(a).texture,a.mapping);var o=a.image;if(o&&o.height>0){var s=e.getRenderTarget(),l=new F0(o.height/2);return l.fromEquirectangularTexture(e,a),t.set(a,l),e.setRenderTarget(s),a.addEventListener("dispose",r),n(l.texture,a.mapping)}return null}}return a},dispose:function(){t=new WeakMap}}}K0.physical={uniforms:I0([K0.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new hJ(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenTint:{value:new qQ(0)},sheenRoughness:{value:0},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new hJ},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new qQ(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new qQ(1,1,1)},specularTintMap:{value:null}}]),vertexShader:X0.meshphysical_vert,fragmentShader:X0.meshphysical_frag};var r1=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return M(this,n),(e=t.call(this)).type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=a,e.top=i,e.bottom=o,e.near=s,e.far=l,e.updateProjectionMatrix(),e}return(0,A.Z)(n,[{key:"copy",value:function(e,t){return lu(R(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,a,i){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=i,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,a=n-e,i=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i=(a+=l*this.view.offsetX)+l*this.view.width,s=(o-=u*this.view.offsetY)-u*this.view.height}this.projectionMatrix.makeOrthographic(a,i,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=lu(R(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(O0);r1.prototype.isOrthographicCamera=!0;var a1=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).type="RawShaderMaterial",r}return(0,A.Z)(n)}(R0);a1.prototype.isRawShaderMaterial=!0;var i1=Math.pow(2,8),o1=[.125,.215,.35,.446,.526,.582],s1=5+o1.length,l1={3e3:0,3001:1,3002:2,3004:3,3005:4,3006:5,3007:6},u1=new r1,c1=function(){for(var e=[],t=[],n=[],r=8,a=0;a<s1;a++){var i=Math.pow(2,r);t.push(i);var o=1/i;a>4?o=o1[a-8+4-1]:0==a&&(o=0),n.push(o);for(var s=1/(i-1),l=-s/2,u=1+s/2,c=[l,l,u,l,u,u,l,l,u,u,l,u],d=new Float32Array(108),h=new Float32Array(72),f=new Float32Array(36),p=0;p<6;p++){var m=p%3*2/3-1,v=p>2?0:-1,g=[m,v,0,m+2/3,v,0,m+2/3,v+1,0,m,v,0,m+2/3,v+1,0,m,v+1,0];d.set(g,18*p),h.set(c,12*p);var y=[p,p,p,p,p,p];f.set(y,6*p)}var b=new l0;b.setAttribute("position",new $Q(d,3)),b.setAttribute("uv",new $Q(h,2)),b.setAttribute("faceIndex",new $Q(f,1)),e.push(b),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}(),d1=c1._lodPlanes,h1=c1._sizeLods,f1=c1._sigmas,p1=new qQ,m1=null,v1=(1+Math.sqrt(5))/2,g1=1/v1,y1=[new EJ(1,1,1),new EJ(-1,1,1),new EJ(1,1,-1),new EJ(-1,1,-1),new EJ(0,v1,g1),new EJ(0,v1,-g1),new EJ(g1,0,v1),new EJ(-g1,0,v1),new EJ(v1,g1,0),new EJ(-v1,g1,0)],b1=function(){function e(t){M(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(e){var t=new Float32Array(20),n=new EJ(0,1,0);return new a1({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:l1[3e3]},outputEncoding:{value:l1[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}(),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return(0,A.Z)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;m1=this._renderer.getRenderTarget();var a=this._allocateTargets();return this._sceneToCubeUV(e,n,r,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}},{key:"fromEquirectangular",value:function(e){return this._fromTexture(e)}},{key:"fromCubemap",value:function(e){return this._fromTexture(e)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=T1(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=S1(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<d1.length;e++)d1[e].dispose()}},{key:"_cleanup",value:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(m1),e.scissorTest=!1,k1(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e){m1=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}},{key:"_allocateTargets",value:function(e){var t={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:x1(e)?e.encoding:3002,depthBuffer:!1},n=w1(t);return n.depthBuffer=!e,this._pingPongRenderTarget=w1(t),n}},{key:"_compileMaterial",value:function(e){var t=new C0(d1[0],e);this._renderer.compile(t,u1)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var a=new D0(90,1,t,n),i=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.outputEncoding,c=s.toneMapping;s.getClearColor(p1),s.toneMapping=0,s.outputEncoding=3e3,s.autoClear=!1;var d=new XQ({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new C0(new M0,d),f=!1,p=e.background;p?p.isColor&&(d.color.copy(p),e.background=null,f=!0):(d.color.copy(p1),f=!0);for(var m=0;m<6;m++){var v=m%3;0==v?(a.up.set(0,i[m],0),a.lookAt(o[m],0,0)):1==v?(a.up.set(0,0,i[m]),a.lookAt(0,o[m],0)):(a.up.set(0,i[m],0),a.lookAt(0,0,o[m])),k1(r,v*i1,m>2?i1:0,i1,i1),s.setRenderTarget(r),f&&s.render(h,a),s.render(e,a)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=c,s.outputEncoding=u,s.autoClear=l,e.background=p}},{key:"_setEncoding",value:function(e,t){!0===this._renderer.capabilities.isWebGL2&&1023===t.format&&1009===t.type&&3001===t.encoding?e.value=l1[3e3]:e.value=l1[t.encoding]}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=T1()):null==this._equirectShader&&(this._equirectShader=S1());var r=e.isCubeTexture?this._cubemapShader:this._equirectShader,a=new C0(d1[0],r),i=r.uniforms;i.envMap.value=e,e.isCubeTexture||i.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(i.inputEncoding,e),this._setEncoding(i.outputEncoding,t.texture),k1(t,0,0,3*i1,2*i1),n.setRenderTarget(t),n.render(a,u1)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<s1;r++){var a=Math.sqrt(f1[r]*f1[r]-f1[r-1]*f1[r-1]),i=y1[(r-1)%y1.length];this._blur(e,r-1,r,a,i)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,a){var i=this._pingPongRenderTarget;this._halfBlur(e,i,t,n,r,"latitudinal",a),this._halfBlur(i,e,n,n,r,"longitudinal",a)}},{key:"_halfBlur",value:function(e,t,n,r,a,i,o){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==i&&"longitudinal"!==i&&console.error("blur direction must be either latitudinal or longitudinal!");var u=new C0(d1[r],l),c=l.uniforms,d=h1[n]-1,h=isFinite(a)?Math.PI/(2*d):2*Math.PI/39,f=a/h,p=isFinite(a)?1+Math.floor(3*f):20;p>20&&console.warn("sigmaRadians, ".concat(a,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to 20"));for(var m=[],v=0,g=0;g<20;++g){var y=g/f,b=Math.exp(-y*y/2);m.push(b),0==g?v+=b:g<p&&(v+=2*b)}for(var x=0;x<m.length;x++)m[x]=m[x]/v;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=m,c.latitudinal.value="latitudinal"===i,o&&(c.poleAxis.value=o),c.dTheta.value=h,c.mipInt.value=8-n,this._setEncoding(c.inputEncoding,e.texture),this._setEncoding(c.outputEncoding,e.texture);var w=h1[r];k1(t,3*Math.max(0,i1-2*w),(0===r?0:2*i1)+2*w*(r>4?r-8+4:0),3*w,2*w),s.setRenderTarget(t),s.render(u,u1)}}]),e}();function x1(e){return void 0!==e&&1009===e.type&&(3e3===e.encoding||3001===e.encoding||3007===e.encoding)}function w1(e){var t=new kJ(3*i1,3*i1,e);return t.texture.mapping=306,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function k1(e,t,n,r,a){e.viewport.set(t,n,r,a),e.scissor.set(t,n,r,a)}function S1(){var e=new hJ(1,1);return new a1({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:l1[3e3]},outputEncoding:{value:l1[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function T1(){return new a1({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:l1[3e3]},outputEncoding:{value:l1[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function E1(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var a=t.get(n);void 0!==a&&(t.delete(n),a.dispose())}return{get:function(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){var i=a.mapping,o=303===i||304===i,s=301===i||302===i;if(o||s){if(t.has(a))return t.get(a).texture;var l=a.image;if(o&&l&&l.height>0||s&&l&&function(e){for(var t=0,n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(l)){var u=e.getRenderTarget();null===n&&(n=new b1(e));var c=o?n.fromEquirectangular(a):n.fromCubemap(a);return t.set(a,c),e.setRenderTarget(u),a.addEventListener("dispose",r),c.texture}return null}}return a},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function C1(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function _1(e,t,n,r){var a={},i=new WeakMap;function o(e){var s=e.target;for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);s.removeEventListener("dispose",o),delete a[s.id];var u=i.get(s);u&&(t.remove(u),i.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,a=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var l=0,u=s.length;l<u;l+=3){var c=s[l+0],d=s[l+1],h=s[l+2];n.push(c,d,d,h,h,c)}}else{var f=a.array;o=a.version;for(var p=0,m=f.length/3-1;p<m;p+=3){var v=p+0,g=p+1,y=p+2;n.push(v,g,g,y,y,v)}}var b=new(mJ(n)>65535?QQ:JQ)(n,1);b.version=o;var x=i.get(e);x&&t.remove(x),i.set(e,b)}return{get:function(e,t){return!0===a[t.id]||(t.addEventListener("dispose",o),a[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var a=e.morphAttributes;for(var i in a)for(var o=a[i],s=0,l=o.length;s<l;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=i.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return i.get(e)}}}function M1(e,t,n,r){var a,i,o,s=r.isWebGL2;this.setMode=function(e){a=e},this.setIndex=function(e){i=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(a,r,i,t*o),n.update(r,a,1)},this.renderInstances=function(r,l,u){if(0!==u){var c,d;if(s)c=e,d="drawElementsInstanced";else if(d="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[d](a,l,i,r*o,u),n.update(l,a,u)}}}function A1(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}var I1=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return M(this,n),(e=t.call(this,null)).image={data:r,width:a,height:i,depth:o},e.magFilter=1003,e.minFilter=1003,e.wrapR=1001,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,A.Z)(n)}(bJ);function N1(e,t){return e[0]-t[0]}function R1(e,t){return Math.abs(t[1])-Math.abs(e[1])}function O1(e,t){var n=1,r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function D1(e,t,n){for(var r={},a=new Float32Array(8),i=new WeakMap,o=new EJ,s=[],l=0;l<8;l++)s[l]=[l,0];return{update:function(l,u,c,d){var h=l.morphTargetInfluences;if(!0===t.isWebGL2){var f=u.morphAttributes.position.length,p=i.get(u);if(void 0===p||p.count!==f){void 0!==p&&p.texture.dispose();var m=void 0!==u.morphAttributes.normal,v=u.morphAttributes.position,g=u.morphAttributes.normal||[],y=!0===m?2:1,b=u.attributes.position.count*y,x=1;b>t.maxTextureSize&&(x=Math.ceil(b/t.maxTextureSize),b=t.maxTextureSize);var w=new Float32Array(b*x*4*f),k=new I1(w,b,x,f);k.format=1023,k.type=1015;for(var S=4*y,T=0;T<f;T++)for(var E=v[T],C=g[T],_=b*x*4*T,M=0;M<E.count;M++){o.fromBufferAttribute(E,M),!0===E.normalized&&O1(o,E);var A=M*S;w[_+A+0]=o.x,w[_+A+1]=o.y,w[_+A+2]=o.z,w[_+A+3]=0,!0===m&&(o.fromBufferAttribute(C,M),!0===C.normalized&&O1(o,C),w[_+A+4]=o.x,w[_+A+5]=o.y,w[_+A+6]=o.z,w[_+A+7]=0)}p={count:f,texture:k,size:new hJ(b,x)},i.set(u,p)}for(var I=0,N=0;N<h.length;N++)I+=h[N];var R=u.morphTargetsRelative?1:1-I;d.getUniforms().setValue(e,"morphTargetBaseInfluence",R),d.getUniforms().setValue(e,"morphTargetInfluences",h),d.getUniforms().setValue(e,"morphTargetsTexture",p.texture,n),d.getUniforms().setValue(e,"morphTargetsTextureSize",p.size)}else{var O=void 0===h?0:h.length,D=r[u.id];if(void 0===D||D.length!==O){D=[];for(var L=0;L<O;L++)D[L]=[L,0];r[u.id]=D}for(var P=0;P<O;P++){var F=D[P];F[0]=P,F[1]=h[P]}D.sort(R1);for(var j=0;j<8;j++)j<O&&D[j][1]?(s[j][0]=D[j][0],s[j][1]=D[j][1]):(s[j][0]=Number.MAX_SAFE_INTEGER,s[j][1]=0);s.sort(N1);for(var z=u.morphAttributes.position,B=u.morphAttributes.normal,U=0,W=0;W<8;W++){var V=s[W],Z=V[0],H=V[1];Z!==Number.MAX_SAFE_INTEGER&&H?(z&&u.getAttribute("morphTarget"+W)!==z[Z]&&u.setAttribute("morphTarget"+W,z[Z]),B&&u.getAttribute("morphNormal"+W)!==B[Z]&&u.setAttribute("morphNormal"+W,B[Z]),a[W]=H,U+=H):(z&&!0===u.hasAttribute("morphTarget"+W)&&u.deleteAttribute("morphTarget"+W),B&&!0===u.hasAttribute("morphNormal"+W)&&u.deleteAttribute("morphNormal"+W),a[W]=0)}var G=u.morphTargetsRelative?1:1-U;d.getUniforms().setValue(e,"morphTargetBaseInfluence",G),d.getUniforms().setValue(e,"morphTargetInfluences",a)}}}}function L1(e,t,n,r){var a=new WeakMap;function i(e){var t=e.target;t.removeEventListener("dispose",i),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=r.render.frame,s=e.geometry,l=t.get(e,s);return a.get(l)!==o&&(t.update(l),a.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",i)&&e.addEventListener("dispose",i),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){a=new WeakMap}}}I1.prototype.isDataTexture2DArray=!0;var P1=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return M(this,n),(e=t.call(this,null)).image={data:r,width:a,height:i,depth:o},e.magFilter=1003,e.minFilter=1003,e.wrapR=1001,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,A.Z)(n)}(bJ);P1.prototype.isDataTexture3D=!0;var F1=new bJ,j1=new I1,z1=new P1,B1=new P0,U1=[],W1=[],V1=new Float32Array(16),Z1=new Float32Array(9),H1=new Float32Array(4);function G1(e,t,n){var r=e[0];if(r<=0||r>0)return e;var a=t*n,i=U1[a];if(void 0===i&&(i=new Float32Array(a),U1[a]=i),0!==t){r.toArray(i,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(i,s)}return i}function q1(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function X1(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Y1(e,t){var n=W1[t];void 0===n&&(n=new Int32Array(t),W1[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function K1(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function $1(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(q1(n,t))return;e.uniform2fv(this.addr,t),X1(n,t)}}function J1(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(q1(n,t))return;e.uniform3fv(this.addr,t),X1(n,t)}}function Q1(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(q1(n,t))return;e.uniform4fv(this.addr,t),X1(n,t)}}function e2(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(q1(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),X1(n,t)}else{if(q1(n,r))return;H1.set(r),e.uniformMatrix2fv(this.addr,!1,H1),X1(n,r)}}function t2(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(q1(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),X1(n,t)}else{if(q1(n,r))return;Z1.set(r),e.uniformMatrix3fv(this.addr,!1,Z1),X1(n,r)}}function n2(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(q1(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),X1(n,t)}else{if(q1(n,r))return;V1.set(r),e.uniformMatrix4fv(this.addr,!1,V1),X1(n,r)}}function r2(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function a2(e,t){var n=this.cache;q1(n,t)||(e.uniform2iv(this.addr,t),X1(n,t))}function i2(e,t){var n=this.cache;q1(n,t)||(e.uniform3iv(this.addr,t),X1(n,t))}function o2(e,t){var n=this.cache;q1(n,t)||(e.uniform4iv(this.addr,t),X1(n,t))}function s2(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function l2(e,t){var n=this.cache;q1(n,t)||(e.uniform2uiv(this.addr,t),X1(n,t))}function u2(e,t){var n=this.cache;q1(n,t)||(e.uniform3uiv(this.addr,t),X1(n,t))}function c2(e,t){var n=this.cache;q1(n,t)||(e.uniform4uiv(this.addr,t),X1(n,t))}function d2(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.safeSetTexture2D(t||F1,a)}function h2(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTexture3D(t||z1,a)}function f2(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.safeSetTextureCube(t||B1,a)}function p2(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTexture2DArray(t||j1,a)}function m2(e,t){e.uniform1fv(this.addr,t)}function v2(e,t){var n=G1(t,this.size,2);e.uniform2fv(this.addr,n)}function g2(e,t){var n=G1(t,this.size,3);e.uniform3fv(this.addr,n)}function y2(e,t){var n=G1(t,this.size,4);e.uniform4fv(this.addr,n)}function b2(e,t){var n=G1(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function x2(e,t){var n=G1(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function w2(e,t){var n=G1(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function k2(e,t){e.uniform1iv(this.addr,t)}function S2(e,t){e.uniform2iv(this.addr,t)}function T2(e,t){e.uniform3iv(this.addr,t)}function E2(e,t){e.uniform4iv(this.addr,t)}function C2(e,t){e.uniform1uiv(this.addr,t)}function _2(e,t){e.uniform2uiv(this.addr,t)}function M2(e,t){e.uniform3uiv(this.addr,t)}function A2(e,t){e.uniform4uiv(this.addr,t)}function I2(e,t,n){var r=t.length,a=Y1(n,r);e.uniform1iv(this.addr,a);for(var i=0;i!==r;++i)n.safeSetTexture2D(t[i]||F1,a[i])}function N2(e,t,n){var r=t.length,a=Y1(n,r);e.uniform1iv(this.addr,a);for(var i=0;i!==r;++i)n.safeSetTextureCube(t[i]||B1,a[i])}function R2(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return K1;case 35664:return $1;case 35665:return J1;case 35666:return Q1;case 35674:return e2;case 35675:return t2;case 35676:return n2;case 5124:case 35670:return r2;case 35667:case 35671:return a2;case 35668:case 35672:return i2;case 35669:case 35673:return o2;case 5125:return s2;case 36294:return l2;case 36295:return u2;case 36296:return c2;case 35678:case 36198:case 36298:case 36306:case 35682:return d2;case 35679:case 36299:case 36307:return h2;case 35680:case 36300:case 36308:case 36293:return f2;case 36289:case 36303:case 36311:case 36292:return p2}}(t.type)}function O2(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return m2;case 35664:return v2;case 35665:return g2;case 35666:return y2;case 35674:return b2;case 35675:return x2;case 35676:return w2;case 5124:case 35670:return k2;case 35667:case 35671:return S2;case 35668:case 35672:return T2;case 35669:case 35673:return E2;case 5125:return C2;case 36294:return _2;case 36295:return M2;case 36296:return A2;case 35678:case 36198:case 36298:case 36306:case 35682:return I2;case 35680:case 36300:case 36308:case 36293:return N2}}(t.type)}function D2(e){this.id=e,this.seq=[],this.map={}}O2.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),X1(t,e)},D2.prototype.setValue=function(e,t,n){for(var r=this.seq,a=0,i=r.length;a!==i;++a){var o=r[a];o.setValue(e,t[o.id],n)}};var L2=/(\w+)(\])?(\[|\.)?/g;function P2(e,t){e.seq.push(t),e.map[t.id]=t}function F2(e,t,n){var r=e.name,a=r.length;for(L2.lastIndex=0;;){var i=L2.exec(r),o=L2.lastIndex,s=i[1],l="]"===i[2],u=i[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===a){P2(n,void 0===u?new R2(s,e,t):new O2(s,e,t));break}var c=n.map[s];void 0===c&&P2(n,c=new D2(s)),n=c}}function j2(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var a=e.getActiveUniform(t,r);F2(a,e.getUniformLocation(t,a.name),this)}}function z2(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}j2.prototype.setValue=function(e,t,n,r){var a=this.map[t];void 0!==a&&a.setValue(e,n,r)},j2.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},j2.upload=function(e,t,n,r){for(var a=0,i=t.length;a!==i;++a){var o=t[a],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},j2.seqWithValue=function(e,t){for(var n=[],r=0,a=e.length;r!==a;++r){var i=e[r];i.id in t&&n.push(i)}return n};var B2=0;function U2(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function W2(e,t,n){var r=e.getShaderParameter(t,35713),a=e.getShaderInfoLog(t).trim();return r&&""===a?"":n.toUpperCase()+"\n\n"+a+"\n\n"+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function V2(e,t){var n=U2(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Z2(e,t){var n=U2(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function H2(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function G2(e){return""!==e}function q2(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function X2(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Y2=/^[ \t]*#include +<([\w\d./]+)>/gm;function K2(e){return e.replace(Y2,$2)}function $2(e,t){var n=X0[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return K2(n)}var J2=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Q2=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function e3(e){return e.replace(Q2,n3).replace(J2,t3)}function t3(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),n3(e,t,n,r)}function n3(e,t,n,r){for(var a="",i=parseInt(t);i<parseInt(n);i++)a+=r.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return a}function r3(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function a3(e,t,n,r){var a,i,o=e.getContext(),s=n.defines,l=n.vertexShader,u=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),d=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),h=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(n),f=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),p=e.gammaFactor>0?e.gammaFactor:1,m=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(G2).join("\n")}(n),v=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),g=o.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((a=[v].filter(G2).join("\n")).length>0&&(a+="\n"),(i=[m,v].filter(G2).join("\n")).length>0&&(i+="\n")):(a=[r3(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(G2).join("\n"),i=[m,r3(n),"#define SHADER_NAME "+n.shaderName,v,"#define GAMMA_FACTOR "+p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?X0.tonemapping_pars_fragment:"",0!==n.toneMapping?H2("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",1022===n.format?"#define OPAQUE":"",X0.encodings_pars_fragment,n.map?V2("mapTexelToLinear",n.mapEncoding):"",n.matcap?V2("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?V2("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?V2("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularTintMap?V2("specularTintMapTexelToLinear",n.specularTintMapEncoding):"",n.lightMap?V2("lightMapTexelToLinear",n.lightMapEncoding):"",Z2("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(G2).join("\n")),l=X2(l=q2(l=K2(l),n),n),u=X2(u=q2(u=K2(u),n),n),l=e3(l),u=e3(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",a=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+a,i=["#define varying in","300 es"===n.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+i);var b,x,w=y+i+u,k=z2(o,35633,y+a+l),S=z2(o,35632,w);if(o.attachShader(g,k),o.attachShader(g,S),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var T=o.getProgramInfoLog(g).trim(),E=o.getShaderInfoLog(k).trim(),C=o.getShaderInfoLog(S).trim(),_=!0,M=!0;if(!1===o.getProgramParameter(g,35714)){_=!1;var A=W2(o,k,"vertex"),I=W2(o,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+T+"\n"+A+"\n"+I)}else""!==T?console.warn("THREE.WebGLProgram: Program Info Log:",T):""!==E&&""!==C||(M=!1);M&&(this.diagnostics={runnable:_,programLog:T,vertexShader:{log:E,prefix:a},fragmentShader:{log:C,prefix:i}})}return o.deleteShader(k),o.deleteShader(S),this.getUniforms=function(){return void 0===b&&(b=new j2(o,g)),b},this.getAttributes=function(){return void 0===x&&(x=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),a=0;a<r;a++){var i=e.getActiveAttrib(t,a),o=i.name,s=1;35674===i.type&&(s=2),35675===i.type&&(s=3),35676===i.type&&(s=4),n[o]={type:i.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,g)),x},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=B2++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=k,this.fragmentShader=S,this}function i3(e,t,n,r,a,i,o){var s=[],l=a.isWebGL2,u=a.logarithmicDepthBuffer,c=a.floatVertexTextures,d=a.maxVertexUniforms,h=a.vertexTextures,f=a.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},m=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheen","transmission","transmissionMap","thicknessMap"];function v(e){var t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=3e3,l&&e&&e.isTexture&&1023===e.format&&1009===e.type&&3001===e.encoding&&(t=3e3),t}return{getParameters:function(i,s,m,g,y){var b,x,w=g.fog,k=i.isMeshStandardMaterial?g.environment:null,S=(i.isMeshStandardMaterial?n:t).get(i.envMap||k),T=p[i.type],E=y.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(c)return 1024;var n=d,r=Math.floor((n-20)/4),a=Math.min(r,t.length);return a<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+a+"."),0):a}(y):0;if(null!==i.precision&&((f=a.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",f,"instead.")),T){var C=K0[T];b=C.vertexShader,x=C.fragmentShader}else b=i.vertexShader,x=i.fragmentShader;var _=e.getRenderTarget(),M=i.alphaTest>0,A=i.clearcoat>0;return{isWebGL2:l,shaderID:T,shaderName:i.type,vertexShader:b,fragmentShader:x,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:f,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:h,outputEncoding:null!==_?v(_.texture):e.outputEncoding,map:!!i.map,mapEncoding:v(i.map),matcap:!!i.matcap,matcapEncoding:v(i.matcap),envMap:!!S,envMapMode:S&&S.mapping,envMapEncoding:v(S),envMapCubeUV:!!S&&(306===S.mapping||307===S.mapping),lightMap:!!i.lightMap,lightMapEncoding:v(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:v(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:0===i.normalMapType,clearcoat:A,clearcoatMap:A&&!!i.clearcoatMap,clearcoatRoughnessMap:A&&!!i.clearcoatRoughnessMap,clearcoatNormalMap:A&&!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,specularIntensityMap:!!i.specularIntensityMap,specularTintMap:!!i.specularTintMap,specularTintMapEncoding:v(i.specularTintMap),alphaMap:!!i.alphaMap,alphaTest:M,gradientMap:!!i.gradientMap,sheen:i.sheen>0,transmission:i.transmission>0,transmissionMap:!!i.transmissionMap,thicknessMap:!!i.thicknessMap,combine:i.combine,vertexTangents:!!i.normalMap&&!!y.geometry&&!!y.geometry.attributes.tangent,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&!!y.geometry&&!!y.geometry.attributes.color&&4===y.geometry.attributes.color.itemSize,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap||i.thicknessMap||i.specularIntensityMap||i.specularTintMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmission>0||i.transmissionMap||i.thicknessMap||i.specularIntensityMap||i.specularTintMap||!i.displacementMap),fog:!!w,useFog:i.fog,fogExp2:w&&w.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===y.isSkinnedMesh&&E>0,maxBones:E,useVertexTexture:c,morphTargets:!!y.geometry&&!!y.geometry.morphAttributes.position,morphNormals:!!y.geometry&&!!y.geometry.morphAttributes.normal,morphTargetsCount:y.geometry&&y.geometry.morphAttributes.position?y.geometry.morphAttributes.position.length:0,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:i.format,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&m.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,doubleSided:2===i.side,flipSided:1===i.side,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||r.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(!1===t.isRawShaderMaterial){for(var a=0;a<m.length;a++)n.push(t[m[a]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=p[e.type];if(n){var r=K0[n];t=N0.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,a=0,o=s.length;a<o;a++){var l=s[a];if(l.cacheKey===n){++(r=l).usedTimes;break}}return void 0===r&&(r=new a3(e,n,t,i),s.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){var t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function o3(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function s3(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function l3(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function u3(e){var t=[],n=0,r=[],a=[],i=[],o={id:-1};function s(r,a,i,s,l,u){var c=t[n],d=e.get(i);return void 0===c?(c={id:r.id,object:r,geometry:a,material:i,program:d.program||o,groupOrder:s,renderOrder:r.renderOrder,z:l,group:u},t[n]=c):(c.id=r.id,c.object=r,c.geometry=a,c.material=i,c.program=d.program||o,c.groupOrder=s,c.renderOrder=r.renderOrder,c.z=l,c.group=u),n++,c}return{opaque:r,transmissive:a,transparent:i,init:function(){n=0,r.length=0,a.length=0,i.length=0},push:function(e,t,n,o,l,u){var c=s(e,t,n,o,l,u);n.transmission>0?a.push(c):!0===n.transparent?i.push(c):r.push(c)},unshift:function(e,t,n,o,l,u){var c=s(e,t,n,o,l,u);n.transmission>0?a.unshift(c):!0===n.transparent?i.unshift(c):r.unshift(c)},finish:function(){for(var e=n,r=t.length;e<r;e++){var a=t[e];if(null===a.id)break;a.id=null,a.object=null,a.geometry=null,a.material=null,a.program=null,a.group=null}},sort:function(e,t){r.length>1&&r.sort(e||s3),a.length>1&&a.sort(t||l3),i.length>1&&i.sort(t||l3)}}}function c3(e){var t=new WeakMap;return{get:function(n,r){var a;return!1===t.has(n)?(a=new u3(e),t.set(n,[a])):r>=t.get(n).length?(a=new u3(e),t.get(n).push(a)):a=t.get(n)[r],a},dispose:function(){t=new WeakMap}}}function d3(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new EJ,color:new qQ};break;case"SpotLight":n={position:new EJ,direction:new EJ,color:new qQ,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new EJ,color:new qQ,distance:0,decay:0};break;case"HemisphereLight":n={direction:new EJ,skyColor:new qQ,groundColor:new qQ};break;case"RectAreaLight":n={color:new qQ,position:new EJ,halfWidth:new EJ,halfHeight:new EJ}}return e[t.id]=n,n}}}var h3=0;function f3(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function p3(e,t){for(var n=new d3,r=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new hJ};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new hJ,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0;i<9;i++)a.probe.push(new EJ);var o=new EJ,s=new nQ,l=new nQ;return{setup:function(i,o){for(var s=0,l=0,u=0,c=0;c<9;c++)a.probe[c].set(0,0,0);var d=0,h=0,f=0,p=0,m=0,v=0,g=0,y=0;i.sort(f3);for(var b=!0!==o?Math.PI:1,x=0,w=i.length;x<w;x++){var k=i[x],S=k.color,T=k.intensity,E=k.distance,C=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)s+=S.r*T*b,l+=S.g*T*b,u+=S.b*T*b;else if(k.isLightProbe)for(var _=0;_<9;_++)a.probe[_].addScaledVector(k.sh.coefficients[_],T);else if(k.isDirectionalLight){var M=n.get(k);if(M.color.copy(k.color).multiplyScalar(k.intensity*b),k.castShadow){var A=k.shadow,I=r.get(k);I.shadowBias=A.bias,I.shadowNormalBias=A.normalBias,I.shadowRadius=A.radius,I.shadowMapSize=A.mapSize,a.directionalShadow[d]=I,a.directionalShadowMap[d]=C,a.directionalShadowMatrix[d]=k.shadow.matrix,v++}a.directional[d]=M,d++}else if(k.isSpotLight){var N=n.get(k);if(N.position.setFromMatrixPosition(k.matrixWorld),N.color.copy(S).multiplyScalar(T*b),N.distance=E,N.coneCos=Math.cos(k.angle),N.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),N.decay=k.decay,k.castShadow){var R=k.shadow,O=r.get(k);O.shadowBias=R.bias,O.shadowNormalBias=R.normalBias,O.shadowRadius=R.radius,O.shadowMapSize=R.mapSize,a.spotShadow[f]=O,a.spotShadowMap[f]=C,a.spotShadowMatrix[f]=k.shadow.matrix,y++}a.spot[f]=N,f++}else if(k.isRectAreaLight){var D=n.get(k);D.color.copy(S).multiplyScalar(T),D.halfWidth.set(.5*k.width,0,0),D.halfHeight.set(0,.5*k.height,0),a.rectArea[p]=D,p++}else if(k.isPointLight){var L=n.get(k);if(L.color.copy(k.color).multiplyScalar(k.intensity*b),L.distance=k.distance,L.decay=k.decay,k.castShadow){var P=k.shadow,F=r.get(k);F.shadowBias=P.bias,F.shadowNormalBias=P.normalBias,F.shadowRadius=P.radius,F.shadowMapSize=P.mapSize,F.shadowCameraNear=P.camera.near,F.shadowCameraFar=P.camera.far,a.pointShadow[h]=F,a.pointShadowMap[h]=C,a.pointShadowMatrix[h]=k.shadow.matrix,g++}a.point[h]=L,h++}else if(k.isHemisphereLight){var j=n.get(k);j.skyColor.copy(k.color).multiplyScalar(T*b),j.groundColor.copy(k.groundColor).multiplyScalar(T*b),a.hemi[m]=j,m++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(a.rectAreaLTC1=Y0.LTC_FLOAT_1,a.rectAreaLTC2=Y0.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=Y0.LTC_HALF_1,a.rectAreaLTC2=Y0.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=s,a.ambient[1]=l,a.ambient[2]=u;var z=a.hash;z.directionalLength===d&&z.pointLength===h&&z.spotLength===f&&z.rectAreaLength===p&&z.hemiLength===m&&z.numDirectionalShadows===v&&z.numPointShadows===g&&z.numSpotShadows===y||(a.directional.length=d,a.spot.length=f,a.rectArea.length=p,a.point.length=h,a.hemi.length=m,a.directionalShadow.length=v,a.directionalShadowMap.length=v,a.pointShadow.length=g,a.pointShadowMap.length=g,a.spotShadow.length=y,a.spotShadowMap.length=y,a.directionalShadowMatrix.length=v,a.pointShadowMatrix.length=g,a.spotShadowMatrix.length=y,z.directionalLength=d,z.pointLength=h,z.spotLength=f,z.rectAreaLength=p,z.hemiLength=m,z.numDirectionalShadows=v,z.numPointShadows=g,z.numSpotShadows=y,a.version=h3++)},setupView:function(e,t){for(var n=0,r=0,i=0,u=0,c=0,d=t.matrixWorldInverse,h=0,f=e.length;h<f;h++){var p=e[h];if(p.isDirectionalLight){var m=a.directional[n];m.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(d),n++}else if(p.isSpotLight){var v=a.spot[i];v.position.setFromMatrixPosition(p.matrixWorld),v.position.applyMatrix4(d),v.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(o),v.direction.transformDirection(d),i++}else if(p.isRectAreaLight){var g=a.rectArea[u];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(d),l.identity(),s.copy(p.matrixWorld),s.premultiply(d),l.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(l),g.halfHeight.applyMatrix4(l),u++}else if(p.isPointLight){var y=a.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(d),r++}else if(p.isHemisphereLight){var b=a.hemi[c];b.direction.setFromMatrixPosition(p.matrixWorld),b.direction.transformDirection(d),b.direction.normalize(),c++}}},state:a}}function m3(e,t){var n=new p3(e,t),r=[],a=[];return{init:function(){r.length=0,a.length=0},state:{lightsArray:r,shadowsArray:a,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){a.push(e)}}}function v3(e,t){var n=new WeakMap;return{get:function(r){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(a=new m3(e,t),n.set(r,[a])):i>=n.get(r).length?(a=new m3(e,t),n.get(r).push(a)):a=n.get(r)[i],a},dispose:function(){n=new WeakMap}}}var g3=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="MeshDepthMaterial",r.depthPacking=3200,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(BQ);g3.prototype.isMeshDepthMaterial=!0;var y3=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="MeshDistanceMaterial",r.referencePosition=new EJ,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(BQ);function b3(e,t,n){var r=new Z0,a=new hJ,i=new hJ,o=new wJ,s=new g3({depthPacking:3201}),l=new y3,u={},c=n.maxTextureSize,d={0:1,1:0,2:2},h=new R0({uniforms:{shadow_pass:{value:null},resolution:{value:new hJ},radius:{value:4},samples:{value:8}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\nuniform float samples;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;var p=new l0;p.setAttribute("position",new $Q(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var m=new C0(p,h),v=this;function g(n,r){var a=t.update(m);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,h.uniforms.samples.value=n.blurSamples,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,h,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,f.uniforms.samples.value=n.blurSamples,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,f,m,null)}function y(t,n,r,a,i,o,c){var h=null,f=!0===a.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(h=void 0!==f?f:!0===a.isPointLight?l:s,e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0){var p=h.uuid,m=r.uuid,v=u[p];void 0===v&&(v={},u[p]=v);var g=v[m];void 0===g&&(g=h.clone(),v[m]=g),h=g}return h.visible=r.visible,h.wireframe=r.wireframe,h.side=3===c?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:d[r.side],h.alphaMap=r.alphaMap,h.alphaTest=r.alphaTest,h.clipShadows=r.clipShadows,h.clippingPlanes=r.clippingPlanes,h.clipIntersection=r.clipIntersection,h.displacementMap=r.displacementMap,h.displacementScale=r.displacementScale,h.displacementBias=r.displacementBias,h.wireframeLinewidth=r.wireframeLinewidth,h.linewidth=r.linewidth,!0===a.isPointLight&&!0===h.isMeshDistanceMaterial&&(h.referencePosition.setFromMatrixPosition(a.matrixWorld),h.nearDistance=i,h.farDistance=o),h}function b(n,a,i,o,s){if(!1!==n.visible){if(n.layers.test(a.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);var l=t.update(n),u=n.material;if(Array.isArray(u))for(var c=l.groups,d=0,h=c.length;d<h;d++){var f=c[d],p=u[f.materialIndex];if(p&&p.visible){var m=y(n,0,p,o,i.near,i.far,s);e.renderBufferDirect(i,null,l,m,n,f)}}else if(u.visible){var v=y(n,0,u,o,i.near,i.far,s);e.renderBufferDirect(i,null,l,v,n,null)}}for(var g=n.children,x=0,w=g.length;x<w;x++)b(g[x],a,i,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1!==v.enabled&&(!1!==v.autoUpdate||!1!==v.needsUpdate)&&0!==t.length){var l=e.getRenderTarget(),u=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var f=0,p=t.length;f<p;f++){var m=t[f],y=m.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){a.copy(y.mapSize);var x=y.getFrameExtents();if(a.multiply(x),i.copy(y.mapSize),(a.x>c||a.y>c)&&(a.x>c&&(i.x=Math.floor(c/x.x),a.x=i.x*x.x,y.mapSize.x=i.x),a.y>c&&(i.y=Math.floor(c/x.y),a.y=i.y*x.y,y.mapSize.y=i.y)),null===y.map&&!y.isPointLightShadow&&3===this.type){var w={minFilter:1006,magFilter:1006,format:1023};y.map=new kJ(a.x,a.y,w),y.map.texture.name=m.name+".shadowMap",y.mapPass=new kJ(a.x,a.y,w),y.camera.updateProjectionMatrix()}if(null===y.map){y.map=new kJ(a.x,a.y,{minFilter:1003,magFilter:1003,format:1023}),y.map.texture.name=m.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var k=y.getViewportCount(),S=0;S<k;S++){var T=y.getViewport(S);o.set(i.x*T.x,i.y*T.y,i.x*T.z,i.y*T.w),h.viewport(o),y.updateMatrices(m,S),r=y.getFrustum(),b(n,s,y.camera,m,this.type)}y.isPointLightShadow||3!==this.type||g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}v.needsUpdate=!1,e.setRenderTarget(l,u,d)}}}function x3(e,t,n){var r=n.isWebGL2,a=new function(){var t=!1,n=new wJ,r=null,a=new wJ(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,i,o,s){!0===s&&(t*=o,r*=o,i*=o),n.set(t,r,i,o),!1===a.equals(n)&&(e.clearColor(t,r,i,o),a.copy(n))},reset:function(){t=!1,r=null,a.set(-1,0,0,0)}}},i=new function(){var t=!1,n=null,r=null,a=null;return{setTest:function(e){e?F(2929):j(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){a!==t&&(e.clearDepth(t),a=t)},reset:function(){t=!1,n=null,r=null,a=null}}},o=new function(){var t=!1,n=null,r=null,a=null,i=null,o=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?F(2960):j(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&a===n&&i===o||(e.stencilFunc(t,n,o),r=t,a=n,i=o)},setOp:function(t,n,r){o===t&&s===n&&l===r||(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,a=null,i=null,o=null,s=null,l=null,u=null}}},s={},l=null,u={},c=null,d=!1,h=null,f=null,p=null,m=null,v=null,g=null,y=null,b=!1,x=null,w=null,k=null,S=null,T=null,E=e.getParameter(35661),C=!1,_=0,M=e.getParameter(7938);-1!==M.indexOf("WebGL")?(_=parseFloat(/^WebGL (\d)/.exec(M)[1]),C=_>=1):-1!==M.indexOf("OpenGL ES")&&(_=parseFloat(/^OpenGL ES (\d)/.exec(M)[1]),C=_>=2);var A=null,I={},N=e.getParameter(3088),R=e.getParameter(2978),O=(new wJ).fromArray(N),D=(new wJ).fromArray(R);function L(t,n,r){var a=new Uint8Array(4),i=e.createTexture();e.bindTexture(t,i),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,a);return i}var P={};function F(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function j(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}P[3553]=L(3553,3553,1),P[34067]=L(34067,34069,6),a.setClear(0,0,0,1),i.setClear(1),o.setClear(0),F(2929),i.setFunc(3),V(!1),Z(1),F(2884),W(0);var z={100:32774,101:32778,102:32779};if(r)z[103]=32775,z[104]=32776;else{var B=t.get("EXT_blend_minmax");null!==B&&(z[103]=B.MIN_EXT,z[104]=B.MAX_EXT)}var U={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function W(t,n,r,a,i,o,s,l){if(0!==t){if(!1===d&&(F(3042),d=!0),5===t)i=i||n,o=o||r,s=s||a,n===f&&i===v||(e.blendEquationSeparate(z[n],z[i]),f=n,v=i),r===p&&a===m&&o===g&&s===y||(e.blendFuncSeparate(U[r],U[a],U[o],U[s]),p=r,m=a,g=o,y=s),h=t,b=null;else if(t!==h||l!==b){if(100===f&&100===v||(e.blendEquation(32774),f=100,v=100),l)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}p=null,m=null,g=null,y=null,h=t,b=l}}else!0===d&&(j(3042),d=!1)}function V(t){x!==t&&(t?e.frontFace(2304):e.frontFace(2305),x=t)}function Z(t){0!==t?(F(2884),t!==w&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):j(2884),w=t}function H(t,n,r){t?(F(32823),S===n&&T===r||(e.polygonOffset(n,r),S=n,T=r)):j(32823)}function G(t){void 0===t&&(t=33984+E-1),A!==t&&(e.activeTexture(t),A=t)}return{buffers:{color:a,depth:i,stencil:o},enable:F,disable:j,bindFramebuffer:function(t,n){return null===n&&null!==l&&(n=l),u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,r&&(36009===t&&(u[36160]=n),36160===t&&(u[36009]=n)),!0)},bindXRFramebuffer:function(t){t!==l&&(e.bindFramebuffer(36160,t),l=t)},useProgram:function(t){return c!==t&&(e.useProgram(t),c=t,!0)},setBlending:W,setMaterial:function(e,t){2===e.side?j(2884):F(2884);var n=1===e.side;t&&(n=!n),V(n),1===e.blending&&!1===e.transparent?W(0):W(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),i.setFunc(e.depthFunc),i.setTest(e.depthTest),i.setMask(e.depthWrite),a.setMask(e.colorWrite);var r=e.stencilWrite;o.setTest(r),r&&(o.setMask(e.stencilWriteMask),o.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),o.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),H(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?F(32926):j(32926)},setFlipSided:V,setCullFace:Z,setLineWidth:function(t){t!==k&&(C&&e.lineWidth(t),k=t)},setPolygonOffset:H,setScissorTest:function(e){e?F(3089):j(3089)},activeTexture:G,bindTexture:function(t,n){null===A&&G();var r=I[A];void 0===r&&(r={type:void 0,texture:void 0},I[A]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||P[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=I[A];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===D.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),D.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},A=null,I={},l=null,u={},c=null,d=!1,h=null,f=null,p=null,m=null,v=null,g=null,y=null,b=!1,x=null,w=null,k=null,S=null,T=null,O.set(0,0,e.canvas.width,e.canvas.height),D.set(0,0,e.canvas.width,e.canvas.height),a.reset(),i.reset(),o.reset()}}}function w3(e,t,n,r,a,i,o){var s,l=a.isWebGL2,u=a.maxTextures,c=a.maxCubemapSize,d=a.maxTextureSize,h=a.maxSamples,f=new WeakMap,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return p?new OffscreenCanvas(e,t):vJ("canvas")}function v(e,t,n,r){var a=1;if((e.width>r||e.height>r)&&(a=r/Math.max(e.width,e.height)),a<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var i=t?cJ:Math.floor,o=i(a*e.width),l=i(a*e.height);void 0===s&&(s=m(o,l));var u=n?m(o,l):s;return u.width=o,u.height=l,u.getContext("2d").drawImage(e,0,0,o,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+l+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function g(e){return lJ(e.width)&&lJ(e.height)}function y(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function b(t,n,a,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log2(Math.max(a,i,o))}function x(n,r,a,i){if(!1===l)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=r;return 6403===r&&(5126===a&&(o=33326),5131===a&&(o=33325),5121===a&&(o=33321)),6407===r&&(5126===a&&(o=34837),5131===a&&(o=34843),5121===a&&(o=32849)),6408===r&&(5126===a&&(o=34836),5131===a&&(o=34842),5121===a&&(o=3001===i?35907:32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function w(e){return 1003===e||1004===e||1005===e?9728:9729}function k(t){var n=t.target;n.removeEventListener("dispose",k),function(t){var n=r.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),r.remove(t))}(n),n.isVideoTexture&&f.delete(n),o.memory.textures--}function S(t){var n=t.target;n.removeEventListener("dispose",S),function(t){var n=t.texture,a=r.get(t),i=r.get(n);if(t){if(void 0!==i.__webglTexture&&(e.deleteTexture(i.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(a.__webglFramebuffer[s]),a.__webglDepthbuffer&&e.deleteRenderbuffer(a.__webglDepthbuffer[s]);else e.deleteFramebuffer(a.__webglFramebuffer),a.__webglDepthbuffer&&e.deleteRenderbuffer(a.__webglDepthbuffer),a.__webglMultisampledFramebuffer&&e.deleteFramebuffer(a.__webglMultisampledFramebuffer),a.__webglColorRenderbuffer&&e.deleteRenderbuffer(a.__webglColorRenderbuffer),a.__webglDepthRenderbuffer&&e.deleteRenderbuffer(a.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(var l=0,u=n.length;l<u;l++){var c=r.get(n[l]);c.__webglTexture&&(e.deleteTexture(c.__webglTexture),o.memory.textures--),r.remove(n[l])}r.remove(n),r.remove(t)}}(n)}var T=0;function E(e,t){var a=r.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(e),e.version>0&&a.__version!==e.version){var i=e.image;if(void 0===i)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==i.complete)return void N(a,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,a.__webglTexture)}function C(t,a){var o=r.get(t);t.version>0&&o.__version!==t.version?function(t,r,a){if(6===r.image.length){I(t,r),n.activeTexture(33984+a),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var o=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),s=r.image[0]&&r.image[0].isDataTexture,u=[],d=0;d<6;d++)u[d]=o||s?s?r.image[d].image:r.image[d]:v(r.image[d],!1,!0,c);var h,f=u[0],p=g(f)||l,m=i.convert(r.format),w=i.convert(r.type),k=x(r.internalFormat,m,w,r.encoding);if(A(34067,r,p),o){for(var S=0;S<6;S++){h=u[S].mipmaps;for(var T=0;T<h.length;T++){var E=h[T];1023!==r.format&&1022!==r.format?null!==m?n.compressedTexImage2D(34069+S,T,k,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+S,T,k,E.width,E.height,0,m,w,E.data)}}t.__maxMipLevel=h.length-1}else{h=r.mipmaps;for(var C=0;C<6;C++)if(s){n.texImage2D(34069+C,0,k,u[C].width,u[C].height,0,m,w,u[C].data);for(var _=0;_<h.length;_++){var M=h[_].image[C].image;n.texImage2D(34069+C,_+1,k,M.width,M.height,0,m,w,M.data)}}else{n.texImage2D(34069+C,0,k,m,w,u[C]);for(var N=0;N<h.length;N++){var R=h[N];n.texImage2D(34069+C,N+1,k,m,w,R.image[C])}}t.__maxMipLevel=h.length}y(r,p)&&b(34067,r,f.width,f.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}}(o,t,a):(n.activeTexture(33984+a),n.bindTexture(34067,o.__webglTexture))}var _={1e3:10497,1001:33071,1002:33648},M={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function A(n,i,o){if(o?(e.texParameteri(n,10242,_[i.wrapS]),e.texParameteri(n,10243,_[i.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,_[i.wrapR]),e.texParameteri(n,10240,M[i.magFilter]),e.texParameteri(n,10241,M[i.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),1001===i.wrapS&&1001===i.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,w(i.magFilter)),e.texParameteri(n,10241,w(i.minFilter)),1003!==i.minFilter&&1006!==i.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(1015===i.type&&!1===t.has("OES_texture_float_linear"))return;if(!1===l&&1016===i.type&&!1===t.has("OES_texture_half_float_linear"))return;(i.anisotropy>1||r.get(i).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,a.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy)}}function I(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",k),t.__webglTexture=e.createTexture(),o.memory.textures++)}function N(t,r,a){var o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),I(t,r),n.activeTexture(33984+a),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var s,u=function(e){return!l&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(r)&&!1===g(r.image),c=v(r.image,u,!1,d),h=g(c)||l,f=i.convert(r.format),p=i.convert(r.type),m=x(r.internalFormat,f,p,r.encoding);A(o,r,h);var w=r.mipmaps;if(r.isDepthTexture)m=6402,l?m=1015===r.type?36012:1014===r.type?33190:1020===r.type?35056:33189:1015===r.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===r.format&&6402===m&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1012,p=i.convert(r.type)),1027===r.format&&6402===m&&(m=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,p=i.convert(r.type))),n.texImage2D(3553,0,m,c.width,c.height,0,f,p,null);else if(r.isDataTexture)if(w.length>0&&h){for(var k=0,S=w.length;k<S;k++)s=w[k],n.texImage2D(3553,k,m,s.width,s.height,0,f,p,s.data);r.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,f,p,c.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(var T=0,E=w.length;T<E;T++)s=w[T],1023!==r.format&&1022!==r.format?null!==f?n.compressedTexImage2D(3553,T,m,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,T,m,s.width,s.height,0,f,p,s.data);t.__maxMipLevel=w.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,f,p,c.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,f,p,c.data),t.__maxMipLevel=0;else if(w.length>0&&h){for(var C=0,_=w.length;C<_;C++)s=w[C],n.texImage2D(3553,C,m,f,p,s);r.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,f,p,c),t.__maxMipLevel=0;y(r,h)&&b(o,r,c.width,c.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function R(t,a,o,s,l){var u=i.convert(o.format),c=i.convert(o.type),d=x(o.internalFormat,u,c,o.encoding);32879===l||35866===l?n.texImage3D(l,0,d,a.width,a.height,a.depth,0,u,c,null):n.texImage2D(l,0,d,a.width,a.height,0,u,c,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,l,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function O(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var a=33189;if(r){var o=n.depthTexture;o&&o.isDepthTexture&&(1015===o.type?a=36012:1014===o.type&&(a=33190));var s=D(n);e.renderbufferStorageMultisample(36161,s,a,n.width,n.height)}else e.renderbufferStorage(36161,a,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){var l=D(n);e.renderbufferStorageMultisample(36161,l,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var u=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,c=i.convert(u.format),d=i.convert(u.type),h=x(u.internalFormat,c,d,u.encoding);if(r){var f=D(n);e.renderbufferStorageMultisample(36161,f,h,n.width,n.height)}else e.renderbufferStorage(36161,h,n.width,n.height)}e.bindRenderbuffer(36161,null)}function D(e){return l&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}var L=!1,P=!1;this.allocateTextureUnit=function(){var e=T;return e>=u&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+u),T+=1,e},this.resetTextureUnits=function(){T=0},this.setTexture2D=E,this.setTexture2DArray=function(e,t){var a=r.get(e);e.version>0&&a.__version!==e.version?N(a,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,a.__webglTexture))},this.setTexture3D=function(e,t){var a=r.get(e);e.version>0&&a.__version!==e.version?N(a,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,a.__webglTexture))},this.setTextureCube=C,this.setupRenderTarget=function(t){var s=t.texture,u=r.get(t),c=r.get(s);t.addEventListener("dispose",S),!0!==t.isWebGLMultipleRenderTargets&&(c.__webglTexture=e.createTexture(),c.__version=s.version,o.memory.textures++);var d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,f=!0===t.isWebGLMultisampleRenderTarget,p=s.isDataTexture3D||s.isDataTexture2DArray,m=g(t)||l;if(!l||1022!==s.format||1015!==s.type&&1016!==s.type||(s.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),d){u.__webglFramebuffer=[];for(var v=0;v<6;v++)u.__webglFramebuffer[v]=e.createFramebuffer()}else if(u.__webglFramebuffer=e.createFramebuffer(),h)if(a.drawBuffers)for(var w=t.texture,k=0,T=w.length;k<T;k++){var C=r.get(w[k]);void 0===C.__webglTexture&&(C.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(f)if(l){u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer);var _=i.convert(s.format),M=i.convert(s.type),I=x(s.internalFormat,_,M,s.encoding),N=D(t);e.renderbufferStorageMultisample(36161,N,I,t.width,t.height),n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),O(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(d){n.bindTexture(34067,c.__webglTexture),A(34067,s,m);for(var L=0;L<6;L++)R(u.__webglFramebuffer[L],t,s,36064,34069+L);y(s,m)&&b(34067,s,t.width,t.height),n.unbindTexture()}else if(h){for(var P=t.texture,F=0,j=P.length;F<j;F++){var z=P[F],B=r.get(z);n.bindTexture(3553,B.__webglTexture),A(3553,z,m),R(u.__webglFramebuffer,t,z,36064+F,3553),y(z,m)&&b(3553,z,t.width,t.height)}n.unbindTexture()}else{var U=3553;p&&(l?U=s.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(U,c.__webglTexture),A(U,s,m),R(u.__webglFramebuffer,t,s,36064,U),y(s,m)&&b(U,s,t.width,t.height,t.depth),n.unbindTexture()}t.depthBuffer&&function(t){var a=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,a){if(a&&a.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!a.depthTexture||!a.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(a.depthTexture).__webglTexture&&a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0),E(a.depthTexture,0);var i=r.get(a.depthTexture).__webglTexture;if(1026===a.depthTexture.format)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(1027!==a.depthTexture.format)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(a.__webglFramebuffer,t)}else if(i){a.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,a.__webglFramebuffer[o]),a.__webglDepthbuffer[o]=e.createRenderbuffer(),O(a.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,a.__webglFramebuffer),a.__webglDepthbuffer=e.createRenderbuffer(),O(a.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}(t)},this.updateRenderTargetMipmap=function(e){for(var t=g(e)||l,a=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],i=0,o=a.length;i<o;i++){var s=a[i];if(y(s,t)){var u=e.isWebGLCubeRenderTarget?34067:3553,c=r.get(s).__webglTexture;n.bindTexture(u,c),b(u,s,e.width,e.height),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(l){var a=t.width,i=t.height,o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024);var s=r.get(t);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),e.blitFramebuffer(0,0,a,i,0,0,a,i,o,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===L&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),L=!0),e=e.texture),E(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===P&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),P=!0),e=e.texture),C(e,t)}}function k3(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n;if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:36492===e?null!==(n=t.get("EXT_texture_compression_bptc"))?e:null:1020===e?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}y3.prototype.isMeshDistanceMaterial=!0;var S3=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return M(this,n),(e=t.call(this)).cameras=r,e}return(0,A.Z)(n)}(D0);S3.prototype.isArrayCamera=!0;var T3=function(e){N(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).type="Group",e}return(0,A.Z)(n)}(_Q);T3.prototype.isGroup=!0;var E3={type:"move"},C3=function(){function e(){M(this,e),this._targetRay=null,this._grip=null,this._hand=null}return(0,A.Z)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new T3,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new T3,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new EJ,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new EJ),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new T3,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new EJ,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new EJ),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,a=null,i=null,o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==o&&(null!==(r=t.getPose(e.targetRaySpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(E3))),l&&e.hand){i=!0;var u,c=G(e.hand.values());try{for(c.s();!(u=c.n()).done;){var d=u.value,h=t.getJointPose(d,n);if(void 0===l.joints[d.jointName]){var f=new T3;f.matrixAutoUpdate=!1,f.visible=!1,l.joints[d.jointName]=f,l.add(f)}var p=l.joints[d.jointName];null!==h&&(p.matrix.fromArray(h.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=h.radius),p.visible=null!==h}}catch(_ke){c.e(_ke)}finally{c.f()}var m=l.joints["index-finger-tip"],v=l.joints["thumb-tip"],g=m.position.distanceTo(v.position);l.inputState.pinching&&g>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&g<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(null!==(a=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(a.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),a.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(a.linearVelocity)):s.hasLinearVelocity=!1,a.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(a.angularVelocity)):s.hasAngularVelocity=!1));return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==a),null!==l&&(l.visible=null!==i),this}}]),e}(),_3=function(e){N(n,e);var t=F(n);function n(e,r){var a;M(this,n),a=t.call(this);var i=(0,L.Z)(a),o=e.state,s=null,l=1,u=null,c="local-floor",d=null,h=null,f=null,p=null,m=null,v=!1,g=null,y=null,b=null,x=null,w=null,k=null,S=[],T=new Map,E=new D0;E.layers.enable(1),E.viewport=new wJ;var C=new D0;C.layers.enable(2),C.viewport=new wJ;var _=[E,C],A=new S3;A.layers.enable(1),A.layers.enable(2);var I=null,N=null;function R(e){var t=T.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function O(){T.forEach((function(e,t){e.disconnect(t)})),T.clear(),I=null,N=null,o.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),f&&r.deleteFramebuffer(f),g&&r.deleteFramebuffer(g),y&&r.deleteRenderbuffer(y),b&&r.deleteRenderbuffer(b),f=null,g=null,y=null,b=null,m=null,p=null,h=null,s=null,B.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function D(e){for(var t=s.inputSources,n=0;n<S.length;n++)T.set(t[n],S[n]);for(var r=0;r<e.removed.length;r++){var a=e.removed[r],i=T.get(a);i&&(i.dispatchEvent({type:"disconnected",data:a}),T.delete(a))}for(var o=0;o<e.added.length;o++){var l=e.added[o],u=T.get(l);u&&u.dispatchEvent({type:"connected",data:l})}}a.cameraAutoUpdate=!0,a.enabled=!1,a.isPresenting=!1,a.getController=function(e){var t=S[e];return void 0===t&&(t=new C3,S[e]=t),t.getTargetRaySpace()},a.getControllerGrip=function(e){var t=S[e];return void 0===t&&(t=new C3,S[e]=t),t.getGripSpace()},a.getHand=function(e){var t=S[e];return void 0===t&&(t=new C3,S[e]=t),t.getHandSpace()},a.setFramebufferScaleFactor=function(e){l=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},a.setReferenceSpaceType=function(e){c=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},a.getReferenceSpace=function(){return u},a.getBaseLayer=function(){return null!==p?p:m},a.getBinding=function(){return h},a.getFrame=function(){return x},a.getSession=function(){return s},a.setSession=function(){var e=Vn(Un().mark((function e(t){var n,a,d,x,S;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(s=t)){e.next=20;break}if(s.addEventListener("select",R),s.addEventListener("selectstart",R),s.addEventListener("selectend",R),s.addEventListener("squeeze",R),s.addEventListener("squeezestart",R),s.addEventListener("squeezeend",R),s.addEventListener("end",O),s.addEventListener("inputsourceschange",D),n=r.getContextAttributes(),e.t0=!0!==n.xrCompatible,!e.t0){e.next=7;break}return e.next=7,r.makeXRCompatible();case 7:if(void 0!==s.renderState.layers){e.next=12;break}a={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:l},m=new XRWebGLLayer(s,r,a),s.updateRenderState({baseLayer:m}),e.next=13;break;case 12:r instanceof WebGLRenderingContext?(d={antialias:!0,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:l},m=new XRWebGLLayer(s,r,d),s.updateRenderState({layers:[m]})):(v=n.antialias,x=null,n.depth&&(k=256,n.stencil&&(k|=1024),w=n.stencil?33306:36096,x=n.stencil?35056:33190),S={colorFormat:n.alpha?32856:32849,depthFormat:x,scaleFactor:l},h=new XRWebGLBinding(s,r),p=h.createProjectionLayer(S),f=r.createFramebuffer(),s.updateRenderState({layers:[p]}),v&&(g=r.createFramebuffer(),y=r.createRenderbuffer(),r.bindRenderbuffer(36161,y),r.renderbufferStorageMultisample(36161,4,32856,p.textureWidth,p.textureHeight),o.bindFramebuffer(36160,g),r.framebufferRenderbuffer(36160,36064,36161,y),r.bindRenderbuffer(36161,null),null!==x&&(b=r.createRenderbuffer(),r.bindRenderbuffer(36161,b),r.renderbufferStorageMultisample(36161,4,x,p.textureWidth,p.textureHeight),r.framebufferRenderbuffer(36160,w,36161,b),r.bindRenderbuffer(36161,null)),o.bindFramebuffer(36160,null)));case 13:return e.next=15,s.requestReferenceSpace(c);case 15:u=e.sent,B.setContext(s),B.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var P=new EJ,F=new EJ;function j(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}a.updateCamera=function(e){if(null!==s){A.near=C.near=E.near=e.near,A.far=C.far=E.far=e.far,I===A.near&&N===A.far||(s.updateRenderState({depthNear:A.near,depthFar:A.far}),I=A.near,N=A.far);var t=e.parent,n=A.cameras;j(A,t);for(var r=0;r<n.length;r++)j(n[r],t);A.matrixWorld.decompose(A.position,A.quaternion,A.scale),e.position.copy(A.position),e.quaternion.copy(A.quaternion),e.scale.copy(A.scale),e.matrix.copy(A.matrix),e.matrixWorld.copy(A.matrixWorld);for(var a=e.children,i=0,o=a.length;i<o;i++)a[i].updateMatrixWorld(!0);2===n.length?function(e,t,n){P.setFromMatrixPosition(t.matrixWorld),F.setFromMatrixPosition(n.matrixWorld);var r=P.distanceTo(F),a=t.projectionMatrix.elements,i=n.projectionMatrix.elements,o=a[14]/(a[10]-1),s=a[14]/(a[10]+1),l=(a[9]+1)/a[5],u=(a[9]-1)/a[5],c=(a[8]-1)/a[0],d=(i[8]+1)/i[0],h=o*c,f=o*d,p=r/(-c+d),m=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var v=o+p,g=s+p,y=h-m,b=f+(r-m),x=l*s/g*v,w=u*s/g*v;e.projectionMatrix.makePerspective(y,b,x,w,v,g)}(A,E,C):A.projectionMatrix.copy(E.projectionMatrix)}},a.getCamera=function(){return A},a.getFoveation=function(){return null!==p?p.fixedFoveation:null!==m?m.fixedFoveation:void 0},a.setFoveation=function(e){null!==p&&(p.fixedFoveation=e),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=e)};var z=null,B=new H0;return B.setAnimationLoop((function(e,t){if(d=t.getViewerPose(u),x=t,null!==d){var n=d.views;null!==m&&o.bindXRFramebuffer(m.framebuffer);var a=!1;n.length!==A.cameras.length&&(A.cameras.length=0,a=!0);for(var i=0;i<n.length;i++){var l=n[i],c=null;if(null!==m)c=m.getViewport(l);else{var y=h.getViewSubImage(p,l);o.bindXRFramebuffer(f),void 0!==y.depthStencilTexture&&r.framebufferTexture2D(36160,w,3553,y.depthStencilTexture,0),r.framebufferTexture2D(36160,36064,3553,y.colorTexture,0),c=y.viewport}var b=_[i];b.matrix.fromArray(l.transform.matrix),b.projectionMatrix.fromArray(l.projectionMatrix),b.viewport.set(c.x,c.y,c.width,c.height),0===i&&A.matrix.copy(b.matrix),!0===a&&A.cameras.push(b)}v&&(o.bindXRFramebuffer(g),null!==k&&r.clear(k))}for(var T=s.inputSources,E=0;E<S.length;E++){var C=S[E],M=T[E];C.update(M,t,u)}if(z&&z(e,t),v){var I=p.textureWidth,N=p.textureHeight;o.bindFramebuffer(36008,g),o.bindFramebuffer(36009,f),r.invalidateFramebuffer(36008,[w]),r.invalidateFramebuffer(36009,[w]),r.blitFramebuffer(0,0,I,N,0,0,I,N,16384,9728),r.invalidateFramebuffer(36008,[36064]),o.bindFramebuffer(36008,null),o.bindFramebuffer(36009,null),o.bindFramebuffer(36160,g)}x=null})),a.setAnimationLoop=function(e){z=e},a.dispose=function(){},a}return(0,A.Z)(n)}($$);function M3(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);var r,a,i=e.get(n).envMap;if(i){t.envMap.value=i,t.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio;var o=e.get(i).__maxMipLevel;void 0!==o&&(t.maxMipLevel.value=o)}n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularTintMap?r=n.specularTintMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap&&(r=n.thicknessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uv2Transform.value.copy(a.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,1===n.side&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),1===n.side&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,a,i,o){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenTint.value.copy(t.sheenTint).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate())),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationTint.value.copy(t.attenuationTint)),e.specularIntensity.value=t.specularIntensity,e.specularTint.value.copy(t.specularTint),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularTintMap&&(e.specularTintMap.value=t.specularTintMap)}(e,r,o):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){var a;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?a=t.map:t.alphaMap&&(a=t.alphaMap),void 0!==a&&(!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uvTransform.value.copy(a.matrix))}(e,r,a,i):r.isSpriteMaterial?function(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function A3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0!==e.canvas?e.canvas:function(){var e=vJ("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,a=void 0===e.depth||e.depth,i=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,d=null,h=null,f=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var m=this,v=!1,g=0,y=0,b=null,x=-1,w=null,k=new wJ,S=new wJ,T=null,E=t.width,C=t.height,_=1,M=null,A=null,I=new wJ(0,0,E,C),N=new wJ(0,0,E,C),R=!1,O=[],D=new Z0,L=!1,P=!1,F=null,j=new nQ,z=new EJ,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===b?_:1}var W,V,Z,H,G,q,X,Y,K,$,J,Q,ee,te,ne,re,ae,ie,oe,se,le,ue,ce,de=n;function he(e,n){for(var r=0;r<e.length;r++){var a=e[r],i=t.getContext(a,n);if(null!==i)return i}return null}try{var fe={alpha:r,depth:a,stencil:i,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if(t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",ye,!1),null===de){var pe=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&pe.shift(),null===(de=he(pe,fe)))throw he(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===de.getShaderPrecisionFormat&&(de.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function me(){W=new C1(de),V=new e1(de,W,e),W.init(V),ue=new k3(de,W,V),Z=new x3(de,W,V),O[0]=1029,H=new A1(de),G=new o3,q=new w3(de,W,Z,G,V,ue,H),X=new n1(m),Y=new E1(m),K=new G0(de,V),ce=new J0(de,W,K,V),$=new _1(de,K,H,ce),J=new L1(de,$,K,H),oe=new D1(de,V,q),re=new t1(G),Q=new i3(m,X,Y,W,V,ce,re),ee=new M3(G),te=new c3(G),ne=new v3(W,V),ie=new $0(m,X,Z,J,s),ae=new b3(m,J,V),se=new Q0(de,W,H,V),le=new M1(de,W,H,V),H.programs=Q.programs,m.capabilities=V,m.extensions=W,m.properties=G,m.renderLists=te,m.shadowMap=ae,m.state=Z,m.info=H}me();var ve=new _3(m,de);function ge(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;var e=H.autoReset,t=ae.enabled,n=ae.autoUpdate,r=ae.needsUpdate,a=ae.type;me(),H.autoReset=e,ae.enabled=t,ae.autoUpdate=n,ae.needsUpdate=r,ae.type=a}function be(e){var t=e.target;t.removeEventListener("dispose",be),function(e){(function(e){var t=G.get(e).programs;void 0!==t&&t.forEach((function(e){Q.releaseProgram(e)}))})(e),G.remove(e)}(t)}this.xr=ve,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){var e=W.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=W.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return _},this.setPixelRatio=function(e){void 0!==e&&(_=e,this.setSize(E,C,!1))},this.getSize=function(e){return e.set(E,C)},this.setSize=function(e,n,r){ve.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,C=n,t.width=Math.floor(e*_),t.height=Math.floor(n*_),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(E*_,C*_).floor()},this.setDrawingBufferSize=function(e,n,r){E=e,C=n,_=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(k)},this.getViewport=function(e){return e.copy(I)},this.setViewport=function(e,t,n,r){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,r),Z.viewport(k.copy(I).multiplyScalar(_).floor())},this.getScissor=function(e){return e.copy(N)},this.setScissor=function(e,t,n,r){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,n,r),Z.scissor(S.copy(N).multiplyScalar(_).floor())},this.getScissorTest=function(){return R},this.setScissorTest=function(e){Z.setScissorTest(R=e)},this.setOpaqueSort=function(e){M=e},this.setTransparentSort=function(e){A=e},this.getClearColor=function(e){return e.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor.apply(ie,arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha.apply(ie,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),de.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",ye,!1),te.dispose(),ne.dispose(),G.dispose(),X.dispose(),Y.dispose(),J.dispose(),ce.dispose(),ve.dispose(),ve.removeEventListener("sessionstart",we),ve.removeEventListener("sessionend",ke),F&&(F.dispose(),F=null),Se.stop()},this.renderBufferImmediate=function(e,t){ce.initAttributes();var n=G.get(e);e.hasPositions&&!n.position&&(n.position=de.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=de.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=de.createBuffer()),e.hasColors&&!n.color&&(n.color=de.createBuffer());var r=t.getAttributes();e.hasPositions&&(de.bindBuffer(34962,n.position),de.bufferData(34962,e.positionArray,35048),ce.enableAttribute(r.position.location),de.vertexAttribPointer(r.position.location,3,5126,!1,0,0)),e.hasNormals&&(de.bindBuffer(34962,n.normal),de.bufferData(34962,e.normalArray,35048),ce.enableAttribute(r.normal.location),de.vertexAttribPointer(r.normal.location,3,5126,!1,0,0)),e.hasUvs&&(de.bindBuffer(34962,n.uv),de.bufferData(34962,e.uvArray,35048),ce.enableAttribute(r.uv.location),de.vertexAttribPointer(r.uv.location,2,5126,!1,0,0)),e.hasColors&&(de.bindBuffer(34962,n.color),de.bufferData(34962,e.colorArray,35048),ce.enableAttribute(r.color.location),de.vertexAttribPointer(r.color.location,3,5126,!1,0,0)),ce.disableUnusedAttributes(),de.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,a,i){null===t&&(t=B);var o=a.isMesh&&a.matrixWorld.determinant()<0,s=Ie(e,t,n,r,a);Z.setMaterial(r,o);var l=n.index,u=n.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;var c,d=1;!0===r.wireframe&&(l=$.getWireframeAttribute(n),d=2),ce.setup(a,r,s,n,l);var h=se;null!==l&&(c=K.get(l),(h=le).setIndex(c));var f=null!==l?l.count:u.count,p=n.drawRange.start*d,m=n.drawRange.count*d,v=null!==i?i.start*d:0,g=null!==i?i.count*d:1/0,y=Math.max(p,v),b=Math.min(f,p+m,v+g)-1,x=Math.max(0,b-y+1);if(0!==x){if(a.isMesh)!0===r.wireframe?(Z.setLineWidth(r.wireframeLinewidth*U()),h.setMode(1)):h.setMode(4);else if(a.isLine){var w=r.linewidth;void 0===w&&(w=1),Z.setLineWidth(w*U()),a.isLineSegments?h.setMode(1):a.isLineLoop?h.setMode(2):h.setMode(3)}else a.isPoints?h.setMode(0):a.isSprite&&h.setMode(4);if(a.isInstancedMesh)h.renderInstances(y,x,a.count);else if(n.isInstancedBufferGeometry){var k=Math.min(n.instanceCount,n._maxInstanceCount);h.renderInstances(y,x,k)}else h.render(y,x)}},this.compile=function(e,t){(h=ne.get(e)).init(),p.push(h),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(m.physicallyCorrectLights),e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++)Me(n[r],e,t);else Me(n,e,t)})),p.pop(),h=null};var xe=null;function we(){Se.stop()}function ke(){Se.start()}var Se=new H0;function Te(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||D.intersectsSprite(e)){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);var a=J.update(e),i=e.material;i.visible&&d.push(e,a,i,n,z.z,null)}}else if(e.isImmediateRenderObject)r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j),d.push(e,null,e.material,n,z.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==H.render.frame&&(e.skeleton.update(),e.skeleton.frame=H.render.frame),!e.frustumCulled||D.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);var o=J.update(e),s=e.material;if(Array.isArray(s))for(var l=o.groups,u=0,c=l.length;u<c;u++){var f=l[u],p=s[f.materialIndex];p&&p.visible&&d.push(e,o,p,n,z.z,f)}else s.visible&&d.push(e,o,s,n,z.z,null)}for(var m=e.children,v=0,g=m.length;v<g;v++)Te(m[v],t,n,r)}}function Ee(e,t,n,r){var a=e.opaque,i=e.transmissive,s=e.transparent;h.setupLightsView(n),i.length>0&&function(e,t,n){if(null===F){var r=!0===o&&!0===V.isWebGL2;F=new(r?SJ:kJ)(1024,1024,{generateMipmaps:!0,type:null!==ue.convert(1016)?1016:1009,minFilter:1008,magFilter:1003,wrapS:1001,wrapT:1001})}var a=m.getRenderTarget();m.setRenderTarget(F),m.clear();var i=m.toneMapping;m.toneMapping=0,Ce(e,t,n),m.toneMapping=i,q.updateMultisampleRenderTarget(F),q.updateRenderTargetMipmap(F),m.setRenderTarget(a)}(a,t,n),r&&Z.viewport(k.copy(r)),a.length>0&&Ce(a,t,n),i.length>0&&Ce(i,t,n),s.length>0&&Ce(s,t,n)}function Ce(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,a=0,i=e.length;a<i;a++){var o=e[a],s=o.object,l=o.geometry,u=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&_e(s,t,n,l,u,c)}}function _e(e,t,n,r,a,i){if(e.onBeforeRender(m,t,n,r,a,i),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),a.onBeforeRender(m,t,n,r,e,i),e.isImmediateRenderObject){var o=Ie(n,t,r,a,e);Z.setMaterial(a),ce.reset(),function(e,t){e.render((function(e){m.renderBufferImmediate(e,t)}))}(e,o)}else!0===a.transparent&&2===a.side?(a.side=1,a.needsUpdate=!0,m.renderBufferDirect(n,t,r,a,e,i),a.side=0,a.needsUpdate=!0,m.renderBufferDirect(n,t,r,a,e,i),a.side=2):m.renderBufferDirect(n,t,r,a,e,i);e.onAfterRender(m,t,n,r,a,i)}function Me(e,t,n){!0!==t.isScene&&(t=B);var r=G.get(e),a=h.state.lights,i=h.state.shadowsArray,o=a.state.version,s=Q.getParameters(e,a.state,i,t,n),l=Q.getProgramCacheKey(s),u=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Y:X).get(e.envMap||r.environment),void 0===u&&(e.addEventListener("dispose",be),u=new Map,r.programs=u);var c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return Ae(e,s),c}else s.uniforms=Q.getUniforms(e),e.onBuild(s,m),e.onBeforeCompile(s,m),c=Q.acquireProgram(s,l),u.set(l,c),r.uniforms=s.uniforms;var d=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=re.uniform),Ae(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(d.ambientLightColor.value=a.state.ambient,d.lightProbe.value=a.state.probe,d.directionalLights.value=a.state.directional,d.directionalLightShadows.value=a.state.directionalShadow,d.spotLights.value=a.state.spot,d.spotLightShadows.value=a.state.spotShadow,d.rectAreaLights.value=a.state.rectArea,d.ltc_1.value=a.state.rectAreaLTC1,d.ltc_2.value=a.state.rectAreaLTC2,d.pointLights.value=a.state.point,d.pointLightShadows.value=a.state.pointShadow,d.hemisphereLights.value=a.state.hemi,d.directionalShadowMap.value=a.state.directionalShadowMap,d.directionalShadowMatrix.value=a.state.directionalShadowMatrix,d.spotShadowMap.value=a.state.spotShadowMap,d.spotShadowMatrix.value=a.state.spotShadowMatrix,d.pointShadowMap.value=a.state.pointShadowMap,d.pointShadowMatrix.value=a.state.pointShadowMatrix);var f=c.getUniforms(),p=j2.seqWithValue(f.seq,d);return r.currentProgram=c,r.uniformsList=p,c}function Ae(e,t){var n=G.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents}function Ie(e,t,n,r,a){!0!==t.isScene&&(t=B),q.resetTextureUnits();var i=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===b?m.outputEncoding:b.texture.encoding,l=(r.isMeshStandardMaterial?Y:X).get(r.envMap||o),u=!0===r.vertexColors&&!!n&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n&&!!n.attributes.tangent,d=!!n&&!!n.morphAttributes.position,f=!!n&&!!n.morphAttributes.normal,p=n&&n.morphAttributes.position?n.morphAttributes.position.length:0,v=G.get(r),g=h.state.lights;if(!0===L&&(!0===P||e!==w)){var y=e===w&&r.id===x;re.setState(r,e,y)}var k=!1;r.version===v.__version?v.needsLights&&v.lightsStateVersion!==g.state.version||v.outputEncoding!==s||a.isInstancedMesh&&!1===v.instancing?k=!0:a.isInstancedMesh||!0!==v.instancing?a.isSkinnedMesh&&!1===v.skinning?k=!0:a.isSkinnedMesh||!0!==v.skinning?v.envMap!==l||r.fog&&v.fog!==i?k=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===re.numPlanes&&v.numIntersection===re.numIntersection?(v.vertexAlphas!==u||v.vertexTangents!==c||v.morphTargets!==d||v.morphNormals!==f||!0===V.isWebGL2&&v.morphTargetsCount!==p)&&(k=!0):k=!0:k=!0:k=!0:(k=!0,v.__version=r.version);var S=v.currentProgram;!0===k&&(S=Me(r,t,a));var T,E,M=!1,A=!1,I=!1,N=S.getUniforms(),R=v.uniforms;if(Z.useProgram(S.program)&&(M=!0,A=!0,I=!0),r.id!==x&&(x=r.id,A=!0),M||w!==e){if(N.setValue(de,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&N.setValue(de,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,A=!0,I=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var O=N.map.cameraPosition;void 0!==O&&O.setValue(de,z.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&N.setValue(de,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||a.isSkinnedMesh)&&N.setValue(de,"viewMatrix",e.matrixWorldInverse)}if(a.isSkinnedMesh){N.setOptional(de,a,"bindMatrix"),N.setOptional(de,a,"bindMatrixInverse");var D=a.skeleton;D&&(V.floatVertexTextures?(null===D.boneTexture&&D.computeBoneTexture(),N.setValue(de,"boneTexture",D.boneTexture,q),N.setValue(de,"boneTextureSize",D.boneTextureSize)):N.setOptional(de,D,"boneMatrices"))}return!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||oe.update(a,n,r,S),(A||v.receiveShadow!==a.receiveShadow)&&(v.receiveShadow=a.receiveShadow,N.setValue(de,"receiveShadow",a.receiveShadow)),A&&(N.setValue(de,"toneMappingExposure",m.toneMappingExposure),v.needsLights&&(E=I,(T=R).ambientLightColor.needsUpdate=E,T.lightProbe.needsUpdate=E,T.directionalLights.needsUpdate=E,T.directionalLightShadows.needsUpdate=E,T.pointLights.needsUpdate=E,T.pointLightShadows.needsUpdate=E,T.spotLights.needsUpdate=E,T.spotLightShadows.needsUpdate=E,T.rectAreaLights.needsUpdate=E,T.hemisphereLights.needsUpdate=E),i&&r.fog&&ee.refreshFogUniforms(R,i),ee.refreshMaterialUniforms(R,r,_,C,F),j2.upload(de,v.uniformsList,R,q)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(j2.upload(de,v.uniformsList,R,q),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&N.setValue(de,"center",a.center),N.setValue(de,"modelViewMatrix",a.modelViewMatrix),N.setValue(de,"normalMatrix",a.normalMatrix),N.setValue(de,"modelMatrix",a.matrixWorld),S}Se.setAnimationLoop((function(e){xe&&xe(e)})),"undefined"!=typeof window&&Se.setContext(window),this.setAnimationLoop=function(e){xe=e,ve.setAnimationLoop(e),null===e?Se.stop():Se.start()},ve.addEventListener("sessionstart",we),ve.addEventListener("sessionend",ke),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==v){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===ve.enabled&&!0===ve.isPresenting&&(!0===ve.cameraAutoUpdate&&ve.updateCamera(t),t=ve.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,b),(h=ne.get(e,p.length)).init(),p.push(h),j.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),D.setFromProjectionMatrix(j),P=this.localClippingEnabled,L=re.init(this.clippingPlanes,P,t),(d=te.get(e,f.length)).init(),f.push(d),Te(e,t,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(M,A),!0===L&&re.beginShadows();var n=h.state.shadowsArray;if(ae.render(n,e,t),!0===L&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),ie.render(d,e),h.setupLights(m.physicallyCorrectLights),t.isArrayCamera)for(var r=t.cameras,a=0,i=r.length;a<i;a++){var o=r[a];Ee(d,e,o,o.viewport)}else Ee(d,e,t);null!==b&&(q.updateMultisampleRenderTarget(b),q.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(m,e,t),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1),ce.resetDefaultState(),x=-1,w=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b=e,g=t,y=n,e&&void 0===G.get(e).__webglFramebuffer&&q.setupRenderTarget(e);var r=null,a=!1,i=!1;if(e){var o=e.texture;(o.isDataTexture3D||o.isDataTexture2DArray)&&(i=!0);var s=G.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=s[t],a=!0):r=e.isWebGLMultisampleRenderTarget?G.get(e).__webglMultisampledFramebuffer:s,k.copy(e.viewport),S.copy(e.scissor),T=e.scissorTest}else k.copy(I).multiplyScalar(_).floor(),S.copy(N).multiplyScalar(_).floor(),T=R;if(Z.bindFramebuffer(36160,r)&&V.drawBuffers){var l=!1;if(e)if(e.isWebGLMultipleRenderTargets){var u=e.texture;if(O.length!==u.length||36064!==O[0]){for(var c=0,d=u.length;c<d;c++)O[c]=36064+c;O.length=u.length,l=!0}}else 1===O.length&&36064===O[0]||(O[0]=36064,O.length=1,l=!0);else 1===O.length&&1029===O[0]||(O[0]=1029,O.length=1,l=!0);l&&(V.isWebGL2?de.drawBuffers(O):W.get("WEBGL_draw_buffers").drawBuffersWEBGL(O))}if(Z.viewport(k),Z.scissor(S),Z.setScissorTest(T),a){var h=G.get(e.texture);de.framebufferTexture2D(36160,36064,34069+t,h.__webglTexture,n)}else if(i){var f=G.get(e.texture),p=t||0;de.framebufferTextureLayer(36160,36064,f.__webglTexture,n||0,p)}x=-1},this.readRenderTargetPixels=function(e,t,n,r,a,i,o){if(e&&e.isWebGLRenderTarget){var s=G.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){Z.bindFramebuffer(36160,s);try{var l=e.texture,u=l.format,c=l.type;if(1023!==u&&ue.convert(u)!==de.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var d=1016===c&&(W.has("EXT_color_buffer_half_float")||V.isWebGL2&&W.has("EXT_color_buffer_float"));if(!(1009===c||ue.convert(c)===de.getParameter(35738)||1015===c&&(V.isWebGL2||W.has("OES_texture_float")||W.has("WEBGL_color_buffer_float"))||d))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===de.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-a&&de.readPixels(t,n,r,a,ue.convert(u),ue.convert(c),i):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var h=null!==b?G.get(b).__webglFramebuffer:null;Z.bindFramebuffer(36160,h)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),a=Math.floor(t.image.width*r),i=Math.floor(t.image.height*r),o=ue.convert(t.format);V.isWebGL2&&(6407===o&&(o=32849),6408===o&&(o=32856)),q.setTexture2D(t,0),de.copyTexImage2D(3553,n,o,e.x,e.y,a,i,0),Z.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.image.width,i=t.image.height,o=ue.convert(n.format),s=ue.convert(n.type);q.setTexture2D(n,0),de.pixelStorei(37440,n.flipY),de.pixelStorei(37441,n.premultiplyAlpha),de.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?de.texSubImage2D(3553,r,e.x,e.y,a,i,o,s,t.image.data):t.isCompressedTexture?de.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):de.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&de.generateMipmap(3553),Z.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(m.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var i,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,l=e.max.z-e.min.z+1,u=ue.convert(r.format),c=ue.convert(r.type);if(r.isDataTexture3D)q.setTexture3D(r,0),i=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(r,0),i=35866}de.pixelStorei(37440,r.flipY),de.pixelStorei(37441,r.premultiplyAlpha),de.pixelStorei(3317,r.unpackAlignment);var d=de.getParameter(3314),h=de.getParameter(32878),f=de.getParameter(3316),p=de.getParameter(3315),v=de.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;de.pixelStorei(3314,g.width),de.pixelStorei(32878,g.height),de.pixelStorei(3316,e.min.x),de.pixelStorei(3315,e.min.y),de.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?de.texSubImage3D(i,a,t.x,t.y,t.z,o,s,l,u,c,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),de.compressedTexSubImage3D(i,a,t.x,t.y,t.z,o,s,l,u,g.data)):de.texSubImage3D(i,a,t.x,t.y,t.z,o,s,l,u,c,g),de.pixelStorei(3314,d),de.pixelStorei(32878,h),de.pixelStorei(3316,f),de.pixelStorei(3315,p),de.pixelStorei(32877,v),0===a&&r.generateMipmaps&&de.generateMipmap(i),Z.unbindTexture()}},this.initTexture=function(e){q.setTexture2D(e,0),Z.unbindTexture()},this.resetState=function(){g=0,y=0,b=null,Z.reset(),ce.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n)})(A3).prototype.isWebGL1Renderer=!0;var I3=function(e){N(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:(0,L.Z)(e)})),e}return(0,A.Z)(n,[{key:"copy",value:function(e,t){return lu(R(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=lu(R(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(_Q);I3.prototype.isScene=!0;var N3=function(){function e(t,n){M(this,e),this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=aJ()}return(0,A.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=aJ()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=aJ()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}();N3.prototype.isInterleavedBuffer=!0;var R3=new EJ,O3=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];M(this,e),this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=!0===a}return(0,A.Z)(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)R3.x=this.getX(t),R3.y=this.getY(t),R3.z=this.getZ(t),R3.applyMatrix4(e),this.setXYZ(t,R3.x,R3.y,R3.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)R3.x=this.getX(t),R3.y=this.getY(t),R3.z=this.getZ(t),R3.applyNormalMatrix(e),this.setXYZ(t,R3.x,R3.y,R3.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)R3.x=this.getX(t),R3.y=this.getY(t),R3.z=this.getZ(t),R3.transformDirection(e),this.setXYZ(t,R3.x,R3.y,R3.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=a,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var a=r*this.data.stride+this.offset,i=0;i<this.itemSize;i++)n.push(this.data.array[a+i]);return new $Q(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,a=0;a<this.itemSize;a++)t.push(this.data.array[r+a]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}();O3.prototype.isInterleavedBufferAttribute=!0;var D3,L3=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="SpriteMaterial",r.color=new qQ(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(BQ);L3.prototype.isSpriteMaterial=!0;var P3=new EJ,F3=new EJ,j3=new EJ,z3=new hJ,B3=new hJ,U3=new nQ,W3=new EJ,V3=new EJ,Z3=new EJ,H3=new hJ,G3=new hJ,q3=new hJ;function X3(e,t,n,r,a,i){z3.subVectors(e,n).addScalar(.5).multiply(r),void 0!==a?(B3.x=i*z3.x-a*z3.y,B3.y=a*z3.x+i*z3.y):B3.copy(z3),e.copy(t),e.x+=B3.x,e.y+=B3.y,e.applyMatrix4(U3)}(function(e){N(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this)).type="Sprite",void 0===D3){D3=new l0;var a=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new N3(a,5);D3.setIndex([0,1,2,0,2,3]),D3.setAttribute("position",new O3(i,3,0,!1)),D3.setAttribute("uv",new O3(i,2,3,!1))}return r.geometry=D3,r.material=void 0!==e?e:new L3,r.center=new hJ(.5,.5),P(r)}return(0,A.Z)(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),F3.setFromMatrixScale(this.matrixWorld),U3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),j3.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&F3.multiplyScalar(-j3.z);var n,r,a=this.material.rotation;0!==a&&(r=Math.cos(a),n=Math.sin(a));var i=this.center;X3(W3.set(-.5,-.5,0),j3,i,F3,n,r),X3(V3.set(.5,-.5,0),j3,i,F3,n,r),X3(Z3.set(.5,.5,0),j3,i,F3,n,r),H3.set(0,0),G3.set(1,0),q3.set(1,1);var o=e.ray.intersectTriangle(W3,V3,Z3,!1,P3);if(null!==o||(X3(V3.set(-.5,.5,0),j3,i,F3,n,r),G3.set(0,1),null!==(o=e.ray.intersectTriangle(W3,Z3,V3,!1,P3)))){var s=e.ray.origin.distanceTo(P3);s<e.near||s>e.far||t.push({distance:s,point:P3.clone(),uv:jQ.getUV(P3,W3,V3,Z3,H3,G3,q3,new hJ),face:null,object:this})}}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n})(_Q).prototype.isSprite=!0;var Y3=new EJ,K3=new wJ,$3=new wJ,J3=new EJ,Q3=new nQ,e4=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this,e,r)).type="SkinnedMesh",a.bindMode="attached",a.bindMatrix=new nQ,a.bindMatrixInverse=new nQ,a}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new wJ,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){lu(R(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;K3.fromBufferAttribute(r.attributes.skinIndex,e),$3.fromBufferAttribute(r.attributes.skinWeight,e),Y3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var a=0;a<4;a++){var i=$3.getComponent(a);if(0!==i){var o=K3.getComponent(a);Q3.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(J3.copy(Y3).applyMatrix4(Q3),i)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(C0);e4.prototype.isSkinnedMesh=!0;var t4=function(e){N(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).type="Bone",e}return(0,A.Z)(n)}(_Q);t4.prototype.isBone=!0;var n4=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1003,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1003,f=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return M(this,n),(e=t.call(this,null,l,u,c,d,h,o,s,f,p)).image={data:r,width:a,height:i},e.magFilter=d,e.minFilter=h,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,A.Z)(n)}(bJ);n4.prototype.isDataTexture=!0;var r4=new nQ,a4=new nQ,i4=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];M(this,e),this.uuid=aJ(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return(0,A.Z)(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new nQ)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new nQ;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,a=this.bones.length;r<a;r++){var i=this.bones[r];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,a=0,i=e.length;a<i;a++){var o=e[a]?e[a].matrixWorld:a4;r4.multiplyMatrices(o,t[a]),r4.toArray(n,16*a)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=uJ(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new n4(t,e,e,1023,1015);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var a=e.bones[n],i=t[a];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),i=new t4),this.bones.push(i),this.boneInverses.push((new nQ).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,a=t.length;r<a;r++){var i=t[r];e.bones.push(i.uuid);var o=n[r];e.boneInverses.push(o.toArray())}return e}}]),e}(),o4=function(e){N(n,e);var t=F(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return M(this,n),"number"==typeof a&&(o=a,a=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(i=t.call(this,e,r,a)).meshPerAttribute=o,i}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}($Q);o4.prototype.isInstancedBufferAttribute=!0;var s4=new nQ,l4=new nQ,u4=[],c4=new C0;(function(e){N(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this,e,r)).instanceMatrix=new o4(new Float32Array(16*a),16),i.instanceColor=null,i.count=a,i.frustumCulled=!1,i}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(c4.geometry=this.geometry,c4.material=this.material,void 0!==c4.material)for(var a=0;a<r;a++){this.getMatrixAt(a,s4),l4.multiplyMatrices(n,s4),c4.matrixWorld=l4,c4.raycast(e,u4);for(var i=0,o=u4.length;i<o;i++){var s=u4[i];s.instanceId=a,s.object=this,t.push(s)}u4.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new o4(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n})(C0).prototype.isInstancedMesh=!0;var d4=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="LineBasicMaterial",r.color=new qQ(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}]),n}(BQ);d4.prototype.isLineBasicMaterial=!0;var h4=new EJ,f4=new EJ,p4=new nQ,m4=new tQ,v4=new qJ,g4=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new l0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new d4;return M(this,n),(e=t.call(this)).type="Line",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,a=t.count;r<a;r++)h4.fromBufferAttribute(t,r-1),f4.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=h4.distanceTo(f4);e.setAttribute("lineDistance",new e0(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),v4.copy(n.boundingSphere),v4.applyMatrix4(r),v4.radius+=a,!1!==e.ray.intersectsSphere(v4)){p4.copy(r).invert(),m4.copy(e.ray).applyMatrix4(p4);var o=a/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new EJ,u=new EJ,c=new EJ,d=new EJ,h=this.isLineSegments?2:1;if(n.isBufferGeometry){var f=n.index,p=n.attributes.position;if(null!==f)for(var m=Math.max(0,i.start),v=Math.min(f.count,i.start+i.count)-1;m<v;m+=h){var g=f.getX(m),y=f.getX(m+1);if(l.fromBufferAttribute(p,g),u.fromBufferAttribute(p,y),!(m4.distanceSqToSegment(l,u,d,c)>s)){d.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(d);b<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else for(var x=Math.max(0,i.start),w=Math.min(p.count,i.start+i.count)-1;x<w;x+=h)if(l.fromBufferAttribute(p,x),u.fromBufferAttribute(p,x+1),!(m4.distanceSqToSegment(l,u,d,c)>s)){d.applyMatrix4(this.matrixWorld);var k=e.ray.origin.distanceTo(d);k<e.near||k>e.far||t.push({distance:k,point:c.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,i=r.length;a<i;a++){var o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(_Q);g4.prototype.isLine=!0;var y4=new EJ,b4=new EJ,x4=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this,e,r)).type="LineSegments",a}return(0,A.Z)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,a=t.count;r<a;r+=2)y4.fromBufferAttribute(t,r),b4.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+y4.distanceTo(b4);e.setAttribute("lineDistance",new e0(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(g4);x4.prototype.isLineSegments=!0;var w4=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this,e,r)).type="LineLoop",a}return(0,A.Z)(n)}(g4);w4.prototype.isLineLoop=!0;var k4=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="PointsMaterial",r.color=new qQ(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(BQ);k4.prototype.isPointsMaterial=!0;var S4=new nQ,T4=new tQ,E4=new qJ,C4=new EJ,_4=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new l0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new k4;return M(this,n),(e=t.call(this)).type="Points",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),E4.copy(n.boundingSphere),E4.applyMatrix4(r),E4.radius+=a,!1!==e.ray.intersectsSphere(E4)){S4.copy(r).invert(),T4.copy(e.ray).applyMatrix4(S4);var o=a/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){var l=n.index,u=n.attributes.position;if(null!==l)for(var c=Math.max(0,i.start),d=Math.min(l.count,i.start+i.count);c<d;c++){var h=l.getX(c);C4.fromBufferAttribute(u,h),M4(C4,h,s,r,e,t,this)}else for(var f=Math.max(0,i.start),p=Math.min(u.count,i.start+i.count);f<p;f++)C4.fromBufferAttribute(u,f),M4(C4,f,s,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,i=r.length;a<i;a++){var o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(_Q);function M4(e,t,n,r,a,i,o){var s=T4.distanceSqToPoint(e);if(s<n){var l=new EJ;T4.closestPointToPoint(e,l),l.applyMatrix4(r);var u=a.ray.origin.distanceTo(l);if(u<a.near||u>a.far)return;i.push({distance:u,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:o})}}_4.prototype.isPoints=!0,function(e){N(n,e);var t=F(n);function n(e,r,a,i,o,s,l,u,c){var d;M(this,n),(d=t.call(this,e,r,a,i,o,s,l,u,c)).format=void 0!==l?l:1022,d.minFilter=void 0!==s?s:1006,d.magFilter=void 0!==o?o:1006,d.generateMipmaps=!1;var h=(0,L.Z)(d);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){h.needsUpdate=!0,e.requestVideoFrameCallback(t)})),d}return(0,A.Z)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(bJ).prototype.isVideoTexture=!0;var A4=function(e){N(n,e);var t=F(n);function n(e,r,a,i,o,s,l,u,c,d,h,f){var p;return M(this,n),(p=t.call(this,null,s,l,u,c,d,i,o,h,f)).image={width:r,height:a},p.mipmaps=e,p.flipY=!1,p.generateMipmaps=!1,p}return(0,A.Z)(n)}(bJ);A4.prototype.isCompressedTexture=!0,function(e){N(n,e);var t=F(n);function n(e,r,a,i,o,s,l,u,c){var d;return M(this,n),(d=t.call(this,e,r,a,i,o,s,l,u,c)).needsUpdate=!0,d}return(0,A.Z)(n)}(bJ).prototype.isCanvasTexture=!0,function(e){N(n,e);var t=F(n);function n(e,r,a,i,o,s,l,u,c,d){var h;if(M(this,n),1026!==(d=void 0!==d?d:1026)&&1027!==d)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===a&&1026===d&&(a=1012),void 0===a&&1027===d&&(a=1020),(h=t.call(this,null,i,o,s,l,u,d,a,c)).image={width:e,height:r},h.magFilter=void 0!==l?l:1003,h.minFilter=void 0!==u?u:1003,h.flipY=!1,h.generateMipmaps=!1,h}return(0,A.Z)(n)}(bJ).prototype.isDepthTexture=!0,new EJ,new EJ,new EJ,new jQ;var I4=function(){function e(){M(this,e),this.type="Curve",this.arcLengthDivisions=200}return(0,A.Z)(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),a=0;n.push(0);for(var i=1;i<=e;i++)a+=(t=this.getPoint(i/e)).distanceTo(r),n.push(a),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),a=0,i=r.length;n=t||e*r[i-1];for(var o,s=0,l=i-1;s<=l;)if((o=r[a=Math.floor(s+(l-s)/2)]-n)<0)s=a+1;else{if(!(o>0)){l=a;break}l=a-1}if(r[a=l]===n)return a/(i-1);var u=r[a];return(a+(n-u)/(r[a+1]-u))/(i-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,a=e+n;r<0&&(r=0),a>1&&(a=1);var i=this.getPoint(r),o=this.getPoint(a),s=t||(i.isVector2?new hJ:new EJ);return s.copy(o).sub(i).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new EJ,r=[],a=[],i=[],o=new EJ,s=new nQ,l=0;l<=e;l++){var u=l/e;r[l]=this.getTangentAt(u,new EJ)}a[0]=new EJ,i[0]=new EJ;var c=Number.MAX_VALUE,d=Math.abs(r[0].x),h=Math.abs(r[0].y),f=Math.abs(r[0].z);d<=c&&(c=d,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),f<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),a[0].crossVectors(r[0],o),i[0].crossVectors(r[0],a[0]);for(var p=1;p<=e;p++){if(a[p]=a[p-1].clone(),i[p]=i[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();var m=Math.acos(iJ(r[p-1].dot(r[p]),-1,1));a[p].applyMatrix4(s.makeRotationAxis(o,m))}i[p].crossVectors(r[p],a[p])}if(!0===t){var v=Math.acos(iJ(a[0].dot(a[e]),-1,1));v/=e,r[0].dot(o.crossVectors(a[0],a[e]))>0&&(v=-v);for(var g=1;g<=e;g++)a[g].applyMatrix4(s.makeRotationAxis(r[g],v*g)),i[g].crossVectors(r[g],a[g])}return{tangents:r,normals:a,binormals:i}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),N4=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return M(this,n),(e=t.call(this)).type="EllipseCurve",e.aX=r,e.aY=a,e.xRadius=i,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=l,e.aClockwise=u,e.aRotation=c,e}return(0,A.Z)(n,[{key:"getPoint",value:function(e,t){for(var n=t||new hJ,r=2*Math.PI,a=this.aEndAngle-this.aStartAngle,i=Math.abs(a)<Number.EPSILON;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(a=i?0:r),!0!==this.aClockwise||i||(a===r?a=-r:a-=r);var o=this.aStartAngle+e*a,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=s-this.aX,h=l-this.aY;s=d*u-h*c+this.aX,l=d*c+h*u+this.aY}return n.set(s,l)}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return lu(R(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(I4);N4.prototype.isEllipseCurve=!0;var R4=function(e){N(n,e);var t=F(n);function n(e,r,a,i,o,s){var l;return M(this,n),(l=t.call(this,e,r,a,a,i,o,s)).type="ArcCurve",l}return(0,A.Z)(n)}(N4);function O4(){var e=0,t=0,n=0,r=0;function a(a,i,o,s){e=a,t=o,n=-3*a+3*i-2*o-s,r=2*a-2*i+o+s}return{initCatmullRom:function(e,t,n,r,i){a(t,n,i*(n-e),i*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,i,o,s){var l=(t-e)/i-(n-e)/(i+o)+(n-t)/o,u=(n-t)/o-(r-t)/(o+s)+(r-n)/s;a(t,n,l*=o,u*=o)},calc:function(a){var i=a*a;return e+t*a+n*i+r*(i*a)}}}R4.prototype.isArcCurve=!0;var D4=new EJ,L4=new O4,P4=new O4,F4=new O4,j4=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return M(this,n),(e=t.call(this)).type="CatmullRomCurve3",e.points=r,e.closed=a,e.curveType=i,e.tension=o,e}return(0,A.Z)(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EJ,a=this.points,i=a.length,o=(i-(this.closed?0:1))*e,s=Math.floor(o),l=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/i)+1)*i:0===l&&s===i-1&&(s=i-2,l=1),this.closed||s>0?t=a[(s-1)%i]:(D4.subVectors(a[0],a[1]).add(a[0]),t=D4);var u=a[s%i],c=a[(s+1)%i];if(this.closed||s+2<i?n=a[(s+2)%i]:(D4.subVectors(a[i-1],a[i-2]).add(a[i-1]),n=D4),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,h=Math.pow(t.distanceToSquared(u),d),f=Math.pow(u.distanceToSquared(c),d),p=Math.pow(c.distanceToSquared(n),d);f<1e-4&&(f=1),h<1e-4&&(h=f),p<1e-4&&(p=f),L4.initNonuniformCatmullRom(t.x,u.x,c.x,n.x,h,f,p),P4.initNonuniformCatmullRom(t.y,u.y,c.y,n.y,h,f,p),F4.initNonuniformCatmullRom(t.z,u.z,c.z,n.z,h,f,p)}else"catmullrom"===this.curveType&&(L4.initCatmullRom(t.x,u.x,c.x,n.x,this.tension),P4.initCatmullRom(t.y,u.y,c.y,n.y,this.tension),F4.initCatmullRom(t.z,u.z,c.z,n.z,this.tension));return r.set(L4.calc(l),P4.calc(l),F4.calc(l)),r}},{key:"copy",value:function(e){lu(R(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var a=this.points[t];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){lu(R(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push((new EJ).fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(I4);function z4(e,t,n,r,a){var i=.5*(r-t),o=.5*(a-n),s=e*e;return(2*n-2*r+i+o)*(e*s)+(-3*n+3*r-2*i-o)*s+i*e+n}function B4(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function U4(e,t,n,r,a){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,a)}j4.prototype.isCatmullRomCurve3=!0;var W4=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hJ,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hJ,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new hJ,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new hJ;return M(this,n),(e=t.call(this)).type="CubicBezierCurve",e.v0=r,e.v1=a,e.v2=i,e.v3=o,e}return(0,A.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hJ,n=this.v0,r=this.v1,a=this.v2,i=this.v3;return t.set(U4(e,n.x,r.x,a.x,i.x),U4(e,n.y,r.y,a.y,i.y)),t}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return lu(R(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(I4);W4.prototype.isCubicBezierCurve=!0;var V4=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EJ,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EJ,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new EJ,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new EJ;return M(this,n),(e=t.call(this)).type="CubicBezierCurve3",e.v0=r,e.v1=a,e.v2=i,e.v3=o,e}return(0,A.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EJ,n=this.v0,r=this.v1,a=this.v2,i=this.v3;return t.set(U4(e,n.x,r.x,a.x,i.x),U4(e,n.y,r.y,a.y,i.y),U4(e,n.z,r.z,a.z,i.z)),t}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return lu(R(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(I4);V4.prototype.isCubicBezierCurve3=!0;var Z4=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hJ,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hJ;return M(this,n),(e=t.call(this)).type="LineCurve",e.v1=r,e.v2=a,e}return(0,A.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hJ;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new hJ;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return lu(R(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(I4);Z4.prototype.isLineCurve=!0;var H4=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hJ,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hJ,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new hJ;return M(this,n),(e=t.call(this)).type="QuadraticBezierCurve",e.v0=r,e.v1=a,e.v2=i,e}return(0,A.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hJ,n=this.v0,r=this.v1,a=this.v2;return t.set(B4(e,n.x,r.x,a.x),B4(e,n.y,r.y,a.y)),t}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return lu(R(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(I4);H4.prototype.isQuadraticBezierCurve=!0;var G4=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EJ,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EJ,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new EJ;return M(this,n),(e=t.call(this)).type="QuadraticBezierCurve3",e.v0=r,e.v1=a,e.v2=i,e}return(0,A.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EJ,n=this.v0,r=this.v1,a=this.v2;return t.set(B4(e,n.x,r.x,a.x),B4(e,n.y,r.y,a.y),B4(e,n.z,r.z,a.z)),t}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return lu(R(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(I4);G4.prototype.isQuadraticBezierCurve3=!0;var q4=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return M(this,n),(e=t.call(this)).type="SplineCurve",e.points=r,e}return(0,A.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hJ,n=this.points,r=(n.length-1)*e,a=Math.floor(r),i=r-a,o=n[0===a?a:a-1],s=n[a],l=n[a>n.length-2?n.length-1:a+1],u=n[a>n.length-3?n.length-1:a+2];return t.set(z4(i,o.x,s.x,l.x,u.x),z4(i,o.y,s.y,l.y,u.y)),t}},{key:"copy",value:function(e){lu(R(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push(a.clone())}return this}},{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var a=this.points[t];e.points.push(a.toArray())}return e}},{key:"fromJSON",value:function(e){lu(R(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push((new hJ).fromArray(a))}return this}}]),n}(I4);q4.prototype.isSplineCurve=!0;var X4=Object.freeze({__proto__:null,ArcCurve:R4,CatmullRomCurve3:j4,CubicBezierCurve:W4,CubicBezierCurve3:V4,EllipseCurve:N4,LineCurve:Z4,LineCurve3:function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EJ,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EJ;return M(this,n),(e=t.call(this)).type="LineCurve3",e.isLineCurve3=!0,e.v1=r,e.v2=a,e}return(0,A.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EJ;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return lu(R(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(I4),QuadraticBezierCurve:H4,QuadraticBezierCurve3:G4,SplineCurve:q4}),Y4=function(e){N(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return(0,A.Z)(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Z4(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),r=this.getCurveLengths(),a=0;a<r.length;){if(r[a]>=n){var i=r[a]-n,o=this.curves[a],s=o.getLength(),l=0===s?0:1-i/s;return o.getPointAt(l,t)}a++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,a=this.curves;r<a.length;r++)for(var i=a[r],o=i&&i.isEllipseCurve?2*t:i&&(i.isLineCurve||i.isLineCurve3)?1:i&&i.isSplineCurve?t*i.points.length:t,s=i.getPoints(o),l=0;l<s.length;l++){var u=s[l];e&&e.equals(u)||(n.push(u),e=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){lu(R(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var a=e.curves[t];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var a=this.curves[t];e.curves.push(a.toJSON())}return e}},{key:"fromJSON",value:function(e){lu(R(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var a=e.curves[t];this.curves.push((new X4[a.type]).fromJSON(a))}return this}}]),n}(I4),K4=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="Path",r.currentPoint=new hJ,e&&r.setFromPoints(e),r}return(0,A.Z)(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new Z4(this.currentPoint.clone(),new hJ(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var a=new H4(this.currentPoint.clone(),new hJ(e,t),new hJ(n,r));return this.curves.push(a),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,a,i){var o=new W4(this.currentPoint.clone(),new hJ(e,t),new hJ(n,r),new hJ(a,i));return this.curves.push(o),this.currentPoint.set(a,i),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new q4(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,a,i){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,a,i),this}},{key:"absarc",value:function(e,t,n,r,a,i){return this.absellipse(e,t,n,n,r,a,i),this}},{key:"ellipse",value:function(e,t,n,r,a,i,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,a,i,o,s),this}},{key:"absellipse",value:function(e,t,n,r,a,i,o,s){var l=new N4(e,t,n,r,a,i,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return lu(R(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(Y4),$4=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).uuid=aJ(),r.type="Shape",r.holes=[],r}return(0,A.Z)(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){lu(R(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var a=e.holes[t];this.holes.push(a.clone())}return this}},{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var a=this.holes[t];e.holes.push(a.toJSON())}return e}},{key:"fromJSON",value:function(e){lu(R(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var a=e.holes[t];this.holes.push((new K4).fromJSON(a))}return this}}]),n}(K4);function J4(e,t,n,r,a){var i,o;if(a===function(e,t,n,r){for(var a=0,i=t,o=n-r;i<n;i+=r)a+=(e[o]-e[i])*(e[i+1]+e[o+1]),o=i;return a}(e,t,n,r)>0)for(i=t;i<n;i+=r)o=b5(i,e[i],e[i+1],o);else for(i=n-r;i>=t;i-=r)o=b5(i,e[i],e[i+1],o);return o&&f5(o,o.next)&&(x5(o),o=o.next),o}function Q4(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!f5(r,r.next)&&0!==h5(r.prev,r,r.next))r=r.next;else{if(x5(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function e5(e,t,n,r,a,i,o){if(e){!o&&i&&function(e,t,n,r){var a=e;do{null===a.z&&(a.z=l5(a.x,a.y,t,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,function(e){var t,n,r,a,i,o,s,l,u=1;do{for(n=e,e=null,i=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(a=n,n=n.nextZ,s--):(a=r,r=r.nextZ,l--),i?i.nextZ=a:e=a,a.prevZ=i,i=a;n=r}i.nextZ=null,u*=2}while(o>1)}(a)}(e,r,a,i);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,i?n5(e,r,a,i):t5(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),x5(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?e5(e=r5(Q4(e),t,n),t,n,r,a,i,2):2===o&&a5(e,t,n,r,a,i):e5(Q4(e),t,n,r,a,i,1);break}}}function t5(e){var t=e.prev,n=e,r=e.next;if(h5(t,n,r)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(c5(t.x,t.y,n.x,n.y,r.x,r.y,a.x,a.y)&&h5(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function n5(e,t,n,r){var a=e.prev,i=e,o=e.next;if(h5(a,i,o)>=0)return!1;for(var s=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,l=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,u=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,c=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y,d=l5(s,l,t,n,r),h=l5(u,c,t,n,r),f=e.prevZ,p=e.nextZ;f&&f.z>=d&&p&&p.z<=h;){if(f!==e.prev&&f!==e.next&&c5(a.x,a.y,i.x,i.y,o.x,o.y,f.x,f.y)&&h5(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&c5(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&h5(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==e.prev&&f!==e.next&&c5(a.x,a.y,i.x,i.y,o.x,o.y,f.x,f.y)&&h5(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&c5(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&h5(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function r5(e,t,n){var r=e;do{var a=r.prev,i=r.next.next;!f5(a,i)&&p5(a,r,r.next,i)&&g5(a,i)&&g5(i,a)&&(t.push(a.i/n),t.push(r.i/n),t.push(i.i/n),x5(r),x5(r.next),r=e=i),r=r.next}while(r!==e);return Q4(r)}function a5(e,t,n,r,a,i){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&d5(o,s)){var l=y5(o,s);return o=Q4(o,o.next),l=Q4(l,l.next),e5(o,t,n,r,a,i),void e5(l,t,n,r,a,i)}s=s.next}o=o.next}while(o!==e)}function i5(e,t){return e.x-t.x}function o5(e,t){if(t=function(e,t){var n,r=t,a=e.x,i=e.y,o=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>o){if(o=s,s===a){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(a===o)return n;var l,u=n,c=n.x,d=n.y,h=1/0;r=n;do{a>=r.x&&r.x>=c&&a!==r.x&&c5(i<d?a:o,i,c,d,i<d?o:a,i,r.x,r.y)&&(l=Math.abs(i-r.y)/(a-r.x),g5(r,e)&&(l<h||l===h&&(r.x>n.x||r.x===n.x&&s5(n,r)))&&(n=r,h=l)),r=r.next}while(r!==u);return n}(e,t),t){var n=y5(t,e);Q4(t,t.next),Q4(n,n.next)}}function s5(e,t){return h5(e.prev,e,t.prev)<0&&h5(t.next,e,e.next)<0}function l5(e,t,n,r,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*a)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*a)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function u5(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function c5(e,t,n,r,a,i,o,s){return(a-o)*(t-s)-(e-o)*(i-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(i-s)-(a-o)*(r-s)>=0}function d5(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&p5(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(g5(e,t)&&g5(t,e)&&function(e,t){var n=e,r=!1,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&a<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(h5(e.prev,e,t.prev)||h5(e,t.prev,t))||f5(e,t)&&h5(e.prev,e,e.next)>0&&h5(t.prev,t,t.next)>0)}function h5(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function f5(e,t){return e.x===t.x&&e.y===t.y}function p5(e,t,n,r){var a=v5(h5(e,t,n)),i=v5(h5(e,t,r)),o=v5(h5(n,r,e)),s=v5(h5(n,r,t));return a!==i&&o!==s||!(0!==a||!m5(e,n,t))||!(0!==i||!m5(e,r,t))||!(0!==o||!m5(n,e,r))||!(0!==s||!m5(n,t,r))}function m5(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function v5(e){return e>0?1:e<0?-1:0}function g5(e,t){return h5(e.prev,e,e.next)<0?h5(e,t,e.next)>=0&&h5(e,e.prev,t)>=0:h5(e,t,e.prev)<0||h5(e,e.next,t)<0}function y5(e,t){var n=new w5(e.i,e.x,e.y),r=new w5(t.i,t.x,t.y),a=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=a,a.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function b5(e,t,n,r){var a=new w5(e,t,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function x5(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function w5(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var k5=function(){function e(){M(this,e)}return(0,A.Z)(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,a=0;a<t;r=a++)n+=e[r].x*e[a].y-e[a].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],a=[];S5(e),T5(n,e);var i=e.length;t.forEach(S5);for(var o=0;o<t.length;o++)r.push(i),i+=t[o].length,T5(n,t[o]);for(var s=function(e,t){var n,r,a,i,o,s,l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,d=c?t[0]*u:e.length,h=J4(e,0,d,u,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(e,t,n,r){var a,i,o,s=[];for(a=0,i=t.length;a<i;a++)(o=J4(e,t[a]*r,a<i-1?t[a+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(u5(o));for(s.sort(i5),a=0;a<s.length;a++)o5(s[a],n),n=Q4(n,n.next);return n}(e,t,h,u)),e.length>80*u){n=a=e[0],r=i=e[1];for(var p=u;p<d;p+=u)(o=e[p])<n&&(n=o),(s=e[p+1])<r&&(r=s),o>a&&(a=o),s>i&&(i=s);l=0!==(l=Math.max(a-n,i-r))?1/l:0}return e5(h,f,u,n,r,l),f}(n,r),l=0;l<s.length;l+=3)a.push(s.slice(l,l+3));return a}}]),e}();function S5(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function T5(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var E5=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $4([new hJ(.5,.5),new hJ(-.5,.5),new hJ(-.5,-.5),new hJ(.5,-.5)]),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};M(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:r,options:a},r=Array.isArray(r)?r:[r];for(var i=(0,L.Z)(e),o=[],s=[],l=0,u=r.length;l<u;l++)c(r[l]);function c(e){var t=[],n=void 0!==a.curveSegments?a.curveSegments:12,r=void 0!==a.steps?a.steps:1,l=void 0!==a.depth?a.depth:1,u=void 0===a.bevelEnabled||a.bevelEnabled,c=void 0!==a.bevelThickness?a.bevelThickness:.2,d=void 0!==a.bevelSize?a.bevelSize:c-.1,h=void 0!==a.bevelOffset?a.bevelOffset:0,f=void 0!==a.bevelSegments?a.bevelSegments:3,p=a.extrudePath,m=void 0!==a.UVGenerator?a.UVGenerator:C5;void 0!==a.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=a.amount);var v,g,y,b,x,w=!1;p&&(v=p.getSpacedPoints(r),w=!0,u=!1,g=p.computeFrenetFrames(r,!1),y=new EJ,b=new EJ,x=new EJ),u||(f=0,c=0,d=0,h=0);var k=e.extractPoints(n),S=k.shape,T=k.holes;if(!k5.isClockWise(S)){S=S.reverse();for(var E=0,C=T.length;E<C;E++){var _=T[E];k5.isClockWise(_)&&(T[E]=_.reverse())}}for(var M=k5.triangulateShape(S,T),A=S,I=0,N=T.length;I<N;I++){var R=T[I];S=S.concat(R)}function O(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var D=S.length,L=M.length;function P(e,t,n){var r,a,i,o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=o*o+s*s,d=o*u-s*l;if(Math.abs(d)>Number.EPSILON){var h=Math.sqrt(c),f=Math.sqrt(l*l+u*u),p=t.x-s/h,m=t.y+o/h,v=((n.x-u/f-p)*u-(n.y+l/f-m)*l)/(o*u-s*l),g=(r=p+o*v-e.x)*r+(a=m+s*v-e.y)*a;if(g<=2)return new hJ(r,a);i=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?l>Number.EPSILON&&(y=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(r=-s,a=o,i=Math.sqrt(c)):(r=o,a=s,i=Math.sqrt(c/2))}return new hJ(r/i,a/i)}for(var F=[],j=0,z=A.length,B=z-1,U=j+1;j<z;j++,B++,U++)B===z&&(B=0),U===z&&(U=0),F[j]=P(A[j],A[B],A[U]);for(var W,V=[],Z=F.concat(),H=0,G=T.length;H<G;H++){var q=T[H];W=[];for(var X=0,Y=q.length,K=Y-1,$=X+1;X<Y;X++,K++,$++)K===Y&&(K=0),$===Y&&($=0),W[X]=P(q[X],q[K],q[$]);V.push(W),Z=Z.concat(W)}for(var J=0;J<f;J++){for(var Q=J/f,ee=c*Math.cos(Q*Math.PI/2),te=d*Math.sin(Q*Math.PI/2)+h,ne=0,re=A.length;ne<re;ne++){var ae=O(A[ne],F[ne],te);Ne(ae.x,ae.y,-ee)}for(var ie=0,oe=T.length;ie<oe;ie++){var se=T[ie];W=V[ie];for(var le=0,ue=se.length;le<ue;le++){var ce=O(se[le],W[le],te);Ne(ce.x,ce.y,-ee)}}}for(var de=d+h,he=0;he<D;he++){var fe=u?O(S[he],Z[he],de):S[he];w?(b.copy(g.normals[0]).multiplyScalar(fe.x),y.copy(g.binormals[0]).multiplyScalar(fe.y),x.copy(v[0]).add(b).add(y),Ne(x.x,x.y,x.z)):Ne(fe.x,fe.y,0)}for(var pe=1;pe<=r;pe++)for(var me=0;me<D;me++){var ve=u?O(S[me],Z[me],de):S[me];w?(b.copy(g.normals[pe]).multiplyScalar(ve.x),y.copy(g.binormals[pe]).multiplyScalar(ve.y),x.copy(v[pe]).add(b).add(y),Ne(x.x,x.y,x.z)):Ne(ve.x,ve.y,l/r*pe)}for(var ge=f-1;ge>=0;ge--){for(var ye=ge/f,be=c*Math.cos(ye*Math.PI/2),xe=d*Math.sin(ye*Math.PI/2)+h,we=0,ke=A.length;we<ke;we++){var Se=O(A[we],F[we],xe);Ne(Se.x,Se.y,l+be)}for(var Te=0,Ee=T.length;Te<Ee;Te++){var Ce=T[Te];W=V[Te];for(var _e=0,Me=Ce.length;_e<Me;_e++){var Ae=O(Ce[_e],W[_e],xe);w?Ne(Ae.x,Ae.y+v[r-1].y,v[r-1].x+be):Ne(Ae.x,Ae.y,l+be)}}}function Ie(e,t){for(var n=e.length;--n>=0;){var a=n,i=n-1;i<0&&(i=e.length-1);for(var o=0,s=r+2*f;o<s;o++){var l=D*o,u=D*(o+1);Oe(t+a+l,t+i+l,t+i+u,t+a+u)}}}function Ne(e,n,r){t.push(e),t.push(n),t.push(r)}function Re(e,t,n){De(e),De(t),De(n);var r=o.length/3,a=m.generateTopUV(i,o,r-3,r-2,r-1);Le(a[0]),Le(a[1]),Le(a[2])}function Oe(e,t,n,r){De(e),De(t),De(r),De(t),De(n),De(r);var a=o.length/3,s=m.generateSideWallUV(i,o,a-6,a-3,a-2,a-1);Le(s[0]),Le(s[1]),Le(s[3]),Le(s[1]),Le(s[2]),Le(s[3])}function De(e){o.push(t[3*e+0]),o.push(t[3*e+1]),o.push(t[3*e+2])}function Le(e){s.push(e.x),s.push(e.y)}!function(){var e=o.length/3;if(u){for(var t=0,n=D*t,a=0;a<L;a++){var s=M[a];Re(s[2]+n,s[1]+n,s[0]+n)}n=D*(t=r+2*f);for(var l=0;l<L;l++){var c=M[l];Re(c[0]+n,c[1]+n,c[2]+n)}}else{for(var d=0;d<L;d++){var h=M[d];Re(h[2],h[1],h[0])}for(var p=0;p<L;p++){var m=M[p];Re(m[0]+D*r,m[1]+D*r,m[2]+D*r)}}i.addGroup(e,o.length/3-e,0)}(),function(){var e=o.length/3,t=0;Ie(A,t),t+=A.length;for(var n=0,r=T.length;n<r;n++){var a=T[n];Ie(a,t),t+=a.length}i.addGroup(e,o.length/3-e,1)}()}return e.setAttribute("position",new e0(o,3)),e.setAttribute("uv",new e0(s,2)),e.computeVertexNormals(),e}return(0,A.Z)(n,[{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,a=e.length;r<a;r++){var i=e[r];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],a=0,i=e.shapes.length;a<i;a++){var o=t[e.shapes[a]];r.push(o)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new X4[s.type]).fromJSON(s)),new n(r,e.options)}}]),n}(l0),C5={generateTopUV:function(e,t,n,r,a){var i=t[3*n],o=t[3*n+1],s=t[3*r],l=t[3*r+1],u=t[3*a],c=t[3*a+1];return[new hJ(i,o),new hJ(s,l),new hJ(u,c)]},generateSideWallUV:function(e,t,n,r,a,i){var o=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],d=t[3*r+2],h=t[3*a],f=t[3*a+1],p=t[3*a+2],m=t[3*i],v=t[3*i+1],g=t[3*i+2];return Math.abs(s-c)<Math.abs(o-u)?[new hJ(o,1-l),new hJ(u,1-d),new hJ(h,1-p),new hJ(m,1-g)]:[new hJ(s,1-l),new hJ(c,1-d),new hJ(f,1-p),new hJ(v,1-g)]}},_5=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $4([new hJ(0,.5),new hJ(-.5,-.5),new hJ(.5,-.5)]),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;M(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:r,curveSegments:a};var i=[],o=[],s=[],l=[],u=0,c=0;if(!1===Array.isArray(r))h(r);else for(var d=0;d<r.length;d++)h(r[d]),e.addGroup(u,c,d),u+=c,c=0;function h(e){var t=o.length/3,n=e.extractPoints(a),r=n.shape,u=n.holes;!1===k5.isClockWise(r)&&(r=r.reverse());for(var d=0,h=u.length;d<h;d++){var f=u[d];!0===k5.isClockWise(f)&&(u[d]=f.reverse())}for(var p=k5.triangulateShape(r,u),m=0,v=u.length;m<v;m++){var g=u[m];r=r.concat(g)}for(var y=0,b=r.length;y<b;y++){var x=r[y];o.push(x.x,x.y,0),s.push(0,0,1),l.push(x.x,x.y)}for(var w=0,k=p.length;w<k;w++){var S=p[w],T=S[0]+t,E=S[1]+t,C=S[2]+t;i.push(T,E,C),c+=3}}return e.setIndex(i),e.setAttribute("position",new e0(o,3)),e.setAttribute("normal",new e0(s,3)),e.setAttribute("uv",new e0(l,2)),e}return(0,A.Z)(n,[{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var a=e[n];t.shapes.push(a.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],a=0,i=e.shapes.length;a<i;a++){var o=t[e.shapes[a]];r.push(o)}return new n(r,e.curveSegments)}}]),n}(l0),M5=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="ShadowMaterial",r.color=new qQ(0),r.transparent=!0,r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this}}]),n}(BQ);M5.prototype.isShadowMaterial=!0;var A5=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new qQ(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new qQ(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new hJ(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(BQ);A5.prototype.isMeshStandardMaterial=!0;var I5=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new hJ(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty((0,L.Z)(r),"reflectivity",{get:function(){return iJ(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.sheenTint=new qQ(0),r.sheenRoughness=1,r.transmissionMap=null,r.thickness=.01,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationTint=new qQ(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularTint=new qQ(1,1,1),r.specularTintMap=null,r._sheen=0,r._clearcoat=0,r._transmission=0,r.setValues(e),r}return(0,A.Z)(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenTint.copy(e.sheenTint),this.sheenRoughness=e.sheenRoughness,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}}]),n}(A5);I5.prototype.isMeshPhysicalMaterial=!0,function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="MeshPhongMaterial",r.color=new qQ(16777215),r.specular=new qQ(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new qQ(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new hJ(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(BQ).prototype.isMeshPhongMaterial=!0,function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).defines={TOON:""},r.type="MeshToonMaterial",r.color=new qQ(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new qQ(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new hJ(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(BQ).prototype.isMeshToonMaterial=!0,function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new hJ(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.flatShading=!1,r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(BQ).prototype.isMeshNormalMaterial=!0,function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="MeshLambertMaterial",r.color=new qQ(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new qQ(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(BQ).prototype.isMeshLambertMaterial=!0,function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new qQ(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new hJ(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}]),n}(BQ).prototype.isMeshMatcapMaterial=!0,function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(d4).prototype.isLineDashedMaterial=!0;var N5={arraySlice:function(e,t,n){return N5.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,a=new e.constructor(r),i=0,o=0;o!==r;++i)for(var s=n[i]*t,l=0;l!==t;++l)a[o++]=e[s+l];return a},flattenJSON:function(e,t,n,r){for(var a=1,i=e[0];void 0!==i&&void 0===i[r];)i=e[a++];if(void 0!==i){var o=i[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=i[r])&&(t.push(i.time),n.push.apply(n,o)),i=e[a++]}while(void 0!==i);else if(void 0!==o.toArray)do{void 0!==(o=i[r])&&(t.push(i.time),o.toArray(n,n.length)),i=e[a++]}while(void 0!==i);else do{void 0!==(o=i[r])&&(t.push(i.time),n.push(o)),i=e[a++]}while(void 0!==i)}},subclip:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,i=e.clone();i.name=t;for(var o=[],s=0;s<i.tracks.length;++s){for(var l=i.tracks[s],u=l.getValueSize(),c=[],d=[],h=0;h<l.times.length;++h){var f=l.times[h]*a;if(!(f<n||f>=r)){c.push(l.times[h]);for(var p=0;p<u;++p)d.push(l.values[h*u+p])}}0!==c.length&&(l.times=N5.convertArray(c,l.times.constructor),l.values=N5.convertArray(d,l.values.constructor),o.push(l))}i.tracks=o;for(var m=1/0,v=0;v<i.tracks.length;++v)m>i.tracks[v].times[0]&&(m=i.tracks[v].times[0]);for(var g=0;g<i.tracks.length;++g)i.tracks[g].shift(-1*m);return i.resetDuration(),i},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var a=n.tracks.length,i=t/r,o=function(){var t=n.tracks[s],r=t.ValueTypeName;if("bool"===r||"string"===r)return"continue";var a=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===a)return"continue";var o=0,l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);var u=0,c=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);var d,h=t.times.length-1;if(i<=t.times[0]){var f=o,p=l-o;d=N5.arraySlice(t.values,f,p)}else if(i>=t.times[h]){var m=h*l+o,v=m+l-o;d=N5.arraySlice(t.values,m,v)}else{var g=t.createInterpolant(),y=o,b=l-o;g.evaluate(i),d=N5.arraySlice(g.resultBuffer,y,b)}"quaternion"===r&&(new TJ).fromArray(d).normalize().conjugate().toArray(d);for(var x=a.times.length,w=0;w<x;++w){var k=w*c+u;if("quaternion"===r)TJ.multiplyQuaternionsFlat(a.values,k,d,0,a.values,k);else for(var S=c-2*u,T=0;T<S;++T)a.values[k+T]-=d[T]}},s=0;s<a;++s)o();return e.blendMode=2501,e}},R5=function(){function e(t,n,r,a){M(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return(0,A.Z)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],a=t[n-1];e:{t:{var i;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<a)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,a)}if(n===o)break;if(a=r,e<(r=t[++n]))break t}i=t.length;break n}if(e>=a)break e;var s=t[1];e<s&&(n=2,a=s);for(var l=n-2;;){if(void 0===a)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===l)break;if(r=a,e>=(a=t[--n-1]))break t}i=n,n=0}for(;n<i;){var u=n+i>>>1;e<t[u]?i=u:n=u+1}if(r=t[n],void 0===(a=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,a,e)}this._cachedIndex=n,this.intervalChanged_(n,a,r)}return this.interpolate_(n,a,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r,i=0;i!==r;++i)t[i]=n[a+i];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();R5.prototype.beforeStart_=R5.prototype.copySampleValue_,R5.prototype.afterEnd_=R5.prototype.copySampleValue_;var O5=function(e){N(n,e);var t=F(n);function n(e,r,a,i){var o;return M(this,n),(o=t.call(this,e,r,a,i))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:2400,endingEnd:2400},o}return(0,A.Z)(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,a=e-2,i=e+1,o=r[a],s=r[i];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:a=e,o=2*t-n;break;case 2402:o=t+r[a=r.length-2]-r[a+1];break;default:a=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:i=e,s=2*n-t;break;case 2402:i=1,s=n+r[1]-r[0];break;default:i=e-1,s=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=a*u,this._offsetNext=i*u}},{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,v=-d*m+2*d*p-d*f,g=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-h)*m+(1.5+h)*p+.5*f,b=h*m-h*p,x=0;x!==o;++x)a[x]=v*i[u+x]+g*i[l+x]+y*i[s+x]+b*i[c+x];return a}}]),n}(R5),D5=function(e){N(n,e);var t=F(n);function n(e,r,a,i){return M(this,n),t.call(this,e,r,a,i)}return(0,A.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(r-t),c=1-u,d=0;d!==o;++d)a[d]=i[l+d]*c+i[s+d]*u;return a}}]),n}(R5),L5=function(e){N(n,e);var t=F(n);function n(e,r,a,i){return M(this,n),t.call(this,e,r,a,i)}return(0,A.Z)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(R5),P5=function(){function e(t,n,r,a){if(M(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=N5.convertArray(n,this.TimeBufferType),this.values=N5.convertArray(r,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}return(0,A.Z)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new L5(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new D5(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new O5(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,a=0,i=r-1;a!==r&&n[a]<e;)++a;for(;-1!==i&&n[i]>t;)--i;if(++i,0!==a||i!==r){a>=i&&(a=(i=Math.max(i,1))-1);var o=this.getValueSize();this.times=N5.arraySlice(n,a,i),this.values=N5.arraySlice(this.values,a*o,i*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,a=n.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var i=null,o=0;o!==a;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==i&&i>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,i),e=!1;break}i=s}if(void 0!==r&&N5.isTypedArray(r))for(var l=0,u=r.length;l!==u;++l){var c=r[l];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=N5.arraySlice(this.times),t=N5.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),a=e.length-1,i=1,o=1;o<a;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==e[0]))if(r)s=!0;else for(var u=o*n,c=u-n,d=u+n,h=0;h!==n;++h){var f=t[u+h];if(f!==t[c+h]||f!==t[d+h]){s=!0;break}}if(s){if(o!==i){e[i]=e[o];for(var p=o*n,m=i*n,v=0;v!==n;++v)t[m+v]=t[p+v]}++i}}if(a>0){e[i]=e[a];for(var g=a*n,y=i*n,b=0;b!==n;++b)t[y+b]=t[g+b];++i}return i!==e.length?(this.times=N5.arraySlice(e,0,i),this.values=N5.arraySlice(t,0,i*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=N5.arraySlice(this.times,0),t=N5.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:N5.convertArray(e.times,Array),values:N5.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();P5.prototype.TimeBufferType=Float32Array,P5.prototype.ValueBufferType=Float32Array,P5.prototype.DefaultInterpolation=2301;var F5=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n)}(P5);F5.prototype.ValueTypeName="bool",F5.prototype.ValueBufferType=Array,F5.prototype.DefaultInterpolation=2300,F5.prototype.InterpolantFactoryMethodLinear=void 0,F5.prototype.InterpolantFactoryMethodSmooth=void 0;var j5=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n)}(P5);j5.prototype.ValueTypeName="color";var z5=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n)}(P5);z5.prototype.ValueTypeName="number";var B5=function(e){N(n,e);var t=F(n);function n(e,r,a,i){return M(this,n),t.call(this,e,r,a,i)}return(0,A.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),l=e*o,u=l+o;l!==u;l+=4)TJ.slerpFlat(a,0,i,l-o,i,l,s);return a}}]),n}(R5),U5=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new B5(this.times,this.values,this.getValueSize(),e)}}]),n}(P5);U5.prototype.ValueTypeName="quaternion",U5.prototype.DefaultInterpolation=2301,U5.prototype.InterpolantFactoryMethodSmooth=void 0;var W5=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n)}(P5);W5.prototype.ValueTypeName="string",W5.prototype.ValueBufferType=Array,W5.prototype.DefaultInterpolation=2300,W5.prototype.InterpolantFactoryMethodLinear=void 0,W5.prototype.InterpolantFactoryMethodSmooth=void 0;var V5=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n)}(P5);V5.prototype.ValueTypeName="vector";var Z5=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;M(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=a,this.uuid=aJ(),this.duration<0&&this.resetDuration()}return(0,A.Z)(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),a=0,i=n.length;a!==i;++a)t.push(H5(n[a]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},a=0,i=n.length;a!==i;++a)t.push(P5.toJSON(n[a]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var a=t.length,i=[],o=0;o<a;o++){var s=[],l=[];s.push((o+a-1)%a,o,(o+1)%a),l.push(0,1,0);var u=N5.getKeyframeOrder(s);s=N5.sortedArray(s,1,u),l=N5.sortedArray(l,1,u),r||0!==s[0]||(s.push(a),l.push(l[0])),i.push(new z5(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new this(e,-1,i)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var a=0;a<n.length;a++)if(n[a].name===t)return n[a];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},a=/^([\w-]*?)([\d]+)$/,i=0,o=e.length;i<o;i++){var s=e[i],l=s.name.match(a);if(l&&l.length>1){var u=l[1],c=r[u];c||(r[u]=c=[]),c.push(s)}}var d=[];for(var h in r)d.push(this.CreateFromMorphTargetSequence(h,r[h],t,n));return d}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,a){if(0!==n.length){var i=[],o=[];N5.flattenJSON(n,i,o,r),0!==i.length&&a.push(new e(t,i,o))}},r=[],a=e.name||"default",i=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[],u=0;u<l.length;u++){var c=l[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){var d={},h=void 0;for(h=0;h<c.length;h++)if(c[h].morphTargets)for(var f=0;f<c[h].morphTargets.length;f++)d[c[h].morphTargets[f]]=-1;for(var p in d){for(var m=[],v=[],g=0;g!==c[h].morphTargets.length;++g){var y=c[h];m.push(y.time),v.push(y.morphTarget===p?1:0)}r.push(new z5(".morphTargetInfluence["+p+"]",m,v))}s=d.length*(i||1)}else{var b=".bones["+t[u].name+"]";n(V5,b+".position",c,"pos",r),n(U5,b+".quaternion",c,"rot",r),n(V5,b+".scale",c,"scl",r)}}return 0===r.length?null:new this(a,s,r,o)}}]),e}();function H5(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return z5;case"vector":case"vector2":case"vector3":case"vector4":return V5;case"color":return j5;case"quaternion":return U5;case"bool":case"boolean":return F5;case"string":return W5}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];N5.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var G5={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},q5=new(function(){return(0,A.Z)((function e(t,n,r){M(this,e);var a,i=this,o=!1,s=0,l=0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){l++,!1===o&&void 0!==i.onStart&&i.onStart(e,s,l),o=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,l),s===l&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return a?a(e):e},this.setURLModifier=function(e){return a=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){var t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=u.length;t<n;t+=2){var r=u[t],a=u[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return a}return null}}))}()),X5=function(){function e(t){M(this,e),this.manager=void 0!==t?t:q5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,A.Z)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,a){n.load(e,r,t,a)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),Y5={},K5=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,i=G5.get(e);if(void 0!==i)return a.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;if(void 0===Y5[e]){var o,s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var l=s[1],u=!!s[2],c=s[3];c=decodeURIComponent(c),u&&(c=atob(c));try{var d,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var f=new Uint8Array(c.length),p=0;p<c.length;p++)f[p]=c.charCodeAt(p);d="blob"===h?new Blob([f.buffer],{type:l}):f.buffer;break;case"document":var m=new DOMParser;d=m.parseFromString(c,l);break;case"json":d=JSON.parse(c);break;default:d=c}setTimeout((function(){t&&t(d),a.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)}),0)}}else{for(var v in Y5[e]=[],Y5[e].push({onLoad:t,onProgress:n,onError:r}),(o=new XMLHttpRequest).open("GET",e,!0),o.addEventListener("load",(function(t){var n=this.response,r=Y5[e];if(delete Y5[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),G5.add(e,n);for(var i=0,o=r.length;i<o;i++){var s=r[i];s.onLoad&&s.onLoad(n)}a.manager.itemEnd(e)}else{for(var l=0,u=r.length;l<u;l++){var c=r[l];c.onError&&c.onError(t)}a.manager.itemError(e),a.manager.itemEnd(e)}}),!1),o.addEventListener("progress",(function(t){for(var n=Y5[e],r=0,a=n.length;r<a;r++){var i=n[r];i.onProgress&&i.onProgress(t)}}),!1),o.addEventListener("error",(function(t){var n=Y5[e];delete Y5[e];for(var r=0,i=n.length;r<i;r++){var o=n[r];o.onError&&o.onError(t)}a.manager.itemError(e),a.manager.itemEnd(e)}),!1),o.addEventListener("abort",(function(t){var n=Y5[e];delete Y5[e];for(var r=0,i=n.length;r<i;r++){var o=n[r];o.onError&&o.onError(t)}a.manager.itemError(e),a.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)o.setRequestHeader(v,this.requestHeader[v]);o.send(null)}return a.manager.itemStart(e),o}Y5[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(X5),$5=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,i=G5.get(e);if(void 0!==i)return a.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;var o=vJ("img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),G5.add(e,this),t&&t(this),a.manager.itemEnd(e)}function l(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1),r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}]),n}(X5),J5=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"load",value:function(e,t,n,r){var a=new P0,i=new $5(this.manager);i.setCrossOrigin(this.crossOrigin),i.setPath(this.path);var o=0;function s(n){i.load(e[n],(function(e){a.images[n]=e,6===++o&&(a.needsUpdate=!0,t&&t(a))}),void 0,r)}for(var l=0;l<e.length;++l)s(l);return a}}]),n}(X5),Q5=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"load",value:function(e,t,n,r){var a=this,i=new n4,o=new K5(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,(function(e){var n=a.parse(e);n&&(void 0!==n.image?i.image=n.image:void 0!==n.data&&(i.image.width=n.width,i.image.height=n.height,i.image.data=n.data),i.wrapS=void 0!==n.wrapS?n.wrapS:1001,i.wrapT=void 0!==n.wrapT?n.wrapT:1001,i.magFilter=void 0!==n.magFilter?n.magFilter:1006,i.minFilter=void 0!==n.minFilter?n.minFilter:1006,i.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(i.encoding=n.encoding),void 0!==n.flipY&&(i.flipY=n.flipY),void 0!==n.format&&(i.format=n.format),void 0!==n.type&&(i.type=n.type),void 0!==n.mipmaps&&(i.mipmaps=n.mipmaps,i.minFilter=1008),1===n.mipmapCount&&(i.minFilter=1006),void 0!==n.generateMipmaps&&(i.generateMipmaps=n.generateMipmaps),i.needsUpdate=!0,t&&t(i,n))}),n,r),i}}]),n}(X5),e6=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"load",value:function(e,t,n,r){var a=new bJ,i=new $5(this.manager);return i.setCrossOrigin(this.crossOrigin),i.setPath(this.path),i.load(e,(function(e){a.image=e,a.needsUpdate=!0,void 0!==t&&t(a)}),n,r),a}}]),n}(X5),t6=function(e){N(n,e);var t=F(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return M(this,n),(r=t.call(this)).type="Light",r.color=new qQ(e),r.intensity=a,r}return(0,A.Z)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=lu(R(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(_Q);t6.prototype.isLight=!0,function(e){N(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this,e,a)).type="HemisphereLight",i.position.copy(_Q.DefaultUp),i.updateMatrix(),i.groundColor=new qQ(r),i}return(0,A.Z)(n,[{key:"copy",value:function(e){return t6.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}]),n}(t6).prototype.isHemisphereLight=!0;var n6=new nQ,r6=new EJ,a6=new EJ,i6=function(){function e(t){M(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new hJ(512,512),this.map=null,this.mapPass=null,this.matrix=new nQ,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Z0,this._frameExtents=new hJ(1,1),this._viewportCount=1,this._viewports=[new wJ(0,0,1,1)]}return(0,A.Z)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;r6.setFromMatrixPosition(e.matrixWorld),t.position.copy(r6),a6.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(a6),t.updateMatrixWorld(),n6.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n6),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),o6=function(e){N(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this,new D0(50,1,.5,500))).focus=1,e}return(0,A.Z)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*eJ*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;r===t.fov&&a===t.aspect&&i===t.far||(t.fov=r,t.aspect=a,t.far=i,t.updateProjectionMatrix()),lu(R(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(i6);o6.prototype.isSpotLightShadow=!0;var s6=function(e){N(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return M(this,n),(a=t.call(this,e,r)).type="SpotLight",a.position.copy(_Q.DefaultUp),a.updateMatrix(),a.target=new _Q,a.distance=i,a.angle=o,a.penumbra=s,a.decay=l,a.shadow=new o6,a}return(0,A.Z)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(t6);s6.prototype.isSpotLight=!0;var l6=new nQ,u6=new EJ,c6=new EJ,d6=function(e){N(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this,new D0(90,1,.5,500)))._frameExtents=new hJ(4,2),e._viewportCount=6,e._viewports=[new wJ(2,1,1,1),new wJ(0,1,1,1),new wJ(3,1,1,1),new wJ(1,1,1,1),new wJ(3,0,1,1),new wJ(1,0,1,1)],e._cubeDirections=[new EJ(1,0,0),new EJ(-1,0,0),new EJ(0,0,1),new EJ(0,0,-1),new EJ(0,1,0),new EJ(0,-1,0)],e._cubeUps=[new EJ(0,1,0),new EJ(0,1,0),new EJ(0,1,0),new EJ(0,1,0),new EJ(0,0,1),new EJ(0,0,-1)],e}return(0,A.Z)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),u6.setFromMatrixPosition(e.matrixWorld),n.position.copy(u6),c6.copy(n.position),c6.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(c6),n.updateMatrixWorld(),r.makeTranslation(-u6.x,-u6.y,-u6.z),l6.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(l6)}}]),n}(i6);d6.prototype.isPointLightShadow=!0;var h6=function(e){N(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return M(this,n),(a=t.call(this,e,r)).type="PointLight",a.distance=i,a.decay=o,a.shadow=new d6,a}return(0,A.Z)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(t6);h6.prototype.isPointLight=!0;var f6=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.call(this,new r1(-5,5,5,-5,.5,500))}return(0,A.Z)(n)}(i6);f6.prototype.isDirectionalLightShadow=!0;var p6=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this,e,r)).type="DirectionalLight",a.position.copy(_Q.DefaultUp),a.updateMatrix(),a.target=new _Q,a.shadow=new f6,a}return(0,A.Z)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(t6);p6.prototype.isDirectionalLight=!0,function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this,e,r)).type="AmbientLight",a}return(0,A.Z)(n)}(t6).prototype.isAmbientLight=!0,function(e){N(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return M(this,n),(a=t.call(this,e,r)).type="RectAreaLight",a.width=i,a.height=o,a}return(0,A.Z)(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=lu(R(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(t6).prototype.isRectAreaLight=!0;var m6=function(){function e(){M(this,e),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new EJ)}return(0,A.Z)(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,a=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.282095),t.addScaledVector(i[1],.488603*r),t.addScaledVector(i[2],.488603*a),t.addScaledVector(i[3],.488603*n),t.addScaledVector(i[4],n*r*1.092548),t.addScaledVector(i[5],r*a*1.092548),t.addScaledVector(i[6],.315392*(3*a*a-1)),t.addScaledVector(i[7],n*a*1.092548),t.addScaledVector(i[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,a=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.886227),t.addScaledVector(i[1],1.023328*r),t.addScaledVector(i[2],1.023328*a),t.addScaledVector(i[3],1.023328*n),t.addScaledVector(i[4],.858086*n*r),t.addScaledVector(i[5],.858086*r*a),t.addScaledVector(i[6],.743125*a*a-.247708),t.addScaledVector(i[7],.858086*n*a),t.addScaledVector(i[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-r*r)}}]),e}();m6.prototype.isSphericalHarmonics3=!0;var v6=function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m6,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return M(this,n),(e=t.call(this,void 0,a)).sh=r,e}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=lu(R(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(t6);v6.prototype.isLightProbe=!0;var g6=function(){function e(){M(this,e)}return(0,A.Z)(e,null,[{key:"decodeText",value:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}]),e}();(function(e){N(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).type="InstancedBufferGeometry",e.instanceCount=1/0,e}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=lu(R(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n})(l0).prototype.isInstancedBufferGeometry=!0;var y6,b6=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return(0,A.Z)(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,i=G5.get(e);if(void 0!==i)return a.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(a.options,{colorSpaceConversion:"none"}))})).then((function(n){G5.add(e,n),t&&t(n),a.manager.itemEnd(e)})).catch((function(t){r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)})),a.manager.itemStart(e)}}]),n}(X5);b6.prototype.isImageBitmapLoader=!0;var x6=function(e){N(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,A.Z)(n,[{key:"load",value:function(e,t,n,r){var a=this,i=new K5(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(n){try{var i=n.slice(0);(void 0===y6&&(y6=new(window.AudioContext||window.webkitAudioContext)),y6).decodeAudioData(i,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),a.manager.itemError(e)}}),n,r)}}]),n}(X5);(function(e){N(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;M(this,n),a=t.call(this,void 0,i);var o=(new qQ).set(e),s=(new qQ).set(r),l=new EJ(o.r,o.g,o.b),u=new EJ(s.r,s.g,s.b),c=Math.sqrt(Math.PI),d=c*Math.sqrt(.75);return a.sh.coefficients[0].copy(l).add(u).multiplyScalar(c),a.sh.coefficients[1].copy(l).sub(u).multiplyScalar(d),a}return(0,A.Z)(n)})(v6).prototype.isHemisphereLightProbe=!0,function(e){N(n,e);var t=F(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;M(this,n),r=t.call(this,void 0,a);var i=(new qQ).set(e);return r.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return(0,A.Z)(n)}(v6).prototype.isAmbientLightProbe=!0;var w6=function(){function e(t,n,r){var a,i,o;switch(M(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":a=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":a=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:a=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,A.Z)(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,a=e*r+r,i=this.cumulativeWeight;if(0===i){for(var o=0;o!==r;++o)n[a+o]=n[o];i=t}else{var s=t/(i+=t);this._mixBufferRegion(n,a,0,s,r)}this.cumulativeWeight=i}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,a=this.cumulativeWeight,i=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-a,t)}i>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var a=n,i=r;a!==i;++a)t[a]=t[r+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,a){if(r>=.5)for(var i=0;i!==a;++i)e[t+i]=e[n+i]}},{key:"_slerp",value:function(e,t,n,r){TJ.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,a){var i=this._workIndex*a;TJ.multiplyQuaternionsFlat(e,i,e,t,e,n),TJ.slerpFlat(e,t,e,t,e,i,r)}},{key:"_lerp",value:function(e,t,n,r,a){for(var i=1-r,o=0;o!==a;++o){var s=t+o;e[s]=e[s]*i+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,a){for(var i=0;i!==a;++i){var o=t+i;e[o]=e[o]+e[n+i]*r}}}]),e}(),k6=new RegExp("[\\[\\]\\.:\\/]","g"),S6="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",T6=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),E6=/(WCOD+)?/.source.replace("WCOD",S6),C6=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),_6=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),M6=new RegExp("^"+T6+E6+C6+_6+"$"),A6=["material","materials","bones"],I6=function(){function e(t,n,r){M(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,A.Z)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,a=n.propertyName,i=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var l=t[a];if(void 0!==l){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===a){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}c=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=i}else void 0!==l.fromArray&&void 0!==l.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(c=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=a;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var d=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+a+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(k6,"")}},{key:"parseTrackName",value:function(e){var t=M6.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var a=n.nodeName.substring(r+1);-1!==A6.indexOf(a)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=a)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var a=n[r];if(a.name===t||a.uuid===t)return a;var i=e(a.children);if(i)return i}return null}(e.children);if(r)return r}return null}}]),e}();I6.Composite=function(){function e(t,n,r){M(this,e);var a=r||I6.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,a)}return(0,A.Z)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,a=n.length;r!==a;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),I6.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},I6.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},I6.prototype.GetterByBindingType=[I6.prototype._getValue_direct,I6.prototype._getValue_array,I6.prototype._getValue_arrayElement,I6.prototype._getValue_toArray],I6.prototype.SetterByBindingTypeAndVersioning=[[I6.prototype._setValue_direct,I6.prototype._setValue_direct_setNeedsUpdate,I6.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[I6.prototype._setValue_array,I6.prototype._setValue_array_setNeedsUpdate,I6.prototype._setValue_array_setMatrixWorldNeedsUpdate],[I6.prototype._setValue_arrayElement,I6.prototype._setValue_arrayElement_setNeedsUpdate,I6.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[I6.prototype._setValue_fromArray,I6.prototype._setValue_fromArray_setNeedsUpdate,I6.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var N6=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;M(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=a;for(var i=n.tracks,o=i.length,s=new Array(o),l={endingStart:2400,endingEnd:2400},u=0;u!==o;++u){var c=i[u].createInterpolant(null);s[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,A.Z)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,a=e._clip.duration,i=a/r,o=r/a;e.warp(1,i,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,a=r.time,i=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=a,s[1]=a+n,l[0]=e/i,l[1]=t/i,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var a=this._startTime;if(null!==a){var i=(e-a)*n;if(i<0||0===n)return;this._startTime=null,t=n*i}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var l=this._interpolants,u=this._propertyBindings;if(2501===this.blendMode)for(var c=0,d=l.length;c!==d;++c)l[c].evaluate(o),u[c].accumulateAdditive(s);else for(var h=0,f=l.length;h!==f;++h)l[h].evaluate(o),u[h].accumulate(r,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,a=this._loopCount,i=2202===n;if(0===e)return-1===a?r:i&&1==(1&a)?t-r:r;if(2200===n){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===a&&(e>=0?(a=0,this._setEndings(!0,0===this.repetitions,i)):this._setEndings(0===this.repetitions,!0,i)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,a+=Math.abs(o);var s=this.repetitions-a;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,i)}else this._setEndings(!1,!1,i);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(i&&1==(1&a))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,a=r.time,i=this._weightInterpolant;null===i&&(i=r._lendControlInterpolant(),this._weightInterpolant=i);var o=i.parameterPositions,s=i.sampleValues;return o[0]=a,s[0]=t,o[1]=a+e,s[1]=n,this}}]),e}(),R6=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return(0,A.Z)(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,a=r.length,i=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==a;++c){var d=r[c],h=d.name,f=u[h];if(void 0!==f)i[c]=f;else{if(void 0!==(f=i[c])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,h));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(f=new w6(I6.create(n,h,p),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(f,s,h),i[c]=f}o[c].resultBuffer=f.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var a=e._propertyBindings,i=0,o=a.length;i!==o;++i){var s=a[i];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var a=t[n];0==--a.useCount&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,a=this._actionsByClip,i=a[t];if(void 0===i)i={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=i;else{var o=i.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),i.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var a=e._clip.uuid,i=this._actionsByClip,o=i[a],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete i[a],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var a=t[n];0==--a.referenceCount&&this._removeInactiveBinding(a)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,a=this._bindings,i=r[t];void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=a.length,a.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,a=n.path,i=this._bindingsByRootAndName,o=i[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[a],0===Object.keys(o).length&&delete i[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new D5(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=n,t[n]=a}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,a=r.uuid,i="string"==typeof e?Z5.findByName(r,e):e,o=null!==i?i.uuid:e,s=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==i?i.blendMode:2500),void 0!==s){var u=s.actionByRoot[a];if(void 0!==u&&u.blendMode===n)return u;l=s.knownActions[0],null===i&&(i=l._clip)}if(null===i)return null;var c=new N6(this,i,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,a),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,a="string"==typeof e?Z5.findByName(n,e):e,i=a?a.uuid:e,o=this._actionsByClip[i];return void 0!==o&&o.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,a=Math.sign(e),i=this._accuIndex^=1,o=0;o!==n;++o)t[o]._update(r,e,a,i);for(var s=this._bindings,l=this._nActiveBindings,u=0;u!==l;++u)s[u].apply(i);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,a=r[n];if(void 0!==a){for(var i=a.knownActions,o=0,s=i.length;o!==s;++o){var l=i[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var a=n[r].actionByRoot[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var i=this._bindingsByRootAndName[t];if(void 0!==i)for(var o in i){var s=i[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}($$);function O6(e,t){return e.distance-t.distance}function D6(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var a=e.children,i=0,o=a.length;i<o;i++)D6(a[i],t,n,!0)}R6.prototype._controlInterpolantsResultBuffer=new Float32Array(1),function(e){N(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return M(this,n),(a=t.call(this,e,r)).meshPerAttribute=i,a}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=lu(R(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=lu(R(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(N3).prototype.isInstancedInterleavedBuffer=!0;var L6=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return M(this,e),this.radius=t,this.phi=n,this.theta=r,this}return(0,A.Z)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(iJ(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();(function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).material=e,r.render=function(){},r.hasPositions=!1,r.hasNormals=!1,r.hasColors=!1,r.hasUvs=!1,r.positionArray=null,r.normalArray=null,r.colorArray=null,r.uvArray=null,r.count=0,r}return(0,A.Z)(n)})(_Q).prototype.isImmediateRenderObject=!0;var P6=new EJ,F6=new nQ,j6=new nQ;function z6(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,z6(e.children[n]));return t}var B6=new Float32Array(1),U6=new Int32Array(B6.buffer),W6=function(){function e(){M(this,e)}return(0,A.Z)(e,null,[{key:"toHalfFloat",value:function(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),B6[0]=e;var t=U6[0],n=t>>16&32768,r=t>>12&2047,a=t>>23&255;return a<103?n:a>142?(n|=31744,n|=(255==a?0:1)&&8388607&t):a<113?n|=((r|=2048)>>114-a)+(r>>113-a&1):(n|=a-112<<10|r>>1,n+=1&r)}}]),e}();I4.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(I4.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},K4.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},function(e){N(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;M(this,n),i=new qQ(i),o=new qQ(o);for(var s=a/2,l=r/a,u=r/2,c=[],d=[],h=0,f=0,p=-u;h<=a;h++,p+=l){c.push(-u,0,p,u,0,p),c.push(p,0,-u,p,0,u);var m=h===s?i:o;m.toArray(d,f),f+=3,m.toArray(d,f),f+=3,m.toArray(d,f),f+=3,m.toArray(d,f),f+=3}var v=new l0;return v.setAttribute("position",new e0(c,3)),v.setAttribute("color",new e0(d,3)),(e=t.call(this,v,new d4({vertexColors:!0,toneMapped:!1}))).type="GridHelper",e}return(0,A.Z)(n)}(x4).prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},function(e){N(n,e);var t=F(n);function n(e){var r;M(this,n);for(var a=z6(e),i=new l0,o=[],s=[],l=new qQ(0,0,1),u=new qQ(0,1,0),c=0;c<a.length;c++){var d=a[c];d.parent&&d.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(l.r,l.g,l.b),s.push(u.r,u.g,u.b))}return i.setAttribute("position",new e0(o,3)),i.setAttribute("color",new e0(s,3)),(r=t.call(this,i,new d4({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}))).type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=e,r.bones=a,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return(0,A.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,a=r.getAttribute("position");j6.copy(this.root.matrixWorld).invert();for(var i=0,o=0;i<t.length;i++){var s=t[i];s.parent&&s.parent.isBone&&(F6.multiplyMatrices(j6,s.matrixWorld),P6.setFromMatrixPosition(F6),a.setXYZ(o,P6.x,P6.y,P6.z),F6.multiplyMatrices(j6,s.parent.matrixWorld),P6.setFromMatrixPosition(F6),a.setXYZ(o+1,P6.x,P6.y,P6.z),o+=2)}r.getAttribute("position").needsUpdate=!0,lu(R(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(x4).prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},X5.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),g6.extractUrlBase(e)},X5.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},MJ.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},MJ.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},MJ.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},MJ.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},MJ.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},qJ.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Z0.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},pJ.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},pJ.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},pJ.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},pJ.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},pJ.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},pJ.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},nQ.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},nQ.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},nQ.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new EJ).setFromMatrixColumn(this,3)},nQ.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},nQ.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},nQ.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},nQ.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},nQ.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},nQ.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},nQ.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},nQ.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},nQ.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},nQ.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},nQ.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},nQ.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},nQ.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},nQ.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},nQ.prototype.makeFrustum=function(e,t,n,r,a,i){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,a,i)},nQ.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},U0.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},TJ.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},TJ.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},tQ.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},tQ.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},tQ.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},jQ.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},jQ.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},jQ.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},jQ.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},jQ.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},jQ.barycoordFromPoint=function(e,t,n,r,a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),jQ.getBarycoord(e,t,n,r,a)},jQ.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),jQ.getNormal(e,t,n,r)},$4.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},$4.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new E5(this,e)},$4.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new _5(this,e)},hJ.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},hJ.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},hJ.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},EJ.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},EJ.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},EJ.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},EJ.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},EJ.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},EJ.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},EJ.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},EJ.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},EJ.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},wJ.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},wJ.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},_Q.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},_Q.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},_Q.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},_Q.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},_Q.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(_Q.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),C0.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(C0.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),e4.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},D0.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(t6.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties($Q.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),$Q.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},$Q.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},$Q.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},l0.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},l0.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new $Q(arguments[1],arguments[2])))},l0.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},l0.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},l0.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},l0.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},l0.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(l0.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),N3.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},N3.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},E5.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},E5.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},E5.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},I3.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Object.defineProperties(BQ.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new qQ}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(R0.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),A3.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},A3.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},A3.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},A3.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},A3.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},A3.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},A3.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},A3.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},A3.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},A3.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},A3.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},A3.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},A3.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},A3.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},A3.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},A3.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},A3.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},A3.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},A3.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},A3.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},A3.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},A3.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},A3.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},A3.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},A3.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(A3.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?3001:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(b3.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(kJ.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return(0,A.Z)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(_Q).prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new x6).load(e,(function(e){t.setBuffer(e)})),this},L0.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},L0.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},gJ.crossOrigin=void 0,gJ.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var a=new e6;a.setCrossOrigin(this.crossOrigin);var i=a.load(e,n,void 0,r);return t&&(i.mapping=t),i},gJ.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var a=new J5;a.setCrossOrigin(this.crossOrigin);var i=a.load(e,n,void 0,r);return t&&(i.mapping=t),i},gJ.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},gJ.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"133"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="133");var V6=new WeakMap;function Z6(){var e,t;function n(e,t,n,r,a,i){var o=i.num_components(),s=n.num_points()*o,l=s*a.BYTES_PER_ELEMENT,u=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,a),c=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,i,u,l,c);var d=new a(e.HEAPF32.buffer,c,s).slice();return e._free(c),{name:r,array:d,itemSize:o}}onmessage=function(r){var a=r.data;switch(a.type){case"init":e=a.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var i=a.buffer,o=a.taskConfig;t.then((function(e){var t=e.draco,r=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(i),i.byteLength);try{var l=function(e,t,r,a){var i,o,s=a.attributeIDs,l=a.attributeTypes,u=t.GetEncodedGeometryType(r);if(u===e.TRIANGULAR_MESH)i=new e.Mesh,o=t.DecodeBufferToMesh(r,i);else{if(u!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");i=new e.PointCloud,o=t.DecodeBufferToPointCloud(r,i)}if(!o.ok()||0===i.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+o.error_msg());var c={index:null,attributes:[]};for(var d in s){var h=self[l[d]],f=void 0,p=void 0;if(a.useUniqueIDs)p=s[d],f=t.GetAttributeByUniqueId(i,p);else{if(-1===(p=t.GetAttributeId(i,e[s[d]])))continue;f=t.GetAttribute(i,p)}c.attributes.push(n(e,t,i,d,h,f))}return u===e.TRIANGULAR_MESH&&(c.index=function(e,t,n){var r=3*n.num_faces(),a=4*r,i=e._malloc(a);t.GetTrianglesUInt32Array(n,a,i);var o=new Uint32Array(e.HEAPF32.buffer,i,r).slice();return e._free(i),{array:o,itemSize:1}}(e,t,i)),e.destroy(i),c}(t,r,s,o),u=l.attributes.map((function(e){return e.array.buffer}));l.index&&u.push(l.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:l},u)}catch(e){console.error(e),self.postMessage({type:"error",id:a.id,error:e.message})}finally{t.destroy(s),t.destroy(r)}}))}}}var H6=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register((function(e){return new K6(e)})),r.register((function(e){return new t8(e)})),r.register((function(e){return new n8(e)})),r.register((function(e){return new $6(e)})),r.register((function(e){return new J6(e)})),r.register((function(e){return new Q6(e)})),r.register((function(e){return new e8(e)})),r.register((function(e){return new X6(e)})),r.register((function(e){return new r8(e)})),r}return(0,A.Z)(n,[{key:"load",value:function(e,t,n,r){var a,i=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:g6.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},s=new K5(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{i.parse(n,a,(function(n){t(n),i.manager.itemEnd(e)}),o)}catch(e){o(e)}}),n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var a,i={},o={};if("string"==typeof e)a=e;else if(g6.decodeText(new Uint8Array(e,0,4))===a8){try{i[q6.KHR_BINARY_GLTF]=new i8(e)}catch(e){return void(r&&r(e))}a=i[q6.KHR_BINARY_GLTF].content}else a=g6.decodeText(new Uint8Array(e));var s=JSON.parse(a);if(void 0===s.asset||s.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var l=new A8(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(var u=0;u<this.pluginCallbacks.length;u++){var c=this.pluginCallbacks[u](l);o[c.name]=c,i[c.name]=!0}if(s.extensionsUsed)for(var d=0;d<s.extensionsUsed.length;++d){var h=s.extensionsUsed[d],f=s.extensionsRequired||[];switch(h){case q6.KHR_MATERIALS_UNLIT:i[h]=new Y6;break;case q6.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:i[h]=new u8;break;case q6.KHR_DRACO_MESH_COMPRESSION:i[h]=new o8(s,this.dracoLoader);break;case q6.KHR_TEXTURE_TRANSFORM:i[h]=new s8;break;case q6.KHR_MESH_QUANTIZATION:i[h]=new c8;break;default:f.indexOf(h)>=0&&void 0===o[h]&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(i),l.setPlugins(o),l.parse(n,r)}}}]),n}(X5);function G6(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var q6={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"},X6=function(){function e(t){M(this,e),this.parser=t,this.name=q6.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return(0,A.Z)(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var a=t[n];a.extensions&&a.extensions[this.name]&&void 0!==a.extensions[this.name].light&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var a,i=t.json,o=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e],s=new qQ(16777215);void 0!==o.color&&s.fromArray(o.color);var l=void 0!==o.range?o.range:0;switch(o.type){case"directional":(a=new p6(s)).target.position.set(0,0,-1),a.add(a.target);break;case"point":(a=new h6(s)).distance=l;break;case"spot":(a=new s6(s)).distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,void 0!==o.intensity&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then((function(e){return n._getNodeRef(t.cache,a,e)}))}}]),e}(),Y6=function(){function e(){M(this,e),this.name=q6.KHR_MATERIALS_UNLIT}return(0,A.Z)(e,[{key:"getMaterialType",value:function(){return XQ}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new qQ(1,1,1),e.opacity=1;var a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var i=a.baseColorFactor;e.color.fromArray(i),e.opacity=i[3]}void 0!==a.baseColorTexture&&r.push(n.assignTexture(e,"map",a.baseColorTexture))}return Promise.all(r)}}]),e}(),K6=function(){function e(t){M(this,e),this.parser=t,this.name=q6.KHR_MATERIALS_CLEARCOAT}return(0,A.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?I5:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];if(void 0!==i.clearcoatFactor&&(t.clearcoat=i.clearcoatFactor),void 0!==i.clearcoatTexture&&a.push(n.assignTexture(t,"clearcoatMap",i.clearcoatTexture)),void 0!==i.clearcoatRoughnessFactor&&(t.clearcoatRoughness=i.clearcoatRoughnessFactor),void 0!==i.clearcoatRoughnessTexture&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),void 0!==i.clearcoatNormalTexture&&(a.push(n.assignTexture(t,"clearcoatNormalMap",i.clearcoatNormalTexture)),void 0!==i.clearcoatNormalTexture.scale)){var o=i.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new hJ(o,o)}return Promise.all(a)}}]),e}(),$6=function(){function e(t){M(this,e),this.parser=t,this.name=q6.KHR_MATERIALS_TRANSMISSION}return(0,A.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?I5:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];return void 0!==i.transmissionFactor&&(t.transmission=i.transmissionFactor),void 0!==i.transmissionTexture&&a.push(n.assignTexture(t,"transmissionMap",i.transmissionTexture)),Promise.all(a)}}]),e}(),J6=function(){function e(t){M(this,e),this.parser=t,this.name=q6.KHR_MATERIALS_VOLUME}return(0,A.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?I5:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];t.thickness=void 0!==i.thicknessFactor?i.thicknessFactor:0,void 0!==i.thicknessTexture&&a.push(n.assignTexture(t,"thicknessMap",i.thicknessTexture)),t.attenuationDistance=i.attenuationDistance||0;var o=i.attenuationColor||[1,1,1];return t.attenuationTint=new qQ(o[0],o[1],o[2]),Promise.all(a)}}]),e}(),Q6=function(){function e(t){M(this,e),this.parser=t,this.name=q6.KHR_MATERIALS_IOR}return(0,A.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?I5:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),e8=function(){function e(t){M(this,e),this.parser=t,this.name=q6.KHR_MATERIALS_SPECULAR}return(0,A.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?I5:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];t.specularIntensity=void 0!==i.specularFactor?i.specularFactor:1,void 0!==i.specularTexture&&a.push(n.assignTexture(t,"specularIntensityMap",i.specularTexture));var o=i.specularColorFactor||[1,1,1];return t.specularTint=new qQ(o[0],o[1],o[2]),void 0!==i.specularColorTexture&&a.push(n.assignTexture(t,"specularTintMap",i.specularColorTexture).then((function(e){e.encoding=3001}))),Promise.all(a)}}]),e}(),t8=function(){function e(t){M(this,e),this.parser=t,this.name=q6.KHR_TEXTURE_BASISU}return(0,A.Z)(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var a=r.extensions[this.name],i=n.images[a.source],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i,o)}}]),e}(),n8=function(){function e(t){M(this,e),this.parser=t,this.name=q6.EXT_TEXTURE_WEBP,this.isSupported=null}return(0,A.Z)(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,a=r.textures[e];if(!a.extensions||!a.extensions[t])return null;var i=a.extensions[t],o=r.images[i.source],s=n.textureLoader;if(o.uri){var l=n.options.manager.getHandler(o.uri);null!==l&&(s=l)}return this.detectSupport().then((function(a){if(a)return n.loadTextureImage(e,o,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),r8=function(){function e(t){M(this,e),this.name=q6.EXT_MESHOPT_COMPRESSION,this.parser=t}return(0,A.Z)(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],a=this.parser.getDependency("buffer",r.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([a,i.ready]).then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,a=r.count,o=r.byteStride,s=new ArrayBuffer(a*o),l=new Uint8Array(e[0],t,n);return i.decodeGltfBuffer(new Uint8Array(s),a,o,l,r.mode,r.filter),s}))}return null}}]),e}(),a8="glTF",i8=(0,A.Z)((function e(t){M(this,e),this.name=q6.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:g6.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==a8)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,a=new DataView(t,12),i=0;i<r;){var o=a.getUint32(i,!0);i+=4;var s=a.getUint32(i,!0);if(i+=4,1313821514===s){var l=new Uint8Array(t,12+i,o);this.content=g6.decodeText(l)}else if(5130562===s){var u=12+i;this.body=t.slice(u,u+o)}i+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),o8=function(){function e(t,n){if(M(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=q6.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return(0,A.Z)(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,a=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,o={},s={},l={};for(var u in i){var c=y8[u]||u.toLowerCase();o[c]=i[u]}for(var d in e.attributes){var h=y8[d]||d.toLowerCase();if(void 0!==i[d]){var f=n.accessors[e.attributes[d]],p=p8[f.componentType];l[h]=p,s[h]=!0===f.normalized}}return t.getDependency("bufferView",a).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],a=s[n];void 0!==a&&(r.normalized=a)}t(e)}),o,l)}))}))}}]),e}(),s8=function(){function e(){M(this,e),this.name=q6.KHR_TEXTURE_TRANSFORM}return(0,A.Z)(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}]),e}(),l8=function(e){N(n,e);var t=F(n);function n(e){var r;M(this,n),(r=t.call(this)).isGLTFSpecularGlossinessMaterial=!0;var a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),o=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),l=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),u={specular:{value:(new qQ).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};return r._extraUniforms=u,r.onBeforeCompile=function(e){for(var t in u)e.uniforms[t]=u[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",o).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",l)},Object.defineProperties((0,L.Z)(r),{specular:{get:function(){return u.specular.value},set:function(e){u.specular.value=e}},specularMap:{get:function(){return u.specularMap.value},set:function(e){u.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return u.glossiness.value},set:function(e){u.glossiness.value=e}},glossinessMap:{get:function(){return u.glossinessMap.value},set:function(e){u.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete r.metalness,delete r.roughness,delete r.metalnessMap,delete r.roughnessMap,r.setValues(e),r}return(0,A.Z)(n,[{key:"copy",value:function(e){return lu(R(n.prototype),"copy",this).call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}]),n}(A5),u8=function(){function e(){M(this,e),this.name=q6.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}return(0,A.Z)(e,[{key:"getMaterialType",value:function(){return l8}},{key:"extendParams",value:function(e,t,n){var r=t.extensions[this.name];e.color=new qQ(1,1,1),e.opacity=1;var a=[];if(Array.isArray(r.diffuseFactor)){var i=r.diffuseFactor;e.color.fromArray(i),e.opacity=i[3]}if(void 0!==r.diffuseTexture&&a.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new qQ(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new qQ(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var o=r.specularGlossinessTexture;a.push(n.assignTexture(e,"glossinessMap",o)),a.push(n.assignTexture(e,"specularMap",o))}return Promise.all(a)}},{key:"createMaterial",value:function(e){var t=new l8(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}]),e}(),c8=(0,A.Z)((function e(){M(this,e),this.name=q6.KHR_MESH_QUANTIZATION})),d8=function(e){N(n,e);var t=F(n);function n(e,r,a,i){return M(this,n),t.call(this,e,r,a,i)}return(0,A.Z)(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r*3+r,i=0;i!==r;i++)t[i]=n[a+i];return t}}]),n}(R5);d8.prototype.beforeStart_=d8.prototype.copySampleValue_,d8.prototype.afterEnd_=d8.prototype.copySampleValue_,d8.prototype.interpolate_=function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,u=r-t,c=(n-t)/u,d=c*c,h=d*c,f=e*l,p=f-l,m=-2*h+3*d,v=h-d,g=1-m,y=v-d+c,b=0;b!==o;b++){var x=i[p+b+o],w=i[p+b+s]*u,k=i[f+b+o],S=i[f+b]*u;a[b]=g*x+y*w+m*k+v*S}return a};var h8=new TJ,f8=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"interpolate_",value:function(e,t,r,a){var i=lu(R(n.prototype),"interpolate_",this).call(this,e,t,r,a);return h8.fromArray(i).normalize().toArray(i),i}}]),n}(d8),p8={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},m8={9728:1003,9729:1006,9984:1004,9985:1007,9986:1005,9987:1008},v8={33071:1001,33648:1002,10497:1e3},g8={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},y8={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},b8={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},x8={CUBICSPLINE:void 0,LINEAR:2301,STEP:2300};function w8(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function k8(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new A5({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),e.DefaultMaterial}function S8(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function T8(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function E8(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var a=t.extras.targetNames;if(e.morphTargetInfluences.length===a.length){e.morphTargetDictionary={};for(var i=0,o=a.length;i<o;i++)e.morphTargetDictionary[a[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function C8(e){var t=e.extensions&&e.extensions[q6.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+_8(t.attributes):e.indices+":"+_8(e.attributes)+":"+e.mode}function _8(e){for(var t="",n=Object.keys(e).sort(),r=0,a=n.length;r<a;r++)t+=n[r]+":"+e[n[r]]+";";return t}function M8(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var A8=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};M(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new G6,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new b6(this.options.manager):this.textureLoader=new e6(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new K5(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return(0,A.Z)(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,a=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var i={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};S8(a,i,r),T8(i,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(i)}))).then((function(){e(i)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,a=t.length;r<a;r++)for(var i=t[r].joints,o=0,s=i.length;o<s;o++)e[i[o]].isBone=!0;for(var l=0,u=e.length;l<u;l++){var c=e[l];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var r=this;if(e.refs[t]<=1)return n;var a=n.clone();return function e(t,n){var a=r.associations.get(t);null!=a&&r.associations.set(n,a);var i,o=G(t.children.entries());try{for(o.s();!(i=o.n()).done;){var s=(0,U.Z)(i.value,2),l=s[0];e(s[1],n.children[l])}}catch(_ke){o.e(_ke)}finally{o.f()}}(n,a),a.name+="_instance_"+e.uses[t]++,a}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var a=e(t[r]);a&&n.push(a)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[q6.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,a){n.load(w8(t.uri,r.path),e,void 0,(function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var a=[];return void 0!==r.bufferView?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),void 0!==r.sparse&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then((function(e){var a,i,o=e[0],s=g8[r.type],l=p8[r.componentType],u=l.BYTES_PER_ELEMENT,c=u*s,d=r.byteOffset||0,h=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;if(h&&h!==c){var p=Math.floor(d/h),m="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count,v=t.cache.get(m);v||(a=new l(o,p*h,r.count*h/u),v=new N3(a,h/u),t.cache.add(m,v)),i=new O3(v,s,d%h/u,f)}else a=null===o?new l(r.count*s):new l(o,d,r.count*s),i=new $Q(a,s,f);if(void 0!==r.sparse){var g=g8.SCALAR,y=p8[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,w=new y(e[1],b,r.sparse.count*g),k=new l(e[2],x,r.sparse.count*s);null!==o&&(i=new $Q(i.array.slice(),i.itemSize,i.normalized));for(var S=0,T=w.length;S<T;S++){var E=w[S];if(i.setX(E,k[S*s]),s>=2&&i.setY(E,k[S*s+1]),s>=3&&i.setZ(E,k[S*s+2]),s>=4&&i.setW(E,k[S*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return i}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,r=t.textures[e],a=t.images[r.source],i=this.textureLoader;if(a.uri){var o=n.manager.getHandler(a.uri);null!==o&&(i=o)}return this.loadTextureImage(e,a,i)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,a=this.json,i=this.options,o=a.textures[e],s=(t.uri||t.bufferView)+":"+o.sampler;if(this.textureCache[s])return this.textureCache[s];var l=self.URL||self.webkitURL,u=t.uri||"",c=!1;if(void 0!==t.bufferView)u=r.getDependency("bufferView",t.bufferView).then((function(e){c=!0;var n=new Blob([e],{type:t.mimeType});return u=l.createObjectURL(n)}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var d=Promise.resolve(u).then((function(e){return new Promise((function(t,r){var a=t;!0===n.isImageBitmapLoader&&(a=function(e){var n=new bJ(e);n.needsUpdate=!0,t(n)}),n.load(w8(e,i.path),a,void 0,r)}))})).then((function(t){!0===c&&l.revokeObjectURL(u),t.flipY=!1,o.name&&(t.name=o.name);var n=(a.samplers||{})[o.sampler]||{};return t.magFilter=m8[n.magFilter]||1006,t.minFilter=m8[n.minFilter]||1008,t.wrapS=v8[n.wrapS]||1e3,t.wrapT=v8[n.wrapT]||1e3,r.associations.set(t,{textures:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",u),null}));return this.textureCache[s]=d,d}},{key:"assignTexture",value:function(e,t,n){var r=this;return this.getDependency("texture",n.index).then((function(a){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[q6.KHR_TEXTURE_TRANSFORM]){var i=void 0!==n.extensions?n.extensions[q6.KHR_TEXTURE_TRANSFORM]:void 0;if(i){var o=r.associations.get(a);a=r.extensions[q6.KHR_TEXTURE_TRANSFORM].extendTexture(a,i),r.associations.set(a,o)}}return e[t]=a,a}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,a=void 0!==t.attributes.color,i=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new k4,BQ.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var l="LineBasicMaterial:"+n.uuid,u=this.cache.get(l);u||(u=new d4,BQ.prototype.copy.call(u,n),u.color.copy(n.color),this.cache.add(l,u)),n=u}if(r||a||i){var c="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(c+="specular-glossiness:"),r&&(c+="derivative-tangents:"),a&&(c+="vertex-colors:"),i&&(c+="flat-shading:");var d=this.cache.get(c);d||(d=n.clone(),a&&(d.vertexColors=!0),i&&(d.flatShading=!0),r&&(d.normalScale&&(d.normalScale.y*=-1),d.clearcoatNormalScale&&(d.clearcoatNormalScale.y*=-1)),this.cache.add(c,d),this.associations.set(d,this.associations.get(n))),n=d}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}},{key:"getMaterialType",value:function(){return A5}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.json,a=this.extensions,i=r.materials[e],o={},s=i.extensions||{},l=[];if(s[q6.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=a[q6.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=u.getMaterialType(),l.push(u.extendParams(o,i,n))}else if(s[q6.KHR_MATERIALS_UNLIT]){var c=a[q6.KHR_MATERIALS_UNLIT];t=c.getMaterialType(),l.push(c.extendParams(o,i,n))}else{var d=i.pbrMetallicRoughness||{};if(o.color=new qQ(1,1,1),o.opacity=1,Array.isArray(d.baseColorFactor)){var h=d.baseColorFactor;o.color.fromArray(h),o.opacity=h[3]}void 0!==d.baseColorTexture&&l.push(n.assignTexture(o,"map",d.baseColorTexture)),o.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,o.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(l.push(n.assignTexture(o,"metalnessMap",d.metallicRoughnessTexture)),l.push(n.assignTexture(o,"roughnessMap",d.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===i.doubleSided&&(o.side=2);var f=i.alphaMode||"OPAQUE";if("BLEND"===f?(o.transparent=!0,o.depthWrite=!1):(o.format=1022,o.transparent=!1,"MASK"===f&&(o.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&t!==XQ&&(l.push(n.assignTexture(o,"normalMap",i.normalTexture)),o.normalScale=new hJ(1,1),void 0!==i.normalTexture.scale)){var p=i.normalTexture.scale;o.normalScale.set(p,p)}return void 0!==i.occlusionTexture&&t!==XQ&&(l.push(n.assignTexture(o,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(o.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&t!==XQ&&(o.emissive=(new qQ).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&t!==XQ&&l.push(n.assignTexture(o,"emissiveMap",i.emissiveTexture)),Promise.all(l).then((function(){var r;return r=t===l8?a[q6.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new t(o),i.name&&(r.name=i.name),r.map&&(r.map.encoding=3001),r.emissiveMap&&(r.emissiveMap.encoding=3001),T8(r,i),n.associations.set(r,{materials:e}),i.extensions&&S8(a,r,i),r}))}},{key:"createUniqueName",value:function(e){for(var t=I6.sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function a(e){return n[q6.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return N8(n,e,t)}))}for(var i=[],o=0,s=e.length;o<s;o++){var l=e[o],u=C8(l),c=r[u];if(c)i.push(c.promise);else{var d;d=l.extensions&&l.extensions[q6.KHR_DRACO_MESH_COMPRESSION]?a(l):N8(new l0,l,t),r[u]={primitive:l,promise:d},i.push(d)}}return Promise.all(i)}},{key:"loadMesh",value:function(e){for(var t=this,n=this.json,r=this.extensions,a=n.meshes[e],i=a.primitives,o=[],s=0,l=i.length;s<l;s++){var u=void 0===i[s].material?k8(this.cache):this.getDependency("material",i[s].material);o.push(u)}return o.push(t.loadGeometries(i)),Promise.all(o).then((function(n){for(var o=n.slice(0,n.length-1),s=n[n.length-1],l=[],u=0,c=s.length;u<c;u++){var d=s[u],h=i[u],f=void 0,p=o[u];if(4===h.mode||5===h.mode||6===h.mode||void 0===h.mode)!0!==(f=!0===a.isSkinnedMesh?new e4(d,p):new C0(d,p)).isSkinnedMesh||f.geometry.attributes.skinWeight.normalized||f.normalizeSkinWeights(),5===h.mode?f.geometry=R8(f.geometry,1):6===h.mode&&(f.geometry=R8(f.geometry,2));else if(1===h.mode)f=new x4(d,p);else if(3===h.mode)f=new g4(d,p);else if(2===h.mode)f=new w4(d,p);else{if(0!==h.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);f=new _4(d,p)}Object.keys(f.geometry.morphAttributes).length>0&&E8(f,a),f.name=t.createUniqueName(a.name||"mesh_"+e),T8(f,a),h.extensions&&S8(r,f,h),t.assignFinalMaterial(f),l.push(f)}for(var m=0,v=l.length;m<v;m++)t.associations.set(l[m],{meshes:e,primitives:m});if(1===l.length)return l[0];var g=new T3;t.associations.set(g,{meshes:e});for(var y=0,b=l.length;y<b;y++)g.add(l[y]);return g}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new D0(dJ.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new r1(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),T8(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=[],r=[],a=[],i=[],o=[],s=0,l=t.channels.length;s<l;s++){var u=t.channels[s],c=t.samplers[u.sampler],d=u.target,h=void 0!==d.node?d.node:d.id,f=void 0!==t.parameters?t.parameters[c.input]:c.input,p=void 0!==t.parameters?t.parameters[c.output]:c.output;n.push(this.getDependency("node",h)),r.push(this.getDependency("accessor",f)),a.push(this.getDependency("accessor",p)),i.push(c),o.push(d)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(a),Promise.all(i),Promise.all(o)]).then((function(n){for(var r=n[0],a=n[1],i=n[2],o=n[3],s=n[4],l=[],u=function(){var e,t=r[c],n=a[c],u=i[c],d=o[c],h=s[c];if(void 0===t)return"continue";switch(t.updateMatrix(),t.matrixAutoUpdate=!0,b8[h.path]){case b8.weights:e=z5;break;case b8.rotation:e=U5;break;default:e=V5}var f=t.name?t.name:t.uuid,p=void 0!==d.interpolation?x8[d.interpolation]:2301,m=[];b8[h.path]===b8.weights?t.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(f);var v=u.array;if(u.normalized){for(var g=M8(v.constructor),y=new Float32Array(v.length),b=0,x=v.length;b<x;b++)y[b]=v[b]*g;v=y}for(var w=0,k=m.length;w<k;w++){var S=new e(m[w]+"."+b8[h.path],n.array,v,p);"CUBICSPLINE"===d.interpolation&&(S.createInterpolant=function(e){return new(this instanceof U5?f8:d8)(this.times,this.values,this.getValueSize()/3,e)},S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(S)}},c=0,d=r.length;c<d;c++)u();var h=t.name?t.name:"animation_"+e;return new Z5(h,void 0,l)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}},{key:"loadNode",value:function(e){var t=this.json,n=this.extensions,r=this,a=t.nodes[e],i=a.name?r.createUniqueName(a.name):"";return function(){var t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==a.camera&&t.push(r.getDependency("camera",a.camera).then((function(e){return r._getNodeRef(r.cameraCache,a.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var o;if((o=!0===a.isBone?new t4:t.length>1?new T3:1===t.length?t[0]:new _Q)!==t[0])for(var s=0,l=t.length;s<l;s++)o.add(t[s]);if(a.name&&(o.userData.name=a.name,o.name=i),T8(o,a),a.extensions&&S8(n,o,a),void 0!==a.matrix){var u=new nQ;u.fromArray(a.matrix),o.applyMatrix4(u)}else void 0!==a.translation&&o.position.fromArray(a.translation),void 0!==a.rotation&&o.quaternion.fromArray(a.rotation),void 0!==a.scale&&o.scale.fromArray(a.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o}))}},{key:"loadScene",value:function(e){var t=this.json,n=this.extensions,r=this.json.scenes[e],a=this,i=new T3;r.name&&(i.name=a.createUniqueName(r.name)),T8(i,r),r.extensions&&S8(n,i,r);for(var o=r.nodes||[],s=[],l=0,u=o.length;l<u;l++)s.push(I8(o[l],i,t,a));return Promise.all(s).then((function(){return a.associations=function(e){var t,n=new Map,r=G(a.associations);try{for(r.s();!(t=r.n()).done;){var i=(0,U.Z)(t.value,2),o=i[0],s=i[1];(o instanceof BQ||o instanceof bJ)&&n.set(o,s)}}catch(_ke){r.e(_ke)}finally{r.f()}return e.traverse((function(e){var t=a.associations.get(e);null!=t&&n.set(e,t)})),n}(i),i}))}}]),e}();function I8(e,t,n,r){var a=n.nodes[e];return r.getDependency("node",e).then((function(e){return void 0===a.skin?e:r.getDependency("skin",a.skin).then((function(e){for(var n=[],a=0,i=(t=e).joints.length;a<i;a++)n.push(r.getDependency("node",t.joints[a]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],a=[],i=0,o=n.length;i<o;i++){var s=n[i];if(s){r.push(s);var l=new nQ;void 0!==t.inverseBindMatrices&&l.fromArray(t.inverseBindMatrices.array,16*i),a.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[i])}e.bind(new i4(r,a),e.matrixWorld)}})),e}));var t})).then((function(e){t.add(e);var i=[];if(a.children)for(var o=a.children,s=0,l=o.length;s<l;s++){var u=o[s];i.push(I8(u,e,n,r))}return Promise.all(i)}))}function N8(e,t,n){var r=t.attributes,a=[];function i(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var o in r){var s=y8[o]||o.toLowerCase();s in e.attributes||a.push(i(r[o],s))}if(void 0!==t.indices&&!e.index){var l=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));a.push(l)}return T8(e,t),function(e,t,n){var r=t.attributes,a=new MJ;if(void 0!==r.POSITION){var i=n.json.accessors[r.POSITION],o=i.min,s=i.max;if(void 0!==o&&void 0!==s){if(a.set(new EJ(o[0],o[1],o[2]),new EJ(s[0],s[1],s[2])),i.normalized){var l=M8(p8[i.componentType]);a.min.multiplyScalar(l),a.max.multiplyScalar(l)}var u=t.targets;if(void 0!==u){for(var c=new EJ,d=new EJ,h=0,f=u.length;h<f;h++){var p=u[h];if(void 0!==p.POSITION){var m=n.json.accessors[p.POSITION],v=m.min,g=m.max;if(void 0!==v&&void 0!==g){if(d.setX(Math.max(Math.abs(v[0]),Math.abs(g[0]))),d.setY(Math.max(Math.abs(v[1]),Math.abs(g[1]))),d.setZ(Math.max(Math.abs(v[2]),Math.abs(g[2]))),m.normalized){var y=M8(p8[m.componentType]);d.multiplyScalar(y)}c.max(d)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(c)}e.boundingBox=a;var b=new qJ;a.getCenter(b.center),b.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=b}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(a).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,a=!1,i=0,o=t.length;i<o;i++){var s=t[i];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(a=!0),r&&a)break}if(!r&&!a)return Promise.resolve(e);for(var l=[],u=[],c=0,d=t.length;c<d;c++){var h=t[c];if(r){var f=void 0!==h.POSITION?n.getDependency("accessor",h.POSITION):e.attributes.position;l.push(f)}if(a){var p=void 0!==h.NORMAL?n.getDependency("accessor",h.NORMAL):e.attributes.normal;u.push(p)}}return Promise.all([Promise.all(l),Promise.all(u)]).then((function(t){var n=t[0],i=t[1];return r&&(e.morphAttributes.position=n),a&&(e.morphAttributes.normal=i),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function R8(e,t){var n=e.getIndex();if(null===n){var r=[],a=e.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var i=0;i<a.count;i++)r.push(i);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(2===t)for(var l=1;l<=o;l++)s.push(n.getX(0)),s.push(n.getX(l)),s.push(n.getX(l+1));else for(var u=0;u<o;u++)u%2==0?(s.push(n.getX(u)),s.push(n.getX(u+1)),s.push(n.getX(u+2))):(s.push(n.getX(u+2)),s.push(n.getX(u+1)),s.push(n.getX(u)));s.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c}var O8,D8,L8=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;M(this,e),this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}return(0,A.Z)(e,[{key:"_initWorker",value:function(e){if(!this.workers[e]){var t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}},{key:"_getIdleWorker",value:function(){for(var e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}},{key:"_onMessage",value:function(e,t){var n=this.workersResolve[e];if(n&&n(t),this.queue.length){var r=this.queue.shift(),a=r.resolve,i=r.msg,o=r.transfer;this.workersResolve[e]=a,this.workers[e].postMessage(i,o)}else this.workerStatus^=1<<e}},{key:"setWorkerCreator",value:function(e){this.workerCreator=e}},{key:"setWorkerLimit",value:function(e){this.pool=e}},{key:"postMessage",value:function(e,t){var n=this;return new Promise((function(r){var a=n._getIdleWorker();-1!==a?(n._initWorker(a),n.workerStatus|=1<<a,n.workersResolve[a]=r,n.workers[a].postMessage(e,t)):n.queue.push({resolve:r,msg:e,transfer:t})}))}},{key:"dispose",value:function(){this.workers.forEach((function(e){return e.terminate()})),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}]),e}(),P8=new WeakMap,F8=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).transcoderPath="",r.transcoderBinary=null,r.transcoderPending=null,r.workerPool=new L8,r.workerSourceURL="",r.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.'),r}return(0,A.Z)(n,[{key:"setTranscoderPath",value:function(e){return this.transcoderPath=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerPool.setWorkerLimit(e),this}},{key:"detectSupport",value:function(e){return this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}},{key:"dispose",value:function(){return URL.revokeObjectURL(this.workerSourceURL),this.workerPool.dispose(),this}},{key:"init",value:function(){var e=this;if(!this.transcoderPending){var t=new K5(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);var r=t.loadAsync("basis_transcoder.js"),a=new K5(this.manager);a.setPath(this.transcoderPath),a.setResponseType("arraybuffer"),a.setWithCredentials(this.withCredentials);var i=a.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([r,i]).then((function(t){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.BasisWorker.toString(),s=["/* constants */","let _EngineFormat = "+JSON.stringify(n.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(n.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(n.BasisFormat),"/* basis_transcoder.js */",a,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([s])),e.transcoderBinary=i,e.workerPool.setWorkerCreator((function(){var t=new Worker(e.workerSourceURL),n=e.transcoderBinary.slice(0);return t.postMessage({type:"init",config:e.workerConfig,transcoderBinary:n},[n]),t}))}))}return this.transcoderPending}},{key:"load",value:function(e,t,n,r){var a=this;if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");var i=new K5(this.manager);i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);var o=new A4;return i.load(e,(function(e){if(P8.has(e))return P8.get(e).promise.then(t).catch(r);a._createTexture([e]).then((function(e){o.copy(e),o.needsUpdate=!0,t&&t(o)})).catch(r)}),n,r),o}},{key:"_createTextureFrom",value:function(e){var t=e.mipmaps,n=e.width,r=e.height,a=e.format,i=e.type,o=e.error,s=e.dfdTransferFn,l=e.dfdFlags;if("error"===i)return Promise.reject(o);var u=new A4(t,n,r,a,1009);return u.minFilter=1===t.length?1006:1008,u.magFilter=1006,u.generateMipmaps=!1,u.needsUpdate=!0,u.encoding=2===s?3001:3e3,u.premultiplyAlpha=!!(1&l),u}},{key:"_createTexture",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.init().then((function(){return t.workerPool.postMessage({type:"transcode",buffers:e,taskConfig:n},e)})).then((function(e){return t._createTextureFrom(e.data)}));return P8.set(e[0],{promise:r}),r}}]),n}(X5);F8.BasisFormat={ETC1S:0,UASTC_4x4:1},F8.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},F8.EngineFormat={RGBAFormat:1023,RGBA_ASTC_4x4_Format:37808,RGBA_BPTC_Format:36492,RGBA_ETC2_EAC_Format:37496,RGBA_PVRTC_4BPPV1_Format:35842,RGBA_S3TC_DXT5_Format:33779,RGB_ETC1_Format:36196,RGB_ETC2_Format:37492,RGB_PVRTC_4BPPV1_Format:35840,RGB_S3TC_DXT1_Format:33776},F8.BasisWorker=function(){var e,t,n,r=_EngineFormat,a=_TranscoderFormat,i=_BasisFormat;self.addEventListener("message",(function(o){var c,d=o.data;switch(d.type){case"init":e=d.config,c=d.transcoderBinary,t=new Promise((function(e){n={wasmBinary:c,onRuntimeInitialized:e},BASIS(n)})).then((function(){n.initializeBasis(),void 0===n.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")}));break;case"transcode":t.then((function(){try{for(var t=function(t){var o=new n.KTX2File(new Uint8Array(t));function c(){o.close(),o.delete()}if(!o.isValid())throw c(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");var d=o.isUASTC()?i.UASTC_4x4:i.ETC1S,h=o.getWidth(),f=o.getHeight(),p=o.getLevels(),m=o.getHasAlpha(),v=o.getDFDTransferFunc(),g=o.getDFDFlags(),y=function(t,n,o,c){for(var d=t===i.ETC1S?s:l,h=0;h<d.length;h++){var f=d[h];if(e[f.if]&&f.basisFormat.includes(t)&&(!f.needsPowerOfTwo||u(n)&&u(o)))return{transcoderFormat:f.transcoderFormat[c?1:0],engineFormat:f.engineFormat[c?1:0]}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),{transcoderFormat:a.RGBA32,engineFormat:r.RGBAFormat}}(d,h,f,m),b=y.transcoderFormat,x=y.engineFormat;if(!h||!f||!p)throw c(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!o.startTranscoding())throw c(),new Error("THREE.KTX2Loader: .startTranscoding failed");for(var w=[],k=0;k<p;k++){var S=o.getImageLevelInfo(k,0,0),T=S.origWidth,E=S.origHeight,C=new Uint8Array(o.getImageTranscodedSizeInBytes(k,0,0,b));if(!o.transcodeImage(C,k,0,0,b,0,-1,-1))throw c(),new Error("THREE.KTX2Loader: .transcodeImage failed.");w.push({data:C,width:T,height:E})}return c(),{width:h,height:f,hasAlpha:m,mipmaps:w,format:x,dfdTransferFn:v,dfdFlags:g}}(d.buffers[0]),o=t.width,c=t.height,h=t.hasAlpha,f=t.mipmaps,p=t.format,m=t.dfdTransferFn,v=t.dfdFlags,g=[],y=0;y<f.length;++y)g.push(f[y].data.buffer);self.postMessage({type:"transcode",id:d.id,width:o,height:c,hasAlpha:h,mipmaps:f,format:p,dfdTransferFn:m,dfdFlags:v},g)}catch(e){console.error(e),self.postMessage({type:"error",id:d.id,error:e.message})}}))}}));var o=[{if:"astcSupported",basisFormat:[i.UASTC_4x4],transcoderFormat:[a.ASTC_4x4,a.ASTC_4x4],engineFormat:[r.RGBA_ASTC_4x4_Format,r.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[a.BC7_M5,a.BC7_M5],engineFormat:[r.RGBA_BPTC_Format,r.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[a.BC1,a.BC3],engineFormat:[r.RGB_S3TC_DXT1_Format,r.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[a.ETC1,a.ETC2],engineFormat:[r.RGB_ETC2_Format,r.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[a.ETC1,a.ETC1],engineFormat:[r.RGB_ETC1_Format,r.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[a.PVRTC1_4_RGB,a.PVRTC1_4_RGBA],engineFormat:[r.RGB_PVRTC_4BPPV1_Format,r.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],s=o.sort((function(e,t){return e.priorityETC1S-t.priorityETC1S})),l=o.sort((function(e,t){return e.priorityUASTC-t.priorityUASTC}));function u(e){return e<=2||0==(e&e-1)&&0!==e}};var j8,z8,B8,U8,W8,V8,Z8=Symbol("retainerCount"),H8=Symbol("recentlyUsed"),G8=Symbol("evict"),q8=Symbol("evictionThreshold"),X8=Symbol("cache"),Y8=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;M(this,t),this[O8]=new Map,this[D8]=[],this[X8]=e,this[q8]=n}return(0,A.Z)(t,[{key:"evictionThreshold",get:function(){return this[q8]},set:function(e){this[q8]=e,this[G8]()}},{key:"cache",get:function(){return this[X8]}},{key:"retainerCount",value:function(e){return this[Z8].get(e)||0}},{key:"reset",value:function(){this[Z8].clear(),this[H8]=[]}},{key:"retain",value:function(e){this[Z8].has(e)||this[Z8].set(e,0),this[Z8].set(e,this[Z8].get(e)+1);var t=this[H8].indexOf(e);-1!==t&&this[H8].splice(t,1),this[H8].unshift(e),this[G8]()}},{key:"release",value:function(e){this[Z8].has(e)&&this[Z8].set(e,Math.max(this[Z8].get(e)-1,0)),this[G8]()}},{key:e,value:function(){if(!(this[H8].length<this[q8]))for(var e=this[H8].length-1;e>=this[q8];--e){var t=this[H8][e];0===this[Z8].get(t)&&(this[X8].delete(t),this[H8].splice(e,1))}}}]),t}((O8=Z8,D8=H8,G8)),K8=function(e,t){var n,r=new Map,a=G(e.mappings);try{for(a.s();!(n=a.n()).done;){var i,o=n.value,s=G(o.variants);try{for(s.s();!(i=s.n()).done;){var l=i.value;r.set(t[l],{material:null,gltfMaterialIndex:o.material})}}catch(_ke){s.e(_ke)}finally{s.f()}}}catch(_ke){a.e(_ke)}finally{a.f()}return r},$8=function(){function e(t){M(this,e),this.parser=t,this.name="KHR_materials_variants"}return(0,A.Z)(e,[{key:"afterRoot",value:function(e){var t=this,n=this.parser,r=n.json;if(void 0===r.extensions||void 0===r.extensions[this.name])return null;var a,i=function(e){var t,n=[],r=new Set,a=G(e);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=i,s=0;r.has(o);)o=i+"."+ ++s;r.add(o),n.push(o)}}catch(_ke){a.e(_ke)}finally{a.f()}return n}((r.extensions[this.name].variants||[]).map((function(e){return e.name}))),o=G(e.scenes);try{for(o.s();!(a=o.n()).done;){a.value.traverse((function(e){var a=n.associations.get(e);if(null!=a&&null!=a.meshes)for(var o=a.meshes,s=r.meshes[o].primitives,l=("isMesh"in e?[e]:e.children),u=0;u<s.length;u++){var c=s[u].extensions;c&&c[t.name]&&(l[u].userData.variantMaterials=K8(c[t.name],i))}}))}}catch(_ke){o.e(_ke)}finally{o.f()}return e.userData.variants=i,Promise.resolve()}}]),e}(),J8=new Map,Q8=new Map,e7=new(function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).decoderPath="",r.decoderConfig={},r.decoderBinary=null,r.decoderPending=null,r.workerLimit=4,r.workerPool=[],r.workerNextTaskID=1,r.workerSourceURL="",r.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},r.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},r}return(0,A.Z)(n,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,t,n,r){var a=this,i=new K5(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(e){var n={attributeIDs:a.defaultAttributeIDs,attributeTypes:a.defaultAttributeTypes,useUniqueIDs:!1};a.decodeGeometry(e,n).then(t).catch(r)}),n,r)}},{key:"decodeDracoFile",value:function(e,t,n,r){var a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,a).then(t)}},{key:"decodeGeometry",value:function(e,t){var n=this;for(var r in t.attributeTypes){var a=t.attributeTypes[r];void 0!==a.BYTES_PER_ELEMENT&&(t.attributeTypes[r]=a.name)}var i,o=JSON.stringify(t);if(V6.has(e)){var s=V6.get(e);if(s.key===o)return s.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var l=this.workerNextTaskID++,u=e.byteLength,c=this._getWorker(l,u).then((function(n){return i=n,new Promise((function(n,r){i._callbacks[l]={resolve:n,reject:r},i.postMessage({type:"decode",id:l,taskConfig:t,buffer:e},[e])}))})).then((function(e){return n._createGeometry(e.geometry)}));return c.catch((function(){return!0})).then((function(){i&&l&&n._releaseTask(i,l)})),V6.set(e,{key:o,promise:c}),c}},{key:"_createGeometry",value:function(e){var t=new l0;e.index&&t.setIndex(new $Q(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n],a=r.name,i=r.array,o=r.itemSize;t.setAttribute(a,new $Q(i,o))}return t}},{key:"_loadLibrary",value:function(e,t){var n=new K5(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((function(t,r){n.load(e,t,void 0,r)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var r=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var a=Z6.toString(),i=["/* draco decoder */",r,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}},{key:"_getWorker",value:function(e,t){var n=this;return this._initDecoder().then((function(){if(n.workerPool.length<n.workerLimit){var r=new Worker(n.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:n.decoderConfig}),r.onmessage=function(e){var t=e.data;switch(t.type){case"decode":r._callbacks[t.id].resolve(t);break;case"error":r._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(r)}else n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var a=n.workerPool[n.workerPool.length-1];return a._taskCosts[e]=t,a._taskLoad+=t,a}))}},{key:"_releaseTask",value:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}]),n}(X5)),t7=new F8,n7=Symbol("loader"),r7=Symbol("evictionPolicy"),a7=Symbol("GLTFInstance"),i7=function(e,t){N(r,e);var n=F(r);function r(e){var t;return M(this,r),(t=n.call(this))[z8]=(new H6).register((function(e){return new $8(e)})),t[a7]=e,t[n7].setDRACOLoader(e7),t[n7].setKTX2Loader(t7),t}return(0,A.Z)(r,[{key:t,get:function(){return this.constructor[r7]}},{key:"preload",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a,i,o,s=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:function(){},this.dispatchEvent({type:"preload",element:n,src:t}),J8.has(t)){e.next=11;break}if(e.t0=null!=V8,!e.t0){e.next=9;break}return e.t1=this[n7],e.next=7,V8;case 7:e.t2=e.sent,e.t1.setMeshoptDecoder.call(e.t1,e.t2);case 9:a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=function(e){var t=e.loaded/e.total;n(Math.max(0,Math.min(1,isFinite(t)?t:1)))};return new Promise((function(n,a){t.load(e,n,r,a)}))}(t,this[n7],(function(e){r(.8*e)})),i=this[a7],o=a.then((function(e){return i.prepare(e)})).then((function(e){return r(.9),new i(e)})),J8.set(t,o);case 11:return e.next=13,J8.get(t);case 13:Q8.set(t,!0),r&&r(1);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a,i,o=this,s=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:function(){},e.next=3,this.preload(t,n,r);case 3:return e.next=5,J8.get(t);case 5:return a=e.sent,e.next=8,a.clone();case 8:return i=e.sent,e.abrupt("return",(this[r7].retain(t),i.dispose=function(){var e=i.dispose,n=!1;return function(){n||(n=!0,e.apply(i),o[r7].release(t))}}(),i));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"setDRACODecoderLocation",value:function(e){B8=e,e7.setDecoderPath(e)}},{key:"getDRACODecoderLocation",value:function(){return B8}},{key:"setKTX2TranscoderLocation",value:function(e){U8=e,t7.setTranscoderPath(e)}},{key:"getKTX2TranscoderLocation",value:function(){return U8}},{key:"setMeshoptDecoderLocation",value:function(e){var t;W8!==e&&(W8=e,V8=(t=e,new Promise((function(e,n){var r=document.createElement("script");document.body.appendChild(r),r.onload=e,r.onerror=n,r.async=!0,r.src=t}))).then((function(){return MeshoptDecoder.ready})).then((function(){return MeshoptDecoder})))}},{key:"getMeshoptDecoderLocation",value:function(){return W8}},{key:"initializeKTX2Loader",value:function(e){t7.detectSupport(e)}},{key:"cache",get:function(){return J8}},{key:"clearCache",value:function(){var e=this;J8.forEach((function(t,n){e.delete(n)})),this[r7].reset()}},{key:"has",value:function(e){return J8.has(e)}},{key:"delete",value:function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.has(t)){e.next=2;break}return e.abrupt("return");case 2:return n=J8.get(t),Q8.delete(t),J8.delete(t),e.next=6,n;case 6:e.sent.dispose();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasFinishedLoading",value:function(e){return!!Q8.get(e)}}]),r}($$,(j8=r7,z8=n7,r7));i7[j8]=new Y8(i7);var o7=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).element=e||document.createElement("div"),r.element.style.position="absolute",r.element.style.userSelect="none",r.element.setAttribute("draggable",!1),r.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))})),r}return(0,A.Z)(n,[{key:"copy",value:function(e,t){return lu(R(n.prototype),"copy",this).call(this,e,t),this.element=e.element.cloneNode(!0),this}}]),n}(_Q);o7.prototype.isCSS2DObject=!0;var s7=new EJ,l7=new nQ,u7=new nQ,c7=new EJ,d7=new EJ,h7=(0,A.Z)((function e(){M(this,e);var t,n,r,a,i=this,o={objects:new WeakMap},s=document.createElement("div");function l(e,t,n){if(e.isCSS2DObject){e.onBeforeRender(i,t,n),s7.setFromMatrixPosition(e.matrixWorld),s7.applyMatrix4(u7);var c=e.element;/apple/i.test(navigator.vendor)?c.style.transform="translate(-50%,-50%) translate("+Math.round(s7.x*r+r)+"px,"+Math.round(-s7.y*a+a)+"px)":c.style.transform="translate(-50%,-50%) translate("+(s7.x*r+r)+"px,"+(-s7.y*a+a)+"px)",c.style.display=e.visible&&s7.z>=-1&&s7.z<=1?"":"none";var d={distanceToCameraSquared:u(n,e)};o.objects.set(e,d),c.parentNode!==s&&s.appendChild(c),e.onAfterRender(i,t,n)}for(var h=0,f=e.children.length;h<f;h++)l(e.children[h],t,n)}function u(e,t){return c7.setFromMatrixPosition(e.matrixWorld),d7.setFromMatrixPosition(t.matrixWorld),c7.distanceToSquared(d7)}s.style.overflow="hidden",this.domElement=s,this.getSize=function(){return{width:t,height:n}},this.render=function(e,t){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),l7.copy(t.matrixWorldInverse),u7.multiplyMatrices(t.projectionMatrix,l7),l(e,e,t),function(e){for(var t=function(e){var t=[];return e.traverse((function(e){e.isCSS2DObject&&t.push(e)})),t}(e).sort((function(e,t){return o.objects.get(e).distanceToCameraSquared-o.objects.get(t).distanceToCameraSquared})),n=t.length,r=0,a=t.length;r<a;r++)t[r].element.style.zIndex=n-r}(e)},this.setSize=function(e,i){r=(t=e)/2,a=(n=i)/2,s.style.width=e+"px",s.style.height=i+"px"}})),f7=function(e){return e&&"null"!==e?m7(e):null},p7=function(){if(!V$){var e=[];throw z$||e.push("WebXR Device API"),B$||e.push("WebXR Hit Test API"),new Error("The following APIs are required for AR, but are missing in this browser: ".concat(e.join(", ")))}},m7=function(e){return new URL(e,window.location.toString()).toString()},v7=function(e,t){var n=null;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];null!=n&&self.clearTimeout(n),n=self.setTimeout((function(){n=null,e.apply(void 0,a)}),t)}},g7=function(e,t,n){return Math.max(t,Math.min(n,e))},y7=function(){var e=function(){var e,t=G(null!=document.head?Array.from(document.head.querySelectorAll("meta")):[]);try{for(t.s();!(e=t.n()).done;){if("viewport"===e.value.name)return!0}}catch(_ke){t.e(_ke)}finally{t.f()}return!1}();return e||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),function(){return e?window.devicePixelRatio:1}}(),b7=function(){var e=new RegExp("[?&]model-viewer-debug-mode(&|$)");return function(){return self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(e)}}(),x7=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))},w7=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;M(this,e),this.velocity=0,this.naturalFrequency=0,this.setDecayTime(t)}return(0,A.Z)(e,[{key:"setDecayTime",value:function(e){this.naturalFrequency=1/Math.max(.001,e)}},{key:"update",value:function(e,t,n,r){var a=2e-4*this.naturalFrequency;if(null==e||0===r)return t;if(e===t&&0===this.velocity)return t;if(n<0)return e;var i=e-t,o=this.velocity+this.naturalFrequency*i,s=i+n*o,l=Math.exp(-this.naturalFrequency*n),u=(o-this.naturalFrequency*s)*l,c=-this.naturalFrequency*(u+o*l);return Math.abs(u)<a*Math.abs(r)&&c*i>=0?(this.velocity=0,t):(this.velocity=u,t+s*l)}}]),e}(),k7=function(e,t){return{type:"number",number:e,unit:t}},S7=function(){var e={};return function(t){var n=t;if(n in e)return e[n];for(var r=[],a=0;t;){if(++a>1e3){t="";break}var i=T7(t),o=i.nodes[0];if(null==o||0===o.terms.length)break;r.push(o),t=i.remainingInput}return e[n]=r}}(),T7=function(){var e=/^(\-\-|[a-z\u0240-\uffff])/i,t=/^([\*\+\/]|[\-]\s)/i,n=/^[\),]/;return function(r){for(var a=[];r.length&&(r=r.trim(),!n.test(r));)if("("===r[0]){var i=M7(r),o=i.nodes;r=i.remainingInput,a.push({type:"function",name:{type:"ident",value:"calc"},arguments:o})}else if(e.test(r)){var s=E7(r),l=s.nodes[0];if("("===(r=s.remainingInput)[0]){var u=M7(r),c=u.nodes,d=u.remainingInput;a.push({type:"function",name:l,arguments:c}),r=d}else a.push(l)}else if(t.test(r))a.push({type:"operator",value:r[0]}),r=r.slice(1);else{var h="#"===r[0]?_7(r):C7(r),f=h.nodes,p=h.remainingInput;if(0===f.length)break;a.push(f[0]),r=p}return{nodes:[{type:"expression",terms:a}],remainingInput:r}}}(),E7=function(){var e=/[^a-z0-9_\-\u0240-\uffff]/i;return function(t){var n=t.match(e);return{nodes:[{type:"ident",value:null==n?t:t.substr(0,n.index)}],remainingInput:null==n?"":t.substr(n.index)}}}(),C7=function(){var e=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,t=/^[a-z%]+/i,n=/^(m|mm|cm|rad|deg|[%])$/;return function(r){var a=r.match(e),i=null==a?"0":a[0],o=(r=null==i?r:r.slice(i.length)).match(t),s=null!=o&&""!==o[0]?o[0]:null,l=null==o?r:r.slice(s.length);return null==s||n.test(s)||(s=null),{nodes:[{type:"number",number:parseFloat(i)||0,unit:s}],remainingInput:l}}}(),_7=function(){var e=/^[a-f0-9]*/i;return function(t){var n=(t=t.slice(1).trim()).match(e);return{nodes:null==n?[]:[{type:"hex",value:n[0]}],remainingInput:null==n?t:t.slice(n[0].length)}}}(),M7=function(e){var t=[];for(e=e.slice(1).trim();e.length;){var n=T7(e);if(t.push(n.nodes[0]),","===(e=n.remainingInput.trim())[0])e=e.slice(1).trim();else if(")"===e[0]){e=e.slice(1);break}}return{nodes:t,remainingInput:e}},A7=Symbol("visitedTypes"),I7=function(){function e(t){M(this,e),this[A7]=t}return(0,A.Z)(e,[{key:"walk",value:function(e,t){for(var n=e.slice();n.length;){var r=n.shift();switch(this[A7].indexOf(r.type)>-1&&t(r),r.type){case"expression":n.unshift.apply(n,(0,_.Z)(r.terms));break;case"function":n.unshift.apply(n,[r.name].concat((0,_.Z)(r.arguments)))}}}}]),e}(),N7=Object.freeze({type:"number",number:0,unit:null}),R7=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.number,r=e.unit;if(isFinite(n)){if("rad"===e.unit||null==e.unit)return e}else n=t,r="rad";return{type:"number",number:("deg"===r&&null!=n?n:0)*Math.PI/180,unit:"rad"}},O7=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.number,a=e.unit;if(isFinite(r)){if("m"===e.unit)return e}else r=n,a="m";switch(a){default:t=1;break;case"cm":t=.01;break;case"mm":t=.001}return{type:"number",number:t*r,unit:"m"}},D7=function(){var e=function(e){return e},t={rad:e,deg:R7,m:e,mm:O7,cm:O7};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N7;isFinite(e.number)||(e.number=n.number,e.unit=n.unit);var r=e.unit;if(null==r)return e;var a=t[r];return null==a?n:a(e)}}(),L7=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,document.createElement("div"))).normal=new EJ(0,1,0),r.initialized=!1,r.referenceCount=1,r.pivot=document.createElement("div"),r.slot=document.createElement("slot"),r.element.classList.add("annotation-wrapper"),r.slot.name=e.name,r.element.appendChild(r.pivot),r.pivot.appendChild(r.slot),r.updatePosition(e.position),r.updateNormal(e.normal),r}return(0,A.Z)(n,[{key:"facingCamera",get:function(){return!this.element.classList.contains("hide")}},{key:"show",value:function(){this.facingCamera&&this.initialized||this.updateVisibility(!0)}},{key:"hide",value:function(){!this.facingCamera&&this.initialized||this.updateVisibility(!1)}},{key:"increment",value:function(){this.referenceCount++}},{key:"decrement",value:function(){return this.referenceCount>0&&--this.referenceCount,0===this.referenceCount}},{key:"updatePosition",value:function(e){if(null!=e){for(var t=S7(e)[0].terms,n=0;n<3;++n)this.position.setComponent(n,D7(t[n]).number);this.updateMatrixWorld()}}},{key:"updateNormal",value:function(e){if(null!=e)for(var t=S7(e)[0].terms,n=0;n<3;++n)this.normal.setComponent(n,D7(t[n]).number)}},{key:"orient",value:function(e){this.pivot.style.transform="rotate(".concat(e,"rad)")}},{key:"updateVisibility",value:function(e){e?this.element.classList.remove("hide"):this.element.classList.add("hide"),this.slot.assignedNodes().forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE){var n=t,r=n.dataset.visibilityAttribute;if(null!=r){var a="data-".concat(r);e?n.setAttribute(a,""):n.removeAttribute(a)}n.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:e}}))}})),this.initialized=!0}}]),n}(o7),P7=function(e,t,n){var r=n,a=new EJ;return e.traverse((function(e){var n,i;e.updateWorldMatrix(!1,!1);var o=e.geometry;if(void 0!==o)if(o.isGeometry){var s=o.vertices;for(n=0,i=s.length;n<i;n++)a.copy(s[n]),a.applyMatrix4(e.matrixWorld),r=t(r,a)}else if(o.isBufferGeometry){var l=o.attributes.position;if(void 0!==l){var u=function(e){if(!e.normalized)return 1;var t=e.array;return t instanceof Int8Array?1/127:t instanceof Uint8Array?1/255:t instanceof Int16Array?1/32767:t instanceof Uint16Array?1/65535:1}(l);for(n=0,i=l.count;n<i;n++)a.fromBufferAttribute(l,n),a.multiplyScalar(u),a.applyMatrix4(e.matrixWorld),r=t(r,a)}}})),r},F7=function(e){N(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this)).shadowMaterial=new M5,i.boundingBox=new MJ,i.size=new EJ,i.shadowScale=1,i.isAnimated=!1,i.side="bottom",i.needsUpdate=!1,i.intensity=0,i.castShadow=!0,i.frustumCulled=!1,i.floor=new C0(new q0,i.shadowMaterial),i.floor.rotateX(-Math.PI/2),i.floor.receiveShadow=!0,i.floor.castShadow=!1,i.floor.frustumCulled=!1,i.add(i.floor),e.target.add((0,L.Z)(i)),i.target=e.target,i.setScene(e,r,a),i}return(0,A.Z)(n,[{key:"setScene",value:function(e,t,n){if(this.side=n,this.isAnimated=e.animationNames.length>0,this.boundingBox.copy(e.boundingBox),this.size.copy(e.size),"back"===this.side){var r,a,i,o=this.boundingBox,s=o.min,l=o.max;r=[s.z,s.y],s.y=r[0],s.z=r[1],a=[l.z,l.y],l.y=a[0],l.z=a[1],i=[this.size.z,this.size.y],this.size.y=i[0],this.size.z=i[1],this.rotation.x=Math.PI/2,this.rotation.y=Math.PI}else this.rotation.x=0,this.rotation.y=0;var u=this.boundingBox,c=this.size;if(this.isAnimated){var d=2*Math.max(c.x,c.y,c.z);c.y=d,u.expandByVector(c.subScalar(d).multiplyScalar(-.5)),u.max.y=u.min.y+d,c.set(d,d,d)}u.getCenter(this.floor.position);var h=u.max.y+.002*c.y;"bottom"===n?(this.position.y=h,this.position.z=0):(this.position.y=0,this.position.z=h),this.setSoftness(t)}},{key:"setSoftness",value:function(e){var t=Math.pow(2,9-3*e);this.setMapSize(t)}},{key:"setMapSize",value:function(e){var t=this.shadow,n=t.camera,r=t.mapSize,a=t.map,i=this.size,o=this.boundingBox;null!=a&&(a.dispose(),this.shadow.map=null),this.isAnimated&&(e*=2);var s=Math.floor(i.x>i.z?e:e*i.x/i.z),l=Math.floor(i.x>i.z?e*i.z/i.x:e);r.set(s,l);var u=2.5*i.x/s,c=2.5*i.z/l;n.left=-o.max.x-u,n.right=-o.min.x+u,n.bottom=o.min.z-c,n.top=o.max.z+c,this.setScaleAndOffset(this.shadowScale,0),this.floor.scale.set(i.x+2*u,i.z+2*c,1),this.needsUpdate=!0,this.shadow.needsUpdate=!0}},{key:"setIntensity",value:function(e){this.shadowMaterial.opacity=e,e>0?(this.visible=!0,this.floor.visible=!0):(this.visible=!1,this.floor.visible=!1)}},{key:"getIntensity",value:function(){return this.shadowMaterial.opacity}},{key:"setRotation",value:function(e){if("bottom"!==this.side)return this.shadow.camera.up.set(0,1,0),void this.shadow.updateMatrices(this);this.shadow.camera.up.set(Math.sin(e),0,Math.cos(e)),this.shadow.updateMatrices(this)}},{key:"setScaleAndOffset",value:function(e,t){var n=this.size.y,r=this.shadow.camera;this.shadowScale=e,r.near=0,r.far=n-t/e,r.updateProjectionMatrix(),r.scale.setScalar(e);var a=.002*n;this.floor.position.y=2*a-r.far}}]),n}(p6),j7=22.5*Math.PI/180,z7=Math.sin(j7),B7=Math.tan(j7),U7=new EJ,W7=new EJ,V7=new EJ,Z7=new(function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;M(this,e),this.ray=new tQ(t,n),this.near=r,this.far=a,this.camera=null,this.layers=new fQ,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return(0,A.Z)(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return D6(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(O6),t}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,a=e.length;r<a;r++)D6(e[r],this,n,t);return n.sort(O6),n}}]),e}()),H7=new EJ,G7=new hJ,q7=function(e){N(n,e);var t=F(n);function n(e){var r,a=e.canvas,i=e.element,o=e.width,s=e.height;M(this,n),(r=t.call(this)).context=null,r.annotationRenderer=new h7,r.schemaElement=document.createElement("script"),r.width=1,r.height=1,r.aspect=1,r.renderCount=0,r.externalRenderer=null,r.camera=new D0(45,1,.1,100),r.xrCamera=null,r.url=null,r.target=new _Q,r.modelContainer=new _Q,r.animationNames=[],r.boundingBox=new MJ,r.size=new EJ,r.idealCameraDistance=0,r.fieldOfViewAspect=0,r.framedFieldOfView=45,r.shadow=null,r.shadowIntensity=0,r.shadowSoftness=1,r.exposure=1,r.canScale=!0,r.tightBounds=!1,r.isDirty=!1,r.goalTarget=new EJ,r.targetDamperX=new w7,r.targetDamperY=new w7,r.targetDamperZ=new w7,r._currentGLTF=null,r.cancelPendingSourceChange=null,r.animationsByName=new Map,r.currentAnimationAction=null,r.name="ModelScene",r.element=i,r.canvas=a,r.camera=new D0(45,1,.1,100),r.camera.name="MainCamera",r.add(r.target),r.setSize(o,s),r.target.name="Target",r.modelContainer.name="ModelContainer",r.target.add(r.modelContainer),r.mixer=new R6(r.modelContainer);var l=r.annotationRenderer.domElement,u=l.style;return u.display="none",u.pointerEvents="none",u.position="absolute",u.top="0",r.element.shadowRoot.querySelector(".default").appendChild(l),r.schemaElement.setAttribute("type","application/ld+json"),r}return(0,A.Z)(n,[{key:"createContext",value:function(){this.context=this.canvas.getContext("2d")}},{key:"getCamera",value:function(){return null!=this.xrCamera?this.xrCamera:this.camera}},{key:"queueRender",value:function(){this.isDirty=!0}},{key:"shouldRender",value:function(){return this.isDirty}},{key:"hasRendered",value:function(){this.isDirty=!1}},{key:"setObject",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.reset(),this.modelContainer.add(t),e.next=4,this.setupScene();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setSource",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a,i,o,s,l,u,c,d=this,h=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:function(){},t&&t!==this.url){e.next=3;break}return e.abrupt("return",void n(1));case 3:if(this.reset(),this.url=t,null==this.externalRenderer){e.next=8;break}return e.next=6,this.externalRenderer.load(n);case 6:return r=e.sent,e.abrupt("return",(this.idealCameraDistance=r.framedRadius/z7,this.fieldOfViewAspect=r.fieldOfViewAspect,this.frameModel(),void this.dispatchEvent({type:"model-load",url:this.url})));case 8:return null!=this.cancelPendingSourceChange&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null),e.prev=9,e.next=12,new Promise(function(){var e=Vn(Un().mark((function e(r,a){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.cancelPendingSourceChange=function(){return a()},e.prev=1,e.t0=r,e.next=5,d.element[Lee].loader.load(t,d.element,n);case 5:e.t1=e.sent,(0,e.t0)(e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(1),a(e.t2);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}());case 12:a=e.sent,e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(9),null!=e.t0){e.next=19;break}return e.abrupt("return");case 19:throw e.t0;case 20:this.reset(),this.url=t,this._currentGLTF=a,null!=a&&this.modelContainer.add(a.scene),i=a.animations,o=new Map,s=[],l=G(i);try{for(l.s();!(u=l.n()).done;)c=u.value,o.set(c.name,c),s.push(c.name)}catch(_ke){l.e(_ke)}finally{l.f()}return this.animations=i,this.animationsByName=o,this.animationNames=s,e.next=29,this.setupScene();case 29:case"end":return e.stop()}}),e,this,[[9,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setupScene",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.updateBoundingBox(),t=null,e.t0=!0===this.tightBounds,!e.t0){e.next=7;break}return e.next=6,this.element.requestUpdate("cameraTarget");case 6:t=this.getTarget();case 7:this.updateFraming(t),this.frameModel(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity),this.dispatchEvent({type:"model-load",url:this.url});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reset",value:function(){this.url=null,this.queueRender(),null!=this.shadow&&this.shadow.setIntensity(0);var e=this._currentGLTF;if(null!=e){var t,n=G(this.modelContainer.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.modelContainer.remove(r)}}catch(_ke){n.e(_ke)}finally{n.f()}e.dispose(),this._currentGLTF=null}null!=this.currentAnimationAction&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}},{key:"currentGLTF",get:function(){return this._currentGLTF}},{key:"setSize",value:function(e,t){if(this.width!==e||this.height!==t){if(this.width=Math.max(e,1),this.height=Math.max(t,1),this.annotationRenderer.setSize(e,t),this.aspect=this.width/this.height,this.frameModel(),null!=this.externalRenderer){var n=y7();this.externalRenderer.resize(e*n,t*n)}this.queueRender()}}},{key:"updateBoundingBox",value:function(){if(this.target.remove(this.modelContainer),!0===this.tightBounds){this.boundingBox=P7(this.modelContainer,(function(e,t){return e.expandByPoint(t)}),new MJ)}else this.boundingBox.setFromObject(this.modelContainer);this.boundingBox.getSize(this.size),this.target.add(this.modelContainer)}},{key:"updateFraming",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.target.remove(this.modelContainer),null==t&&(t=this.boundingBox.getCenter(new EJ));var n=Math.sqrt(P7(this.modelContainer,(function(e,n){return Math.max(e,t.distanceToSquared(n))}),0));this.idealCameraDistance=n/z7,this.fieldOfViewAspect=P7(this.modelContainer,(function(n,r){r.sub(t);var a=Math.sqrt(r.x*r.x+r.z*r.z);return Math.max(n,a/(e.idealCameraDistance-Math.abs(r.y)))}),0)/B7,this.target.add(this.modelContainer)}},{key:"frameModel",value:function(){var e=B7*Math.max(1,this.fieldOfViewAspect/this.aspect);this.framedFieldOfView=2*Math.atan(e)*180/Math.PI}},{key:"getNDC",value:function(e,t){if(null!=this.xrCamera)G7.set(e/window.screen.width,t/window.screen.height);else{var n=this.element.getBoundingClientRect();G7.set((e-n.x)/this.width,(t-n.y)/this.height)}return G7.multiplyScalar(2).subScalar(1),G7.y*=-1,G7}},{key:"getSize",value:function(){return{width:this.width,height:this.height}}},{key:"setTarget",value:function(e,t,n){this.goalTarget.set(-e,-t,-n)}},{key:"setTargetDamperDecayTime",value:function(e){this.targetDamperX.setDecayTime(e),this.targetDamperY.setDecayTime(e),this.targetDamperZ.setDecayTime(e)}},{key:"getTarget",value:function(){return H7.copy(this.goalTarget).multiplyScalar(-1)}},{key:"jumpToGoal",value:function(){this.updateTarget(1e4)}},{key:"updateTarget",value:function(e){var t=this.goalTarget,n=this.target.position;if(!t.equals(n)){var r=this.idealCameraDistance,a=n.x,i=n.y,o=n.z;a=this.targetDamperX.update(a,t.x,e,r),i=this.targetDamperY.update(i,t.y,e,r),o=this.targetDamperZ.update(o,t.z,e,r),this.target.position.set(a,i,o),this.target.updateMatrixWorld(),this.setShadowRotation(this.yaw),this.queueRender()}}},{key:"pointTowards",value:function(e,t){var n=this.position,r=n.x,a=n.z;this.yaw=Math.atan2(e-r,t-a)}},{key:"yaw",get:function(){return this.rotation.y},set:function(e){this.rotation.y=e,this.updateMatrixWorld(!0),this.setShadowRotation(e),this.queueRender()}},{key:"animationTime",get:function(){return null!=this.currentAnimationAction?this.currentAnimationAction.time:0},set:function(e){this.mixer.setTime(e)}},{key:"duration",get:function(){return null!=this.currentAnimationAction&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}},{key:"hasActiveAnimation",get:function(){return null!=this.currentAnimationAction}},{key:"playAnimation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null!=this._currentGLTF){var n=this.animations;if(null!=n&&0!==n.length){var r=null;null!=e&&(r=this.animationsByName.get(e)),null==r&&(r=n[0]);try{var a=this.currentAnimationAction,i=this.mixer.clipAction(r,this);this.currentAnimationAction=i,this.element.paused?this.mixer.stopAllAction():null!=a&&i!==a&&i.crossFadeFrom(a,t,!1),i.enabled=!0,i.play()}catch(e){console.error(e)}}else console.warn("Cannot play animation (model does not have any animations)")}}},{key:"stopAnimation",value:function(){this.currentAnimationAction=null,this.mixer.stopAllAction()}},{key:"updateAnimation",value:function(e){this.mixer.update(e)}},{key:"updateShadow",value:function(){var e=this.shadow;if(null!=e){var t="wall"===this.element.arPlacement?"back":"bottom";e.setScene(this,this.shadowSoftness,t),e.setRotation(this.yaw)}}},{key:"setShadowIntensity",value:function(e){if(this.shadowIntensity=e,null!=this._currentGLTF&&!(e<=0&&null==this.shadow)){if(null==this.shadow){var t="wall"===this.element.arPlacement?"back":"bottom";this.shadow=new F7(this,this.shadowSoftness,t),this.shadow.setRotation(this.yaw)}this.shadow.setIntensity(e)}}},{key:"setShadowSoftness",value:function(e){this.shadowSoftness=e;var t=this.shadow;null!=t&&t.setSoftness(e)}},{key:"setShadowRotation",value:function(e){var t=this.shadow;null!=t&&t.setRotation(e)}},{key:"isShadowDirty",value:function(){var e=this.shadow;if(null==e)return!1;var t=e.needsUpdate;return e.needsUpdate=!1,t}},{key:"setShadowScaleAndOffset",value:function(e,t){var n=this.shadow;null!=n&&n.setScaleAndOffset(e,t)}},{key:"raycaster",get:function(){return Z7}},{key:"positionAndNormalFromPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.raycaster.setFromCamera(e,this.getCamera());var n=this.raycaster.intersectObject(t,!0);if(0===n.length)return null;var r=n[0];return null==r.face?null:(r.face.normal.applyNormalMatrix((new pJ).getNormalMatrix(r.object.matrixWorld)),{position:r.point,normal:r.face.normal})}},{key:"addHotspot",value:function(e){this.target.add(e),this.annotationRenderer.domElement.appendChild(e.element)}},{key:"removeHotspot",value:function(e){this.target.remove(e)}},{key:"forHotspots",value:function(e){for(var t=this.target.children,n=0,r=t.length;n<r;n++){var a=t[n];a instanceof L7&&e(a)}}},{key:"updateHotspots",value:function(e){var t=this;this.forHotspots((function(n){U7.copy(e),W7.setFromMatrixPosition(n.matrixWorld),U7.sub(W7),V7.copy(n.normal).transformDirection(t.target.matrixWorld),U7.dot(V7)<0?n.hide():n.show()}))}},{key:"orientHotspots",value:function(e){this.forHotspots((function(t){t.orient(e)}))}},{key:"setHotspotsVisibility",value:function(e){this.forHotspots((function(t){t.visible=e}))}},{key:"updateSchema",value:function(e){var t,n=this.schemaElement,r=this.element,a=r.alt,i=r.poster,o=r.iosSrc;if(null!=e){var s=[{"@type":"MediaObject",contentUrl:e,encodingFormat:"gltf"===(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())?"model/gltf+json":"model/gltf-binary"}];o&&s.push({"@type":"MediaObject",contentUrl:o,encodingFormat:"model/vnd.usdz+zip"});var l={"@context":"http://schema.org/","@type":"3DModel",image:null!=i?i:void 0,name:null!=a?a:void 0,encoding:s};n.textContent=JSON.stringify(l),document.head.appendChild(n)}else null!=n.parentElement&&n.parentElement.removeChild(n)}}]),n}(I3),X7=function(){var e=new a1({uniforms:{roughnessMap:{value:null},normalMap:{value:null},texelSize:{value:new hJ(1,1)}},vertexShader:"\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec2 uv;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvUv = uv;\n\n\t\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t\t}\n\t\t",fragmentShader:"\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tuniform sampler2D roughnessMap;\n\t\t\tuniform sampler2D normalMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\n\t\t\tvec4 envMapTexelToLinear( vec4 a ) { return a; }\n\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tfloat roughnessToVariance( float roughness ) {\n\n\t\t\t\tfloat variance = 0.0;\n\n\t\t\t\tif ( roughness >= r1 ) {\n\n\t\t\t\t\tvariance = ( r0 - roughness ) * ( v1 - v0 ) / ( r0 - r1 ) + v0;\n\n\t\t\t\t} else if ( roughness >= r4 ) {\n\n\t\t\t\t\tvariance = ( r1 - roughness ) * ( v4 - v1 ) / ( r1 - r4 ) + v1;\n\n\t\t\t\t} else if ( roughness >= r5 ) {\n\n\t\t\t\t\tvariance = ( r4 - roughness ) * ( v5 - v4 ) / ( r4 - r5 ) + v4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfloat roughness2 = roughness * roughness;\n\n\t\t\t\t\tvariance = 1.79 * roughness2 * roughness2;\n\n\t\t\t\t}\n\n\t\t\t\treturn variance;\n\n\t\t\t}\n\n\t\t\tfloat varianceToRoughness( float variance ) {\n\n\t\t\t\tfloat roughness = 0.0;\n\n\t\t\t\tif ( variance >= v1 ) {\n\n\t\t\t\t\troughness = ( v0 - variance ) * ( r1 - r0 ) / ( v0 - v1 ) + r0;\n\n\t\t\t\t} else if ( variance >= v4 ) {\n\n\t\t\t\t\troughness = ( v1 - variance ) * ( r4 - r1 ) / ( v1 - v4 ) + r1;\n\n\t\t\t\t} else if ( variance >= v5 ) {\n\n\t\t\t\t\troughness = ( v4 - variance ) * ( r5 - r4 ) / ( v4 - v5 ) + r4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\troughness = pow( 0.559 * variance, 0.25 ); // 0.559 = 1.0 / 1.79\n\n\t\t\t\t}\n\n\t\t\t\treturn roughness;\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = texture2D( roughnessMap, vUv, - 1.0 );\n\n\t\t\t\tif ( texelSize.x == 0.0 ) return;\n\n\t\t\t\tfloat roughness = gl_FragColor.g;\n\n\t\t\t\tfloat variance = roughnessToVariance( roughness );\n\n\t\t\t\tvec3 avgNormal;\n\n\t\t\t\tfor ( float x = - 1.0; x < 2.0; x += 2.0 ) {\n\n\t\t\t\t\tfor ( float y = - 1.0; y < 2.0; y += 2.0 ) {\n\n\t\t\t\t\t\tvec2 uv = vUv + vec2( x, y ) * 0.25 * texelSize;\n\n\t\t\t\t\t\tavgNormal += normalize( texture2D( normalMap, uv, - 1.0 ).xyz - 0.5 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvariance += 1.0 - 0.25 * length( avgNormal );\n\n\t\t\t\tgl_FragColor.g = varianceToRoughness( variance );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return e.type="RoughnessMipmapper",e}(),Y7=new C0(new q0(2,2),X7),K7=new r1(0,1,0,1,0,1),$7=null,J7=null,Q7=function(){function e(t){M(this,e),(J7=t).compile(Y7,K7)}return(0,A.Z)(e,[{key:"generateMipmaps",value:function(e){if("roughnessMap"in e!=0){var t=e.roughnessMap,n=e.normalMap;if(null!==t&&null!==n&&t.generateMipmaps&&!e.userData.roughnessUpdated){e.userData.roughnessUpdated=!0;var r=Math.max(t.image.width,n.image.width),a=Math.max(t.image.height,n.image.height);if(dJ.isPowerOfTwo(r)&&dJ.isPowerOfTwo(a)){var i=J7.getRenderTarget(),o=J7.autoClear;if(J7.autoClear=!1,null!==$7&&$7.width===r&&$7.height===a||(null!==$7&&$7.dispose(),($7=new kJ(r,a,{depthBuffer:!1})).scissorTest=!0),r!==t.image.width||a!==t.image.height){var s={wrapS:t.wrapS,wrapT:t.wrapT,magFilter:t.magFilter,minFilter:t.minFilter,depthBuffer:!1},l=new kJ(r,a,s);l.texture.generateMipmaps=!0,J7.setRenderTarget(l),e.roughnessMap=l.texture,e.metalnessMap==t&&(e.metalnessMap=e.roughnessMap),e.aoMap==t&&(e.aoMap=e.roughnessMap),e.roughnessMap.offset.copy(t.offset),e.roughnessMap.repeat.copy(t.repeat),e.roughnessMap.center.copy(t.center),e.roughnessMap.rotation=t.rotation,e.roughnessMap.matrixAutoUpdate=t.matrixAutoUpdate,e.roughnessMap.matrix.copy(t.matrix)}X7.uniforms.roughnessMap.value=t,X7.uniforms.normalMap.value=n;for(var u=new hJ(0,0),c=X7.uniforms.texelSize.value,d=0;r>=1&&a>=1;++d,r/=2,a/=2)c.set(1/r,1/a),0==d&&c.set(0,0),$7.viewport.set(u.x,u.y,r,a),$7.scissor.set(u.x,u.y,r,a),J7.setRenderTarget($7),J7.render(Y7,K7),J7.copyFramebufferToTexture(u,e.roughnessMap,d),X7.uniforms.roughnessMap.value=e.roughnessMap;t!==e.roughnessMap&&t.dispose(),J7.setRenderTarget(i),J7.autoClear=o}}}}},{key:"dispose",value:function(){X7.dispose(),Y7.geometry.dispose(),null!=$7&&$7.dispose()}}]),e}(),e9=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},t9=Symbol("currentEnvironmentMap"),n9=Symbol("applyEnvironmentMap"),r9=Symbol("updateEnvironment"),a9=Symbol("cancelEnvironmentUpdate"),i9=Symbol("onPreload"),o9=function(){function e(t,n,r,a,i){var o=this;M(this,e),this.xrLight=t,this.renderer=n,this.lightProbe=r,this.xrWebGLBinding=null,this.estimationStartCallback=i,this.frameCallback=this.onXRFrame.bind(this);var s=n.xr.getSession();if(a&&"XRWebGLBinding"in window){var l=new F0(16);t.environment=l.texture;var u=n.getContext();switch(s.preferredReflectionFormat){case"srgba8":u.getExtension("EXT_sRGB");break;case"rgba16f":u.getExtension("OES_texture_half_float")}this.xrWebGLBinding=new XRWebGLBinding(s,u),this.lightProbe.addEventListener("reflectionchange",(function(){o.updateReflection()}))}s.requestAnimationFrame(this.frameCallback)}return(0,A.Z)(e,[{key:"updateReflection",value:function(){var e=this.renderer.properties.get(this.xrLight.environment);if(e){var t=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);t&&(e.__webglTexture=t)}}},{key:"onXRFrame",value:function(e,t){if(this.xrLight){t.session.requestAnimationFrame(this.frameCallback);var n=t.getLightEstimate(this.lightProbe);if(n){this.xrLight.lightProbe.sh.fromArray(n.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;var r=Math.max(1,Math.max(n.primaryLightIntensity.x,Math.max(n.primaryLightIntensity.y,n.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(n.primaryLightIntensity.x/r,n.primaryLightIntensity.y/r,n.primaryLightIntensity.z/r),this.xrLight.directionalLight.intensity=r,this.xrLight.directionalLight.position.copy(n.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}}},{key:"dispose",value:function(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}]),e}(),s9=function(e){N(n,e);var t=F(n);function n(e){var r,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];M(this,n),(r=t.call(this)).lightProbe=new v6,r.lightProbe.intensity=0,r.add(r.lightProbe),r.directionalLight=new p6,r.directionalLight.intensity=0,r.add(r.directionalLight),r.environment=null;var i=null,o=!1;return e.xr.addEventListener("sessionstart",(function(){var t=e.xr.getSession();"requestLightProbe"in t&&t.requestLightProbe({reflectionFormat:t.preferredReflectionFormat}).then((function(t){i=new o9((0,L.Z)(r),e,t,a,(function(){o=!0,r.dispatchEvent({type:"estimationstart"})}))}))})),e.xr.addEventListener("sessionend",(function(){i&&(i.dispose(),i=null),o&&r.dispatchEvent({type:"estimationend"})})),r.dispose=function(){i&&(i.dispose(),i=null),r.remove(r.lightProbe),r.lightProbe=null,r.remove(r.directionalLight),r.directionalLight=null,r.environment=null},r}return(0,A.Z)(n)}(T3),l9=Math.PI/24,u9=new hJ,c9=function(e,t,n){for(var r=t>0?n>0?0:-Math.PI/2:n>0?Math.PI/2:Math.PI,a=0;a<=12;++a)e.push(t+.17*Math.cos(r),n+.17*Math.sin(r),0,t+.2*Math.cos(r),n+.2*Math.sin(r),0),r+=l9},d9=function(e){N(n,e);var t=F(n);function n(e,r){var a;M(this,n);var i=new l0,o=[],s=[],l=e.size,u=e.boundingBox,c=l.x/2,d=("back"===r?l.y:l.z)/2;c9(s,c,d),c9(s,-c,d),c9(s,-c,-d),c9(s,c,-d);for(var h=s.length/3,f=0;f<h-2;f+=2)o.push(f,f+1,f+3,f,f+3,f+2);var p=h-2;o.push(p,p+1,1,p,1,0),i.setAttribute("position",new e0(s,3)),i.setIndex(o),(a=t.call(this,i)).side=r;var m=a.material;switch(m.side=2,m.transparent=!0,m.opacity=0,a.goalOpacity=0,a.opacityDamper=new w7,a.hitPlane=new C0(new q0(2*(c+.2),2*(d+.2))),a.hitPlane.visible=!1,a.add(a.hitPlane),u.getCenter(a.position),r){case"bottom":a.rotateX(-Math.PI/2),a.shadowHeight=u.min.y,a.position.y=a.shadowHeight;break;case"back":a.shadowHeight=u.min.z,a.position.z=a.shadowHeight}return e.target.add((0,L.Z)(a)),a}return(0,A.Z)(n,[{key:"getHit",value:function(e,t,n){u9.set(t,-n),this.hitPlane.visible=!0;var r=e.positionAndNormalFromPoint(u9,this.hitPlane);return this.hitPlane.visible=!1,null==r?null:r.position}},{key:"getExpandedHit",value:function(e,t,n){this.hitPlane.scale.set(1e3,1e3,1e3);var r=this.getHit(e,t,n);return this.hitPlane.scale.set(1,1,1),r}},{key:"offsetHeight",get:function(){return"back"===this.side?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight},set:function(e){"back"===this.side?this.position.z=this.shadowHeight+e:this.position.y=this.shadowHeight+e}},{key:"show",set:function(e){this.goalOpacity=e?.75:0}},{key:"updateOpacity",value:function(e){var t=this.material;t.opacity=this.opacityDamper.update(t.opacity,this.goalOpacity,e,1),this.visible=t.opacity>0}},{key:"dispose",value:function(){var e,t=this.hitPlane,n=t.geometry,r=t.material;n.dispose(),r.dispose(),this.geometry.dispose(),this.material.dispose(),null===(e=this.parent)||void 0===e||e.remove(this)}}]),n}(C0),h9="not-presenting",f9="session-started",p9="tracking",m9=new EJ,v9=new nQ,g9=new EJ,y9=new D0(45,1,.1,100),b9=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).renderer=e,r.currentSession=null,r.placeOnWall=!1,r.placementBox=null,r.lastTick=null,r.turntableRotation=null,r.oldShadowIntensity=null,r.oldBackground=null,r.oldEnvironment=null,r.frame=null,r.initialHitSource=null,r.transientHitTestSource=null,r.inputSource=null,r._presentedScene=null,r.resolveCleanup=null,r.exitWebXRButtonContainer=null,r.overlay=null,r.xrLight=null,r.tracking=!0,r.frames=0,r.initialized=!1,r.oldTarget=new EJ,r.oldFramedFieldOfView=45,r.placementComplete=!1,r.isTranslating=!1,r.isRotating=!1,r.isTwoFingering=!1,r.lastDragPosition=new EJ,r.firstRatio=0,r.lastAngle=0,r.goalPosition=new EJ,r.goalYaw=0,r.goalScale=1,r.xDamper=new w7,r.yDamper=new w7,r.zDamper=new w7,r.yawDamper=new w7,r.scaleDamper=new w7,r.onExitWebXRButtonContainerClick=function(){return r.stopPresenting()},r.onUpdateScene=function(){null!=r.placementBox&&r.isPresenting&&(r.placementBox.dispose(),r.placementBox=new d9(r.presentedScene,r.placeOnWall?"back":"bottom"))},r.onSelectStart=function(e){var t=r.transientHitTestSource;if(null!=t){var n=r.frame.getHitTestResultsForTransientInput(t),a=r.presentedScene,i=r.placementBox;if(1===n.length){r.inputSource=e.inputSource;var o=r.inputSource.gamepad.axes,s=i.getHit(r.presentedScene,o[0],o[1]);i.show=!0,null!=s?(r.isTranslating=!0,r.lastDragPosition.copy(s)):!1===r.placeOnWall&&(r.isRotating=!0,r.lastAngle=1.5*o[0])}else if(2===n.length){i.show=!0,r.isTwoFingering=!0;var l=r.fingerPolar(n).separation;r.firstRatio=l/a.scale.x}}},r.onSelectEnd=function(){r.isTranslating=!1,r.isRotating=!1,r.isTwoFingering=!1,r.inputSource=null,r.goalPosition.y+=r.placementBox.offsetHeight*r.presentedScene.scale.x,r.placementBox.show=!1},r.threeRenderer=e.threeRenderer,r.threeRenderer.xr.enabled=!0,r}return(0,A.Z)(n,[{key:"resolveARSession",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p7(),e.next=3,navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:{root:this.overlay}});case 3:return t=e.sent,this.threeRenderer.xr.setReferenceSpaceType("local"),e.next=7,this.threeRenderer.xr.setSession(t);case 7:return this.threeRenderer.xr.cameraAutoUpdate=!1,e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"presentedScene",get:function(){return this._presentedScene}},{key:"supportsPresentation",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p7(),e.next=4,navigator.xr.isSessionSupported("immersive-ar");case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(console.warn("Request to present in WebXR denied:"),console.warn(e.t0),console.warn("Falling back to next ar-mode"),!1));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"present",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a,i,o,s,l,u=this,c=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],this.isPresenting&&console.warn("Cannot present while a model is already presenting"),r=new Promise((function(e,t){requestAnimationFrame((function(){return e()}))})),t.setHotspotsVisibility(!1),t.queueRender(),e.next=7,r;case 7:return this._presentedScene=t,this.overlay=t.element.shadowRoot.querySelector("div.default"),!0===n&&(this.xrLight=new s9(this.threeRenderer),this.xrLight.addEventListener("estimationstart",(function(){if(u.isPresenting&&null!=u.xrLight){var e=u.presentedScene;e.add(u.xrLight),u.oldEnvironment=e.environment,e.environment=u.xrLight.environment}}))),e.next=12,this.resolveARSession();case 12:return(a=e.sent).addEventListener("end",(function(){u.postSessionCleanup()}),{once:!0}),(i=t.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button")).classList.add("enabled"),i.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=i,e.next=18,a.requestReferenceSpace("viewer");case 18:o=e.sent,this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=t.yaw,this.goalYaw=t.yaw,this.goalScale=1,this.oldBackground=t.background,t.background=null,this.oldShadowIntensity=t.shadowIntensity,t.setShadowIntensity(0),this.oldTarget.copy(t.getTarget()),this.oldFramedFieldOfView=t.framedFieldOfView,t.addEventListener("model-load",this.onUpdateScene),s=20*Math.PI/180,l=!0===this.placeOnWall?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(s),z:-Math.cos(s)}),a.requestHitTestSource({space:o,offsetRay:l}).then((function(e){u.initialHitSource=e})),this.currentSession=a,this.placementBox=new d9(t,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:f9});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopPresenting",value:function(){var e=Vn(Un().mark((function e(){var t,n=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPresenting){e.next=2;break}return e.abrupt("return");case 2:return t=new Promise((function(e){n.resolveCleanup=e})),e.prev=3,e.next=6,this.currentSession.end();case 6:return e.next=8,t;case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.warn("Error while trying to end WebXR AR session"),console.warn(e.t0),this.postSessionCleanup();case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"isPresenting",get:function(){return null!=this.presentedScene}},{key:"target",get:function(){return this.oldTarget}},{key:"updateTarget",value:function(){var e=this.presentedScene;if(null!=e){var t=e.getTarget();this.oldTarget.copy(t),this.placeOnWall?t.z=e.boundingBox.min.z:t.y=e.boundingBox.min.y,e.setTarget(t.x,t.y,t.z)}}},{key:"postSessionCleanup",value:function(){var e=this.currentSession;null!=e&&(e.removeEventListener("selectstart",this.onSelectStart),e.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);var t=this.presentedScene;if(null!=t){var n=t.element;null!=this.xrLight&&(t.remove(this.xrLight),null!=this.oldEnvironment&&(t.environment=this.oldEnvironment,this.oldEnvironment=null),this.xrLight.dispose(),this.xrLight=null),t.position.set(0,0,0),t.scale.set(1,1,1),t.setShadowScaleAndOffset(1,0);var r=this.turntableRotation;null!=r&&(t.yaw=r);var a=this.oldShadowIntensity;null!=a&&t.setShadowIntensity(a);var i=this.oldBackground;null!=i&&(t.background=i);var o=this.oldTarget;t.setTarget(o.x,o.y,o.z),t.framedFieldOfView=this.oldFramedFieldOfView,t.xrCamera=null,t.removeEventListener("model-load",this.onUpdateScene),t.orientHotspots(0),n.requestUpdate("cameraTarget"),n.requestUpdate("maxCameraOrbit"),n[Dee](n.getBoundingClientRect())}this.renderer.height=0;var s=this.exitWebXRButtonContainer;null!=s&&(s.classList.remove("enabled"),s.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);var l=this.transientHitTestSource;null!=l&&(l.cancel(),this.transientHitTestSource=null);var u=this.initialHitSource;null!=u&&(u.cancel(),this.initialHitSource=null),null!=this.placementBox&&(this.placementBox.dispose(),this.placementBox=null),this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.oldBackground=null,this._presentedScene=null,this.frame=null,this.inputSource=null,this.overlay=null,null!=this.resolveCleanup&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:h9})}},{key:"updateView",value:function(e){var t=this.presentedScene,n=this.threeRenderer.xr;n.updateCamera(y9),t.xrCamera=n.getCamera();var r=t.getCamera().matrixWorld.elements;if(t.orientHotspots(Math.atan2(r[1],r[5])),this.initialized||(this.placeInitially(),this.initialized=!0),e.requestViewportScale&&e.recommendedViewportScale){var a=e.recommendedViewportScale;e.requestViewportScale(Math.max(a,.25))}var i=this.currentSession.renderState.baseLayer.getViewport(e);this.threeRenderer.setViewport(i.x,i.y,i.width,i.height)}},{key:"placeInitially",value:function(){var e=this,t=this.presentedScene,n=t.position,r=t.element,a=t.getCamera(),i=this.overlay.getBoundingClientRect(),o=i.width,s=i.height;t.setSize(o,s),a.projectionMatrixInverse.copy(a.projectionMatrix).invert();var l=r.getCameraOrbit(),u=l.theta,c=l.radius,d=a.getWorldDirection(m9);t.yaw=Math.atan2(-d.x,-d.z)-u,this.goalYaw=t.yaw,n.copy(a.position).add(d.multiplyScalar(c)),this.updateTarget();var h=t.getTarget();n.add(h).sub(this.oldTarget),this.goalPosition.copy(n),t.setHotspotsVisibility(!0);var f=this.frame.session;f.addEventListener("selectstart",this.onSelectStart),f.addEventListener("selectend",this.onSelectEnd),f.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then((function(t){e.transientHitTestSource=t}))}},{key:"getTouchLocation",value:function(){var e=this.inputSource.gamepad.axes,t=this.placementBox.getExpandedHit(this.presentedScene,e[0],e[1]);return null!=t&&(m9.copy(t).sub(this.presentedScene.getCamera().position),m9.length()>10)?null:t}},{key:"getHitPoint",value:function(e){var t=this.threeRenderer.xr.getReferenceSpace(),n=e.getPose(t);if(null==n)return null;var r=v9.fromArray(n.transform.matrix);return!0===this.placeOnWall&&(this.goalYaw=Math.atan2(r.elements[4],r.elements[6])),r.elements[5]>.75!==this.placeOnWall?g9.setFromMatrixPosition(r):null}},{key:"moveToFloor",value:function(e){var t=this.initialHitSource;if(null!=t){var n=e.getHitTestResults(t);if(0!=n.length){var r=n[0],a=this.getHitPoint(r);null!=a&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(a):this.goalPosition.y=a.y),t.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:"object-placed"}))}}}},{key:"fingerPolar",value:function(e){var t=e[0].inputSource.gamepad.axes,n=e[1].inputSource.gamepad.axes,r=n[0]-t[0],a=n[1]-t[1],i=Math.atan2(a,r),o=this.lastAngle-i;return o>Math.PI?o-=2*Math.PI:o<-Math.PI&&(o+=2*Math.PI),this.lastAngle=i,{separation:Math.sqrt(r*r+a*a),deltaYaw:o}}},{key:"processInput",value:function(e){var t=this,n=this.transientHitTestSource;if(null!=n&&(this.isTranslating||this.isTwoFingering||this.isRotating)){var r=e.getHitTestResultsForTransientInput(n),a=this.presentedScene,i=a.scale.x;if(this.isTwoFingering)if(r.length<2)this.isTwoFingering=!1;else{var o=this.fingerPolar(r),s=o.separation,l=o.deltaYaw;if(!1===this.placeOnWall&&(this.goalYaw+=l),a.canScale){var u=s/this.firstRatio;this.goalScale=u<1.3&&u>.7692307692307692?1:u}}else if(2!==r.length)if(this.isRotating){var c=1.5*this.inputSource.gamepad.axes[0];this.goalYaw+=c-this.lastAngle,this.lastAngle=c}else this.isTranslating&&r.forEach((function(e){if(e.inputSource===t.inputSource){var n=null;if(e.results.length>0&&(n=t.getHitPoint(e.results[0])),null==n&&(n=t.getTouchLocation()),null!=n){if(t.goalPosition.sub(t.lastDragPosition),!1===t.placeOnWall){var r=n.y-t.lastDragPosition.y;if(r<0){t.placementBox.offsetHeight=r/i,t.presentedScene.setShadowScaleAndOffset(i,r);var o=m9.copy(a.getCamera().position),s=-r/(o.y-n.y);o.multiplyScalar(s),n.multiplyScalar(1-s).add(o)}}t.goalPosition.add(n),t.lastDragPosition.copy(n)}}}));else{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;var d=this.fingerPolar(r).separation;this.firstRatio=d/i}}}},{key:"moveScene",value:function(e){var t=this.presentedScene,n=t.position,r=t.yaw,a=t.idealCameraDistance,i=this.goalPosition,o=t.scale.x,s=this.placementBox;if(!i.equals(n)||this.goalScale!==o){var l=n.x,u=n.y,c=n.z;l=this.xDamper.update(l,i.x,e,a),u=this.yDamper.update(u,i.y,e,a),c=this.zDamper.update(c,i.z,e,a),n.set(l,u,c);var d=this.scaleDamper.update(o,this.goalScale,e,1);if(t.scale.set(d,d,d),!this.isTranslating){var h=i.y-u;this.placementComplete&&!1===this.placeOnWall?(s.offsetHeight=h/d,t.setShadowScaleAndOffset(d,h)):0===h&&(this.placementComplete=!0,s.show=!1,t.setShadowIntensity(.3))}}s.updateOpacity(e),t.updateTarget(e),t.yaw=this.yawDamper.update(r,this.goalYaw,e,Math.PI)}},{key:"onWebXRFrame",value:function(e,t){this.frame=t,++this.frames;var n=this.threeRenderer.xr.getReferenceSpace(),r=t.getViewerPose(n);null==r&&!0===this.tracking&&this.frames>30&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:"not-tracking"}));var a=this.presentedScene;if(null!=r&&null!=a&&a.element[Bee]()){!1===this.tracking&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:p9}));var i,o=!0,s=G(r.views);try{for(s.s();!(i=s.n()).done;){var l=i.value;if(this.updateView(l),o){this.moveToFloor(t),this.processInput(t);var u=e-this.lastTick;this.moveScene(u),this.renderer.preRender(a,e,u),this.lastTick=e}var c=this.threeRenderer.getContext();c.depthMask(!1),c.clear(c.DEPTH_BUFFER_BIT),c.depthMask(!0),this.threeRenderer.render(a,a.getCamera()),o=!1}}catch(_ke){s.e(_ke)}finally{s.f()}}else this.threeRenderer.clear()}}]),n}($$),x9=function(){function e(t){M(this,e),t.threeRenderer.debug={checkShaderErrors:!0},Promise.resolve().then((function(){self.dispatchEvent(new CustomEvent("model-viewer-renderer-debug",{detail:{renderer:t,THREE:{ShaderMaterial:R0,Texture:bJ,Mesh:C0,Scene:I3,PlaneBufferGeometry:q0,OrthographicCamera:r1,WebGLRenderTarget:kJ}}}))}))}return(0,A.Z)(e,[{key:"addScene",value:function(e){self.dispatchEvent(new CustomEvent("model-viewer-scene-added-debug",{detail:{scene:e}}))}},{key:"removeScene",value:function(e){self.dispatchEvent(new CustomEvent("model-viewer-scene-removed-debug",{detail:{scene:e}}))}}]),e}();function w9(e){var t=new Map,n=new Map,r=e.clone();return k9(e,r,(function(e,r){t.set(r,e),n.set(e,r)})),r.traverse((function(e){if(e.isSkinnedMesh){var r=e,a=t.get(e),i=a.skeleton.bones;r.skeleton=a.skeleton.clone(),r.bindMatrix.copy(a.bindMatrix),r.skeleton.bones=i.map((function(e){return n.get(e)})),r.bind(r.skeleton,r.bindMatrix)}})),r}function k9(e,t,n){n(e,t);for(var r=0;r<e.children.length;r++)k9(e.children[r],t.children[r],n)}var S9=Symbol("prepared"),T9=Symbol("prepare"),E9=Symbol("preparedGLTF"),C9=Symbol("clone"),_9=function(){function e(t){M(this,e),this[E9]=t}return(0,A.Z)(e,[{key:"parser",get:function(){return this[E9].parser}},{key:"animations",get:function(){return this[E9].animations}},{key:"scene",get:function(){return this[E9].scene}},{key:"scenes",get:function(){return this[E9].scenes}},{key:"cameras",get:function(){return this[E9].cameras}},{key:"asset",get:function(){return this[E9].asset}},{key:"userData",get:function(){return this[E9].userData}},{key:"clone",value:function(){return new(0,this.constructor)(this[C9]())}},{key:"dispose",value:function(){this.scenes.forEach((function(e){e.traverse((function(e){if(e.isMesh){var t=e;(Array.isArray(t.material)?t.material:[t.material]).forEach((function(e){for(var t in e){var n=e[t];n instanceof bJ&&n.dispose()}e.dispose()})),t.geometry.dispose()}}))}))}},{key:C9,value:function(){var e=this[E9],t=w9(this.scene);M9(t,this.scene);var n=[t],r=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:t,scenes:n,userData:r})}}],[{key:"prepare",value:function(e){if(null==e.scene)throw new Error("Model does not have a scene");if(e[S9])return e;var t=this[T9](e);return t[S9]=!0,t}},{key:T9,value:function(e){var t=e.scene,n=[t];return Object.assign(Object.assign({},e),{scene:t,scenes:n})}}]),e}(),M9=function(e,t){A9(e,t,(function(e,t){void 0!==t.userData.variantMaterials&&(e.userData.variantMaterials=new Map(t.userData.variantMaterials)),void 0!==t.userData.originalMaterial&&(e.userData.originalMaterial=t.userData.originalMaterial)}))},A9=function e(t,n,r){r(t,n);for(var a=0;a<t.children.length;a++)e(t.children[a],n.children[a],r)},I9=Symbol("threeGLTF"),N9=Symbol("gltf"),R9=Symbol("gltfElementMap"),O9=Symbol("threeObjectMap"),D9=Symbol("parallelTraverseThreeScene"),L9=Symbol("correlateOriginalThreeGLTF"),P9=Symbol("correlateCloneThreeGLTF"),F9=function(){function e(t,n,r,a){M(this,e),this[I9]=t,this[N9]=n,this[R9]=a,this[O9]=r}return(0,A.Z)(e,[{key:"threeGLTF",get:function(){return this[I9]}},{key:"gltf",get:function(){return this[N9]}},{key:"gltfElementMap",get:function(){return this[R9]}},{key:"threeObjectMap",get:function(){return this[O9]}}],[{key:"from",value:function(e,t){return null!=t?this[P9](e,t):this[L9](e)}},{key:L9,value:function(t){var n,r=t.parser.json,a=t.parser.associations,i=new Map,o={name:"Default"},s={type:"materials",index:-1},l=G(a.keys());try{for(l.s();!(n=l.n()).done;){var u=n.value;u instanceof BQ&&null==a.get(u)&&(s.index<0&&(null==r.materials&&(r.materials=[]),s.index=r.materials.length,r.materials.push(o)),u.name=o.name,a.set(u,{materials:s.index}))}}catch(_ke){l.e(_ke)}finally{l.f()}var c,d=G(a);try{for(d.s();!(c=d.n()).done;){var h=(0,U.Z)(c.value,2),f=h[0],p=h[1];if(p){var m=f;m.userData=m.userData||{},m.userData.associations=p}for(var v in p)if(null!=v&&"primitives"!==v){var g=v,y=(r[g]||[])[p[g]];if(null==y)continue;var b=i.get(y);null==b&&(b=new Set,i.set(y,b)),b.add(f)}}}catch(_ke){d.e(_ke)}finally{d.f()}return new e(t,r,a,i)}},{key:P9,value:function(t,n){for(var r=n.threeGLTF,a=n.gltf,i=JSON.parse(JSON.stringify(a)),o=new Map,s=new Map,l=0;l<r.scenes.length;l++)this[D9](r.scenes[l],t.scenes[l],(function(e,t){var r=n.threeObjectMap.get(e);if(null!=r)for(var a in r)if(null!=a&&"primitives"!==a){var l=a,u=r[l],c=i[l][u],d=o.get(t)||{};d[l]=u,o.set(t,d);var h=s.get(c)||new Set;h.add(t),s.set(c,h)}}));return new e(t,i,o,s)}},{key:D9,value:function(e,t,n){!function e(t,r){if(n(t,r),t.isObject3D){if(t.isMesh)if(Array.isArray(t.material))for(var a=0;a<t.material.length;++a)e(t.material[a],r.material[a]);else e(t.material,r.material);for(var i=0;i<t.children.length;++i)e(t.children[i],r.children[i])}}(e,t)}}]),e}(),j9=Symbol("cloneAndPatchMaterial"),z9=Symbol("correlatedSceneGraph"),B9=function(e){N(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,A.Z)(n,[{key:"correlatedSceneGraph",get:function(){return this[E9][z9]}},{key:C9,value:function(){var e=this,t=lu(R(n.prototype),C9,this).call(this),r=new Map;return t.scene.traverse((function(t){if(t.isMesh){var n=t;Array.isArray(n.material)?n.material=n.material.map((function(t){return e[j9](t,r)})):null!=n.material&&(n.material=e[j9](n.material,r))}})),t[z9]=F9.from(t,this.correlatedSceneGraph),t}},{key:j9,value:function(e,t){if(t.has(e.uuid))return t.get(e.uuid);var n=e.clone();null!=e.map&&(n.map=e.map.clone(),n.map.needsUpdate=!0),null!=e.normalMap&&(n.normalMap=e.normalMap.clone(),n.normalMap.needsUpdate=!0),null!=e.emissiveMap&&(n.emissiveMap=e.emissiveMap.clone(),n.emissiveMap.needsUpdate=!0);var r=null;if(null!=e.roughnessMap&&(r=e.roughnessMap.clone()),null!=r){r.needsUpdate=!0,n.roughnessMap=r;var a=K9.singleton,i=a.threeRenderer,o=a.roughnessMipmapper,s=i.xr.enabled;i.xr.enabled=!1;var l=n.roughnessMap.image;o.generateMipmaps(n),n.roughnessMap.image=l,i.xr.enabled=s}return e.roughnessMap===e.metalnessMap?n.metalnessMap=r:null!=e.metalnessMap&&(n.metalnessMap=e.metalnessMap.clone(),n.metalnessMap.needsUpdate=!0),e.roughnessMap===e.aoMap?n.aoMap=r:null!=e.aoMap&&(n.aoMap=e.aoMap.clone(),n.aoMap.needsUpdate=!0),n.shadowSide=0,t.set(e.uuid,n),n}}],[{key:T9,value:function(e){var t=lu(R(n),T9,this).call(this,e);null==t[z9]&&(t[z9]=F9.from(t));var r=t.scene,a=new qJ(void 0,1/0);return r.traverse((function(e){e.renderOrder=1e3,e.frustumCulled=!1,e.name||(e.name=e.uuid);var t=e;t.isMesh&&(t.castShadow=!0,t.isSkinnedMesh&&(t.geometry.boundingSphere=a,t.geometry.boundingBox=null))})),t}}]),n}(_9),U9=function(e){N(n,e);var t=F(n);function n(){var e;M(this,n),(e=t.call(this)).position.y=-3.5;var r=new M0;r.deleteAttribute("uv");var a=new A5({metalness:0,side:1}),i=new A5({metalness:0}),o=new h6(16777215,500,28,2);o.position.set(.418,16.199,.3),e.add(o);var s=new C0(r,a);s.position.set(-.757,13.219,.717),s.scale.set(31.713,28.305,28.591),e.add(s);var l=new C0(r,i);l.position.set(-10.906,2.009,1.846),l.rotation.set(0,-.195,0),l.scale.set(2.328,7.905,4.651),e.add(l);var u=new C0(r,i);u.position.set(-5.607,-.754,-.758),u.rotation.set(0,.994,0),u.scale.set(1.97,1.534,3.955),e.add(u);var c=new C0(r,i);c.position.set(6.167,.857,7.803),c.rotation.set(0,.561,0),c.scale.set(3.927,6.285,3.687),e.add(c);var d=new C0(r,i);d.position.set(-2.017,.018,6.124),d.rotation.set(0,.333,0),d.scale.set(2.002,4.566,2.064),e.add(d);var h=new C0(r,i);h.position.set(2.291,-.756,-2.621),h.rotation.set(0,-.286,0),h.scale.set(1.546,1.552,1.496),e.add(h);var f=new C0(r,i);f.position.set(-2.193,-.369,-5.547),f.rotation.set(0,.516,0),f.scale.set(3.875,3.487,2.986),e.add(f);var p=new C0(r,e.createAreaLightMaterial(50));p.position.set(-16.116,14.37,8.208),p.scale.set(.1,2.428,2.739),e.add(p);var m=new C0(r,e.createAreaLightMaterial(50));m.position.set(-16.109,18.021,-8.207),m.scale.set(.1,2.425,2.751),e.add(m);var v=new C0(r,e.createAreaLightMaterial(17));v.position.set(14.904,12.198,-1.832),v.scale.set(.15,4.265,6.331),e.add(v);var g=new C0(r,e.createAreaLightMaterial(43));g.position.set(-.462,8.89,14.52),g.scale.set(4.38,5.441,.088),e.add(g);var y=new C0(r,e.createAreaLightMaterial(20));y.position.set(3.235,11.486,-12.541),y.scale.set(2.5,2,.1),e.add(y);var b=new C0(r,e.createAreaLightMaterial(100));return b.position.set(0,20,0),b.scale.set(1,.1,1),e.add(b),e}return(0,A.Z)(n,[{key:"createAreaLightMaterial",value:function(e){var t=new XQ;return t.color.setScalar(e),t}}]),n}(I3),W9=function(e){N(n,e);var t=F(n);function n(){var e;M(this,n),(e=t.call(this)).position.y=-3.5;var r=new M0;r.deleteAttribute("uv");var a=new A5({metalness:0,side:1}),i=new A5({metalness:0}),o=new h6(16777215,400,28,2);o.position.set(.5,14,.5),e.add(o);var s=new C0(r,a);s.position.set(0,13.2,0),s.scale.set(31.5,28.5,31.5),e.add(s);var l=new C0(r,i);l.position.set(-10.906,-1,1.846),l.rotation.set(0,-.195,0),l.scale.set(2.328,7.905,4.651),e.add(l);var u=new C0(r,i);u.position.set(-5.607,-.754,-.758),u.rotation.set(0,.994,0),u.scale.set(1.97,1.534,3.955),e.add(u);var c=new C0(r,i);c.position.set(6.167,-.16,7.803),c.rotation.set(0,.561,0),c.scale.set(3.927,6.285,3.687),e.add(c);var d=new C0(r,i);d.position.set(-2.017,.018,6.124),d.rotation.set(0,.333,0),d.scale.set(2.002,4.566,2.064),e.add(d);var h=new C0(r,i);h.position.set(2.291,-.756,-2.621),h.rotation.set(0,-.286,0),h.scale.set(1.546,1.552,1.496),e.add(h);var f=new C0(r,i);f.position.set(-2.193,-.369,-5.547),f.rotation.set(0,.516,0),f.scale.set(3.875,3.487,2.986),e.add(f);var p=new C0(r,e.createAreaLightMaterial(80));p.position.set(-14,10,8),p.scale.set(.1,2.5,2.5),e.add(p);var m=new C0(r,e.createAreaLightMaterial(80));m.position.set(-14,14,-4),m.scale.set(.1,2.5,2.5),e.add(m);var v=new C0(r,e.createAreaLightMaterial(23));v.position.set(14,12,0),v.scale.set(.1,5,5),e.add(v);var g=new C0(r,e.createAreaLightMaterial(16));g.position.set(0,9,14),g.scale.set(5,5,.1),e.add(g);var y=new C0(r,e.createAreaLightMaterial(80));y.position.set(7,8,-14),y.scale.set(2.5,2.5,.1),e.add(y);var b=new C0(r,e.createAreaLightMaterial(80));b.position.set(-7,16,-14),b.scale.set(2.5,2.5,.1),e.add(b);var x=new C0(r,e.createAreaLightMaterial(1));return x.position.set(0,20,0),x.scale.set(.1,.1,.1),e.add(x),e}return(0,A.Z)(n,[{key:"createAreaLightMaterial",value:function(e){var t=new XQ;return t.color.setScalar(e),t}}]),n}(I3),V9=/\.hdr(\.js)?$/,Z9=new e6,H9=new(function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).type=1016,r}return(0,A.Z)(n,[{key:"parse",value:function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;for(var r=e.pos,a=-1,i=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));0>(a=s.indexOf("\n"))&&i<t&&r<e.byteLength;)o+=s,i+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<a&&(!1!==n&&(e.pos+=i+a+1),o+s.slice(0,a))},r=function(e,t,n,r){var a=e[t+3],i=Math.pow(2,a-128)/255;n[r+0]=e[t+0]*i,n[r+1]=e[t+1]*i,n[r+2]=e[t+2]*i},a=function(e,t,n,r){var a=e[t+3],i=Math.pow(2,a-128)/255;n[r+0]=W6.toHalfFloat(Math.min(e[t+0]*i,65504)),n[r+1]=W6.toHalfFloat(Math.min(e[t+1]*i,65504)),n[r+2]=W6.toHalfFloat(Math.min(e[t+2]*i,65504))},i=new Uint8Array(e);i.pos=0;var o=function(e){var r,a,i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(r=n(e)))return t(1,"no header found");if(!(a=r.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(u.valid|=1,u.programtype=a[1],u.string+=r+"\n";!1!==(r=n(e));)if(u.string+=r+"\n","#"!==r.charAt(0)){if((a=r.match(i))&&(u.gamma=parseFloat(a[1],10)),(a=r.match(o))&&(u.exposure=parseFloat(a[1],10)),(a=r.match(s))&&(u.valid|=2,u.format=a[1]),(a=r.match(l))&&(u.valid|=4,u.height=parseInt(a[1],10),u.width=parseInt(a[2],10)),2&u.valid&&4&u.valid)break}else u.comments+=r+"\n";return 2&u.valid?4&u.valid?u:t(3,"missing image size specifier"):t(3,"missing format specifier")}(i);if(-1!==o){var s=o.width,l=o.height,u=function(e,n,r){var a=n;if(a<8||a>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(a!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");var i=new Uint8Array(4*n*r);if(!i.length)return t(4,"unable to allocate buffer space");for(var o=0,s=0,l=4*a,u=new Uint8Array(4),c=new Uint8Array(l),d=r;d>0&&s<e.byteLength;){if(s+4>e.byteLength)return t(1);if(u[0]=e[s++],u[1]=e[s++],u[2]=e[s++],u[3]=e[s++],2!=u[0]||2!=u[1]||(u[2]<<8|u[3])!=a)return t(3,"bad rgbe scanline format");for(var h=void 0,f=0;f<l&&s<e.byteLength;){var p=(h=e[s++])>128;if(p&&(h-=128),0===h||f+h>l)return t(3,"bad scanline data");if(p)for(var m=e[s++],v=0;v<h;v++)c[f++]=m;else c.set(e.subarray(s,s+h),f),f+=h,s+=h}for(var g=a,y=0;y<g;y++){var b=0;i[o]=c[y+b],b+=a,i[o+1]=c[y+b],b+=a,i[o+2]=c[y+b],b+=a,i[o+3]=c[y+b],o+=4}d--}return i}(i.subarray(i.pos),s,l);if(-1!==u){var c,d,h,f;switch(this.type){case 1009:c=u,d=1023,h=1009;break;case 1015:f=u.length/4;for(var p=new Float32Array(3*f),m=0;m<f;m++)r(u,4*m,p,3*m);c=p,d=1022,h=1015;break;case 1016:f=u.length/4;for(var v=new Uint16Array(3*f),g=0;g<f;g++)a(u,4*g,v,3*g);c=v,d=1022,h=1016;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:s,height:l,data:c,header:o.string,gamma:o.gamma,exposure:o.exposure,format:d,type:h}}}return null}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,t,r,a){return lu(R(n.prototype),"load",this).call(this,e,(function(e,n){switch(e.type){case 1009:e.encoding=3002,e.minFilter=1003,e.magFilter=1003,e.generateMipmaps=!1,e.flipY=!0;break;case 1015:case 1016:e.encoding=3e3,e.minFilter=1006,e.magFilter=1006,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),r,a)}}]),n}(Q5));H9.setDataType(1016);var G9,q9,X9=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).threeRenderer=e,r.generatedEnvironmentMap=null,r.generatedEnvironmentMapAlt=null,r.skyboxCache=new Map,r.blurMaterial=null,r.blurScene=null,r}return(0,A.Z)(n,[{key:"load",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a,i,o=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:function(){},e.prev=1,r=V9.test(t),a=r?H9:Z9,e.next=6,new Promise((function(e,r){return a.load(t,e,(function(e){n(e.loaded/e.total*.9)}),r)}));case 6:return i=e.sent,e.abrupt("return",(n(1),i.name=t,i.mapping=303,r||(i.encoding=3007),i));case 8:return e.prev=8,n&&n(1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[1,,8,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"generateEnvironmentMapAndSkybox",value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a,i,o,s,l,u,c,d,h,f=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:null,n=f.length>1&&void 0!==f[1]?f[1]:null,r=(f.length>2&&void 0!==f[2]?f[2]:{}).progressTracker,a=null!=r?r.beginActivity():function(){},!0===(i="neutral"===n)&&(n=null),o=f7(n),e.prev=6,l=Promise.resolve(null),t&&(l=this.loadEquirectFromUrl(t,r)),s=o?this.loadEquirectFromUrl(o,r):t?this.loadEquirectFromUrl(t,r):!0===i?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap(),e.next=11,Promise.all([s,l]);case 11:if(u=e.sent,c=(0,U.Z)(u,2),d=c[0],h=c[1],null!=d){e.next=17;break}throw new Error("Failed to load environment map.");case 17:return e.abrupt("return",{environmentMap:d,skybox:h});case 18:return e.prev=18,a(1),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[6,,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadEquirectFromUrl",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.skyboxCache.has(t)||(r=n?n.beginActivity():function(){},a=this.load(t,r),this.skyboxCache.set(t,a)),e.abrupt("return",this.skyboxCache.get(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"GenerateEnvironmentMap",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a,i,o,s,l;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x7();case 2:return r=this.threeRenderer,a=new F0(256,{generateMipmaps:!1,type:1016,format:1023,encoding:3e3,depthBuffer:!0}),i=new L0(.1,100,a),(o=i.renderTarget.texture).name=n,o.isRenderTargetTexture=!1,o.images=[1,1,1,1,1,1],t.scale.setComponent(0,-1),s=r.outputEncoding,l=r.toneMapping,r.toneMapping=0,r.outputEncoding=3e3,i.update(r,t),e.next=10,this.blurCubemap(a,.04);case 10:return r.toneMapping=l,r.outputEncoding=s,e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadGeneratedEnvironmentMap",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(null==this.generatedEnvironmentMap&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new U9,"default")),this.generatedEnvironmentMap));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadGeneratedEnvironmentMapAlt",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(null==this.generatedEnvironmentMapAlt&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new W9,"neutral")),this.generatedEnvironmentMapAlt));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"blurCubemap",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==this.blurMaterial&&(this.blurMaterial=this.getBlurShader(20),r=new M0,a=new C0(r,this.blurMaterial),this.blurScene=new I3,this.blurScene.add(a)),i=t.clone(),this.halfblur(t,i,n,"latitudinal"),this.halfblur(i,t,n,"longitudinal");case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"halfblur",value:function(){var e=Vn(Un().mark((function e(t,n,r,a){var i,o,s,l,u,c,d,h,f,p,m;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=t.width,o=isFinite(r)?Math.PI/(2*i):2*Math.PI/39,s=r/o,(l=isFinite(r)?1+Math.floor(3*s):20)>20&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(l," samples when the maximum is set to 20")),u=[],c=0,d=0;d<20;++d)h=d/s,f=Math.exp(-h*h/2),u.push(f),0==d?c+=f:d<l&&(c+=2*f);for(p=0;p<u.length;p++)u[p]=u[p]/c;(m=this.blurMaterial.uniforms).envMap.value=t.texture,m.samples.value=l,m.weights.value=u,m.latitudinal.value="latitudinal"===a,m.dTheta.value=o,new L0(.1,100,n).update(this.threeRenderer,this.blurScene);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getBlurShader",value:function(e){var t=new Float32Array(e),n=new EJ(0,1,0);return new R0({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:n}},vertexShader:"\n      \n      varying vec3 vOutputDirection;\n  \n      void main() {\n  \n        vOutputDirection = vec3( position );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  \n      }\n    ",fragmentShader:"\n        varying vec3 vOutputDirection;\n  \n        uniform samplerCube envMap;\n        uniform int samples;\n        uniform float weights[ n ];\n        uniform bool latitudinal;\n        uniform float dTheta;\n        uniform vec3 poleAxis;\n  \n        vec3 getSample( float theta, vec3 axis ) {\n  \n          float cosTheta = cos( theta );\n          // Rodrigues' axis-angle rotation\n          vec3 sampleDirection = vOutputDirection * cosTheta\n            + cross( axis, vOutputDirection ) * sin( theta )\n            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n  \n          return vec3( textureCube( envMap, sampleDirection ) );\n  \n        }\n  \n        void main() {\n  \n          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n  \n          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n  \n            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n  \n          }\n  \n          axis = normalize( axis );\n  \n          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n  \n          for ( int i = 1; i < n; i++ ) {\n  \n            if ( i >= samples ) {\n  \n              break;\n  \n            }\n  \n            float theta = dTheta * float( i );\n            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n  \n          }\n        }\n      ",blending:0,depthTest:!1,depthWrite:!1,side:1})}},{key:"dispose",value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=G(this.skyboxCache),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=10;break}return r=(0,U.Z)(n.value,2),a=r[1],e.next=7,a;case 7:e.sent.dispose();case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:if(e.t1=null!=this.generatedEnvironmentMap,!e.t1){e.next=24;break}return e.next=22,this.generatedEnvironmentMap;case 22:e.sent.dispose(),this.generatedEnvironmentMap=null;case 24:if(e.t2=null!=this.generatedEnvironmentMapAlt,!e.t2){e.next=30;break}return e.next=28,this.generatedEnvironmentMapAlt;case 28:e.sent.dispose(),this.generatedEnvironmentMapAlt=null;case 30:null!=this.blurMaterial&&this.blurMaterial.dispose();case 31:case"end":return e.stop()}}),e,this,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}()}]),n}($$),Y9=[1,.79,.62,.5,.4,.31,.25],K9=function(e){N(n,e);var t=F(n);function n(e){var r;M(this,n),(r=t.call(this)).loader=new i7(B9),r.width=0,r.height=0,r.dpr=1,r.debugger=null,r.scenes=new Set,r.multipleScenesVisible=!1,r.scaleStep=0,r.lastStep=3,r.avgFrameDuration=22,r.onWebGLContextLost=function(e){r.dispatchEvent({type:"contextlost",sourceEvent:e})},r.onWebGLContextRestored=function(){var e;null===(e=r.textureUtils)||void 0===e||e.dispose(),r.textureUtils=new X9(r.threeRenderer),r.roughnessMipmapper=new Q7(r.threeRenderer);var t,n=G(r.scenes);try{for(n.s();!(t=n.n()).done;){t.value.element[r9]()}}catch(_ke){n.e(_ke)}finally{n.f()}r.threeRenderer.shadowMap.needsUpdate=!0},r.dpr=y7(),r.canvas3D=document.createElement("canvas"),r.canvas3D.id="webgl-canvas";try{r.threeRenderer=new A3({canvas:r.canvas3D,alpha:!0,antialias:!0,powerPreference:e.powerPreference,preserveDrawingBuffer:!0}),r.threeRenderer.autoClear=!0,r.threeRenderer.outputEncoding=3007,r.threeRenderer.physicallyCorrectLights=!0,r.threeRenderer.setPixelRatio(1),r.threeRenderer.shadowMap.enabled=!0,r.threeRenderer.shadowMap.type=2,r.threeRenderer.shadowMap.autoUpdate=!1,r.debugger=e.debug?new x9((0,L.Z)(r)):null,r.threeRenderer.debug={checkShaderErrors:!!r.debugger},r.threeRenderer.toneMapping=4}catch(e){console.warn(e)}return r.arRenderer=new b9((0,L.Z)(r)),r.textureUtils=r.canRender?new X9(r.threeRenderer):null,r.roughnessMipmapper=new Q7(r.threeRenderer),i7.initializeKTX2Loader(r.threeRenderer),r.canvas3D.addEventListener("webglcontextlost",r.onWebGLContextLost),r.canvas3D.addEventListener("webglcontextrestored",r.onWebGLContextRestored),r.updateRendererSize(),r.lastTick=performance.now(),r.avgFrameDuration=0,r}return(0,A.Z)(n,[{key:"canRender",get:function(){return null!=this.threeRenderer}},{key:"scaleFactor",get:function(){return Y9[this.scaleStep]}},{key:"minScale",set:function(e){for(var t=1;t<Y9.length&&!(Y9[t]<e);)++t;this.lastStep=t-1}},{key:"updateRendererSize",value:function(){var e=y7();if(e!==this.dpr){var t,n=G(this.scenes);try{for(n.s();!(t=n.n()).done;){var r=t.value.element;r[bee](r.getBoundingClientRect())}}catch(_ke){n.e(_ke)}finally{n.f()}}var a,i=0,o=0,s=G(this.scenes);try{for(s.s();!(a=s.n()).done;){var l=a.value;i=Math.max(i,l.width),o=Math.max(o,l.height)}}catch(_ke){s.e(_ke)}finally{s.f()}if(i!==this.width||o!==this.height||e!==this.dpr){this.width=i,this.height=o,this.dpr=e,this.canRender&&this.threeRenderer.setSize(i*e,o*e,!1);var u=this.scaleFactor,c=i/u,d=o/u;this.canvas3D.style.width="".concat(c,"px"),this.canvas3D.style.height="".concat(d,"px");var h,f=G(this.scenes);try{for(f.s();!(h=f.n()).done;){var p=h.value,m=p.canvas;m.width=Math.round(i*e),m.height=Math.round(o*e),m.style.width="".concat(c,"px"),m.style.height="".concat(d,"px"),p.queueRender()}}catch(_ke){f.e(_ke)}finally{f.f()}}}},{key:"updateRendererScale",value:function(){var e=this.scaleStep;if(this.avgFrameDuration>26?++this.scaleStep:this.avgFrameDuration<18&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),e!=this.scaleStep){var t=this.scaleFactor;this.avgFrameDuration=22;var n=this.width/t,r=this.height/t;this.canvas3D.style.width="".concat(n,"px"),this.canvas3D.style.height="".concat(r,"px");var a,i=G(this.scenes);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=o.canvas.style;s.width="".concat(n,"px"),s.height="".concat(r,"px"),o.queueRender()}}catch(_ke){i.e(_ke)}finally{i.f()}}}},{key:"registerScene",value:function(e){var t=this;this.scenes.add(e);var n=e.canvas,r=this.scaleFactor;n.width=Math.round(this.width*this.dpr),n.height=Math.round(this.height*this.dpr),n.style.width=this.width/r+"px",n.style.height=this.height/r+"px",this.multipleScenesVisible&&n.classList.add("show"),e.queueRender(),this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((function(e,n){return t.render(e,n)})),null!=this.debugger&&this.debugger.addScene(e)}},{key:"unregisterScene",value:function(e){this.scenes.delete(e),this.canRender&&0===this.scenes.size&&this.threeRenderer.setAnimationLoop(null),null!=this.debugger&&this.debugger.removeScene(e)}},{key:"displayCanvas",value:function(e){return this.multipleScenesVisible?e.element[Aee]:this.canvas3D}},{key:"selectCanvas",value:function(){var e,t=0,n=null,r=G(this.scenes);try{for(r.s();!(e=r.n()).done;){var a=e.value;a.element.modelIsVisible&&null==a.externalRenderer&&(++t,n=a.canvas)}}catch(_ke){r.e(_ke)}finally{r.f()}if(null!=n){var i=t>1,o=this.canvas3D;if(i!==this.multipleScenesVisible||!i&&o.parentElement!==n.parentElement){this.multipleScenesVisible=i,i&&o.classList.remove("show");var s,l=G(this.scenes);try{for(l.s();!(s=l.n()).done;){var u=s.value;if(null==u.externalRenderer){var c=u.element[Aee];i?(c.classList.add("show"),u.queueRender()):u.canvas===n&&(u.canvas.parentElement.appendChild(o),o.classList.add("show"),c.classList.remove("show"),u.queueRender())}}}catch(_ke){l.e(_ke)}finally{l.f()}}}}},{key:"orderedScenes",value:function(){for(var e=[],t=0,n=[!1,!0];t<n.length;t++){var r,a=n[t],i=G(this.scenes);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.element.modelIsVisible===a&&e.push(o)}}catch(_ke){i.e(_ke)}finally{i.f()}}return e}},{key:"isPresenting",get:function(){return this.arRenderer.isPresenting}},{key:"preRender",value:function(e,t,n){var r=e.element,a=e.exposure;r[Ree](t,n);var i="number"==typeof a&&!self.isNaN(a);this.threeRenderer.toneMappingExposure=i?a:1,e.isShadowDirty()&&(this.threeRenderer.shadowMap.needsUpdate=!0)}},{key:"render",value:function(e,t){if(null==t){var n=e-this.lastTick;if(this.lastTick=e,this.canRender&&!this.isPresenting){this.avgFrameDuration+=g7(.2*(n-this.avgFrameDuration),-2,2),this.selectCanvas(),this.updateRendererSize(),this.updateRendererScale();var r,a=this.dpr,i=this.scaleFactor,o=G(this.orderedScenes());try{for(o.s();!(r=o.n()).done;){var s=r.value,l=s.element;if((l.modelIsVisible||!(s.renderCount>0))&&(this.preRender(s,e,n),s.shouldRender()))if(null==s.externalRenderer){if(!l.modelIsVisible&&!this.multipleScenesVisible){var u,c=G(this.scenes);try{for(c.s();!(u=c.n()).done;){var d=u.value;d.element.modelIsVisible&&d.queueRender()}}catch(_ke){c.e(_ke)}finally{c.f()}}var h=Math.min(Math.ceil(s.width*i*a),this.canvas3D.width),f=Math.min(Math.ceil(s.height*i*a),this.canvas3D.height);if(this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.floor(this.height*a)-f,h,f),this.threeRenderer.render(s,s.camera),this.multipleScenesVisible){null==s.context&&s.createContext();var p=s.context;p.clearRect(0,0,h,f),p.drawImage(this.canvas3D,0,0,h,f,0,0,h,f)}s.hasRendered(),l.loaded&&++s.renderCount}else{var m=s.getCamera();m.updateMatrix();var v=m.matrix,g=m.projectionMatrix,y=v.elements.slice(),b=s.getTarget();y[12]+=b.x,y[13]+=b.y,y[14]+=b.z,s.externalRenderer.render({viewMatrix:y,projectionMatrix:g.elements})}}}catch(_ke){o.e(_ke)}finally{o.f()}}}else this.arRenderer.onWebXRFrame(e,t)}},{key:"dispose",value:function(){null!=this.textureUtils&&this.textureUtils.dispose(),null!=this.roughnessMipmapper&&this.roughnessMipmapper.dispose(),null!=this.threeRenderer&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;var e,t=[],n=G(this.scenes);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.element)}}catch(_ke){n.e(_ke)}finally{n.f()}return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),t}}],[{key:"singleton",get:function(){return this._singleton}},{key:"resetSingleton",value:function(){var e,t=this._singleton.dispose(),r=G(t);try{for(r.s();!(e=r.n()).done;){e.value.disconnectedCallback()}}catch(_ke){r.e(_ke)}finally{r.f()}this._singleton=new n({powerPreference:(self.ModelViewerElement||{}).powerPreference||"high-performance",debug:b7()});var a,i=G(t);try{for(i.s();!(a=i.n()).done;){a.value.connectedCallback()}}catch(_ke){i.e(_ke)}finally{i.f()}}}]),n}($$);K9._singleton=new K9({powerPreference:(self.ModelViewerElement||{}).powerPreference||"high-performance",debug:b7()});var $9,J9,Q9,eee,tee,nee,ree,aee,iee,oee,see=Symbol("ongoingActivities"),lee=Symbol("announceTotalProgress"),uee=Symbol("eventDelegate"),cee=function(e){function t(){var e=this;M(this,t),this[G9]=document.createDocumentFragment(),this.addEventListener=function(){var t;return(t=e[uee]).addEventListener.apply(t,arguments)},this.removeEventListener=function(){var t;return(t=e[uee]).removeEventListener.apply(t,arguments)},this.dispatchEvent=function(){var t;return(t=e[uee]).dispatchEvent.apply(t,arguments)},this[q9]=new Set}return(0,A.Z)(t,[{key:"ongoingActivityCount",get:function(){return this[see].size}},{key:"beginActivity",value:function(){var e=this,t={progress:0};return this[see].add(t),1===this.ongoingActivityCount&&this[lee](),function(n){var r;return(r=Math.max(g7(n,0,1),t.progress))!==t.progress&&(t.progress=r,e[lee]()),t.progress}}},{key:e,value:function(){var e,t=0,n=0,r=0,a=G(this[see]);try{for(a.s();!(e=a.n()).done;){var i=e.value.progress;t+=i*(.5/Math.pow(2,n++)),1===i&&r++}}catch(_ke){a.e(_ke)}finally{a.f()}r===this.ongoingActivityCount&&(t=1,this[see].clear()),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:t}}))}}]),t}((G9=uee,q9=see,lee)),dee=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},hee=document.createElement("canvas"),fee=Symbol("fallbackResizeHandler"),pee=Symbol("defaultAriaLabel"),mee=Symbol("resizeObserver"),vee=Symbol("clearModelTimeout"),gee=Symbol("onContextLost"),yee=Symbol("loaded"),bee=Symbol("updateSize"),xee=Symbol("intersectionObserver"),wee=Symbol("isElementInViewport"),kee=Symbol("announceModelVisibility"),See=Symbol("ariaLabel"),Tee=Symbol("loadedTime"),Eee=Symbol("updateSource"),Cee=Symbol("markLoaded"),_ee=Symbol("container"),Mee=Symbol("input"),Aee=Symbol("canvas"),Iee=Symbol("scene"),Nee=Symbol("needsRender"),Ree=Symbol("tick"),Oee=Symbol("onModelLoad"),Dee=Symbol("onResize"),Lee=Symbol("renderer"),Pee=Symbol("progressTracker"),Fee=Symbol("getLoaded"),jee=Symbol("getModelIsVisible"),zee=Symbol("shouldAttemptPreload"),Bee=Symbol("sceneIsReady"),Uee=Symbol("hasTransitioned"),Wee=function(e){return{x:e.x,y:e.y,z:e.z,toString:function(){return"".concat(this.x,"m ").concat(this.y,"m ").concat(this.z,"m")}}},Vee=function(e,t,n){N(a,e);var r=F(a);function a(){var e;M(this,a),(e=r.call(this)).alt=null,e.src=null,e[$9]=!1,e[J9]=!1,e[Q9]=0,e[eee]=null,e[tee]=v7((function(){var t=e.getBoundingClientRect();e[bee](t)}),50),e[nee]=v7((function(t){var n=e.modelIsVisible;n!==t&&e.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:n}}))}),0),e[ree]=null,e[aee]=null,e[iee]=new cee,e[oee]=function(t){e.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:t.sourceEvent}}))},e.attachShadow({mode:"open"});var t,n,i=e.shadowRoot;if(function(e){w$(K$,e)}(i),e[_ee]=i.querySelector(".container"),e[Mee]=i.querySelector(".userInput"),e[Aee]=i.querySelector("canvas"),e[pee]=e[Mee].getAttribute("aria-label"),e.isConnected){var o=e.getBoundingClientRect();t=o.width,n=o.height}else t=300,n=150;return e[Iee]=new q7({canvas:e[Aee],element:(0,L.Z)(e),width:t,height:n}),e[Iee].addEventListener("model-load",function(){var t=Vn(Un().mark((function t(n){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e[Cee](),e[Oee](),t.next=4,x7();case 4:e.dispatchEvent(new CustomEvent("load",{detail:{url:n.url}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Promise.resolve().then((function(){e[bee](e.getBoundingClientRect())})),U$&&(e[mee]=new ResizeObserver((function(t){if(!e[Lee].isPresenting){var n,r=G(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.target===(0,L.Z)(e)&&e[bee](a.contentRect)}}catch(_ke){r.e(_ke)}finally{r.f()}}}))),W$?e[xee]=new IntersectionObserver((function(t){var n,r=G(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.target===(0,L.Z)(e)){var i=e.modelIsVisible;e[wee]=a.isIntersecting,e[kee](i),e[wee]&&!e[Bee]()&&e[Eee]()}}}catch(_ke){r.e(_ke)}finally{r.f()}}),{root:null,rootMargin:"0px",threshold:0}):e[wee]=!0,e}return(0,A.Z)(a,[{key:"loaded",get:function(){return this[Fee]()}},{key:t,get:function(){return K9.singleton}},{key:"modelIsVisible",get:function(){return this[jee]()}},{key:"connectedCallback",value:function(){lu(R(a.prototype),"connectedCallback",this)&&lu(R(a.prototype),"connectedCallback",this).call(this),U$?this[mee].observe(this):self.addEventListener("resize",this[fee]),W$&&this[xee].observe(this);var e=this[Lee];e.addEventListener("contextlost",this[gee]),e.registerScene(this[Iee]),null!=this[vee]&&(self.clearTimeout(this[vee]),this[vee]=null,this.requestUpdate("src",null))}},{key:"disconnectedCallback",value:function(){var e=this;lu(R(a.prototype),"disconnectedCallback",this)&&lu(R(a.prototype),"disconnectedCallback",this).call(this),U$?this[mee].unobserve(this):self.removeEventListener("resize",this[fee]),W$&&this[xee].unobserve(this);var t=this[Lee];t.removeEventListener("contextlost",this[gee]),t.unregisterScene(this[Iee]),this[vee]=self.setTimeout((function(){e[Iee].reset()}),1e3)}},{key:"updated",value:function(e){if(lu(R(a.prototype),"updated",this).call(this,e),e.has("src")&&(null==this.src?(this[yee]=!1,this[Tee]=0,this[Iee].reset()):this.src!==this[Iee].url&&(this[yee]=!1,this[Tee]=0,this[Eee]())),e.has("alt")){var t=null==this.alt?this[pee]:this.alt;this[Mee].setAttribute("aria-label",t)}}},{key:"toDataURL",value:function(e,t){return this[Lee].displayCanvas(this[Iee]).toDataURL(e,t)}},{key:"toBlob",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a,i,o,s,l,u,c,d,h,f,p,m,v,g,y,b=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?t.mimeType:void 0,r=t?t.qualityArgument:void 0,a=t?t.idealAspect:void 0,i=this[Iee],o=i.width,s=i.height,l=i.fieldOfViewAspect,u=i.aspect,c=this[Lee],d=c.dpr,h=c.scaleFactor,f=o*h*d,p=s*h*d,m=0,v=0,!0===a&&(l>u?(g=p,p=Math.round(f/l),v=(g-p)/2):(y=f,f=Math.round(p*l),m=(y-f)/2)),hee.width=f,hee.height=p,e.prev=4,e.abrupt("return",new Promise(function(){var e=Vn(Un().mark((function e(t,a){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hee.getContext("2d").drawImage(b[Lee].displayCanvas(b[Iee]),m,v,f,p,0,0,f,p),hee.msToBlob&&(!n||"image/png"===n)){e.next=14;break}if(!hee.toBlob){e.next=6;break}e.t1=void hee.toBlob((function(e){if(!e)return a(new Error("Unable to retrieve canvas blob"));t(e)}),n,r),e.next=11;break;case 6:return e.t2=t,e.next=9,function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.match(/data:(.*);/);if(!r)return n(new Error("".concat(t," is not a valid data Url")));for(var a=r[1],i=t.replace(/data:image\/\w+;base64,/,""),o=atob(i),s=[],l=0;l<o.length;l+=512){for(var u=o.slice(l,l+512),c=new Array(u.length),d=0;d<u.length;d++)c[d]=u.charCodeAt(d);var h=new Uint8Array(c);s.push(h)}e(new Blob(s,{type:a}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(hee.toDataURL(n,r));case 9:e.t3=e.sent,e.t1=(0,e.t2)(e.t3);case 11:e.t0=e.t1,e.next=15;break;case 14:e.t0=t(hee.msToBlob());case 15:return e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:return e.prev=6,this[bee]({width:o,height:s}),e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[4,,6,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"registerRenderer",value:function(e){this[Iee].externalRenderer=e}},{key:"unregisterRenderer",value:function(){this[Iee].externalRenderer=null}},{key:See,get:function(){return null==this.alt||"null"===this.alt?this[pee]:this.alt}},{key:Fee,value:function(){return this[yee]}},{key:jee,value:function(){return this.loaded&&this[wee]}},{key:Uee,value:function(){return this.modelIsVisible}},{key:zee,value:function(){return!!this.src&&this[wee]}},{key:Bee,value:function(){return this[yee]}},{key:bee,value:function(e){var t=e.width,n=e.height;this[_ee].style.width="".concat(t,"px"),this[_ee].style.height="".concat(n,"px"),this[Dee]({width:parseFloat(t),height:parseFloat(n)})}},{key:Ree,value:function(e,t){}},{key:Cee,value:function(){this[yee]||(this[yee]=!0,this[Tee]=performance.now())}},{key:Nee,value:function(){this[Iee].queueRender()}},{key:Oee,value:function(){}},{key:Dee,value:function(e){this[Iee].setSize(e.width,e.height)}},{key:n,value:function(){var e=Vn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loaded&&this[zee]()){e.next=2;break}return e.abrupt("return");case 2:return t=this[Pee].beginActivity(),n=this.src,e.prev=3,e.next=6,this[Iee].setSource(n,(function(e){return t(.8*e)}));case 6:r={url:n},this.dispatchEvent(new CustomEvent("preload",{detail:r})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.dispatchEvent(new CustomEvent("error",{detail:e.t0}));case 13:return e.prev=13,t(.9),requestAnimationFrame((function(){requestAnimationFrame((function(){t(1)}))})),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[3,10,13,16]])})));return function(){return e.apply(this,arguments)}}()}],[{key:"is",get:function(){return"model-viewer"}},{key:"modelCacheSize",get:function(){return i7[r7].evictionThreshold},set:function(e){i7[r7].evictionThreshold=e}},{key:"minimumRenderScale",get:function(){return K9.singleton.minScale},set:function(e){e>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),e<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),K9.singleton.minScale=e}}]),a}(R$,($9=wee,J9=yee,Q9=Tee,eee=vee,tee=fee,nee=kee,ree=mee,aee=xee,iee=Pee,Lee),(oee=gee,Eee));dee([O$({type:String})],Vee.prototype,"alt",void 0),dee([O$({type:String})],Vee.prototype,"src",void 0);var Zee=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},Hee=Symbol("changeAnimation"),Gee=Symbol("paused"),qee=Symbol("hotspotMap"),Xee=Symbol("mutationCallback"),Yee=Symbol("observer"),Kee=Symbol("addHotspot"),$ee=Symbol("removeHotspot"),Jee=new nQ,Qee=new pJ,ete=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};try{URL.revokeObjectURL(ete(""))}catch(BK){ete=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var tte=Uint8Array,nte=Uint16Array,rte=Uint32Array,ate=new tte([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ite=new tte([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ote=new tte([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ste=function(e,t){for(var n=new nte(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var a=new rte(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)a[i]=i-n[r]<<5|r;return[n,a]},lte=ste(ate,2),ute=lte[0],cte=lte[1];ute[28]=258,cte[258]=28;for(var dte=ste(ite,0)[1],hte=new nte(32768),fte=0;fte<32768;++fte){var pte=(43690&fte)>>>1|(21845&fte)<<1;pte=(61680&(pte=(52428&pte)>>>2|(13107&pte)<<2))>>>4|(3855&pte)<<4,hte[fte]=((65280&pte)>>>8|(255&pte)<<8)>>>1}var mte=function(e,t,n){for(var r=e.length,a=0,i=new nte(t);a<r;++a)++i[e[a]-1];var o,s=new nte(t);for(a=0;a<t;++a)s[a]=s[a-1]+i[a-1]<<1;if(n){o=new nte(1<<t);var l=15-t;for(a=0;a<r;++a)if(e[a])for(var u=a<<4|e[a],c=t-e[a],d=s[e[a]-1]++<<c,h=d|(1<<c)-1;d<=h;++d)o[hte[d]>>>l]=u}else for(o=new nte(r),a=0;a<r;++a)e[a]&&(o[a]=hte[s[e[a]-1]++]>>>15-e[a]);return o},vte=new tte(288);for(fte=0;fte<144;++fte)vte[fte]=8;for(fte=144;fte<256;++fte)vte[fte]=9;for(fte=256;fte<280;++fte)vte[fte]=7;for(fte=280;fte<288;++fte)vte[fte]=8;var gte=new tte(32);for(fte=0;fte<32;++fte)gte[fte]=5;var yte=mte(vte,9,0),bte=mte(gte,5,0),xte=function(e){return(e/8|0)+(7&e&&1)},wte=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof nte?nte:e instanceof rte?rte:tte)(n-t);return r.set(e.subarray(t,n)),r},kte=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},Ste=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},Tte=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,i=n.slice();if(!a)return[Nte,0];if(1==a){var o=new tte(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],l=n[1],u=0,c=1,d=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=a-1;)s=n[n[u].f<n[d].f?u++:d++],l=n[u!=c&&n[u].f<n[d].f?u++:d++],n[c++]={s:-1,f:s.f+l.f,l:s,r:l};var h=i[0].s;for(r=1;r<a;++r)i[r].s>h&&(h=i[r].s);var f=new nte(h+1),p=Ete(n[c-1],f,0);if(p>t){r=0;var m=0,v=p-t,g=1<<v;for(i.sort((function(e,t){return f[t.s]-f[e.s]||e.f-t.f}));r<a;++r){var y=i[r].s;if(!(f[y]>t))break;m+=g-(1<<p-f[y]),f[y]=t}for(m>>>=v;m>0;){var b=i[r].s;f[b]<t?m-=1<<t-f[b]++-1:++r}for(;r>=0&&m;--r){var x=i[r].s;f[x]==t&&(--f[x],++m)}p=t}return[new tte(f),p]},Ete=function e(t,n,r){return-1==t.s?Math.max(e(t.l,n,r+1),e(t.r,n,r+1)):n[t.s]=r},Cte=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new nte(++t),r=0,a=e[0],i=1,o=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==a&&s!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[s]}return[n.subarray(0,r),t]},_te=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Mte=function(e,t,n){var r=n.length,a=xte(t+2);e[a]=255&r,e[a+1]=r>>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var i=0;i<r;++i)e[a+i+4]=n[i];return 8*(a+4+r)},Ate=function(e,t,n,r,a,i,o,s,l,u,c){kte(t,c++,n),++a[256];for(var d=Tte(a,15),h=d[0],f=d[1],p=Tte(i,15),m=p[0],v=p[1],g=Cte(h),y=g[0],b=g[1],x=Cte(m),w=x[0],k=x[1],S=new nte(19),T=0;T<y.length;++T)S[31&y[T]]++;for(T=0;T<w.length;++T)S[31&w[T]]++;for(var E=Tte(S,7),C=E[0],_=E[1],M=19;M>4&&!C[ote[M-1]];--M);var A,I,N,R,O=u+5<<3,D=_te(a,vte)+_te(i,gte)+o,L=_te(a,h)+_te(i,m)+o+14+3*M+_te(S,C)+(2*S[16]+3*S[17]+7*S[18]);if(O<=D&&O<=L)return Mte(t,c,e.subarray(l,l+u));if(kte(t,c,1+(L<D)),c+=2,L<D){A=mte(h,f,0),I=h,N=mte(m,v,0),R=m;var P=mte(C,_,0);for(kte(t,c,b-257),kte(t,c+5,k-1),kte(t,c+10,M-4),c+=14,T=0;T<M;++T)kte(t,c+3*T,C[ote[T]]);c+=3*M;for(var F=[y,w],j=0;j<2;++j){var z=F[j];for(T=0;T<z.length;++T){var B=31&z[T];kte(t,c,P[B]),c+=C[B],B>15&&(kte(t,c,z[T]>>>5&127),c+=z[T]>>>12)}}}else A=yte,I=vte,N=bte,R=gte;for(T=0;T<s;++T)if(r[T]>255){B=r[T]>>>18&31,Ste(t,c,A[B+257]),c+=I[B+257],B>7&&(kte(t,c,r[T]>>>23&31),c+=ate[B]);var U=31&r[T];Ste(t,c,N[U]),c+=R[U],U>3&&(Ste(t,c,r[T]>>>5&8191),c+=ite[U])}else Ste(t,c,A[r[T]]),c+=I[r[T]];return Ste(t,c,A[256]),c+I[256]},Ite=new rte([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Nte=new tte(0),Rte=function(){for(var e=new rte(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),Ote=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=Rte[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},Dte=function(e,t,n,r,a){return function(e,t,n,r,a,i){var o=e.length,s=new tte(r+o+5*(1+Math.ceil(o/7e3))+a),l=s.subarray(r,s.length-a),u=0;if(!t||o<8)for(var c=0;c<=o;c+=65535){var d=c+65535;d<o?u=Mte(l,u,e.subarray(c,d)):(l[c]=i,u=Mte(l,u,e.subarray(c,o)))}else{for(var h=Ite[t-1],f=h>>>13,p=8191&h,m=(1<<n)-1,v=new nte(32768),g=new nte(m+1),y=Math.ceil(n/3),b=2*y,x=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<b)&m},w=new rte(25e3),k=new nte(288),S=new nte(32),T=0,E=0,C=(c=0,0),_=0,M=0;c<o;++c){var A=x(c),I=32767&c,N=g[A];if(v[I]=N,g[A]=I,_<=c){var R=o-c;if((T>7e3||C>24576)&&R>423){u=Ate(e,l,0,w,k,S,E,C,M,c-M,u),C=T=E=0,M=c;for(var O=0;O<286;++O)k[O]=0;for(O=0;O<30;++O)S[O]=0}var D=2,L=0,P=p,F=I-N&32767;if(R>2&&A==x(c-F))for(var j=Math.min(f,R)-1,z=Math.min(32767,c),B=Math.min(258,R);F<=z&&--P&&I!=N;){if(e[c+D]==e[c+D-F]){for(var U=0;U<B&&e[c+U]==e[c+U-F];++U);if(U>D){if(D=U,L=F,U>j)break;var W=Math.min(F,U-2),V=0;for(O=0;O<W;++O){var Z=c-F+O+32768&32767,H=Z-v[Z]+32768&32767;H>V&&(V=H,N=Z)}}}F+=(I=N)-(N=v[I])+32768&32767}if(L){w[C++]=268435456|cte[D]<<18|dte[L];var G=31&cte[D],q=31&dte[L];E+=ate[G]+ite[q],++k[257+G],++S[q],_=c+D,++T}else w[C++]=e[c],++k[e[c]]}}u=Ate(e,l,i,w,k,S,E,C,M,c-M,u),!i&&7&u&&(u=Mte(l,u+1,Nte))}return wte(s,0,r+xte(u)+a)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!a)},Lte=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},Pte=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function Fte(e,t){return Dte(e,t||{},0,0)}var jte=function e(t,n,r,a){for(var i in t){var o=t[i],s=n+i;o instanceof tte?r[s]=[o,a]:Array.isArray(o)?r[s]=[o[0],Lte(a,o[1])]:e(o,s+"/",r,a)}},zte="undefined"!=typeof TextEncoder&&new TextEncoder,Bte="undefined"!=typeof TextDecoder&&new TextDecoder;try{Bte.decode(Nte,{stream:!0})}catch(BK){}function Ute(e,t){if(t){for(var n=new tte(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(zte)return zte.encode(e);var a=e.length,i=new tte(e.length+(e.length>>1)),o=0,s=function(e){i[o++]=e};for(r=0;r<a;++r){if(o+5>i.length){var l=new tte(o+8+(a-r<<1));l.set(i),i=l}var u=e.charCodeAt(r);u<128||t?s(u):u<2048?(s(192|u>>6),s(128|63&u)):u>55295&&u<57344?(s(240|(u=65536+(1047552&u)|1023&e.charCodeAt(++r))>>18),s(128|u>>12&63),s(128|u>>6&63),s(128|63&u)):(s(224|u>>12),s(128|u>>6&63),s(128|63&u))}return wte(i,0,o)}var Wte=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},Vte=function(e,t,n,r,a,i,o,s){var l=r.length,u=n.extra,c=s&&s.length,d=Wte(u);Pte(e,t,null!=o?33639248:67324752),t+=4,null!=o&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(null==i&&8),e[t++]=a&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var h=new Date(null==n.mtime?Date.now():n.mtime),f=h.getFullYear()-1980;if(f<0||f>119)throw"date not in range 1980-2099";if(Pte(e,t,f<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>>1),t+=4,null!=i&&(Pte(e,t,n.crc),Pte(e,t+4,i),Pte(e,t+8,n.size)),Pte(e,t+12,l),Pte(e,t+14,d),t+=16,null!=o&&(Pte(e,t,c),Pte(e,t+6,n.attrs),Pte(e,t+10,o),t+=14),e.set(r,t),t+=l,d)for(var p in u){var m=u[p],v=m.length;Pte(e,t,+p),Pte(e,t+2,v),e.set(m,t+4),t+=4+v}return c&&(e.set(s,t),t+=c),t};function Zte(e,t){t||(t={});var n={},r=[];jte(e,"",n,t);var a=0,i=0;for(var o in n){var s=n[o],l=s[0],u=s[1],c=0==u.level?0:8,d=(S=Ute(o)).length,h=u.comment,f=h&&Ute(h),p=f&&f.length,m=Wte(u.extra);if(d>65535)throw"filename too long";var v=c?Fte(l,u):l,g=v.length,y=Ote();y.p(l),r.push(Lte(u,{size:l.length,crc:y.d(),c:v,f:S,m:f,u:d!=o.length||f&&h.length!=p,o:a,compression:c})),a+=30+d+m+g,i+=76+2*(d+m)+(p||0)+g}for(var b=new tte(i+22),x=a,w=i-a,k=0;k<r.length;++k){var S=r[k];Vte(b,S.o,S,S.f,S.u,S.c.length);var T=30+S.f.length+Wte(S.extra);b.set(S.c,S.o+T),Vte(b,a,S,S.f,S.u,S.c.length,S.o,S.m),a+=16+T+(S.m?S.m.length:0)}return function(e,t,n,r,a){Pte(e,t,101010256),Pte(e,t+8,n),Pte(e,t+10,n),Pte(e,t+12,r),Pte(e,t+16,a)}(b,a,r.length,w,x),b}var Hte=function(){function e(){M(this,e)}return(0,A.Z)(e,[{key:"parse",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a,i,o,s,l,u,c,d,h;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n={})["model.usda"]=null,r='#usda 1.0\n(\n    customLayerData = {\n        string creator = "Three.js USDZExporter"\n    }\n    metersPerUnit = 1\n    upAxis = "Y"\n)\n\n',a={},i={},t.traverseVisible((function(e){if(e.isMesh&&e.material.isMeshStandardMaterial){var t=e.geometry,i=e.material,o="geometries/Geometry_"+t.id+".usd";if(!(o in n)){var s=function(e){return'\ndef "Geometry"\n{\n  '.concat(function(e){var t=e.attributes,n=t.position.count;return'\n    def Mesh "'.concat("Geometry",'"\n    {\n        int[] faceVertexCounts = [').concat(function(e){var t=null!==e.index?e.index.array.length:e.attributes.position.count;return Array(t/3).fill(3).join(", ")}(e),"]\n        int[] faceVertexIndices = [").concat(function(e){if(null!==e.index)return e.index.array.join(", ");for(var t=[],n=e.attributes.position.count,r=0;r<n;r++)t.push(r);return t.join(", ")}(e),"]\n        normal3f[] normals = [").concat(Xte(t.normal,n),'] (\n            interpolation = "vertex"\n        )\n        point3f[] points = [').concat(Xte(t.position,n),"]\n        float2[] primvars:st = [").concat(function(e,t){if(void 0===e)return console.warn("USDZExporter: UVs missing."),Array(t).fill("(0, 0)").join(", ");for(var n=[],r=e.array,a=0;a<r.length;a+=2)n.push("(".concat(r[a+0].toPrecision(7),", ").concat(1-r[a+1].toPrecision(7),")"));return n.join(", ")}(t.uv,n),'] (\n            interpolation = "vertex"\n        )\n        uniform token subdivisionScheme = "none"\n    }\n')}(e),"\n}\n")}(t);n[o]=function(e){var t='#usda 1.0\n(\n    customLayerData = {\n        string creator = "Three.js USDZExporter"\n    }\n    metersPerUnit = 1\n    upAxis = "Y"\n)\n\n';return Ute(t+=e)}(s)}i.uuid in a||(a[i.uuid]=i),r+=function(e,t,n){var r="Object_"+e.id,a=function(e){var t=e.elements;return"( ".concat(qte(t,0),", ").concat(qte(t,4),", ").concat(qte(t,8),", ").concat(qte(t,12)," )")}(e.matrixWorld);return e.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",e),'def Xform "'.concat(r,'" (\n    prepend references = @./geometries/Geometry_').concat(t.id,".usd@</Geometry>\n)\n{\n    matrix4d xformOp:transform = ").concat(a,'\n    uniform token[] xformOpOrder = ["xformOp:transform"]\n\n    rel material:binding = </Materials/Material_').concat(n.id,">\n}\n\n")}(e,t,i)}})),r+=function(e,t){var n=[];for(var r in e){var a=e[r];n.push(Yte(a,t))}return'def "Materials"\n{\n'.concat(n.join(""),"\n}\n\n")}(a,i),n["model.usda"]=Ute(r),r=null,o=Un().mark((function e(){var t,r,a,o,l;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i[s],r=s.split("_")[1],a=1023===t.format,o=Gte(t.image,r),e.next=6,new Promise((function(e){return o.toBlob(e,a?"image/png":"image/jpeg",1)}));case 6:return l=e.sent,e.t0=Uint8Array,e.next=10,l.arrayBuffer();case 10:e.t1=e.sent,n["textures/Texture_".concat(s,".").concat(a?"png":"jpg")]=new e.t0(e.t1);case 12:case"end":return e.stop()}}),e)})),e.t0=Un().keys(i);case 7:if((e.t1=e.t0()).done){e.next=12;break}return s=e.t1.value,e.delegateYield(o(),"t2",10);case 10:e.next=7;break;case 12:for(u in l=0,n)c=n[u],l+=34+u.length,4!==(d=63&l)&&(h=new Uint8Array(64-d),n[u]=[c,{extra:{12345:h}}]),l=c.length;return e.abrupt("return",Zte(n,{level:0}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Gte(e,t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var n=1024/Math.max(e.width,e.height),r=document.createElement("canvas");r.width=e.width*Math.min(1,n),r.height=e.height*Math.min(1,n);var a=r.getContext("2d");if(a.drawImage(e,0,0,r.width,r.height),void 0!==t){for(var i=parseInt(t,16),o=(i>>16&255)/255,s=(i>>8&255)/255,l=(255&i)/255,u=a.getImageData(0,0,r.width,r.height),c=u.data,d=0;d<c.length;d+=4)c[d+0]=c[d+0]*o,c[d+1]=c[d+1]*s,c[d+2]=c[d+2]*l;a.putImageData(u,0,0)}return r}}function qte(e,t){return"(".concat(e[t+0],", ").concat(e[t+1],", ").concat(e[t+2],", ").concat(e[t+3],")")}function Xte(e,t){if(void 0===e)return console.warn("USDZExporter: Normals missing."),Array(t).fill("(0, 0, 0)").join(", ");for(var n=[],r=e.array,a=0;a<r.length;a+=3)n.push("(".concat(r[a+0].toPrecision(7),", ").concat(r[a+1].toPrecision(7),", ").concat(r[a+2].toPrecision(7),")"));return n.join(", ")}function Yte(e,t){var n="            ",r=[],a=[];function i(n,r,a){var i=n.id+(a?"_"+a.getHexString():""),o=1023===n.format;return t[i]=n,'\n        def Shader "Transform2d_'.concat(r,'" (\n            sdrMetadata = {\n                string role = "math"\n            }\n        )\n        {\n            uniform token info:id = "UsdTransform2d"\n            float2 inputs:in.connect = </Materials/Material_').concat(e.id,"/uvReader_st.outputs:result>\n            float2 inputs:scale = ").concat($te(n.repeat),"\n            float2 inputs:translation = ").concat($te(n.offset),'\n            float2 outputs:result\n        }\n\n        def Shader "Texture_').concat(n.id,"_").concat(r,'"\n        {\n            uniform token info:id = "UsdUVTexture"\n            asset inputs:file = @textures/Texture_').concat(i,".").concat(o?"png":"jpg","@\n            float2 inputs:st.connect = </Materials/Material_").concat(e.id,"/Transform2d_").concat(r,'.outputs:result>\n            token inputs:wrapS = "repeat"\n            token inputs:wrapT = "repeat"\n            float outputs:r\n            float outputs:g\n            float outputs:b\n            float3 outputs:rgb\n        }')}return null!==e.map?(r.push("".concat(n,"color3f inputs:diffuseColor.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.map.id,"_diffuse.outputs:rgb>")),a.push(i(e.map,"diffuse",e.color))):r.push("".concat(n,"color3f inputs:diffuseColor = ").concat(Kte(e.color))),null!==e.emissiveMap?(r.push("".concat(n,"color3f inputs:emissiveColor.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.emissiveMap.id,"_emissive.outputs:rgb>")),a.push(i(e.emissiveMap,"emissive"))):e.emissive.getHex()>0&&r.push("".concat(n,"color3f inputs:emissiveColor = ").concat(Kte(e.emissive))),null!==e.normalMap&&(r.push("".concat(n,"normal3f inputs:normal.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.normalMap.id,"_normal.outputs:rgb>")),a.push(i(e.normalMap,"normal"))),null!==e.aoMap&&(r.push("".concat(n,"float inputs:occlusion.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.aoMap.id,"_occlusion.outputs:r>")),a.push(i(e.aoMap,"occlusion"))),null!==e.roughnessMap&&1===e.roughness?(r.push("".concat(n,"float inputs:roughness.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.roughnessMap.id,"_roughness.outputs:g>")),a.push(i(e.roughnessMap,"roughness"))):r.push("".concat(n,"float inputs:roughness = ").concat(e.roughness)),null!==e.metalnessMap&&1===e.metalness?(r.push("".concat(n,"float inputs:metallic.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.metalnessMap.id,"_metallic.outputs:b>")),a.push(i(e.metalnessMap,"metallic"))):r.push("".concat(n,"float inputs:metallic = ").concat(e.metalness)),null!==e.alphaMap?(r.push("".concat(n,"float inputs:opacity.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.alphaMap.id,"_opacity.outputs:r>")),r.push("".concat(n,"float inputs:opacityThreshold = 0.0001")),a.push(i(e.alphaMap,"opacity"))):r.push("".concat(n,"float inputs:opacity = ").concat(e.opacity)),e.isMeshPhysicalMaterial&&(r.push("".concat(n,"float inputs:clearcoat = ").concat(e.clearcoat)),r.push("".concat(n,"float inputs:clearcoatRoughness = ").concat(e.clearcoatRoughness)),r.push("".concat(n,"float inputs:ior = ").concat(e.ior))),'\n    def Material "Material_'.concat(e.id,'"\n    {\n        def Shader "PreviewSurface"\n        {\n            uniform token info:id = "UsdPreviewSurface"\n').concat(r.join("\n"),"\n            int inputs:useSpecularWorkflow = 0\n            token outputs:surface\n        }\n\n        token outputs:surface.connect = </Materials/Material_").concat(e.id,'/PreviewSurface.outputs:surface>\n        token inputs:frame:stPrimvarName = "st"\n\n        def Shader "uvReader_st"\n        {\n            uniform token info:id = "UsdPrimvarReader_float2"\n            token inputs:varname.connect = </Materials/Material_').concat(e.id,".inputs:frame:stPrimvarName>\n            float2 inputs:fallback = (0.0, 0.0)\n            float2 outputs:result\n        }\n\n").concat(a.join("\n"),"\n\n    }\n")}function Kte(e){return"(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")}function $te(e){return"(".concat(e.x,", ").concat(e.y,")")}var Jte,Qte,ene,tne,nne=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},rne=!1,ane=!1,ine=(Jte=["quick-look","scene-viewer","webxr","none"],function(e){try{var t,n=S7(e),r=(n.length?n[0].terms:[]).filter((function(e){return e&&"ident"===e.type})).map((function(e){return e.value})).filter((function(e){return Jte.indexOf(e)>-1})),a=new Set,i=G(r);try{for(i.s();!(t=i.n()).done;){var o=t.value;a.add(o)}}catch(_ke){i.e(_ke)}finally{i.f()}return a}catch(e){}return new Set}),one="quick-look",sne="scene-viewer",lne="webxr",une="none",cne=Symbol("arButtonContainer"),dne=Symbol("enterARWithWebXR"),hne=Symbol("openSceneViewer"),fne=Symbol("openIOSARQuickLook"),pne=Symbol("canActivateAR"),mne=Symbol("arMode"),vne=Symbol("arModes"),gne=Symbol("arAnchor"),yne=Symbol("preload"),bne=Symbol("onARButtonContainerClick"),xne=Symbol("onARStatus"),wne=Symbol("onARTracking"),kne=Symbol("onARTap"),Sne=Symbol("selectARMode"),Tne=Symbol("triggerLoad"),Ene=Symbol("evaluate"),Cne=Symbol("lastValue"),_ne=function(){function e(){M(this,e),this[Qte]=null}return(0,A.Z)(e,[{key:"isConstant",get:function(){return!1}},{key:"evaluate",value:function(){return this.isConstant&&null!=this[Cne]||(this[Cne]=this[Ene]()),this[Cne]}}],[{key:"evaluatableFor",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N7;if(t instanceof e)return t;if("number"===t.type)return"%"===t.unit?new Dne(t,n):t;switch(t.name.value){case"calc":return new zne(t,n);case"env":return new Pne(t)}return N7}},{key:"evaluate",value:function(t){return t instanceof e?t.evaluate():t}},{key:"isConstant",value:function(t){return!(t instanceof e)||t.isConstant}},{key:"applyIntrinsics",value:function(e,t){var n=t.basis,r=t.keywords,a=r.auto;return n.map((function(t,n){var i=null==a[n]?t:a[n],o=e[n]?e[n]:i;if("ident"===o.type){var s=o.value;s in r&&(o=r[s][n])}return null!=o&&"ident"!==o.type||(o=i),"%"===o.unit?k7(o.number/100*t.number,t.unit):(o=D7(o,t)).unit!==t.unit?t:o}))}}]),e}();Qte=Cne;var Mne,Ane,Ine,Nne,Rne=Symbol("percentage"),One=Symbol("basis"),Dne=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this))[Rne]=e,a[One]=r,a}return(0,A.Z)(n,[{key:"isConstant",get:function(){return!0}},{key:Ene,value:function(){return k7(this[Rne].number/100*this[One].number,this[One].unit)}}]),n}(_ne),Lne=Symbol("identNode"),Pne=function(e,t){N(r,e);var n=F(r);function r(e){var t;M(this,r),(t=n.call(this))[ene]=null;var a=e.arguments.length?e.arguments[0].terms[0]:null;return null!=a&&"ident"===a.type&&(t[Lne]=a),t}return(0,A.Z)(r,[{key:"isConstant",get:function(){return!1}},{key:t,value:function(){return null!=this[Lne]&&"window-scroll-y"===this[Lne].value?{type:"number",number:window.pageYOffset/(Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight)||0,unit:null}:N7}}]),r}(_ne,(ene=Lne,Ene)),Fne=/[\*\/]/,jne=Symbol("evalutor"),zne=function(e,t){N(r,e);var n=F(r);function r(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N7;if(M(this,r),(t=n.call(this))[tne]=null,1!==e.arguments.length)return P(t);for(var i=e.arguments[0].terms.slice(),o=[];i.length;){var s=i.shift();if(o.length>0){var l=o[o.length-1];if("operator"===l.type&&Fne.test(l.value)){var u=o.pop(),c=o.pop();if(null==c)return P(t);o.push(new Vne(u,_ne.evaluatableFor(c,a),_ne.evaluatableFor(s,a)));continue}}o.push("operator"===s.type?s:_ne.evaluatableFor(s,a))}for(;o.length>2;){var d=o.splice(0,3),h=(0,U.Z)(d,3),f=h[0],p=h[1],m=h[2];if("operator"!==p.type)return P(t);o.unshift(new Vne(p,_ne.evaluatableFor(f,a),_ne.evaluatableFor(m,a)))}return 1===o.length&&(t[jne]=o[0]),P(t)}return(0,A.Z)(r,[{key:"isConstant",get:function(){return null==this[jne]||_ne.isConstant(this[jne])}},{key:t,value:function(){return null!=this[jne]?_ne.evaluate(this[jne]):N7}}]),r}(_ne,(tne=jne,Ene)),Bne=Symbol("operator"),Une=Symbol("left"),Wne=Symbol("right"),Vne=function(e){N(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this))[Bne]=e,i[Une]=r,i[Wne]=a,i}return(0,A.Z)(n,[{key:"isConstant",get:function(){return _ne.isConstant(this[Une])&&_ne.isConstant(this[Wne])}},{key:Ene,value:function(){var e=D7(_ne.evaluate(this[Une])),t=D7(_ne.evaluate(this[Wne])),n=e.number,r=e.unit,a=t.number,i=t.unit;if(null!=i&&null!=r&&i!=r)return N7;var o,s=r||i;switch(this[Bne].value){case"+":o=n+a;break;case"-":o=n-a;break;case"/":o=n/a;break;case"*":o=n*a;break;default:return N7}return{type:"number",number:o,unit:s}}}]),n}(_ne),Zne=Symbol("evaluatables"),Hne=Symbol("intrinsics"),Gne=function(e){N(n,e);var t=F(n);function n(e,r){var a;M(this,n),(a=t.call(this))[Hne]=r;var i=e[0],o=null!=i?i.terms:[];return a[Zne]=r.basis.map((function(e,t){var n=o[t];return null==n?{type:"ident",value:"auto"}:"ident"===n.type?n:_ne.evaluatableFor(n,e)})),a}return(0,A.Z)(n,[{key:"isConstant",get:function(){var e,t=G(this[Zne]);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!_ne.isConstant(n))return!1}}catch(_ke){t.e(_ke)}finally{t.f()}return!0}},{key:Ene,value:function(){var e=this[Zne].map((function(e){return _ne.evaluate(e)}));return _ne.applyIntrinsics(e,this[Hne]).map((function(e){return e.number}))}}]),n}(_ne),qne=Symbol("instances"),Xne=Symbol("activateListener"),Yne=Symbol("deactivateListener"),Kne=Symbol("notifyInstances"),$ne=Symbol("notify"),Jne=Symbol("callback"),Qne=function(e){function t(e){M(this,t),this[Jne]=e}return(0,A.Z)(t,[{key:"observe",value:function(){0===t[qne].size&&t[Xne](),t[qne].add(this)}},{key:"disconnect",value:function(){t[qne].delete(this),0===t[qne].size&&t[Yne]()}},{key:$ne,value:function(){this[Jne]()}}],[{key:Kne,value:function(){var e,n=G(t[qne]);try{for(n.s();!(e=n.n()).done;){e.value[$ne]()}}catch(_ke){n.e(_ke)}finally{n.f()}}},{key:e,value:function(){window.addEventListener("scroll",this[Kne],{passive:!0})}},{key:Yne,value:function(){window.removeEventListener("scroll",this[Kne])}}]),t}((Mne=qne,Xne));Qne[Mne]=new Set;var ere=Symbol("computeStyleCallback"),tre=Symbol("astWalker"),nre=Symbol("dependencies"),rre=Symbol("onScroll"),are=function(){function e(t){var n=this;M(this,e),this[Ane]={},this[Ine]=new I7(["function"]),this[Nne]=function(){n[ere]({relatedState:"window-scroll"})},this[ere]=t}return(0,A.Z)(e,[{key:"observeEffectsFor",value:function(e){var t=this,n={},r=this[nre];for(var a in this[tre].walk(e,(function(e){var a=e.name,i=e.arguments[0].terms[0];if("env"===a.value&&null!=i&&"ident"===i.type&&"window-scroll-y"===i.value&&null==n["window-scroll"]){var o="window-scroll"in r?r["window-scroll"]:new Qne(t[rre]);o.observe(),delete r["window-scroll"],n["window-scroll"]=o}})),r)r[a].disconnect();this[nre]=n}},{key:"dispose",value:function(){for(var e in this[nre])this[nre][e].disconnect()}}]),e}();Ane=nre,Ine=tre,Nne=rre;var ire,ore,sre=function(e){var t=e.observeEffects||!1,n=e.intrinsics instanceof Function?e.intrinsics:function(){return e.intrinsics};return function(r,a){var i,o=r.updated,s=r.connectedCallback,l=r.disconnectedCallback,u=Symbol("".concat(a,"StyleEffector")),c=Symbol("".concat(a,"StyleEvaluator")),d=Symbol("".concat(a,"UpdateEvaluator")),h=Symbol("".concat(a,"EvaluateAndSync"));Object.defineProperties(r,(i={},(0,_t.Z)(i,u,{value:null,writable:!0}),(0,_t.Z)(i,c,{value:null,writable:!0}),(0,_t.Z)(i,d,{value:function(){var e=this,r=S7(this[a]);this[c]=new Gne(r,n(this)),null==this[u]&&t&&(this[u]=new are((function(){return e[h]()}))),null!=this[u]&&this[u].observeEffectsFor(r)}}),(0,_t.Z)(i,h,{value:function(){if(null!=this[c]){var t=this[c].evaluate();this[e.updateHandler](t)}}}),(0,_t.Z)(i,"updated",{value:function(e){e.has(a)&&(this[d](),this[h]()),o.call(this,e)}}),(0,_t.Z)(i,"connectedCallback",{value:function(){s.call(this),this.requestUpdate(a,this[a])}}),(0,_t.Z)(i,"disconnectedCallback",{value:function(){l.call(this),null!=this[u]&&(this[u].dispose(),this[u]=null)}}),i))}},lre=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,interactionPolicy:"always-allow",touchAction:"pan-y"}),ure=Math.PI/8,cre="user-interaction",dre=function(e){N(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).camera=e,a.element=r,a.sensitivity=1,a._interactionEnabled=!1,a._disableZoom=!1,a.isUserChange=!1,a.isUserPointing=!1,a.spherical=new L6,a.goalSpherical=new L6,a.thetaDamper=new w7,a.phiDamper=new w7,a.radiusDamper=new w7,a.logFov=Math.log(lre.maximumFieldOfView),a.goalLogFov=a.logFov,a.fovDamper=new w7,a.touchMode=null,a.lastPointerPosition={clientX:0,clientY:0},a.touchDecided=!1,a.onMouseMove=function(e){a.handleSinglePointerMove(e),e.cancelable&&e.preventDefault()},a.onTouchMove=function(e){null!==a.touchMode&&(a.touchMode(e),null!==a.touchMode&&e.cancelable&&e.preventDefault())},a.touchModeZoom=function(e){var t=e.targetTouches;if(a.lastTouches.length>1&&t.length>1){var n=.04*(a.twoTouchDistance(a.lastTouches[0],a.lastTouches[1])-a.twoTouchDistance(t[0],t[1]))/10;a.userAdjustOrbit(0,0,n),a.lastTouches=t}},a.touchModeRotate=function(e){var t=e.targetTouches,n=a._options.touchAction;if(!a.touchDecided&&"none"!==n){a.touchDecided=!0;var r=t[0],i=r.clientX,o=r.clientY,s=Math.abs(i-a.lastPointerPosition.clientX),l=Math.abs(o-a.lastPointerPosition.clientY);if("pan-y"===n&&l>s||"pan-x"===n&&s>l)return void(a.touchMode=null)}a.handleSinglePointerMove(t[0]),a.lastTouches=t},a.onMouseDown=function(e){a.onPointerDown((function(){self.addEventListener("mousemove",a.onMouseMove),self.addEventListener("mouseup",a.onMouseUp,{once:!0}),a.handleSinglePointerDown(e)}))},a.onTouchStart=function(e){a.onPointerDown((function(){var t=e.targetTouches,n=e.changedTouches,r=e.touches;t.length===n.length&&(a.touchMode=null,a.touchDecided=!1),t.length===r.length&&a.onTouchChange(e)}))},a.onMouseUp=function(e){self.removeEventListener("mousemove",a.onMouseMove),a.onPointerUp()},a.onTouchEnd=function(e){e.targetTouches.length>0&&null!==a.touchMode&&a.onTouchChange(e),a.onPointerUp()},a.onWheel=function(e){if(a.canInteract){var t=e.deltaY*(1==e.deltaMode?18:1)*.04/30;a.userAdjustOrbit(0,0,t),e.cancelable&&e.preventDefault()}},a.onKeyDown=function(e){var t=!1;switch(e.keyCode){case 33:t=!0,a.userAdjustOrbit(0,0,.04);break;case 34:t=!0,a.userAdjustOrbit(0,0,-.04);break;case 38:t=!0,a.userAdjustOrbit(0,-ure,0);break;case 40:t=!0,a.userAdjustOrbit(0,ure,0);break;case 37:t=!0,a.userAdjustOrbit(-ure,0,0);break;case 39:t=!0,a.userAdjustOrbit(ure,0,0)}t&&e.cancelable&&e.preventDefault()},a._options=Object.assign({},lre),a.setOrbit(0,Math.PI/2,1),a.setFieldOfView(100),a.jumpToGoal(),a}return(0,A.Z)(n,[{key:"interactionEnabled",get:function(){return this._interactionEnabled}},{key:"enableInteraction",value:function(){if(!1===this._interactionEnabled){var e=this.element;e.addEventListener("mousedown",this.onMouseDown),this._disableZoom||e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("touchstart",this.onTouchStart,{passive:!0}),e.addEventListener("touchmove",this.onTouchMove,{passive:!1}),e.addEventListener("touchend",this.onTouchEnd),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}},{key:"disableInteraction",value:function(){if(!0===this._interactionEnabled){var e=this.element;self.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),this._disableZoom||e.removeEventListener("wheel",this.onWheel),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchmove",this.onTouchMove),self.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("touchend",this.onTouchEnd),e.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}},{key:"options",get:function(){return this._options}},{key:"disableZoom",set:function(e){this._disableZoom!=e&&(this._disableZoom=e,!0===e?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}},{key:"getCameraSpherical",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new L6).copy(this.spherical)}},{key:"getFieldOfView",value:function(){return this.camera.fov}},{key:"applyOptions",value:function(e){Object.assign(this._options,e),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}},{key:"updateNearFar",value:function(e,t){this.camera.near=Math.max(e,t/1e3),this.camera.far=t,this.camera.updateProjectionMatrix()}},{key:"updateAspect",value:function(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}},{key:"setOrbit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.goalSpherical.theta,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.goalSpherical.phi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.goalSpherical.radius,r=this._options,a=r.minimumAzimuthalAngle,i=r.maximumAzimuthalAngle,o=r.minimumPolarAngle,s=r.maximumPolarAngle,l=r.minimumRadius,u=r.maximumRadius,c=this.goalSpherical,d=c.theta,h=c.phi,f=c.radius,p=g7(e,a,i);isFinite(a)||isFinite(i)||(this.spherical.theta=this.wrapAngle(this.spherical.theta-p)+p);var m=g7(t,o,s),v=g7(n,l,u);return(p!==d||m!==h||v!==f)&&(this.goalSpherical.theta=p,this.goalSpherical.phi=m,this.goalSpherical.radius=v,this.goalSpherical.makeSafe(),this.isUserChange=!1,!0)}},{key:"setRadius",value:function(e){this.goalSpherical.radius=e,this.setOrbit()}},{key:"setFieldOfView",value:function(e){var t=this._options,n=t.minimumFieldOfView,r=t.maximumFieldOfView;e=g7(e,n,r),this.goalLogFov=Math.log(e)}},{key:"setDamperDecayTime",value:function(e){this.thetaDamper.setDecayTime(e),this.phiDamper.setDecayTime(e),this.radiusDamper.setDecayTime(e),this.fovDamper.setDecayTime(e)}},{key:"adjustOrbit",value:function(e,t,n){var r=this.goalSpherical,a=r.theta,i=r.phi,o=r.radius,s=this._options,l=s.minimumRadius,u=s.maximumRadius,c=s.minimumFieldOfView,d=s.maximumFieldOfView,h=this.spherical.theta-a,f=Math.PI-.001,p=a-g7(e,-f-h,f-h),m=i-t,v=0===n?0:((n>0?u:l)-o)/(Math.log(n>0?d:c)-this.goalLogFov),g=o+n*Math.min(isFinite(v)?v:1/0,u-l);if(this.setOrbit(p,m,g),0!==n){var y=this.goalLogFov+n;this.setFieldOfView(Math.exp(y))}}},{key:"jumpToGoal",value:function(){this.update(0,1e4)}},{key:"update",value:function(e,t){if(!this.isStationary()){var n=this._options,r=n.maximumPolarAngle,a=n.maximumRadius,i=this.spherical.theta-this.goalSpherical.theta;Math.abs(i)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=2*Math.sign(i)*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,t,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,t,r),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,t,a),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,t,1),this.moveCamera()}}},{key:"updateTouchActionStyle",value:function(){var e=this.element.style;if(this._interactionEnabled){var t=this._options.touchAction;this._disableZoom&&"none"!==t?e.touchAction="manipulation":e.touchAction=t}else e.touchAction=""}},{key:"isStationary",value:function(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}},{key:"moveCamera",value:function(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new hQ(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix());var e=this.isUserChange?cre:"none";this.dispatchEvent({type:"change",source:e})}},{key:"canInteract",get:function(){return"allow-when-focused"==this._options.interactionPolicy?this.element.getRootNode().activeElement===this.element:"always-allow"===this._options.interactionPolicy}},{key:"userAdjustOrbit",value:function(e,t,n){this.adjustOrbit(e*this.sensitivity,t*this.sensitivity,n),this.isUserChange=!0,this.dispatchEvent({type:"change",source:cre})}},{key:"wrapAngle",value:function(e){var t=(e+Math.PI)/(2*Math.PI);return 2*(t-Math.floor(t))*Math.PI-Math.PI}},{key:"pixelLengthToSphericalAngle",value:function(e){return 2*Math.PI*e/this.element.clientHeight}},{key:"twoTouchDistance",value:function(e,t){var n=e.clientX,r=e.clientY,a=t.clientX-n,i=t.clientY-r;return Math.sqrt(a*a+i*i)}},{key:"handleSinglePointerMove",value:function(e){var t=e.clientX,n=e.clientY,r=this.pixelLengthToSphericalAngle(t-this.lastPointerPosition.clientX),a=this.pixelLengthToSphericalAngle(n-this.lastPointerPosition.clientY);this.lastPointerPosition.clientX=t,this.lastPointerPosition.clientY=n,!1===this.isUserPointing&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start",pointer:Object.assign({},e)})),this.userAdjustOrbit(r,a,0)}},{key:"onPointerDown",value:function(e){this.canInteract&&(this.isUserPointing=!1,e())}},{key:"onTouchChange",value:function(e){var t=e.targetTouches;2===t.length?(this.touchMode=this._disableZoom||this.touchDecided&&null===this.touchMode?null:this.touchModeZoom,this.touchDecided=!0):(this.touchMode=this.touchModeRotate,this.handleSinglePointerDown(t[0])),this.lastTouches=t}},{key:"handleSinglePointerDown",value:function(e){this.lastPointerPosition.clientX=e.clientX,this.lastPointerPosition.clientY=e.clientY,this.element.style.cursor="grabbing"}},{key:"onPointerUp",value:function(){this.element.style.cursor="grab",this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end",pointer:Object.assign({},this.lastPointerPosition)})}}]),n}($$),hre=function(e){return e<.5?2*e*e:(4-2*e)*e-1},fre=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hre;return function(r){return e+(t-e)*n(r)}},pre=function(e,t){for(var n=[],r=[],a=e,i=0;i<t.length;++i){var o=t[i],s=o.value,l=o.frames,u=o.ease||hre,c=fre(a,s,u);n.push(c),r.push(l),a=s}return function(e,t){var n=t.reduce((function(e,t){return e+t}),0),r=t.map((function(e){return e/n}));return function(t){for(var n=0,a=1/0,i=function(){return 0},o=0;o<r.length&&(a=r[o],i=e[o],!(t<=n+a));++o)n+=a;return i((t-n)/a)}}(n,r)},mre=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},vre=pre(0,[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]),gre=pre(0,[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]),yre=1.1*z7,bre=["front","right","back","left"],xre=["upper-","","lower-"],wre="auto",kre="when-focused",Sre="wiggle",Tre=function(e){return{basis:[k7(e[Kre]*Math.PI/180,"rad")],keywords:{auto:[null]}}},Ere={basis:[R7(k7(25,"deg"))],keywords:{auto:[null]}},Cre=function(e){var t=e[Iee];return{basis:[R7(k7(45,"deg"))],keywords:{auto:[k7(t.framedFieldOfView,"deg")]}}},_re=function(){var e=S7("0deg 75deg 105%")[0].terms,t=D7(e[0]),n=D7(e[1]);return function(e){var r=e[Iee].idealCameraDistance;return{basis:[t,n,k7(r,"m")],keywords:{auto:[null,null,k7(105,"%")]}}}}(),Mre=function(e){var t=yre*e[Iee].idealCameraDistance;return{basis:[k7(-1/0,"rad"),k7(Math.PI/8,"rad"),k7(t,"m")],keywords:{auto:[null,null,null]}}},Are=function(e){var t=_re(e),n=new Gne([],t).evaluate()[2];return{basis:[k7(1/0,"rad"),k7(Math.PI-Math.PI/8,"rad"),k7(n,"m")],keywords:{auto:[null,null,null]}}},Ire=function(e){var t=e[Iee].boundingBox.getCenter(new EJ);return{basis:[k7(t.x,"m"),k7(t.y,"m"),k7(t.z,"m")],keywords:{auto:[null,null,null]}}},Nre=Math.PI/2,Rre=Math.PI/3,Ore=Nre/2,Dre=2*Math.PI,Lre=Symbol("controls"),Pre=Symbol("promptElement"),Fre=Symbol("promptAnimatedContainer"),jre=Symbol("deferInteractionPrompt"),zre=Symbol("updateAria"),Bre=Symbol("updateCameraForRadius"),Ure=Symbol("onBlur"),Wre=Symbol("onFocus"),Vre=Symbol("onChange"),Zre=Symbol("onPointerChange"),Hre=Symbol("waitingToPromptUser"),Gre=Symbol("userHasInteracted"),qre=Symbol("promptElementVisibleTime"),Xre=Symbol("lastPromptOffset"),Yre=Symbol("focusedTime"),Kre=Symbol("zoomAdjustedFieldOfView"),$re=Symbol("lastSpherical"),Jre=Symbol("jumpCamera"),Qre=Symbol("initialized"),eae=Symbol("maintainThetaPhi"),tae=Symbol("syncCameraOrbit"),nae=Symbol("syncFieldOfView"),rae=Symbol("syncCameraTarget"),aae=Symbol("syncMinCameraOrbit"),iae=Symbol("syncMaxCameraOrbit"),oae=Symbol("syncMinFieldOfView"),sae=Symbol("syncMaxFieldOfView"),lae=Symbol("modelViewerStatusInstance"),uae=Symbol("updateStatus");ire=lae,ore=uae;var cae=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},dae="auto",hae="manual",fae=new(function(e){N(n,e);var t=F(n);function n(){var e;M(this,n),(e=t.call(this))[ire]=null,e.registeredInstanceStatuses=new Map,e.loadingPromises=[],e.statusElement=document.createElement("p"),e.statusUpdateInProgress=!1,e[ore]=v7((function(){return e.updateStatus()}),100);var r=(0,L.Z)(e).statusElement,a=r.style;return r.setAttribute("role","status"),r.classList.add("screen-reader-only"),a.top=a.left="0",a.pointerEvents="none",e}return(0,A.Z)(n,[{key:"registerInstance",value:function(e){if(!this.registeredInstanceStatuses.has(e)){var t=function(){},n=!1===e.loaded&&!!e.src,r=new Promise((function(r){if(n){var a=function t(){r(),e.removeEventListener("load",t),e.removeEventListener("error",t)};e.addEventListener("load",a),e.addEventListener("error",a),t=a}else r()}));this.registeredInstanceStatuses.set(e,{onUnregistered:t}),this.loadingPromises.push(r),null==this.modelViewerStatusInstance&&(this.modelViewerStatusInstance=e)}}},{key:"unregisterInstance",value:function(e){if(this.registeredInstanceStatuses.has(e)){var t=this.registeredInstanceStatuses,n=t.get(e);t.delete(e),n.onUnregistered(),this.modelViewerStatusInstance===e&&(this.modelViewerStatusInstance=t.size>0?function(e){if(null!=e.keys)return e.keys().next().value||null;var t=null;try{e.forEach((function(e,n,r){throw t=n,new Error}))}catch(e){}return t}(t):null)}}},{key:"modelViewerStatusInstance",get:function(){return this[lae]},set:function(e){if(this[lae]!==e){var t=this.statusElement;null!=e&&null!=e.shadowRoot?e.shadowRoot.appendChild(t):null!=t.parentNode&&t.parentNode.removeChild(t),this[lae]=e,this[uae]()}}},{key:"updateStatus",value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.statusUpdateInProgress||0===this.loadingPromises.length){e.next=10;break}this.statusElement.textContent="This page includes one or more 3D models that are loading",this.statusUpdateInProgress=!0,this.dispatchEvent({type:"initial-status-announced"});case 2:if(!this.loadingPromises.length){e.next=9;break}return t=this.loadingPromises,this.loadingPromises=[],e.next=7,Promise.all(t);case 7:e.next=2;break;case 9:this.statusElement.textContent="All 3D models in the page have loaded",this.statusUpdateInProgress=!1,this.dispatchEvent({type:"finished-loading-announced"});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}($$)),pae=Symbol("defaultProgressBarElement"),mae=Symbol("defaultProgressMaskElement"),vae=Symbol("posterContainerElement"),gae=Symbol("defaultPosterElement"),yae=Symbol("posterDismissalSource"),bae=Symbol("hidePoster"),xae=Symbol("modelIsRevealed"),wae=Symbol("updateProgressBar"),kae=Symbol("lastReportedProgress"),Sae=Symbol("transitioned"),Tae=Symbol("onTransitionEnd"),Eae=Symbol("ariaLabelCallToAction"),Cae=Symbol("onClick"),_ae=Symbol("onKeydown"),Mae=Symbol("onProgress"),Aae=function(){function e(){M(this,e),this.pluginCallbacks=[],this.register((function(e){return new zae(e)})),this.register((function(e){return new Bae(e)})),this.register((function(e){return new Uae(e)})),this.register((function(e){return new Wae(e)})),this.register((function(e){return new Vae(e)}))}return(0,A.Z)(e,[{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n){for(var r=new jae,a=[],i=0,o=this.pluginCallbacks.length;i<o;i++)a.push(this.pluginCallbacks[i](r));r.setPlugins(a),r.write(e,t,n)}}]),e}(),Iae=5121,Nae=5123,Rae={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987,1001:33071,1e3:10497,1002:33648},Oae={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"};function Dae(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}function Lae(e){return 4*Math.ceil(e/4)}function Pae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Lae(e.byteLength);if(n!==e.byteLength){var r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==t)for(var a=e.byteLength;a<n;a++)r[a]=t;return r.buffer}return e}var Fae=null,jae=function(){function e(){M(this,e),this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}return(0,A.Z)(e,[{key:"setPlugins",value:function(e){this.plugins=e}},{key:"write",value:function(e,t,n){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e);var r=this;Promise.all(this.pending).then((function(){var e=r.buffers,n=r.json,a=r.options,i=r.extensionsUsed,o=new Blob(e,{type:"application/octet-stream"}),s=Object.keys(i);if(s.length>0&&(n.extensionsUsed=s),n.buffers&&n.buffers.length>0&&(n.buffers[0].byteLength=o.size),!0===a.binary){var l=new window.FileReader;l.readAsArrayBuffer(o),l.onloadend=function(){var e=Pae(l.result),r=new DataView(new ArrayBuffer(8));r.setUint32(0,e.byteLength,!0),r.setUint32(4,5130562,!0);var a=Pae(function(e){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(e).buffer;for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0,r=e.length;n<r;n++){var a=e.charCodeAt(n);t[n]=a>255?32:a}return t.buffer}(JSON.stringify(n)),32),i=new DataView(new ArrayBuffer(8));i.setUint32(0,a.byteLength,!0),i.setUint32(4,1313821514,!0);var o=new ArrayBuffer(12),s=new DataView(o);s.setUint32(0,1179937895,!0),s.setUint32(4,2,!0);var u=12+i.byteLength+a.byteLength+r.byteLength+e.byteLength;s.setUint32(8,u,!0);var c=new Blob([o,i,a,r,e],{type:"application/octet-stream"}),d=new window.FileReader;d.readAsArrayBuffer(c),d.onloadend=function(){t(d.result)}}}else if(n.buffers&&n.buffers.length>0){var u=new window.FileReader;u.readAsDataURL(o),u.onloadend=function(){var e=u.result;n.buffers[0].uri=e,t(n)}}else t(n)}))}},{key:"serializeUserData",value:function(e,t){if(0!==Object.keys(e.userData).length){var n=this.options,r=this.extensionsUsed;try{var a=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&a.gltfExtensions){for(var i in void 0===t.extensions&&(t.extensions={}),a.gltfExtensions)t.extensions[i]=a.gltfExtensions[i],r[i]=!0;delete a.gltfExtensions}Object.keys(a).length>0&&(t.extras=a)}catch(t){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+t.message)}}}},{key:"getUID",value:function(e){return this.uids.has(e)||this.uids.set(e,this.uid++),this.uids.get(e)}},{key:"isNormalizedNormalAttribute",value:function(e){if(this.cache.attributesNormalized.has(e))return!1;for(var t=new EJ,n=0,r=e.count;n<r;n++)if(Math.abs(t.fromBufferAttribute(e,n).length()-1)>5e-4)return!1;return!0}},{key:"createNormalizedNormalAttribute",value:function(e){var t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);for(var n=e.clone(),r=new EJ,a=0,i=n.count;a<i;a++)r.fromBufferAttribute(n,a),0===r.x&&0===r.y&&0===r.z?r.setX(1):r.normalize(),n.setXYZ(a,r.x,r.y,r.z);return t.attributesNormalized.set(e,n),n}},{key:"applyTextureTransform",value:function(e,t){var n=!1,r={};0===t.offset.x&&0===t.offset.y||(r.offset=t.offset.toArray(),n=!0),0!==t.rotation&&(r.rotation=t.rotation,n=!0),1===t.repeat.x&&1===t.repeat.y||(r.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}},{key:"processBuffer",value:function(e){var t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}},{key:"processBufferView",value:function(e,t,n,r,a){var i,o=this.json;o.bufferViews||(o.bufferViews=[]),i=t===Iae?1:t===Nae?2:4;for(var s=Lae(r*e.itemSize*i),l=new DataView(new ArrayBuffer(s)),u=0,c=n;c<n+r;c++)for(var d=0;d<e.itemSize;d++){var h=void 0;e.itemSize>4?h=e.array[c*e.itemSize+d]:0===d?h=e.getX(c):1===d?h=e.getY(c):2===d?h=e.getZ(c):3===d&&(h=e.getW(c)),5126===t?l.setFloat32(u,h,!0):5125===t?l.setUint32(u,h,!0):t===Nae?l.setUint16(u,h,!0):t===Iae&&l.setUint8(u,h),u+=i}var f={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:s};return void 0!==a&&(f.target=a),34962===a&&(f.byteStride=e.itemSize*i),this.byteOffset+=s,o.bufferViews.push(f),{id:o.bufferViews.length-1,byteLength:0}}},{key:"processBufferViewImage",value:function(e){var t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise((function(r){var a=new window.FileReader;a.readAsArrayBuffer(e),a.onloadend=function(){var e=Pae(a.result),i={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,r(n.bufferViews.push(i)-1)}}))}},{key:"processAccessor",value:function(e,t,n,r){var a,i=this.options,o=this.json;if(e.array.constructor===Float32Array)a=5126;else if(e.array.constructor===Uint32Array)a=5125;else if(e.array.constructor===Uint16Array)a=Nae;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");a=Iae}if(void 0===n&&(n=0),void 0===r&&(r=e.count),i.truncateDrawRange&&void 0!==t&&null===t.index){var s=n+r,l=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;n=Math.max(n,t.drawRange.start),(r=Math.min(s,l)-n)<0&&(r=0)}if(0===r)return null;var u,c=function(e,t,n){for(var r={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)},a=t;a<t+n;a++)for(var i=0;i<e.itemSize;i++){var o=void 0;e.itemSize>4?o=e.array[a*e.itemSize+i]:0===i?o=e.getX(a):1===i?o=e.getY(a):2===i?o=e.getZ(a):3===i&&(o=e.getW(a)),r.min[i]=Math.min(r.min[i],o),r.max[i]=Math.max(r.max[i],o)}return r}(e,n,r);void 0!==t&&(u=e===t.index?34963:34962);var d=this.processBufferView(e,a,n,r,u),h={bufferView:d.id,byteOffset:d.byteOffset,componentType:a,count:r,max:c.max,min:c.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(h.normalized=!0),o.accessors||(o.accessors=[]),o.accessors.push(h)-1}},{key:"processImage",value:function(e,t,n){var r=this,a=r.cache,i=r.json,o=r.options,s=r.pending;a.images.has(e)||a.images.set(e,{});var l=a.images.get(e),u=1023===t?"image/png":"image/jpeg",c=u+":flipY/"+n.toString();if(void 0!==l[c])return l[c];i.images||(i.images=[]);var d={mimeType:u};if(o.embedImages){var h=Fae=Fae||document.createElement("canvas");h.width=Math.min(e.width,o.maxTextureSize),h.height=Math.min(e.height,o.maxTextureSize);var f=h.getContext("2d");if(!0===n&&(f.translate(0,h.height),f.scale(1,-1)),"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap)f.drawImage(e,0,0,h.width,h.height);else{1023!==t&&1022!==t&&console.error("GLTFExporter: Only RGB and RGBA formats are supported."),(e.width>o.maxTextureSize||e.height>o.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);var p=new Uint8ClampedArray(e.height*e.width*4);if(1023===t)for(var m=0;m<p.length;m+=4)p[m+0]=e.data[m+0],p[m+1]=e.data[m+1],p[m+2]=e.data[m+2],p[m+3]=e.data[m+3];else for(var v=0,g=0;v<p.length;v+=4,g+=3)p[v+0]=e.data[g+0],p[v+1]=e.data[g+1],p[v+2]=e.data[g+2],p[v+3]=255;f.putImageData(new ImageData(p,e.width,e.height),0,0)}!0===o.binary?s.push(new Promise((function(e){h.toBlob((function(t){r.processBufferViewImage(t).then((function(t){d.bufferView=t,e()}))}),u)}))):d.uri=h.toDataURL(u)}else d.uri=e.src;var y=i.images.push(d)-1;return l[c]=y,y}},{key:"processSampler",value:function(e){var t=this.json;t.samplers||(t.samplers=[]);var n={magFilter:Rae[e.magFilter],minFilter:Rae[e.minFilter],wrapS:Rae[e.wrapS],wrapT:Rae[e.wrapT]};return t.samplers.push(n)-1}},{key:"processTexture",value:function(e){var t=this.cache,n=this.json;if(t.textures.has(e))return t.textures.get(e);n.textures||(n.textures=[]);var r={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY)};e.name&&(r.name=e.name),this._invokeAll((function(t){t.writeTexture&&t.writeTexture(e,r)}));var a=n.textures.push(r)-1;return t.textures.set(e,a),a}},{key:"processMaterial",value:function(e){var t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);var r={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var a=e.color.toArray().concat([e.opacity]);if(Dae(a,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=a),e.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=e.metalness,r.pbrMetallicRoughness.roughnessFactor=e.roughness):(r.pbrMetallicRoughness.metallicFactor=.5,r.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap)if(e.metalnessMap===e.roughnessMap){var i={index:this.processTexture(e.metalnessMap)};this.applyTextureTransform(i,e.metalnessMap),r.pbrMetallicRoughness.metallicRoughnessTexture=i}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(e.map){var o={index:this.processTexture(e.map)};this.applyTextureTransform(o,e.map),r.pbrMetallicRoughness.baseColorTexture=o}if(e.emissive){var s=e.emissive.clone().multiplyScalar(e.emissiveIntensity),l=Math.max(s.r,s.g,s.b);if(l>1&&(s.multiplyScalar(1/l),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),l>0&&(r.emissiveFactor=s.toArray()),e.emissiveMap){var u={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(u,e.emissiveMap),r.emissiveTexture=u}}if(e.normalMap){var c={index:this.processTexture(e.normalMap)};e.normalScale&&1!==e.normalScale.x&&(c.scale=e.normalScale.x),this.applyTextureTransform(c,e.normalMap),r.normalTexture=c}if(e.aoMap){var d={index:this.processTexture(e.aoMap),texCoord:1};1!==e.aoMapIntensity&&(d.strength=e.aoMapIntensity),this.applyTextureTransform(d,e.aoMap),r.occlusionTexture=d}e.transparent?r.alphaMode="BLEND":e.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=e.alphaTest),2===e.side&&(r.doubleSided=!0),""!==e.name&&(r.name=e.name),this.serializeUserData(e,r),this._invokeAll((function(t){t.writeMaterial&&t.writeMaterial(e,r)}));var h=n.materials.push(r)-1;return t.materials.set(e,h),h}},{key:"processMesh",value:function(e){var t=this.cache,n=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(var a=0,i=e.material.length;a<i;a++)r.push(e.material[a].uuid);else r.push(e.material.uuid);var o=r.join(":");if(t.meshes.has(o))return t.meshes.get(o);var s,l=e.geometry;if(s=e.isLineSegments?1:e.isLineLoop?2:e.isLine?3:e.isPoints?0:e.material.wireframe?1:4,!0!==l.isBufferGeometry)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");var u={},c={},d=[],h=[],f={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},p=l.getAttribute("normal");void 0===p||this.isNormalizedNormalAttribute(p)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),l.setAttribute("normal",this.createNormalizedNormalAttribute(p)));var m=null;for(var v in l.attributes)if("morph"!==v.substr(0,5)){var g=l.attributes[v];if(v=f[v]||v.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(v)||(v="_"+v),t.attributes.has(this.getUID(g)))c[v]=t.attributes.get(this.getUID(g));else{m=null;var y=g.array;"JOINTS_0"!==v||y instanceof Uint16Array||y instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),m=new $Q(new Uint16Array(y),g.itemSize,g.normalized));var b=this.processAccessor(m||g,l);null!==b&&(c[v]=b,t.attributes.set(this.getUID(g),b))}}if(void 0!==p&&l.setAttribute("normal",p),0===Object.keys(c).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){var x=[],w=[],k={};if(void 0!==e.morphTargetDictionary)for(var S in e.morphTargetDictionary)k[e.morphTargetDictionary[S]]=S;for(var T=0;T<e.morphTargetInfluences.length;++T){var E={},C=!1;for(var _ in l.morphAttributes)if("position"===_||"normal"===_){var M=l.morphAttributes[_][T],A=_.toUpperCase(),I=l.attributes[_];if(t.attributes.has(this.getUID(M)))E[A]=t.attributes.get(this.getUID(M));else{var N=M.clone();if(!l.morphTargetsRelative)for(var R=0,O=M.count;R<O;R++)N.setXYZ(R,M.getX(R)-I.getX(R),M.getY(R)-I.getY(R),M.getZ(R)-I.getZ(R));E[A]=this.processAccessor(N,l),t.attributes.set(this.getUID(I),E[A])}}else C||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),C=!0);h.push(E),x.push(e.morphTargetInfluences[T]),void 0!==e.morphTargetDictionary&&w.push(k[T])}u.weights=x,w.length>0&&(u.extras={},u.extras.targetNames=w)}var D=Array.isArray(e.material);if(D&&0===l.groups.length)return null;for(var L=D?e.material:[e.material],P=D?l.groups:[{materialIndex:0,start:void 0,count:void 0}],F=0,j=P.length;F<j;F++){var z={mode:s,attributes:c};if(this.serializeUserData(l,z),h.length>0&&(z.targets=h),null!==l.index){var B=this.getUID(l.index);void 0===P[F].start&&void 0===P[F].count||(B+=":"+P[F].start+":"+P[F].count),t.attributes.has(B)?z.indices=t.attributes.get(B):(z.indices=this.processAccessor(l.index,l,P[F].start,P[F].count),t.attributes.set(B,z.indices)),null===z.indices&&delete z.indices}var U=this.processMaterial(L[P[F].materialIndex]);null!==U&&(z.material=U),d.push(z)}u.primitives=d,n.meshes||(n.meshes=[]),this._invokeAll((function(t){t.writeMesh&&t.writeMesh(e,u)}));var W=n.meshes.push(u)-1;return t.meshes.set(o,W),W}},{key:"processCamera",value:function(e){var t=this.json;t.cameras||(t.cameras=[]);var n=e.isOrthographicCamera,r={type:n?"orthographic":"perspective"};return n?r.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:dJ.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(r.name=e.type),t.cameras.push(r)-1}},{key:"processAnimation",value:function(e,t){var n=this.json,r=this.nodeMap;n.animations||(n.animations=[]);for(var a=(e=Aae.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,i=[],o=[],s=0;s<a.length;++s){var l=a[s],u=I6.parseTrackName(l.name),c=I6.findNode(t,u.nodeName),d=Oae[u.propertyName];if("bones"===u.objectName&&(c=!0===c.isSkinnedMesh?c.skeleton.getBoneByName(u.objectIndex):void 0),!c||!d)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',l.name),null;var h=void 0,f=l.values.length/l.times.length;d===Oae.morphTargetInfluences&&(f/=c.morphTargetInfluences.length),!0===l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(h="CUBICSPLINE",f/=3):h=2300===l.getInterpolation()?"STEP":"LINEAR",o.push({input:this.processAccessor(new $Q(l.times,1)),output:this.processAccessor(new $Q(l.values,f)),interpolation:h}),i.push({sampler:o.length-1,target:{node:r.get(c),path:d}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:o,channels:i}),n.animations.length-1}},{key:"processSkin",value:function(e){var t=this.json,n=this.nodeMap,r=t.nodes[n.get(e)],a=e.skeleton;if(void 0===a)return null;var i=e.skeleton.bones[0];if(void 0===i)return null;for(var o=[],s=new Float32Array(16*a.bones.length),l=new nQ,u=0;u<a.bones.length;++u)o.push(n.get(a.bones[u])),l.copy(a.boneInverses[u]),l.multiply(e.bindMatrix).toArray(s,16*u);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new $Q(s,16)),joints:o,skeleton:n.get(i)}),r.skin=t.skins.length-1}},{key:"processNode",value:function(e){var t=this.json,n=this.options,r=this.nodeMap;t.nodes||(t.nodes=[]);var a={};if(n.trs){var i=e.quaternion.toArray(),o=e.position.toArray(),s=e.scale.toArray();Dae(i,[0,0,0,1])||(a.rotation=i),Dae(o,[0,0,0])||(a.translation=o),Dae(s,[1,1,1])||(a.scale=s)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===Dae(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(a.matrix=e.matrix.elements);if(""!==e.name&&(a.name=String(e.name)),this.serializeUserData(e,a),e.isMesh||e.isLine||e.isPoints){var l=this.processMesh(e);null!==l&&(a.mesh=l)}else e.isCamera&&(a.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){for(var u=[],c=0,d=e.children.length;c<d;c++){var h=e.children[c];if(h.visible||!1===n.onlyVisible){var f=this.processNode(h);null!==f&&u.push(f)}}u.length>0&&(a.children=u)}this._invokeAll((function(t){t.writeNode&&t.writeNode(e,a)}));var p=t.nodes.push(a)-1;return r.set(e,p),p}},{key:"processScene",value:function(e){var t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);var r={};""!==e.name&&(r.name=e.name),t.scenes.push(r);for(var a=[],i=0,o=e.children.length;i<o;i++){var s=e.children[i];if(s.visible||!1===n.onlyVisible){var l=this.processNode(s);null!==l&&a.push(l)}}a.length>0&&(r.nodes=a),this.serializeUserData(e,r)}},{key:"processObjects",value:function(e){var t=new I3;t.name="AuxScene";for(var n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}},{key:"processInput",value:function(e){var t=this.options;e=e instanceof Array?e:[e],this._invokeAll((function(t){t.beforeParse&&t.beforeParse(e)}));for(var n=[],r=0;r<e.length;r++)e[r]instanceof I3?this.processScene(e[r]):n.push(e[r]);n.length>0&&this.processObjects(n);for(var a=0;a<this.skins.length;++a)this.processSkin(this.skins[a]);for(var i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll((function(t){t.afterParse&&t.afterParse(e)}))}},{key:"_invokeAll",value:function(e){for(var t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}]),e}(),zae=function(){function e(t){M(this,e),this.writer=t,this.name="KHR_lights_punctual"}return(0,A.Z)(e,[{key:"writeNode",value:function(e,t){if(e.isLight)if(e.isDirectionalLight||e.isPointLight||e.isSpotLight){var n=this.writer,r=n.json,a=n.extensionsUsed,i={};e.name&&(i.name=e.name),i.color=e.color.toArray(),i.intensity=e.intensity,e.isDirectionalLight?i.type="directional":e.isPointLight?(i.type="point",e.distance>0&&(i.range=e.distance)):e.isSpotLight&&(i.type="spot",e.distance>0&&(i.range=e.distance),i.spot={},i.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,i.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&0===e.target.position.x&&0===e.target.position.y&&-1===e.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),a[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},a[this.name]=!0);var o=r.extensions[this.name].lights;o.push(i),t.extensions=t.extensions||{},t.extensions[this.name]={light:o.length-1}}else console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e)}}]),e}(),Bae=function(){function e(t){M(this,e),this.writer=t,this.name="KHR_materials_unlit"}return(0,A.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshBasicMaterial){var n=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},n[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}}]),e}(),Uae=function(){function e(t){M(this,e),this.writer=t,this.name="KHR_materials_pbrSpecularGlossiness"}return(0,A.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isGLTFSpecularGlossinessMaterial){var n=this.writer,r=n.extensionsUsed,a={};t.pbrMetallicRoughness.baseColorFactor&&(a.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);var i=[1,1,1];if(e.specular.toArray(i,0),a.specularFactor=i,a.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(a.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){var o={index:n.processTexture(e.specularMap)};n.applyTextureTransform(o,e.specularMap),a.specularGlossinessTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=a,r[this.name]=!0}}}]),e}(),Wae=function(){function e(t){M(this,e),this.writer=t,this.name="KHR_materials_transmission"}return(0,A.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.transmission){var n=this.writer,r=n.extensionsUsed,a={};if(a.transmissionFactor=e.transmission,e.transmissionMap){var i={index:n.processTexture(e.transmissionMap)};n.applyTextureTransform(i,e.transmissionMap),a.transmissionTexture=i}t.extensions=t.extensions||{},t.extensions[this.name]=a,r[this.name]=!0}}}]),e}(),Vae=function(){function e(t){M(this,e),this.writer=t,this.name="KHR_materials_volume"}return(0,A.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.thickness){var n=this.writer,r=n.extensionsUsed,a={};if(a.thicknessFactor=e.thickness,e.thicknessMap){var i={index:n.processTexture(e.thicknessMap)};n.applyTextureTransform(i,e.thicknessMap),a.thicknessTexture=i}a.attenuationDistance=e.attenuationDistance,a.attenuationColor=e.attenuationTint.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=a,r[this.name]=!0}}}]),e}();Aae.Utils={insertKeyframe:function(e,t){var n,r=.001,a=e.getValueSize(),i=new e.TimeBufferType(e.times.length+1),o=new e.ValueBufferType(e.values.length+a),s=e.createInterpolant(new e.ValueBufferType(a));if(0===e.times.length){i[0]=t;for(var l=0;l<a;l++)o[l]=0;n=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<r)return 0;i[0]=t,i.set(e.times,1),o.set(s.evaluate(t),0),o.set(e.values,a),n=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<r)return e.times.length-1;i[i.length-1]=t,i.set(e.times,0),o.set(e.values,0),o.set(s.evaluate(t),e.values.length),n=i.length-1}else for(var u=0;u<e.times.length;u++){if(Math.abs(e.times[u]-t)<r)return u;if(e.times[u]<t&&e.times[u+1]>t){i.set(e.times.slice(0,u+1),0),i[u+1]=t,i.set(e.times.slice(u+1),u+2),o.set(e.values.slice(0,(u+1)*a),0),o.set(s.evaluate(t),(u+1)*a),o.set(e.values.slice((u+1)*a),(u+2)*a),n=u+1;break}}return e.times=i,e.values=o,n},mergeMorphTargetTracks:function(e,t){for(var n=[],r={},a=e.tracks,i=0;i<a.length;++i){var o=a[i],s=I6.parseTrackName(o.name),l=I6.findNode(t,s.nodeName);if("morphTargetInfluences"===s.propertyName&&void 0!==s.propertyIndex){if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(o=o.clone()).setInterpolation(2301)}var u=l.morphTargetInfluences.length,c=l.morphTargetDictionary[s.propertyIndex];if(void 0===c)throw new Error("THREE.GLTFExporter: Morph target name not found: "+s.propertyIndex);var d=void 0;if(void 0!==r[l.uuid]){var h=o.createInterpolant(new o.ValueBufferType(1));d=r[l.uuid];for(var f=0;f<d.times.length;f++)d.values[f*u+c]=h.evaluate(d.times[f]);for(var p=0;p<o.times.length;p++){var m=this.insertKeyframe(d,o.times[p]);d.values[m*u+c]=o.values[p]}}else{for(var v=new((d=o.clone()).ValueBufferType)(u*d.times.length),g=0;g<d.times.length;g++)v[g*u+c]=d.values[g];d.name=(s.nodeName||"")+".morphTargetInfluences",d.values=v,r[l.uuid]=d,n.push(d)}}else n.push(o)}return e.tracks=n,e}};var Zae,Hae,Gae=function(e){return void 0!==e.material&&e.userData&&e.userData.variantMaterials&&!!Array.from(e.userData.variantMaterials.values()).filter((function(e){return qae(e.material)}))},qae=function(e){return e&&e.isMaterial&&!Array.isArray(e)},Xae=function(){function e(t){M(this,e),this.writer=t,this.name="KHR_materials_variants",this.variantNames=[]}return(0,A.Z)(e,[{key:"beforeParse",value:function(e){var t,n=this,r=new Set,a=G(e);try{for(a.s();!(t=a.n()).done;){t.value.traverse((function(e){if(Gae(e)){var t,n=e.userData.variantMaterials,a=G(n.keys());try{for(a.s();!(t=a.n()).done;){var i=t.value,o=n.get(i);qae(o.material)&&r.add(i)}}catch(_ke){a.e(_ke)}finally{a.f()}}}))}}catch(_ke){a.e(_ke)}finally{a.f()}r.forEach((function(e){return n.variantNames.push(e)}))}},{key:"writeMesh",value:function(e,t){if(Gae(e)){var n,r=e.userData,a=r.variantMaterials,i=new Map,o=G(a.keys());try{for(o.s();!(n=o.n()).done;){var s=n.value,l=a.get(s).material;if(qae(l)){var u=this.variantNames.indexOf(s),c=this.writer.processMaterial(l);i.has(c)||i.set(c,{material:c,variants:[]}),i.get(c).variants.push(u)}}}catch(_ke){o.e(_ke)}finally{o.f()}var d=Array.from(i.values()).map((function(e){return e.variants.sort((function(e,t){return e-t}))&&e})).sort((function(e,t){return e.material-t.material}));if(0!==d.length){var h,f=qae(r.originalMaterial)?this.writer.processMaterial(r.originalMaterial):-1,p=G(t.primitives);try{for(p.s();!(h=p.n()).done;){var m=h.value;f>=0&&(m.material=f),m.extensions=m.extensions||{},m.extensions[this.name]={mappings:d}}}catch(_ke){p.e(_ke)}finally{p.f()}}}}},{key:"afterParse",value:function(){if(0!==this.variantNames.length){var e=this.writer.json;e.extensions=e.extensions||{};var t=this.variantNames.map((function(e){return{name:e}}));e.extensions[this.name]={variants:t},this.writer.extensionsUsed[this.name]=!0}}}]),e}(),Yae=Symbol("correlatedObjects"),Kae=Symbol("sourceObject"),$ae=Symbol("onUpdate"),Jae=(0,A.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;M(this,e),this[$ae]=t,this[Kae]=n,this[Yae]=r})),Qae=new $5,eie=new XQ,tie=new q0(2,2),nie=Symbol("threeTexture"),rie=function(e){N(n,e);var t=F(n);function n(e,r,a){return M(this,n),t.call(this,e,a=null!=a?a:{name:"adhoc_image",uri:r&&r.image?r.image.src:"adhoc_image"},new Set(r?[r]:[]))}return(0,A.Z)(n,[{key:nie,get:function(){var e;return console.assert(null!=this[Yae]&&this[Yae].size>0,"Image correlated object is undefined"),null===(e=this[Yae])||void 0===e?void 0:e.values().next().value}},{key:"name",get:function(){return this[Kae].name||""}},{key:"uri",get:function(){return this[Kae].uri}},{key:"bufferView",get:function(){return this[Kae].bufferView}},{key:"type",get:function(){return null!=this.uri?"external":"embedded"}},{key:"setURI",value:function(){var e=Vn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this[Kae].uri=t,e.next=3,new Promise((function(e,n){Qae.load(t,e,void 0,n)}));case 3:n=e.sent,(r=this[nie]).image=n,r.needsUpdate=!0,this[$ae]();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createThumbnail",value:function(){var e=Vn(Un().mark((function e(t,n){var r,a,i,o,s,l,u,c;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new I3,eie.map=this[nie],a=new C0(tie,eie),r.add(a),i=new r1(-1,1,1,-1,0,1),o=K9.singleton.threeRenderer,s=new kJ(t,n),o.setRenderTarget(s),o.render(r,i),o.setRenderTarget(null),l=new Uint8Array(t*n*4),o.readRenderTargetPixels(s,0,0,t,n,l),hee.width=t,hee.height=n,u=hee.getContext("2d"),c=u.createImageData(t,n),e.abrupt("return",(c.data.set(l),u.putImageData(c,0,0),new Promise(function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:hee.toBlob((function(e){if(!e)return n("Failed to capture thumbnail.");t(URL.createObjectURL(e))}),"image/png");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(Jae);!function(e){e[e.Nearest=9728]="Nearest",e[e.Linear=9729]="Linear",e[e.NearestMipmapNearest=9984]="NearestMipmapNearest",e[e.LinearMipmapNearest=9985]="LinearMipmapNearest",e[e.NearestMipmapLinear=9986]="NearestMipmapLinear",e[e.LinearMipmapLinear=9987]="LinearMipmapLinear"}(Zae||(Zae={})),function(e){e[e.ClampToEdge=33071]="ClampToEdge",e[e.MirroredRepeat=33648]="MirroredRepeat",e[e.Repeat=10497]="Repeat"}(Hae||(Hae={}));var aie,iie,oie=function(){var e=[Zae.Nearest,Zae.Linear,Zae.NearestMipmapNearest,Zae.LinearMipmapLinear,Zae.NearestMipmapLinear,Zae.LinearMipmapLinear];return function(t){return e.indexOf(t)>-1}}(),sie=function(){var e=[Zae.Nearest,Zae.Linear];return function(t){return e.indexOf(t)>-1}}(),lie=function(){var e=[Hae.ClampToEdge,Hae.MirroredRepeat,Hae.Repeat];return function(t){return e.indexOf(t)>-1}}(),uie=Symbol("threeTextures"),cie=Symbol("setProperty"),die=Symbol("sourceSampler"),hie=function(e){N(n,e);var t=F(n);function n(e,r,a){return M(this,n),null==(a=null!=a?a:{}).minFilter&&(a.minFilter=r?r.minFilter:Zae.LinearMipmapLinear),null==a.magFilter&&(a.magFilter=r?r.magFilter:Zae.Linear),null==a.wrapS&&(a.wrapS=r?r.wrapS:Hae.Repeat),null==a.wrapT&&(a.wrapT=r?r.wrapT:Hae.Repeat),t.call(this,e,a,new Set(r?[r]:[]))}return(0,A.Z)(n,[{key:uie,get:function(){return console.assert(null!=this[Yae]&&this[Yae].size>0,"Sampler correlated object is undefined"),this[Yae]}},{key:die,get:function(){return console.assert(null!=this[Kae],"Sampler source is undefined"),this[Kae]}},{key:"name",get:function(){return this[Kae].name||""}},{key:"minFilter",get:function(){return this[die].minFilter}},{key:"magFilter",get:function(){return this[die].magFilter}},{key:"wrapS",get:function(){return this[die].wrapS}},{key:"wrapT",get:function(){return this[die].wrapT}},{key:"setMinFilter",value:function(e){this[cie]("minFilter",e)}},{key:"setMagFilter",value:function(e){this[cie]("magFilter",e)}},{key:"setWrapS",value:function(e){this[cie]("wrapS",e)}},{key:"setWrapT",value:function(e){this[cie]("wrapT",e)}},{key:cie,value:function(e,t){var n=this[die];if(null!=n){if(function(e,t){switch(e){case"minFilter":return oie(t);case"magFilter":return sie(t);case"wrapS":case"wrapT":return lie(t);default:throw new Error('Cannot configure property "'.concat(e,'" on Sampler'))}}(e,t)){n[e]=t;var r,a=G(this[uie]);try{for(a.s();!(r=a.n()).done;){var i=r.value;i[e]=t,i.needsUpdate=!0}}catch(_ke){a.e(_ke)}finally{a.f()}}this[$ae]()}}}]),n}(Jae),fie=Symbol("image"),pie=Symbol("sampler"),mie=function(e){N(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return M(this,n),(a=t.call(this,e,i||{},new Set(r?[r]:[])))[pie]=new hie(e,r,o),a[fie]=new rie(e,r,s),a}return(0,A.Z)(n,[{key:"name",get:function(){return this[Kae].name||""}},{key:"sampler",get:function(){return this[pie]}},{key:"source",get:function(){return this[fie]}}]),n}(Jae),vie=Symbol("texture"),gie=Symbol("materials"),yie=Symbol("usage");!function(e){e[e.Base=0]="Base",e[e.MetallicRoughness=1]="MetallicRoughness",e[e.Normal=2]="Normal",e[e.Occlusion=3]="Occlusion",e[e.Emissive=4]="Emissive"}(iie||(iie={}));var bie=function(){function e(t,n,r,a,i,o){if(M(this,e),this[aie]=null,o){var s=i.textures?i.textures[o.index]:null,l=s&&i.samplers?i.samplers[s.sampler]:null,u=s&&i.images?i.images[s.source]:null;this[vie]=new mie(t,r,s,l,u)}this.onUpdate=t,this[gie]=a,this[yie]=n}return(0,A.Z)(e,[{key:"texture",get:function(){return this[vie]}},{key:"setTexture",value:function(e){var t=null!=e?e.source[nie]:null,n=3001;if(this[vie]=e,this[gie]){var r,a=G(this[gie]);try{for(a.s();!(r=a.n()).done;){var i=r.value;switch(this[yie]){case iie.Base:i.map=t;break;case iie.MetallicRoughness:n=3e3,i.metalnessMap=t,i.roughnessMap=t;break;case iie.Normal:n=3e3,i.normalMap=t;break;case iie.Occlusion:n=3e3,i.aoMap=t;break;case iie.Emissive:i.emissiveMap=t}i.needsUpdate=!0}}catch(_ke){a.e(_ke)}finally{a.f()}}t&&(t.encoding=n),this.onUpdate()}}]),e}();aie=vie;var xie,wie,kie=Symbol("threeMaterials"),Sie=Symbol("baseColorTexture"),Tie=Symbol("metallicRoughnessTexture"),Eie=function(e){N(n,e);var t=F(n);function n(e,r,a,i){var o;M(this,n),o=t.call(this,e,a,i),null==a.baseColorFactor&&(a.baseColorFactor=[1,1,1,1]),null==a.roughnessFactor&&(a.roughnessFactor=1),null==a.metallicFactor&&(a.metallicFactor=1);var s=a.baseColorTexture,l=a.metallicRoughnessTexture,u=i.values().next().value,c=u.map,d=u.metalnessMap;return o[Sie]=new bie(e,iie.Base,c,i,r,s||null),o[Tie]=new bie(e,iie.MetallicRoughness,d,i,r,l||null),o}return(0,A.Z)(n,[{key:kie,get:function(){return this[Yae]}},{key:"baseColorFactor",get:function(){return this[Kae].baseColorFactor}},{key:"metallicFactor",get:function(){return this[Kae].metallicFactor}},{key:"roughnessFactor",get:function(){return this[Kae].roughnessFactor}},{key:"baseColorTexture",get:function(){return this[Sie]}},{key:"metallicRoughnessTexture",get:function(){return this[Tie]}},{key:"setBaseColorFactor",value:function(e){var t,n=G(this[kie]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.color.fromArray(e),r.opacity=e[3]}}catch(_ke){n.e(_ke)}finally{n.f()}this[Kae].baseColorFactor=e,this[$ae]()}},{key:"setMetallicFactor",value:function(e){var t,n=G(this[kie]);try{for(n.s();!(t=n.n()).done;){t.value.metalness=e}}catch(_ke){n.e(_ke)}finally{n.f()}this[Kae].metallicFactor=e,this[$ae]()}},{key:"setRoughnessFactor",value:function(e){var t,n=G(this[kie]);try{for(n.s();!(t=n.n()).done;){t.value.roughness=e}}catch(_ke){n.e(_ke)}finally{n.f()}this[Kae].roughnessFactor=e,this[$ae]()}}]),n}(Jae),Cie=Symbol("pbrMetallicRoughness"),_ie=Symbol("normalTexture"),Mie=Symbol("occlusionTexture"),Aie=Symbol("emissiveTexture"),Iie=Symbol("backingThreeMaterial"),Nie=Symbol("applyAlphaCutoff"),Rie=Symbol("lazyLoadGLTFInfo"),Oie=Symbol("initialize"),Die=Symbol("getLoadedMaterial"),Lie=Symbol("ensureMaterialIsLoaded"),Pie=function(e){N(n,e);var t=F(n);function n(e,r,a,i,o){var s;return M(this,n),s=t.call(this,e,a,i),null==o?s[Oie](r):s[Rie]=o,s}return(0,A.Z)(n,[{key:Iie,get:function(){return this[Yae].values().next().value}},{key:Oie,value:function(e){var t=this[$ae],n=this[Kae],r=this[Yae];n.extensions&&n.extensions.KHR_materials_pbrSpecularGlossiness&&console.warn("Material ".concat(n.name,' uses a deprecated extension\n          "KHR_materials_pbrSpecularGlossiness", please use\n          "pbrMetallicRoughness" instead. Specular Glossiness materials are\n          currently supported for rendering, but not for our scene-graph API,\n          nor for auto-generation of USDZ for Quick Look.')),null==n.pbrMetallicRoughness&&(n.pbrMetallicRoughness={}),this[Cie]=new Eie(t,e,n.pbrMetallicRoughness,r),null==n.emissiveFactor&&(n.emissiveFactor=[0,0,0]),null==n.doubleSided&&(n.doubleSided=!1),null==n.alphaMode&&(n.alphaMode="OPAQUE"),null==n.alphaCutoff&&(n.alphaCutoff=.5);var a=n.normalTexture,i=n.occlusionTexture,o=n.emissiveTexture,s=r.values().next().value,l=s.normalMap,u=s.aoMap,c=s.emissiveMap;this[_ie]=new bie(t,iie.Normal,l,r,e,a||null),this[Mie]=new bie(t,iie.Occlusion,u,r,e,i||null),this[Aie]=new bie(t,iie.Emissive,c,r,e,o||null)}},{key:Die,value:function(){var e=Vn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this[Rie]){e.next=7;break}return e.next=3,this[Rie].doLazyLoad();case 3:return t=e.sent,n=t.set,r=t.material,e.abrupt("return",(this[Yae]=n,this[Oie](this[Rie].gltf),this[Rie]=void 0,this.ensureLoaded=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),r));case 7:return e.abrupt("return",this[Yae].values().next().value);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:Lie,value:function(){if(null!=this[Rie])throw new Error('Material "'.concat(this.name,"\" has not been loaded, call 'await\n    myMaterial.ensureLoaded()' before using an unloaded material."))}},{key:"ensureLoaded",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this[Die]();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isLoaded",get:function(){return null==this[Rie]}},{key:"name",get:function(){return this[Kae].name||""}},{key:"pbrMetallicRoughness",get:function(){return this[Lie](),this[Cie]}},{key:"normalTexture",get:function(){return this[Lie](),this[_ie]}},{key:"occlusionTexture",get:function(){return this[Lie](),this[Mie]}},{key:"emissiveTexture",get:function(){return this[Lie](),this[Aie]}},{key:"emissiveFactor",get:function(){return this[Lie](),this[Kae].emissiveFactor}},{key:"setEmissiveFactor",value:function(e){this[Lie]();var t,n=G(this[Yae]);try{for(n.s();!(t=n.n()).done;){t.value.emissive.fromArray(e)}}catch(_ke){n.e(_ke)}finally{n.f()}this[Kae].emissiveFactor=e,this[$ae]()}},{key:Nie,value:function(){this[Lie]();var e,t=this[Kae],n=G(this[Yae]);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.alphaTest=t.alphaCutoff,r.needsUpdate=!0}}catch(_ke){n.e(_ke)}finally{n.f()}}},{key:"setAlphaCutoff",value:function(e){this[Lie](),this[Kae].alphaCutoff=e,this[Nie](),this[$ae]()}},{key:"getAlphaCutoff",value:function(){return this[Lie](),this[Kae].alphaCutoff}},{key:"setDoubleSided",value:function(e){this[Lie]();var t,n=G(this[Yae]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.side=e?2:0,r.needsUpdate=!0}}catch(_ke){n.e(_ke)}finally{n.f()}this[Kae].doubleSided=e,this[$ae]()}},{key:"getDoubleSided",value:function(){return this[Lie](),this[Kae].doubleSided}},{key:"setAlphaMode",value:function(e){this[Lie]();var t=function(e,t){e.transparent=t,e.depthWrite=!t};this[Kae].alphaMode=e;var n,r=G(this[Yae]);try{for(r.s();!(n=r.n()).done;){var a=n.value;t(a,"OPAQUE"!==e),this[Nie](),a.needsUpdate=!0}}catch(_ke){r.e(_ke)}finally{r.f()}this[$ae]()}},{key:"getAlphaMode",value:function(){return this[Lie](),this[Kae].alphaMode}}]),n}(Jae),Fie=Symbol("materials"),jie=Symbol("variantInfo"),zie=Symbol("mesh"),Bie=Symbol("children"),Uie=Symbol("initialMaterialIdx"),Wie=Symbol("activeMaterialIdx"),Vie=(0,A.Z)((function e(t){M(this,e),this.name="",this[xie]=new Array,this.name=t}));xie=Bie;var Zie,Hie,Gie,qie,Xie=function(e){N(n,e);var t=F(n);function n(e,r,a){var i;M(this,n),(i=t.call(this,e.name))[wie]=new Map,i[zie]=e;var o=a.gltf,s=a.threeGLTF,l=a.threeObjectMap,u=l.get(e.material);null!=u.materials?i[Uie]=i[Wie]=u.materials:console.error("Primitive (".concat(e.name,") missing initial material reference."));var c,d=l.get(e).meshes,h=G((o.meshes||[])[d].primitives||[]);try{for(h.s();!(c=h.n()).done;){var f=c.value;if(null!=f.material)i[Fie].set(f.material,r[f.material]);else{var p=r.findIndex((function(e){return"Default"===e.name}));p>=0?i[Fie].set(p,r[p]):console.warn("Primitive has no material!")}if(f.extensions&&f.extensions.KHR_materials_variants){var m=f.extensions.KHR_materials_variants,v=s.parser.json.extensions.KHR_materials_variants.variants;i[jie]=new Map;var g,y=G(m.mappings);try{for(y.s();!(g=y.n()).done;){var b=g.value;i[Fie].set(b.material,r[b.material]);var x,w=G(b.variants);try{for(w.s();!(x=w.n()).done;){var k=v[x.value].name;i[jie].set(k,{material:r[b.material],index:b.material})}}catch(_ke){w.e(_ke)}finally{w.f()}}}catch(_ke){y.e(_ke)}finally{y.f()}}}}catch(_ke){h.e(_ke)}finally{h.f()}return i}return(0,A.Z)(n,[{key:"mesh",get:function(){return this[zie]}},{key:"setActiveMaterial",value:function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this[Fie].get(t),e.t0=null!=n,!e.t0){e.next=7;break}return e.next=5,n[Die]();case 5:this.mesh.material=e.sent,this[Wie]=t;case 7:return e.abrupt("return",this.mesh.material);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getActiveMaterial",value:function(){return this[Fie].get(this[Wie])}},{key:"enableVariant",value:function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",this.setActiveMaterial(this[Uie]));case 2:if(null==this[jie]){e.next=6;break}if(null==(n=this[jie].get(t))){e.next=6;break}return e.abrupt("return",this.setActiveMaterial(n.index));case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"instantiateVariants",value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this[jie]){e.next=22;break}t=G(this[jie].keys()),e.prev=2,t.s();case 4:if((n=t.n()).done){e.next=14;break}if(r=n.value,null==this.mesh.userData.variantMaterials.get(r).material){e.next=8;break}return e.abrupt("continue",12);case 8:return e.next=10,this.enableVariant(r);case 10:null!=(a=e.sent)&&(this.mesh.userData.variantMaterials.get(r).material=a);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),t.e(e.t0);case 19:return e.prev=19,t.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[2,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"variantInfo",get:function(){return this[jie]}}]),n}(Vie);wie=Fie;var Yie=Symbol("materials"),Kie=Symbol("hierarchy"),$ie=Symbol("roots"),Jie=Symbol("primitives"),Qie=Symbol("prepareVariantsForExport"),eoe=Symbol("switchVariant"),toe=Symbol("threeScene"),noe=Symbol("materialsFromPoint"),roe=Symbol("materialFromPoint"),aoe=(0,A.Z)((function e(t,n,r,a){M(this,e),this.gltf=t,this.gltfElementMap=n,this.mapKey=r,this.doLazyLoad=a})),ioe=function(e){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};M(this,t),this[Zie]=new Array,this[Hie]=new Array,this[Gie]=new Array,this[qie]=new Array;var a=e.gltf,i=e.threeGLTF,o=e.gltfElementMap;this[toe]=i.scene;var s,l=G(a.materials.entries());try{var u=function(){var e=(0,U.Z)(s.value,2),t=e[0],l=e[1],u=o.get(l);if(null!=u)n[Yie].push(new Pie(r,a,l,u));else{var c=(a.materials||[])[t],d=t,h=function(){var e=Vn(Un().mark((function e(){var t,n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.parser.getDependency("material",d);case 2:return t=e.sent,n=new Set,e.abrupt("return",(o.set(c,n),n.add(t),{set:n,material:t}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n[Yie].push(new Pie(r,a,c,u,new aoe(a,o,c,h)))}};for(l.s();!(s=l.n()).done;)u()}catch(_ke){l.e(_ke)}finally{l.f()}var c,d=new Map,h=new Array,f=G(i.scene.children);try{for(f.s();!(c=f.n()).done;){var p=c.value;h.push(p)}}catch(_ke){f.e(_ke)}finally{f.f()}for(;h.length>0;){var m=h.pop(),v=null;m instanceof C0?(v=new Xie(m,this.materials,e),this[Jie].push(v)):v=new Vie(m.name);var g=d.get(m);null!=g?g[Bie].push(v):this[$ie].push(v),this[Kie].push(v);var y,b=G(m.children);try{for(b.s();!(y=b.n()).done;){var x=y.value;h.push(x),d.set(m,v)}}catch(_ke){b.e(_ke)}finally{b.f()}}}return(0,A.Z)(t,[{key:"materials",get:function(){return this[Yie]}},{key:"getMaterialByName",value:function(e){var t=this[Yie].filter((function(t){return t.name===e}));return t.length>0?t[0]:null}},{key:e,value:function(e){var t=this;return e.intersectObject(this[toe],!0).map((function(e){var n=t[Kie].find((function(t){return t instanceof Xie&&t.mesh===e.object}));return null!=n?n.getActiveMaterial():null}))}},{key:roe,value:function(e){var t=this[noe](e);return t.length>0?t[0]:null}},{key:eoe,value:function(){var e=Vn(Un().mark((function e(t){var n,r,a,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Array,r=G(this[Jie]);try{for(r.s();!(a=r.n()).done;)i=a.value,n.push(i.enableVariant(t))}catch(_ke){r.e(_ke)}finally{r.f()}return e.next=5,Promise.all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:Qie,value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Array,n=G(this[Jie]);try{for(n.s();!(r=n.n()).done;)a=r.value,t.push(a.instantiateVariants())}catch(_ke){n.e(_ke)}finally{n.f()}return e.next=5,Promise.all(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}((Zie=Yie,Hie=Kie,Gie=$ie,qie=Jie,noe)),ooe=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},soe=Symbol("currentGLTF"),loe=Symbol("model"),uoe=Symbol("variants"),coe=Symbol("getOnUpdateMethod"),doe=Symbol("textureLoader"),hoe=Symbol("originalGltfJson"),foe=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},poe=Math.PI/32,moe={basis:[R7(k7(poe,"rad"))],keywords:{auto:[null]}},voe=Symbol("autoRotateStartTime"),goe=Symbol("radiansPerSecond"),yoe=Symbol("syncRotationRate"),boe=Symbol("onCameraChange"),xoe=function(e){var t,n,r,a=function(e,a){N(o,e);var i=F(o);function o(){var e;return M(this,o),(e=i.apply(this,arguments))[t]=new Map,e[n]=function(t){t.forEach((function(t){t instanceof MutationRecord&&"childList"!==t.type||(t.addedNodes.forEach((function(t){e[Kee](t)})),t.removedNodes.forEach((function(t){e[$ee](t)})),e[Nee]())}))},e[r]=new MutationObserver(e[Xee]),e}return(0,A.Z)(o,[{key:"connectedCallback",value:function(){lu(R(o.prototype),"connectedCallback",this).call(this);for(var e=0;e<this.children.length;++e)this[Kee](this.children[e]);var t=self.ShadyDOM;null==t?this[Yee].observe(this,{childList:!0}):this[Yee]=t.observeChildren(this,this[Xee])}},{key:"disconnectedCallback",value:function(){lu(R(o.prototype),"disconnectedCallback",this).call(this);var e=self.ShadyDOM;null==e?this[Yee].disconnect():e.unobserveChildren(this[Yee])}},{key:a,value:function(e,t){lu(R(o.prototype),Ree,this).call(this,e,t);var n=this[Iee],r=n.annotationRenderer,a=n.getCamera();n.shouldRender()&&(n.updateHotspots(a.position),r.domElement.style.display="",r.render(n,a))}},{key:"updateHotspot",value:function(e){var t=this[qee].get(e.name);null!=t&&(t.updatePosition(e.position),t.updateNormal(e.normal),this[Nee]())}},{key:"positionAndNormalFromPoint",value:function(e,t){var n=this[Iee],r=n.getNDC(e,t),a=n.positionAndNormalFromPoint(r);if(null==a)return null;Jee.copy(n.target.matrixWorld).invert();var i=Wee(a.position.applyMatrix4(Jee));return Qee.getNormalMatrix(Jee),{position:i,normal:Wee(a.normal.applyNormalMatrix(Qee))}}},{key:Kee,value:function(e){if(e instanceof HTMLElement&&0===e.slot.indexOf("hotspot")){var t=this[qee].get(e.slot);null!=t?t.increment():(t=new L7({name:e.slot,position:e.dataset.position,normal:e.dataset.normal}),this[qee].set(e.slot,t),this[Iee].addHotspot(t)),this[Iee].queueRender()}}},{key:$ee,value:function(e){if(e instanceof HTMLElement){var t=this[qee].get(e.slot);t&&(t.decrement()&&(this[Iee].removeHotspot(t),this[qee].delete(e.slot)),this[Iee].queueRender())}}}]),o}(e,(t=qee,n=Xee,r=Yee,Ree));return a}(function(e){var t,n,r,a,i,o=function(e,o){N(l,e);var s=F(l);function l(){var e;return M(this,l),(e=s.apply(this,arguments))[t]=void 0,e[n]=null,e[r]=[],e[a]=new e6,e[i]=null,e.variantName=null,e.orientation="0 0 0",e.scale="1 1 1",e}return(0,A.Z)(l,[{key:"model",get:function(){return this[loe]}},{key:"availableVariants",get:function(){return this[uoe]}},{key:"originalGltfJson",get:function(){return this[hoe]}},{key:o,value:function(){var e=this;return function(){e[Nee]()}}},{key:"createTexture",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a,i=this,o=arguments;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"image/png",r=this[soe],e.next=4,new Promise((function(e){return i[doe].load(t,e)}));case 4:return a=e.sent,e.abrupt("return",r&&a?(a.encoding=3001,a.wrapS=1e3,a.wrapT=1e3,a.flipY=!1,"image/jpeg"===n&&(a.format=1022),new mie(this[coe](),a)):null);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updated",value:function(){var e=Vn(Un().mark((function e(t){var n,r,a,i,o,s,u,c;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lu(R(l.prototype),"updated",this).call(this,t),!t.has("variantName")){e.next=8;break}if(n=this[soe],r=this.variantName,e.t0=null!=n,!e.t0){e.next=8;break}return e.next=6,this[loe][eoe](r);case 6:this[Nee](),this.dispatchEvent(new CustomEvent("variant-applied"));case 8:(t.has("orientation")||t.has("scale"))&&(a=this[Iee].modelContainer,i=S7(this.orientation)[0].terms,o=D7(i[0]).number,s=D7(i[1]).number,u=D7(i[2]).number,a.quaternion.setFromEuler(new hQ(s,u,o,"YXZ")),c=S7(this.scale)[0].terms,a.scale.set(c[0].number,c[1].number,c[2].number),this[Iee].updateBoundingBox(),this[Iee].updateShadow(),this[Lee].arRenderer.onUpdateScene(),this[Nee]());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:Oee,value:function(){lu(R(l.prototype),Oee,this).call(this),this[uoe]=[];var e=this[Iee].currentGLTF;if(null!=e){var t=e.correlatedSceneGraph;null!=t&&e!==this[soe]&&(this[loe]=new ioe(t,this[coe]()),this[hoe]=JSON.parse(JSON.stringify(t.gltf))),"variants"in e.userData&&(this[uoe]=e.userData.variants.slice(),this.requestUpdate("variantName"))}this[soe]=e,this.dispatchEvent(new CustomEvent("scene-graph-ready"))}},{key:"exportScene",value:function(){var e=Vn(Un().mark((function e(t){var n,r=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this[Iee],e.abrupt("return",new Promise(function(){var e=Vn(Un().mark((function e(a){var i,o,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={binary:!0,onlyVisible:!0,maxTextureSize:1/0,forcePowerOfTwoTextures:!1,includeCustomExtensions:!1,embedImages:!0},Object.assign(i,t),i.animations=n.animations,i.truncateDrawRange=!0,o=n.shadow,s=!1,null!=o&&(s=o.visible,o.visible=!1),e.next=7,r[loe][Qie]();case 7:(new Aae).register((function(e){return new Xae(e)})).parse(n.modelContainer.children[0],(function(e){return a(new Blob([i.binary?e:JSON.stringify(e)],{type:i.binary?"application/octet-stream":"application/json"}))}),i),null!=o&&(o.visible=s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"materialFromPoint",value:function(e,t){var n=this[Iee],r=n.getNDC(e,t);return n.raycaster.setFromCamera(r,n.getCamera()),this[loe][roe](n.raycaster)}}]),l}(e,(t=loe,n=soe,r=uoe,a=doe,i=hoe,coe));return ooe([O$({type:String,attribute:"variant-name"})],o.prototype,"variantName",void 0),ooe([O$({type:String,attribute:"orientation"})],o.prototype,"orientation",void 0),ooe([O$({type:String,attribute:"scale"})],o.prototype,"scale",void 0),o}(function(e){var t,n,r,a=function(e,a){N(o,e);var i=F(o);function o(){var e;return M(this,o),(e=i.apply(this,arguments)).autoRotate=!1,e.autoRotateDelay=3e3,e.rotationPerSecond="auto",e[t]=performance.now(),e[n]=0,e[r]=function(t){e.autoRotate&&"user-interaction"===t.detail.source&&(e[voe]=performance.now())},e}return(0,A.Z)(o,[{key:"connectedCallback",value:function(){lu(R(o.prototype),"connectedCallback",this).call(this),this.addEventListener("camera-change",this[boe]),this[voe]=performance.now()}},{key:"disconnectedCallback",value:function(){lu(R(o.prototype),"disconnectedCallback",this).call(this),this.removeEventListener("camera-change",this[boe]),this[voe]=performance.now()}},{key:"updated",value:function(e){lu(R(o.prototype),"updated",this).call(this,e),e.has("autoRotate")&&(this[voe]=performance.now())}},{key:a,value:function(e){this[goe]=e[0]}},{key:Ree,value:function(e,t){if(lu(R(o.prototype),Ree,this).call(this,e,t),this.autoRotate&&this[Uee]()&&!this[Lee].isPresenting){var n=Math.min(t,e-this[voe]-this.autoRotateDelay);n>0&&(this[Iee].yaw=this.turntableRotation+this[goe]*n*.001)}}},{key:"turntableRotation",get:function(){return this[Iee].yaw}},{key:"resetTurntableRotation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this[Iee].yaw=e}}]),o}(e,(t=voe,n=goe,yoe));return r=boe,foe([O$({type:Boolean,attribute:"auto-rotate"})],a.prototype,"autoRotate",void 0),foe([O$({type:Number,attribute:"auto-rotate-delay"})],a.prototype,"autoRotateDelay",void 0),foe([sre({intrinsics:moe,updateHandler:yoe}),O$({type:String,attribute:"rotation-per-second"})],a.prototype,"rotationPerSecond",void 0),a}(function(e){var t,n,r,a=function(e,a){N(o,e);var i=F(o);function o(){var e;return M(this,o),(e=i.apply(this,arguments)).environmentImage=null,e.skyboxImage=null,e.shadowIntensity=0,e.shadowSoftness=1,e.exposure=1,e[t]=null,e[n]=null,e[r]=function(t){t.element===(0,L.Z)(e)&&e[r9]()},e}return(0,A.Z)(o,[{key:"connectedCallback",value:function(){lu(R(o.prototype),"connectedCallback",this).call(this),this[Lee].loader.addEventListener("preload",this[i9])}},{key:"disconnectedCallback",value:function(){lu(R(o.prototype),"disconnectedCallback",this).call(this),this[Lee].loader.removeEventListener("preload",this[i9])}},{key:"updated",value:function(e){lu(R(o.prototype),"updated",this).call(this,e),e.has("shadowIntensity")&&(this[Iee].setShadowIntensity(.1*this.shadowIntensity),this[Nee]()),e.has("shadowSoftness")&&(this[Iee].setShadowSoftness(this.shadowSoftness),this[Nee]()),e.has("exposure")&&(this[Iee].exposure=this.exposure,this[Nee]()),(e.has("environmentImage")||e.has("skyboxImage"))&&this[zee]()&&this[r9]()}},{key:a,value:function(){lu(R(o.prototype),Oee,this).call(this),null!=this[t9]&&this[n9](this[t9])}},{key:r9,value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a,i,o,s=this;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.skyboxImage,n=this.environmentImage,null!=this[a9]&&(this[a9](),this[a9]=null),null==(r=this[Lee].textureUtils)){e.next=17;break}return e.prev=4,e.next=7,new Promise(function(){var e=Vn(Un().mark((function e(a,i){var o;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.generateEnvironmentMapAndSkybox(f7(t),n,{progressTracker:s[Pee]}),s[a9]=function(){return i(o)},e.t0=a,e.next=5,o;case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:a=e.sent,i=a.environmentMap,o=a.skybox,this[Iee].background=null!=o?o.name===i.name?i:o:null,this[n9](i),this[Iee].dispatchEvent({type:"envmap-update"}),e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(4),!(e.t0 instanceof Error)){e.next=17;break}throw this[n9](null),e.t0;case 17:case"end":return e.stop()}}),e,this,[[4,13]])})));return function(){return e.apply(this,arguments)}}()},{key:n9,value:function(e){this[Iee].environment!==e&&(this[t9]=e,this[Iee].environment=this[t9],this.dispatchEvent(new CustomEvent("environment-change")),this[Nee]())}}]),o}(e,(t=t9,n=a9,r=i9,Oee));return e9([O$({type:String,attribute:"environment-image"})],a.prototype,"environmentImage",void 0),e9([O$({type:String,attribute:"skybox-image"})],a.prototype,"skyboxImage",void 0),e9([O$({type:Number,attribute:"shadow-intensity"})],a.prototype,"shadowIntensity",void 0),e9([O$({type:Number,attribute:"shadow-softness"})],a.prototype,"shadowSoftness",void 0),e9([O$({type:Number})],a.prototype,"exposure",void 0),a}(function(e){var t,n,r,a,i,o,s,l,u,c,d,h,f,p,m,v,g,y=function(e,y){N(x,e);var b=F(x);function x(){var e;return M(this,x),(e=b.apply(this,arguments)).cameraControls=!1,e.cameraOrbit="0deg 75deg 105%",e.cameraTarget="auto auto auto",e.fieldOfView="auto",e.minCameraOrbit="auto",e.maxCameraOrbit="auto",e.minFieldOfView="auto",e.maxFieldOfView="auto",e.interactionPromptThreshold=3e3,e.interactionPromptStyle=Sre,e.interactionPrompt=wre,e.interactionPolicy="always-allow",e.orbitSensitivity=1,e.touchAction="pan-y",e.disableZoom=!1,e.interpolationDecay=50,e.bounds="legacy",e[t]=e.shadowRoot.querySelector(".interaction-prompt"),e[n]=e.shadowRoot.querySelector(".interaction-prompt > .animated-container"),e[r]=1/0,e[a]=0,e[i]=1/0,e[o]=!1,e[s]=!1,e[l]=new dre(e[Iee].camera,e[Mee]),e[u]=0,e[c]=new L6,e[d]=!1,e[h]=!1,e[f]=!1,e[p]=function(){var t=e[Mee];isFinite(e[Yre])||(e[Yre]=performance.now());var n=e[See];t.getAttribute("aria-label")!==n&&t.setAttribute("aria-label",n),e.interactionPrompt!==kre||e[Gre]||(e[Hre]=!0)},e[m]=function(){e.interactionPrompt===kre&&(e[Hre]=!1,e[Pre].classList.remove("visible"),e[qre]=1/0,e[Yre]=1/0)},e[v]=function(t){var n=t.source;e[zre](),e[Nee](),n===cre&&(e[Gre]=!0,e[jre]()),e.dispatchEvent(new CustomEvent("camera-change",{detail:{source:n}}))},e[g]=function(t){"pointer-change-start"===t.type?e[_ee].classList.add("pointer-tumbling"):e[_ee].classList.remove("pointer-tumbling")},e}return(0,A.Z)(x,[{key:"getCameraOrbit",value:function(){var e=this[$re];return{theta:e.theta,phi:e.phi,radius:e.radius,toString:function(){return"".concat(this.theta,"rad ").concat(this.phi,"rad ").concat(this.radius,"m")}}}},{key:"getCameraTarget",value:function(){return Wee(this[Lee].isPresenting?this[Lee].arRenderer.target:this[Iee].getTarget())}},{key:"getFieldOfView",value:function(){return this[Lre].getFieldOfView()}},{key:"getMinimumFieldOfView",value:function(){return this[Lre].options.minimumFieldOfView}},{key:"getMaximumFieldOfView",value:function(){return this[Lre].options.maximumFieldOfView}},{key:"jumpCameraToGoal",value:function(){this[Jre]=!0,this.requestUpdate(Jre,!1)}},{key:"resetInteractionPrompt",value:function(){this[Xre]=0,this[qre]=1/0,this[Gre]=!1,this[Hre]=this.interactionPrompt===wre&&this.cameraControls}},{key:"connectedCallback",value:function(){lu(R(x.prototype),"connectedCallback",this).call(this),this[Lre].addEventListener("change",this[Vre]),this[Lre].addEventListener("pointer-change-start",this[Zre]),this[Lre].addEventListener("pointer-change-end",this[Zre])}},{key:"disconnectedCallback",value:function(){lu(R(x.prototype),"disconnectedCallback",this).call(this),this[Lre].removeEventListener("change",this[Vre]),this[Lre].removeEventListener("pointer-change-start",this[Zre]),this[Lre].removeEventListener("pointer-change-end",this[Zre])}},{key:"updated",value:function(e){var t=this;lu(R(x.prototype),"updated",this).call(this,e);var n=this[Lre],r=this[Mee];if(e.has("cameraControls")&&(this.cameraControls?(n.enableInteraction(),this.interactionPrompt===wre&&(this[Hre]=!0),r.addEventListener("focus",this[Wre]),r.addEventListener("blur",this[Ure])):(r.removeEventListener("focus",this[Wre]),r.removeEventListener("blur",this[Ure]),n.disableInteraction(),this[jre]())),e.has("disableZoom")&&(n.disableZoom=this.disableZoom),e.has("bounds")&&(this[Iee].tightBounds="tight"===this.bounds),(e.has("interactionPrompt")||e.has("cameraControls")||e.has("src"))&&(this.interactionPrompt===wre&&this.cameraControls&&!this[Gre]?this[Hre]=!0:this[jre]()),e.has("interactionPromptStyle")&&this[Pre].classList.toggle("wiggle",this.interactionPromptStyle===Sre),e.has("interactionPolicy")){var a=this.interactionPolicy;n.applyOptions({interactionPolicy:a})}if(e.has("touchAction")){var i=this.touchAction;n.applyOptions({touchAction:i}),n.updateTouchActionStyle()}e.has("orbitSensitivity")&&(n.sensitivity=this.orbitSensitivity),e.has("interpolationDecay")&&(n.setDamperDecayTime(this.interpolationDecay),this[Iee].setTargetDamperDecayTime(this.interpolationDecay)),!0===this[Jre]&&Promise.resolve().then((function(){n.jumpToGoal(),t[Iee].jumpToGoal(),t[Jre]=!1}))}},{key:"updateFraming",value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this[Iee],n=t.framedFieldOfView,e.next=3,this.requestUpdate("cameraTarget");case 3:return t.updateFraming("tight"===this.bounds?t.getTarget():void 0),t.frameModel(),r=t.framedFieldOfView,a=this[Lre].getFieldOfView()/n,this[Kre]=r*a,this[eae]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),e.next=14,this.requestUpdate("cameraOrbit");case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:y,value:function(e){this[Lre].setFieldOfView(180*e[0]/Math.PI)}},{key:tae,value:function(e){if(this[eae]){var t=this.getCameraOrbit(),n=t.theta,r=t.phi;e[0]=n,e[1]=r,this[eae]=!1}this[Lre].setOrbit(e[0],e[1],e[2])}},{key:aae,value:function(e){this[Lre].applyOptions({minimumAzimuthalAngle:e[0],minimumPolarAngle:e[1],minimumRadius:e[2]}),this.jumpCameraToGoal()}},{key:iae,value:function(e){this[Lre].applyOptions({maximumAzimuthalAngle:e[0],maximumPolarAngle:e[1],maximumRadius:e[2]}),this[Bre](e[2]),this.jumpCameraToGoal()}},{key:oae,value:function(e){this[Lre].applyOptions({minimumFieldOfView:180*e[0]/Math.PI}),this.jumpCameraToGoal()}},{key:sae,value:function(e){this[Lre].applyOptions({maximumFieldOfView:180*e[0]/Math.PI}),this.jumpCameraToGoal()}},{key:rae,value:function(e){var t=(0,U.Z)(e,3),n=t[0],r=t[1],a=t[2];this[Iee].setTarget(n,r,a),this[Lee].arRenderer.updateTarget()}},{key:Ree,value:function(e,t){if(lu(R(x.prototype),Ree,this).call(this,e,t),!this[Lee].isPresenting&&this[Uee]()){var n=performance.now();if(this[Hre]){var r=this.interactionPrompt===wre?this[Tee]:this[Yre];this.loaded&&n>r+this.interactionPromptThreshold&&(this[Mee].setAttribute("aria-label","Use mouse, touch or arrow keys to control the camera!"),this[Hre]=!1,this[qre]=n,this[Pre].classList.add("visible"))}if(isFinite(this[qre])&&this.interactionPromptStyle===Sre){var a=this[Iee],i=(n-this[qre])/5e3%1,o=vre(i),s=gre(i);if(this[Fre].style.opacity="".concat(s),o!==this[Xre]){var l=o*a.width*.05,u=(o-this[Xre])*Math.PI/16;this[Fre].style.transform="translateX(".concat(l,"px)"),this[Lre].adjustOrbit(u,0,0),this[Xre]=o}}this[Lre].update(e,t),this[Iee].updateTarget(t)}}},{key:jre,value:function(){this[Hre]=!1,this[Pre].classList.remove("visible"),this[qre]=1/0}},{key:Bre,value:function(e){var t=this[Iee].idealCameraDistance,n=2*Math.max(t,e);this[Lre].updateNearFar(0,n)}},{key:zre,value:function(){var e=this[$re],t=e.theta,n=e.phi,r=this[Lre].getCameraSpherical(this[$re]),a=r.theta,i=r.phi,o=this.getRootNode();if(null!=o&&o.activeElement===this){var s=(4+Math.floor((t%Dre+Ore)/Nre))%4,l=(4+Math.floor((a%Dre+Ore)/Nre))%4,u=Math.floor(n/Rre),c=Math.floor(i/Rre);if(l!==s||c!==u){var d="View from stage ".concat(xre[c]).concat(bre[l]);this[Mee].setAttribute("aria-label",d)}}}},{key:Dee,value:function(e){var t=this[Lre],n=this[Iee].framedFieldOfView;lu(R(x.prototype),Dee,this).call(this,e);var r=this[Iee].framedFieldOfView,a=t.getFieldOfView()/n;this[Kre]=r*a,t.updateAspect(this[Iee].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.jumpCameraToGoal()}},{key:Oee,value:function(){lu(R(x.prototype),Oee,this).call(this);var e=this[Iee].framedFieldOfView;this[Kre]=e,this[Qre]?this[eae]=!0:this[Qre]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}}]),x}(e,(t=Pre,n=Fre,r=Yre,a=Xre,i=qre,o=Gre,s=Hre,l=Lre,u=Kre,c=$re,d=Jre,h=Qre,f=eae,nae));return p=Wre,m=Ure,v=Vre,g=Zre,mre([O$({type:Boolean,attribute:"camera-controls"})],y.prototype,"cameraControls",void 0),mre([sre({intrinsics:_re,observeEffects:!0,updateHandler:tae}),O$({type:String,attribute:"camera-orbit",hasChanged:function(){return!0}})],y.prototype,"cameraOrbit",void 0),mre([sre({intrinsics:Ire,observeEffects:!0,updateHandler:rae}),O$({type:String,attribute:"camera-target",hasChanged:function(){return!0}})],y.prototype,"cameraTarget",void 0),mre([sre({intrinsics:Tre,observeEffects:!0,updateHandler:nae}),O$({type:String,attribute:"field-of-view",hasChanged:function(){return!0}})],y.prototype,"fieldOfView",void 0),mre([sre({intrinsics:Mre,updateHandler:aae}),O$({type:String,attribute:"min-camera-orbit",hasChanged:function(){return!0}})],y.prototype,"minCameraOrbit",void 0),mre([sre({intrinsics:Are,updateHandler:iae}),O$({type:String,attribute:"max-camera-orbit",hasChanged:function(){return!0}})],y.prototype,"maxCameraOrbit",void 0),mre([sre({intrinsics:Ere,updateHandler:oae}),O$({type:String,attribute:"min-field-of-view",hasChanged:function(){return!0}})],y.prototype,"minFieldOfView",void 0),mre([sre({intrinsics:Cre,updateHandler:sae}),O$({type:String,attribute:"max-field-of-view",hasChanged:function(){return!0}})],y.prototype,"maxFieldOfView",void 0),mre([O$({type:Number,attribute:"interaction-prompt-threshold"})],y.prototype,"interactionPromptThreshold",void 0),mre([O$({type:String,attribute:"interaction-prompt-style"})],y.prototype,"interactionPromptStyle",void 0),mre([O$({type:String,attribute:"interaction-prompt"})],y.prototype,"interactionPrompt",void 0),mre([O$({type:String,attribute:"interaction-policy"})],y.prototype,"interactionPolicy",void 0),mre([O$({type:Number,attribute:"orbit-sensitivity"})],y.prototype,"orbitSensitivity",void 0),mre([O$({type:String,attribute:"touch-action"})],y.prototype,"touchAction",void 0),mre([O$({type:Boolean,attribute:"disable-zoom"})],y.prototype,"disableZoom",void 0),mre([O$({type:Number,attribute:"interpolation-decay"})],y.prototype,"interpolationDecay",void 0),mre([O$({type:String,attribute:"bounds"})],y.prototype,"bounds",void 0),y}(function(e){var t,n,r,a,i,o,s,l,u,c,d=function(e,d){N(f,e);var h=F(f);function f(){var e;return M(this,f),(e=h.apply(this,arguments)).ar=!1,e.arScale="auto",e.arPlacement="floor",e.arModes="webxr scene-viewer",e.iosSrc=null,e.xrEnvironment=!1,e[t]=!1,e[n]=e.shadowRoot.querySelector(".ar-button"),e[r]=document.createElement("a"),e[a]=new Set,e[i]=une,e[o]=!1,e[s]=function(t){t.preventDefault(),e.activateAR()},e[l]=function(t){var n=t.status;n!==h9&&e[Lee].arRenderer.presentedScene!==e[Iee]||(e.setAttribute("ar-status",n),e.dispatchEvent(new CustomEvent("ar-status",{detail:{status:n}})),n===h9?e.removeAttribute("ar-tracking"):n===f9&&e.setAttribute("ar-tracking",p9))},e[u]=function(t){var n=t.status;e.setAttribute("ar-tracking",n),e.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:n}}))},e[c]=function(t){"_apple_ar_quicklook_button_tapped"==t.data&&e.dispatchEvent(new CustomEvent("quick-look-button-tapped"))},e}return(0,A.Z)(f,[{key:"canActivateAR",get:function(){return this[mne]!==une}},{key:"connectedCallback",value:function(){lu(R(f.prototype),"connectedCallback",this).call(this),this[Lee].arRenderer.addEventListener("status",this[xne]),this.setAttribute("ar-status",h9),this[Lee].arRenderer.addEventListener("tracking",this[wne]),this[gne].addEventListener("message",this[kne])}},{key:"disconnectedCallback",value:function(){lu(R(f.prototype),"disconnectedCallback",this).call(this),this[Lee].arRenderer.removeEventListener("status",this[xne]),this[Lee].arRenderer.removeEventListener("tracking",this[wne]),this[gne].removeEventListener("message",this[kne])}},{key:"update",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lu(R(f.prototype),"update",this).call(this,t),t.has("arScale")&&(this[Iee].canScale="fixed"!==this.arScale),t.has("arPlacement")&&(this[Iee].updateShadow(),this[Nee]()),(t.has("ar")||t.has("arModes")||t.has("iosSrc"))&&(t.has("arModes")&&(this[vne]=ine(this.arModes)),this[Sne]());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"activateAR",value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this[mne],e.next=e.t0===one?3:e.t0===lne?5:e.t0===sne?8:10;break;case 3:return this[fne](),e.abrupt("break",11);case 5:return e.next=7,this[dne]();case 7:return e.abrupt("break",11);case 8:return this[hne](),e.abrupt("break",11);case 10:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:d,value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this[mne]=une,!this.ar){e.next=32;break}if(null==this.src){e.next=31;break}t=G(this[vne]),e.prev=3,t.s();case 5:if((n=t.n()).done){e.next=23;break}if(r=n.value,e.t0="webxr"===r&&V$&&!rne,!e.t0){e.next=12;break}return e.next=11,this[Lee].arRenderer.supportsPresentation();case 11:e.t0=e.sent;case 12:if(!e.t0){e.next=15;break}return this[mne]=lne,e.abrupt("break",23);case 15:if("scene-viewer"!==r||!Y$||ane){e.next=18;break}return this[mne]=sne,e.abrupt("break",23);case 18:if("quick-look"!==r||!G$){e.next=21;break}return this[mne]=one,e.abrupt("break",23);case 21:e.next=5;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(3),t.e(e.t1);case 28:return e.prev=28,t.f(),e.finish(28);case 31:!this.canActivateAR&&null!=this.iosSrc&&G$&&(this[mne]=one);case 32:this.canActivateAR?(this[cne].classList.add("enabled"),this[cne].addEventListener("click",this[bne])):this[cne].classList.contains("enabled")&&(this[cne].removeEventListener("click",this[bne]),this[cne].classList.remove("enabled"),a="failed",this.setAttribute("ar-status",a),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:a}})));case 33:case"end":return e.stop()}}),e,this,[[3,25,28,31]])})));return function(){return e.apply(this,arguments)}}()},{key:dne,value:function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Attempting to present in AR with WebXR..."),e.next=3,this[Tne]();case 3:return e.prev=3,this[cne].removeEventListener("click",this[bne]),(t=this[Lee].arRenderer).placeOnWall="wall"===this.arPlacement,e.next=9,t.present(this[Iee],this.xrEnvironment);case 9:e.next=22;break;case 11:return e.prev=11,e.t0=e.catch(3),console.warn("Error while trying to present in AR with WebXR"),console.error(e.t0),e.next=17,this[Lee].arRenderer.stopPresenting();case 17:return rne=!0,console.warn("Falling back to next ar-mode"),e.next=21,this[Sne]();case 21:this.activateAR();case 22:return e.prev=22,this[Sne](),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[3,11,22,25]])})));return function(){return e.apply(this,arguments)}}()},{key:Tne,value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.loaded,e.t0){e.next=7;break}return this[yne]=!0,this[Eee](),e.next=6,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(r){e.addEventListener(t,(function a(i){n&&!n(i)||(r(i),e.removeEventListener(t,a))}))}))}(this,"load");case 6:this[yne]=!1;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:zee,value:function(){return lu(R(f.prototype),zee,this).call(this)||this[yne]}},{key:hne,value:function(){var e=this,t=self.location.toString(),n=new URL(t),r=new URL(this.src,t),a=new URLSearchParams(r.search);if(n.hash="#model-viewer-no-ar-fallback",a.set("mode","ar_preferred"),a.has("disable_occlusion")||a.set("disable_occlusion","true"),"fixed"===this.arScale&&a.set("resizable","false"),"wall"===this.arPlacement&&a.set("enable_vertical_placement","true"),a.has("sound")){var i=new URL(a.get("sound"),t);a.set("sound",i.toString())}if(a.has("link")){var o=new URL(a.get("link"),t);a.set("link",o.toString())}var s="intent://arvr.google.com/scene-viewer/1.0?".concat(a.toString()+"&file="+encodeURIComponent(r.toString()),"#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=").concat(encodeURIComponent(n.toString()),";end;");self.addEventListener("hashchange",(function(){"#model-viewer-no-ar-fallback"===self.location.hash&&(ane=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),e[Sne]())}),{once:!0}),this[gne].setAttribute("href",s),console.log("Attempting to present in AR with Scene Viewer..."),this[gne].click()}},{key:fne,value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!this.iosSrc,this[cne].classList.remove("enabled"),!t){e.next=8;break}return e.next=5,this.prepareUSDZ();case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=this.iosSrc;case 9:n=e.t0,r=new URL(n,self.location.toString()),"fixed"===this.arScale&&(r.hash&&(r.hash+="&"),r.hash+="allowsContentScaling=0"),(a=this[gne]).setAttribute("rel","ar"),i=document.createElement("img"),a.appendChild(i),a.setAttribute("href",r.toString()),t&&a.setAttribute("download","model.usdz"),console.log("Attempting to present in AR with Quick Look..."),a.click(),a.removeChild(i),t&&URL.revokeObjectURL(n),this[cne].classList.add("enabled");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"prepareUSDZ",value:function(){var e=Vn(Un().mark((function e(){var t,n,r,a,i,o,s,l;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this[Pee].beginActivity(),e.next=3,this[Tne]();case 3:return n=this[Iee],r=n.shadow,a=!1,null!=r&&(a=r.visible,r.visible=!1),t(.2),i=new Hte,e.next=9,i.parse(n.modelContainer);case 9:return o=e.sent,s=new Blob([o],{type:"model/vnd.usdz+zip"}),l=URL.createObjectURL(s),e.abrupt("return",(t(1),null!=r&&(r.visible=a),l));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),f}(e,(t=pne,n=cne,r=gne,a=vne,i=mne,o=yne,s=bne,l=xne,u=wne,c=kne,Sne));return nne([O$({type:Boolean,attribute:"ar"})],d.prototype,"ar",void 0),nne([O$({type:String,attribute:"ar-scale"})],d.prototype,"arScale",void 0),nne([O$({type:String,attribute:"ar-placement"})],d.prototype,"arPlacement",void 0),nne([O$({type:String,attribute:"ar-modes"})],d.prototype,"arModes",void 0),nne([O$({type:String,attribute:"ios-src"})],d.prototype,"iosSrc",void 0),nne([O$({type:Boolean,attribute:"xr-environment"})],d.prototype,"xrEnvironment",void 0),d}(function(e){var t,n,r,a,i,o,s,l,u,c,d,h,f,p,m=function(e,m,v){N(y,e);var g=F(y);function y(){var e;M(this,y);for(var m=arguments.length,v=new Array(m),b=0;b<m;b++)v[b]=arguments[b];(e=g.call.apply(g,[this].concat(v))).poster=null,e.reveal=dae,e.loading="auto",e.generateSchema=!1,e.seamlessPoster=!1,e[t]=!1,e[n]=!1,e[r]=0,e[a]=null,e[i]=e.shadowRoot.querySelector(".slot.poster"),e[o]=e.shadowRoot.querySelector("#default-poster"),e[s]=e.shadowRoot.querySelector("#default-progress-bar > .bar"),e[l]=e.shadowRoot.querySelector("#default-progress-bar > .mask"),e[u]=e[gae].getAttribute("aria-label"),e[c]=function(e,t){var n=null,r=function(){null==n&&(e.apply(void 0,arguments),n=self.setTimeout((function(){return n=null}),100))};return r.flush=function(){null!=n&&(self.clearTimeout(n),n=null)},r}((function(t){var n=e[pae].parentNode;requestAnimationFrame((function(){e[mae].style.opacity=""+.2*(1-t),e[pae].style.transform="scaleX(".concat(t,")"),0===t&&(n.removeChild(e[pae]),n.appendChild(e[pae])),1===t?e[pae].classList.add("hide"):e[pae].classList.remove("hide")}))})),e[d]=function(){e.reveal!==hae&&e.dismissPoster()},e[h]=function(t){if(e.reveal!==hae)switch(t.keyCode){case 32:case 13:e.dismissPoster()}},e[f]=function(t){var n=t.detail.totalProgress;e[kae]=Math.max(n,e[kae]),1===n&&(e[wae].flush(),!e[Bee]()||null==e[yae]&&e.reveal!==dae||e[bae]()),e[wae](n),e.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:n}}))},e[p]=function(){e[Sae]=!0;var t=e.getRootNode();t&&t.activeElement===(0,L.Z)(e)&&e[Mee].focus();var n=e[gae];n.setAttribute("aria-hidden","true"),n.tabIndex=-1,e.dispatchEvent(new CustomEvent("poster-dismissed"))};var x=self.ModelViewerElement||{},w=x.dracoDecoderLocation||"https://www.gstatic.com/draco/versioned/decoders/1.4.1/";i7.setDRACODecoderLocation(w);var k=x.ktx2TranscoderLocation||"https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/";return i7.setKTX2TranscoderLocation(k),x.meshoptDecoderLocation&&i7.setMeshoptDecoderLocation(x.meshoptDecoderLocation),e}return(0,A.Z)(y,[{key:"dismissPoster",value:function(){this[Bee]()?this[bae]():(this[yae]="interaction",this[Eee]())}},{key:"showPoster",value:function(){var e=this[vae],t=this[gae];t.removeAttribute("tabindex"),t.removeAttribute("aria-hidden"),e.classList.add("show");var n=this.modelIsVisible;this[xae]=!1,this[kee](n),this[Sae]=!1}},{key:"getDimensions",value:function(){return Wee(this[Iee].size)}},{key:"connectedCallback",value:function(){lu(R(y.prototype),"connectedCallback",this).call(this),this[vae].addEventListener("click",this[Cae]),this[vae].addEventListener("keydown",this[_ae]),this[Pee].addEventListener("progress",this[Mae]),fae.registerInstance(this)}},{key:"disconnectedCallback",value:function(){lu(R(y.prototype),"disconnectedCallback",this).call(this),this[vae].removeEventListener("click",this[Cae]),this[vae].removeEventListener("keydown",this[_ae]),this[Pee].removeEventListener("progress",this[Mae]),fae.unregisterInstance(this)}},{key:"updated",value:function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lu(R(y.prototype),"updated",this).call(this,t),t.has("poster")&&null!=this.poster&&(this[gae].style.backgroundImage="url(".concat(this.poster,")")),t.has("alt")&&this[gae].setAttribute("aria-label","".concat(this[See],". ").concat(this[Eae])),(t.has("reveal")||t.has("loading"))&&this[Eee](),t.has("generateSchema")&&(!0===this.generateSchema?this[Iee].updateSchema(this.src):this[Iee].updateSchema(null)),t.has("seamlessPoster")&&(!0===this.seamlessPoster?this[vae].classList.add("quick"):this[vae].classList.remove("quick"));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:m,value:function(){return!!this.src&&(null!=this[yae]||"eager"===this.loading||this.reveal===dae&&this[wee])}},{key:Bee,value:function(){return!!this.src&&lu(R(y.prototype),Bee,this).call(this)&&1===this[kae]}},{key:v,value:function(){var e=this;this[yae]=null;var t=this[vae];if(t.classList.contains("show")){var n=this.modelIsVisible;this[xae]=!0,this[kee](n),requestAnimationFrame((function(){t.classList.remove("show"),!0===e.seamlessPoster?e[Tae]():t.addEventListener("transitionend",e[Tae],{once:!0})}))}else this[Sae]=!0}},{key:jee,value:function(){return lu(R(y.prototype),jee,this).call(this)&&this[xae]}},{key:Uee,value:function(){return lu(R(y.prototype),Uee,this).call(this)&&this[Sae]}},{key:Eee,value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this[kae]=0,!0===this.generateSchema&&this[Iee].updateSchema(this.src),null!=this[Iee].currentGLTF&&null!=this.src&&this[zee]()||this.showPoster(),e.next=5,lu(R(y.prototype),Eee,this).call(this);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"dracoDecoderLocation",get:function(){return i7.getDRACODecoderLocation()},set:function(e){i7.setDRACODecoderLocation(e)}},{key:"ktx2TranscoderLocation",get:function(){return i7.getKTX2TranscoderLocation()},set:function(e){i7.setKTX2TranscoderLocation(e)}},{key:"meshoptDecoderLocation",get:function(){return i7.getMeshoptDecoderLocation()},set:function(e){i7.setMeshoptDecoderLocation(e)}},{key:"mapURLs",value:function(e){K9.singleton.loader[n7].manager.setURLModifier(e)}}]),y}(e,(t=xae,n=Sae,r=kae,a=yae,i=vae,o=gae,s=pae,l=mae,u=Eae,c=wae,d=Cae,h=_ae,f=Mae,zee),(p=Tae,bae));return cae([O$({type:String})],m.prototype,"poster",void 0),cae([O$({type:String})],m.prototype,"reveal",void 0),cae([O$({type:String})],m.prototype,"loading",void 0),cae([O$({type:Boolean,attribute:"generate-schema"})],m.prototype,"generateSchema",void 0),cae([O$({type:Boolean,attribute:"seamless-poster"})],m.prototype,"seamlessPoster",void 0),m}(function(e){var t,n=function(e,n){N(a,e);var r=F(a);function a(){var e;return M(this,a),(e=r.apply(this,arguments)).autoplay=!1,e.animationName=void 0,e.animationCrossfadeDuration=300,e[t]=!0,e}return(0,A.Z)(a,[{key:"availableAnimations",get:function(){return this.loaded?this[Iee].animationNames:[]}},{key:"duration",get:function(){return this[Iee].duration}},{key:"paused",get:function(){return this[Gee]}},{key:"currentTime",get:function(){return this[Iee].animationTime},set:function(e){this[Iee].animationTime=e,this[Lee].threeRenderer.shadowMap.needsUpdate=!0,this[Nee]()}},{key:"pause",value:function(){this[Gee]||(this[Gee]=!0,this[Lee].threeRenderer.shadowMap.autoUpdate=!1,this.dispatchEvent(new CustomEvent("pause")))}},{key:"play",value:function(){this[Gee]&&this.availableAnimations.length>0&&(this[Gee]=!1,this[Lee].threeRenderer.shadowMap.autoUpdate=!0,this[Iee].hasActiveAnimation||this[Hee](),this.dispatchEvent(new CustomEvent("play")))}},{key:n,value:function(){lu(R(a.prototype),Oee,this).call(this),this[Gee]=!0,this.autoplay&&(this[Hee](),this.play())}},{key:Ree,value:function(e,t){lu(R(a.prototype),Ree,this).call(this,e,t),this[Gee]||!this[Uee]()&&!this[Lee].isPresenting||(this[Iee].updateAnimation(t/1e3),this[Nee]())}},{key:"updated",value:function(e){lu(R(a.prototype),"updated",this).call(this,e),e.has("autoplay")&&this.autoplay&&this.play(),e.has("animationName")&&this[Hee]()}},{key:Eee,value:function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this[Iee].stopAnimation(),lu(R(a.prototype),Eee,this).call(this)));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:Hee,value:function(){this[Iee].playAnimation(this.animationName,this.animationCrossfadeDuration/1e3),this[Gee]&&(this[Iee].updateAnimation(0),this[Nee]())}}]),a}(e,(t=Gee,Oee));return Zee([O$({type:Boolean})],n.prototype,"autoplay",void 0),Zee([O$({type:String,attribute:"animation-name"})],n.prototype,"animationName",void 0),Zee([O$({type:Number,attribute:"animation-crossfade-duration"})],n.prototype,"animationCrossfadeDuration",void 0),n}(function(e){var t,n=Symbol("endPolyfillCoordination");return t=n,function(e){N(a,e);var r=F(a);function a(){var e;return M(this,a),(e=r.apply(this,arguments))[t]=null,e}return(0,A.Z)(a,[{key:"connectedCallback",value:function(){lu(R(a.prototype),"connectedCallback",this)&&lu(R(a.prototype),"connectedCallback",this).call(this),null==this[n]&&(this[n]=function(e){if(null==e.shadowRoot||e.hasAttribute("data-js-focus-visible"))return function(){};if(!self.applyFocusVisiblePolyfill){var t=function(){self.applyFocusVisiblePolyfill(e.shadowRoot)};return self.addEventListener("focus-visible-polyfill-ready",t,{once:!0}),function(){self.removeEventListener("focus-visible-polyfill-ready",t)}}return self.applyFocusVisiblePolyfill(e.shadowRoot),function(){}}(this))}},{key:"disconnectedCallback",value:function(){lu(R(a.prototype),"disconnectedCallback",this)&&lu(R(a.prototype),"disconnectedCallback",this).call(this),null!=this[n]&&(this[n](),this[n]=null)}}]),a}(e)}(Vee)))))))));customElements.define("model-viewer",xoe);var woe=(0,Ol.Z)(T.createElement(T.Fragment,null,T.createElement("path",{d:"M15.54 5.54L13.77 7.3 12 5.54 10.23 7.3 8.46 5.54 12 2zm2.92 10l-1.76-1.77L18.46 12l-1.76-1.77 1.76-1.77L22 12zm-10 2.92l1.77-1.76L12 18.46l1.77-1.76 1.77 1.76L12 22zm-2.92-10l1.76 1.77L5.54 12l1.76 1.77-1.76 1.77L2 12z"}),T.createElement("circle",{cx:"12",cy:"12",r:"3"})),"ControlCamera"),koe=function(e,t){return console.log(e,t),"793-F"===t?"Sistema_direccion"===e?[{title:"Acumuladores",position:"1.3 3.5 3.3",normal:"0 0.05 0.69",orbit:"225deg 45deg 3m",target:"1.3m 2.7m 3.3m"},{title:"Sistema Hidraulico Direcci\xf3n",position:"0 1.93 2.5",normal:"0.73 0.05 0.69",orbit:"45deg 45deg 2.5m",target:"0m 1.7m 2.5m"},{title:"Cilindro Hidraulico 1",position:"-0.6 1.7 2.5",normal:"0.73 0.05 0.69",orbit:"45deg 45deg 2m",target:"-0.6m 1.5m 2.5m"},{title:"Cilindro Hidraulico 2",position:"0.6 1.7 2.5",normal:"0.73 0.05 0.69",orbit:"45deg 45deg 2m",target:"0.6m 1.5m 2.5m"},{title:"Bomba Direcci\xf3n",position:"-0.5 2.25 1",normal:"0.73 0.05 0.69",orbit:"10deg 80deg 2m",target:"-0.5m 1.9m 1m"}]:"Neumaticos"===e?[{title:"Neum\xe1tico",position:"2.6 2.5 2.5",normal:"0.73 0.05 0.69",orbit:"125deg 90deg 6m",target:"2.3m 1.45m 2.8m"},{title:"Aro",position:"2.6 1.93 2.5",normal:"0.73 0.05 0.69",orbit:"125deg 90deg 3m",target:"2.3m 1.45m 2.6m"}]:"Sistema_hidraulico"===e?[{title:"Filtros de Malla",position:"-0.4 2.7 -0.2",normal:"0 -0.05 -0.69",orbit:"200deg 90deg 1.5m",target:"-0.4m 2.4m -0.2m"},{title:"Cilindro de levante 1",position:"1.1 3.5 -0.7",normal:"0 -0.05 -0.69",orbit:"180deg 65deg 3m",target:"1.1m 2.8m -0.7m"},{title:"Cilindro de levante 2",position:"-1.1 3.5 -0.7",normal:"0 -0.05 -0.69",orbit:"240deg 65deg 3m",target:"-1.1m 2.8m -0.7m"},{title:"Enfriadores de aceite",position:"0.36 3 0.55",normal:"0 0.05 0.5",orbit:"20deg 65deg 3m",target:"0.36m 2m 0.55m"},{title:"Bomba de levante",position:"-0.4 2.35 0.55",normal:"0 0.05 0.5",orbit:"20deg 90deg 1.5m",target:"-0.4m 2.1m 0.55m"}]:"Estructura"===e?[{title:"AFEX",position:"-1.8 4.8 2.9",normal:"0.73 0.05 0.69",orbit:"45deg 60deg 1.5m",target:"-1.8m 4.4m 2.9m"},{title:"Filtro de Aire 4",position:"2.1 3 5.1",normal:"0.73 0.05 0.69",orbit:"45deg 90deg 2m",target:"2.1m 3.3m 5.2m"},{title:"Filtro de Aire 3",position:"1.6 3 5.1",normal:"0.73 0.05 0.69",orbit:"45deg 90deg 2m",target:"1.6m 3.3m 5.2m"},{title:"Filtro de Aire 2",position:"-1.6 3 5.1",normal:"0.73 0.05 0.69",orbit:"330deg 90deg 2m",target:"-1.6m 3.3m 5.2m"},{title:"Filtro de Aire 1",position:"-2.1 3 5.1",normal:"0.73 0.05 0.69",orbit:"330deg 90deg 2m",target:"-2.1m 3.3m 5.2m"}]:"Chasis"===e?[{title:"Articulaci\xf3n Eje Trasero",position:"0 0.7 -0.5",normal:"0 -0.05 -0.69",orbit:"250deg 100deg 3m",target:"0m 1m -0.5m"},{title:"Eslabones de suspenci\xf3n trasera",position:"0 1.5 -2",normal:"0 -0.05 -0.69",orbit:"225deg 100deg 2m",target:"0m 1.5m -2m"},{title:"Cross tube",position:"0 2.1 0",normal:"0 -0.05 -0.69",orbit:"0deg 180deg 3m",target:"0m 2.1m 0m"},{title:"Steering box",position:"0 1.8 2.6",normal:"0 0.05 0.69",orbit:"0deg 20deg 1.5m",target:"0m 1.7m 2.6m"},{title:"Pad tolva",position:"0.8 2.7 -1.5",normal:"0 -0.05 0.69",orbit:"0deg 20deg 2m",target:"0.8m 2.7m -1.5m"}]:"Maza"===e?[{title:"Maza derecha",position:"-1 1.93 2.5",normal:"0 0.05 -1",orbit:"-125deg 90deg 4m",target:"-2.3m 1.45m 2.6m"},{title:"Maza izquierda",position:"1 1.93 2.5",normal:"0 0.05 1",orbit:"125deg 90deg 4m",target:"2.3m 1.45m 2.6m"}]:"Sistema_neumatico"===e?[{title:"Condensador de aire",position:"-0.05 2.4 4.65",normal:"0 0.05 1",orbit:"0deg 90deg 4m",target:"-0.05m 2.35m 4.65m"},{title:"Compresor de aire acondocionado",position:"-0.7 2.15 4",normal:"0 0.05 -1",orbit:"-145deg 90deg 0.7m",target:"-0.7m 2.3m 4m"},{title:"Compresor de aire",position:"-0.45 2.2 4.2",normal:"0 0.05 -1",orbit:"125deg 75deg 1m",target:"-0.45m 2.35m 4.2m"}]:"Suspension"===e?[{title:"Suspensi\xf3n delantera 1",position:"-1.6 4 2.7",normal:"0 0.05 1",orbit:"0deg 55deg 4m",target:"-1.6m 3m 2.7m"},{title:"Suspensi\xf3n delantera 2",position:"1.6 4 2.7",normal:"0 0.05 1",orbit:"60deg 55deg 4m",target:"1.6m 3m 2.7m"},{title:"Suspensi\xf3n trasera 1",position:"-0.6 3 -3.2",normal:"0 0.05 1",orbit:"0deg 55deg 3m",target:"-0.6m 2m -3.2m"},{title:"Suspensi\xf3n trasera 2",position:"0.6 3 -3.25",normal:"0 0.05 1",orbit:"60deg 55deg 3m",target:"0.6m 2m -3.25m"}]:"Transmision"===e?[{title:"Caja de transferencia",position:"0 2.4 -1.2",normal:"0 -0.05 1",orbit:"300deg 55deg 1.5m",target:"0m 2.2m -1.2m"},{title:"Transmisi\xf3n",position:"0 2.2 -2",normal:"0 -0.05 1",orbit:"300deg 55deg 3m",target:"0m 1.7m -2m"},{title:"Mando Final Izquierdo",position:"2 2.2 -2",normal:"0 -0.05 1",orbit:"300deg 55deg 3m",target:"2m 1.7m -2m"},{title:"Mando Final Derecho",position:"-2 2.2 -2",normal:"0 -0.05 1",orbit:"300deg 55deg 3m",target:"-2m 1.7m -2m"},{title:"Uni\xf3n deslizante",position:"0 1.67 0",normal:"0 -0.05 -1",orbit:"10deg 55deg 3m",target:"0m 1.8m 0m"},{title:"Respiradero convertidor de torque",position:"0.5 3.5 1.4",normal:"0 0.05 1",orbit:"60deg 55deg 1m",target:"0.5m 3.2m 1.4m"},{title:"Convertidor de torque",position:"0 1.4 1.4",normal:"0 0.05 1",orbit:"60deg 120deg 3m",target:"0m 2m 1.4m"},{title:"P.T.O.",position:"-0.45 2.5 0.85",normal:"0 -0.05 -1",orbit:"240deg 50deg 1m",target:"-0.45m 2.25m 0.85m"}]:"Motor"===e?[{title:"Motor",position:"1 2.5 2",normal:"0 -0.05 2",orbit:"90deg 90deg 5m",target:"1 2.5 2"},{title:"Radiador",position:"0 4.5 4.7",normal:"0 0.05 1",orbit:"45deg 90deg 7m",target:"0m 3m 4.5m"},{title:"Tanque de Combustible",position:"2.3 3.5 0.5",normal:"-1 0.05 -1",orbit:"125deg 90deg 5m",target:"2.3m 2.5m 0.5m"},{title:"Filtro centr\xedfugo",position:"-0.3 3.1 1.5",normal:"-1 0.05 -1",orbit:"180deg 45deg 2m",target:"-0.3m 2.9m 1.5m"},{title:"Respiradero Motor 1",position:"0.3 3.1 2",normal:"-1 0.05 -1",orbit:"180deg 90deg 2m",target:"0.3m 2.9m 2m"},{title:"Respiradero Motor 2",position:"-0.3 3.1 2",normal:"-1 0.05 -1",orbit:"225deg 90deg 2m",target:"-0.3m 2.9m 2m"},{title:"Filtros de Combustible",position:"-0.3 1.5 3.7",normal:"-1 0.05 -1",orbit:"225deg 110deg 2m",target:"-0.3m 1.5m 3.7m"},{title:"Bomba de Agua Auxiliar Derecho",position:"-0.45 1.9 4.2",normal:"0 -0.05 2",orbit:"0deg 140deg 2m",target:"-0.45m 1.9m 4.5m"},{title:"Bomba de Agua Auxiliar Izquierdo",position:"0.45 1.9 4.2",normal:"0 -0.05 2",orbit:"0deg 140deg 2m",target:"0.45m 1.9m 4.2m"},{title:"Bomba de Aceite de Motor",position:"0.45 1.9 3.8",normal:"0.7 0.5 1",orbit:"90deg 120deg 1.5m",target:"0.45m 2.1m 3.8m"},{title:"Enfriadores de Aceite de Motor",position:"0.45 1.9 2.7",normal:"0.7 0.5 1",orbit:"90deg 90deg 1.5m",target:"0.45m 2m 2.7m"},{title:"V\xe1lvula Termost\xe1tica",position:"0.55 2.4 4.5",normal:"0.7 0.5 1",orbit:"120deg 90deg 1.5m",target:"0.55m 2.25m 4.5m"},{title:"Filtros de Autolimpieza",position:"-0.45 1.9 2.7",normal:"-1 0.05 -1",orbit:"225deg 110deg 2m",target:"-0.45m 2.1m 2.7m"},{title:"Turbos",position:"0 3.5 3.9",normal:"-1 0.05 -1",orbit:"225deg 45deg 2m",target:"0m 3.1m 3.9m"},{title:"Silenciadores",position:"-2.3 3.5 2",normal:"-1 0.05 -1",orbit:"225deg 90deg 2.5m",target:"-2.3m 4m 2m"},{title:"Ductos de escape",position:"-1.2 3.5 2",normal:"-1 0.05 -1",orbit:"180deg 90deg 2.5m",target:"-1.2m 4m 2m"}]:"Cabina"===e?[{title:"Cintur\xf3n de seguridad",position:"2.45 4.5 2.7",normal:"0 -0.05 2",orbit:"-45deg 90deg 0.7m",target:"2.45m 4.5m 2.7m"},{title:"Plumilla 1",position:"2.45 5 4",normal:"0 0.05 1",orbit:"45deg 90deg 1m",target:"2.45m 4.7m 4m"},{title:"Plumilla 2",position:"1.1 5 4",normal:"0 0.05 1",orbit:"-45deg 90deg 1m",target:"1.1m 4.7m 4m"},{title:"Manubrio",position:"2.2 4.5 3.5",normal:"0 0.05 1",orbit:"180deg 55deg 0.7m",target:"2.2m 4.5m 3.5m"},{title:"Monitor Vims",position:"1.7 4.5 3.5",normal:"0 0.05 1",orbit:"180deg 55deg 0.7m",target:"1.7m 4.5m 3.5m"},{title:"Selector de Marcha",position:"1.8 4.25 3.25",normal:"0 0.05 1",orbit:"180deg 55deg 0.7m",target:"1.8m 4.25m 3.25m"},{title:"Control de Levante",position:"1.6 4.25 3.25",normal:"0 0.05 1",orbit:"180deg 55deg 0.7m",target:"1.6m 4.25m 3.25m"},{title:"Asiento chofer",position:"2.2 4.45 3",normal:"0 0.05 1",orbit:"0deg 55deg 0.7m",target:"2.2m 4.45m 3m"},{title:"Asiento copiloto",position:"1.3 4.45 3",normal:"0 0.05 1",orbit:"0deg 55deg 0.7m",target:"1.3m 4.45m 3m"}]:[]:"PC5500"===t?"Chasis"===e?[{title:"Chasis",position:"0 3.1 -4",normal:"-0.7 -0.05 -0.69",orbit:"170deg 70deg 6.5m",target:"0m 3.1m -4m"},{title:"Corona de Giro",position:"-1.75 2.1 -2",normal:"-0.7 -0.05 -0.69",orbit:"300deg 80deg 4m",target:"-1m 2.1m -2m"},{title:"Bastidor",position:"-2 1.7 -2",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 4m",target:"-1m 1.7m -2m"}]:"Cabina"===e?[{title:"Controles de traslaci\xf3n",position:"2.2 4.85 0",normal:"0 -0.05 2",orbit:"-45deg 70deg 0.7m",target:"2.2m 4.85m -0.3m"},{title:"Joystick 1",position:"2.45 5.2 -0.55",normal:"0 0.05 1",orbit:"10deg 60deg 1m",target:"2.45m 5.2m -0.7m"},{title:"Joystick 2",position:"2.1 5.2 -0.55",normal:"0 0.05 1",orbit:"10deg 60deg 1m",target:"2.1m 5.2m -0.7m"}]:"Electrico"===e?[{title:"Gabinete el\xe9ctrico 1",position:"1.4 5.6 -4.6",normal:"0 -0.05 2",orbit:"-45deg 45deg 2m",target:"1.4m 5.3m -4.6m"},{title:"Gabinete el\xe9ctrico 2",position:"-1.6 5.4 -4",normal:"0 -0.05 2",orbit:"-45deg 65deg 1m",target:"-1.6m 5.1m -4m"},{title:"Gabinete el\xe9ctrico 3",position:"-2.1 5.4 -6",normal:"0.5 0.05 2",orbit:"80deg 65deg 2m",target:"-2.1m 5.1m -6m"},{title:"Sala El\xe9ctrica",position:"2.1 3.5 -1",normal:"-2 0.05 2",orbit:"-120deg 90deg 4m",target:"2.1m 3.5m -1m"},{title:"Bater\xedas",position:"2.2 2.6 -4.6",normal:"-2 0.05 2",orbit:"-100deg 70deg 3m",target:"2.1m 2m -4.6m"}]:"Estructura"===e?[{title:"Gabinete el\xe9ctrico 1",position:"1.4 5.6 -4.6",normal:"0 -0.05 2",orbit:"-45deg 45deg 2m",target:"1.4m 5.3m -4.6m"},{title:"Gabinete el\xe9ctrico 2",position:"-1.6 5.4 -4",normal:"0 -0.05 2",orbit:"-45deg 65deg 1m",target:"-1.6m 5.1m -4m"},{title:"Gabinete el\xe9ctrico 3",position:"-2.1 5.4 -6",normal:"0.5 0.05 2",orbit:"100deg 65deg 2m",target:"-2.1m 5.1m -6m"},{title:"Tanques sistema AFEX",position:"-1.4 5.6 -5",normal:"-0.04 0.07 0.9",orbit:"0deg 65deg 4m",target:"-1.4m 5.1m -5m"},{title:"Tubos de escape",position:"-1 6.1 -5",normal:"-0.04 0.07 0.9",orbit:"-45deg 65deg 4m",target:"-1m 5.7m -5m"},{title:"Caja de filtros",position:"0.8 6.1 -4.7",normal:"-0.04 0.07 0.9",orbit:"45deg 65deg 4m",target:"0.8m 5.7m -4.7m"},{title:"Bombas de engrase",position:"2 5.6 -5.5",normal:"-0.04 0.07 0.9",orbit:"45deg 65deg 4m",target:"2m 5.4m -5.5m"},{title:"Tanques de grasa",position:"2 4.9 -5.5",normal:"-0.04 0.07 0.9",orbit:"45deg 65deg 4m",target:"2m 4.7m -5.5m"}]:"Implemento"===e?[{title:"Boom",position:"0 6.5 2",normal:"0.04 0.07 0.9",orbit:"90deg 90deg 6m",target:"0m 6.3m 2m"},{title:"Cilindros Levante",position:"0 4.5 2",normal:"0.04 0.07 0.9",orbit:"90deg 90deg 6m",target:"0m 4.5m 2m"},{title:"Stick",position:"0 5 6",normal:"0.04 0.07 0.9",orbit:"90deg 90deg 6m",target:"0m 4.7m 6m"},{title:"Cilindros Stick",position:"0 8.5 6",normal:"0.04 0.07 0.9",orbit:"90deg 90deg 6m",target:"0m 8.3m 6m"},{title:"Cilindros Balde",position:"0 5 8",normal:"0.04 0.07 0.9",orbit:"45deg 90deg 6m",target:"0m 4.7m 8m"},{title:"Balde",position:"0 1 6",normal:"1 -0.5 0.9",orbit:"120deg 90deg 6m",target:"0m 1m 6m"}]:"Mando_de_giro"===e?[{title:"Corona de Giro",position:"-1 2.1 -1.5",normal:"0.7 -0.05 -0.69",orbit:"120deg 45deg 4m",target:"-1m 2.1m -1.5m"},{title:"Motores de Giro",position:"-1 3.5 -2.7",normal:"0.7 -0.05 -0.69",orbit:"100deg 70deg 2m",target:"-1m 3.5m -2.7m"},{title:"Reductores de Giro",position:"-1 2.5 -2.7",normal:"0.7 -0.05 -0.69",orbit:"100deg 70deg 2m",target:"-1m 2.5m -2.7m"}]:"Mando_final"===e?[{title:"Rotary",position:"-0 2.1 -2",normal:"0.7 -0.05 -0.69",orbit:"120deg 45deg 4m",target:"-0m 2.1m -2m"},{title:"Mando Final Derecho",position:"1.5 1 -3.7",normal:"0.7 0.05 0.69",orbit:"70deg 70deg 3m",target:"1.5m 1m -4.2m"},{title:"Mando Final Izquierdo",position:"-1.5 1 -3.7",normal:"0.7 0.05 0.69",orbit:"350deg 70deg 3m",target:"-1.5m 1m -4.2m"},{title:"Motores Hidr\xe1ulicos de Traslaci\xf3n Derecho",position:"0.7 0.5 -4",normal:"0.7 0.05 0.69",orbit:"350deg 120deg 3m",target:"0.7m 0.5m -4m"},{title:"Motores Hidr\xe1ulicos de Traslaci\xf3n Izquierdo",position:"-0.7 0.5 -4",normal:"0.7 0.05 0.69",orbit:"350deg 120deg 3m",target:"-0.7m 0.5m -4m"}]:"Motor"===e?[{title:"Compresor Aire Acondicionado (1 por motor)",position:"0.4 3.6 -6",normal:"-0.7 0.05 -0.69",orbit:"200deg 120deg 1m",target:"0.4m 3.5m -6m"},{title:"Motores de Partida (1 por motor)",position:"-0.7 3.6 -5.9",normal:"-0.7 0.05 -0.69",orbit:"180deg 120deg 1m",target:"-0.7m 3.5m -5.9m"},{title:"Ductos de Escape",position:"-0.7 4.8 -5.5",normal:"-0.7 0.05 -0.69",orbit:"190deg 45deg 4m",target:"-0.7m 4.5m -5.5m"},{title:"Ductos de Escape",position:"-0.7 4.8 -4.3",normal:"-0.7 0.05 -0.69",orbit:"300deg 45deg 4m",target:"-0.7m 4.5m -4.3m"},{title:"Tubos Motor 1",position:"0 4.5 -5.5",normal:"-0.7 0.05 -0.69",orbit:"190deg 45deg 4m",target:"0m 4.3m -5.5m"},{title:"Tubos Motor 2",position:"0 4.5 -4.3",normal:"-0.7 0.05 -0.69",orbit:"300deg 45deg 4m",target:"0m 4.3m -4.3m"},{title:"Filtro Eliminator (1 por motor)",position:"-0.4 3.5 -4",normal:"0.7 0.05 0.69",orbit:"320deg 70deg 2m",target:"-0.4m 3.5m -3.8m"},{title:"Bomba de Agua (1 por motor)",position:"0.2 3.5 -4",normal:"0.7 0.05 0.69",orbit:"320deg 70deg 2m",target:"0.2m 3.5m -3.7m"},{title:"Tanque de Expansi\xf3n del Radiador Motor 1",position:"1.5 4.5 -5.5",normal:"0.7 0.05 0.69",orbit:"300deg 80deg 1m",target:"1.5m 4.3m -5.5m"},{title:"Tanque de Expansi\xf3n del Radiador Motor 2",position:"1.5 4.5 -4.3",normal:"0.7 0.05 0.69",orbit:"300deg 80deg 1m",target:"1.5m 4.3m -4.3m"},{title:"Radiador Motor 1",position:"1.5 2.5 -5.5",normal:"-0.7 0.05 0.69",orbit:"300deg 120deg 4m",target:"1.5m 2.5m -5.5m"},{title:"Radiador Motor 2",position:"1.5 2.5 -4.3",normal:"-0.7 0.05 0.69",orbit:"300deg 120deg 4m",target:"1.5m 2.5m -4.3m"},{title:"Filtro Combustible Separador de Agua",position:"1.5 4.2 -6.6",normal:"0.7 0.05 0.69",orbit:"350deg 80deg 1m",target:"1.5m 4m -6.6m"}]:"PTO"===e?[{title:"Acople Flexible",position:"-1 3.8 -4.3",normal:"0.7 -0.05 -0.69",orbit:"120deg 70deg 3m",target:"-1m 3.6m -4.3m"},{title:"Acople Flexible",position:"-1 3.8 -5.5",normal:"0.7 -0.05 -0.69",orbit:"120deg 70deg 3m",target:"-1m 3.6m -5.5m"},{title:"Bomba Ventilador Enfriador de Aceite Hidr\xe1ulico",position:"-1.5 3.9 -4.55",normal:"-0.7 -0.05 -0.69",orbit:"270deg 70deg 1m",target:"-1.5m 3.7m -4.55m"},{title:"Bomba Ventilador Enfriador de Aceite Hidr\xe1ulico",position:"-1.5 3.9 -5.8",normal:"-0.7 -0.05 -0.69",orbit:"270deg 70deg 1m",target:"-1.5m 3.7m -5.8m"},{title:"Bombas Hidr\xe1ulicas Principales",position:"-1.5 3.5 -4.3",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 1m",target:"-1.5m 3.3m -4.3m"},{title:"Bombas Hidr\xe1ulicas Principales",position:"-1.5 3.5 -5.5",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 1m",target:"-1.5m 3.3m -5.5m"},{title:"Bomba Hidr\xe1ulica Ventilador, Radiador Motor 2",position:"-1.5 3.8 -4.3",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 1m",target:"-1.5m 3.6m -4.3m"},{title:"Bomba Hidr\xe1ulica Ventilador, Radiador Motor 1",position:"-1.5 3.8 -5.5",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 1m",target:"-1.5m 3.6m -5.5m"},{title:"Tanque de Succi\xf3n de Aceite",position:"-2 2.7 -4.9",normal:"-0.7 -0.05 -0.69",orbit:"270deg 70deg 2m",target:"-2m 2.5m -4.9m"}]:"Sistema_hidraulico"===e?[{title:"Respiraderos",position:"-2 5.2 -2",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 2m",target:"-2m 5m -2m"},{title:"Motor Hidr\xe1ulico de Ventilador Superior",position:"-1.5 4.8 -1",normal:"0.7 -0.05 -0.69",orbit:"120deg 70deg 3m",target:"-1.5m 4.3m -1m"},{title:"Motor Hidr\xe1ulico de Ventilador Inferior",position:"-1.5 3.9 -1",normal:"0.7 -0.05 -0.69",orbit:"90deg 70deg 2m",target:"-1.5m 3.5m -1m"},{title:"Enfriadores de aceite",position:"-2.5 4.8 -1",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 3m",target:"-2.5m 3.8m -1m"},{title:"Filtros de Aceite Sistema Hidr\xe1ulico",position:"-2 5 -2.",normal:"0.7 -0.05 -0.69",orbit:"150deg 70deg 2m",target:"-2m 4.8m -2.8m"},{title:"Tanque Hidr\xe1ulico",position:"-2.5 4 -2.5",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 4m",target:"-2.5m 4m -2.5m"},{title:"Tubo Recolector de Aceite de Retorno",position:"-1.5 4 -2.5",normal:"0.7 -0.05 -0.69",orbit:"120deg 70deg 4m",target:"-1.5m 4m -2.5m"},{title:"V\xe1lbulas de Control",position:"0.1 4.6 -2.1",normal:"0.1 -0.9 0.9",orbit:"0deg 70deg 3m",target:"0.1m 4.5m -2.1m"}]:"Sistema_rodado"===e?[{title:"Rodillo Superior",position:"-2.5 1.9 -2",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 1.8m -2m"},{title:"Rodillo Superior",position:"-2.5 1.9 0",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 1.8m 0m"},{title:"Rodillo Superior",position:"-2.5 1.9 -3.7",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 1.8m -3.7m"},{title:"Rodillo Inferior",position:"-2.5 0.6 0",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 0.6m 0m"},{title:"Rodillo Inferior",position:"-2.5 0.6 -0.7",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 0.6m -0.7m"},{title:"Rodillo Inferior",position:"-2.5 0.6 -1.3",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 0.6m -1.3m"},{title:"Rodillo Inferior",position:"-2.5 0.6 -2",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 0.6m -2m"},{title:"Rodillo Inferior",position:"-2.5 0.6 -2.6",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 0.6m -2.6m"},{title:"Rodillo Inferior",position:"-2.5 0.6 -3.2",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 0.6m -3.2m"},{title:"Rodillo Inferior",position:"-2.5 0.6 -3.7",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 0.6m -3.7m"},{title:"Rueda Tensora",position:"-2.5 1 1",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 1m 1m"},{title:"Bastidor",position:"-2.5 1.1 -2",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 1.1m -2m"},{title:"Sprocket",position:"-2.5 1.5 -4.5",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 1.5m -4.5m"}]:[]:[]},Soe=function(e){var t=e.machine,n=e.subSistem,r=(0,T.useState)(),a=(0,U.Z)(r,2),i=(a[0],a[1]),o=(0,T.useState)(),s=(0,U.Z)(o,2),l=s[0],u=s[1],c=(0,T.useState)(0),d=(0,U.Z)(c,2),h=d[0],f=d[1],p=(0,T.useState)(!1),m=(0,U.Z)(p,2),v=m[0],g=m[1],y=(0,T.useState)(!1),b=(0,U.Z)(y,2),x=b[0],w=b[1],k=(0,T.useState)([]),S=(0,U.Z)(k,2),E=S[0],C=S[1],_=(0,T.useState)(""),M=(0,U.Z)(_,2),A=M[0],I=M[1],N=(0,T.useState)(""),R=(0,U.Z)(N,2),O=R[0],D=R[1],L=(0,T.useState)(""),P=(0,U.Z)(L,2),F=P[0],j=P[1],z=(0,T.useState)("45deg 81deg 100m"),B=(0,U.Z)(z,2),W=B[0],V=B[1],Z=(0,T.useState)("0.009 0.009 0.009"),H=(0,U.Z)(Z,2),G=H[0],q=H[1],X=(0,T.useState)("auto auto auto"),Y=(0,U.Z)(X,2),K=Y[0],$=Y[1],J=(0,T.useState)(!1),Q=(0,U.Z)(J,2),ee=Q[0],te=Q[1],ne=(0,T.useState)([]),re=(0,U.Z)(ne,2),ae=re[0],ie=re[1],oe=(0,T.useState)("auto"),se=(0,U.Z)(oe,2),le=se[0],ue=(se[1],(0,T.useState)("auto")),ce=(0,U.Z)(ue,2),de=ce[0],he=(ce[1],(0,T.useState)("auto")),fe=(0,U.Z)(he,2),pe=fe[0];fe[1];(0,T.useEffect)((function(){if(ie([]),n){ge();var e=JSON.parse(n);setTimeout((function(){xe(e.name,e.brand,e.model,e.nameModel)}),500)}else ge()}),[]);var me=function(){var e=Vn(Un().mark((function e(){var n,r,a,i,o,s,l;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D("primary"),g(!0),f(0),e.next=5,Zn();case 5:if(!(n=e.sent)){e.next=15;break}return e.next=9,Hn("Preview_".concat(t.model),n.database);case 9:r=e.sent,a=r.data,i=new Blob([a]),o=URL.createObjectURL(i),u(o),I(ve("Preview"));case 15:return e.next=17,nr.initDb();case 17:if(!(s=e.sent)){e.next=25;break}return l=new Array,e.next=22,nr.consultar(s.database);case 22:(l=e.sent).forEach((function(e,t){e.isSelected=""})),C(l.filter((function(e){if(e.model===t.model&&"Preview"!=e.name)return e;e.name})));case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(e){return"Preview"===e?"Vista General ".concat(t.brand," ").concat(t.model):"Preview_Con_Texturas"===e?"Vista General ".concat(t.brand," ").concat(t.model," Color"):"Sistema_direccion"===e?"Sistema de Direcci\xf3n":"Sistema_hidraulico"===e?"Sistema Hidraulico":"Sistema_neumatico"===e?"Sistema Neumatico":"Mando_de_giro"===e?"Mando de Giro":"Mando_final"===e?"Mando Final":"Sistema_rodado"===e?"Sistema Rodado":e},ge=function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n||me(),i(document.querySelector("model-viewer#machine")),(t=document.querySelector("model-viewer#machine")).addEventListener("model-visibility",(function(e){})),t.addEventListener("load",(function(){g(!1),t.cameraControls=!0,document.getElementById("image").style.opacity="0",setTimeout((function(){document.getElementById("machine").style.opacity="1",document.getElementById("image").style.height="0px",document.getElementById("machine").style.height="100%"}),2e3)})),t.addEventListener("click",(function(e){})),t.addEventListener("error",(function(e){}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye="undefined"!==typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),be=function(){w(!1)},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new String,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new String,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new String,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new String;if(I(ve(e)),"CATERPILLAR"===t)if("Preview_Con_Texturas"===e)f(0),g(!0);else{var a="../assets/transiciones/".concat(t,"/").concat(n,"/Pantalla_de_carga_").concat(e,".png");j(a),document.getElementById("machine").style.opacity="0",setTimeout((function(){document.getElementById("machine").style.height="0px",document.getElementById("image").style.height="80%",document.getElementById("image").style.opacity="1"}),500)}else f(0),g(!0);setTimeout(Vn(Un().mark((function t(){var a,i,o,s,l;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zn();case 2:return a=t.sent,t.next=5,Hn(r,a.database);case 5:i=t.sent,o=i.data,s=new Blob([o]),l=URL.createObjectURL(s),ie(koe(e,n)),u(l);case 11:case"end":return t.stop()}}),t)}))),4e3)},we=function(){V("45deg 81deg 100m"),q("0.009 0.009 0.009"),$("".concat(le," ").concat(de," ").concat(pe)),te(!1)};return(0,dr.jsxs)(qc,{style:{height:"100%",width:"100%"},id:"box",children:[!n&&(0,dr.jsxs)(NK,{sx:{width:"30%",backgroundColor:"transparent"},disableBackdropTransition:!ye,disableDiscovery:ye,variant:"persistent",anchor:"top",open:x,children:[(0,dr.jsx)("div",{style:{width:"27vw",textAlign:"right"},children:(0,dr.jsx)(cs,{onClick:function(){return be()},children:(0,dr.jsx)(Jl,{})})}),(0,dr.jsxs)("div",{children:[(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,dr.jsx)($l,{color:O,style:{width:"90%",marginBottom:10},variant:"outlined",onClick:function(){g(!0),be(),D("primary"),f(0),setTimeout((function(){me()}),1e3)},children:(0,dr.jsx)("p",{children:ve("Preview")})})}),E.map((function(e,n){return(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,dr.jsxs)($l,{color:e.isSelected,style:{width:"90%",marginBottom:10},variant:"outlined",onClick:function(){!function(e,n){console.log(e,n),be(),we(),ie([]),setTimeout((function(){if(I(ve(e.name)),"CATERPILLAR"===e.brand)if("Preview_Con_Texturas"===e.name)f(0),g(!0);else{var r="../assets/transiciones/".concat(e.brand,"/").concat(e.model,"/Pantalla_de_carga_").concat(e.name,".png");j(r),document.getElementById("machine").style.opacity="0",setTimeout((function(){document.getElementById("machine").style.height="0px",document.getElementById("image").style.height="80%",document.getElementById("image").style.opacity="1"}),500)}else f(0),g(!0);E.forEach((function(e,t){e.isSelected=t===n?"primary":"",t===E.length-1&&C(E)})),setTimeout(Vn(Un().mark((function n(){var r,a,i,o,s;return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Zn();case 2:return r=n.sent,n.next=5,Hn(e.nameModel,r.database);case 5:a=n.sent,i=a.data,o=new Blob([i]),s=URL.createObjectURL(o),console.log(t.model),ie(koe(e.name,t.model)),u(s);case 12:case"end":return n.stop()}}),n)}))),4e3)}),1e3)}(e,n)},children:[(0,dr.jsx)("img",{src:"../assets/no-image.png",style:{width:50,height:50,borderRadius:30,objectFit:"cover",position:"absolute",left:10},alt:""}),(0,dr.jsx)("p",{children:ve(e.name)})]})},n)}))]})]}),(0,dr.jsx)("img",{src:F,id:"image",className:"image",height:640,width:480}),(0,dr.jsx)("model-viewer",{id:"machine",src:l,style:{height:"100%",width:"100%",backgroundColor:"#414646",opacity:1,transition:"opacity 0.5s"},"camera-target":K,"camera-orbit":W,scale:G,alt:"A Material Picking Example","touch-action":"none","min-field-of-view":"0deg","interpolation-decay":"200","min-camera-orbit":"auto auto 10%",oncontextmenu:"return false",children:ae.map((function(e,t){return(0,dr.jsx)("button",{onClick:function(){V(e.orbit),$(e.target),te(!0)},className:"view-button",slot:"hotspot-".concat(t),"data-position":e.position,"data-normal":e.normal,"data-orbit":e.orbit,"data-target":e.target,children:e.title},t)}))}),(0,dr.jsx)($c,{open:v,progress:h,loadingData:"Preparando vista 3D...",withProgress:!0}),(0,dr.jsx)("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"transparent",textAlign:"center"},children:(0,dr.jsxs)("div",{style:{width:"60%",backgroundColor:"transparent",textAlign:"center",marginLeft:"auto",marginRight:"auto"},children:[ee&&(0,dr.jsxs)(cs,{onClick:function(){return we()},children:[(0,dr.jsx)(woe,{style:{color:"white",fontFamily:"Raleway",marginRight:10}})," ",(0,dr.jsx)("p",{style:{color:"white",fontFamily:"Raleway"},children:"Centrar c\xe1mara"})]}),(0,dr.jsx)("h2",{style:{color:"white",fontFamily:"Raleway"},children:A})]})}),!x&&!n&&(0,dr.jsx)(od,{onClick:function(){w(!0)},style:{position:"absolute",left:10,top:10,boxShadow:"none",backgroundColor:"transparent"},color:"primary",children:(0,dr.jsx)(RK,{})})]})},Toe=n(2346),Eoe=n(7121);function Coe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,xt.Z)(),r=(0,mo.Z)({theme:n,name:"MuiUseMediaQuery",props:{}});var a="function"===typeof e?e(n):e;a=a.replace(/^@media( ?)/m,"");var i="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,o=(0,yt.Z)({},r,t),s=o.defaultMatches,l=void 0!==s&&s,u=o.matchMedia,c=void 0===u?i?window.matchMedia:null:u,d=o.noSsr,h=void 0!==d&&d,f=o.ssrMatchMedia,p=void 0===f?null:f,m=T.useState((function(){return h&&i?c(a).matches:p?p(a).matches:l})),v=m[0],g=m[1];return T.useEffect((function(){var e=!0;if(i){var t=c(a),n=function(){e&&g(t.matches)};return n(),t.addListener(n),function(){e=!1,t.removeListener(n)}}}),[a,c,i]),v}var _oe=function(e,t){return!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?Eoe.X.indexOf(e)<=Eoe.X.indexOf(t):Eoe.X.indexOf(e)<Eoe.X.indexOf(t)},Moe=function(e,t){return!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?Eoe.X.indexOf(t)<=Eoe.X.indexOf(e):Eoe.X.indexOf(t)<Eoe.X.indexOf(e)},Aoe="undefined"===typeof window?T.useEffect:T.useLayoutEffect,Ioe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.withTheme,r=void 0!==n&&n,a=e.noSSR,i=void 0!==a&&a,o=e.initialWidth;function s(e){var n=ao(),a=e.theme||n,s=(0,mo.Z)({theme:a,name:"MuiWithWidth",props:(0,yt.Z)({},e)}),l=s.initialWidth,u=s.width,c=(0,Wi.Z)(s,["initialWidth","width"]),d=T.useState(!1),h=d[0],f=d[1];Aoe((function(){f(!0)}),[]);var p=a.breakpoints.keys.slice().reverse().reduce((function(e,t){var n=Coe(a.breakpoints.up(t));return!e&&n?t:e}),null),m=(0,yt.Z)({width:u||(h||i?p:void 0)||l||o},r?{theme:a}:{},c);return void 0===m.width?null:T.createElement(t,m)}return Vc()(s,t),s}};function Noe(e){var t=e.children,n=e.only,r=e.width,a=ao(),i=!0;if(n)if(Array.isArray(n))for(var o=0;o<n.length;o+=1){if(r===n[o]){i=!1;break}}else n&&r===n&&(i=!1);if(i)for(var s=0;s<a.breakpoints.keys.length;s+=1){var l=a.breakpoints.keys[s],u=e["".concat(l,"Up")],c=e["".concat(l,"Down")];if(u&&_oe(l,r)||c&&Moe(l,r)){i=!1;break}}return i?t:null}Noe.propTypes={children:Ai().node,className:Ai().string,implementation:Ai().oneOf(["js","css"]),initialWidth:Ai().oneOf(["xs","sm","md","lg","xl"]),lgDown:Ai().bool,lgUp:Ai().bool,mdDown:Ai().bool,mdUp:Ai().bool,only:Ai().oneOfType([Ai().oneOf(["xs","sm","md","lg","xl"]),Ai().arrayOf(Ai().oneOf(["xs","sm","md","lg","xl"]))]),smDown:Ai().bool,smUp:Ai().bool,width:Ai().string.isRequired,xlDown:Ai().bool,xlUp:Ai().bool,xsDown:Ai().bool,xsUp:Ai().bool};var Roe=Ioe()(Noe);var Ooe=(0,St.Z)((function(e){var t={display:"none"};return e.breakpoints.keys.reduce((function(n,r){return n["only".concat((0,po.Z)(r))]=(0,_t.Z)({},e.breakpoints.only(r),t),n["".concat(r,"Up")]=(0,_t.Z)({},e.breakpoints.up(r),t),n["".concat(r,"Down")]=(0,_t.Z)({},e.breakpoints.down(r),t),n}),{})}),{name:"PrivateHiddenCss"})((function(e){var t=e.children,n=e.classes,r=e.className,a=e.only,i=((0,Wi.Z)(e,["children","classes","className","only"]),ao()),o=[];r&&o.push(r);for(var s=0;s<i.breakpoints.keys.length;s+=1){var l=i.breakpoints.keys[s],u=e["".concat(l,"Up")],c=e["".concat(l,"Down")];u&&o.push(n["".concat(l,"Up")]),c&&o.push(n["".concat(l,"Down")])}return a&&(Array.isArray(a)?a:[a]).forEach((function(e){o.push(n["only".concat((0,po.Z)(e))])})),T.createElement("div",{className:o.join(" ")},t)}));var Doe=function(e){var t=e.implementation,n=void 0===t?"js":t,r=e.lgDown,a=void 0!==r&&r,i=e.lgUp,o=void 0!==i&&i,s=e.mdDown,l=void 0!==s&&s,u=e.mdUp,c=void 0!==u&&u,d=e.smDown,h=void 0!==d&&d,f=e.smUp,p=void 0!==f&&f,m=e.xlDown,v=void 0!==m&&m,g=e.xlUp,y=void 0!==g&&g,b=e.xsDown,x=void 0!==b&&b,w=e.xsUp,k=void 0!==w&&w,S=(0,Wi.Z)(e,["implementation","lgDown","lgUp","mdDown","mdUp","smDown","smUp","xlDown","xlUp","xsDown","xsUp"]);return"js"===n?T.createElement(Roe,(0,yt.Z)({lgDown:a,lgUp:o,mdDown:l,mdUp:c,smDown:h,smUp:p,xlDown:v,xlUp:y,xsDown:x,xsUp:k},S)):T.createElement(Ooe,(0,yt.Z)({lgDown:a,lgUp:o,mdDown:l,mdUp:c,smDown:h,smUp:p,xlDown:v,xlUp:y,xsDown:x,xsUp:k},S))},Loe=(0,Ol.Z)(T.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Poe=(0,Ol.Z)(T.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Foe=(0,Ol.Z)(T.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),joe=T.createElement(Poe,null),zoe=T.createElement(Loe,null),Boe=T.createElement(Foe,null),Uoe=T.forwardRef((function(e,t){var n=e.checkedIcon,r=void 0===n?joe:n,a=e.classes,i=e.color,o=void 0===i?"secondary":i,s=e.icon,l=void 0===s?zoe:s,u=e.indeterminate,c=void 0!==u&&u,d=e.indeterminateIcon,h=void 0===d?Boe:d,f=e.inputProps,p=e.size,m=void 0===p?"medium":p,v=(0,Wi.Z)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]),g=c?h:l,y=c?h:r;return T.createElement(nd,(0,yt.Z)({type:"checkbox",classes:{root:(0,fo.Z)(a.root,a["color".concat((0,po.Z)(o))],c&&a.indeterminate),checked:a.checked,disabled:a.disabled},color:o,inputProps:(0,yt.Z)({"data-indeterminate":c},f),icon:T.cloneElement(g,{fontSize:void 0===g.props.fontSize&&"small"===m?m:g.props.fontSize}),checkedIcon:T.cloneElement(y,{fontSize:void 0===y.props.fontSize&&"small"===m?m:y.props.fontSize}),ref:t},v))})),Woe=(0,St.Z)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,Yo.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,Yo.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(Uoe),Voe=n(8420),Zoe=n(3938),Hoe=function(e){var t=e.height,n=e.reportAssigned,r=e.setProgress,a=(e.resultThisItemProgress,e.canEdit),i=e.executionReport,o=e.report,s=eke().isOnline,l=Vwe(),u=l.userData,c=(l.isOperator,(0,T.useState)(!0)),d=(0,U.Z)(c,2),h=(d[0],d[1]),f=(0,T.useState)([]),p=(0,U.Z)(f,2),m=p[0],v=p[1],g=(0,T.useState)([]),y=(0,U.Z)(g,2),b=y[0],x=y[1],w=(0,T.useState)([]),k=(0,U.Z)(w,2),S=(k[0],k[1]),E=(0,T.useState)(),C=(0,U.Z)(E,2),M=C[0],A=C[1],I=(0,T.useState)(),N=(0,U.Z)(I,2),R=N[0],O=N[1],D=(0,T.useState)(!1),L=(0,U.Z)(D,2),P=L[0],F=L[1],j=(0,T.useState)(),z=(0,U.Z)(j,2),B=z[0],W=z[1],V=(0,T.useState)(),Z=(0,U.Z)(V,2),H=Z[0],G=Z[1],q=(0,T.useState)(!1),X=(0,U.Z)(q,2),Y=X[0],K=(X[1],function(e){var t=e.className,n=(e.style,e.onClick);return(0,dr.jsx)("div",{className:t,style:{color:"black",background:"grey",borderRadius:20},onClick:n})}),$={infinite:!1,speed:500,slidesToShow:7,slidesToScroll:7,nextArrow:(0,dr.jsx)(K,{}),prevArrow:(0,dr.jsx)(K,{})};(0,T.useEffect)((function(){var e=[];console.log(i),i._id&&(Object.keys(i.group).forEach((function(t,n){var r={data:t,state:!1};0==n&&(r.state=!0,O(t)),e.push(r)})),v(o.testMode?[e[0],e[1],e[2]]:e),console.log(Object.values(i.group)[0]),x(Object.values(i.group)[0]))}),[i]),(0,T.useEffect)((function(){if(console.log(b),s&&b&&i._id){var e=[];b.forEach((function(t){t.isChecked&&e.push(t)}));var t=[],n=[];Object.values(i.group).forEach((function(e){e.forEach((function(e){t.push(e),e.isChecked&&n.push(e)}))}));var a=(100*e.length/b.length).toFixed(0),o=(100*n.length/t.length).toFixed(0);r({progressPage:a,globalProgress:o}),h(!1)}}),[b,i,m,s]),(0,T.useEffect)((function(){console.log(R)}),[R]);var J=function(){var e=Vn(Un().mark((function e(t,n,r){var a,o,l,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,_.Z)(b),r.isChecked=!0,r.isWarning=!n,a[t]=r,(o=i).group[R]=a,o.offLineGuard=Date.now(),x(a),e.next=10,Jn();case 10:return l=e.sent,u=l.database,e.next=14,Qn(o,u);case 14:if(!s){e.next=17;break}return e.next=17,yn(o);case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Q=function(){var e=Vn(Un().mark((function e(t,n){var r,a,o,l,c,d;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),t.isChecked){e.next=5;break}t.obs01.includes("__")?alert("Actividad requiere que deje un comentario."):"*"!==t.unidad?alert("Actividad requiere que deje una cantidad de insumo utilizado."):confirm("\xbfDesea indicar estado ejecutado, sin dejar un mensaje?")&&(r=[{content:"Se indica estado ejecutado sin dejar mensajes",id:Date.now(),name:"".concat(u.name," ").concat(u.lastName),namePicture:null,urlBase64:void 0,user:u._id}],t.isChecked=!0,t.isWarning=!1,t.messages=r,J(n,!0,t)),e.next=23;break;case 5:if(!confirm("Confirme que desea desmarcar la tarea")){e.next=23;break}return(a=(0,_.Z)(b))[n].isChecked=!1,o=0,a[n].messages.forEach((function(e,t){"Se indica estado ejecutado sin dejar mensajes"===e&&(o=t)})),a[n].messages[o]=null,x(a),(l=i).group[R]=a,e.next=16,Jn();case 16:return c=e.sent,d=c.database,e.next=20,Qn(l,d);case 20:if(!s){e.next=23;break}return e.next=23,yn(l);case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,dr.jsxs)("div",{children:[(0,dr.jsx)("div",{style:{height:70,borderColor:"#ccc",borderWidth:2,borderStyle:"solid",borderRadius:10},children:(0,dr.jsx)(Toe.Z,cr(cr({},$),{},{children:m.map((function(e,t){return(0,dr.jsxs)("div",{style:{textAlign:"center",height:"100%"},children:[(0,dr.jsx)($l,{style:{textAlign:"center",width:"100%",height:70},onClick:function(){return function(e,t){O(t),x(Object.values(i.group)[e]);var n=(0,_.Z)(m);n.forEach((function(e){e.state=!1})),n[e].state=!0,v(n)}(t,e.data)},children:(0,dr.jsx)("p",{style:{margin:0},children:e.data})}),e.state&&(0,dr.jsx)("div",{style:{width:"100%",height:6,backgroundColor:"#BB2D2D",position:"relative",bottom:5,borderRadius:5}})]},t)}))}))}),(0,dr.jsxs)("div",{style:{position:"relative"},children:[(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xl:"auto",md:"auto",children:(0,dr.jsxs)("p",{style:{margin:0,textAlign:"center",width:30},children:[" ",(0,dr.jsx)("strong",{children:"N\xb0"})," "]})}),(0,dr.jsx)(Es,{item:!0,xl:1,md:1,children:(0,dr.jsxs)("p",{style:{margin:0,textAlign:"center"},children:[" ",(0,dr.jsxs)("strong",{children:["Personal ",(0,dr.jsx)("br",{})," Necesario"]})," "]})}),(0,dr.jsx)(Es,{item:!0,xl:"auto",md:"auto",children:(0,dr.jsxs)("p",{style:{margin:0,textAlign:"center",width:150},children:[" ",(0,dr.jsx)("strong",{children:"Descripcion De Tarea"})," "]})}),(0,dr.jsx)(Es,{item:!0,xl:"Mantenci\xf3n"===o.reportType?3:5,md:"Mantenci\xf3n"===o.reportType?3:5,sm:4,children:(0,dr.jsxs)("p",{style:{margin:0,textAlign:"center"},children:[" ",(0,dr.jsx)("strong",{children:"Observaciones"})," "]})}),(0,dr.jsxs)(Doe,{mdDown:!0,children:["Mantenci\xf3n"===o.reportType&&(0,dr.jsx)(Es,{item:!0,xl:"auto",md:"auto",children:(0,dr.jsxs)("p",{style:{margin:0,textAlign:"center",width:100},children:[" ",(0,dr.jsxs)("strong",{children:["N\xb0 Parte ",(0,dr.jsx)("br",{})," a Utilizar"]})," "]})}),"Mantenci\xf3n"===o.reportType&&(0,dr.jsx)(Es,{item:!0,xl:"auto",md:"auto",children:(0,dr.jsxs)("p",{style:{margin:0,textAlign:"center",width:100},children:[" ",(0,dr.jsxs)("strong",{children:["Cantidad ",(0,dr.jsx)("br",{})," a utilizar"]})," "]})}),"Mantenci\xf3n"===o.reportType&&(0,dr.jsx)(Es,{item:!0,xl:"auto",md:"auto",children:(0,dr.jsxs)("p",{style:{margin:0,textAlign:"center",width:60},children:[" ",(0,dr.jsxs)("strong",{children:["Cantidad ",(0,dr.jsx)("br",{})," Utilizada"]})," "]})}),"Mantenci\xf3n"===o.reportType&&(0,dr.jsx)(Es,{item:!0,xl:1,md:1,children:(0,dr.jsxs)("p",{style:{margin:0,textAlign:"center",width:100},children:[" ",(0,dr.jsxs)("strong",{children:["Tipo ",(0,dr.jsx)("br",{})," Rpto"]})," "]})})]}),(0,dr.jsx)(Es,{item:!0,xl:1,md:"auto",children:(0,dr.jsxs)("p",{style:{margin:0,textAlign:"center",width:50},children:[" ",(0,dr.jsx)("strong",{children:"Acci\xf3n"})," "]})}),(0,dr.jsx)(Es,{item:!0,xl:1,md:1,children:(0,dr.jsxs)("p",{style:{margin:0,textAlign:"center"},children:[" ",(0,dr.jsx)("strong",{children:"Estado"})," "]})})]}),(0,dr.jsx)("div",{style:{height:t,overflowY:"scroll"},children:b.map((function(e,t){return e.isChecked||(e.isChecked=!1),(0,dr.jsxs)(Es,{container:!0,style:{borderBottomStyle:"solid",borderBottomWidth:1,borderBottomColor:"#ccc"},children:[(0,dr.jsx)(Es,{item:!0,xl:"auto",md:"auto",children:(0,dr.jsxs)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"center",width:30},children:[" ",(0,dr.jsxs)("strong",{children:[t+1,".-"]})," "]})}),(0,dr.jsx)(Es,{item:!0,xl:1,md:1,children:(0,dr.jsxs)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"center"},children:[" ",e.workteamdesc,"   "]})}),(0,dr.jsx)(Es,{item:!0,xl:"auto",md:"auto",children:(0,dr.jsxs)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"left",width:150},children:[" ",e.taskdesc," "]})}),(0,dr.jsx)(Es,{item:!0,xl:"Mantenci\xf3n"===o.reportType?3:5,md:"Mantenci\xf3n"===o.reportType?3:5,sm:4,children:(0,dr.jsxs)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"justify"},children:[" ",e.obs01," "]})}),(0,dr.jsxs)(Doe,{mdDown:!0,children:["Mantenci\xf3n"===o.reportType&&(0,dr.jsx)(Es,{item:!0,xl:"auto",md:"auto",children:"*"===e.partnumberUtl?(0,dr.jsx)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"center",width:100},children:"N/A"}):(0,dr.jsx)("p",{style:{padding:5,margin:0,textAlign:"center",width:100},children:e.partnumberUtl})}),"Mantenci\xf3n"===o.reportType&&(0,dr.jsx)(Es,{item:!0,xl:"auto",md:"auto",children:"*"===e.unidad?(0,dr.jsx)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"center",width:100},children:"N/A"}):(0,dr.jsxs)("p",{style:{padding:5,margin:0,textAlign:"center",width:100},children:[" ",e.cantidad," ",e.unidad]})}),"Mantenci\xf3n"===o.reportType&&(0,dr.jsx)(Es,{item:!0,xl:"auto",md:"auto",children:"*"===e.unidad?(0,dr.jsx)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"center",width:60},children:"N/A"}):(0,dr.jsxs)("p",{style:{padding:5,margin:0,textAlign:"center",width:60},children:[" ",e.unidadData?e.unidadData:"___"," ",e.unidad]})}),"Mantenci\xf3n"===o.reportType&&(0,dr.jsx)(Es,{item:!0,xl:1,md:1,children:"*"===e.idtypeutlPartnumber?(0,dr.jsx)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"center",width:100},children:"N/A"}):(0,dr.jsxs)("p",{style:{padding:5,margin:0,textAlign:"center",width:100},children:[" ",e.idtypeutlPartnumber]})})]}),(0,dr.jsx)(Es,{item:!0,xl:1,md:"auto",children:(0,dr.jsx)("div",{style:{textAlign:"center",width:60},children:(0,dr.jsx)(cs,{style:{width:"5%",textAlign:"center"},onClick:function(){!function(e,t){G(t),W(e),F(!0)}(e,t),A(t)},children:(0,dr.jsx)(Bi,{icon:a?Fr:Cr})})})}),(0,dr.jsxs)(Es,{item:!0,xl:1,md:1,children:[!a&&(e.isChecked,(0,dr.jsx)(Woe,{checked:e.isChecked,disabled:!0,style:{transform:"scale(1.2)"},icon:(0,dr.jsx)(Zoe.Z,{}),checkedIcon:(0,dr.jsx)(Voe.Z,{style:{color:e.isWarning?"#EAD749":"#27AE60"}})})),a&&(e.isChecked,(0,dr.jsx)(Woe,{value:e.isChecked,checked:e.isChecked,onClick:function(){Q(e,t)},style:{transform:"scale(1.2)"},icon:(0,dr.jsx)(Zoe.Z,{}),checkedIcon:(0,dr.jsx)(Voe.Z,{style:{color:e.isWarning?"#EAD749":"#27AE60"}})})),e.haveMessage&&(0,dr.jsx)(cs,{style:{padding:5},disabled:!0,children:(0,dr.jsx)(Bi,{icon:kr})}),!e.messages&&(0,dr.jsx)(cs,{style:{padding:5},disabled:!0,children:(0,dr.jsx)(Bi,{style:{color:"transparent"},icon:kr})}),e.haveClip&&(0,dr.jsx)(cs,{style:{padding:5},disabled:!0,children:(0,dr.jsx)(Bi,{icon:Pr})}),!e.haveClip&&(0,dr.jsx)(cs,{style:{padding:5},disabled:!0,children:(0,dr.jsx)(Bi,{style:{color:"transparent"},icon:Pr})})]})]},t)}))}),P&&(0,dr.jsx)(Iwe,{open:P,handleClose:function(){F(!1),W(null)},report:n,item:B,index:H,executionReport:i,gruposKeys:m,indexActivity:M,indexGroup:R,save:J,setChecks:S,canEdit:a}),Y&&(0,dr.jsx)(kwe,{open:Y})]})]})},Goe=T.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.raised,i=void 0!==a&&a,o=(0,Wi.Z)(e,["classes","className","raised"]);return T.createElement(Ho,(0,yt.Z)({className:(0,fo.Z)(n.root,r),elevation:i?8:1,ref:t},o))})),qoe=(0,St.Z)({root:{overflow:"hidden"}},{name:"MuiCard"})(Goe),Xoe=(0,Ol.Z)(T.createElement("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos"),Yoe=function(e){var t=e.route,n=Dt(),r=eke().isOnline,a=pke().machineSelected,i=oke(),o=i.loading,s=i.setLoading,l=(0,T.useState)(!1),u=(0,U.Z)(l,2),c=u[0],d=u[1],h=(0,T.useState)([]),f=(0,U.Z)(h,2),p=f[0],m=f[1],v=(0,T.useState)([]),g=(0,U.Z)(v,2),y=g[0],b=g[1],x=(0,T.useState)(""),w=(0,U.Z)(x,2),k=w[0],S=w[1],E=(0,T.useState)(!1),C=(0,U.Z)(E,2),_=C[0],M=C[1],A=(0,T.useState)({}),I=(0,U.Z)(A,2),N=I[0],R=I[1],O=(0,T.useState)(!1),D=(0,U.Z)(O,2),L=D[0],P=D[1],F=(0,T.useState)(""),j=(0,U.Z)(F,2),z=j[0],B=j[1],W=(0,T.useState)("Todos"),V=(0,U.Z)(W,2),Z=V[0],H=V[1],G=(We().id,(0,T.useState)({})),q=(0,U.Z)(G,2),X=q[0],Y=q[1];new String;t.toString(),(0,T.useEffect)((function(){"inspection"===t?S("Inspecci\xf3n"):"maintenance"===t?S("Mantenci\xf3n"):"machines"===t&&S("M\xe1quinas")}),[t]),(0,T.useEffect)((function(){console.log(a),a&&(Y(a),r?mn(a.equid).then((function(e){e.data&&(console.log(e.data.reverse()),m(e.data.reverse()),b(e.data.reverse()),setTimeout((function(){}),500))})):alert("Dispoitivo sin conexi\xf3n a internet. No se podr\xe1 mostrar el hist\xf3rico.")),s(!1)}),[a]);var K=Ue(),$=function(e){"all"===e?(H("Todos"),m(y.reverse())):"Mantenci\xf3n"===e||"Inspecci\xf3n"===e?(H(e),m(y.filter((function(t){if(t.reportType===e)return t})).reverse())):(H(e),m(y.filter((function(t){if(t.state===e)return t})).reverse()))},J=function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,Dn(t);case 3:n=e.sent,setTimeout((function(){n&&(console.log(n),X.image=n,Qt(X))}),1e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:n.pageContainer,item:!0,xs:12,children:(0,dr.jsx)(qoe,{elevation:0,className:"pageCard",children:(0,dr.jsxs)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){K(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsxs)("p",{style:{marginTop:0,marginBottom:0,fontSize:16},children:[k,"/",X.type," ",X.brand," ",X.model,"/N\xfamero interno: ",(0,dr.jsx)("b",{children:X.equ})]})]})})}),(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xs:12,sm:8,md:6,lg:4,xl:4,children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsxs)("div",{style:{padding:15,borderTopLeftRadius:20,borderEndStartRadius:20,backgroundColor:"#F9F9F9",borderRadius:10,minHeight:400},children:[(0,dr.jsx)("h3",{style:{marginTop:5,marginBottom:5},children:X.type}),(0,dr.jsxs)("div",{style:{width:"100%",backgroundColor:"transparent",textAlign:"center"},children:[(0,dr.jsx)("img",{src:X.image?X.image:"/assets/".concat(X.model,".png"),height:180,id:"imageMachine",onClick:function(){!function(e){B(e),P(!0)}(X.image?X.image:"/assets/".concat(X.model,".png"))}}),(0,dr.jsx)("br",{}),(0,dr.jsxs)("button",{onClick:function(){document.getElementById("fotoMaquina").click()},children:[(0,dr.jsx)(Bi,{icon:gr,style:{marginRight:10}})," Cambiar imagen"]}),(0,dr.jsx)("input",{autoComplete:"off",type:"file",id:"fotoMaquina",accept:"image/x-png,image/jpeg",onChange:function(e){J(e.target.files[0])},hidden:!0})]}),(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)("p",{style:{marginTop:5,marginBottom:5},id:"machineData",children:[(0,dr.jsx)("b",{children:"Marca: "})," ",X.brand," "]})}),(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:[(0,dr.jsx)("b",{children:"Modelo: "})," ",X.model," "]})}),(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:[(0,dr.jsx)("b",{children:"C\xf3digo: "})," ",X.equid," "]})}),(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:[(0,dr.jsx)("b",{children:"Hor\xf3metro Actual: "})," ",Number(X.hourMeter)/36e5," hrs "]})}),(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:[(0,dr.jsx)("b",{children:"N\xfamero Interno: "})," ",X.equ," "]})})]})})}),(0,dr.jsx)(Es,{item:!0,sm:12,md:7,lg:8,xl:8,children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsxs)("div",{style:{padding:15,backgroundColor:"#F9F9F9",width:"100%",height:"calc(100vh - 220px)",position:"relative",borderRadius:10},children:[(0,dr.jsxs)("div",{style:{position:"absolute",top:10,right:10},children:[(0,dr.jsx)("button",{style:{float:"left",marginRight:10},onClick:function(){$("Mantenci\xf3n")},children:"Mantenciones"}),(0,dr.jsx)("button",{style:{float:"left",marginRight:10},onClick:function(){$("Inspecci\xf3n")},children:"Inspecciones"}),(0,dr.jsx)("button",{style:{float:"left",marginRight:10},onClick:function(){$("all")},children:"Todos"}),(0,dr.jsx)("button",{style:{float:"left",marginRight:10},onClick:function(){$("Completadas")},children:"Completados"}),(0,dr.jsx)("button",{style:{float:"left",marginRight:10},onClick:function(){$("En proceso")},children:"En proceso"}),(0,dr.jsx)("button",{style:{float:"left"},onClick:function(){$("Asignar")},children:"Por asignar"})]}),(0,dr.jsxs)("h3",{children:["Listado de mantenciones. ",(0,dr.jsxs)("b",{style:{color:"red"},children:["Filtro: ",Z]})]}),(0,dr.jsxs)("div",{style:{overflowY:"auto",height:"calc(100vh - 300px)",width:"100%",padding:20},children:[navigator.onLine&&0===p.length&&(0,dr.jsx)("p",{children:"No hay mantenciones"}),navigator.onLine&&p.length>0&&p.reverse().map((function(e,t){return(0,dr.jsxs)("div",{style:{width:"95%",padding:10,margin:10,display:"block",height:100,borderBottomStyle:"solid",borderBottomColor:"#ccc",borderBottomWidth:2},children:[(0,dr.jsxs)("div",{style:{float:"left"},children:[(0,dr.jsxs)("h4",{style:{margin:0},children:["OT N\xb0",e.idIndex]}),(0,dr.jsxs)("p",{style:{margin:0},children:["C\xf3digo SAP ",e.sapId]}),(0,dr.jsxs)("p",{style:{margin:0},children:["Estado: ",e.state]}),"Completadas"===e.state&&(0,dr.jsx)("a",{href:e.urlPdf,target:"_blank",children:"Imprimir OT"})]}),(0,dr.jsx)("button",{style:{float:"right"},onClick:function(){return function(e){M(!0),R(e)}(e)},children:(0,dr.jsx)(Bi,{icon:Cr})})]},t)})),!navigator.onLine&&(0,dr.jsx)("p",{children:"Debe contar con conexi\xf3n a internet."})]})]})})}),(0,dr.jsx)(Fo,{open:c,close:!c,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,dr.jsx)("div",{style:{height:"100%",width:"100%",backgroundColor:"#333"},children:(0,dr.jsx)(od,{onClick:function(){setTimeout((function(){d(!c)}),500)},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,dr.jsx)(Jl,{style:{color:"#ccc"}})})})}),_&&(0,dr.jsx)(Rwe,{open:_,report:N,handleClose:function(){M(!1)}}),o&&(0,dr.jsx)(kwe,{open:o}),L&&(0,dr.jsx)(wwe,{open:L,image:z,handleClose:function(){P(!1)}})]})]})})})})})},Koe=function(e){var t=e.machine,n=e.route,r=Ue(),a={brand:t.brand,id:t.id,model:t.model,pIDPM:t.pIDPM,type:t.type};return(0,dr.jsxs)($l,{className:"buttonContent",style:{borderRadius:20},onClick:function(){r("/".concat(n,"/").concat(JSON.stringify(a)))},children:[(0,dr.jsx)("img",{className:"imageMachine",src:"data:".concat(t.image.data),alt:t.model}),(0,dr.jsx)("div",{style:{position:"absolute",bottom:5,width:"100%",textAlign:"center"},children:"".concat(t.type," ").concat(t.brand," ").concat(t.model)})]})},$oe=(Nt((function(e){return{root:{display:"inline-block",textAlign:"center"},icon:{marginBottom:15},button:{minWidth:180}}})),Nt((function(e){return{root:{display:"inline-block",textAlign:"center",padding:10,width:"25%",backgroundColor:"transparent"},icon:{padding:20,width:"100%"},button:{minWidth:"100%"},buttonSelection:{backgroundColor:"#F9F9F9",color:"#505050",width:"100%",minHeight:340,borderRadius:20,fontFamily:"Raleway",textTransform:"none",margin:10},iconButton:{color:"#BE2E26"}}}))),Joe=function(e){var t=e.variant,n=e.disableButton,r=Xwe().dictionary,a=$oe(),i=Ue();return(0,dr.jsx)($l,{onClick:function(){i("/".concat(t))},variant:"contained",className:a.buttonSelection,disabled:n,children:(0,dr.jsxs)("div",{className:a.icon,children:[function(){switch(t){case"inspection":return(0,dr.jsx)(Bi,{icon:Ur,size:"4x",className:a.iconButton});case"assignment":return(0,dr.jsx)(Bi,{icon:Nr,size:"4x",className:a.iconButton});case"machines":return(0,dr.jsx)(Bi,{icon:qr,size:"4x",className:a.iconButton});case"maintenance":return(0,dr.jsx)(Bi,{icon:Hr,size:"4x",className:a.iconButton});case"reports":return(0,dr.jsx)(Bi,{icon:br,size:"4x",className:a.iconButton});case"administration":return(0,dr.jsx)(Bi,{icon:Yr,size:"4x",className:a.iconButton});case"users":return(0,dr.jsx)(Bi,{icon:Kr,size:"4x",className:a.iconButton});case"roles":return(0,dr.jsx)(Bi,{icon:Rr,size:"4x",className:a.iconButton});case"patterns":return(0,dr.jsx)(Bi,{icon:mr,size:"4x",className:a.iconButton});case"news":return(0,dr.jsx)(Bi,{icon:Dr,size:"4x",className:a.iconButton})}}(),(0,dr.jsx)("br",{}),(0,dr.jsx)("p",{className:"button-font-size",children:function(){switch(t){case"inspection":return r.welcome.inspectionButton;case"assignment":return r.welcome.assignmentButton;case"machines":return r.welcome.machinesButton;case"maintenance":return r.welcome.maintenanceButton;case"reports":return r.welcome.reportsButton;case"administration":return r.welcome.administrationButton;case"users":return r.admin.adminUsersButton;case"roles":return r.roles.rolesUsersButton;case"patterns":return r.patterns.patternsButton;case"news":return r.news.newsButton}}()})]})})},Qoe=function(e){var t=e.route,n=Dt(),r=pke().machines,a=Ue(),i=(0,T.useState)(),o=(0,U.Z)(i,2),s=o[0],l=o[1];return(0,T.useEffect)((function(){"inspection"===t?l("Inspecci\xf3n"):"maintenance"===t?l("Mantenci\xf3n"):"machines"===t&&l("M\xe1quinas")}),[t]),(0,dr.jsx)(qc,{height:"90%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:n.pageContainer,item:!0,xs:12,children:(0,dr.jsx)("div",{className:"pageCard",children:(0,dr.jsxs)(Es,{container:!0,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){a(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)("p",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"".concat(s)})]})})}),(0,dr.jsx)(Es,{container:!0,spacing:5,justifyContent:"flex-start",style:{textAlign:"center",height:"75vh",overflowY:"auto"},children:r.map((function(e){return(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:4,lg:4,xl:4,children:(0,dr.jsx)(Koe,{machine:e,route:t})},e.id)}))})]})})})})})},ese=function(){var e=Dt();return(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:e.pageContainer,item:!0,xs:12,children:(0,dr.jsx)(qoe,{elevation:0,className:(0,fo.Z)("pageCard",e.noNavBarMargin),children:(0,dr.jsx)(Es,{container:!0,style:{height:"100%"},alignItems:"center",justifyContent:"center",children:(0,dr.jsx)(Es,{container:!0,item:!0,spacing:8,justifyContent:"center",children:(0,dr.jsx)(Es,{item:!0,children:(0,dr.jsx)(Kc,{size:200})})})})})})})})},tse=function(e){var t=e.route,n=pke(),r=n.machinesBySite,a=n.setMachineSelected,i=(0,T.useState)(""),o=(0,U.Z)(i,2),s=o[0],l=o[1],u=(0,T.useState)([]),c=(0,U.Z)(u,2),d=c[0],h=c[1],f=(0,T.useState)(!1),p=(0,U.Z)(f,2),m=p[0],v=p[1],g=(0,T.useState)(!1),y=(0,U.Z)(g,2),b=y[0],x=y[1],w=(0,T.useState)(),k=(0,U.Z)(w,2),S=k[0],E=k[1],C=Ue(),_=Dt(),M=We().id;(0,T.useEffect)((function(){E(JSON.parse(M))}),[]),(0,T.useEffect)((function(){"inspection"===t?l("Inspecci\xf3n"):"maintenance"===t?l("Mantenci\xf3n"):"machines"===t&&l("M\xe1quinas")}),[t]),(0,T.useEffect)((function(){if(r.length>0&&S){var e=r.filter((function(e){if(e.model===JSON.parse(M).model)return e})).sort((function(e,t){return e.equ-t.equ}));h(e),x(!0)}}),[r,S]);return(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:_.pageContainer,item:!0,xs:12,children:(0,dr.jsx)(qoe,{elevation:0,className:"pageCard",children:S&&(0,dr.jsxs)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){C(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)("p",{style:{marginTop:0,marginBottom:0,fontSize:16},children:S&&"".concat(s,"/").concat(S.type," ").concat(S.brand," ").concat(S.model)})]})})}),(0,dr.jsx)("div",{style:{width:"100%",paddingLeft:20,height:40,textAlign:"center"},children:("793-F"===S.model||"PC5500"===S.model)&&(0,dr.jsx)("button",{style:{height:30,borderRadius:20,position:"relative",right:10,paddingLeft:30,paddingRight:30},onClick:function(){return openCloseModal()},children:(0,dr.jsx)("strong",{children:"Ver modelo 3D de ".concat(S.type," ").concat(S.brand," ").concat(S.model)})})}),(0,dr.jsxs)(gl,{style:{width:"100vw",marginRight:11,overflowY:"scroll",maxHeight:"70vh",paddingLeft:20,paddingRight:20},children:[!b&&(0,dr.jsx)(ese,{}),b&&d.map((function(e,t){return(0,dr.jsxs)(Es,{container:!0,style:{minHeight:148,marginBottom:20,padding:20,borderStyle:"solid",borderWidth:2,borderColor:"#CCC",borderRadius:20},children:[(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:3,lg:2,children:(0,dr.jsx)("img",{src:e.image?e.image:"../assets/no-image.png",style:{height:120,width:"100%",objectFit:"cover"}})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:3,lg:2,children:(0,dr.jsx)("div",{style:{padding:10},children:(0,dr.jsxs)("h1",{style:{margin:0},children:[" ",(0,dr.jsxs)("strong",{children:[e.type," ",e.equ]})," "]})})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:3,lg:3,children:(0,dr.jsxs)("div",{style:{padding:10},children:[(0,dr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:["Marca: ",e.brand.toUpperCase()]}),(0,dr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:["Modelo: ",e.model]}),(0,dr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:["C\xf3digo: ",e.equid]})]})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:3,lg:3,children:(0,dr.jsxs)("div",{style:{padding:10},children:[(0,dr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:["Hor\xf3metro Actual: ",Number(e.hourMeter)/36e5]}),(0,dr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:["N\xfamero Interno: ",e.equ]}),(0,dr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:["Serie motor: ",e.enginesnr]})]})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:12,lg:2,children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,dr.jsx)("button",{style:{width:100,height:30,borderRadius:20,marginLeft:6},onClick:function(){return a(t=e),void C("machine-detail/".concat(t.equid));var t},children:(0,dr.jsx)("strong",{children:"Ver m\xe1s"})})})})]},t)})),0===d.length&&b&&(0,dr.jsx)(Es,{container:!0,style:{minHeight:148,marginBottom:20,padding:20,borderStyle:"solid",borderWidth:2,borderColor:"#CCC",borderRadius:20},children:(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,dr.jsx)("p",{children:"Obra no gestiona m\xe1quina seleccionada."})})})]}),(0,dr.jsx)("div",{children:(0,dr.jsx)(Fo,{open:m,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,dr.jsxs)(qc,{sx:jt,children:[(0,dr.jsx)(Soe,{machine:S}),(0,dr.jsx)(od,{onClick:function(){v(!1)},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},color:"primary",children:(0,dr.jsx)(Jl,{})})]})})})]})})})})})},nse=n.p+"static/media/ICV-transparent.a120acf733f8c1757fb2.png",rse=function(){var e=function(){return(0,dr.jsxs)(qoe,{elevation:0,className:"pageCard noNavBarMargin",children:[(0,dr.jsxs)("div",{style:{textAlign:"center",width:"100%",marginTop:60},children:[(0,dr.jsx)("img",{src:nse,height:100,alt:""}),(0,dr.jsxs)("p",{style:{marginTop:0,fontSize:6.5,textDecoration:"underline"},children:[" ",(0,dr.jsx)("strong",{children:"INGENIER\xcdA CIVIL VICENTE"})," "]}),(0,dr.jsx)("p",{style:{fontSize:"2em",marginBottom:0},children:"Iniciar sesi\xf3n"}),(0,dr.jsxs)("p",{style:{fontSize:10,marginTop:0},children:[" ",Bt.version," "]})]}),(0,dr.jsx)(SK,{})]})};(0,T.useEffect)((function(){t()}),[]);var t=function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.indexedDB.databases();case 2:(t=e.sent).length>0&&t.forEach((function(e,t){"3Ds"===e.name||"MachinesParts"===e.name||"Executions"===e.name||"Trucks"===e.name||"Pautas"===e.name||window.indexedDB.deleteDatabase(e.name)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,dr.jsxs)("div",{style:{height:"100%",display:"block"},children:[(0,dr.jsx)(Doe,{smDown:!0,children:(0,dr.jsx)("div",{style:{float:"left",width:"50%",height:"100%"},children:e()})}),(0,dr.jsx)(Doe,{smDown:!0,children:(0,dr.jsx)("div",{className:"loginBacgroundImage"})}),(0,dr.jsx)(Doe,{mdUp:!0,children:(0,dr.jsx)("div",{children:e()})})]})},ase=(0,T.createContext)(),ise=function(e){var t=Vwe(),n=t.userData,r=t.isAuthenticated,a=(0,T.useState)([]),i=(0,U.Z)(a,2),o=i[0],s=i[1],l=(0,T.useState)(),u=(0,U.Z)(l,2),c=u[0],d=u[1];(0,T.useEffect)((function(){n&&r&&(console.log(n._id,r),f())}),[n,r]);var h=function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)},f=function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,En(n._id);case 2:t=e.sent,console.log(t.data),s(t.data.sort(h)),d(t.data.sort(h)[0]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p={myNotifications:o,lastNotification:c,getNotifications:f};return(0,dr.jsx)(ase.Provider,cr({value:p},e))},ose=function(){return(0,T.useContext)(ase)},sse=function(){var e=Vwe(),t=e.admin,n=e.isOperator,r=e.isSapExecutive,a=e.isShiftManager,i=e.isChiefMachinery,o=(e.userData,dke()),s=o.date,l=o.hour,u=ose().lastNotification,c=(0,T.useState)(!1),d=(0,U.Z)(c,2),h=d[0],f=(d[1],(0,T.useState)(!1)),p=(0,U.Z)(f,2),m=p[0],v=p[1],g=(0,T.useState)(0),y=(0,U.Z)(g,2),b=y[0],x=(y[1],(0,T.useState)("")),w=(0,U.Z)(x,2),k=w[0],S=(w[1],(0,T.useState)(!1)),E=(0,U.Z)(S,2),C=E[0],_=(E[1],(0,T.useState)(!0)),M=(0,U.Z)(_,2),A=M[0],I=M[1],N=(0,T.useState)(!0),R=(0,U.Z)(N,2),O=R[0],D=R[1],L=(0,T.useState)(!1),P=(0,U.Z)(L,2),F=(P[0],P[1],(0,T.useState)(!1)),j=(0,U.Z)(F,2),z=(j[0],j[1],(0,T.useState)(!0)),B=(0,U.Z)(z,2),W=(B[0],B[1]),V=(0,T.useState)([]),Z=(0,U.Z)(V,2),H=(Z[0],Z[1],(0,T.useState)("Sin notificaciones pendientes")),G=(0,U.Z)(H,2),q=(G[0],G[1],(0,T.useState)("Sin informaciones pendientes")),X=(0,U.Z)(q,2),Y=X[0],K=(X[1],(0,T.useState)(!0)),$=(0,U.Z)(K,2);$[0],$[1];(0,T.useEffect)((function(){(t||r||a||i)&&I(!1),t&&D(!1)}),[t,n,r,a,i]);var J=Ue();window.addEventListener("online",(function(){W(!0);var e=Number(localStorage.getItem("timeOffline"));Date.now()<e+216e5&&(localStorage.setItem("revisado",!0),localStorage.removeItem("timeOffline"))})),window.addEventListener("offline",(function(){W(!1),localStorage.getItem("timeOffline")||Q(Date.now())}));var Q=function(e){localStorage.setItem("timeOffline",e),localStorage.setItem("revisado",!1)};return(0,dr.jsxs)("div",{children:[(0,dr.jsxs)("div",{className:"container",children:[(0,dr.jsx)(Es,{container:!0,spacing:5,children:(0,dr.jsx)("div",{children:(0,dr.jsxs)("p",{className:"titulo",children:["Hola ",localStorage.getItem("name")," \xbfPor d\xf3nde quieres comenzar hoy?"]})})}),(0,dr.jsxs)(Es,{container:!0,spacing:5,children:[(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:6,lg:4,children:(0,dr.jsxs)("div",{className:"notificaciones reloj",children:[(0,dr.jsxs)("p",{className:"reloj-fecha",children:[" ",s," "]}),(0,dr.jsxs)("p",{className:"reloj-hora",children:[" ",l," hs "]})]})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:6,lg:4,children:(0,dr.jsxs)("button",{className:"notificaciones alertas",onClick:function(){return J("/notifications")},children:[(0,dr.jsxs)("p",{className:"notificaciones-texto",children:[" ",(0,dr.jsx)("b",{children:"\xdaltima Notificaci\xf3n:"})," "]}),(0,dr.jsxs)("p",{className:"notificaciones-texto",children:[" ",u&&u.message," "]})]})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:6,lg:4,children:(0,dr.jsxs)("button",{className:"notificaciones alertas",onClick:function(){return J("/assignment")},children:[(n||"inspectionWorker"===localStorage.getItem("role")||"maintenceOperator"===localStorage.getItem("role"))&&(0,dr.jsxs)("p",{className:"notificaciones-texto",children:[" ",(0,dr.jsx)("b",{children:"OT Listas a enviar:"})," "]}),(0,dr.jsxs)("p",{className:"notificaciones-texto",children:[" ",Y]})]})})]}),(0,dr.jsx)("br",{}),(0,dr.jsxs)(Es,{container:!0,spacing:5,children:[(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,dr.jsx)(Joe,{variant:"assignment",disableButton:C})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,dr.jsx)(Joe,{variant:"machines",disableButton:C})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,dr.jsx)(Joe,{variant:"reports",disableButton:A})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,dr.jsx)(Joe,{variant:"administration",disableButton:O})})]})]}),(0,dr.jsx)($c,{open:h,progress:b,loadingData:k,withProgress:!0}),(0,dr.jsx)(ud,{open:m,closeModal:function(){v(!1)}})]})},lse=n.p+"static/media/Iniciar sesio\u0301n-1.0c974736fa06866abb55.png",use=function(){var e=Dt(),t=function(){return(0,dr.jsxs)(qoe,{elevation:0,className:(0,fo.Z)("pageCard",e.noNavBarMargin),children:[(0,dr.jsxs)("div",{style:{textAlign:"center",width:"100%",marginTop:60},children:[(0,dr.jsx)("img",{src:nse,height:100,alt:""}),(0,dr.jsxs)("p",{style:{marginTop:0,fontSize:6.5,textDecoration:"underline"},children:[" ",(0,dr.jsx)("strong",{children:"INGENIER\xcdA CIVIL VICENTE"})," "]}),(0,dr.jsx)("p",{style:{fontSize:"2em"},children:"Recuperar Contrase\xf1a"})]}),(0,dr.jsx)(PK,{})]})};return(0,dr.jsxs)("div",{style:{height:"100%",display:"block"},children:[(0,dr.jsx)(Doe,{smDown:!0,children:(0,dr.jsx)("div",{style:{float:"left",width:"50%",height:"100%"},children:t()})}),(0,dr.jsx)(Doe,{smDown:!0,children:(0,dr.jsx)("div",{style:{float:"left",width:"50%",height:"100vh",display:"block"},children:(0,dr.jsx)("img",{src:lse,style:{objectFit:"cover",width:"100%",height:"100%"}})})}),(0,dr.jsx)(Doe,{mdUp:!0,children:(0,dr.jsx)("div",{children:t()})})]})},cse=function(){var e=We().id,t=Dt(),n=function(){return(0,dr.jsxs)(qoe,{elevation:0,className:(0,fo.Z)("pageCard",t.noNavBarMargin),children:[(0,dr.jsxs)("div",{style:{textAlign:"center",width:"100%",marginTop:60},children:[(0,dr.jsx)("img",{src:nse,height:100,alt:""}),(0,dr.jsxs)("p",{style:{marginTop:0,fontSize:6.5,textDecoration:"underline"},children:[" ",(0,dr.jsx)("strong",{children:"INGENIER\xcdA CIVIL VICENTE"})," "]})]}),(0,dr.jsx)(jK,{id:e})]})};return(0,dr.jsxs)("div",{style:{height:"100%",display:"block"},children:[(0,dr.jsx)(Doe,{smDown:!0,children:(0,dr.jsx)("div",{style:{float:"left",width:"50%",height:"100%"},children:n()})}),(0,dr.jsx)(Doe,{smDown:!0,children:(0,dr.jsx)("div",{style:{float:"left",width:"50%",height:"100vh",display:"block"},children:(0,dr.jsx)("img",{src:lse,style:{objectFit:"cover",width:"100%",height:"100%"}})})}),(0,dr.jsx)(Doe,{mdUp:!0,children:(0,dr.jsx)("div",{children:n()})})]})},dse=function(){var e=(0,T.useState)([]),t=(0,U.Z)(e,2),n=(t[0],t[1],(0,T.useState)([])),r=(0,U.Z)(n,2),a=(r[0],r[1]);return(0,T.useEffect)((function(){Kt().then((function(e){e.data&&a(e.data)}))}),[]),(0,dr.jsx)(qc,{children:(0,dr.jsx)("div",{children:(0,dr.jsx)("h1",{children:"Hello!!"})})})},hse=(Nt((function(e){return{root:{"& :-webkit-autofill":{"-webkit-transition-delay":"9999s","-webkit-transition":"color 9999s ease-out, background-color 9999s ease-out"}},lightVariant:{"& .Mui-focused":{color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"white!important"}},"& .MuiInputBase-input":{color:"white"}},darkVariant:{"& .Mui-focused .MuiInputAdornment-root":{color:e.palette.primary.main}}}})),Nt((function(e){return{root:{padding:20,backgroundColor:"rgba(0, 0, 0, 0)",border:"5px solid gray",borderRadius:0,boxShadow:"none"},fichaText:{fontSize:"1.2rem",color:e.palette.primary.main},name:{fontWeight:"bold"}}})),(0,Ol.Z)(T.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel"));function fse(e){return"Backspace"===e.key||"Delete"===e.key}var pse=T.forwardRef((function(e,t){var n=e.avatar,r=e.classes,a=e.className,i=e.clickable,o=e.color,s=void 0===o?"default":o,l=e.component,u=e.deleteIcon,c=e.disabled,d=void 0!==c&&c,h=e.icon,f=e.label,p=e.onClick,m=e.onDelete,v=e.onKeyDown,g=e.onKeyUp,y=e.size,b=void 0===y?"medium":y,x=e.variant,w=void 0===x?"default":x,k=(0,Wi.Z)(e,["avatar","classes","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"]),S=T.useRef(null),E=(0,ro.Z)(S,t),C=function(e){e.stopPropagation(),m&&m(e)},_=!(!1===i||!p)||i,M="small"===b,A=l||(_?ls:"div"),I=A===ls?{component:"div"}:{},N=null;if(m){var R=(0,fo.Z)("default"!==s&&("default"===w?r["deleteIconColor".concat((0,po.Z)(s))]:r["deleteIconOutlinedColor".concat((0,po.Z)(s))]),M&&r.deleteIconSmall);N=u&&T.isValidElement(u)?T.cloneElement(u,{className:(0,fo.Z)(u.props.className,r.deleteIcon,R),onClick:C}):T.createElement(hse,{className:(0,fo.Z)(r.deleteIcon,R),onClick:C})}var O=null;n&&T.isValidElement(n)&&(O=T.cloneElement(n,{className:(0,fo.Z)(r.avatar,n.props.className,M&&r.avatarSmall,"default"!==s&&r["avatarColor".concat((0,po.Z)(s))])}));var D=null;return h&&T.isValidElement(h)&&(D=T.cloneElement(h,{className:(0,fo.Z)(r.icon,h.props.className,M&&r.iconSmall,"default"!==s&&r["iconColor".concat((0,po.Z)(s))])})),T.createElement(A,(0,yt.Z)({role:_||m?"button":void 0,className:(0,fo.Z)(r.root,a,"default"!==s&&[r["color".concat((0,po.Z)(s))],_&&r["clickableColor".concat((0,po.Z)(s))],m&&r["deletableColor".concat((0,po.Z)(s))]],"default"!==w&&[r.outlined,{primary:r.outlinedPrimary,secondary:r.outlinedSecondary}[s]],d&&r.disabled,M&&r.sizeSmall,_&&r.clickable,m&&r.deletable),"aria-disabled":!!d||void 0,tabIndex:_||m?0:void 0,onClick:p,onKeyDown:function(e){e.currentTarget===e.target&&fse(e)&&e.preventDefault(),v&&v(e)},onKeyUp:function(e){e.currentTarget===e.target&&(m&&fse(e)?m(e):"Escape"===e.key&&S.current&&S.current.blur()),g&&g(e)},ref:E},I,k),O||D,T.createElement("span",{className:(0,fo.Z)(r.label,M&&r.labelSmall)},f),N)})),mse=(0,St.Z)((function(e){var t="light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],n=(0,Yo.Fq)(e.palette.text.primary,.26);return{root:{fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:e.palette.getContrastText(t),backgroundColor:t,borderRadius:16,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:"none",padding:0,verticalAlign:"middle",boxSizing:"border-box","&$disabled":{opacity:.5,pointerEvents:"none"},"& $avatar":{marginLeft:5,marginRight:-6,width:24,height:24,color:"light"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],fontSize:e.typography.pxToRem(12)},"& $avatarColorPrimary":{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.dark},"& $avatarColorSecondary":{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.dark},"& $avatarSmall":{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)}},sizeSmall:{height:24},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},disabled:{},clickable:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover, &:focus":{backgroundColor:(0,Yo._4)(t,.08)},"&:active":{boxShadow:e.shadows[1]}},clickableColorPrimary:{"&:hover, &:focus":{backgroundColor:(0,Yo._4)(e.palette.primary.main,.08)}},clickableColorSecondary:{"&:hover, &:focus":{backgroundColor:(0,Yo._4)(e.palette.secondary.main,.08)}},deletable:{"&:focus":{backgroundColor:(0,Yo._4)(t,.08)}},deletableColorPrimary:{"&:focus":{backgroundColor:(0,Yo._4)(e.palette.primary.main,.2)}},deletableColorSecondary:{"&:focus":{backgroundColor:(0,Yo._4)(e.palette.secondary.main,.2)}},outlined:{backgroundColor:"transparent",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:(0,Yo.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity)},"& $avatar":{marginLeft:4},"& $avatarSmall":{marginLeft:2},"& $icon":{marginLeft:4},"& $iconSmall":{marginLeft:2},"& $deleteIcon":{marginRight:5},"& $deleteIconSmall":{marginRight:3}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(e.palette.primary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:(0,Yo.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity)}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(e.palette.secondary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:(0,Yo.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity)}},avatar:{},avatarSmall:{},avatarColorPrimary:{},avatarColorSecondary:{},icon:{color:"light"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],marginLeft:5,marginRight:-6},iconSmall:{width:18,height:18,marginLeft:4,marginRight:-4},iconColorPrimary:{color:"inherit"},iconColorSecondary:{color:"inherit"},label:{overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},labelSmall:{paddingLeft:8,paddingRight:8},deleteIcon:{WebkitTapHighlightColor:"transparent",color:n,height:22,width:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:(0,Yo.Fq)(n,.4)}},deleteIconSmall:{height:16,width:16,marginRight:4,marginLeft:-4},deleteIconColorPrimary:{color:(0,Yo.Fq)(e.palette.primary.contrastText,.7),"&:hover, &:active":{color:e.palette.primary.contrastText}},deleteIconColorSecondary:{color:(0,Yo.Fq)(e.palette.secondary.contrastText,.7),"&:hover, &:active":{color:e.palette.secondary.contrastText}},deleteIconOutlinedColorPrimary:{color:(0,Yo.Fq)(e.palette.primary.main,.7),"&:hover, &:active":{color:e.palette.primary.main}},deleteIconOutlinedColorSecondary:{color:(0,Yo.Fq)(e.palette.secondary.main,.7),"&:hover, &:active":{color:e.palette.secondary.main}}}}),{name:"MuiChip"})(pse),vse=T.forwardRef((function(e,t){var n,r=e.classes,a=e.className,i=e.component,o=void 0===i?"li":i,s=e.disableGutters,l=void 0!==s&&s,u=e.ListItemClasses,c=e.role,d=void 0===c?"menuitem":c,h=e.selected,f=e.tabIndex,p=(0,Wi.Z)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(n=void 0!==f?f:-1),T.createElement(ed,(0,yt.Z)({button:!0,role:d,tabIndex:n,component:o,selected:h,disableGutters:l,classes:(0,yt.Z)({dense:r.dense},u),className:(0,fo.Z)(r.root,a,h&&r.selected,!l&&r.gutters),ref:t},p))})),gse=(0,St.Z)((function(e){return{root:(0,yt.Z)({},e.typography.body1,(0,_t.Z)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:(0,yt.Z)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(vse);var yse=T.createContext();var bse=T.createContext(),xse=T.forwardRef((function(e,t){var n,r,a=e.align,i=void 0===a?"inherit":a,o=e.classes,s=e.className,l=e.component,u=e.padding,c=e.scope,d=e.size,h=e.sortDirection,f=e.variant,p=(0,Wi.Z)(e,["align","classes","className","component","padding","scope","size","sortDirection","variant"]),m=T.useContext(yse),v=T.useContext(bse),g=v&&"head"===v.variant;l?(r=l,n=g?"columnheader":"cell"):r=g?"th":"td";var y=c;!y&&g&&(y="col");var b=u||(m&&m.padding?m.padding:"normal"),x=d||(m&&m.size?m.size:"medium"),w=f||v&&v.variant,k=null;return h&&(k="asc"===h?"ascending":"descending"),T.createElement(r,(0,yt.Z)({ref:t,className:(0,fo.Z)(o.root,o[w],s,"inherit"!==i&&o["align".concat((0,po.Z)(i))],"normal"!==b&&o["padding".concat((0,po.Z)(b))],"medium"!==x&&o["size".concat((0,po.Z)(x))],"head"===w&&m&&m.stickyHeader&&o.stickyHeader),"aria-sort":k,role:n,scope:y},p))})),wse=(0,St.Z)((function(e){return{root:(0,yt.Z)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===e.palette.type?(0,Yo.$n)((0,Yo.Fq)(e.palette.divider,1),.88):(0,Yo._j)((0,Yo.Fq)(e.palette.divider,1),.68)),textAlign:"left",padding:16}),head:{color:e.palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},body:{color:e.palette.text.primary},footer:{color:e.palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},sizeSmall:{padding:"6px 24px 6px 16px","&:last-child":{paddingRight:16},"&$paddingCheckbox":{width:24,padding:"0 12px 0 16px","&:last-child":{paddingLeft:12,paddingRight:16},"& > *":{padding:0}}},paddingCheckbox:{width:48,padding:"0 0 0 4px","&:last-child":{paddingLeft:0,paddingRight:4}},paddingNone:{padding:0,"&:last-child":{padding:0}},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right",flexDirection:"row-reverse"},alignJustify:{textAlign:"justify"},stickyHeader:{position:"sticky",top:0,left:0,zIndex:2,backgroundColor:e.palette.background.default}}}),{name:"MuiTableCell"})(xse),kse=(0,Ol.Z)(T.createElement("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Sse=(0,Ol.Z)(T.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),Tse=T.createElement(Sse,null),Ese=T.createElement(kse,null),Cse=T.createElement(kse,null),_se=T.createElement(Sse,null),Mse=T.forwardRef((function(e,t){var n=e.backIconButtonProps,r=e.count,a=e.nextIconButtonProps,i=e.onChangePage,o=void 0===i?function(){}:i,s=e.onPageChange,l=void 0===s?function(){}:s,u=e.page,c=e.rowsPerPage,d=(0,Wi.Z)(e,["backIconButtonProps","count","nextIconButtonProps","onChangePage","onPageChange","page","rowsPerPage"]),h=ao();return T.createElement("div",(0,yt.Z)({ref:t},d),T.createElement(cs,(0,yt.Z)({onClick:function(e){o(e,u-1),l(e,u-1)},disabled:0===u,color:"inherit"},n),"rtl"===h.direction?Tse:Ese),T.createElement(cs,(0,yt.Z)({onClick:function(e){o(e,u+1),l(e,u+1)},disabled:-1!==r&&u>=Math.ceil(r/c)-1,color:"inherit"},a),"rtl"===h.direction?Cse:_se))})),Ase=Mse,Ise=n(2939),Nse=function(e){var t=e.from,n=e.to,r=e.count;return"".concat(t,"-").concat(n," of ").concat(-1!==r?r:"more than ".concat(n))},Rse=[10,25,50,100],Ose=T.forwardRef((function(e,t){var n,r=e.ActionsComponent,a=void 0===r?Ase:r,i=e.backIconButtonProps,o=e.backIconButtonText,s=void 0===o?"Previous page":o,l=e.classes,u=e.className,c=e.colSpan,d=e.component,h=void 0===d?wse:d,f=e.count,p=e.labelDisplayedRows,m=void 0===p?Nse:p,v=e.labelRowsPerPage,g=void 0===v?"Rows per page:":v,y=e.nextIconButtonProps,b=e.nextIconButtonText,x=void 0===b?"Next page":b,w=e.onChangePage,k=e.onPageChange,S=e.onChangeRowsPerPage,E=e.onRowsPerPageChange,C=e.page,_=e.rowsPerPage,M=e.rowsPerPageOptions,A=void 0===M?Rse:M,I=e.SelectProps,N=void 0===I?{}:I,R=(0,Wi.Z)(e,["ActionsComponent","backIconButtonProps","backIconButtonText","classes","className","colSpan","component","count","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","nextIconButtonText","onChangePage","onPageChange","onChangeRowsPerPage","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps"]),O=S||E;h!==wse&&"td"!==h||(n=c||1e3);var D=(0,Ise.Z)(),L=(0,Ise.Z)(),P=N.native?"option":gse;return T.createElement(h,(0,yt.Z)({className:(0,fo.Z)(l.root,u),colSpan:n,ref:t},R),T.createElement(mK,{className:l.toolbar},T.createElement("div",{className:l.spacer}),A.length>1&&T.createElement(fs,{color:"inherit",variant:"body2",className:l.caption,id:L},g),A.length>1&&T.createElement(Zl,(0,yt.Z)({classes:{select:l.select,icon:l.selectIcon},input:T.createElement(zs,{className:(0,fo.Z)(l.input,l.selectRoot)}),value:_,onChange:O,id:D,labelId:L},N),A.map((function(e){return T.createElement(P,{className:l.menuItem,key:e.value?e.value:e,value:e.value?e.value:e},e.label?e.label:e)}))),T.createElement(fs,{color:"inherit",variant:"body2",className:l.caption},m({from:0===f?0:C*_+1,to:-1!==f?Math.min(f,(C+1)*_):(C+1)*_,count:-1===f?-1:f,page:C})),T.createElement(a,{className:l.actions,backIconButtonProps:(0,yt.Z)({title:s,"aria-label":s},i),count:f,nextIconButtonProps:(0,yt.Z)({title:x,"aria-label":x},y),onChangePage:w,onPageChange:k,page:C,rowsPerPage:_})))})),Dse=(0,St.Z)((function(e){return{root:{color:e.palette.text.primary,fontSize:e.typography.pxToRem(14),overflow:"auto","&:last-child":{padding:0}},toolbar:{minHeight:52,paddingRight:2},spacer:{flex:"1 1 100%"},caption:{flexShrink:0},selectRoot:{marginRight:32,marginLeft:8},select:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"},selectIcon:{},input:{color:"inherit",fontSize:"inherit",flexShrink:0},menuItem:{},actions:{flexShrink:0,marginLeft:20}}}),{name:"MuiTablePagination"})(Ose),Lse=[{color:"#27AE60",name:"Completadas",button:"Detalle",buttonColor:"#F9F9F9",number:null},{color:"#F2C94C",name:"Por cerrar",button:"Detalle",buttonColor:"#F9F9F9",number:null},{color:"#F2994A",name:"En proceso",button:"Detalle",buttonColor:"#F9F9F9",number:null},{color:"#DE4343",name:"Asignar",button:"Detalle",buttonColor:"#F9F9F9",number:null}],Pse=[{color:"#27AE60",name:"Completadas",button:"Detalle",buttonColor:"#F9F9F9",number:null},{color:"#F2C94C",name:"Por cerrar",button:"Detalle",buttonColor:"#F9F9F9",number:null},{color:"#F2994A",name:"En proceso",button:"Detalle",buttonColor:"#F9F9F9",number:null},{color:"#DE4343",name:"Asignar",button:"Detalle",buttonColor:"#F9F9F9",number:null}],Fse={version:"0.18.5"},jse=1200,zse=1252,Bse=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Use={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Wse=function(e){-1!=Bse.indexOf(e)&&(zse=Use[0]=e)};var Vse=function(e){jse=e,Wse(e)};function Zse(){Vse(1200),Wse(1252)}function Hse(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var Gse,qse=function(e){return String.fromCharCode(e)},Xse=function(e){return String.fromCharCode(e)};var Yse=null,Kse="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function $se(e){for(var t="",n=0,r=0,a=0,i=0,o=0,s=0,l=0,u=0;u<e.length;)i=(n=e.charCodeAt(u++))>>2,o=(3&n)<<4|(r=e.charCodeAt(u++))>>4,s=(15&r)<<2|(a=e.charCodeAt(u++))>>6,l=63&a,isNaN(r)?s=l=64:isNaN(a)&&(l=64),t+=Kse.charAt(i)+Kse.charAt(o)+Kse.charAt(s)+Kse.charAt(l);return t}function Jse(e){var t="",n=0,r=0,a=0,i=0,o=0,s=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)n=Kse.indexOf(e.charAt(l++))<<2|(i=Kse.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(n),r=(15&i)<<4|(o=Kse.indexOf(e.charAt(l++)))>>2,64!==o&&(t+=String.fromCharCode(r)),a=(3&o)<<6|(s=Kse.indexOf(e.charAt(l++))),64!==s&&(t+=String.fromCharCode(a));return t}var Qse=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),ele=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(UK){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function tle(e){return Qse?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function nle(e){return Qse?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var rle=function(e){return Qse?ele(e,"binary"):e.split("").map((function(e){return 255&e.charCodeAt(0)}))};function ale(e){if("undefined"===typeof ArrayBuffer)return rle(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}function ile(e){if(Array.isArray(e))return e.map((function(e){return String.fromCharCode(e)})).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}var ole=Qse?function(e){return Buffer.concat(e.map((function(e){return Buffer.isBuffer(e)?e:ele(e)})))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),a=0;for(t=0,n=0;t<e.length;n+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)r.set(e[t],n);else{if("string"==typeof e[t])throw"wtf";r.set(new Uint8Array(e[t]),n)}return r}return[].concat.apply([],e.map((function(e){return Array.isArray(e)?e:[].slice.call(e)})))};var sle=/\u0000/g,lle=/[\u0001-\u0006]/g;function ule(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function cle(e,t){var n=""+e;return n.length>=t?n:kue("0",t-n.length)+n}function dle(e,t){var n=""+e;return n.length>=t?n:kue(" ",t-n.length)+n}function hle(e,t){var n=""+e;return n.length>=t?n:n+kue(" ",t-n.length)}var fle=Math.pow(2,32);function ple(e,t){return e>fle||e<-fle?function(e,t){var n=""+Math.round(e);return n.length>=t?n:kue("0",t-n.length)+n}(e,t):function(e,t){var n=""+e;return n.length>=t?n:kue("0",t-n.length)+n}(Math.round(e),t)}function mle(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var vle=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],gle=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var yle={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},ble={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},xle={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function wle(e,t,n){for(var r=e<0?-1:1,a=e*r,i=0,o=1,s=0,l=1,u=0,c=0,d=Math.floor(a);u<t&&(s=(d=Math.floor(a))*o+i,c=d*u+l,!(a-d<5e-8));)a=1/(a-d),i=o,o=s,l=u,u=c;if(c>t&&(u>t?(c=l,s=i):(c=u,s=o)),!n)return[0,r*s,c];var h=Math.floor(r*s/c);return[h,r*s-h*c,c]}function kle(e,t,n){if(e>2958465||e<0)return null;var r=0|e,a=Math.floor(86400*(e-r)),i=0,o=[],s={D:r,T:a,u:86400*(e-r)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(s.u)<1e-6&&(s.u=0),t&&t.date1904&&(r+=1462),s.u>.9999&&(s.u=0,86400==++a&&(s.T=a=0,++r,++s.D)),60===r)o=n?[1317,10,29]:[1900,2,29],i=3;else if(0===r)o=n?[1317,8,29]:[1900,1,0],i=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),r<60&&(i=(i+6)%7),n&&(i=function(e,t){t[0]-=581;var n=e.getDay();e<60&&(n=(n+6)%7);return n}(l,o))}return s.y=o[0],s.m=o[1],s.d=o[2],s.S=a%60,a=Math.floor(a/60),s.M=a%60,a=Math.floor(a/60),s.H=a,s.q=i,s}var Sle=new Date(1899,11,31,0,0,0),Tle=Sle.getTime(),Ele=new Date(1900,2,1,0,0,0);function Cle(e,t){var n=e.getTime();return t?n-=1262304e5:e>=Ele&&(n+=864e5),(n-(Tle+6e4*(e.getTimezoneOffset()-Sle.getTimezoneOffset())))/864e5}function _le(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Mle(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,n=_le(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10)).length<=t?n:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function(e){var t=_le(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),_le(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function Ale(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):Mle(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return Kle(14,Cle(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Ile(e,t,n,r){var a,i="",o=0,s=0,l=n.y,u=0;switch(e){case 98:l=n.y+543;case 121:switch(t.length){case 1:case 2:a=l%100,u=2;break;default:a=l%1e4,u=4}break;case 109:switch(t.length){case 1:case 2:a=n.m,u=t.length;break;case 3:return gle[n.m-1][1];case 5:return gle[n.m-1][0];default:return gle[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:a=n.d,u=t.length;break;case 3:return vle[n.q][0];default:return vle[n.q][1]}break;case 104:switch(t.length){case 1:case 2:a=1+(n.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:a=n.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:a=n.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==n.u||"s"!=t&&"ss"!=t?(s=r>=2?3===r?1e3:100:1===r?10:1,(o=Math.round(s*(n.S+n.u)))>=60*s&&(o=0),"s"===t?0===o?"0":""+o/s:(i=cle(o,2+r),"ss"===t?i.substr(0,2):"."+i.substr(2,t.length-1))):cle(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":a=24*n.D+n.H;break;case"[m]":case"[mm]":a=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":a=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}u=3===t.length?1:2;break;case 101:a=l,u=1}return u>0?cle(a,u):""}function Nle(e){if(e.length<=3)return e;for(var t=e.length%3,n=e.substr(0,t);t!=e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}var Rle=/%/g;function Ole(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+Ole(e,-t);var a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),-1===(n=(t/Math.pow(10,i)).toPrecision(r+1+(a+i)%a)).indexOf("e")){var o=Math.floor(Math.log(t)*Math.LOG10E);for(-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+i):n+="E+"+(o-i);"0."===n.substr(0,2);)n=(n=n.charAt(0)+n.substr(2,a)+"."+n.substr(2+a)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,n,r){return t+n+r.substr(0,(a+i)%a)+"."+r.substr(i)+"E"}))}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var Dle=/# (\?+)( ?)\/( ?)(\d+)/;var Lle=/^#*0*\.([0#]+)/,Ple=/\).*[0#]/,Fle=/\(###\) ###\\?-####/;function jle(e){for(var t,n="",r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function zle(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function Ble(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function Ule(e,t,n){if(40===e.charCodeAt(0)&&!t.match(Ple)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Ule("n",r,n):"("+Ule("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return Zle(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(Rle,""),a=t.length-r.length;return Zle(e,r,n*Math.pow(10,2*a))+kue("%",a)}(e,t,n);if(-1!==t.indexOf("E"))return Ole(t,n);if(36===t.charCodeAt(0))return"$"+Ule(e,t.substr(" "==t.charAt(1)?2:1),n);var a,i,o,s,l=Math.abs(n),u=n<0?"-":"";if(t.match(/^00+$/))return u+ple(l,t.length);if(t.match(/^[#?]+$/))return"0"===(a=ple(n,0))&&(a=""),a.length>t.length?a:jle(t.substr(0,t.length-a.length))+a;if(i=t.match(Dle))return function(e,t,n){var r=parseInt(e[4],10),a=Math.round(t*r),i=Math.floor(a/r),o=a-i*r,s=r;return n+(0===i?"":""+i)+" "+(0===o?kue(" ",e[1].length+1+e[4].length):dle(o,e[1].length)+e[2]+"/"+e[3]+cle(s,e[4].length))}(i,l,u);if(t.match(/^#+0+$/))return u+ple(l,t.length-t.indexOf("0"));if(i=t.match(Lle))return a=zle(n,i[1].length).replace(/^([^\.]+)$/,"$1."+jle(i[1])).replace(/\.$/,"."+jle(i[1])).replace(/\.(\d*)$/,(function(e,t){return"."+t+kue("0",jle(i[1]).length-t.length)})),-1!==t.indexOf("0.")?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+zle(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Nle(ple(l,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Ule(e,t,-n):Nle(""+(Math.floor(n)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(n,i[1].length)))+"."+cle(Ble(n,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Ule(e,t.replace(/^#,#*,/,""),n);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=ule(Ule(e,t.replace(/[\\-]/g,""),n)),o=0,ule(ule(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return o<a.length?a.charAt(o++):"0"===e?"0":""})));if(t.match(Fle))return"("+(a=Ule(e,"##########",n)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var c="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),s=wle(l,Math.pow(10,o)-1,!1),a=""+u," "==(c=Zle("n",i[1],s[1])).charAt(c.length-1)&&(c=c.substr(0,c.length-1)+"0"),a+=c+i[2]+"/"+i[3],(c=hle(s[2],o)).length<i[4].length&&(c=jle(i[4].substr(i[4].length-c.length))+c),a+=c;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),u+((s=wle(l,Math.pow(10,o)-1,!0))[0]||(s[1]?"":"0"))+" "+(s[1]?dle(s[1],o)+i[2]+"/"+i[3]+hle(s[2],o):kue(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=ple(n,0),t.length<=a.length?a:jle(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+n.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var d=t.indexOf(".")-o,h=t.length-a.length-d;return jle(t.substr(0,d)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=Ble(n,i[1].length),n<0?"-"+Ule(e,t,-n):Nle(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?cle(0,3-e.length):"")+e}))+"."+cle(o,i[1].length);switch(t){case"###,##0.00":return Ule(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var f=Nle(ple(l,0));return"0"!==f?u+f:"";case"###,###.00":return Ule(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Ule(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Wle(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+Wle(e,-t);var a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),!(n=(t/Math.pow(10,i)).toPrecision(r+1+(a+i)%a)).match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+i):n+="E+"+(o-i),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,n,r){return t+n+r.substr(0,(a+i)%a)+"."+r.substr(i)+"E"}))}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function Vle(e,t,n){if(40===e.charCodeAt(0)&&!t.match(Ple)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Vle("n",r,n):"("+Vle("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return Zle(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(Rle,""),a=t.length-r.length;return Zle(e,r,n*Math.pow(10,2*a))+kue("%",a)}(e,t,n);if(-1!==t.indexOf("E"))return Wle(t,n);if(36===t.charCodeAt(0))return"$"+Vle(e,t.substr(" "==t.charAt(1)?2:1),n);var a,i,o,s,l=Math.abs(n),u=n<0?"-":"";if(t.match(/^00+$/))return u+cle(l,t.length);if(t.match(/^[#?]+$/))return a=""+n,0===n&&(a=""),a.length>t.length?a:jle(t.substr(0,t.length-a.length))+a;if(i=t.match(Dle))return function(e,t,n){return n+(0===t?"":""+t)+kue(" ",e[1].length+2+e[4].length)}(i,l,u);if(t.match(/^#+0+$/))return u+cle(l,t.length-t.indexOf("0"));if(i=t.match(Lle))return a=(a=(""+n).replace(/^([^\.]+)$/,"$1."+jle(i[1])).replace(/\.$/,"."+jle(i[1]))).replace(/\.(\d*)$/,(function(e,t){return"."+t+kue("0",jle(i[1]).length-t.length)})),-1!==t.indexOf("0.")?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Nle(""+l);if(i=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Vle(e,t,-n):Nle(""+n)+"."+kue("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Vle(e,t.replace(/^#,#*,/,""),n);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=ule(Vle(e,t.replace(/[\\-]/g,""),n)),o=0,ule(ule(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return o<a.length?a.charAt(o++):"0"===e?"0":""})));if(t.match(Fle))return"("+(a=Vle(e,"##########",n)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var c="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),s=wle(l,Math.pow(10,o)-1,!1),a=""+u," "==(c=Zle("n",i[1],s[1])).charAt(c.length-1)&&(c=c.substr(0,c.length-1)+"0"),a+=c+i[2]+"/"+i[3],(c=hle(s[2],o)).length<i[4].length&&(c=jle(i[4].substr(i[4].length-c.length))+c),a+=c;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),u+((s=wle(l,Math.pow(10,o)-1,!0))[0]||(s[1]?"":"0"))+" "+(s[1]?dle(s[1],o)+i[2]+"/"+i[3]+hle(s[2],o):kue(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+n,t.length<=a.length?a:jle(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+n.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var d=t.indexOf(".")-o,h=t.length-a.length-d;return jle(t.substr(0,d)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+Vle(e,t,-n):Nle(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?cle(0,3-e.length):"")+e}))+"."+cle(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var f=Nle(""+l);return"0"!==f?u+f:"";default:if(t.match(/\.[0#?]*$/))return Vle(e,t.slice(0,t.lastIndexOf(".")),n)+jle(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Zle(e,t,n){return(0|n)===n?Vle(e,t,n):Ule(e,t,n)}var Hle=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Gle(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":mle(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=n;"]"!==e.charAt(t++)&&t<e.length;)r+=e.charAt(t);if(r.match(Hle))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var qle=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Xle(e,t){if(null==t)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function Yle(e,t){var n=function(e){for(var t=[],n=!1,r=0,a=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(a,r-a),a=r+1}if(t[t.length]=e.substr(a),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}(e),r=n.length,a=n[r-1].indexOf("@");if(r<4&&a>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!==typeof t)return[4,4===n.length||a>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=a>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=a>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=a>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}var i=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,i];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var o=n[0].match(qle),s=n[1].match(qle);return Xle(t,o)?[r,n[0]]:Xle(t,s)?[r,n[1]]:[r,n[null!=o&&null!=s?2:1]]}return[r,i]}function Kle(e,t,n){null==n&&(n={});var r="";switch(typeof e){case"string":r="m/d/yy"==e&&n.dateNF?n.dateNF:e;break;case"number":null==(r=14==e&&n.dateNF?n.dateNF:(null!=n.table?n.table:yle)[e])&&(r=n.table&&n.table[ble[e]]||yle[ble[e]]),null==r&&(r=xle[e]||"General")}if(mle(r,0))return Ale(t,n);t instanceof Date&&(t=Cle(t,n.date1904));var a=Yle(r,t);if(mle(a[1]))return Ale(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,n,r){for(var a,i,o,s=[],l="",u=0,c="",d="t",h="H";u<e.length;)switch(c=e.charAt(u)){case"G":if(!mle(e,u))throw new Error("unrecognized character "+c+" in "+e);s[s.length]={t:"G",v:"General"},u+=7;break;case'"':for(l="";34!==(o=e.charCodeAt(++u))&&u<e.length;)l+=String.fromCharCode(o);s[s.length]={t:"t",v:l},++u;break;case"\\":var f=e.charAt(++u),p="("===f||")"===f?f:"t";s[s.length]={t:p,v:f},++u;break;case"_":s[s.length]={t:"t",v:" "},u+=2;break;case"@":s[s.length]={t:"T",v:t},++u;break;case"B":case"b":if("1"===e.charAt(u+1)||"2"===e.charAt(u+1)){if(null==a&&null==(a=kle(t,n,"2"===e.charAt(u+1))))return"";s[s.length]={t:"X",v:e.substr(u,2)},d=c,u+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":c=c.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==a&&null==(a=kle(t,n)))return"";for(l=c;++u<e.length&&e.charAt(u).toLowerCase()===c;)l+=c;"m"===c&&"h"===d.toLowerCase()&&(c="M"),"h"===c&&(c=h),s[s.length]={t:c,v:l},d=c;break;case"A":case"a":case"\u4e0a":var m={t:c,v:c};if(null==a&&(a=kle(t,n)),"A/P"===e.substr(u,3).toUpperCase()?(null!=a&&(m.v=a.H>=12?"P":"A"),m.t="T",h="h",u+=3):"AM/PM"===e.substr(u,5).toUpperCase()?(null!=a&&(m.v=a.H>=12?"PM":"AM"),m.t="T",u+=5,h="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(u,5).toUpperCase()?(null!=a&&(m.v=a.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),m.t="T",u+=5,h="h"):(m.t="t",++u),null==a&&"T"===m.t)return"";s[s.length]=m,d=c;break;case"[":for(l=c;"]"!==e.charAt(u++)&&u<e.length;)l+=e.charAt(u);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(Hle)){if(null==a&&null==(a=kle(t,n)))return"";s[s.length]={t:"Z",v:l.toLowerCase()},d=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",Gle(e)||(s[s.length]={t:"t",v:l}));break;case".":if(null!=a){for(l=c;++u<e.length&&"0"===(c=e.charAt(u));)l+=c;s[s.length]={t:"s",v:l};break}case"0":case"#":for(l=c;++u<e.length&&"0#?.,E+-%".indexOf(c=e.charAt(u))>-1;)l+=c;s[s.length]={t:"n",v:l};break;case"?":for(l=c;e.charAt(++u)===c;)l+=c;s[s.length]={t:c,v:l},d=c;break;case"*":++u," "!=e.charAt(u)&&"*"!=e.charAt(u)||++u;break;case"(":case")":s[s.length]={t:1===r?"t":c,v:c},++u;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=c;u<e.length&&"0123456789".indexOf(e.charAt(++u))>-1;)l+=e.charAt(u);s[s.length]={t:"D",v:l};break;case" ":s[s.length]={t:c,v:c},++u;break;case"$":s[s.length]={t:"t",v:"$"},++u;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(c))throw new Error("unrecognized character "+c+" in "+e);s[s.length]={t:"t",v:c},++u}var v,g=0,y=0;for(u=s.length-1,d="t";u>=0;--u)switch(s[u].t){case"h":case"H":s[u].t=h,d="h",g<1&&(g=1);break;case"s":(v=s[u].v.match(/\.0+$/))&&(y=Math.max(y,v[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":d=s[u].t;break;case"m":"s"===d&&(s[u].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&s[u].v.match(/[Hh]/)&&(g=1),g<2&&s[u].v.match(/[Mm]/)&&(g=2),g<3&&s[u].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:a.u>=.5&&(a.u=0,++a.S),a.S>=60&&(a.S=0,++a.M),a.M>=60&&(a.M=0,++a.H);break;case 2:a.u>=.5&&(a.u=0,++a.S),a.S>=60&&(a.S=0,++a.M)}var b,x="";for(u=0;u<s.length;++u)switch(s[u].t){case"t":case"T":case" ":case"D":break;case"X":s[u].v="",s[u].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[u].v=Ile(s[u].t.charCodeAt(0),s[u].v,a,y),s[u].t="t";break;case"n":case"?":for(b=u+1;null!=s[b]&&("?"===(c=s[b].t)||"D"===c||(" "===c||"t"===c)&&null!=s[b+1]&&("?"===s[b+1].t||"t"===s[b+1].t&&"/"===s[b+1].v)||"("===s[u].t&&(" "===c||"n"===c||")"===c)||"t"===c&&("/"===s[b].v||" "===s[b].v&&null!=s[b+1]&&"?"==s[b+1].t));)s[u].v+=s[b].v,s[b]={v:"",t:";"},++b;x+=s[u].v,u=b-1;break;case"G":s[u].t="t",s[u].v=Ale(t,n)}var w,k,S="";if(x.length>0){40==x.charCodeAt(0)?(w=t<0&&45===x.charCodeAt(0)?-t:t,k=Zle("n",x,w)):(k=Zle("n",x,w=t<0&&r>1?-t:t),w<0&&s[0]&&"t"==s[0].t&&(k=k.substr(1),s[0].v="-"+s[0].v)),b=k.length-1;var T=s.length;for(u=0;u<s.length;++u)if(null!=s[u]&&"t"!=s[u].t&&s[u].v.indexOf(".")>-1){T=u;break}var E=s.length;if(T===s.length&&-1===k.indexOf("E")){for(u=s.length-1;u>=0;--u)null!=s[u]&&-1!=="n?".indexOf(s[u].t)&&(b>=s[u].v.length-1?(b-=s[u].v.length,s[u].v=k.substr(b+1,s[u].v.length)):b<0?s[u].v="":(s[u].v=k.substr(0,b+1),b=-1),s[u].t="t",E=u);b>=0&&E<s.length&&(s[E].v=k.substr(0,b+1)+s[E].v)}else if(T!==s.length&&-1===k.indexOf("E")){for(b=k.indexOf(".")-1,u=T;u>=0;--u)if(null!=s[u]&&-1!=="n?".indexOf(s[u].t)){for(i=s[u].v.indexOf(".")>-1&&u===T?s[u].v.indexOf(".")-1:s[u].v.length-1,S=s[u].v.substr(i+1);i>=0;--i)b>=0&&("0"===s[u].v.charAt(i)||"#"===s[u].v.charAt(i))&&(S=k.charAt(b--)+S);s[u].v=S,s[u].t="t",E=u}for(b>=0&&E<s.length&&(s[E].v=k.substr(0,b+1)+s[E].v),b=k.indexOf(".")+1,u=T;u<s.length;++u)if(null!=s[u]&&(-1!=="n?(".indexOf(s[u].t)||u===T)){for(i=s[u].v.indexOf(".")>-1&&u===T?s[u].v.indexOf(".")+1:0,S=s[u].v.substr(0,i);i<s[u].v.length;++i)b<k.length&&(S+=k.charAt(b++));s[u].v=S,s[u].t="t",E=u}}}for(u=0;u<s.length;++u)null!=s[u]&&"n?".indexOf(s[u].t)>-1&&(w=r>1&&t<0&&u>0&&"-"===s[u-1].v?-t:t,s[u].v=Zle(s[u].t,s[u].v,w),s[u].t="t");var C="";for(u=0;u!==s.length;++u)null!=s[u]&&(C+=s[u].v);return C}(a[1],t,n,a[0])}function $le(e,t){if("number"!=typeof t){t=+t||-1;for(var n=0;n<392;++n)if(void 0!=yle[n]){if(yle[n]==e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return yle[t]=e,t}function Jle(e){for(var t=0;392!=t;++t)void 0!==e[t]&&$le(e[t],t)}function Qle(){yle=function(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',e}()}var eue=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var tue=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var n=function(e){var t=0,n=0,r=0,a="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)a[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=a[t]=n>>>8^e[255&n];var i=[];for(r=1;16!=r;++r)i[r-1]="undefined"!==typeof Int32Array?a.subarray(256*r,256*r+256):a.slice(256*r,256*r+256);return i}(t),r=n[0],a=n[1],i=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],d=n[8],h=n[9],f=n[10],p=n[11],m=n[12],v=n[13],g=n[14];return e.table=t,e.bstr=function(e,n){for(var r=-1^n,a=0,i=e.length;a<i;)r=r>>>8^t[255&(r^e.charCodeAt(a++))];return~r},e.buf=function(e,n){for(var y=-1^n,b=e.length-15,x=0;x<b;)y=g[e[x++]^255&y]^v[e[x++]^y>>8&255]^m[e[x++]^y>>16&255]^p[e[x++]^y>>>24]^f[e[x++]]^h[e[x++]]^d[e[x++]]^c[e[x++]]^u[e[x++]]^l[e[x++]]^s[e[x++]]^o[e[x++]]^i[e[x++]]^a[e[x++]]^r[e[x++]]^t[e[x++]];for(b+=15;x<b;)y=y>>>8^t[255&(y^e[x++])];return~y},e.str=function(e,n){for(var r=-1^n,a=0,i=e.length,o=0,s=0;a<i;)(o=e.charCodeAt(a++))<128?r=r>>>8^t[255&(r^o)]:o<2048?r=(r=r>>>8^t[255&(r^(192|o>>6&31))])>>>8^t[255&(r^(128|63&o))]:o>=55296&&o<57344?(o=64+(1023&o),s=1023&e.charCodeAt(a++),r=(r=(r=(r=r>>>8^t[255&(r^(240|o>>8&7))])>>>8^t[255&(r^(128|o>>2&63))])>>>8^t[255&(r^(128|s>>6&15|(3&o)<<4))])>>>8^t[255&(r^(128|63&s))]):r=(r=(r=r>>>8^t[255&(r^(224|o>>12&15))])>>>8^t[255&(r^(128|o>>6&63))])>>>8^t[255&(r^(128|63&o))];return~r},e}(),nue=function(){var e,t={};function n(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function r(e){if("/"==e.charAt(e.length-1))return r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function a(e,t){"string"===typeof t&&(t=new Date(t));var n=t.getHours();n=(n=n<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,n);var r=t.getFullYear()-1980;r=(r=r<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,r)}function i(e){Oce(e,0);for(var t={},n=0;e.l<=e.length-4;){var r=e.read_shift(2),a=e.read_shift(2),i=e.l+a,o={};if(21589===r)1&(n=e.read_shift(1))&&(o.mtime=e.read_shift(4)),a>5&&(2&n&&(o.atime=e.read_shift(4)),4&n&&(o.ctime=e.read_shift(4))),o.mtime&&(o.mt=new Date(1e3*o.mtime));e.l=i,t[r]=o}return t}function o(){return e||(e={})}function s(e,t){if(80==e[0]&&75==e[1])return re(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=k(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=t&&t.root||"",r=(Qse&&Buffer.isBuffer(e)?e.toString("binary"):k(e)).split("\r\n"),a=0,i="";for(a=0;a<r.length;++a)if(i=r[a],/^Content-Location:/i.test(i)&&(i=i.slice(i.indexOf("file")),n||(n=i.slice(0,i.lastIndexOf("/")+1)),i.slice(0,n.length)!=n))for(;n.length>0&&(n=(n=n.slice(0,n.length-1)).slice(0,n.lastIndexOf("/")+1),i.slice(0,n.length)!=n););var o=(r[1]||"").match(/boundary="(.*?)"/);if(!o)throw new Error("MAD cannot find boundary");var s="--"+(o[1]||""),l=[],u=[],c={FileIndex:l,FullPaths:u};h(c);var d,f=0;for(a=0;a<r.length;++a){var p=r[a];p!==s&&p!==s+"--"||(f++&&ue(c,r.slice(d,a),n),d=a)}return c}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var n,r,a,i,o,s,f=512,p=[],m=e.slice(0,512);Oce(m,0);var v=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(y,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(m);switch(n=v[0]){case 3:f=512;break;case 4:f=4096;break;case 0:if(0==v[1])return re(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==f&&Oce(m=e.slice(0,f),28);var b=e.slice(0,f);!function(e,t){var n=9;switch(e.l+=2,n=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(m,n);var x=m.read_shift(4,"i");if(3===n&&0!==x)throw new Error("# Directory Sectors: Expected 0 saw "+x);m.l+=4,i=m.read_shift(4,"i"),m.l+=4,m.chk("00100000","Mini Stream Cutoff Size: "),o=m.read_shift(4,"i"),r=m.read_shift(4,"i"),s=m.read_shift(4,"i"),a=m.read_shift(4,"i");for(var w=-1,S=0;S<109&&!((w=m.read_shift(4,"i"))<0);++S)p[S]=w;var T=function(e,t){for(var n=Math.ceil(e.length/t)-1,r=[],a=1;a<n;++a)r[a-1]=e.slice(a*t,(a+1)*t);return r[n-1]=e.slice(n*t),r}(e,f);u(s,a,T,f,p);var E=function(e,t,n,r){var a=e.length,i=[],o=[],s=[],l=[],u=r-1,c=0,d=0,h=0,f=0;for(c=0;c<a;++c)if(s=[],(h=c+t)>=a&&(h-=a),!o[h]){l=[];var p=[];for(d=h;d>=0;){p[d]=!0,o[d]=!0,s[s.length]=d,l.push(e[d]);var m=n[Math.floor(4*d/r)];if(r<4+(f=4*d&u))throw new Error("FAT boundary crossed: "+d+" 4 "+r);if(!e[m])break;if(p[d=Ece(e[m],f)])break}i[h]={nodes:s,data:ece([l])}}return i}(T,i,p,f);E[i].name="!Directory",r>0&&o!==g&&(E[o].name="!MiniFAT"),E[p[0]].name="!FAT",E.fat_addrs=p,E.ssz=f;var C=[],_=[],M=[];!function(e,t,n,r,a,i,o,s){for(var u,h=0,f=r.length?2:0,p=t[e].data,m=0,v=0;m<p.length;m+=128){var y=p.slice(m,m+128);Oce(y,64),v=y.read_shift(2),u=nce(y,0,v-f),r.push(u);var b={name:u,type:y.read_shift(1),color:y.read_shift(1),L:y.read_shift(4,"i"),R:y.read_shift(4,"i"),C:y.read_shift(4,"i"),clsid:y.read_shift(16),state:y.read_shift(4,"i"),start:0,size:0};0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(b.ct=d(y,y.l-8)),0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(b.mt=d(y,y.l-8)),b.start=y.read_shift(4,"i"),b.size=y.read_shift(4,"i"),b.size<0&&b.start<0&&(b.size=b.type=0,b.start=g,b.name=""),5===b.type?(h=b.start,a>0&&h!==g&&(t[h].name="!StreamData")):b.size>=4096?(b.storage="fat",void 0===t[b.start]&&(t[b.start]=c(n,b.start,t.fat_addrs,t.ssz)),t[b.start].name=b.name,b.content=t[b.start].data.slice(0,b.size)):(b.storage="minifat",b.size<0?b.size=0:h!==g&&b.start!==g&&t[h]&&(b.content=l(b,t[h].data,(t[s]||{}).data))),b.content&&Oce(b.content,0),i[u]=b,o.push(b)}}(i,E,T,C,r,{},_,o),function(e,t,n){for(var r=0,a=0,i=0,o=0,s=0,l=n.length,u=[],c=[];r<l;++r)u[r]=c[r]=r,t[r]=n[r];for(;s<c.length;++s)a=e[r=c[s]].L,i=e[r].R,o=e[r].C,u[r]===r&&(-1!==a&&u[a]!==a&&(u[r]=u[a]),-1!==i&&u[i]!==i&&(u[r]=u[i])),-1!==o&&(u[o]=r),-1!==a&&r!=u[r]&&(u[a]=u[r],c.lastIndexOf(a)<s&&c.push(a)),-1!==i&&r!=u[r]&&(u[i]=u[r],c.lastIndexOf(i)<s&&c.push(i));for(r=1;r<l;++r)u[r]===r&&(-1!==i&&u[i]!==i?u[r]=u[i]:-1!==a&&u[a]!==a&&(u[r]=u[a]));for(r=1;r<l;++r)if(0!==e[r].type){if((s=r)!=u[s])do{s=u[s],t[r]=t[s]+"/"+t[r]}while(0!==s&&-1!==u[s]&&s!=u[s]);u[r]=-1}for(t[0]+="/",r=1;r<l;++r)2!==e[r].type&&(t[r]+="/")}(_,M,C),C.shift();var A={FileIndex:_,FullPaths:M};return t&&t.raw&&(A.raw={header:b,sectors:T}),A}function l(e,t,n){for(var r=e.start,a=e.size,i=[],o=r;n&&a>0&&o>=0;)i.push(t.slice(o*v,o*v+v)),a-=v,o=Ece(n,4*o);return 0===i.length?Lce(0):ole(i).slice(0,e.size)}function u(e,t,n,r,a){var i=g;if(e===g){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var o=n[e],s=(r>>>2)-1;if(!o)return;for(var l=0;l<s&&(i=Ece(o,4*l))!==g;++l)a.push(i);u(Ece(o,r-4),t-1,n,r,a)}}function c(e,t,n,r,a){var i=[],o=[];a||(a=[]);var s=r-1,l=0,u=0;for(l=t;l>=0;){a[l]=!0,i[i.length]=l,o.push(e[l]);var c=n[Math.floor(4*l/r)];if(r<4+(u=4*l&s))throw new Error("FAT boundary crossed: "+l+" 4 "+r);if(!e[c])break;l=Ece(e[c],u)}return{nodes:i,data:ece([o])}}function d(e,t){return new Date(1e3*(Tce(e,t+4)/1e7*Math.pow(2,32)+Tce(e,t)/1e7-11644473600))}function h(e,t){var n=t||{},r=n.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=r+"/",e.FileIndex[0]={name:r,type:5}),n.CLSID&&(e.FileIndex[0].clsid=n.CLSID),function(e){var t="\x01Sh33tJ5";if(nue.find(e,"/"+t))return;var n=Lce(4);n[0]=55,n[1]=n[3]=50,n[2]=54,e.FileIndex.push({name:t,type:2,content:n,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),f(e)}(e)}function f(e,t){h(e);for(var a=!1,i=!1,o=e.FullPaths.length-1;o>=0;--o){var s=e.FileIndex[o];switch(s.type){case 0:i?a=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:i=!0,isNaN(s.R*s.L*s.C)&&(a=!0),s.R>-1&&s.L>-1&&s.R==s.L&&(a=!0);break;default:a=!0}}if(a||t){var l=new Date(1987,1,19),u=0,c=Object.create?Object.create(null):{},d=[];for(o=0;o<e.FullPaths.length;++o)c[e.FullPaths[o]]=!0,0!==e.FileIndex[o].type&&d.push([e.FullPaths[o],e.FileIndex[o]]);for(o=0;o<d.length;++o){var f=n(d[o][0]);(i=c[f])||(d.push([f,{name:r(f).replace("/",""),type:1,clsid:x,ct:l,mt:l,content:null}]),c[f]=!0)}for(d.sort((function(e,t){return function(e,t){for(var n=e.split("/"),r=t.split("/"),a=0,i=0,o=Math.min(n.length,r.length);a<o;++a){if(i=n[a].length-r[a].length)return i;if(n[a]!=r[a])return n[a]<r[a]?-1:1}return n.length-r.length}(e[0],t[0])})),e.FullPaths=[],e.FileIndex=[],o=0;o<d.length;++o)e.FullPaths[o]=d[o][0],e.FileIndex[o]=d[o][1];for(o=0;o<d.length;++o){var p=e.FileIndex[o],m=e.FullPaths[o];if(p.name=r(m).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||x,0===o)p.C=d.length>1?1:-1,p.size=0,p.type=5;else if("/"==m.slice(-1)){for(u=o+1;u<d.length&&n(e.FullPaths[u])!=m;++u);for(p.C=u>=d.length?-1:u,u=o+1;u<d.length&&n(e.FullPaths[u])!=n(m);++u);p.R=u>=d.length?-1:u,p.type=1}else n(e.FullPaths[o+1]||"")==n(m)&&(p.R=o+1),p.type=2}}}function p(e,t){var n=t||{};if("mad"==n.fileType)return function(e,t){for(var n=t||{},r=n.boundary||"SheetJS",a=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(r="------="+r).slice(2)+'"',"","",""],i=e.FullPaths[0],o=i,s=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(o=e.FullPaths[l].slice(i.length),(s=e.FileIndex[l]).size&&s.content&&"\x01Sh33tJ5"!=o){o=o.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,(function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"})).replace(/[\u0080-\uFFFF]/g,(function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"}));for(var u=s.content,c=Qse&&Buffer.isBuffer(u)?u.toString("binary"):k(u),d=0,h=Math.min(1024,c.length),f=0,p=0;p<=h;++p)(f=c.charCodeAt(p))>=32&&f<128&&++d;var m=d>=4*h/5;a.push(r),a.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+o),a.push("Content-Transfer-Encoding: "+(m?"quoted-printable":"base64")),a.push("Content-Type: "+oe(s,o)),a.push(""),a.push(m?le(c):se(c))}return a.push(r+"--\r\n"),a.join("\r\n")}(e,n);if(f(e),"zip"===n.fileType)return function(e,t){var n=t||{},r=[],i=[],o=Lce(1),s=n.compression?8:0,l=0;0;var u=0,c=0,d=0,h=0,f=e.FullPaths[0],p=f,m=e.FileIndex[0],v=[],g=0;for(u=1;u<e.FullPaths.length;++u)if(p=e.FullPaths[u].slice(f.length),(m=e.FileIndex[u]).size&&m.content&&"\x01Sh33tJ5"!=p){var y=d,b=Lce(p.length);for(c=0;c<p.length;++c)b.write_shift(1,127&p.charCodeAt(c));b=b.slice(0,b.l),v[h]=tue.buf(m.content,0);var x=m.content;8==s&&(x=S(x)),(o=Lce(30)).write_shift(4,67324752),o.write_shift(2,20),o.write_shift(2,l),o.write_shift(2,s),m.mt?a(o,m.mt):o.write_shift(4,0),o.write_shift(-4,8&l?0:v[h]),o.write_shift(4,8&l?0:x.length),o.write_shift(4,8&l?0:m.content.length),o.write_shift(2,b.length),o.write_shift(2,0),d+=o.length,r.push(o),d+=b.length,r.push(b),d+=x.length,r.push(x),8&l&&((o=Lce(12)).write_shift(-4,v[h]),o.write_shift(4,x.length),o.write_shift(4,m.content.length),d+=o.l,r.push(o)),(o=Lce(46)).write_shift(4,33639248),o.write_shift(2,0),o.write_shift(2,20),o.write_shift(2,l),o.write_shift(2,s),o.write_shift(4,0),o.write_shift(-4,v[h]),o.write_shift(4,x.length),o.write_shift(4,m.content.length),o.write_shift(2,b.length),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(4,0),o.write_shift(4,y),g+=o.l,i.push(o),g+=b.length,i.push(b),++h}return o=Lce(22),o.write_shift(4,101010256),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,h),o.write_shift(2,h),o.write_shift(4,g),o.write_shift(4,d),o.write_shift(2,0),ole([ole(r),ole(i),o])}(e,n);var r=function(e){for(var t=0,n=0,r=0;r<e.FileIndex.length;++r){var a=e.FileIndex[r];if(a.content){var i=a.content.length;i>0&&(i<4096?t+=i+63>>6:n+=i+511>>9)}}for(var o=e.FullPaths.length+3>>2,s=t+127>>7,l=(t+7>>3)+n+o+s,u=l+127>>7,c=u<=109?0:Math.ceil((u-109)/127);l+u+c+127>>7>u;)c=++u<=109?0:Math.ceil((u-109)/127);var d=[1,c,u,s,o,n,t,0];return e.FileIndex[0].size=t<<6,d[7]=(e.FileIndex[0].start=d[0]+d[1]+d[2]+d[3]+d[4]+d[5])+(d[6]+7>>3),d}(e),i=Lce(r[7]<<9),o=0,s=0;for(o=0;o<8;++o)i.write_shift(1,b[o]);for(o=0;o<8;++o)i.write_shift(2,0);for(i.write_shift(2,62),i.write_shift(2,3),i.write_shift(2,65534),i.write_shift(2,9),i.write_shift(2,6),o=0;o<3;++o)i.write_shift(2,0);for(i.write_shift(4,0),i.write_shift(4,r[2]),i.write_shift(4,r[0]+r[1]+r[2]+r[3]-1),i.write_shift(4,0),i.write_shift(4,4096),i.write_shift(4,r[3]?r[0]+r[1]+r[2]-1:g),i.write_shift(4,r[3]),i.write_shift(-4,r[1]?r[0]-1:g),i.write_shift(4,r[1]),o=0;o<109;++o)i.write_shift(-4,o<r[2]?r[1]+o:-1);if(r[1])for(s=0;s<r[1];++s){for(;o<236+127*s;++o)i.write_shift(-4,o<r[2]?r[1]+o:-1);i.write_shift(-4,s===r[1]-1?g:s+1)}var l=function(e){for(s+=e;o<s-1;++o)i.write_shift(-4,o+1);e&&(++o,i.write_shift(-4,g))};for(s=o=0,s+=r[1];o<s;++o)i.write_shift(-4,w.DIFSECT);for(s+=r[2];o<s;++o)i.write_shift(-4,w.FATSECT);l(r[3]),l(r[4]);for(var u=0,c=0,d=e.FileIndex[0];u<e.FileIndex.length;++u)(d=e.FileIndex[u]).content&&((c=d.content.length)<4096||(d.start=s,l(c+511>>9)));for(l(r[6]+7>>3);511&i.l;)i.write_shift(-4,w.ENDOFCHAIN);for(s=o=0,u=0;u<e.FileIndex.length;++u)(d=e.FileIndex[u]).content&&(!(c=d.content.length)||c>=4096||(d.start=s,l(c+63>>6)));for(;511&i.l;)i.write_shift(-4,w.ENDOFCHAIN);for(o=0;o<r[4]<<2;++o){var h=e.FullPaths[o];if(h&&0!==h.length){d=e.FileIndex[o],0===o&&(d.start=d.size?d.start-1:g);var p=0===o&&n.root||d.name;if(c=2*(p.length+1),i.write_shift(64,p,"utf16le"),i.write_shift(2,c),i.write_shift(1,d.type),i.write_shift(1,d.color),i.write_shift(-4,d.L),i.write_shift(-4,d.R),i.write_shift(-4,d.C),d.clsid)i.write_shift(16,d.clsid,"hex");else for(u=0;u<4;++u)i.write_shift(4,0);i.write_shift(4,d.state||0),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(4,d.start),i.write_shift(4,d.size),i.write_shift(4,0)}else{for(u=0;u<17;++u)i.write_shift(4,0);for(u=0;u<3;++u)i.write_shift(4,-1);for(u=0;u<12;++u)i.write_shift(4,0)}}for(o=1;o<e.FileIndex.length;++o)if((d=e.FileIndex[o]).size>=4096)if(i.l=d.start+1<<9,Qse&&Buffer.isBuffer(d.content))d.content.copy(i,i.l,0,d.size),i.l+=d.size+511&-512;else{for(u=0;u<d.size;++u)i.write_shift(1,d.content[u]);for(;511&u;++u)i.write_shift(1,0)}for(o=1;o<e.FileIndex.length;++o)if((d=e.FileIndex[o]).size>0&&d.size<4096)if(Qse&&Buffer.isBuffer(d.content))d.content.copy(i,i.l,0,d.size),i.l+=d.size+63&-64;else{for(u=0;u<d.size;++u)i.write_shift(1,d.content[u]);for(;63&u;++u)i.write_shift(1,0)}if(Qse)i.l=i.length;else for(;i.l<i.length;)i.write_shift(1,0);return i}t.version="1.2.1";var m,v=64,g=-2,y="d0cf11e0a1b11ae1",b=[208,207,17,224,161,177,26,225],x="00000000000000000000000000000000",w={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:g,FREESECT:-1,HEADER_SIGNATURE:y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:x,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function k(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function S(e){return m?m.deflateRawSync(e):X(e)}var T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],C=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function _(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var M="undefined"!==typeof Uint8Array,A=M?new Uint8Array(256):[],I=0;I<256;++I)A[I]=_(I);function N(e,t){var n=A[255&e];return t<=8?n>>>8-t:(n=n<<8|A[e>>8&255],t<=16?n>>>16-t:(n=n<<8|A[e>>16&255])>>>24-t)}function R(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=6?0:e[r+1]<<8))>>>n&3}function O(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=5?0:e[r+1]<<8))>>>n&7}function D(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=3?0:e[r+1]<<8))>>>n&31}function L(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=1?0:e[r+1]<<8))>>>n&127}function P(e,t,n){var r=7&t,a=t>>>3,i=(1<<n)-1,o=e[a]>>>r;return n<8-r?o&i:(o|=e[a+1]<<8-r,n<16-r?o&i:(o|=e[a+2]<<16-r,n<24-r?o&i:(o|=e[a+3]<<24-r)&i))}function F(e,t,n){var r=7&t,a=t>>>3;return r<=5?e[a]|=(7&n)<<r:(e[a]|=n<<r&255,e[a+1]=(7&n)>>8-r),t+3}function j(e,t,n){return n=(1&n)<<(7&t),e[t>>>3]|=n,t+1}function z(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=n,t+8}function B(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=255&n,e[r+2]=n>>>8,t+16}function U(e,t){var n=e.length,r=2*n>t?2*n:t+5,a=0;if(n>=t)return e;if(Qse){var i=nle(r);if(e.copy)e.copy(i);else for(;a<e.length;++a)i[a]=e[a];return i}if(M){var o=new Uint8Array(r);if(o.set)o.set(e);else for(;a<n;++a)o[a]=e[a];return o}return e.length=r,e}function W(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function V(e,t,n){var r=1,a=0,i=0,o=0,s=0,l=e.length,u=M?new Uint16Array(32):W(32);for(i=0;i<32;++i)u[i]=0;for(i=l;i<n;++i)e[i]=0;l=e.length;var c=M?new Uint16Array(l):W(l);for(i=0;i<l;++i)u[a=e[i]]++,r<a&&(r=a),c[i]=0;for(u[0]=0,i=1;i<=r;++i)u[i+16]=s=s+u[i-1]<<1;for(i=0;i<l;++i)0!=(s=e[i])&&(c[i]=u[s+16]++);var d=0;for(i=0;i<l;++i)if(0!=(d=e[i]))for(s=N(c[i],r)>>r-d,o=(1<<r+4-d)-1;o>=0;--o)t[s|o<<d]=15&d|i<<4;return r}var Z=M?new Uint16Array(512):W(512),H=M?new Uint16Array(32):W(32);if(!M){for(var G=0;G<512;++G)Z[G]=0;for(G=0;G<32;++G)H[G]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);V(e,H,32);var n=[];for(t=0;t<=143;t++)n.push(8);for(;t<=255;t++)n.push(9);for(;t<=279;t++)n.push(7);for(;t<=287;t++)n.push(8);V(n,Z,288)}();var q=function(){for(var e=M?new Uint8Array(32768):[],t=0,n=0;t<C.length-1;++t)for(;n<C[t+1];++n)e[n]=t;for(;n<32768;++n)e[n]=29;var r=M?new Uint8Array(259):[];for(t=0,n=0;t<E.length-1;++t)for(;n<E[t+1];++n)r[n]=t;return function(t,n){return t.length<8?function(e,t){for(var n=0;n<e.length;){var r=Math.min(65535,e.length-n),a=n+r==e.length;for(t.write_shift(1,+a),t.write_shift(2,r),t.write_shift(2,65535&~r);r-- >0;)t[t.l++]=e[n++]}return t.l}(t,n):function(t,n){for(var a=0,i=0,o=M?new Uint16Array(32768):[];i<t.length;){var s=Math.min(65535,t.length-i);if(s<10){for(7&(a=F(n,a,+!(i+s!=t.length)))&&(a+=8-(7&a)),n.l=a/8|0,n.write_shift(2,s),n.write_shift(2,65535&~s);s-- >0;)n[n.l++]=t[i++];a=8*n.l}else{a=F(n,a,+!(i+s!=t.length)+2);for(var l=0;s-- >0;){var u=t[i],c=-1,d=0;if((c=o[l=32767&(l<<5^u)])&&((c|=-32768&i)>i&&(c-=32768),c<i))for(;t[c+d]==t[i+d]&&d<250;)++d;if(d>2){(u=r[d])<=22?a=z(n,a,A[u+1]>>1)-1:(z(n,a,3),z(n,a+=5,A[u-23]>>5),a+=3);var h=u<8?0:u-4>>2;h>0&&(B(n,a,d-E[u]),a+=h),u=e[i-c],a=z(n,a,A[u]>>3),a-=3;var f=u<4?0:u-2>>1;f>0&&(B(n,a,i-c-C[u]),a+=f);for(var p=0;p<d;++p)o[l]=32767&i,l=32767&(l<<5^t[i]),++i;s-=d-1}else u<=143?u+=48:a=j(n,a,1),a=z(n,a,A[u]),o[l]=32767&i,++i}a=z(n,a,0)-1}}return n.l=(a+7)/8|0,n.l}(t,n)}}();function X(e){var t=Lce(50+Math.floor(1.1*e.length)),n=q(e,t);return t.slice(0,n)}var Y=M?new Uint16Array(32768):W(32768),K=M?new Uint16Array(32768):W(32768),$=M?new Uint16Array(128):W(128),J=1,Q=1;function ee(e,t){var n=D(e,t)+257,r=D(e,t+=5)+1,a=function(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=4?0:e[r+1]<<8))>>>n&15}(e,t+=5)+4;t+=4;for(var i=0,o=M?new Uint8Array(19):W(19),s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,u=M?new Uint8Array(8):W(8),c=M?new Uint8Array(8):W(8),d=o.length,h=0;h<a;++h)o[T[h]]=i=O(e,t),l<i&&(l=i),u[i]++,t+=3;var f=0;for(u[0]=0,h=1;h<=l;++h)c[h]=f=f+u[h-1]<<1;for(h=0;h<d;++h)0!=(f=o[h])&&(s[h]=c[f]++);var p=0;for(h=0;h<d;++h)if(0!=(p=o[h])){f=A[s[h]]>>8-p;for(var m=(1<<7-p)-1;m>=0;--m)$[f|m<<p]=7&p|h<<3}var v=[];for(l=1;v.length<n+r;)switch(t+=7&(f=$[L(e,t)]),f>>>=3){case 16:for(i=3+R(e,t),t+=2,f=v[v.length-1];i-- >0;)v.push(f);break;case 17:for(i=3+O(e,t),t+=3;i-- >0;)v.push(0);break;case 18:for(i=11+L(e,t),t+=7;i-- >0;)v.push(0);break;default:v.push(f),l<f&&(l=f)}var g=v.slice(0,n),y=v.slice(n);for(h=n;h<286;++h)g[h]=0;for(h=r;h<30;++h)y[h]=0;return J=V(g,Y,286),Q=V(y,K,30),t}function te(e,t){var n=function(e,t){if(3==e[0]&&!(3&e[1]))return[tle(t),2];for(var n=0,r=0,a=nle(t||1<<18),i=0,o=a.length>>>0,s=0,l=0;0==(1&r);)if(r=O(e,n),n+=3,r>>>1!=0)for(r>>1==1?(s=9,l=5):(n=ee(e,n),s=J,l=Q);;){!t&&o<i+32767&&(o=(a=U(a,i+32767)).length);var u=P(e,n,s),c=r>>>1==1?Z[u]:Y[u];if(n+=15&c,0===((c>>>=4)>>>8&255))a[i++]=c;else{if(256==c)break;var d=(c-=257)<8?0:c-4>>2;d>5&&(d=0);var h=i+E[c];d>0&&(h+=P(e,n,d),n+=d),u=P(e,n,l),n+=15&(c=r>>>1==1?H[u]:K[u]);var f=(c>>>=4)<4?0:c-2>>1,p=C[c];for(f>0&&(p+=P(e,n,f),n+=f),!t&&o<h&&(o=(a=U(a,h+100)).length);i<h;)a[i]=a[i-p],++i}}else{7&n&&(n+=8-(7&n));var m=e[n>>>3]|e[1+(n>>>3)]<<8;if(n+=32,m>0)for(!t&&o<i+m&&(o=(a=U(a,i+m)).length);m-- >0;)a[i++]=e[n>>>3],n+=8}return t?[a,n+7>>>3]:[a.slice(0,i),n+7>>>3]}(e.slice(e.l||0),t);return e.l+=n[1],n[0]}function ne(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function re(e,t){var n=e;Oce(n,0);var r={FileIndex:[],FullPaths:[]};h(r,{root:t.root});for(var a=n.length-4;(80!=n[a]||75!=n[a+1]||5!=n[a+2]||6!=n[a+3])&&a>=0;)--a;n.l=a+4,n.l+=4;var o=n.read_shift(2);n.l+=6;var s=n.read_shift(4);for(n.l=s,a=0;a<o;++a){n.l+=20;var l=n.read_shift(4),u=n.read_shift(4),c=n.read_shift(2),d=n.read_shift(2),f=n.read_shift(2);n.l+=8;var p=n.read_shift(4),m=i(n.slice(n.l+c,n.l+c+d));n.l+=c+d+f;var v=n.l;n.l=p+4,ae(n,l,u,r,m),n.l=v}return r}function ae(e,t,n,r,a){e.l+=2;var o=e.read_shift(2),s=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),n=65535&e.read_shift(2),r=new Date,a=31&n,i=15&(n>>>=5);n>>>=4,r.setMilliseconds(0),r.setFullYear(n+1980),r.setMonth(i-1),r.setDate(a);var o=31&t,s=63&(t>>>=5);return t>>>=6,r.setHours(t),r.setMinutes(s),r.setSeconds(o<<1),r}(e);if(8257&o)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var u=e.read_shift(4),c=e.read_shift(4),d=e.read_shift(2),h=e.read_shift(2),f="",p=0;p<d;++p)f+=String.fromCharCode(e[e.l++]);if(h){var v=i(e.slice(e.l,e.l+h));(v[21589]||{}).mt&&(l=v[21589].mt),((a||{})[21589]||{}).mt&&(l=a[21589].mt)}e.l+=h;var g=e.slice(e.l,e.l+u);switch(s){case 8:g=function(e,t){if(!m)return te(e,t);var n=new(0,m.InflateRaw),r=n._processChunk(e.slice(e.l),n._finishFlushFlag);return e.l+=n.bytesRead,r}(e,c);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+s)}var y=!1;8&o&&(134695760==e.read_shift(4)&&(e.read_shift(4),y=!0),u=e.read_shift(4),c=e.read_shift(4)),u!=t&&ne(y,"Bad compressed size: "+t+" != "+u),c!=n&&ne(y,"Bad uncompressed size: "+n+" != "+c),ce(r,f,g,{unsafe:!0,mt:l})}var ie={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function oe(e,t){if(e.ctype)return e.ctype;var n=e.name||"",r=n.match(/\.([^\.]+)$/);return r&&ie[r[1]]||t&&(r=(n=t).match(/[\.\\]([^\.\\])+$/))&&ie[r[1]]?ie[r[1]]:"application/octet-stream"}function se(e){for(var t=$se(e),n=[],r=0;r<t.length;r+=76)n.push(t.slice(r,r+76));return n.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,(function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)}));"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var n=[],r=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),a=0;a<r.length;++a){var i=r[a];if(0!=i.length)for(var o=0;o<i.length;){var s=76,l=i.slice(o,o+s);"="==l.charAt(s-1)?s--:"="==l.charAt(s-2)?s-=2:"="==l.charAt(s-3)&&(s-=3),l=i.slice(o,o+s),(o+=s)<i.length&&(l+="="),n.push(l)}else n.push("")}return n.join("\r\n")}function ue(e,t,n){for(var r,a="",i="",o="",s=0;s<10;++s){var l=t[s];if(!l||l.match(/^\s*$/))break;var u=l.match(/^(.*?):\s*([^\s].*)$/);if(u)switch(u[1].toLowerCase()){case"content-location":a=u[2].trim();break;case"content-type":o=u[2].trim();break;case"content-transfer-encoding":i=u[2].trim()}}switch(++s,i.toLowerCase()){case"base64":r=rle(Jse(t.slice(s).join("")));break;case"quoted-printable":r=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n];n<=e.length&&"="==r.charAt(r.length-1);)r=r.slice(0,r.length-1)+e[++n];t.push(r)}for(var a=0;a<t.length;++a)t[a]=t[a].replace(/[=][0-9A-Fa-f]{2}/g,(function(e){return String.fromCharCode(parseInt(e.slice(1),16))}));return rle(t.join("\r\n"))}(t.slice(s));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+i)}var c=ce(e,a.slice(n.length),r,{unsafe:!0});o&&(c.ctype=o)}function ce(e,t,n,a){var i=a&&a.unsafe;i||h(e);var o=!i&&nue.find(e,t);if(!o){var s=e.FullPaths[0];t.slice(0,s.length)==s?s=t:("/"!=s.slice(-1)&&(s+="/"),s=(s+t).replace("//","/")),o={name:r(t),type:2},e.FileIndex.push(o),e.FullPaths.push(s),i||nue.utils.cfb_gc(e)}return o.content=n,o.size=n?n.length:0,a&&(a.CLSID&&(o.clsid=a.CLSID),a.mt&&(o.mt=a.mt),a.ct&&(o.ct=a.ct)),o}return t.find=function(e,t){var n=e.FullPaths.map((function(e){return e.toUpperCase()})),r=n.map((function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]})),a=!1;47===t.charCodeAt(0)?(a=!0,t=n[0].slice(0,-1)+t):a=-1!==t.indexOf("/");var i=t.toUpperCase(),o=!0===a?n.indexOf(i):r.indexOf(i);if(-1!==o)return e.FileIndex[o];var s=!i.match(lle);for(i=i.replace(sle,""),s&&(i=i.replace(lle,"!")),o=0;o<n.length;++o){if((s?n[o].replace(lle,"!"):n[o]).replace(sle,"")==i)return e.FileIndex[o];if((s?r[o].replace(lle,"!"):r[o]).replace(sle,"")==i)return e.FileIndex[o]}return null},t.read=function(t,n){var r=n&&n.type;switch(r||Qse&&Buffer.isBuffer(t)&&(r="buffer"),r||"base64"){case"file":return function(t,n){return o(),s(e.readFileSync(t),n)}(t,n);case"base64":return s(rle(Jse(t)),n);case"binary":return s(rle(t),n)}return s(t,n)},t.parse=s,t.write=function(t,n){var r=p(t,n);switch(n&&n.type||"buffer"){case"file":return o(),e.writeFileSync(n.filename,r),r;case"binary":return"string"==typeof r?r:k(r);case"base64":return $se("string"==typeof r?r:k(r));case"buffer":if(Qse)return Buffer.isBuffer(r)?r:ele(r);case"array":return"string"==typeof r?rle(r):r}return r},t.writeFile=function(t,n,r){o();var a=p(t,r);e.writeFileSync(n,a)},t.utils={cfb_new:function(e){var t={};return h(t,e),t},cfb_add:ce,cfb_del:function(e,t){h(e);var n=nue.find(e,t);if(n)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==n)return e.FileIndex.splice(r,1),e.FullPaths.splice(r,1),!0;return!1},cfb_mov:function(e,t,n){h(e);var a=nue.find(e,t);if(a)for(var i=0;i<e.FileIndex.length;++i)if(e.FileIndex[i]==a)return e.FileIndex[i].name=r(n),e.FullPaths[i]=n,!0;return!1},cfb_gc:function(e){f(e,!0)},ReadShift:_ce,CheckField:Rce,prep_blob:Oce,bconcat:ole,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");m=e}catch(UK){console.error("cannot use native zlib: "+(UK.message||UK))}},_deflateRaw:X,_inflateRaw:te,consts:w},t}(),rue=void 0;function aue(e){return"string"===typeof e?ale(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function iue(e,t,n){if("undefined"!==typeof rue&&rue.writeFileSync)return n?rue.writeFileSync(e,t,n):rue.writeFileSync(e,t);if("undefined"!==typeof Deno){if(n&&"string"==typeof t)switch(n){case"utf8":t=new TextEncoder(n).encode(t);break;case"binary":t=ale(t);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(e,t)}var r="utf8"==n?Vue(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(r,e);if("undefined"!==typeof Blob){var a=new Blob([aue(r)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if("undefined"!==typeof saveAs)return saveAs(a,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout((function(){URL.revokeObjectURL(i)}),6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(null!=o.download)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout((function(){URL.revokeObjectURL(i)}),6e4),i}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var s=File(e);return s.open("w"),s.encoding="binary",Array.isArray(t)&&(t=ile(t)),s.write(t),s.close(),t}catch(UK){if(!UK.message||!UK.message.match(/onstruct/))throw UK}throw new Error("cannot save file "+e)}function oue(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function sue(e,t){for(var n=[],r=oue(e),a=0;a!==r.length;++a)null==n[e[r[a]][t]]&&(n[e[r[a]][t]]=r[a]);return n}function lue(e){for(var t=[],n=oue(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}function uue(e){for(var t=[],n=oue(e),r=0;r!==n.length;++r)t[e[n[r]]]=parseInt(n[r],10);return t}var cue=new Date(1899,11,30,0,0,0);function due(e,t){var n=e.getTime();return t&&(n-=1263168e5),(n-(cue.getTime()+6e4*(e.getTimezoneOffset()-cue.getTimezoneOffset())))/864e5}var hue=new Date,fue=cue.getTime()+6e4*(hue.getTimezoneOffset()-cue.getTimezoneOffset()),pue=hue.getTimezoneOffset();function mue(e){var t=new Date;return t.setTime(24*e*60*60*1e3+fue),t.getTimezoneOffset()!==pue&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-pue)),t}var vue=new Date("2017-02-19T19:06:09.000Z"),gue=isNaN(vue.getFullYear())?new Date("2/19/17"):vue,yue=2017==gue.getFullYear();function bue(e,t){var n=new Date(e);if(yue)return t>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):t<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(e instanceof Date)return e;if(1917==gue.getFullYear()&&!isNaN(n.getFullYear())){var r=n.getFullYear();return e.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-60*i.getTimezoneOffset()*1e3)),i}function xue(e,t){if(Qse&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return Vue(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return Vue(Hse(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return Vue(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return Vue(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,(function(e){return n[e]||e}))}catch(UK){}for(var r=[],a=0;a!=e.length;++a)r.push(String.fromCharCode(e[a]));return r.join("")}function wue(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=wue(e[n]));return t}function kue(e,t){for(var n="";n.length<t;)n+=e;return n}function Sue(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,(function(){return n*=100,""}));return isNaN(t=Number(r))?(r=r.replace(/[(](.*)[)]/,(function(e,t){return n=-n,t})),isNaN(t=Number(r))?t:t/n):t/n}var Tue=["january","february","march","april","may","june","july","august","september","october","november","december"];function Eue(e){var t=new Date(e),n=new Date(NaN),r=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return n;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==Tue.indexOf(o))return n}else if(o.match(/[a-z]/))return n;return r<0||r>8099?n:(a>0||i>1)&&101!=r?t:e.match(/[^-0-9:,\/\\]/)?n:t}function Cue(e,t,n){if(e.FullPaths){var r;if("string"==typeof n)return r=Qse?ele(n):function(e){for(var t=[],n=0,r=e.length+250,a=tle(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)a[n++]=o;else if(o<2048)a[n++]=192|o>>6&31,a[n++]=128|63&o;else if(o>=55296&&o<57344){o=64+(1023&o);var s=1023&e.charCodeAt(++i);a[n++]=240|o>>8&7,a[n++]=128|o>>2&63,a[n++]=128|s>>6&15|(3&o)<<4,a[n++]=128|63&s}else a[n++]=224|o>>12&15,a[n++]=128|o>>6&63,a[n++]=128|63&o;n>r&&(t.push(a.slice(0,n)),n=0,a=tle(65535),r=65530)}return t.push(a.slice(0,n)),ole(t)}(n),nue.utils.cfb_add(e,t,r);nue.utils.cfb_add(e,t,n)}else e.file(t,n)}function _ue(){return nue.utils.cfb_new()}var Mue='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var Aue={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Iue=lue(Aue),Nue=/[&<>'"]/g,Rue=/[\u0000-\u0008\u000b-\u001f]/g;function Oue(e){return(e+"").replace(Nue,(function(e){return Iue[e]})).replace(Rue,(function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"}))}function Due(e){return Oue(e).replace(/ /g,"_x0020_")}var Lue=/[\u0000-\u001f]/g;function Pue(e){return(e+"").replace(Nue,(function(e){return Iue[e]})).replace(/\n/g,"<br/>").replace(Lue,(function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"}))}function Fue(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function jue(e){for(var t="",n=0,r=0,a=0,i=0,o=0,s=0;n<e.length;)(r=e.charCodeAt(n++))<128?t+=String.fromCharCode(r):(a=e.charCodeAt(n++),r>191&&r<224?(o=(31&r)<<6,o|=63&a,t+=String.fromCharCode(o)):(i=e.charCodeAt(n++),r<240?t+=String.fromCharCode((15&r)<<12|(63&a)<<6|63&i):(s=((7&r)<<18|(63&a)<<12|(63&i)<<6|63&(o=e.charCodeAt(n++)))-65536,t+=String.fromCharCode(55296+(s>>>10&1023)),t+=String.fromCharCode(56320+(1023&s)))));return t}function zue(e){var t,n,r,a=tle(2*e.length),i=1,o=0,s=0;for(n=0;n<e.length;n+=i)i=1,(r=e.charCodeAt(n))<128?t=r:r<224?(t=64*(31&r)+(63&e.charCodeAt(n+1)),i=2):r<240?(t=4096*(15&r)+64*(63&e.charCodeAt(n+1))+(63&e.charCodeAt(n+2)),i=3):(i=4,t=262144*(7&r)+4096*(63&e.charCodeAt(n+1))+64*(63&e.charCodeAt(n+2))+(63&e.charCodeAt(n+3)),s=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==s&&(a[o++]=255&s,a[o++]=s>>>8,s=0),a[o++]=t%256,a[o++]=t>>>8;return a.slice(0,o).toString("ucs2")}function Bue(e){return ele(e,"binary").toString("utf8")}var Uue="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",Wue=Qse&&(Bue(Uue)==jue(Uue)&&Bue||zue(Uue)==jue(Uue)&&zue)||jue,Vue=Qse?function(e){return ele(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,a=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,a=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(63&a)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(63&r)))}return t.join("")},Zue=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map((function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]}));return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),r=0;r<e.length;++r)n=n.replace(e[r][0],e[r][1]);return n}}();var Hue=/(^\s|\s$|\n)/;function Gue(e,t){return"<"+e+(t.match(Hue)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function que(e){return oue(e).map((function(t){return" "+t+'="'+e[t]+'"'})).join("")}function Xue(e,t,n){return"<"+e+(null!=n?que(n):"")+(null!=t?(t.match(Hue)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Yue(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(UK){if(t)throw UK}return""}var Kue={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},$ue=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Jue={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};var Que=function(e){for(var t=[],n=0;n<e[0].length;++n)if(e[0][n])for(var r=0,a=e[0][n].length;r<a;r+=10240)t.push.apply(t,e[0][n].slice(r,r+10240));return t},ece=Qse?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map((function(e){return Buffer.isBuffer(e)?e:ele(e)}))):Que(e)}:Que,tce=function(e,t,n){for(var r=[],a=t;a<n;a+=2)r.push(String.fromCharCode(kce(e,a)));return r.join("").replace(sle,"")},nce=Qse?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(sle,""):tce(e,t,n)}:tce,rce=function(e,t,n){for(var r=[],a=t;a<t+n;++a)r.push(("0"+e[a].toString(16)).slice(-2));return r.join("")},ace=Qse?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):rce(e,t,n)}:rce,ice=function(e,t,n){for(var r=[],a=t;a<n;a++)r.push(String.fromCharCode(wce(e,a)));return r.join("")},oce=Qse?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):ice(e,t,n)}:ice,sce=function(e,t){var n=Tce(e,t);return n>0?oce(e,t+4,t+4+n-1):""},lce=sce,uce=function(e,t){var n=Tce(e,t);return n>0?oce(e,t+4,t+4+n-1):""},cce=uce,dce=function(e,t){var n=2*Tce(e,t);return n>0?oce(e,t+4,t+4+n-1):""},hce=dce,fce=function(e,t){var n=Tce(e,t);return n>0?nce(e,t+4,t+4+n):""},pce=fce,mce=function(e,t){var n=Tce(e,t);return n>0?oce(e,t+4,t+4+n):""},vce=mce,gce=function(e,t){return function(e,t){for(var n=1-2*(e[t+7]>>>7),r=((127&e[t+7])<<4)+(e[t+6]>>>4&15),a=15&e[t+6],i=5;i>=0;--i)a=256*a+e[t+i];return 2047==r?0==a?n*(1/0):NaN:(0==r?r=-1022:(r-=1023,a+=Math.pow(2,52)),n*Math.pow(2,r-52)*a)}(e,t)},yce=gce,bce=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function xce(){nce=function(e,t,n){return Gse.utils.decode(1200,e.slice(t,n)).replace(sle,"")},oce=function(e,t,n){return Gse.utils.decode(65001,e.slice(t,n))},lce=function(e,t){var n=Tce(e,t);return n>0?Gse.utils.decode(zse,e.slice(t+4,t+4+n-1)):""},cce=function(e,t){var n=Tce(e,t);return n>0?Gse.utils.decode(jse,e.slice(t+4,t+4+n-1)):""},hce=function(e,t){var n=2*Tce(e,t);return n>0?Gse.utils.decode(1200,e.slice(t+4,t+4+n-1)):""},pce=function(e,t){var n=Tce(e,t);return n>0?Gse.utils.decode(1200,e.slice(t+4,t+4+n)):""},vce=function(e,t){var n=Tce(e,t);return n>0?Gse.utils.decode(65001,e.slice(t+4,t+4+n)):""}}Qse&&(lce=function(e,t){if(!Buffer.isBuffer(e))return sce(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},cce=function(e,t){if(!Buffer.isBuffer(e))return uce(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},hce=function(e,t){if(!Buffer.isBuffer(e))return dce(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},pce=function(e,t){if(!Buffer.isBuffer(e))return fce(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},vce=function(e,t){if(!Buffer.isBuffer(e))return mce(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},yce=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):gce(e,t)},bce=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof Gse&&xce();var wce=function(e,t){return e[t]},kce=function(e,t){return 256*e[t+1]+e[t]},Sce=function(e,t){var n=256*e[t+1]+e[t];return n<32768?n:-1*(65535-n+1)},Tce=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Ece=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Cce=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function _ce(e,t){var n,r,a,i,o,s,l="",u=[];switch(t){case"dbcs":if(s=this.l,Qse&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(o=0;o<e;++o)l+=String.fromCharCode(kce(this,s)),s+=2;e*=2;break;case"utf8":l=oce(this,this.l,this.l+e);break;case"utf16le":e*=2,l=nce(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof Gse)return _ce.call(this,e,"dbcs");l=Gse.utils.decode(jse,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=lce(this,this.l),e=4+Tce(this,this.l);break;case"lpstr-cp":l=cce(this,this.l),e=4+Tce(this,this.l);break;case"lpwstr":l=hce(this,this.l),e=4+2*Tce(this,this.l);break;case"lpp4":e=4+Tce(this,this.l),l=pce(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+Tce(this,this.l),l=vce(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(a=wce(this,this.l+e++));)u.push(qse(a));l=u.join("");break;case"_wstr":for(e=0,l="";0!==(a=kce(this,this.l+e));)u.push(qse(a)),e+=2;e+=2,l=u.join("");break;case"dbcs-cont":for(l="",s=this.l,o=0;o<e;++o){if(this.lens&&-1!==this.lens.indexOf(s))return a=wce(this,s),this.l=s+1,i=_ce.call(this,e-o,a?"dbcs-cont":"sbcs-cont"),u.join("")+i;u.push(qse(kce(this,s))),s+=2}l=u.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof Gse){l=Gse.utils.decode(jse,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",s=this.l,o=0;o!=e;++o){if(this.lens&&-1!==this.lens.indexOf(s))return a=wce(this,s),this.l=s+1,i=_ce.call(this,e-o,a?"dbcs-cont":"sbcs-cont"),u.join("")+i;u.push(qse(wce(this,s))),s+=1}l=u.join("");break;default:switch(e){case 1:return n=wce(this,this.l),this.l++,n;case 2:return n=("i"===t?Sce:kce)(this,this.l),this.l+=2,n;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(n=(e>0?Ece:Cce)(this,this.l),this.l+=4,n):(r=Tce(this,this.l),this.l+=4,r);case 8:case-8:if("f"===t)return r=8==e?yce(this,this.l):yce([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:l=ace(this,this.l,e)}}return this.l+=e,l}var Mce=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},Ace=function(e,t,n){e[n]=255&t,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},Ice=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255};function Nce(e,t,n){var r=0,a=0;if("dbcs"===n){for(a=0;a!=t.length;++a)Ice(this,t.charCodeAt(a),this.l+2*a);r=2*t.length}else if("sbcs"===n){if("undefined"!==typeof Gse&&874==zse)for(a=0;a!=t.length;++a){var i=Gse.utils.encode(zse,t.charAt(a));this[this.l+a]=i[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=255&t.charCodeAt(a);r=t.length}else{if("hex"===n){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}if("utf16le"===n){var o=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var s=t.charCodeAt(a);this[this.l++]=255&s,this[this.l++]=s>>8}for(;this.l<o;)this[this.l++]=0;return this}switch(e){case 1:r=1,this[this.l]=255&t;break;case 2:r=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:r=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:r=4,Mce(this,t,this.l);break;case 8:if(r=8,"f"===n){!function(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,o=r?-t:t;isFinite(o)?0==o?a=i=0:(a=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var s=0;s<=5;++s,i/=256)e[n+s]=255&i;e[n+6]=(15&a)<<4|15&i,e[n+7]=a>>4|r}(this,t,this.l);break}case 16:break;case-4:r=4,Ace(this,t,this.l)}}return this.l+=r,this}function Rce(e,t){var n=ace(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function Oce(e,t){e.l=t,e.read_shift=_ce,e.chk=Rce,e.write_shift=Nce}function Dce(e,t){e.l+=t}function Lce(e){var t=tle(e);return Oce(t,0),t}function Pce(){var e=[],t=Qse?256:2048,n=function(e){var t=Lce(e);return Oce(t,0),t},r=n(t),a=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&e.push(r),r=null)},i=function(e){return r&&e<r.length-r.l?r:(a(),r=n(Math.max(e+1,t)))};return{next:i,push:function(e){a(),null==(r=e).l&&(r.l=r.length),i(t)},end:function(){return a(),ole(e)},_bufs:e}}function Fce(e,t,n,r){var a,i=+t;if(!isNaN(i)){r||(r=Jpe[i].p||(n||[]).length||0),a=1+(i>=128?1:0)+1,r>=128&&++a,r>=16384&&++a,r>=2097152&&++a;var o=e.next(a);i<=127?o.write_shift(1,i):(o.write_shift(1,128+(127&i)),o.write_shift(1,i>>7));for(var s=0;4!=s;++s){if(!(r>=128)){o.write_shift(1,r);break}o.write_shift(1,128+(127&r)),r>>=7}r>0&&bce(n)&&e.push(n)}}function jce(e,t,n){var r=wue(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function zce(e,t,n){var r=wue(e);return r.s=jce(r.s,t.s,n),r.e=jce(r.e,t.s,n),r}function Bce(e,t){if(e.cRel&&e.c<0)for(e=wue(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=wue(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=qce(e);return e.cRel||null==e.cRel||(n=n.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(n=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(n)),n}function Uce(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?Bce(e.s,t.biff)+":"+Bce(e.e,t.biff):(e.s.rRel?"":"$")+Vce(e.s.r)+":"+(e.e.rRel?"":"$")+Vce(e.e.r):(e.s.cRel?"":"$")+Hce(e.s.c)+":"+(e.e.cRel?"":"$")+Hce(e.e.c)}function Wce(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function Vce(e){return""+(e+1)}function Zce(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function Hce(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Gce(e){for(var t=0,n=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(n=26*n+(a-64))}return{c:n-1,r:t-1}}function qce(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function Xce(e){var t=e.indexOf(":");return-1==t?{s:Gce(e),e:Gce(e)}:{s:Gce(e.slice(0,t)),e:Gce(e.slice(t+1))}}function Yce(e,t){return"undefined"===typeof t||"number"===typeof t?Yce(e.s,e.e):("string"!==typeof e&&(e=qce(e)),"string"!==typeof t&&(t=qce(t)),e==t?e:e+":"+t)}function Kce(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,a=0,i=e.length;for(n=0;r<i&&!((a=e.charCodeAt(r)-64)<1||a>26);++r)n=26*n+a;for(t.s.c=--n,n=0;r<i&&!((a=e.charCodeAt(r)-48)<0||a>9);++r)n=10*n+a;if(t.s.r=--n,r===i||10!=a)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=i&&!((a=e.charCodeAt(r)-64)<1||a>26);++r)n=26*n+a;for(t.e.c=--n,n=0;r!=i&&!((a=e.charCodeAt(r)-48)<0||a>9);++r)n=10*n+a;return t.e.r=--n,t}function $ce(e,t){var n="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=Kle(e.z,n?due(t):t)}catch(UK){}try{return e.w=Kle((e.XF||{}).numFmtId||(n?14:0),n?due(t):t)}catch(UK){return""+t}}function Jce(e,t,n){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),"e"==e.t?Lde[e.v]||e.v:$ce(e,void 0==t?e.v:t))}function Qce(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function ede(e,t,n){var r=n||{},a=e?Array.isArray(e):r.dense;null!=Yse&&null==a&&(a=Yse);var i=e||(a?[]:{}),o=0,s=0;if(i&&null!=r.origin){if("number"==typeof r.origin)o=r.origin;else{var l="string"==typeof r.origin?Gce(r.origin):r.origin;o=l.r,s=l.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var c=Kce(i["!ref"]);u.s.c=c.s.c,u.s.r=c.s.r,u.e.c=Math.max(u.e.c,c.e.c),u.e.r=Math.max(u.e.r,c.e.r),-1==o&&(u.e.r=o=c.e.r+1)}for(var d=0;d!=t.length;++d)if(t[d]){if(!Array.isArray(t[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[d].length;++h)if("undefined"!==typeof t[d][h]){var f={v:t[d][h]},p=o+d,m=s+h;if(u.s.r>p&&(u.s.r=p),u.s.c>m&&(u.s.c=m),u.e.r<p&&(u.e.r=p),u.e.c<m&&(u.e.c=m),!t[d][h]||"object"!==typeof t[d][h]||Array.isArray(t[d][h])||t[d][h]instanceof Date)if(Array.isArray(f.v)&&(f.f=t[d][h][1],f.v=f.v[0]),null===f.v)if(f.f)f.t="n";else if(r.nullError)f.t="e",f.v=0;else{if(!r.sheetStubs)continue;f.t="z"}else"number"===typeof f.v?f.t="n":"boolean"===typeof f.v?f.t="b":f.v instanceof Date?(f.z=r.dateNF||yle[14],r.cellDates?(f.t="d",f.w=Kle(f.z,due(f.v))):(f.t="n",f.v=due(f.v),f.w=Kle(f.z,f.v))):f.t="s";else f=t[d][h];if(a)i[p]||(i[p]=[]),i[p][m]&&i[p][m].z&&(f.z=i[p][m].z),i[p][m]=f;else{var v=qce({c:m,r:p});i[v]&&i[v].z&&(f.z=i[v].z),i[v]=f}}}return u.s.c<1e7&&(i["!ref"]=Yce(u)),i}function tde(e,t){return ede(null,e,t)}function nde(e,t){return t||(t=Lce(4)),t.write_shift(4,e),t}function rde(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function ade(e,t){var n=!1;return null==t&&(n=!0,t=Lce(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}function ide(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function ode(e,t){var n=e.l,r=e.read_shift(1),a=rde(e),i=[],o={t:a,h:a};if(0!==(1&r)){for(var s=e.read_shift(4),l=0;l!=s;++l)i.push(ide(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=n+t,o}var sde=ode;function lde(e,t){var n=!1;return null==t&&(n=!0,t=Lce(23+4*e.t.length)),t.write_shift(1,1),ade(e.t,t),t.write_shift(4,1),function(e,t){t||(t=Lce(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),n?t.slice(0,t.l):t}function ude(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function cde(e,t){return null==t&&(t=Lce(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function dde(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function hde(e,t){return null==t&&(t=Lce(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var fde=rde,pde=ade;function mde(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function vde(e,t){var n=!1;return null==t&&(n=!0,t=Lce(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}var gde=rde,yde=mde,bde=vde;function xde(e){var t=e.slice(e.l,e.l+4),n=1&t[0],r=2&t[0];e.l+=4;var a=0===r?yce([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):Ece(t,0)>>2;return n?a/100:a}function wde(e,t){null==t&&(t=Lce(4));var n=0,r=0,a=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?r=1:a==(0|a)&&a>=-(1<<29)&&a<1<<29&&(r=1,n=1),!r)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((n?a:e)<<2)+(n+2))}function kde(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var Sde=kde,Tde=function(e,t){return t||(t=Lce(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function Ede(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Cde(e,t){return(t||Lce(8)).write_shift(8,e,"f")}function _de(e,t){if(t||(t=Lce(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var n=e.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),t.write_shift(2,n),e.rgb&&null==e.theme){var r=e.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var Mde=2,Ade=3,Ide=80,Nde={1:{n:"CodePage",t:Mde},2:{n:"Category",t:Ide},3:{n:"PresentationFormat",t:Ide},4:{n:"ByteCount",t:Ade},5:{n:"LineCount",t:Ade},6:{n:"ParagraphCount",t:Ade},7:{n:"SlideCount",t:Ade},8:{n:"NoteCount",t:Ade},9:{n:"HiddenCount",t:Ade},10:{n:"MultimediaClipCount",t:Ade},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:Ide},15:{n:"Company",t:Ide},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:Ade},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:Ade,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:Ide},27:{n:"ContentStatus",t:Ide},28:{n:"Language",t:Ide},29:{n:"Version",t:Ide},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},Rde={1:{n:"CodePage",t:Mde},2:{n:"Title",t:Ide},3:{n:"Subject",t:Ide},4:{n:"Author",t:Ide},5:{n:"Keywords",t:Ide},6:{n:"Comments",t:Ide},7:{n:"Template",t:Ide},8:{n:"LastAuthor",t:Ide},9:{n:"RevNumber",t:Ide},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:Ade},15:{n:"WordCount",t:Ade},16:{n:"CharCount",t:Ade},17:{n:"Thumbnail",t:71},18:{n:"Application",t:Ide},19:{n:"DocSecurity",t:Ade},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function Ode(e){return e.map((function(e){return[e>>16&255,e>>8&255,255&e]}))}var Dde=wue(Ode([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),Lde={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Pde={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Fde={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function jde(e,t){var n,r=function(e){for(var t=[],n=oue(e),r=0;r!==n.length;++r)null==t[e[n[r]]]&&(t[e[n[r]]]=[]),t[e[n[r]]].push(n[r]);return t}(Pde),a=[];a[a.length]=Mue,a[a.length]=Xue("Types",null,{xmlns:Kue.CT,"xmlns:xsd":Kue.xsd,"xmlns:xsi":Kue.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map((function(e){return Xue("Default",null,{Extension:e[0],ContentType:e[1]})})));var i=function(r){e[r]&&e[r].length>0&&(n=e[r][0],a[a.length]=Xue("Override",null,{PartName:("/"==n[0]?"":"/")+n,ContentType:Fde[r][t.bookType]||Fde[r].xlsx}))},o=function(n){(e[n]||[]).forEach((function(e){a[a.length]=Xue("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:Fde[n][t.bookType]||Fde[n].xlsx})}))},s=function(t){(e[t]||[]).forEach((function(e){a[a.length]=Xue("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:r[t][0]})}))};return i("workbooks"),o("sheets"),o("charts"),s("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(s),s("vba"),s("comments"),s("threadedcomments"),s("drawings"),o("metadata"),s("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var zde={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Bde(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Ude(e){var t=[Mue,Xue("Relationships",null,{xmlns:Kue.RELS})];return oue(e["!id"]).forEach((function(n){t[t.length]=Xue("Relationship",null,e["!id"][n])})),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Wde(e,t,n,r,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=r,a.Target=n,i?a.TargetMode=i:[zde.HLINK,zde.XPATH,zde.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function Vde(e,t,n){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function Zde(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Fse.version+"</meta:generator></office:meta></office:document-meta>"}var Hde=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Gde(e,t,n,r,a){null==a[e]&&null!=t&&""!==t&&(a[e]=t,t=Oue(t),r[r.length]=n?Xue(e,t,n):Gue(e,t))}function qde(e,t){var n=t||{},r=[Mue,Xue("cp:coreProperties",null,{"xmlns:cp":Kue.CORE_PROPS,"xmlns:dc":Kue.dc,"xmlns:dcterms":Kue.dcterms,"xmlns:dcmitype":Kue.dcmitype,"xmlns:xsi":Kue.xsi})],a={};if(!e&&!n.Props)return r.join("");e&&(null!=e.CreatedDate&&Gde("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:Yue(e.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,a),null!=e.ModifiedDate&&Gde("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:Yue(e.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,a));for(var i=0;i!=Hde.length;++i){var o=Hde[i],s=n.Props&&null!=n.Props[o[1]]?n.Props[o[1]]:e?e[o[1]]:null;!0===s?s="1":!1===s?s="0":"number"==typeof s&&(s=String(s)),null!=s&&Gde(o[0],s,null,r,a)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Xde=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Yde=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Kde(e){var t=[],n=Xue;return e||(e={}),e.Application="SheetJS",t[t.length]=Mue,t[t.length]=Xue("Properties",null,{xmlns:Kue.EXT_PROPS,"xmlns:vt":Kue.vt}),Xde.forEach((function(r){if(void 0!==e[r[1]]){var a;switch(r[2]){case"string":a=Oue(String(e[r[1]]));break;case"bool":a=e[r[1]]?"true":"false"}void 0!==a&&(t[t.length]=n(r[0],a))}})),t[t.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=n("TitlesOfParts",n("vt:vector",e.SheetNames.map((function(e){return"<vt:lpstr>"+Oue(e)+"</vt:lpstr>"})).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function $de(e){var t=[Mue,Xue("Properties",null,{xmlns:Kue.CUST_PROPS,"xmlns:vt":Kue.vt})];if(!e)return t.join("");var n=1;return oue(e).forEach((function(r){++n,t[t.length]=Xue("property",function(e,t){switch(typeof e){case"string":var n=Xue("vt:lpwstr",Oue(e));return t&&(n=n.replace(/&quot;/g,"_x0022_")),n;case"number":return Xue((0|e)==e?"vt:i4":"vt:r8",Oue(String(e)));case"boolean":return Xue("vt:bool",e?"true":"false")}if(e instanceof Date)return Xue("vt:filetime",Yue(e));throw new Error("Unable to serialize "+e)}(e[r],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:Oue(r)})})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Jde={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Qde(e,t){var n=Lce(4),r=Lce(4);switch(n.write_shift(4,80==e?31:e),e){case 3:r.write_shift(-4,t);break;case 5:(r=Lce(8)).write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,n=t%Math.pow(2,32),r=(t-n)/Math.pow(2,32);r*=1e7;var a=(n*=1e7)/Math.pow(2,32)|0;a>0&&(n%=Math.pow(2,32),r+=a);var i=Lce(8);return i.write_shift(4,n),i.write_shift(4,r),i}(t);break;case 31:case 80:for((r=Lce(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return ole([n,r])}var ehe=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function the(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function nhe(e,t,n){var r=Lce(8),a=[],i=[],o=8,s=0,l=Lce(8),u=Lce(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),i.push(l),a.push(u),o+=8+l.length,!t){(u=Lce(8)).write_shift(4,0),a.unshift(u);var c=[Lce(4)];for(c[0].write_shift(4,e.length),s=0;s<e.length;++s){var d=e[s][0];for((l=Lce(8+2*(d.length+1)+(d.length%2?0:2))).write_shift(4,s+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);c.push(l)}l=ole(c),i.unshift(l),o+=8+l.length}for(s=0;s<e.length;++s)if((!t||t[e[s][0]])&&!(ehe.indexOf(e[s][0])>-1||Yde.indexOf(e[s][0])>-1)&&null!=e[s][1]){var h=e[s][1],f=0;if(t){var p=n[f=+t[e[s][0]]];if("version"==p.p&&"string"==typeof h){var m=h.split(".");h=(+m[0]<<16)+(+m[1]||0)}l=Qde(p.t,h)}else{var v=the(h);-1==v&&(v=31,h=String(h)),l=Qde(v,h)}i.push(l),(u=Lce(8)).write_shift(4,t?f:2+s),a.push(u),o+=8+l.length}var g=8*(i.length+1);for(s=0;s<i.length;++s)a[s].write_shift(4,g),g+=i[s].length;return r.write_shift(4,o),r.write_shift(4,i.length),ole([r].concat(a).concat(i))}function rhe(e,t,n,r,a,i){var o=Lce(a?68:48),s=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,nue.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,a?68:48);var l=nhe(e,n,r);if(s.push(l),a){var u=nhe(a,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+l.length),s.push(u)}return ole(s)}function ahe(e,t){return 1===e.read_shift(t)}function ihe(e,t){return t||(t=Lce(2)),t.write_shift(2,+!!e),t}function ohe(e){return e.read_shift(2,"u")}function she(e,t){return t||(t=Lce(2)),t.write_shift(2,e),t}function lhe(e,t,n){return n||(n=Lce(2)),n.write_shift(1,"e"==t?+e:+!!e),n.write_shift(1,"e"==t?1:0),n}function uhe(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),a="sbcs-cont",i=jse;(n&&n.biff>=8&&(jse=1200),n&&8!=n.biff)?12==n.biff&&(a="wstr"):e.read_shift(1)&&(a="dbcs-cont");n.biff>=2&&n.biff<=5&&(a="cpstr");var o=r?e.read_shift(r,a):"";return jse=i,o}function che(e){var t=e.t||"",n=Lce(3);n.write_shift(2,t.length),n.write_shift(1,1);var r=Lce(2*t.length);return r.write_shift(2*t.length,t,"utf16le"),ole([n,r])}function dhe(e,t,n){if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function hhe(e,t,n){var r=e.read_shift(n&&2==n.biff?1:2);return 0===r?(e.l++,""):dhe(e,r,n)}function fhe(e,t,n){if(n.biff>5)return hhe(e,0,n);var r=e.read_shift(1);return 0===r?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function phe(e,t,n){return n||(n=Lce(3+2*e.length)),n.write_shift(2,e.length),n.write_shift(1,1),n.write_shift(31,e,"utf16le"),n}function mhe(e,t){t||(t=Lce(6+2*e.length)),t.write_shift(4,1+e.length);for(var n=0;n<e.length;++n)t.write_shift(2,e.charCodeAt(n));return t.write_shift(2,0),t}function vhe(e){var t=Lce(512),n=0,r=e.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var a=r.indexOf("#"),i=a>-1?31:23;switch(r.charAt(0)){case"#":i=28;break;case".":i&=-3}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(n=0;n<o.length;++n)t.write_shift(4,o[n]);if(28==i)mhe(r=r.slice(1),t);else if(2&i){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<o.length;++n)t.write_shift(1,parseInt(o[n],16));var s=a>-1?r.slice(0,a):r;for(t.write_shift(4,2*(s.length+1)),n=0;n<s.length;++n)t.write_shift(2,s.charCodeAt(n));t.write_shift(2,0),8&i&&mhe(a>-1?r.slice(a+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<o.length;++n)t.write_shift(1,parseInt(o[n],16));for(var l=0;"../"==r.slice(3*l,3*l+3)||"..\\"==r.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)t.write_shift(1,255&r.charCodeAt(n+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),n=0;n<6;++n)t.write_shift(4,0)}return t.slice(0,t.l)}function ghe(e,t,n,r){return r||(r=Lce(6)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,n||0),r}function yhe(e,t,n){var r=n.biff>8?4:2;return[e.read_shift(r),e.read_shift(r,"i"),e.read_shift(r,"i")]}function bhe(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:n}}}function xhe(e,t){return t||(t=Lce(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function whe(e,t,n){var r=1536,a=16;switch(n.bookType){case"biff8":case"xla":break;case"biff5":r=1280,a=8;break;case"biff4":r=4,a=6;break;case"biff3":r=3,a=6;break;case"biff2":r=2,a=4;break;default:throw new Error("unsupported BIFF version")}var i=Lce(a);return i.write_shift(2,r),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function khe(e,t){var n=!t||t.biff>=8?2:1,r=Lce(8+n*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(n*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=r.slice(0,r.l);return a.l=r.l,a}function She(e,t,n,r){var a=n&&5==n.biff;r||(r=Lce(a?3+t.length:5+2*t.length)),r.write_shift(2,e),r.write_shift(a?1:2,t.length),a||r.write_shift(1,1),r.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=r.length>r.l?r.slice(0,r.l):r;return null==i.l&&(i.l=i.length),i}function The(e,t,n,r){var a=n&&5==n.biff;r||(r=Lce(a?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),r.write_shift(4,i),r.write_shift(4,0),a||r.write_shift(4,0),r.write_shift(2,0),r}function Ehe(e,t,n){if(n.biff<8)return function(e,t,n){3==e[e.l+1]&&e[e.l]++;var r=uhe(e,0,n);return 3==r.charCodeAt(0)?r.slice(1):r}(e,0,n);for(var r=[],a=e.l+t,i=e.read_shift(n.biff>8?4:2);0!==i--;)r.push(yhe(e,n.biff,n));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return r}function Che(e){var t=Lce(24),n=Gce(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(r[a],16));return ole([t,vhe(e[1])])}function _he(e){var t=e[1].Tooltip,n=Lce(10+2*(t.length+1));n.write_shift(2,2048);var r=Gce(e[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var a=0;a<t.length;++a)n.write_shift(2,t.charCodeAt(a));return n.write_shift(2,0),n}function Mhe(e,t,n){if(!n.cellStyles)return Dce(e,t);var r=n&&n.biff>=12?4:2,a=e.read_shift(r),i=e.read_shift(r),o=e.read_shift(r),s=e.read_shift(r),l=e.read_shift(2);2==r&&(e.l+=2);var u={s:a,e:i,w:o,ixfe:s,flags:l};return(n.biff>=5||!n.biff)&&(u.level=l>>8&7),u}var Ahe=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=lue({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(t,n){var r=n||{};r.dateNF||(r.dateNF="yyyymmdd");var a=tde(function(t,n){var r=[],a=tle(1);switch(n.type){case"base64":a=rle(Jse(t));break;case"binary":a=rle(t);break;case"buffer":case"array":a=t}Oce(a,0);var i=a.read_shift(1),o=!!(136&i),s=!1,l=!1;switch(i){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:s=!0,o=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+i.toString(16))}var u=0,c=521;2==i&&(u=a.read_shift(2)),a.l+=3,2!=i&&(u=a.read_shift(4)),u>1048576&&(u=1e6),2!=i&&(c=a.read_shift(2));var d=a.read_shift(2),h=n.codepage||1252;2!=i&&(a.l+=16,a.read_shift(1),0!==a[a.l]&&(h=e[a[a.l]]),a.l+=1,a.l+=2),l&&(a.l+=36);for(var f=[],p={},m=Math.min(a.length,2==i?521:c-10-(s?264:0)),v=l?32:11;a.l<m&&13!=a[a.l];)switch((p={}).name=Gse.utils.decode(h,a.slice(a.l,a.l+v)).replace(/[\u0000\r\n].*$/g,""),a.l+=v,p.type=String.fromCharCode(a.read_shift(1)),2==i||l||(p.offset=a.read_shift(4)),p.len=a.read_shift(1),2==i&&(p.offset=a.read_shift(2)),p.dec=a.read_shift(1),p.name.length&&f.push(p),2!=i&&(a.l+=l?13:14),p.type){case"B":s&&8==p.len||!n.WTF||console.log("Skipping "+p.name+":"+p.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+p.name+":"+p.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+p.type)}if(13!==a[a.l]&&(a.l=c-1),13!==a.read_shift(1))throw new Error("DBF Terminator not found "+a.l+" "+a[a.l]);a.l=c;var g=0,y=0;for(r[0]=[],y=0;y!=f.length;++y)r[0][y]=f[y].name;for(;u-- >0;)if(42!==a[a.l])for(++a.l,r[++g]=[],y=0,y=0;y!=f.length;++y){var b=a.slice(a.l,a.l+f[y].len);a.l+=f[y].len,Oce(b,0);var x=Gse.utils.decode(h,b);switch(f[y].type){case"C":x.trim().length&&(r[g][y]=x.replace(/\s+$/,""));break;case"D":8===x.length?r[g][y]=new Date(+x.slice(0,4),+x.slice(4,6)-1,+x.slice(6,8)):r[g][y]=x;break;case"F":r[g][y]=parseFloat(x.trim());break;case"+":case"I":r[g][y]=l?2147483648^b.read_shift(-4,"i"):b.read_shift(4,"i");break;case"L":switch(x.trim().toUpperCase()){case"Y":case"T":r[g][y]=!0;break;case"N":case"F":r[g][y]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+x+"|")}break;case"M":if(!o)throw new Error("DBF Unexpected MEMO for type "+i.toString(16));r[g][y]="##MEMO##"+(l?parseInt(x.trim(),10):b.read_shift(4));break;case"N":(x=x.replace(/\u0000/g,"").trim())&&"."!=x&&(r[g][y]=+x||0);break;case"@":r[g][y]=new Date(b.read_shift(-8,"f")-621356832e5);break;case"T":r[g][y]=new Date(864e5*(b.read_shift(4)-2440588)+b.read_shift(4));break;case"Y":r[g][y]=b.read_shift(4,"i")/1e4+b.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":r[g][y]=-b.read_shift(-8,"f");break;case"B":if(s&&8==f[y].len){r[g][y]=b.read_shift(8,"f");break}case"G":case"P":b.l+=f[y].len;break;case"0":if("_NullFlags"===f[y].name)break;default:throw new Error("DBF Unsupported data type "+f[y].type)}}else a.l+=d;if(2!=i&&a.l<a.length&&26!=a[a.l++])throw new Error("DBF EOF Marker missing "+(a.l-1)+" of "+a.length+" "+a[a.l-1].toString(16));return n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),n.DBF=f,r}(t,r),r);return a["!cols"]=r.DBF.map((function(e){return{wch:e.len,DBF:e}})),delete r.DBF,a}var r={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return Qce(n(e,t),t)}catch(UK){if(t&&t.WTF)throw UK}return{SheetNames:[],Sheets:{}}},to_sheet:n,from_sheet:function(e,n){var a=n||{};if(+a.codepage>=0&&Vse(+a.codepage),"string"==a.type)throw new Error("Cannot write DBF to JS string");var i=Pce(),o=Kme(e,{header:1,raw:!0,cellDates:!0}),s=o[0],l=o.slice(1),u=e["!cols"]||[],c=0,d=0,h=0,f=1;for(c=0;c<s.length;++c)if(((u[c]||{}).DBF||{}).name)s[c]=u[c].DBF.name,++h;else if(null!=s[c]){if(++h,"number"===typeof s[c]&&(s[c]=s[c].toString(10)),"string"!==typeof s[c])throw new Error("DBF Invalid column name "+s[c]+" |"+typeof s[c]+"|");if(s.indexOf(s[c])!==c)for(d=0;d<1024;++d)if(-1==s.indexOf(s[c]+"_"+d)){s[c]+="_"+d;break}}var p=Kce(e["!ref"]),m=[],v=[],g=[];for(c=0;c<=p.e.c-p.s.c;++c){var y="",b="",x=0,w=[];for(d=0;d<l.length;++d)null!=l[d][c]&&w.push(l[d][c]);if(0!=w.length&&null!=s[c]){for(d=0;d<w.length;++d){switch(typeof w[d]){case"number":b="B";break;case"string":default:b="C";break;case"boolean":b="L";break;case"object":b=w[d]instanceof Date?"D":"C"}x=Math.max(x,String(w[d]).length),y=y&&y!=b?"C":b}x>250&&(x=250),"C"==(b=((u[c]||{}).DBF||{}).type)&&u[c].DBF.len>x&&(x=u[c].DBF.len),"B"==y&&"N"==b&&(y="N",g[c]=u[c].DBF.dec,x=u[c].DBF.len),v[c]="C"==y||"N"==b?x:r[y]||0,f+=v[c],m[c]=y}else m[c]="?"}var k=i.next(32);for(k.write_shift(4,318902576),k.write_shift(4,l.length),k.write_shift(2,296+32*h),k.write_shift(2,f),c=0;c<4;++c)k.write_shift(4,0);for(k.write_shift(4,0|(+t[zse]||3)<<8),c=0,d=0;c<s.length;++c)if(null!=s[c]){var S=i.next(32),T=(s[c].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);S.write_shift(1,T,"sbcs"),S.write_shift(1,"?"==m[c]?"C":m[c],"sbcs"),S.write_shift(4,d),S.write_shift(1,v[c]||r[m[c]]||0),S.write_shift(1,g[c]||0),S.write_shift(1,2),S.write_shift(4,0),S.write_shift(1,0),S.write_shift(4,0),S.write_shift(4,0),d+=v[c]||r[m[c]]||0}var E=i.next(264);for(E.write_shift(4,13),c=0;c<65;++c)E.write_shift(4,0);for(c=0;c<l.length;++c){var C=i.next(f);for(C.write_shift(1,0),d=0;d<s.length;++d)if(null!=s[d])switch(m[d]){case"L":C.write_shift(1,null==l[c][d]?63:l[c][d]?84:70);break;case"B":C.write_shift(8,l[c][d]||0,"f");break;case"N":var _="0";for("number"==typeof l[c][d]&&(_=l[c][d].toFixed(g[d]||0)),h=0;h<v[d]-_.length;++h)C.write_shift(1,32);C.write_shift(1,_,"sbcs");break;case"D":l[c][d]?(C.write_shift(4,("0000"+l[c][d].getFullYear()).slice(-4),"sbcs"),C.write_shift(2,("00"+(l[c][d].getMonth()+1)).slice(-2),"sbcs"),C.write_shift(2,("00"+l[c][d].getDate()).slice(-2),"sbcs")):C.write_shift(8,"00000000","sbcs");break;case"C":var M=String(null!=l[c][d]?l[c][d]:"").slice(0,v[d]);for(C.write_shift(1,M,"sbcs"),h=0;h<v[d]-M.length;++h)C.write_shift(1,32)}}return i.next(1).write_shift(1,26),i.end()}}}(),Ihe=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+oue(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(t,n){var r=e[n];return"number"==typeof r?Xse(r):r},r=function(e,t,n){var r=t.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==r?e:Xse(r)};function a(e,a){var i,o=e.split(/[\n\r]+/),s=-1,l=-1,u=0,c=0,d=[],h=[],f=null,p={},m=[],v=[],g=[],y=0;for(+a.codepage>=0&&Vse(+a.codepage);u!==o.length;++u){y=0;var b,x=o[u].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),w=x.replace(/;;/g,"\0").split(";").map((function(e){return e.replace(/\u0000/g,";")})),k=w[0];if(x.length>0)switch(k){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==w[1].charAt(0)&&h.push(x.slice(3).replace(/;;/g,";"));break;case"C":var S=!1,T=!1,E=!1,C=!1,_=-1,M=-1;for(c=1;c<w.length;++c)switch(w[c].charAt(0)){case"A":case"G":break;case"X":l=parseInt(w[c].slice(1))-1,T=!0;break;case"Y":for(s=parseInt(w[c].slice(1))-1,T||(l=0),i=d.length;i<=s;++i)d[i]=[];break;case"K":'"'===(b=w[c].slice(1)).charAt(0)?b=b.slice(1,b.length-1):"TRUE"===b?b=!0:"FALSE"===b?b=!1:isNaN(Sue(b))?isNaN(Eue(b).getDate())||(b=bue(b)):(b=Sue(b),null!==f&&Gle(f)&&(b=mue(b))),"undefined"!==typeof Gse&&"string"==typeof b&&"string"!=(a||{}).type&&(a||{}).codepage&&(b=Gse.utils.decode(a.codepage,b)),S=!0;break;case"E":C=!0;var A=kfe(w[c].slice(1),{r:s,c:l});d[s][l]=[d[s][l],A];break;case"S":E=!0,d[s][l]=[d[s][l],"S5S"];break;case"R":_=parseInt(w[c].slice(1))-1;break;case"C":M=parseInt(w[c].slice(1))-1;break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+x)}if(S&&(d[s][l]&&2==d[s][l].length?d[s][l][0]=b:d[s][l]=b,f=null),E){if(C)throw new Error("SYLK shared formula cannot have own formula");var I=_>-1&&d[_][M];if(!I||!I[1])throw new Error("SYLK shared formula cannot find base");d[s][l][1]=Efe(I[1],{r:s-_,c:l-M})}break;case"F":var N=0;for(c=1;c<w.length;++c)switch(w[c].charAt(0)){case"X":l=parseInt(w[c].slice(1))-1,++N;break;case"Y":for(s=parseInt(w[c].slice(1))-1,i=d.length;i<=s;++i)d[i]=[];break;case"M":y=parseInt(w[c].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":f=h[parseInt(w[c].slice(1))];break;case"W":for(g=w[c].slice(1).split(" "),i=parseInt(g[0],10);i<=parseInt(g[1],10);++i)y=parseInt(g[2],10),v[i-1]=0===y?{hidden:!0}:{wch:y},Xhe(v[i-1]);break;case"C":v[l=parseInt(w[c].slice(1))-1]||(v[l]={});break;case"R":m[s=parseInt(w[c].slice(1))-1]||(m[s]={}),y>0?(m[s].hpt=y,m[s].hpx=$he(y)):0===y&&(m[s].hidden=!0);break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+x)}N<1&&(f=null);break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+x)}}return m.length>0&&(p["!rows"]=m),v.length>0&&(p["!cols"]=v),a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),[d,p]}function i(e,t){var n=function(e,t){switch(t.type){case"base64":return a(Jse(e),t);case"binary":return a(e,t);case"buffer":return a(Qse&&Buffer.isBuffer(e)?e.toString("binary"):ile(e),t);case"array":return a(xue(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),r=n[0],i=n[1],o=tde(r,t);return oue(i).forEach((function(e){o[e]=i[e]})),o}function o(e,t,n,r){var a="C;Y"+(n+1)+";X"+(r+1)+";K";switch(e.t){case"n":a+=e.v||0,e.f&&!e.F&&(a+=";E"+Tfe(e.f,{r:n,c:r}));break;case"b":a+=e.v?"TRUE":"FALSE";break;case"e":a+=e.w||e.v;break;case"d":a+='"'+(e.w||e.v)+'"';break;case"s":a+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return a}return e["|"]=254,{to_workbook:function(e,t){return Qce(i(e,t),t)},to_sheet:i,from_sheet:function(e,t){var n,r,a=["ID;PWXL;N;E"],i=[],s=Kce(e["!ref"]),l=Array.isArray(e),u="\r\n";a.push("P;PGeneral"),a.push("F;P0;DG0G8;M255"),e["!cols"]&&(r=a,e["!cols"].forEach((function(e,t){var n="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?n+="0":("number"!=typeof e.width||e.wpx||(e.wpx=Hhe(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=Ghe(e.wpx)),"number"==typeof e.wch&&(n+=Math.round(e.wch)))," "!=n.charAt(n.length-1)&&r.push(n)}))),e["!rows"]&&function(e,t){t.forEach((function(t,n){var r="F;";t.hidden?r+="M0;":t.hpt?r+="M"+20*t.hpt+";":t.hpx&&(r+="M"+20*Khe(t.hpx)+";"),r.length>2&&e.push(r+"R"+(n+1))}))}(a,e["!rows"]),a.push("B;Y"+(s.e.r-s.s.r+1)+";X"+(s.e.c-s.s.c+1)+";D"+[s.s.c,s.s.r,s.e.c,s.e.r].join(" "));for(var c=s.s.r;c<=s.e.r;++c)for(var d=s.s.c;d<=s.e.c;++d){var h=qce({r:c,c:d});(n=l?(e[c]||[])[d]:e[h])&&(null!=n.v||n.f&&!n.F)&&i.push(o(n,0,c,d))}return a.join(u)+u+i.join(u)+u+"E"+u}}}(),Nhe=function(){function e(e,t){for(var n=e.split("\n"),r=-1,a=-1,i=0,o=[];i!==n.length;++i)if("BOT"!==n[i].trim()){if(!(r<0)){for(var s=n[i].trim().split(","),l=s[0],u=s[1],c=n[++i]||"";1&(c.match(/["]/g)||[]).length&&i<n.length-1;)c+="\n"+n[++i];switch(c=c.trim(),+l){case-1:if("BOT"===c){o[++r]=[],a=0;continue}if("EOD"!==c)throw new Error("Unrecognized DIF special command "+c);break;case 0:"TRUE"===c?o[r][a]=!0:"FALSE"===c?o[r][a]=!1:isNaN(Sue(u))?isNaN(Eue(u).getDate())?o[r][a]=u:o[r][a]=bue(u):o[r][a]=Sue(u),++a;break;case 1:(c=(c=c.slice(1,c.length-1)).replace(/""/g,'"'))&&c.match(/^=".*"$/)&&(c=c.slice(2,-1)),o[r][a++]=""!==c?c:null}if("EOD"===c)break}}else o[++r]=[],a=0;return t&&t.sheetRows&&(o=o.slice(0,t.sheetRows)),o}function t(t,n){return tde(function(t,n){switch(n.type){case"base64":return e(Jse(t),n);case"binary":return e(t,n);case"buffer":return e(Qse&&Buffer.isBuffer(t)?t.toString("binary"):ile(t),n);case"array":return e(xue(t),n)}throw new Error("Unrecognized type "+n.type)}(t,n),n)}var n=function(){var e=function(e,t,n,r,a){e.push(t),e.push(n+","+r),e.push('"'+a.replace(/"/g,'""')+'"')},t=function(e,t,n,r){e.push(t+","+n),e.push(1==t?'"'+r.replace(/"/g,'""')+'"':r)};return function(n){var r,a=[],i=Kce(n["!ref"]),o=Array.isArray(n);e(a,"TABLE",0,1,"sheetjs"),e(a,"VECTORS",0,i.e.r-i.s.r+1,""),e(a,"TUPLES",0,i.e.c-i.s.c+1,""),e(a,"DATA",0,0,"");for(var s=i.s.r;s<=i.e.r;++s){t(a,-1,0,"BOT");for(var l=i.s.c;l<=i.e.c;++l){var u=qce({r:s,c:l});if(r=o?(n[s]||[])[l]:n[u])switch(r.t){case"n":var c=r.w;c||null==r.v||(c=r.v),null==c?r.f&&!r.F?t(a,1,0,"="+r.f):t(a,1,0,""):t(a,0,c,"V");break;case"b":t(a,0,r.v?1:0,r.v?"TRUE":"FALSE");break;case"s":t(a,1,0,isNaN(r.v)?r.v:'="'+r.v+'"');break;case"d":r.w||(r.w=Kle(r.z||yle[14],due(bue(r.v)))),t(a,0,r.w,"V");break;default:t(a,1,0,"")}else t(a,1,0,"")}}t(a,-1,0,"EOD");return a.join("\r\n")}}();return{to_workbook:function(e,n){return Qce(t(e,n),n)},to_sheet:t,from_sheet:n}}(),Rhe=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(t,n){return tde(function(t,n){for(var r=t.split("\n"),a=-1,i=-1,o=0,s=[];o!==r.length;++o){var l=r[o].trim().split(":");if("cell"===l[0]){var u=Gce(l[1]);if(s.length<=u.r)for(a=s.length;a<=u.r;++a)s[a]||(s[a]=[]);switch(a=u.r,i=u.c,l[2]){case"t":s[a][i]=e(l[3]);break;case"v":s[a][i]=+l[3];break;case"vtf":var c=l[l.length-1];case"vtc":"nl"===l[3]?s[a][i]=!!+l[4]:s[a][i]=+l[4],"vtf"==l[2]&&(s[a][i]=[s[a][i],c])}}}return n&&n.sheetRows&&(s=s.slice(0,n.sheetRows)),s}(t,n),n)}var r=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",i=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),o="--SocialCalcSpreadsheetControlSave--";function s(e){if(!e||!e["!ref"])return"";for(var n,r=[],a=[],i="",o=Xce(e["!ref"]),s=Array.isArray(e),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u)if(i=qce({r:l,c:u}),(n=s?(e[l]||[])[u]:e[i])&&null!=n.v&&"z"!==n.t){switch(a=["cell",i,"t"],n.t){case"s":case"str":a.push(t(n.v));break;case"n":n.f?(a[2]="vtf",a[3]="n",a[4]=n.v,a[5]=t(n.f)):(a[2]="v",a[3]=n.v);break;case"b":a[2]="vt"+(n.f?"f":"c"),a[3]="nl",a[4]=n.v?"1":"0",a[5]=t(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var c=due(bue(n.v));a[2]="vtc",a[3]="nd",a[4]=""+c,a[5]=n.w||Kle(n.z||yle[14],c);break;case"e":continue}r.push(a.join(":"))}return r.push("sheet:c:"+(o.e.c-o.s.c+1)+":r:"+(o.e.r-o.s.r+1)+":tvf:1"),r.push("valueformat:1:text-wiki"),r.join("\n")}return{to_workbook:function(e,t){return Qce(n(e,t),t)},to_sheet:n,from_sheet:function(e){return[r,a,i,a,s(e),o].join("\n")}}}(),Ohe=function(){function e(e,t,n,r,a){a.raw?t[n][r]=e:""===e||("TRUE"===e?t[n][r]=!0:"FALSE"===e?t[n][r]=!1:isNaN(Sue(e))?isNaN(Eue(e).getDate())?t[n][r]=e:t[n][r]=bue(e):t[n][r]=Sue(e))}var t={44:",",9:"\t",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function r(e){for(var r={},a=!1,i=0,o=0;i<e.length;++i)34==(o=e.charCodeAt(i))?a=!a:!a&&o in t&&(r[o]=(r[o]||0)+1);for(i in o=[],r)Object.prototype.hasOwnProperty.call(r,i)&&o.push([r[i],i]);if(!o.length)for(i in r=n)Object.prototype.hasOwnProperty.call(r,i)&&o.push([r[i],i]);return o.sort((function(e,t){return e[0]-t[0]||n[e[1]]-n[t[1]]})),t[o.pop()[1]]||44}function a(e,t){var n=t||{},a="";null!=Yse&&null==n.dense&&(n.dense=Yse);var i=n.dense?[]:{},o={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(a=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(a=e.charAt(4),e=e.slice(6)):a=r(e.slice(0,1024)):a=n&&n.FS?n.FS:r(e.slice(0,1024));var s=0,l=0,u=0,c=0,d=0,h=a.charCodeAt(0),f=!1,p=0,m=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var v=null!=n.dateNF?function(e){var t="number"==typeof e?yle[e]:e;return t=t.replace(eue,"(\\d+)"),new RegExp("^"+t+"$")}(n.dateNF):null;function g(){var t=e.slice(c,d),r={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)r.t="z";else if(n.raw)r.t="s",r.v=t;else if(0===t.trim().length)r.t="s",r.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(r.t="s",r.v=t.slice(2,-1).replace(/""/g,'"')):!function(e){return 1!=e.length}(t)?(r.t="s",r.v=t):(r.t="n",r.f=t.slice(1));else if("TRUE"==t)r.t="b",r.v=!0;else if("FALSE"==t)r.t="b",r.v=!1;else if(isNaN(u=Sue(t)))if(!isNaN(Eue(t).getDate())||v&&t.match(v)){r.z=n.dateNF||yle[14];var a=0;v&&t.match(v)&&(t=function(e,t,n){var r=-1,a=-1,i=-1,o=-1,s=-1,l=-1;(t.match(eue)||[]).forEach((function(e,t){var u=parseInt(n[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":r=u;break;case"d":i=u;break;case"h":o=u;break;case"s":l=u;break;case"m":o>=0?s=u:a=u}})),l>=0&&-1==s&&a>=0&&(s=a,a=-1);var u=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);7==u.length&&(u="0"+u),8==u.length&&(u="20"+u);var c=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==o&&-1==s&&-1==l?u:-1==r&&-1==a&&-1==i?c:u+"T"+c}(0,n.dateNF,t.match(v)||[]),a=1),n.cellDates?(r.t="d",r.v=bue(t,a)):(r.t="n",r.v=due(bue(t,a))),!1!==n.cellText&&(r.w=Kle(r.z,r.v instanceof Date?due(r.v):r.v)),n.cellNF||delete r.z}else r.t="s",r.v=t;else r.t="n",!1!==n.cellText&&(r.w=t),r.v=u;if("z"==r.t||(n.dense?(i[s]||(i[s]=[]),i[s][l]=r):i[qce({c:l,r:s})]=r),c=d+1,m=e.charCodeAt(c),o.e.c<l&&(o.e.c=l),o.e.r<s&&(o.e.r=s),p==h)++l;else if(l=0,++s,n.sheetRows&&n.sheetRows<=s)return!0}e:for(;d<e.length;++d)switch(p=e.charCodeAt(d)){case 34:34===m&&(f=!f);break;case h:case 10:case 13:if(!f&&g())break e}return d-c>0&&g(),i["!ref"]=Yce(o),i}function i(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?a(t,n):tde(function(t,n){var r=n||{},a=[];if(!t||0===t.length)return a;for(var i=t.split(/[\r\n]/),o=i.length-1;o>=0&&0===i[o].length;)--o;for(var s=10,l=0,u=0;u<=o;++u)-1==(l=i[u].indexOf(" "))?l=i[u].length:l++,s=Math.max(s,l);for(u=0;u<=o;++u){a[u]=[];var c=0;for(e(i[u].slice(0,s).trim(),a,u,c,r),c=1;c<=(i[u].length-s)/10+1;++c)e(i[u].slice(s+10*(c-1),s+10*c).trim(),a,u,c,r)}return r.sheetRows&&(a=a.slice(0,r.sheetRows)),a}(t,n),n):a(t,n)}function o(e,t){var n="",r="string"==t.type?[0,0,0,0]:Ume(e,t);switch(t.type){case"base64":n=Jse(e);break;case"binary":case"string":n=e;break;case"buffer":n=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof Gse?Gse.utils.decode(t.codepage,e):Qse&&Buffer.isBuffer(e)?e.toString("binary"):ile(e);break;case"array":n=xue(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]?n=Wue(n.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?n=Wue(n):"binary"==t.type&&"undefined"!==typeof Gse&&t.codepage&&(n=Gse.utils.decode(t.codepage,Gse.utils.encode(28591,n))),"socialcalc:version:"==n.slice(0,19)?Rhe.to_sheet("string"==t.type?n:Wue(n),t):i(n,t)}return{to_workbook:function(e,t){return Qce(o(e,t),t)},to_sheet:o,from_sheet:function(e){for(var t,n=[],r=Kce(e["!ref"]),a=Array.isArray(e),i=r.s.r;i<=r.e.r;++i){for(var o=[],s=r.s.c;s<=r.e.c;++s){var l=qce({r:i,c:s});if((t=a?(e[i]||[])[s]:e[l])&&null!=t.v){for(var u=(t.w||(Jce(t),t.w)||"").slice(0,10);u.length<10;)u+=" ";o.push(u+(0===s?" ":""))}else o.push("          ")}n.push(o.join(""))}return n.join("\n")}}}();var Dhe=function(){function e(e,t,n){if(e){Oce(e,e.l||0);for(var r=n.Enum||g;e.l<e.length;){var a=e.read_shift(2),i=r[a]||r[65535],o=e.read_shift(2),s=e.l+o,l=i.f&&i.f(e,o,n);if(e.l=s,t(l,i,a))return}}}function t(t,n){if(!t)return t;var r=n||{};null!=Yse&&null==r.dense&&(r.dense=Yse);var a=r.dense?[]:{},i="Sheet1",o="",s=0,l={},u=[],c=[],d={s:{r:0,c:0},e:{r:0,c:0}},h=r.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])r.Enum=g,e(t,(function(e,t,n){switch(n){case 0:r.vers=e,e>=4096&&(r.qpro=!0);break;case 6:d=e;break;case 204:e&&(o=e);break;case 222:o=e;break;case 15:case 51:r.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==n&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=r.dateNF||yle[14],r.cellDates&&(e[1].t="d",e[1].v=mue(e[1].v))),r.qpro&&e[3]>s&&(a["!ref"]=Yce(d),l[i]=a,u.push(i),a=r.dense?[]:{},d={s:{r:0,c:0},e:{r:0,c:0}},s=e[3],i=o||"Sheet"+(s+1),o="");var c=r.dense?(a[e[0].r]||[])[e[0].c]:a[qce(e[0])];if(c){c.t=e[1].t,c.v=e[1].v,null!=e[1].z&&(c.z=e[1].z),null!=e[1].f&&(c.f=e[1].f);break}r.dense?(a[e[0].r]||(a[e[0].r]=[]),a[e[0].r][e[0].c]=e[1]):a[qce(e[0])]=e[1]}}),r);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);r.Enum=y,14==t[2]&&(r.qpro=!0,t.l=0),e(t,(function(e,t,n){switch(n){case 204:i=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>s&&(a["!ref"]=Yce(d),l[i]=a,u.push(i),a=r.dense?[]:{},d={s:{r:0,c:0},e:{r:0,c:0}},s=e[3],i="Sheet"+(s+1)),h>0&&e[0].r>=h)break;r.dense?(a[e[0].r]||(a[e[0].r]=[]),a[e[0].r][e[0].c]=e[1]):a[qce(e[0])]=e[1],d.e.c<e[0].c&&(d.e.c=e[0].c),d.e.r<e[0].r&&(d.e.r=e[0].r);break;case 27:e[14e3]&&(c[e[14e3][0]]=e[14e3][1]);break;case 1537:c[e[0]]=e[1],e[0]==s&&(i=e[1])}}),r)}if(a["!ref"]=Yce(d),l[o||i]=a,u.push(o||i),!c.length)return{SheetNames:u,Sheets:l};for(var f={},p=[],m=0;m<c.length;++m)l[u[m]]?(p.push(c[m]||u[m]),f[c[m]]=l[c[m]]||l[u[m]]):(p.push(c[m]),f[c[m]]={"!ref":"A1"});return{SheetNames:p,Sheets:f}}function n(e,t,n){var r=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(r[0].c=e.read_shift(1),r[3]=e.read_shift(1),r[0].r=e.read_shift(2),e.l+=2):(r[2]=e.read_shift(1),r[0].c=e.read_shift(2),r[0].r=e.read_shift(2)),r}function r(e,t,r){var a=e.l+t,i=n(e,0,r);if(i[1].t="s",20768==r.vers){e.l++;var o=e.read_shift(1);return i[1].v=e.read_shift(o,"utf8"),i}return r.qpro&&e.l++,i[1].v=e.read_shift(a-e.l,"cstr"),i}function a(e,t,n){var r=Lce(7+n.length);r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(1,39);for(var a=0;a<r.length;++a){var i=n.charCodeAt(a);r.write_shift(1,i>=128?95:i)}return r.write_shift(1,0),r}function i(e,t,n){var r=Lce(7);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n,"i"),r}function o(e,t,n){var r=Lce(13);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(8,n,"f"),r}function s(e,t,n){var r=32768&t;return t=(r?e:0)+((t&=-32769)>=8192?t-16384:t),(r?"":"$")+(n?Hce(t):Vce(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},u=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function c(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function d(e,t,n,r){var a=Lce(6+r.length);a.write_shift(2,e),a.write_shift(1,n),a.write_shift(1,t),a.write_shift(1,39);for(var i=0;i<r.length;++i){var o=r.charCodeAt(i);a.write_shift(1,o>=128?95:o)}return a.write_shift(1,0),a}function h(e,t){var n=c(e),r=e.read_shift(4),a=e.read_shift(4),i=e.read_shift(2);if(65535==i)return 0===r&&3221225472===a?(n[1].t="e",n[1].v=15):0===r&&3489660928===a?(n[1].t="e",n[1].v=42):n[1].v=0,n;var o=32768&i;return i=(32767&i)-16446,n[1].v=(1-2*o)*(a*Math.pow(2,i+32)+r*Math.pow(2,i)),n}function f(e,t,n,r){var a=Lce(14);if(a.write_shift(2,e),a.write_shift(1,n),a.write_shift(1,t),0==r)return a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,65535),a;var i,o=0,s=0,l=0;return r<0&&(o=1,r=-r),s=0|Math.log2(r),0==(2147483648&(l=(r/=Math.pow(2,s-31))>>>0))&&(++s,l=(r/=2)>>>0),r-=l,l|=2147483648,l>>>=0,i=(r*=Math.pow(2,32))>>>0,a.write_shift(4,i),a.write_shift(4,l),s+=16383+(o?32768:0),a.write_shift(2,s),a}function p(e,t){var n=c(e),r=e.read_shift(8,"f");return n[1].v=r,n}function m(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function v(e,t){var n=Lce(5+e.length);n.write_shift(2,14e3),n.write_shift(2,t);for(var r=0;r<e.length;++r){var a=e.charCodeAt(r);n[n.l++]=a>127?95:a}return n[n.l++]=0,n}var g={0:{n:"BOF",f:ohe},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,n){var r={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&n.qpro?(r.s.c=e.read_shift(1),e.l++,r.s.r=e.read_shift(2),r.e.c=e.read_shift(1),e.l++,r.e.r=e.read_shift(2),r):(r.s.c=e.read_shift(2),r.s.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),r.e.c=e.read_shift(2),r.e.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),65535==r.s.c&&(r.s.c=r.e.c=r.s.r=r.e.r=0),r)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,r){var a=n(e,0,r);return a[1].v=e.read_shift(2,"i"),a}},14:{n:"NUMBER",f:function(e,t,r){var a=n(e,0,r);return a[1].v=e.read_shift(8,"f"),a}},15:{n:"LABEL",f:r},16:{n:"FORMULA",f:function(e,t,r){var a=e.l+t,i=n(e,0,r);if(i[1].v=e.read_shift(8,"f"),r.qpro)e.l=a;else{var o=e.read_shift(2);!function(e,t){Oce(e,0);var n=[],r=0,a="",i="",o="",c="";for(;e.l<e.length;){var d=e[e.l++];switch(d){case 0:n.push(e.read_shift(8,"f"));break;case 1:i=s(t[0].c,e.read_shift(2),!0),a=s(t[0].r,e.read_shift(2),!1),n.push(i+a);break;case 2:var h=s(t[0].c,e.read_shift(2),!0),f=s(t[0].r,e.read_shift(2),!1);i=s(t[0].c,e.read_shift(2),!0),a=s(t[0].r,e.read_shift(2),!1),n.push(h+f+":"+i+a);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(e.read_shift(2));break;case 6:for(var p="";d=e[e.l++];)p+=String.fromCharCode(d);n.push('"'+p.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:c=n.pop(),o=n.pop(),n.push(["AND","OR"][d-20]+"("+o+","+c+")");break;default:if(d<32&&u[d])c=n.pop(),o=n.pop(),n.push(o+u[d]+c);else{if(!l[d])return d<=7?console.error("WK1 invalid opcode "+d.toString(16)):d<=24?console.error("WK1 unsupported op "+d.toString(16)):d<=30?console.error("WK1 invalid opcode "+d.toString(16)):d<=115?console.error("WK1 unsupported function opcode "+d.toString(16)):console.error("WK1 unrecognized opcode "+d.toString(16));if(69==(r=l[d][1])&&(r=e[e.l++]),r>n.length)return void console.error("WK1 bad formula parse 0x"+d.toString(16)+":|"+n.join("|")+"|");var m=n.slice(-r);n.length-=r,n.push(l[d][0]+"("+m.join(",")+")")}}}1==n.length?t[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}(e.slice(e.l,e.l+o),i),e.l+=o}return i}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:r},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:m},222:{n:"SHEETNAMELP",f:function(e,t){var n=e[e.l++];n>t-1&&(n=t-1);for(var r="";r.length<n;)r+=String.fromCharCode(e[e.l++]);return r}},65535:{n:""}},y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var n=c(e);return n[1].t="s",n[1].v=e.read_shift(t-4,"cstr"),n}},23:{n:"NUMBER17",f:h},24:{n:"NUMBER18",f:function(e,t){var n=c(e);n[1].v=e.read_shift(2);var r=n[1].v>>1;if(1&n[1].v)switch(7&r){case 0:r=5e3*(r>>3);break;case 1:r=500*(r>>3);break;case 2:r=(r>>3)/20;break;case 3:r=(r>>3)/200;break;case 4:r=(r>>3)/2e3;break;case 5:r=(r>>3)/2e4;break;case 6:r=(r>>3)/16;break;case 7:r=(r>>3)/64}return n[1].v=r,n}},25:{n:"FORMULA19",f:function(e,t){var n=h(e);return e.l+=t-14,n}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var n={},r=e.l+t;e.l<r;){var a=e.read_shift(2);if(14e3==a){for(n[a]=[0,""],n[a][0]=e.read_shift(2);e[e.l];)n[a][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return n}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var n=c(e),r=e.read_shift(4);return n[1].v=r>>6,n}},38:{n:"??"},39:{n:"NUMBER27",f:p},40:{n:"FORMULA28",f:function(e,t){var n=p(e);return e.l+=t-10,n}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:m},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,n){if(n.qpro&&!(t<21)){var r=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[r,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var n=t||{};if(+n.codepage>=0&&Vse(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var r=Pce(),s=Kce(e["!ref"]),l=Array.isArray(e),u=[];Qpe(r,0,function(e){var t=Lce(2);return t.write_shift(2,e),t}(1030)),Qpe(r,6,function(e){var t=Lce(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(s));for(var c=Math.min(s.e.r,8191),d=s.s.r;d<=c;++d)for(var h=Vce(d),f=s.s.c;f<=s.e.c;++f){d===s.s.r&&(u[f]=Hce(f));var p=u[f]+h,m=l?(e[d]||[])[f]:e[p];if(m&&"z"!=m.t)if("n"==m.t)(0|m.v)==m.v&&m.v>=-32768&&m.v<=32767?Qpe(r,13,i(d,f,m.v)):Qpe(r,14,o(d,f,m.v));else Qpe(r,15,a(d,f,Jce(m).slice(0,239)))}return Qpe(r,1),r.end()},book_to_wk3:function(e,t){var n=t||{};if(+n.codepage>=0&&Vse(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var r=Pce();Qpe(r,0,function(e){var t=Lce(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var n=0,r=0,a=0,i=0;i<e.SheetNames.length;++i){var o=e.SheetNames[i],s=e.Sheets[o];if(s&&s["!ref"]){++a;var l=Xce(s["!ref"]);n<l.e.r&&(n=l.e.r),r<l.e.c&&(r=l.e.c)}}n>8191&&(n=8191);return t.write_shift(2,n),t.write_shift(1,a),t.write_shift(1,r),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var a=0,i=0;a<e.SheetNames.length;++a)(e.Sheets[e.SheetNames[a]]||{})["!ref"]&&Qpe(r,27,v(e.SheetNames[a],i++));var o=0;for(a=0;a<e.SheetNames.length;++a){var s=e.Sheets[e.SheetNames[a]];if(s&&s["!ref"]){for(var l=Kce(s["!ref"]),u=Array.isArray(s),c=[],h=Math.min(l.e.r,8191),p=l.s.r;p<=h;++p)for(var m=Vce(p),g=l.s.c;g<=l.e.c;++g){p===l.s.r&&(c[g]=Hce(g));var y=c[g]+m,b=u?(s[p]||[])[g]:s[y];if(b&&"z"!=b.t)if("n"==b.t)Qpe(r,23,f(p,g,o,b.v));else Qpe(r,22,d(p,g,o,Jce(b).slice(0,239)))}++o}}return Qpe(r,1),r.end()},to_workbook:function(e,n){switch(n.type){case"base64":return t(rle(Jse(e)),n);case"binary":return t(rle(e),n);case"buffer":case"array":return t(e,n)}throw"Unsupported type "+n.type}}}();var Lhe=/^\s|\s$|[\t\n\r]/;function Phe(e,t){if(!t.bookSST)return"";var n=[Mue];n[n.length]=Xue("sst",null,{xmlns:$ue[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(null!=e[r]){var a=e[r],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(Lhe)&&(i+=' xml:space="preserve"'),i+=">"+Oue(a.t)+"</t>"),i+="</si>",n[n.length]=i}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}var Fhe=function(e,t){var n=!1;return null==t&&(n=!0,t=Lce(15+4*e.t.length)),t.write_shift(1,0),ade(e.t,t),n?t.slice(0,t.l):t};function jhe(e){var t=Pce();Fce(t,159,function(e,t){return t||(t=Lce(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var n=0;n<e.length;++n)Fce(t,19,Fhe(e[n]));return Fce(t,160),t.end()}function zhe(e){if("undefined"!==typeof Gse)return Gse.utils.encode(zse,e);for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}function Bhe(e){var t,n,r=0,a=zhe(e),i=a.length+1;for((t=tle(i))[0]=a.length,n=1;n!=i;++n)t[n]=a[n-1];for(n=i-1;n>=0;--n)r=((0===(16384&r)?0:1)|r<<1&32767)^t[n];return 52811^r}var Uhe=function(){function e(e,n){switch(n.type){case"base64":return t(Jse(e),n);case"binary":return t(e,n);case"buffer":return t(Qse&&Buffer.isBuffer(e)?e.toString("binary"):ile(e),n);case"array":return t(xue(e),n)}throw new Error("Unrecognized type "+n.type)}function t(e,t){var n=(t||{}).dense?[]:{},r=e.match(/\\trowd.*?\\row\b/g);if(!r.length)throw new Error("RTF missing table");var a={s:{c:0,r:0},e:{c:0,r:r.length-1}};return r.forEach((function(e,t){Array.isArray(n)&&(n[t]=[]);for(var r,i=/\\\w+\b/g,o=0,s=-1;r=i.exec(e);){if("\\cell"===r[0]){var l=e.slice(o,i.lastIndex-r[0].length);if(" "==l[0]&&(l=l.slice(1)),++s,l.length){var u={v:l,t:"s"};Array.isArray(n)?n[t][s]=u:n[qce({r:t,c:s})]=u}}o=i.lastIndex}s>a.e.c&&(a.e.c=s)})),n["!ref"]=Yce(a),n}return{to_workbook:function(t,n){return Qce(e(t,n),n)},to_sheet:e,from_sheet:function(e){for(var t,n=["{\\rtf1\\ansi"],r=Kce(e["!ref"]),a=Array.isArray(e),i=r.s.r;i<=r.e.r;++i){n.push("\\trowd\\trautofit1");for(var o=r.s.c;o<=r.e.c;++o)n.push("\\cellx"+(o+1));for(n.push("\\pard\\intbl"),o=r.s.c;o<=r.e.c;++o){var s=qce({r:i,c:o});(t=a?(e[i]||[])[o]:e[s])&&(null!=t.v||t.f&&!t.F)&&(n.push(" "+(t.w||(Jce(t),t.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}}}();function Whe(e){for(var t=0,n=1;3!=t;++t)n=256*n+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}var Vhe=6,Zhe=Vhe;function Hhe(e){return Math.floor((e+Math.round(128/Zhe)/256)*Zhe)}function Ghe(e){return Math.floor((e-5)/Zhe*100+.5)/100}function qhe(e){return Math.round((e*Zhe+5)/Zhe*256)/256}function Xhe(e){e.width?(e.wpx=Hhe(e.width),e.wch=Ghe(e.wpx),e.MDW=Zhe):e.wpx?(e.wch=Ghe(e.wpx),e.width=qhe(e.wch),e.MDW=Zhe):"number"==typeof e.wch&&(e.width=qhe(e.wch),e.wpx=Hhe(e.width),e.MDW=Zhe),e.customWidth&&delete e.customWidth}var Yhe=96;function Khe(e){return 96*e/Yhe}function $he(e){return e*Yhe/96}function Jhe(e,t){var n,r=[Mue,Xue("styleSheet",null,{xmlns:$ue[0],"xmlns:vt":Kue.vt})];return e.SSF&&null!=(n=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach((function(n){for(var r=n[0];r<=n[1];++r)null!=e[r]&&(t[t.length]=Xue("numFmt",null,{numFmtId:r,formatCode:Oue(e[r])}))})),1===t.length?"":(t[t.length]="</numFmts>",t[0]=Xue("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=function(e){var t=[];return t[t.length]=Xue("cellXfs",null),e.forEach((function(e){t[t.length]=Xue("xf",null,e)})),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=Xue("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Qhe(e,t,n){n||(n=Lce(6+4*t.length)),n.write_shift(2,e),ade(t,n);var r=n.length>n.l?n.slice(0,n.l):n;return null==n.l&&(n.l=n.length),r}function efe(e,t){t||(t=Lce(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=Lce(2));var n=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,n),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var n=0;"superscript"==e.vertAlign?n=1:"subscript"==e.vertAlign&&(n=2),t.write_shift(2,n),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),_de(e.color,t);var r=0;return"major"==e.scheme&&(r=1),"minor"==e.scheme&&(r=2),t.write_shift(1,r),ade(e.name,t),t.length>t.l?t.slice(0,t.l):t}var tfe,nfe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],rfe=Dce;function afe(e,t){t||(t=Lce(84)),tfe||(tfe=lue(nfe));var n=tfe[e.patternType];null==n&&(n=40),t.write_shift(4,n);var r=0;if(40!=n)for(_de({auto:1},t),_de({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function ife(e,t,n){n||(n=Lce(16)),n.write_shift(2,t||0),n.write_shift(2,e.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);return n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function ofe(e,t){return t||(t=Lce(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var sfe=Dce;function lfe(e){Fce(e,613,nde(1)),Fce(e,46,function(e,t){return t||(t=Lce(51)),t.write_shift(1,0),ofe(0,t),ofe(0,t),ofe(0,t),ofe(0,t),ofe(0,t),t.length>t.l?t.slice(0,t.l):t}()),Fce(e,614)}function ufe(e){Fce(e,619,nde(1)),Fce(e,48,function(e,t){return t||(t=Lce(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),vde(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}({xfId:0,builtinId:0,name:"Normal"})),Fce(e,620)}function cfe(e){Fce(e,508,function(e,t,n){var r=Lce(2052);return r.write_shift(4,e),vde(t,r),vde(n,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),Fce(e,509)}function dfe(e,t){var n=Pce();return Fce(n,278),function(e,t){if(t){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach((function(e){for(var r=e[0];r<=e[1];++r)null!=t[r]&&++n})),0!=n&&(Fce(e,615,nde(n)),[[5,8],[23,26],[41,44],[50,392]].forEach((function(n){for(var r=n[0];r<=n[1];++r)null!=t[r]&&Fce(e,44,Qhe(r,t[r]))})),Fce(e,616))}}(n,e.SSF),function(e){Fce(e,611,nde(1)),Fce(e,43,efe({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),Fce(e,612)}(n),function(e){Fce(e,603,nde(2)),Fce(e,45,afe({patternType:"none"})),Fce(e,45,afe({patternType:"gray125"})),Fce(e,604)}(n),lfe(n),function(e){Fce(e,626,nde(1)),Fce(e,47,ife({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),Fce(e,627)}(n),function(e,t){Fce(e,617,nde(t.length)),t.forEach((function(t){Fce(e,47,ife(t,0))})),Fce(e,618)}(n,t.cellXfs),ufe(n),function(e){Fce(e,505,nde(0)),Fce(e,506)}(n),cfe(n),Fce(n,279),n.end()}function hfe(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var n=[Mue];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function ffe(){var e=Pce();return Fce(e,332),Fce(e,334,nde(1)),Fce(e,335,function(e){var t=Lce(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),ade(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),Fce(e,336),Fce(e,339,function(e,t){var n=Lce(8+2*t.length);return n.write_shift(4,e),ade(t,n),n.slice(0,n.l)}(1,"XLDAPR")),Fce(e,52),Fce(e,35,nde(514)),Fce(e,4096,nde(0)),Fce(e,4097,she(1)),Fce(e,36),Fce(e,53),Fce(e,340),Fce(e,337,function(e,t){var n=Lce(8);return n.write_shift(4,e),n.write_shift(4,t?1:0),n}(1,!0)),Fce(e,51,function(e){var t=Lce(4+8*e.length);t.write_shift(4,e.length);for(var n=0;n<e.length;++n)t.write_shift(4,e[n][0]),t.write_shift(4,e[n][1]);return t}([[1,0]])),Fce(e,338),Fce(e,333),e.end()}function pfe(){var e=[Mue];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var mfe=1024;function vfe(e,t){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),a=[Xue("xml",null,{"xmlns:v":Jue.v,"xmlns:o":Jue.o,"xmlns:x":Jue.x,"xmlns:mv":Jue.mv}).replace(/\/>/,">"),Xue("o:shapelayout",Xue("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Xue("v:shapetype",[Xue("v:stroke",null,{joinstyle:"miter"}),Xue("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];mfe<1e3*e;)mfe+=1e3;return t.forEach((function(e){var t=Gce(e[0]),n={color2:"#BEFF82",type:"gradient"};"gradient"==n.type&&(n.angle="-180");var r="gradient"==n.type?Xue("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,i=Xue("v:fill",r,n);++mfe,a=a.concat(["<v:shape"+que({id:"_x0000_s"+mfe,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",i,Xue("v:shadow",null,{on:"t",obscured:"t"}),Xue("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Gue("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),Gue("x:AutoFill","False"),Gue("x:Row",String(t.r)),Gue("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])})),a.push("</xml>"),a.join("")}function gfe(e){var t=[Mue,Xue("comments",null,{xmlns:$ue[0]})],n=[];return t.push("<authors>"),e.forEach((function(e){e[1].forEach((function(e){var r=Oue(e.a);-1==n.indexOf(r)&&(n.push(r),t.push("<author>"+r+"</author>")),e.T&&e.ID&&-1==n.indexOf("tc="+e.ID)&&(n.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))}))})),0==n.length&&(n.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach((function(e){var r=0,a=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?r=n.indexOf("tc="+e[1][0].ID):e[1].forEach((function(e){e.a&&(r=n.indexOf(Oue(e.a))),a.push(e.t||"")})),t.push('<comment ref="'+e[0]+'" authorId="'+r+'"><text>'),a.length<=1)t.push(Gue("t",Oue(a[0]||"")));else{for(var i="Comment:\n    "+a[0]+"\n",o=1;o<a.length;++o)i+="Reply:\n    "+a[o]+"\n";t.push(Gue("t",Oue(i)))}t.push("</text></comment>")})),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function yfe(e,t,n){var r=[Mue,Xue("ThreadedComments",null,{xmlns:Kue.TCMNT}).replace(/[\/]>/,">")];return e.forEach((function(e){var a="";(e[1]||[]).forEach((function(i,o){if(i.T){i.a&&-1==t.indexOf(i.a)&&t.push(i.a);var s={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};0==o?a=s.id:s.parentId=a,i.ID=s.id,i.a&&(s.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),r.push(Xue("threadedComment",Gue("text",i.t||""),s))}else delete i.ID}))})),r.push("</ThreadedComments>"),r.join("")}var bfe=rde;function xfe(e){var t=Pce(),n=[];return Fce(t,628),Fce(t,630),e.forEach((function(e){e[1].forEach((function(e){n.indexOf(e.a)>-1||(n.push(e.a.slice(0,54)),Fce(t,632,function(e){return ade(e.slice(0,54))}(e.a)))}))})),Fce(t,631),Fce(t,633),e.forEach((function(e){e[1].forEach((function(r){r.iauthor=n.indexOf(r.a);var a={s:Gce(e[0]),e:Gce(e[0])};Fce(t,635,function(e,t){return null==t&&(t=Lce(36)),t.write_shift(4,e[1].iauthor),Tde(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([a,r])),r.t&&r.t.length>0&&Fce(t,637,lde(r)),Fce(t,636),delete r.iauthor}))})),Fce(t,634),Fce(t,629),t.end()}var wfe=["xlsb","xlsm","xlam","biff8","xla"];var kfe=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(e,n,r,a){var i=!1,o=!1;0==r.length?o=!0:"["==r.charAt(0)&&(o=!0,r=r.slice(1,-1)),0==a.length?i=!0:"["==a.charAt(0)&&(i=!0,a=a.slice(1,-1));var s=r.length>0?0|parseInt(r,10):0,l=a.length>0?0|parseInt(a,10):0;return i?l+=t.c:--l,o?s+=t.r:--s,n+(i?"":"$")+Hce(l)+(o?"":"$")+Vce(s)}return function(r,a){return t=a,r.replace(e,n)}}(),Sfe=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Tfe=function(){return function(e,t){return e.replace(Sfe,(function(e,n,r,a,i,o){var s=Zce(a)-(r?0:t.c),l=Wce(o)-(i?0:t.r);return n+"R"+(0==l?"":i?l+1:"["+l+"]")+"C"+(0==s?"":r?s+1:"["+s+"]")}))}}();function Efe(e,t){return e.replace(Sfe,(function(e,n,r,a,i,o){return n+("$"==r?r+a:Hce(Zce(a)+t.c))+("$"==i?i+o:Vce(Wce(o)+t.r))}))}function Cfe(e){e.l+=1}function _fe(e,t){var n=e.read_shift(1==t?1:2);return[16383&n,n>>14&1,n>>15&1]}function Mfe(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return Afe(e);12==n.biff&&(r=4)}var a=e.read_shift(r),i=e.read_shift(r),o=_fe(e,2),s=_fe(e,2);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:s[0],cRel:s[1],rRel:s[2]}}}function Afe(e){var t=_fe(e,2),n=_fe(e,2),r=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:a,cRel:n[1],rRel:n[2]}}}function Ife(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return function(e){var t=_fe(e,2),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}(e);var r=e.read_shift(n&&12==n.biff?4:2),a=_fe(e,2);return{r:r,c:a[0],cRel:a[1],rRel:a[2]}}function Nfe(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function Rfe(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function Ofe(e){return[e.read_shift(1),e.read_shift(1)]}function Dfe(e,t){var n=[e.read_shift(1)];if(12==t)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2}switch(n[0]){case 4:n[1]=ahe(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:n[1]=Lde[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:n[1]=Ede(e);break;case 2:n[1]=fhe(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function Lfe(e,t,n){for(var r=e.read_shift(12==n.biff?4:2),a=[],i=0;i!=r;++i)a.push((12==n.biff?Sde:bhe)(e,8));return a}function Pfe(e,t,n){var r=0,a=0;12==n.biff?(r=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,0==--a&&(a=256));for(var i=0,o=[];i!=r&&(o[i]=[]);++i)for(var s=0;s!=a;++s)o[i][s]=Dfe(e,n.biff);return o}function Ffe(e,t,n){return e.l+=2,[Nfe(e)]}function jfe(e){return e.l+=6,[]}function zfe(e){return e.l+=2,[ohe(e),1&e.read_shift(2)]}var Bfe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var Ufe={1:{n:"PtgExp",f:function(e,t,n){return e.l++,n&&12==n.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(n&&2==n.biff?1:2)]}},2:{n:"PtgTbl",f:Dce},3:{n:"PtgAdd",f:Cfe},4:{n:"PtgSub",f:Cfe},5:{n:"PtgMul",f:Cfe},6:{n:"PtgDiv",f:Cfe},7:{n:"PtgPower",f:Cfe},8:{n:"PtgConcat",f:Cfe},9:{n:"PtgLt",f:Cfe},10:{n:"PtgLe",f:Cfe},11:{n:"PtgEq",f:Cfe},12:{n:"PtgGe",f:Cfe},13:{n:"PtgGt",f:Cfe},14:{n:"PtgNe",f:Cfe},15:{n:"PtgIsect",f:Cfe},16:{n:"PtgUnion",f:Cfe},17:{n:"PtgRange",f:Cfe},18:{n:"PtgUplus",f:Cfe},19:{n:"PtgUminus",f:Cfe},20:{n:"PtgPercent",f:Cfe},21:{n:"PtgParen",f:Cfe},22:{n:"PtgMissArg",f:Cfe},23:{n:"PtgStr",f:function(e,t,n){return e.l++,uhe(e,0,n)}},26:{n:"PtgSheet",f:function(e,t,n){return e.l+=5,e.l+=2,e.l+=2==n.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,n){return e.l+=2==n.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,Lde[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,Ede(e)}},32:{n:"PtgArray",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=2==n.biff?6:12==n.biff?14:7,[r]}},33:{n:"PtgFunc",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var a=e.read_shift(n&&n.biff<=3?1:2);return[ope[a],ipe[a],r]}},34:{n:"PtgFuncVar",f:function(e,t,n){var r=e[e.l++],a=e.read_shift(1),i=n&&n.biff<=3?[88==r?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[a,(0===i[0]?ipe:ape)[i[1]]]}},35:{n:"PtgName",f:function(e,t,n){var r=e.read_shift(1)>>>5&3,a=!n||n.biff>=8?4:2,i=e.read_shift(a);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[r,0,i]}},36:{n:"PtgRef",f:function(e,t,n){var r=(96&e[e.l])>>5;return e.l+=1,[r,Ife(e,0,n)]}},37:{n:"PtgArea",f:function(e,t,n){return[(96&e[e.l++])>>5,Mfe(e,n.biff>=2&&n.biff,n)]}},38:{n:"PtgMemArea",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=n&&2==n.biff?3:4,[r,e.read_shift(n&&2==n.biff?1:2)]}},39:{n:"PtgMemErr",f:Dce},40:{n:"PtgMemNoMem",f:Dce},41:{n:"PtgMemFunc",f:function(e,t,n){return[e.read_shift(1)>>>5&3,e.read_shift(n&&2==n.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,12==n.biff&&(e.l+=2),[r]}},43:{n:"PtgAreaErr",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var a=function(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return function(e){var t=e.read_shift(2),n=e.read_shift(1),r=(32768&t)>>15,a=(16384&t)>>14;return t&=16383,1==r&&t>=8192&&(t-=16384),1==a&&n>=128&&(n-=256),{r:t,c:n,cRel:a,rRel:r}}(e);var a=e.read_shift(r>=12?4:2),i=e.read_shift(2),o=(16384&i)>>14,s=(32768&i)>>15;if(i&=16383,1==s)for(;a>524287;)a-=1048576;if(1==o)for(;i>8191;)i-=16384;return{r:a,c:i,cRel:o,rRel:s}}(e,0,n);return[r,a]}},45:{n:"PtgAreaN",f:function(e,t,n){var r=(96&e[e.l++])>>5,a=function(e,t,n){if(n.biff<8)return Afe(e);var r=e.read_shift(12==n.biff?4:2),a=e.read_shift(12==n.biff?4:2),i=_fe(e,2),o=_fe(e,2);return{s:{r:r,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}(e,0,n);return[r,a]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,n){return 5==n.biff?function(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var a=e.read_shift(2);return n&&5==n.biff&&(e.l+=12),[r,a,Ife(e,0,n)]}},59:{n:"PtgArea3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,a=e.read_shift(2,"i");if(n)switch(n.biff){case 5:e.l+=12,6;break;case 12:12}return[r,a,Mfe(e,0,n)]}},60:{n:"PtgRefErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,a=e.read_shift(2),i=4;if(n)switch(n.biff){case 5:i=15;break;case 12:i=6}return e.l+=i,[r,a]}},61:{n:"PtgAreaErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,a=e.read_shift(2),i=8;if(n)switch(n.biff){case 5:e.l+=12,i=6;break;case 12:i=12}return e.l+=i,[r,a]}},255:{}},Wfe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Vfe={1:{n:"PtgElfLel",f:zfe},2:{n:"PtgElfRw",f:Ffe},3:{n:"PtgElfCol",f:Ffe},6:{n:"PtgElfRwV",f:Ffe},7:{n:"PtgElfColV",f:Ffe},10:{n:"PtgElfRadical",f:Ffe},11:{n:"PtgElfRadicalS",f:jfe},13:{n:"PtgElfColS",f:jfe},15:{n:"PtgElfColSV",f:jfe},16:{n:"PtgElfRadicalLel",f:zfe},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2);return{ixti:t,coltype:3&n,rt:Bfe[n>>2&31],idx:r,c:a,C:i}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},Zfe={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=n&&2==n.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,n){e.l+=2;for(var r=e.read_shift(n&&2==n.biff?1:2),a=[],i=0;i<=r;++i)a.push(e.read_shift(n&&2==n.biff?1:2));return a}},8:{n:"PtgAttrGoto",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,n){e.l+=n&&2==n.biff?3:4}},32:{n:"PtgAttrBaxcel",f:Rfe},33:{n:"PtgAttrBaxcel",f:Rfe},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),Ofe(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),Ofe(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function Hfe(e,t,n,r){if(r.biff<8)return Dce(e,t);for(var a=e.l+t,i=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=Pfe(e,0,r),i.push(n[o][1]);break;case"PtgMemArea":n[o][2]=Lfe(e,n[o][1],r),i.push(n[o][2]);break;case"PtgExp":r&&12==r.biff&&(n[o][1][1]=e.read_shift(4),i.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return 0!==(t=a-e.l)&&i.push(Dce(e,t)),i}function Gfe(e,t,n){for(var r,a,i=e.l+t,o=[];i!=e.l;)t=i-e.l,a=e[e.l],r=Ufe[a]||Ufe[Wfe[a]],24!==a&&25!==a||(r=(24===a?Vfe:Zfe)[e[e.l+1]]),r&&r.f?o.push([r.n,r.f(e,t,n)]):Dce(e,t);return o}function qfe(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],a=[],i=0;i<r.length;++i){var o=r[i];if(o)if(2===o[0])a.push('"'+o[1].replace(/"/g,'""')+'"');else a.push(o[1]);else a.push("")}t.push(a.join(","))}return t.join(";")}var Xfe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Yfe(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var a="";if(n.biff>8)switch(e[r[0]][0]){case 357:return a=-1==r[1]?"#REF":e.SheetNames[r[1]],r[1]==r[2]?a:a+":"+e.SheetNames[r[2]];case 358:return null!=n.SID?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return a=-1==r[1]?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?a:a+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map((function(e){return e.Name})).join(";;");default:return e[r[0]][0][3]?(a=-1==r[1]?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?a:a+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function Kfe(e,t,n){var r=Yfe(e,t,n);return"#REF"==r?r:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(r,n)}function $fe(e,t,n,r,a){var i,o,s,l,u=a&&a.biff||8,c={s:{c:0,r:0},e:{c:0,r:0}},d=[],h=0,f=0,p="";if(!e[0]||!e[0][0])return"";for(var m=-1,v="",g=0,y=e[0].length;g<y;++g){var b=e[0][g];switch(b[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(i=d.pop(),o=d.pop(),m>=0){switch(e[0][m][1][0]){case 0:v=kue(" ",e[0][m][1][1]);break;case 1:v=kue("\r",e[0][m][1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}o+=v,m=-1}d.push(o+Xfe[b[0]]+i);break;case"PtgIsect":i=d.pop(),o=d.pop(),d.push(o+" "+i);break;case"PtgUnion":i=d.pop(),o=d.pop(),d.push(o+","+i);break;case"PtgRange":i=d.pop(),o=d.pop(),d.push(o+":"+i);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":s=jce(b[1][1],c,a),d.push(Bce(s,u));break;case"PtgRefN":s=n?jce(b[1][1],n,a):b[1][1],d.push(Bce(s,u));break;case"PtgRef3d":h=b[1][1],s=jce(b[1][2],c,a);p=Kfe(r,h,a);d.push(p+"!"+Bce(s,u));break;case"PtgFunc":case"PtgFuncVar":var x=b[1][0],w=b[1][1];x||(x=0);var k=0==(x&=127)?[]:d.slice(-x);d.length-=x,"User"===w&&(w=k.shift()),d.push(w+"("+k.join(",")+")");break;case"PtgBool":d.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":d.push(b[1]);break;case"PtgNum":d.push(String(b[1]));break;case"PtgStr":d.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=zce(b[1][1],n?{s:n}:c,a),d.push(Uce(l,a));break;case"PtgArea":l=zce(b[1][1],c,a),d.push(Uce(l,a));break;case"PtgArea3d":h=b[1][1],l=b[1][2],p=Kfe(r,h,a),d.push(p+"!"+Uce(l,a));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgName":f=b[1][2];var S=(r.names||[])[f-1]||(r[0]||[])[f],T=S?S.Name:"SH33TJSNAME"+String(f);T&&"_xlfn."==T.slice(0,6)&&!a.xlfn&&(T=T.slice(6)),d.push(T);break;case"PtgNameX":var E,C=b[1][1];if(f=b[1][2],!(a.biff<=5)){var _="";if(14849==((r[C]||[])[0]||[])[0]||(1025==((r[C]||[])[0]||[])[0]?r[C][f]&&r[C][f].itab>0&&(_=r.SheetNames[r[C][f].itab-1]+"!"):_=r.SheetNames[f-1]+"!"),r[C]&&r[C][f])_+=r[C][f].Name;else if(r[0]&&r[0][f])_+=r[0][f].Name;else{var M=(Yfe(r,C,a)||"").split(";;");M[f-1]?_=M[f-1]:_+="SH33TJSERRX"}d.push(_);break}C<0&&(C=-C),r[C]&&(E=r[C][f]),E||(E={Name:"SH33TJSERRY"}),d.push(E.Name);break;case"PtgParen":var A="(",I=")";if(m>=0){switch(v="",e[0][m][1][0]){case 2:A=kue(" ",e[0][m][1][1])+A;break;case 3:A=kue("\r",e[0][m][1][1])+A;break;case 4:I=kue(" ",e[0][m][1][1])+I;break;case 5:I=kue("\r",e[0][m][1][1])+I;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}d.push(A+d.pop()+I);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":d.push("#REF!");break;case"PtgExp":s={c:b[1][1],r:b[1][0]};var N={c:n.c,r:n.r};if(r.sharedf[qce(s)]){var R=r.sharedf[qce(s)];d.push($fe(R,c,N,r,a))}else{var O=!1;for(i=0;i!=r.arrayf.length;++i)if(o=r.arrayf[i],!(s.c<o[0].s.c||s.c>o[0].e.c)&&!(s.r<o[0].s.r||s.r>o[0].e.r)){d.push($fe(o[1],c,N,r,a)),O=!0;break}O||d.push(b[1])}break;case"PtgArray":d.push("{"+qfe(b[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=g;break;case"PtgMissArg":d.push("");break;case"PtgList":d.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(b))}if(3!=a.biff&&m>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][g][0])){var D=!0;switch((b=e[0][m])[1][0]){case 4:D=!1;case 0:v=kue(" ",b[1][1]);break;case 5:D=!1;case 1:v=kue("\r",b[1][1]);break;default:if(v="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}d.push((D?v:"")+d.pop()+(D?"":v)),m=-1}}if(d.length>1&&a.WTF)throw new Error("bad formula stack");return d[0]}function Jfe(e,t,n,r,a){var i=ghe(t,n,a),o=function(e){if(null==e){var t=Lce(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return Cde("number"==typeof e?e:0)}(e.v),s=Lce(6);s.write_shift(2,33),s.write_shift(4,0);for(var l=Lce(e.bf.length),u=0;u<e.bf.length;++u)l[u]=e.bf[u];return ole([i,o,s,l])}function Qfe(e,t,n){var r=e.read_shift(4),a=Gfe(e,r,n),i=e.read_shift(4);return[a,i>0?Hfe(e,i,a,n):null]}var epe=Qfe,tpe=Qfe,npe=Qfe,rpe=Qfe,ape={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},ipe={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},ope={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function spe(e){return("of:="+e.replace(Sfe,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function lpe(e){return e.replace(/\./,"!")}var upe="undefined"!==typeof Map;function cpe(e,t,n){var r=0,a=e.length;if(n){if(upe?n.has(t):Object.prototype.hasOwnProperty.call(n,t))for(var i=upe?n.get(t):n[t];r<i.length;++r)if(e[i[r]].t===t)return e.Count++,i[r]}else for(;r<a;++r)if(e[r].t===t)return e.Count++,r;return e[a]={t:t},e.Count++,e.Unique++,n&&(upe?(n.has(t)||n.set(t,[]),n.get(t).push(a)):(Object.prototype.hasOwnProperty.call(n,t)||(n[t]=[]),n[t].push(a))),a}function dpe(e,t){var n={min:e+1,max:e+1},r=-1;return t.MDW&&(Zhe=t.MDW),null!=t.width?n.customWidth=1:null!=t.wpx?r=Ghe(t.wpx):null!=t.wch&&(r=t.wch),r>-1?(n.width=qhe(r),n.customWidth=1):null!=t.width&&(n.width=t.width),t.hidden&&(n.hidden=!0),null!=t.level&&(n.outlineLevel=n.level=t.level),n}function hpe(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(n=[1,1,1,1,.5,.5]),null==e.left&&(e.left=n[0]),null==e.right&&(e.right=n[1]),null==e.top&&(e.top=n[2]),null==e.bottom&&(e.bottom=n[3]),null==e.header&&(e.header=n[4]),null==e.footer&&(e.footer=n[5])}}function fpe(e,t,n){var r=n.revssf[null!=t.z?t.z:"General"],a=60,i=e.length;if(null==r&&n.ssf)for(;a<392;++a)if(null==n.ssf[a]){$le(t.z,a),n.ssf[a]=t.z,n.revssf[t.z]=r=a;break}for(a=0;a!=i;++a)if(e[a].numFmtId===r)return a;return e[i]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function ppe(e,t,n){if(e&&e["!ref"]){var r=Kce(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+e["!ref"])}}var mpe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],vpe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function gpe(e,t,n,r){if(e.c&&n["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var a="",i=e.t,o=e.v;if("z"!==e.t)switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Lde[e.v];break;case"d":r&&r.cellDates?a=bue(e.v,-1).toISOString():((e=wue(e)).t="n",a=""+(e.v=due(bue(e.v)))),"undefined"===typeof e.z&&(e.z=yle[14]);break;default:a=e.v}var s=Gue("v",Oue(a)),l={r:t},u=fpe(r.cellXfs,e,r);switch(0!==u&&(l.s=u),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){s=Gue("v",""+cpe(r.Strings,e.v,r.revStrings)),l.t="s";break}l.t="str"}if(e.t!=i&&(e.t=i,e.v=o),"string"==typeof e.f&&e.f){var c=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;s=Xue("f",Oue(e.f),c)+(null!=e.v?s:"")}return e.l&&n["!links"].push([t,e.l]),e.D&&(l.cm=1),Xue("c",s,l)}function ype(e,t,n,r){var a,i=[Mue,Xue("worksheet",null,{xmlns:$ue[0],"xmlns:r":Kue.r})],o=n.SheetNames[e],s="",l=n.Sheets[o];null==l&&(l={});var u=l["!ref"]||"A1",c=Kce(u);if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575),u=Yce(c)}r||(r={}),l["!comments"]=[];var d=[];!function(e,t,n,r,a){var i=!1,o={},s=null;if("xlsx"!==r.bookType&&t.vbaraw){var l=t.SheetNames[n];try{t.Workbook&&(l=t.Workbook.Sheets[n].CodeName||l)}catch(UK){}i=!0,o.codeName=Vue(Oue(l))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),s=(s||"")+Xue("outlinePr",null,u)}(i||s)&&(a[a.length]=Xue("sheetPr",s,o))}(l,n,e,t,i),i[i.length]=Xue("dimension",null,{ref:u}),i[i.length]=function(e,t,n,r){var a={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Xue("sheetViews",Xue("sheetView",null,a),{})}(0,0,0,n),t.sheetFormat&&(i[i.length]=Xue("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(i[i.length]=function(e,t){for(var n,r=["<cols>"],a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Xue("col",null,dpe(a,n)));return r[r.length]="</cols>",r.join("")}(0,l["!cols"])),i[a=i.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(s=function(e,t,n,r){var a,i,o=[],s=[],l=Kce(e["!ref"]),u="",c="",d=[],h=0,f=0,p=e["!rows"],m=Array.isArray(e),v={r:c},g=-1;for(f=l.s.c;f<=l.e.c;++f)d[f]=Hce(f);for(h=l.s.r;h<=l.e.r;++h){for(s=[],c=Vce(h),f=l.s.c;f<=l.e.c;++f){a=d[f]+c;var y=m?(e[h]||[])[f]:e[a];void 0!==y&&null!=(u=gpe(y,a,e,t))&&s.push(u)}(s.length>0||p&&p[h])&&(v={r:c},p&&p[h]&&((i=p[h]).hidden&&(v.hidden=1),g=-1,i.hpx?g=Khe(i.hpx):i.hpt&&(g=i.hpt),g>-1&&(v.ht=g,v.customHeight=1),i.level&&(v.outlineLevel=i.level)),o[o.length]=Xue("row",s.join(""),v))}if(p)for(;h<p.length;++h)p&&p[h]&&(v={r:h+1},(i=p[h]).hidden&&(v.hidden=1),g=-1,i.hpx?g=Khe(i.hpx):i.hpt&&(g=i.hpt),g>-1&&(v.ht=g,v.customHeight=1),i.level&&(v.outlineLevel=i.level),o[o.length]=Xue("row","",v));return o.join("")}(l,t,0,0),s.length>0&&(i[i.length]=s)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),l["!protect"]&&(i[i.length]=function(e){var t={sheet:1};return mpe.forEach((function(n){null!=e[n]&&e[n]&&(t[n]="1")})),vpe.forEach((function(n){null==e[n]||e[n]||(t[n]="0")})),e.password&&(t.password=Bhe(e.password).toString(16).toUpperCase()),Xue("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(i[i.length]=function(e,t,n,r){var a="string"==typeof e.ref?e.ref:Yce(e.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var i=n.Workbook.Names,o=Xce(a);o.s.r==o.e.r&&(o.e.r=Xce(t["!ref"]).e.r,a=Yce(o));for(var s=0;s<i.length;++s){var l=i[s];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+a;break}}return s==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+a}),Xue("autoFilter",null,{ref:a})}(l["!autofilter"],l,n,e)),null!=l["!merges"]&&l["!merges"].length>0&&(i[i.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',n=0;n!=e.length;++n)t+='<mergeCell ref="'+Yce(e[n])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var h,f,p=-1,m=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach((function(e){e[1].Target&&(h={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(m=Wde(r,-1,Oue(e[1].Target).replace(/#.*$/,""),zde.HLINK),h["r:id"]="rId"+m),(p=e[1].Target.indexOf("#"))>-1&&(h.location=Oue(e[1].Target.slice(p+1))),e[1].Tooltip&&(h.tooltip=Oue(e[1].Tooltip)),i[i.length]=Xue("hyperlink",null,h))})),i[i.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(i[i.length]=(hpe(f=l["!margins"]),Xue("pageMargins",null,f))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(i[i.length]=Gue("ignoredErrors",Xue("ignoredError",null,{numberStoredAsText:1,sqref:u}))),d.length>0&&(m=Wde(r,-1,"../drawings/drawing"+(e+1)+".xml",zde.DRAW),i[i.length]=Xue("drawing",null,{"r:id":"rId"+m}),l["!drawing"]=d),l["!comments"].length>0&&(m=Wde(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",zde.VML),i[i.length]=Xue("legacyDrawing",null,{"r:id":"rId"+m}),l["!legacy"]=m),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function bpe(e,t,n,r){var a=function(e,t,n){var r=Lce(145),a=(n["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var i=320;a.hpx?i=20*Khe(a.hpx):a.hpt&&(i=20*a.hpt),r.write_shift(2,i),r.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),r.write_shift(1,o),r.write_shift(1,0);var s=0,l=r.l;r.l+=4;for(var u={r:e,c:0},c=0;c<16;++c)if(!(t.s.c>c+1<<10||t.e.c<c<<10)){for(var d=-1,h=-1,f=c<<10;f<c+1<<10;++f)u.c=f,(Array.isArray(n)?(n[u.r]||[])[u.c]:n[qce(u)])&&(d<0&&(d=f),h=f);d<0||(++s,r.write_shift(4,d),r.write_shift(4,h))}var p=r.l;return r.l=l,r.write_shift(4,s),r.l=p,r.length>r.l?r.slice(0,r.l):r}(r,n,t);(a.length>17||(t["!rows"]||[])[r])&&Fce(e,0,a)}var xpe=Sde,wpe=Tde;function kpe(e){return[dde(e),Ede(e),"n"]}var Spe=Sde,Tpe=Tde;var Epe=["left","right","top","bottom","header","footer"];function Cpe(e,t,n,r,a,i,o){if(void 0===t.v)return!1;var s="";switch(t.t){case"b":s=t.v?"1":"0";break;case"d":(t=wue(t)).z=t.z||yle[14],t.v=due(bue(t.v)),t.t="n";break;case"n":case"e":s=""+t.v;break;default:s=t.v}var l={r:n,c:r};switch(l.s=fpe(a.cellXfs,t,a),t.l&&i["!links"].push([qce(l),t.l]),t.c&&i["!comments"].push([qce(l),t.c]),t.t){case"s":case"str":return a.bookSST?(s=cpe(a.Strings,t.v,a.revStrings),l.t="s",l.v=s,o?Fce(e,18,function(e,t,n){return null==n&&(n=Lce(8)),hde(t,n),n.write_shift(4,t.v),n}(0,l)):Fce(e,7,function(e,t,n){return null==n&&(n=Lce(12)),cde(t,n),n.write_shift(4,t.v),n}(0,l))):(l.t="str",o?Fce(e,17,function(e,t,n){return null==n&&(n=Lce(8+4*e.v.length)),hde(t,n),ade(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l)):Fce(e,6,function(e,t,n){return null==n&&(n=Lce(12+4*e.v.length)),cde(t,n),ade(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?o?Fce(e,13,function(e,t,n){return null==n&&(n=Lce(8)),hde(t,n),wde(e.v,n),n}(t,l)):Fce(e,2,function(e,t,n){return null==n&&(n=Lce(12)),cde(t,n),wde(e.v,n),n}(t,l)):o?Fce(e,16,function(e,t,n){return null==n&&(n=Lce(12)),hde(t,n),Cde(e.v,n),n}(t,l)):Fce(e,5,function(e,t,n){return null==n&&(n=Lce(16)),cde(t,n),Cde(e.v,n),n}(t,l)),!0;case"b":return l.t="b",o?Fce(e,15,function(e,t,n){return null==n&&(n=Lce(5)),hde(t,n),n.write_shift(1,e.v?1:0),n}(t,l)):Fce(e,4,function(e,t,n){return null==n&&(n=Lce(9)),cde(t,n),n.write_shift(1,e.v?1:0),n}(t,l)),!0;case"e":return l.t="e",o?Fce(e,14,function(e,t,n){return null==n&&(n=Lce(8)),hde(t,n),n.write_shift(1,e.v),n.write_shift(2,0),n.write_shift(1,0),n}(t,l)):Fce(e,3,function(e,t,n){return null==n&&(n=Lce(9)),cde(t,n),n.write_shift(1,e.v),n}(t,l)),!0}return o?Fce(e,12,function(e,t,n){return null==n&&(n=Lce(4)),hde(t,n)}(0,l)):Fce(e,1,function(e,t,n){return null==n&&(n=Lce(8)),cde(t,n)}(0,l)),!0}function _pe(e,t){t&&t["!merges"]&&(Fce(e,177,function(e,t){return null==t&&(t=Lce(4)),t.write_shift(4,e),t}(t["!merges"].length)),t["!merges"].forEach((function(t){Fce(e,176,Tpe(t))})),Fce(e,178))}function Mpe(e,t){t&&t["!cols"]&&(Fce(e,390),t["!cols"].forEach((function(t,n){t&&Fce(e,60,function(e,t,n){null==n&&(n=Lce(18));var r=dpe(e,t);n.write_shift(-4,e),n.write_shift(-4,e),n.write_shift(4,256*(r.width||10)),n.write_shift(4,0);var a=0;return t.hidden&&(a|=1),"number"==typeof r.width&&(a|=2),t.level&&(a|=t.level<<8),n.write_shift(2,a),n}(n,t))})),Fce(e,391))}function Ape(e,t){t&&t["!ref"]&&(Fce(e,648),Fce(e,649,function(e){var t=Lce(24);return t.write_shift(4,4),t.write_shift(4,1),Tde(e,t),t}(Kce(t["!ref"]))),Fce(e,650))}function Ipe(e,t,n){t["!links"].forEach((function(t){if(t[1].Target){var r=Wde(n,-1,t[1].Target.replace(/#.*$/,""),zde.HLINK);Fce(e,494,function(e,t){var n=Lce(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Tde({s:Gce(e[0]),e:Gce(e[0])},n),bde("rId"+t,n);var r=e[1].Target.indexOf("#");return ade((-1==r?"":e[1].Target.slice(r+1))||"",n),ade(e[1].Tooltip||"",n),ade("",n),n.slice(0,n.l)}(t,r))}})),delete t["!links"]}function Npe(e,t,n){Fce(e,133),Fce(e,137,function(e,t,n){null==n&&(n=Lce(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}(0,n)),Fce(e,138),Fce(e,134)}function Rpe(e,t){t["!protect"]&&Fce(e,535,function(e,t){return null==t&&(t=Lce(66)),t.write_shift(2,e.password?Bhe(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach((function(n){n[1]?t.write_shift(4,null==e[n[0]]||e[n[0]]?0:1):t.write_shift(4,null!=e[n[0]]&&e[n[0]]?0:1)})),t}(t["!protect"]))}function Ope(e,t,n,r){var a=Pce(),i=n.SheetNames[e],o=n.Sheets[i]||{},s=i;try{n&&n.Workbook&&(s=n.Workbook.Sheets[e].CodeName||s)}catch(UK){}var l=Kce(o["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Fce(a,129),(n.vbaraw||o["!outline"])&&Fce(a,147,function(e,t,n){null==n&&(n=Lce(84+4*e.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),n.write_shift(1,r);for(var a=1;a<3;++a)n.write_shift(1,0);return _de({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),pde(e,n),n.slice(0,n.l)}(s,o["!outline"])),Fce(a,148,wpe(l)),Npe(a,0,n.Workbook),Mpe(a,o),function(e,t,n,r){var a,i=Kce(t["!ref"]||"A1"),o="",s=[];Fce(e,145);var l=Array.isArray(t),u=i.e.r;t["!rows"]&&(u=Math.max(i.e.r,t["!rows"].length-1));for(var c=i.s.r;c<=u;++c){o=Vce(c),bpe(e,t,i,c);var d=!1;if(c<=i.e.r)for(var h=i.s.c;h<=i.e.c;++h){c===i.s.r&&(s[h]=Hce(h)),a=s[h]+o;var f=l?(t[c]||[])[h]:t[a];d=!!f&&Cpe(e,f,c,h,r,t,d)}}Fce(e,146)}(a,o,0,t),Rpe(a,o),function(e,t,n,r){if(t["!autofilter"]){var a=t["!autofilter"],i="string"===typeof a.ref?a.ref:Yce(a.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var o=n.Workbook.Names,s=Xce(i);s.s.r==s.e.r&&(s.e.r=Xce(t["!ref"]).e.r,i=Yce(s));for(var l=0;l<o.length;++l){var u=o[l];if("_xlnm._FilterDatabase"==u.Name&&u.Sheet==r){u.Ref="'"+n.SheetNames[r]+"'!"+i;break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),Fce(e,161,Tde(Kce(i))),Fce(e,162)}}(a,o,n,e),_pe(a,o),Ipe(a,o,r),o["!margins"]&&Fce(a,476,function(e,t){return null==t&&(t=Lce(48)),hpe(e),Epe.forEach((function(n){Cde(e[n],t)})),t}(o["!margins"])),t&&!t.ignoreEC&&void 0!=t.ignoreEC||Ape(a,o),function(e,t,n,r){if(t["!comments"].length>0){var a=Wde(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",zde.VML);Fce(e,551,bde("rId"+a)),t["!legacy"]=a}}(a,o,e,r),Fce(a,130),a.end()}var Dpe=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var Lpe="][*?/\\".split("");function Ppe(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;return Lpe.forEach((function(r){if(-1!=e.indexOf(r)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}})),n}function Fpe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];!function(e,t,n){e.forEach((function(r,a){Ppe(r);for(var i=0;i<a;++i)if(r==e[i])throw new Error("Duplicate Sheet Name: "+r);if(n){var o=t&&t[a]&&t[a].CodeName||r;if(95==o.charCodeAt(0)&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}}))}(e.SheetNames,t,!!e.vbaraw);for(var n=0;n<e.SheetNames.length;++n)ppe(e.Sheets[e.SheetNames[n]],e.SheetNames[n],n)}function jpe(e){var t=[Mue];t[t.length]=Xue("workbook",null,{xmlns:$ue[0],"xmlns:r":Kue.r});var n=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Dpe.forEach((function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(r[t[0]]=e.Workbook.WBProps[t[0]])})),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=Xue("workbookPr",null,r);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&a[i]&&a[i].Hidden;++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:Oue(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden"}t[t.length]=Xue("sheet",null,o)}return t[t.length]="</sheets>",n&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach((function(e){var n={name:e.Name};e.Comment&&(n.comment=e.Comment),null!=e.Sheet&&(n.localSheetId=""+e.Sheet),e.Hidden&&(n.hidden="1"),e.Ref&&(t[t.length]=Xue("definedName",Oue(e.Ref),n))})),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function zpe(e,t){return t||(t=Lce(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),bde(e.strRelID,t),ade(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Bpe(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var n=t.Workbook.Sheets,r=0,a=-1,i=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&-1==a?a=r:1==n[r].Hidden&&-1==i&&(i=r);i>a||(Fce(e,135),Fce(e,158,function(e,t){return t||(t=Lce(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e),t.write_shift(1,120),t.length>t.l?t.slice(0,t.l):t}(a)),Fce(e,136))}}function Upe(e,t){var n=Pce();return Fce(n,131),Fce(n,128,function(e,t){t||(t=Lce(127));for(var n=0;4!=n;++n)t.write_shift(4,0);return ade("SheetJS",t),ade(Fse.version,t),ade(Fse.version,t),ade("7262",t),t.length>t.l?t.slice(0,t.l):t}()),Fce(n,153,function(e,t){t||(t=Lce(72));var n=0;return e&&e.filterPrivacy&&(n|=8),t.write_shift(4,n),t.write_shift(4,0),pde(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),Bpe(n,e),function(e,t){Fce(e,143);for(var n=0;n!=t.SheetNames.length;++n)Fce(e,156,zpe({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[n]&&t.Workbook.Sheets[n].Hidden||0,iTabID:n+1,strRelID:"rId"+(n+1),name:t.SheetNames[n]}));Fce(e,144)}(n,e),Fce(n,132),n.end()}function Wpe(e,t,n,r,a){return(".bin"===t.slice(-4)?Ope:ype)(e,n,r,a)}function Vpe(e,t,n){return(".bin"===t.slice(-4)?xfe:gfe)(e,n)}function Zpe(e,t){var n=[];return e.Props&&n.push(function(e,t){var n=[];return oue(Jde).map((function(e){for(var t=0;t<Hde.length;++t)if(Hde[t][1]==e)return Hde[t];for(t=0;t<Xde.length;++t)if(Xde[t][1]==e)return Xde[t];throw e})).forEach((function(r){if(null!=e[r[1]]){var a=t&&t.Props&&null!=t.Props[r[1]]?t.Props[r[1]]:e[r[1]];"date"===r[2]&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof a?a=String(a):!0===a||!1===a?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),n.push(Gue(Jde[r[1]]||r[1],a))}})),Xue("DocumentProperties",n.join(""),{xmlns:Jue.o})}(e.Props,t)),e.Custprops&&n.push(function(e,t){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",a=[];return e&&oue(e).forEach((function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var r=0;r<Hde.length;++r)if(t==Hde[r][1])return;for(r=0;r<Xde.length;++r)if(t==Xde[r][1])return;for(r=0;r<n.length;++r)if(t==n[r])return;var i=e[t],o="string";"number"==typeof i?(o="float",i=String(i)):!0===i||!1===i?(o="boolean",i=i?"1":"0"):i=String(i),a.push(Xue(Due(t),i,{"dt:dt":o}))}})),t&&oue(t).forEach((function(n){if(Object.prototype.hasOwnProperty.call(t,n)&&(!e||!Object.prototype.hasOwnProperty.call(e,n))){var r=t[n],i="string";"number"==typeof r?(i="float",r=String(r)):!0===r||!1===r?(i="boolean",r=r?"1":"0"):r instanceof Date?(i="dateTime.tz",r=r.toISOString()):r=String(r),a.push(Xue(Due(n),r,{"dt:dt":i}))}})),"<"+r+' xmlns="'+Jue.o+'">'+a.join("")+"</"+r+">"}(e.Props,e.Custprops)),n.join("")}function Hpe(e){return Xue("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+Tfe(e.Ref,{r:0,c:0})})}function Gpe(e,t,n,r,a,i,o){if(!e||void 0==e.v&&void 0==e.f)return"";var s={};if(e.f&&(s["ss:Formula"]="="+Oue(Tfe(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var l=Gce(e.F.slice(t.length+1));s["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(e.l&&e.l.Target&&(s["ss:HRef"]=Oue(e.l.Target),e.l.Tooltip&&(s["x:HRefScreenTip"]=Oue(e.l.Tooltip))),n["!merges"])for(var u=n["!merges"],c=0;c!=u.length;++c)u[c].s.c==o.c&&u[c].s.r==o.r&&(u[c].e.c>u[c].s.c&&(s["ss:MergeAcross"]=u[c].e.c-u[c].s.c),u[c].e.r>u[c].s.r&&(s["ss:MergeDown"]=u[c].e.r-u[c].s.r));var d="",h="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":d="Number",h=String(e.v);break;case"b":d="Boolean",h=e.v?"1":"0";break;case"e":d="Error",h=Lde[e.v];break;case"d":d="DateTime",h=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||yle[14]);break;case"s":d="String",h=((e.v||"")+"").replace(Nue,(function(e){return Iue[e]})).replace(Lue,(function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"}))}var f=fpe(r.cellXfs,e,r);s["ss:StyleID"]="s"+(21+f),s["ss:Index"]=o.c+1;var p=null!=e.v?h:"",m="z"==e.t?"":'<Data ss:Type="'+d+'">'+p+"</Data>";return(e.c||[]).length>0&&(m+=e.c.map((function(e){var t=Xue("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return Xue("Comment",t,{"ss:Author":e.a})})).join("")),Xue("Cell",m,s)}function qpe(e,t){var n='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=$he(t.hpt)),t.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(n+=' ss:Hidden="1"')),n+">"}function Xpe(e,t,n){var r=[],a=n.SheetNames[e],i=n.Sheets[a],o=i?function(e,t,n,r){if(!e)return"";if(!((r||{}).Workbook||{}).Names)return"";for(var a=r.Workbook.Names,i=[],o=0;o<a.length;++o){var s=a[o];s.Sheet==n&&(s.Name.match(/^_xlfn\./)||i.push(Hpe(s)))}return i.join("")}(i,0,e,n):"";return o.length>0&&r.push("<Names>"+o+"</Names>"),o=i?function(e,t,n,r){if(!e["!ref"])return"";var a=Kce(e["!ref"]),i=e["!merges"]||[],o=0,s=[];e["!cols"]&&e["!cols"].forEach((function(e,t){Xhe(e);var n=!!e.width,r=dpe(t,e),a={"ss:Index":t+1};n&&(a["ss:Width"]=Hhe(r.width)),e.hidden&&(a["ss:Hidden"]="1"),s.push(Xue("Column",null,a))}));for(var l=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var c=[qpe(u,(e["!rows"]||[])[u])],d=a.s.c;d<=a.e.c;++d){var h=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>d)&&!(i[o].s.r>u)&&!(i[o].e.c<d)&&!(i[o].e.r<u)){i[o].s.c==d&&i[o].s.r==u||(h=!0);break}if(!h){var f={r:u,c:d},p=qce(f),m=l?(e[u]||[])[d]:e[p];c.push(Gpe(m,p,e,t,0,0,f))}}c.push("</Row>"),c.length>2&&s.push(c.join(""))}return s.join("")}(i,t):"",o.length>0&&r.push("<Table>"+o+"</Table>"),r.push(function(e,t,n,r){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Xue("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Xue("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Xue("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)a.push(Xue("Visible",1==r.Workbook.Sheets[n].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<n&&(!r.Workbook.Sheets[i]||r.Workbook.Sheets[i].Hidden);++i);i==n&&a.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Gue("ProtectContents","True")),e["!protect"].objects&&a.push(Gue("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Gue("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||a.push(Gue("EnableSelection","UnlockedCells")):a.push(Gue("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach((function(t){e["!protect"][t[0]]&&a.push("<"+t[1]+"/>")}))),0==a.length?"":Xue("WorksheetOptions",a.join(""),{xmlns:Jue.x})}(i,0,e,n)),r.join("")}function Ype(e,t){t||(t={}),e.SSF||(e.SSF=wue(yle)),e.SSF&&(Qle(),Jle(e.SSF),t.revssf=uue(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],fpe(t.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(Zpe(e,t)),n.push(""),n.push(""),n.push("");for(var r=0;r<e.SheetNames.length;++r)n.push(Xue("Worksheet",Xpe(r,t,e),{"ss:Name":Oue(e.SheetNames[r])}));return n[2]=function(e,t){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach((function(e,t){var r=[];r.push(Xue("NumberFormat",null,{"ss:Format":Oue(yle[e.numFmtId])}));var a={"ss:ID":"s"+(21+t)};n.push(Xue("Style",r.join(""),a))})),Xue("Styles",n.join(""))}(0,t),n[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,n=[],r=0;r<t.length;++r){var a=t[r];null==a.Sheet&&(a.Name.match(/^_xlfn\./)||n.push(Hpe(a)))}return Xue("Names",n.join(""))}(e),Mue+Xue("Workbook",n.join(""),{xmlns:Jue.ss,"xmlns:o":Jue.o,"xmlns:x":Jue.x,"xmlns:ss":Jue.ss,"xmlns:dt":Jue.dt,"xmlns:html":Jue.html})}var Kpe={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function $pe(e,t){var n=t||{},r=nue.utils.cfb_new({root:"R"}),a="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":a="/Workbook",n.biff=8;break;case"biff5":a="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return nue.utils.cfb_add(r,a,lme(e,n)),8==n.biff&&(e.Props||e.Custprops)&&function(e,t){var n,r=[],a=[],i=[],o=0,s=sue(Nde,"n"),l=sue(Rde,"n");if(e.Props)for(n=oue(e.Props),o=0;o<n.length;++o)(Object.prototype.hasOwnProperty.call(s,n[o])?r:Object.prototype.hasOwnProperty.call(l,n[o])?a:i).push([n[o],e.Props[n[o]]]);if(e.Custprops)for(n=oue(e.Custprops),o=0;o<n.length;++o)Object.prototype.hasOwnProperty.call(e.Props||{},n[o])||(Object.prototype.hasOwnProperty.call(s,n[o])?r:Object.prototype.hasOwnProperty.call(l,n[o])?a:i).push([n[o],e.Custprops[n[o]]]);var u=[];for(o=0;o<i.length;++o)ehe.indexOf(i[o][0])>-1||Yde.indexOf(i[o][0])>-1||null!=i[o][1]&&u.push(i[o]);a.length&&nue.utils.cfb_add(t,"/\x05SummaryInformation",rhe(a,Kpe.SI,l,Rde)),(r.length||u.length)&&nue.utils.cfb_add(t,"/\x05DocumentSummaryInformation",rhe(r,Kpe.DSI,s,Nde,u.length?u:null,Kpe.UDI))}(e,r),8==n.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach((function(n,r){if(0!=r){var a=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==a.slice(-1)&&nue.utils.cfb_add(e,a,t.FileIndex[r].content)}}))}(r,nue.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),r}var Jpe={0:{f:function(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=r,7&i&&(n.level=7&i),16&i&&(n.hidden=!0),32&i&&(n.hpt=a/20),n}},1:{f:function(e){return[ude(e)]}},2:{f:function(e){return[ude(e),xde(e),"n"]}},3:{f:function(e){return[ude(e),e.read_shift(1),"e"]}},4:{f:function(e){return[ude(e),e.read_shift(1),"b"]}},5:{f:function(e){return[ude(e),Ede(e),"n"]}},6:{f:function(e){return[ude(e),rde(e),"str"]}},7:{f:function(e){return[ude(e),e.read_shift(4),"s"]}},8:{f:function(e,t,n){var r=e.l+t,a=ude(e);a.r=n["!row"];var i=[a,rde(e),"str"];if(n.cellFormula){e.l+=2;var o=tpe(e,r-e.l,n);i[3]=$fe(o,0,a,n.supbooks,n)}else e.l=r;return i}},9:{f:function(e,t,n){var r=e.l+t,a=ude(e);a.r=n["!row"];var i=[a,Ede(e),"n"];if(n.cellFormula){e.l+=2;var o=tpe(e,r-e.l,n);i[3]=$fe(o,0,a,n.supbooks,n)}else e.l=r;return i}},10:{f:function(e,t,n){var r=e.l+t,a=ude(e);a.r=n["!row"];var i=[a,e.read_shift(1),"b"];if(n.cellFormula){e.l+=2;var o=tpe(e,r-e.l,n);i[3]=$fe(o,0,a,n.supbooks,n)}else e.l=r;return i}},11:{f:function(e,t,n){var r=e.l+t,a=ude(e);a.r=n["!row"];var i=[a,e.read_shift(1),"e"];if(n.cellFormula){e.l+=2;var o=tpe(e,r-e.l,n);i[3]=$fe(o,0,a,n.supbooks,n)}else e.l=r;return i}},12:{f:function(e){return[dde(e)]}},13:{f:function(e){return[dde(e),xde(e),"n"]}},14:{f:function(e){return[dde(e),e.read_shift(1),"e"]}},15:{f:function(e){return[dde(e),e.read_shift(1),"b"]}},16:{f:kpe},17:{f:function(e){return[dde(e),rde(e),"str"]}},18:{f:function(e){return[dde(e),e.read_shift(4),"s"]}},19:{f:ode},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,n){var r=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=gde(e),o=npe(e,0,n),s=mde(e);e.l=r;var l={Name:i,Ptg:o};return a<268435455&&(l.Sheet=a),s&&(l.Comment=s),l}},40:{},42:{},43:{f:function(e,t,n){var r={};r.sz=e.read_shift(2)/20;var a=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(a.fItalic&&(r.italic=1),a.fCondense&&(r.condense=1),a.fExtend&&(r.extend=1),a.fShadow&&(r.shadow=1),a.fOutline&&(r.outline=1),a.fStrikeout&&(r.strike=1),700===e.read_shift(2)&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var i=e.read_shift(1);0!=i&&(r.underline=i);var o=e.read_shift(1);o>0&&(r.family=o);var s=e.read_shift(1);switch(s>0&&(r.charset=s),e.l++,r.color=function(e){var t={},n=e.read_shift(1)>>>1,r=e.read_shift(1),a=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),s=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=r;var l=Dde[r];l&&(t.rgb=Whe(l));break;case 2:t.rgb=Whe([i,o,s]);break;case 3:t.theme=r}return 0!=a&&(t.tint=a>0?a/32767:a/32768),t}(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=rde(e),r}},44:{f:function(e,t){return[e.read_shift(2),rde(e)]}},45:{f:rfe},46:{f:sfe},47:{f:function(e,t){var n=e.l+t,r=e.read_shift(2),a=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:a}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Mhe},62:{f:function(e){return[ude(e),ode(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=qce(n);var r=e.read_shift(1);return 2&r&&(t.l="1"),8&r&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Dce,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var n={},r=e[e.l];return++e.l,n.above=!(64&r),n.left=!(128&r),e.l+=18,n.name=fde(e,t-19),n}},148:{f:xpe,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var a=t>8?rde(e):"";return a.length>0&&(n.CodeName=a),n.autoCompressPictures=!!(65536&r),n.backupFile=!!(64&r),n.checkCompatibility=!!(4096&r),n.date1904=!!(1&r),n.filterPrivacy=!!(8&r),n.hidePivotFieldList=!!(1024&r),n.promptedSolutions=!!(16&r),n.publishItems=!!(2048&r),n.refreshAllConnections=!!(262144&r),n.saveExternalLinkValues=!!(128&r),n.showBorderUnselectedTables=!!(4&r),n.showInkAnnotation=!!(32&r),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(32768&r),n.updateLinks=["userSet","never","always"][r>>8&3],n}},154:{},155:{},156:{f:function(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=yde(e,t-8),n.name=rde(e),n}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:Sde},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Spe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:rde(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:yde},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Ehe},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,n){var r=e.l+t,a=kde(e),i=e.read_shift(1),o=[a];if(o[2]=i,n.cellFormula){var s=epe(e,r-e.l,n);o[1]=s}else e.l=r;return o}},427:{f:function(e,t,n){var r=e.l+t,a=[Sde(e,16)];if(n.cellFormula){var i=rpe(e,r-e.l,n);a[1]=i,e.l=r}else e.l=r;return a}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return Epe.forEach((function(n){t[n]=Ede(e)})),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var n=e.l+t,r=Sde(e,16),a=mde(e),i=rde(e),o=rde(e),s=rde(e);e.l=n;var l={rfx:r,relId:a,loc:i,display:s};return o&&(l.Tooltip=o),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:yde},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:bfe},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var n=Sde(e,16);return t.rfx=n.s,t.ref=qce(n.s),e.l+=16,t}},636:{T:-1},637:{f:sde},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:rde(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Qpe(e,t,n,r){var a=t;if(!isNaN(a)){var i=r||(n||[]).length||0,o=e.next(4);o.write_shift(2,a),o.write_shift(2,i),i>0&&bce(n)&&e.push(n)}}function eme(e,t,n){return e||(e=Lce(7)),e.write_shift(2,t),e.write_shift(2,n),e.write_shift(2,0),e.write_shift(1,0),e}function tme(e,t,n,r){if(null!=t.v)switch(t.t){case"d":case"n":var a="d"==t.t?due(bue(t.v)):t.v;return void(a==(0|a)&&a>=0&&a<65536?Qpe(e,2,function(e,t,n){var r=Lce(9);return eme(r,e,t),r.write_shift(2,n),r}(n,r,a)):Qpe(e,3,function(e,t,n){var r=Lce(15);return eme(r,e,t),r.write_shift(8,n,"f"),r}(n,r,a)));case"b":case"e":return void Qpe(e,5,function(e,t,n,r){var a=Lce(9);return eme(a,e,t),lhe(n,r||"b",a),a}(n,r,t.v,t.t));case"s":case"str":return void Qpe(e,4,function(e,t,n){var r=Lce(8+2*n.length);return eme(r,e,t),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(n,r,(t.v||"").slice(0,255)))}Qpe(e,1,eme(null,n,r))}function nme(e,t){var n=t||{};null!=Yse&&null==n.dense&&(n.dense=Yse);for(var r=Pce(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==n.sheet&&(a=i);if(0==a&&n.sheet&&e.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return Qpe(r,4==n.biff?1033:3==n.biff?521:9,whe(0,16,n)),function(e,t,n,r){var a,i=Array.isArray(t),o=Kce(t["!ref"]||"A1"),s="",l=[];if(o.e.c>255||o.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),a=Yce(o)}for(var u=o.s.r;u<=o.e.r;++u){s=Vce(u);for(var c=o.s.c;c<=o.e.c;++c){u===o.s.r&&(l[c]=Hce(c)),a=l[c]+s;var d=i?(t[u]||[])[c]:t[a];d&&tme(e,d,u,c)}}}(r,e.Sheets[e.SheetNames[a]],0,n),Qpe(r,10),r.end()}function rme(e,t,n){Qpe(e,49,function(e,t){var n=e.name||"Arial",r=t&&5==t.biff,a=Lce(r?15+n.length:16+2*n.length);return a.write_shift(2,20*(e.sz||12)),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,n.length),r||a.write_shift(1,1),a.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),a}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},n))}function ame(e,t){if(t){var n=0;t.forEach((function(t,r){++n<=256&&t&&Qpe(e,125,function(e,t){var n=Lce(12);n.write_shift(2,t),n.write_shift(2,t),n.write_shift(2,256*e.width),n.write_shift(2,0);var r=0;return e.hidden&&(r|=1),n.write_shift(1,r),r=e.level||0,n.write_shift(1,r),n.write_shift(2,0),n}(dpe(r,t),r))}))}}function ime(e,t,n,r,a){var i=16+fpe(a.cellXfs,t,a);if(null!=t.v||t.bf)if(t.bf)Qpe(e,6,Jfe(t,n,r,0,i));else switch(t.t){case"d":case"n":Qpe(e,515,function(e,t,n,r){var a=Lce(14);return ghe(e,t,r,a),Cde(n,a),a}(n,r,"d"==t.t?due(bue(t.v)):t.v,i));break;case"b":case"e":Qpe(e,517,function(e,t,n,r,a,i){var o=Lce(8);return ghe(e,t,r,o),lhe(n,i,o),o}(n,r,t.v,i,0,t.t));break;case"s":case"str":if(a.bookSST)Qpe(e,253,function(e,t,n,r){var a=Lce(10);return ghe(e,t,r,a),a.write_shift(4,n),a}(n,r,cpe(a.Strings,t.v,a.revStrings),i));else Qpe(e,516,function(e,t,n,r,a){var i=!a||8==a.biff,o=Lce(+i+8+(1+i)*n.length);return ghe(e,t,r,o),o.write_shift(2,n.length),i&&o.write_shift(1,1),o.write_shift((1+i)*n.length,n,i?"utf16le":"sbcs"),o}(n,r,(t.v||"").slice(0,255),i,a));break;default:Qpe(e,513,ghe(n,r,i))}else Qpe(e,513,ghe(n,r,i))}function ome(e,t,n){var r,a=Pce(),i=n.SheetNames[e],o=n.Sheets[i]||{},s=(n||{}).Workbook||{},l=(s.Sheets||[])[e]||{},u=Array.isArray(o),c=8==t.biff,d="",h=[],f=Kce(o["!ref"]||"A1"),p=c?65536:16384;if(f.e.c>255||f.e.r>=p){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,p-1)}Qpe(a,2057,whe(0,16,t)),Qpe(a,13,she(1)),Qpe(a,12,she(100)),Qpe(a,15,ihe(!0)),Qpe(a,17,ihe(!1)),Qpe(a,16,Cde(.001)),Qpe(a,95,ihe(!0)),Qpe(a,42,ihe(!1)),Qpe(a,43,ihe(!1)),Qpe(a,130,she(1)),Qpe(a,128,function(e){var t=Lce(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),Qpe(a,131,ihe(!1)),Qpe(a,132,ihe(!1)),c&&ame(a,o["!cols"]),Qpe(a,512,function(e,t){var n=8!=t.biff&&t.biff?2:4,r=Lce(2*n+6);return r.write_shift(n,e.s.r),r.write_shift(n,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}(f,t)),c&&(o["!links"]=[]);for(var m=f.s.r;m<=f.e.r;++m){d=Vce(m);for(var v=f.s.c;v<=f.e.c;++v){m===f.s.r&&(h[v]=Hce(v)),r=h[v]+d;var g=u?(o[m]||[])[v]:o[r];g&&(ime(a,g,m,v,t),c&&g.l&&o["!links"].push([r,g.l]))}}var y=l.CodeName||l.name||i;return c&&Qpe(a,574,function(e){var t=Lce(18),n=1718;return e&&e.RTL&&(n|=64),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((s.Views||[])[0])),c&&(o["!merges"]||[]).length&&Qpe(a,229,function(e){var t=Lce(2+8*e.length);t.write_shift(2,e.length);for(var n=0;n<e.length;++n)xhe(e[n],t);return t}(o["!merges"])),c&&function(e,t){for(var n=0;n<t["!links"].length;++n){var r=t["!links"][n];Qpe(e,440,Che(r)),r[1].Tooltip&&Qpe(e,2048,_he(r))}delete t["!links"]}(a,o),Qpe(a,442,phe(y)),c&&function(e,t){var n=Lce(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),Qpe(e,2151,n),(n=Lce(39)).write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),xhe(Kce(t["!ref"]||"A1"),n),n.write_shift(4,4),Qpe(e,2152,n)}(a,o),Qpe(a,10),a.end()}function sme(e,t,n){var r=Pce(),a=(e||{}).Workbook||{},i=a.Sheets||[],o=a.WBProps||{},s=8==n.biff,l=5==n.biff;(Qpe(r,2057,whe(0,5,n)),"xla"==n.bookType&&Qpe(r,135),Qpe(r,225,s?she(1200):null),Qpe(r,193,function(e,t){t||(t=Lce(e));for(var n=0;n<e;++n)t.write_shift(1,0);return t}(2)),l&&Qpe(r,191),l&&Qpe(r,192),Qpe(r,226),Qpe(r,92,function(e,t){var n=!t||8==t.biff,r=Lce(n?112:54);for(r.write_shift(8==t.biff?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}(0,n)),Qpe(r,66,she(s?1200:1252)),s&&Qpe(r,353,she(0)),s&&Qpe(r,448),Qpe(r,317,function(e){for(var t=Lce(2*e),n=0;n<e;++n)t.write_shift(2,n+1);return t}(e.SheetNames.length)),s&&e.vbaraw&&Qpe(r,211),s&&e.vbaraw)&&Qpe(r,442,phe(o.CodeName||"ThisWorkbook"));Qpe(r,156,she(17)),Qpe(r,25,ihe(!1)),Qpe(r,18,ihe(!1)),Qpe(r,19,she(0)),s&&Qpe(r,431,ihe(!1)),s&&Qpe(r,444,she(0)),Qpe(r,61,function(){var e=Lce(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),Qpe(r,64,ihe(!1)),Qpe(r,141,she(0)),Qpe(r,34,ihe("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&Fue(e.Workbook.WBProps.date1904)?"true":"false"}(e))),Qpe(r,14,ihe(!0)),s&&Qpe(r,439,ihe(!1)),Qpe(r,218,she(0)),rme(r,0,n),function(e,t,n){t&&[[5,8],[23,26],[41,44],[50,392]].forEach((function(r){for(var a=r[0];a<=r[1];++a)null!=t[a]&&Qpe(e,1054,She(a,t[a],n))}))}(r,e.SSF,n),function(e,t){for(var n=0;n<16;++n)Qpe(e,224,The({numFmtId:0,style:!0},0,t));t.cellXfs.forEach((function(n){Qpe(e,224,The(n,0,t))}))}(r,n),s&&Qpe(r,352,ihe(!1));var u=r.end(),c=Pce();s&&Qpe(c,140,function(e){return e||(e=Lce(4)),e.write_shift(2,1),e.write_shift(2,1),e}()),s&&n.Strings&&function(e,t,n,r){var a=r||(n||[]).length||0;if(a<=8224)return Qpe(e,t,n,a);var i=t;if(!isNaN(i)){for(var o=n.parts||[],s=0,l=0,u=0;u+(o[s]||8224)<=8224;)u+=o[s]||8224,s++;var c=e.next(4);for(c.write_shift(2,i),c.write_shift(2,u),e.push(n.slice(l,l+u)),l+=u;l<a;){for((c=e.next(4)).write_shift(2,60),u=0;u+(o[s]||8224)<=8224;)u+=o[s]||8224,s++;c.write_shift(2,u),e.push(n.slice(l,l+u)),l+=u}}}(c,252,function(e,t){var n=Lce(8);n.write_shift(4,e.Count),n.write_shift(4,e.Unique);for(var r=[],a=0;a<e.length;++a)r[a]=che(e[a]);var i=ole([n].concat(r));return i.parts=[n.length].concat(r.map((function(e){return e.length}))),i}(n.Strings)),Qpe(c,10);var d=c.end(),h=Pce(),f=0,p=0;for(p=0;p<e.SheetNames.length;++p)f+=(s?12:11)+(s?2:1)*e.SheetNames[p].length;var m=u.length+f+d.length;for(p=0;p<e.SheetNames.length;++p){Qpe(h,133,khe({pos:m,hs:(i[p]||{}).Hidden||0,dt:0,name:e.SheetNames[p]},n)),m+=t[p].length}var v=h.end();if(f!=v.length)throw new Error("BS8 "+f+" != "+v.length);var g=[];return u.length&&g.push(u),v.length&&g.push(v),d.length&&g.push(d),ole(g)}function lme(e,t){for(var n=0;n<=e.SheetNames.length;++n){var r=e.Sheets[e.SheetNames[n]];if(r&&r["!ref"])Xce(r["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}var a=t||{};switch(a.biff||2){case 8:case 5:return function(e,t){var n=t||{},r=[];e&&!e.SSF&&(e.SSF=wue(yle)),e&&e.SSF&&(Qle(),Jle(e.SSF),n.revssf=uue(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,jme(n),n.cellXfs=[],fpe(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)r[r.length]=ome(a,n,e);return r.unshift(sme(e,r,n)),ole(r)}(e,t);case 4:case 3:case 2:return nme(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function ume(e,t,n,r){for(var a=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var s=0,l=0,u=0;u<a.length;++u)if(!(a[u].s.r>n||a[u].s.c>o)&&!(a[u].e.r<n||a[u].e.c<o)){if(a[u].s.r<n||a[u].s.c<o){s=-1;break}s=a[u].e.r-a[u].s.r+1,l=a[u].e.c-a[u].s.c+1;break}if(!(s<0)){var c=qce({r:n,c:o}),d=r.dense?(e[n]||[])[o]:e[c],h=d&&null!=d.v&&(d.h||Pue(d.w||(Jce(d),d.w)||""))||"",f={};s>1&&(f.rowspan=s),l>1&&(f.colspan=l),r.editable?h='<span contenteditable="true">'+h+"</span>":d&&(f["data-t"]=d&&d.t||"z",null!=d.v&&(f["data-v"]=d.v),null!=d.z&&(f["data-z"]=d.z),d.l&&"#"!=(d.l.Target||"#").charAt(0)&&(h='<a href="'+d.l.Target+'">'+h+"</a>")),f.id=(r.id||"sjs")+"-"+c,i.push(Xue("td",h,f))}}return"<tr>"+i.join("")+"</tr>"}var cme='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',dme="</body></html>";function hme(e,t,n){return[].join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function fme(e,t){var n=t||{},r=null!=n.header?n.header:cme,a=null!=n.footer?n.footer:dme,i=[r],o=Xce(e["!ref"]);n.dense=Array.isArray(e),i.push(hme(0,0,n));for(var s=o.s.r;s<=o.e.r;++s)i.push(ume(e,o,s,n));return i.push("</table>"+a),i.join("")}function pme(e,t,n){var r=n||{};null!=Yse&&(r.dense=Yse);var a=0,i=0;if(null!=r.origin)if("number"==typeof r.origin)a=r.origin;else{var o="string"==typeof r.origin?Gce(r.origin):r.origin;a=o.r,i=o.c}var s=t.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,s.length),u={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var c=Xce(e["!ref"]);u.s.r=Math.min(u.s.r,c.s.r),u.s.c=Math.min(u.s.c,c.s.c),u.e.r=Math.max(u.e.r,c.e.r),u.e.c=Math.max(u.e.c,c.e.c),-1==a&&(u.e.r=a=c.e.r+1)}var d=[],h=0,f=e["!rows"]||(e["!rows"]=[]),p=0,m=0,v=0,g=0,y=0,b=0;for(e["!cols"]||(e["!cols"]=[]);p<s.length&&m<l;++p){var x=s[p];if(vme(x)){if(r.display)continue;f[m]={hidden:!0}}var w=x.children;for(v=g=0;v<w.length;++v){var k=w[v];if(!r.display||!vme(k)){var S=k.hasAttribute("data-v")?k.getAttribute("data-v"):k.hasAttribute("v")?k.getAttribute("v"):Zue(k.innerHTML),T=k.getAttribute("data-z")||k.getAttribute("z");for(h=0;h<d.length;++h){var E=d[h];E.s.c==g+i&&E.s.r<m+a&&m+a<=E.e.r&&(g=E.e.c+1-i,h=-1)}b=+k.getAttribute("colspan")||1,((y=+k.getAttribute("rowspan")||1)>1||b>1)&&d.push({s:{r:m+a,c:g+i},e:{r:m+a+(y||1)-1,c:g+i+(b||1)-1}});var C={t:"s",v:S},_=k.getAttribute("data-t")||k.getAttribute("t")||"";null!=S&&(0==S.length?C.t=_||"z":r.raw||0==S.trim().length||"s"==_||("TRUE"===S?C={t:"b",v:!0}:"FALSE"===S?C={t:"b",v:!1}:isNaN(Sue(S))?isNaN(Eue(S).getDate())||(C={t:"d",v:bue(S)},r.cellDates||(C={t:"n",v:due(C.v)}),C.z=r.dateNF||yle[14]):C={t:"n",v:Sue(S)})),void 0===C.z&&null!=T&&(C.z=T);var M="",A=k.getElementsByTagName("A");if(A&&A.length)for(var I=0;I<A.length&&(!A[I].hasAttribute("href")||"#"==(M=A[I].getAttribute("href")).charAt(0));++I);M&&"#"!=M.charAt(0)&&(C.l={Target:M}),r.dense?(e[m+a]||(e[m+a]=[]),e[m+a][g+i]=C):e[qce({c:g+i,r:m+a})]=C,u.e.c<g+i&&(u.e.c=g+i),g+=b}}++m}return d.length&&(e["!merges"]=(e["!merges"]||[]).concat(d)),u.e.r=Math.max(u.e.r,m-1+a),e["!ref"]=Yce(u),m>=l&&(e["!fullref"]=Yce((u.e.r=s.length-p+m-1+a,u))),e}function mme(e,t){return pme((t||{}).dense?[]:{},e,t)}function vme(e){var t="",n=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var gme=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+que({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Mue+t}}(),yme=function(){var e="          <table:table-cell />\n",t=function(t,n,r){var a=[];a.push('      <table:table table:name="'+Oue(n.SheetNames[r])+'" table:style-name="ta1">\n');var i=0,o=0,s=Xce(t["!ref"]||"A1"),l=t["!merges"]||[],u=0,c=Array.isArray(t);if(t["!cols"])for(o=0;o<=s.e.c;++o)a.push("        <table:table-column"+(t["!cols"][o]?' table:style-name="co'+t["!cols"][o].ods+'"':"")+"></table:table-column>\n");var d="",h=t["!rows"]||[];for(i=0;i<s.s.r;++i)d=h[i]?' table:style-name="ro'+h[i].ods+'"':"",a.push("        <table:table-row"+d+"></table:table-row>\n");for(;i<=s.e.r;++i){for(d=h[i]?' table:style-name="ro'+h[i].ods+'"':"",a.push("        <table:table-row"+d+">\n"),o=0;o<s.s.c;++o)a.push(e);for(;o<=s.e.c;++o){var f=!1,p={},m="";for(u=0;u!=l.length;++u)if(!(l[u].s.c>o)&&!(l[u].s.r>i)&&!(l[u].e.c<o)&&!(l[u].e.r<i)){l[u].s.c==o&&l[u].s.r==i||(f=!0),p["table:number-columns-spanned"]=l[u].e.c-l[u].s.c+1,p["table:number-rows-spanned"]=l[u].e.r-l[u].s.r+1;break}if(f)a.push("          <table:covered-table-cell/>\n");else{var v=qce({r:i,c:o}),g=c?(t[i]||[])[o]:t[v];if(g&&g.f&&(p["table:formula"]=Oue(spe(g.f)),g.F&&g.F.slice(0,v.length)==v)){var y=Xce(g.F);p["table:number-matrix-columns-spanned"]=y.e.c-y.s.c+1,p["table:number-matrix-rows-spanned"]=y.e.r-y.s.r+1}if(g){switch(g.t){case"b":m=g.v?"TRUE":"FALSE",p["office:value-type"]="boolean",p["office:boolean-value"]=g.v?"true":"false";break;case"n":m=g.w||String(g.v||0),p["office:value-type"]="float",p["office:value"]=g.v||0;break;case"s":case"str":m=null==g.v?"":g.v,p["office:value-type"]="string";break;case"d":m=g.w||bue(g.v).toISOString(),p["office:value-type"]="date",p["office:date-value"]=bue(g.v).toISOString(),p["table:style-name"]="ce1";break;default:a.push(e);continue}var b=Oue(m).replace(/  +/g,(function(e){return'<text:s text:c="'+e.length+'"/>'})).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>");if(g.l&&g.l.Target){var x=g.l.Target;"#"==(x="#"==x.charAt(0)?"#"+lpe(x.slice(1)):x).charAt(0)||x.match(/^\w+:/)||(x="../"+x),b=Xue("text:a",b,{"xlink:href":x.replace(/&/g,"&amp;")})}a.push("          "+Xue("table:table-cell",Xue("text:p",b,{}),p)+"\n")}else a.push(e)}}a.push("        </table:table-row>\n")}return a.push("      </table:table>\n"),a.join("")};return function(e,n){var r=[Mue],a=que({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),i=que({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==n.bookType?(r.push("<office:document"+a+i+">\n"),r.push(Zde().replace(/office:document-meta/g,"office:meta"))):r.push("<office:document-content"+a+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var n=0;t.SheetNames.map((function(e){return t.Sheets[e]})).forEach((function(t){if(t&&t["!cols"])for(var r=0;r<t["!cols"].length;++r)if(t["!cols"][r]){var a=t["!cols"][r];if(null==a.width&&null==a.wpx&&null==a.wch)continue;Xhe(a),a.ods=n;var i=t["!cols"][r].wpx+"px";e.push('  <style:style style:name="co'+n+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+i+'"/>\n'),e.push("  </style:style>\n"),++n}}));var r=0;t.SheetNames.map((function(e){return t.Sheets[e]})).forEach((function(t){if(t&&t["!rows"])for(var n=0;n<t["!rows"].length;++n)if(t["!rows"][n]){t["!rows"][n].ods=r;var a=t["!rows"][n].hpx+"px";e.push('  <style:style style:name="ro'+r+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+a+'"/>\n'),e.push("  </style:style>\n"),++r}})),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(r,e),r.push("  <office:body>\n"),r.push("    <office:spreadsheet>\n");for(var o=0;o!=e.SheetNames.length;++o)r.push(t(e.Sheets[e.SheetNames[o]],e,o));return r.push("    </office:spreadsheet>\n"),r.push("  </office:body>\n"),"fods"==n.bookType?r.push("</office:document>"):r.push("</office:document-content>"),r.join("")}}();function bme(e,t){if("fods"==t.bookType)return yme(e,t);var n=_ue(),r="",a=[],i=[];return Cue(n,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),Cue(n,r="content.xml",yme(e,t)),a.push([r,"text/xml"]),i.push([r,"ContentFile"]),Cue(n,r="styles.xml",gme(e,t)),a.push([r,"text/xml"]),i.push([r,"StylesFile"]),Cue(n,r="meta.xml",Mue+Zde()),a.push([r,"text/xml"]),i.push([r,"MetadataFile"]),Cue(n,r="manifest.rdf",function(e){var t,n,r=[Mue];r.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var a=0;a!=e.length;++a)r.push(Vde(e[a][0],e[a][1])),r.push((t="",n=e[a][0],['  <rdf:Description rdf:about="'+t+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+n+'"/>\n',"  </rdf:Description>\n"].join("")));return r.push(Vde("","Document","pkg")),r.push("</rdf:RDF>"),r.join("")}(i)),a.push([r,"application/rdf+xml"]),Cue(n,r="META-INF/manifest.xml",function(e){var t=[Mue];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var n=0;n<e.length;++n)t.push('  <manifest:file-entry manifest:full-path="'+e[n][0]+'" manifest:media-type="'+e[n][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(a)),n}function xme(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function wme(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):rle(Vue(e))}function kme(e){var t=e.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(e,r),r+=e.length})),n}function Sme(e,t){var n=t?t[0]:0,r=127&e[n];e:if(e[n++]>=128){if(r|=(127&e[n])<<7,e[n++]<128)break e;if(r|=(127&e[n])<<14,e[n++]<128)break e;if(r|=(127&e[n])<<21,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,28),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,35),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,42),++n,e[n++]<128)break e}return t&&(t[0]=n),r}function Tme(e){var t=new Uint8Array(7);t[0]=127&e;var n=1;e:if(e>127){if(t[n-1]|=128,t[n]=e>>7&127,++n,e<=16383)break e;if(t[n-1]|=128,t[n]=e>>14&127,++n,e<=2097151)break e;if(t[n-1]|=128,t[n]=e>>21&127,++n,e<=268435455)break e;if(t[n-1]|=128,t[n]=e/256>>>21&127,++n,e<=34359738367)break e;if(t[n-1]|=128,t[n]=e/65536>>>21&127,++n,e<=4398046511103)break e;t[n-1]|=128,t[n]=e/16777216>>>21&127,++n}return t.slice(0,n)}function Eme(e){var t=0,n=127&e[t];e:if(e[t++]>=128){if(n|=(127&e[t])<<7,e[t++]<128)break e;if(n|=(127&e[t])<<14,e[t++]<128)break e;if(n|=(127&e[t])<<21,e[t++]<128)break e;n|=(127&e[t])<<28}return n}function Cme(e){for(var t=[],n=[0];n[0]<e.length;){var r,a=n[0],i=Sme(e,n),o=7&i,s=0;if(0==(i=Math.floor(i/8)))break;switch(o){case 0:for(var l=n[0];e[n[0]++]>=128;);r=e.slice(l,n[0]);break;case 5:s=4,r=e.slice(n[0],n[0]+s),n[0]+=s;break;case 1:s=8,r=e.slice(n[0],n[0]+s),n[0]+=s;break;case 2:s=Sme(e,n),r=e.slice(n[0],n[0]+s),n[0]+=s;break;default:throw new Error("PB Type ".concat(o," for Field ").concat(i," at offset ").concat(a))}var u={data:r,type:o};null==t[i]?t[i]=[u]:t[i].push(u)}return t}function _me(e){var t=[];return e.forEach((function(e,n){e.forEach((function(e){e.data&&(t.push(Tme(8*n+e.type)),2==e.type&&t.push(Tme(e.data.length)),t.push(e.data))}))})),kme(t)}function Mme(e){for(var t,n=[],r=[0];r[0]<e.length;){var a=Sme(e,r),i=Cme(e.slice(r[0],r[0]+a));r[0]+=a;var o={id:Eme(i[1][0].data),messages:[]};i[2].forEach((function(t){var n=Cme(t.data),a=Eme(n[3][0].data);o.messages.push({meta:n,data:e.slice(r[0],r[0]+a)}),r[0]+=a})),(null==(t=i[3])?void 0:t[0])&&(o.merge=Eme(i[3][0].data)>>>0>0),n.push(o)}return n}function Ame(e){var t=[];return e.forEach((function(e){var n=[];n[1]=[{data:Tme(e.id),type:0}],n[2]=[],null!=e.merge&&(n[3]=[{data:Tme(+!!e.merge),type:0}]);var r=[];e.messages.forEach((function(e){r.push(e.data),e.meta[3]=[{type:0,data:Tme(e.data.length)}],n[2].push({data:_me(e.meta),type:2})}));var a=_me(n);t.push(Tme(a.length)),t.push(a),r.forEach((function(e){return t.push(e)}))})),kme(t)}function Ime(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],r=Sme(t,n),a=[];n[0]<t.length;){var i=3&t[n[0]];if(0!=i){var o=0,s=0;if(1==i?(s=4+(t[n[0]]>>2&7),o=(224&t[n[0]++])<<3,o|=t[n[0]++]):(s=1+(t[n[0]++]>>2),2==i?(o=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(o=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),a=[kme(a)],0==o)throw new Error("Invalid offset 0");if(o>a[0].length)throw new Error("Invalid offset beyond length");if(s>=o)for(a.push(a[0].slice(-o)),s-=o;s>=a[a.length-1].length;)a.push(a[a.length-1]),s-=a[a.length-1].length;a.push(a[0].slice(-o,-o+s))}else{var l=t[n[0]++]>>2;if(l<60)++l;else{var u=l-59;l=t[n[0]],u>1&&(l|=t[n[0]+1]<<8),u>2&&(l|=t[n[0]+2]<<16),u>3&&(l|=t[n[0]+3]<<24),l>>>=0,l++,n[0]+=u}a.push(t.slice(n[0],n[0]+l)),n[0]+=l}}var c=kme(a);if(c.length!=r)throw new Error("Unexpected length: ".concat(c.length," != ").concat(r));return c}function Nme(e){for(var t=[],n=0;n<e.length;){var r=e[n++],a=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(Ime(r,e.slice(n,n+a))),n+=a}if(n!==e.length)throw new Error("data is not a valid framed stream!");return kme(t)}function Rme(e){for(var t=[],n=0;n<e.length;){var r=Math.min(e.length-n,268435455),a=new Uint8Array(4);t.push(a);var i=Tme(r),o=i.length;t.push(i),r<=60?(o++,t.push(new Uint8Array([r-1<<2]))):r<=256?(o+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(o+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(o+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(o+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(e.slice(n,n+r)),o+=r,a[0]=0,a[1]=255&o,a[2]=o>>8&255,a[3]=o>>16&255,n+=r}return kme(t)}function Ome(e,t){var n=new Uint8Array(32),r=xme(n),a=12,i=0;switch(n[0]=5,e.t){case"n":n[1]=2,function(e,t,n){var r=Math.floor(0==n?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,a=n/Math.pow(10,r-6176);e[t+15]|=r>>7,e[t+14]|=(127&r)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=255&a;e[t+15]|=n>=0?0:128}(n,a,e.v),i|=1,a+=16;break;case"b":n[1]=6,r.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[1]=3,r.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,i,!0),n.slice(0,a)}function Dme(e,t){var n=new Uint8Array(32),r=xme(n),a=12,i=0;switch(n[0]=3,e.t){case"n":n[2]=2,r.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":n[2]=6,r.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[2]=3,r.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,i,!0),n.slice(0,a)}function Lme(e){return Sme(Cme(e)[1][0].data)}function Pme(e,t,n){var r,a,i,o;if(!(null==(r=e[6])?void 0:r[0])||!(null==(a=e[7])?void 0:a[0]))throw"Mutation only works on post-BNC storages!";if((null==(o=null==(i=e[8])?void 0:i[0])?void 0:o.data)&&Eme(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var s=0,l=xme(e[7][0].data),u=0,c=[],d=xme(e[4][0].data),h=0,f=[],p=0;p<t.length;++p)if(null!=t[p]){var m,v;switch(l.setUint16(2*p,u,!0),d.setUint16(2*p,h,!0),typeof t[p]){case"string":m=Ome({t:"s",v:t[p]},n),v=Dme({t:"s",v:t[p]},n);break;case"number":m=Ome({t:"n",v:t[p]},n),v=Dme({t:"n",v:t[p]},n);break;case"boolean":m=Ome({t:"b",v:t[p]},n),v=Dme({t:"b",v:t[p]},n);break;default:throw new Error("Unsupported value "+t[p])}c.push(m),u+=m.length,f.push(v),h+=v.length,++s}else l.setUint16(2*p,65535,!0),d.setUint16(2*p,65535);for(e[2][0].data=Tme(s);p<e[7][0].data.length/2;++p)l.setUint16(2*p,65535,!0),d.setUint16(2*p,65535,!0);return e[6][0].data=kme(c),e[3][0].data=kme(f),s}function Fme(e){return function(t){for(var n=0;n!=e.length;++n){var r=e[n];void 0===t[r[0]]&&(t[r[0]]=r[1]),"n"===r[2]&&(t[r[0]]=Number(t[r[0]]))}}}function jme(e){Fme([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function zme(e,t){return"ods"==t.bookType?bme(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Xce(n["!ref"]);r.s.r=r.s.c=0;var a=!1;r.e.c>9&&(a=!0,r.e.c=9),r.e.r>49&&(a=!0,r.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Yce(r)));var i=Kme(n,{range:r,header:1}),o=["~Sh33tJ5~"];i.forEach((function(e){return e.forEach((function(e){"string"==typeof e&&o.push(e)}))}));var s={},l=[],u=nue.read(t.numbers,{type:"base64"});u.FileIndex.map((function(e,t){return[e,u.FullPaths[t]]})).forEach((function(e){var t=e[0],n=e[1];2==t.type&&t.name.match(/\.iwa/)&&Mme(Nme(t.content)).forEach((function(e){l.push(e.id),s[e.id]={deps:[],location:n,type:Eme(e.messages[0].meta[1][0].data)}}))})),l.sort((function(e,t){return e-t}));var c=l.filter((function(e){return e>1})).map((function(e){return[e,Tme(e)]}));u.FileIndex.map((function(e,t){return[e,u.FullPaths[t]]})).forEach((function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&Mme(Nme(t.content)).forEach((function(e){e.messages.forEach((function(t){c.forEach((function(t){e.messages.some((function(e){return 11006!=Eme(e.meta[1][0].data)&&function(e,t){e:for(var n=0;n<=e.length-t.length;++n){for(var r=0;r<t.length;++r)if(e[n+r]!=t[r])continue e;return!0}return!1}(e.data,t[1])}))&&s[t[0]].deps.push(e.id)}))}))}))}));for(var d,h=nue.find(u,s[1].location),f=Mme(Nme(h.content)),p=0;p<f.length;++p){var m=f[p];1==m.id&&(d=m)}var v=Lme(Cme(d.messages[0].data)[1][0].data);for(f=Mme(Nme((h=nue.find(u,s[v].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==v&&(d=m);for(v=Lme(Cme(d.messages[0].data)[2][0].data),f=Mme(Nme((h=nue.find(u,s[v].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==v&&(d=m);for(v=Lme(Cme(d.messages[0].data)[2][0].data),f=Mme(Nme((h=nue.find(u,s[v].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==v&&(d=m);var g=Cme(d.messages[0].data);g[6][0].data=Tme(r.e.r+1),g[7][0].data=Tme(r.e.c+1);for(var y=Lme(g[46][0].data),b=nue.find(u,s[y].location),x=Mme(Nme(b.content)),w=0;w<x.length&&x[w].id!=y;++w);if(x[w].id!=y)throw"Bad ColumnRowUIDMapArchive";var k=Cme(x[w].messages[0].data);k[1]=[],k[2]=[],k[3]=[];for(var S=0;S<=r.e.c;++S){var T=[];T[1]=T[2]=[{type:0,data:Tme(S+420690)}],k[1].push({type:2,data:_me(T)}),k[2].push({type:0,data:Tme(S)}),k[3].push({type:0,data:Tme(S)})}k[4]=[],k[5]=[],k[6]=[];for(var E=0;E<=r.e.r;++E)(T=[])[1]=T[2]=[{type:0,data:Tme(E+726270)}],k[4].push({type:2,data:_me(T)}),k[5].push({type:0,data:Tme(E)}),k[6].push({type:0,data:Tme(E)});x[w].messages[0].data=_me(k),b.content=Rme(Ame(x)),b.size=b.content.length,delete g[46];var C=Cme(g[4][0].data);C[7][0].data=Tme(r.e.r+1);var _=Lme(Cme(C[1][0].data)[2][0].data);if((x=Mme(Nme((b=nue.find(u,s[_].location)).content)))[0].id!=_)throw"Bad HeaderStorageBucket";var M=Cme(x[0].messages[0].data);for(E=0;E<i.length;++E){var A=Cme(M[2][0].data);A[1][0].data=Tme(E),A[4][0].data=Tme(i[E].length),M[2][E]={type:M[2][0].type,data:_me(A)}}x[0].messages[0].data=_me(M),b.content=Rme(Ame(x)),b.size=b.content.length;var I=Lme(C[2][0].data);if((x=Mme(Nme((b=nue.find(u,s[I].location)).content)))[0].id!=I)throw"Bad HeaderStorageBucket";for(M=Cme(x[0].messages[0].data),S=0;S<=r.e.c;++S)(A=Cme(M[2][0].data))[1][0].data=Tme(S),A[4][0].data=Tme(r.e.r+1),M[2][S]={type:M[2][0].type,data:_me(A)};x[0].messages[0].data=_me(M),b.content=Rme(Ame(x)),b.size=b.content.length;var N=Lme(C[4][0].data);!function(){for(var e,t=nue.find(u,s[N].location),n=Mme(Nme(t.content)),r=0;r<n.length;++r){var a=n[r];a.id==N&&(e=a)}var i=Cme(e.messages[0].data);i[3]=[];var l=[];o.forEach((function(e,t){l[1]=[{type:0,data:Tme(t)}],l[2]=[{type:0,data:Tme(1)}],l[3]=[{type:2,data:wme(e)}],i[3].push({type:2,data:_me(l)})})),e.messages[0].data=_me(i);var c=Rme(Ame(n));t.content=c,t.size=t.content.length}();var R=Cme(C[3][0].data),O=R[1][0];delete R[2];var D=Cme(O.data),L=Lme(D[2][0].data);!function(){for(var e,t=nue.find(u,s[L].location),n=Mme(Nme(t.content)),a=0;a<n.length;++a){var l=n[a];l.id==L&&(e=l)}var c=Cme(e.messages[0].data);delete c[6],delete R[7];var d=new Uint8Array(c[5][0].data);c[5]=[];for(var h=0,f=0;f<=r.e.r;++f){var p=Cme(d);h+=Pme(p,i[f],o),p[1][0].data=Tme(f),c[5].push({data:_me(p),type:2})}c[1]=[{type:0,data:Tme(r.e.c+1)}],c[2]=[{type:0,data:Tme(r.e.r+1)}],c[3]=[{type:0,data:Tme(h)}],c[4]=[{type:0,data:Tme(r.e.r+1)}],e.messages[0].data=_me(c);var m=Rme(Ame(n));t.content=m,t.size=t.content.length}(),O.data=_me(D),C[3][0].data=_me(R),g[4][0].data=_me(C),d.messages[0].data=_me(g);var P=Rme(Ame(f));return h.content=P,h.size=h.content.length,u}(e,t):"xlsb"==t.bookType?function(e,t){mfe=1024,e&&!e.SSF&&(e.SSF=wue(yle));e&&e.SSF&&(Qle(),Jle(e.SSF),t.revssf=uue(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,upe?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xlsb"==t.bookType?"bin":"xml",r=wfe.indexOf(t.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};jme(t=t||{});var i=_ue(),o="",s=0;t.cellXfs=[],fpe(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(o="docProps/core.xml",Cue(i,o,qde(e.Props,t)),a.coreprops.push(o),Wde(t.rels,2,o,zde.CORE_PROPS),o="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],u=0;u<e.SheetNames.length;++u)2!=(e.Workbook.Sheets[u]||{}).Hidden&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,Cue(i,o,Kde(e.Props)),a.extprops.push(o),Wde(t.rels,3,o,zde.EXT_PROPS),e.Custprops!==e.Props&&oue(e.Custprops||{}).length>0&&(Cue(i,o="docProps/custom.xml",$de(e.Custprops)),a.custprops.push(o),Wde(t.rels,4,o,zde.CUST_PROPS));for(s=1;s<=e.SheetNames.length;++s){var c={"!id":{}},d=e.Sheets[e.SheetNames[s-1]];(d||{})["!type"];if(Cue(i,o="xl/worksheets/sheet"+s+"."+n,Wpe(s-1,o,t,e,c)),a.sheets.push(o),Wde(t.wbrels,-1,"worksheets/sheet"+s+"."+n,zde.WS[0]),d){var h=d["!comments"],f=!1,p="";h&&h.length>0&&(Cue(i,p="xl/comments"+s+"."+n,Vpe(h,p,t)),a.comments.push(p),Wde(c,-1,"../comments"+s+"."+n,zde.CMNT),f=!0),d["!legacy"]&&f&&Cue(i,"xl/drawings/vmlDrawing"+s+".vml",vfe(s,d["!comments"])),delete d["!comments"],delete d["!legacy"]}c["!id"].rId1&&Cue(i,Bde(o),Ude(c))}null!=t.Strings&&t.Strings.length>0&&(Cue(i,o="xl/sharedStrings."+n,function(e,t,n){return(".bin"===t.slice(-4)?jhe:Phe)(e,n)}(t.Strings,o,t)),a.strs.push(o),Wde(t.wbrels,-1,"sharedStrings."+n,zde.SST));o="xl/workbook."+n,Cue(i,o,function(e,t,n){return(".bin"===t.slice(-4)?Upe:jpe)(e,n)}(e,o,t)),a.workbooks.push(o),Wde(t.rels,1,o,zde.WB),o="xl/theme/theme1.xml",Cue(i,o,hfe(e.Themes,t)),a.themes.push(o),Wde(t.wbrels,-1,"theme/theme1.xml",zde.THEME),o="xl/styles."+n,Cue(i,o,function(e,t,n){return(".bin"===t.slice(-4)?dfe:Jhe)(e,n)}(e,o,t)),a.styles.push(o),Wde(t.wbrels,-1,"styles."+n,zde.STY),e.vbaraw&&r&&(Cue(i,o="xl/vbaProject.bin",e.vbaraw),a.vba.push(o),Wde(t.wbrels,-1,"vbaProject.bin",zde.VBA));return o="xl/metadata."+n,Cue(i,o,function(e){return(".bin"===e.slice(-4)?ffe:pfe)()}(o)),a.metadata.push(o),Wde(t.wbrels,-1,"metadata."+n,zde.XLMETA),Cue(i,"[Content_Types].xml",jde(a,t)),Cue(i,"_rels/.rels",Ude(t.rels)),Cue(i,"xl/_rels/workbook."+n+".rels",Ude(t.wbrels)),delete t.revssf,delete t.ssf,i}(e,t):Bme(e,t)}function Bme(e,t){mfe=1024,e&&!e.SSF&&(e.SSF=wue(yle)),e&&e.SSF&&(Qle(),Jle(e.SSF),t.revssf=uue(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,upe?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xml",r=wfe.indexOf(t.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};jme(t=t||{});var i=_ue(),o="",s=0;if(t.cellXfs=[],fpe(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),Cue(i,o="docProps/core.xml",qde(e.Props,t)),a.coreprops.push(o),Wde(t.rels,2,o,zde.CORE_PROPS),o="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],u=0;u<e.SheetNames.length;++u)2!=(e.Workbook.Sheets[u]||{}).Hidden&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,Cue(i,o,Kde(e.Props)),a.extprops.push(o),Wde(t.rels,3,o,zde.EXT_PROPS),e.Custprops!==e.Props&&oue(e.Custprops||{}).length>0&&(Cue(i,o="docProps/custom.xml",$de(e.Custprops)),a.custprops.push(o),Wde(t.rels,4,o,zde.CUST_PROPS));var c=["SheetJ5"];for(t.tcid=0,s=1;s<=e.SheetNames.length;++s){var d={"!id":{}},h=e.Sheets[e.SheetNames[s-1]];(h||{})["!type"];if(Cue(i,o="xl/worksheets/sheet"+s+"."+n,ype(s-1,t,e,d)),a.sheets.push(o),Wde(t.wbrels,-1,"worksheets/sheet"+s+"."+n,zde.WS[0]),h){var f=h["!comments"],p=!1,m="";if(f&&f.length>0){var v=!1;f.forEach((function(e){e[1].forEach((function(e){1==e.T&&(v=!0)}))})),v&&(Cue(i,m="xl/threadedComments/threadedComment"+s+"."+n,yfe(f,c,t)),a.threadedcomments.push(m),Wde(d,-1,"../threadedComments/threadedComment"+s+"."+n,zde.TCMNT)),Cue(i,m="xl/comments"+s+"."+n,gfe(f)),a.comments.push(m),Wde(d,-1,"../comments"+s+"."+n,zde.CMNT),p=!0}h["!legacy"]&&p&&Cue(i,"xl/drawings/vmlDrawing"+s+".vml",vfe(s,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&Cue(i,Bde(o),Ude(d))}return null!=t.Strings&&t.Strings.length>0&&(Cue(i,o="xl/sharedStrings."+n,Phe(t.Strings,t)),a.strs.push(o),Wde(t.wbrels,-1,"sharedStrings."+n,zde.SST)),Cue(i,o="xl/workbook."+n,jpe(e)),a.workbooks.push(o),Wde(t.rels,1,o,zde.WB),Cue(i,o="xl/theme/theme1.xml",hfe(e.Themes,t)),a.themes.push(o),Wde(t.wbrels,-1,"theme/theme1.xml",zde.THEME),Cue(i,o="xl/styles."+n,Jhe(e,t)),a.styles.push(o),Wde(t.wbrels,-1,"styles."+n,zde.STY),e.vbaraw&&r&&(Cue(i,o="xl/vbaProject.bin",e.vbaraw),a.vba.push(o),Wde(t.wbrels,-1,"vbaProject.bin",zde.VBA)),Cue(i,o="xl/metadata."+n,pfe()),a.metadata.push(o),Wde(t.wbrels,-1,"metadata."+n,zde.XLMETA),c.length>1&&(Cue(i,o="xl/persons/person.xml",function(e){var t=[Mue,Xue("personList",null,{xmlns:Kue.TCMNT,"xmlns:x":$ue[0]}).replace(/[\/]>/,">")];return e.forEach((function(e,n){t.push(Xue("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:e,providerId:"None"}))})),t.push("</personList>"),t.join("")}(c)),a.people.push(o),Wde(t.wbrels,-1,"persons/person.xml",zde.PEOPLE)),Cue(i,"[Content_Types].xml",jde(a,t)),Cue(i,"_rels/.rels",Ude(t.rels)),Cue(i,"xl/_rels/workbook.xml.rels",Ude(t.wbrels)),delete t.revssf,delete t.ssf,i}function Ume(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=Jse(e.slice(0,12));break;case"binary":n=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function Wme(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return iue(t.file,nue.write(e,{type:Qse?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return nue.write(e,t)}function Vme(e,t){var n={},r=Qse?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(n.compression="DEFLATE"),t.password)n.type=r;else switch(t.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?nue.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!t.compression}):e.generate(n);if("undefined"!==typeof Deno&&"string"==typeof a){if("binary"==t.type||"base64"==t.type)return a;a=new Uint8Array(ale(a))}return t.password&&"undefined"!==typeof encrypt_agile?Wme(encrypt_agile(a,t.password),t):"file"===t.type?iue(t.file,a):"string"==t.type?Wue(a):a}function Zme(e,t,n){n||(n="");var r=n+e;switch(t.type){case"base64":return $se(Vue(r));case"binary":return Vue(r);case"string":return e;case"file":return iue(t.file,r,"utf8");case"buffer":return Qse?ele(r,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(r):Zme(r,{type:"binary"}).split("").map((function(e){return e.charCodeAt(0)}))}throw new Error("Unrecognized type "+t.type)}function Hme(e,t){switch(t.type){case"string":case"base64":case"binary":for(var n="",r=0;r<e.length;++r)n+=String.fromCharCode(e[r]);return"base64"==t.type?$se(n):"string"==t.type?Wue(n):n;case"file":return iue(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Gme(e,t){Zse(),Fpe(e);var n=wue(t||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),"array"==n.type){n.type="binary";var r=Gme(e,n);return n.type="array",ale(r)}var a=0;if(n.sheet&&(a="number"==typeof n.sheet?n.sheet:e.SheetNames.indexOf(n.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return Zme(Ype(e,n),n);case"slk":case"sylk":return Zme(Ihe.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"htm":case"html":return Zme(fme(e.Sheets[e.SheetNames[a]],n),n);case"txt":return function(e,t){switch(t.type){case"base64":return $se(e);case"binary":case"string":return e;case"file":return iue(t.file,e,"binary");case"buffer":return Qse?ele(e,"binary"):e.split("").map((function(e){return e.charCodeAt(0)}))}throw new Error("Unrecognized type "+t.type)}(eve(e.Sheets[e.SheetNames[a]],n),n);case"csv":return Zme(Qme(e.Sheets[e.SheetNames[a]],n),n,"\ufeff");case"dif":return Zme(Nhe.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"dbf":return Hme(Ahe.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"prn":return Zme(Ohe.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"rtf":return Zme(Uhe.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"eth":return Zme(Rhe.from_sheet(e.Sheets[e.SheetNames[a]],n),n);case"fods":return Zme(bme(e,n),n);case"wk1":return Hme(Dhe.sheet_to_wk1(e.Sheets[e.SheetNames[a]],n),n);case"wk3":return Hme(Dhe.book_to_wk3(e,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),Hme(lme(e,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),function(e,t){var n=t||{};return Wme($pe(e,n),n)}(e,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var n=wue(t||{});return Vme(zme(e,n),n)}(e,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function qme(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function Xme(e,t,n){var r=n||{};return r.type="file",r.file=t,qme(r),Gme(e,r)}function Yme(e,t,n,r,a,i,o,s){var l=Vce(n),u=s.defval,c=s.raw||!Object.prototype.hasOwnProperty.call(s,"raw"),d=!0,h=1===a?[]:{};if(1!==a)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:n,enumerable:!1})}catch(UK){h.__rowNum__=n}else h.__rowNum__=n;if(!o||e[n])for(var f=t.s.c;f<=t.e.c;++f){var p=o?e[n][f]:e[r[f]+l];if(void 0!==p&&void 0!==p.t){var m=p.v;switch(p.t){case"z":if(null==m)break;continue;case"e":m=0==m?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=i[f]){if(null==m)if("e"==p.t&&null===m)h[i[f]]=null;else if(void 0!==u)h[i[f]]=u;else{if(!c||null!==m)continue;h[i[f]]=null}else h[i[f]]=c&&("n"!==p.t||"n"===p.t&&!1!==s.rawNumbers)?m:Jce(p,m,s);null!=m&&(d=!1)}}else{if(void 0===u)continue;null!=i[f]&&(h[i[f]]=u)}}return{row:h,isempty:d}}function Kme(e,t){if(null==e||null==e["!ref"])return[];var n={t:"n",v:0},r=0,a=1,i=[],o=0,s="",l={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},c=null!=u.range?u.range:e["!ref"];switch(1===u.header?r=1:"A"===u.header?r=2:Array.isArray(u.header)?r=3:null==u.header&&(r=0),typeof c){case"string":l=Kce(c);break;case"number":(l=Kce(e["!ref"])).s.r=c;break;default:l=c}r>0&&(a=0);var d=Vce(l.s.r),h=[],f=[],p=0,m=0,v=Array.isArray(e),g=l.s.r,y=0,b={};v&&!e[g]&&(e[g]=[]);var x=u.skipHidden&&e["!cols"]||[],w=u.skipHidden&&e["!rows"]||[];for(y=l.s.c;y<=l.e.c;++y)if(!(x[y]||{}).hidden)switch(h[y]=Hce(y),n=v?e[g][y]:e[h[y]+d],r){case 1:i[y]=y-l.s.c;break;case 2:i[y]=h[y];break;case 3:i[y]=u.header[y-l.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),s=o=Jce(n,null,u),m=b[o]||0){do{s=o+"_"+m++}while(b[s]);b[o]=m,b[s]=1}else b[o]=1;i[y]=s}for(g=l.s.r+a;g<=l.e.r;++g)if(!(w[g]||{}).hidden){var k=Yme(e,l,g,h,r,i,v,u);(!1===k.isempty||(1===r?!1!==u.blankrows:u.blankrows))&&(f[p++]=k.row)}return f.length=p,f}var $me=/"/g;function Jme(e,t,n,r,a,i,o,s){for(var l=!0,u=[],c="",d=Vce(n),h=t.s.c;h<=t.e.c;++h)if(r[h]){var f=s.dense?(e[n]||[])[h]:e[r[h]+d];if(null==f)c="";else if(null!=f.v){l=!1,c=""+(s.rawNumbers&&"n"==f.t?f.v:Jce(f,null,s));for(var p=0,m=0;p!==c.length;++p)if((m=c.charCodeAt(p))===a||m===i||34===m||s.forceQuotes){c='"'+c.replace($me,'""')+'"';break}"ID"==c&&(c='"ID"')}else null==f.f||f.F?c="":(l=!1,(c="="+f.f).indexOf(",")>=0&&(c='"'+c.replace($me,'""')+'"'));u.push(c)}return!1===s.blankrows&&l?null:u.join(o)}function Qme(e,t){var n=[],r=null==t?{}:t;if(null==e||null==e["!ref"])return"";var a=Kce(e["!ref"]),i=void 0!==r.FS?r.FS:",",o=i.charCodeAt(0),s=void 0!==r.RS?r.RS:"\n",l=s.charCodeAt(0),u=new RegExp(("|"==i?"\\|":i)+"+$"),c="",d=[];r.dense=Array.isArray(e);for(var h=r.skipHidden&&e["!cols"]||[],f=r.skipHidden&&e["!rows"]||[],p=a.s.c;p<=a.e.c;++p)(h[p]||{}).hidden||(d[p]=Hce(p));for(var m=0,v=a.s.r;v<=a.e.r;++v)(f[v]||{}).hidden||null!=(c=Jme(e,a,v,d,o,l,i,r))&&(r.strip&&(c=c.replace(u,"")),(c||!1!==r.blankrows)&&n.push((m++?s:"")+c));return delete r.dense,n.join("")}function eve(e,t){t||(t={}),t.FS="\t",t.RS="\n";var n=Qme(e,t);if("undefined"==typeof Gse||"string"==t.type)return n;var r=Gse.utils.encode(1200,n,"str");return String.fromCharCode(255)+String.fromCharCode(254)+r}function tve(e,t,n){var r,a=n||{},i=+!a.skipHeader,o=e||{},s=0,l=0;if(o&&null!=a.origin)if("number"==typeof a.origin)s=a.origin;else{var u="string"==typeof a.origin?Gce(a.origin):a.origin;s=u.r,l=u.c}var c={s:{c:0,r:0},e:{c:l,r:s+t.length-1+i}};if(o["!ref"]){var d=Kce(o["!ref"]);c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),-1==s&&(s=d.e.r+1,c.e.r=s+t.length-1+i)}else-1==s&&(s=0,c.e.r=t.length-1+i);var h=a.header||[],f=0;t.forEach((function(e,t){oue(e).forEach((function(n){-1==(f=h.indexOf(n))&&(h[f=h.length]=n);var u=e[n],c="z",d="",p=qce({c:l+f,r:s+t+i});r=nve(o,p),!u||"object"!==typeof u||u instanceof Date?("number"==typeof u?c="n":"boolean"==typeof u?c="b":"string"==typeof u?c="s":u instanceof Date?(c="d",a.cellDates||(c="n",u=due(u)),d=a.dateNF||yle[14]):null===u&&a.nullError&&(c="e",u=0),r?(r.t=c,r.v=u,delete r.w,delete r.R,d&&(r.z=d)):o[p]=r={t:c,v:u},d&&(r.z=d)):o[p]=u}))})),c.e.c=Math.max(c.e.c,l+h.length-1);var p=Vce(s);if(i)for(f=0;f<h.length;++f)o[Hce(f+l)+p]={t:"s",v:h[f]};return o["!ref"]=Yce(c),o}function nve(e,t,n){if("string"==typeof t){if(Array.isArray(e)){var r=Gce(t);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return nve(e,qce("number"!=typeof t?t:{r:t,c:n||0}))}function rve(){return{SheetNames:[],Sheets:{}}}function ave(e,t,n,r){var a=1;if(!n)for(;a<=65535&&-1!=e.SheetNames.indexOf(n="Sheet"+a);++a,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0){var i=n.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var o=i&&i[1]||n;for(++a;a<=65535&&-1!=e.SheetNames.indexOf(n=o+a);++a);}if(Ppe(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function ive(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}var ove={encode_col:Hce,encode_row:Vce,encode_cell:qce,encode_range:Yce,decode_col:Zce,decode_row:Wce,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:Gce,decode_range:Xce,format_cell:Jce,sheet_add_aoa:ede,sheet_add_json:tve,sheet_add_dom:pme,aoa_to_sheet:tde,json_to_sheet:function(e,t){return tve(null,e,t)},table_to_sheet:mme,table_to_book:function(e,t){return Qce(mme(e,t),t)},sheet_to_csv:Qme,sheet_to_txt:eve,sheet_to_json:Kme,sheet_to_html:fme,sheet_to_formulae:function(e){var t,n="",r="";if(null==e||null==e["!ref"])return[];var a,i=Kce(e["!ref"]),o="",s=[],l=[],u=Array.isArray(e);for(a=i.s.c;a<=i.e.c;++a)s[a]=Hce(a);for(var c=i.s.r;c<=i.e.r;++c)for(o=Vce(c),a=i.s.c;a<=i.e.c;++a)if(n=s[a]+o,r="",void 0!==(t=u?(e[c]||[])[a]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;r=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=n+"="+r}return l},sheet_to_row_object_array:Kme,sheet_get_cell:nve,book_new:rve,book_append_sheet:ave,book_set_sheet_visibility:function(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:ive,cell_set_internal_link:function(e,t,n){return ive(e,"#"+t,n)},cell_add_comment:function(e,t,n){e.c||(e.c=[]),e.c.push({t:t,a:n||"SheetJS"})},sheet_set_array_formula:function(e,t,n,r){for(var a="string"!=typeof t?t:Kce(t),i="string"==typeof t?t:Yce(t),o=a.s.r;o<=a.e.r;++o)for(var s=a.s.c;s<=a.e.c;++s){var l=nve(e,o,s);l.t="n",l.F=i,delete l.v,o==a.s.r&&s==a.s.c&&(l.f=n,r&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};Fse.version;var sve=function(){var e=xke().sites,t=Vwe(),n=t.admin,r=t.isSapExecutive,a=(t.isShiftManager,t.isChiefMachinery,rke()),i=a.reports,o=a.setListSelected,s=a.listSelected,l=a.listSelectedCache,u=a.setListSelectedCache,c=a.getReports,d=(a.loading,a.statusReports),h=a.pautas,f=(0,T.useState)([]),p=(0,U.Z)(f,2),m=p[0],v=p[1],g=(0,T.useState)([]),y=(0,U.Z)(g,2),b=y[0],x=y[1],w=(0,T.useState)([]),k=(0,U.Z)(w,2),S=k[0],E=k[1],C=(0,T.useState)([]),M=(0,U.Z)(C,2),A=M[0],I=M[1],N=(0,T.useState)(!1),R=(0,U.Z)(N,2),O=R[0],D=R[1],L=(0,T.useState)(0),P=(0,U.Z)(L,2),F=(P[0],P[1],(0,T.useState)(0)),j=(0,U.Z)(F,2),z=j[0],B=(j[1],(0,T.useState)(0)),W=(0,U.Z)(B,2),V=(W[0],W[1],(0,T.useState)(0)),Z=(0,U.Z)(V,2),H=Z[0],G=(Z[1],(0,T.useState)([])),q=(0,U.Z)(G,2),X=(q[0],q[1],(0,T.useState)(!0)),Y=(0,U.Z)(X,2),K=Y[0],$=Y[1],J=(0,T.useState)(10),Q=(0,U.Z)(J,2),ee=Q[0],te=Q[1],ne=(0,T.useState)(0),re=(0,U.Z)(ne,2),ae=re[0],ie=re[1],oe=(0,T.useState)([]),se=(0,U.Z)(oe,2),le=se[0],ue=se[1],ce=(0,T.useState)(0),de=(0,U.Z)(ce,2),he=de[0],fe=de[1],pe=(0,T.useState)("nada"),me=(0,U.Z)(pe,2),ve=me[0],ge=me[1],ye=(0,T.useState)(""),be=(0,U.Z)(ye,2),xe=be[0],we=be[1],ke=Ue(),Se=(0,T.useState)(pr),Te=(0,U.Z)(Se,2),Ee=(Te[0],Te[1],(0,T.useState)(!1)),Ce=(0,U.Z)(Ee,2),_e=Ce[0],Me=Ce[1],Ae=(0,T.useState)(!1),Ie=(0,U.Z)(Ae,2),Ne=Ie[0],Re=Ie[1];(0,T.useEffect)((function(){0===h.length?Me(!1):Me(!0)}),[h]),(0,T.useEffect)((function(){s.length>0?Le():ue([])}),[s]),(0,T.useEffect)((function(){(n||r)&&D(!0)}),[n,r]),(0,T.useEffect)((function(){if(i.length>0){var e=i.filter((function(e){if("Inspecci\xf3n"===e.reportType)return e})),t=i.filter((function(e){if("Mantenci\xf3n"===e.reportType)return e}));E(Lse),I(Pse),v(e),x(t)}}),[i]),(0,T.useEffect)((function(){if(m.length>0){var e=m.filter((function(e){if("Asignar"===e.state)return e})),t=m.filter((function(e){if(e.usersAssigned.length>0&&"En proceso"===e.state&&e.level<3&&(e.level>0||!e.level))return e})),n=m.filter((function(e){if(3===e.level)return e})),r=m.filter((function(e){if(4===e.level)return e})),a=(0,_.Z)(Lse);a[0].number=r.length,a[1].number=n.length,a[2].number=t.length,a[3].number=e.length,a[0].lista=r,a[1].lista=n,a[2].lista=t,a[3].lista=e,E(a)}else{var i=(0,_.Z)(Lse);i[0].number=0,i[1].number=0,i[2].number=0,i[3].number=0,i[0].lista=[],i[1].lista=[],i[2].lista=[],i[3].lista=[],E(i)}}),[m]),(0,T.useEffect)((function(){if(b.length>0){var e=b.filter((function(e){if("Asignar"===e.state)return e})),t=b.filter((function(e){if(e.usersAssigned.length>0&&"En proceso"===e.state&&e.level<3&&(e.level>0||!e.level))return e})),n=b.filter((function(e){if(3===e.level)return e})),r=b.filter((function(e){if(4===e.level)return e})),a=(0,_.Z)(Pse);a[0].number=r.length,a[1].number=n.length,a[2].number=t.length,a[3].number=e.length,a[0].lista=r,a[1].lista=n,a[2].lista=t,a[3].lista=e,I(a)}else{var i=(0,_.Z)(Pse);i[0].number=0,i[1].number=0,i[2].number=0,i[3].number=0,i[0].lista=[],i[1].lista=[],i[2].lista=[],i[3].lista=[],I(i)}}),[b]),(0,T.useEffect)((function(){(S.length>0||A.length>0)&&localStorage.getItem("buttonSelected")&&document.getElementById(localStorage.getItem("buttonSelected")).click()}),[S,A]);var Oe=function(e,t,n,r){we(r),localStorage.setItem("buttonSelected",t),(0,_.Z)(S).forEach((function(e,t){document.getElementById("button_".concat(t,"_inspecciones")).style.backgroundColor=e.buttonColor})),(0,_.Z)(A).forEach((function(e,t){document.getElementById("button_".concat(t,"_mantenciones")).style.backgroundColor=e.buttonColor})),document.getElementById(t).style.backgroundColor="#ccc",e.length>0?(o(e.sort(De)),u(e),$(!1)):$(!0)},De=function(e,t){return t.idIndex-e.idIndex},Le=function(){for(var e=[],t=0*ee;t<ee+0*ee;t++)if(s[t]&&e.push(s[t]),t===ee+0*ee-1){var n=[].concat(e).sort(De);ue(n),fe(s.length)}};(0,T.useEffect)((function(){var e=(0,_.Z)(l);if("nada"===ve)o(l),fe(l.length);else{var t=[];e.forEach((function(n,r){n.site===ve&&t.push(n),r===e.length-1&&(o(t),fe(t.length))}))}}),[ve]);var Pe=function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.length>0?(Re(!0),console.log("download"),(t=(0,_.Z)(i)).forEach(function(){var e=Vn(Un().mark((function e(n,r){var a,i,o,s;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],{},e.next=4,gn(n);case 4:(i=e.sent)&&i.data.group&&Object.values(i.data.group).forEach((function(e){e.forEach((function(e){"*"!==e.unidad&&(console.log(e),a.push(e),n["".concat(e.partnumberUtl,"/").concat(e.unidad," proyectada")]||(n["".concat(e.partnumberUtl,"/").concat(e.unidad," proyectada")]=0),n["".concat(e.partnumberUtl,"/").concat(e.unidad," proyectada")]=n["".concat(e.partnumberUtl,"/").concat(e.unidad," proyectada")]+e.cantidad,n["".concat(e.partnumberUtl,"/").concat(e.unidad," usada")]||(n["".concat(e.partnumberUtl,"/").concat(e.unidad," usada")]=0),n["".concat(e.partnumberUtl,"/").concat(e.unidad," usada")]=n["".concat(e.partnumberUtl,"/").concat(e.unidad," usada")]+(e.unidadData?parseFloat(e.unidadData):0))}))})),r===t.length-1&&(console.log(t),o=ove.json_to_sheet(t),s=ove.book_new(),ove.book_append_sheet(s,o,"Sheet1"),Xme(s,"DataSheet.xlsx"),Re(!1));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())):alert("Debe contar con al menos una OT creada.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,dr.jsxs)("div",{className:"container-width",children:[(0,dr.jsx)(kwe,{open:Ne}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20,flexGrow:1},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){ke(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)(fs,{variant:"h1",style:{marginTop:0,marginBottom:0,fontSize:16,width:"100%"},children:"Ordenes de trabajo"}),(0,dr.jsx)(cs,{color:"primary",style:{marginRight:5},edge:"end",hidden:!O,onClick:Pe,title:"Descargar Reporte",children:(0,dr.jsx)(Bi,{icon:Tr})}),(0,dr.jsx)(cs,{color:"primary",style:{marginRight:5},edge:"end",onClick:function(){ke("/calendar")},title:"Calendario",children:(0,dr.jsx)(Bi,{icon:vr})}),(0,dr.jsxs)(cs,{style:{position:"relative"},color:"primary",edge:"end",hidden:!O,onClick:function(){_e?ke("/reports/create-report"):alert("Espere a que las pautas est\xe9n descargadas")},title:"Nuevo reporte",children:[(0,dr.jsx)(Bi,{style:{position:"absolute",zIndex:100,fontSize:12,top:10,right:10,color:"#F78E63",fontWeight:600},icon:jr}),(0,dr.jsx)(Bi,{style:{zIndex:10},icon:br})]})]})})}),(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsxs)(Es,{item:!0,xs:12,sm:12,md:4,lg:3,xl:3,children:[(0,dr.jsxs)("div",{className:"menu-card",children:[(0,dr.jsx)("h3",{children:"Inspecciones"}),(0,dr.jsxs)("div",{style:{float:"left",width:"calc(45%)",marginRight:5,padding:10,backgroundColor:"#fff",borderRadius:10},children:[(0,dr.jsx)("div",{style:{float:"left",width:"30%"},children:(0,dr.jsx)("p",{style:{fontSize:32,margin:0},children:Lse[3].number})}),(0,dr.jsx)("div",{style:{float:"left",right:5,width:"60%"},children:(0,dr.jsx)("p",{style:{fontSize:10,margin:0},children:"Inspecciones por asignar"})})]}),(0,dr.jsxs)("div",{style:{float:"right",width:"calc(45%)",marginLeft:5,padding:10,backgroundColor:"#fff",borderRadius:10},children:[(0,dr.jsx)("div",{style:{float:"left",width:"30%"},children:(0,dr.jsxs)("p",{style:{fontSize:32,margin:0},children:[z," "]})}),(0,dr.jsx)("div",{style:{float:"left",right:5,width:"60%"},children:(0,dr.jsx)("p",{style:{fontSize:10,margin:0},children:"Inspecciones completadas en la semana"})})]}),(0,dr.jsx)("div",{style:{paddingLeft:10,paddingRight:10,marginTop:"10vh"},children:S.map((function(e,t){return(0,dr.jsxs)(Es,{container:!0,style:{height:"5vh"},children:[(0,dr.jsx)(Es,{item:!0,style:{width:"15%"},children:(0,dr.jsx)(Bi,{icon:yr,size:"2x",style:{marginRight:10},color:e.color})}),(0,dr.jsx)(Es,{item:!0,style:{width:"30%"},children:(0,dr.jsx)("p",{style:{margin:0,fontSize:12},children:e.name})}),(0,dr.jsx)(Es,{item:!0,style:{width:"15%"},children:(0,dr.jsx)(mse,{label:e.number,style:{marginLeft:10,marginRight:10}})}),(0,dr.jsx)(Es,{item:!0,style:{width:"40%",textAlign:"right"},children:(0,dr.jsx)("button",{id:"button_".concat(t,"_inspecciones"),onClick:function(){return Oe(e.lista,"button_".concat(t,"_inspecciones"),0,e.name)},style:{position:"relative",right:5,width:80,height:30,borderRadius:20,backgroundColor:e.buttonColor},children:e.button})})]},t)}))})]}),(0,dr.jsxs)("div",{className:"menu-card",children:[(0,dr.jsx)("h3",{children:"Mantenciones"}),(0,dr.jsxs)("div",{style:{float:"left",width:"calc(45%)",marginRight:5,padding:10,backgroundColor:"#fff",borderRadius:10},children:[(0,dr.jsx)("div",{style:{float:"left",width:"30%"},children:(0,dr.jsx)("p",{style:{fontSize:32,margin:0},children:Pse[3].number})}),(0,dr.jsx)("div",{style:{float:"left",right:5,width:"60%"},children:(0,dr.jsx)("p",{style:{fontSize:10,margin:0},children:"Mantenciones por asignar"})})]}),(0,dr.jsxs)("div",{style:{float:"right",width:"calc(45%)",marginLeft:5,padding:10,backgroundColor:"#fff",borderRadius:10},children:[(0,dr.jsx)("div",{style:{float:"left",width:"30%"},children:(0,dr.jsxs)("p",{style:{fontSize:32,margin:0},children:[H," "]})}),(0,dr.jsx)("div",{style:{float:"left",right:5,width:"60%"},children:(0,dr.jsx)("p",{style:{fontSize:10,margin:0},children:"Mantenciones completadas en la semana"})})]}),(0,dr.jsx)("div",{style:{paddingLeft:10,paddingRight:10,marginTop:"10vh"},children:A.map((function(e,t){return(0,dr.jsxs)(Es,{container:!0,style:{height:"5vh"},children:[(0,dr.jsx)(Es,{item:!0,style:{width:"15%"},children:(0,dr.jsx)(Bi,{icon:yr,size:"2x",style:{marginRight:10},color:e.color})}),(0,dr.jsx)(Es,{item:!0,style:{width:"30%"},children:(0,dr.jsx)("p",{style:{margin:0,fontSize:12},children:e.name})}),(0,dr.jsx)(Es,{item:!0,style:{width:"15%"},children:(0,dr.jsx)(mse,{label:e.number,style:{marginLeft:10,marginRight:10}})}),(0,dr.jsx)(Es,{item:!0,style:{width:"40%",textAlign:"right"},children:(0,dr.jsx)("button",{id:"button_".concat(t,"_mantenciones"),onClick:function(){return Oe(e.lista,"button_".concat(t,"_mantenciones"),0,e.name)},style:{position:"relative",right:5,width:80,height:30,borderRadius:20,backgroundColor:e.buttonColor},children:e.button})})]},t)}))})]})]}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:8,lg:9,xl:9,children:K?(0,dr.jsxs)("div",{children:[(0,dr.jsx)("img",{style:{margin:0,position:"absolute",top:"50%",left:"calc(100%/1.53)",msTransform:"translateY(-50%)",transform:"translateY(-50%)"},src:"../../assets/icons/Arrow.svg",alt:""}),(0,dr.jsx)("div",{style:{textAlign:"center",position:"absolute",top:"55%",left:"calc(100%/1.6)"},children:(0,dr.jsxs)("p",{children:["Selecciona una opci\xf3n ",(0,dr.jsx)("br",{})," para ver el detalle"]})})]}):(0,dr.jsxs)("div",{style:{height:"calc(100vh - 240px)",display:"block",overflowY:"auto"},children:[(0,dr.jsx)("div",{style:{width:"100%",paddingLeft:10,paddingRight:10},children:(0,dr.jsxs)(Es,{container:!0,style:{width:"100%",borderBottomColor:"#ccc",borderBottomStyle:"solid",borderBottomWidth:1,paddingBottom:10},children:[(0,dr.jsx)(Es,{item:!0,xl:"auto",children:(0,dr.jsx)("p",{style:{width:80},children:"Filtros: "})}),(0,dr.jsx)(Es,{item:!0,xl:3,children:(0,dr.jsx)("input",{style:{marginRight:10,marginTop:14,marginBottom:14,width:300},placeholder:"Ingrese N\xb0 OT, M\xe1quina, Flota o C\xf3d. SAP",onChange:function(e){!function(e){console.log(e);var t=(0,_.Z)(l);if(e.length>0){var r=[];t.forEach((function(a,i){0===i&&console.log(a),(a.idIndex.toString().match(Number(e).toString())||a.machineData.model.match(e)||a.machineData.equ.match(e)||a.sapId.match(e))&&("nada"===ve||n&&a.idobra===ve)&&r.push(a),i===t.length-1&&(o(r.sort(De)),fe(r.length))}))}else o(l.sort(De)),fe(s.length)}(e.target.value)}})}),n&&(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)(Es,{item:!0,xl:"auto",children:(0,dr.jsx)("p",{style:{width:80},children:"Obra: "})}),(0,dr.jsx)(Es,{item:!0,xl:2,children:(0,dr.jsxs)("select",{style:{marginRight:10,marginTop:14,marginBottom:14,width:300},name:"select",onChange:function(e){!function(e){ge(e)}(e.target.value)},children:[(0,dr.jsx)("option",{value:"nada",children:"SELECCIONE OBRA..."}),e.map((function(e,t){return(0,dr.jsx)("option",{value:e.idobra,children:e.descripcion},t)}))]})})]}),(0,dr.jsx)(Es,{item:!0,sm:"auto"})]})}),K?(0,dr.jsx)(dr.Fragment,{}):(0,dr.jsx)(pwe,{list:le,typeReportsSelected:xe,statusReports:d,getReports:c}),le.length>0?(0,dr.jsx)(Dse,{component:"div",color:"primary",style:{position:"absolute",right:20,bottom:10,borderColor:"#ccc",borderWidth:1,borderStyle:"solid"},onPageChange:function(e,t){ie(t);for(var n=[],r=t*ee;r<ee+t*ee;r++)if(s[r]&&n.push(s[r]),r===ee+t*ee-1){var a=[].concat(n).sort(De);ue(a)}},rowsPerPage:ee,onRowsPerPageChange:function(e){te(parseInt(e.target.value,10)),ie(0);for(var t=[],n=ae*parseInt(e.target.value,10);n<parseInt(e.target.value,10)+ae*parseInt(e.target.value,10);n++)s[n]&&t.push(s[n]),n===parseInt(e.target.value,10)+ae*parseInt(e.target.value,10)-1&&ue(t)},count:he,page:ae}):(0,dr.jsx)(dr.Fragment,{})]})})]})]})},lve=function(){var e=Vwe(),t=e.userData,n=e.admin,r=rke(),a=r.pautas,i=r.createReport,o=(0,T.useState)([]),s=(0,U.Z)(o,2),l=s[0],u=s[1],c=(0,T.useState)([]),d=(0,U.Z)(c,2),h=d[0],f=d[1],p=(0,T.useState)([]),m=(0,U.Z)(p,2),v=m[0],g=m[1],y=(0,T.useState)(""),b=(0,U.Z)(y,2),x=b[0],w=b[1],k=(0,T.useState)(),S=(0,U.Z)(k,2),E=S[0],C=S[1],_=(0,T.useState)(),M=(0,U.Z)(_,2),A=M[0],I=M[1],N=(0,T.useState)(),R=(0,U.Z)(N,2),O=R[0],D=R[1],L=(0,T.useState)(),P=(0,U.Z)(L,2),F=P[0],j=P[1],z=(0,T.useState)(),B=(0,U.Z)(z,2),W=B[0],V=B[1],Z=(0,T.useState)(!0),H=(0,U.Z)(Z,2),G=H[0],q=H[1],X=(0,T.useState)(!1),Y=(0,U.Z)(X,2),K=Y[0],$=(Y[1],(0,T.useState)(!0)),J=(0,U.Z)($,2),Q=J[0],ee=J[1],te=(0,T.useState)(0),ne=(0,U.Z)(te,2),re=ne[0],ae=ne[1],ie=(0,T.useState)(""),oe=(0,U.Z)(ie,2),se=oe[0],le=oe[1],ue=(0,T.useState)(""),ce=(0,U.Z)(ue,2),de=ce[0],he=ce[1],fe=(0,T.useState)(""),pe=(0,U.Z)(fe,2),me=pe[0],ve=pe[1],ge=(0,T.useState)(""),ye=(0,U.Z)(ge,2),be=ye[0],xe=ye[1],we=(0,T.useState)(""),ke=(0,U.Z)(we,2),Se=ke[0],Te=ke[1],Ee=(0,T.useState)(""),Ce=(0,U.Z)(Ee,2),_e=Ce[0],Me=Ce[1],Ae=(0,T.useState)(""),Ie=(0,U.Z)(Ae,2),Ne=Ie[0],Re=Ie[1],Oe=(0,T.useState)(!1),De=(0,U.Z)(Oe,2),Le=De[0],Pe=De[1],Fe=(0,T.useState)(""),je=(0,U.Z)(Fe,2),ze=je[0],Be=je[1],Ve=(0,T.useState)([]),Ze=(0,U.Z)(Ve,2),He=Ze[0],Ge=Ze[1],qe=(0,T.useState)(!1),Xe=(0,U.Z)(qe,2),Ye=Xe[0],Ke=Xe[1],$e=Dt(),Je=Ue(),Qe=We().id;(0,T.useEffect)((function(){t&&console.log(t)}),[t]);var et=function(e,t){return e.idpm>t.idpm?1:e.idpm<t.idpm?-1:e.typepm>t.typepm?1:e.typepm<t.typepm?-1:void 0};(0,T.useEffect)((function(){if(x&&nt(x),x&&O){var e=[];a.forEach((function(t,n){"error"!=t.header&&t.header.forEach((function(n){n.typeDataDesc===x&&e.push(t)}))}));var t=[],n=[],r=e.sort(et).forEach((function(e){console.log(e.typepm,O),"Inspecci\xf3n"===O&&"Pauta de Inspecci\xf3n"===e.typepm?t.push(e):"Mantenci\xf3n"===O&&"Pauta de Inspecci\xf3n"!==e.typepm&&n.push(e)}));console.log(r),f("Inspecci\xf3n"===O?t:n)}}),[O,A,F,x]);var tt=function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,T.useEffect)((function(){console.log(F),F&&(nt(F),console.log(ze))}),[F]);var nt=function(){var e=Vn(Un().mark((function e(t){var n,r,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(t),console.log(t),e.next=4,qn.initDbMachines();case 4:if(!(n=e.sent)){e.next=14;break}return e.next=8,qn.consultar(n.database);case 8:return r=e.sent,console.log(r),e.next=12,r.filter((function(e){if(e.model===t&&e.idobra===ze)return e}));case 12:a=e.sent,g(a);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=Vn(Un().mark((function e(){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ke(!0),n={createdBy:t._id,updatedBy:t._id,state:"Asignar",datePrev:Date.parse(se),endPrev:Date.parse(de),machine:F,guide:E,reportType:O},(0,_t.Z)(n,"machine",JSON.parse(W).equid),(0,_t.Z)(n,"site",ze),(0,_t.Z)(n,"sapId",_e),(0,_t.Z)(n,"idPm",Ne),(0,_t.Z)(n,"testMode",Le),(r=n).machine&&r.sapId&&r.guide&&"Selecci\xf3n no cuenta con pautas."!==r.guide&&r.reportType&&"Seleccione..."!==r.reportType?i(r,Ke):(alert("Falta informaci\xf3n"),Ke(!1));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),at=function(){var e=Vn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={idIndex:re,updatedBy:localStorage.getItem("_id"),state:"Asignar",datePrev:Date.parse(se),machine:F,guide:E,reportType:O},(0,_t.Z)(t,"machine",JSON.parse(W).equid),(0,_t.Z)(t,"site",ze),(n=t).machine&&n.guide&&"Selecci\xf3n no cuenta con pautas."!==n.guide&&n.reportType&&"Seleccione..."!==n.reportType){e.next=5;break}alert("Falta informaci\xf3n"),e.next=9;break;case 5:return e.next=7,un(n);case 7:(r=e.sent)&&(alert("Reporte ".concat(r.data.idIndex,", para m\xe1quina modelo ").concat(r.data.machine," editado satisfactoriamente.")),Je(-1));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),it=function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn();case 2:t=e.sent,ae(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,T.useEffect)((function(){it(),console.log(a),n?Bn.initDbObras().then(function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bn.consultar(t.database);case 2:n=e.sent,Ge(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):(console.log(t),Be(t.obras[0].idobra)),Pn.initDbMachines().then(function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pn.consultar(t.database);case 2:n=e.sent,u(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ot()}),[]);var ot=function(){var e=new Date(Date.now()),t=e.getMonth()+1,n=e.getDate(),r=e.getFullYear();t<10&&(t="0"+t.toString()),n<10&&(n="0"+n.toString()),Te(r+"-"+t+"-"+n)};return(0,dr.jsxs)(qc,{height:"100%",children:[(0,dr.jsx)(Es,{className:"root",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:$e.pageContainer,item:!0,xs:12,children:(0,dr.jsxs)(qoe,{elevation:0,className:"pageCard",children:[(0,dr.jsxs)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,dr.jsx)("div",{className:"navigation-bar",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){Je(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsxs)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:[Qe&&"Ordenes / Editar orden de trabajo",!Qe&&"Ordenes / Crear nueva orden de trabajo"]})]})})}),(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsxs)(Es,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:[n&&(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)(tl,{children:[(0,dr.jsx)("p",{style:{margin:5},children:"Seleccionar Obra"}),(0,dr.jsxs)("select",{onBlur:function(){return tt(!0)},className:$e.inputsStyle,name:"userType",id:"userType",style:{width:"100%",minWidth:250,height:44,borderRadius:10,fontSize:20},onChange:function(e){Be(e.target.value)},value:ze,children:[(0,dr.jsx)("option",{children:"Seleccione..."}),He.map((function(e,t){return(0,dr.jsx)("option",{value:e.idobra,children:e.descripcion},t)}))]})]})}),(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)(tl,{children:[(0,dr.jsx)("p",{style:{margin:5},children:"N\xb0 OT"}),(0,dr.jsx)("input",{disabled:!0,value:re,maxLength:12,onBlur:function(){return tt()},className:$e.inputsStyle,type:"text",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)(tl,{children:[(0,dr.jsx)("p",{style:{margin:5},children:"ID SAP"}),(0,dr.jsx)("input",{value:_e,onChange:function(e){Me(e.target.value)},maxLength:12,onBlur:function(){return tt()},className:$e.inputsStyle,type:"text",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)(tl,{children:[(0,dr.jsx)("p",{style:{margin:5},children:"Fecha Inicio Programado"}),(0,dr.jsx)("input",{value:se,onChange:function(e){le(e.target.value)},maxLength:12,onBlur:function(){return tt()},className:$e.inputsStyle,type:"date",min:Se,style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)(tl,{children:[(0,dr.jsx)("p",{style:{margin:5},children:"Fecha T\xe9rmino Programado"}),(0,dr.jsx)("input",{value:de,onChange:function(e){he(e.target.value)},maxLength:12,onBlur:function(){return tt()},className:$e.inputsStyle,type:"date",min:se,disabled:!se,style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,dr.jsxs)("div",{style:{width:"100%"},children:[(0,dr.jsx)("p",{style:{margin:5},children:"Seleccionar tipo de reporte"}),(0,dr.jsx)(tl,{children:(0,dr.jsxs)("select",{className:$e.inputsStyle,name:"userType",id:"userType",style:{width:"100%",minWidth:250,height:44,borderRadius:10,fontSize:20},onChange:function(e){var t;D(e.target.value),t=e.target.value,I(t)},value:O,children:[(0,dr.jsx)("option",{children:"Seleccione..."}),(0,dr.jsx)("option",{children:"Inspecci\xf3n"}),(0,dr.jsx)("option",{children:"Mantenci\xf3n"})]})})]}),(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)(tl,{children:[(0,dr.jsx)("p",{style:{margin:5},children:"Seleccionar modelo de m\xe1quina"}),(0,dr.jsxs)("select",{className:$e.inputsStyle,name:"userType",id:"userType",style:{width:"100%",minWidth:250,height:44,borderRadius:10,fontSize:20},onChange:function(e){j(e.target.value),q(!1),nt(e.target.value)},value:F,children:[(0,dr.jsx)("option",{children:"Seleccione..."}),l.map((function(e,t){return(0,dr.jsxs)("option",{value:e.model,children:[e.type," ",e.brand," ",e.model]},t)}))]})]})})]}),(0,dr.jsxs)(Es,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:[(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)(tl,{children:[(0,dr.jsxs)("p",{style:{margin:0},children:["Seleccionar Pauta  ",G&&K&&(0,dr.jsx)("b",{children:"ESPERE..."})]}),(0,dr.jsxs)("select",{disabled:G,className:$e.inputsStyle,name:"userType",id:"userType",style:{width:"100%",minWidth:250,height:44,borderRadius:10,fontSize:20},onChange:function(e){C(e.target.value.split(",")[1]),ee(!1),Re(e.target.value.split(",")[0])},value:[Ne,E],children:[(0,dr.jsx)("option",{children:"Seleccione..."}),h.length>0&&h.map((function(e,t){return(0,dr.jsxs)("option",{value:[e.idpm,e.typepm],children:[" ","SPM000787"===e.idpm?"Motor LMR":"Motor Est\xe1ndar"," - ",e.typepm," / ",e.header[1].typeDataDesc," ","Gen\xe9rico"===e.zone?"":"".concat([e.zone])," "]},t)})),0==h.length&&(0,dr.jsx)("option",{children:" Selecci\xf3n no cuenta con pautas. "})]})]})}),(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)("p",{children:["Test: ",(0,dr.jsx)(ad,{checked:Le,onChange:function(e){return Pe(e.target.checked)}})]})}),(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)(tl,{children:[(0,dr.jsx)("p",{children:"Seleccionar m\xe1quina de obra"}),(0,dr.jsxs)("select",{onBlur:function(){return tt()},className:$e.inputsStyle,disabled:Q,name:"userType",id:"userType",style:{width:"100%",minWidth:250,height:44,borderRadius:10,fontSize:20},onChange:function(e){"init"===e.target.value?(ve(""),xe(""),V("")):(V(e.target.value),xe(JSON.parse(e.target.value).equid),ve(JSON.parse(e.target.value).hourMeter/36e5))},value:W,defaultValue:"init",children:[(0,dr.jsx)("option",{value:"init",selected:!0,children:"Seleccione..."}),v.sort((function(e,t){return Number(e.equ)-Number(t.equ)})).map((function(e,t){return(0,dr.jsxs)("option",{value:JSON.stringify(e),children:[" ",e.equ," / ",e.type," ",e.brand," - ",e.model," "]},t)}))]})]})}),(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)(tl,{children:[(0,dr.jsx)("p",{children:"Horas de operaci\xf3n"}),(0,dr.jsx)("input",{disabled:!0,value:me,maxLength:12,onBlur:function(){return tt()},className:$e.inputsStyle,type:"text",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)(tl,{children:[(0,dr.jsx)("p",{children:"Equipo ID"}),(0,dr.jsx)("input",{disabled:!0,value:be,maxLength:12,onBlur:function(){return tt()},className:$e.inputsStyle,type:"text",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})})]})]})]}),(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,lg:6,md:6,sm:!1,xs:!1}),(0,dr.jsx)(Es,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,dr.jsxs)("div",{style:{width:"100%",paddingTop:30,textAlign:"center"},children:[Qe&&(0,dr.jsx)("button",{onClick:function(){return at()},style:{width:189,height:48,marginRight:17,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D"},children:"Editar reporte"}),Qe&&(0,dr.jsx)("button",{onClick:function(){Qe&&confirm("Se borrar\xe1 el reporte permanentemente. \xbfDesea continuar?")&&dn(JSON.parse(Qe)._id).then((function(e){alert("Reporte eliminado."),Je(-1)}))},style:{width:189,height:48,marginRight:17,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D"},children:"Borrar reporte"}),!Qe&&(0,dr.jsx)("button",{onClick:function(){return rt()},style:{width:189,height:48,marginRight:17,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D"},children:"Agregar reporte"})]})})]})]})})}),(0,dr.jsx)(kwe,{open:Ye})]})},uve=function(){var e=Dt();return(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:e.pageContainer,item:!0,xs:12,children:(0,dr.jsx)(qoe,{elevation:0,className:"pageCard",children:[{id:0,description:"Actividad 1 programada",fecha:"12/10/2021"},{id:1,description:"Actividad 1 ejecutada",fecha:"13/10/2021"},{id:2,description:"Actividad 2 programada",fecha:"13/10/2021"},{id:3,description:"Actividad 3 programada",fecha:"14/10/2021"},{id:4,description:"Actividad 2 ejecutada",fecha:"15/10/2021"},{id:5,description:"Actividad 4 programada",fecha:"16/10/2021"},{id:6,description:"Actividad 3 ejecutada",fecha:"16/10/2021"},{id:7,description:"Actividad 4 ejecutada",fecha:"19/10/2021"},{id:8,description:"Actividad 5 programada",fecha:"20/10/2021"},{id:9,description:"Actividad 6 programada",fecha:"20/10/2021"}].reverse().filter((function(e){return e.toString()})).map((function(e){return(0,dr.jsx)(Es,{item:!0,style:{width:"100%",padding:5},children:(0,dr.jsx)("div",{style:{borderRadius:20,backgroundColor:"#fff",padding:10},children:(0,dr.jsxs)("h3",{children:[e.fecha," - ",e.description]})})},e.id)}))})})})})},cve=function(){var e=Dt();return(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:e.pageContainer,item:!0,xs:12,children:(0,dr.jsx)(qoe,{elevation:0,className:"pageCard"})})})})},dve=function(){var e=Dt();return(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:e.pageContainer,item:!0,xs:12,children:(0,dr.jsxs)(qoe,{elevation:0,className:"pageCard",children:[(0,dr.jsx)(Es,{style:{flexShrink:0},children:(0,dr.jsx)("div",{style:{width:"100%",color:"#fff"},children:(0,dr.jsx)("h1",{children:"Configuraci\xf3n"})})}),(0,dr.jsxs)(Es,{container:!0,spacing:1,children:[(0,dr.jsx)("div",{style:{width:"30%"},children:(0,dr.jsxs)("div",{style:{textAlign:"left",width:"100%",backgroundColor:"rgba(255,  255,  255,  0.5)"},children:[(0,dr.jsx)(ed,{button:!0,style:{width:"100%",textAlign:"left"},children:(0,dr.jsx)("label",{style:{color:"#333",fontSize:20,textAlign:"left",fontWeight:"bold"},children:"Perfil"})}),(0,dr.jsx)(ed,{button:!0,style:{width:"100%",textAlign:"left"},children:(0,dr.jsx)("label",{style:{color:"#333",fontSize:20,textAlign:"left",fontWeight:"bold"},children:"Notificaciones"})}),(0,dr.jsx)(ed,{button:!0,style:{width:"100%",textAlign:"left"},children:(0,dr.jsx)("label",{style:{color:"#333",fontSize:20,textAlign:"left",fontWeight:"bold"},children:"Informaci\xf3n"})}),(0,dr.jsx)(ed,{button:!0,style:{width:"100%",textAlign:"left"},children:(0,dr.jsx)("label",{style:{color:"#333",fontSize:20,textAlign:"left",fontWeight:"bold"},children:"Soporte"})})]})}),(0,dr.jsx)("div",{style:{width:"70%",height:"35rem",overflowY:"auto"},children:(0,dr.jsx)("div",{style:{textAlign:"left",height:"100%",width:"100%",backgroundColor:"rgba(255,  255,  255,  0.5)"},children:(0,dr.jsx)("div",{style:{height:"50%"}})})})]})]})})})})},hve=function(){var e=Vwe().setSite,t=Dt(),n=(0,T.useState)([]),r=(0,U.Z)(n,2),a=r[0],i=r[1];(0,T.useEffect)((function(){o()}),[]);var o=function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Bn.initDbObras().then(function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bn.consultar(t.database);case 2:n=e.sent,console.log(n),i(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:t.pageContainer,item:!0,xs:12,children:(0,dr.jsxs)(qoe,{elevation:0,className:"pageCard",children:[(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsx)("h1",{children:"Para navegar en la plataforma debe seleccionar una obra."})}),(0,dr.jsx)(Es,{container:!0,style:{height:"75vh",overflowY:"auto"},alignItems:"center",justifyContent:"center",children:a.filter((function(e){return e.toString()})).map((function(t){return(0,dr.jsx)(Es,{item:!0,xl:3,lg:3,md:4,style:{width:"100%",padding:20},children:(0,dr.jsxs)("div",{style:{padding:10,borderRadius:20,borderWidth:1,borderColor:"red",borderStyle:"solid",textAlign:"center"},children:[(0,dr.jsx)("img",{src:t.image?t.image:"/logo_icv.png",width:100}),(0,dr.jsx)("br",{}),(0,dr.jsx)("p",{children:t.descripcion}),(0,dr.jsx)("br",{}),(0,dr.jsx)($l,{onClick:function(){!function(t){window.confirm("Confirme que cambiar\xe1 la obra de navegaci\xf3n")&&(console.log(t),e(t))}(t)},variant:"contained",color:"primary",children:"Seleccionar"}),(0,dr.jsx)("br",{})]})},t.id)}))})]})})})})},fve=function(){var e=Dt(),t=Ue(),n="superAdmin"!==localStorage.getItem("role");return(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:e.pageContainer,item:!0,xs:12,children:(0,dr.jsxs)(qoe,{elevation:0,className:"pageCard",children:[(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){t(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Administraci\xf3n"})]})})})}),(0,dr.jsxs)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:6,lg:3,style:{padding:10},children:(0,dr.jsx)(Joe,{variant:"users"})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:6,lg:3,style:{padding:10},children:(0,dr.jsx)(Joe,{variant:"roles",disableButton:n})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:6,lg:3,style:{padding:10},children:(0,dr.jsx)(Joe,{variant:"patterns"})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:6,lg:3,style:{padding:10},children:(0,dr.jsx)(Joe,{variant:"news"})})]})]})})})})},pve=function(e){e.route;var t=(0,T.useState)(!1),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=Dt(),o=Ue();return(0,T.useEffect)((function(){navigator.onLine?a(!0):a(!1)}),[]),(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"root",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:i.pageContainer,item:!0,xs:12,children:(0,dr.jsxs)(qoe,{elevation:0,className:"pageCard",children:[(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){o(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Administraci\xf3n / Administrar usuarios"})]})})})}),(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:20,overflowY:"auto",height:"calc(100vh - 195px)"},children:(0,dr.jsx)(dwe,{height:"calc(100vh - 500px)",hableButton:r})})})]})})})})},mve={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",borderRadius:20,boxShadow:24,p:4},vve=function(){var e=gke().getUsers,t=Dt(),n=Ue(),r=(0,T.useState)(!1),a=(0,U.Z)(r,2),i=a[0],o=a[1],s=(0,T.useState)(!1),l=(0,U.Z)(s,2),u=l[0],c=l[1],d=(0,T.useState)(""),h=(0,U.Z)(d,2),f=(h[0],h[1]),p=(0,T.useState)(""),m=(0,U.Z)(p,2),v=m[0],g=m[1],y=(0,T.useState)(),b=(0,U.Z)(y,2),x=b[0],w=b[1],k=(0,T.useContext)(ske),S=k.userData,E=k.setUserData,C=k.setChangeModule,_=(k.set,We().id),M=function(){var e;i?(e=!1,n(-1),I()):e=!0,setTimeout((function(){o(e)}),500)};(0,T.useEffect)((function(){_?(g("Editar usuario"),an(_).then((function(e){console.log(e),"x@x.xx"===e.data.email&&(e.data.email=""),E(e.data),w(0)}))):(w(0),g("Nuevo usuario"))}),[]);var A=function(){var t=Vn(Un().mark((function t(){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c(!0),"Nuevo usuario"!==v){t.next=17;break}return t.prev=2,f("Inscribiendo nuevo usuario"),t.next=6,tn(S,S.password);case 6:200==t.sent.status?(c(!1),M(),e()):(alert("Error al crear usuario. Verifique los datos ingresados. Posiblemente haya repetido datos de alg\xfan usuario inscrito"),c(!1),n(-1)),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),alert("Error al crear usuario. Verifique los datos ingresados. Posiblemente haya repetido datos de alg\xfan usuario inscrito"),c(!1),n(-1);case 15:t.next=31;break;case 17:if("Editar usuario"!==v){t.next=31;break}return t.prev=18,f("Editando usuario"),t.next=22,nn(S);case 22:200==t.sent.status?(c(!1),M(),e()):(alert("Error al editar usuario. Verifique los datos ingresados. Posiblemente haya repetido datos de alg\xfan usuario inscrito"),c(!1),n(-1)),t.next=31;break;case 26:t.prev=26,t.t1=t.catch(18),alert("Error al crear usuario. Verifique los datos ingresados. Posiblemente haya repetido datos de alg\xfan usuario inscrito"),c(!1),n(-1);case 31:case"end":return t.stop()}}),t,null,[[2,10],[18,26]])})));return function(){return t.apply(this,arguments)}}(),I=function(){localStorage.removeItem("userDataToSave"),localStorage.removeItem("listaPermisosReportes"),localStorage.removeItem("listaPermisosUsuarios")},N=function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.rut?(0,wK.validate)(S.rut)?S.name?S.lastName?S.obras.length>0?S.roles.length>0?_?w(x+1):S.password.length>5&&S.confirmPassword.length>5?S.confirmPassword===S.password?w(x+1):alert("Password y su confirmaci\xf3n deben ser iguales"):alert("Password debe contar con al menos 6 car\xe1cteres"):alert("Seleccione al menos un rol"):alert("Debe seleccionar una obra"):alert("Ingrese un apellido"):alert("Ingrese un nombre"):alert("Rut inv\xe1lido"):alert("Falta Rut");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:t.pageContainer,item:!0,xs:12,children:(0,dr.jsxs)(qoe,{elevation:0,className:"pageCard",children:[(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){n(-1),I()}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsxs)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:["Administraci\xf3n / Administrar usuarios / ",v]})]})})})}),(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsxs)("div",{style:{width:"100%",textAlign:"left",padding:10,overflowY:"auto"},children:[0===x&&(0,dr.jsx)(hwe,{typeDisplay:v,uData:S}),1===x&&(0,dr.jsx)(fwe,{width:"calc(100vw - 350px)",height:"calc(100vh - 320px)",typeDisplay:v,id:_}),(0,dr.jsx)("div",{style:{position:"absolute",right:40,bottom:40},children:(0,dr.jsx)("div",{style:{width:"100%"},children:(0,dr.jsxs)("div",{style:{float:"right"},children:[1==x&&(0,dr.jsx)("button",{onClick:function(){w(x-1),C(!1)},style:{width:189,height:48,marginRight:17,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D"},children:"Modificar Datos"}),(0,dr.jsx)("button",{onClick:function(){n(-1),I()},style:{width:189,height:48,borderRadius:23,marginRight:17,fontSize:20,color:"#BB2D2D",borderColor:"#BB2D2D",borderWidth:2},children:"Cancelar"}),0==x&&(0,dr.jsx)("button",{onClick:function(){return N()},style:{width:189,height:48,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D"},children:"Siguiente"}),x>0&&!_&&(0,dr.jsx)("button",{onClick:function(){A()},style:{width:189,height:48,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D"},children:"Crear usuario"}),x>0&&_&&(0,dr.jsx)("button",{onClick:function(){c(!0),setTimeout(Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("userDataToSave")),e.next=3,nn(t,_);case 3:e.sent&&(M(),c(!1));case 5:case"end":return e.stop()}}),e)}))),1e3)},style:{width:189,height:48,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D"},children:"Editar usuario"})]})})})]})}),(0,dr.jsxs)("div",{children:[(0,dr.jsx)(Fo,{open:i,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,dr.jsxs)(qc,{sx:mve,children:[(0,dr.jsxs)("div",{style:{textAlign:"center"},children:[(0,dr.jsx)("img",{src:"../../assets/icons/check-green.svg",alt:""}),"Nuevo usuario"===v&&(0,dr.jsx)("h1",{children:"Usuario creado con \xe9xito"}),"Editar usuario"===v&&(0,dr.jsx)("h1",{children:"Usuario editado con \xe9xito"})]}),(0,dr.jsx)(od,{onClick:M,style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,dr.jsx)(Jl,{style:{color:"#ccc"}})})]})}),(0,dr.jsx)(kwe,{open:u})]})]})})})})},gve=function(e){e.route;var t=(0,T.useContext)(Uwe),n=t.userData,r=t.admin,a=(0,T.useState)([]),i=(0,U.Z)(a,2),o=i[0],s=i[1],l=Dt(),u=Ue();return(0,T.useEffect)((function(){var e=localStorage.getItem("_id");navigator.onLine?rn(r).then(function(){var t=Vn(Un().mark((function t(n){var r,a;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=new Array,(r=n.data)&&(a=r.filter((function(t){if(t._id!=e&&"admin"!=t.role)return t})),s(a));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):setTimeout((function(){alert("Dispositivo sin conexi\xf3n. Revise si cuenta con internet e intente nuevamente."),u(-1)}),100)}),[]),(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:l.pageContainer,item:!0,xs:12,children:(0,dr.jsxs)(qoe,{elevation:0,className:"pageCard",children:[(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){u(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Perfil"})]})})})}),(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:12,lg:12,children:n&&(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xs:12,sm:6,md:4,lg:4,children:(0,dr.jsx)("div",{style:{padding:20,textAlign:"right"},children:(0,dr.jsx)("img",{src:n.imageUrl,style:{maxHeight:300,maxWidth:300,objectFit:"cover"},width:"100%",alt:""})})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:6,md:4,lg:4,children:n&&(0,dr.jsxs)("div",{style:{padding:20},children:[(0,dr.jsxs)("h1",{children:[n.name," ",n.lastName]}),(0,dr.jsx)("h3",{children:zt(n.role)}),(0,dr.jsx)("h3",{children:n.rut}),(0,dr.jsx)("h3",{children:n.email}),(0,dr.jsxs)("h3",{children:["+56",n.phone]}),(0,dr.jsxs)("h3",{children:[n.sites?JSON.parse(n.sites).idobra:""," - ",n.sites?JSON.parse(n.sites).descripcion:""]}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,dr.jsxs)("div",{style:{width:200,height:200},children:[(0,dr.jsx)("h3",{children:"Firma"}),(0,dr.jsx)("img",{src:n.sign,width:200,height:200})]})})]})}),(0,dr.jsxs)(Es,{item:!0,xs:12,sm:12,md:4,lg:4,children:[(0,dr.jsx)("div",{style:{padding:20},children:(0,dr.jsx)("h1",{children:"Otros usuarios"})}),(0,dr.jsx)("div",{style:{padding:20,maxHeight:"calc(100vh - 320px)",overflowY:"auto"},children:o.map((function(e,t){return e.imageUrl||(e.imageUrl="../assets/no-profile-image.png"),(0,dr.jsxs)("div",{style:{width:"100%"},children:[(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xs:4,sm:3,lg:2,xl:2,children:(0,dr.jsx)("img",{src:e.imageUrl,width:50,height:50,style:{objectFit:"cover",borderRadius:"50%"},alt:""})}),(0,dr.jsx)(Es,{item:!0,xs:6,sm:4,lg:4,xl:4,children:(0,dr.jsxs)("p",{children:[e.name," ",e.lastName]})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:5,lg:4,xl:4,children:(0,dr.jsx)("p",{children:zt(e.role)})})]}),(0,dr.jsx)("br",{})]},t)}))})]})]})})})]})})})})},yve=function(e){e.route;var t=(0,T.useState)(!1),n=(0,U.Z)(t,2),r=(n[0],n[1]),a=Dt(),i=Ue();return(0,T.useEffect)((function(){navigator.onLine?r(!0):r(!1)}),[]),(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"root",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:a.pageContainer,item:!0,xs:12,children:(0,dr.jsxs)(qoe,{elevation:0,className:"pageCard",children:[(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){i(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Administraci\xf3n / Administrar usuarios"})]})})})}),(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:20,overflowY:"auto",height:"calc(100vh - 200px)"}})})]})})})})},bve=function(e){var t=e.patterns;return(0,dr.jsxs)("div",{style:{padding:10,width:"80%",height:"calc(100vh - 250px)",textAlign:"left",color:"#333",backgroundColor:"#F9F9F9",borderRadius:20},children:[(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,children:(0,dr.jsx)("strong",{children:"ID"})}),(0,dr.jsx)(Es,{item:!0,xl:2,lg:2,children:(0,dr.jsx)("strong",{children:"Tipo"})}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,children:(0,dr.jsx)("strong",{children:"Marca"})}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,children:(0,dr.jsx)("strong",{children:"Modelo"})}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,children:(0,dr.jsx)("strong",{children:"PIDPM"})}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,children:(0,dr.jsx)("strong",{children:"Zona"})})]}),0===t.length?(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",paddingTop:50},children:"No hay pautas creadas"}):(0,dr.jsx)("div",{style:{width:"100%",paddingTop:50,height:"calc(100vh - 400px)",overflowY:"auto"},children:t.map((function(e,t){return(0,dr.jsxs)(Es,{container:!0,style:{paddingTop:0===t?0:10,paddingBottom:10},children:[(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,children:e.idPattern}),(0,dr.jsx)(Es,{item:!0,xl:2,lg:2,children:e.type}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,children:e.brand}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,children:e.model}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,children:e.pIDPM}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,children:e.zone})]},t)}))})]})},xve=function(e){e.roles;var t=Dt(),n=Ue(),r=(0,T.useState)(!1),a=(0,U.Z)(r,2),i=a[0],o=(a[1],(0,T.useState)([])),s=(0,U.Z)(o,2),l=s[0],u=s[1],c=(0,T.useState)(!1),d=(0,U.Z)(c,2),h=d[0],f=d[1];(0,T.useEffect)((function(){p()}),[]);var p=function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_n();case 2:t=e.sent,u(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:t.pageContainer,item:!0,xs:12,children:(0,dr.jsxs)(qoe,{elevation:0,className:"pageCard",children:[(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){n(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Administraci\xf3n / Pautas"}),(0,dr.jsxs)("button",{onClick:function(){f(!0)},title:"Nueva pauta",style:{position:"absolute",right:10,color:"#fff",backgroundColor:"#be2e26",paddingTop:10,paddingBottom:10,paddingLeft:20,paddingRight:20,borderRadius:20,borderColor:"transparent"},children:[(0,dr.jsx)(Bi,{icon:br,style:{marginRight:10}})," Nueva pauta"]})]})})})}),(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10,overflowY:"auto",height:"calc(100vh - 195px)"},children:(0,dr.jsx)(bve,{patterns:l})})}),(0,dr.jsxs)("div",{children:[(0,dr.jsx)(kwe,{open:i}),(0,dr.jsx)(ywe,{open:h,savedInfo:p,closeModal:function(){f(!1)}})]})]})})})})},wve=function(){var e=Dt(),t=(0,T.useState)(),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=Ue(),o=We().id;return(0,T.useEffect)((function(){jn.initDbPMs().then(function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jn.obtener(o,t.database);case 2:(n=e.sent)&&a(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),(0,dr.jsx)(qc,{children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:e.pageContainer,item:!0,xs:12,children:(0,dr.jsx)(qoe,{elevation:0,className:"pageCard",children:(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsx)("div",{style:{paddingLeft:0},children:(0,dr.jsxs)("div",{style:{float:"left",width:"100%"},children:[(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){i(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:r&&"Listado Pautas / ".concat(r.typepm)})]}),(0,dr.jsx)("div",{style:{height:"90%",width:"98%"},children:r&&(0,dr.jsx)(Hoe,{pauta:r})})]})})})})})})})})})},kve=function(){var e=Dt();Ue();return(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:e.pageContainer,item:!0,xs:12,children:(0,dr.jsx)(qoe,{elevation:0,className:"pageCard",children:(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("h1",{children:"Sin permiso de acceso"})})})})})})})},Sve=function(){var e=Dt(),t=Ue(),n=(0,T.useContext)(Uwe),r=n.isOperator,a=n.isSapExecutive,i=n.isShiftManager,o=n.isChiefMachinery,s=n.admin,l=n.userData,u=((0,T.useContext)(ake).setReport,rke()),c=u.priorityAssignments,d=u.normalAssignments,h=(0,T.useState)(!0),f=(0,U.Z)(h,2),p=f[0],m=(f[1],Coe(ao().breakpoints.down("sm"))),v=function(e){console.log(e),t("/assignment/".concat(e.idIndex))},g=function(e,t){return t.idIndex-e.idIndex};return(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:e.pageContainer,item:!0,xs:12,children:(0,dr.jsx)(qoe,{elevation:0,className:"pageCard",children:(0,dr.jsxs)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){t(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Actividades Asignadas"})]})})}),(0,dr.jsxs)("div",{style:{width:"100%",padding:10},children:[(0,dr.jsx)(Es,{container:!0,direction:"column",children:(0,dr.jsx)("div",{style:{width:"100%",borderRadius:10,borderStyle:"solid",borderWidth:1,borderColor:"#CCC",backgroundColor:"#CCC",marginBottom:10},children:(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:1,xs:1,children:(0,dr.jsx)("div",{style:{width:50,textAlign:"center"},children:(0,dr.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"N\xb0 OT"})})}),(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:1,xs:1,children:(0,dr.jsx)("div",{style:{width:50,textAlign:"center"},children:(0,dr.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Gu\xeda"})})}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,dr.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"SAP ID"})})}),(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsx)("p",{style:{fontSize:12,fontWeight:"bold",minWidth:170},children:"Inicio programado"})}),(0,dr.jsx)(Es,{item:!0,l:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsx)("p",{style:{fontSize:12,fontWeight:"bold",minWidth:170},children:"Inicio ejecuci\xf3n"})}),!m&&(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsx)("p",{style:{fontSize:12,fontWeight:"bold",minWidth:170},children:"T\xe9rmino programado"})}),!m&&(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsx)("p",{style:{fontSize:12,fontWeight:"bold",minWidth:170},children:"T\xe9rmino ejecuci\xf3n"})}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,children:(0,dr.jsx)("p",{style:{fontSize:12,fontWeight:"bold",textAlign:"center",minWidth:70},children:"Flota"})}),(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsx)("p",{style:{fontSize:12,fontWeight:"bold",textAlign:"center",minWidth:70},children:"Nro M\xe1quina"})}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,style:{width:"100%",textAlign:"right",paddingRight:20},children:(0,dr.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Acci\xf3n"})})]})})}),p&&(0,dr.jsxs)(Es,{container:!0,style:{overflowY:"auto",maxHeight:"calc(100vh - 295px)"},children:[(o||i)&&(0,dr.jsxs)("div",{style:{width:"100%"},children:[(0,dr.jsx)("h3",{className:"item-style",children:"Mis actividades pendientes"}),c.sort(g).map((function(e,t){return(0,dr.jsx)("div",{className:"border-color-primary".concat(" item-style"),style:{width:"100%",borderRadius:10,marginBottom:10},children:(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:1,xs:1,children:(0,dr.jsx)("div",{style:{width:50,textAlign:"center"},children:(0,dr.jsx)("p",{style:{fontSize:11},children:e.idIndex})})}),(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:1,xs:1,children:(0,dr.jsx)("div",{style:{textAlign:"center",width:50},children:(0,dr.jsx)("p",{style:{fontSize:11},children:e._guide})})}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,children:(0,dr.jsx)("div",{style:{textAlign:"center"},children:(0,dr.jsx)("p",{style:{fontSize:11},children:e.sapId})})}),(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left"},children:(0,dr.jsx)("p",{style:{fontSize:11,minWidth:170},children:Ut(e.datePrev)})})}),(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsx)("p",{style:{fontSize:11,minWidth:170},children:Ut(e.dateInit)})}),!m&&(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsxs)("p",{style:{fontSize:11,minWidth:170},children:[" ",Ut(e.endPrev)," "]})}),!m&&(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsxs)("p",{style:{fontSize:11,minWidth:170},children:[" ",Ut(e.endReport)," "]})}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,children:(0,dr.jsxs)("p",{style:{fontSize:11,textAlign:"center",minWidth:70},children:[" ",e.machineData&&e.machineData.type," ",e.machineData&&e.machineData.model," "]})}),(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsxs)("p",{style:{fontSize:11,textAlign:"center",minWidth:70},children:[" N\xb0: ",e.machineData&&e.machineData.equ," "]})}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,style:{width:"100%",textAlign:"right",paddingRight:0},children:(0,dr.jsx)($l,{onClick:function(){v(e)},color:"primary",style:{borderRadius:30},children:"Ver"})})]})},t)}))]}),(o||i||a||r||s)&&(0,dr.jsxs)("div",{style:{width:"100%"},children:[0===d.length&&p&&(0,dr.jsx)("div",{children:(0,dr.jsx)("p",{children:"Sin asignaciones"})}),d.sort(g).map((function(e,t){return(0,dr.jsx)("div",{style:{width:"100%",borderRadius:10,borderStyle:"solid",borderWidth:1,borderColor:e.readyToSend?"#be2e26":"#CCC",marginBottom:10,backgroundColor:e.endReport?"#f2f2f2":"#fff"},children:(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:1,xs:1,children:(0,dr.jsx)("div",{style:{width:50,textAlign:"center"},children:(0,dr.jsx)("p",{style:{fontSize:11},children:e.idIndex})})}),(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:1,xs:1,children:(0,dr.jsx)("div",{style:{width:50,textAlign:"center"},children:(0,dr.jsx)("p",{style:{fontSize:11},children:e._guide})})}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,children:(0,dr.jsx)("div",{style:{textAlign:"center"},children:(0,dr.jsx)("p",{style:{fontSize:11},children:e.sapId})})}),(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left"},children:(0,dr.jsx)("p",{style:{fontSize:11,minWidth:170},children:Ut(e.datePrev)})})}),(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsx)("p",{style:{fontSize:11,minWidth:170},children:Ut(e.dateInit)})}),!m&&(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsxs)("p",{style:{fontSize:11,minWidth:170},children:[" ",Ut(e.endPrev)," "]})}),!m&&(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left"},children:(0,dr.jsx)("p",{style:{fontSize:11,minWidth:170},children:Ut(e.endReport)})})}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,children:(0,dr.jsxs)("p",{style:{fontSize:11,textAlign:"center",minWidth:70},children:[" ",e.machineData&&e.machineData.type," ",e.machineData&&e.machineData.model," "]})}),(0,dr.jsx)(Es,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,dr.jsxs)("p",{style:{fontSize:11,textAlign:"center",minWidth:70},children:[" N\xb0: ",e.machineData&&e.machineData.equ," "]})}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,style:{width:"100%",textAlign:"right",paddingRight:0},children:(0,dr.jsx)($l,{onClick:function(){v(e)},color:"primary",style:{borderRadius:30,paddingRight:0},children:(0,dr.jsx)("p",{style:{margin:0},children:!r&&e.level&&e.level>0?"Ver":r&&(e.usersAssigned&&e.usersAssigned[0])===l._id?e.readyToSend?"Listo a enviar":"Ejecutar":"Ver"})})})]})},t)}))]})]}),(0,dr.jsx)(Es,{children:!p&&(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center",height:100},children:(0,dr.jsx)(Kc,{size:50})})})]})]})})})})})},Tve=T.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.color,i=void 0===a?"primary":a,o=e.value,s=e.valueBuffer,l=e.variant,u=void 0===l?"indeterminate":l,c=(0,Wi.Z)(e,["classes","className","color","value","valueBuffer","variant"]),d=ao(),h={},f={bar1:{},bar2:{}};if("determinate"===u||"buffer"===u)if(void 0!==o){h["aria-valuenow"]=Math.round(o),h["aria-valuemin"]=0,h["aria-valuemax"]=100;var p=o-100;"rtl"===d.direction&&(p=-p),f.bar1.transform="translateX(".concat(p,"%)")}else 0;if("buffer"===u)if(void 0!==s){var m=(s||0)-100;"rtl"===d.direction&&(m=-m),f.bar2.transform="translateX(".concat(m,"%)")}else 0;return T.createElement("div",(0,yt.Z)({className:(0,fo.Z)(n.root,n["color".concat((0,po.Z)(i))],r,{determinate:n.determinate,indeterminate:n.indeterminate,buffer:n.buffer,query:n.query}[u]),role:"progressbar"},h,{ref:t},c),"buffer"===u?T.createElement("div",{className:(0,fo.Z)(n.dashed,n["dashedColor".concat((0,po.Z)(i))])}):null,T.createElement("div",{className:(0,fo.Z)(n.bar,n["barColor".concat((0,po.Z)(i))],("indeterminate"===u||"query"===u)&&n.bar1Indeterminate,{determinate:n.bar1Determinate,buffer:n.bar1Buffer}[u]),style:f.bar1}),"determinate"===u?null:T.createElement("div",{className:(0,fo.Z)(n.bar,("indeterminate"===u||"query"===u)&&n.bar2Indeterminate,"buffer"===u?[n["color".concat((0,po.Z)(i))],n.bar2Buffer]:n["barColor".concat((0,po.Z)(i))]),style:f.bar2}))})),Eve=(0,St.Z)((function(e){var t=function(t){return"light"===e.palette.type?(0,Yo.$n)(t,.62):(0,Yo._j)(t,.5)},n=t(e.palette.primary.main),r=t(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4,"@media print":{colorAdjust:"exact"}},colorPrimary:{backgroundColor:n},colorSecondary:{backgroundColor:r},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(n," 0%, ").concat(n," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0 -23px"},"50%":{opacity:0,backgroundPosition:"0 -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(Tve),Cve=function(e,t,n,r){var a,i,o;"termino-orden-1"===e?(a="OT ".concat(t," deber\xe1 ser revisada por Jefe de Turno"),i="/assignment",o="Se ha terminado de ejecutar OT ".concat(t)):"termino-orden-2"===e?(a="OT ".concat(t," deber\xe1 ser revisada por Jefe de Maquinaria"),i="/assignment",o="Se ha terminado de ejecutar OT ".concat(t)):"termino-orden-3"===e?(a="OT ".concat(t," deber\xe1 ser revisada por Ejecutivo SAP"),i="/assignment",o="Se ha terminado de ejecutar OT ".concat(t)):"termino-orden-4"===e?(a="OT ".concat(t," Ha sido cerrada por Ejecutivo SAP"),i="/reports",o="Se ha terminado de ejecutar OT ".concat(t)):"rechazo-orden-0"===e?(a="OT ".concat(t," rechazada"),i="/assignment",o="Se ha rechazado ejecuci\xf3n de OT ".concat(t)):("rechazo-orden-1"===e||"rechazo-orden-2"===e)&&(a="OT ".concat(t," rechazada"),i="/assignment",o="Se requiere ajuste de OT ".concat(t)),fc(e,"".concat(r._id),"Ejecuciones OT",o,a,i,n)},_ve=function(){var e=Vwe(),t=e.admin,n=e.isOperator,r=e.isSapExecutive,a=e.isShiftManager,i=e.isChiefMachinery,o=e.userData,s=eke().isOnline,l=Dt(),u=Ue(),c=We().id,d=oke(),h=d.report,f=d.executionReport,p=d.setOtIndex,m=(d.otIndex,d.sapId),v=d.serieEquipo,g=(d.setLoading,d.setLoadingMessage),y=d.reporteIniciado,b=rke(),x=b.saveReportToData,w=(b.getReports,b.setStatusReports,b.getReportsOffline),k=b.setMessage,S=(0,T.useState)(0),E=(0,U.Z)(S,2),C=E[0],_=E[1],M=(0,T.useState)(0),A=(0,U.Z)(M,2),I=A[0],N=A[1],R=(0,T.useState)(),O=(0,U.Z)(R,2),D=O[0],L=O[1],P=(0,T.useState)(!1),F=(0,U.Z)(P,2),j=F[0],z=F[1],B=(0,T.useState)(),W=(0,U.Z)(B,2),V=(W[0],W[1],(0,T.useState)(!1)),Z=(0,U.Z)(V,2),H=Z[0],G=Z[1],q=(0,T.useState)([]),X=(0,U.Z)(q,2),Y=(X[0],X[1]),K=(0,T.useState)(!1),$=(0,U.Z)(K,2),J=$[0],Q=$[1],ee=(0,T.useState)(!1),te=(0,U.Z)(ee,2),ne=(te[0],te[1],(0,T.useState)(!1)),re=(0,U.Z)(ne,2),ae=(re[0],re[1],(0,T.useState)()),ie=(0,U.Z)(ae,2),oe=ie[0],se=ie[1],le=(0,T.useState)(!1),ue=(0,U.Z)(le,2),ce=ue[0],de=ue[1],he=(0,T.useState)(!1),fe=(0,U.Z)(he,2),pe=fe[0],me=(fe[1],(0,T.useState)()),ve=(0,U.Z)(me,2),ge=ve[0],ye=(ve[1],(0,T.useState)(!1)),be=(0,U.Z)(ye,2),xe=be[0],we=be[1],ke=(0,T.useState)(),Se=(0,U.Z)(ke,2),Te=Se[0],Ee=Se[1],Ce=(0,T.useState)(!1),_e=(0,U.Z)(Ce,2),Me=_e[0],Ae=_e[1],Ie=(0,T.useState)(),Ne=(0,U.Z)(Ie,2),Re=(Ne[0],Ne[1]),Oe=(0,T.useState)(!1),De=(0,U.Z)(Oe,2),Le=De[0],Pe=De[1],Fe=(0,T.useState)(),je=(0,U.Z)(Fe,2),ze=je[0],Be=je[1],Ve=(0,T.useState)(!1),Ze=(0,U.Z)(Ve,2),He=Ze[0],Ge=Ze[1];(0,T.useEffect)((function(){h?(L(h.level),console.log(r,h.level),n&&(0===h.level||!h.level)&&h.usersAssigned[0]===o._id||a&&1===h.level||i&&2===h.level||r&&3===h.level?z(!0):z(!1)):c&&p(c)}),[h,c,n,r,a,i]);var qe=function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se(He?"sendReport":"rejectReport"),G(!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){s?(Ge(!0),qe()):alert("Dispositivo debe estar conectado a internet.")},Ye=function(){var e=Vn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=19;break}if(!window.confirm("Confirme que terminar\xe1 su jornada")){e.next=17;break}return Q(!0),t=h,e.next=6,or(D);case 6:return n=e.sent,t.state="Asignar",t.emailing="termino-jornada",t.fullNameWorker="".concat(o.name," ").concat(o.lastName),t.emailsToSend=n,r=new Array,e.next=14,sr();case 14:r=e.sent,k("Enviando avisos a usuarios."),r.forEach(function(){var e=Vn(Un().mark((function e(n,a){var i,s,l,c,d;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hc("termino-jornada","".concat(o._id),n,"Aviso general","T\xe9rmino de jornada","".concat(o.name," ").concat(o.lastName," ha terminado su jornada. Recuerde reasignar OT"),"/reports"),a!=r.length-1){e.next=19;break}return k("Guardando OT en base de datos."),e.next=5,un(t);case 5:return i=e.sent,s=f,e.next=9,yn(s);case 9:if(!i){e.next=19;break}return e.next=12,Xn();case 12:return l=e.sent,c=l.database,e.next=16,Kn(t.idIndex,c);case 16:d=e.sent,console.log("Revisando si se borra de bases de datos",d),setTimeout((function(){alert("Se ha actualizado su reporte. La orden desaparecer\xe1 de su listado."),u(-1),Q(!1),k(""),w()}),500);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 17:e.next=21;break;case 19:Q(!1),alert("Dispositivo no est\xe1 conectado a internet. Conecte a una red e intente nuevamente");case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=Vn(Un().mark((function e(t){var n,r,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G(!1),!t){e.next=61;break}if(Q(!0),g("Guardando informaci\xf3n"),!(n=h).testMode){e.next=33;break}if(r=0,n.level&&0!==n.level?r=n.level+1:(r=1,n.endReport=new Date),n.emailing="termino-orden-".concat(r),2!==r){e.next=14;break}n.shiftManagerApprovedBy=o._id,n.shiftManagerApprovedDate=new Date,e.next=28;break;case 14:if(3!==r){e.next=20;break}n.chiefMachineryApprovedBy=o._id,n.chiefMachineryApprovedDate=new Date,n.state="Por cerrar",e.next=28;break;case 20:if(4!==r){e.next=28;break}return n.sapExecutiveApprovedBy=o._id,n.dateClose=new Date,n.state="Completadas",n.level=r,console.log(n),e.next=28,Tn(n);case 28:n.level=r,Cve(n.emailing,n.idIndex,n.history[n.history.length-1].userSendingData,o),$e(n),e.next=61;break;case 33:if(100!==I){e.next=59;break}if(a=0,n.level&&0!==n.level?a=n.level+1:(a=1,n.endReport=new Date),n.emailing="termino-orden-".concat(a),2!==a){e.next=42;break}n.shiftManagerApprovedBy=o._id,n.shiftManagerApprovedDate=new Date,e.next=54;break;case 42:if(3!==a){e.next=48;break}n.chiefMachineryApprovedBy=o._id,n.chiefMachineryApprovedDate=new Date,n.state="Por cerrar",e.next=54;break;case 48:if(4!==a){e.next=54;break}return n.sapExecutiveApprovedBy=o._id,n.dateClose=new Date,n.state="Completadas",e.next=54,Tn(n);case 54:n.level=a,Cve(n.emailing,n.idIndex,n.history[n.history.length-1].userSendingData,o),$e(n),e.next=61;break;case 59:Q(!1),alert("Reporte est\xe1 incompleto.");case 61:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Vn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(t),g("Guardando en bases de datos"),e.next=4,Jn();case 4:return n=e.sent,(r=f).offLineGuard=Date.now(),e.next=9,Qn(r,n.database);case 9:if(!s){e.next=12;break}return e.next=12,yn(r);case 12:alert(4===t.level?"Orden de trabajo cerrada correctamente":"Orden de trabajo enviado a revisi\xf3n"),u(-1),Q(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=Vn(Un().mark((function e(){var t,n,r,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(D>0)){e.next=14;break}return t=[],e.next=4,Jn();case 4:return n=e.sent,e.next=7,er(n.database);case 7:r=e.sent,console.log(r),a=r.filter((function(e){if(e.reportId===h._id)return e})),Object.keys(a[0].group).forEach((function(e,n){var r={nombre:e,data:[]};a[0].group[e].forEach((function(n,i){if("*"===n.unidad);else{var o={task:n.task,taskdesc:n.taskdesc,obs01:n.obs01,partnumberUtl:n.partnumberUtl,cantidad:n.cantidad,unidad:n.unidad,unidadData:n.unidadData?Number(n.unidadData):0,diferencia:parseFloat(n.cantidad.toString())-parseFloat(n.unidadData?n.unidadData.toString():"0")};r.data.push(o)}i===a[0].group[e].length-1&&r.data.length>0&&(console.log(r),t.push(r))})),n===Object.keys(a[0].group).length-1&&Be(t)})),Pe(!0),e.next=15;break;case 14:alert("Orden a\xfan no est\xe1 listo para revisar el listado de materiales o insumos.");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,dr.jsxs)(qc,{height:"80vh",children:[(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:l.pageContainer,item:!0,xs:12,children:(0,dr.jsx)(qoe,{elevation:0,className:"pageCard",children:(0,dr.jsxs)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10,width:"100%"},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){u(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsxs)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:["Actividades Asignadas / Detalle / OT ",c," ",(0,dr.jsx)("strong",{children:h&&h.testMode?"Modo test":""})]})]})})}),(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xl:f?10:12,md:f?10:12,sm:12,children:(0,dr.jsx)("div",{style:{padding:20},children:f&&f._id?(0,dr.jsx)(Hoe,{height:pe?"calc(100vh - 850px)":"calc(100vh - 360px)",report:h,setProgress:function(e){var t=e.progressPage,n=e.globalProgress;_(Number(t)),N(Number(n))},setIndexGroupToSend:Y,resultThisItemProgress:N,selectionItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new String,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new String,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new String;return console.log(e,t),"PC5500"===t?"Motor"===e||"Mando Final"===e||"Rodado"===e||"PTO"===e||"Neum\xe1ticos"===e||"Hidr\xe1ulico"===e||"Mando de Giro"===e||"Chassis"===e||"Cabina"===e||"Implementos"===e||"El\xe9ctrico"===e:"793-F"===t?"Motor"===e||"Transmisi\xf3n"===e||"Ejes"===e||"Neum\xe1ticos"===e||"Hidr\xe1ulico"===e||"Direcci\xf3n"===e||"Chassis"===e||"Cabina"===e||"Mazas"===e||"Sistema Neum\xe1tico"===e||"Suspensi\xf3n"===e:void 0}(e,ge.model),n={name:lr(e),brand:ge.brand,model:ge.model,nameModel:"".concat(lr(e),"_").concat(ge.model)};console.log(t),Ee(JSON.stringify(n)),we(t)},setUltimoGuardadoDispositivo:Re,canEdit:j,executionReport:f}):(0,dr.jsx)("div",{style:{width:"100%",lineHeight:pe?"calc(100vh - 850px)":"calc(100vh - 360px)",height:pe?"calc(100vh - 850px)":"calc(100vh - 360px)",textAlign:"center"},children:(0,dr.jsx)("p",{style:{lineHeight:" 1.5",display:"inline-block",verticalAlign:"middle",fontSize:25},children:y?"Descargando pauta...":"Reporte no iniciado"})})})}),h&&f&&(0,dr.jsx)(Es,{item:!0,xl:2,md:2,sm:12,children:(0,dr.jsxs)("div",{style:{marginTop:20,padding:20,backgroundColor:"#F9F9F9",borderRadius:10,height:"71vh",overflowY:"auto"},children:[(0,dr.jsxs)("div",{style:{textAlign:"center",width:"100%"},children:[(0,dr.jsxs)("h2",{style:{margin:0},children:["OT ",c]}),(0,dr.jsxs)("p",{style:{margin:0},children:["OM SAP: ",m&&m]}),(0,dr.jsxs)("p",{style:{margin:0},children:["Serie Equipo: ",v&&v]}),(0,dr.jsxs)("p",{style:{margin:0},children:["Tipo de pauta: ",(0,dr.jsx)("strong",{children:h&&h.reportType})]}),(0,dr.jsx)("p",{style:{backgroundColor:"red",color:"white",marginBottom:0},children:(0,dr.jsx)("strong",{children:h&&h.testMode?"Modo test":""})}),ge&&(0,dr.jsxs)("p",{style:{margin:0},children:["Modelo M\xe1quina ",ge.model,", N\xb0",ge.equ]}),(0,dr.jsx)("br",{}),xe&&(0,dr.jsx)($l,{variant:"contained",disabled:!xe,style:{paddingLeft:20,paddingRight:20,paddingTop:10,paddingBottom:10},onClick:function(){Ae(!0)},children:(0,dr.jsx)("strong",{children:"3D"})})]}),(0,dr.jsxs)("h4",{style:{textAlign:"center"},children:["Avance en esta hoja: ",C,"%"]}),(0,dr.jsx)(Eve,{variant:"determinate",value:C,style:{width:"100%"}}),(0,dr.jsxs)("h4",{style:{textAlign:"center"},children:["Avance total: ",I,"%"]}),(0,dr.jsx)(Eve,{variant:"determinate",value:I,style:{width:"100%"}}),(0,dr.jsx)("br",{}),(n&&(!h.level||0===h.level)&&h.usersAssigned[0]===o._id||a&&1===h.level||i&&2===h.level)&&(0,dr.jsxs)($l,{variant:"contained",color:"primary",style:{padding:10,width:"100%",marginBottom:20},onClick:Xe,children:[(0,dr.jsx)(Bi,{icon:Lr,style:{marginRight:10}})," Enviar OT"]}),(r&&3===h.level||t)&&(0,dr.jsxs)($l,{variant:"contained",color:"primary",style:{padding:10,width:"100%",marginBottom:20},onClick:Xe,children:[(0,dr.jsx)(Bi,{icon:Lr,style:{marginRight:10}})," Cerrar OT"]}),(r&&3===h.level||t)&&(0,dr.jsxs)($l,{variant:"contained",color:"primary",style:{padding:10,width:"100%",marginBottom:20},onClick:Je,children:[(0,dr.jsx)(Bi,{icon:Cr,style:{marginRight:10}})," Resumen Insumos/Materiales"]}),(a&&1===h.level||i&&2===h.level||r&&3===h.level)&&(0,dr.jsxs)($l,{variant:"contained",color:"primary",style:{padding:10,width:"100%",marginBottom:20},onClick:function(){s?(Ge(!1),qe()):alert("Dispositivo debe estar conectado a internet.")},children:[(0,dr.jsx)(Jl,{}),"Rechazar OT"]}),n&&(0===h.level||!h.level)&&h.usersAssigned[0]===o._id&&(0,dr.jsxs)($l,{onClick:Ye,variant:"contained",color:"primary",style:{padding:10,width:"100%",marginBottom:20},children:[(0,dr.jsx)(Bi,{icon:xr,style:{marginRight:10}})," Terminar Jornada"]}),(0,dr.jsxs)($l,{variant:"contained",color:"primary",style:{padding:10,width:"100%",marginBottom:0},onClick:function(){de(!0)},children:[(0,dr.jsx)(Bi,{icon:wr,style:{marginRight:10}})," Mensajes de flujo"]})]})})]}),H&&(0,dr.jsx)(jwe,{canEdit:j,open:H,closeModal:He?Ke:function(e){if(G(!1),e){Q(!0),console.log(h);var t=h;if(t.testMode){var n=t.level-1;t.level=n,t.emailing="rechazo-orden-".concat(n),2===n||3===n&&(t.state="En proceso"),console.log(t),Cve(t.emailing,t.idIndex,t.history[t.history.length-1].userSendingData,o._id),$e(t)}else if(100===I){var r=t.level-1;t.level=r,t.emailing="rechazo-orden-".concat(r),2===r||3===r&&(t.state="En proceso"),console.log(t),Cve(t.emailing,t.idIndex,t.history[t.history.length-1].userSendingData,o._id),$e(t)}else Q(!1),alert("Reporte est\xe1 incompleto.")}},report:h,messageType:oe}),ce&&(0,dr.jsx)(Bwe,{open:ce,close:function(){de(!1)},report:h})]})})})}),Le&&(0,dr.jsx)(zwe,{open:Le,data:ze,closePreviewModal:function(){Pe(!1)}}),J&&(0,dr.jsx)(kwe,{open:J}),(0,dr.jsx)(Fo,{open:Me,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,dr.jsxs)(qc,{sx:jt,children:[(0,dr.jsx)(Soe,{subSistem:Te}),(0,dr.jsx)(od,{onClick:function(){Ae(!1)},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},color:"primary",children:(0,dr.jsx)(Jl,{})})]})})]})},Mve=function(){var e=Ue(),t=Dt(),n=(0,T.useState)([]),r=(0,U.Z)(n,2),a=r[0],i=r[1];return(0,T.useEffect)((function(){wn().then((function(e){e.data.forEach(function(){var t=Vn(Un().mark((function t(n,r){return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ir(n.from);case 2:n.fullName=t.sent,n.index=r,r==e.data.length-1&&i(e.data.reverse());case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}))}),[]),(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:t.pageContainer,item:!0,xs:12,children:(0,dr.jsx)(qoe,{elevation:0,className:"pageCard",children:(0,dr.jsxs)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){e(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)("p",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Mensajes Internos"})]})})}),(0,dr.jsx)("div",{style:{width:"100vw",marginRight:11,overflowY:"scroll",maxHeight:"70vh",paddingLeft:20,paddingRight:20},children:(0,dr.jsx)(gl,{children:a.length>0&&a.map((function(e,t){return(0,dr.jsxs)("div",{children:[(0,dr.jsxs)("h2",{children:[e.index+1,".- ",e.fullName,":"]}),(0,dr.jsx)("p",{children:e.message}),(0,dr.jsx)("br",{})]},t)}))})})]})})})})})},Ave=function(){var e=ose(),t=e.myNotifications,n=e.getNotifications,r=(0,T.useState)(!1),a=(0,U.Z)(r,2),i=a[0],o=a[1],s=Dt(),l=Ue();return(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:s.pageContainer,item:!0,xs:12,children:(0,dr.jsxs)(qoe,{elevation:0,className:"pageCard",children:[(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsxs)("div",{style:{width:"100%",position:"relative",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:[(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){l(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Notificaciones"})]}),(0,dr.jsx)($l,{onClick:function(){o(!0),setTimeout((function(){var e=(0,_.Z)(t);e.forEach((function(t,r){Cn(t._id),r==e.length-1&&(n(),o(!1))}))}),1e3)},style:{position:"absolute",right:10,top:10},children:"Indicar Todo Le\xeddo"})]})})}),(0,dr.jsxs)(Es,{alignItems:"center",justifyContent:"center",style:{padding:10,borderRadius:20},children:[(0,dr.jsx)("div",{style:{height:"calc(100vh - 220px)",overflowY:"auto"},children:t.slice(0,20).map((function(e,t){return(0,dr.jsxs)(ed,{style:{backgroundColor:e.state?"#fff":"#F9F9F9"},children:[(0,dr.jsxs)("div",{style:{width:"15%",marginLeft:5,fontSize:12},children:[(0,dr.jsx)("h1",{children:e.title}),(0,dr.jsx)("h2",{children:e.subtitle})]}),(0,dr.jsx)("div",{style:{width:"20%",marginLeft:5,fontSize:12},children:(0,dr.jsx)("p",{style:{fontSize:18},children:e.message})}),(0,dr.jsx)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:(0,dr.jsx)("p",{style:{fontSize:18},children:Vt(e.createdAt)})}),(0,dr.jsx)("div",{style:{width:"20%",marginLeft:5,fontSize:12},children:(0,dr.jsx)("button",{style:{width:50,height:40,borderRadius:20,fontSize:20},onClick:function(){var t;l(e.url),t=e._id,Cn(t)},children:"Ir"})})]},t)}))}),i&&(0,dr.jsx)(kwe,{open:i})]})]})})})})},Ive=function(){var e=Dt(),t=Ue(),n=(0,T.useState)(!1),r=(0,U.Z)(n,2),a=r[0],i=r[1];return(0,dr.jsxs)(qc,{height:"100%",children:[a&&(0,dr.jsx)(bwe,{open:a,closeModal:function(){i(!1)}}),(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:e.pageContainer,item:!0,xs:12,children:(0,dr.jsxs)(qoe,{elevation:0,className:"pageCard",children:[(0,dr.jsx)(Es,{container:!0,alignItems:"center",justifyContent:"center",children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",position:"relative",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){t(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Opciones"})]})})})}),(0,dr.jsxs)(Es,{alignItems:"center",justifyContent:"center",style:{padding:10,borderRadius:20},children:[(0,dr.jsx)(Es,{container:!0,children:(0,dr.jsx)(Es,{item:!0,children:(0,dr.jsxs)(Es,{container:!0,style:{borderBottomWidth:1,borderBottomColor:"#ccc",borderBottomStyle:"solid",padding:10},children:[(0,dr.jsx)(Es,{item:!0,children:(0,dr.jsx)("div",{children:(0,dr.jsx)("p",{children:(0,dr.jsx)("strong",{children:"Ver pautas descargadas"})})})}),(0,dr.jsx)(Es,{item:!0,children:(0,dr.jsx)("div",{style:{marginTop:10,marginLeft:15},children:(0,dr.jsx)($l,{color:"primary",onClick:function(){i(!0)},children:"Abrir"})})})]})})}),(0,dr.jsx)(Es,{container:!0,children:(0,dr.jsx)(Es,{item:!0,children:(0,dr.jsxs)(Es,{container:!0,style:{borderBottomWidth:1,borderBottomColor:"#ccc",borderBottomStyle:"solid",padding:10},children:[(0,dr.jsx)(Es,{item:!0,children:(0,dr.jsx)("div",{children:(0,dr.jsxs)("p",{children:[(0,dr.jsx)("strong",{children:"Borrar Cach\xe9"})," ",(0,dr.jsx)("br",{})," (\xc9sta acci\xf3n borrar\xe1 toda la informaci\xf3n de la aplicaci\xf3n ",(0,dr.jsx)("br",{})," en el dispositivo)"]})})}),(0,dr.jsx)(Es,{item:!0,children:(0,dr.jsx)("div",{style:{marginTop:26,marginLeft:15},children:(0,dr.jsx)($l,{color:"primary",onClick:function(){confirm("Limpiar\xe1 toda la data del sistema y cerrar\xe1 la sesi\xf3n. Una vez terminado vuelva a iniciar.")&&window.indexedDB.databases().then((function(e){console.log(e),e.forEach((function(t,n){window.indexedDB.deleteDatabase(t.name),n==e.length-1&&(window.localStorage.clear(),window.location.reload(),removeDatabases())}))}))},children:"Borrar"})})})]})})})]})]})})})]})},Nve=n(9498);function Rve(e){return JSON.stringify(e)}function Ove(e){if(!e||-1===e.indexOf("-")||!function(e){return e.toLowerCase()===e}(e))return e;var t=e.split("-"),n=t[0],r=void 0===n?"":n,a=t[1],i=void 0===a?"":a;return"".concat(r,"-").concat(i.toUpperCase())}var Dve=Nve((function(e){var t,n=void 0===e?{}:e,r=n.useFallbackLocale,a=void 0===r||r,i=n.fallbackLocale,o=void 0===i?"en-US":i,s=[];return"undefined"!==typeof navigator&&(s=s.concat(navigator.languages,navigator.language)),a&&s.push(o),(t=s,t.filter((function(e,n){return e&&t.indexOf(e)===n}))).map(Ove)}),Rve);var Lve=Nve((function(e){return Dve(e)[0]||null}),Rve),Pve=Lve;function Fve(e,t,n){return function(r,a){void 0===a&&(a=n);var i=e(r)+a;return t(i)}}function jve(e){return function(t){return new Date(e(t).getTime()-1)}}function zve(e,t){return function(n){return[e(n),t(n)]}}function Bve(e){if(e instanceof Date)return e.getFullYear();if("number"===typeof e)return e;var t=parseInt(e,10);if("string"===typeof e&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function Uve(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function Wve(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function Vve(e){var t=Bve(e),n=t+(1-t)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var Zve=Fve(Bve,Vve,-100),Hve=Fve(Bve,Vve,100),Gve=jve(Hve),qve=Fve(Bve,Gve,-100),Xve=(Fve(Bve,Gve,100),zve(Vve,Gve));function Yve(e){var t=Bve(e),n=t+(1-t)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var Kve=Fve(Bve,Yve,-10),$ve=Fve(Bve,Yve,10),Jve=jve($ve),Qve=Fve(Bve,Jve,-10),ege=(Fve(Bve,Jve,10),zve(Yve,Jve));function tge(e){var t=Bve(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}var nge=Fve(Bve,tge,-1),rge=Fve(Bve,tge,1),age=jve(rge),ige=Fve(Bve,age,-1),oge=(Fve(Bve,age,1),zve(tge,age));function sge(e,t){return function(n,r){void 0===r&&(r=t);var a=Bve(n),i=Uve(n)+r,o=new Date;return o.setFullYear(a,i,1),o.setHours(0,0,0,0),e(o)}}function lge(e){var t=Bve(e),n=Uve(e),r=new Date;return r.setFullYear(t,n,1),r.setHours(0,0,0,0),r}var uge=sge(lge,-1),cge=sge(lge,1),dge=jve(cge),hge=sge(dge,-1),fge=(sge(dge,1),zve(lge,dge));function pge(e,t){return function(n,r){void 0===r&&(r=t);var a=Bve(n),i=Uve(n),o=Wve(n)+r,s=new Date;return s.setFullYear(a,i,o),s.setHours(0,0,0,0),e(s)}}function mge(e){var t=Bve(e),n=Uve(e),r=Wve(e),a=new Date;return a.setFullYear(t,n,r),a.setHours(0,0,0,0),a}pge(mge,-1);var vge,gge=jve(pge(mge,1)),yge=(pge(gge,-1),pge(gge,1),zve(mge,gge));function bge(e){return Wve(dge(e))}var xge={ARABIC:"Arabic",HEBREW:"Hebrew",ISO_8601:"ISO 8601",US:"US"},wge=((vge={})[xge.US]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],vge[xge.ARABIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],vge[xge.HEBREW]=["he","he-IL"],vge),kge=[0,1,2,3,4,5,6],Sge=new Map;function Tge(e){return function(t,n){return function(e){return function(t,n){var r=t||Pve();Sge.has(r)||Sge.set(r,new Map);var a=Sge.get(r);return a.has(e)||a.set(e,new Intl.DateTimeFormat(r||void 0,e).format),a.get(e)(n)}}(e)(t,function(e){var t=new Date(e);return new Date(t.setHours(12))}(n))}}Tge({day:"numeric",month:"numeric",year:"numeric"});var Ege=Tge({day:"numeric"}),Cge=Tge({day:"numeric",month:"long",year:"numeric"}),_ge=Tge({month:"long"}),Mge=Tge({month:"long",year:"numeric"}),Age=Tge({weekday:"short"}),Ige=Tge({weekday:"long"}),Nge=Tge({year:"numeric"}),Rge=kge[0],Oge=kge[5],Dge=kge[6];function Lge(e,t){void 0===t&&(t=xge.ISO_8601);var n=e.getDay();switch(t){case xge.ISO_8601:return(n+6)%7;case xge.ARABIC:return(n+1)%7;case xge.HEBREW:case xge.US:return n;default:throw new Error("Unsupported calendar type.")}}function Pge(e,t){void 0===t&&(t=xge.ISO_8601);var n=Bve(e),r=Uve(e),a=e.getDate()-Lge(e,t);return new Date(n,r,a)}function Fge(e,t){switch(e){case"century":return Vve(t);case"decade":return Yve(t);case"year":return tge(t);case"month":return lge(t);case"day":return mge(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function jge(e,t){switch(e){case"century":return Hve(t);case"decade":return $ve(t);case"year":return rge(t);case"month":return cge(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function zge(e,t){switch(e){case"century":return Gve(t);case"decade":return Jve(t);case"year":return age(t);case"month":return dge(t);case"day":return gge(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Bge(e,t){switch(e){case"century":return Xve(t);case"decade":return ege(t);case"year":return oge(t);case"month":return fge(t);case"day":return yge(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Uge(e,t,n){return void 0===t&&(t=Nge),n.map((function(n){return t(e,n)})).join(" \u2013 ")}function Wge(e,t,n){return Uge(e,t,ege(n))}function Vge(e){return e.getDay()===(new Date).getDay()}function Zge(e,t){void 0===t&&(t=xge.ISO_8601);var n=e.getDay();switch(t){case xge.ARABIC:case xge.HEBREW:return n===Oge||n===Dge;case xge.ISO_8601:case xge.US:return n===Dge||n===Rge;default:throw new Error("Unsupported calendar type.")}}var Hge=Object.values(xge),Gge=["century","decade","year","month"],qge=Ai().oneOf(Hge),Xge=Ai().oneOfType([Ai().string,Ai().arrayOf(Ai().string)]),Yge=function(e,t,n){var r=e[t];if(!r)return null;if(!(r instanceof Date))return new Error("Invalid prop `".concat(t,"` of type `").concat(typeof r,"` supplied to `").concat(n,"`, expected instance of `Date`."));var a=e.maxDate;return a&&r>a?new Error("Invalid prop `".concat(t,"` of type `").concat(typeof r,"` supplied to `").concat(n,"`, minDate cannot be larger than maxDate.")):null},Kge=function(e,t,n){var r=e[t];if(!r)return null;if(!(r instanceof Date))return new Error("Invalid prop `".concat(t,"` of type `").concat(typeof r,"` supplied to `").concat(n,"`, expected instance of `Date`."));var a=e.minDate;return a&&r<a?new Error("Invalid prop `".concat(t,"` of type `").concat(typeof r,"` supplied to `").concat(n,"`, maxDate cannot be smaller than minDate.")):null},$ge=Ai().oneOfType([Ai().func,Ai().exact({current:Ai().any})]),Jge=Ai().oneOfType([Ai().instanceOf(Date),Ai().arrayOf(Ai().instanceOf(Date))]),Qge=Ai().arrayOf(Ai().oneOf(Gge)),eye=function(e,t,n){var r=e[t];return void 0===r||"string"===typeof r&&-1!==Gge.indexOf(r)?null:new Error("Invalid prop `".concat(t,"` of value `").concat(r,"` supplied to `").concat(n,"`, expected one of [").concat(Gge.map((function(e){return'"'.concat(e,'"')})).join(", "),"]."))};eye.isRequired=function(e,t,n,r,a){var i=e[t];return i?eye(e,t,n):new Error("The prop `".concat(t,"` is marked as required in `").concat(n,"`, but its value is `").concat(i,"`."))};var tye={activeStartDate:Ai().instanceOf(Date).isRequired,hover:Ai().instanceOf(Date),locale:Ai().string,maxDate:Kge,minDate:Yge,onClick:Ai().func,onMouseOver:Ai().func,tileClassName:Ai().oneOfType([Ai().func,Xge]),tileContent:Ai().oneOfType([Ai().func,Ai().node]),value:Jge,valueType:Ai().string},nye={activeStartDate:Ai().instanceOf(Date).isRequired,classes:Ai().arrayOf(Ai().string).isRequired,date:Ai().instanceOf(Date).isRequired,locale:Ai().string,maxDate:Kge,minDate:Yge,onClick:Ai().func,onMouseOver:Ai().func,style:Ai().objectOf(Ai().oneOfType([Ai().string,Ai().number])),tileClassName:Ai().oneOfType([Ai().func,Xge]),tileContent:Ai().oneOfType([Ai().func,Ai().node]),tileDisabled:Ai().func},rye="react-calendar__navigation";function aye(e){var t=e.activeStartDate,n=e.drillUp,r=e.formatMonthYear,a=void 0===r?Mge:r,i=e.formatYear,o=void 0===i?Nge:i,s=e.locale,l=e.maxDate,u=e.minDate,c=e.navigationAriaLabel,d=void 0===c?"":c,h=e.navigationAriaLive,f=e.navigationLabel,p=e.next2AriaLabel,m=void 0===p?"":p,v=e.next2Label,g=void 0===v?"\xbb":v,y=e.nextAriaLabel,b=void 0===y?"":y,x=e.nextLabel,w=void 0===x?"\u203a":x,k=e.prev2AriaLabel,S=void 0===k?"":k,E=e.prev2Label,C=void 0===E?"\xab":E,_=e.prevAriaLabel,M=void 0===_?"":_,A=e.prevLabel,I=void 0===A?"\u2039":A,N=e.setActiveStartDate,R=e.showDoubleView,O=e.view,D=e.views.indexOf(O)>0,L="century"!==O,P=function(e,t){switch(e){case"century":return Zve(t);case"decade":return Kve(t);case"year":return nge(t);case"month":return uge(t);default:throw new Error("Invalid rangeType: ".concat(e))}}(O,t),F=L?function(e,t){switch(e){case"decade":return Kve(t,-100);case"year":return nge(t,-10);case"month":return uge(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}(O,t):void 0,j=jge(O,t),z=L?function(e,t){switch(e){case"decade":return $ve(t,100);case"year":return rge(t,10);case"month":return cge(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}(O,t):void 0,B=function(){if(P.getFullYear()<0)return!0;var e=function(e,t){switch(e){case"century":return qve(t);case"decade":return Qve(t);case"year":return ige(t);case"month":return hge(t);default:throw new Error("Invalid rangeType: ".concat(e))}}(O,t);return u&&u>=e}(),U=L&&function(){if(F.getFullYear()<0)return!0;var e=function(e,t){switch(e){case"decade":return Qve(t,-100);case"year":return ige(t,-10);case"month":return hge(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}(O,t);return u&&u>=e}(),W=l&&l<j,V=L&&l&&l<z;function Z(e){var t=function(){switch(O){case"century":return function(e,t,n){return Uge(e,t,Xve(n))}(s,o,e);case"decade":return Wge(s,o,e);case"year":return o(s,e);case"month":return a(s,e);default:throw new Error("Invalid view: ".concat(O,"."))}}();return f?f({date:e,label:t,locale:s||Lve()||void 0,view:O}):t}return T.createElement("div",{className:rye},null!==C&&L?T.createElement("button",{"aria-label":S,className:"".concat(rye,"__arrow ").concat(rye,"__prev2-button"),disabled:U,onClick:function(){N(F,"prev2")},type:"button"},C):null,null!==I&&T.createElement("button",{"aria-label":M,className:"".concat(rye,"__arrow ").concat(rye,"__prev-button"),disabled:B,onClick:function(){N(P,"prev")},type:"button"},I),function(){var e="".concat(rye,"__label");return T.createElement("button",{"aria-label":d,"aria-live":h,className:e,disabled:!D,onClick:n,style:{flexGrow:1},type:"button"},T.createElement("span",{className:"".concat(e,"__labelText ").concat(e,"__labelText--from")},Z(t)),R?T.createElement(T.Fragment,null,T.createElement("span",{className:"".concat(e,"__divider")}," \u2013 "),T.createElement("span",{className:"".concat(e,"__labelText ").concat(e,"__labelText--to")},Z(j))):null)}(),null!==w&&T.createElement("button",{"aria-label":b,className:"".concat(rye,"__arrow ").concat(rye,"__next-button"),disabled:W,onClick:function(){N(j,"next")},type:"button"},w),null!==g&&L?T.createElement("button",{"aria-label":m,className:"".concat(rye,"__arrow ").concat(rye,"__next2-button"),disabled:V,onClick:function(){N(z,"next2")},type:"button"},g):null)}aye.propTypes={activeStartDate:Ai().instanceOf(Date).isRequired,drillUp:Ai().func.isRequired,formatMonthYear:Ai().func,formatYear:Ai().func,locale:Ai().string,maxDate:Ai().instanceOf(Date),minDate:Ai().instanceOf(Date),navigationAriaLabel:Ai().string,navigationAriaLive:Ai().string,navigationLabel:Ai().func,next2AriaLabel:Ai().string,next2Label:Ai().node,nextAriaLabel:Ai().string,nextLabel:Ai().node,prev2AriaLabel:Ai().string,prev2Label:Ai().node,prevAriaLabel:Ai().string,prevLabel:Ai().node,setActiveStartDate:Ai().func.isRequired,showDoubleView:Ai().bool,view:eye.isRequired,views:Qge.isRequired};var iye=function(){return iye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},iye.apply(this,arguments)},oye=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function sye(e){return"".concat(e,"%")}function lye(e){var t=e.children,n=e.className,r=e.count,a=e.direction,i=e.offset,o=e.style,s=e.wrap,l=oye(e,["children","className","count","direction","offset","style","wrap"]);return T.createElement("div",iye({className:n,style:iye({display:"flex",flexDirection:a,flexWrap:s?"wrap":"nowrap"},o)},l),T.Children.map(t,(function(e,t){var n=i&&0===t?sye(100*i/r):null;return T.cloneElement(e,iye(iye({},e.props),{style:{flexBasis:sye(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:n,marginInlineStart:n,marginInlineEnd:0}}))})))}function uye(e,t){return t[0]<=e&&t[1]>=e}function cye(e,t){return uye(e[0],t)||uye(e[1],t)}function dye(e,t,n){var r=[];if(cye(t,e)){r.push(n);var a=uye(e[0],t),i=uye(e[1],t);a&&r.push("".concat(n,"Start")),i&&r.push("".concat(n,"End")),a&&i&&r.push("".concat(n,"BothEnds"))}return r}function hye(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,r=e.hover,a="react-calendar__tile",i=[a];if(!n)return i;var o=new Date,s=function(){if(Array.isArray(n))return n;var t=e.dateType;if(!t)throw new Error("dateType is required when date is not an array of two dates");return Bge(t,n)}();if(uye(o,s)&&i.push("".concat(a,"--now")),!t)return i;var l,u,c=function(){if(Array.isArray(t))return t;var n=e.valueType;if(!n)throw new Error("valueType is required when value is not an array of two dates");return Bge(n,t)}();u=s,(l=c)[0]<=u[0]&&l[1]>=u[1]?i.push("".concat(a,"--active")):cye(c,s)&&i.push("".concat(a,"--hasActive"));var d=dye(c,s,"".concat(a,"--range"));i.push.apply(i,d);var h=Array.isArray(t)?t:[t];if(r&&1===h.length){var f=dye(r>c[0]?[c[0],r]:[r,c[0]],s,"".concat(a,"--hover"));i.push.apply(i,f)}return i}lye.propTypes={children:Ai().node,className:Ai().string,count:Ai().number.isRequired,direction:Ai().string,offset:Ai().number,style:Ai().objectOf(Ai().oneOfType([Ai().string,Ai().number])),wrap:Ai().bool};var fye=function(){return fye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},fye.apply(this,arguments)},pye=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function mye(e){for(var t=e.className,n=e.count,r=void 0===n?3:n,a=e.dateTransform,i=e.dateType,o=e.end,s=e.hover,l=e.offset,u=e.start,c=e.step,d=void 0===c?1:c,h=e.tile,f=e.value,p=e.valueType,m=pye(e,["className","count","dateTransform","dateType","end","hover","offset","start","step","tile","value","valueType"]),v=[],g=u;g<=o;g+=d){var y=a(g);v.push(T.createElement(h,fye({key:y.getTime(),classes:hye({value:f,valueType:p,date:y,dateType:i,hover:s}),date:y,point:g},m)))}return T.createElement(lye,{className:t,count:r,offset:l,wrap:!0},v)}mye.propTypes=fye(fye({},tye),{className:Ai().string,count:Ai().number,dateTransform:Ai().func.isRequired,dateType:Ai().string,end:Ai().number.isRequired,offset:Ai().number,step:Ai().number,start:Ai().number.isRequired,tile:Ai().func.isRequired});var vye=function(){return vye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},vye.apply(this,arguments)};function gye(e){var t=e.activeStartDate,n=e.children,r=e.classes,a=e.date,i=e.formatAbbr,o=e.locale,s=e.maxDate,l=e.maxDateTransform,u=e.minDate,c=e.minDateTransform,d=e.onClick,h=e.onMouseOver,f=e.style,p=e.tileClassName,m=e.tileContent,v=e.tileDisabled,g=e.view,y=(0,T.useMemo)((function(){return"function"===typeof p?p({activeStartDate:t,date:a,view:g}):p}),[t,a,p,g]),b=(0,T.useMemo)((function(){return"function"===typeof m?m({activeStartDate:t,date:a,view:g}):m}),[t,a,m,g]);return T.createElement("button",{className:(0,fo.Z)(r,y),disabled:u&&c(u)>a||s&&l(s)<a||v&&v({activeStartDate:t,date:a,view:g}),onClick:d?function(e){return d(a,e)}:void 0,onFocus:h?function(){return h(a)}:void 0,onMouseOver:h?function(){return h(a)}:void 0,style:f,type:"button"},i?T.createElement("abbr",{"aria-label":i(o,a)},n):n,b)}gye.propTypes=vye(vye({},nye),{children:Ai().node.isRequired,formatAbbr:Ai().func,maxDateTransform:Ai().func.isRequired,minDateTransform:Ai().func.isRequired});var yye=function(){return yye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},yye.apply(this,arguments)},bye=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},xye=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},wye="react-calendar__century-view__decades__decade";function kye(e){var t=e.classes,n=void 0===t?[]:t,r=e.formatYear,a=void 0===r?Nge:r,i=bye(e,["classes","formatYear"]),o=i.date,s=i.locale;return T.createElement(gye,yye({},i,{classes:xye(xye([],n,!0),[wye],!1),maxDateTransform:Jve,minDateTransform:Yve,view:"century"}),Wge(s,a,o))}kye.propTypes=yye(yye({},nye),{formatYear:Ai().func});var Sye=function(){return Sye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Sye.apply(this,arguments)};function Tye(e){var t=function(e){return Bve(Vve(e))}(e.activeStartDate),n=t+99;return T.createElement(mye,Sye({},e,{className:"react-calendar__century-view__decades",dateTransform:Yve,dateType:"decade",end:n,start:t,step:10,tile:kye}))}Tye.propTypes=Sye({},tye);var Eye=function(){return Eye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Eye.apply(this,arguments)};function Cye(e){return T.createElement("div",{className:"react-calendar__century-view"},T.createElement(Tye,Eye({},e)))}var _ye=function(){return _ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},_ye.apply(this,arguments)},Mye=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Aye=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},Iye="react-calendar__decade-view__years__year";function Nye(e){var t=e.classes,n=void 0===t?[]:t,r=e.formatYear,a=void 0===r?Nge:r,i=Mye(e,["classes","formatYear"]),o=i.date,s=i.locale;return T.createElement(gye,_ye({},i,{classes:Aye(Aye([],n,!0),[Iye],!1),maxDateTransform:age,minDateTransform:tge,view:"decade"}),a(s,o))}Nye.propTypes=_ye(_ye({},nye),{formatYear:Ai().func});var Rye=function(){return Rye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Rye.apply(this,arguments)};function Oye(e){var t=function(e){return Bve(Yve(e))}(e.activeStartDate),n=t+9;return T.createElement(mye,Rye({},e,{className:"react-calendar__decade-view__years",dateTransform:function(e){var t=new Date;return t.setFullYear(e,0,1),t.setHours(0,0,0,0),t},dateType:"year",end:n,start:t,tile:Nye}))}Oye.propTypes=Rye({},tye);var Dye=function(){return Dye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Dye.apply(this,arguments)};function Lye(e){return T.createElement("div",{className:"react-calendar__decade-view"},T.createElement(Oye,Dye({},e)))}var Pye=function(){return Pye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Pye.apply(this,arguments)},Fye=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},jye=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},zye="react-calendar__year-view__months__month";function Bye(e){var t=e.classes,n=void 0===t?[]:t,r=e.formatMonth,a=void 0===r?_ge:r,i=e.formatMonthYear,o=void 0===i?Mge:i,s=Fye(e,["classes","formatMonth","formatMonthYear"]),l=s.date,u=s.locale;return T.createElement(gye,Pye({},s,{classes:jye(jye([],n,!0),[zye],!1),formatAbbr:o,maxDateTransform:dge,minDateTransform:lge,view:"year"}),a(u,l))}Bye.propTypes=Pye(Pye({},nye),{formatMonth:Ai().func,formatMonthYear:Ai().func});var Uye=function(){return Uye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Uye.apply(this,arguments)};function Wye(e){var t=Bve(e.activeStartDate);return T.createElement(mye,Uye({},e,{className:"react-calendar__year-view__months",dateTransform:function(e){var n=new Date;return n.setFullYear(t,e,1),n.setHours(0,0,0,0),n},dateType:"month",end:11,start:0,tile:Bye}))}Wye.propTypes=Uye(Uye({},tye),{locale:Ai().string});var Vye=function(){return Vye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Vye.apply(this,arguments)};function Zye(e){return T.createElement("div",{className:"react-calendar__year-view"},T.createElement(Wye,Vye({},e)))}var Hye=function(){return Hye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Hye.apply(this,arguments)},Gye=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},qye="react-calendar__month-view__days__day";function Xye(e){var t=e.calendarType,n=e.classes,r=void 0===n?[]:n,a=e.currentMonthIndex,i=e.formatDay,o=void 0===i?Ege:i,s=e.formatLongDate,l=void 0===s?Cge:s,u=Gye(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),c=u.date,d=u.locale,h=[];return r&&h.push.apply(h,r),qye&&h.push(qye),Zge(c,t)&&h.push("".concat(qye,"--weekend")),c.getMonth()!==a&&h.push("".concat(qye,"--neighboringMonth")),T.createElement(gye,Hye({},u,{classes:h,formatAbbr:l,maxDateTransform:gge,minDateTransform:mge,view:"month"}),o(d,c))}Xye.propTypes=Hye(Hye({},nye),{currentMonthIndex:Ai().number.isRequired,formatDay:Ai().func,formatLongDate:Ai().func});var Yye=function(){return Yye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Yye.apply(this,arguments)},Kye=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function $ye(e){var t=e.activeStartDate,n=e.calendarType,r=e.showFixedNumberOfWeeks,a=e.showNeighboringMonth,i=Kye(e,["showFixedNumberOfWeeks","showNeighboringMonth"]),o=Bve(t),s=Uve(t),l=r||a,u=Lge(t,n),c=l?0:u,d=1+(l?-u:0),h=function(){if(r)return d+42-1;var e=bge(t);if(a){var i=new Date;return i.setFullYear(o,s,e),i.setHours(0,0,0,0),e+(7-Lge(i,n)-1)}return e}();return T.createElement(mye,Yye({},i,{className:"react-calendar__month-view__days",count:7,currentMonthIndex:s,dateTransform:function(e){var t=new Date;return t.setFullYear(o,s,e),t.setHours(0,0,0,0),t},dateType:"day",end:h,offset:c,start:d,tile:Xye}))}$ye.propTypes=Yye({calendarType:qge,showFixedNumberOfWeeks:Ai().bool,showNeighboringMonth:Ai().bool},tye);var Jye="react-calendar__month-view__weekdays",Qye="".concat(Jye,"__weekday");function ebe(e){for(var t=e.calendarType,n=e.formatShortWeekday,r=void 0===n?Age:n,a=e.formatWeekday,i=void 0===a?Ige:a,o=e.locale,s=e.onMouseLeave,l=lge(new Date),u=Bve(l),c=Uve(l),d=[],h=1;h<=7;h+=1){var f=new Date(u,c,h-Lge(l,t)),p=i(o,f);d.push(T.createElement("div",{key:h,className:(0,fo.Z)(Qye,Vge(f)&&"".concat(Qye,"--current"),Zge(f,t)&&"".concat(Qye,"--weekend"))},T.createElement("abbr",{"aria-label":p,title:p},r(o,f).replace(".",""))))}return T.createElement(lye,{className:Jye,count:7,onFocus:s,onMouseOver:s},d)}ebe.propTypes={calendarType:qge,formatShortWeekday:Ai().func,formatWeekday:Ai().func,locale:Ai().string,onMouseLeave:Ai().func};var tbe=function(){return tbe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},tbe.apply(this,arguments)},nbe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},rbe="react-calendar__tile";function abe(e){var t=e.onClickWeekNumber,n=e.weekNumber,r=T.createElement("span",null,n);if(t){var a=e.date,i=e.onClickWeekNumber,o=e.weekNumber,s=nbe(e,["date","onClickWeekNumber","weekNumber"]);return T.createElement("button",tbe({},s,{className:rbe,onClick:function(e){return i(o,a,e)},type:"button"}),r)}e.date,e.onClickWeekNumber,e.weekNumber,s=nbe(e,["date","onClickWeekNumber","weekNumber"]);return T.createElement("div",tbe({},s,{className:rbe}),r)}function ibe(e){var t=e.activeStartDate,n=e.calendarType,r=e.onClickWeekNumber,a=e.onMouseLeave,i=e.showFixedNumberOfWeeks,o=function(){if(i)return 6;var e=bge(t)-(7-Lge(t,n));return 1+Math.ceil(e/7)}(),s=function(){for(var e=Bve(t),r=Uve(t),a=Wve(t),i=[],s=0;s<o;s+=1)i.push(Pge(new Date(e,r,a+7*s),n));return i}(),l=s.map((function(e){return function(e,t){void 0===t&&(t=xge.ISO_8601);var n,r=t===xge.US?xge.US:xge.ISO_8601,a=Pge(e,t),i=Bve(e)+1;do{n=Pge(new Date(i,0,r===xge.ISO_8601?4:1),t),i-=1}while(e<n);return Math.round((a.getTime()-n.getTime())/6048e5)+1}(e,n)}));return T.createElement(lye,{className:"react-calendar__month-view__weekNumbers",count:o,direction:"column",onFocus:a,onMouseOver:a,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0}},l.map((function(e,t){var n=s[t];if(!n)throw new Error("date is not defined");return T.createElement(abe,{key:e,date:n,onClickWeekNumber:r,weekNumber:e})})))}abe.propTypes={date:Ai().instanceOf(Date).isRequired,onClickWeekNumber:Ai().func,weekNumber:Ai().node.isRequired},ibe.propTypes={activeStartDate:Ai().instanceOf(Date).isRequired,calendarType:qge,onClickWeekNumber:Ai().func,onMouseLeave:Ai().func,showFixedNumberOfWeeks:Ai().bool};var obe=function(){return obe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},obe.apply(this,arguments)},sbe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function lbe(e){var t=e.activeStartDate,n=e.locale,r=e.onMouseLeave,a=e.showFixedNumberOfWeeks,i=e.calendarType,o=void 0===i?function(e){for(var t=0,n=Object.entries(wge);t<n.length;t++){var r=n[t],a=r[0];if(r[1].includes(e))return a}return xge.ISO_8601}(n):i,s=e.formatShortWeekday,l=e.formatWeekday,u=e.onClickWeekNumber,c=e.showWeekNumbers,d=sbe(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);var h="react-calendar__month-view";return T.createElement("div",{className:(0,fo.Z)(h,c?"".concat(h,"--weekNumbers"):"")},T.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},c?T.createElement(ibe,{activeStartDate:t,calendarType:o,onClickWeekNumber:u,onMouseLeave:r,showFixedNumberOfWeeks:a}):null,T.createElement("div",{style:{flexGrow:1,width:"100%"}},T.createElement(ebe,{calendarType:o,formatShortWeekday:s,formatWeekday:l,locale:n,onMouseLeave:r}),T.createElement($ye,obe({calendarType:o},d)))))}lbe.propTypes=obe(obe({},tye),{calendarType:qge,formatDay:Ai().func,formatLongDate:Ai().func,formatShortWeekday:Ai().func,formatWeekday:Ai().func,onClickWeekNumber:Ai().func,onMouseLeave:Ai().func,showFixedNumberOfWeeks:Ai().bool,showNeighboringMonth:Ai().bool,showWeekNumbers:Ai().bool});var ube=function(){return ube=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ube.apply(this,arguments)},cbe="react-calendar",dbe=["century","decade","year","month"],hbe=["decade","year","month","day"],fbe=new Date;fbe.setFullYear(1,0,1),fbe.setHours(0,0,0,0);var pbe=new Date(864e13);function mbe(e){return e instanceof Date?e:new Date(e)}function vbe(e,t){return dbe.slice(dbe.indexOf(e),dbe.indexOf(t)+1)}function gbe(e,t,n){return e&&function(e,t,n){return-1!==vbe(t,n).indexOf(e)}(e,t,n)?e:n}function ybe(e){var t=dbe.indexOf(e);return hbe[t]}function bbe(e,t){var n=e.value,r=e.minDate,a=e.maxDate,i=e.maxDetail,o=function(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var r=mbe(n);if(isNaN(r.getTime()))throw new Error("Invalid date: ".concat(e));return r}(n,t);if(!o)return null;var s=ybe(i);return function(e,t,n){return t&&t>e?t:n&&n<e?n:e}(function(){switch(t){case 0:return Fge(s,o);case 1:return zge(s,o);default:throw new Error("Invalid index value: ".concat(t))}}(),r,a)}var xbe=function(e){return bbe(e,0)},wbe=function(e){return bbe(e,1)},kbe=function(e){return[xbe,wbe].map((function(t){return t(e)}))};function Sbe(e){var t=e.maxDate,n=e.maxDetail,r=e.minDate,a=e.minDetail,i=e.value;return Fge(gbe(e.view,a,n),xbe({value:i,minDate:r,maxDate:t,maxDetail:n})||new Date)}function Tbe(e){return e&&(!Array.isArray(e)||1===e.length)}function Ebe(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var Cbe,_be=(0,T.forwardRef)((function(e,t){var n=e.activeStartDate,r=e.allowPartialRange,a=e.calendarType,i=e.className,o=e.defaultActiveStartDate,s=e.defaultValue,l=e.defaultView,u=e.formatDay,c=e.formatLongDate,d=e.formatMonth,h=e.formatMonthYear,f=e.formatShortWeekday,p=e.formatWeekday,m=e.formatYear,v=e.goToRangeStartOnSelect,g=void 0===v||v,y=e.inputRef,b=e.locale,x=e.maxDate,w=void 0===x?pbe:x,k=e.maxDetail,S=void 0===k?"month":k,E=e.minDate,C=void 0===E?fbe:E,_=e.minDetail,M=void 0===_?"century":_,A=e.navigationAriaLabel,I=e.navigationAriaLive,N=e.navigationLabel,R=e.next2AriaLabel,O=e.next2Label,D=e.nextAriaLabel,L=e.nextLabel,P=e.onActiveStartDateChange,F=e.onChange,j=e.onClickDay,z=e.onClickDecade,B=e.onClickMonth,U=e.onClickWeekNumber,W=e.onClickYear,V=e.onDrillDown,Z=e.onDrillUp,H=e.onViewChange,G=e.prev2AriaLabel,q=e.prev2Label,X=e.prevAriaLabel,Y=e.prevLabel,K=e.returnValue,$=void 0===K?"start":K,J=e.selectRange,Q=e.showDoubleView,ee=e.showFixedNumberOfWeeks,te=e.showNavigation,ne=void 0===te||te,re=e.showNeighboringMonth,ae=void 0===re||re,ie=e.showWeekNumbers,oe=e.tileClassName,se=e.tileContent,le=e.tileDisabled,ue=e.value,ce=e.view,de=(0,T.useState)(o),he=de[0],fe=de[1],pe=(0,T.useState)(null),me=pe[0],ve=pe[1],ge=(0,T.useState)(Array.isArray(s)?s.map((function(e){return null!==e?mbe(e):e})):null!==s&&void 0!==s?mbe(s):s),ye=ge[0],be=ge[1],xe=(0,T.useState)(l),we=xe[0],ke=xe[1],Se=n||he||function(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,r=e.defaultValue,a=e.defaultView,i=e.maxDate,o=e.maxDetail,s=e.minDate,l=e.minDetail,u=e.value,c=e.view,d=gbe(c,l,o),h=t||n;return h?Fge(d,h):Sbe({maxDate:i,maxDetail:o,minDate:s,minDetail:l,value:u||r,view:c||a})}({activeStartDate:n,defaultActiveStartDate:o,defaultValue:s,defaultView:l,maxDate:w,maxDetail:S,minDate:C,minDetail:M,value:ue,view:ce}),Te=function(){var e=J&&Tbe(ye)?ye:void 0!==ue?ue:ye;return e?Array.isArray(e)?e.map((function(e){return null!==e?mbe(e):e})):null!==e?mbe(e):e:null}(),Ee=ybe(S),Ce=gbe(ce||we,M,S),_e=vbe(M,S),Me=J?me:null,Ae=_e.indexOf(Ce)<_e.length-1,Ie=_e.indexOf(Ce)>0,Ne=(0,T.useCallback)((function(e){return function(){switch($){case"start":return xbe;case"end":return wbe;case"range":return kbe;default:throw new Error("Invalid returnValue.")}}()({maxDate:w,maxDetail:S,minDate:C,value:e})}),[w,S,C,$]),Re=(0,T.useCallback)((function(e,t){fe(e);var n={action:t,activeStartDate:e,value:Te,view:Ce};P&&!Ebe(Se,e)&&P(n)}),[Se,P,Te,Ce]),Oe=(0,T.useCallback)((function(e,t){var n=function(){switch(Ce){case"century":return z;case"decade":return W;case"year":return B;case"month":return j;default:throw new Error("Invalid view: ".concat(Ce,"."))}}();n&&n(e,t)}),[j,z,B,W,Ce]),De=(0,T.useCallback)((function(e,t){if(Ae){Oe(e,t);var n=_e[_e.indexOf(Ce)+1];if(!n)throw new Error("Attempted to drill down from the lowest view.");fe(e),ke(n);var r={action:"drillDown",activeStartDate:e,value:Te,view:n};P&&!Ebe(Se,e)&&P(r),H&&Ce!==n&&H(r),V&&V(r)}}),[Se,Ae,P,Oe,V,H,Te,Ce,_e]),Le=(0,T.useCallback)((function(){if(Ie){var e=_e[_e.indexOf(Ce)-1];if(!e)throw new Error("Attempted to drill up from the highest view.");var t=Fge(e,Se);fe(t),ke(e);var n={action:"drillUp",activeStartDate:t,value:Te,view:e};P&&!Ebe(Se,t)&&P(n),H&&Ce!==e&&H(n),Z&&Z(n)}}),[Se,Ie,P,Z,H,Te,Ce,_e]),Pe=(0,T.useCallback)((function(e,t){var n=Te;Oe(e,t);var a,i=J&&!Tbe(n);if(J)if(i)a=Fge(Ee,e);else{if(!n)throw new Error("previousValue is required");if(Array.isArray(n))throw new Error("previousValue must not be an array");a=function(e,t,n){var r=[t,n].sort((function(e,t){return e.getTime()-t.getTime()}));return[Fge(e,r[0]),zge(e,r[1])]}(Ee,n,e)}else a=Ne(e);var o=!J||i||g?Sbe({maxDate:w,maxDetail:S,minDate:C,minDetail:M,value:a,view:Ce}):null;t.persist(),fe(o),be(a);var s={action:"onChange",activeStartDate:o,value:a,view:Ce};if(P&&!Ebe(Se,o)&&P(s),F)if(J)if(Tbe(a)){if(r){if(Array.isArray(a))throw new Error("value must not be an array");F([a||null,null],t)}}else F(a||null,t);else F(a||null,t)}),[Se,r,Ne,g,w,S,C,M,P,F,Oe,J,Te,Ee,Ce]);function Fe(e){ve(e)}function je(){ve(null)}function ze(e){var t={activeStartDate:e?jge(Ce,Se):Fge(Ce,Se),hover:Me,locale:b,maxDate:w,minDate:C,onClick:Ae?De:Pe,onMouseOver:J?Fe:null,tileClassName:oe,tileContent:se,tileDisabled:le,value:Te,valueType:Ee};switch(Ce){case"century":return T.createElement(Cye,ube({formatYear:m},t));case"decade":return T.createElement(Lye,ube({formatYear:m},t));case"year":return T.createElement(Zye,ube({formatMonth:d,formatMonthYear:h},t));case"month":return T.createElement(lbe,ube({calendarType:a,formatDay:u,formatLongDate:c,formatShortWeekday:f,formatWeekday:p,onClickWeekNumber:U,onMouseLeave:J?je:null,showFixedNumberOfWeeks:"undefined"!==typeof ee?ee:Q,showNeighboringMonth:ae,showWeekNumbers:ie},t));default:throw new Error("Invalid view: ".concat(Ce,"."))}}(0,T.useImperativeHandle)(t,(function(){return{activeStartDate:Se,drillDown:De,drillUp:Le,onChange:Pe,setActiveStartDate:Re,value:Te,view:Ce}}),[Se,De,Le,Pe,Re,Te,Ce]);var Be=Array.isArray(Te)?Te:[Te];return T.createElement("div",{className:(0,fo.Z)(cbe,J&&1===Be.length&&"".concat(cbe,"--selectRange"),Q&&"".concat(cbe,"--doubleView"),i),ref:y},ne?T.createElement(aye,{activeStartDate:Se,drillUp:Le,formatMonthYear:h,formatYear:m,locale:b,maxDate:w,minDate:C,navigationAriaLabel:A,navigationAriaLive:I,navigationLabel:N,next2AriaLabel:R,next2Label:O,nextAriaLabel:D,nextLabel:L,prev2AriaLabel:G,prev2Label:q,prevAriaLabel:X,prevLabel:Y,setActiveStartDate:Re,showDoubleView:Q,view:Ce,views:_e}):null,T.createElement("div",{className:"".concat(cbe,"__viewContainer"),onBlur:J?je:void 0,onMouseLeave:J?je:void 0},ze(),Q?ze(!0):null))})),Mbe=Ai().instanceOf(Date),Abe=Ai().oneOfType([Ai().string,Ai().instanceOf(Date)]),Ibe=Ai().oneOfType([Abe,(Cbe=Abe,Ai().arrayOf(Cbe))]);_be.propTypes={activeStartDate:Mbe,allowPartialRange:Ai().bool,calendarType:qge,className:Xge,defaultActiveStartDate:Mbe,defaultValue:Ibe,defaultView:eye,formatDay:Ai().func,formatLongDate:Ai().func,formatMonth:Ai().func,formatMonthYear:Ai().func,formatShortWeekday:Ai().func,formatWeekday:Ai().func,formatYear:Ai().func,goToRangeStartOnSelect:Ai().bool,inputRef:$ge,locale:Ai().string,maxDate:Kge,maxDetail:Ai().oneOf(dbe),minDate:Yge,minDetail:Ai().oneOf(dbe),navigationAriaLabel:Ai().string,navigationAriaLive:Ai().oneOf(["off","polite","assertive"]),navigationLabel:Ai().func,next2AriaLabel:Ai().string,next2Label:Ai().node,nextAriaLabel:Ai().string,nextLabel:Ai().node,onActiveStartDateChange:Ai().func,onChange:Ai().func,onClickDay:Ai().func,onClickDecade:Ai().func,onClickMonth:Ai().func,onClickWeekNumber:Ai().func,onClickYear:Ai().func,onDrillDown:Ai().func,onDrillUp:Ai().func,onViewChange:Ai().func,prev2AriaLabel:Ai().string,prev2Label:Ai().node,prevAriaLabel:Ai().string,prevLabel:Ai().node,returnValue:Ai().oneOf(["start","end","range"]),selectRange:Ai().bool,showDoubleView:Ai().bool,showFixedNumberOfWeeks:Ai().bool,showNavigation:Ai().bool,showNeighboringMonth:Ai().bool,showWeekNumbers:Ai().bool,tileClassName:Ai().oneOfType([Ai().func,Xge]),tileContent:Ai().oneOfType([Ai().func,Ai().node]),tileDisabled:Ai().func,value:Ibe,view:eye};var Nbe=_be,Rbe=function(){var e=rke().reports,t=Dt(),n=(0,T.useState)([]),r=(0,U.Z)(n,2),a=r[0],i=r[1],o=(0,T.useState)([]),s=(0,U.Z)(o,2),l=s[0],u=s[1],c=(0,T.useState)([]),d=(0,U.Z)(c,2),h=d[0],f=d[1],p=(0,T.useState)(new Date),m=(0,U.Z)(p,2),v=m[0],g=m[1],y=(0,T.useState)([]),b=(0,U.Z)(y,2),x=b[0],w=b[1],k=(0,T.useState)(!1),S=(0,U.Z)(k,2),E=S[0],C=S[1],M=(0,T.useState)(""),A=(0,U.Z)(M,2),I=A[0],N=A[1],R=(0,T.useState)(null),O=(0,U.Z)(R,2),D=O[0],L=O[1],P=(0,T.useState)(!1),F=(0,U.Z)(P,2),j=F[0],z=F[1],B=Ue();(0,T.useEffect)((function(){if(e.length>0){var t=[],n=[];e.forEach((function(e){e.dateInit?t.push(e):n.push(e)})),i(t),u(n)}}),[e]),(0,T.useEffect)((function(){var e=[];a.forEach((function(t,n){e.push(t.dateInit.split("T")[0])})),l.forEach((function(t,n){e.push(t.datePrev.split("T")[0])}));var t=e.sort((function(e,t){return e>t?-1:e<t?1:0})),n=W(t);console.log(n),w(n)}),[a,l]);var W=function(e){return e.filter((function(t,n){return e.indexOf(t)===n}))};(0,T.useEffect)((function(){var e;N(" ".concat((e=v.getDay(),0===e?"Dom":1===e?"Lun":2===e?"Mar":3===e?"Mie":4===e?"Jue":5===e?"Vie":6===e?"Sab":void 0)," ").concat(v.toLocaleDateString("es-CL"))),C(!0),console.log(v);var t=new Date(v).toISOString().split("T")[0];V(t)}),[v]);var V=function(t){var n=e.filter((function(e){if(e.isActive=!1,e.dateInit){if(e.dateInit.split("T")[0]===t)return e}else if(e.datePrev.split("T")[0]===t)return e}));f(n),C(!1)},Z=function(e){L(e),z(!0)};return(0,dr.jsxs)(qc,{height:"100%",children:[D&&(0,dr.jsx)(Pwe,{open:j,report:D,onlyClose:function(){L(null)}}),(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{className:t.pageContainer,item:!0,xs:12,children:(0,dr.jsxs)(qoe,{elevation:0,className:"pageCard",children:[(0,dr.jsx)(Es,{style:{flexShrink:0},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){B(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)("p",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Calendario"})]})})})}),(0,dr.jsxs)(Es,{container:!0,spacing:1,style:{padding:"5px 10px 0px 10px"},children:[(0,dr.jsx)(Es,{item:!0,sm:10,children:(0,dr.jsx)(Nbe,{style:{width:"100%"},onChange:g,value:v,tileClassName:function(e){var t=e.date,n=new Date(t);if(x.find((function(e){return n.toISOString().split("T")[0]===e})))return"highlight"}})}),(0,dr.jsx)(Es,{item:!0,sm:2,children:(0,dr.jsxs)("div",{className:"text-container",children:[(0,dr.jsx)("p",{className:"text-container-date",children:I}),E?(0,dr.jsx)("div",{children:(0,dr.jsx)("p",{children:"Buscando reportes..."})}):h.length>0?h.sort((function(e,t){return e.idIndex>t.idIndex?1:e.idIndex<t.idIndex?-1:0})).map((function(e,t){return(0,dr.jsx)("div",{children:(0,dr.jsxs)("p",{className:e.isActive?"otLinkActive":"otLink",onClick:function(){!function(e){var t=(0,_.Z)(h);t.forEach((function(e){e.isActive=!1})),t[e].isActive=!0,f(t),Z(t[e])}(t)},children:["OT N\xb0 ",e.idIndex," ",4===e.level?"terminado":e.dateInit?"iniciado":"programado"]})})})):(0,dr.jsx)("div",{children:(0,dr.jsx)("p",{children:"Fecha no tiene reportes"})})]})})]})]})})})]})};function Obe(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function Dbe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(n){"undefined"===typeof e[n]?e[n]=t[n]:Obe(t[n])&&Obe(e[n])&&Object.keys(t[n]).length>0&&Dbe(e[n],t[n])}))}var Lbe={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Pbe(){var e="undefined"!==typeof document?document:{};return Dbe(e,Lbe),e}var Fbe={document:Lbe,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function jbe(){var e="undefined"!==typeof window?window:{};return Dbe(e,Fbe),e}var zbe=function(e){N(n,e);var t=F(n);function n(e){var r;return M(this,n),"number"===typeof e?r=t.call(this,e):(r=t.call.apply(t,[this].concat((0,_.Z)(e||[]))),function(e){var t=e.__proto__;Object.defineProperty(e,"__proto__",{get:function(){return t},set:function(e){t.__proto__=e}})}((0,L.Z)(r))),P(r)}return(0,A.Z)(n)}(z(Array));function Bbe(){var e=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){Array.isArray(t)?e.push.apply(e,(0,_.Z)(Bbe(t))):e.push(t)})),e}function Ube(e,t){return Array.prototype.filter.call(e,t)}function Wbe(e,t){var n=jbe(),r=Pbe(),a=[];if(!t&&e instanceof zbe)return e;if(!e)return new zbe(a);if("string"===typeof e){var i=e.trim();if(i.indexOf("<")>=0&&i.indexOf(">")>=0){var o="div";0===i.indexOf("<li")&&(o="ul"),0===i.indexOf("<tr")&&(o="tbody"),0!==i.indexOf("<td")&&0!==i.indexOf("<th")||(o="tr"),0===i.indexOf("<tbody")&&(o="table"),0===i.indexOf("<option")&&(o="select");var s=r.createElement(o);s.innerHTML=i;for(var l=0;l<s.childNodes.length;l+=1)a.push(s.childNodes[l])}else a=function(e,t){if("string"!==typeof e)return[e];for(var n=[],r=t.querySelectorAll(e),a=0;a<r.length;a+=1)n.push(r[a]);return n}(e.trim(),t||r)}else if(e.nodeType||e===n||e===r)a.push(e);else if(Array.isArray(e)){if(e instanceof zbe)return e;a=e}return new zbe(function(e){for(var t=[],n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(a))}Wbe.fn=zbe.prototype;var Vbe="resize scroll".split(" ");function Zbe(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if("undefined"===typeof n[0]){for(var a=0;a<this.length;a+=1)Vbe.indexOf(e)<0&&(e in this[a]?this[a][e]():Wbe(this[a]).trigger(e));return this}return this.on.apply(this,[e].concat(n))}}Zbe("click"),Zbe("blur"),Zbe("focus"),Zbe("focusin"),Zbe("focusout"),Zbe("keyup"),Zbe("keydown"),Zbe("keypress"),Zbe("submit"),Zbe("change"),Zbe("mousedown"),Zbe("mousemove"),Zbe("mouseup"),Zbe("mouseenter"),Zbe("mouseleave"),Zbe("mouseout"),Zbe("mouseover"),Zbe("touchstart"),Zbe("touchend"),Zbe("touchmove"),Zbe("resize"),Zbe("scroll");var Hbe={addClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Bbe(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).add.apply(t,(0,_.Z)(r))})),this},removeClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Bbe(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).remove.apply(t,(0,_.Z)(r))})),this},hasClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Bbe(t.map((function(e){return e.split(" ")})));return Ube(this,(function(e){return r.filter((function(t){return e.classList.contains(t)})).length>0})).length>0},toggleClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Bbe(t.map((function(e){return e.split(" ")})));this.forEach((function(e){r.forEach((function(t){e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"===typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(var r in e)this[n][r]=e[r],this[n].setAttribute(r,e[r]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!==typeof e?"".concat(e,"ms"):e;return this},on:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2],o=t[3];function s(e){var t=e.target;if(t){var n=e.target.dom7EventData||[];if(n.indexOf(e)<0&&n.unshift(e),Wbe(t).is(a))i.apply(t,n);else for(var r=Wbe(t).parents(),o=0;o<r.length;o+=1)Wbe(r[o]).is(a)&&i.apply(r[o],n)}}function l(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),i.apply(this,t)}"function"===typeof t[1]&&(r=t[0],i=t[1],o=t[2],a=void 0),o||(o=!1);for(var u,c=r.split(" "),d=0;d<this.length;d+=1){var h=this[d];if(a)for(u=0;u<c.length;u+=1){var f=c[u];h.dom7LiveListeners||(h.dom7LiveListeners={}),h.dom7LiveListeners[f]||(h.dom7LiveListeners[f]=[]),h.dom7LiveListeners[f].push({listener:i,proxyListener:s}),h.addEventListener(f,s,o)}else for(u=0;u<c.length;u+=1){var p=c[u];h.dom7Listeners||(h.dom7Listeners={}),h.dom7Listeners[p]||(h.dom7Listeners[p]=[]),h.dom7Listeners[p].push({listener:i,proxyListener:l}),h.addEventListener(p,l,o)}}return this},off:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2],o=t[3];"function"===typeof t[1]&&(r=t[0],i=t[1],o=t[2],a=void 0),o||(o=!1);for(var s=r.split(" "),l=0;l<s.length;l+=1)for(var u=s[l],c=0;c<this.length;c+=1){var d=this[c],h=void 0;if(!a&&d.dom7Listeners?h=d.dom7Listeners[u]:a&&d.dom7LiveListeners&&(h=d.dom7LiveListeners[u]),h&&h.length)for(var f=h.length-1;f>=0;f-=1){var p=h[f];i&&p.listener===i||i&&p.listener&&p.listener.dom7proxy&&p.listener.dom7proxy===i?(d.removeEventListener(u,p.proxyListener,o),h.splice(f,1)):i||(d.removeEventListener(u,p.proxyListener,o),h.splice(f,1))}}return this},trigger:function(){for(var e=jbe(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=n[0].split(" "),i=n[1],o=0;o<a.length;o+=1)for(var s=a[o],l=0;l<this.length;l+=1){var u=this[l];if(e.CustomEvent){var c=new e.CustomEvent(s,{detail:i,bubbles:!0,cancelable:!0});u.dom7EventData=n.filter((function(e,t){return t>0})),u.dispatchEvent(c),u.dom7EventData=[],delete u.dom7EventData}}return this},transitionEnd:function(e){var t=this;return e&&t.on("transitionend",(function n(r){r.target===this&&(e.call(this,r),t.off("transitionend",n))})),this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var e=jbe();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var e=jbe(),t=Pbe(),n=this[0],r=n.getBoundingClientRect(),a=t.body,i=n.clientTop||a.clientTop||0,o=n.clientLeft||a.clientLeft||0,s=n===e?e.scrollY:n.scrollTop,l=n===e?e.scrollX:n.scrollLeft;return{top:r.top+s-i,left:r.left+l-o}}return null},css:function(e,t){var n,r=jbe();if(1===arguments.length){if("string"!==typeof e){for(n=0;n<this.length;n+=1)for(var a in e)this[n].style[a]=e[a];return this}if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"===typeof e){for(n=0;n<this.length;n+=1)this[n].style[e]=t;return this}return this},each:function(e){return e?(this.forEach((function(t,n){e.apply(t,[t,n])})),this):this},html:function(e){if("undefined"===typeof e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if("undefined"===typeof e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,n,r=jbe(),a=Pbe(),i=this[0];if(!i||"undefined"===typeof e)return!1;if("string"===typeof e){if(i.matches)return i.matches(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);for(t=Wbe(e),n=0;n<t.length;n+=1)if(t[n]===i)return!0;return!1}if(e===a)return i===a;if(e===r)return i===r;if(e.nodeType||e instanceof zbe){for(t=e.nodeType?[e]:e,n=0;n<t.length;n+=1)if(t[n]===i)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if("undefined"===typeof e)return this;var t=this.length;if(e>t-1)return Wbe([]);if(e<0){var n=t+e;return Wbe(n<0?[]:[this[n]])}return Wbe([this[e]])},append:function(){for(var e,t=Pbe(),n=0;n<arguments.length;n+=1){e=n<0||arguments.length<=n?void 0:arguments[n];for(var r=0;r<this.length;r+=1)if("string"===typeof e){var a=t.createElement("div");for(a.innerHTML=e;a.firstChild;)this[r].appendChild(a.firstChild)}else if(e instanceof zbe)for(var i=0;i<e.length;i+=1)this[r].appendChild(e[i]);else this[r].appendChild(e)}return this},prepend:function(e){var t,n,r=Pbe();for(t=0;t<this.length;t+=1)if("string"===typeof e){var a=r.createElement("div");for(a.innerHTML=e,n=a.childNodes.length-1;n>=0;n-=1)this[t].insertBefore(a.childNodes[n],this[t].childNodes[0])}else if(e instanceof zbe)for(n=0;n<e.length;n+=1)this[t].insertBefore(e[n],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&Wbe(this[0].nextElementSibling).is(e)?Wbe([this[0].nextElementSibling]):Wbe([]):this[0].nextElementSibling?Wbe([this[0].nextElementSibling]):Wbe([]):Wbe([])},nextAll:function(e){var t=[],n=this[0];if(!n)return Wbe([]);for(;n.nextElementSibling;){var r=n.nextElementSibling;e?Wbe(r).is(e)&&t.push(r):t.push(r),n=r}return Wbe(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&Wbe(t.previousElementSibling).is(e)?Wbe([t.previousElementSibling]):Wbe([]):t.previousElementSibling?Wbe([t.previousElementSibling]):Wbe([])}return Wbe([])},prevAll:function(e){var t=[],n=this[0];if(!n)return Wbe([]);for(;n.previousElementSibling;){var r=n.previousElementSibling;e?Wbe(r).is(e)&&t.push(r):t.push(r),n=r}return Wbe(t)},parent:function(e){for(var t=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?Wbe(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return Wbe(t)},parents:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].parentNode;r;)e?Wbe(r).is(e)&&t.push(r):t.push(r),r=r.parentNode;return Wbe(t)},closest:function(e){var t=this;return"undefined"===typeof e?Wbe([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].querySelectorAll(e),a=0;a<r.length;a+=1)t.push(r[a]);return Wbe(t)},children:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].children,a=0;a<r.length;a+=1)e&&!Wbe(r[a]).is(e)||t.push(r[a]);return Wbe(t)},filter:function(e){return Wbe(Ube(this,e))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};Object.keys(Hbe).forEach((function(e){Object.defineProperty(Wbe.fn,e,{value:Hbe[e],writable:!0})}));var Gbe,qbe,Xbe,Ybe=Wbe;function Kbe(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function $be(){return Date.now()}function Jbe(e,t){void 0===t&&(t="x");var n,r,a,i=jbe(),o=function(e){var t,n=jbe();return n.getComputedStyle&&(t=n.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}(e);return i.WebKitCSSMatrix?((r=o.transform||o.webkitTransform).split(",").length>6&&(r=r.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),a=new i.WebKitCSSMatrix("none"===r?"":r)):n=(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(r=i.WebKitCSSMatrix?a.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(r=i.WebKitCSSMatrix?a.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),r||0}function Qbe(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function exe(){for(var e,t=Object(arguments.length<=0?void 0:arguments[0]),n=["__proto__","constructor","prototype"],r=1;r<arguments.length;r+=1){var a=r<0||arguments.length<=r?void 0:arguments[r];if(void 0!==a&&null!==a&&(e=a,!("undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType))))for(var i=Object.keys(Object(a)).filter((function(e){return n.indexOf(e)<0})),o=0,s=i.length;o<s;o+=1){var l=i[o],u=Object.getOwnPropertyDescriptor(a,l);void 0!==u&&u.enumerable&&(Qbe(t[l])&&Qbe(a[l])?a[l].__swiper__?t[l]=a[l]:exe(t[l],a[l]):!Qbe(t[l])&&Qbe(a[l])?(t[l]={},a[l].__swiper__?t[l]=a[l]:exe(t[l],a[l])):t[l]=a[l])}}return t}function txe(e,t,n){e.style.setProperty(t,n)}function nxe(e){var t,n=e.swiper,r=e.targetPosition,a=e.side,i=jbe(),o=-n.translate,s=null,l=n.params.speed;n.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(n.cssModeFrameID);var u=r>o?"next":"prev",c=function(e,t){return"next"===u&&e>=t||"prev"===u&&e<=t};!function e(){t=(new Date).getTime(),null===s&&(s=t);var u=Math.max(Math.min((t-s)/l,1),0),d=.5-Math.cos(u*Math.PI)/2,h=o+d*(r-o);if(c(h,r)&&(h=r),n.wrapperEl.scrollTo((0,_t.Z)({},a,h)),c(h,r))return n.wrapperEl.style.overflow="hidden",n.wrapperEl.style.scrollSnapType="",setTimeout((function(){n.wrapperEl.style.overflow="",n.wrapperEl.scrollTo((0,_t.Z)({},a,h))})),void i.cancelAnimationFrame(n.cssModeFrameID);n.cssModeFrameID=i.requestAnimationFrame(e)}()}function rxe(){return Gbe||(Gbe=function(){var e=jbe(),t=Pbe();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(UK){}return t}(),gestures:"ongesturestart"in e}}()),Gbe}function axe(e){return void 0===e&&(e={}),qbe||(qbe=function(e){var t=(void 0===e?{}:e).userAgent,n=rxe(),r=jbe(),a=r.navigator.platform,i=t||r.navigator.userAgent,o={ios:!1,android:!1},s=r.screen.width,l=r.screen.height,u=i.match(/(Android);?[\s\/]+([\d.]+)?/),c=i.match(/(iPad).*OS\s([\d_]+)/),d=i.match(/(iPod)(.*OS\s([\d_]+))?/),h=!c&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="Win32"===a,p="MacIntel"===a;return!c&&p&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf("".concat(s,"x").concat(l))>=0&&((c=i.match(/(Version)\/([\d.]+)/))||(c=[0,1,"13_0_0"]),p=!1),u&&!f&&(o.os="android",o.android=!0),(c||h||d)&&(o.os="ios",o.ios=!0),o}(e)),qbe}function ixe(){return Xbe||(Xbe=function(){var e=jbe();return{isSafari:function(){var t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),Xbe}var oxe={on:function(e,t,n){var r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;var a=n?"unshift":"push";return e.split(" ").forEach((function(e){r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][a](t)})),r},once:function(e,t,n){var r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;function a(){r.off(e,a),a.__emitterProxy&&delete a.__emitterProxy;for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];t.apply(r,i)}return a.__emitterProxy=t,r.on(e,a,n)},onAny:function(e,t){var n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!==typeof e)return n;var r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny:function(e){var t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;var n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off:function(e,t){var n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((function(e){"undefined"===typeof t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(r,a){(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(a,1)}))})),n):n},emit:function(){var e,t,n,r=this;if(!r.eventsListeners||r.destroyed)return r;if(!r.eventsListeners)return r;for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return"string"===typeof i[0]||Array.isArray(i[0])?(e=i[0],t=i.slice(1,i.length),n=r):(e=i[0].events,t=i[0].data,n=i[0].context||r),t.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach((function(e){r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach((function(r){r.apply(n,[e].concat((0,_.Z)(t)))})),r.eventsListeners&&r.eventsListeners[e]&&r.eventsListeners[e].forEach((function(e){e.apply(n,t)}))})),r}};var sxe={updateSize:function(){var e,t,n=this,r=n.$el;e="undefined"!==typeof n.params.width&&null!==n.params.width?n.params.width:r[0].clientWidth,t="undefined"!==typeof n.params.height&&null!==n.params.height?n.params.height:r[0].clientHeight,0===e&&n.isHorizontal()||0===t&&n.isVertical()||(e=e-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),t=t-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}var r=e.params,a=e.$wrapperEl,i=e.size,o=e.rtlTranslate,s=e.wrongRTL,l=e.virtual&&r.virtual.enabled,u=l?e.virtual.slides.length:e.slides.length,c=a.children(".".concat(e.params.slideClass)),d=l?e.virtual.slides.length:c.length,h=[],f=[],p=[],m=r.slidesOffsetBefore;"function"===typeof m&&(m=r.slidesOffsetBefore.call(e));var v=r.slidesOffsetAfter;"function"===typeof v&&(v=r.slidesOffsetAfter.call(e));var g=e.snapGrid.length,y=e.slidesGrid.length,b=r.spaceBetween,x=-m,w=0,k=0;if("undefined"!==typeof i){"string"===typeof b&&b.indexOf("%")>=0&&(b=parseFloat(b.replace("%",""))/100*i),e.virtualSize=-b,o?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""}),r.centeredSlides&&r.cssMode&&(txe(e.wrapperEl,"--swiper-centered-offset-before",""),txe(e.wrapperEl,"--swiper-centered-offset-after",""));var S,T=r.grid&&r.grid.rows>1&&e.grid;T&&e.grid.initSlides(d);for(var E="auto"===r.slidesPerView&&r.breakpoints&&Object.keys(r.breakpoints).filter((function(e){return"undefined"!==typeof r.breakpoints[e].slidesPerView})).length>0,C=0;C<d;C+=1){S=0;var _=c.eq(C);if(T&&e.grid.updateSlide(C,_,d,t),"none"!==_.css("display")){if("auto"===r.slidesPerView){E&&(c[C].style[t("width")]="");var M=getComputedStyle(_[0]),A=_[0].style.transform,I=_[0].style.webkitTransform;if(A&&(_[0].style.transform="none"),I&&(_[0].style.webkitTransform="none"),r.roundLengths)S=e.isHorizontal()?_.outerWidth(!0):_.outerHeight(!0);else{var N=n(M,"width"),R=n(M,"padding-left"),O=n(M,"padding-right"),D=n(M,"margin-left"),L=n(M,"margin-right"),P=M.getPropertyValue("box-sizing");if(P&&"border-box"===P)S=N+D+L;else{var F=_[0],j=F.clientWidth;S=N+R+O+D+L+(F.offsetWidth-j)}}A&&(_[0].style.transform=A),I&&(_[0].style.webkitTransform=I),r.roundLengths&&(S=Math.floor(S))}else S=(i-(r.slidesPerView-1)*b)/r.slidesPerView,r.roundLengths&&(S=Math.floor(S)),c[C]&&(c[C].style[t("width")]="".concat(S,"px"));c[C]&&(c[C].swiperSlideSize=S),p.push(S),r.centeredSlides?(x=x+S/2+w/2+b,0===w&&0!==C&&(x=x-i/2-b),0===C&&(x=x-i/2-b),Math.abs(x)<.001&&(x=0),r.roundLengths&&(x=Math.floor(x)),k%r.slidesPerGroup===0&&h.push(x),f.push(x)):(r.roundLengths&&(x=Math.floor(x)),(k-Math.min(e.params.slidesPerGroupSkip,k))%e.params.slidesPerGroup===0&&h.push(x),f.push(x),x=x+S+b),e.virtualSize+=S+b,w=S,k+=1}}if(e.virtualSize=Math.max(e.virtualSize,i)+v,o&&s&&("slide"===r.effect||"coverflow"===r.effect)&&a.css({width:"".concat(e.virtualSize+r.spaceBetween,"px")}),r.setWrapperSize&&a.css((0,_t.Z)({},t("width"),"".concat(e.virtualSize+r.spaceBetween,"px"))),T&&e.grid.updateWrapperSize(S,h,t),!r.centeredSlides){for(var z=[],B=0;B<h.length;B+=1){var U=h[B];r.roundLengths&&(U=Math.floor(U)),h[B]<=e.virtualSize-i&&z.push(U)}h=z,Math.floor(e.virtualSize-i)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-i)}if(0===h.length&&(h=[0]),0!==r.spaceBetween){var W=e.isHorizontal()&&o?"marginLeft":t("marginRight");c.filter((function(e,t){return!r.cssMode||t!==c.length-1})).css((0,_t.Z)({},W,"".concat(b,"px")))}if(r.centeredSlides&&r.centeredSlidesBounds){var V=0;p.forEach((function(e){V+=e+(r.spaceBetween?r.spaceBetween:0)}));var Z=(V-=r.spaceBetween)-i;h=h.map((function(e){return e<0?-m:e>Z?Z+v:e}))}if(r.centerInsufficientSlides){var H=0;if(p.forEach((function(e){H+=e+(r.spaceBetween?r.spaceBetween:0)})),(H-=r.spaceBetween)<i){var G=(i-H)/2;h.forEach((function(e,t){h[t]=e-G})),f.forEach((function(e,t){f[t]=e+G}))}}if(Object.assign(e,{slides:c,snapGrid:h,slidesGrid:f,slidesSizesGrid:p}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){txe(e.wrapperEl,"--swiper-centered-offset-before","".concat(-h[0],"px")),txe(e.wrapperEl,"--swiper-centered-offset-after","".concat(e.size/2-p[p.length-1]/2,"px"));var q=-e.snapGrid[0],X=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((function(e){return e+q})),e.slidesGrid=e.slidesGrid.map((function(e){return e+X}))}if(d!==u&&e.emit("slidesLengthChange"),h.length!==g&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),f.length!==y&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!l&&!r.cssMode&&("slide"===r.effect||"fade"===r.effect)){var Y="".concat(r.containerModifierClass,"backface-hidden"),K=e.$el.hasClass(Y);d<=r.maxBackfaceHiddenSlides?K||e.$el.addClass(Y):K&&e.$el.removeClass(Y)}}},updateAutoHeight:function(e){var t,n=this,r=[],a=n.virtual&&n.params.virtual.enabled,i=0;"number"===typeof e?n.setTransition(e):!0===e&&n.setTransition(n.params.speed);var o=function(e){return a?n.slides.filter((function(t){return parseInt(t.getAttribute("data-swiper-slide-index"),10)===e}))[0]:n.slides.eq(e)[0]};if("auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)if(n.params.centeredSlides)n.visibleSlides.each((function(e){r.push(e)}));else for(t=0;t<Math.ceil(n.params.slidesPerView);t+=1){var s=n.activeIndex+t;if(s>n.slides.length&&!a)break;r.push(o(s))}else r.push(o(n.activeIndex));for(t=0;t<r.length;t+=1)if("undefined"!==typeof r[t]){var l=r[t].offsetHeight;i=l>i?l:i}(i||0===i)&&n.$wrapperEl.css("height","".concat(i,"px"))},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,n=t.params,r=t.slides,a=t.rtlTranslate,i=t.snapGrid;if(0!==r.length){"undefined"===typeof r[0].swiperSlideOffset&&t.updateSlidesOffset();var o=-e;a&&(o=e),r.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var s=0;s<r.length;s+=1){var l=r[s],u=l.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(u-=r[0].swiperSlideOffset);var c=(o+(n.centeredSlides?t.minTranslate():0)-u)/(l.swiperSlideSize+n.spaceBetween),d=(o-i[0]+(n.centeredSlides?t.minTranslate():0)-u)/(l.swiperSlideSize+n.spaceBetween),h=-(o-u),f=h+t.slidesSizesGrid[s];(h>=0&&h<t.size-1||f>1&&f<=t.size||h<=0&&f>=t.size)&&(t.visibleSlides.push(l),t.visibleSlidesIndexes.push(s),r.eq(s).addClass(n.slideVisibleClass)),l.progress=a?-c:c,l.originalProgress=a?-d:d}t.visibleSlides=Ybe(t.visibleSlides)}},updateProgress:function(e){var t=this;if("undefined"===typeof e){var n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}var r=t.params,a=t.maxTranslate()-t.minTranslate(),i=t.progress,o=t.isBeginning,s=t.isEnd,l=o,u=s;0===a?(i=0,o=!0,s=!0):(o=(i=(e-t.minTranslate())/a)<=0,s=i>=1),Object.assign(t,{progress:i,isBeginning:o,isEnd:s}),(r.watchSlidesProgress||r.centeredSlides&&r.autoHeight)&&t.updateSlidesProgress(e),o&&!l&&t.emit("reachBeginning toEdge"),s&&!u&&t.emit("reachEnd toEdge"),(l&&!o||u&&!s)&&t.emit("fromEdge"),t.emit("progress",i)},updateSlidesClasses:function(){var e,t=this,n=t.slides,r=t.params,a=t.$wrapperEl,i=t.activeIndex,o=t.realIndex,s=t.virtual&&r.virtual.enabled;n.removeClass("".concat(r.slideActiveClass," ").concat(r.slideNextClass," ").concat(r.slidePrevClass," ").concat(r.slideDuplicateActiveClass," ").concat(r.slideDuplicateNextClass," ").concat(r.slideDuplicatePrevClass)),(e=s?t.$wrapperEl.find(".".concat(r.slideClass,'[data-swiper-slide-index="').concat(i,'"]')):n.eq(i)).addClass(r.slideActiveClass),r.loop&&(e.hasClass(r.slideDuplicateClass)?a.children(".".concat(r.slideClass,":not(.").concat(r.slideDuplicateClass,')[data-swiper-slide-index="').concat(o,'"]')).addClass(r.slideDuplicateActiveClass):a.children(".".concat(r.slideClass,".").concat(r.slideDuplicateClass,'[data-swiper-slide-index="').concat(o,'"]')).addClass(r.slideDuplicateActiveClass));var l=e.nextAll(".".concat(r.slideClass)).eq(0).addClass(r.slideNextClass);r.loop&&0===l.length&&(l=n.eq(0)).addClass(r.slideNextClass);var u=e.prevAll(".".concat(r.slideClass)).eq(0).addClass(r.slidePrevClass);r.loop&&0===u.length&&(u=n.eq(-1)).addClass(r.slidePrevClass),r.loop&&(l.hasClass(r.slideDuplicateClass)?a.children(".".concat(r.slideClass,":not(.").concat(r.slideDuplicateClass,')[data-swiper-slide-index="').concat(l.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicateNextClass):a.children(".".concat(r.slideClass,".").concat(r.slideDuplicateClass,'[data-swiper-slide-index="').concat(l.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicateNextClass),u.hasClass(r.slideDuplicateClass)?a.children(".".concat(r.slideClass,":not(.").concat(r.slideDuplicateClass,')[data-swiper-slide-index="').concat(u.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicatePrevClass):a.children(".".concat(r.slideClass,".").concat(r.slideDuplicateClass,'[data-swiper-slide-index="').concat(u.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicatePrevClass)),t.emitSlidesClasses()},updateActiveIndex:function(e){var t,n=this,r=n.rtlTranslate?n.translate:-n.translate,a=n.slidesGrid,i=n.snapGrid,o=n.params,s=n.activeIndex,l=n.realIndex,u=n.snapIndex,c=e;if("undefined"===typeof c){for(var d=0;d<a.length;d+=1)"undefined"!==typeof a[d+1]?r>=a[d]&&r<a[d+1]-(a[d+1]-a[d])/2?c=d:r>=a[d]&&r<a[d+1]&&(c=d+1):r>=a[d]&&(c=d);o.normalizeSlideIndex&&(c<0||"undefined"===typeof c)&&(c=0)}if(i.indexOf(r)>=0)t=i.indexOf(r);else{var h=Math.min(o.slidesPerGroupSkip,c);t=h+Math.floor((c-h)/o.slidesPerGroup)}if(t>=i.length&&(t=i.length-1),c!==s){var f=parseInt(n.slides.eq(c).attr("data-swiper-slide-index")||c,10);Object.assign(n,{snapIndex:t,realIndex:f,previousIndex:s,activeIndex:c}),n.emit("activeIndexChange"),n.emit("snapIndexChange"),l!==f&&n.emit("realIndexChange"),(n.initialized||n.params.runCallbacksOnInit)&&n.emit("slideChange")}else t!==u&&(n.snapIndex=t,n.emit("snapIndexChange"))},updateClickedSlide:function(e){var t,n=this,r=n.params,a=Ybe(e).closest(".".concat(r.slideClass))[0],i=!1;if(a)for(var o=0;o<n.slides.length;o+=1)if(n.slides[o]===a){i=!0,t=o;break}if(!a||!i)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=a,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(Ybe(a).attr("data-swiper-slide-index"),10):n.clickedIndex=t,r.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var lxe={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this,n=t.params,r=t.rtlTranslate,a=t.translate,i=t.$wrapperEl;if(n.virtualTranslate)return r?-a:a;if(n.cssMode)return a;var o=Jbe(i[0],e);return r&&(o=-o),o||0},setTranslate:function(e,t){var n=this,r=n.rtlTranslate,a=n.params,i=n.$wrapperEl,o=n.wrapperEl,s=n.progress,l=0,u=0;n.isHorizontal()?l=r?-e:e:u=e,a.roundLengths&&(l=Math.floor(l),u=Math.floor(u)),a.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-u:a.virtualTranslate||i.transform("translate3d(".concat(l,"px, ").concat(u,"px, ").concat(0,"px)")),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:u;var c=n.maxTranslate()-n.minTranslate();(0===c?0:(e-n.minTranslate())/c)!==s&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,r,a){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===r&&(r=!0);var i=this,o=i.params,s=i.wrapperEl;if(i.animating&&o.preventInteractionOnTransition)return!1;var l,u=i.minTranslate(),c=i.maxTranslate();if(l=r&&e>u?u:r&&e<c?c:e,i.updateProgress(l),o.cssMode){var d=i.isHorizontal();if(0===t)s[d?"scrollLeft":"scrollTop"]=-l;else{var h;if(!i.support.smoothScroll)return nxe({swiper:i,targetPosition:-l,side:d?"left":"top"}),!0;s.scrollTo((h={},(0,_t.Z)(h,d?"left":"top",-l),(0,_t.Z)(h,"behavior","smooth"),h))}return!0}return 0===t?(i.setTransition(0),i.setTranslate(l),n&&(i.emit("beforeTransitionStart",t,a),i.emit("transitionEnd"))):(i.setTransition(t),i.setTranslate(l),n&&(i.emit("beforeTransitionStart",t,a),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(e){i&&!i.destroyed&&e.target===this&&(i.$wrapperEl[0].removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.$wrapperEl[0].removeEventListener("webkitTransitionEnd",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,n&&i.emit("transitionEnd"))}),i.$wrapperEl[0].addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.$wrapperEl[0].addEventListener("webkitTransitionEnd",i.onTranslateToWrapperTransitionEnd))),!0}};function uxe(e){var t=e.swiper,n=e.runCallbacks,r=e.direction,a=e.step,i=t.activeIndex,o=t.previousIndex,s=r;if(s||(s=i>o?"next":i<o?"prev":"reset"),t.emit("transition".concat(a)),n&&i!==o){if("reset"===s)return void t.emit("slideResetTransition".concat(a));t.emit("slideChangeTransition".concat(a)),"next"===s?t.emit("slideNextTransition".concat(a)):t.emit("slidePrevTransition".concat(a))}}var cxe={slideTo:function(e,t,n,r,a){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"number"!==typeof e&&"string"!==typeof e)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. [".concat(typeof e,"] given."));if("string"===typeof e){var i=parseInt(e,10);if(!isFinite(i))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. [".concat(e,"] given."));e=i}var o=this,s=e;s<0&&(s=0);var l=o.params,u=o.snapGrid,c=o.slidesGrid,d=o.previousIndex,h=o.activeIndex,f=o.rtlTranslate,p=o.wrapperEl,m=o.enabled;if(o.animating&&l.preventInteractionOnTransition||!m&&!r&&!a)return!1;var v=Math.min(o.params.slidesPerGroupSkip,s),g=v+Math.floor((s-v)/o.params.slidesPerGroup);g>=u.length&&(g=u.length-1),(h||l.initialSlide||0)===(d||0)&&n&&o.emit("beforeSlideChangeStart");var y,b=-u[g];if(o.updateProgress(b),l.normalizeSlideIndex)for(var x=0;x<c.length;x+=1){var w=-Math.floor(100*b),k=Math.floor(100*c[x]),S=Math.floor(100*c[x+1]);"undefined"!==typeof c[x+1]?w>=k&&w<S-(S-k)/2?s=x:w>=k&&w<S&&(s=x+1):w>=k&&(s=x)}if(o.initialized&&s!==h){if(!o.allowSlideNext&&b<o.translate&&b<o.minTranslate())return!1;if(!o.allowSlidePrev&&b>o.translate&&b>o.maxTranslate()&&(h||0)!==s)return!1}if(y=s>h?"next":s<h?"prev":"reset",f&&-b===o.translate||!f&&b===o.translate)return o.updateActiveIndex(s),l.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),"slide"!==l.effect&&o.setTranslate(b),"reset"!==y&&(o.transitionStart(n,y),o.transitionEnd(n,y)),!1;if(l.cssMode){var T=o.isHorizontal(),E=f?b:-b;if(0===t){var C=o.virtual&&o.params.virtual.enabled;C&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),p[T?"scrollLeft":"scrollTop"]=E,C&&requestAnimationFrame((function(){o.wrapperEl.style.scrollSnapType="",o._swiperImmediateVirtual=!1}))}else{var _;if(!o.support.smoothScroll)return nxe({swiper:o,targetPosition:E,side:T?"left":"top"}),!0;p.scrollTo((_={},(0,_t.Z)(_,T?"left":"top",E),(0,_t.Z)(_,"behavior","smooth"),_))}return!0}return o.setTransition(t),o.setTranslate(b),o.updateActiveIndex(s),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,r),o.transitionStart(n,y),0===t?o.transitionEnd(n,y):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,y))}),o.$wrapperEl[0].addEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0);var a=this,i=e;return a.params.loop&&(i+=a.loopedSlides),a.slideTo(i,t,n,r)},slideNext:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var r=this,a=r.animating,i=r.enabled,o=r.params;if(!i)return r;var s=o.slidesPerGroup;"auto"===o.slidesPerView&&1===o.slidesPerGroup&&o.slidesPerGroupAuto&&(s=Math.max(r.slidesPerViewDynamic("current",!0),1));var l=r.activeIndex<o.slidesPerGroupSkip?1:s;if(o.loop){if(a&&o.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return o.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+l,e,t,n)},slidePrev:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var r=this,a=r.params,i=r.animating,o=r.snapGrid,s=r.slidesGrid,l=r.rtlTranslate;if(!r.enabled)return r;if(a.loop){if(i&&a.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var c,d=u(l?r.translate:-r.translate),h=o.map((function(e){return u(e)})),f=o[h.indexOf(d)-1];"undefined"===typeof f&&a.cssMode&&(o.forEach((function(e,t){d>=e&&(c=t)})),"undefined"!==typeof c&&(f=o[c>0?c-1:c]));var p=0;if("undefined"!==typeof f&&((p=s.indexOf(f))<0&&(p=r.activeIndex-1),"auto"===a.slidesPerView&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(p=p-r.slidesPerViewDynamic("previous",!0)+1,p=Math.max(p,0))),a.rewind&&r.isBeginning){var m=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(m,e,t,n)}return r.slideTo(p,e,t,n)},slideReset:function(e,t,n){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e,t,n,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===r&&(r=.5);var a=this,i=a.activeIndex,o=Math.min(a.params.slidesPerGroupSkip,i),s=o+Math.floor((i-o)/a.params.slidesPerGroup),l=a.rtlTranslate?a.translate:-a.translate;if(l>=a.snapGrid[s]){var u=a.snapGrid[s];l-u>(a.snapGrid[s+1]-u)*r&&(i+=a.params.slidesPerGroup)}else{var c=a.snapGrid[s-1];l-c<=(a.snapGrid[s]-c)*r&&(i-=a.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,a.slidesGrid.length-1),a.slideTo(i,e,t,n)},slideToClickedSlide:function(){var e,t=this,n=t.params,r=t.$wrapperEl,a="auto"===n.slidesPerView?t.slidesPerViewDynamic():n.slidesPerView,i=t.clickedIndex;if(n.loop){if(t.animating)return;e=parseInt(Ybe(t.clickedSlide).attr("data-swiper-slide-index"),10),n.centeredSlides?i<t.loopedSlides-a/2||i>t.slides.length-t.loopedSlides+a/2?(t.loopFix(),i=r.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(e,'"]:not(.').concat(n.slideDuplicateClass,")")).eq(0).index(),Kbe((function(){t.slideTo(i)}))):t.slideTo(i):i>t.slides.length-a?(t.loopFix(),i=r.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(e,'"]:not(.').concat(n.slideDuplicateClass,")")).eq(0).index(),Kbe((function(){t.slideTo(i)}))):t.slideTo(i)}else t.slideTo(i)}};var dxe={loopCreate:function(){var e=this,t=Pbe(),n=e.params,r=e.$wrapperEl,a=r.children().length>0?Ybe(r.children()[0].parentNode):r;a.children(".".concat(n.slideClass,".").concat(n.slideDuplicateClass)).remove();var i=a.children(".".concat(n.slideClass));if(n.loopFillGroupWithBlank){var o=n.slidesPerGroup-i.length%n.slidesPerGroup;if(o!==n.slidesPerGroup){for(var s=0;s<o;s+=1){var l=Ybe(t.createElement("div")).addClass("".concat(n.slideClass," ").concat(n.slideBlankClass));a.append(l)}i=a.children(".".concat(n.slideClass))}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=i.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>i.length&&(e.loopedSlides=i.length);var u=[],c=[];i.each((function(t,n){var r=Ybe(t);n<e.loopedSlides&&c.push(t),n<i.length&&n>=i.length-e.loopedSlides&&u.push(t),r.attr("data-swiper-slide-index",n)}));for(var d=0;d<c.length;d+=1)a.append(Ybe(c[d].cloneNode(!0)).addClass(n.slideDuplicateClass));for(var h=u.length-1;h>=0;h-=1)a.prepend(Ybe(u[h].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){var e=this;e.emit("beforeLoopFix");var t,n=e.activeIndex,r=e.slides,a=e.loopedSlides,i=e.allowSlidePrev,o=e.allowSlideNext,s=e.snapGrid,l=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var u=-s[n]-e.getTranslate();if(n<a)t=r.length-3*a+n,t+=a,e.slideTo(t,0,!1,!0)&&0!==u&&e.setTranslate((l?-e.translate:e.translate)-u);else if(n>=r.length-a){t=-r.length+n+a,t+=a,e.slideTo(t,0,!1,!0)&&0!==u&&e.setTranslate((l?-e.translate:e.translate)-u)}e.allowSlidePrev=i,e.allowSlideNext=o,e.emit("loopFix")},loopDestroy:function(){var e=this,t=e.$wrapperEl,n=e.params,r=e.slides;t.children(".".concat(n.slideClass,".").concat(n.slideDuplicateClass,",.").concat(n.slideClass,".").concat(n.slideBlankClass)).remove(),r.removeAttr("data-swiper-slide-index")}};var hxe={setGrabCursor:function(e){var t=this;if(!(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;n.style.cursor="move",n.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){var e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}};function fxe(e){var t=this,n=Pbe(),r=jbe(),a=t.touchEventsData,i=t.params,o=t.touches;if(t.enabled&&(!t.animating||!i.preventInteractionOnTransition)){!t.animating&&i.cssMode&&i.loop&&t.loopFix();var s=e;s.originalEvent&&(s=s.originalEvent);var l=Ybe(s.target);if(("wrapper"!==i.touchEventsTarget||l.closest(t.wrapperEl).length)&&(a.isTouchEvent="touchstart"===s.type,(a.isTouchEvent||!("which"in s)||3!==s.which)&&!(!a.isTouchEvent&&"button"in s&&s.button>0)&&(!a.isTouched||!a.isMoved))){!!i.noSwipingClass&&""!==i.noSwipingClass&&s.target&&s.target.shadowRoot&&e.path&&e.path[0]&&(l=Ybe(e.path[0]));var u=i.noSwipingSelector?i.noSwipingSelector:".".concat(i.noSwipingClass),c=!(!s.target||!s.target.shadowRoot);if(i.noSwiping&&(c?function(e,t){return void 0===t&&(t=this),function t(n){return n&&n!==Pbe()&&n!==jbe()?(n.assignedSlot&&(n=n.assignedSlot),n.closest(e)||t(n.getRootNode().host)):null}(t)}(u,s.target):l.closest(u)[0]))t.allowClick=!0;else if(!i.swipeHandler||l.closest(i.swipeHandler)[0]){o.currentX="touchstart"===s.type?s.targetTouches[0].pageX:s.pageX,o.currentY="touchstart"===s.type?s.targetTouches[0].pageY:s.pageY;var d=o.currentX,h=o.currentY,f=i.edgeSwipeDetection||i.iOSEdgeSwipeDetection,p=i.edgeSwipeThreshold||i.iOSEdgeSwipeThreshold;if(f&&(d<=p||d>=r.innerWidth-p)){if("prevent"!==f)return;e.preventDefault()}if(Object.assign(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=d,o.startY=h,a.touchStartTime=$be(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,i.threshold>0&&(a.allowThresholdMove=!1),"touchstart"!==s.type){var m=!0;l.is(a.focusableElements)&&(m=!1,"SELECT"===l[0].nodeName&&(a.isTouched=!1)),n.activeElement&&Ybe(n.activeElement).is(a.focusableElements)&&n.activeElement!==l[0]&&n.activeElement.blur();var v=m&&t.allowTouchMove&&i.touchStartPreventDefault;!i.touchStartForcePreventDefault&&!v||l[0].isContentEditable||s.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!i.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",s)}}}}function pxe(e){var t=Pbe(),n=this,r=n.touchEventsData,a=n.params,i=n.touches,o=n.rtlTranslate;if(n.enabled){var s=e;if(s.originalEvent&&(s=s.originalEvent),r.isTouched){if(!r.isTouchEvent||"touchmove"===s.type){var l="touchmove"===s.type&&s.targetTouches&&(s.targetTouches[0]||s.changedTouches[0]),u="touchmove"===s.type?l.pageX:s.pageX,c="touchmove"===s.type?l.pageY:s.pageY;if(s.preventedByNestedSwiper)return i.startX=u,void(i.startY=c);if(!n.allowTouchMove)return Ybe(s.target).is(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(i,{startX:u,startY:c,currentX:u,currentY:c}),r.touchStartTime=$be()));if(r.isTouchEvent&&a.touchReleaseOnEdges&&!a.loop)if(n.isVertical()){if(c<i.startY&&n.translate<=n.maxTranslate()||c>i.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(u<i.startX&&n.translate<=n.maxTranslate()||u>i.startX&&n.translate>=n.minTranslate())return;if(r.isTouchEvent&&t.activeElement&&s.target===t.activeElement&&Ybe(s.target).is(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",s),!(s.targetTouches&&s.targetTouches.length>1)){i.currentX=u,i.currentY=c;var d=i.currentX-i.startX,h=i.currentY-i.startY;if(!(n.params.threshold&&Math.sqrt(Math.pow(d,2)+Math.pow(h,2))<n.params.threshold)){var f;if("undefined"===typeof r.isScrolling)n.isHorizontal()&&i.currentY===i.startY||n.isVertical()&&i.currentX===i.startX?r.isScrolling=!1:d*d+h*h>=25&&(f=180*Math.atan2(Math.abs(h),Math.abs(d))/Math.PI,r.isScrolling=n.isHorizontal()?f>a.touchAngle:90-f>a.touchAngle);if(r.isScrolling&&n.emit("touchMoveOpposite",s),"undefined"===typeof r.startMoving&&(i.currentX===i.startX&&i.currentY===i.startY||(r.startMoving=!0)),r.isScrolling)r.isTouched=!1;else if(r.startMoving){n.allowClick=!1,!a.cssMode&&s.cancelable&&s.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&s.stopPropagation(),r.isMoved||(a.loop&&!a.cssMode&&n.loopFix(),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!a.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",s)),n.emit("sliderMove",s),r.isMoved=!0;var p=n.isHorizontal()?d:h;i.diff=p,p*=a.touchRatio,o&&(p=-p),n.swipeDirection=p>0?"prev":"next",r.currentTranslate=p+r.startTranslate;var m=!0,v=a.resistanceRatio;if(a.touchReleaseOnEdges&&(v=0),p>0&&r.currentTranslate>n.minTranslate()?(m=!1,a.resistance&&(r.currentTranslate=n.minTranslate()-1+Math.pow(-n.minTranslate()+r.startTranslate+p,v))):p<0&&r.currentTranslate<n.maxTranslate()&&(m=!1,a.resistance&&(r.currentTranslate=n.maxTranslate()+1-Math.pow(n.maxTranslate()-r.startTranslate-p,v))),m&&(s.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),a.threshold>0){if(!(Math.abs(p)>a.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,r.currentTranslate=r.startTranslate,void(i.diff=n.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY)}a.followFinger&&!a.cssMode&&((a.freeMode&&a.freeMode.enabled&&n.freeMode||a.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&a.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}}}}}else r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",s)}}function mxe(e){var t=this,n=t.touchEventsData,r=t.params,a=t.touches,i=t.rtlTranslate,o=t.slidesGrid;if(t.enabled){var s=e;if(s.originalEvent&&(s=s.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",s),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var l,u=$be(),c=u-n.touchStartTime;if(t.allowClick){var d=s.path||s.composedPath&&s.composedPath();t.updateClickedSlide(d&&d[0]||s.target),t.emit("tap click",s),c<300&&u-n.lastClickTime<300&&t.emit("doubleTap doubleClick",s)}if(n.lastClickTime=$be(),Kbe((function(){t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===a.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,l=r.followFinger?i?t.translate:-t.translate:-n.currentTranslate,!r.cssMode)if(t.params.freeMode&&r.freeMode.enabled)t.freeMode.onTouchEnd({currentPos:l});else{for(var h=0,f=t.slidesSizesGrid[0],p=0;p<o.length;p+=p<r.slidesPerGroupSkip?1:r.slidesPerGroup){var m=p<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;"undefined"!==typeof o[p+m]?l>=o[p]&&l<o[p+m]&&(h=p,f=o[p+m]-o[p]):l>=o[p]&&(h=p,f=o[o.length-1]-o[o.length-2])}var v=null,g=null;r.rewind&&(t.isBeginning?g=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(v=0));var y=(l-o[h])/f,b=h<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(c>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(y>=r.longSwipesRatio?t.slideTo(r.rewind&&t.isEnd?v:h+b):t.slideTo(h)),"prev"===t.swipeDirection&&(y>1-r.longSwipesRatio?t.slideTo(h+b):null!==g&&y<0&&Math.abs(y)>r.longSwipesRatio?t.slideTo(g):t.slideTo(h))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(s.target===t.navigation.nextEl||s.target===t.navigation.prevEl)?s.target===t.navigation.nextEl?t.slideTo(h+b):t.slideTo(h):("next"===t.swipeDirection&&t.slideTo(null!==v?v:h+b),"prev"===t.swipeDirection&&t.slideTo(null!==g?g:h))}}}}function vxe(){var e=this,t=e.params,n=e.el;if(!n||0!==n.offsetWidth){t.breakpoints&&e.setBreakpoint();var r=e.allowSlideNext,a=e.allowSlidePrev,i=e.snapGrid;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=a,e.allowSlideNext=r,e.params.watchOverflow&&i!==e.snapGrid&&e.checkOverflow()}}function gxe(e){var t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function yxe(){var e=this,t=e.wrapperEl,n=e.rtlTranslate;if(e.enabled){e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var r=e.maxTranslate()-e.minTranslate();(0===r?0:(e.translate-e.minTranslate())/r)!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}}var bxe=!1;function xxe(){}var wxe=function(e,t){var n=Pbe(),r=e.params,a=e.touchEvents,i=e.el,o=e.wrapperEl,s=e.device,l=e.support,u=!!r.nested,c="on"===t?"addEventListener":"removeEventListener",d=t;if(l.touch){var h=!("touchstart"!==a.start||!l.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};i[c](a.start,e.onTouchStart,h),i[c](a.move,e.onTouchMove,l.passiveListener?{passive:!1,capture:u}:u),i[c](a.end,e.onTouchEnd,h),a.cancel&&i[c](a.cancel,e.onTouchEnd,h)}else i[c](a.start,e.onTouchStart,!1),n[c](a.move,e.onTouchMove,u),n[c](a.end,e.onTouchEnd,!1);(r.preventClicks||r.preventClicksPropagation)&&i[c]("click",e.onClick,!0),r.cssMode&&o[c]("scroll",e.onScroll),r.updateOnWindowResize?e[d](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",vxe,!0):e[d]("observerUpdate",vxe,!0)};var kxe={attachEvents:function(){var e=this,t=Pbe(),n=e.params,r=e.support;e.onTouchStart=fxe.bind(e),e.onTouchMove=pxe.bind(e),e.onTouchEnd=mxe.bind(e),n.cssMode&&(e.onScroll=yxe.bind(e)),e.onClick=gxe.bind(e),r.touch&&!bxe&&(t.addEventListener("touchstart",xxe),bxe=!0),wxe(e,"on")},detachEvents:function(){wxe(this,"off")}},Sxe=function(e,t){return e.grid&&t.grid&&t.grid.rows>1};var Txe={setBreakpoint:function(){var e=this,t=e.activeIndex,n=e.initialized,r=e.loopedSlides,a=void 0===r?0:r,i=e.params,o=e.$el,s=i.breakpoints;if(s&&(!s||0!==Object.keys(s).length)){var l=e.getBreakpoint(s,e.params.breakpointsBase,e.el);if(l&&e.currentBreakpoint!==l){var u=(l in s?s[l]:void 0)||e.originalParams,c=Sxe(e,i),d=Sxe(e,u),h=i.enabled;c&&!d?(o.removeClass("".concat(i.containerModifierClass,"grid ").concat(i.containerModifierClass,"grid-column")),e.emitContainerClasses()):!c&&d&&(o.addClass("".concat(i.containerModifierClass,"grid")),(u.grid.fill&&"column"===u.grid.fill||!u.grid.fill&&"column"===i.grid.fill)&&o.addClass("".concat(i.containerModifierClass,"grid-column")),e.emitContainerClasses());var f=u.direction&&u.direction!==i.direction,p=i.loop&&(u.slidesPerView!==i.slidesPerView||f);f&&n&&e.changeDirection(),exe(e.params,u);var m=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),h&&!m?e.disable():!h&&m&&e.enable(),e.currentBreakpoint=l,e.emit("_beforeBreakpoint",u),p&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-a+e.loopedSlides,0,!1)),e.emit("breakpoint",u)}}},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),e&&("container"!==t||n)){var r=!1,a=jbe(),i="window"===t?a.innerHeight:n.clientHeight,o=Object.keys(e).map((function(e){if("string"===typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:i*t,point:e}}return{value:e,point:e}}));o.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var s=0;s<o.length;s+=1){var l=o[s],u=l.point,c=l.value;"window"===t?a.matchMedia("(min-width: ".concat(c,"px)")).matches&&(r=u):c<=n.clientWidth&&(r=u)}return r||"max"}}};var Exe={addClasses:function(){var e=this,t=e.classNames,n=e.params,r=e.rtl,a=e.$el,i=e.device,o=e.support,s=function(e,t){var n=[];return e.forEach((function(e){"object"===typeof e?Object.keys(e).forEach((function(r){e[r]&&n.push(t+r)})):"string"===typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"pointer-events":!o.touch},{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:i.android},{ios:i.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push.apply(t,(0,_.Z)(s)),a.addClass((0,_.Z)(t).join(" ")),e.emitContainerClasses()},removeClasses:function(){var e=this,t=e.$el,n=e.classNames;t.removeClass(n.join(" ")),e.emitContainerClasses()}};var Cxe={loadImage:function(e,t,n,r,a,i){var o,s=jbe();function l(){i&&i()}Ybe(e).parent("picture")[0]||e.complete&&a?l():t?((o=new s.Image).onload=l,o.onerror=l,r&&(o.sizes=r),n&&(o.srcset=n),t&&(o.src=t)):l()},preloadImages:function(){var e=this;function t(){"undefined"!==typeof e&&null!==e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var n=0;n<e.imagesToLoad.length;n+=1){var r=e.imagesToLoad[n];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}};var _xe={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function Mxe(e,t){return function(n){void 0===n&&(n={});var r=Object.keys(n)[0],a=n[r];"object"===typeof a&&null!==a?(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===e[r]&&(e[r]={auto:!0}),r in e&&"enabled"in a?(!0===e[r]&&(e[r]={enabled:!0}),"object"!==typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),exe(t,n)):exe(t,n)):exe(t,n)}}var Axe={eventsEmitter:oxe,update:sxe,translate:lxe,transition:{setTransition:function(e,t){var n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var n=this,r=n.params;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),uxe({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);var n=this,r=n.params;n.animating=!1,r.cssMode||(n.setTransition(0),uxe({swiper:n,runCallbacks:e,direction:t,step:"End"}))}},slide:cxe,loop:dxe,grabCursor:hxe,events:kxe,breakpoints:Txe,checkOverflow:{checkOverflow:function(){var e=this,t=e.isLocked,n=e.params,r=n.slidesOffsetBefore;if(r){var a=e.slides.length-1,i=e.slidesGrid[a]+e.slidesSizesGrid[a]+2*r;e.isLocked=e.size>i}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:Exe,images:Cxe},Ixe={},Nxe=function(){function e(){var t,n;M(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];if(1===a.length&&a[0].constructor&&"Object"===Object.prototype.toString.call(a[0]).slice(8,-1)?n=a[0]:(t=a[0],n=a[1]),n||(n={}),n=exe({},n),t&&!n.el&&(n.el=t),n.el&&Ybe(n.el).length>1){var o=[];return Ybe(n.el).each((function(t){var r=exe({},n,{el:t});o.push(new e(r))})),o}var s,l=this;(l.__swiper__=!0,l.support=rxe(),l.device=axe({userAgent:n.userAgent}),l.browser=ixe(),l.eventsListeners={},l.eventsAnyListeners=[],l.modules=(0,_.Z)(l.__modules__),n.modules&&Array.isArray(n.modules))&&(s=l.modules).push.apply(s,(0,_.Z)(n.modules));var u={};l.modules.forEach((function(e){e({swiper:l,extendParams:Mxe(n,u),on:l.on.bind(l),once:l.once.bind(l),off:l.off.bind(l),emit:l.emit.bind(l)})}));var c=exe({},_xe,u);return l.params=exe({},c,Ixe,n),l.originalParams=exe({},l.params),l.passedParams=exe({},n),l.params&&l.params.on&&Object.keys(l.params.on).forEach((function(e){l.on(e,l.params.on[e])})),l.params&&l.params.onAny&&l.onAny(l.params.onAny),l.$=Ybe,Object.assign(l,{enabled:l.params.enabled,el:t,classNames:[],slides:Ybe(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===l.params.direction},isVertical:function(){return"vertical"===l.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEvents:function(){var e=["touchstart","touchmove","touchend","touchcancel"],t=["pointerdown","pointermove","pointerup"];return l.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},l.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},l.support.touch||!l.params.simulateTouch?l.touchEventsTouch:l.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:$be(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.emit("_swiper"),l.params.init&&l.init(),l}return(0,A.Z)(e,[{key:"enable",value:function(){var e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}},{key:"disable",value:function(){var e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}},{key:"setProgress",value:function(e,t){var n=this;e=Math.min(Math.max(e,0),1);var r=n.minTranslate(),a=(n.maxTranslate()-r)*e+r;n.translateTo(a,"undefined"===typeof t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}},{key:"emitContainerClasses",value:function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}}},{key:"getSlideClasses",value:function(e){var t=this;return t.destroyed?"":e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")}},{key:"emitSlidesClasses",value:function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each((function(n){var r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}}},{key:"slidesPerViewDynamic",value:function(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);var n=this,r=n.params,a=n.slides,i=n.slidesGrid,o=n.slidesSizesGrid,s=n.size,l=n.activeIndex,u=1;if(r.centeredSlides){for(var c,d=a[l].swiperSlideSize,h=l+1;h<a.length;h+=1)a[h]&&!c&&(u+=1,(d+=a[h].swiperSlideSize)>s&&(c=!0));for(var f=l-1;f>=0;f-=1)a[f]&&!c&&(u+=1,(d+=a[f].swiperSlideSize)>s&&(c=!0))}else if("current"===e)for(var p=l+1;p<a.length;p+=1){(t?i[p]+o[p]-i[l]<s:i[p]-i[l]<s)&&(u+=1)}else for(var m=l-1;m>=0;m-=1){i[l]-i[m]<s&&(u+=1)}return u}},{key:"update",value:function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,n=e.params;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode&&e.params.freeMode.enabled?(r(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||r(),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function r(){var t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}}},{key:"changeDirection",value:function(e,t){void 0===t&&(t=!0);var n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass("".concat(n.params.containerModifierClass).concat(r)).addClass("".concat(n.params.containerModifierClass).concat(e)),n.emitContainerClasses(),n.params.direction=e,n.slides.each((function(t){"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}},{key:"mount",value:function(e){var t=this;if(t.mounted)return!0;var n=Ybe(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;var r=function(){return".".concat((t.params.wrapperClass||"").trim().split(" ").join("."))},a=function(){if(e&&e.shadowRoot&&e.shadowRoot.querySelector){var t=Ybe(e.shadowRoot.querySelector(r()));return t.children=function(e){return n.children(e)},t}return n.children(r())}();if(0===a.length&&t.params.createElements){var i=Pbe().createElement("div");a=Ybe(i),i.className=t.params.wrapperClass,n.append(i),n.children(".".concat(t.params.slideClass)).each((function(e){a.append(e)}))}return Object.assign(t,{$el:n,el:e,$wrapperEl:a,wrapperEl:a[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===a.css("display")}),!0}},{key:"init",value:function(e){var t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t}},{key:"destroy",value:function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=this,r=n.params,a=n.$el,i=n.$wrapperEl,o=n.slides;return"undefined"===typeof n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),a.removeAttr("style"),i.removeAttr("style"),o&&o.length&&o.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((function(e){n.off(e)})),!1!==e&&(n.$el[0].swiper=null,function(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(UK){}try{delete t[e]}catch(UK){}}))}(n)),n.destroyed=!0),null}}],[{key:"extendDefaults",value:function(e){exe(Ixe,e)}},{key:"extendedDefaults",get:function(){return Ixe}},{key:"defaults",get:function(){return _xe}},{key:"installModule",value:function(t){e.prototype.__modules__||(e.prototype.__modules__=[]);var n=e.prototype.__modules__;"function"===typeof t&&n.indexOf(t)<0&&n.push(t)}},{key:"use",value:function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)}}]),e}();Object.keys(Axe).forEach((function(e){Object.keys(Axe[e]).forEach((function(t){Nxe.prototype[t]=Axe[e][t]}))})),Nxe.use([function(e){var t=e.swiper,n=e.on,r=e.emit,a=jbe(),i=null,o=null,s=function(){t&&!t.destroyed&&t.initialized&&(r("beforeResize"),r("resize"))},l=function(){t&&!t.destroyed&&t.initialized&&r("orientationchange")};n("init",(function(){t.params.resizeObserver&&"undefined"!==typeof a.ResizeObserver?t&&!t.destroyed&&t.initialized&&(i=new ResizeObserver((function(e){o=a.requestAnimationFrame((function(){var n=t.width,r=t.height,a=n,i=r;e.forEach((function(e){var n=e.contentBoxSize,r=e.contentRect,o=e.target;o&&o!==t.el||(a=r?r.width:(n[0]||n).inlineSize,i=r?r.height:(n[0]||n).blockSize)})),a===n&&i===r||s()}))})),i.observe(t.el)):(a.addEventListener("resize",s),a.addEventListener("orientationchange",l))})),n("destroy",(function(){o&&a.cancelAnimationFrame(o),i&&i.unobserve&&t.el&&(i.unobserve(t.el),i=null),a.removeEventListener("resize",s),a.removeEventListener("orientationchange",l)}))},function(e){var t=e.swiper,n=e.extendParams,r=e.on,a=e.emit,i=[],o=jbe(),s=function(e,t){void 0===t&&(t={});var n=new(o.MutationObserver||o.WebkitMutationObserver)((function(e){if(1!==e.length){var t=function(){a("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(t):o.setTimeout(t,0)}else a("observerUpdate",e[0])}));n.observe(e,{attributes:"undefined"===typeof t.attributes||t.attributes,childList:"undefined"===typeof t.childList||t.childList,characterData:"undefined"===typeof t.characterData||t.characterData}),i.push(n)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",(function(){if(t.params.observer){if(t.params.observeParents)for(var e=t.$el.parents(),n=0;n<e.length;n+=1)s(e[n]);s(t.$el[0],{childList:t.params.observeSlideChildren}),s(t.$wrapperEl[0],{attributes:!1})}})),r("destroy",(function(){i.forEach((function(e){e.disconnect()})),i.splice(0,i.length)}))}]);var Rxe=Nxe;function Oxe(e){var t=e.swiper,n=e.extendParams,r=e.on,a=e.emit,i=Pbe(),o=jbe();function s(e){if(t.enabled){var n=t.rtlTranslate,r=e;r.originalEvent&&(r=r.originalEvent);var s=r.keyCode||r.charCode,l=t.params.keyboard.pageUpDown,u=l&&33===s,c=l&&34===s,d=37===s,h=39===s,f=38===s,p=40===s;if(!t.allowSlideNext&&(t.isHorizontal()&&h||t.isVertical()&&p||c))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&d||t.isVertical()&&f||u))return!1;if(!(r.shiftKey||r.altKey||r.ctrlKey||r.metaKey)&&(!i.activeElement||!i.activeElement.nodeName||"input"!==i.activeElement.nodeName.toLowerCase()&&"textarea"!==i.activeElement.nodeName.toLowerCase())){if(t.params.keyboard.onlyInViewport&&(u||c||d||h||f||p)){var m=!1;if(t.$el.parents(".".concat(t.params.slideClass)).length>0&&0===t.$el.parents(".".concat(t.params.slideActiveClass)).length)return;var v=t.$el,g=v[0].clientWidth,y=v[0].clientHeight,b=o.innerWidth,x=o.innerHeight,w=t.$el.offset();n&&(w.left-=t.$el[0].scrollLeft);for(var k=[[w.left,w.top],[w.left+g,w.top],[w.left,w.top+y],[w.left+g,w.top+y]],S=0;S<k.length;S+=1){var T=k[S];if(T[0]>=0&&T[0]<=b&&T[1]>=0&&T[1]<=x){if(0===T[0]&&0===T[1])continue;m=!0}}if(!m)return}t.isHorizontal()?((u||c||d||h)&&(r.preventDefault?r.preventDefault():r.returnValue=!1),((c||h)&&!n||(u||d)&&n)&&t.slideNext(),((u||d)&&!n||(c||h)&&n)&&t.slidePrev()):((u||c||f||p)&&(r.preventDefault?r.preventDefault():r.returnValue=!1),(c||p)&&t.slideNext(),(u||f)&&t.slidePrev()),a("keyPress",s)}}}function l(){t.keyboard.enabled||(Ybe(i).on("keydown",s),t.keyboard.enabled=!0)}function u(){t.keyboard.enabled&&(Ybe(i).off("keydown",s),t.keyboard.enabled=!1)}t.keyboard={enabled:!1},n({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),r("init",(function(){t.params.keyboard.enabled&&l()})),r("destroy",(function(){t.keyboard.enabled&&u()})),Object.assign(t.keyboard,{enable:l,disable:u})}function Dxe(e,t,n,r){var a=Pbe();return e.params.createElements&&Object.keys(r).forEach((function(i){if(!n[i]&&!0===n.auto){var o=e.$el.children(".".concat(r[i]))[0];o||((o=a.createElement("div")).className=r[i],e.$el.append(o)),n[i]=o,t[i]=o}})),n}function Lxe(e){var t=e.swiper,n=e.extendParams,r=e.on,a=e.emit;function i(e){var n;return e&&(n=Ybe(e),t.params.uniqueNavElements&&"string"===typeof e&&n.length>1&&1===t.$el.find(e).length&&(n=t.$el.find(e))),n}function o(e,n){var r=t.params.navigation;e&&e.length>0&&(e[n?"addClass":"removeClass"](r.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=n),t.params.watchOverflow&&t.enabled&&e[t.isLocked?"addClass":"removeClass"](r.lockClass))}function s(){if(!t.params.loop){var e=t.navigation,n=e.$nextEl;o(e.$prevEl,t.isBeginning&&!t.params.rewind),o(n,t.isEnd&&!t.params.rewind)}}function l(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&t.slidePrev()}function u(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&t.slideNext()}function c(){var e=t.params.navigation;if(t.params.navigation=Dxe(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),e.nextEl||e.prevEl){var n=i(e.nextEl),r=i(e.prevEl);n&&n.length>0&&n.on("click",u),r&&r.length>0&&r.on("click",l),Object.assign(t.navigation,{$nextEl:n,nextEl:n&&n[0],$prevEl:r,prevEl:r&&r[0]}),t.enabled||(n&&n.addClass(e.lockClass),r&&r.addClass(e.lockClass))}}function d(){var e=t.navigation,n=e.$nextEl,r=e.$prevEl;n&&n.length&&(n.off("click",u),n.removeClass(t.params.navigation.disabledClass)),r&&r.length&&(r.off("click",l),r.removeClass(t.params.navigation.disabledClass))}n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}}),t.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null},r("init",(function(){c(),s()})),r("toEdge fromEdge lock unlock",(function(){s()})),r("destroy",(function(){d()})),r("enable disable",(function(){var e=t.navigation,n=e.$nextEl,r=e.$prevEl;n&&n[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass),r&&r[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass)})),r("click",(function(e,n){var r=t.navigation,i=r.$nextEl,o=r.$prevEl,s=n.target;if(t.params.navigation.hideOnClick&&!Ybe(s).is(o)&&!Ybe(s).is(i)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===s||t.pagination.el.contains(s)))return;var l;i?l=i.hasClass(t.params.navigation.hiddenClass):o&&(l=o.hasClass(t.params.navigation.hiddenClass)),a(!0===l?"navigationShow":"navigationHide"),i&&i.toggleClass(t.params.navigation.hiddenClass),o&&o.toggleClass(t.params.navigation.hiddenClass)}})),Object.assign(t.navigation,{update:s,init:c,destroy:d})}function Pxe(e){return void 0===e&&(e=""),".".concat(e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,"."))}function Fxe(e){var t,n=e.swiper,r=e.extendParams,a=e.on,i=e.emit,o="swiper-pagination";r({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"".concat(o,"-bullet"),bulletActiveClass:"".concat(o,"-bullet-active"),modifierClass:"".concat(o,"-"),currentClass:"".concat(o,"-current"),totalClass:"".concat(o,"-total"),hiddenClass:"".concat(o,"-hidden"),progressbarFillClass:"".concat(o,"-progressbar-fill"),progressbarOppositeClass:"".concat(o,"-progressbar-opposite"),clickableClass:"".concat(o,"-clickable"),lockClass:"".concat(o,"-lock"),horizontalClass:"".concat(o,"-horizontal"),verticalClass:"".concat(o,"-vertical")}}),n.pagination={el:null,$el:null,bullets:[]};var s=0;function l(){return!n.params.pagination.el||!n.pagination.el||!n.pagination.$el||0===n.pagination.$el.length}function u(e,t){var r=n.params.pagination.bulletActiveClass;e[t]().addClass("".concat(r,"-").concat(t))[t]().addClass("".concat(r,"-").concat(t,"-").concat(t))}function c(){var e=n.rtl,r=n.params.pagination;if(!l()){var a,o=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.slides.length,c=n.pagination.$el,d=n.params.loop?Math.ceil((o-2*n.loopedSlides)/n.params.slidesPerGroup):n.snapGrid.length;if(n.params.loop?((a=Math.ceil((n.activeIndex-n.loopedSlides)/n.params.slidesPerGroup))>o-1-2*n.loopedSlides&&(a-=o-2*n.loopedSlides),a>d-1&&(a-=d),a<0&&"bullets"!==n.params.paginationType&&(a=d+a)):a="undefined"!==typeof n.snapIndex?n.snapIndex:n.activeIndex||0,"bullets"===r.type&&n.pagination.bullets&&n.pagination.bullets.length>0){var h,f,p,m=n.pagination.bullets;if(r.dynamicBullets&&(t=m.eq(0)[n.isHorizontal()?"outerWidth":"outerHeight"](!0),c.css(n.isHorizontal()?"width":"height","".concat(t*(r.dynamicMainBullets+4),"px")),r.dynamicMainBullets>1&&void 0!==n.previousIndex&&((s+=a-(n.previousIndex-n.loopedSlides||0))>r.dynamicMainBullets-1?s=r.dynamicMainBullets-1:s<0&&(s=0)),h=Math.max(a-s,0),p=((f=h+(Math.min(m.length,r.dynamicMainBullets)-1))+h)/2),m.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map((function(e){return"".concat(r.bulletActiveClass).concat(e)})).join(" ")),c.length>1)m.each((function(e){var t=Ybe(e),n=t.index();n===a&&t.addClass(r.bulletActiveClass),r.dynamicBullets&&(n>=h&&n<=f&&t.addClass("".concat(r.bulletActiveClass,"-main")),n===h&&u(t,"prev"),n===f&&u(t,"next"))}));else{var v=m.eq(a),g=v.index();if(v.addClass(r.bulletActiveClass),r.dynamicBullets){for(var y=m.eq(h),b=m.eq(f),x=h;x<=f;x+=1)m.eq(x).addClass("".concat(r.bulletActiveClass,"-main"));if(n.params.loop)if(g>=m.length){for(var w=r.dynamicMainBullets;w>=0;w-=1)m.eq(m.length-w).addClass("".concat(r.bulletActiveClass,"-main"));m.eq(m.length-r.dynamicMainBullets-1).addClass("".concat(r.bulletActiveClass,"-prev"))}else u(y,"prev"),u(b,"next");else u(y,"prev"),u(b,"next")}}if(r.dynamicBullets){var k=Math.min(m.length,r.dynamicMainBullets+4),S=(t*k-t)/2-p*t,T=e?"right":"left";m.css(n.isHorizontal()?T:"top","".concat(S,"px"))}}if("fraction"===r.type&&(c.find(Pxe(r.currentClass)).text(r.formatFractionCurrent(a+1)),c.find(Pxe(r.totalClass)).text(r.formatFractionTotal(d))),"progressbar"===r.type){var E;E=r.progressbarOpposite?n.isHorizontal()?"vertical":"horizontal":n.isHorizontal()?"horizontal":"vertical";var C=(a+1)/d,_=1,M=1;"horizontal"===E?_=C:M=C,c.find(Pxe(r.progressbarFillClass)).transform("translate3d(0,0,0) scaleX(".concat(_,") scaleY(").concat(M,")")).transition(n.params.speed)}"custom"===r.type&&r.renderCustom?(c.html(r.renderCustom(n,a+1,d)),i("paginationRender",c[0])):i("paginationUpdate",c[0]),n.params.watchOverflow&&n.enabled&&c[n.isLocked?"addClass":"removeClass"](r.lockClass)}}function d(){var e=n.params.pagination;if(!l()){var t=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.slides.length,r=n.pagination.$el,a="";if("bullets"===e.type){var o=n.params.loop?Math.ceil((t-2*n.loopedSlides)/n.params.slidesPerGroup):n.snapGrid.length;n.params.freeMode&&n.params.freeMode.enabled&&!n.params.loop&&o>t&&(o=t);for(var s=0;s<o;s+=1)e.renderBullet?a+=e.renderBullet.call(n,s,e.bulletClass):a+="<".concat(e.bulletElement,' class="').concat(e.bulletClass,'"></').concat(e.bulletElement,">");r.html(a),n.pagination.bullets=r.find(Pxe(e.bulletClass))}"fraction"===e.type&&(a=e.renderFraction?e.renderFraction.call(n,e.currentClass,e.totalClass):'<span class="'.concat(e.currentClass,'"></span>')+" / "+'<span class="'.concat(e.totalClass,'"></span>'),r.html(a)),"progressbar"===e.type&&(a=e.renderProgressbar?e.renderProgressbar.call(n,e.progressbarFillClass):'<span class="'.concat(e.progressbarFillClass,'"></span>'),r.html(a)),"custom"!==e.type&&i("paginationRender",n.pagination.$el[0])}}function h(){n.params.pagination=Dxe(n,n.originalParams.pagination,n.params.pagination,{el:"swiper-pagination"});var e=n.params.pagination;if(e.el){var t=Ybe(e.el);0!==t.length&&(n.params.uniqueNavElements&&"string"===typeof e.el&&t.length>1&&(t=n.$el.find(e.el)).length>1&&(t=t.filter((function(e){return Ybe(e).parents(".swiper")[0]===n.el}))),"bullets"===e.type&&e.clickable&&t.addClass(e.clickableClass),t.addClass(e.modifierClass+e.type),t.addClass(n.isHorizontal()?e.horizontalClass:e.verticalClass),"bullets"===e.type&&e.dynamicBullets&&(t.addClass("".concat(e.modifierClass).concat(e.type,"-dynamic")),s=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&t.addClass(e.progressbarOppositeClass),e.clickable&&t.on("click",Pxe(e.bulletClass),(function(e){e.preventDefault();var t=Ybe(this).index()*n.params.slidesPerGroup;n.params.loop&&(t+=n.loopedSlides),n.slideTo(t)})),Object.assign(n.pagination,{$el:t,el:t[0]}),n.enabled||t.addClass(e.lockClass))}}function f(){var e=n.params.pagination;if(!l()){var t=n.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),t.removeClass(n.isHorizontal()?e.horizontalClass:e.verticalClass),n.pagination.bullets&&n.pagination.bullets.removeClass&&n.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click",Pxe(e.bulletClass))}}a("init",(function(){h(),d(),c()})),a("activeIndexChange",(function(){(n.params.loop||"undefined"===typeof n.snapIndex)&&c()})),a("snapIndexChange",(function(){n.params.loop||c()})),a("slidesLengthChange",(function(){n.params.loop&&(d(),c())})),a("snapGridLengthChange",(function(){n.params.loop||(d(),c())})),a("destroy",(function(){f()})),a("enable disable",(function(){var e=n.pagination.$el;e&&e[n.enabled?"removeClass":"addClass"](n.params.pagination.lockClass)})),a("lock unlock",(function(){c()})),a("click",(function(e,t){var r=t.target,a=n.pagination.$el;if(n.params.pagination.el&&n.params.pagination.hideOnClick&&a.length>0&&!Ybe(r).hasClass(n.params.pagination.bulletClass)){if(n.navigation&&(n.navigation.nextEl&&r===n.navigation.nextEl||n.navigation.prevEl&&r===n.navigation.prevEl))return;var o=a.hasClass(n.params.pagination.hiddenClass);i(!0===o?"paginationShow":"paginationHide"),a.toggleClass(n.params.pagination.hiddenClass)}})),Object.assign(n.pagination,{render:d,update:c,init:h,destroy:f})}function jxe(e){var t,n,r,a,i=e.swiper,o=e.extendParams,s=e.on,l=e.emit,u=Pbe(),c=!1,d=null,h=null;function f(){if(i.params.scrollbar.el&&i.scrollbar.el){var e=i.scrollbar,t=i.rtlTranslate,a=i.progress,o=e.$dragEl,s=e.$el,l=i.params.scrollbar,u=n,c=(r-n)*a;t?(c=-c)>0?(u=n-c,c=0):-c+n>r&&(u=r+c):c<0?(u=n+c,c=0):c+n>r&&(u=r-c),i.isHorizontal()?(o.transform("translate3d(".concat(c,"px, 0, 0)")),o[0].style.width="".concat(u,"px")):(o.transform("translate3d(0px, ".concat(c,"px, 0)")),o[0].style.height="".concat(u,"px")),l.hide&&(clearTimeout(d),s[0].style.opacity=1,d=setTimeout((function(){s[0].style.opacity=0,s.transition(400)}),1e3))}}function p(){if(i.params.scrollbar.el&&i.scrollbar.el){var e=i.scrollbar,t=e.$dragEl,o=e.$el;t[0].style.width="",t[0].style.height="",r=i.isHorizontal()?o[0].offsetWidth:o[0].offsetHeight,a=i.size/(i.virtualSize+i.params.slidesOffsetBefore-(i.params.centeredSlides?i.snapGrid[0]:0)),n="auto"===i.params.scrollbar.dragSize?r*a:parseInt(i.params.scrollbar.dragSize,10),i.isHorizontal()?t[0].style.width="".concat(n,"px"):t[0].style.height="".concat(n,"px"),o[0].style.display=a>=1?"none":"",i.params.scrollbar.hide&&(o[0].style.opacity=0),i.params.watchOverflow&&i.enabled&&e.$el[i.isLocked?"addClass":"removeClass"](i.params.scrollbar.lockClass)}}function m(e){return i.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientX:e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientY:e.clientY}function v(e){var a,o=i.scrollbar,s=i.rtlTranslate,l=o.$el;a=(m(e)-l.offset()[i.isHorizontal()?"left":"top"]-(null!==t?t:n/2))/(r-n),a=Math.max(Math.min(a,1),0),s&&(a=1-a);var u=i.minTranslate()+(i.maxTranslate()-i.minTranslate())*a;i.updateProgress(u),i.setTranslate(u),i.updateActiveIndex(),i.updateSlidesClasses()}function g(e){var n=i.params.scrollbar,r=i.scrollbar,a=i.$wrapperEl,o=r.$el,s=r.$dragEl;c=!0,t=e.target===s[0]||e.target===s?m(e)-e.target.getBoundingClientRect()[i.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),a.transition(100),s.transition(100),v(e),clearTimeout(h),o.transition(0),n.hide&&o.css("opacity",1),i.params.cssMode&&i.$wrapperEl.css("scroll-snap-type","none"),l("scrollbarDragStart",e)}function y(e){var t=i.scrollbar,n=i.$wrapperEl,r=t.$el,a=t.$dragEl;c&&(e.preventDefault?e.preventDefault():e.returnValue=!1,v(e),n.transition(0),r.transition(0),a.transition(0),l("scrollbarDragMove",e))}function b(e){var t=i.params.scrollbar,n=i.scrollbar,r=i.$wrapperEl,a=n.$el;c&&(c=!1,i.params.cssMode&&(i.$wrapperEl.css("scroll-snap-type",""),r.transition("")),t.hide&&(clearTimeout(h),h=Kbe((function(){a.css("opacity",0),a.transition(400)}),1e3)),l("scrollbarDragEnd",e),t.snapOnRelease&&i.slideToClosest())}function x(e){var t=i.scrollbar,n=i.touchEventsTouch,r=i.touchEventsDesktop,a=i.params,o=i.support,s=t.$el[0],l=!(!o.passiveListener||!a.passiveListeners)&&{passive:!1,capture:!1},c=!(!o.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};if(s){var d="on"===e?"addEventListener":"removeEventListener";o.touch?(s[d](n.start,g,l),s[d](n.move,y,l),s[d](n.end,b,c)):(s[d](r.start,g,l),u[d](r.move,y,l),u[d](r.end,b,c))}}function w(){var e=i.scrollbar,t=i.$el;i.params.scrollbar=Dxe(i,i.originalParams.scrollbar,i.params.scrollbar,{el:"swiper-scrollbar"});var n=i.params.scrollbar;if(n.el){var r=Ybe(n.el);i.params.uniqueNavElements&&"string"===typeof n.el&&r.length>1&&1===t.find(n.el).length&&(r=t.find(n.el));var a=r.find(".".concat(i.params.scrollbar.dragClass));0===a.length&&(a=Ybe('<div class="'.concat(i.params.scrollbar.dragClass,'"></div>')),r.append(a)),Object.assign(e,{$el:r,el:r[0],$dragEl:a,dragEl:a[0]}),n.draggable&&i.params.scrollbar.el&&x("on"),r&&r[i.enabled?"removeClass":"addClass"](i.params.scrollbar.lockClass)}}function k(){i.params.scrollbar.el&&x("off")}o({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}}),i.scrollbar={el:null,dragEl:null,$el:null,$dragEl:null},s("init",(function(){w(),p(),f()})),s("update resize observerUpdate lock unlock",(function(){p()})),s("setTranslate",(function(){f()})),s("setTransition",(function(e,t){!function(e){i.params.scrollbar.el&&i.scrollbar.el&&i.scrollbar.$dragEl.transition(e)}(t)})),s("enable disable",(function(){var e=i.scrollbar.$el;e&&e[i.enabled?"removeClass":"addClass"](i.params.scrollbar.lockClass)})),s("destroy",(function(){k()})),Object.assign(i.scrollbar,{updateSize:p,setTranslate:f,init:w,destroy:k})}function zxe(e){var t=e.swiper,n=e.extendParams,r=e.on,a=e.emit,i=jbe();n({zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),t.zoom={enabled:!1};var o,s,l,u=1,c=!1,d={$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},h={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},f={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0},p=1;function m(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,n=e.targetTouches[0].pageY,r=e.targetTouches[1].pageX,a=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(r-t,2)+Math.pow(a-n,2))}function v(e){var n=t.support,r=t.params.zoom;if(s=!1,l=!1,!n.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;s=!0,d.scaleStart=m(e)}d.$slideEl&&d.$slideEl.length||(d.$slideEl=Ybe(e.target).closest(".".concat(t.params.slideClass)),0===d.$slideEl.length&&(d.$slideEl=t.slides.eq(t.activeIndex)),d.$imageEl=d.$slideEl.find(".".concat(r.containerClass)).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),d.$imageWrapEl=d.$imageEl.parent(".".concat(r.containerClass)),d.maxRatio=d.$imageWrapEl.attr("data-swiper-zoom")||r.maxRatio,0!==d.$imageWrapEl.length)?(d.$imageEl&&d.$imageEl.transition(0),c=!0):d.$imageEl=void 0}function g(e){var n=t.support,r=t.params.zoom,a=t.zoom;if(!n.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;l=!0,d.scaleMove=m(e)}d.$imageEl&&0!==d.$imageEl.length?(n.gestures?a.scale=e.scale*u:a.scale=d.scaleMove/d.scaleStart*u,a.scale>d.maxRatio&&(a.scale=d.maxRatio-1+Math.pow(a.scale-d.maxRatio+1,.5)),a.scale<r.minRatio&&(a.scale=r.minRatio+1-Math.pow(r.minRatio-a.scale+1,.5)),d.$imageEl.transform("translate3d(0,0,0) scale(".concat(a.scale,")"))):"gesturechange"===e.type&&v(e)}function y(e){var n=t.device,r=t.support,a=t.params.zoom,i=t.zoom;if(!r.gestures){if(!s||!l)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!n.android)return;s=!1,l=!1}d.$imageEl&&0!==d.$imageEl.length&&(i.scale=Math.max(Math.min(i.scale,d.maxRatio),a.minRatio),d.$imageEl.transition(t.params.speed).transform("translate3d(0,0,0) scale(".concat(i.scale,")")),u=i.scale,c=!1,1===i.scale&&(d.$slideEl=void 0))}function b(e){var n=t.zoom;if(d.$imageEl&&0!==d.$imageEl.length&&(t.allowClick=!1,h.isTouched&&d.$slideEl)){h.isMoved||(h.width=d.$imageEl[0].offsetWidth,h.height=d.$imageEl[0].offsetHeight,h.startX=Jbe(d.$imageWrapEl[0],"x")||0,h.startY=Jbe(d.$imageWrapEl[0],"y")||0,d.slideWidth=d.$slideEl[0].offsetWidth,d.slideHeight=d.$slideEl[0].offsetHeight,d.$imageWrapEl.transition(0));var r=h.width*n.scale,a=h.height*n.scale;if(!(r<d.slideWidth&&a<d.slideHeight)){if(h.minX=Math.min(d.slideWidth/2-r/2,0),h.maxX=-h.minX,h.minY=Math.min(d.slideHeight/2-a/2,0),h.maxY=-h.minY,h.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,h.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!h.isMoved&&!c){if(t.isHorizontal()&&(Math.floor(h.minX)===Math.floor(h.startX)&&h.touchesCurrent.x<h.touchesStart.x||Math.floor(h.maxX)===Math.floor(h.startX)&&h.touchesCurrent.x>h.touchesStart.x))return void(h.isTouched=!1);if(!t.isHorizontal()&&(Math.floor(h.minY)===Math.floor(h.startY)&&h.touchesCurrent.y<h.touchesStart.y||Math.floor(h.maxY)===Math.floor(h.startY)&&h.touchesCurrent.y>h.touchesStart.y))return void(h.isTouched=!1)}e.cancelable&&e.preventDefault(),e.stopPropagation(),h.isMoved=!0,h.currentX=h.touchesCurrent.x-h.touchesStart.x+h.startX,h.currentY=h.touchesCurrent.y-h.touchesStart.y+h.startY,h.currentX<h.minX&&(h.currentX=h.minX+1-Math.pow(h.minX-h.currentX+1,.8)),h.currentX>h.maxX&&(h.currentX=h.maxX-1+Math.pow(h.currentX-h.maxX+1,.8)),h.currentY<h.minY&&(h.currentY=h.minY+1-Math.pow(h.minY-h.currentY+1,.8)),h.currentY>h.maxY&&(h.currentY=h.maxY-1+Math.pow(h.currentY-h.maxY+1,.8)),f.prevPositionX||(f.prevPositionX=h.touchesCurrent.x),f.prevPositionY||(f.prevPositionY=h.touchesCurrent.y),f.prevTime||(f.prevTime=Date.now()),f.x=(h.touchesCurrent.x-f.prevPositionX)/(Date.now()-f.prevTime)/2,f.y=(h.touchesCurrent.y-f.prevPositionY)/(Date.now()-f.prevTime)/2,Math.abs(h.touchesCurrent.x-f.prevPositionX)<2&&(f.x=0),Math.abs(h.touchesCurrent.y-f.prevPositionY)<2&&(f.y=0),f.prevPositionX=h.touchesCurrent.x,f.prevPositionY=h.touchesCurrent.y,f.prevTime=Date.now(),d.$imageWrapEl.transform("translate3d(".concat(h.currentX,"px, ").concat(h.currentY,"px,0)"))}}}function x(){var e=t.zoom;d.$slideEl&&t.previousIndex!==t.activeIndex&&(d.$imageEl&&d.$imageEl.transform("translate3d(0,0,0) scale(1)"),d.$imageWrapEl&&d.$imageWrapEl.transform("translate3d(0,0,0)"),e.scale=1,u=1,d.$slideEl=void 0,d.$imageEl=void 0,d.$imageWrapEl=void 0)}function w(e){var n,r,a,o,s,l,c,f,p,m,v,g,y,b,x,w,k=t.zoom,S=t.params.zoom;(d.$slideEl||(e&&e.target&&(d.$slideEl=Ybe(e.target).closest(".".concat(t.params.slideClass))),d.$slideEl||(t.params.virtual&&t.params.virtual.enabled&&t.virtual?d.$slideEl=t.$wrapperEl.children(".".concat(t.params.slideActiveClass)):d.$slideEl=t.slides.eq(t.activeIndex)),d.$imageEl=d.$slideEl.find(".".concat(S.containerClass)).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),d.$imageWrapEl=d.$imageEl.parent(".".concat(S.containerClass))),d.$imageEl&&0!==d.$imageEl.length&&d.$imageWrapEl&&0!==d.$imageWrapEl.length)&&(t.params.cssMode&&(t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.touchAction="none"),d.$slideEl.addClass("".concat(S.zoomedSlideClass)),"undefined"===typeof h.touchesStart.x&&e?(n="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,r="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(n=h.touchesStart.x,r=h.touchesStart.y),k.scale=d.$imageWrapEl.attr("data-swiper-zoom")||S.maxRatio,u=d.$imageWrapEl.attr("data-swiper-zoom")||S.maxRatio,e?(x=d.$slideEl[0].offsetWidth,w=d.$slideEl[0].offsetHeight,a=d.$slideEl.offset().left+i.scrollX+x/2-n,o=d.$slideEl.offset().top+i.scrollY+w/2-r,c=d.$imageEl[0].offsetWidth,f=d.$imageEl[0].offsetHeight,p=c*k.scale,m=f*k.scale,y=-(v=Math.min(x/2-p/2,0)),b=-(g=Math.min(w/2-m/2,0)),(s=a*k.scale)<v&&(s=v),s>y&&(s=y),(l=o*k.scale)<g&&(l=g),l>b&&(l=b)):(s=0,l=0),d.$imageWrapEl.transition(300).transform("translate3d(".concat(s,"px, ").concat(l,"px,0)")),d.$imageEl.transition(300).transform("translate3d(0,0,0) scale(".concat(k.scale,")")))}function k(){var e=t.zoom,n=t.params.zoom;d.$slideEl||(t.params.virtual&&t.params.virtual.enabled&&t.virtual?d.$slideEl=t.$wrapperEl.children(".".concat(t.params.slideActiveClass)):d.$slideEl=t.slides.eq(t.activeIndex),d.$imageEl=d.$slideEl.find(".".concat(n.containerClass)).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),d.$imageWrapEl=d.$imageEl.parent(".".concat(n.containerClass))),d.$imageEl&&0!==d.$imageEl.length&&d.$imageWrapEl&&0!==d.$imageWrapEl.length&&(t.params.cssMode&&(t.wrapperEl.style.overflow="",t.wrapperEl.style.touchAction=""),e.scale=1,u=1,d.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),d.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),d.$slideEl.removeClass("".concat(n.zoomedSlideClass)),d.$slideEl=void 0)}function S(e){var n=t.zoom;n.scale&&1!==n.scale?k():w(e)}function T(){var e=t.support;return{passiveListener:!("touchstart"!==t.touchEvents.start||!e.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1},activeListenerWithCapture:!e.passiveListener||{passive:!1,capture:!0}}}function E(){return".".concat(t.params.slideClass)}function C(e){var n=T().passiveListener,r=E();t.$wrapperEl[e]("gesturestart",r,v,n),t.$wrapperEl[e]("gesturechange",r,g,n),t.$wrapperEl[e]("gestureend",r,y,n)}function _(){o||(o=!0,C("on"))}function M(){o&&(o=!1,C("off"))}function A(){var e=t.zoom;if(!e.enabled){e.enabled=!0;var n=t.support,r=T(),a=r.passiveListener,i=r.activeListenerWithCapture,o=E();n.gestures?(t.$wrapperEl.on(t.touchEvents.start,_,a),t.$wrapperEl.on(t.touchEvents.end,M,a)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.on(t.touchEvents.start,o,v,a),t.$wrapperEl.on(t.touchEvents.move,o,g,i),t.$wrapperEl.on(t.touchEvents.end,o,y,a),t.touchEvents.cancel&&t.$wrapperEl.on(t.touchEvents.cancel,o,y,a)),t.$wrapperEl.on(t.touchEvents.move,".".concat(t.params.zoom.containerClass),b,i)}}function I(){var e=t.zoom;if(e.enabled){var n=t.support;e.enabled=!1;var r=T(),a=r.passiveListener,i=r.activeListenerWithCapture,o=E();n.gestures?(t.$wrapperEl.off(t.touchEvents.start,_,a),t.$wrapperEl.off(t.touchEvents.end,M,a)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.off(t.touchEvents.start,o,v,a),t.$wrapperEl.off(t.touchEvents.move,o,g,i),t.$wrapperEl.off(t.touchEvents.end,o,y,a),t.touchEvents.cancel&&t.$wrapperEl.off(t.touchEvents.cancel,o,y,a)),t.$wrapperEl.off(t.touchEvents.move,".".concat(t.params.zoom.containerClass),b,i)}}Object.defineProperty(t.zoom,"scale",{get:function(){return p},set:function(e){if(p!==e){var t=d.$imageEl?d.$imageEl[0]:void 0,n=d.$slideEl?d.$slideEl[0]:void 0;a("zoomChange",e,t,n)}p=e}}),r("init",(function(){t.params.zoom.enabled&&A()})),r("destroy",(function(){I()})),r("touchStart",(function(e,n){t.zoom.enabled&&function(e){var n=t.device;d.$imageEl&&0!==d.$imageEl.length&&(h.isTouched||(n.android&&e.cancelable&&e.preventDefault(),h.isTouched=!0,h.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,h.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))}(n)})),r("touchEnd",(function(e,n){t.zoom.enabled&&function(){var e=t.zoom;if(d.$imageEl&&0!==d.$imageEl.length){if(!h.isTouched||!h.isMoved)return h.isTouched=!1,void(h.isMoved=!1);h.isTouched=!1,h.isMoved=!1;var n=300,r=300,a=f.x*n,i=h.currentX+a,o=f.y*r,s=h.currentY+o;0!==f.x&&(n=Math.abs((i-h.currentX)/f.x)),0!==f.y&&(r=Math.abs((s-h.currentY)/f.y));var l=Math.max(n,r);h.currentX=i,h.currentY=s;var u=h.width*e.scale,c=h.height*e.scale;h.minX=Math.min(d.slideWidth/2-u/2,0),h.maxX=-h.minX,h.minY=Math.min(d.slideHeight/2-c/2,0),h.maxY=-h.minY,h.currentX=Math.max(Math.min(h.currentX,h.maxX),h.minX),h.currentY=Math.max(Math.min(h.currentY,h.maxY),h.minY),d.$imageWrapEl.transition(l).transform("translate3d(".concat(h.currentX,"px, ").concat(h.currentY,"px,0)"))}}()})),r("doubleTap",(function(e,n){!t.animating&&t.params.zoom.enabled&&t.zoom.enabled&&t.params.zoom.toggle&&S(n)})),r("transitionEnd",(function(){t.zoom.enabled&&t.params.zoom.enabled&&x()})),r("slideChange",(function(){t.zoom.enabled&&t.params.zoom.enabled&&t.params.cssMode&&x()})),Object.assign(t.zoom,{enable:A,disable:I,in:w,out:k,toggle:S})}function Bxe(e){var t=e.swiper,n=e.extendParams,r=e.on;n({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}});var a=null;function i(e){var t=a;0!==t.length&&(t.html(""),t.html(e))}function o(e){e.attr("tabIndex","0")}function s(e){e.attr("tabIndex","-1")}function l(e,t){e.attr("role",t)}function u(e,t){e.attr("aria-roledescription",t)}function c(e,t){e.attr("aria-label",t)}function d(e){e.attr("aria-disabled",!0)}function h(e){e.attr("aria-disabled",!1)}function f(e){if(13===e.keyCode||32===e.keyCode){var n=t.params.a11y,r=Ybe(e.target);t.navigation&&t.navigation.$nextEl&&r.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?i(n.lastSlideMessage):i(n.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&r.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?i(n.firstSlideMessage):i(n.prevSlideMessage)),t.pagination&&r.is(Pxe(t.params.pagination.bulletClass))&&r[0].click()}}function p(){return t.pagination&&t.pagination.bullets&&t.pagination.bullets.length}function m(){return p()&&t.params.pagination.clickable}var v=function(e,t,n){o(e),"BUTTON"!==e[0].tagName&&(l(e,"button"),e.on("keydown",f)),c(e,n),function(e,t){e.attr("aria-controls",t)}(e,t)},g=function(e){var n=e.target.closest(".".concat(t.params.slideClass));if(n&&t.slides.includes(n)){var r=t.slides.indexOf(n)===t.activeIndex,a=t.params.watchSlidesProgress&&t.visibleSlides&&t.visibleSlides.includes(n);r||a||t.slideTo(t.slides.indexOf(n),0)}};function y(){var e=t.params.a11y;t.$el.append(a);var n=t.$el;e.containerRoleDescriptionMessage&&u(n,e.containerRoleDescriptionMessage),e.containerMessage&&c(n,e.containerMessage);var r,i=t.$wrapperEl,o=e.id||i.attr("id")||"swiper-wrapper-".concat((void 0===(r=16)&&(r=16),"x".repeat(r).replace(/x/g,(function(){return Math.round(16*Math.random()).toString(16)})))),s=t.params.autoplay&&t.params.autoplay.enabled?"off":"polite";!function(e,t){e.attr("id",t)}(i,o),function(e,t){e.attr("aria-live",t)}(i,s),e.itemRoleDescriptionMessage&&u(Ybe(t.slides),e.itemRoleDescriptionMessage),l(Ybe(t.slides),e.slideRole);var d,h,p=t.params.loop?t.slides.filter((function(e){return!e.classList.contains(t.params.slideDuplicateClass)})).length:t.slides.length;t.slides.each((function(n,r){var a=Ybe(n),i=t.params.loop?parseInt(a.attr("data-swiper-slide-index"),10):r;c(a,e.slideLabelMessage.replace(/\{\{index\}\}/,i+1).replace(/\{\{slidesLength\}\}/,p))})),t.navigation&&t.navigation.$nextEl&&(d=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(h=t.navigation.$prevEl),d&&d.length&&v(d,o,e.nextSlideMessage),h&&h.length&&v(h,o,e.prevSlideMessage),m()&&t.pagination.$el.on("keydown",Pxe(t.params.pagination.bulletClass),f),t.$el.on("focus",g,!0)}r("beforeInit",(function(){a=Ybe('<span class="'.concat(t.params.a11y.notificationClass,'" aria-live="assertive" aria-atomic="true"></span>'))})),r("afterInit",(function(){t.params.a11y.enabled&&y()})),r("fromEdge toEdge afterInit lock unlock",(function(){t.params.a11y.enabled&&function(){if(!t.params.loop&&!t.params.rewind&&t.navigation){var e=t.navigation,n=e.$nextEl,r=e.$prevEl;r&&r.length>0&&(t.isBeginning?(d(r),s(r)):(h(r),o(r))),n&&n.length>0&&(t.isEnd?(d(n),s(n)):(h(n),o(n)))}}()})),r("paginationUpdate",(function(){t.params.a11y.enabled&&function(){var e=t.params.a11y;p()&&t.pagination.bullets.each((function(n){var r=Ybe(n);t.params.pagination.clickable&&(o(r),t.params.pagination.renderBullet||(l(r,"button"),c(r,e.paginationBulletMessage.replace(/\{\{index\}\}/,r.index()+1)))),r.is(".".concat(t.params.pagination.bulletActiveClass))?r.attr("aria-current","true"):r.removeAttr("aria-current")}))}()})),r("destroy",(function(){t.params.a11y.enabled&&function(){var e,n;a&&a.length>0&&a.remove(),t.navigation&&t.navigation.$nextEl&&(e=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(n=t.navigation.$prevEl),e&&e.off("keydown",f),n&&n.off("keydown",f),m()&&t.pagination.$el.off("keydown",Pxe(t.params.pagination.bulletClass),f),t.$el.off("focus",g,!0)}()}))}function Uxe(e){var t=e.swiper,n=e.extendParams,r=e.on;n({creativeEffect:{transformEl:null,limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});!function(e){var t,n=e.effect,r=e.swiper,a=e.on,i=e.setTranslate,o=e.setTransition,s=e.overwriteParams,l=e.perspective,u=e.recreateShadows,c=e.getEffectParams;a("beforeInit",(function(){if(r.params.effect===n){r.classNames.push("".concat(r.params.containerModifierClass).concat(n)),l&&l()&&r.classNames.push("".concat(r.params.containerModifierClass,"3d"));var e=s?s():{};Object.assign(r.params,e),Object.assign(r.originalParams,e)}})),a("setTranslate",(function(){r.params.effect===n&&i()})),a("setTransition",(function(e,t){r.params.effect===n&&o(t)})),a("transitionEnd",(function(){if(r.params.effect===n&&u){if(!c||!c().slideShadows)return;r.slides.each((function(e){r.$(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").remove()})),u()}})),a("virtualUpdate",(function(){r.params.effect===n&&(r.slides.length||(t=!0),requestAnimationFrame((function(){t&&r.slides&&r.slides.length&&(i(),t=!1)})))}))}({effect:"creative",swiper:t,on:r,setTranslate:function(){var e=t.slides,n=t.$wrapperEl,r=t.slidesSizesGrid,a=t.params.creativeEffect,i=a.progressMultiplier,o=t.params.centeredSlides;if(o){var s=r[0]/2-t.params.slidesOffsetBefore||0;n.transform("translateX(calc(50% - ".concat(s,"px))"))}for(var l=function(){var n=e.eq(u),r=n[0].progress,s=Math.min(Math.max(n[0].progress,-a.limitProgress),a.limitProgress),l=s;o||(l=Math.min(Math.max(n[0].originalProgress,-a.limitProgress),a.limitProgress));var c=n[0].swiperSlideOffset,d=[t.params.cssMode?-c-t.translate:-c,0,0],h=[0,0,0],f=!1;t.isHorizontal()||(d[1]=d[0],d[0]=0);var p={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};s<0?(p=a.next,f=!0):s>0&&(p=a.prev,f=!0),d.forEach((function(e,t){d[t]="calc(".concat(e,"px + (").concat(function(e){return"string"===typeof e?e:"".concat(e,"px")}(p.translate[t])," * ").concat(Math.abs(s*i),"))")})),h.forEach((function(e,t){h[t]=p.rotate[t]*Math.abs(s*i)})),n[0].style.zIndex=-Math.abs(Math.round(r))+e.length;var m=d.join(", "),v="rotateX(".concat(h[0],"deg) rotateY(").concat(h[1],"deg) rotateZ(").concat(h[2],"deg)"),g="scale(".concat(l<0?1+(1-p.scale)*l*i:1-(1-p.scale)*l*i,")"),y=l<0?1+(1-p.opacity)*l*i:1-(1-p.opacity)*l*i,b="translate3d(".concat(m,") ").concat(v," ").concat(g);if(f&&p.shadow||!f){var x=n.children(".swiper-slide-shadow");if(0===x.length&&p.shadow&&(x=function(e,t,n){var r="swiper-slide-shadow".concat(n?"-".concat(n):""),a=e.transformEl?t.find(e.transformEl):t,i=a.children(".".concat(r));return i.length||(i=Ybe('<div class="swiper-slide-shadow'.concat(n?"-".concat(n):"",'"></div>')),a.append(i)),i}(a,n)),x.length){var w=a.shadowPerProgress?s*(1/a.limitProgress):s;x[0].style.opacity=Math.min(Math.max(Math.abs(w),0),1)}}var k=function(e,t){return e.transformEl?t.find(e.transformEl).css({"backface-visibility":"hidden","-webkit-backface-visibility":"hidden"}):t}(a,n);k.transform(b).css({opacity:y}),p.origin&&k.css("transform-origin",p.origin)},u=0;u<e.length;u+=1)l()},setTransition:function(e){var n=t.params.creativeEffect.transformEl;(n?t.slides.find(n):t.slides).transition(e).find(".swiper-slide-shadow").transition(e),function(e){var t=e.swiper,n=e.duration,r=e.transformEl,a=e.allSlides,i=t.slides,o=t.activeIndex,s=t.$wrapperEl;if(t.params.virtualTranslate&&0!==n){var l=!1;(a?r?i.find(r):i:r?i.eq(o).find(r):i.eq(o)).transitionEnd((function(){if(!l&&t&&!t.destroyed){l=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],n=0;n<e.length;n+=1)s.trigger(e[n])}}))}}({swiper:t,duration:e,transformEl:n,allSlides:!0})},perspective:function(){return t.params.creativeEffect.perspective},overwriteParams:function(){return{watchSlidesProgress:!0,virtualTranslate:!t.params.cssMode}}})}function Wxe(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Vxe(e,t){var n=["__proto__","constructor","prototype"];Object.keys(t).filter((function(e){return n.indexOf(e)<0})).forEach((function(n){"undefined"===typeof e[n]?e[n]=t[n]:Wxe(t[n])&&Wxe(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:Vxe(e[n],t[n]):e[n]=t[n]}))}function Zxe(e){return void 0===e&&(e={}),e.navigation&&"undefined"===typeof e.navigation.nextEl&&"undefined"===typeof e.navigation.prevEl}function Hxe(e){return void 0===e&&(e={}),e.pagination&&"undefined"===typeof e.pagination.el}function Gxe(e){return void 0===e&&(e={}),e.scrollbar&&"undefined"===typeof e.scrollbar.el}function qxe(e){void 0===e&&(e="");var t=e.split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})),n=[];return t.forEach((function(e){n.indexOf(e)<0&&n.push(e)})),n.join(" ")}var Xxe=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function Yxe(e,t){var n=t.slidesPerView;if(t.breakpoints){var r=Rxe.prototype.getBreakpoint(t.breakpoints),a=r in t.breakpoints?t.breakpoints[r]:void 0;a&&a.slidesPerView&&(n=a.slidesPerView)}var i=Math.ceil(parseFloat(t.loopedSlides||n,10));return(i+=t.loopAdditionalSlides)>e.length&&(i=e.length),i}function Kxe(e){var t=[];return T.Children.toArray(e).forEach((function(e){e.type&&"SwiperSlide"===e.type.displayName?t.push(e):e.props&&e.props.children&&Kxe(e.props.children).forEach((function(e){return t.push(e)}))})),t}function $xe(e){var t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return T.Children.toArray(e).forEach((function(e){if(e.type&&"SwiperSlide"===e.type.displayName)t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){var r=Kxe(e.props.children);r.length>0?r.forEach((function(e){return t.push(e)})):n["container-end"].push(e)}else n["container-end"].push(e)})),{slides:t,slots:n}}function Jxe(e){var t,n,r,a,i,o=e.swiper,s=e.slides,l=e.passedParams,u=e.changedParams,c=e.nextEl,d=e.prevEl,h=e.scrollbarEl,f=e.paginationEl,p=u.filter((function(e){return"children"!==e&&"direction"!==e})),m=o.params,v=o.pagination,g=o.navigation,y=o.scrollbar,b=o.virtual,x=o.thumbs;u.includes("thumbs")&&l.thumbs&&l.thumbs.swiper&&m.thumbs&&!m.thumbs.swiper&&(t=!0),u.includes("controller")&&l.controller&&l.controller.control&&m.controller&&!m.controller.control&&(n=!0),u.includes("pagination")&&l.pagination&&(l.pagination.el||f)&&(m.pagination||!1===m.pagination)&&v&&!v.el&&(r=!0),u.includes("scrollbar")&&l.scrollbar&&(l.scrollbar.el||h)&&(m.scrollbar||!1===m.scrollbar)&&y&&!y.el&&(a=!0),u.includes("navigation")&&l.navigation&&(l.navigation.prevEl||d)&&(l.navigation.nextEl||c)&&(m.navigation||!1===m.navigation)&&g&&!g.prevEl&&!g.nextEl&&(i=!0);(p.forEach((function(e){if(Wxe(m[e])&&Wxe(l[e]))Vxe(m[e],l[e]);else{var t=l[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?m[e]=l[e]:!1===t&&function(e){o[e]&&(o[e].destroy(),"navigation"===e?(m[e].prevEl=void 0,m[e].nextEl=void 0,o[e].prevEl=void 0,o[e].nextEl=void 0):(m[e].el=void 0,o[e].el=void 0))}(e)}})),p.includes("controller")&&!n&&o.controller&&o.controller.control&&m.controller&&m.controller.control&&(o.controller.control=m.controller.control),u.includes("children")&&b&&m.virtual.enabled?(b.slides=s,b.update(!0)):u.includes("children")&&o.lazy&&o.params.lazy.enabled&&o.lazy.load(),t)&&(x.init()&&x.update(!0));n&&(o.controller.control=m.controller.control),r&&(f&&(m.pagination.el=f),v.init(),v.render(),v.update()),a&&(h&&(m.scrollbar.el=h),y.init(),y.updateSize(),y.setTranslate()),i&&(c&&(m.navigation.nextEl=c),d&&(m.navigation.prevEl=d),g.init(),g.update()),u.includes("allowSlideNext")&&(o.allowSlideNext=l.allowSlideNext),u.includes("allowSlidePrev")&&(o.allowSlidePrev=l.allowSlidePrev),u.includes("direction")&&o.changeDirection(l.direction,!1),o.update()}function Qxe(e,t){return"undefined"===typeof window?(0,T.useEffect)(e,t):(0,T.useLayoutEffect)(e,t)}var ewe=(0,T.createContext)(null),twe=(0,T.createContext)(null),nwe=["className","tag","wrapperTag","children","onSwiper"];function rwe(){return rwe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rwe.apply(this,arguments)}var awe=(0,T.forwardRef)((function(e,t){var n=void 0===e?{}:e,r=n.className,a=n.tag,i=void 0===a?"div":a,o=n.wrapperTag,s=void 0===o?"div":o,l=n.children,u=n.onSwiper,c=(0,Wi.Z)(n,nwe),d=!1,h=(0,T.useState)("swiper"),f=(0,U.Z)(h,2),p=f[0],m=f[1],v=(0,T.useState)(null),g=(0,U.Z)(v,2),y=g[0],b=g[1],x=(0,T.useState)(!1),w=(0,U.Z)(x,2),k=w[0],S=w[1],E=(0,T.useRef)(!1),C=(0,T.useRef)(null),M=(0,T.useRef)(null),A=(0,T.useRef)(null),I=(0,T.useRef)(null),N=(0,T.useRef)(null),R=(0,T.useRef)(null),O=(0,T.useRef)(null),D=(0,T.useRef)(null),L=function(e){void 0===e&&(e={});var t={on:{}},n={},r={};Vxe(t,Rxe.defaults),Vxe(t,Rxe.extendedDefaults),t._emitClasses=!0,t.init=!1;var a={},i=Xxe.map((function(e){return e.replace(/_/,"")}));return Object.keys(e).forEach((function(o){i.indexOf(o)>=0?Wxe(e[o])?(t[o]={},r[o]={},Vxe(t[o],e[o]),Vxe(r[o],e[o])):(t[o]=e[o],r[o]=e[o]):0===o.search(/on[A-Z]/)&&"function"===typeof e[o]?n["".concat(o[2].toLowerCase()).concat(o.substr(3))]=e[o]:a[o]=e[o]})),["navigation","pagination","scrollbar"].forEach((function(e){!0===t[e]&&(t[e]={}),!1===t[e]&&delete t[e]})),{params:t,passedParams:r,rest:a,events:n}}(c),P=L.params,F=L.passedParams,j=L.rest,z=L.events,B=$xe(l),W=B.slides,V=B.slots,Z=function(){S(!k)};Object.assign(P.on,{_containerClasses:function(e,t){m(t)}});var H=function(){if(Object.assign(P.on,z),d=!0,M.current=new Rxe(P),M.current.loopCreate=function(){},M.current.loopDestroy=function(){},P.loop&&(M.current.loopedSlides=Yxe(W,P)),M.current.virtual&&M.current.params.virtual.enabled){M.current.virtual.slides=W;var e={cache:!1,slides:W,renderExternal:b,renderExternalUpdate:!1};Vxe(M.current.params.virtual,e),Vxe(M.current.originalParams.virtual,e)}};C.current||H(),M.current&&M.current.on("_beforeBreakpoint",Z);return(0,T.useEffect)((function(){return function(){M.current&&M.current.off("_beforeBreakpoint",Z)}})),(0,T.useEffect)((function(){!E.current&&M.current&&(M.current.emitSlidesClasses(),E.current=!0)})),Qxe((function(){if(t&&(t.current=C.current),C.current)return M.current.destroyed&&H(),function(e,t){var n=e.el,r=e.nextEl,a=e.prevEl,i=e.paginationEl,o=e.scrollbarEl,s=e.swiper;Zxe(t)&&r&&a&&(s.params.navigation.nextEl=r,s.originalParams.navigation.nextEl=r,s.params.navigation.prevEl=a,s.originalParams.navigation.prevEl=a),Hxe(t)&&i&&(s.params.pagination.el=i,s.originalParams.pagination.el=i),Gxe(t)&&o&&(s.params.scrollbar.el=o,s.originalParams.scrollbar.el=o),s.init(n)}({el:C.current,nextEl:N.current,prevEl:R.current,paginationEl:O.current,scrollbarEl:D.current,swiper:M.current},P),u&&u(M.current),function(){M.current&&!M.current.destroyed&&M.current.destroy(!0,!1)}}),[]),Qxe((function(){!d&&z&&M.current&&Object.keys(z).forEach((function(e){M.current.on(e,z[e])}));var e=function(e,t,n,r){var a=[];if(!t)return a;var i=function(e){a.indexOf(e)<0&&a.push(e)},o=r.map((function(e){return e.key})),s=n.map((function(e){return e.key}));return o.join("")!==s.join("")&&i("children"),r.length!==n.length&&i("children"),Xxe.filter((function(e){return"_"===e[0]})).map((function(e){return e.replace(/_/,"")})).forEach((function(n){if(n in e&&n in t)if(Wxe(e[n])&&Wxe(t[n])){var r=Object.keys(e[n]),a=Object.keys(t[n]);r.length!==a.length?i(n):(r.forEach((function(r){e[n][r]!==t[n][r]&&i(n)})),a.forEach((function(r){e[n][r]!==t[n][r]&&i(n)})))}else e[n]!==t[n]&&i(n)})),a}(F,A.current,W,I.current);return A.current=F,I.current=W,e.length&&M.current&&!M.current.destroyed&&Jxe({swiper:M.current,slides:W,passedParams:F,changedParams:e,nextEl:N.current,prevEl:R.current,scrollbarEl:D.current,paginationEl:O.current}),function(){z&&M.current&&Object.keys(z).forEach((function(e){M.current.off(e,z[e])}))}})),Qxe((function(){var e;!(e=M.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[y]),T.createElement(i,rwe({ref:C,className:qxe("".concat(p).concat(r?" ".concat(r):""))},j),T.createElement(twe.Provider,{value:M.current},V["container-start"],Zxe(P)&&T.createElement(T.Fragment,null,T.createElement("div",{ref:R,className:"swiper-button-prev"}),T.createElement("div",{ref:N,className:"swiper-button-next"})),Gxe(P)&&T.createElement("div",{ref:D,className:"swiper-scrollbar"}),Hxe(P)&&T.createElement("div",{ref:O,className:"swiper-pagination"}),T.createElement(s,{className:"swiper-wrapper"},V["wrapper-start"],P.virtual?function(e,t,n){if(!n)return null;var r=e.isHorizontal()?(0,_t.Z)({},e.rtlTranslate?"right":"left","".concat(n.offset,"px")):{top:"".concat(n.offset,"px")};return t.filter((function(e,t){return t>=n.from&&t<=n.to})).map((function(t){return T.cloneElement(t,{swiper:e,style:r})}))}(M.current,W,y):!P.loop||M.current&&M.current.destroyed?W.map((function(e){return T.cloneElement(e,{swiper:M.current})})):function(e,t,n){var r=t.map((function(t,n){return T.cloneElement(t,{swiper:e,"data-swiper-slide-index":n})}));function a(e,t,r){return T.cloneElement(e,{key:"".concat(e.key,"-duplicate-").concat(t,"-").concat(r),className:"".concat(e.props.className||""," ").concat(n.slideDuplicateClass)})}if(n.loopFillGroupWithBlank){var i=n.slidesPerGroup-r.length%n.slidesPerGroup;if(i!==n.slidesPerGroup)for(var o=0;o<i;o+=1){var s=T.createElement("div",{className:"".concat(n.slideClass," ").concat(n.slideBlankClass)});r.push(s)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=r.length);var l=Yxe(r,n),u=[],c=[];return r.forEach((function(e,t){t<l&&c.push(a(e,t,"prepend")),t<r.length&&t>=r.length-l&&u.push(a(e,t,"append"))})),e&&(e.loopedSlides=l),[].concat(u,(0,_.Z)(r),c)}(M.current,W,P),V["wrapper-end"]),V["container-end"]))}));awe.displayName="Swiper";var iwe=["tag","children","className","swiper","zoom","virtualIndex"];function owe(){return owe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},owe.apply(this,arguments)}var swe=(0,T.forwardRef)((function(e,t){var n=void 0===e?{}:e,r=n.tag,a=void 0===r?"div":r,i=n.children,o=n.className,s=void 0===o?"":o,l=n.swiper,u=n.zoom,c=n.virtualIndex,d=(0,Wi.Z)(n,iwe),h=(0,T.useRef)(null),f=(0,T.useState)("swiper-slide"),p=(0,U.Z)(f,2),m=p[0],v=p[1];function g(e,t,n){t===h.current&&v(n)}Qxe((function(){if(t&&(t.current=h.current),h.current&&l){if(!l.destroyed)return l.on("_slideClass",g),function(){l&&l.off("_slideClass",g)};"swiper-slide"!==m&&v("swiper-slide")}})),Qxe((function(){l&&h.current&&!l.destroyed&&v(l.getSlideClasses(h.current))}),[l]);var y={isActive:m.indexOf("swiper-slide-active")>=0||m.indexOf("swiper-slide-duplicate-active")>=0,isVisible:m.indexOf("swiper-slide-visible")>=0,isDuplicate:m.indexOf("swiper-slide-duplicate")>=0,isPrev:m.indexOf("swiper-slide-prev")>=0||m.indexOf("swiper-slide-duplicate-prev")>=0,isNext:m.indexOf("swiper-slide-next")>=0||m.indexOf("swiper-slide-duplicate-next")>=0},b=function(){return"function"===typeof i?i(y):i};return T.createElement(a,owe({ref:h,className:qxe("".concat(m).concat(s?" ".concat(s):"")),"data-swiper-slide-index":c},d),T.createElement(ewe.Provider,{value:y},u?T.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"===typeof u?u:void 0},b()):b()))}));swe.displayName="SwiperSlide";var lwe=function(e){var t=e.selectTypePost;return(0,dr.jsxs)(Es,{container:!0,style:{height:"calc(100vh - 250px)",overflowY:"auto"},children:[(0,dr.jsx)(Es,{item:!0,xs:12,md:4,style:{padding:10},children:(0,dr.jsxs)("div",{className:"postExampleContainer",id:"only-text",onClick:function(){t("only-text")},children:[(0,dr.jsx)("div",{className:"titleExample"}),(0,dr.jsx)("br",{}),(0,dr.jsx)("div",{className:"textExample"}),(0,dr.jsx)("div",{className:"textExample"}),(0,dr.jsx)("div",{className:"textExample"}),(0,dr.jsx)("div",{className:"textExample"}),(0,dr.jsx)("div",{className:"textExample"}),(0,dr.jsx)("div",{className:"textExample"}),(0,dr.jsx)("p",{className:"textExampleContainer",children:"Solo Texto"})]})}),(0,dr.jsx)(Es,{item:!0,xs:12,md:4,style:{padding:10},children:(0,dr.jsxs)("div",{className:"postExampleContainer",id:"text-photo",onClick:function(){t("text-photo")},children:[(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,sm:6,style:{paddingRight:5},children:(0,dr.jsx)("img",{src:"../assets/no-image-icon-6.png",alt:"no-video",width:"100%",height:"100%"})}),(0,dr.jsxs)(Es,{item:!0,sm:6,style:{paddingLeft:5},children:[(0,dr.jsx)("div",{className:"titleExample"}),(0,dr.jsx)("br",{}),(0,dr.jsx)("div",{className:"textExample"}),(0,dr.jsx)("div",{className:"textExample"}),(0,dr.jsx)("div",{className:"textExample"}),(0,dr.jsx)("div",{className:"textExample"}),(0,dr.jsx)("div",{className:"textExample"})]})]}),(0,dr.jsx)("p",{className:"textExampleContainer",children:"Im\xe1gen y Texto"})]})}),(0,dr.jsx)(Es,{item:!0,xs:12,md:4,style:{padding:10},children:(0,dr.jsxs)("div",{className:"postExampleContainer",id:"title-video",onClick:function(){t("title-video")},children:[(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,sm:6,style:{paddingRight:5},children:(0,dr.jsx)("img",{src:"../assets/no-video.png",alt:"no-video",width:"100%",height:"100%"})}),(0,dr.jsxs)(Es,{item:!0,sm:6,style:{paddingLeft:5},children:[(0,dr.jsx)("div",{className:"titleExample"}),(0,dr.jsx)("br",{}),(0,dr.jsx)("div",{className:"textExample"}),(0,dr.jsx)("div",{className:"textExample"}),(0,dr.jsx)("div",{className:"textExample"}),(0,dr.jsx)("div",{className:"textExample"}),(0,dr.jsx)("div",{className:"textExample"})]})]}),(0,dr.jsx)("p",{className:"textExampleContainer",children:"Video y Texto"})]})})]})},uwe=function(e){var t=e.typePost,n=(0,T.useState)(),r=(0,U.Z)(n,2),a=r[0],i=r[1],o=(0,T.useState)(),s=(0,U.Z)(o,2),l=s[0],u=s[1],c=function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dn(t.target.files[0]);case 2:n=e.sent,i(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new FileReader).readAsDataURL(t.target.files[0]),n.onload=function(){u(n.result)},n.onerror=function(e){console.log("Error: ",e)};case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,dr.jsx)("div",{children:"only-text"===t?(0,dr.jsx)(Es,{container:!0,children:(0,dr.jsxs)(Es,{item:!0,xs:12,children:[(0,dr.jsx)(Us,{placeholder:"Ingrese t\xedtulo",style:{width:"60%"}}),(0,dr.jsx)("br",{}),(0,dr.jsx)(Ds,{style:{width:"100%",height:400,marginTop:20,padding:10}})]})}):"text-photo"===t?(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsxs)(Es,{item:!0,xs:6,children:[(0,dr.jsx)($l,{onClick:function(){console.log("imageSelector");var e=document.getElementById("imageSelector");null===e||void 0===e||e.click(),console.log(e)},children:"Seleccione Im\xe1gen"}),(0,dr.jsx)("input",{type:"file",id:"imageSelector",accept:"image/jpeg, image/png",style:{display:"none"},onChange:c}),(0,dr.jsx)("div",{className:"mediaContainer",children:a?(0,dr.jsx)("img",{src:a,alt:"image-post",className:"imagePost",height:"100%"}):(0,dr.jsx)("p",{children:"Se mostrar\xe1 la im\xe1gen al seleccionar"})})]}),(0,dr.jsxs)(Es,{item:!0,xs:6,children:[(0,dr.jsx)(Us,{placeholder:"Ingrese t\xedtulo",style:{width:"60%"}}),(0,dr.jsx)("br",{}),(0,dr.jsx)(Ds,{style:{width:"100%",height:400,marginTop:20,padding:10,fontSize:18}})]})]}):(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsxs)(Es,{item:!0,xs:6,children:[(0,dr.jsx)($l,{onClick:function(){var e=document.getElementById("videoSelector");e&&e.click()},children:"Seleccione Video"}),(0,dr.jsx)("input",{type:"file",id:"videoSelector",accept:"video/mp4,video/x-m4v,video/*",style:{display:"none"},onChange:d}),(0,dr.jsx)("div",{className:"mediaContainer",children:l?(0,dr.jsx)("video",{controls:!0,src:l,alt:"video-post",className:"videoPost",height:"100%"}):(0,dr.jsx)("p",{children:"Se mostrar\xe1 el video al seleccionar"})})]}),(0,dr.jsxs)(Es,{item:!0,xs:6,children:[(0,dr.jsx)(Us,{placeholder:"Ingrese t\xedtulo",style:{width:"60%"}}),(0,dr.jsx)("br",{}),(0,dr.jsx)(Ds,{style:{width:"100%",height:400,marginTop:20,padding:10,fontSize:18}})]})]})})},cwe=function(){var e=Ue(),t=(0,T.useState)(""),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=(0,T.useState)(0),o=(0,U.Z)(i,2),s=o[0],l=o[1];(0,T.useEffect)((function(){console.log(r)}),[r]);var u=function(){var e=document.getElementById("wallEditor");e&&(e.swiper.slideNext(),l(1))};return(0,dr.jsx)(qc,{height:"100%",children:(0,dr.jsx)(Es,{className:"pageRoot",container:!0,spacing:0,children:(0,dr.jsx)(Es,{item:!0,xs:12,children:(0,dr.jsxs)(qoe,{elevation:0,className:"pageCard",children:[(0,dr.jsx)(Es,{style:{flexShrink:0},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,dr.jsxs)(mK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,dr.jsx)(cs,{onClick:function(){return setTimeout((function(){e(-1)}),500)},children:(0,dr.jsx)(Xoe,{style:{color:"#333",fontSize:16}})}),(0,dr.jsx)("p",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Administraci\xf3n Mural"})]})})})}),(0,dr.jsxs)(Es,{container:!0,spacing:1,style:{padding:"5px 10px 0px 10px"},children:[(0,dr.jsxs)(awe,{id:"wallEditor",spaceBetween:50,slidesPerView:1,className:"mySwiper",pagination:{clickable:!0},allowTouchMove:!1,children:[(0,dr.jsx)(swe,{children:(0,dr.jsx)(lwe,{selectTypePost:function(e){["only-text","text-photo","title-video"].forEach((function(e){var t=document.getElementById(e);t&&(t.className="postExampleContainer")})),a(e);var t=document.getElementById(e);t&&(t.className="postExampleContainerSelected")}})}),(0,dr.jsx)(swe,{children:(0,dr.jsx)(uwe,{typePost:r})})]}),(0,dr.jsx)(Es,{item:!0,xs:12,children:(0,dr.jsxs)("div",{style:{textAlign:"right"},children:[0===s&&(0,dr.jsx)("button",{className:"buttonNextWall",onClick:function(){r.length>0?u():alert("Debe seleccionar una opci\xf3n")},children:"Siguiente"}),1===s&&(0,dr.jsx)("button",{className:"buttonNextWall",onClick:function(){var e=document.getElementById("wallEditor");e&&(e.swiper.slidePrev(),l(0))},children:"Atr\xe1s"}),1===s&&(0,dr.jsx)("button",{className:"buttonNextWall sendButton",onClick:function(){alert("Env\xedo de noticias en proceso de desarrollo.")},children:"Enviar"})]})})]})]})})})})},dwe=function(e){var t=e.height,n=e.hableButton,r=gke().users,a=(0,T.useState)([]),i=(0,U.Z)(a,2),o=i[0],s=i[1],l=(0,T.useState)([]),u=(0,U.Z)(l,2),c=u[0],d=(u[1],(0,T.useState)(!1)),h=(0,U.Z)(d,2),f=h[0],p=h[1],m=(0,T.useState)({}),v=(0,U.Z)(m,2),g=v[0],y=v[1],b=(0,T.useState)(0),x=(0,U.Z)(b,2),w=x[0],k=x[1],S=(0,T.useState)(!1),E=(0,U.Z)(S,2),C=E[0],_=E[1],M=(0,T.useState)([]),A=(0,U.Z)(M,2),I=A[0],N=A[1],R=(0,T.useState)([]),O=(0,U.Z)(R,2),D=O[0],L=O[1],P=function(e){nn(e).then((function(e){}))};(0,T.useEffect)((function(){}),[]),(0,T.useEffect)((function(){console.log(o)}),[o]);var F={height:70,borderRadius:10,boxShadow:"4px 4px 12px rgba(0, 0, 0, 0.08)",fontSize:14};return(0,dr.jsx)("div",{style:{height:t},children:(0,dr.jsxs)("div",{style:{height:t},children:[(0,dr.jsxs)(Es,{container:!0,spacing:5,children:[(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:8,lg:8,children:(0,dr.jsx)(mK,{style:{width:"100%"},children:(0,dr.jsx)("h1",{children:"Administrar usuarios"})})}),(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:4,lg:4,children:(0,dr.jsx)("div",{style:{width:"100%",textAlign:"right"},children:(0,dr.jsx)(mt,{to:"/new-users",children:(0,dr.jsxs)("button",{disabled:!n,style:{marginTop:15,width:171,height:38,borderRadius:23,fontSize:16},children:[(0,dr.jsx)(Bi,{icon:Xr,style:{marginRight:10}}),"Crear usuario"]})})})})]}),(0,dr.jsx)("div",{children:(0,dr.jsxs)(ed,{children:[(0,dr.jsx)("div",{style:{width:"5%",marginLeft:5,fontSize:12}}),(0,dr.jsxs)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:[(0,dr.jsxs)("p",{style:{margin:0},children:[" ",(0,dr.jsx)("strong",{children:"Nombre de usuario"})," "]}),(0,dr.jsx)("input",{type:"text",placeholder:"Buscar por nombre",onChange:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new String;if(console.log(e),e.length>3){var t=c.filter((function(t){return(t.name+" "+t.lastName).toLocaleUpperCase().match(e.toLocaleUpperCase())?t:null}));s(t)}else 0===e.length&&s(c)}(e.target.value)}})]}),(0,dr.jsxs)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:[(0,dr.jsxs)("p",{style:{margin:0},children:[" ",(0,dr.jsx)("strong",{children:"Correo electr\xf3nico"})," "]}),(0,dr.jsx)("input",{type:"text",placeholder:"Buscar por correo",onChange:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new String;if(e.length>3){var t=c.filter((function(t){return t.email.toLocaleUpperCase().match(e.toLocaleUpperCase())?t:null}));s(t)}else 0===e.length&&s(c)}(e.target.value)}})]}),(0,dr.jsxs)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:[(0,dr.jsxs)("p",{style:{margin:0},children:[" ",(0,dr.jsx)("strong",{children:"RUN"})," "]}),(0,dr.jsx)("input",{style:{width:110},type:"text",placeholder:"Buscar por RUN",onChange:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new String;if(e.length>3){var t=c.filter((function(t){return t.rut&&t.rut.match(e)?t:null}));s(t)}else 0===e.length&&s(c)}(e.target.value)}})]}),(0,dr.jsx)("div",{style:{width:"15%",marginLeft:5,fontSize:12},children:(0,dr.jsxs)("p",{style:{margin:0,marginBottom:22},children:[" ",(0,dr.jsx)("strong",{children:"Rol"})," "]})}),(0,dr.jsx)("div",{style:{width:"15%",marginLeft:5,fontSize:12},children:(0,dr.jsxs)("p",{style:{margin:0,marginBottom:22},children:[" ",(0,dr.jsx)("strong",{children:"Faena/Obra"})," "]})}),(0,dr.jsx)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:(0,dr.jsxs)("p",{style:{margin:0,marginBottom:22},children:[" ",(0,dr.jsx)("strong",{children:"Estado"})," "]})})]})}),n&&(0,dr.jsxs)("div",{style:{overflowY:"auto",height:"calc(100vh - 350px)"},children:[0===r.length&&(0,dr.jsx)(ese,{}),r.length>0&&r.map((function(e,t){return(0,dr.jsxs)(ed,{style:F,children:[(0,dr.jsx)("div",{style:{width:"5%",marginLeft:5,fontSize:12},children:(0,dr.jsx)("img",{style:{height:50,borderRadius:"50%",objectFit:"cover",width:50},src:e.imageUrl?e.imageUrl:"../assets/no-profile-image.png",alt:""})}),(0,dr.jsxs)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:[e.name," ",e.lastName]}),(0,dr.jsx)("div",{style:{width:"10%",marginLeft:5,fontSize:12,wordBreak:"break-all"},children:"x@x.xx"===e.email?"----":e.email}),(0,dr.jsx)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:e.rut}),(0,dr.jsx)("div",{style:{width:"15%",marginLeft:5,fontSize:12,overflowY:"auto",maxHeight:50},children:e.role&&e.role.length>0?zt(e.role):e.roles.map((function(e,t){return(0,dr.jsx)("p",{style:{margin:0},children:zt(e)},t)}))}),(0,dr.jsx)("div",{style:{width:"15%",marginLeft:5,fontSize:12},children:e.obras&&e.obras[0]?e.obras[0].descripcion:""}),(0,dr.jsxs)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:[e.enabled&&(0,dr.jsx)("p",{style:{borderRadius:5,maxWidth:200,textAlign:"center",backgroundColor:"#C3EBD4",paddingTop:3,paddingRight:28,paddingBottom:3,paddingLeft:28},children:"ACTIVO"}),!e.enabled&&(0,dr.jsx)("p",{style:{borderRadius:5,maxWidth:200,textAlign:"center",backgroundColor:"#F9F9F9",paddingTop:3,paddingRight:28,paddingBottom:3,paddingLeft:28},children:"INACTIVO"})]}),(0,dr.jsx)(cs,{title:"Informaci\xf3n del usuario",onClick:function(){return function(e,t){y(e),_(e.enabled),N(e.permissionsReports),L(e.permissionsUsers),k(t),p(!0)}(e,t)},children:(0,dr.jsx)(Bi,{icon:Ir})}),(0,dr.jsx)(mt,{to:"/edit-user/".concat(e._id),children:(0,dr.jsx)(cs,{title:"Editar usuario",children:(0,dr.jsx)(Bi,{icon:Fr})})}),(0,dr.jsx)(cs,{title:"Borrar usuario",onClick:function(){var t,n,r;t=e._id,n=e.name,r=e.lastName,"admin"===e.role?alert("No es posible eliminar un Administrador."):confirm("Remover\xe1 al usuario ".concat(n," ").concat(r,". Confirme la acci\xf3n."))&&on(t).then(function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.t0=s,e.next=4,new Promise((function(e){rn().then((function(t){e(t)}))}));case 4:e.t1=e.sent.data,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:(0,dr.jsx)(Bi,{icon:Gr})})]},t)})),g&&(0,dr.jsx)(sd,{open:f,userModal:g,handleChange:function(e){_(e.target.checked),o[w].enabled=e.target.checked},checked:C,permissionsReports:I,permissionsUsers:D,closeModal:function(e){p(!1),P(e)}})]}),!n&&(0,dr.jsx)("div",{style:{textAlign:"center",width:"100%",height:"50%",paddingTop:50},children:(0,dr.jsx)("h1",{children:"Requiere conexi\xf3n a internet para administraci\xf3n de usuarios"})})]})})},hwe=function(e){var t=e.typeDisplay,n=e.uData,r=xke(),a=r.sites,i=r.setSiteSelected,o=(0,T.useContext)(ske),s=o.setUserData,l=o.userData,u=(o.rolesListSelectionCache,o.setRolesListSelectionCache),c=o.setChangeModule,d=(0,T.useState)("password"),h=(0,U.Z)(d,2),f=h[0],p=h[1],m=(0,T.useState)("password"),v=(0,U.Z)(m,2),g=v[0],y=v[1],b=(0,T.useState)([]),x=(0,U.Z)(b,2),w=x[0],k=x[1],S=(0,T.useState)(!1),E=(0,U.Z)(S,2),C=E[0],M=E[1],A=(0,T.useState)(!1),I=(0,U.Z)(A,2),N=I[0],R=(I[1],(0,T.useState)()),O=(0,U.Z)(R,2),D=O[0],L=O[1];(0,T.useEffect)((function(){P()}),[]);var P=function(){var e=Vn(Un().mark((function e(){var t,n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,en();case 2:t=e.sent,n=[],t.data.forEach((function(e){e.selected=!1,"superAdmin"===e.dbName||n.push(e)})),0===l.roles.length?(u(n),k(n)):(n.forEach((function(e){e.selected=!1,l.roles.forEach((function(t){e.dbName===t&&(e.selected=!0)}))})),console.log(n),k(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,T.useEffect)((function(){if(l.password&&l.confirmPassword&&l.password.length>5&&l.confirmPassword.length>5&&(l.password===l.confirmPassword?(M(!1),document.getElementById("passw").className="isValid",document.getElementById("c_passw").className="isValid"):(M(!0),document.getElementById("passw").className="isInvalid",document.getElementById("c_passw").className="isInvalid")),(0,wK.validate)(l.rut)?document.getElementById("rut").className="isValid":document.getElementById("rut").className="isInvalid",l.roles.length>0){var e=(0,_.Z)(w);e.forEach((function(e){l.roles.forEach((function(t){t===e.dbName&&(e.selected=!0)}))})),k(e),u(e)}}),[l]);var F=function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dn(t);case 2:n=e.sent,L(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,T.useEffect)((function(){console.log(w)}),[w]),(0,dr.jsxs)("div",{style:{height:"calc(100vh-500px)",width:"100%"},children:["Nuevo usuario"===t&&(0,dr.jsx)(Es,{children:(0,dr.jsx)("div",{children:(0,dr.jsxs)("p",{children:["Para enrolar nuevo usuario debe ingresar todos los datos. ",(0,dr.jsx)("br",{})," Foto de perfil se podr\xe1 cargar una vez creado."]})})}),(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xl:"Nuevo usuario"===t?"auto":3,lg:"Nuevo usuario"===t?"auto":3,md:12,sm:12,xs:12,hidden:"Nuevo usuario"===t,children:(0,dr.jsxs)("div",{style:{textAlign:"center"},children:[(0,dr.jsx)("p",{children:"Foto de perfil"}),(0,dr.jsx)("button",{style:{height:224,width:190,borderRadius:8,objectFit:"cover"},onClick:function(){n._id?document.getElementById("profileImage").click():alert("Solo puede agregar foto una vez creado el usuario.")},children:D?(0,dr.jsx)("img",{src:D,style:{objectFit:"cover",width:"100%"},height:"100%"}):(0,dr.jsxs)("div",{children:[(0,dr.jsx)(Bi,{icon:Pr,style:{fontSize:18}}),(0,dr.jsx)("br",{}),(0,dr.jsx)("br",{}),"CARGAR",(0,dr.jsx)("br",{}),"FOTO"]})}),(0,dr.jsx)("input",{autoComplete:"off",type:"file",id:"profileImage",onChange:function(e){F(e.target.files[0])},hidden:!0})]})}),(0,dr.jsxs)(Es,{item:!0,xl:"Nuevo usuario"===t?12:9,lg:"Nuevo usuario"===t?12:9,md:12,sm:12,xs:12,children:[(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xl:8,lg:8,children:(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xl:4,lg:4,md:6,sm:12,xs:12,children:(0,dr.jsxs)(tl,{style:{width:"100%",paddingRight:10},children:[(0,dr.jsx)("p",{style:{margin:0,marginTop:5},children:"RUT"}),(0,dr.jsx)("input",{autoComplete:"off",required:!0,id:"rut",className:"inputClass",type:"text",minLength:11,maxLength:12,onInput:function(e){return t=e.target.value,void s(cr(cr({},l),{},"-"===t?{rut:""}:{rut:(0,wK.format)(t)}));var t},value:l.rut,placeholder:"11.222.333-K",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,dr.jsx)(Es,{item:!0,xl:8,lg:8,md:12,sm:12,xs:12,children:(0,dr.jsxs)(tl,{style:{width:"100%",paddingRight:10},children:[(0,dr.jsx)("p",{style:{margin:0,marginTop:5},children:"Obra"}),(0,dr.jsxs)("select",{required:!0,name:"site",id:"site",style:{width:"100%",height:44,borderRadius:10,fontSize:20},onChange:function(e){s(cr(cr({},l),{},{obras:[e.target.value]})),i(e.target.value)},value:l.obras[0],className:"inputClass",children:[(0,dr.jsx)("option",{children:"Seleccione..."}),a.length>0&&a.map((function(e,t){return(0,dr.jsx)("option",{value:e._id,children:e.descripcion},t)}))]})]})}),(0,dr.jsx)(Es,{item:!0,xl:12,lg:12,md:12,sm:12,xs:12,children:(0,dr.jsxs)(tl,{style:{width:"100%",paddingRight:10},children:[(0,dr.jsx)("p",{style:{margin:0,marginTop:5},children:"Obra"}),(0,dr.jsxs)("select",{required:!0,name:"test",id:"test",style:{width:"100%",height:44,borderRadius:10,fontSize:20},onChange:function(e){return s(cr(cr({},l),{},{isTest:"true"===e.target.value}))},value:l.isTest,className:"inputClass",children:[(0,dr.jsx)("option",{value:!1,children:"Seleccione..."}),(0,dr.jsx)("option",{value:!0,children:"Modo Test"})]})]})}),(0,dr.jsx)(Es,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:(0,dr.jsxs)(tl,{style:{width:"100%",paddingRight:10},children:[(0,dr.jsx)("p",{style:{margin:0,marginTop:5},children:"Nombre"}),(0,dr.jsx)("input",{autoComplete:"off",required:!0,className:"inputClass",id:"name",onChange:function(e){return s(cr(cr({},l),{},{name:e.target.value}))},value:l.name,placeholder:"John",type:"text",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,dr.jsx)(Es,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:(0,dr.jsxs)(tl,{style:{width:"100%",paddingRight:10},children:[(0,dr.jsx)("p",{style:{margin:0,marginTop:5},children:"Apellido"}),(0,dr.jsx)("input",{autoComplete:"off",required:!0,className:"inputClass",id:"lastName",onChange:function(e){return s(cr(cr({},l),{},{lastName:e.target.value}))},value:l.lastName,placeholder:"Doe",type:"text",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,dr.jsx)(Es,{item:!0,xl:8,lg:8,md:6,sm:12,xs:12,children:(0,dr.jsxs)(tl,{style:{width:"100%",paddingRight:10},children:[(0,dr.jsx)("p",{style:{margin:0,marginTop:5},children:"Correo electr\xf3nico"}),(0,dr.jsx)("input",{autoComplete:"off",required:!0,id:"email",onChange:function(e){return s(cr(cr({},l),{},{email:e.target.value}))},value:l.email,placeholder:"nombre@correo.cl",type:"email",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,dr.jsx)(Es,{item:!0,xl:4,lg:4,md:6,sm:12,xs:12,children:(0,dr.jsxs)(tl,{style:{width:"100%",paddingRight:10},children:[(0,dr.jsx)("p",{style:{margin:0,marginTop:5},children:"N\xfamero de tel\xe9fono"}),(0,dr.jsx)("input",{autoComplete:"off",required:!0,className:"inputClass",id:"phone",minLength:9,onInput:function(e){e.target.value=e.target.value.slice(0,9)},onChange:function(e){return s(cr(cr({},l),{},{phone:e.target.value}))},value:l.phone,placeholder:"999998888",type:"phone",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),"Nuevo usuario"===t&&(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsxs)(Es,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:[(0,dr.jsx)("p",{style:{margin:0,marginTop:5},children:"Contrase\xf1a"}),(0,dr.jsx)("div",{style:{float:"left",width:"100%",paddingRight:10},children:(0,dr.jsx)("input",{autoComplete:"off",id:"passw",required:!0,className:"isInvalid",onChange:function(e){return s(cr(cr({},l),{},{password:e.target.value}))},value:l.password,minLength:6,placeholder:"Min 6 car\xe1cteres",type:f,style:{width:"100%",height:44,borderRadius:10,fontSize:20,paddingRight:50}})}),(0,dr.jsx)("div",{style:{float:"left",width:"1%",marginLeft:-50},children:(0,dr.jsxs)(cs,{style:{width:40},onClick:function(){p("password"===f?"text":"password")},children:["password"===f&&(0,dr.jsx)(Bi,{icon:Cr}),"text"===f&&(0,dr.jsx)(Bi,{icon:_r})]})})]}),(0,dr.jsxs)(Es,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:[(0,dr.jsx)("p",{style:{margin:0,marginTop:5},children:"Confirmar contrase\xf1a"}),(0,dr.jsx)("div",{style:{float:"left",width:"100%",paddingRight:10},children:(0,dr.jsx)("input",{autoComplete:"off",id:"c_passw",required:!0,className:"isInvalid",onChange:function(e){return s(cr(cr({},l),{},{confirmPassword:e.target.value}))},value:l.confirmPassword,minLength:6,placeholder:"Repita contrase\xf1a",type:g,style:{width:"100%",height:44,borderRadius:10,fontSize:20,paddingRight:50}})}),(0,dr.jsx)("div",{style:{float:"left",width:"1%",marginLeft:-50},children:(0,dr.jsxs)(cs,{style:{width:40},onClick:function(){y("password"===g?"text":"password")},children:["password"===g&&(0,dr.jsx)(Bi,{icon:Cr}),"text"===g&&(0,dr.jsx)(Bi,{icon:_r})]})})]})]})]})}),(0,dr.jsx)(Es,{item:!0,xl:4,lg:4,children:(0,dr.jsx)(Es,{container:!0,style:{height:"100%"},children:(0,dr.jsxs)("div",{style:{padding:"0px 10px",borderLeftColor:"#ccc",borderLeftStyle:"solid",borderLeftWidth:1,height:"100%"},children:[(0,dr.jsx)("div",{style:{marginTop:10,marginPadding:10},children:(0,dr.jsx)("h2",{children:"Roles de usuario"})}),w.map((function(e,t){return(0,dr.jsx)(Es,{sm:12,item:!0,children:(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,sm:1,children:(0,dr.jsx)(Woe,{style:{padding:3},checked:e.selected,onChange:function(e){!function(e,t){var n=(0,_.Z)(w),r=[];n.forEach((function(n,a){a===t&&(n.selected=e.target.checked,n.selected&&r.push(n.dbName))})),k(n),u(n),c(!0)}(e,t)}})}),(0,dr.jsx)(Es,{item:!0,sm:11,children:(0,dr.jsx)("p",{style:{margin:"5px 0px 5px 10px"},children:e.name})})]})},t)}))]})})})]}),C&&(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,dr.jsx)("h3",{style:{color:"red"},children:"Contrase\xf1as no coinciden"})}),(0,dr.jsx)($c,{open:N,withProgress:!1,loadingData:"Espere..."})]})]})]})},fwe=function(e){e.width;var t=e.height,n=e.typeDisplay,r=(e.id,(0,T.useContext)(ske)),a=r.userData,i=(r.setUserData,xke().siteSelected,(0,T.useState)("")),o=(0,U.Z)(i,2),s=o[0],l=o[1];(0,T.useEffect)((function(){console.log(a),a.obras&&u()}),[a.obras]);var u=function(){var e=Vn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",n=(t=a).obras[0]._id?t.obras[0]._id:t.obras[0],e.next=5,In(n);case 5:r=e.sent,console.log(r),l(r.data.data.descripcion);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,dr.jsx)(Es,{container:!0,style:{height:t},children:(0,dr.jsx)(Es,{item:!0,xl:12,md:12,style:{padding:20,marginRight:0,backgroundColor:"#F9F9F9",borderRadius:20,overflowY:"auto"},children:(0,dr.jsxs)("div",{style:{textAlign:"center"},children:[(0,dr.jsx)("h2",{children:"Resumen del usuario"}),(0,dr.jsxs)("div",{style:{width:"100%",marginBottom:15},children:[(0,dr.jsx)("p",{style:{margin:0,fontSize:12,fontWeight:"bold"},children:"RUT"}),(0,dr.jsx)("p",{style:{margin:0,fontSize:16},children:a.rut})]}),(0,dr.jsxs)("div",{style:{width:"100%",marginBottom:15},children:[(0,dr.jsx)("p",{style:{margin:0,fontSize:12,fontWeight:"bold"},children:"Nombre y Apellido"}),(0,dr.jsxs)("p",{style:{margin:0,fontSize:16},children:[a.name," ",a.lastName]})]}),(0,dr.jsxs)("div",{style:{width:"100%",marginBottom:15},children:[(0,dr.jsx)("p",{style:{margin:0,fontSize:12,fontWeight:"bold"},children:"Tipo de usuario"}),a.roles.map((function(e,t){return(0,dr.jsx)("p",{children:zt(e)},t)}))]}),(0,dr.jsxs)("div",{style:{width:"100%",marginBottom:15},children:[(0,dr.jsx)("p",{style:{margin:0,fontSize:12,fontWeight:"bold"},children:"Obra"}),(0,dr.jsx)("p",{style:{margin:0,fontSize:16},children:s})]}),(0,dr.jsxs)("div",{style:{width:"100%",marginBottom:15},children:[(0,dr.jsx)("p",{style:{margin:0,fontSize:12,fontWeight:"bold"},children:"Correo electr\xf3nico"}),(0,dr.jsx)("p",{style:{margin:0,fontSize:16},children:a.email})]}),(0,dr.jsxs)("div",{style:{width:"100%",marginBottom:15},children:[(0,dr.jsx)("p",{style:{margin:0,fontSize:12,fontWeight:"bold"},children:"Tel\xe9fono"}),(0,dr.jsxs)("p",{style:{margin:0,fontSize:16},children:["+56 ",a.phone]})]}),"Nuevo usuario"===n&&(0,dr.jsxs)("div",{style:{width:"100%",marginBottom:15},children:[(0,dr.jsx)("p",{style:{margin:0,fontSize:12,fontWeight:"bold"},children:"Contrase\xf1a"}),(0,dr.jsxs)("p",{style:{margin:0,fontSize:16},children:[a.password," "," "]})]})]})})})},pwe=function(e){var t=e.list,n=e.typeReportsSelected,r=e.statusReports,a=Vwe().admin,i=xke().sites,o=(0,T.useState)(null),s=(0,U.Z)(o,2),l=s[0],u=s[1],c=(0,T.useState)(null),d=(0,U.Z)(c,2),h=d[0],f=d[1],p=(0,T.useState)(!1),m=(0,U.Z)(p,2),v=m[0],g=m[1],y=(0,T.useState)(!1),b=(0,U.Z)(y,2),x=b[0],w=b[1],k=(0,T.useState)([]),S=(0,U.Z)(k,2),E=S[0],C=S[1],_=(0,T.useState)(null),M=(0,U.Z)(_,2),A=M[0],I=M[1],N=Boolean(A),R=N?"simple-popover":void 0;(0,T.useEffect)((function(){console.log(a)}),[]);var O=function(){I(null)},D=function(e,t,n){if(0!==e&&e){if(1===e)return"Revisi\xf3n Supervisor";if(2===e)return"Revisi\xf3n J. Maquinaria";if(3===e)return"Revisi\xf3n SAP";if(4===e)return"Terminado"}else{if(!(t.length>0))return"Asignar";if("En proceso"===n)return"Ejecutando por operador";if("Asignar"===n)return"Reasignar"}};return(0,dr.jsxs)("div",{style:{width:"100%",paddingLeft:10,paddingRight:10},children:[(0,dr.jsxs)(Es,{container:!0,style:{width:"100%",borderBottomColor:"#ccc",borderBottomStyle:"solid",borderBottomWidth:1},children:[(0,dr.jsx)(Es,{item:!0,xs:"auto",sm:"auto",md:"auto",lg:"auto",xl:"auto",children:(0,dr.jsx)("p",{style:{textAlign:"center",width:50},children:(0,dr.jsx)("strong",{children:"N\xb0 OT"})})}),(0,dr.jsx)(Es,{item:!0,xs:"auto",sm:"auto",md:"auto",lg:"auto",xl:"auto",children:(0,dr.jsxs)("p",{style:{textAlign:"center",minWidth:70},children:[" ",(0,dr.jsx)("strong",{children:"M\xe1quina"})," "]})}),(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,dr.jsx)("strong",{children:"Pauta"})," "]})}),(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,dr.jsxs)("strong",{children:["Fecha ",(0,dr.jsx)("br",{})," Prevista"]})," "]})}),(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,dr.jsxs)("strong",{children:["Fecha ",(0,dr.jsx)("br",{})," Inicio"]})," "]})}),(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,dr.jsxs)("strong",{children:["Fecha ",(0,dr.jsx)("br",{})," T\xe9rmino"]})," "]})}),(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,dr.jsx)("strong",{children:"Hor\xf3metro"})," "]})}),(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,dr.jsx)("strong",{children:"Estado"})," "]})}),"Completadas"!==n?(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:2,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,dr.jsx)("strong",{children:"Responsable"})," "]})}):(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:2,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,dr.jsx)("strong",{children:"OM SAP"})," "]})}),a&&(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center",minWidth:70},children:[" ",(0,dr.jsx)("strong",{children:"Obra"})," "]})}),"Completadas"===n&&(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center",minWidth:70},children:[" ",(0,dr.jsx)("strong",{children:"Download"})," "]})}),(0,dr.jsx)(Es,{item:!0,xs:"auto",sm:"auto",md:"auto",lg:"auto",xl:"auto",children:(0,dr.jsxs)("p",{style:{textAlign:"center",minWidth:70},children:[" ",(0,dr.jsx)("strong",{children:"Flota"})," "]})}),(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"left"},children:[" ",(0,dr.jsx)("strong",{children:"Acci\xf3n"})," "]})})]}),(0,dr.jsx)("div",{children:0==t.length&&(0,dr.jsx)(Es,{container:!0,children:(0,dr.jsxs)("div",{style:{width:"100%",textAlign:"center",height:"50vh"},children:[(0,dr.jsx)("img",{style:{margin:0,top:"50%",left:"calc(100%/1.53)"},src:"../../assets/icons/Arrow.svg",alt:""}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center",top:"55%"},children:r?(0,dr.jsxs)("p",{children:["Descargando la informaci\xf3n ",(0,dr.jsx)("br",{})," Espere un momento."]}):(0,dr.jsxs)("p",{children:["Selecciona otra opci\xf3n ",(0,dr.jsx)("br",{})," El detalle no cuenta con lista de reportes."]})})]})})}),(0,dr.jsx)("div",{style:{height:"calc(100vh - 370px)",overflowY:"auto"},children:t.map((function(e,t){return(0,dr.jsxs)(Es,{container:!0,style:{width:"100%",borderBottomColor:"#ccc",borderBottomStyle:"solid",borderBottomWidth:1},children:[(0,dr.jsx)(Es,{item:!0,xs:"auto",sm:"auto",md:"auto",lg:"auto",xl:"auto",children:(0,dr.jsxs)("p",{style:{textAlign:"center",width:50},children:[" ",e.idIndex," "]})}),(0,dr.jsx)(Es,{item:!0,xs:"auto",sm:"auto",md:"auto",lg:"auto",xl:"auto",children:(0,dr.jsxs)("p",{style:{textAlign:"center",minWidth:70},children:[" ",e.machineData&&e.machineData.equ," "]})}),(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",e.guide," "]})}),(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",Wt(e.datePrev)," "]})}),(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",Wt(e.dateInit)," "]})}),(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",Wt(e.dateClose)," "]})}),(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(e.machineData.hourMeter/3600).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,".")," hrs "]})}),(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsx)("div",{style:{textAlign:"center"},children:(0,dr.jsxs)("p",{children:[" ",(0,dr.jsx)("strong",{children:D(e.level,e.usersAssigned,e.state)})," "]})})}),"Completadas"!==n?e.enabled?(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:2,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,dr.jsx)("button",{onClick:function(){u(e),g(!0)},style:{backgroundColor:"#F9F9F9",borderRadius:20,borderColor:"#757575",maxWidth:130,height:24,fontSize:12},children:"Asignar"})," "]})}):(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,dr.jsx)("button",{disabled:!0,style:{backgroundColor:"#F9F9F9",borderRadius:20,borderColor:"#757575",maxWidth:130,height:24,fontSize:12},children:"Terminado"})," "]})}):(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",e.sapId," "]})}),a&&(0,dr.jsxs)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,style:{textAlign:"center"},children:[(0,dr.jsxs)($l,{"aria-describedby":R,style:{textAlign:"center",minWidth:70,marginTop:5},onClick:function(t){!function(e,t){console.log(t),console.log(i);var n=i.filter((function(e){if(t===e.idobra)return e}));C(n[0].descripcion),I(e.currentTarget)}(t,e.site)},children:[" ",e.site," "]}),(0,dr.jsx)(pl,{id:R,open:N,anchorEl:A,onClose:O,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,dr.jsx)("div",{style:{padding:5},children:(0,dr.jsx)("p",{children:E})})})]}),"Completadas"===n&&(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:e.urlPdf?(0,dr.jsx)("p",{style:{textAlign:"center",minWidth:70},children:(0,dr.jsx)("a",{href:"".concat(e.urlPdf),children:"Link"})}):(0,dr.jsx)("p",{style:{textAlign:"center",minWidth:70},children:" Sin URL "})}),(0,dr.jsx)(Es,{item:!0,xs:"auto",sm:"auto",md:"auto",lg:"auto",xl:"auto",children:(0,dr.jsxs)("p",{style:{textAlign:"center",minWidth:70},children:[" ",e.machineData&&e.machineData.model," "]})}),(0,dr.jsx)(Es,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,dr.jsx)(Es,{container:!0,children:(0,dr.jsx)(Es,{item:!0,children:(0,dr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,dr.jsx)("button",{onClick:function(){f(e),w(!0)},style:{backgroundColor:"#F9F9F9",borderRadius:20,borderColor:"#757575",maxWidth:130,height:24,fontSize:12},children:"Ver"})," "]})})})})]},t)}))}),l&&(0,dr.jsx)(Dwe,{open:v,report:l,reportType:l.reportType,onlyClose:function(){g(!1)},closeModal:function(){g(!1)}}),h&&(0,dr.jsx)(Pwe,{open:x,report:h,onlyClose:function(){f(null)}})]})},mwe=n(1276),vwe=n.n(mwe),gwe=function(e){var t=e.width,n=e.height,r=e.setRefCanvas;e.disabled;return(0,dr.jsx)(vwe(),{ref:function(e){r(e)},penColor:"black",canvasProps:{width:t,height:n,style:{borderStyle:"solid",borderWidth:1,borderColor:"#333",borderRadius:20}}})},ywe=function(e){var t=e.open,n=e.closeModal,r=e.savedInfo,a=(0,T.useState)(""),i=(0,U.Z)(a,2),o=i[0],s=i[1],l=(0,T.useState)(""),u=(0,U.Z)(l,2),c=u[0],d=u[1],h=(0,T.useState)(""),f=(0,U.Z)(h,2),p=f[0],m=f[1],v=(0,T.useState)(""),g=(0,U.Z)(v,2),y=g[0],b=g[1],x=(0,T.useState)(""),w=(0,U.Z)(x,2),k=w[0],S=w[1];(0,T.useEffect)((function(){}),[]);var E=function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={type:o,brand:c,model:p,pIDPM:y,zone:k},e.next=3,Mn(t);case 3:e.sent&&(C(),r());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){n(),s(""),d(""),m(""),b(""),S("")};return(0,dr.jsx)(Fo,{open:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,dr.jsxs)(qc,{sx:Pt,children:[(0,dr.jsxs)(Es,{container:!0,style:{paddingTop:50},children:[(0,dr.jsx)(Es,{item:!0,xl:6,lg:6,md:12,sm:12,xs:12,children:(0,dr.jsxs)(tl,{style:{width:"100%",paddingRight:10},children:[(0,dr.jsx)("p",{style:{margin:0,marginTop:5},children:"Marca"}),(0,dr.jsxs)("select",{required:!0,name:"site",id:"site",style:{width:"100%",height:44,borderRadius:10,fontSize:20},onChange:function(e){return d(e.target.value)},value:c,className:"inputClass",children:[(0,dr.jsx)("option",{value:"",children:"Seleccione..."}),["Caterpillar","Komatsu"].map((function(e,t){return(0,dr.jsx)("option",{value:e,children:e},t)}))]})]})}),(0,dr.jsx)(Es,{item:!0,xl:6,lg:6,md:12,sm:12,xs:12,children:(0,dr.jsxs)(tl,{style:{width:"100%",paddingRight:10},children:[(0,dr.jsx)("p",{style:{margin:0,marginTop:5},children:"Tipo"}),(0,dr.jsxs)("select",{required:!0,name:"site",id:"site",style:{width:"100%",height:44,borderRadius:10,fontSize:20},onChange:function(e){return s(e.target.value)},value:o,className:"inputClass",children:[(0,dr.jsx)("option",{value:"",children:"Seleccione..."}),["Cami\xf3n","Pala","Cargador Frontal","Bulldozer"].map((function(e,t){return(0,dr.jsx)("option",{value:e,children:e},t)}))]})]})}),(0,dr.jsx)(Es,{item:!0,xl:6,lg:6,md:12,sm:12,xs:12,children:(0,dr.jsxs)(tl,{style:{width:"100%",paddingRight:10},children:[(0,dr.jsx)("p",{style:{margin:0,marginTop:5},children:"Modelo"}),(0,dr.jsxs)("select",{required:!0,name:"site",id:"site",style:{width:"100%",height:44,borderRadius:10,fontSize:20},onChange:function(e){return m(e.target.value)},value:p,className:"inputClass",children:[(0,dr.jsx)("option",{value:"",children:"Seleccione..."}),["793-F","PC5500","789-D","994-K","D10-T2","D10-T"].map((function(e,t){return(0,dr.jsx)("option",{value:e,children:e},t)}))]})]})}),(0,dr.jsx)(Es,{item:!0,xl:6,lg:6,md:12,sm:12,xs:12,children:(0,dr.jsxs)(tl,{style:{width:"100%",paddingRight:10},children:[(0,dr.jsx)("p",{style:{margin:0,marginTop:5},children:"Zona"}),(0,dr.jsxs)("select",{required:!0,name:"site",id:"site",style:{width:"100%",height:44,borderRadius:10,fontSize:20},onChange:function(e){return S(e.target.value)},value:k,className:"inputClass",children:[(0,dr.jsx)("option",{value:"",children:"Seleccione..."}),["Gen\xe9rico"].map((function(e,t){return(0,dr.jsx)("option",{value:e,children:e},t)}))]})]})}),(0,dr.jsx)(Es,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:(0,dr.jsxs)(tl,{style:{width:"100%",paddingRight:10},children:[(0,dr.jsx)("p",{style:{margin:0,marginTop:5},children:"PIDPM"}),(0,dr.jsx)("input",{autoComplete:"off",required:!0,id:"rut",className:"inputClass",type:"text",minLength:11,maxLength:12,onInput:function(e){return b(e.target.value)},value:y,placeholder:"SPM000111",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,dr.jsx)(Es,{item:!0,xl:12,lg:12,md:12,sm:12,xs:12,children:(0,dr.jsx)($l,{onClick:E,children:"Guardar Pauta"})})]}),(0,dr.jsx)(od,{onClick:function(){return C()},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,dr.jsx)(Jl,{style:{color:"#ccc"}})})]})})},bwe=function(e){var t=e.open,n=e.closeModal,r=(0,T.useState)([]),a=(0,U.Z)(r,2),i=a[0],o=a[1];(0,T.useEffect)((function(){s()}),[]);var s=function(){var e=Vn(Un().mark((function e(){var t,n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jn.initDbPMs();case 2:return t=e.sent,e.next=5,jn.consultar(t.database);case 5:n=e.sent,o(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,dr.jsx)(Fo,{open:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,dr.jsxs)(qc,{sx:Pt,children:[(0,dr.jsx)("div",{style:{width:"100%",position:"absolute",top:0,left:0,textAlign:"right"},children:(0,dr.jsx)($l,{style:{borderRadius:"50%",width:36,height:36},onClick:n,children:(0,dr.jsx)(Jl,{})})}),(0,dr.jsx)(Es,{container:!0,xl:12,lg:12,style:{width:"100%"},children:(0,dr.jsx)(Es,{item:!0,xl:12,lg:12,children:(0,dr.jsxs)("h3",{children:["Pautas en dispositivo. Total descargadas: ",i.length]})})}),(0,dr.jsxs)(Es,{container:!0,xl:12,style:{width:"100%",paddingTop:30},children:[(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,children:(0,dr.jsx)("strong",{children:"N\xb0"})}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,children:(0,dr.jsx)("strong",{children:"Tipo PM"})}),(0,dr.jsx)(Es,{item:!0,xl:2,lg:2,children:(0,dr.jsx)("strong",{children:"ID PM"})}),(0,dr.jsx)(Es,{item:!0,xl:2,lg:2,children:(0,dr.jsx)("strong",{children:"Acci\xf3n"})})]}),(0,dr.jsx)("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 290px)"},children:i.map((function(e,t){return(0,dr.jsxs)(Es,{container:!0,style:{width:"100%",paddingTop:25,paddingBottom:25,maxHeight:"calc(100vh - 200px)",borderBottomColor:"#ccc",borderBottomWidth:1,borderBottomStyle:"solid"},children:[(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,children:t+1}),(0,dr.jsx)(Es,{item:!0,xl:1,lg:1,children:e.typepm}),(0,dr.jsx)(Es,{item:!0,xl:2,lg:2,children:e.idpm}),(0,dr.jsx)(Es,{item:!0,xl:2,lg:2,children:e.action})]},t)}))})]})})},xwe=(0,T.forwardRef)((function(e,t){return(0,dr.jsx)(ho,cr({direction:"up",ref:t},e))})),wwe=function(e){var t=e.handleClickOpen,n=e.open,r=e.handleClose,a=e.image;return(0,dr.jsxs)("div",{children:[(0,dr.jsx)($l,{variant:"outlined",onClick:t,children:"Open full-screen dialog"}),(0,dr.jsxs)(Xo,{fullScreen:!0,open:n,onClose:r,TransitionComponent:xwe,children:[(0,dr.jsx)(cs,{style:{position:"absolute",top:20,right:20,backgroundColor:"#fff"},onClick:r,children:(0,dr.jsx)(Jl,{})}),(0,dr.jsx)("div",{style:{padding:30,textAlign:"center",height:"100vh"},children:(0,dr.jsx)("img",{src:a,height:"100%"})})]})]})},kwe=function(e){var t=e.open;return(0,dr.jsx)(Xo,{open:t,PaperProps:{style:{backgroundColor:"transparent",boxShadow:"none",height:300,width:300}},children:(0,dr.jsxs)("div",{style:{backgroundColor:"transparent",position:"relative",height:300,width:300,overflow:"hidden"},children:[(0,dr.jsx)(Kc,{size:300,color:"primary"}),(0,dr.jsx)("img",{src:"../assets/logo_icv_blanco.png",width:150,style:{position:"absolute",top:90,right:70}})]})})},Swe=(0,T.forwardRef)((function(e,t){return(0,dr.jsx)(ho,cr({direction:"up",ref:t},e))})),Twe=function(e){var t=e.open,n=e.handleClose,r=e.images,a=e.setIsEdited;console.log(r);var i=(0,T.useState)(),o=(0,U.Z)(i,2),s=o[0],l=o[1],u=(0,T.useState)(!1),c=(0,U.Z)(u,2),d=c[0],h=c[1],f=(0,T.useState)(r),p=(0,U.Z)(f,2),m=p[0],v=p[1],g=(0,T.useState)(),y=(0,U.Z)(g,2),b=y[0],x=y[1],w=function(e){document.getElementById("astChange").click(),x(e)},k=function(){var e=Vn(Un().mark((function e(t){var n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return h(!0),e.next=4,Dn(t);case 4:n=e.sent,setTimeout((function(){n&&(b.image=n,h(!1),a(!0))}),1e3);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,dr.jsxs)(Xo,{fullScreen:!0,open:t,onClose:n,TransitionComponent:Swe,adaptiveHeight:!0,children:[(0,dr.jsxs)(gs,{className:"dialog-content-ast",children:[(0,dr.jsxs)(awe,{grabCursor:!0,effect:"creative",creativeEffect:{prev:{shadow:!0,translate:[0,0,-400]},next:{translate:["100%",0,0]}},zoom:!0,modules:[zxe,Lxe,Fxe,jxe,Bxe,Uxe,Oxe],spaceBetween:50,slidesPerView:1,navigation:!0,keyboard:{enabled:!0},style:{"--swiper-navigation-color":"#be2e26","--swiper-pagination-color":"#be2e26"},className:"mySwiper",pagination:{clickable:!0},onSwiper:function(e){return l(e.activeIndex)},onSlideChange:function(e){return l(e.activeIndex)},children:[m.map((function(e,t){return console.log(e),(0,dr.jsx)(swe,{style:{height:"80vh",display:"block",width:"100%",textAlign:"center"},children:(0,dr.jsx)("div",{className:"swiper-zoom-container",children:(0,dr.jsx)("img",{src:e.image.length>0?e.image:e.imageUrl,style:{height:"85vh",textAlign:"center"}},t)})},t)})),(0,dr.jsx)("input",{autoComplete:"off",type:"file",id:"astChange",accept:"image/x-png,image/jpeg",onChange:function(e){k(e.target.files[0])},hidden:!0})]}),(0,dr.jsxs)("div",{style:{width:"100%",textAlign:"center",position:"absolute",bottom:10},children:[(0,dr.jsxs)($l,{style:{backgroundColor:"#fff",borderStyle:"solid",borderWidth:1,borderColor:"green",color:"green",marginRight:10},onClick:function(){console.log(r[s]),w(r[s])},children:[(0,dr.jsx)(Bi,{style:{fontSize:30,marginRight:10},icon:Ar})," Cambiar AST"]}),(0,dr.jsxs)($l,{style:{backgroundColor:"#fff",borderStyle:"solid",borderWidth:1,borderColor:"red",color:"red"},onClick:function(){!function(){h(!0),console.log(r);var e=r.splice(s,1);console.log(e),v(r),setTimeout((function(){h(!1),a(!0)}),1e3)}()},children:[(0,dr.jsx)(Jl,{style:{fontSize:30,marginRight:10}})," Borrar AST"]})]})]}),(0,dr.jsx)(cs,{style:{position:"absolute",zIndex:2,top:20,right:20,backgroundColor:"#fff"},onClick:n,children:(0,dr.jsx)(Jl,{})}),(0,dr.jsx)(kwe,{open:d})]})},Ewe=n(173),Cwe=(0,Ol.Z)(T.createElement("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),_we=(0,T.forwardRef)((function(e,t){return(0,dr.jsx)(ho,cr({direction:"up",ref:t},e))})),Mwe=function(e){var t=e.handleClickOpen,n=e.open,r=e.handleClose,a=e.message,i=e.inputMessage,o=e.saveMessage;return setTimeout((function(){document.getElementById("textField").focus()}),100),(0,dr.jsxs)("div",{children:[(0,dr.jsx)($l,{variant:"outlined",onClick:t,children:"Open full-screen dialog"}),(0,dr.jsxs)(Xo,{fullScreen:!0,open:n,onClose:r,TransitionComponent:_we,children:[(0,dr.jsx)(cs,{style:{position:"absolute",top:20,left:20,backgroundColor:"#fff"},onClick:r,children:(0,dr.jsx)(Jl,{})}),(0,dr.jsxs)(cs,{style:{position:"absolute",top:20,right:20,backgroundColor:"#fff"},onClick:function(){o(),r()},children:["Enviar ",(0,dr.jsx)(Cwe,{})]}),(0,dr.jsx)("div",{style:{padding:30,textAlign:"center",height:"100vh"},children:(0,dr.jsx)(ql,{style:{width:"70%"},id:"textField",value:a,onChange:function(e){i(e.target.value)}})})]})]})},Awe=(0,T.forwardRef)((function(e,t){return(0,dr.jsx)(ho,cr({direction:"up",ref:t},e))})),Iwe=function(e){var t=e.open,n=e.handleClose,r=e.item,a=e.index,i=e.executionReport,o=e.gruposKeys,s=(e.indexActivity,e.indexGroup),l=e.save,u=(e.setChecks,e.canEdit),c=Vwe(),d=c.userData,h=c.admin,f=(c.isOperator,c.isSapExecutive,c.isShiftManager,c.isChiefMachinery,gke().usersFilteredBySite),p=oke().report,m=eke().isOnline,v=(0,T.useState)(""),g=(0,U.Z)(v,2),y=g[0],b=g[1],x=(0,T.useState)([]),w=(0,U.Z)(x,2),k=w[0],S=w[1],E=(0,T.useState)(),C=(0,U.Z)(E,2),M=C[0],A=C[1],I=(0,T.useState)(!1),N=(0,U.Z)(I,2),R=N[0],O=N[1],D=(0,T.useState)(!1),L=(0,U.Z)(D,2),P=L[0],F=L[1],j=(0,T.useState)(""),z=(0,U.Z)(j,2),B=z[0],W=z[1],V=(0,T.useState)(!1),Z=(0,U.Z)(V,2),H=Z[0],G=(Z[1],(0,T.useState)(!1)),q=(0,U.Z)(G,2),X=q[0],Y=q[1],K=(0,T.useState)(!1),$=(0,U.Z)(K,2),J=$[0],Q=$[1],ee=(0,T.useState)([]),te=(0,U.Z)(ee,2),ne=te[0],re=te[1],ae=(0,T.useState)(!1),ie=(0,U.Z)(ae,2),oe=(ie[0],ie[1]),se=(0,T.useState)(0),le=(0,U.Z)(se,2),ue=le[0],ce=le[1],de=(0,T.useState)(),he=(0,U.Z)(de,2),fe=he[0],pe=he[1],me=(0,T.useState)(!1),ve=(0,U.Z)(me,2),ge=(ve[0],ve[1]);(0,T.useEffect)((function(){console.log(p)}),[p]),(0,T.useEffect)((function(){if(o.map((function(e,t){e.data===s&&pe(t)})),i&&i.astList&&re(i.astList),A(r.unidadData),r.messages){var e=[];r.messages.forEach(function(){var t=Vn(Un().mark((function t(n,a){var i;return Un().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=f.filter((function(e){if(e._id===n.user)return e}))[0],console.log(i),n.name="".concat(i.name," ").concat(i.lastName),n.urlBase64&&e.push(n),a==r.messages.length-1&&(ce(e.length+1),S(r.messages));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),setTimeout((function(){document.getElementById("commits").scrollTop=document.getElementById("commits").scrollHeight}),100)}}),[]),(0,T.useEffect)((function(){if(k.length>0){var e=!1,t=!1;(0,_.Z)(k).forEach(function(){var n=Vn(Un().mark((function n(a,i){return Un().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(a.urlBase64||a.urlImageMessage)&&(t=!0),"Se indica estado ejecutado sin dejar mensajes"===a.content||(e=!0),i===k.length-1&&(r.haveMessage=e,r.haveClip=t);case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()),b(""),setTimeout((function(){document.getElementById("commits").scrollTop=document.getElementById("commits").scrollHeight}),50)}}),[k]);var ye=function(e){b(e)},be=function(){var e=Vn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}return e.next=3,Dn(t);case 3:if(n=e.sent,!m){e.next=12;break}return e.next=7,bn(t,"".concat((new Date).getFullYear(),"/").concat(p.idIndex,"/").concat(s,"/").concat(Date.now()),"reports-test");case 7:r=e.sent,console.log(r.data.data.url),xe(n,"Imagen ".concat(Date.now()),r.data.data.url),e.next=13;break;case 12:xe(n,"Imagen ".concat(Date.now()),null);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Vn(Un().mark((function e(t,n,i){var o,s,l,u;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(y.length>0||n)&&(o=ue,t&&(r.haveClip=!0,ce(o+=1)),s=n||y,l={id:Date.now(),namePicture:i?"".concat(fe,"_Tarea_").concat(a+1,"_Foto_").concat(o):null,content:s,name:"".concat(d.name," ").concat(d.lastName),user:d._id,urlBase64:t,urlImageMessage:i},(u=(0,_.Z)(k)).push(l),S(u));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),we=function(e,t,r){r.messages=k,ge(!1),"*"!==r.unidad?M?(r.unidadData=M,l(e,t,r),i.offLineGuard=Date.now(),n()):alert("Debe ingresar el total utilizado. Si no utiliz\xf3 insumo o repuesto solicitado debe ingresar 0"):k.length>0?(l(e,t,r),i.offLineGuard=Date.now(),n()):alert("Debe dejar un comentario")};return(0,dr.jsxs)(Xo,{open:t,TransitionComponent:Awe,keepMounted:!0,disableEscapeKeyDown:!0,"aria-describedby":"alert-dialog-slide-description",children:[(0,dr.jsx)("div",{style:{position:"absolute",right:50,top:10},children:(0,dr.jsx)(cs,{onClick:function(){n()},style:{position:"fixed"},children:(0,dr.jsx)(Jl,{})})}),(0,dr.jsx)(ms,{style:{marginTop:30},children:r.taskdesc}),(0,dr.jsx)(gs,{children:(0,dr.jsxs)(bs,{id:"alert-dialog-slide-description",style:{whiteSpace:"pre-line"},children:[r.obs01," ",(0,dr.jsx)("br",{})]})}),"*"!==r.unidad&&(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xl:3,children:(0,dr.jsxs)("div",{style:{marginLeft:24,marginBottom:16},children:[(0,dr.jsx)("h3",{children:"Total utilizado"}),(0,dr.jsx)(ql,{id:"standard-basic",label:r.unidad,variant:"standard",type:"number",value:M,onChange:function(e){!function(e){A(e)}(e.target.value)}})]})}),(0,dr.jsx)(Es,{item:!0,xl:2,lg:2,md:2,sm:2,children:(0,dr.jsx)("div",{children:(0,dr.jsxs)("p",{children:["Nro Parte: ",r.partnumberUtl]})})}),(0,dr.jsx)(Es,{item:!0,xl:4,lg:4,md:4,sm:4,children:(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xl:6,lg:6,md:6,sm:6,children:(0,dr.jsx)("div",{children:(0,dr.jsxs)("p",{children:["Cant. Utilizar: ",(0,dr.jsx)("br",{})," ",r.cantidad," ",r.unidad]})})}),(0,dr.jsx)(Es,{item:!0,xl:6,lg:6,md:6,sm:6,children:(0,dr.jsx)("div",{children:(0,dr.jsxs)("p",{children:["Tipo Rpto: ",r.idtypeutlPartnumber]})})})]})})]}),(0,dr.jsx)("div",{style:{paddingLeft:24,paddingRight:24,marginBottom:50},children:(0,dr.jsxs)("div",{style:{width:"100%",height:250,borderWidth:2,borderStyle:"solid",borderColor:"#ccc",borderRadius:20,position:"relative"},children:[(0,dr.jsxs)("div",{id:"commits",style:{width:"100%",height:190,overflowY:"auto",scrollBehavior:"smooth"},children:[0===k.length&&(0,dr.jsx)("p",{children:"No hay mensajes"}),k.map((function(e,t){return console.log(e),(0,dr.jsxs)("div",{style:{position:"relative",color:"#555",padding:5,margin:5,borderRadius:20,borderWidth:2,borderStyle:"solid",borderColor:"#dddddd",backgroundColor:"#F5F5F5"},children:[(d._id===e.user&&u||h)&&(0,dr.jsx)(cs,{onClick:function(){!function(e){if(confirm("\xbfConfirma borrar el mensaje?")){ge(!0);var t=[];k.forEach((function(n,a){if(e===a||t.push(n),a===k.length-1)if(S(t),r.messages=t,0===r.messages.length)r.haveMessage=!1,r.haveClip=!1;else{var i=!1,o=!1;r.messages.forEach((function(e,t){console.log(e),"Se indica estado ejecutado sin dejar mensajes"===e.content||(o=!0),(e.urlBase64||e.urlImageMessage)&&(i=!0),console.log("Clip",i),t===r.messages.length-1&&(r.haveClip=i,r.haveMessage=o)}))}}))}}(t)},style:{position:"absolute",top:10,right:10},children:(0,dr.jsx)(Jl,{style:{fontSize:14,color:"black"}})}),(0,dr.jsx)("p",{style:{marginBottom:0,fontSize:10},children:(0,dr.jsx)("strong",{children:e.name})}),(e.urlBase64||e.urlImageMessage)&&(0,dr.jsx)("img",{src:e.urlBase64?e.urlBase64:e.urlImageMessage,height:70,onClick:function(){return function(e){W(e),O(!0)}(e.urlBase64.length>0?e.urlBase64:e.urlImageMessage)}}),(0,dr.jsx)("p",{style:{marginBottom:20,whiteSpace:"pre-line"},children:e.content}),(0,dr.jsx)("p",{style:{position:"absolute",fontSize:10,right:5,bottom:0},children:Vt(e.id)})]},t)}))]}),(0,dr.jsx)("div",{style:{width:"100%",height:50,borderTopWidth:2,borderTopStyle:"solid",borderTopColor:"#ccc",position:"absolute",bottom:0,left:0,paddingLeft:10,paddingRight:10},children:(0,dr.jsxs)("form",{children:[u&&(0,dr.jsxs)("div",{style:{width:"70%",float:"left"},children:[!Ewe.tq&&(0,dr.jsx)("textarea",{disabled:!u,value:y,placeholder:"Ingrese comentarios",type:"text",style:{width:"100%",borderColor:"transparent",resize:"none"},onChange:function(e){ye(e.target.value)}}),Ewe.tq&&(0,dr.jsx)("textarea",{disabled:!u,id:"mobileTextArea",value:y,placeholder:"Ingrese comentarios",type:"text",style:{width:"100%",borderColor:"transparent",resize:"none"},onChange:function(e){console.log(e.target.value)},onClick:function(){Y(!0),document.getElementById("mobileTextArea").blur()}})]}),(0,dr.jsxs)("div",{style:{width:"30%",float:"right",textAlign:"right"},children:[u&&(0,dr.jsx)(cs,{onClick:function(){document.getElementById("foto").click(),oe(!1)},children:(0,dr.jsx)(Bi,{icon:Ar})}),u&&(0,dr.jsx)(cs,{onClick:function(){return xe()},children:(0,dr.jsx)(Bi,{icon:fr})}),(0,dr.jsx)("input",{autoComplete:"off",type:"file",id:"foto",accept:"image/x-png,image/jpeg",onChange:function(e){be(e.target.files[0])},hidden:!0})]})]})})]})}),u&&(0,dr.jsxs)(Yl,{style:{minWidth:400},children:[(0,dr.jsx)($l,{style:{backgroundColor:"#D5CC41",color:"#fff"},onClick:function(){we(a,!1,r)},children:"Guardar sin ejecutar"}),(0,dr.jsx)($l,{style:{backgroundColor:"#9ACF26",color:"#fff"},onClick:function(){we(a,!0,r)},children:"Guardar ejecutado"})]}),R&&(0,dr.jsx)(wwe,{open:R,image:B,handleClose:function(){O(!1)}}),P&&(0,dr.jsx)(Twe,{open:P,images:ne,handleClose:function(){F(!1)},setIsEdited:ge}),X&&(0,dr.jsx)(Mwe,{open:X,handleClose:function(){Y(!1)},saveMessage:xe,message:y,inputMessage:ye}),H&&(0,dr.jsx)($c,{open:H,withProgress:!1,loadingData:"Cargando im\xe1gen"}),J&&(0,dr.jsx)(dK,{open:J,handleClose:function(){Q(!1)},astList:ne})]})},Nwe=(0,T.forwardRef)((function(e,t){return(0,dr.jsx)(ho,cr({direction:"up",ref:t},e))})),Rwe=function(e){var t=e.handleClickOpen,n=e.open,r=e.handleClose,a=e.report,i=Ue();return(0,dr.jsxs)("div",{children:[(0,dr.jsx)($l,{variant:"outlined",onClick:t,children:"Open full-screen dialog"}),(0,dr.jsxs)(Xo,{open:n,onClose:r,TransitionComponent:Nwe,children:[(0,dr.jsx)(cs,{style:{position:"absolute",top:20,right:20,backgroundColor:"#fff"},onClick:r,children:(0,dr.jsx)(Jl,{})}),(0,dr.jsxs)("div",{style:{padding:30,textAlign:"center",height:"50vh"},children:[(0,dr.jsxs)("h1",{children:["N\xb0 de OT: ",a.idIndex]}),(0,dr.jsxs)("h2",{children:["N\xb0 SAP",a.sapId]}),(0,dr.jsxs)("h3",{children:["Tipo de reporte: ",a.reportType]}),(0,dr.jsxs)("h3",{children:["Pauta: ",a.guide]}),a.testMode&&(0,dr.jsx)("p",{style:{width:"100%",backgroundColor:"red",color:"white"},children:"OT creada para testing."}),(0,dr.jsx)("div",{style:{textAlign:"justify"},children:(0,dr.jsxs)("p",{children:["Fecha programado: ",Vt(a.datePrev),(0,dr.jsx)("br",{}),"Fecha de inicio: ",Vt(a.dateInit),(0,dr.jsx)("br",{}),"Fecha \xfaltima actualizaci\xf3n: ",Vt(a.updatedAt)]})}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,dr.jsx)("button",{onClick:function(){return i("/assignment/".concat(a.idIndex))},children:"Abrir reporte"})})]})]})]})},Owe=(0,T.forwardRef)((function(e,t){return(0,dr.jsx)(ho,cr({direction:"up",ref:t},e))})),Dwe=function(e){var t=e.open,n=e.report,r=e.closeModal,a=e.reportType,i=e.onlyClose,o=Vwe(),s=(o.admin,o.userData),l=gke(),u=l.inspectors,c=l.maitenances,d=xke().sites,h=rke().saveReport,f=(0,T.useState)([]),p=(0,U.Z)(f,2),m=p[0],v=p[1],g=(0,T.useState)(),y=(0,U.Z)(g,2),b=y[0],x=y[1],w=n.idIndex,k=n.guide,S=n.state,E=n.usersAssigned,C=n.site,_=(0,T.useState)(!1),M=(0,U.Z)(_,2),A=M[0],I=(M[1],(0,T.useState)("")),N=(0,U.Z)(I,2),R=N[0],O=(N[1],(0,T.useState)(!1)),D=(0,U.Z)(O,2),L=D[0],P=D[1],F=(0,T.useState)(),j=(0,U.Z)(F,2),z=(j[0],j[1]),B=(0,T.useState)(!0),W=(0,U.Z)(B,2),V=W[0],Z=W[1],H=(0,T.useState)(""),G=(0,U.Z)(H,2),q=G[0],X=G[1],Y=(0,T.useState)(""),K=(0,U.Z)(Y,2);K[0],K[1];(0,T.useEffect)((function(){t&&($(),v("Inspecci\xf3n"===a?u.sort((function(e,t){return e.name<t.name?-1:e.mane>t.name?1:0})):c.sort((function(e,t){return e.name<t.name?-1:e.mane>t.name?1:0}))))}),[t]),(0,T.useEffect)((function(){m&&m.length>0&&Z(!1)}),[m]),(0,T.useEffect)((function(){console.log(n)}),[n]);var $=function(){console.log(d);var e=d.filter((function(e){if(C===e.idobra)return e}));X(e[0].descripcion)},J=function(){var e=Vn(Un().mark((function e(t){var r,a,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=15;break}if(r=m.filter((function(e){if(t===e._id)return e}))[0],!window.confirm("Confirme que asignar\xe1 a ".concat(r.name," ").concat(r.lastName," a la OT ").concat(n.idIndex))){e.next=15;break}if(!(a=n).usersAssigned){e.next=14;break}return i=a.usersAssigned,console.log(i),i&&i.length>0?(i.find((function(e,n){e===t&&i.splice(n,1)})),i.unshift(t)):i.push(t),a.usersAssigned=i,a.state="En proceso",a.level=0,e.next=13,h(a);case 13:hc("nueva-asignacion","".concat(s._id),t,"Asignaciones","Se ha asignado nueva OT","OT ".concat(a.idIndex," asignada a usted"),"/assignment",n._id);case 14:Q();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){L?r():i()};return(0,T.useEffect)((function(){z(E[0]),P(!1),"Asignar"===S?x("#DE4343"):"En proceso"===S?x("#F2994A"):"Por cerrar"===S?x("#F2C94C"):"Completadas"===S&&x("#27AE60")}),[k]),(0,dr.jsx)(Xo,{open:t,TransitionComponent:Owe,adaptiveHeight:!0,children:(0,dr.jsxs)("div",{style:{padding:30},children:[(0,dr.jsxs)(mK,{style:{width:"100%",height:70,paddingLeft:0},children:[(0,dr.jsxs)("h2",{children:["Asignar Pauta de ",(0,dr.jsx)("br",{})," ",a," ",k]}),(0,dr.jsx)("div",{style:{position:"absolute",right:0,backgroundColor:b,paddingTop:3,borderRadius:5,width:100,height:20,textAlign:"center"},children:(0,dr.jsx)("p",{style:{margin:0,fontSize:12},children:S.toUpperCase()})})]}),(0,dr.jsxs)("div",{style:{width:"100%",height:90},children:[(0,dr.jsxs)("div",{style:{width:"calc(100%/3)",float:"left",display:"block",margin:0},children:[(0,dr.jsx)("strong",{children:"Faena:"})," ",(0,dr.jsx)("br",{}),q]}),(0,dr.jsxs)("div",{style:{width:"calc(100%/3)",float:"left"},children:[(0,dr.jsx)("strong",{children:"N\xfamero de orden:"})," ",(0,dr.jsx)("br",{}),w]}),(0,dr.jsxs)("div",{style:{width:"calc(100%/3)",float:"left",display:"block",margin:0},children:[(0,dr.jsx)("strong",{children:"Pauta:"})," ",(0,dr.jsx)("br",{}),k]})]}),(0,dr.jsx)("div",{style:{width:"100%",height:59},children:A&&(0,dr.jsxs)("div",{style:{width:"calc(100%/3)",float:"left"},children:[(0,dr.jsx)("strong",{children:R})," ",(0,dr.jsx)("br",{})]})}),(0,dr.jsxs)(tl,{fullWidth:!0,children:[(0,dr.jsx)(Js,{children:"Asignar Pauta a:"}),(0,dr.jsxs)(Zl,{value:"Asignar"===n.state?null:E[0],onChange:function(e){J(e.target.value)},label:"Asignar Pauta a:",disabled:V,children:[(0,dr.jsx)(gse,{style:{fontSize:15},children:V?"Leyendo operarios. Espere...".toUpperCase():"Seleccionar operario".toUpperCase()}),m.map((function(e,t){if(e.obras[0].idobra===C)return(0,dr.jsx)(gse,{style:{fontSize:15},value:e._id,children:"".concat(e.name," ").concat(e.lastName).toUpperCase()},t)}))]})]}),(0,dr.jsx)(od,{onClick:Q,style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,dr.jsx)(Jl,{style:{color:"#ccc"}})})]})})},Lwe=(0,T.forwardRef)((function(e,t){return(0,dr.jsx)(ho,cr({direction:"left",ref:t},e))})),Pwe=function(e){var t=e.open,n=e.report,r=e.onlyClose,a=(0,T.useContext)(Uwe),i=a.admin,o=a.isSapExecutive,s=oke().setReport,l=(0,T.useState)(),u=(0,U.Z)(l,2),c=u[0],d=u[1],h=n.idIndex,f=n.guide,p=n.state,m=n.siteName,v=n.usersAssigned,g=n.sapId,y=(0,T.useState)(""),b=(0,U.Z)(y,2),x=b[0],w=b[1],k=(0,T.useState)(""),S=(0,U.Z)(k,2),E=S[0],C=S[1],_=(0,T.useState)(""),M=(0,U.Z)(_,2),A=M[0],I=M[1],N=(0,T.useState)(""),R=(0,U.Z)(N,2),O=R[0],D=R[1],L=(0,T.useState)(!1),P=(0,U.Z)(L,2),F=(P[0],P[1]),j=(0,T.useState)(!1),z=(0,U.Z)(j,2),B=z[0],W=z[1],V=(0,T.useState)(g),Z=(0,U.Z)(V,2),H=Z[0],G=Z[1],q=Ue();(0,T.useEffect)((function(){X()}),[n]);var X=function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ir(n.chiefMachineryApprovedBy).then((function(e){I(e)})),ir(n.shiftManagerApprovedBy).then((function(e){C(e)})),ir(n.sapExecutiveApprovedBy).then((function(e){D(e)})),console.log(v[0]),an(v[0]).then((function(e){var t=e.data;t&&w(t.name+" "+t.lastName)})),"Asignar"===p?d("#DE4343"):"En proceso"===p?d("#F2994A"):"Por cerrar"===p?d("#F2C94C"):"Completadas"===p&&d("#27AE60");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){W(!B)},K=function(){var e=Vn(Un().mark((function e(){var t,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(H.length<1)){e.next=4;break}alert("Debe agregar alg\xfan n\xfamero SAP"),e.next=15;break;case 4:return e.prev=4,t={_id:n._id,sapId:H},e.next=8,cn(t);case 8:r=e.sent,console.log(r),r&&(n.sapId=H,Y()),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(4);case 15:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}();return(0,dr.jsx)(Xo,{open:t,TransitionComponent:Lwe,adaptiveHeight:!0,maxWidth:"xl",children:(0,dr.jsxs)("div",{style:{padding:30,width:800},children:[(0,dr.jsxs)(mK,{style:{width:"100%",height:59,paddingLeft:0},children:[(0,dr.jsxs)("h2",{children:["Mantenci\xf3n"===n.reportType?"Pauta de ".concat(n.reportType):""," ",f," SAP ",g||"N/A"]}),(0,dr.jsx)("div",{style:{position:"absolute",right:65,backgroundColor:c,paddingTop:3,borderRadius:5,width:100,height:20,textAlign:"center"},children:(0,dr.jsx)("p",{style:{margin:0,fontSize:12},children:p.toUpperCase()})})]}),(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsxs)(Es,{item:!0,xs:12,sm:12,md:4,lg:4,children:[(0,dr.jsx)("strong",{children:"Faena:"})," ",(0,dr.jsx)("br",{}),m]}),(0,dr.jsxs)(Es,{item:!0,xs:12,sm:12,md:4,lg:4,children:[(0,dr.jsx)("strong",{children:"N\xfamero de orden:"})," ",(0,dr.jsx)("br",{}),h]}),(0,dr.jsxs)(Es,{item:!0,xs:12,sm:12,md:4,lg:4,children:[(0,dr.jsx)("strong",{children:"N\xb0 SAP:"})," ",(0,dr.jsx)("br",{}),(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,children:B?(0,dr.jsx)("input",{onChange:function(e){return G(e.target.value)},value:H}):H||"N/A"}),(o||i)&&(0,dr.jsx)(Es,{item:!0,children:B?(0,dr.jsx)("button",{style:{marginLeft:10},children:(0,dr.jsx)(Bi,{icon:pr,onClick:K})}):(0,dr.jsx)("button",{style:{marginLeft:10},onClick:Y,children:(0,dr.jsx)(Bi,{icon:Fr})})})]})]})]}),(0,dr.jsx)(Es,{container:!0,children:(0,dr.jsx)(Es,{item:!0,xs:12,sm:12,md:4,lg:4,children:(0,dr.jsxs)("div",{style:{marginTop:30,width:"100%"},children:[(0,dr.jsx)("strong",{children:"Pauta:"})," ",(0,dr.jsx)("br",{}),f]})})}),(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,md:6,xs:12,sm:12,lg:6,children:(0,dr.jsxs)("div",{style:{marginTop:30,width:"100%"},children:[(0,dr.jsx)("div",{style:{width:"100%",height:59},children:(0,dr.jsxs)("label",{children:["Pauta asignada a: ",(0,dr.jsx)("b",{children:x||"No encontrado"})]})}),(0,dr.jsx)("div",{style:{width:"100%",height:59},children:(0,dr.jsxs)("label",{children:["Jefe de turno revisor: ",(0,dr.jsx)("b",{children:E.length>1?E:"No encontrado"})]})}),(0,dr.jsx)("div",{style:{width:"100%",height:59},children:(0,dr.jsxs)("label",{children:["Jefe de maquinaria revisor: ",(0,dr.jsx)("b",{children:A.length>1?A:"No encontrado"})]})}),(0,dr.jsx)("div",{style:{width:"100%",height:59},children:(0,dr.jsxs)("label",{children:["Ejecutivo SAP revisor: ",(0,dr.jsx)("b",{children:O.length>1?O:"No encontrado"})]})})]})}),(0,dr.jsx)(Es,{item:!0,children:(0,dr.jsxs)("div",{style:{marginTop:30,width:"100%"},children:[(0,dr.jsx)("div",{style:{width:"100%",height:59},children:(0,dr.jsxs)("label",{children:["Creado: ",(0,dr.jsx)("b",{children:Vt(n.createdAt)})]})}),(0,dr.jsx)("div",{style:{width:"100%",height:59},children:(0,dr.jsxs)("label",{children:["Inicio: ",(0,dr.jsx)("b",{children:"Sin informaci\xf3n"===Vt(n.dateInit)?"No inicado":Vt(n.dateInit)})]})}),(0,dr.jsx)("div",{style:{width:"100%",height:59},children:(0,dr.jsxs)("label",{children:["Finalizado: ",(0,dr.jsx)("b",{children:"Sin informaci\xf3n"===Vt(n.endReport)?"No finalizado":Vt(n.endReport)})]})}),(0,dr.jsx)("div",{style:{width:"100%",height:59},children:(0,dr.jsxs)("label",{children:["Cerrado: ",(0,dr.jsx)("b",{children:"Sin informaci\xf3n"===Vt(n.dateClose)?"No cerrado":Vt(n.dateClose)})]})})]})}),(0,dr.jsx)("div",{style:{width:"100%",textAlign:"right"}})]}),(0,dr.jsxs)(Es,{container:!0,children:[(0,dr.jsx)(Es,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:(0,dr.jsx)("div",{style:{padding:10},children:(0,dr.jsxs)("button",{style:{height:50,width:"100%",backgroundColor:"green",color:"#fff",fontSize:20},onClick:function(){s(n),q("/assignment/".concat(h))},children:[" ",(0,dr.jsxs)("strong",{children:[" ",(0,dr.jsx)(Bi,{icon:hr})," Revisar OT ",h," "]})," "]})})}),(0,dr.jsx)(Es,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:i&&(0,dr.jsx)("div",{style:{padding:10},children:(0,dr.jsxs)("button",{style:{height:50,width:"100%",backgroundColor:"red",color:"#fff",fontSize:20},onClick:function(){confirm("Se borrar\xe1 la OT ".concat(n.idIndex,". Su eliminaci\xf3n ser\xe1 permanente. \xbfDesea continuar?"))&&(F(!0),n.deleted=!0,un(n).then((function(){F(!1),location.reload()})))},children:[" ",(0,dr.jsxs)("strong",{children:[" ",(0,dr.jsx)(Bi,{icon:Gr})," Borrar OT ",h," "]})," "]})})})]}),(0,dr.jsx)(od,{onClick:r,style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,dr.jsx)(Jl,{style:{color:"#ccc"}})})]})})},Fwe=function(e){var t=e.openSign,n=e.setRefCanvasFunction,r=e.getImage,a=e.clear;return(0,dr.jsx)(Xo,{open:t,adaptiveHeight:!0,maxWidth:"xl",children:(0,dr.jsxs)("div",{style:{width:400,padding:30},children:[(0,dr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,dr.jsx)("h2",{children:"Para continuar deje su firma para la documentaci\xf3n. (Obligatorio)"})}),(0,dr.jsxs)("div",{style:{width:"100%",textAlign:"center",position:"relative"},children:[(0,dr.jsx)("div",{style:{position:"absolute",width:"100%",textAlign:"right",marginTop:10,paddingRight:30},children:(0,dr.jsx)(Bi,{size:"lg",icon:Fr,color:"#333"})}),(0,dr.jsx)(gwe,{disabled:!0,width:300,height:300,setRefCanvas:n})]}),(0,dr.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[(0,dr.jsx)("div",{style:{width:"50%",textAlign:"center",float:"left"},children:(0,dr.jsxs)($l,{onClick:function(){return a()},style:{borderStyle:"solid",borderWidth:1,borderColor:"#333",borderRadius:10},children:[(0,dr.jsx)(Bi,{size:"lg",icon:Er,color:"#333",style:{marginRight:10}})," Borrar"]})}),(0,dr.jsx)("div",{style:{width:"50%",textAlign:"center",float:"right"},children:(0,dr.jsxs)($l,{onClick:function(){return r()},style:{borderStyle:"solid",borderWidth:1,borderColor:"#333",borderRadius:10},children:[(0,dr.jsx)(Bi,{size:"lg",icon:Br,color:"#333",style:{marginRight:10}})," Guardar"]})})]})]})})},jwe=function(e){var t=e.open,n=e.report,r=e.closeModal,a=e.messageType,i=Vwe().userData,o=(0,T.useState)(""),s=(0,U.Z)(o,2),l=s[0],u=s[1];(0,T.useEffect)((function(){console.log(n)}),[n]);return(0,dr.jsx)(Xo,{open:t,children:(0,dr.jsxs)("div",{style:{padding:30,width:600},children:[(0,dr.jsxs)(Es,{container:!0,style:{padding:10},children:[(0,dr.jsxs)("div",{style:{width:"100%"},children:[(0,dr.jsx)("h1",{children:"Deje un comentario."}),(0,dr.jsx)("br",{}),(0,dr.jsx)(Ds,{"aria-label":"empty textarea",placeholder:"Deje su comentario",minRows:10,maxRows:15,style:{width:"100%",fontSize:18,fontFamily:"Raleway"},value:l,onChange:function(e){u(e.target.value)}})]}),(0,dr.jsx)("br",{}),(0,dr.jsx)("br",{}),(0,dr.jsx)($l,{variant:"contained",color:"primary",style:{borderRadius:50},onClick:function(){!function(){if(l.length>1){var e="rejectReport"===a?"reject-to-previous-level":"sending-to-next-level";n.history.push({id:Date.now(),userSendingData:i._id,type:e,message:l}),r(!0)}else alert("Por favor deje un comentario a la actividad.")}()},children:"Enviar Mensaje"})]}),(0,dr.jsx)(od,{onClick:function(){r(!1)},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,dr.jsx)(Jl,{style:{color:"#ccc"}})})]})})},zwe=function(e){var t=e.open,n=e.data,r=e.closePreviewModal;return console.log(n),(0,dr.jsx)(Xo,{open:t,children:(0,dr.jsxs)("div",{style:{width:600,padding:10},children:[(0,dr.jsx)("div",{children:(0,dr.jsx)("h2",{children:"Resumen de Insumos y Materiales"})}),(0,dr.jsx)("div",{style:{height:"calc(100vh - 290px)",overflowY:"auto",borderColor:"#ccc",borderWidth:1,borderStyle:"solid",borderRadius:20,padding:10,marginTop:50},children:0===n.length?(0,dr.jsx)("div",{children:(0,dr.jsx)("h3",{children:(0,dr.jsx)("strong",{children:"OT no registra uso de insumos y materiales para resumir"})})}):n.map((function(e,t){return(0,dr.jsxs)("div",{style:{width:"100%"},children:[(0,dr.jsx)("h2",{children:e.nombre}),e.data.map((function(e,t){return(0,dr.jsxs)("div",{style:{fontSize:16,marginLeft:20,borderBottomColor:"#ccc",borderBottomWidth:1,borderBottomStyle:"solid"},children:[(0,dr.jsx)("p",{children:(0,dr.jsx)("strong",{children:e.taskdesc})}),(0,dr.jsxs)("p",{children:["Observaci\xf3n:",(0,dr.jsx)("br",{}),(0,dr.jsx)("strong",{children:e.obs01})]}),(0,dr.jsxs)("p",{children:["Unidad de medida: ",(0,dr.jsx)("strong",{children:e.unidad})]}),(0,dr.jsxs)("p",{children:["Cantidad proyectada: ",(0,dr.jsx)("strong",{children:e.cantidad})]}),(0,dr.jsxs)("p",{children:["Cantidad usada: ",(0,dr.jsx)("strong",{children:e.unidadData})]}),(0,dr.jsxs)("p",{children:["Diferencia: ",(0,dr.jsx)("strong",{children:e.diferencia})]})]},t)}))]},t)}))}),(0,dr.jsx)(od,{onClick:r,style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,dr.jsx)(Jl,{style:{color:"#ccc"}})})]})})},Bwe=function(e){var t=e.open,n=e.close,r=e.report,a=(Vwe().userData,(0,T.useState)([])),i=(0,U.Z)(a,2),o=i[0],s=i[1];return(0,T.useEffect)((function(){r.history.forEach(function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.onLine){e.next=6;break}return e.next=3,ir(t.userSendingData);case 3:t.name=e.sent,e.next=7;break;case 6:t.name="Sin informaci\xf3n (fuera de red)";case 7:n==r.history.length-1&&s(r.history.sort((function(e,t){return t.id-e.id})));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),[]),(0,dr.jsx)(Xo,{open:t,maxWidth:"xl",adaptiveHeight:!0,children:(0,dr.jsxs)("div",{style:{width:800,padding:10},children:[(0,dr.jsx)("h1",{children:"Mensajes a las revisiones de la OT"}),(0,dr.jsxs)("div",{style:{width:"100%",overflowY:"auto",height:"calc(100vh - 300px)"},children:[0==o.length&&(0,dr.jsx)("p",{children:"No hay mensajes"}),o.length>0&&o.map((function(e,t){return(0,dr.jsx)("div",{style:{width:"100%",padding:10},children:(0,dr.jsxs)("div",{style:{borderRadius:20,backgroundColor:"#BE2E26",color:"#FFF",padding:10},children:[(0,dr.jsx)("p",{style:{fontSize:18},children:(0,dr.jsx)("strong",{children:e.name})}),(0,dr.jsx)("p",{style:{fontSize:20},children:e.message}),(0,dr.jsxs)("p",{style:{fontSize:12},children:["Fecha: ",Vt(e.id)]})]})},t)}))]}),(0,dr.jsx)(od,{onClick:function(){return n()},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,dr.jsx)(Jl,{style:{color:"#ccc"}})})]})})},Uwe=(0,T.createContext)(),Wwe=function(e){var t=(0,T.useState)(!1),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=(0,T.useState)(JSON.parse(localStorage.getItem("user"))||void 0),o=(0,U.Z)(i,2),s=o[0],l=o[1],u=(0,T.useState)(!1),c=(0,U.Z)(u,2),d=c[0],h=c[1],f=(0,T.useState)([]),p=(0,U.Z)(f,2),m=p[0],v=p[1],g=(0,T.useState)(),y=(0,U.Z)(g,2),b=y[0],x=y[1],w=(0,T.useState)(!1),k=(0,U.Z)(w,2),S=k[0],E=k[1],C=(0,T.useState)(!1),_=(0,U.Z)(C,2),M=_[0],A=_[1],I=(0,T.useState)(!1),N=(0,U.Z)(I,2),R=N[0],O=N[1],D=(0,T.useState)(!1),L=(0,U.Z)(D,2),P=L[0],F=L[1],j=(0,T.useState)(),z=(0,U.Z)(j,2),B=z[0],W=z[1],V=(0,T.useState)(!1),Z=(0,U.Z)(V,2),H=Z[0],G=Z[1],q=Ue();(0,T.useEffect)((function(){console.log(Boolean(window.localStorage.getItem("isauthenticated"))),"true"===window.localStorage.getItem("isauthenticated")&&a(!0)}),[]),(0,T.useEffect)((function(){r&&(Notification.requestPermission().then((function(e){})),s||Y())}),[r]),(0,T.useEffect)((function(){s?((!s.sign||s.sign.length<1)&&setTimeout((function(){G(!0)}),500),s.roles.length>0&&s.roles.map((function(e){"admin"===e||"superAdmin"===e?(localStorage.setItem("isAdmin",!0),h(!0)):"inspectionWorker"===e||"maintenceOperator"===e?(localStorage.setItem("isOperator",!0),E(!0)):"sapExecutive"===e?(localStorage.setItem("isSapExecutive",!0),A(!0)):"shiftManager"===e?(localStorage.setItem("isShiftManager",!0),O(!0)):"chiefMachinery"===e?(localStorage.setItem("isChiefMachinery",!0),F(!0)):(localStorage.setItem("isAdmin",!1),h(!1))}))):Y()}),[s]),(0,T.useEffect)((function(){s&&s.obras.length>0&&(x(s.obras[0]),window.localStorage.setItem("sitio",JSON.stringify(s.obras[0])))}),[s]);var X=function(){var e=Vn(Un().mark((function e(t){var n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar.initDb();case 2:return n=e.sent,r=n.database,e.next=6,ar.actualizar(t,r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Vn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("obteniendo datos de usuario desde base de datos"),e.next=3,ar.initDb();case 3:return t=e.sent,n=t.database,e.next=7,ar.consultar(n);case 7:r=e.sent,l(r[0]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K={userData:s,isAuthenticated:r,admin:d,roles:m,site:b,setSite:x,isOperator:S,isSapExecutive:M,isShiftManager:R,isChiefMachinery:P,loginRut:function(e,t){return new Promise((function(n){console.log(e),qt(e,t).then(function(){var e=Vn(Un().mark((function e(t){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),r=t.data,t.data.enabled?(v(r.roles),l(r),localStorage.setItem("user",JSON.stringify(r)),r.role&&r.role.length>0&&("admin"===r.role||"superAdmin"===r.role?(localStorage.setItem("isAdmin",!0),h(!0)):(localStorage.setItem("isAdmin",!1),h(!1))),localStorage.setItem("isauthenticated",!0),n({state:!0,response:t}),a(!0)):"usuario no encontrado"===t.data.message?(localStorage.setItem("isauthenticated",!1),a(!1),alert("Usuario no encontrado."),n({state:!1})):(localStorage.setItem("isauthenticated",!1),a(!1),alert("Su cuenta no est\xe1 habilitada, debe confirmarla."),n({state:!1}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){localStorage.setItem("isauthenticated",!1),alert(JSON.stringify(e).includes("400")?"Contrase\xf1a incorrecta":"Error de autenticaci\xf3n: "+e),a(!1)}))}))},login:function(e,t){return new Promise((function(n){Gt(e,t).then(function(){var e=Vn(Un().mark((function e(t){var r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),r=t.data,t.data.enabled?(v(r.roles),l(r),localStorage.setItem("user",JSON.stringify(r)),r.role&&r.role.length>0&&("admin"===r.role||"superAdmin"===r.role?(localStorage.setItem("isAdmin",!0),h(!0)):(localStorage.setItem("isAdmin",!1),h(!1))),localStorage.setItem("isauthenticated",!0),n({state:!0,response:t}),a(!0)):"usuario no encontrado"===t.data.message?(localStorage.setItem("isauthenticated",!1),a(!1),alert("Usuario no encontrado."),n({state:!1})):(localStorage.setItem("isauthenticated",!1),a(!1),alert("Su cuenta no est\xe1 habilitada, debe confirmarla."),n({state:!1}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){localStorage.setItem("isauthenticated",!1),alert(JSON.stringify(e).includes("400")?"Contrase\xf1a incorrecta":"Error de autenticaci\xf3n: "+e),a(!1)}))}))},logout:function(){confirm("Confirme salida de la aplicaci\xf3n. Para volver a iniciar sesi\xf3n requiere contar con internet para validar las credenciales.")&&(window.localStorage.clear(),q("/",{replace:!0}),a(!1))}};return(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)(Uwe.Provider,cr({value:K},e)),(0,dr.jsx)(Fwe,{openSign:H,setRefCanvasFunction:function(e){W(e)},getImage:function(){nn({sign:B.toDataURL()},s._id).then(Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=s).sign=B.toDataURL(),l(t),X(t),localStorage.setItem("user",JSON.stringify(t)),G(!1),alert("Muchas gracias. Su firma ha sido actualizada.");case 7:case"end":return e.stop()}}),e)}))))},clear:function(){B.clear()}})]})},Vwe=function(){return(0,T.useContext)(Uwe)},Zwe={en:JSON.parse('{"login":{"rutField":"Rut","emailField":"E-mail","passwordField":"Password","loginButton":"Login","forgotPasswordText":"Forgot password.","forgotPasswordLink":"Click here."},"restorePassword":{"passwordField":"Password","confirmPasswordField":"Confirm Password","button":"Change Password","cancel":"Cancel"},"welcome":{"inspectionButton":"Inspection","assignmentButton":"Assignment","machinesButton":"M\xe1quinas","maintenanceButton":"Maintenance","reportsButton":"Reports","configurationButton":"Configuration"},"machines":{"title":"Select machine type"},"location":{"start":"Start","inspection":"Inspection","maintenance":"Maintenance","reports":"Reports","configuration":"Configuration"},"components":{"fields":{"filter":"Search"}}}'),es:JSON.parse('{"login":{"rutField":"Rut","emailField":"E-mail","passwordField":"Contrase\xf1a","loginButton":"Ingresar","forgotPasswordText":"Olvid\xe9 mi contrase\xf1a.","forgotPasswordLink":"Click aqu\xed."},"restorePassword":{"passwordField":"Ingrese Contrase\xf1a","confirmPasswordField":"Confirme Contrase\xf1a","button":"Cambiar contrase\xf1a","cancel":"Cancelar"},"welcome":{"inspectionButton":"Inspecci\xf3n","assignmentButton":"Asignaciones","machinesButton":"M\xe1quinas","maintenanceButton":"Mantenci\xf3n","reportsButton":"Reportes","configurationButton":"Configuraci\xf3n","administrationButton":"Administraci\xf3n"},"admin":{"adminUsersButton":"Usuarios"},"roles":{"rolesUsersButton":"Roles"},"patterns":{"patternsButton":"Pautas"},"news":{"newsButton":"Noticias"},"machines":{"title":"Selecciona tipo de m\xe1quina"},"location":{"start":"Inicio","inspection":"Inspecci\xf3n","maintenance":"Mantenci\xf3n","reports":"Reportes","configuration":"Configuraci\xf3n"},"components":{"fields":{"filter":"Buscar"}}}')},Hwe={en:"English",es:"Espa\xf1ol"},Gwe=(0,T.createContext)({userLanguage:"es",dictionary:Zwe.es,languageOptions:Hwe}),qwe=function(e){var t=window.localStorage.getItem("rcml-lang"),n=(0,T.useState)(t||"es"),r=(0,U.Z)(n,2),a=r[0],i=r[1],o={userLanguage:a,dictionary:Zwe[a],languageOptions:Hwe,userLanguageChange:function(e){var t=Hwe[e]?e:"es";i(t),window.localStorage.setItem("rcml-lang",t)}};return(0,dr.jsx)(Gwe.Provider,cr({value:o},e))},Xwe=function(){return(0,T.useContext)(Gwe)},Ywe=(0,T.createContext)(),Kwe=function(e){var t=(0,T.useState)(!1),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=(0,T.useState)(""),o=(0,U.Z)(i,2),s=o[0],l=o[1],u=ze();(0,T.useEffect)((function(){var e,t=null===u||void 0===u||null===(e=u.pathname)||void 0===e?void 0:e.split("/")[1];l(t)}),[u]);var c={locationData:s,navBarOpen:r,handleNavBar:function(){return a(!r)}};return(0,dr.jsx)(Ywe.Provider,cr({value:c},e))},$we=function(){return(0,T.useContext)(Ywe)},Jwe=(0,T.createContext)(),Qwe=function(e){var t=(0,T.useState)(!0),n=(0,U.Z)(t,2),r=n[0],a=n[1];(0,T.useEffect)((function(){window.addEventListener("online",(function(){a(!0)})),window.addEventListener("offline",(function(){a(!1)}))}),[]),(0,T.useEffect)((function(){console.log("Network: ",r)}),[r]);var i={isOnline:r};return(0,dr.jsx)(Jwe.Provider,cr({value:i},e))},eke=function(){return(0,T.useContext)(Jwe)},tke=(0,T.createContext)(),nke=function(e){var t=eke().isOnline,n=Vwe(),r=n.admin,a=n.isSapExecutive,i=n.isShiftManager,o=n.isChiefMachinery,s=(n.roles,n.site),l=n.isOperator,u=n.isAuthenticated,c=n.userData,d=(0,T.useState)([]),h=(0,U.Z)(d,2),f=h[0],p=h[1],m=(0,T.useState)([]),v=(0,U.Z)(m,2),g=v[0],y=v[1],b=(0,T.useState)([]),x=(0,U.Z)(b,2),w=x[0],k=x[1],S=(0,T.useState)([]),E=(0,U.Z)(S,2),C=E[0],M=E[1],A=(0,T.useState)([]),I=(0,U.Z)(A,2),N=I[0],R=I[1],O=(0,T.useState)([]),D=(0,U.Z)(O,2),L=D[0],P=D[1],F=(0,T.useState)(!1),j=(0,U.Z)(F,2),z=j[0],B=j[1],W=(0,T.useState)([]),V=(0,U.Z)(W,2),Z=V[0],H=V[1],G=(0,T.useState)([]),q=(0,U.Z)(G,2),X=q[0],Y=q[1],K=(0,T.useState)("Descargando reportes"),$=(0,U.Z)(K,2),J=$[0],Q=$[1],ee=(0,T.useState)(!1),te=(0,U.Z)(ee,2),ne=te[0],re=te[1],ae=(0,T.useState)(!0),ie=(0,U.Z)(ae,2),oe=ie[0],se=ie[1],le=(0,T.useState)(),ue=(0,U.Z)(le,2),ce=ue[0],de=(ue[1],Ue());(0,T.useEffect)((function(){(Z||X)&&Q("")}),[Z,X]),(0,T.useEffect)((function(){if(ce){var e=(0,_.Z)(f),t=null;e.forEach((function(n,r){n._id===ce._id&&(t=r),r===e.length-1&&(null===t?(console.log("Agregando Reporte"),e.push(ce)):(console.log("Cambiando Reporte"),e[t]=ce),console.log(e),p(e))}))}}),[ce]),(0,T.useEffect)((function(){c&&u&&fe()}),[c,t,u]);var he=function(e){console.log(e),Se()},fe=function(){var e=Vn(Un().mark((function e(){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cc(c,he),uc(c,pe);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(e){console.log(e),yK()({icon:vK,title:e.title,subtitle:e.subtitle,message:e.message,theme:"red",native:!0}),e.report&&Se()};(0,T.useEffect)((function(){f.length>0?(console.log("Guardando reporte"),console.log(oe),oe?(xe(),se(!1)):R(L),y(f),console.log(f)):u&&(console.log("Guardando reporte"),Q("Descargando recursos"),be(),y([]))}),[f,u]),(0,T.useEffect)((function(){t||se(!0)}),[t]),(0,T.useEffect)((function(){N.length>0&&(Q("Guardando pautas"),ye())}),[N]);var me=function(){var e=Vn(Un().mark((function e(t){var n,r,a,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q("Guardando reportes"),n=(0,_.Z)(f),e.next=4,cn(t);case 4:r=e.sent,console.log(r),a=r.data,i=n.find((function(e,t){if(e._id===a._id)return t})),n[i]=a,p(n),console.log("reporte asignado"),alert("reporte asignado"),B(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Vn(Un().mark((function e(t,n){var r,a,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n(!0),r=(0,_.Z)(f),e.next=5,ln(t);case 5:a=e.sent,i=a.data,r.push(i),p(r),alert("Reporte ".concat(i.idIndex,", para m\xe1quina modelo ").concat(i.machine," creado satisfactoriamente.")),n(!1),de("/reports",{replace:!0});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ge=function(){var e=Vn(Un().mark((function e(t){var n,r,a,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q("Guardando reportes"),n=(0,_.Z)(f),e.next=4,cn(t);case 4:r=e.sent,console.log(r),a=r.data,i=n.find((function(e,t){if(e._id===a._id)return t})),n[i]=a,p(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Vn(Un().mark((function e(){var t,n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jn.initDbPMs();case 2:t=e.sent,n=t.database,N.forEach(function(){var e=Vn(Un().mark((function e(t,r){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jn.actualizar(t,n);case 2:r===N.length-1&&Q("");case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Vn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q("Descargando recursos"),e.next=3,Xn();case 3:return t=e.sent,n=t.database,e.next=7,$n(n);case 7:(r=e.sent).length>0?p(r):Q("");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,T.useEffect)((function(){if(Q("Guardando asignaciones"),N.length>0)if(g.length>0)if(i){var e=[],t=[];g.forEach((function(n,r){"Pauta de Inspecci\xf3n"===n.guide?n._guide="PI":n._guide=n.guide,1===n.level?(n.isPrioritary=!0,e.push(n)):(n.isPrioritary=!1,t.push(n))})),H(e),Y(t)}else if(o){var n=[],s=[];g.forEach((function(e,t){"Pauta de Inspecci\xf3n"===e.guide?e._guide="PI":e._guide=e.guide,2===e.level?(e.isPrioritary=!0,n.push(e)):(e.isPrioritary=!1,s.push(e))})),H(n),Y(s)}else(l||r||a)&&(g.forEach((function(e,t){"Pauta de Inspecci\xf3n"===e.guide?e._guide="PI":e._guide=e.guide})),Y(g));else H([]),Y([]);we()}),[g,N]),(0,T.useEffect)((function(){u&&s&&(Q("Descargando reportes"),(r||l||a||i||o)&&c&&Se())}),[r,l,a,i,o,t,u,s,c]);var xe=function(){var e=Vn(Un().mark((function e(){var t,n,r,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q("Descargando pautas"),e.next=3,jn.initDbPMs();case 3:return t=e.sent,n=t.database,e.next=7,jn.consultar(n);case 7:if(r=e.sent,console.log(r),!(r.length>0)){e.next=14;break}R(r),P(r),e.next=20;break;case 14:return e.next=16,An();case 16:a=e.sent,console.log("Pautas: ",a.data),R(a.data),P(a.data);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Vn(Un().mark((function e(){var t,n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q("Actualizando OTs"),e.next=3,Xn();case 3:return t=e.sent,n=t.database,g.forEach(function(){var e=Vn(Un().mark((function e(t,r){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=8,$n(n);case 8:e.sent.forEach(function(){var e=Vn(Un().mark((function e(t){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==g.filter((function(e){if(t.idIndex===e.idIndex)return e})).length){e.next=4;break}return e.next=4,Kn(t.idIndex,n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Q(""),B(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Vn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xn();case 2:return t=e.sent,n=t.database,e.next=6,$n(n);case 6:r=e.sent,p(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Vn(Un().mark((function e(){var n,u,d,h;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q("Sincronizando reportes"),re(!0),!t){e.next=41;break}if(console.log(l,c),!r){e.next=13;break}return e.next=7,hn();case 7:n=e.sent,console.log(n),p(n.data),re(!1),e.next=39;break;case 13:if(console.log(l,a,i,o),!l||a||i||o){e.next=24;break}return console.log(c._id,s.idobra),e.next=18,pn(c._id,s.idobra);case 18:u=e.sent,console.log(u.data),p(u.data),re(!1),e.next=39;break;case 24:if(!l||!(a||i||o)){e.next=32;break}return e.next=27,fn(s.idobra);case 27:d=e.sent,p(d.data),re(!1),e.next=39;break;case 32:if(!(a||i||o)){e.next=39;break}return e.next=35,fn(s.idobra);case 35:h=e.sent,console.log("Reportes: ",h.data),p(h.data),re(!1);case 39:e.next=43;break;case 41:ke(),re(!1);case 43:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Te={reports:f,setReports:p,assignments:g,listSelected:w,listSelectedCache:C,setListSelected:k,setListSelectedCache:M,loading:z,pautas:N,priorityAssignments:Z,normalAssignments:X,saveReport:me,saveReportToData:ge,getReports:Se,getReportsOffline:function(){ke()},message:J,setMessage:Q,statusReports:ne,setStatusReports:re,createReport:ve};return(0,dr.jsx)(dr.Fragment,{children:(0,dr.jsx)(tke.Provider,cr({value:Te},e))})},rke=function(){return(0,T.useContext)(tke)},ake=(0,T.createContext)(),ike=function(e){var t=Vwe(),n=t.isOperator,r=t.userData,a=eke().isOnline,i=(0,T.useContext)(tke),o=i.reports,s=i.setMessage,l=(0,T.useState)(),u=(0,U.Z)(l,2),c=u[0],d=u[1],h=(0,T.useState)(),f=(0,U.Z)(h,2),p=f[0],m=f[1],v=(0,T.useState)(),g=(0,U.Z)(v,2),y=g[0],b=g[1],x=(0,T.useState)(),w=(0,U.Z)(x,2),k=w[0],S=w[1],E=(0,T.useState)(),C=(0,U.Z)(E,2),M=C[0],A=C[1],I=(0,T.useState)(),N=(0,U.Z)(I,2),R=N[0],O=N[1],D=(0,T.useState)(!0),L=(0,U.Z)(D,2),P=L[0],F=L[1],j=(0,T.useState)(0),z=(0,U.Z)(j,2),B=z[0],W=z[1],V=(0,T.useState)(0),Z=(0,U.Z)(V,2),H=Z[0],G=Z[1],q=(0,T.useState)(!1),X=(0,U.Z)(q,2),Y=X[0],K=X[1],$=(0,T.useState)(""),J=(0,U.Z)($,2),Q=(J[0],J[1]),ee=(0,T.useState)(!0),te=(0,U.Z)(ee,2),ne=te[0],re=te[1],ae=ze();(0,T.useEffect)((function(){ae.pathname.includes("assignment/")||(console.log("Borrado"),re(!0),m(void 0),d(void 0),b(void 0),S(void 0),A(void 0),O(void 0),F(!0))}),[ae]),(0,T.useEffect)((function(){p&&ie()}),[p]);var ie=function(){var e=Vn(Un().mark((function e(){var t,n;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jn();case 2:return t=e.sent,n=t.database,e.next=6,Qn(p,n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,T.useEffect)((function(){c&&(console.log(c),b(c._id),S(c.idIndex),A(c.sapId),O(c.machine),F(c.testMode),s("Buscando Pauta"),se()),k&&oe()}),[c,k]),(0,T.useEffect)((function(){console.log(k)}),[k]);var oe=function(){console.log("Obteniendo reporte");var e=o.filter((function(e){if(e.idIndex===Number(k))return e}));console.log(e),d(e[0])},se=function(){var e=Vn(Un().mark((function e(){var t,i,o,l,u,d,h,f,p,v,g,y,b,x,w,k,S;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Buscando Pauta"),m(void 0),n||!a){e.next=12;break}return e.next=5,gn(c);case 5:t=e.sent,console.log(t.data),t.data._id?m(t.data):(s("OT no iniciado"),re(!1)),K(!1),setTimeout((function(){s("")}),500),e.next=76;break;case 12:if(!n||!a){e.next=65;break}return e.next=15,Jn();case 15:return i=e.sent,o=i.database,e.next=19,er(o);case 19:if(l=e.sent,!((u=l.filter((function(e){if(e.reportId===c._id)return e}))).length>0)){e.next=28;break}return e.next=24,gn(c);case 24:d=e.sent,u[0].offLineGuard>d.data.offLineGuard?m(u[0]):m(d.data),e.next=63;break;case 28:return e.next=30,gn(c);case 30:if(!(h=e.sent).data||!h.data._id){e.next=35;break}m(h.data),e.next=62;break;case 35:if(!n){e.next=60;break}return e.next=38,jn.initDbPMs();case 38:return f=e.sent,s("Guardando pauta de OT "+c.idIndex),e.next=42,jn.consultar(f.database);case 42:return p=e.sent,v=p.filter((function(e){if(e.typepm===c.guide&&c.idPm===e.idpm)return e})),e.next=46,v[0].struct.reduce((function(e,t){return e[t.strpmdesc]=[].concat((0,_.Z)(e[t.strpmdesc]||[]),[t]),e}),{});case 46:return g=e.sent,y={reportId:c._id,createdBy:r._id,group:g,offLineGuard:null},e.next=50,yn(y);case 50:return b=e.sent,console.log("Se guarda reporte ",b),e.next=54,Qn(b.data,o);case 54:if(m(b.data),console.log("Se guarda reporte ",b),c.dateInit){e.next=60;break}return c.dateInit=new Date,e.next=60,cn(c);case 60:s("No se logra descargar ejecuci\xf3n de datos."),setTimeout((function(){s("")}),1e3);case 62:setTimeout((function(){s("")}),1e3);case 63:e.next=76;break;case 65:if(!n||a){e.next=76;break}return e.next=68,Jn();case 68:return x=e.sent,w=x.database,e.next=72,er(w);case 72:k=e.sent,(S=k.filter((function(e){if(e.reportId===c._id)return e}))).length>0&&m(S[0]),setTimeout((function(){s("")}),1e3);case 76:s("");case 77:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le={report:c,setReport:d,executionReport:p,setExecutionReport:m,reportId:y,sapId:M,serieEquipo:R,modoTest:P,avanceHoja:B,avanceTotal:H,otIndex:k,setAvanceHoja:W,setAvanceTotal:G,loading:Y,setLoading:K,setOtIndex:S,setLoadingMessage:Q,reporteIniciado:ne};return(0,dr.jsx)(dr.Fragment,{children:(0,dr.jsx)(ake.Provider,cr({value:le},e))})},oke=function(){return(0,T.useContext)(ake)},ske=(0,T.createContext)(),lke=function(e){var t=(0,T.useState)([]),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=(0,T.useState)(!1),o=(0,U.Z)(i,2),s=o[0],l=o[1],u={rut:"",name:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",sites:"",obras:[],roles:[],isTest:!1},c=ze(),d=(0,T.useState)({rut:"",name:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",sites:"",obras:[],roles:[],isTest:!1}),h=(0,U.Z)(d,2),f=h[0],p=h[1];(0,T.useEffect)((function(){"/new-users"===c.pathname||p(u)}),[c]),(0,T.useEffect)((function(){if(s){var e=[];console.log(r),r.forEach((function(t){t.selected&&e.push(t.dbName)})),p(cr(cr({},f),{},{roles:e})),l(!1)}}),[s]);var m={userData:f,setUserData:p,rolesListSelectionCache:r,setRolesListSelectionCache:a,setChangeModule:l};return(0,dr.jsx)(ske.Provider,cr({value:m},e))},uke=(0,T.createContext)(),cke=function(e){var t=(0,T.useState)(""),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=(0,T.useState)(""),o=(0,U.Z)(i,2),s=o[0],l=o[1];(0,T.useEffect)((function(){a(Ut(Date.now()));var e=setInterval((function(){l(function(e){var t,n=new Date(e).getMinutes(),r=new Date(e).getHours();return t=n<10?"0"+n:n,"".concat(r<10?"0"+r:r,":").concat(t)}(Date.now()))}),100);return function(){return clearInterval(e)}}),[]);var u={date:r,hour:s};return(0,dr.jsx)(uke.Provider,cr({value:u},e))},dke=function(){return(0,T.useContext)(uke)},hke=(0,T.createContext)(),fke=function(e){var t=Vwe(),n=t.isAuthenticated,r=t.site,a=t.admin,i=(0,T.useState)([]),o=(0,U.Z)(i,2),s=o[0],l=o[1],u=(0,T.useState)([]),c=(0,U.Z)(u,2),d=c[0],h=c[1],f=(0,T.useState)(),p=(0,U.Z)(f,2),m=p[0],v=p[1],g=eke().isOnline;(0,T.useEffect)((function(){n&&(g?w():(console.log("Machines offline"),x()))}),[n,g]),(0,T.useEffect)((function(){s.length>0&&(g?r&&y():b())}),[s,g,r]);var y=function(){var e=Vn(Un().mark((function e(){var t,n,i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||a){e.next=4;break}return e.next=3,Jt(r.idobra);case 3:t=e.sent;case 4:if(!a){e.next=8;break}return e.next=7,$t();case 7:t=e.sent;case 8:return e.next=10,qn.initDbMachines();case 10:n=e.sent,i=n.database,t.data.forEach(function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=n,e.next=3,qn.actualizar(t,i);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h(t.data);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Vn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.initDbMachines();case 2:return t=e.sent,n=t.database,e.next=6,qn.consultar(n);case 6:r=e.sent,h(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Vn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pn.initDbMachines();case 2:return t=e.sent,n=t.database,e.next=6,Pn.consultar(n);case 6:r=e.sent,l(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Vn(Un().mark((function e(){var t,n,r,a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt();case 2:return t=e.sent,e.next=5,Pn.initDbMachines();case 5:n=e.sent,r=n.database,(a=(0,_.Z)(t.data)).forEach(function(){var e=Vn(Un().mark((function e(t,n){var a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.id=n,(a=new XMLHttpRequest).onload=Vn(Un().mark((function e(){var i;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=new FileReader).onload=Vn(Un().mark((function e(){var a;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:n,data:i.result.replace("data:","")},t.image=a,e.next=4,Pn.actualizar(t,r);case 4:case"end":return e.stop()}}),e)}))),i.readAsDataURL(a.response);case 3:case"end":return e.stop()}}),e)}))),a.open("GET","/assets/".concat(t.model,".png")),a.responseType="blob",a.send();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),l(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k={setMachines:l,machines:s,machinesBySite:d,machineSelected:m,setMachineSelected:v};return(0,dr.jsx)(hke.Provider,cr({value:k},e))},pke=function(){return(0,T.useContext)(hke)},mke=(0,T.createContext)(),vke=function(e){var t=Vwe(),n=t.isAuthenticated,r=t.admin,a=t.userData,i=t.site,o=(0,T.useState)([]),s=(0,U.Z)(o,2),l=s[0],u=s[1],c=(0,T.useState)([]),d=(0,U.Z)(c,2),h=d[0],f=d[1],p=(0,T.useState)([]),m=(0,U.Z)(p,2),v=m[0],g=m[1],y=(0,T.useState)([]),b=(0,U.Z)(y,2),x=b[0],w=b[1];(0,T.useEffect)((function(){n&&k()}),[n]),(0,T.useEffect)((function(){if(!r&&l.length>0&&i){var e=l.filter((function(e){if(e.obras[0]&&e.obras[0].idobra===i.idobra)return e}));f(e)}}),[l,i]),(0,T.useEffect)((function(){var e=[],t=[];(r&&l.length>0||h.length>0)&&((r?l:h).forEach((function(n){n.roles.forEach((function(r){"inspectionWorker"===r&&e.push(n),"maintenceOperator"===r&&t.push(n)}))})),console.log(e),g(e),w(t))}),[h,r,l]);var k=function(){var e=Vn(Un().mark((function e(){var t;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rn(r,!!a&&a.isTest);case 2:t=e.sent,u(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S={users:l,setUsers:u,getUsers:k,usersFilteredBySite:h,inspectors:v,maitenances:x};return(0,dr.jsx)(mke.Provider,cr({value:S},e))},gke=function(){return(0,T.useContext)(mke)},yke=(0,T.createContext)(),bke=function(e){var t=Vwe().isAuthenticated,n=eke().isOnline,r=(0,T.useState)([]),a=(0,U.Z)(r,2),i=a[0],o=a[1],s=(0,T.useState)(),l=(0,U.Z)(s,2),u=l[0],c=l[1];(0,T.useEffect)((function(){t&&(n?d():h())}),[t]);var d=function(){var e=Vn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn();case 2:return t=e.sent,e.next=5,Bn.initDbObras();case 5:n=e.sent,r=n.database,t.data.data.forEach(function(){var e=Vn(Un().mark((function e(t,n){return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=n,e.next=3,Bn.actualizar(t,r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),o(t.data.data);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Vn(Un().mark((function e(){var t,n,r;return Un().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bn.initDbObras();case 2:return t=e.sent,n=t.database,e.next=6,Bn.consultar(n);case 6:r=e.sent,o(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f={sites:i,siteSelected:u,setSiteSelected:c};return(0,dr.jsx)(yke.Provider,cr({value:f},e))},xke=function(){return(0,T.useContext)(yke)},wke=function(){var e=Vwe(),t=e.userData,n=e.loading,r=e.admin,a=e.isOperator,i=e.isSapExecutive,o=e.isShiftManager,s=e.isChiefMachinery,l=e.isAuthenticated;return(0,T.useEffect)((function(){console.log(l),l&&t&&dc(t)}),[l]),(0,dr.jsxs)("div",{style:{fontFamily:"Roboto"},children:[l&&!n&&(0,dr.jsx)(DK,{})," ",l&&!n&&(0,dr.jsx)(xK,{}),(0,dr.jsxs)(it,{children:[!l&&(0,dr.jsx)(rt,{exact:!0,path:"/reset-password",element:(0,dr.jsx)(use,{})}),!l&&(0,dr.jsx)(rt,{exact:!0,path:"/restore-password/:id",element:(0,dr.jsx)(cse,{})}),(0,dr.jsx)(rt,{path:"/login",element:(0,dr.jsx)(rse,{})}),(0,dr.jsx)(rt,{path:"/welcome",element:(0,dr.jsx)(sse,{})}),(0,dr.jsx)(rt,{path:"/",element:(0,dr.jsx)(nt,{to:l?"/welcome":"/login"})}),(0,dr.jsx)(rt,{path:"/internal-messages",element:(r||i)&&(0,dr.jsx)(Mve,{route:"internal-messages"})}),(0,dr.jsx)(rt,{exact:!0,path:"/reports",element:(0,dr.jsx)(sve,{route:"reports"})}),(0,dr.jsx)(rt,{exact:!0,path:"/reports/create-report",element:(0,dr.jsx)(lve,{route:"reports"})}),(0,dr.jsx)(rt,{exact:!0,path:"/reports/edit-report/:id",element:(0,dr.jsx)(lve,{route:"reports"})}),(0,dr.jsx)(rt,{exact:!0,path:"/alerts",element:(0,dr.jsx)(uve,{route:"alerts"})}),(0,dr.jsx)(rt,{exact:!0,path:"/user-profile",element:(0,dr.jsx)(gve,{route:"user-profile"})}),(0,dr.jsx)(rt,{exact:!0,path:"/info",element:(0,dr.jsx)(cve,{route:"info"})}),(0,dr.jsx)(rt,{exact:!0,path:"/machines",element:(0,dr.jsx)(Qoe,{route:"machines"})}),(0,dr.jsx)(rt,{exact:!0,path:"/machines/:id",element:(0,dr.jsx)(tse,{route:"machines"})}),(0,dr.jsx)(rt,{exact:!0,path:"/machines/:el/machine-detail/:id",element:(0,dr.jsx)(Yoe,{route:"machines/machine-detail"})}),!a&&(0,dr.jsx)(rt,{exact:!0,path:"/maintenance",element:(0,dr.jsx)(kve,{route:"maintenance"})}),(i||r||"superAdmin"===localStorage.getItem("role"))&&(0,dr.jsx)(rt,{exact:!0,path:"/sites",element:(0,dr.jsx)(hve,{route:"sites"})}),!i&&(0,dr.jsx)(rt,{exact:!0,path:"/sites",element:(0,dr.jsx)(kve,{route:"sites"})}),(0,dr.jsx)(rt,{exact:!0,path:"/maintance",element:(0,dr.jsx)(dse,{route:"maintance"})}),(0,dr.jsx)(rt,{exact:!0,path:"/configuration",element:(0,dr.jsx)(dve,{route:"configuration"})}),(0,dr.jsx)(rt,{exact:!0,path:"/options",element:(0,dr.jsx)(Ive,{route:"options"})}),(0,dr.jsx)(rt,{exact:!0,path:"/pauta-detail/:id",element:(0,dr.jsx)(wve,{route:"pauta-detail"})}),(0,dr.jsx)(rt,{exact:!0,path:"/administration",element:r?(0,dr.jsx)(fve,{route:"administration"}):(0,dr.jsx)(kve,{route:"administration"})}),(i||r||"sapExecutive"===localStorage.getItem("role")||"superAdmin"===localStorage.getItem("role"))&&(0,dr.jsx)(rt,{exact:!0,path:"/users",element:(0,dr.jsx)(pve,{route:"users"})}),(a||o||s||"admin"!==localStorage.getItem("role")||"sapExecutive"!==localStorage.getItem("role")||"superAdmin"!==localStorage.getItem("role"))&&(0,dr.jsx)(rt,{exact:!0,path:"/users",element:(0,dr.jsx)(kve,{route:"users"})}),(i||r||"sapExecutive"===localStorage.getItem("role")||"superAdmin"===localStorage.getItem("role"))&&(0,dr.jsx)(rt,{exact:!0,path:"/new-users",element:(0,dr.jsx)(vve,{route:"new-users"})}),(a||o||s||"admin"!==localStorage.getItem("role")||"sapExecutive"!==localStorage.getItem("role")||"superAdmin"!==localStorage.getItem("role"))&&(0,dr.jsx)(rt,{exact:!0,path:"/new-users",element:(0,dr.jsx)(kve,{route:"new-users"})}),(r||"superAdmin"===localStorage.getItem("role"))&&(0,dr.jsx)(rt,{exact:!0,path:"/roles",element:(0,dr.jsx)(yve,{route:"roles"})}),(0,dr.jsx)(rt,{exact:!0,path:"/patterns",element:(0,dr.jsx)(xve,{route:"roles"})}),(0,dr.jsx)(rt,{exact:!0,path:"/edit-user/:id",element:(0,dr.jsx)(vve,{route:"edit-user"})}),(0,dr.jsx)(rt,{path:"/assignment/:id",element:(0,dr.jsx)(_ve,{route:"assignment"})}),(0,dr.jsx)(rt,{exact:!0,path:"/assignment",element:(0,dr.jsx)(Sve,{route:"assignment"})}),(0,dr.jsx)(rt,{exact:!0,path:"/notifications",element:(0,dr.jsx)(Ave,{route:"notifications"})}),(0,dr.jsx)(rt,{exact:!0,path:"/calendar",element:(0,dr.jsx)(Rbe,{route:"calendar"})}),(0,dr.jsx)(rt,{exact:!0,path:"/news",element:(0,dr.jsx)(cwe,{})})]})]})},kke=function(){return(0,dr.jsxs)(ht,{children:[(0,dr.jsx)(gK.Notifications,{}),(0,dr.jsx)(Qwe,{children:(0,dr.jsx)(Wwe,{children:(0,dr.jsx)(ise,{children:(0,dr.jsx)(bke,{children:(0,dr.jsx)(qwe,{children:(0,dr.jsx)(Kwe,{children:(0,dr.jsx)(vke,{children:(0,dr.jsx)(nke,{children:(0,dr.jsx)(ike,{children:(0,dr.jsx)(lke,{children:(0,dr.jsx)(cke,{children:(0,dr.jsx)(fke,{children:(0,dr.jsxs)(kt,{theme:Ot,children:[(0,dr.jsx)(Ct,{}),(0,dr.jsx)(wke,{})]})})})})})})})})})})})})})]})},Ske=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Tke(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Eke=function(e){e&&e instanceof Function&&n.e(377).then(n.bind(n,9377)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))},Cke=document.getElementById("root");(0,C.s)(Cke).render((0,dr.jsx)(T.StrictMode,{children:(0,dr.jsx)(kke,{})})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ske?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Tke(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Tke(t,e)}))}}({onUpdate:function(e){var t=e.waiting;t&&(t.addEventListener("statechange",(function(e){"activated"===e.target.state&&window.location.reload()})),t.postMessage({type:"SKIP_WAITING"}))}}),Eke()}()}();
//# sourceMappingURL=main.a449718e.js.map