/*! For license information please see main.b92f8670.js.LICENSE.txt */
!function(){var e={6982:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});var r=n(8191),a=n(6683),i=function(){function e(){this.getFragmentDoc=(0,r.re)(a.Yk)}return e.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},e.prototype.transformDocument=function(e){return e},e.prototype.identify=function(e){},e.prototype.gc=function(){return[]},e.prototype.modify=function(e){return!1},e.prototype.transformForLink=function(e){return e},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read({rootId:e.id||"ROOT_QUERY",query:e.query,variables:e.variables,returnPartialData:e.returnPartialData,optimistic:t})},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read({query:this.getFragmentDoc(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,returnPartialData:e.returnPartialData,optimistic:t})},e.prototype.writeQuery=function(e){return this.write({dataId:e.id||"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables,broadcast:e.broadcast})},e.prototype.writeFragment=function(e){return this.write({dataId:e.id,result:e.data,variables:e.variables,query:this.getFragmentDoc(e.fragment,e.fragmentName),broadcast:e.broadcast})},e}()},3150:function(e,t,n){"use strict";var r;n.d(t,{C:function(){return r}}),r||(r={})},5785:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var r=function(e,t,n,r,a){this.message=e,this.path=t,this.query=n,this.clientOnly=r,this.variables=a}},814:function(e,t,n){"use strict";n.d(t,{$O:function(){return s},E_:function(){return u},RC:function(){return l},RI:function(){return o},ig:function(){return d},j:function(){return c}});var r=n(7082),a=n(2979),i=n(114),o=Object.prototype.hasOwnProperty;var s=/^[_a-z][_0-9a-z]*/i;function u(e){var t=e.match(s);return t?t[0]:e}function l(e,t,n){return!(!t||"object"!==typeof t)&&(Array.isArray(t)?t.every((function(t){return l(e,t,n)})):e.selections.every((function(e){if((0,r.My)(e)&&(0,a.LZ)(e,n)){var i=(0,r.u2)(e);return o.call(t,i)&&(!e.selectionSet||l(e.selectionSet,t[i],n))}return!0})))}function c(e){return null!==e&&"object"===typeof e&&!(0,r.Yk)(e)&&!Array.isArray(e)}function d(){return new i.w0}},6049:function(e,t,n){"use strict";n.d(t,{h:function(){return L}});var r=n(9388),a=n(8191),i=n(6982),o=n(5785),s=n(7082),u=n(4784),l=n(1198),c=n(7917),d=n(6683),h=n(2979),p=n(114),f=n(5970);var m=n(7003),v=n(814),g=Object.create(null),y=function(){return g},b=Object.create(null),x=function(){function e(e,t){var n=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(e,t){return(0,s.Yk)(e)?n.get(e.__ref,t):e&&e[t]},this.canRead=function(e){return(0,s.Yk)(e)?n.has(e.__ref):"object"===typeof e},this.toReference=function(e,t){if("string"===typeof e)return(0,s.kQ)(e);if((0,s.Yk)(e))return e;var r=n.policies.identify(e)[0];if(r){var a=(0,s.kQ)(r);return t&&n.merge(r,e),a}}}return e.prototype.toObject=function(){return(0,r.pi)({},this.data)},e.prototype.has=function(e){return void 0!==this.lookup(e,!0)},e.prototype.get=function(e,t){if(this.group.depend(e,t),v.RI.call(this.data,e)){var n=this.data[e];if(n&&v.RI.call(n,t))return n[t]}return"__typename"===t&&v.RI.call(this.policies.rootTypenamesById,e)?this.policies.rootTypenamesById[e]:this instanceof S?this.parent.get(e,t):void 0},e.prototype.lookup=function(e,t){return t&&this.group.depend(e,"__exists"),v.RI.call(this.data,e)?this.data[e]:this instanceof S?this.parent.lookup(e,t):this.policies.rootTypenamesById[e]?Object.create(null):void 0},e.prototype.merge=function(e,t){var n=this,r=this.lookup(e),a=new p.w0(E).merge(r,t);if(this.data[e]=a,a!==r&&(delete this.refs[e],this.group.caching)){var i=Object.create(null);r||(i.__exists=1),Object.keys(t).forEach((function(e){if(!r||r[e]!==a[e]){i[e]=1;var t=(0,v.E_)(e);t===e||n.policies.hasKeyArgs(a.__typename,t)||(i[t]=1),void 0!==a[e]||n instanceof S||delete a[e]}})),Object.keys(i).forEach((function(t){return n.group.dirty(e,t)}))}},e.prototype.modify=function(e,t){var n=this,a=this.lookup(e);if(a){var i=Object.create(null),o=!1,u=!0,l={DELETE:g,INVALIDATE:b,isReference:s.Yk,toReference:this.toReference,canRead:this.canRead,readField:function(t,r){return n.policies.readField("string"===typeof t?{fieldName:t,from:r||(0,s.kQ)(e)}:t,{store:n})}};if(Object.keys(a).forEach((function(s){var c=(0,v.E_)(s),d=a[s];if(void 0!==d){var h="function"===typeof t?t:t[s]||t[c];if(h){var p=h===y?g:h(d,(0,r.pi)((0,r.pi)({},l),{fieldName:c,storeFieldName:s,storage:n.getStorage(e,s)}));p===b?n.group.dirty(e,s):(p===g&&(p=void 0),p!==d&&(i[s]=p,o=!0,d=p))}void 0!==d&&(u=!1)}})),o)return this.merge(e,i),u&&(this instanceof S?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},e.prototype.delete=function(e,t,n){var r,a=this.lookup(e);if(a){var i=this.getFieldValue(a,"__typename"),o=t&&n?this.policies.getStoreFieldName({typename:i,fieldName:t,args:n}):t;return this.modify(e,o?((r={})[o]=y,r):y)}return!1},e.prototype.evict=function(e){var t=!1;return e.id&&(v.RI.call(this.data,e.id)&&(t=this.delete(e.id,e.fieldName,e.args)),this instanceof S&&(t=this.parent.evict(e)||t),(e.fieldName||t)&&this.group.dirty(e.id,e.fieldName||"__exists")),t},e.prototype.clear=function(){this.replace(null)},e.prototype.extract=function(){var e=this,t=this.toObject(),n=[];return this.getRootIdSet().forEach((function(t){v.RI.call(e.policies.rootTypenamesById,t)||n.push(t)})),n.length&&(t.__META={extraRootIds:n.sort()}),t},e.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach((function(n){e&&v.RI.call(e,n)||t.delete(n)})),e){var n=e.__META,a=(0,r._T)(e,["__META"]);Object.keys(a).forEach((function(e){t.merge(e,a[e])})),n&&n.extraRootIds.forEach(this.retain,this)}},e.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},e.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},e.prototype.getRootIdSet=function(e){return void 0===e&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof S?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},e.prototype.gc=function(){var e=this,t=this.getRootIdSet(),n=this.toObject();t.forEach((function(r){v.RI.call(n,r)&&(Object.keys(e.findChildRefIds(r)).forEach(t.add,t),delete n[r])}));var r=Object.keys(n);if(r.length){for(var a=this;a instanceof S;)a=a.parent;r.forEach((function(e){return a.delete(e)}))}return r},e.prototype.findChildRefIds=function(e){if(!v.RI.call(this.refs,e)){var t=this.refs[e]=Object.create(null),n=new Set([this.data[e]]),r=function(e){return null!==e&&"object"===typeof e};n.forEach((function(e){(0,s.Yk)(e)?t[e.__ref]=!0:r(e)&&Object.values(e).filter(r).forEach(n.add,n)}))}return this.refs[e]},e.prototype.makeCacheKey=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.group.keyMaker.lookupArray(e)},e}(),w=function(){function e(e){this.caching=e,this.d=null,this.keyMaker=new a.Gl(m.m),this.d=e?(0,a.dP)():null}return e.prototype.depend=function(e,t){if(this.d){this.d(k(e,t));var n=(0,v.E_)(t);n!==t&&this.d(k(e,n))}},e.prototype.dirty=function(e,t){this.d&&this.d.dirty(k(e,t))},e}();function k(e,t){return t+"#"+e}!function(e){var t=function(e){function t(t){var n=t.policies,r=t.resultCaching,i=void 0===r||r,o=t.seed,s=e.call(this,n,new w(i))||this;return s.storageTrie=new a.Gl(m.m),s.sharedLayerGroup=new w(i),o&&s.replace(o),s}return(0,r.ZT)(t,e),t.prototype.addLayer=function(e,t){return new S(e,this,t,this.sharedLayerGroup)},t.prototype.removeLayer=function(){return this},t.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},t}(e);e.Root=t}(x||(x={}));var S=function(e){function t(t,n,r,a){var i=e.call(this,n.policies,a)||this;return i.id=t,i.parent=n,i.replay=r,i.group=a,r(i),i}return(0,r.ZT)(t,e),t.prototype.addLayer=function(e,n){return new t(e,this,n,this.group)},t.prototype.removeLayer=function(e){var t=this,n=this.parent.removeLayer(e);return e===this.id?(this.group.caching&&Object.keys(this.data).forEach((function(e){t.data[e]!==n.lookup(e)&&t.delete(e)})),n):n===this.parent?this:n.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return(0,r.pi)((0,r.pi)({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(t){var n=this.parent.findChildRefIds(t);return v.RI.call(this.data,t)?(0,r.pi)((0,r.pi)({},n),e.prototype.findChildRefIds.call(this,t)):n},t.prototype.getStorage=function(){for(var e=this.parent;e.parent;)e=e.parent;return e.getStorage.apply(e,arguments)},t}(x);function E(e,t,n){var r=e[n],a=t[n];return(0,f.D)(r,a)?r:a}function T(e){return!!(e instanceof x&&e.group.caching)}function C(e,t){return new o.y(e.message,t.path.slice(),t.query,t.clientOnly,t.variables)}var _=function(){function e(e){var t=this;this.config=e,this.executeSelectionSet=(0,a.re)((function(e){return t.execSelectionSetImpl(e)}),{keyArgs:function(e){return[e.selectionSet,e.objectOrReference,e.context]},makeCacheKey:function(e,t,n){if(T(n.store))return n.store.makeCacheKey(e,(0,s.Yk)(t)?t.__ref:t,n.varString)}}),this.knownResults=new WeakMap,this.executeSubSelectedArray=(0,a.re)((function(e){return t.execSubSelectedArrayImpl(e)}),{makeCacheKey:function(e){var t=e.field,n=e.array,r=e.context;if(T(r.store))return r.store.makeCacheKey(t,n,r.varString)}}),this.config=(0,r.pi)({addTypename:!0},e)}return e.prototype.diffQueryAgainstStore=function(e){var t=e.store,n=e.query,a=e.rootId,i=void 0===a?"ROOT_QUERY":a,o=e.variables,u=e.returnPartialData,l=void 0===u||u,h=this.config.cache.policies;o=(0,r.pi)((0,r.pi)({},(0,c.O4)((0,c.iW)(n))),o);var p=this.executeSelectionSet({selectionSet:(0,c.p$)(n).selectionSet,objectOrReference:(0,s.kQ)(i),context:{store:t,query:n,policies:h,variables:o,varString:JSON.stringify(o),fragmentMap:(0,d.F)((0,c.kU)(n)),path:[],clientOnly:!1}}),f=p.missing&&p.missing.length>0;if(f&&!l)throw p.missing[0];return{result:p.result,missing:p.missing,complete:!f}},e.prototype.isFresh=function(e,t,n,r){if(T(r.store)&&this.knownResults.get(e)===n){var a=this.executeSelectionSet.peek(n,t,r);if(a&&e===a.result)return!0}return!1},e.prototype.execSelectionSetImpl=function(e){var t=this,n=e.selectionSet,r=e.objectOrReference,a=e.context;if((0,s.Yk)(r)&&!a.policies.rootTypenamesById[r.__ref]&&!a.store.has(r.__ref))return{result:{},missing:[C(new l.ej(4),a)]};var i=a.variables,o=a.policies,c=a.store,f=[],m={result:null},v=c.getFieldValue(r,"__typename");function g(){return m.missing||(m.missing=[])}function y(e){var t;return e.missing&&(t=g()).push.apply(t,e.missing),e.result}this.config.addTypename&&"string"===typeof v&&!o.rootIdsByTypename[v]&&f.push({__typename:v});var b=new Set(n.selections);return b.forEach((function(e){var n;if((0,h.LZ)(e,i))if((0,s.My)(e)){var c=o.readField({fieldName:e.name.value,field:e,variables:a.variables,from:r},a),p=(0,s.u2)(e);a.path.push(p);var m=a.clientOnly;a.clientOnly=m||!(!e.directives||!e.directives.some((function(e){return"client"===e.name.value}))),void 0===c?u.Gw.added(e)||g().push(C(new l.ej(5),a)):Array.isArray(c)?c=y(t.executeSubSelectedArray({field:e,array:c,context:a})):e.selectionSet&&null!=c&&(c=y(t.executeSelectionSet({selectionSet:e.selectionSet,objectOrReference:c,context:a}))),void 0!==c&&f.push(((n={})[p]=c,n)),a.clientOnly=m,(0,l.kG)(a.path.pop()===p)}else{var x=(0,d.hi)(e,a.fragmentMap);x&&o.fragmentMatches(x,v)&&x.selectionSet.selections.forEach(b.add,b)}})),m.result=(0,p.bw)(f),this.knownResults.set(m.result,n),m},e.prototype.execSubSelectedArrayImpl=function(e){var t,n=this,r=e.field,a=e.array,i=e.context;function o(e,n){return e.missing&&(t=t||[]).push.apply(t,e.missing),(0,l.kG)(i.path.pop()===n),e.result}return r.selectionSet&&(a=a.filter(i.store.canRead)),{result:a=a.map((function(e,t){return null===e?null:(i.path.push(t),Array.isArray(e)?o(n.executeSubSelectedArray({field:r,array:e,context:i}),t):r.selectionSet?o(n.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:e,context:i}),t):((0,l.kG)(i.path.pop()===t),e))})),missing:t}},e}();var M=function(){function e(e,t){this.cache=e,this.reader=t}return e.prototype.writeToStore=function(e){var t=e.query,n=e.result,a=e.dataId,i=e.store,o=e.variables,u=(0,c.$H)(t),h=(0,v.ig)();o=(0,r.pi)((0,r.pi)({},(0,c.O4)(u)),o);var p=this.processSelectionSet({result:n||Object.create(null),dataId:a,selectionSet:u.selectionSet,mergeTree:{map:new Map},context:{store:i,written:Object.create(null),merge:function(e,t){return h.merge(e,t)},variables:o,varString:JSON.stringify(o),fragmentMap:(0,d.F)((0,c.kU)(t))}});if(!(0,s.Yk)(p))throw new l.ej(7);return i.retain(p.__ref),p},e.prototype.processSelectionSet=function(e){var t=this,n=e.dataId,r=e.result,a=e.selectionSet,i=e.context,o=e.mergeTree,u=this.cache.policies,c=u.identify(r,a,i.fragmentMap),p=c[0],f=c[1];if("string"===typeof(n=n||p)){var m=i.written[n]||(i.written[n]=[]),v=(0,s.kQ)(n);if(m.indexOf(a)>=0)return v;if(m.push(a),this.reader&&this.reader.isFresh(r,v,a,i))return v}var g=Object.create(null);f&&(g=i.merge(g,f));var y=n&&u.rootTypenamesById[n]||(0,s.qw)(r,a,i.fragmentMap)||n&&i.store.get(n,"__typename");"string"===typeof y&&(g.__typename=y);var b=new Set(a.selections);if(b.forEach((function(e){var n;if((0,h.LZ)(e,i.variables))if((0,s.My)(e)){var a=(0,s.u2)(e),c=r[a];if("undefined"!==typeof c){var p=u.getStoreFieldName({typename:y,fieldName:e.name.value,field:e,variables:i.variables}),f=N(o,p),m=t.processFieldValue(c,e,i,f),v=e.selectionSet&&i.store.getFieldValue(m,"__typename")||void 0,x=u.getMergeFunction(y,e.name.value,v);x?f.info={field:e,typename:y,merge:x}:A(o,p),g=i.merge(g,((n={})[p]=m,n))}else if(u.usingPossibleTypes&&!(0,h.FS)(["defer","client"],e))throw new l.ej(8)}else{var w=(0,d.hi)(e,i.fragmentMap);w&&u.fragmentMatches(w,y,r,i.variables)&&w.selectionSet.selections.forEach(b.add,b)}})),"string"===typeof n){var x=(0,s.kQ)(n);return o.map.size&&(g=this.applyMerges(o,x,g,i)),i.store.merge(n,g),x}return g},e.prototype.processFieldValue=function(e,t,n,r){var a=this;return t.selectionSet&&null!==e?Array.isArray(e)?e.map((function(e,i){var o=a.processFieldValue(e,t,n,N(r,i));return A(r,i),o})):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:n,mergeTree:r}):e},e.prototype.applyMerges=function(e,t,n,a,i){var o,u=this;if(e.map.size&&!(0,s.Yk)(n)){var c,d=Array.isArray(n)||!(0,s.Yk)(t)&&!(0,v.j)(t)?void 0:t,h=n;d&&!i&&(i=[(0,s.Yk)(d)?d.__ref:d]);var p=function(e,t){return Array.isArray(e)?"number"===typeof t?e[t]:void 0:a.store.getFieldValue(e,String(t))};e.map.forEach((function(e,t){i&&i.push(t);var n=p(d,t),r=p(h,t),o=u.applyMerges(e,n,r,a,i);o!==r&&(c=c||new Map).set(t,o),i&&(0,l.kG)(i.pop()===t)})),c&&(n=Array.isArray(h)?h.slice(0):(0,r.pi)({},h),c.forEach((function(e,t){n[t]=e})))}return e.info?this.cache.policies.runMergeFunction(t,n,e.info,a,i&&(o=a.store).getStorage.apply(o,i)):n},e}(),I=[];function N(e,t){var n=e.map;return n.has(t)||n.set(t,I.pop()||{map:new Map}),n.get(t)}function A(e,t){var n=e.map,r=n.get(t);!r||r.info||r.map.size||(I.push(r),n.delete(t))}new Set;var R=n(4116),O=n(2011),D={dataIdFromObject:O.u,addTypename:!0,resultCaching:!0,typePolicies:{}},L=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.watches=new Set,n.typenameDocumentCache=new Map,n.makeVar=R.QS,n.txCount=0,n.maybeBroadcastWatch=(0,a.re)((function(e,t){return n.broadcastWatch.call(n,e,!!t)}),{makeCacheKey:function(e){var t=e.optimistic?n.optimisticData:n.data;if(T(t)){var r=e.optimistic,a=e.rootId,i=e.variables;return t.makeCacheKey(e.query,e.callback,JSON.stringify({optimistic:r,rootId:a,variables:i}))}}}),n.watchDep=(0,a.dP)(),n.config=(0,r.pi)((0,r.pi)({},D),t),n.addTypename=!!n.config.addTypename,n.policies=new O.r({cache:n,dataIdFromObject:n.config.dataIdFromObject,possibleTypes:n.config.possibleTypes,typePolicies:n.config.typePolicies}),n.data=new x.Root({policies:n.policies,resultCaching:n.config.resultCaching}),n.optimisticData=n.data,n.storeWriter=new M(n,n.storeReader=new _({cache:n,addTypename:n.addTypename})),n}return(0,r.ZT)(t,e),t.prototype.restore=function(e){return e&&this.data.replace(e),this},t.prototype.extract=function(e){return void 0===e&&(e=!1),(e?this.optimisticData:this.data).extract()},t.prototype.read=function(e){var t=e.returnPartialData,n=void 0!==t&&t;try{return this.storeReader.diffQueryAgainstStore({store:e.optimistic?this.optimisticData:this.data,query:e.query,variables:e.variables,rootId:e.rootId,config:this.config,returnPartialData:n}).result||null}catch(r){if(r instanceof o.y)return null;throw r}},t.prototype.write=function(e){try{return++this.txCount,this.storeWriter.writeToStore({store:this.data,query:e.query,result:e.result,dataId:e.dataId,variables:e.variables})}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.modify=function(e){if(v.RI.call(e,"id")&&!e.id)return!1;var t=e.optimistic?this.optimisticData:this.data;try{return++this.txCount,t.modify(e.id||"ROOT_QUERY",e.fields)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.diff=function(e){return this.storeReader.diffQueryAgainstStore({store:e.optimistic?this.optimisticData:this.data,rootId:e.id||"ROOT_QUERY",query:e.query,variables:e.variables,returnPartialData:e.returnPartialData,config:this.config})},t.prototype.watch=function(e){var t=this;return this.watches.size||(0,R._v)(this),this.watches.add(e),e.immediate&&this.maybeBroadcastWatch(e),function(){t.watches.delete(e)&&!t.watches.size&&(0,R.li)(t),t.watchDep.dirty(e),t.maybeBroadcastWatch.forget(e)}},t.prototype.gc=function(){return this.optimisticData.gc()},t.prototype.retain=function(e,t){return(t?this.optimisticData:this.data).retain(e)},t.prototype.release=function(e,t){return(t?this.optimisticData:this.data).release(e)},t.prototype.identify=function(e){return(0,s.Yk)(e)?e.__ref:this.policies.identify(e)[0]},t.prototype.evict=function(e){if(!e.id){if(v.RI.call(e,"id"))return!1;e=(0,r.pi)((0,r.pi)({},e),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(e)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.reset=function(){return this.data.clear(),this.optimisticData=this.data,this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){var t=this.optimisticData.removeLayer(e);t!==this.optimisticData&&(this.optimisticData=t,this.broadcastWatches())},t.prototype.performTransaction=function(e,t){var n=this,r=function(t){var r=n,a=r.data,i=r.optimisticData;++n.txCount,t&&(n.data=n.optimisticData=t);try{e(n)}finally{--n.txCount,n.data=a,n.optimisticData=i}},a=!1;"string"===typeof t?(this.optimisticData=this.optimisticData.addLayer(t,r),a=!0):null===t?r(this.data):r(),this.broadcastWatches(a)},t.prototype.transformDocument=function(e){if(this.addTypename){var t=this.typenameDocumentCache.get(e);return t||(t=(0,u.Gw)(e),this.typenameDocumentCache.set(e,t),this.typenameDocumentCache.set(t,t)),t}return e},t.prototype.broadcastWatches=function(e){var t=this;this.txCount||this.watches.forEach((function(n){return t.maybeBroadcastWatch(n,e)}))},t.prototype.broadcastWatch=function(e,t){this.watchDep.dirty(e),this.watchDep(e);var n=this.diff({query:e.query,variables:e.variables,optimistic:e.optimistic});e.optimistic&&t&&(n.fromOptimisticTransaction=!0),e.callback(n)},t}(i.R)},2011:function(e,t,n){"use strict";n.d(t,{r:function(){return g},u:function(){return h}});var r=n(9388),a=n(8191),i=n(1198),o=n(7082),s=n(7003),u=n(6683),l=n(814),c=n(4116);function d(e){return void 0!==e.args?e.args:e.field?(0,o.NC)(e.field,e.variables):null}var h=function(e,t){var n=e.__typename,r=e.id,a=e._id;if("string"===typeof n&&(t&&(t.keyObject=void 0!==r?{id:r}:void 0!==a?{_id:a}:void 0),void 0===r&&(r=a),void 0!==r))return n+":"+("number"===typeof r||"string"===typeof r?r:JSON.stringify(r))},p=function(){},f=function(e,t){return t.fieldName},m=function(e,t,n){return(0,n.mergeObjects)(e,t)},v=function(e,t){return t},g=function(){function e(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=(0,r.pi)({dataIdFromObject:h},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return e.prototype.identify=function(e,t,n){var r=t&&n?(0,o.qw)(e,t,n):e.__typename;if(r===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var a,i={typename:r,selectionSet:t,fragmentMap:n},s=r&&this.getTypePolicy(r),u=s&&s.keyFn||this.config.dataIdFromObject;u;){var l=u(e,i);if(!Array.isArray(l)){a=l;break}u=w(l)}return a=a?String(a):void 0,i.keyObject?[a,i.keyObject]:[a]},e.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach((function(n){var a=e[n],i=a.queryType,o=a.mutationType,s=a.subscriptionType,u=(0,r._T)(a,["queryType","mutationType","subscriptionType"]);i&&t.setRootTypename("Query",n),o&&t.setRootTypename("Mutation",n),s&&t.setRootTypename("Subscription",n),l.RI.call(t.toBeAdded,n)?t.toBeAdded[n].push(u):t.toBeAdded[n]=[u]}))},e.prototype.updateTypePolicy=function(e,t){var n=this,r=this.getTypePolicy(e),a=t.keyFields,i=t.fields;function o(e,t){e.merge="function"===typeof t?t:!0===t?m:!1===t?v:e.merge}o(r,t.merge),r.keyFn=!1===a?p:Array.isArray(a)?w(a):"function"===typeof a?a:r.keyFn,i&&Object.keys(i).forEach((function(t){var r=n.getFieldPolicy(e,t,!0),a=i[t];if("function"===typeof a)r.read=a;else{var s=a.keyArgs,u=a.read,l=a.merge;r.keyFn=!1===s?f:Array.isArray(s)?x(s):"function"===typeof s?s:r.keyFn,"function"===typeof u&&(r.read=u),o(r,l)}r.read&&r.merge&&(r.keyFn=r.keyFn||f)}))},e.prototype.setRootTypename=function(e,t){void 0===t&&(t=e);var n="ROOT_"+e.toUpperCase(),r=this.rootTypenamesById[n];t!==r&&((0,i.kG)(!r||r===e,1),r&&delete this.rootIdsByTypename[r],this.rootIdsByTypename[t]=n,this.rootTypenamesById[n]=t)},e.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach((function(n){t.getSupertypeSet(n,!0),e[n].forEach((function(e){t.getSupertypeSet(e,!0).add(n);var r=e.match(l.$O);r&&r[0]===e||t.fuzzySubtypes.set(e,new RegExp(e))}))}))},e.prototype.getTypePolicy=function(e){var t=this;if(!l.RI.call(this.typePolicies,e)){var n=this.typePolicies[e]=Object.create(null);n.fields=Object.create(null);var a=this.supertypeMap.get(e);a&&a.size&&a.forEach((function(e){var a=t.getTypePolicy(e),i=a.fields,o=(0,r._T)(a,["fields"]);Object.assign(n,o),Object.assign(n.fields,i)}))}var i=this.toBeAdded[e];return i&&i.length&&i.splice(0).forEach((function(n){t.updateTypePolicy(e,n)})),this.typePolicies[e]},e.prototype.getFieldPolicy=function(e,t,n){if(e){var r=this.getTypePolicy(e).fields;return r[t]||n&&(r[t]=Object.create(null))}},e.prototype.getSupertypeSet=function(e,t){var n=this.supertypeMap.get(e);return!n&&t&&this.supertypeMap.set(e,n=new Set),n},e.prototype.fragmentMatches=function(e,t,n,r){var a=this;if(!e.typeCondition)return!0;if(!t)return!1;var i=e.typeCondition.name.value;if(t===i)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(i))for(var o=this.getSupertypeSet(t,!0),s=[o],u=function(e){var t=a.getSupertypeSet(e,!1);t&&t.size&&s.indexOf(t)<0&&s.push(t)},c=!(!n||!this.fuzzySubtypes.size),d=0;d<s.length;++d){var h=s[d];if(h.has(i))return o.has(i)||o.add(i),!0;h.forEach(u),c&&d===s.length-1&&(0,l.RC)(e.selectionSet,n,r)&&(c=!1,!0,this.fuzzySubtypes.forEach((function(e,n){var r=t.match(e);r&&r[0]===t&&u(n)})))}return!1},e.prototype.hasKeyArgs=function(e,t){var n=this.getFieldPolicy(e,t,!1);return!(!n||!n.keyFn)},e.prototype.getStoreFieldName=function(e){var t,n=e.typename,r=e.fieldName,a=this.getFieldPolicy(n,r,!1),i=a&&a.keyFn;if(i&&n)for(var s={typename:n,fieldName:r,field:e.field||null,variables:e.variables},u=d(e);i;){var c=i(u,s);if(!Array.isArray(c)){t=c||r;break}i=x(c)}return void 0===t&&(t=e.field?(0,o.vf)(e.field,e.variables):(0,o.PT)(r,d(e))),!1===t?r:r===(0,l.E_)(t)?t:r+":"+t},e.prototype.readField=function(e,t){var n=e.from;if(n&&(e.field||e.fieldName)){if(void 0===e.typename){var r=t.store.getFieldValue(n,"__typename");r&&(e.typename=r)}var a=this.getStoreFieldName(e),i=(0,l.E_)(a),s=t.store.getFieldValue(n,a),u=this.getFieldPolicy(e.typename,i,!1),d=u&&u.read;if(d){var h=y(this,n,e,t,t.store.getStorage((0,o.Yk)(n)?n.__ref:n,a));return c.ab.withValue(this.cache,d,[s,h])}return s}},e.prototype.getMergeFunction=function(e,t,n){var r=this.getFieldPolicy(e,t,!1),a=r&&r.merge;return!a&&n&&(a=(r=this.getTypePolicy(n))&&r.merge),a},e.prototype.runMergeFunction=function(e,t,n,r,a){var i=n.field,o=n.typename,s=n.merge;return s===m?b(r.store.getFieldValue)(e,t):s===v?t:s(e,t,y(this,void 0,{typename:o,fieldName:i.name.value,field:i,variables:r.variables},r,a||Object.create(null)))},e}();function y(e,t,n,a,i){var s=e.getStoreFieldName(n),u=(0,l.E_)(s),c=n.variables||a.variables,h=a.store,p=h.getFieldValue,f=h.toReference,m=h.canRead;return{args:d(n),field:n.field||null,fieldName:u,storeFieldName:s,variables:c,isReference:o.Yk,toReference:f,storage:i,cache:e.cache,canRead:m,readField:function(n,i){var o="string"===typeof n?{fieldName:n,from:i}:(0,r.pi)({},n);return void 0===o.from&&(o.from=t),void 0===o.variables&&(o.variables=c),e.readField(o,a)},mergeObjects:b(p)}}function b(e){return function(t,n){if(Array.isArray(t)||Array.isArray(n))throw new i.ej(2);if(t&&"object"===typeof t&&n&&"object"===typeof n){var a=e(t,"__typename"),o=e(n,"__typename");return!(a&&o&&a!==o)&&(0,l.j)(t)&&(0,l.j)(n)?(0,r.pi)((0,r.pi)({},t),n):n}return n}}function x(e){return function(t,n){return t?n.fieldName+":"+JSON.stringify(S(t,e,!1)):n.fieldName}}function w(e){var t=new a.Gl(s.m);return function(n,r){var a;if(r.selectionSet&&r.fragmentMap){var i=t.lookupArray([r.selectionSet,r.fragmentMap]);a=i.aliasMap||(i.aliasMap=k(r.selectionSet,r.fragmentMap))}var o=r.keyObject=S(n,e,!0,a);return r.typename+":"+JSON.stringify(o)}}function k(e,t){var n=Object.create(null),r=new Set([e]);return r.forEach((function(e){e.selections.forEach((function(e){if((0,o.My)(e)){if(e.alias){var a=e.alias.value,i=e.name.value;if(i!==a)(n.aliases||(n.aliases=Object.create(null)))[i]=a}if(e.selectionSet)(n.subsets||(n.subsets=Object.create(null)))[e.name.value]=k(e.selectionSet,t)}else{var s=(0,u.hi)(e,t);s&&r.add(s.selectionSet)}}))})),n}function S(e,t,n,r){var a,o=Object.create(null);return t.forEach((function(t){if(Array.isArray(t)){if("string"===typeof a){var s=r&&r.subsets,u=s&&s[a];o[a]=S(e[a],t,n,u)}}else{var c=r&&r.aliases,d=c&&c[t]||t;l.RI.call(e,d)?o[a=t]=e[d]:((0,i.kG)(!n,3),a=void 0)}})),o}},4116:function(e,t,n){"use strict";n.d(t,{QS:function(){return l},_v:function(){return u},ab:function(){return a},li:function(){return s}});var r=n(8191),a=new(n(3135).g7),i=new WeakMap;function o(e){var t=i.get(e);return t||i.set(e,t={vars:new Set,dep:(0,r.dP)()}),t}function s(e){o(e).vars.forEach((function(t){return t.forgetCache(e)}))}function u(e){o(e).vars.forEach((function(t){return t.attachCache(e)}))}function l(e){var t=new Set,n=new Set,r=function r(s){if(arguments.length>0){if(e!==s){e=s,t.forEach((function(e){o(e).dep.dirty(r),function(e){e.broadcastWatches&&e.broadcastWatches()}(e)}));var u=Array.from(n);n.clear(),u.forEach((function(t){return t(e)}))}}else{var l=a.getValue();l&&(i(l),o(l).dep(r))}return e};r.onNextChange=function(e){return n.add(e),function(){n.delete(e)}};var i=r.attachCache=function(e){return t.add(e),o(e).vars.add(r),r};return r.forgetCache=function(e){return t.delete(e)},r}},9777:function(){},5920:function(e,t,n){"use strict";n.d(t,{f:function(){return B},J:function(){return z}});var r=n(9388),a=n(1198),i=n(5942),o=n(1764),s=n(4695),u=n(4938),l=n(5970),c=n(7003);function d(e){return e.errors&&e.errors.length>0||!1}var h=n(2127),p=n(7917),f=n(4784),m=n(2979),v=n(3134),g=n.n(v),y=n(797),b=n(2058);function x(e){return e&&"function"===typeof e.then}var w=function(e){function t(t){var n=e.call(this,(function(e){return n.addObserver(e),function(){return n.removeObserver(e)}}))||this;return n.observers=new Set,n.addCount=0,n.promise=new Promise((function(e,t){n.resolve=e,n.reject=t})),n.handlers={next:function(e){null!==n.sub&&(n.latest=["next",e],(0,y.p)(n.observers,"next",e))},error:function(e){var t=n.sub;null!==t&&(t&&Promise.resolve().then((function(){return t.unsubscribe()})),n.sub=null,n.latest=["error",e],n.reject(e),(0,y.p)(n.observers,"error",e))},complete:function(){if(null!==n.sub){var e=n.sources.shift();e?x(e)?e.then((function(e){return n.sub=e.subscribe(n.handlers)})):n.sub=e.subscribe(n.handlers):(n.sub=null,n.latest&&"next"===n.latest[0]?n.resolve(n.latest[1]):n.resolve(),(0,y.p)(n.observers,"complete"))}}},n.cancel=function(e){n.reject(e),n.sources=[],n.handlers.complete()},n.promise.catch((function(e){})),"function"===typeof t&&(t=[new(g())(t)]),x(t)?t.then((function(e){return n.start(e)}),n.handlers.error):n.start(t),n}return(0,r.ZT)(t,e),t.prototype.start=function(e){void 0===this.sub&&(this.sources=Array.from(e),this.handlers.complete())},t.prototype.deliverLastMessage=function(e){if(this.latest){var t=this.latest[0],n=e[t];n&&n.call(e,this.latest[1]),null===this.sub&&"next"===t&&e.complete&&e.complete()}},t.prototype.addObserver=function(e){this.observers.has(e)||(this.deliverLastMessage(e),this.observers.add(e),++this.addCount)},t.prototype.removeObserver=function(e,t){this.observers.delete(e)&&--this.addCount<1&&!t&&this.handlers.error(new Error("Observable cancelled prematurely"))},t.prototype.cleanup=function(e){var t=this,n=!1,r=function(){n||(n=!0,t.observers.delete(a),e())},a={next:r,error:r,complete:r},i=this.addCount;this.addObserver(a),this.addCount=i},t}(g());function k(e,t,n){return new(g())((function(r){var a=r.next,i=r.error,o=r.complete,s=0,u=!1,l={then:function(e){return new Promise((function(t){return t(e())}))}};function c(e,t){return e?function(t){++s;var n=function(){return e(t)};l=l.then(n,n).then((function(e){--s,a&&a.call(r,e),u&&d.complete()}),(function(e){throw--s,e})).catch((function(e){i&&i.call(r,e)}))}:function(e){return t&&t.call(r,e)}}var d={next:c(t,a),error:c(n,i),complete:function(){u=!0,s||o&&o.call(r)}},h=e.subscribe(d);return function(){return h.unsubscribe()}}))}(0,b.D)(w);var S=n(8221),E=n(9624),T=n(8117),C=n(344),_=n(114),M=n(6683),I=n(7082),N=n(4116),A=function(){function e(e){var t=e.cache,n=e.client,r=e.resolvers,a=e.fragmentMatcher;this.cache=t,n&&(this.client=n),r&&this.addResolvers(r),a&&this.setFragmentMatcher(a)}return e.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach((function(e){t.resolvers=(0,_.Ee)(t.resolvers,e)})):this.resolvers=(0,_.Ee)(this.resolvers,e)},e.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(e){var t=e.document,n=e.remoteResult,a=e.context,i=e.variables,o=e.onlyRunForcedResolvers,s=void 0!==o&&o;return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return t?[2,this.resolveDocument(t,n.data,a,i,this.fragmentMatcher,s).then((function(e){return(0,r.pi)((0,r.pi)({},n),{data:e.result})}))]:[2,n]}))}))},e.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(e){return(0,m.FS)(["client"],e)&&this.resolvers?e:null},e.prototype.serverQuery=function(e){return(0,f.ob)(e)},e.prototype.prepareContext=function(e){var t=this.cache;return(0,r.pi)((0,r.pi)({},e),{cache:t,getCacheKey:function(e){return t.identify(e)}})},e.prototype.addExportedVariables=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(a){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,t)||{},this.prepareContext(n),t).then((function(e){return(0,r.pi)((0,r.pi)({},t),e.exportedVariables)}))]:[2,(0,r.pi)({},t)]}))}))},e.prototype.shouldForceResolvers=function(e){var t=!1;return(0,C.Vn)(e,{Directive:{enter:function(e){if("client"===e.name.value&&e.arguments&&(t=e.arguments.some((function(e){return"always"===e.name.value&&"BooleanValue"===e.value.kind&&!0===e.value.value}))))return C.$_}}}),t},e.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:(0,f.aL)(e),variables:t,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(e,t,n,a,i,o){return void 0===n&&(n={}),void 0===a&&(a={}),void 0===i&&(i=function(){return!0}),void 0===o&&(o=!1),(0,r.mG)(this,void 0,void 0,(function(){var s,u,l,c,d,h,f,m,v;return(0,r.Jh)(this,(function(g){return s=(0,p.p$)(e),u=(0,p.kU)(e),l=(0,M.F)(u),c=s.operation,d=c?c.charAt(0).toUpperCase()+c.slice(1):"Query",f=(h=this).cache,m=h.client,v={fragmentMap:l,context:(0,r.pi)((0,r.pi)({},n),{cache:f,client:m}),variables:a,fragmentMatcher:i,defaultOperationType:d,exportedVariables:{},onlyRunForcedResolvers:o},[2,this.resolveSelectionSet(s.selectionSet,t,v).then((function(e){return{result:e,exportedVariables:v.exportedVariables}}))]}))}))},e.prototype.resolveSelectionSet=function(e,t,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s,u,l,c=this;return(0,r.Jh)(this,(function(d){return i=n.fragmentMap,o=n.context,s=n.variables,u=[t],l=function(e){return(0,r.mG)(c,void 0,void 0,(function(){var l,c;return(0,r.Jh)(this,(function(r){return(0,m.LZ)(e,s)?(0,I.My)(e)?[2,this.resolveField(e,t,n).then((function(t){var n;"undefined"!==typeof t&&u.push(((n={})[(0,I.u2)(e)]=t,n))}))]:((0,I.Ao)(e)?l=e:(l=i[e.name.value],(0,a.kG)(l,11)),l&&l.typeCondition&&(c=l.typeCondition.name.value,n.fragmentMatcher(t,c,o))?[2,this.resolveSelectionSet(l.selectionSet,t,n).then((function(e){u.push(e)}))]:[2]):[2]}))}))},[2,Promise.all(e.selections.map(l)).then((function(){return(0,_.bw)(u)}))]}))}))},e.prototype.resolveField=function(e,t,n){return(0,r.mG)(this,void 0,void 0,(function(){var a,i,o,s,u,l,c,d,h,p=this;return(0,r.Jh)(this,(function(r){return a=n.variables,i=e.name.value,o=(0,I.u2)(e),s=i!==o,u=t[o]||t[i],l=Promise.resolve(u),n.onlyRunForcedResolvers&&!this.shouldForceResolvers(e)||(c=t.__typename||n.defaultOperationType,(d=this.resolvers&&this.resolvers[c])&&(h=d[s?i:o])&&(l=Promise.resolve(N.ab.withValue(this.cache,h,[t,(0,I.NC)(e,a),n.context,{field:e,fragmentMap:n.fragmentMap}])))),[2,l.then((function(t){return void 0===t&&(t=u),e.directives&&e.directives.forEach((function(e){"export"===e.name.value&&e.arguments&&e.arguments.forEach((function(e){"as"===e.name.value&&"StringValue"===e.value.kind&&(n.exportedVariables[e.value.value]=t)}))})),e.selectionSet?null==t?t:Array.isArray(t)?p.resolveSubSelectedArray(e,t,n):e.selectionSet?p.resolveSelectionSet(e.selectionSet,t,n):void 0:t}))]}))}))},e.prototype.resolveSubSelectedArray=function(e,t,n){var r=this;return Promise.all(t.map((function(t){return null===t?null:Array.isArray(t)?r.resolveSubSelectedArray(e,t,n):e.selectionSet?r.resolveSelectionSet(e.selectionSet,t,n):void 0})))},e}(),R=new(c.m?WeakMap:Map);function O(e,t){var n=e[t];"function"===typeof n&&(e[t]=function(){return R.set(e,(R.get(e)+1)%1e15),n.apply(this,arguments)})}function D(e){e.notifyTimeout&&(clearTimeout(e.notifyTimeout),e.notifyTimeout=void 0)}var L=function(){function e(e){this.cache=e,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.diff=null,this.observableQuery=null,R.has(e)||(R.set(e,0),O(e,"evict"),O(e,"modify"),O(e,"reset"))}return e.prototype.init=function(e){var t=e.networkStatus||T.I.loading;return this.variables&&this.networkStatus!==T.I.loading&&!(0,l.D)(this.variables,e.variables)&&(t=T.I.setVariables),(0,l.D)(e.variables,this.variables)||(this.diff=null),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},e.prototype.reset=function(){D(this),this.diff=null,this.dirty=!1},e.prototype.getDiff=function(e){return void 0===e&&(e=this.variables),this.diff&&(0,l.D)(e,this.variables)?this.diff:(this.updateWatch(this.variables=e),this.diff=this.cache.diff({query:this.document,variables:e,returnPartialData:!0,optimistic:!0}))},e.prototype.setDiff=function(e){var t=this,n=this.diff;this.diff=e,this.dirty||(e&&e.result)===(n&&n.result)||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout((function(){return t.notify()}),0)))},e.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){t.getDiff().fromOptimisticTransaction?e.observe():e.reobserve()})):delete this.oqListener)},e.prototype.notify=function(){var e=this;D(this),this.shouldNotify()&&this.listeners.forEach((function(t){return t(e)})),this.dirty=!1},e.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if((0,T.O)(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if("cache-only"!==e&&"cache-and-network"!==e)return!1}return!0},e.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),delete this.cancel,this.subscriptions.forEach((function(e){return e.unsubscribe()}));var e=this.observableQuery;e&&e.stopPolling()}},e.prototype.cancel=function(){},e.prototype.updateWatch=function(e){var t=this;void 0===e&&(e=this.variables);var n=this.observableQuery;n&&"no-cache"===n.options.fetchPolicy||this.lastWatch&&this.lastWatch.query===this.document&&(0,l.D)(e,this.lastWatch.variables)||(this.cancel(),this.cancel=this.cache.watch(this.lastWatch={query:this.document,variables:e,optimistic:!0,callback:function(e){return t.setDiff(e)}}))},e.prototype.shouldWrite=function(e,t){var n=this.lastWrite;return!(n&&n.dmCount===R.get(this.cache)&&(0,l.D)(t,n.variables)&&(0,l.D)(e.data,n.result.data))},e.prototype.markResult=function(e,t,n){var r=this;this.graphQLErrors=(0,h.O)(e.errors)?e.errors:[],this.reset(),"no-cache"===t.fetchPolicy?this.diff={result:e.data,complete:!0}:!this.stopped&&n&&(P(e,t.errorPolicy)?this.cache.performTransaction((function(n){if(r.shouldWrite(e,t.variables))n.writeQuery({query:r.document,data:e.data,variables:t.variables}),r.lastWrite={result:e,variables:t.variables,dmCount:R.get(r.cache)};else if(r.diff&&r.diff.complete)return void(e.data=r.diff.result);var a=n.diff({query:r.document,variables:t.variables,returnPartialData:!0,optimistic:!0});r.stopped||r.updateWatch(t.variables),r.diff=a,a.complete&&(e.data=a.result)})):this.lastWrite=void 0)},e.prototype.markReady=function(){return this.networkError=null,this.networkStatus=T.I.ready},e.prototype.markError=function(e){return this.networkStatus=T.I.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},e}();function P(e,t){void 0===t&&(t="none");var n="ignore"===t||"all"===t,r=!d(e);return!r&&n&&e.data&&(r=!0),r}var F=Object.prototype.hasOwnProperty,j=function(){function e(e){var t=e.cache,n=e.link,r=e.queryDeduplication,a=void 0!==r&&r,i=e.onBroadcast,o=e.ssrMode,s=void 0!==o&&o,u=e.clientAwareness,l=void 0===u?{}:u,d=e.localState,h=e.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(c.m?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=t,this.link=n,this.queryDeduplication=a,this.clientAwareness=l,this.localState=d||new A({cache:t}),this.ssrMode=s,this.assumeImmutableResults=!!h,(this.onBroadcast=i)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var e=this;this.queries.forEach((function(t,n){e.stopQueryNoBroadcast(n)})),this.cancelPendingFetches(new a.ej(12))},e.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach((function(t){return t(e)})),this.fetchCancelFns.clear()},e.prototype.mutate=function(e){var t=e.mutation,n=e.variables,i=e.optimisticResponse,o=e.updateQueries,s=e.refetchQueries,u=void 0===s?[]:s,l=e.awaitRefetchQueries,c=void 0!==l&&l,p=e.update,f=e.errorPolicy,m=void 0===f?"none":f,v=e.fetchPolicy,g=e.context,y=void 0===g?{}:g;return(0,r.mG)(this,void 0,void 0,(function(){var e,s,l;return(0,r.Jh)(this,(function(f){switch(f.label){case 0:return(0,a.kG)(t,13),(0,a.kG)(!v||"no-cache"===v,14),e=this.generateMutationId(),t=this.transform(t).document,n=this.getVariables(t,n),this.transform(t).hasClientExports?[4,this.localState.addExportedVariables(t,n,y)]:[3,2];case 1:n=f.sent(),f.label=2;case 2:return s=this.mutationStore&&(this.mutationStore[e]={mutation:t,variables:n,loading:!0,error:null}),i&&this.markMutationOptimistic(i,{mutationId:e,document:t,variables:n,errorPolicy:m,updateQueries:o,update:p}),this.broadcastQueries(),l=this,[2,new Promise((function(a,f){var g,b;l.getObservableFromLink(t,(0,r.pi)((0,r.pi)({},y),{optimisticResponse:i}),n,!1).subscribe({next:function(r){if(d(r)&&"none"===m)b=new S.c({graphQLErrors:r.errors});else{if(s&&(s.loading=!1,s.error=null),"no-cache"!==v)try{l.markMutationResult({mutationId:e,result:r,document:t,variables:n,errorPolicy:m,updateQueries:o,update:p})}catch(a){return void(b=new S.c({networkError:a}))}g=r}},error:function(t){s&&(s.loading=!1,s.error=t),i&&l.cache.removeOptimistic(e),l.broadcastQueries(),f(new S.c({networkError:t}))},complete:function(){if(b&&s&&(s.loading=!1,s.error=b),i&&l.cache.removeOptimistic(e),l.broadcastQueries(),b)f(b);else{"function"===typeof u&&(u=u(g));var t=[];(0,h.O)(u)&&u.forEach((function(e){if("string"===typeof e)l.queries.forEach((function(n){var r=n.observableQuery;r&&r.hasObservers()&&r.queryName===e&&t.push(r.refetch())}));else{var n={query:e.query,variables:e.variables,fetchPolicy:"network-only"};e.context&&(n.context=e.context),t.push(l.query(n))}})),Promise.all(c?t:[]).then((function(){"ignore"===m&&g&&d(g)&&delete g.errors,a(g)}),f)}}})}))]}}))}))},e.prototype.markMutationResult=function(e,t){var n=this;if(void 0===t&&(t=this.cache),P(e.result,e.errorPolicy)){var r=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],a=e.updateQueries;a&&this.queries.forEach((function(i,o){var s=i.observableQuery,u=s&&s.queryName;if(u&&F.call(a,u)){var l=a[u],c=n.queries.get(o),d=c.document,h=c.variables,f=t.diff({query:d,variables:h,returnPartialData:!0,optimistic:!1}),m=f.result;if(f.complete&&m){var v=l(m,{mutationResult:e.result,queryName:d&&(0,p.rY)(d)||void 0,queryVariables:h});v&&r.push({result:v,dataId:"ROOT_QUERY",query:d,variables:h})}}})),t.performTransaction((function(t){r.forEach((function(e){return t.write(e)}));var n=e.update;n&&n(t,e.result)}),null)}},e.prototype.markMutationOptimistic=function(e,t){var n=this,a="function"===typeof e?e(t.variables):e;return this.cache.recordOptimisticTransaction((function(e){try{n.markMutationResult((0,r.pi)((0,r.pi)({},t),{result:{data:a}}),e)}catch(i){}}),t.mutationId)},e.prototype.fetchQuery=function(e,t,n){return this.fetchQueryObservable(e,t,n).promise},e.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach((function(t,n){e[n]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}})),e},e.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},e.prototype.transform=function(e){var t=this.transformCache;if(!t.has(e)){var n=this.cache.transformDocument(e),r=(0,f.Fo)(this.cache.transformForLink(n)),a=this.localState.clientQuery(n),i=r&&this.localState.serverQuery(r),o={document:n,hasClientExports:(0,m.mj)(n),hasForcedResolvers:this.localState.shouldForceResolvers(n),clientQuery:a,serverQuery:i,defaultVars:(0,p.O4)((0,p.$H)(n))},s=function(e){e&&!t.has(e)&&t.set(e,o)};s(e),s(n),s(a),s(i)}return t.get(e)},e.prototype.getVariables=function(e,t){return(0,r.pi)((0,r.pi)({},this.transform(e).defaultVars),t)},e.prototype.watchQuery=function(e){"undefined"===typeof(e=(0,r.pi)((0,r.pi)({},e),{variables:this.getVariables(e.query,e.variables)})).notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var t=new L(this.cache),n=new E.u({queryManager:this,queryInfo:t,options:e});return this.queries.set(n.queryId,t),t.init({document:e.query,observableQuery:n,variables:e.variables}),n},e.prototype.query=function(e){var t=this;(0,a.kG)(e.query,15),(0,a.kG)("Document"===e.query.kind,16),(0,a.kG)(!e.returnPartialData,17),(0,a.kG)(!e.pollInterval,18);var n=this.generateQueryId();return this.fetchQuery(n,e).finally((function(){return t.stopQuery(n)}))},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},e.prototype.clearStore=function(){return this.cancelPendingFetches(new a.ej(19)),this.queries.forEach((function(e){e.observableQuery?e.networkStatus=T.I.loading:e.stop()})),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset()},e.prototype.resetStore=function(){var e=this;return this.clearStore().then((function(){return e.reFetchObservableQueries()}))},e.prototype.reFetchObservableQueries=function(e){var t=this;void 0===e&&(e=!1);var n=[];return this.queries.forEach((function(r,a){var i=r.observableQuery;if(i&&i.hasObservers()){var o=i.options.fetchPolicy;i.resetLastResults(),"cache-only"===o||!e&&"standby"===o||n.push(i.refetch()),t.getQuery(a).setDiff(null)}})),this.broadcastQueries(),Promise.all(n)},e.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},e.prototype.startGraphQLSubscription=function(e){var t=this,n=e.query,r=e.fetchPolicy,a=e.errorPolicy,i=e.variables,o=e.context,s=void 0===o?{}:o;n=this.transform(n).document,i=this.getVariables(n,i);var u=function(e){return t.getObservableFromLink(n,s,e,!1).map((function(i){if("no-cache"!==r&&(P(i,a)&&t.cache.write({query:n,result:i.data,dataId:"ROOT_SUBSCRIPTION",variables:e}),t.broadcastQueries()),d(i))throw new S.c({graphQLErrors:i.errors});return i}))};if(this.transform(n).hasClientExports){var l=this.localState.addExportedVariables(n,i,s).then(u);return new(g())((function(e){var t=null;return l.then((function(n){return t=n.subscribe(e)}),e.error),function(){return t&&t.unsubscribe()}}))}return u(i)},e.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},e.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.getQuery(e).stop(),this.queries.delete(e)},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach((function(e){return e.notify()}))},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(e,t,n,a){var i,s,u=this;void 0===a&&(a=null!==(i=null===t||void 0===t?void 0:t.queryDeduplication)&&void 0!==i?i:this.queryDeduplication);var l=this.transform(e).serverQuery;if(l){var c=this.inFlightLinkObservables,d=this.link,h={query:l,variables:n,operationName:(0,p.rY)(l)||void 0,context:this.prepareContext((0,r.pi)((0,r.pi)({},t),{forceFetch:!a}))};if(t=h.context,a){var f=c.get(l)||new Map;c.set(l,f);var m=JSON.stringify(n);if(!(s=f.get(m))){var v=new w([(0,o.h)(d,h)]);f.set(m,s=v),v.cleanup((function(){f.delete(m)&&f.size<1&&c.delete(l)}))}}else s=new w([(0,o.h)(d,h)])}else s=new w([g().of({data:{}})]),t=this.prepareContext(t);var y=this.transform(e).clientQuery;return y&&(s=k(s,(function(e){return u.localState.runResolvers({document:y,remoteResult:e,context:t,variables:n})}))),s},e.prototype.getResultsFromLink=function(e,t,n){var r=e.lastRequestId=this.generateRequestId();return k(this.getObservableFromLink(e.document,n.context,n.variables),(function(a){var i=(0,h.O)(a.errors);if(r>=e.lastRequestId){if(i&&"none"===n.errorPolicy)throw e.markError(new S.c({graphQLErrors:a.errors}));e.markResult(a,n,t),e.markReady()}var o={data:a.data,loading:!1,networkStatus:e.networkStatus||T.I.ready};return i&&"ignore"!==n.errorPolicy&&(o.errors=a.errors),o}),(function(t){var n=(0,S.M)(t)?t:new S.c({networkError:t});throw r>=e.lastRequestId&&e.markError(n),n}))},e.prototype.fetchQueryObservable=function(e,t,n){var r=this;void 0===n&&(n=T.I.loading);var a=this.transform(t.query).document,i=this.getVariables(a,t.variables),o=this.getQuery(e),s=o.networkStatus,u=t.fetchPolicy,l=void 0===u?"cache-first":u,c=t.errorPolicy,d=void 0===c?"none":c,h=t.returnPartialData,p=void 0!==h&&h,f=t.notifyOnNetworkStatusChange,m=void 0!==f&&f,v=t.context,g=void 0===v?{}:v;("cache-first"===l||"cache-and-network"===l||"network-only"===l||"no-cache"===l)&&m&&"number"===typeof s&&s!==n&&(0,T.O)(n)&&("cache-first"!==l&&(l="cache-and-network"),p=!0);var y=Object.assign({},t,{query:a,variables:i,fetchPolicy:l,errorPolicy:d,returnPartialData:p,notifyOnNetworkStatusChange:m,context:g}),b=function(e){return y.variables=e,r.fetchQueryByPolicy(o,y,n)};this.fetchCancelFns.set(e,(function(e){Promise.resolve().then((function(){return x.cancel(e)}))}));var x=new w(this.transform(y.query).hasClientExports?this.localState.addExportedVariables(y.query,y.variables,y.context).then(b):b(y.variables));return x.cleanup((function(){r.fetchCancelFns.delete(e);var n=t.nextFetchPolicy;n&&(t.nextFetchPolicy=void 0,t.fetchPolicy="function"===typeof n?n.call(t,t.fetchPolicy||"cache-first"):n)})),x},e.prototype.fetchQueryByPolicy=function(e,t,n){var a=this,i=t.query,o=t.variables,s=t.fetchPolicy,u=t.errorPolicy,l=t.returnPartialData,c=t.context;e.init({document:i,variables:o,networkStatus:n});var d=function(){return e.getDiff(o)},h=function(t,n){void 0===n&&(n=e.networkStatus||T.I.loading);var s=t.result;var u=function(e){return g().of((0,r.pi)({data:e,loading:(0,T.O)(n),networkStatus:n},t.complete?null:{partial:!0}))};return a.transform(i).hasForcedResolvers?a.localState.runResolvers({document:i,remoteResult:{data:s},context:c,variables:o,onlyRunForcedResolvers:!0}).then((function(e){return u(e.data)})):u(s)},p=function(t){return a.getResultsFromLink(e,t,{variables:o,context:c,fetchPolicy:s,errorPolicy:u})};switch(s){default:case"cache-first":return(f=d()).complete?[h(f,e.markReady())]:l?[h(f),p(!0)]:[p(!0)];case"cache-and-network":var f;return(f=d()).complete||l?[h(f),p(!0)]:[p(!0)];case"cache-only":return[h(d(),e.markReady())];case"network-only":return[p(!0)];case"no-cache":return[p(!1)];case"standby":return[]}},e.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new L(this.cache)),this.queries.get(e)},e.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.localState.prepareContext(e);return(0,r.pi)((0,r.pi)({},t),{clientAwareness:this.clientAwareness})},e}();function z(e,t){return(0,s.o)(e,t,t.variables&&{variables:(0,r.pi)((0,r.pi)({},e.variables),t.variables)})}var B=function(){function e(e){var t=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.uri,r=e.credentials,o=e.headers,s=e.cache,l=e.ssrMode,c=void 0!==l&&l,d=e.ssrForceFetchDelay,h=void 0===d?0:d,p=e.connectToDevTools,f=void 0===p?"object"===typeof window&&!window.__APOLLO_CLIENT__&&!1:p,m=e.queryDeduplication,v=void 0===m||m,g=e.defaultOptions,y=e.assumeImmutableResults,b=void 0!==y&&y,x=e.resolvers,w=e.typeDefs,k=e.fragmentMatcher,S=e.name,E=e.version,T=e.link;if(T||(T=n?new u.u({uri:n,credentials:r,headers:o}):i.i.empty()),!s)throw new a.ej(9);this.link=T,this.cache=s,this.disableNetworkFetches=c||h>0,this.queryDeduplication=v,this.defaultOptions=g||{},this.typeDefs=w,h&&setTimeout((function(){return t.disableNetworkFetches=!1}),h),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),f&&"object"===typeof window&&(window.__APOLLO_CLIENT__=this),this.version="3.3.21",this.localState=new A({cache:s,client:this,resolvers:x,fragmentMatcher:k}),this.queryManager=new j({cache:this.cache,link:this.link,queryDeduplication:v,ssrMode:c,clientAwareness:{name:S,version:E},localState:this.localState,assumeImmutableResults:b,onBroadcast:f?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0})}return e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=z(this.defaultOptions.watchQuery,e)),!this.disableNetworkFetches||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e=(0,r.pi)((0,r.pi)({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},e.prototype.query=function(e){return this.defaultOptions.query&&(e=z(this.defaultOptions.query,e)),(0,a.kG)("cache-and-network"!==e.fetchPolicy,10),this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=(0,r.pi)((0,r.pi)({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},e.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=z(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},e.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.cache.readQuery(e,t)},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.cache.readFragment(e,t)},e.prototype.writeQuery=function(e){this.cache.writeQuery(e),this.queryManager.broadcastQueries()},e.prototype.writeFragment=function(e){this.cache.writeFragment(e),this.queryManager.broadcastQueries()},e.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},e.prototype.__requestRaw=function(e){return(0,o.h)(this.link,e)},e.prototype.resetStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore()})).then((function(){return Promise.all(e.resetStoreCallbacks.map((function(e){return e()})))})).then((function(){return e.reFetchObservableQueries()}))},e.prototype.clearStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore()})).then((function(){return Promise.all(e.clearStoreCallbacks.map((function(e){return e()})))}))},e.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},e.prototype.extract=function(e){return this.cache.extract(e)},e.prototype.restore=function(e){return this.cache.restore(e)},e.prototype.addResolvers=function(e){this.localState.addResolvers(e)},e.prototype.setResolvers=function(e){this.localState.setResolvers(e)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},e.prototype.setLink=function(e){this.link=this.queryManager.link=e},e}()},9624:function(e,t,n){"use strict";n.d(t,{u:function(){return y}});var r=n(9388),a=n(1198),i=n(5970),o=n(8117),s=n(797),u=n(7917),l=Object.prototype.toString;function c(e){return d(e)}function d(e,t){switch(l.call(e)){case"[object Array]":if((t=t||new Map).has(e))return t.get(e);var n=e.slice(0);return t.set(e,n),n.forEach((function(e,r){n[r]=d(e,t)})),n;case"[object Object]":if((t=t||new Map).has(e))return t.get(e);var r=Object.create(Object.getPrototypeOf(e));return t.set(e,r),Object.keys(e).forEach((function(n){r[n]=d(e[n],t)})),r;default:return e}}var h=n(2127),p=n(3134),f=n.n(p),m=n(2058),v=n(4695),g=function(){function e(e,t,n,r){this.observer=e,this.options=t,this.fetch=n,this.shouldFetch=r}return e.prototype.reobserve=function(e,t){e?this.updateOptions(e):this.updatePolling();var n=this.fetch(this.options,t);return this.concast&&this.concast.removeObserver(this.observer,!0),n.addObserver(this.observer),(this.concast=n).promise},e.prototype.updateOptions=function(e){return Object.assign(this.options,(0,v.o)(e)),this.updatePolling(),this},e.prototype.stop=function(){this.concast&&(this.concast.removeObserver(this.observer),delete this.concast),this.pollingInfo&&(clearTimeout(this.pollingInfo.timeout),this.options.pollInterval=0,this.updatePolling())},e.prototype.updatePolling=function(){var e=this,t=this.pollingInfo,n=this.options.pollInterval;if(n){if((!t||t.interval!==n)&&((0,a.kG)(n,20),!1!==this.shouldFetch)){(t||(this.pollingInfo={})).interval=n;var r=function(){e.pollingInfo&&(e.shouldFetch&&e.shouldFetch()?e.reobserve({fetchPolicy:"network-only",nextFetchPolicy:e.options.fetchPolicy||"cache-first"},o.I.poll).then(i,i):i())},i=function(){var t=e.pollingInfo;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(r,t.interval))};i()}}else t&&(clearTimeout(t.timeout),delete this.pollingInfo)},e}(),y=function(e){function t(t){var n=t.queryManager,a=t.queryInfo,i=t.options,l=e.call(this,(function(e){return l.onSubscribe(e)}))||this;l.observers=new Set,l.subscriptions=new Set,l.observer={next:function(e){(l.lastError||l.isDifferentFromLastResult(e))&&(l.updateLastResult(e),(0,s.p)(l.observers,"next",e))},error:function(e){l.updateLastResult((0,r.pi)((0,r.pi)({},l.lastResult),{error:e,errors:e.graphQLErrors,networkStatus:o.I.error,loading:!1})),(0,s.p)(l.observers,"error",l.lastError=e)}},l.isTornDown=!1,l.options=i,l.queryId=n.generateQueryId();var c=(0,u.$H)(i.query);return l.queryName=c&&c.name&&c.name.value,l.queryManager=n,l.queryInfo=a,l}return(0,r.ZT)(t,e),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var e=this;return new Promise((function(t,n){var r={next:function(n){t(n),e.observers.delete(r),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout((function(){a.unsubscribe()}),0)},error:n},a=e.subscribe(r)}))},t.prototype.getCurrentResult=function(e){void 0===e&&(e=!0);var t=this.lastResult,n=this.queryInfo.networkStatus||t&&t.networkStatus||o.I.ready,a=(0,r.pi)((0,r.pi)({},t),{loading:(0,o.O)(n),networkStatus:n});if(this.isTornDown)return a;var i=this.options.fetchPolicy,s=void 0===i?"cache-first":i;if("no-cache"===s||"network-only"===s)delete a.partial;else if(!a.data||!this.queryManager.transform(this.options.query).hasForcedResolvers){var u=this.queryInfo.getDiff();a.data=u.complete||this.options.returnPartialData?u.result:void 0,u.complete?(a.networkStatus!==o.I.loading||"cache-first"!==s&&"cache-only"!==s||(a.networkStatus=o.I.ready,a.loading=!1),delete a.partial):a.partial=!0}return e&&this.updateLastResult(a),a},t.prototype.isDifferentFromLastResult=function(e){return!(0,i.D)(this.lastResultSnapshot,e)},t.prototype.getLastResult=function(){return this.lastResult},t.prototype.getLastError=function(){return this.lastError},t.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(e){var t={pollInterval:0},n=this.options.fetchPolicy;return"no-cache"!==n&&"cache-and-network"!==n&&(t.fetchPolicy="network-only",t.nextFetchPolicy=n||"cache-first"),e&&!(0,i.D)(this.options.variables,e)&&(t.variables=this.options.variables=(0,r.pi)((0,r.pi)({},this.options.variables),e)),this.newReobserver(!1).reobserve(t,o.I.refetch)},t.prototype.fetchMore=function(e){var t=this,n=(0,r.pi)((0,r.pi)({},e.query?e:(0,r.pi)((0,r.pi)((0,r.pi)({},this.options),e),{variables:(0,r.pi)((0,r.pi)({},this.options.variables),e.variables)})),{fetchPolicy:"no-cache"}),a=this.queryManager.generateQueryId();return n.notifyOnNetworkStatusChange&&(this.queryInfo.networkStatus=o.I.fetchMore,this.observe()),this.queryManager.fetchQuery(a,n,o.I.fetchMore).then((function(r){var a=r.data,i=e.updateQuery;return i?t.updateQuery((function(e){return i(e,{fetchMoreResult:a,variables:n.variables})})):t.queryManager.cache.writeQuery({query:n.query,variables:n.variables,data:a}),r})).finally((function(){t.queryManager.stopQuery(a),t.reobserve()}))},t.prototype.subscribeToMore=function(e){var t=this,n=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables,context:e.context}).subscribe({next:function(n){var r=e.updateQuery;r&&t.updateQuery((function(e,t){var a=t.variables;return r(e,{subscriptionData:n,variables:a})}))},error:function(t){e.onError&&e.onError(t)}});return this.subscriptions.add(n),function(){t.subscriptions.delete(n)&&n.unsubscribe()}},t.prototype.setOptions=function(e){return this.reobserve(e)},t.prototype.setVariables=function(e){if((0,i.D)(this.variables,e))return this.observers.size?this.result():Promise.resolve();if(this.options.variables=e,!this.observers.size)return Promise.resolve();var t=this.options.fetchPolicy,n=void 0===t?"cache-first":t,r={fetchPolicy:n,variables:e};return"cache-first"!==n&&"no-cache"!==n&&"network-only"!==n&&(r.fetchPolicy="cache-and-network",r.nextFetchPolicy=n),this.reobserve(r,o.I.setVariables)},t.prototype.updateQuery=function(e){var t,n=this.queryManager,r=e(n.cache.diff({query:this.options.query,variables:this.variables,previousResult:null===(t=this.lastResult)||void 0===t?void 0:t.data,returnPartialData:!0,optimistic:!1}).result,{variables:this.variables});r&&(n.cache.writeQuery({query:this.options.query,data:r,variables:this.variables}),n.broadcastQueries())},t.prototype.startPolling=function(e){this.getReobserver().updateOptions({pollInterval:e})},t.prototype.stopPolling=function(){this.reobserver&&this.reobserver.updateOptions({pollInterval:0})},t.prototype.updateLastResult=function(e){var t=this.lastResult;return this.lastResult=e,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?e:c(e),(0,h.O)(e.errors)||delete this.lastError,t},t.prototype.onSubscribe=function(e){var t=this;if(e===this.observer)return function(){};try{var n=e._subscription._observer;n&&!n.error&&(n.error=b)}catch(a){}var r=!this.observers.size;return this.observers.add(e),this.lastError?e.error&&e.error(this.lastError):this.lastResult&&e.next&&e.next(this.lastResult),r&&this.reobserve().catch((function(e){})),function(){t.observers.delete(e)&&!t.observers.size&&t.tearDownQuery()}},t.prototype.getReobserver=function(){return this.reobserver||(this.reobserver=this.newReobserver(!0))},t.prototype.newReobserver=function(e){var t=this,n=this.queryManager,a=this.queryId;return n.setObservableQuery(this),new g(this.observer,e?this.options:(0,r.pi)({},this.options),(function(e,r){return n.setObservableQuery(t),n.fetchQueryObservable(a,e,r)}),!n.ssrMode&&function(){return!(0,o.O)(t.queryInfo.networkStatus)})},t.prototype.reobserve=function(e,t){return this.isTornDown=!1,this.getReobserver().reobserve(e,t)},t.prototype.observe=function(){this.observer.next(this.getCurrentResult(!1))},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.reobserver&&(this.reobserver.stop(),delete this.reobserver),this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t}(f());function b(e){}(0,m.D)(y)},7795:function(e,t,n){"use strict";n.r(t),n.d(t,{ApolloCache:function(){return d.R},ApolloClient:function(){return r.f},ApolloError:function(){return l.c},Cache:function(){return c.C},HttpLink:function(){return y.HttpLink},InMemoryCache:function(){return h.h},MissingFieldError:function(){return p.y},NetworkStatus:function(){return i.I},Observable:function(){return E.a},ObservableQuery:function(){return a.u},checkFetcher:function(){return y.checkFetcher},createHttpLink:function(){return y.createHttpLink},createSignalIfSupported:function(){return y.createSignalIfSupported},defaultDataIdFromObject:function(){return f.u},disableExperimentalFragmentVariables:function(){return _.J9},disableFragmentWarnings:function(){return _._t},enableExperimentalFragmentVariables:function(){return _.wO},fallbackHttpConfig:function(){return y.fallbackHttpConfig},fromError:function(){return b.Q},fromPromise:function(){return w.p},gql:function(){return _.ZP},isApolloError:function(){return l.M},isReference:function(){return T.Yk},makeReference:function(){return T.kQ},makeVar:function(){return m.QS},mergeOptions:function(){return r.J},parseAndCheckHttpResponse:function(){return y.parseAndCheckHttpResponse},resetCaches:function(){return _.HW},rewriteURIForGET:function(){return y.rewriteURIForGET},selectHttpOptionsAndBody:function(){return y.selectHttpOptionsAndBody},selectURI:function(){return y.selectURI},serializeFetchParameter:function(){return y.serializeFetchParameter},setLogVerbosity:function(){return C.U6},throwServerError:function(){return k.P},toPromise:function(){return x.V}});var r=n(5920),a=n(9624),i=n(8117),o=n(7382),s={};for(var u in o)["default","ApolloClient","mergeOptions","ObservableQuery","NetworkStatus","isApolloError","ApolloError","Cache","ApolloCache","InMemoryCache","MissingFieldError","defaultDataIdFromObject","makeVar","fromError","toPromise","fromPromise","throwServerError","Observable","isReference","makeReference","setLogVerbosity","gql","resetCaches","disableFragmentWarnings","enableExperimentalFragmentVariables","disableExperimentalFragmentVariables"].indexOf(u)<0&&(s[u]=function(e){return o[e]}.bind(0,u));n.d(t,s);var l=n(8221),c=n(3150),d=n(6982),h=n(6049),p=n(5785),f=n(2011),m=n(4116),v=n(9777);s={};for(var u in v)["default","ApolloClient","mergeOptions","ObservableQuery","NetworkStatus","isApolloError","ApolloError","Cache","ApolloCache","InMemoryCache","MissingFieldError","defaultDataIdFromObject","makeVar","fromError","toPromise","fromPromise","throwServerError","Observable","isReference","makeReference","setLogVerbosity","gql","resetCaches","disableFragmentWarnings","enableExperimentalFragmentVariables","disableExperimentalFragmentVariables"].indexOf(u)<0&&(s[u]=function(e){return v[e]}.bind(0,u));n.d(t,s);var g=n(4176);s={};for(var u in g)["default","ApolloClient","mergeOptions","ObservableQuery","NetworkStatus","isApolloError","ApolloError","Cache","ApolloCache","InMemoryCache","MissingFieldError","defaultDataIdFromObject","makeVar","fromError","toPromise","fromPromise","throwServerError","Observable","isReference","makeReference","setLogVerbosity","gql","resetCaches","disableFragmentWarnings","enableExperimentalFragmentVariables","disableExperimentalFragmentVariables"].indexOf(u)<0&&(s[u]=function(e){return g[e]}.bind(0,u));n.d(t,s);var y=n(4486),b=n(650),x=n(1896),w=n(6004),k=n(5209),S=n(3134),E=n.n(S),T=n(7082),C=n(1198),_=n(8651);(0,C.U6)("log")},8117:function(e,t,n){"use strict";var r;function a(e){return!!e&&e<7}n.d(t,{I:function(){return r},O:function(){return a}}),function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"}(r||(r={}))},7382:function(){},8221:function(e,t,n){"use strict";n.d(t,{M:function(){return i},c:function(){return o}});var r=n(9388),a=n(2127);function i(e){return e.hasOwnProperty("graphQLErrors")}var o=function(e){function t(n){var r=n.graphQLErrors,i=n.networkError,o=n.errorMessage,s=n.extraInfo,u=e.call(this,o)||this;return u.graphQLErrors=r||[],u.networkError=i||null,u.message=o||function(e){var t="";return(0,a.O)(e.graphQLErrors)&&e.graphQLErrors.forEach((function(e){var n=e?e.message:"Error message not found.";t+=n+"\n"})),e.networkError&&(t+=e.networkError.message+"\n"),t=t.replace(/\n$/,"")}(u),u.extraInfo=s,u.__proto__=t.prototype,u}return(0,r.ZT)(t,e),t}(Error)},6212:function(e,t,n){"use strict";n.d(t,{ApolloProvider:function(){return a.ApolloProvider}});var r=n(7795);n.o(r,"ApolloLink")&&n.d(t,{ApolloLink:function(){return r.ApolloLink}}),n.o(r,"ApolloProvider")&&n.d(t,{ApolloProvider:function(){return r.ApolloProvider}});var a=n(2582);n.o(a,"ApolloLink")&&n.d(t,{ApolloLink:function(){return a.ApolloLink}})},5942:function(e,t,n){"use strict";n.d(t,{i:function(){return d}});var r=n(9388),a=n(1198),i=n(3134),o=n.n(i);var s=n(7917);function u(e,t){return t?t(e):o().of()}function l(e){return"function"===typeof e?new d(e):e}function c(e){return e.request.length<=1}!function(e){function t(t,n){var r=e.call(this,t)||this;return r.link=n,r}(0,r.ZT)(t,e)}(Error);var d=function(){function e(e){e&&(this.request=e)}return e.empty=function(){return new e((function(){return o().of()}))},e.from=function(t){return 0===t.length?e.empty():t.map(l).reduce((function(e,t){return e.concat(t)}))},e.split=function(t,n,r){var a=l(n),i=l(r||new e(u));return c(a)&&c(i)?new e((function(e){return t(e)?a.request(e)||o().of():i.request(e)||o().of()})):new e((function(e,n){return t(e)?a.request(e,n)||o().of():i.request(e,n)||o().of()}))},e.execute=function(e,t){return e.request(function(e,t){var n=(0,r.pi)({},e);return Object.defineProperty(t,"setContext",{enumerable:!1,value:function(e){n="function"===typeof e?(0,r.pi)((0,r.pi)({},n),e(n)):(0,r.pi)((0,r.pi)({},n),e)}}),Object.defineProperty(t,"getContext",{enumerable:!1,value:function(){return(0,r.pi)({},n)}}),t}(t.context,function(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName="string"!==typeof t.query?(0,s.rY)(t.query)||void 0:""),t}(function(e){for(var t=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(t.indexOf(i)<0)throw new a.ej(26)}return e}(t))))||o().of()},e.concat=function(t,n){var r=l(t);if(c(r))return r;var a=l(n);return c(a)?new e((function(e){return r.request(e,(function(e){return a.request(e)||o().of()}))||o().of()})):new e((function(e,t){return r.request(e,(function(e){return a.request(e,t)||o().of()}))||o().of()}))},e.prototype.split=function(t,n,r){return this.concat(e.split(t,n,r||new e(u)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(e,t){throw new a.ej(21)},e.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},e.prototype.setOnError=function(e){return this.onError=e,this},e}()},3496:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r=n(5942).i.concat},8240:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});var r=n(5942).i.empty},1764:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var r=n(5942).i.execute},5464:function(e,t,n){"use strict";n.d(t,{D:function(){return r}});var r=n(5942).i.from},4176:function(e,t,n){"use strict";n.r(t),n.d(t,{ApolloLink:function(){return u.i},concat:function(){return o.z},empty:function(){return r.c},execute:function(){return s.h},from:function(){return a.D},split:function(){return i.V}});var r=n(8240),a=n(5464),i=n(8413),o=n(3496),s=n(1764),u=n(5942),l=n(9698),c={};for(var d in l)["default","empty","from","split","concat","execute","ApolloLink"].indexOf(d)<0&&(c[d]=function(e){return l[e]}.bind(0,d));n.d(t,c)},8413:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var r=n(5942).i.split},9698:function(){},4938:function(e,t,n){"use strict";n.d(t,{u:function(){return o}});var r=n(9388),a=n(5942),i=n(9832),o=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,(0,i.L)(t).request)||this;return n.options=t,n}return(0,r.ZT)(t,e),t}(a.i)},47:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var r=n(1198),a=function(e){if(!e&&"undefined"===typeof fetch)throw new r.ej(22)}},9832:function(e,t,n){"use strict";n.d(t,{L:function(){return v}});var r=n(9388),a=n(344),i=n(5942),o=n(3134),s=n.n(o),u=n(8812),l=n(7493),c=n(2713),d=n(47),h=n(3523),p=n(5784),f=n(5485),m=n(650),v=function(e){void 0===e&&(e={});var t=e.uri,n=void 0===t?"/graphql":t,o=e.fetch,v=e.includeExtensions,g=e.useGETForQueries,y=e.includeUnusedVariables,b=void 0!==y&&y,x=(0,r._T)(e,["uri","fetch","includeExtensions","useGETForQueries","includeUnusedVariables"]);(0,d.U)(o),o||(o=fetch);var w={http:{includeExtensions:v},options:x.fetchOptions,credentials:x.credentials,headers:x.headers};return new i.i((function(e){var t=(0,l.r)(e,n),i=e.getContext(),d={};if(i.clientAwareness){var v=i.clientAwareness,y=v.name,x=v.version;y&&(d["apollographql-client-name"]=y),x&&(d["apollographql-client-version"]=x)}var k,S=(0,r.pi)((0,r.pi)({},d),i.headers),E={http:i.http,options:i.fetchOptions,credentials:i.credentials,headers:S},T=(0,h.E)(e,h.S,w,E),C=T.options,_=T.body;if(_.variables&&!b){var M=new Set(Object.keys(_.variables));(0,a.Vn)(e.query,{Variable:function(e,t,n){n&&"VariableDefinition"!==n.kind&&M.delete(e.name.value)}}),M.size&&(_.variables=(0,r.pi)({},_.variables),M.forEach((function(e){delete _.variables[e]})))}if(!C.signal){var I=(0,p.$)(),N=I.controller,A=I.signal;(k=N)&&(C.signal=A)}if(g&&!e.query.definitions.some((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation}))&&(C.method="GET"),"GET"===C.method){var R=(0,f.H)(t,_),O=R.newURI,D=R.parseError;if(D)return(0,m.Q)(D);t=O}else try{C.body=(0,u.g)(_,"Payload")}catch(D){return(0,m.Q)(D)}return new(s())((function(n){return o(t,C).then((function(t){return e.setContext({response:t}),t})).then((0,c.d)(e)).then((function(e){return n.next(e),n.complete(),e})).catch((function(e){"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&n.next(e.result),n.error(e))})),function(){k&&k.abort()}}))}))}},5784:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});var r=function(){if("undefined"===typeof AbortController)return{controller:!1,signal:!1};var e=new AbortController;return{controller:e,signal:e.signal}}},4486:function(e,t,n){"use strict";n.r(t),n.d(t,{HttpLink:function(){return c.u},checkFetcher:function(){return o.U},createHttpLink:function(){return l.L},createSignalIfSupported:function(){return s.$},fallbackHttpConfig:function(){return i.S},parseAndCheckHttpResponse:function(){return r.d},rewriteURIForGET:function(){return d.H},selectHttpOptionsAndBody:function(){return i.E},selectURI:function(){return u.r},serializeFetchParameter:function(){return a.g}});var r=n(2713),a=n(8812),i=n(3523),o=n(47),s=n(5784),u=n(7493),l=n(9832),c=n(4938),d=n(5485)},2713:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(5209),a=Object.prototype.hasOwnProperty;function i(e){return function(t){return t.text().then((function(e){try{return JSON.parse(e)}catch(r){var n=r;throw n.name="ServerParseError",n.response=t,n.statusCode=t.status,n.bodyText=e,n}})).then((function(n){return t.status>=300&&(0,r.P)(t,n,"Response not successful: Received status code "+t.status),Array.isArray(n)||a.call(n,"data")||a.call(n,"errors")||(0,r.P)(t,n,"Server response was missing for query '"+(Array.isArray(e)?e.map((function(e){return e.operationName})):e.operationName)+"'."),n}))}}},5485:function(e,t,n){"use strict";n.d(t,{H:function(){return a}});var r=n(8812);function a(e,t){var n=[],a=function(e,t){n.push(e+"="+encodeURIComponent(t))};if("query"in t&&a("query",t.query),t.operationName&&a("operationName",t.operationName),t.variables){var i=void 0;try{i=(0,r.g)(t.variables,"Variables map")}catch(d){return{parseError:d}}a("variables",i)}if(t.extensions){var o=void 0;try{o=(0,r.g)(t.extensions,"Extensions map")}catch(d){return{parseError:d}}a("extensions",o)}var s="",u=e,l=e.indexOf("#");-1!==l&&(s=e.substr(l),u=e.substr(0,l));var c=-1===u.indexOf("?")?"?":"&";return{newURI:u+c+n.join("&")+s}}},3523:function(e,t,n){"use strict";n.d(t,{S:function(){return f},E:function(){return m}});var r=n(9388),a=n(344),i=n(7810);var o={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return u(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=c("(",u(e.variableDefinitions,", "),")"),a=u(e.directives," "),i=e.selectionSet;return n||a||r||"query"!==t?u([t,u([n,r]),a,i]," "):i},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,a=e.directives;return t+": "+n+c(" = ",r)+c(" ",u(a," "))},SelectionSet:function(e){return l(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,a=e.directives,i=e.selectionSet,o=c("",t,": ")+n,s=o+c("(",u(r,", "),")");return s.length>80&&(s=o+c("(\n",d(u(r,"\n")),"\n)")),u([s,u(a," "),i]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+c(" ",u(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return u(["...",c("on ",t),u(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,a=e.directives,i=e.selectionSet;return"fragment ".concat(t).concat(c("(",u(r,", "),")")," ")+"on ".concat(n," ").concat(c("",u(a," ")," "))+i},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?(0,i.LZ)(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+u(e.values,", ")+"]"},ObjectValue:function(e){return"{"+u(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+c("(",u(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:s((function(e){var t=e.directives,n=e.operationTypes;return u(["schema",u(t," "),l(n)]," ")})),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:s((function(e){return u(["scalar",e.name,u(e.directives," ")]," ")})),ObjectTypeDefinition:s((function(e){var t=e.name,n=e.interfaces,r=e.directives,a=e.fields;return u(["type",t,c("implements ",u(n," & ")),u(r," "),l(a)]," ")})),FieldDefinition:s((function(e){var t=e.name,n=e.arguments,r=e.type,a=e.directives;return t+(p(n)?c("(\n",d(u(n,"\n")),"\n)"):c("(",u(n,", "),")"))+": "+r+c(" ",u(a," "))})),InputValueDefinition:s((function(e){var t=e.name,n=e.type,r=e.defaultValue,a=e.directives;return u([t+": "+n,c("= ",r),u(a," ")]," ")})),InterfaceTypeDefinition:s((function(e){var t=e.name,n=e.interfaces,r=e.directives,a=e.fields;return u(["interface",t,c("implements ",u(n," & ")),u(r," "),l(a)]," ")})),UnionTypeDefinition:s((function(e){var t=e.name,n=e.directives,r=e.types;return u(["union",t,u(n," "),r&&0!==r.length?"= "+u(r," | "):""]," ")})),EnumTypeDefinition:s((function(e){var t=e.name,n=e.directives,r=e.values;return u(["enum",t,u(n," "),l(r)]," ")})),EnumValueDefinition:s((function(e){return u([e.name,u(e.directives," ")]," ")})),InputObjectTypeDefinition:s((function(e){var t=e.name,n=e.directives,r=e.fields;return u(["input",t,u(n," "),l(r)]," ")})),DirectiveDefinition:s((function(e){var t=e.name,n=e.arguments,r=e.repeatable,a=e.locations;return"directive @"+t+(p(n)?c("(\n",d(u(n,"\n")),"\n)"):c("(",u(n,", "),")"))+(r?" repeatable":"")+" on "+u(a," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return u(["extend schema",u(t," "),l(n)]," ")},ScalarTypeExtension:function(e){return u(["extend scalar",e.name,u(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,a=e.fields;return u(["extend type",t,c("implements ",u(n," & ")),u(r," "),l(a)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,a=e.fields;return u(["extend interface",t,c("implements ",u(n," & ")),u(r," "),l(a)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return u(["extend union",t,u(n," "),r&&0!==r.length?"= "+u(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return u(["extend enum",t,u(n," "),l(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return u(["extend input",t,u(n," "),l(r)]," ")}};function s(e){return function(t){return u([t.description,e(t)],"\n")}}function u(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null===e||void 0===e?void 0:e.filter((function(e){return e})).join(n))&&void 0!==t?t:""}function l(e){return c("{\n",d(u(e,"\n")),"\n}")}function c(e,t){return null!=t&&""!==t?e+t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""):""}function d(e){return c("  ",e.replace(/\n/g,"\n  "))}function h(e){return-1!==e.indexOf("\n")}function p(e){return null!=e&&e.some(h)}var f={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},m=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var s=(0,r.pi)((0,r.pi)({},t.options),{headers:t.headers,credentials:t.credentials}),u=t.http||{};n.forEach((function(e){s=(0,r.pi)((0,r.pi)((0,r.pi)({},s),e.options),{headers:(0,r.pi)((0,r.pi)({},s.headers),v(e.headers))}),e.credentials&&(s.credentials=e.credentials),u=(0,r.pi)((0,r.pi)({},u),e.http)}));var l,c=e.operationName,d=e.extensions,h=e.variables,p=e.query,f={operationName:c,variables:h};return u.includeExtensions&&(f.extensions=d),u.includeQuery&&(f.query=(l=p,(0,a.Vn)(l,{leave:o}))),{options:s,body:f}};function v(e){if(e){var t=Object.create(null);return Object.keys(Object(e)).forEach((function(n){t[n.toLowerCase()]=e[n]})),t}return e}},7493:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});var r=function(e,t){var n=e.getContext().uri;return n||("function"===typeof t?t(e):t||"/graphql")}},8812:function(e,t,n){"use strict";n.d(t,{g:function(){return a}});var r=n(1198),a=function(e,t){var n;try{n=JSON.stringify(e)}catch(i){var a=new r.ej(23);throw a.parseError=i,a}return n}},650:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(3134),a=n.n(r);function i(e){return new(a())((function(t){t.error(e)}))}},6004:function(e,t,n){"use strict";n.d(t,{p:function(){return i}});var r=n(3134),a=n.n(r);function i(e){return new(a())((function(t){e.then((function(e){t.next(e),t.complete()})).catch(t.error.bind(t))}))}},5209:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});var r=function(e,t,n){var r=new Error(n);throw r.name="ServerError",r.response=e,r.statusCode=e.status,r.result=t,r}},1896:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});n(1198);function r(e){var t=!1;return new Promise((function(n,r){e.subscribe({next:function(e){t||(t=!0,n(e))},error:r})}))}},1003:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var r=n(2791),a=n(1198),i=new(n(7003).m?WeakMap:Map);var o=function(e){var t=e.client,n=e.children,o=function(){var e=i.get(r.createContext);return e||((e=r.createContext({})).displayName="ApolloContext",i.set(r.createContext,e)),e}();return r.createElement(o.Consumer,null,(function(e){return void 0===e&&(e={}),t&&e.client!==t&&(e=Object.assign({},e,{client:t})),(0,a.kG)(e.client,28),r.createElement(o.Provider,{value:e},n)}))}},2582:function(e,t,n){"use strict";n.d(t,{ApolloProvider:function(){return r.e}});var r=n(1003),a=n(4469);n.o(a,"ApolloLink")&&n.d(t,{ApolloLink:function(){return a.ApolloLink}})},4469:function(){},2127:function(e,t,n){"use strict";function r(e){return Array.isArray(e)&&e.length>0}n.d(t,{O:function(){return r}})},7003:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});var r="function"===typeof WeakMap&&!("object"===typeof navigator&&"ReactNative"===navigator.product)},4695:function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object.create(null);return e.forEach((function(e){e&&Object.keys(e).forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)}))})),n}n.d(t,{o:function(){return r}})},114:function(e,t,n){"use strict";n.d(t,{Ee:function(){return i},bw:function(){return o},w0:function(){return l}});var r=n(9388),a=Object.prototype.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}function o(e){var t=e[0]||{},n=e.length;if(n>1)for(var r=new l,a=1;a<n;++a)t=r.merge(t,e[a]);return t}function s(e){return null!==e&&"object"===typeof e}var u=function(e,t,n){return this.merge(e[n],t[n])},l=function(){function e(e){void 0===e&&(e=u),this.reconciler=e,this.isObject=s,this.pastCopies=new Set}return e.prototype.merge=function(e,t){for(var n=this,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return s(t)&&s(e)?(Object.keys(t).forEach((function(o){if(a.call(e,o)){var s=e[o];if(t[o]!==s){var u=n.reconciler.apply(n,(0,r.pr)([e,t,o],i));u!==s&&((e=n.shallowCopyForMerge(e))[o]=u)}}else(e=n.shallowCopyForMerge(e))[o]=t[o]})),e):t},e.prototype.shallowCopyForMerge=function(e){return s(e)&&!this.pastCopies.has(e)&&(e=Array.isArray(e)?e.slice(0):(0,r.pi)({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e)),e},e}()},2979:function(e,t,n){"use strict";n.d(t,{FS:function(){return o},LZ:function(){return i},mj:function(){return s}});var r=n(344),a=n(1198);function i(e,t){var n=e.directives;return!n||!n.length||function(e){var t=[];e&&e.length&&e.forEach((function(e){if(function(e){var t=e.name.value;return"skip"===t||"include"===t}(e)){var n=e.arguments;e.name.value;(0,a.kG)(n&&1===n.length,39);var r=n[0];(0,a.kG)(r.name&&"if"===r.name.value,40);var i=r.value;(0,a.kG)(i&&("Variable"===i.kind||"BooleanValue"===i.kind),41),t.push({directive:e,ifArgument:r})}}));return t}(n).every((function(e){var n=e.directive,r=e.ifArgument,i=!1;return"Variable"===r.value.kind?(i=t&&t[r.value.name.value],(0,a.kG)(void 0!==i,38)):i=r.value.value,"skip"===n.name.value?!i:i}))}function o(e,t){return function(e){var t=[];return(0,r.Vn)(e,{Directive:function(e){t.push(e.name.value)}}),t}(t).some((function(t){return e.indexOf(t)>-1}))}function s(e){return e&&o(["client"],e)&&o(["export"],e)}},6683:function(e,t,n){"use strict";n.d(t,{F:function(){return o},Yk:function(){return i},hi:function(){return s}});var r=n(9388),a=n(1198);function i(e,t){var n=t,i=[];return e.definitions.forEach((function(e){if("OperationDefinition"===e.kind)throw new a.ej(42);"FragmentDefinition"===e.kind&&i.push(e)})),"undefined"===typeof n&&((0,a.kG)(1===i.length,43),n=i[0].name.value),(0,r.pi)((0,r.pi)({},e),{definitions:(0,r.pr)([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],e.definitions)})}function o(e){void 0===e&&(e=[]);var t={};return e.forEach((function(e){t[e.name.value]=e})),t}function s(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":var n=t&&t[e.name.value];return(0,a.kG)(n,44),n;default:return null}}},7917:function(e,t,n){"use strict";n.d(t,{$H:function(){return o},A$:function(){return i},O4:function(){return h},iW:function(){return l},kU:function(){return u},p$:function(){return d},pD:function(){return c},rY:function(){return s}});var r=n(1198),a=n(7082);function i(e){(0,r.kG)(e&&"Document"===e.kind,45);var t=e.definitions.filter((function(e){return"FragmentDefinition"!==e.kind})).map((function(e){if("OperationDefinition"!==e.kind)throw new r.ej(46);return e}));return(0,r.kG)(t.length<=1,47),e}function o(e){return i(e),e.definitions.filter((function(e){return"OperationDefinition"===e.kind}))[0]}function s(e){return e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&e.name})).map((function(e){return e.name.value}))[0]||null}function u(e){return e.definitions.filter((function(e){return"FragmentDefinition"===e.kind}))}function l(e){var t=o(e);return(0,r.kG)(t&&"query"===t.operation,48),t}function c(e){(0,r.kG)("Document"===e.kind,49),(0,r.kG)(e.definitions.length<=1,50);var t=e.definitions[0];return(0,r.kG)("FragmentDefinition"===t.kind,51),t}function d(e){var t;i(e);for(var n=0,a=e.definitions;n<a.length;n++){var o=a[n];if("OperationDefinition"===o.kind){var s=o.operation;if("query"===s||"mutation"===s||"subscription"===s)return o}"FragmentDefinition"!==o.kind||t||(t=o)}if(t)return t;throw new r.ej(52)}function h(e){var t=Object.create(null),n=e&&e.variableDefinitions;return n&&n.length&&n.forEach((function(e){e.defaultValue&&(0,a.vb)(t,e.variable.name,e.defaultValue)})),t}},7082:function(e,t,n){"use strict";n.d(t,{Ao:function(){return g},My:function(){return v},NC:function(){return p},PT:function(){return h},Yk:function(){return u},kQ:function(){return s},qw:function(){return m},u2:function(){return f},vb:function(){return l},vf:function(){return c}});var r=n(2248),a=n.n(r),i=n(1198),o=n(6683);function s(e){return{__ref:String(e)}}function u(e){return Boolean(e&&"object"===typeof e&&"string"===typeof e.__ref)}function l(e,t,n,r){if(function(e){return"IntValue"===e.kind}(n)||function(e){return"FloatValue"===e.kind}(n))e[t.value]=Number(n.value);else if(function(e){return"BooleanValue"===e.kind}(n)||function(e){return"StringValue"===e.kind}(n))e[t.value]=n.value;else if(function(e){return"ObjectValue"===e.kind}(n)){var a={};n.fields.map((function(e){return l(a,e.name,e.value,r)})),e[t.value]=a}else if(function(e){return"Variable"===e.kind}(n)){var o=(r||{})[n.name.value];e[t.value]=o}else if(function(e){return"ListValue"===e.kind}(n))e[t.value]=n.values.map((function(e){var n={};return l(n,t,e,r),n[t.value]}));else if(function(e){return"EnumValue"===e.kind}(n))e[t.value]=n.value;else{if(!function(e){return"NullValue"===e.kind}(n))throw new i.ej(53);e[t.value]=null}}function c(e,t){var n=null;e.directives&&(n={},e.directives.forEach((function(e){n[e.name.value]={},e.arguments&&e.arguments.forEach((function(r){var a=r.name,i=r.value;return l(n[e.name.value],a,i,t)}))})));var r=null;return e.arguments&&e.arguments.length&&(r={},e.arguments.forEach((function(e){var n=e.name,a=e.value;return l(r,n,a,t)}))),h(e.name.value,r,n)}var d=["connection","include","skip","client","rest","export"];function h(e,t,n){if(t&&n&&n.connection&&n.connection.key){if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var i={};return r.forEach((function(e){i[e]=t[e]})),n.connection.key+"("+JSON.stringify(i)+")"}return n.connection.key}var o=e;if(t){var s=a()(t);o+="("+s+")"}return n&&Object.keys(n).forEach((function(e){-1===d.indexOf(e)&&(n[e]&&Object.keys(n[e]).length?o+="@"+e+"("+JSON.stringify(n[e])+")":o+="@"+e)})),o}function p(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach((function(e){var r=e.name,a=e.value;return l(n,r,a,t)})),n}return null}function f(e){return e.alias?e.alias.value:e.name.value}function m(e,t,n){if("string"===typeof e.__typename)return e.__typename;for(var r=0,a=t.selections;r<a.length;r++){var i=a[r];if(v(i)){if("__typename"===i.name.value)return e[f(i)]}else{var s=m(e,(0,o.hi)(i,n).selectionSet,n);if("string"===typeof s)return s}}}function v(e){return"Field"===e.kind}function g(e){return"InlineFragment"===e.kind}},4784:function(e,t,n){"use strict";n.d(t,{Gw:function(){return f},aL:function(){return y},ob:function(){return b},Fo:function(){return v}});var r=n(9388),a=n(344),i=(n(1198),n(7917));function o(e,t,n){var r=0;return e.forEach((function(n,a){t.call(this,n,a,e)&&(e[r++]=n)}),n),e.length=r,e}var s=n(7082),u=n(6683),l={kind:"Field",name:{kind:"Name",value:"__typename"}};function c(e,t){return e.selectionSet.selections.every((function(e){return"FragmentSpread"===e.kind&&c(t[e.name.value],t)}))}function d(e){return c((0,i.$H)(e)||(0,i.pD)(e),(0,u.F)((0,i.kU)(e)))?null:e}function h(e){return function(t){return e.some((function(e){return e.name&&e.name===t.name.value||e.test&&e.test(t)}))}}function p(e,t){var n=Object.create(null),i=[],s=Object.create(null),u=[],l=d((0,a.Vn)(t,{Variable:{enter:function(e,t,r){"VariableDefinition"!==r.kind&&(n[e.name.value]=!0)}},Field:{enter:function(t){if(e&&t.directives&&(e.some((function(e){return e.remove}))&&t.directives&&t.directives.some(h(e))))return t.arguments&&t.arguments.forEach((function(e){"Variable"===e.value.kind&&i.push({name:e.value.name.value})})),t.selectionSet&&g(t.selectionSet).forEach((function(e){u.push({name:e.name.value})})),null}},FragmentSpread:{enter:function(e){s[e.name.value]=!0}},Directive:{enter:function(t){if(h(e)(t))return null}}}));return l&&o(i,(function(e){return!!e.name&&!n[e.name]})).length&&(l=function(e,t){var n=function(e){return function(t){return e.some((function(e){return t.value&&"Variable"===t.value.kind&&t.value.name&&(e.name===t.value.name.value||e.test&&e.test(t))}))}}(e);return d((0,a.Vn)(t,{OperationDefinition:{enter:function(t){return(0,r.pi)((0,r.pi)({},t),{variableDefinitions:t.variableDefinitions?t.variableDefinitions.filter((function(t){return!e.some((function(e){return e.name===t.variable.name.value}))})):[]})}},Field:{enter:function(t){if(e.some((function(e){return e.remove}))){var r=0;if(t.arguments&&t.arguments.forEach((function(e){n(e)&&(r+=1)})),1===r)return null}}},Argument:{enter:function(e){if(n(e))return null}}}))}(i,l)),l&&o(u,(function(e){return!!e.name&&!s[e.name]})).length&&(l=function(e,t){function n(t){if(e.some((function(e){return e.name===t.name.value})))return null}return d((0,a.Vn)(t,{FragmentSpread:{enter:n},FragmentDefinition:{enter:n}}))}(u,l)),l}function f(e){return(0,a.Vn)((0,i.A$)(e),{SelectionSet:{enter:function(e,t,n){if(!n||"OperationDefinition"!==n.kind){var a=e.selections;if(a)if(!a.some((function(e){return(0,s.My)(e)&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))}))){var i=n;if(!((0,s.My)(i)&&i.directives&&i.directives.some((function(e){return"export"===e.name.value}))))return(0,r.pi)((0,r.pi)({},e),{selections:(0,r.pr)(a,[l])})}}}}})}f.added=function(e){return e===l};var m={test:function(e){var t="connection"===e.name.value;return t&&(!e.arguments||e.arguments.some((function(e){return"key"===e.name.value}))),t}};function v(e){return p([m],(0,i.A$)(e))}function g(e){var t=[];return e.selections.forEach((function(e){((0,s.My)(e)||(0,s.Ao)(e))&&e.selectionSet?g(e.selectionSet).forEach((function(e){return t.push(e)})):"FragmentSpread"===e.kind&&t.push(e)})),t}function y(e){return"query"===(0,i.p$)(e).operation?e:(0,a.Vn)(e,{OperationDefinition:{enter:function(e){return(0,r.pi)((0,r.pi)({},e),{operation:"query"})}}})}function b(e){(0,i.A$)(e);var t=p([{test:function(e){return"client"===e.name.value},remove:!0}],e);return t&&(t=(0,a.Vn)(t,{FragmentDefinition:{enter:function(e){if(e.selectionSet&&e.selectionSet.selections.every((function(e){return(0,s.My)(e)&&"__typename"===e.name.value})))return null}}})),t}},797:function(e,t,n){"use strict";function r(e,t,n){var r=[];e.forEach((function(e){return e[t]&&r.push(e)})),r.forEach((function(e){return e[t](n)}))}n.d(t,{p:function(){return r}})},2058:function(e,t,n){"use strict";n.d(t,{D:function(){return i}});var r=n(3134),a=n.n(r);function i(e){function t(t){Object.defineProperty(e,t,{value:a()})}return"function"===typeof Symbol&&Symbol.species&&t(Symbol.species),t("@@species"),e}},3108:function(e,t,n){"use strict";n.d(t,{$n:function(){return h},Fq:function(){return c},_4:function(){return l},_j:function(){return d},mi:function(){return s}});var r=n(7483);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function i(e){if(e.type)return e;if("#"===e.charAt(0))return i(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error((0,r.Z)(3,e));var a=e.substring(t+1,e.length-1).split(",");return{type:n,values:a=a.map((function(e){return parseFloat(e)}))}}function o(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function s(e,t){var n=u(e),r=u(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function u(e){var t="hsl"===(e=i(e)).type?i(function(e){var t=(e=i(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,s=r*Math.min(a,1-a),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-s*Math.max(Math.min(t-3,9-t,1),-1)},l="rgb",c=[Math.round(255*u(0)),Math.round(255*u(8)),Math.round(255*u(4))];return"hsla"===e.type&&(l+="a",c.push(t[3])),o({type:l,values:c})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return u(e)>.5?d(e,t):h(e,t)}function c(e,t){return e=i(e),t=a(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,o(e)}function d(e,t){if(e=i(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return o(e)}function h(e,t){if(e=i(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return o(e)}},7121:function(e,t,n){"use strict";n.d(t,{X:function(){return i},Z:function(){return o}});var r=n(7462),a=n(5987),i=["xs","sm","md","lg","xl"];function o(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,o=e.unit,s=void 0===o?"px":o,u=e.step,l=void 0===u?5:u,c=(0,a.Z)(e,["values","unit","step"]);function d(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(s,")")}function h(e,t){var r=i.indexOf(t);return r===i.length-1?d(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(s,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[i[r+1]]?n[i[r+1]]:t)-l/100).concat(s,")")}return(0,r.Z)({keys:i,values:n,up:d,down:function(e){var t=i.indexOf(e)+1,r=n[i[t]];return t===i.length?d("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-l/100).concat(s,")")},between:h,only:function(e){return h(e,e)},width:function(e){return n[e]}},c)}},5628:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}});var r=n(5987),a=n(1534),i=n(7121),o=n(4942),s=n(7462);function u(e,t,n){var r;return(0,s.Z)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),(0,s.Z)({paddingLeft:t(2),paddingRight:t(2)},n,(0,o.Z)({},e.up("sm"),(0,s.Z)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},(0,o.Z)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,o.Z)(r,e.up("sm"),{minHeight:64}),r)},n)}var l=n(7483),c={black:"#000",white:"#fff"},d={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},h={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},p={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},f={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},v={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},g={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},y=n(3108),b={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:c.white,default:d[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},x={text:{primary:c.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:d[800],default:"#303030"},action:{active:c.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function w(e,t,n,r){var a=r.light||r,i=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,y.$n)(e.main,a):"dark"===t&&(e.dark=(0,y._j)(e.main,i)))}function k(e){return Math.round(1e5*e)/1e5}function S(e){return k(e)}var E={textTransform:"uppercase"},T='"Roboto", "Helvetica", "Arial", sans-serif';function C(e,t){var n="function"===typeof t?t(e):t,i=n.fontFamily,o=void 0===i?T:i,u=n.fontSize,l=void 0===u?14:u,c=n.fontWeightLight,d=void 0===c?300:c,h=n.fontWeightRegular,p=void 0===h?400:h,f=n.fontWeightMedium,m=void 0===f?500:f,v=n.fontWeightBold,g=void 0===v?700:v,y=n.htmlFontSize,b=void 0===y?16:y,x=n.allVariants,w=n.pxToRem,C=(0,r.Z)(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var _=l/14,M=w||function(e){return"".concat(e/b*_,"rem")},I=function(e,t,n,r,a){return(0,s.Z)({fontFamily:o,fontWeight:e,fontSize:M(t),lineHeight:n},o===T?{letterSpacing:"".concat(k(r/t),"em")}:{},a,x)},N={h1:I(d,96,1.167,-1.5),h2:I(d,60,1.2,-.5),h3:I(p,48,1.167,0),h4:I(p,34,1.235,.25),h5:I(p,24,1.334,0),h6:I(m,20,1.6,.15),subtitle1:I(p,16,1.75,.15),subtitle2:I(m,14,1.57,.1),body1:I(p,16,1.5,.15),body2:I(p,14,1.43,.15),button:I(m,14,1.75,.4,E),caption:I(p,12,1.66,.4),overline:I(p,12,2.66,1,E)};return(0,a.Z)((0,s.Z)({htmlFontSize:b,pxToRem:M,round:S,fontFamily:o,fontSize:l,fontWeightLight:d,fontWeightRegular:p,fontWeightMedium:m,fontWeightBold:g},N),C,{clone:!1})}function _(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var M=["none",_(0,2,1,-1,0,1,1,0,0,1,3,0),_(0,3,1,-2,0,2,2,0,0,1,5,0),_(0,3,3,-2,0,3,4,0,0,1,8,0),_(0,2,4,-1,0,4,5,0,0,1,10,0),_(0,3,5,-1,0,5,8,0,0,1,14,0),_(0,3,5,-1,0,6,10,0,0,1,18,0),_(0,4,5,-2,0,7,10,1,0,2,16,1),_(0,5,5,-3,0,8,10,1,0,3,14,2),_(0,5,6,-3,0,9,12,1,0,3,16,2),_(0,6,6,-3,0,10,14,1,0,4,18,3),_(0,6,7,-4,0,11,15,1,0,4,20,3),_(0,7,8,-4,0,12,17,2,0,5,22,4),_(0,7,8,-4,0,13,19,2,0,5,24,4),_(0,7,9,-4,0,14,21,2,0,5,26,4),_(0,8,9,-5,0,15,22,2,0,6,28,5),_(0,8,10,-5,0,16,24,2,0,6,30,5),_(0,8,11,-5,0,17,26,2,0,6,32,5),_(0,9,11,-5,0,18,28,2,0,7,34,6),_(0,9,12,-6,0,19,29,2,0,7,36,6),_(0,10,13,-6,0,20,31,3,0,8,38,7),_(0,10,13,-6,0,21,33,3,0,8,40,7),_(0,10,14,-6,0,22,35,3,0,8,42,7),_(0,11,14,-7,0,23,36,3,0,9,44,8),_(0,11,15,-7,0,24,38,3,0,9,46,8)],I={borderRadius:4},N=n(9908);var A=n(812),R=n(9535);function O(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,o=e.mixins,k=void 0===o?{}:o,S=e.palette,E=void 0===S?{}:S,T=e.spacing,_=e.typography,O=void 0===_?{}:_,D=(0,r.Z)(e,["breakpoints","mixins","palette","spacing","typography"]),L=function(e){var t=e.primary,n=void 0===t?{light:h[300],main:h[500],dark:h[700]}:t,i=e.secondary,o=void 0===i?{light:p.A200,main:p.A400,dark:p.A700}:i,u=e.error,k=void 0===u?{light:f[300],main:f[500],dark:f[700]}:u,S=e.warning,E=void 0===S?{light:m[300],main:m[500],dark:m[700]}:S,T=e.info,C=void 0===T?{light:v[300],main:v[500],dark:v[700]}:T,_=e.success,M=void 0===_?{light:g[300],main:g[500],dark:g[700]}:_,I=e.type,N=void 0===I?"light":I,A=e.contrastThreshold,R=void 0===A?3:A,O=e.tonalOffset,D=void 0===O?.2:O,L=(0,r.Z)(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function P(e){return(0,y.mi)(e,x.text.primary)>=R?x.text.primary:b.text.primary}var F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=(0,s.Z)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error((0,l.Z)(4,t));if("string"!==typeof e.main)throw new Error((0,l.Z)(5,JSON.stringify(e.main)));return w(e,"light",n,D),w(e,"dark",r,D),e.contrastText||(e.contrastText=P(e.main)),e},j={dark:x,light:b};return(0,a.Z)((0,s.Z)({common:c,type:N,primary:F(n),secondary:F(o,"A400","A200","A700"),error:F(k),warning:F(E),info:F(C),success:F(M),grey:d,contrastThreshold:R,getContrastText:P,augmentColor:F,tonalOffset:D},j[N]),L)}(E),P=(0,i.Z)(n),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,N.h)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}(T),j=(0,a.Z)({breakpoints:P,direction:"ltr",mixins:u(P,F,k),overrides:{},palette:L,props:{},shadows:M,typography:C(L,O),spacing:F,shape:I,transitions:A.ZP,zIndex:R.Z},D),z=arguments.length,B=new Array(z>1?z-1:0),U=1;U<z;U++)B[U-1]=arguments[U];return j=B.reduce((function(e,t){return(0,a.Z)(e,t)}),j)}var D=O},663:function(e,t,n){"use strict";var r=(0,n(5628).Z)();t.Z=r},812:function(e,t,n){"use strict";n.d(t,{x9:function(){return i}});var r=n(5987),a={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},i={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function o(e){return"".concat(Math.round(e),"ms")}t.ZP={easing:a,duration:i,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,s=void 0===n?i.standard:n,u=t.easing,l=void 0===u?a.easeInOut:u,c=t.delay,d=void 0===c?0:c;(0,r.Z)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof s?s:o(s)," ").concat(l," ").concat("string"===typeof d?d:o(d))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}}},8317:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(7462),a=n(5987),i=n(2791),o=n(2110),s=n.n(o),u=n(3401),l=n(794),c=n(8444),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var o=t.defaultTheme,d=t.withTheme,h=void 0!==d&&d,p=t.name,f=(0,a.Z)(t,["defaultTheme","withTheme","name"]);var m=p,v=(0,u.Z)(e,(0,r.Z)({defaultTheme:o,Component:n,name:p||n.displayName,classNamePrefix:m},f)),g=i.forwardRef((function(e,t){e.classes;var s,u=e.innerRef,d=(0,a.Z)(e,["classes","innerRef"]),f=v((0,r.Z)({},n.defaultProps,e)),m=d;return("string"===typeof p||h)&&(s=(0,c.Z)()||o,p&&(m=(0,l.Z)({theme:s,name:p,props:d})),h&&!m.theme&&(m.theme=s)),i.createElement(n,(0,r.Z)({ref:u||t,classes:f},m))}));return s()(g,n),g}},h=n(663);var p=function(e,t){return d(e,(0,r.Z)({defaultTheme:h.Z},t))}},9535:function(e,t){"use strict";t.Z={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500}},1122:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7483);function a(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},7545:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),(function(){}))}n.d(t,{Z:function(){return r}})},8499:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(7462),a=n(2791),i=n(5987),o=n(8182),s=n(8317),u=n(1122),l=a.forwardRef((function(e,t){var n=e.children,s=e.classes,l=e.className,c=e.color,d=void 0===c?"inherit":c,h=e.component,p=void 0===h?"svg":h,f=e.fontSize,m=void 0===f?"medium":f,v=e.htmlColor,g=e.titleAccess,y=e.viewBox,b=void 0===y?"0 0 24 24":y,x=(0,i.Z)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return a.createElement(p,(0,r.Z)({className:(0,o.Z)(s.root,l,"inherit"!==d&&s["color".concat((0,u.Z)(d))],"default"!==m&&"medium"!==m&&s["fontSize".concat((0,u.Z)(m))]),focusable:"false",viewBox:b,color:v,"aria-hidden":!g||void 0,role:g?"img":void 0,ref:t},x),n,g?a.createElement("title",null,g):null)}));l.muiName="SvgIcon";var c=(0,s.Z)((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(l);function d(e,t){var n=function(t,n){return a.createElement(c,(0,r.Z)({ref:n},t),e)};return n.muiName=c.muiName,a.memo(a.forwardRef(n))}},503:function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=this;clearTimeout(t),t=setTimeout((function(){e.apply(o,a)}),n)}return r.clear=function(){clearTimeout(t)},r}n.d(t,{Z:function(){return r}})},7156:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return r.Z},createChainedFunction:function(){return a.Z},createSvgIcon:function(){return i.Z},debounce:function(){return o.Z},deprecatedPropType:function(){return s},isMuiElement:function(){return u.Z},ownerDocument:function(){return l.Z},ownerWindow:function(){return c.Z},requirePropFactory:function(){return d},setRef:function(){return h.Z},unstable_useId:function(){return g.Z},unsupportedProp:function(){return p},useControlled:function(){return f.Z},useEventCallback:function(){return m.Z},useForkRef:function(){return v.Z},useIsFocusVisible:function(){return y.Z}});var r=n(1122),a=n(7545),i=n(8499),o=n(503);function s(e,t){return function(){return null}}var u=n(3375),l=n(4667),c=n(7636);function d(e){return function(){return null}}var h=n(1565);function p(e,t,n,r,a){return null}var f=n(2497),m=n(2216),v=n(9806),g=n(2939),y=n(1175)},3375:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2791);function a(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},4667:function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:function(){return r}})},7636:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4667);function a(e){return(0,r.Z)(e).defaultView||window}},1565:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},2939:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2791);function a(e){var t=r.useState(e),n=t[0],a=t[1],i=e||n;return r.useEffect((function(){null==n&&a("mui-".concat(Math.round(1e5*Math.random())))}),[n]),i}},2497:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2791);function a(e){var t=e.controlled,n=e.default,a=(e.name,e.state,r.useRef(void 0!==t).current),i=r.useState(n),o=i[0],s=i[1];return[a?t:o,r.useCallback((function(e){a||s(e)}),[])]}},2216:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2791),a="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function i(e){var t=r.useRef(e);return a((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},9806:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2791),a=n(1565);function i(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){(0,a.Z)(e,n),(0,a.Z)(t,n)}}),[e,t])}},1175:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(2791),a=n(4164),i=!0,o=!1,s=null,u={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(e){e.metaKey||e.altKey||e.ctrlKey||(i=!0)}function c(){i=!1}function d(){"hidden"===this.visibilityState&&o&&(i=!0)}function h(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return i||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!u[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function p(){o=!0,window.clearTimeout(s),s=window.setTimeout((function(){o=!1}),100)}function f(){return{isFocusVisible:h,onBlurVisible:p,ref:r.useCallback((function(e){var t,n=a.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",l,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",d,!0))}),[])}}},6909:function(e,t){"use strict";t._Y=void 0;var n={props:{MuiBreadcrumbs:{expandText:"Mostrar ruta"},MuiTablePagination:{backIconButtonText:"P\xe1gina anterior",labelRowsPerPage:"Filas por p\xe1gina:",labelDisplayedRows:function(e){var t=e.from,n=e.to,r=e.count;return"".concat(t,"-").concat(n," de ").concat(-1!==r?r:"more than ".concat(n))},nextIconButtonText:"Siguiente p\xe1gina"},MuiRating:{getLabelText:function(e){return"".concat(e," Estrella").concat(1!==e?"s":"")},emptyLabelText:"Vac\xedo"},MuiAutocomplete:{clearText:"Limpiar",closeText:"Cerrar",loadingText:"Cargando\u2026",noOptionsText:"Sin opciones",openText:"Abierto"},MuiAlert:{closeText:"Cerrar"},MuiPagination:{"aria-label":"Paginador",getItemAriaLabel:function(e,t,n){return"page"===e?"".concat(n?"":"Ir a la ","p\xe1gina ").concat(t):"first"===e?"Ir a la primera p\xe1gina":"last"===e?"Ir a la \xfaltima p\xe1gina":"next"===e?"Ir a la p\xe1gina siguiente":"previous"===e?"Ir a la p\xe1gina anterior":void 0}}}};t._Y=n},8420:function(e,t,n){"use strict";var r=n(4836),a=n(5263);t.Z=void 0;var i=a(n(2791)),o=(0,r(n(4894)).default)(i.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.Z=o},3938:function(e,t,n){"use strict";var r=n(4836),a=n(5263);t.Z=void 0;var i=a(n(2791)),o=(0,r(n(4894)).default)(i.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked");t.Z=o},4894:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(7156)},9316:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for;t.Z=n?Symbol.for("mui.nested"):"__THEME_NESTED__"},794:function(e,t,n){"use strict";function r(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var a,i=t.props[n];for(a in i)void 0===r[a]&&(r[a]=i[a]);return r}n.d(t,{Z:function(){return r}})},3401:function(e,t,n){"use strict";n.d(t,{Z:function(){return ln}});var r=n(5987),a=n(7462),i=n(2791),o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="object"===("undefined"===typeof window?"undefined":o(window))&&"object"===("undefined"===typeof document?"undefined":o(document))&&9===document.nodeType,u=n(3144),l=n(4578),c=n(7326),d=n(3366),h={}.constructor;function p(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(p);if(e.constructor!==h)return e;var t={};for(var n in e)t[n]=p(e[n]);return t}function f(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,a=p(t),i=r.plugins.onCreateRule(e,a,n);return i||(e[0],null)}var m=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},v=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=m(e[n]," ");else t=m(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function g(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function y(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function b(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var a=n.indent,i=void 0===a?0:a,o=t.fallbacks;!1===n.format&&(i=-1/0);var s=g(n),u=s.linebreak,l=s.space;if(e&&i++,o)if(Array.isArray(o))for(var c=0;c<o.length;c++){var d=o[c];for(var h in d){var p=d[h];null!=p&&(r&&(r+=u),r+=y(h+":"+l+v(p)+";",i))}}else for(var f in o){var m=o[f];null!=m&&(r&&(r+=u),r+=y(f+":"+l+v(m)+";",i))}for(var b in t){var x=t[b];null!=x&&"fallbacks"!==b&&(r&&(r+=u),r+=y(b+":"+l+v(x)+";",i))}return(r||n.allowEmpty)&&e?(r&&(r=""+u+r+u),y(""+e+l+"{"+r,--i)+y("}",i)):r}var x=/([[\].#*$><+~=|^:(),"'`\s])/g,w="undefined"!==typeof CSS&&CSS.escape,k=function(e){return w?w(e):e.replace(x,"\\$1")},S=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,a=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:a&&(this.renderer=new a)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var a=t;n&&!1===n.process||(a=this.options.jss.plugins.onChangeValue(t,e,this));var i=null==a||!1===a,o=e in this.style;if(i&&!o&&!r)return this;var s=i&&o;if(s?delete this.style[e]:this.style[e]=a,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,a),this;var u=this.options.sheet;return u&&u.attached,this},e}(),E=function(e){function t(t,n,r){var a;a=e.call(this,t,n,r)||this;var i=r.selector,o=r.scoped,s=r.sheet,u=r.generateId;return i?a.selectorText=i:!1!==o&&(a.id=u((0,c.Z)((0,c.Z)(a)),s),a.selectorText="."+k(a.id)),a}(0,l.Z)(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=v(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,a.Z)({},e,{allowEmpty:!0}):e;return b(this.selectorText,this.style,n)},(0,u.Z)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(S),T={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new E(e,t,n)}},C={indent:1,children:!0},_=/@([\w-]+)/,M=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(_);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new J((0,a.Z)({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=C);var t=g(e).linebreak;if(null==e.indent&&(e.indent=C.indent),null==e.children&&(e.children=C.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),I=/@container|@media|@supports\s+/,N={onCreateRule:function(e,t,n){return I.test(e)?new M(e,t,n):null}},A={indent:1,children:!0},R=/@keyframes\s+([\w-]+)/,O=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(R);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,o=n.sheet,s=n.generateId;for(var u in this.id=!1===i?this.name:k(s(this,o)),this.rules=new J((0,a.Z)({},n,{parent:this})),t)this.rules.add(u,t[u],(0,a.Z)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=A);var t=g(e).linebreak;if(null==e.indent&&(e.indent=A.indent),null==e.children&&(e.children=A.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),D=/@keyframes\s+/,L=/\$([\w-]+)/g,P=function(e,t){return"string"===typeof e?e.replace(L,(function(e,n){return n in t?t[n]:e})):e},F=function(e,t,n){var r=e[t],a=P(r,n);a!==r&&(e[t]=a)},j={onCreateRule:function(e,t,n){return"string"===typeof e&&D.test(e)?new O(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&F(e,"animation-name",n.keyframes),"animation"in e&&F(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return P(e,r.keyframes);default:return e}}},z=function(e){function t(){return e.apply(this,arguments)||this}return(0,l.Z)(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?(0,a.Z)({},e,{allowEmpty:!0}):e;return b(this.key,this.style,n)},t}(S),B={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new z(e,t,n):null}},U=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=g(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=b(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return b(this.at,this.style,e)},e}(),W=/@font-face/,V={onCreateRule:function(e,t,n){return W.test(e)?new U(e,t,n):null}},Z=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return b(this.key,this.style,e)},e}(),H={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new Z(e,t,n):null}},G=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),q={"@charset":!0,"@import":!0,"@namespace":!0},X={onCreateRule:function(e,t,n){return e in q?new G(e,t,n):null}},Y=[T,N,j,B,V,H,X],K={process:!0},Q={force:!0,process:!0},J=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,i=r.parent,o=r.sheet,s=r.jss,u=r.Renderer,l=r.generateId,c=r.scoped,d=(0,a.Z)({classes:this.classes,parent:i,sheet:o,jss:s,Renderer:u,generateId:l,scoped:c,name:e,keyframes:this.keyframes,selector:void 0},n),h=e;e in this.raw&&(h=e+"-d"+this.counter++),this.raw[h]=t,h in this.classes&&(d.selector="."+k(this.classes[h]));var p=f(h,t,d);if(!p)return null;this.register(p);var m=void 0===d.index?this.index.length:d.index;return this.index.splice(m,0,p),p},t.replace=function(e,t,n){var r=this.get(e),i=this.index.indexOf(r);r&&this.remove(r);var o=n;return-1!==i&&(o=(0,a.Z)({},n,{index:i})),this.add(e,t,o)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof E?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof O&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof E?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof O&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=K);var a=this.options,i=a.jss.plugins,o=a.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t.style;if(i.onUpdate(n,t,o,r),r.process&&s&&s!==t.style){for(var u in i.onProcessStyle(t.style,t,o),t.style){var l=t.style[u];l!==s[u]&&t.prop(u,l,Q)}for(var c in s){var d=t.style[c],h=s[c];null==d&&d!==h&&t.prop(c,null,Q)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,a=g(e).linebreak,i=0;i<this.index.length;i++){var o=this.index[i].toString(e);(o||r)&&(t&&(t+=a),t+=o)}return t},e}(),$=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=(0,a.Z)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new J(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var a=this.rules.add(e,t,n);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(r?r.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),a):a:(this.deployed=!1,a)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var a=this.rules.replace(e,t,n);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(this.renderer&&(a?r.renderable&&this.renderer.replaceRule(r.renderable,a):this.renderer.deleteRule(r)),a):a:(this.deployed=!1,a)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var a=this.addRule(r,e[r],t);a&&n.push(a)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),ee=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var a=this.registry.onCreateRule[r](e,t,n);if(a)return a}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,a=0;a<this.registry.onChangeValue.length;a++)r=this.registry.onChangeValue[a](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),te=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=(0,d.Z)(t,["attached"]),a=g(r).linebreak,i="",o=0;o<this.registry.length;o++){var s=this.registry[o];null!=n&&s.attached!==n||(i&&(i+=a),i+=s.toString(r))}return i},(0,u.Z)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),ne=new te,re="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),ae="2f1acc6c3a606b082e5eef5e54414ffb";null==re[ae]&&(re[ae]=0);var ie=re[ae]++,oe=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var a="",i="";return r&&(r.options.classNamePrefix&&(i=r.options.classNamePrefix),null!=r.options.jss.id&&(a=String(r.options.jss.id))),e.minify?""+(i||"c")+ie+a+t:i+n.key+"-"+ie+(a?"-"+a:"")+"-"+t}},se=function(e){var t;return function(){return t||(t=e()),t}},ue=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},le=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=v(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,r);else{var a=r?r.indexOf("!important"):-1,i=a>-1?r.substr(0,a-1):r;e.style.setProperty(t,i,a>-1?"important":"")}}catch(o){return!1}return!0},ce=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},de=function(e,t){return e.selectorText=t,e.selectorText===t},he=se((function(){return document.querySelector("head")}));function pe(e){var t=ne.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var a=function(e){for(var t=he(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(a)return{parent:a.parentNode,node:a.nextSibling}}return!1}var fe=se((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),me=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},ve=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},ge=function(){function e(e){this.getPropertyValue=ue,this.setProperty=le,this.removeProperty=ce,this.setSelector=de,this.hasInsertedRules=!1,this.cssRules=[],e&&ne.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,a=t.element;this.element=a||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var i=fe();i&&this.element.setAttribute("nonce",i)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=pe(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var a=n,i=a.parentNode;i&&i.insertBefore(e,a.nextSibling)}else he().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,a=n;if("conditional"===e.type||"keyframes"===e.type){var i=ve(n,t);if(!1===(a=me(n,r.toString({children:!1}),i)))return!1;this.refCssRule(e,i,a)}return this.insertRules(r.rules,a),a}var o=e.toString();if(!o)return!1;var s=ve(n,t),u=me(n,o,s);return!1!==u&&(this.hasInsertedRules=!0,this.refCssRule(e,s,u),u)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof $&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),ye=0,be=function(){function e(e){this.id=ye++,this.version="10.10.0",this.plugins=new ee,this.options={id:{minify:!1},createGenerateId:oe,Renderer:s?ge:null,plugins:[]},this.generateId=oe({minify:!1});for(var t=0;t<Y.length;t++)this.plugins.use(Y[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=(0,a.Z)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===ne.index?0:ne.index+1);var r=new $(e,(0,a.Z)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),ne.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=(0,a.Z)({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=f(e,t,r);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),xe=function(e){return new be(e)},we="object"===typeof CSS&&null!=CSS&&"number"in CSS;function ke(e){var t=null;for(var n in e){var r=e[n],a=typeof r;if("function"===a)t||(t={}),t[n]=r;else if("object"===a&&null!==r&&!Array.isArray(r)){var i=ke(r);i&&(t||(t={}),t[n]=i)}}return t}xe();var Se=n(5352),Ee={set:function(e,t,n,r){var a=e.get(t);a||(a=new Map,e.set(t,a)),a.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},Te=Ee,Ce=n(8444),_e=n(9316),Me=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var Ie=Date.now(),Ne="fnValues"+Ie,Ae="fnStyle"+ ++Ie,Re=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=f(e,{},n);return r[Ae]=t,r},onProcessStyle:function(e,t){if(Ne in t||Ae in t)return e;var n={};for(var r in e){var a=e[r];"function"===typeof a&&(delete e[r],n[r]=a)}return t[Ne]=n,e},onUpdate:function(e,t,n,r){var a=t,i=a[Ae];i&&(a.style=i(e)||{});var o=a[Ne];if(o)for(var s in o)a.prop(s,o[s](e),r)}}},Oe="@global",De="@global ",Le=function(){function e(e,t,n){for(var r in this.type="global",this.at=Oe,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new J((0,a.Z)({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),Pe=function(){function e(e,t,n){this.type="global",this.at=Oe,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr(8);this.rule=n.jss.createRule(r,t,(0,a.Z)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Fe=/\s*,\s*/g;function je(e,t){for(var n=e.split(Fe),r="",a=0;a<n.length;a++)r+=t+" "+n[a].trim(),n[a+1]&&(r+=", ");return r}var ze=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===Oe)return new Le(e,t,n);if("@"===e[0]&&e.substr(0,8)===De)return new Pe(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,i=r?r[Oe]:null;if(i){for(var o in i)t.addRule(o,i[o],(0,a.Z)({},n,{selector:je(o,e.selector)}));delete r[Oe]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var i in r)if("@"===i[0]&&i.substr(0,Oe.length)===Oe){var o=je(i.substr(Oe.length),e.selector);t.addRule(o,r[i],(0,a.Z)({},n,{selector:o})),delete r[i]}}(e,t))}}},Be=/\s*,\s*/g,Ue=/&/g,We=/\$([\w-]+)/g;var Ve=function(){function e(e,t){return function(n,r){var a=e.getRule(r)||t&&t.getRule(r);return a?a.selector:r}}function t(e,t){for(var n=t.split(Be),r=e.split(Be),a="",i=0;i<n.length;i++)for(var o=n[i],s=0;s<r.length;s++){var u=r[s];a&&(a+=", "),a+=-1!==u.indexOf("&")?u.replace(Ue,o):o+" "+u}return a}function n(e,t,n){if(n)return(0,a.Z)({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var i=(0,a.Z)({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(r,i,o){if("style"!==i.type)return r;var s,u,l=i,c=l.options.parent;for(var d in r){var h=-1!==d.indexOf("&"),p="@"===d[0];if(h||p){if(s=n(l,c,s),h){var f=t(d,l.selector);u||(u=e(c,o)),f=f.replace(We,u);var m=l.key+"-"+d;"replaceRule"in c?c.replaceRule(m,r[d],(0,a.Z)({},s,{selector:f})):c.addRule(m,r[d],(0,a.Z)({},s,{selector:f}))}else p&&c.addRule(d,{},s).addRule(l.key,r[d],{selector:l.selector});delete r[d]}}return r}}},Ze=/[A-Z]/g,He=/^ms-/,Ge={};function qe(e){return"-"+e.toLowerCase()}var Xe=function(e){if(Ge.hasOwnProperty(e))return Ge[e];var t=e.replace(Ze,qe);return Ge[e]=He.test(t)?"-"+t:t};function Ye(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Xe(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(Ye):t.fallbacks=Ye(e.fallbacks)),t}var Ke=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=Ye(e[t]);return e}return Ye(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=Xe(t);return t===r?e:(n.prop(r,e),null)}}},Qe=we&&CSS?CSS.px:"px",Je=we&&CSS?CSS.ms:"ms",$e=we&&CSS?CSS.percent:"%";function et(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var a in e)r[a]=e[a],r[a.replace(t,n)]=e[a];return r}var tt=et({"animation-delay":Je,"animation-duration":Je,"background-position":Qe,"background-position-x":Qe,"background-position-y":Qe,"background-size":Qe,border:Qe,"border-bottom":Qe,"border-bottom-left-radius":Qe,"border-bottom-right-radius":Qe,"border-bottom-width":Qe,"border-left":Qe,"border-left-width":Qe,"border-radius":Qe,"border-right":Qe,"border-right-width":Qe,"border-top":Qe,"border-top-left-radius":Qe,"border-top-right-radius":Qe,"border-top-width":Qe,"border-width":Qe,"border-block":Qe,"border-block-end":Qe,"border-block-end-width":Qe,"border-block-start":Qe,"border-block-start-width":Qe,"border-block-width":Qe,"border-inline":Qe,"border-inline-end":Qe,"border-inline-end-width":Qe,"border-inline-start":Qe,"border-inline-start-width":Qe,"border-inline-width":Qe,"border-start-start-radius":Qe,"border-start-end-radius":Qe,"border-end-start-radius":Qe,"border-end-end-radius":Qe,margin:Qe,"margin-bottom":Qe,"margin-left":Qe,"margin-right":Qe,"margin-top":Qe,"margin-block":Qe,"margin-block-end":Qe,"margin-block-start":Qe,"margin-inline":Qe,"margin-inline-end":Qe,"margin-inline-start":Qe,padding:Qe,"padding-bottom":Qe,"padding-left":Qe,"padding-right":Qe,"padding-top":Qe,"padding-block":Qe,"padding-block-end":Qe,"padding-block-start":Qe,"padding-inline":Qe,"padding-inline-end":Qe,"padding-inline-start":Qe,"mask-position-x":Qe,"mask-position-y":Qe,"mask-size":Qe,height:Qe,width:Qe,"min-height":Qe,"max-height":Qe,"min-width":Qe,"max-width":Qe,bottom:Qe,left:Qe,top:Qe,right:Qe,inset:Qe,"inset-block":Qe,"inset-block-end":Qe,"inset-block-start":Qe,"inset-inline":Qe,"inset-inline-end":Qe,"inset-inline-start":Qe,"box-shadow":Qe,"text-shadow":Qe,"column-gap":Qe,"column-rule":Qe,"column-rule-width":Qe,"column-width":Qe,"font-size":Qe,"font-size-delta":Qe,"letter-spacing":Qe,"text-decoration-thickness":Qe,"text-indent":Qe,"text-stroke":Qe,"text-stroke-width":Qe,"word-spacing":Qe,motion:Qe,"motion-offset":Qe,outline:Qe,"outline-offset":Qe,"outline-width":Qe,perspective:Qe,"perspective-origin-x":$e,"perspective-origin-y":$e,"transform-origin":$e,"transform-origin-x":$e,"transform-origin-y":$e,"transform-origin-z":$e,"transition-delay":Je,"transition-duration":Je,"vertical-align":Qe,"flex-basis":Qe,"shape-margin":Qe,size:Qe,gap:Qe,grid:Qe,"grid-gap":Qe,"row-gap":Qe,"grid-row-gap":Qe,"grid-column-gap":Qe,"grid-template-rows":Qe,"grid-template-columns":Qe,"grid-auto-rows":Qe,"grid-auto-columns":Qe,"box-shadow-x":Qe,"box-shadow-y":Qe,"box-shadow-blur":Qe,"box-shadow-spread":Qe,"font-line-height":Qe,"text-shadow-x":Qe,"text-shadow-y":Qe,"text-shadow-blur":Qe});function nt(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=nt(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var a in t)t[a]=nt(a,t[a],n);else for(var i in t)t[i]=nt(e+"-"+i,t[i],n);else if("number"===typeof t&&!1===isNaN(t)){var o=n[e]||tt[e];return!o||0===t&&o===Qe?t.toString():"function"===typeof o?o(t).toString():""+t+o}return t}var rt=function(e){void 0===e&&(e={});var t=et(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=nt(r,e[r],t);return e},onChangeValue:function(e,n){return nt(n,e,t)}}},at=n(3433),it="",ot="",st="",ut="",lt=s&&"ontouchstart"in document.documentElement;if(s){var ct={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},dt=document.createElement("p").style;for(var ht in ct)if(ht+"Transform"in dt){it=ht,ot=ct[ht];break}"Webkit"===it&&"msHyphens"in dt&&(it="ms",ot=ct.ms,ut="edge"),"Webkit"===it&&"-apple-trailing-word"in dt&&(st="apple")}var pt={js:it,css:ot,vendor:st,browser:ut,isTouch:lt};var ft={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===pt.js?"-webkit-"+e:pt.css+e)}},mt={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===pt.js?pt.css+"print-"+e:e)}},vt=/[-\s]+(.)?/g;function gt(e,t){return t?t.toUpperCase():""}function yt(e){return e.replace(vt,gt)}function bt(e){return yt("-"+e)}var xt,wt={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===pt.js){var n="mask-image";if(yt(n)in t)return e;if(pt.js+bt(n)in t)return pt.css+e}return e}},kt={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==pt.vendor||pt.isTouch?e:pt.css+e)}},St={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:pt.css+e)}},Et={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:pt.css+e)}},Tt={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===pt.js||"ms"===pt.js&&"edge"!==pt.browser?pt.css+e:e)}},Ct={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===pt.js||"ms"===pt.js||"apple"===pt.vendor?pt.css+e:e)}},_t={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===pt.js?"WebkitColumn"+bt(e)in t&&pt.css+"column-"+e:"Moz"===pt.js&&("page"+bt(e)in t&&"page-"+e))}},Mt={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===pt.js)return e;var n=e.replace("-inline","");return pt.js+bt(n)in t&&pt.css+n}},It={supportedProperty:function(e,t){return yt(e)in t&&e}},Nt={supportedProperty:function(e,t){var n=bt(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:pt.js+n in t?pt.css+e:"Webkit"!==pt.js&&"Webkit"+n in t&&"-webkit-"+e}},At={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===pt.js?""+pt.css+e:e)}},Rt={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===pt.js?pt.css+"scroll-chaining":e)}},Ot={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Dt={supportedProperty:function(e,t){var n=Ot[e];return!!n&&(pt.js+bt(n)in t&&pt.css+n)}},Lt={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Pt=Object.keys(Lt),Ft=function(e){return pt.css+e},jt={supportedProperty:function(e,t,n){var r=n.multiple;if(Pt.indexOf(e)>-1){var a=Lt[e];if(!Array.isArray(a))return pt.js+bt(a)in t&&pt.css+a;if(!r)return!1;for(var i=0;i<a.length;i++)if(!(pt.js+bt(a[0])in t))return!1;return a.map(Ft)}return!1}},zt=[ft,mt,wt,kt,St,Et,Tt,Ct,_t,Mt,It,Nt,At,Rt,Dt,jt],Bt=zt.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Ut=zt.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,(0,at.Z)(t.noPrefill)),e}),[]),Wt={};if(s){xt=document.createElement("p");var Vt=window.getComputedStyle(document.documentElement,"");for(var Zt in Vt)isNaN(Zt)||(Wt[Vt[Zt]]=Vt[Zt]);Ut.forEach((function(e){return delete Wt[e]}))}function Ht(e,t){if(void 0===t&&(t={}),!xt)return e;if(null!=Wt[e])return Wt[e];"transition"!==e&&"transform"!==e||(t[e]=e in xt.style);for(var n=0;n<Bt.length&&(Wt[e]=Bt[n](e,xt.style,t),!Wt[e]);n++);try{xt.style[e]=""}catch(r){return!1}return Wt[e]}var Gt,qt={},Xt={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Yt=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Kt(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?Ht(t):", "+Ht(n);return r||(t||n)}function Qt(e,t){var n=t;if(!Gt||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=qt[r])return qt[r];try{Gt.style[e]=n}catch(a){return qt[r]=!1,!1}if(Xt[e])n=n.replace(Yt,Kt);else if(""===Gt.style[e]&&("-ms-flex"===(n=pt.css+n)&&(Gt.style[e]="-ms-flexbox"),Gt.style[e]=n,""===Gt.style[e]))return qt[r]=!1,!1;return Gt.style[e]="",qt[r]=n,qt[r]}s&&(Gt=document.createElement("p"));var Jt=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var a=!1,i=Ht(n);i&&i!==n&&(a=!0);var o=!1,s=Qt(i,v(r));s&&s!==r&&(o=!0),(a||o)&&(a&&delete t[n],t[i||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===pt.js?e:"@"+pt.css+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return Qt(t,v(e))||e}}};var $t=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},a=Object.keys(t).sort(e),i=0;i<a.length;i++)r[a[i]]=t[a[i]];return r}}};var en=xe({plugins:[Re(),ze(),Ve(),Ke(),rt(),"undefined"===typeof window?null:Jt(),$t()]}),tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,a=void 0===r?"jss":r,i=e.seed,o=void 0===i?"":i,s=""===o?"":"".concat(o,"-"),u=0,l=function(){return u+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==Me.indexOf(e.key))return"Mui-".concat(e.key);var i="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[_e.Z]&&""===o?"".concat(i,"-").concat(l()):i}return"".concat(s).concat(a).concat(l())}}(),nn={disableGeneration:!1,generateClassName:tn,jss:en,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},rn=i.createContext(nn);var an=-1e9;var on=n(1534);var sn={};function un(e,t){var n=e.state,r=e.theme,i=e.stylesOptions,o=e.stylesCreator,s=e.name;if(!i.disableGeneration){var u=Te.get(i.sheetsManager,o,r);u||(u={refs:0,staticSheet:null,dynamicStyles:null},Te.set(i.sheetsManager,o,r,u));var l=(0,a.Z)({},o.options,i,{theme:r,flip:"boolean"===typeof i.flip?i.flip:"rtl"===r.direction});l.generateId=l.serverGenerateClassName||l.generateClassName;var c=i.sheetsRegistry;if(0===u.refs){var d;i.sheetsCache&&(d=Te.get(i.sheetsCache,o,r));var h=o.create(r,s);d||((d=i.jss.createStyleSheet(h,(0,a.Z)({link:!1},l))).attach(),i.sheetsCache&&Te.set(i.sheetsCache,o,r,d)),c&&c.add(d),u.staticSheet=d,u.dynamicStyles=ke(h)}if(u.dynamicStyles){var p=i.jss.createStyleSheet(u.dynamicStyles,(0,a.Z)({link:!0},l));p.update(t),p.attach(),n.dynamicSheet=p,n.classes=(0,Se.Z)({baseClasses:u.staticSheet.classes,newClasses:p.classes}),c&&c.add(p)}else n.classes=u.staticSheet.classes;u.refs+=1}}function ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,o=t.classNamePrefix,s=t.Component,u=t.defaultTheme,l=void 0===u?sn:u,c=(0,r.Z)(t,["name","classNamePrefix","Component","defaultTheme"]),d=function(e){var t="function"===typeof e;return{create:function(n,r){var i;try{i=t?e(n):e}catch(u){throw u}if(!r||!n.overrides||!n.overrides[r])return i;var o=n.overrides[r],s=(0,a.Z)({},i);return Object.keys(o).forEach((function(e){s[e]=(0,on.Z)(s[e],o[e])})),s},options:{}}}(e),h=n||o||"makeStyles";d.options={index:an+=1,name:n,meta:h,classNamePrefix:h};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,Ce.Z)()||l,r=(0,a.Z)({},i.useContext(rn),c),o=i.useRef(),u=i.useRef();!function(e,t){var n,r=i.useRef([]),a=i.useMemo((function(){return{}}),t);r.current!==a&&(r.current=a,n=e()),i.useEffect((function(){return function(){n&&n()}}),[a])}((function(){var a={name:n,state:{},stylesCreator:d,stylesOptions:r,theme:t};return un(a,e),u.current=!1,o.current=a,function(){!function(e){var t=e.state,n=e.theme,r=e.stylesOptions,a=e.stylesCreator;if(!r.disableGeneration){var i=Te.get(r.sheetsManager,a,n);i.refs-=1;var o=r.sheetsRegistry;0===i.refs&&(Te.delete(r.sheetsManager,a,n),r.jss.removeStyleSheet(i.staticSheet),o&&o.remove(i.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}(a)}}),[t,d]),i.useEffect((function(){u.current&&function(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}(o.current,e),u.current=!0}));var h=function(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var a=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,a=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,a=!0),a&&(r.cacheClasses.value=(0,Se.Z)({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}(o.current,e.classes,s);return h}}},5352:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7462);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var a=(0,r.Z)({},t);return Object.keys(n).forEach((function(e){n[e]&&(a[e]="".concat(t[e]," ").concat(n[e]))})),a}},423:function(e,t,n){"use strict";var r=n(2791).createContext(null);t.Z=r},8444:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2791),a=n(423);function i(){return r.useContext(a.Z)}},6086:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var r=n(1002),a={xs:0,sm:600,md:960,lg:1280,xl:1920},i={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(a[e],"px)")}};function o(e,t,n){if(Array.isArray(t)){var a=e.theme.breakpoints||i;return t.reduce((function(e,r,i){return e[a.up(a.keys[i])]=n(t[i]),e}),{})}if("object"===(0,r.Z)(t)){var o=e.theme.breakpoints||i;return Object.keys(t).reduce((function(e,r){return e[o.up(r)]=n(t[r]),e}),{})}return n(t)}},7351:function(e,t,n){"use strict";var r=n(1534);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},9908:function(e,t,n){"use strict";n.d(t,{h:function(){return d},Z:function(){return f}});var r=n(9439),a=n(6086),i=n(7351);var o={m:"margin",p:"padding"},s={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},u={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},l=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!u[e])return[e];e=u[e]}var t=e.split(""),n=(0,r.Z)(t,2),a=n[0],i=n[1],l=o[a],c=s[i]||"";return Array.isArray(c)?c.map((function(e){return l+e})):[l+c]})),c=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function d(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function h(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function p(e){var t=d(e.theme);return Object.keys(e).map((function(n){if(-1===c.indexOf(n))return null;var r=h(l(n),t),i=e[n];return(0,a.k)(e,i,r)})).reduce(i.Z,{})}p.propTypes={},p.filterProps=c;var f=p},1534:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7462),a=n(1002);function i(e){return e&&"object"===(0,a.Z)(e)&&e.constructor===Object}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},a=n.clone?(0,r.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(i(t[r])&&r in e?a[r]=o(e[r],t[r],n):a[r]=t[r])})),a}},7483:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},3529:function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}t.Q=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<r.length;a++)if((n=r[a])===t||n.fn===t){r.splice(a,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var a=(n=n.slice(0)).length;r<a;++r)n[r].apply(this,t)}return this},n.prototype.emitReserved=n.prototype.emit,n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},3135:function(e,t,n){"use strict";n.d(t,{g7:function(){return u}});var r=null,a={},i=1,o="@wry/context:Slot",s=Array,u=s[o]||function(){var e=function(){function e(){this.id=["slot",i++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var e=r;e;e=e.parent)if(this.id in e.slots){var t=e.slots[this.id];if(t===a)break;return e!==r&&(r.slots[this.id]=t),!0}return r&&(r.slots[this.id]=a),!1},e.prototype.getValue=function(){if(this.hasValue())return r.slots[this.id]},e.prototype.withValue=function(e,t,n,a){var i,o=((i={__proto__:null})[this.id]=e,i),s=r;r={parent:s,slots:o};try{return t.apply(a,n)}finally{r=s}},e.bind=function(e){var t=r;return function(){var n=r;try{return r=t,e.apply(this,arguments)}finally{r=n}}},e.noContext=function(e,t,n){if(!r)return e.apply(n,t);var a=r;try{return r=null,e.apply(n,t)}finally{r=a}},e}();try{Object.defineProperty(s,o,{value:s[o]=e,enumerable:!1,writable:!1,configurable:!1})}finally{return e}}();u.bind,u.noContext},5970:function(e,t,n){"use strict";n.d(t,{D:function(){return u}});var r=Object.prototype,a=r.toString,i=r.hasOwnProperty,o=Function.prototype.toString,s=new Map;function u(e,t){try{return l(e,t)}finally{s.clear()}}function l(e,t){if(e===t)return!0;var n=a.call(e);if(n!==a.call(t))return!1;switch(n){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":if(p(e,t))return!0;var r=c(e),s=c(t),u=r.length;if(u!==s.length)return!1;for(var d=0;d<u;++d)if(!i.call(t,r[d]))return!1;for(d=0;d<u;++d){var f=r[d];if(!l(e[f],t[f]))return!1}return!0;case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!==e)return t!==t;case"[object Boolean]":case"[object Date]":return+e===+t;case"[object RegExp]":case"[object String]":return e==""+t;case"[object Map]":case"[object Set]":if(e.size!==t.size)return!1;if(p(e,t))return!0;for(var m=e.entries(),v="[object Map]"===n;;){var g=m.next();if(g.done)break;var y=g.value,b=y[0],x=y[1];if(!t.has(b))return!1;if(v&&!l(x,t.get(b)))return!1}return!0;case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":e=new Uint8Array(e),t=new Uint8Array(t);case"[object DataView]":var w=e.byteLength;if(w===t.byteLength)for(;w--&&e[w]===t[w];);return-1===w;case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":var k=o.call(e);return k===o.call(t)&&!function(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n}(k,h)}return!1}function c(e){return Object.keys(e).filter(d,e)}function d(e){return void 0!==this[e]}var h="{ [native code] }";function p(e,t){var n=s.get(e);if(n){if(n.has(t))return!0}else s.set(e,n=new Set);return n.add(t),!1}},1842:function(e,t,n){"use strict";var r=n(2122).default,a=n(7795),i=a.ApolloLink,o=a.Observable,s=n(4486),u=s.createSignalIfSupported,l=s.fallbackHttpConfig,c=s.parseAndCheckHttpResponse,d=s.rewriteURIForGET,h=s.selectHttpOptionsAndBody,p=s.selectURI,f=s.serializeFetchParameter,m=n(3119),v=n(5186),g=n(6289);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.uri,n=void 0===t?"/graphql":t,a=e.useGETForQueries,s=e.isExtractableFile,y=void 0===s?g:s,b=e.FormData,x=e.formDataAppendFile,w=void 0===x?v:x,k=e.fetch,S=e.fetchOptions,E=e.credentials,T=e.headers,C={http:{includeExtensions:e.includeExtensions},options:S,credentials:E,headers:T};return new i((function(e){var t=e.getContext(),i=t.clientAwareness,s=void 0===i?{}:i,v=s.name,g=s.version,x=t.headers,S={http:t.http,options:t.fetchOptions,credentials:t.credentials,headers:r(r(r({},v&&{"apollographql-client-name":v}),g&&{"apollographql-client-version":g}),x)},E=h(e,l,C,S),T=E.options,_=E.body,M=m(_,"",y),I=M.clone,N=M.files,A=p(e,n);if(N.size){delete T.headers["content-type"];var R=new(b||FormData);R.append("operations",f(I,"Payload"));var O={},D=0;N.forEach((function(e){O[++D]=e})),R.append("map",JSON.stringify(O)),D=0,N.forEach((function(e,t){w(R,++D,t)})),T.body=R}else if(a&&!e.query.definitions.some((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation}))&&(T.method="GET"),"GET"===T.method){var L=d(A,_),P=L.newURI,F=L.parseError;if(F)return new o((function(e){e.error(F)}));A=P}else T.body=f(I,"Payload");var j=u().controller;j&&(T.signal&&(T.signal.aborted?j.abort():T.signal.addEventListener("abort",(function(){j.abort()}),{once:!0})),T.signal=j.signal);var z=k||fetch;return new o((function(t){var n;return z(A,T).then((function(t){return e.setContext({response:t}),t})).then(c(e)).then((function(e){t.next(e),t.complete()})).catch((function(e){n||(e.result&&e.result.errors&&e.result.data&&t.next(e.result),t.error(e))})),function(){n=!0,j&&j.abort()}}))}))}},5186:function(e){"use strict";e.exports=function(e,t,n){e.append(t,n,n.name)}},6289:function(e,t,n){"use strict";e.exports=n(6195)},4569:function(e,t,n){e.exports=n(8036)},3381:function(e,t,n){"use strict";var r=n(3589),a=n(7297),i=n(9301),o=n(9774),s=n(1804),u=n(9145),l=n(5411),c=n(6467);e.exports=function(e){return new Promise((function(t,n){var d=e.data,h=e.headers;r.isFormData(d)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(f+":"+m)}var v=s(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),o(v,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?u(p.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};a(t,n,i),p=null}},p.onabort=function(){p&&(n(c("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(c("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(c(t,e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var g=(e.withCredentials||l(v))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;g&&(h[e.xsrfHeaderName]=g)}if("setRequestHeader"in p&&r.forEach(h,(function(e,t){"undefined"===typeof d&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(y){if("json"!==e.responseType)throw y}"function"===typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),n(e),p=null)})),d||(d=null),p.send(d)}))}},8036:function(e,t,n){"use strict";var r=n(3589),a=n(4049),i=n(3773),o=n(777);function s(e){var t=new i(e),n=a(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var u=s(n(221));u.Axios=i,u.create=function(e){return s(o(u.defaults,e))},u.Cancel=n(9346),u.CancelToken=n(6857),u.isCancel=n(5517),u.all=function(e){return Promise.all(e)},u.spread=n(8089),u.isAxiosError=n(9580),e.exports=u,e.exports.default=u},9346:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},6857:function(e,t,n){"use strict";var r=n(9346);function a(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},5517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:function(e,t,n){"use strict";var r=n(3589),a=n(9774),i=n(7470),o=n(2733),s=n(777);function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[o,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},u.prototype.getUri=function(e){return e=s(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=u},7470:function(e,t,n){"use strict";var r=n(3589);function a(){this.handlers=[]}a.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},1804:function(e,t,n){"use strict";var r=n(4044),a=n(9549);e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},6467:function(e,t,n){"use strict";var r=n(6460);e.exports=function(e,t,n,a,i){var o=new Error(e);return r(o,t,n,a,i)}},2733:function(e,t,n){"use strict";var r=n(3589),a=n(2693),i=n(5517),o=n(221);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return s(e),t.data=a(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},6460:function(e){"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},777:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||{};var n={},a=["url","method","data"],i=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function u(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function l(a){r.isUndefined(t[a])?r.isUndefined(e[a])||(n[a]=u(void 0,e[a])):n[a]=u(e[a],t[a])}r.forEach(a,(function(e){r.isUndefined(t[e])||(n[e]=u(void 0,t[e]))})),r.forEach(i,l),r.forEach(o,(function(a){r.isUndefined(t[a])?r.isUndefined(e[a])||(n[a]=u(void 0,e[a])):n[a]=u(void 0,t[a])})),r.forEach(s,(function(r){r in t?n[r]=u(e[r],t[r]):r in e&&(n[r]=u(void 0,e[r]))}));var c=a.concat(i).concat(o).concat(s),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return r.forEach(d,l),n}},7297:function(e,t,n){"use strict";var r=n(6467);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},2693:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},221:function(e,t,n){"use strict";var r=n(3589),a=n(4341),i={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s={adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){s.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){s.headers[e]=r.merge(i)})),e.exports=s},4049:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},9774:function(e,t,n){"use strict";var r=n(3589);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(a(t)+"="+a(e))})))})),i=o.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},9549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(a)&&s.push("path="+a),r.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},9580:function(e){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},5411:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},9145:function(e,t,n){"use strict";var r=n(3589),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(o[t]&&a.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},8089:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},3589:function(e,t,n){"use strict";var r=n(4049),a=Object.prototype.toString;function i(e){return"[object Array]"===a.call(e)}function o(e){return"undefined"===typeof e}function s(e){return null!==e&&"object"===typeof e}function u(e){if("[object Object]"!==a.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===a.call(e)}function c(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:s,isPlainObject:u,isUndefined:o,isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:l,isStream:function(e){return s(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:c,merge:function e(){var t={};function n(n,r){u(t[r])&&u(n)?t[r]=e(t[r],n):u(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,a=arguments.length;r<a;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,(function(t,a){e[a]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},8077:function(e){function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},8182:function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}t.Z=function(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}},5827:function(e){e.exports=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}var s={exports:{}};!function(e){"undefined"!==typeof window&&function(t){var n=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,r=t.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),a=r&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),i=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,o=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,s=(r||i)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(e){var t,n,s,u,l,c,d,h,p;if(!(t=e.match(o)))throw new Error("invalid data URI");for(n=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),s=!!t[4],u=e.slice(t[0].length),l=s?atob(u):decodeURIComponent(u),c=new ArrayBuffer(l.length),d=new Uint8Array(c),h=0;h<l.length;h+=1)d[h]=l.charCodeAt(h);return r?new Blob([a?d:c],{type:n}):((p=new i).append(c),p.getBlob(n))};t.HTMLCanvasElement&&!n.toBlob&&(n.mozGetAsFile?n.toBlob=function(e,t,r){var a=this;setTimeout((function(){r&&n.toDataURL&&s?e(s(a.toDataURL(t,r))):e(a.mozGetAsFile("blob",t))}))}:n.toDataURL&&s&&(n.msToBlob?n.toBlob=function(e,t,r){var a=this;setTimeout((function(){(t&&"image/png"!==t||r)&&n.toDataURL&&s?e(s(a.toDataURL(t,r))):e(a.msToBlob(t))}))}:n.toBlob=function(e,t,n){var r=this;setTimeout((function(){e(s(r.toDataURL(t,n)))}))})),e.exports?e.exports=s:t.dataURLtoBlob=s}(window)}(s);var u=s.exports,l=function(e){return"undefined"!==typeof Blob&&(e instanceof Blob||"[object Blob]"===Object.prototype.toString.call(e))},c={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},d="undefined"!==typeof window&&"undefined"!==typeof window.document?window:{},h=function(e){return e>0&&e<1/0},p=Array.prototype.slice;function f(e){return Array.from?Array.from(e):p.call(e)}var m=/^image\/.+$/;function v(e){return m.test(e)}function g(e){var t=v(e)?e.substr(6):"";return"jpeg"===t&&(t="jpg"),".".concat(t)}var y=String.fromCharCode;function b(e,t,n){var r,a="";for(n+=t,r=t;r<n;r+=1)a+=y(e.getUint8(r));return a}var x=d.btoa;function w(e,t){for(var n=[],r=8192,a=new Uint8Array(e);a.length>0;)n.push(y.apply(null,f(a.subarray(0,r)))),a=a.subarray(r);return"data:".concat(t,";base64,").concat(x(n.join("")))}function k(e){var t,n=new DataView(e);try{var r,a,i;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var o=n.byteLength,s=2;s+1<o;){if(255===n.getUint8(s)&&225===n.getUint8(s+1)){a=s;break}s+=1}if(a){var u=a+10;if("Exif"===b(n,a+4,4)){var l=n.getUint16(u);if(((r=18761===l)||19789===l)&&42===n.getUint16(u+2,r)){var c=n.getUint32(u+4,r);c>=8&&(i=u+c)}}}if(i){var d,h,p=n.getUint16(i,r);for(h=0;h<p;h+=1)if(d=i+12*h+2,274===n.getUint16(d,r)){d+=8,t=n.getUint16(d,r),n.setUint16(d,1,r);break}}}catch(f){t=1}return t}function S(e){var t=0,n=1,r=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}return{rotate:t,scaleX:n,scaleY:r}}var E=/\.\d*(?:0|9){12}\d*$/;function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return E.test(e)?Math.round(e*t)/t:e}function C(e){var t=e.aspectRatio,n=e.height,r=e.width,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",i=h(r),o=h(n);if(i&&o){var s=n*t;("contain"===a||"none"===a)&&s>r||"cover"===a&&s<r?n=r/t:r=n*t}else i?n=r/t:o&&(r=n*t);return{width:r,height:n}}var _=d.ArrayBuffer,M=d.FileReader,I=d.URL||d.webkitURL,N=/\.\w+$/,A=d.Compressor;return function(){function e(r,a){n(this,e),this.file=r,this.image=new Image,this.options=t(t({},c),a),this.aborted=!1,this.result=null,this.init()}return a(e,[{key:"init",value:function(){var e=this,t=this.file,n=this.options;if(l(t)){var r=t.type;if(v(r))if(I&&M)if(_||(n.checkOrientation=!1),I&&!n.checkOrientation)this.load({url:I.createObjectURL(t)});else{var a=new M,i=n.checkOrientation&&"image/jpeg"===r;this.reader=a,a.onload=function(n){var a=n.target.result,s={};if(i){var u=k(a);u>1||!I?(s.url=w(a,r),u>1&&o(s,S(u))):s.url=I.createObjectURL(t)}else s.url=a;e.load(s)},a.onabort=function(){e.fail(new Error("Aborted to read the image with FileReader."))},a.onerror=function(){e.fail(new Error("Failed to read the image with FileReader."))},a.onloadend=function(){e.reader=null},i?a.readAsArrayBuffer(t):a.readAsDataURL(t)}else this.fail(new Error("The current browser does not support image compression."));else this.fail(new Error("The first argument must be an image File or Blob object."))}else this.fail(new Error("The first argument must be a File or Blob object."))}},{key:"load",value:function(e){var n=this,r=this.file,a=this.image;a.onload=function(){n.draw(t(t({},e),{},{naturalWidth:a.naturalWidth,naturalHeight:a.naturalHeight}))},a.onabort=function(){n.fail(new Error("Aborted to load the image."))},a.onerror=function(){n.fail(new Error("Failed to load the image."))},d.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(d.navigator.userAgent)&&(a.crossOrigin="anonymous"),a.alt=r.name,a.src=e.url}},{key:"draw",value:function(e){var t=this,n=e.naturalWidth,r=e.naturalHeight,a=e.rotate,i=void 0===a?0:a,o=e.scaleX,s=void 0===o?1:o,l=e.scaleY,c=void 0===l?1:l,d=this.file,p=this.image,f=this.options,m=document.createElement("canvas"),g=m.getContext("2d"),y=Math.abs(i)%180===90,b=("contain"===f.resize||"cover"===f.resize)&&h(f.width)&&h(f.height),x=Math.max(f.maxWidth,0)||1/0,w=Math.max(f.maxHeight,0)||1/0,k=Math.max(f.minWidth,0)||0,S=Math.max(f.minHeight,0)||0,E=n/r,_=f.width,M=f.height;if(y){var I=[w,x];x=I[0],w=I[1];var N=[S,k];k=N[0],S=N[1];var A=[M,_];_=A[0],M=A[1]}b&&(E=_/M);var R=C({aspectRatio:E,width:x,height:w},"contain");x=R.width,w=R.height;var O=C({aspectRatio:E,width:k,height:S},"cover");if(k=O.width,S=O.height,b){var D=C({aspectRatio:E,width:_,height:M},f.resize);_=D.width,M=D.height}else{var L=C({aspectRatio:E,width:_,height:M}),P=L.width;_=void 0===P?n:P;var F=L.height;M=void 0===F?r:F}var j=-(_=Math.floor(T(Math.min(Math.max(_,k),x))))/2,z=-(M=Math.floor(T(Math.min(Math.max(M,S),w))))/2,B=_,U=M,W=[];if(b){var V=0,Z=0,H=n,G=r,q=C({aspectRatio:E,width:n,height:r},{contain:"cover",cover:"contain"}[f.resize]);H=q.width,G=q.height,V=(n-H)/2,Z=(r-G)/2,W.push(V,Z,H,G)}if(W.push(j,z,B,U),y){var X=[M,_];_=X[0],M=X[1]}m.width=_,m.height=M,v(f.mimeType)||(f.mimeType=d.type);var Y="transparent";if(d.size>f.convertSize&&f.convertTypes.indexOf(f.mimeType)>=0&&(f.mimeType="image/jpeg"),"image/jpeg"===f.mimeType&&(Y="#fff"),g.fillStyle=Y,g.fillRect(0,0,_,M),f.beforeDraw&&f.beforeDraw.call(this,g,m),!this.aborted&&(g.save(),g.translate(_/2,M/2),g.rotate(i*Math.PI/180),g.scale(s,c),g.drawImage.apply(g,[p].concat(W)),g.restore(),f.drew&&f.drew.call(this,g,m),!this.aborted)){var K=function(e){t.aborted||t.done({naturalWidth:n,naturalHeight:r,result:e})};m.toBlob?m.toBlob(K,f.mimeType,f.quality):K(u(m.toDataURL(f.mimeType,f.quality)))}}},{key:"done",value:function(e){var t=e.naturalWidth,n=e.naturalHeight,r=e.result,a=this.file,i=this.image,o=this.options;if(I&&!o.checkOrientation&&I.revokeObjectURL(i.src),r)if(o.strict&&r.size>a.size&&o.mimeType===a.type&&!(o.width>t||o.height>n||o.minWidth>t||o.minHeight>n||o.maxWidth<t||o.maxHeight<n))r=a;else{var s=new Date;r.lastModified=s.getTime(),r.lastModifiedDate=s,r.name=a.name,r.name&&r.type!==a.type&&(r.name=r.name.replace(N,g(r.type)))}else r=a;this.result=r,o.success&&o.success.call(this,r)}},{key:"fail",value:function(e){var t=this.options;if(!t.error)throw e;t.error.call(this,e)}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=A,e}},{key:"setDefaults",value:function(e){o(c,e)}}]),e}()}()},6616:function(e,t,n){"use strict";var r=n(9728).default,a=n(6690).default;e.exports=r((function e(t){var n=t.uri,r=t.name,i=t.type;a(this,e),this.uri=n,this.name=r,this.type=i}))},3119:function(e,t,n){"use strict";var r=n(4704).default,a=n(6195);e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,i=new Map,o=new Map;return{clone:function e(t,a,s){var u=t;if(n(t)){u=null;var l=i.get(t);l?l.push(a):i.set(t,[a])}else{var c=Array.isArray(t)||"undefined"!==typeof FileList&&t instanceof FileList,d=t&&t.constructor===Object;if(c||d){var h=o.has(t);if(h?u=o.get(t):(u=c?[]:{},o.set(t,u)),!s.has(t)){var p=a?"".concat(a,"."):"",f=new Set(s).add(t);if(c){var m,v=0,g=r(t);try{for(g.s();!(m=g.n()).done;){var y=e(m.value,p+v++,f);h||u.push(y)}}catch(w){g.e(w)}finally{g.f()}}else for(var b in t){var x=e(t[b],p+b,f);h||(u[b]=x)}}}}return u}(e,t,new Set),files:i}}},6195:function(e,t,n){"use strict";var r=n(6616);e.exports=function(e){return"undefined"!==typeof File&&e instanceof File||"undefined"!==typeof Blob&&e instanceof Blob||e instanceof r}},2248:function(e){"use strict";e.exports=function(e,t){t||(t={}),"function"===typeof t&&(t={cmp:t});var n,r="boolean"===typeof t.cycles&&t.cycles,a=t.cmp&&(n=t.cmp,function(e){return function(t,r){var a={key:t,value:e[t]},i={key:r,value:e[r]};return n(a,i)}}),i=[];return function e(t){if(t&&t.toJSON&&"function"===typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!==typeof t)return JSON.stringify(t);var n,o;if(Array.isArray(t)){for(o="[",n=0;n<t.length;n++)n&&(o+=","),o+=e(t[n])||"null";return o+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=i.push(t)-1,u=Object.keys(t).sort(a&&a(t));for(o="",n=0;n<u.length;n++){var l=u[n],c=e(t[l]);c&&(o&&(o+=","),o+=JSON.stringify(l)+":"+c)}return i.splice(s,1),"{"+o+"}"}}(e)}},8651:function(e,t,n){"use strict";n.d(t,{ZP:function(){return ce},J9:function(){return re},_t:function(){return te},wO:function(){return ne},HW:function(){return ee}});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.create;Object.create;function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}"function"===typeof Symbol&&null!=Symbol.iterator&&Symbol.iterator,"function"===typeof Symbol&&null!=Symbol.asyncIterator&&Symbol.asyncIterator;var i="function"===typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function o(e,t){for(var n,r=/\r\n|[\n\r]/g,a=1,i=t+1;(n=r.exec(e.body))&&n.index<t;)a+=1,i=t+1-(n.index+n[0].length);return{line:a,column:i}}function s(e){return u(e.source,o(e.source,e.start))}function u(e,t){var n=e.locationOffset.column-1,r=c(n)+e.body,a=t.line-1,i=e.locationOffset.line-1,o=t.line+i,s=1===t.line?n:0,u=t.column+s,d="".concat(e.name,":").concat(o,":").concat(u,"\n"),h=r.split(/\r\n|[\n\r]/g),p=h[a];if(p.length>120){for(var f=Math.floor(u/80),m=u%80,v=[],g=0;g<p.length;g+=80)v.push(p.slice(g,g+80));return d+l([["".concat(o),v[0]]].concat(v.slice(1,f+1).map((function(e){return["",e]})),[[" ",c(m-1)+"^"],["",v[f+1]]]))}return d+l([["".concat(o-1),h[a-1]],["".concat(o),p],["",c(u-1)+"^"],["".concat(o+1),h[a+1]]])}function l(e){var t=e.filter((function(e){e[0];return void 0!==e[1]})),n=Math.max.apply(Math,t.map((function(e){return e[0].length})));return t.map((function(e){var t,r=e[0],a=e[1];return c(n-(t=r).length)+t+(a?" | "+a:" |")})).join("\n")}function c(e){return Array(e+1).join(" ")}function d(e){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){var t="function"===typeof Map?new Map:void 0;return m=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return v(e,arguments,b(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,e)},m(e)}function v(e,t,n){return v=g()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&y(a,n.prototype),a},v.apply(null,arguments)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var x=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(c,e);var t,n,r,l=function(e){var t=g();return function(){var n,r=b(e);if(t){var a=b(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}(c);function c(e,t,n,r,i,s,u){var d,h,m,v,g;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),g=l.call(this,e);var y,b=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,x=n;!x&&b&&(x=null===(y=b[0].loc)||void 0===y?void 0:y.source);var w,k=r;!k&&b&&(k=b.reduce((function(e,t){return t.loc&&e.push(t.loc.start),e}),[])),k&&0===k.length&&(k=void 0),r&&n?w=r.map((function(e){return o(n,e)})):b&&(w=b.reduce((function(e,t){return t.loc&&e.push(o(t.loc.source,t.loc.start)),e}),[]));var S,E=u;if(null==E&&null!=s){var T=s.extensions;"object"==a(S=T)&&null!==S&&(E=T)}return Object.defineProperties(f(g),{name:{value:"GraphQLError"},message:{value:e,enumerable:!0,writable:!0},locations:{value:null!==(d=w)&&void 0!==d?d:void 0,enumerable:null!=w},path:{value:null!==i&&void 0!==i?i:void 0,enumerable:null!=i},nodes:{value:null!==b&&void 0!==b?b:void 0},source:{value:null!==(h=x)&&void 0!==h?h:void 0},positions:{value:null!==(m=k)&&void 0!==m?m:void 0},originalError:{value:s},extensions:{value:null!==(v=E)&&void 0!==v?v:void 0,enumerable:null!=E}}),null!==s&&void 0!==s&&s.stack?(Object.defineProperty(f(g),"stack",{value:s.stack,writable:!0,configurable:!0}),p(g)):(Error.captureStackTrace?Error.captureStackTrace(f(g),c):Object.defineProperty(f(g),"stack",{value:Error().stack,writable:!0,configurable:!0}),g)}return t=c,(n=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var a=r[n];a.loc&&(t+="\n\n"+s(a.loc))}else if(e.source&&e.locations)for(var i=0,o=e.locations;i<o.length;i++){var l=o[i];t+="\n\n"+u(e.source,l)}return t}(this)}},{key:i,get:function(){return"Object"}}])&&h(t.prototype,n),r&&h(t,r),c}(m(Error));function w(e,t,n){return new x("Syntax Error: ".concat(n),void 0,e,[t])}var k=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),S=n(3104),E=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"}),T=n(7173);function C(e,t){if(!Boolean(e))throw new Error(t)}var _=function(e,t){return e instanceof t};function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"===typeof e||C(0,"Body must be a string. Received: ".concat((0,T.Z)(e),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||C(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||C(0,"column in locationOffset is 1-indexed and must be positive.")}var t,n,r;return t=e,(n=[{key:i,get:function(){return"Source"}}])&&M(t.prototype,n),r&&M(t,r),e}();var N=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"}),A=n(7810),R=function(){function e(e){var t=new S.WU(E.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e=this.token;if(e.kind!==E.EOF)do{var t;e=null!==(t=e.next)&&void 0!==t?t:e.next=D(this,e)}while(e.kind===E.COMMENT);return e},e}();function O(e){return isNaN(e)?E.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function D(e,t){for(var n=e.source,r=n.body,a=r.length,i=t.end;i<a;){var o=r.charCodeAt(i),s=e.line,u=1+i-e.lineStart;switch(o){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++e.line,e.lineStart=i;continue;case 13:10===r.charCodeAt(i+1)?i+=2:++i,++e.line,e.lineStart=i;continue;case 33:return new S.WU(E.BANG,i,i+1,s,u,t);case 35:return P(n,i,s,u,t);case 36:return new S.WU(E.DOLLAR,i,i+1,s,u,t);case 38:return new S.WU(E.AMP,i,i+1,s,u,t);case 40:return new S.WU(E.PAREN_L,i,i+1,s,u,t);case 41:return new S.WU(E.PAREN_R,i,i+1,s,u,t);case 46:if(46===r.charCodeAt(i+1)&&46===r.charCodeAt(i+2))return new S.WU(E.SPREAD,i,i+3,s,u,t);break;case 58:return new S.WU(E.COLON,i,i+1,s,u,t);case 61:return new S.WU(E.EQUALS,i,i+1,s,u,t);case 64:return new S.WU(E.AT,i,i+1,s,u,t);case 91:return new S.WU(E.BRACKET_L,i,i+1,s,u,t);case 93:return new S.WU(E.BRACKET_R,i,i+1,s,u,t);case 123:return new S.WU(E.BRACE_L,i,i+1,s,u,t);case 124:return new S.WU(E.PIPE,i,i+1,s,u,t);case 125:return new S.WU(E.BRACE_R,i,i+1,s,u,t);case 34:return 34===r.charCodeAt(i+1)&&34===r.charCodeAt(i+2)?B(n,i,s,u,t,e):z(n,i,s,u,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return F(n,i,o,s,u,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return W(n,i,s,u,t)}throw w(n,i,L(o))}var l=e.line,c=1+i-e.lineStart;return new S.WU(E.EOF,a,a,l,c,t)}function L(e){return e<32&&9!==e&&10!==e&&13!==e?"Cannot contain the invalid character ".concat(O(e),"."):39===e?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(O(e),".")}function P(e,t,n,r,a){var i,o=e.body,s=t;do{i=o.charCodeAt(++s)}while(!isNaN(i)&&(i>31||9===i));return new S.WU(E.COMMENT,t,s,n,r,a,o.slice(t+1,s))}function F(e,t,n,r,a,i){var o=e.body,s=n,u=t,l=!1;if(45===s&&(s=o.charCodeAt(++u)),48===s){if((s=o.charCodeAt(++u))>=48&&s<=57)throw w(e,u,"Invalid number, unexpected digit after 0: ".concat(O(s),"."))}else u=j(e,u,s),s=o.charCodeAt(u);if(46===s&&(l=!0,s=o.charCodeAt(++u),u=j(e,u,s),s=o.charCodeAt(u)),69!==s&&101!==s||(l=!0,43!==(s=o.charCodeAt(++u))&&45!==s||(s=o.charCodeAt(++u)),u=j(e,u,s),s=o.charCodeAt(u)),46===s||function(e){return 95===e||e>=65&&e<=90||e>=97&&e<=122}(s))throw w(e,u,"Invalid number, expected digit but got: ".concat(O(s),"."));return new S.WU(l?E.FLOAT:E.INT,t,u,r,a,i,o.slice(t,u))}function j(e,t,n){var r=e.body,a=t,i=n;if(i>=48&&i<=57){do{i=r.charCodeAt(++a)}while(i>=48&&i<=57);return a}throw w(e,a,"Invalid number, expected digit but got: ".concat(O(i),"."))}function z(e,t,n,r,a){for(var i,o,s,u,l=e.body,c=t+1,d=c,h=0,p="";c<l.length&&!isNaN(h=l.charCodeAt(c))&&10!==h&&13!==h;){if(34===h)return p+=l.slice(d,c),new S.WU(E.STRING,t,c+1,n,r,a,p);if(h<32&&9!==h)throw w(e,c,"Invalid character within String: ".concat(O(h),"."));if(++c,92===h){switch(p+=l.slice(d,c-1),h=l.charCodeAt(c)){case 34:p+='"';break;case 47:p+="/";break;case 92:p+="\\";break;case 98:p+="\b";break;case 102:p+="\f";break;case 110:p+="\n";break;case 114:p+="\r";break;case 116:p+="\t";break;case 117:var f=(i=l.charCodeAt(c+1),o=l.charCodeAt(c+2),s=l.charCodeAt(c+3),u=l.charCodeAt(c+4),U(i)<<12|U(o)<<8|U(s)<<4|U(u));if(f<0){var m=l.slice(c+1,c+5);throw w(e,c,"Invalid character escape sequence: \\u".concat(m,"."))}p+=String.fromCharCode(f),c+=4;break;default:throw w(e,c,"Invalid character escape sequence: \\".concat(String.fromCharCode(h),"."))}d=++c}}throw w(e,c,"Unterminated string.")}function B(e,t,n,r,a,i){for(var o=e.body,s=t+3,u=s,l=0,c="";s<o.length&&!isNaN(l=o.charCodeAt(s));){if(34===l&&34===o.charCodeAt(s+1)&&34===o.charCodeAt(s+2))return c+=o.slice(u,s),new S.WU(E.BLOCK_STRING,t,s+3,n,r,a,(0,A.W7)(c));if(l<32&&9!==l&&10!==l&&13!==l)throw w(e,s,"Invalid character within String: ".concat(O(l),"."));10===l?(++s,++i.line,i.lineStart=s):13===l?(10===o.charCodeAt(s+1)?s+=2:++s,++i.line,i.lineStart=s):92===l&&34===o.charCodeAt(s+1)&&34===o.charCodeAt(s+2)&&34===o.charCodeAt(s+3)?(c+=o.slice(u,s)+'"""',u=s+=4):++s}throw w(e,s,"Unterminated string.")}function U(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function W(e,t,n,r,a){for(var i=e.body,o=i.length,s=t+1,u=0;s!==o&&!isNaN(u=i.charCodeAt(s))&&(95===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122);)++s;return new S.WU(E.NAME,t,s,n,r,a,i.slice(t,s))}var V=function(){function e(e,t){var n=function(e){return _(e,I)}(e)?e:new I(e);this._lexer=new R(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(E.NAME);return{kind:k.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:k.DOCUMENT,definitions:this.many(E.SOF,this.parseDefinition,E.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(E.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(E.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var e=this._lexer.token;if(this.peek(E.BRACE_L))return{kind:k.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(e)};var t,n=this.parseOperationType();return this.peek(E.NAME)&&(t=this.parseName()),{kind:k.OPERATION_DEFINITION,operation:n,name:t,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseOperationType=function(){var e=this.expectToken(E.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(E.PAREN_L,this.parseVariableDefinition,E.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:k.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(E.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(E.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(E.DOLLAR),{kind:k.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:k.SELECTION_SET,selections:this.many(E.BRACE_L,this.parseSelection,E.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(E.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(E.COLON)?(e=r,t=this.parseName()):t=r,{kind:k.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(E.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(E.PAREN_L,t,E.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(E.COLON),{kind:k.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:k.ARGUMENT,name:this.parseName(),value:(this.expectToken(E.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(E.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(E.NAME)?{kind:k.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:k.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)?{kind:k.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:k.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case E.BRACKET_L:return this.parseList(e);case E.BRACE_L:return this.parseObject(e);case E.INT:return this._lexer.advance(),{kind:k.INT,value:t.value,loc:this.loc(t)};case E.FLOAT:return this._lexer.advance(),{kind:k.FLOAT,value:t.value,loc:this.loc(t)};case E.STRING:case E.BLOCK_STRING:return this.parseStringLiteral();case E.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:k.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:k.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:k.NULL,loc:this.loc(t)};default:return{kind:k.ENUM,value:t.value,loc:this.loc(t)}}case E.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:k.STRING,value:e.value,block:e.kind===E.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:k.LIST,values:this.any(E.BRACKET_L,(function(){return t.parseValueLiteral(e)}),E.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:k.OBJECT,fields:this.any(E.BRACE_L,(function(){return t.parseObjectField(e)}),E.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(E.COLON),{kind:k.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(E.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(E.AT),{kind:k.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return this.expectOptionalToken(E.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(E.BRACKET_R),e={kind:k.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(E.BANG)?{kind:k.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:k.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===E.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(E.STRING)||this.peek(E.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(E.BRACE_L,this.parseOperationTypeDefinition,E.BRACE_R);return{kind:k.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(E.COLON);var n=this.parseNamedType();return{kind:k.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:k.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),i=this.parseFieldsDefinition();return{kind:k.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:a,fields:i,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)){var t=[];this.expectOptionalToken(E.AMP);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(E.AMP)||this.peek(E.NAME));return t}return this.delimitedMany(E.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)&&this.peek(E.BRACE_L)&&this._lexer.lookahead().kind===E.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(E.BRACE_L,this.parseFieldDefinition,E.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(E.COLON);var a=this.parseTypeReference(),i=this.parseDirectives(!0);return{kind:k.FIELD_DEFINITION,description:t,name:n,arguments:r,type:a,directives:i,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(E.PAREN_L,this.parseInputValueDef,E.PAREN_R)},t.parseInputValueDef=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(E.COLON);var r,a=this.parseTypeReference();this.expectOptionalToken(E.EQUALS)&&(r=this.parseValueLiteral(!0));var i=this.parseDirectives(!0);return{kind:k.INPUT_VALUE_DEFINITION,description:t,name:n,type:a,defaultValue:r,directives:i,loc:this.loc(e)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),i=this.parseFieldsDefinition();return{kind:k.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:a,fields:i,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),a=this.parseUnionMemberTypes();return{kind:k.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:a,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(E.EQUALS)?this.delimitedMany(E.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),a=this.parseEnumValuesDefinition();return{kind:k.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:a,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(E.BRACE_L,this.parseEnumValueDefinition,E.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:k.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),a=this.parseInputFieldsDefinition();return{kind:k.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:a,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(E.BRACE_L,this.parseInputValueDef,E.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===E.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(E.BRACE_L,this.parseOperationTypeDefinition,E.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:k.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:k.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),a=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===a.length)throw this.unexpected();return{kind:k.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:a,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),a=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===a.length)throw this.unexpected();return{kind:k.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:a,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:k.UNION_TYPE_EXTENSION,name:t,directives:n,types:r,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:k.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:k.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(E.AT);var n=this.parseName(),r=this.parseArgumentDefs(),a=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var i=this.parseDirectiveLocations();return{kind:k.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:a,locations:i,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(E.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==N[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if(!0!==(null===(t=this._options)||void 0===t?void 0:t.noLocation))return new S.Ye(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw w(this._lexer.source,t.start,"Expected ".concat(H(e),", found ").concat(Z(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind!==E.NAME||t.value!==e)throw w(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(Z(t),"."));this._lexer.advance()},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===E.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!==e&&void 0!==e?e:this._lexer.token;return w(this._lexer.source,t.start,"Unexpected ".concat(Z(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var r=[];!this.expectOptionalToken(n);)r.push(t.call(this));return r},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r}return[]},t.many=function(e,t,n){this.expectToken(e);var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n},e}();function Z(e){var t=e.value;return H(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function H(e){return function(e){return e===E.BANG||e===E.DOLLAR||e===E.AMP||e===E.PAREN_L||e===E.PAREN_R||e===E.SPREAD||e===E.COLON||e===E.EQUALS||e===E.AT||e===E.BRACKET_L||e===E.BRACKET_R||e===E.BRACE_L||e===E.PIPE||e===E.BRACE_R}(e)?'"'.concat(e,'"'):e}var G=new Map,q=new Map,X=!0,Y=!1;function K(e){return e.replace(/[\s,]+/g," ").trim()}function Q(e){var t=new Set,n=[];return e.definitions.forEach((function(e){if("FragmentDefinition"===e.kind){var r=e.name.value,a=K((o=e.loc).source.body.substring(o.start,o.end)),i=q.get(r);i&&!i.has(a)?X&&console.warn("Warning: fragment with name "+r+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):i||q.set(r,i=new Set),i.add(a),t.has(a)||(t.add(a),n.push(e))}else n.push(e);var o})),r(r({},e),{definitions:n})}function J(e){var t=K(e);if(!G.has(t)){var n=function(e,t){return new V(e,t).parseDocument()}(e,{experimentalFragmentVariables:Y});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");G.set(t,function(e){var t=new Set(e.definitions);t.forEach((function(e){e.loc&&delete e.loc,Object.keys(e).forEach((function(n){var r=e[n];r&&"object"===typeof r&&t.add(r)}))}));var n=e.loc;return n&&(delete n.startToken,delete n.endToken),e}(Q(n)))}return G.get(t)}function $(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];"string"===typeof e&&(e=[e]);var r=e[0];return t.forEach((function(t,n){t&&"Document"===t.kind?r+=t.loc.source.body:r+=t,r+=e[n+1]})),J(r)}function ee(){G.clear(),q.clear()}function te(){X=!1}function ne(){Y=!0}function re(){Y=!1}var ae,ie=$,oe=ee,se=te,ue=ne,le=re;(ae=$||($={})).gql=ie,ae.resetCaches=oe,ae.disableFragmentWarnings=se,ae.enableExperimentalFragmentVariables=ue,ae.disableExperimentalFragmentVariables=le,$.default=$;var ce=$},6421:function(e){try{e.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},2110:function(e,t,n){"use strict";var r=n(8309),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var a=p(n);a&&a!==f&&e(t,a,r)}var o=c(n);d&&(o=o.concat(d(n)));for(var s=u(t),m=u(n),v=0;v<o.length;++v){var g=o[v];if(!i[g]&&(!r||!r[g])&&(!m||!m[g])&&(!s||!s[g])){var y=h(n,g);try{l(t,g,y)}catch(b){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case i:case s:case o:case p:return e;default:switch(e=e&&e.$$typeof){case l:case h:case v:case m:case u:return e;default:return t}}case a:return t}}}function k(e){return w(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=i,t.Lazy=v,t.Memo=m,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return k(e)||w(e)===c},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===v},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===d||e===s||e===o||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===u||e.$$typeof===l||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===g)},t.typeOf=w},8309:function(e,t,n){"use strict";e.exports=n(746)},8987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(T){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?g:v;if(t){if(e<0)return g;if(e>=p)return k}else{if(e<=-f)return S;if(e+1>=f)return w}return e<0?s(-e,t).neg():u(e%h|0,e/h|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var l=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return v;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var a=s(l(n,8)),i=v,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),d=parseInt(e.substring(o,o+u),n);if(u<8){var h=s(l(n,u));i=i.mul(h).add(s(d))}else i=(i=i.mul(a)).add(s(d))}return i.unsigned=t,i}function d(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?c(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=d;var h=4294967296,p=h*h,f=p/2,m=o(1<<24),v=o(0);n.ZERO=v;var g=o(0,!0);n.UZERO=g;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var w=u(-1,2147483647,!1);n.MAX_VALUE=w;var k=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var S=u(0,-2147483648,!1);n.MIN_VALUE=S;var E=n.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},E.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(l(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),c=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},E.isZero=function(){return 0===this.high&&0===this.low},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return 1===(1&this.low)},E.isEven=function(){return 0===(1&this.low)},E.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(e){return this.comp(e)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return this.comp(e)<=0},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(e){return this.comp(e)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return this.comp(e)>=0},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},E.neg=E.negate,E.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,l=e.low>>>16,c=0,h=0,p=0,f=0;return p+=(f+=i+(65535&e.low))>>>16,h+=(p+=a+l)>>>16,c+=(h+=n+s)>>>16,c+=t+o,u((p&=65535)<<16|(f&=65535),(c&=65535)<<16|(h&=65535),this.unsigned)},E.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return v;if(r(e)||(e=d(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return v;if(this.eq(S))return e.isOdd()?S:v;if(e.eq(S))return this.isOdd()?S:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,l=e.high>>>16,c=65535&e.high,h=e.low>>>16,p=65535&e.low,f=0,g=0,y=0,b=0;return y+=(b+=o*p)>>>16,g+=(y+=i*p)>>>16,y&=65535,g+=(y+=o*h)>>>16,f+=(g+=a*p)>>>16,g&=65535,f+=(g+=i*h)>>>16,g&=65535,f+=(g+=o*c)>>>16,f+=n*p+a*h+i*c+o*l,u((y&=65535)<<16|(b&=65535),(f&=65535)<<16|(g&=65535),this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:v;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return b;i=g}else{if(this.eq(S))return e.eq(y)||e.eq(x)?S:e.eq(S)?y:(n=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(S))return this.unsigned?g:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=v}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),c=o<=48?1:l(2,o-48),h=s(n),p=h.mul(e);p.isNegative()||p.gt(a);)p=(h=s(n-=c,this.unsigned)).mul(e);h.isZero()&&(h=y),i=i.add(h),a=a.sub(p)}return i},E.div=E.divide,E.modulo=function(e){return r(e)||(e=d(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return u(~this.low,~this.high,this.unsigned)},E.and=function(e){return r(e)||(e=d(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return r(e)||(e=d(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return r(e)||(e=d(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},8191:function(e,t,n){"use strict";n.d(t,{Gl:function(){return s},dP:function(){return O},re:function(){return P}});var r=function(){return Object.create(null)},a=Array.prototype,i=a.forEach,o=a.slice,s=function(){function e(e,t){void 0===e&&(e=!0),void 0===t&&(t=r),this.weakness=e,this.makeData=t}return e.prototype.lookup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.lookupArray(e)},e.prototype.lookupArray=function(e){var t=this;return i.call(e,(function(e){return t=t.getChildTrie(e)})),t.data||(t.data=this.makeData(o.call(e)))},e.prototype.getChildTrie=function(t){var n=this.weakness&&function(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=n.get(t);return r||n.set(t,r=new e(this.weakness,this.makeData)),r},e}();var u=n(3135);function l(){}var c,d=function(){function e(e,t){void 0===e&&(e=1/0),void 0===t&&(t=l),this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.get=function(e){var t=this.getNode(e);return t&&t.value},e.prototype.getNode=function(e){var t=this.map.get(e);if(t&&t!==this.newest){var n=t.older,r=t.newer;r&&(r.older=n),n&&(n.newer=r),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=r)}return t},e.prototype.set=function(e,t){var n=this.getNode(e);return n?n.value=t:(n={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},e.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},e.prototype.delete=function(e){var t=this.map.get(e);return!!t&&(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0)},e}(),h=new u.g7,p=Object.prototype.hasOwnProperty,f=void 0===(c=Array.from)?function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t}:c;function m(e){var t=e.unsubscribe;"function"===typeof t&&(e.unsubscribe=void 0,t())}var v=[],g=100;function y(e,t){if(!e)throw new Error(t||"assertion failure")}function b(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}var x=function(){function e(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++e.count}return e.prototype.peek=function(){if(1===this.value.length&&!S(this))return w(this),this.value[0]},e.prototype.recompute=function(e){return y(!this.recomputing,"already recomputing"),w(this),S(this)?function(e,t){N(e),h.withValue(e,k,[e,t]),function(e,t){if("function"===typeof e.subscribe)try{m(e),e.unsubscribe=e.subscribe.apply(null,t)}catch(n){return e.setDirty(),!1}return!0}(e,t)&&function(e){if(e.dirty=!1,S(e))return;T(e)}(e);return b(e.value)}(this,e):b(this.value)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,E(this),m(this))},e.prototype.dispose=function(){var e=this;this.setDirty(),N(this),C(this,(function(t,n){t.setDirty(),A(t,e)}))},e.prototype.forget=function(){this.dispose()},e.prototype.dependOn=function(e){e.add(this),this.deps||(this.deps=v.pop()||new Set),this.deps.add(e)},e.prototype.forgetDeps=function(){var e=this;this.deps&&(f(this.deps).forEach((function(t){return t.delete(e)})),this.deps.clear(),v.push(this.deps),this.deps=null)},e.count=0,e}();function w(e){var t=h.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),S(e)?_(t,e):M(t,e),t}function k(e,t){e.recomputing=!0,e.value.length=0;try{e.value[0]=e.fn.apply(null,t)}catch(n){e.value[1]=n}e.recomputing=!1}function S(e){return e.dirty||!(!e.dirtyChildren||!e.dirtyChildren.size)}function E(e){C(e,_)}function T(e){C(e,M)}function C(e,t){var n=e.parents.size;if(n)for(var r=f(e.parents),a=0;a<n;++a)t(r[a],e)}function _(e,t){y(e.childValues.has(t)),y(S(t));var n=!S(e);if(e.dirtyChildren){if(e.dirtyChildren.has(t))return}else e.dirtyChildren=v.pop()||new Set;e.dirtyChildren.add(t),n&&E(e)}function M(e,t){y(e.childValues.has(t)),y(!S(t));var n=e.childValues.get(t);0===n.length?e.childValues.set(t,t.value.slice(0)):function(e,t){var n=e.length;return n>0&&n===t.length&&e[n-1]===t[n-1]}(n,t.value)||e.setDirty(),I(e,t),S(e)||T(e)}function I(e,t){var n=e.dirtyChildren;n&&(n.delete(t),0===n.size&&(v.length<g&&v.push(n),e.dirtyChildren=null))}function N(e){e.childValues.size>0&&e.childValues.forEach((function(t,n){A(e,n)})),e.forgetDeps(),y(null===e.dirtyChildren)}function A(e,t){t.parents.delete(e),e.childValues.delete(t),I(e,t)}var R={setDirty:!0,dispose:!0,forget:!0};function O(e){var t=new Map,n=e&&e.subscribe;function r(e){var r=h.getValue();if(r){var a=t.get(e);a||t.set(e,a=new Set),r.dependOn(a),"function"===typeof n&&(m(a),a.unsubscribe=n(e))}}return r.dirty=function(e,n){var r=t.get(e);if(r){var a=n&&p.call(R,n)?n:"setDirty";f(r).forEach((function(e){return e[a]()})),t.delete(e),m(r)}},r}function D(){var e=new s("function"===typeof WeakMap);return function(){return e.lookupArray(arguments)}}D();var L=new Set;function P(e,t){void 0===t&&(t=Object.create(null));var n=new d(t.max||Math.pow(2,16),(function(e){return e.dispose()})),r=t.keyArgs,a=t.makeCacheKey||D(),i=function(){var i=a.apply(null,r?r.apply(null,arguments):arguments);if(void 0===i)return e.apply(null,arguments);var o=n.get(i);o||(n.set(i,o=new x(e)),o.subscribe=t.subscribe,o.forget=function(){return n.delete(i)});var s=o.recompute(Array.prototype.slice.call(arguments));return n.set(i,o),L.add(n),h.hasValue()||(L.forEach((function(e){return e.clean()})),L.clear()),s};function o(e){var t=n.get(e);t&&t.setDirty()}function s(e){var t=n.get(e);if(t)return t.peek()}function u(e){return n.delete(e)}return Object.defineProperty(i,"size",{get:function(){return n.map.size},configurable:!1,enumerable:!1}),i.dirtyKey=o,i.dirty=function(){o(a.apply(null,arguments))},i.peekKey=s,i.peek=function(){return s(a.apply(null,arguments))},i.forgetKey=u,i.forget=function(){return u(a.apply(null,arguments))},i.makeCacheKey=a,i.getKey=r?function(){return a.apply(null,r.apply(null,arguments))}:a,Object.freeze(i)}},5988:function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,a=n.length;r<a;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},1176:function(e){var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var r=e,a=e.indexOf("["),i=e.indexOf("]");-1!=a&&-1!=i&&(e=e.substring(0,a)+e.substring(a,i).replace(/:/g,";")+e.substring(i,e.length));for(var o=t.exec(e||""),s={},u=14;u--;)s[n[u]]=o[u]||"";return-1!=a&&-1!=i&&(s.source=r,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,s.path),s.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,s.query),s}},888:function(e,t,n){"use strict";var r=n(9047);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},173:function(e,t,n){"use strict";var r,a=n(2791),i=(r=a)&&"object"===typeof r&&"default"in r?r.default:r,o=n(1338),s=new o,u=s.getBrowser(),l=s.getCPU(),c=s.getDevice(),d=s.getEngine(),h=s.getOS(),p=s.getUA(),f=function(e){return s.setUA(e)},m=function(e){if(e){var t=new o(e);return{UA:t,browser:t.getBrowser(),cpu:t.getCPU(),device:t.getDevice(),engine:t.getEngine(),os:t.getOS(),ua:t.getUA(),setUserAgent:function(e){return t.setUA(e)}}}console.error("No userAgent string was provided")},v=Object.freeze({ClientUAInstance:s,browser:u,cpu:l,device:c,engine:d,os:h,ua:p,setUa:f,parseUserAgent:m});function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function E(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M="mobile",I="tablet",N="smarttv",A="console",R="wearable",O="embedded",D=void 0,L={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},P={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},F={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},j=function(e){return e||(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none")},z=function(){return!("undefined"===typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},B=function(e){var t=z();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)},U=function(e,t,n,r){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{vendor:j(t.vendor),model:j(t.model),os:j(n.name),osVersion:j(n.version),ua:j(r)})};var W=function(e){return e.type===M},V=function(e){return e.type===I},Z=function(e){var t=e.type;return t===M||t===I},H=function(e){return e.type===N},G=function(e){return e.type===D},q=function(e){return e.type===R},X=function(e){return e.type===A},Y=function(e){return e.type===O},K=function(e){var t=e.vendor;return j(t)},Q=function(e){var t=e.model;return j(t)},J=function(e){var t=e.type;return j(t,"browser")},$=function(e){return e.name===P.Android},ee=function(e){return e.name===P.Windows},te=function(e){return e.name===P.MAC_OS},ne=function(e){return e.name===P.WindowsPhone},re=function(e){return e.name===P.IOS},ae=function(e){var t=e.version;return j(t)},ie=function(e){var t=e.name;return j(t)},oe=function(e){return e.name===L.Chrome},se=function(e){return e.name===L.Firefox},ue=function(e){return e.name===L.Chromium},le=function(e){return e.name===L.Edge},ce=function(e){return e.name===L.Yandex},de=function(e){var t=e.name;return t===L.Safari||t===L.MobileSafari},he=function(e){return e.name===L.MobileSafari},pe=function(e){return e.name===L.Opera},fe=function(e){var t=e.name;return t===L.InternetExplorer||t===L.Ie},me=function(e){return e.name===L.MIUI},ve=function(e){return e.name===L.SamsungBrowser},ge=function(e){var t=e.version;return j(t)},ye=function(e){var t=e.major;return j(t)},be=function(e){var t=e.name;return j(t)},xe=function(e){var t=e.name;return j(t)},we=function(e){var t=e.version;return j(t)},ke=function(){var e=z(),t=e&&e.userAgent&&e.userAgent.toLowerCase();return"string"===typeof t&&/electron/.test(t)},Se=function(e){return"string"===typeof e&&-1!==e.indexOf("Edg/")},Ee=function(){var e=z();return e&&(/iPad|iPhone|iPod/.test(e.platform)||"MacIntel"===e.platform&&e.maxTouchPoints>1)&&!window.MSStream},Te=function(){return B("iPad")},Ce=function(){return B("iPhone")},_e=function(){return B("iPod")},Me=function(e){return j(e)};function Ie(e){var t=e||v,n=t.device,r=t.browser,a=t.os,i=t.engine,o=t.ua;return{isSmartTV:H(n),isConsole:X(n),isWearable:q(n),isEmbedded:Y(n),isMobileSafari:he(r)||Te(),isChromium:ue(r),isMobile:Z(n)||Te(),isMobileOnly:W(n),isTablet:V(n)||Te(),isBrowser:G(n),isDesktop:G(n),isAndroid:$(a),isWinPhone:ne(a),isIOS:re(a)||Te(),isChrome:oe(r),isFirefox:se(r),isSafari:de(r),isOpera:pe(r),isIE:fe(r),osVersion:ae(a),osName:ie(a),fullBrowserVersion:ge(r),browserVersion:ye(r),browserName:be(r),mobileVendor:K(n),mobileModel:Q(n),engineName:xe(i),engineVersion:we(i),getUA:Me(o),isEdge:le(r)||Se(o),isYandex:ce(r),deviceType:J(n),isIOS13:Ee(),isIPad13:Te(),isIPhone13:Ce(),isIPod13:_e(),isElectron:ke(),isEdgeChromium:Se(o),isLegacyEdge:le(r)&&!Se(o),isWindows:ee(a),isMacOs:te(a),isMIUI:me(r),isSamsungBrowser:ve(r)}}var Ne=H(c),Ae=X(c),Re=q(c),Oe=Y(c),De=he(u)||Te(),Le=ue(u),Pe=Z(c)||Te(),Fe=W(c),je=V(c)||Te(),ze=G(c),Be=G(c),Ue=$(h),We=ne(h),Ve=re(h)||Te(),Ze=oe(u),He=se(u),Ge=de(u),qe=pe(u),Xe=fe(u),Ye=ae(h),Ke=ie(h),Qe=ge(u),Je=ye(u),$e=be(u),et=K(c),tt=Q(c),nt=xe(d),rt=we(d),at=Me(p),it=le(u)||Se(p),ot=ce(u),st=J(c),ut=Ee(),lt=Te(),ct=Ce(),dt=_e(),ht=ke(),pt=Se(p),ft=le(u)&&!Se(p),mt=ee(h),vt=te(h),gt=me(u),yt=ve(u);function bt(e){var t=e||window.navigator.userAgent;return m(t)}t.tq=Pe},4463:function(e,t,n){"use strict";var r=n(2791),a=n(5296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),_=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var P,F=Object.assign;function j(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var a=l.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var u="\n"+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function U(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case T:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=Z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,Z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Z(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Z(n)}}function ie(e,t){var n=Z(t.value),r=Z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ee=null;function Te(e){if(e=ba(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=wa(t),ke(e.stateNode,e.type,t))}}function Ce(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function _e(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Me(e,t){return e(t)}function Ie(){}var Ne=!1;function Ae(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Me(e,t,n)}finally{Ne=!1,(null!==Se||null!==Ee)&&(Ie(),_e())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ce){Oe=!1}function Le(e,t,n,r,a,i,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Pe=!1,Fe=null,je=!1,ze=null,Be={onError:function(e){Pe=!0,Fe=e}};function Ue(e,t,n,r,a,i,o,s,u){Pe=!1,Fe=null,Le.apply(Be,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(We(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Ze(a),e;if(o===r)return Ze(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var qe=a.unstable_scheduleCallback,Xe=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Ke=a.unstable_requestPaint,Qe=a.unstable_now,Je=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=dt(s):0!==(i&=o)&&(r=dt(i))}else 0!==(o=n&~a)?r=dt(o):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,Et,Tt,Ct=!1,_t=[],Mt=null,It=null,Nt=null,At=new Map,Rt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Pt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ft(e){var t=ya(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Tt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){jt(e)&&n.delete(t)}function Bt(){Ct=!1,null!==Mt&&jt(Mt)&&(Mt=null),null!==It&&jt(It)&&(It=null),null!==Nt&&jt(Nt)&&(Nt=null),At.forEach(zt),Rt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Bt)))}function Wt(e){function t(t){return Ut(t,e)}if(0<_t.length){Ut(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mt&&Ut(Mt,e),null!==It&&Ut(It,e),null!==Nt&&Ut(Nt,e),At.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var Vt=x.ReactCurrentBatchConfig,Zt=!0;function Ht(e,t,n,r){var a=bt,i=Vt.transition;Vt.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=a,Vt.transition=i}}function Gt(e,t,n,r){var a=bt,i=Vt.transition;Vt.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=a,Vt.transition=i}}function qt(e,t,n,r){if(Zt){var a=Yt(e,t,n,r);if(null===a)Zr(e,t,r,Xt,n),Lt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Mt=Pt(Mt,e,t,n,r,a),!0;case"dragenter":return It=Pt(It,e,t,n,r,a),!0;case"mouseover":return Nt=Pt(Nt,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return At.set(i,Pt(At.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Rt.set(i,Pt(Rt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&wt(i),null===(i=Yt(e,t,n,r))&&Zr(e,t,r,Xt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Zr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=ya(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,$t=null;function en(){if($t)return $t;var e,t,n=Jt,r=n.length,a="value"in Qt?Qt.value:Qt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),dn=F({},ln,{view:0,detail:0}),hn=an(dn),pn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=an(pn),mn=an(F({},pn,{dataTransfer:0})),vn=an(F({},dn,{relatedTarget:0})),gn=an(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(F({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return En}var Cn=F({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=an(Cn),Mn=an(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Nn=an(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(An),On=[9,13,27,32],Dn=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Pn=c&&"TextEvent"in window&&!Ln,Fn=c&&(!Dn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ce(r),0<(t=Gr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,qn=null;function Xn(e){jr(e,0)}function Yn(e){if(q(xa(e)))return e}function Kn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Jn;if(c){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Jn=$n}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),qn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(qn)){var t=[];Hn(t,qn,e,we(e)),Ae(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(qn)}function ir(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=cr(n,i);var o=cr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==vr||vr!==X(r)||("selectionStart"in(r=vr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Gr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Er={};function Tr(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Cr=Tr("animationend"),_r=Tr("animationiteration"),Mr=Tr("animationstart"),Ir=Tr("transitionend"),Nr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),u(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Dr=Ar[Or];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(_r,"onAnimationIteration"),Rr(Mr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ir,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,u,l){if(Ue.apply(this,arguments),Pe){if(!Pe)throw Error(i(198));var c=Fe;Pe=!1,Fe=null,je||(je=!0,ze=c)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Fr(a,s,l),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Fr(a,s,l),i=u}}}if(je)throw e=ze,je=!1,ze=null,e}function zr(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Pr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Kt(t)){case 1:var a=Ht;break;case 4:a=Gt;break;default:a=qt}n=a.bind(null,t,n,e),a=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Zr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ya(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}Ae((function(){var r=i,a=we(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=_n;break;case"focusin":l="focus",u=vn;break;case"focusout":l="blur",u=vn;break;case"beforeblur":case"afterblur":u=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=In;break;case Cr:case _r:case Mr:u=gn;break;case Ir:u=Nn;break;case"scroll":u=hn;break;case"wheel":u=Rn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Mn}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Re(f,h))&&c.push(Hr(f,m,p)))),d)break;f=f.return}0<c.length&&(s=new u(s,l,null,n,a),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(l=n.relatedTarget||n.fromElement)||!ya(l)&&!l[fa])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?ya(l):null)&&(l!==(d=We(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Mn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==u?s:xa(u),p=null==l?s:xa(l),(s=new c(m,f+"leave",u,n,a)).target=d,s.relatedTarget=p,m=null,ya(a)===r&&((c=new c(h,f+"enter",l,n,a)).target=p,c.relatedTarget=d,m=c),d=m,u&&l)e:{for(h=l,f=0,p=c=u;p;p=qr(p))f++;for(p=0,m=h;m;m=qr(m))p++;for(;0<f-p;)c=qr(c),f--;for(;0<p-f;)h=qr(h),p--;for(;f--;){if(c===h||null!==h&&c===h.alternate)break e;c=qr(c),h=qr(h)}c=null}else c=null;null!==u&&Xr(o,s,u,c,!1),null!==l&&null!==d&&Xr(o,d,l,c,!0)}if("select"===(u=(s=r?xa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Kn;else if(Zn(s))if(Qn)v=or;else{v=ar;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ir);switch(v&&(v=v(e,r))?Hn(o,v,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?xa(r):window,e){case"focusin":(Zn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,yr=null);break;case"focusout":yr=gr=vr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,a)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=en()):(Jt="value"in(Qt=a)?Qt.value:Qt.textContent,Wn=!0)),0<(g=Gr(r,b)).length&&(b=new xn(b,e,null,n,a),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Pn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,jn);case"textInput":return(e=t.data)===jn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Dn&&Bn(e,t)?(e=en(),$t=Jt=Qt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}jr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Re(e,n))&&r.unshift(Hr(e,i,a)),null!=(i=Re(e,t))&&r.push(Hr(e,i,a))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,a?null!=(u=Re(n,i))&&o.unshift(Hr(n,u,s)):a||null!=(u=Re(n,i))&&o.push(Hr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Kr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(i(425))}function $r(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Wt(t)}function la(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ca(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,pa="__reactProps$"+da,fa="__reactContainer$"+da,ma="__reactEvents$"+da,va="__reactListeners$"+da,ga="__reactHandles$"+da;function ya(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ca(e);null!==e;){if(n=e[ha])return n;e=ca(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[fa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wa(e){return e[pa]||null}var ka=[],Sa=-1;function Ea(e){return{current:e}}function Ta(e){0>Sa||(e.current=ka[Sa],ka[Sa]=null,Sa--)}function Ca(e,t){Sa++,ka[Sa]=e.current,e.current=t}var _a={},Ma=Ea(_a),Ia=Ea(!1),Na=_a;function Aa(e,t){var n=e.type.contextTypes;if(!n)return _a;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ra(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oa(){Ta(Ia),Ta(Ma)}function Da(e,t,n){if(Ma.current!==_a)throw Error(i(168));Ca(Ma,t),Ca(Ia,n)}function La(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,V(e)||"Unknown",a));return F({},n,r)}function Pa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_a,Na=Ma.current,Ca(Ma,e),Ca(Ia,Ia.current),!0}function Fa(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=La(e,t,Na),r.__reactInternalMemoizedMergedChildContext=e,Ta(Ia),Ta(Ma),Ca(Ma,e)):Ta(Ia),Ca(Ia,n)}var ja=null,za=!1,Ba=!1;function Ua(e){null===ja?ja=[e]:ja.push(e)}function Wa(){if(!Ba&&null!==ja){Ba=!0;var e=0,t=bt;try{var n=ja;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ja=null,za=!1}catch(a){throw null!==ja&&(ja=ja.slice(e+1)),qe($e,Wa),a}finally{bt=t,Ba=!1}}return null}var Va=[],Za=0,Ha=null,Ga=0,qa=[],Xa=0,Ya=null,Ka=1,Qa="";function Ja(e,t){Va[Za++]=Ga,Va[Za++]=Ha,Ha=e,Ga=t}function $a(e,t,n){qa[Xa++]=Ka,qa[Xa++]=Qa,qa[Xa++]=Ya,Ya=e;var r=Ka;e=Qa;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Ka=1<<32-ot(t)+a|n<<a|r,Qa=i+e}else Ka=1<<i|n<<a|r,Qa=e}function ei(e){null!==e.return&&(Ja(e,1),$a(e,1,0))}function ti(e){for(;e===Ha;)Ha=Va[--Za],Va[Za]=null,Ga=Va[--Za],Va[Za]=null;for(;e===Ya;)Ya=qa[--Xa],qa[Xa]=null,Qa=qa[--Xa],qa[Xa]=null,Ka=qa[--Xa],qa[Xa]=null}var ni=null,ri=null,ai=!1,ii=null;function oi(e,t){var n=Rl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=la(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ya?{id:Ka,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function ui(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function li(e){if(ai){var t=ri;if(t){var n=t;if(!si(e,t)){if(ui(e))throw Error(i(418));t=la(n.nextSibling);var r=ni;t&&si(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(ui(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function ci(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!ai)return ci(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(ui(e))throw hi(),Error(i(418));for(;t;)oi(e,t),t=la(t.nextSibling)}if(ci(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=la(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?la(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=la(e.nextSibling)}function pi(){ri=ni=null,ai=!1}function fi(e){null===ii?ii=[e]:ii.push(e)}var mi=x.ReactCurrentBatchConfig;function vi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var gi=Ea(null),yi=null,bi=null,xi=null;function wi(){xi=bi=yi=null}function ki(e){var t=gi.current;Ta(gi),e._currentValue=t}function Si(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t){yi=e,xi=bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Ti(e){var t=e._currentValue;if(xi!==e)if(e={context:e,memoizedValue:t,next:null},null===bi){if(null===yi)throw Error(i(308));bi=e,yi.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Ci=null;function _i(e){null===Ci?Ci=[e]:Ci.push(e)}function Mi(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,_i(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ii(e,r)}function Ii(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ni=!1;function Ai(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Di(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Iu)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ii(e,n)}return null===(a=r.interleaved)?(t.next=t,_i(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ii(e,n)}function Li(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Pi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fi(e,t,n,r){var a=e.updateQueue;Ni=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?i=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==i){var d=a.baseState;for(o=0,c=l=u=null,s=i;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=F({},d,h);break e;case 2:Ni=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=p,u=d):c=c.next=p,o|=h;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(h=s).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===c&&(u=d),a.baseState=u,a.firstBaseUpdate=l,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Fu|=o,e.lanes=o,e.memoizedState=d}}function ji(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var zi=(new r.Component).refs;function Bi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ui={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),a=nl(e),i=Oi(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Di(e,i,a))&&(rl(t,e,a,r),Li(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),a=nl(e),i=Oi(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Di(e,i,a))&&(rl(t,e,a,r),Li(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),a=Oi(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Di(e,a,r))&&(rl(t,e,r,n),Li(t,e,r))}};function Wi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,i))}function Vi(e,t,n){var r=!1,a=_a,i=t.contextType;return"object"===typeof i&&null!==i?i=Ti(i):(a=Ra(t)?Na:Ma.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Aa(e,a):_a),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ui,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Zi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ui.enqueueReplaceState(t,t.state,null)}function Hi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=zi,Ai(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Ti(i):(i=Ra(t)?Na:Ma.current,a.context=Aa(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(Bi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Ui.enqueueReplaceState(a,a.state,null),Fi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===zi&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function qi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xi(e){return(0,e._init)(e._payload)}function Yi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=jl(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&Xi(i)===t.type)?((r=a(t,n.props)).ref=Gi(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=Gi(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zl(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Pl(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Gi(e,null,t),n.return=e,n;case k:return(t=zl(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Pl(t,e.mode,n,null)).return=e,t;qi(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?l(e,t,n,r):null;case k:return n.key===a?c(e,t,n,r):null;case R:return p(e,t,(a=n._init)(n._payload),r)}if(te(n)||L(n))return null!==a?null:d(e,t,n,r,null);qi(e,n)}return null}function f(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case R:return f(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,a,null);qi(t,r)}return null}function m(a,i,s,u){for(var l=null,c=null,d=i,m=i=0,v=null;null!==d&&m<s.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var g=p(a,d,s[m],u);if(null===g){null===d&&(d=v);break}e&&d&&null===g.alternate&&t(a,d),i=o(g,i,m),null===c?l=g:c.sibling=g,c=g,d=v}if(m===s.length)return n(a,d),ai&&Ja(a,m),l;if(null===d){for(;m<s.length;m++)null!==(d=h(a,s[m],u))&&(i=o(d,i,m),null===c?l=d:c.sibling=d,c=d);return ai&&Ja(a,m),l}for(d=r(a,d);m<s.length;m++)null!==(v=f(d,a,m,s[m],u))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),i=o(v,i,m),null===c?l=v:c.sibling=v,c=v);return e&&d.forEach((function(e){return t(a,e)})),ai&&Ja(a,m),l}function v(a,s,u,l){var c=L(u);if("function"!==typeof c)throw Error(i(150));if(null==(u=c.call(u)))throw Error(i(151));for(var d=c=null,m=s,v=s=0,g=null,y=u.next();null!==m&&!y.done;v++,y=u.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=p(a,m,y.value,l);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(a,m),s=o(b,s,v),null===d?c=b:d.sibling=b,d=b,m=g}if(y.done)return n(a,m),ai&&Ja(a,v),c;if(null===m){for(;!y.done;v++,y=u.next())null!==(y=h(a,y.value,l))&&(s=o(y,s,v),null===d?c=y:d.sibling=y,d=y);return ai&&Ja(a,v),c}for(m=r(a,m);!y.done;v++,y=u.next())null!==(y=f(m,a,v,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(a,e)})),ai&&Ja(a,v),c}return function e(r,i,o,u){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var l=o.key,c=i;null!==c;){if(c.key===l){if((l=o.type)===S){if(7===c.tag){n(r,c.sibling),(i=a(c,o.props.children)).return=r,r=i;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===R&&Xi(l)===c.type){n(r,c.sibling),(i=a(c,o.props)).ref=Gi(r,c,o),i.return=r,r=i;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===S?((i=Pl(o.props.children,r.mode,u,o.key)).return=r,r=i):((u=Ll(o.type,o.key,o.props,null,r.mode,u)).ref=Gi(r,i,o),u.return=r,r=u)}return s(r);case k:e:{for(c=o.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=zl(o,r.mode,u)).return=r,r=i}return s(r);case R:return e(r,i,(c=o._init)(o._payload),u)}if(te(o))return m(r,i,o,u);if(L(o))return v(r,i,o,u);qi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=jl(o,r.mode,u)).return=r,r=i),s(r)):n(r,i)}}var Ki=Yi(!0),Qi=Yi(!1),Ji={},$i=Ea(Ji),eo=Ea(Ji),to=Ea(Ji);function no(e){if(e===Ji)throw Error(i(174));return e}function ro(e,t){switch(Ca(to,t),Ca(eo,e),Ca($i,Ji),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ta($i),Ca($i,t)}function ao(){Ta($i),Ta(eo),Ta(to)}function io(e){no(to.current);var t=no($i.current),n=ue(t,e.type);t!==n&&(Ca(eo,e),Ca($i,n))}function oo(e){eo.current===e&&(Ta($i),Ta(eo))}var so=Ea(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=x.ReactCurrentDispatcher,po=x.ReactCurrentBatchConfig,fo=0,mo=null,vo=null,go=null,yo=!1,bo=!1,xo=0,wo=0;function ko(){throw Error(i(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,a,o){if(fo=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,a),bo){o=0;do{if(bo=!1,xo=0,25<=o)throw Error(i(301));o+=1,go=vo=null,t.updateQueue=null,ho.current=ls,e=n(r,a)}while(bo)}if(ho.current=os,t=null!==vo&&null!==vo.next,fo=0,go=vo=mo=null,yo=!1,t)throw Error(i(300));return e}function To(){var e=0!==xo;return xo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?mo.memoizedState=go=e:go=go.next=e,go}function _o(){if(null===vo){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=vo.next;var t=null===go?mo.memoizedState:go.next;if(null!==t)go=t,vo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(vo=e).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===go?mo.memoizedState=go=e:go=go.next=e}return go}function Mo(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=_o(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=vo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var u=s=null,l=null,c=o;do{var d=c.lane;if((fo&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=h,s=r):l=l.next=h,mo.lanes|=d,Fu|=d}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,mo.lanes|=o,Fu|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=_o(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(xs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Ro(e,t){var n=mo,r=_o(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,xs=!0),r=r.queue,Zo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,zo(9,Do.bind(null,n,r,a,t),void 0,null),null===Nu)throw Error(i(349));0!==(30&fo)||Oo(n,t,a)}return a}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Po(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Po(t)&&Fo(e)}))}function Po(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Ii(e,1);null!==t&&rl(t,e,1,-1)}function jo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function zo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return _o().memoizedState}function Uo(e,t,n,r){var a=Co();mo.flags|=e,a.memoizedState=zo(1|t,n,void 0,void 0===r?null:r)}function Wo(e,t,n,r){var a=_o();r=void 0===r?null:r;var i=void 0;if(null!==vo){var o=vo.memoizedState;if(i=o.destroy,null!==r&&So(r,o.deps))return void(a.memoizedState=zo(t,n,i,r))}mo.flags|=e,a.memoizedState=zo(1|t,n,i,r)}function Vo(e,t){return Uo(8390656,8,e,t)}function Zo(e,t){return Wo(2048,8,e,t)}function Ho(e,t){return Wo(4,2,e,t)}function Go(e,t){return Wo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Wo(4,4,qo.bind(null,t,e),n)}function Yo(){}function Ko(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&fo)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mo.lanes|=n,Fu|=n,e.baseState=!0),t)}function $o(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=po.transition;po.transition={};try{e(!1),t()}finally{bt=n,po.transition=r}}function es(){return _o().memoizedState}function ts(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))as(t,n);else if(null!==(n=Mi(e,t,n,r))){rl(n,e,r,tl()),is(n,t,r)}}function ns(e,t,n){var r=nl(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))as(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(a.next=a,_i(t)):(a.next=u.next,u.next=a),void(t.interleaved=a)}}catch(l){}null!==(n=Mi(e,t,a,r))&&(rl(n,e,r,a=tl()),is(n,t,r))}}function rs(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function as(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function is(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ti,useCallback:ko,useContext:ko,useEffect:ko,useImperativeHandle:ko,useInsertionEffect:ko,useLayoutEffect:ko,useMemo:ko,useReducer:ko,useRef:ko,useState:ko,useDebugValue:ko,useDeferredValue:ko,useTransition:ko,useMutableSource:ko,useSyncExternalStore:ko,useId:ko,unstable_isNewReconciler:!1},ss={readContext:Ti,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Ti,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:jo,useDebugValue:Yo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=$o.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,a=Co();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Nu)throw Error(i(349));0!==(30&fo)||Oo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Vo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,zo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Nu.identifierPrefix;if(ai){var n=Qa;t=":"+t+"R"+(n=(Ka&~(1<<32-ot(Ka)-1)).toString(32)+n),0<(n=xo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ti,useCallback:Ko,useContext:Ti,useEffect:Zo,useImperativeHandle:Xo,useInsertionEffect:Ho,useLayoutEffect:Go,useMemo:Qo,useReducer:Io,useRef:Bo,useState:function(){return Io(Mo)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(_o(),vo.memoizedState,e)},useTransition:function(){return[Io(Mo)[0],_o().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1},ls={readContext:Ti,useCallback:Ko,useContext:Ti,useEffect:Zo,useImperativeHandle:Xo,useInsertionEffect:Ho,useLayoutEffect:Go,useMemo:Qo,useReducer:No,useRef:Bo,useState:function(){return No(Mo)},useDebugValue:Yo,useDeferredValue:function(e){var t=_o();return null===vo?t.memoizedState=e:Jo(t,vo.memoizedState,e)},useTransition:function(){return[No(Mo)[0],_o().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Oi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Gu=r),hs(0,t)},n}function ms(e,t,n){(n=Oi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){hs(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===qu?qu=new Set([this]):qu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Cl.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oi(-1,1)).tag=2,Di(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bs=x.ReactCurrentOwner,xs=!1;function ws(e,t,n,r){t.child=null===e?Qi(t,null,n,r):Ki(t,e.child,n,r)}function ks(e,t,n,r,a){n=n.render;var i=t.ref;return Ei(t,a),r=Eo(e,t,n,r,i,a),n=To(),null===e||xs?(ai&&n&&ei(t),t.flags|=1,ws(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a))}function Ss(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Ol(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Es(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Hs(e,t,a)}return t.flags|=1,(e=Dl(i,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Hs(e,t,a);0!==(131072&e.flags)&&(xs=!0)}}return _s(e,t,n,r,a)}function Ts(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ca(Du,Ou),Ou|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ca(Du,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ca(Du,Ou),Ou|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ca(Du,Ou),Ou|=r;return ws(e,t,a,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _s(e,t,n,r,a){var i=Ra(n)?Na:Ma.current;return i=Aa(t,i),Ei(t,a),n=Eo(e,t,n,r,i,a),r=To(),null===e||xs?(ai&&r&&ei(t),t.flags|=1,ws(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a))}function Ms(e,t,n,r,a){if(Ra(n)){var i=!0;Pa(t)}else i=!1;if(Ei(t,a),null===t.stateNode)Zs(e,t),Vi(t,n,r),Hi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ti(l):l=Aa(t,l=Ra(n)?Na:Ma.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Zi(t,o,r,l),Ni=!1;var h=t.memoizedState;o.state=h,Fi(t,r,o,a),u=t.memoizedState,s!==r||h!==u||Ia.current||Ni?("function"===typeof c&&(Bi(t,n,c,r),u=t.memoizedState),(s=Ni||Wi(t,n,s,r,h,u,l))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ri(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:vi(t.type,s),o.props=l,d=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ti(u):u=Aa(t,u=Ra(n)?Na:Ma.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==u)&&Zi(t,o,r,u),Ni=!1,h=t.memoizedState,o.state=h,Fi(t,r,o,a);var f=t.memoizedState;s!==d||h!==f||Ia.current||Ni?("function"===typeof p&&(Bi(t,n,p,r),f=t.memoizedState),(l=Ni||Wi(t,n,l,r,h,f,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Is(e,t,n,r,i,a)}function Is(e,t,n,r,a,i){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&Fa(t,n,!1),Hs(e,t,i);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ki(t,e.child,null,i),t.child=Ki(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,a&&Fa(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Da(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Da(0,t.context,!1),ro(e,t.containerInfo)}function As(e,t,n,r,a){return pi(),fi(a),t.flags|=256,ws(e,t,n,r),t.child}var Rs,Os,Ds,Ls,Ps={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,a=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ca(so,1&o),null===e)return li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=a.children,e=a.fallback,s?(a=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Fl(u,a,0,null),e=Pl(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ps,e):zs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=ds(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=Fl({mode:"visible",children:r.children},a,0,null),(o=Pl(o,a,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ki(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ps,o);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var u=r.dgst;return r=u,Bs(e,t,s,r=ds(o=Error(i(419)),r,void 0))}if(u=0!==(s&e.childLanes),xs||u){if(null!==(r=Nu)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Ii(e,a),rl(r,e,a,-1))}return vl(),Bs(e,t,s,r=ds(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ml.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ri=la(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&(qa[Xa++]=Ka,qa[Xa++]=Qa,qa[Xa++]=Ya,Ka=e.id,Qa=e.overflow,Ya=t),t=zs(t,r.children),t.flags|=4096,t)}(e,t,u,a,r,o,n);if(s){s=a.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:a.children};return 0===(1&u)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=l,t.deletions=null):(a=Dl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Dl(r,s):(s=Pl(s,u,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,u=null===(u=e.child.memoizedState)?Fs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ps,a}return e=(s=e.child).sibling,a=Dl(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function zs(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&fi(r),Ki(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Si(e.return,t,n)}function Ws(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Vs(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ca(so,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Ws(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===uo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Ws(t,!0,n,null,i);break;case"together":Ws(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Ra(t.type)&&Oa(),qs(t),null;case 3:return r=t.stateNode,ao(),Ta(Ia),Ta(Ma),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(sl(ii),ii=null))),Os(e,t),qs(t),null;case 5:oo(t);var a=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return qs(t),null}if(e=no($i.current),di(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ha]=t,r[pa]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(a=0;a<Lr.length;a++)zr(Lr[a],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":K(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ae(r,o),zr("invalid",r)}for(var u in ye(n,o),a=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),a=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),a=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&zr("scroll",r)}switch(n){case"input":G(r),$(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[ha]=t,e[pa]=r,Rs(e,t,!1,!1),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),a=r;break;case"iframe":case"object":case"embed":zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Lr.length;a++)zr(Lr[a],e);a=r;break;case"source":zr("error",e),a=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),a=r;break;case"details":zr("toggle",e),a=r;break;case"input":K(e,r),a=Y(e,r),zr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=F({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),zr("invalid",e)}for(o in ye(n,a),l=a)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?ve(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&zr("scroll",e):null!=c&&b(e,o,c,u))}switch(n){case"input":G(e),$(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=no(to.current),no($i.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return qs(t),null;case 13:if(Ta(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),pi(),t.flags|=98560,o=!1;else if(o=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[ha]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),o=!1}else null!==ii&&(sl(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Lu&&(Lu=3):vl())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return ao(),Os(e,t),null===e&&Wr(t.stateNode.containerInfo),qs(t),null;case 10:return ki(t.type._context),qs(t),null;case 19:if(Ta(so),null===(o=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Gs(o,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Gs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ca(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Vu&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ai)return qs(t),null}else 2*Qe()-o.renderingStartTime>Vu&&1073741824!==n&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=so.current,Ca(so,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ou)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ys(e,t){switch(ti(t),t.tag){case 1:return Ra(t.type)&&Oa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),Ta(Ia),Ta(Ma),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ta(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ta(so),null;case 4:return ao(),null;case 10:return ki(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Ds=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,no($i.current);var i,o=null;switch(n){case"input":a=Y(e,a),r=Y(e,r),o=[];break;case"select":a=F({},a,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in ye(n,r),n=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var u=a[c];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(i in u)!u.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&u[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&zr("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ks=!1,Qs=!1,Js="function"===typeof WeakSet?WeakSet:Set,$s=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tl(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Tl(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&tu(t,n,i)}a=a.next}while(a!==r)}}function au(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[pa],delete t[ma],delete t[va],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var du=null,hu=!1;function pu(e,t,n){for(n=n.child;null!==n;)fu(e,t,n),n=n.sibling}function fu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:Qs||eu(n,t);case 6:var r=du,a=hu;du=null,pu(e,t,n),hu=a,null!==(du=r)&&(hu?(e=du,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):du.removeChild(n.stateNode));break;case 18:null!==du&&(hu?(e=du,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Wt(e)):ua(du,n.stateNode));break;case 4:r=du,a=hu,du=n.stateNode.containerInfo,hu=!0,pu(e,t,n),du=r,hu=a;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&tu(n,t,o),a=a.next}while(a!==r)}pu(e,t,n);break;case 1:if(!Qs&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Tl(n,t,s)}pu(e,t,n);break;case 21:pu(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,pu(e,t,n),Qs=r):pu(e,t,n);break;default:pu(e,t,n)}}function mu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Il.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:du=u.stateNode,hu=!1;break e;case 3:case 4:du=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===du)throw Error(i(160));fu(o,s,a),du=null,hu=!1;var l=a.alternate;null!==l&&(l.return=null),a.return=null}catch(c){Tl(a,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),yu(e),4&r){try{ru(3,e,e.return),au(3,e)}catch(v){Tl(e,e.return,v)}try{ru(5,e,e.return)}catch(v){Tl(e,e.return,v)}}break;case 1:vu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(vu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(v){Tl(e,e.return,v)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&Q(a,o),be(u,s);var c=be(u,o);for(s=0;s<l.length;s+=2){var d=l[s],h=l[s+1];"style"===d?ve(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,c)}switch(u){case"input":J(a,o);break;case"textarea":ie(a,o);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(a,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[pa]=o}catch(v){Tl(e,e.return,v)}}break;case 6:if(vu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(v){Tl(e,e.return,v)}}break;case 3:if(vu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(v){Tl(e,e.return,v)}break;case 4:default:vu(t,e),yu(e);break;case 13:vu(t,e),yu(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Wu=Qe())),4&r&&mu(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(c=Qs)||d,vu(t,e),Qs=c):vu(t,e),yu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for($s=e,d=e.child;null!==d;){for(h=$s=d;null!==$s;){switch(f=(p=$s).child,p.tag){case 0:case 11:case 14:case 15:ru(4,p,p.return);break;case 1:eu(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Tl(r,n,v)}}break;case 5:eu(p,p.return);break;case 22:if(null!==p.memoizedState){ku(h);continue}}null!==f?(f.return=p,$s=f):ku(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,c?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=me("display",s))}catch(v){Tl(e,e.return,v)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){Tl(e,e.return,v)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vu(t,e),yu(e),4&r&&mu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),cu(e,uu(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;lu(e,uu(e),o);break;default:throw Error(i(161))}}catch(s){Tl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bu(e,t,n){$s=e,xu(e,t,n)}function xu(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var a=$s,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Ks;if(!o){var s=a.alternate,u=null!==s&&null!==s.memoizedState||Qs;s=Ks;var l=Qs;if(Ks=o,(Qs=u)&&!l)for($s=a;null!==$s;)u=(o=$s).child,22===o.tag&&null!==o.memoizedState?Su(a):null!==u?(u.return=o,$s=u):Su(a);for(;null!==i;)$s=i,xu(i,t,n),i=i.sibling;$s=a,Ks=s,Qs=l}wu(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,$s=i):wu(e)}}function wu(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||au(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:vi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ji(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ji(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(i(163))}Qs||512&t.flags&&iu(t)}catch(p){Tl(t,t.return,p)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function ku(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function Su(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{au(4,t)}catch(u){Tl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(u){Tl(t,a,u)}}var i=t.return;try{iu(t)}catch(u){Tl(t,i,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Tl(t,o,u)}}}catch(u){Tl(t,t.return,u)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Eu,Tu=Math.ceil,Cu=x.ReactCurrentDispatcher,_u=x.ReactCurrentOwner,Mu=x.ReactCurrentBatchConfig,Iu=0,Nu=null,Au=null,Ru=0,Ou=0,Du=Ea(0),Lu=0,Pu=null,Fu=0,ju=0,zu=0,Bu=null,Uu=null,Wu=0,Vu=1/0,Zu=null,Hu=!1,Gu=null,qu=null,Xu=!1,Yu=null,Ku=0,Qu=0,Ju=null,$u=-1,el=0;function tl(){return 0!==(6&Iu)?Qe():-1!==$u?$u:$u=Qe()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Iu)&&0!==Ru?Ru&-Ru:null!==mi.transition?(0===el&&(el=mt()),el):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function rl(e,t,n,r){if(50<Qu)throw Qu=0,Ju=null,Error(i(185));gt(e,n,r),0!==(2&Iu)&&e===Nu||(e===Nu&&(0===(2&Iu)&&(ju|=n),4===Lu&&ul(e,Ru)),al(e,r),1===n&&0===Iu&&0===(1&t.mode)&&(Vu=Qe()+500,za&&Wa()))}function al(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,u=a[o];-1===u?0!==(s&n)&&0===(s&r)||(a[o]=pt(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===Nu?Ru:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){za=!0,Ua(e)}(ll.bind(null,e)):Ua(ll.bind(null,e)),oa((function(){0===(6&Iu)&&Wa()})),n=null;else{switch(xt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nl(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if($u=-1,el=0,0!==(6&Iu))throw Error(i(327));var n=e.callbackNode;if(Sl()&&e.callbackNode!==n)return null;var r=ht(e,e===Nu?Ru:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gl(e,r);else{t=r;var a=Iu;Iu|=2;var o=ml();for(Nu===e&&Ru===t||(Zu=null,Vu=Qe()+500,pl(e,t));;)try{bl();break}catch(u){fl(e,u)}wi(),Cu.current=o,Iu=a,null!==Au?t=0:(Nu=null,Ru=0,t=Lu)}if(0!==t){if(2===t&&(0!==(a=ft(e))&&(r=a,t=ol(e,a))),1===t)throw n=Pu,pl(e,0),ul(e,r),al(e,Qe()),n;if(6===t)ul(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gl(e,r))&&(0!==(o=ft(e))&&(r=o,t=ol(e,o))),1===t))throw n=Pu,pl(e,0),ul(e,r),al(e,Qe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:kl(e,Uu,Zu);break;case 3:if(ul(e,r),(130023424&r)===r&&10<(t=Wu+500-Qe())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(kl.bind(null,e,Uu,Zu),t);break}kl(e,Uu,Zu);break;case 4:if(ul(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tu(r/1960))-r)){e.timeoutHandle=ra(kl.bind(null,e,Uu,Zu),r);break}kl(e,Uu,Zu);break;default:throw Error(i(329))}}}return al(e,Qe()),e.callbackNode===n?il.bind(null,e):null}function ol(e,t){var n=Bu;return e.current.memoizedState.isDehydrated&&(pl(e,t).flags|=256),2!==(e=gl(e,t))&&(t=Uu,Uu=n,null!==t&&sl(t)),e}function sl(e){null===Uu?Uu=e:Uu.push.apply(Uu,e)}function ul(e,t){for(t&=~zu,t&=~ju,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Iu))throw Error(i(327));Sl();var t=ht(e,0);if(0===(1&t))return al(e,Qe()),null;var n=gl(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Pu,pl(e,0),ul(e,t),al(e,Qe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kl(e,Uu,Zu),al(e,Qe()),null}function cl(e,t){var n=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=n)&&(Vu=Qe()+500,za&&Wa())}}function dl(e){null!==Yu&&0===Yu.tag&&0===(6&Iu)&&Sl();var t=Iu;Iu|=1;var n=Mu.transition,r=bt;try{if(Mu.transition=null,bt=1,e)return e()}finally{bt=r,Mu.transition=n,0===(6&(Iu=t))&&Wa()}}function hl(){Ou=Du.current,Ta(Du)}function pl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Au)for(n=Au.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oa();break;case 3:ao(),Ta(Ia),Ta(Ma),co();break;case 5:oo(r);break;case 4:ao();break;case 13:case 19:Ta(so);break;case 10:ki(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Nu=e,Au=e=Dl(e.current,null),Ru=Ou=t,Lu=0,Pu=null,zu=ju=Fu=0,Uu=Bu=null,null!==Ci){for(t=0;t<Ci.length;t++)if(null!==(r=(n=Ci[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}Ci=null}return e}function fl(e,t){for(;;){var n=Au;try{if(wi(),ho.current=os,yo){for(var r=mo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}yo=!1}if(fo=0,go=vo=mo=null,bo=!1,xo=0,_u.current=null,null===n||null===n.return){Lu=1,Pu=t,Au=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Ru,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,d=u,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,ys(f,s,u,0,t),1&f.mode&&vs(o,c,t),l=c;var m=(t=f).updateQueue;if(null===m){var v=new Set;v.add(l),t.updateQueue=v}else m.add(l);break e}if(0===(1&t)){vs(o,c,t),vl();break e}l=Error(i(426))}else if(ai&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),fi(cs(l,u));break e}}o=l=cs(l,u),4!==Lu&&(Lu=2),null===Bu?Bu=[o]:Bu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Pi(o,fs(0,l,t));break e;case 1:u=l;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===qu||!qu.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Pi(o,ms(o,u,t));break e}}o=o.return}while(null!==o)}wl(n)}catch(x){t=x,Au===n&&null!==n&&(Au=n=n.return);continue}break}}function ml(){var e=Cu.current;return Cu.current=os,null===e?os:e}function vl(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Nu||0===(268435455&Fu)&&0===(268435455&ju)||ul(Nu,Ru)}function gl(e,t){var n=Iu;Iu|=2;var r=ml();for(Nu===e&&Ru===t||(Zu=null,pl(e,t));;)try{yl();break}catch(a){fl(e,a)}if(wi(),Iu=n,Cu.current=r,null!==Au)throw Error(i(261));return Nu=null,Ru=0,Lu}function yl(){for(;null!==Au;)xl(Au)}function bl(){for(;null!==Au&&!Ye();)xl(Au)}function xl(e){var t=Eu(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?wl(e):Au=t,_u.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Ou)))return void(Au=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Au=n);if(null===e)return Lu=6,void(Au=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Au=t);Au=t=e}while(null!==t);0===Lu&&(Lu=5)}function kl(e,t,n){var r=bt,a=Mu.transition;try{Mu.transition=null,bt=1,function(e,t,n,r){do{Sl()}while(null!==Yu);if(0!==(6&Iu))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Nu&&(Au=Nu=null,Ru=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xu||(Xu=!0,Nl(tt,(function(){return Sl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Mu.transition,Mu.transition=null;var s=bt;bt=1;var u=Iu;Iu|=4,_u.current=null,function(e,t){if(ea=Zt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,l=-1,c=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==a&&3!==h.nodeType||(u=s+a),h!==o||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++c===a&&(u=s),p===o&&++d===r&&(l=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Zt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:vi(t.type,v),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(w){Tl(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}m=nu,nu=!1}(e,n),gu(n,e),fr(ta),Zt=!!ea,ta=ea=null,e.current=n,bu(n,e,a),Ke(),Iu=u,bt=s,Mu.transition=o}else e.current=n;if(Xu&&(Xu=!1,Yu=e,Ku=a),o=e.pendingLanes,0===o&&(qu=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),al(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Hu)throw Hu=!1,e=Gu,Gu=null,e;0!==(1&Ku)&&0!==e.tag&&Sl(),o=e.pendingLanes,0!==(1&o)?e===Ju?Qu++:(Qu=0,Ju=e):Qu=0,Wa()}(e,t,n,r)}finally{Mu.transition=a,bt=r}return null}function Sl(){if(null!==Yu){var e=xt(Ku),t=Mu.transition,n=bt;try{if(Mu.transition=null,bt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Ku=0,0!==(6&Iu))throw Error(i(331));var a=Iu;for(Iu|=4,$s=e.current;null!==$s;){var o=$s,s=o.child;if(0!==(16&$s.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for($s=c;null!==$s;){var d=$s;switch(d.tag){case 0:case 11:case 15:ru(8,d,o)}var h=d.child;if(null!==h)h.return=d,$s=h;else for(;null!==$s;){var p=(d=$s).sibling,f=d.return;if(ou(d),d===c){$s=null;break}if(null!==p){p.return=f,$s=p;break}$s=f}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}$s=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,$s=s;else e:for(;null!==$s;){if(0!==(2048&(o=$s).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,$s=y;break e}$s=o.return}}var b=e.current;for($s=b;null!==$s;){var x=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,$s=x;else e:for(s=b;null!==$s;){if(0!==(2048&(u=$s).flags))try{switch(u.tag){case 0:case 11:case 15:au(9,u)}}catch(k){Tl(u,u.return,k)}if(u===s){$s=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,$s=w;break e}$s=u.return}}if(Iu=a,Wa(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{bt=n,Mu.transition=t}}return!1}function El(e,t,n){e=Di(e,t=fs(0,t=cs(n,t),1),1),t=tl(),null!==e&&(gt(e,1,t),al(e,t))}function Tl(e,t,n){if(3===e.tag)El(e,e,n);else for(;null!==t;){if(3===t.tag){El(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qu||!qu.has(r))){t=Di(t,e=ms(t,e=cs(n,e),1),1),e=tl(),null!==t&&(gt(t,1,e),al(t,e));break}}t=t.return}}function Cl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Ru&n)===n&&(4===Lu||3===Lu&&(130023424&Ru)===Ru&&500>Qe()-Wu?pl(e,0):zu|=n),al(e,t)}function _l(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tl();null!==(e=Ii(e,t))&&(gt(e,t,n),al(e,n))}function Ml(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_l(e,n)}function Il(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),_l(e,n)}function Nl(e,t){return qe(e,t)}function Al(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rl(e,t,n,r){return new Al(e,t,n,r)}function Ol(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=Rl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Ol(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Pl(n.children,a,o,t);case E:s=8,a|=8;break;case T:return(e=Rl(12,n,t,2|a)).elementType=T,e.lanes=o,e;case I:return(e=Rl(13,n,t,a)).elementType=I,e.lanes=o,e;case N:return(e=Rl(19,n,t,a)).elementType=N,e.lanes=o,e;case O:return Fl(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case _:s=9;break e;case M:s=11;break e;case A:s=14;break e;case R:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Rl(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Pl(e,t,n,r){return(e=Rl(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Rl(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function jl(e,t,n){return(e=Rl(6,e,null,t)).lanes=n,e}function zl(e,t,n){return(t=Rl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ul(e,t,n,r,a,i,o,s,u){return e=new Bl(e,t,n,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rl(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ai(i),e}function Wl(e){if(!e)return _a;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ra(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ra(n))return La(e,n,t)}return t}function Vl(e,t,n,r,a,i,o,s,u){return(e=Ul(n,r,!0,e,0,i,0,s,u)).context=Wl(null),n=e.current,(i=Oi(r=tl(),a=nl(n))).callback=void 0!==t&&null!==t?t:null,Di(n,i,a),e.current.lanes=a,gt(e,a,r),al(e,r),e}function Zl(e,t,n,r){var a=t.current,i=tl(),o=nl(a);return n=Wl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oi(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Di(a,t,o))&&(rl(e,a,o,i),Li(e,a,o)),o}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ql(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Eu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ia.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),pi();break;case 5:io(t);break;case 1:Ra(t.type)&&Pa(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ca(gi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ca(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Ca(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ca(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ca(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ts(e,t,n)}return Hs(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ai&&0!==(1048576&t.flags)&&$a(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Zs(e,t),e=t.pendingProps;var a=Aa(t,Ma.current);Ei(t,n),a=Eo(null,t,r,e,a,n);var o=To();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ra(r)?(o=!0,Pa(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ai(t),a.updater=Ui,t.stateNode=a,a._reactInternals=t,Hi(t,r,e,n),t=Is(null,t,r,!0,o,n)):(t.tag=0,ai&&o&&ei(t),ws(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Zs(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Ol(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===A)return 14}return 2}(r),e=vi(r,e),a){case 0:t=_s(null,t,r,e,n);break e;case 1:t=Ms(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,vi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,_s(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ms(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 3:e:{if(Ns(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,Ri(e,t),Fi(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=As(e,t,r,n,a=cs(Error(i(423)),t));break e}if(r!==a){t=As(e,t,r,n,a=cs(Error(i(424)),t));break e}for(ri=la(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=Qi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===a){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return io(t),null===e&&li(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),Cs(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&li(t),null;case 13:return js(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ki(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ks(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Ca(gi,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Ia.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Oi(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Si(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Si(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ei(t,n),r=r(a=Ti(a)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return a=vi(r=t.type,t.pendingProps),Ss(e,t,r,a=vi(r.type,a),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:vi(r,a),Zs(e,t),t.tag=1,Ra(r)?(e=!0,Pa(t)):e=!1,Ei(t,n),Vi(t,r,a),Hi(t,r,a,n),Is(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Ts(e,t,n)}throw Error(i(156,t.tag))};var Xl="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function Kl(e){this._internalRoot=e}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $l(){}function ec(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Hl(o);s.call(e)}}Zl(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Hl(o);i.call(e)}}var o=Vl(t,r,e,0,null,!1,0,"",$l);return e._reactRootContainer=o,e[fa]=o.current,Wr(8===e.nodeType?e.parentNode:e),dl(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Hl(u);s.call(e)}}var u=Ul(e,0,!1,null,0,!1,0,"",$l);return e._reactRootContainer=u,e[fa]=u.current,Wr(8===e.nodeType?e.parentNode:e),dl((function(){Zl(t,u,n,r)})),u}(n,t,e,a,r);return Hl(o)}Kl.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Zl(e,t,null,null)},Kl.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dl((function(){Zl(null,e,null,null)})),t[fa]=null}},Kl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),al(t,Qe()),0===(6&Iu)&&(Vu=Qe()+500,Wa()))}break;case 13:dl((function(){var t=Ii(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),ql(e,1)}},kt=function(e){if(13===e.tag){var t=Ii(e,134217728);if(null!==t)rl(t,e,134217728,tl());ql(e,134217728)}},St=function(e){if(13===e.tag){var t=nl(e),n=Ii(e,t);if(null!==n)rl(n,e,t,tl());ql(e,t)}},Et=function(){return bt},Tt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(i(90));q(r),J(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=cl,Ie=dl;var tc={usingClientEntryPoint:!1,Events:[ba,xa,wa,Ce,_e,cl]},nc={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{at=ac.inject(rc),it=ac}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ql(e))throw Error(i(299));var n=!1,r="",a=Xl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Ul(e,1,!1,null,0,n,0,r,a),e[fa]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(i(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ql(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=Xl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vl(t,null,e,1,null!=n?n:null,a,0,o,s),e[fa]=t.current,Wr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Kl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(i(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(i(40));return!!e._reactRootContainer&&(dl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[fa]=null}))})),!0)},t.unstable_batchedUpdates=cl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.s=r.createRoot,r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n=60103,r=60106,a=60107,i=60108,o=60114,s=60109,u=60110,l=60112,c=60113,d=60120,h=60115,p=60116,f=60121,m=60122,v=60117,g=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),a=b("react.fragment"),i=b("react.strict_mode"),o=b("react.profiler"),s=b("react.provider"),u=b("react.context"),l=b("react.forward_ref"),c=b("react.suspense"),d=b("react.suspense_list"),h=b("react.memo"),p=b("react.lazy"),f=b("react.block"),m=b("react.server.block"),v=b("react.fundamental"),g=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case o:case i:case c:case d:return e;default:switch(e=e&&e.$$typeof){case u:case l:case p:case h:case s:return e;default:return t}}case r:return t}}}},7441:function(e,t,n){"use strict";n(1372)},5555:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2791),s=(r=o)&&r.__esModule?r:{default:r},u=n(8159);function l(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var h=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.isFileDialogActive=!1,r.composeHandlers=function(e){return r.props.disabled?null:e},r.onDocumentDrop=function(e){r.node&&r.node.contains(e.target)||(e.preventDefault(),r.dragTargets=[])},r.onDragStart=function(e){var t=r.props.onDragStart;t&&t.call(r,e)},r.onDragEnter=function(e){var t=r.props.onDragEnter;e.preventDefault(),-1===r.dragTargets.indexOf(e.target)&&r.dragTargets.push(e.target);(0,u.getDataTransferItems)(e);t&&t.call(r,e)},r.onDragOver=function(e){var t=r.props.onDragOver;e.preventDefault(),e.stopPropagation();try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&t.call(r,e),!1},r.onDragLeave=function(e){var t=r.props.onDragLeave;e.preventDefault(),r.dragTargets=r.dragTargets.filter((function(t){return t!==e.target&&r.node.contains(t)})),r.dragTargets.length>0||t&&t.call(r,e)},r.onDrop=function(e){var t=r.props,n=t.onDrop,a=t.onDropAccepted,i=t.onDropRejected,o=t.multiple,s=t.disablePreview,l=t.minSize,d=t.maxSize,h=t.accept,p=(0,u.getDataTransferItems)(e),f=[],m=[];e.preventDefault(),0!==p.length?(r.dragTargets=[],r.isFileDialogActive=!1,p.forEach((function(e){if(!s)try{e.preview=window.URL.createObjectURL(e)}catch(t){0}(0,u.fileAccepted)(e,h)&&(0,u.fileMatchSize)(e,d,l)?f.push(e):m.push(e)})),o||m.push.apply(m,c(f.splice(1))),n&&n.call(r,f,m,[],e),m.length>0&&i&&i.call(r,m,e),f.length>0&&a&&a.call(r,f,e)):r.onLink(e)},r.onClick=function(e){var t=r.props,n=t.onClick;t.disableClick||(e.stopPropagation(),n&&n.call(r,e),setTimeout(r.open.bind(r),0))},r.onInputElementClick=function(e){var t=r.props.inputProps;e.stopPropagation(),t&&t.onClick&&t.onClick()},r.onFileDialogCancel=function(){var e=r.props.onFileDialogCancel,t=r.fileInputEl,n=r.isFileDialogActive;e&&n&&setTimeout((function(){t.files.length||(n=!1,e())}),300)},r.setRef=function(e){r.node=e},r.setRefs=function(e){r.fileInputEl=e},r.onLink=function(e){var t=r.props,n=t.onDrop,a=t.accept;if(a){var i=a.match(/(\.[^.]+)(?=[,]|$)/gi);if(i){var o="(https://|http://)((?!http).)*("+i.join("|")+")",s=new RegExp(o,"gi"),u=[];if(e.dataTransfer){var l=decodeURIComponent(e.dataTransfer.getData("text/uri-list")).match(s),d=e.dataTransfer.getData("text/html").match(s);l?u=[].concat(c(l)):d&&(u=[].concat(c(d.filter((function(e){return-1===e.indexOf('"')})).map((function(e){return decodeURIComponent(e)})))))}else u=[].concat(c(decodeURIComponent(e.target.value).match(s)));n&&n([],[],u,e)}else n&&n([],[],[],e)}else n&&n([],[],[],e)},d(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.props.preventDropOnDocument;this.dragTargets=[],e&&(document.addEventListener("dragover",u.onDocumentDragOver,!1),document.addEventListener("drop",this.onDocumentDrop,!1)),this.fileInputEl.addEventListener("click",this.onInputElementClick,!1),document.body.onfocus=this.onFileDialogCancel}},{key:"componentWillUnmount",value:function(){this.props.preventDropOnDocument&&(document.removeEventListener("dragover",u.onDocumentDragOver),document.removeEventListener("drop",this.onDocumentDrop)),this.fileInputEl.removeEventListener("click",this.onInputElementClick,!1),document.body.onfocus=null}},{key:"open",value:function(){this.isFileDialogActive=!0,this.fileInputEl.value=null,this.fileInputEl.click()}},{key:"render",value:function(){var e=this.props,t=e.accept,n=e.children,r=e.disabled,i=e.multiple,o=l(e,["accept","children","disabled","multiple"]),c=(o.preventDropOnDocument,o.disablePreview,o.disableClick,o.maxSize,o.minSize,o.inputProps,o.onDropAccepted,o.onDropRejected,o.onFileDialogCancel,l(o,["preventDropOnDocument","disablePreview","disableClick","maxSize","minSize","inputProps","onDropAccepted","onDropRejected","onFileDialogCancel"]));return s.default.createElement("div",a({},c,{onClick:this.composeHandlers(this.onClick),onDragStart:this.composeHandlers(this.onDragStart),onDragEnter:this.composeHandlers(this.onDragEnter),onDragOver:this.composeHandlers(this.onDragOver),onDragLeave:this.composeHandlers(this.onDragLeave),onDrop:this.composeHandlers(this.onDrop),ref:this.setRef,"aria-disabled":r}),n,s.default.createElement("input",{disabled:r,accept:t,type:"file",style:{display:"none"},multiple:u.supportMultiple&&i,ref:this.setRefs,onChange:this.onDrop,autoComplete:"off"}))}}]),t}(o.Component);h.defaultProps={preventDropOnDocument:!0,disabled:!1,disablePreview:!1,disableClick:!1,multiple:!0,maxSize:1/0,minSize:0},t.default=h},5203:function(e,t,n){"use strict";var r,a=n(5555),i=(r=a)&&r.__esModule?r:{default:r};t.Z=i.default},8159:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDataTransferItems=function(e){var t=[];if(e.dataTransfer){var n=e.dataTransfer;if(n.files&&n.files.length)t=n.files;else if(n.items&&n.items.length)return Array.prototype.slice.call(n.items).filter((function(e){return"file"===e.kind}))}else e.target&&e.target.files&&(t=e.target.files);return Array.prototype.slice.call(t)},t.fileAccepted=n,t.fileMatchSize=function(e,t,n){return e.size<=t&&e.size>=n},t.allFilesAccepted=function(e,t){return e.every((function(e){return n(e,t)}))},t.onDocumentDragOver=function(e){e.preventDefault()};t.supportMultiple="undefined"===typeof document||!document||!document.createElement||"multiple"in document.createElement("input");function n(e,t){return"application/x-moz-file"===e.type||function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",a=e.type||"",i=a.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();return"."===t.charAt(0)?r.toLowerCase().endsWith(t.toLowerCase()):/\/\*$/.test(t)?i===t.replace(/\/.*$/,""):a===t}))}return!0}(e,t)}},2120:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(5943));t.Notifications=a.default;var i=r(n(2932)).default.addNotification;t.default=i},5943:function(e,t,n){"use strict";var r=n(6690).default,a=n(9728).default,i=n(1655).default,o=n(6389).default,s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(2791)),l=s(n(2932));n(7969);var c=s(n(4788)),d=function(e){i(n,e);var t=o(n);function n(){var e;return r(this,n),(e=t.apply(this,arguments)).state={value:[]},e}return a(n,[{key:"componentDidMount",value:function(){var e=this;l.default.addListener((function(t){return e.setState({value:t})}))}},{key:"render",value:function(){var e=this.props.position,t="rpn-notification-holder ".concat(e||"top-middle"," supertest");return u.default.createElement("div",{className:t},this.state.value.map((function(e,t){return u.default.createElement(c.default,{key:t,closeNotification:l.default.popAndPush,onClick:e.onClick,id:e.id,theme:e.theme,title:e.title,subtitle:e.subtitle,closeButton:e.closeButton,message:e.message,styling:e.styling})})))}}]),n}(u.default.Component);t.default=d},4788:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(2791));t.default=function(e){var t=e.title,n=e.subtitle,r=e.message,i=e.theme,o=e.id,s=e.closeNotification,u=e.styling,l=e.closeButton,c=e.onClick,d={},h={};return u&&(d.backgroundColor=u.backgroundTop,d.color=u.colorTop,h.backgroundColor=u.backgroundBottom,h.color=u.colorBottom),a.default.createElement("div",{className:"rpn-notification-card ".concat(i),onClick:c},a.default.createElement("div",{className:"rpn-notification-card-top ".concat(i),style:Object.keys(d).length?d:void 0},a.default.createElement("span",null,t),a.default.createElement("span",{className:"rpn-notification-card-close ".concat(i),onClick:function(){return s(o)}},l||"close")),a.default.createElement("div",{className:"rpn-notification-card-bottom ".concat(i),style:Object.keys(h).length?h:void 0},a.default.createElement("span",{className:"subtitle"},n),a.default.createElement("span",{className:"message"},r)))}},2932:function(e,t,n){"use strict";var r=n(7061).default,a=n(9728).default,i=n(6690).default,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var s=a((function e(t){i(this,e),this.title=t.title,this.subtitle=t.subtitle,this.message=t.message,this.theme=t.theme,this.id=Math.random(),this.styling=t.styling,this.closeButton=t.closeButton,this.onClick=t.onClick}));t.PushNotification=s;var u=a((function e(){var t=this;i(this,e),this.Storage=[],this.Listener=function(){return t.Storage},this.popAndPush=function(e){for(var n=0;n<t.Storage.length;)t.Storage[n].id===e?t.Storage.splice(n,1):++n;t.Listener(t.Storage)},this.setTimer=function(e,n){setTimeout((function(){return t.popAndPush(e)}),n)},this.addListener=function(e){t.Listener=e},this.addNativeNotification=function(e){return o(t,void 0,void 0,r().mark((function t(){var n,a,i,o,s,u,l,c,d;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.title,a=e.subtitle,i=e.message,o=e.duration,s=e.icon,u=e.vibrate,l=e.silent,c=e.onClick,"default"!==Notification.permission&&"denied"!==Notification.permission){t.next=4;break}return t.next=4,Notification.requestPermission();case 4:"granted"===Notification.permission&&((d=new Notification(n,{body:i,data:a,icon:s,vibrate:u,silent:l})).onclick=c||null,setTimeout(d.close.bind(d),o||3e3));case 5:case"end":return t.stop()}}),t)})))},this.addWebNotification=function(e){var n=e.title,r=e.subtitle,a=e.message,i=e.theme,o=e.duration,u=e.backgroundBottom,l=e.backgroundTop,c=e.colorBottom,d=e.colorTop,h=e.closeButton,p=e.onClick,f=new s({title:n,subtitle:r,message:a,theme:i,styling:{backgroundTop:l,backgroundBottom:u,colorTop:d,colorBottom:c},closeButton:h,onClick:p});t.Storage.push(f),t.setTimer(f.id,o||3e3),t.Listener(t.Storage)},this.addNotification=function(e){return o(t,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.native){t.next=3;break}return t.abrupt("return",this.addNativeNotification(e));case 3:return t.abrupt("return",this.addWebNotification(e));case 4:case"end":return t.stop()}}),t,this)})))}}));t.default=new u},1276:function(e,t,n){var r,a,i,o;e.exports=(r=n(2007),a=n(2791),i=n(354),o=n(9590),function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=r(n(1)),d=n(2),h=r(d),p=r(n(3)),f=r(n(4)),m=function(e){function t(){var e,n,r;i(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r._sigPad=null,r._excludeOurProps=function(){var e=r.props;return e.canvasProps,e.clearOnResize,a(e,["canvasProps","clearOnResize"])},r.getCanvas=function(){return r._canvas},r.getTrimmedCanvas=function(){var e=document.createElement("canvas");return e.width=r._canvas.width,e.height=r._canvas.height,e.getContext("2d").drawImage(r._canvas,0,0),(0,f.default)(e)},r.getSignaturePad=function(){return r._sigPad},r._checkClearOnResize=function(){r.props.clearOnResize&&r._resizeCanvas()},r._resizeCanvas=function(){var e=r.props.canvasProps||{},t=e.width,n=e.height;if(!t||!n){var a=r._canvas,i=Math.max(window.devicePixelRatio||1,1);t||(a.width=a.offsetWidth*i),n||(a.height=a.offsetHeight*i),a.getContext("2d").scale(i,i),r.clear()}},r.on=function(){return window.addEventListener("resize",r._checkClearOnResize),r._sigPad.on()},r.off=function(){return window.removeEventListener("resize",r._checkClearOnResize),r._sigPad.off()},r.clear=function(){return r._sigPad.clear()},r.isEmpty=function(){return r._sigPad.isEmpty()},r.fromDataURL=function(e,t){return r._sigPad.fromDataURL(e,t)},r.toDataURL=function(e,t){return r._sigPad.toDataURL(e,t)},r.fromData=function(e){return r._sigPad.fromData(e)},r.toData=function(){return r._sigPad.toData()},o(r,n)}return s(t,e),l(t,[{key:"componentDidMount",value:function(){this._sigPad=new p.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var e=this,t=this.props.canvasProps;return h.default.createElement("canvas",u({ref:function(t){e._canvas=t}},t))}}]),t}(d.Component);m.propTypes={velocityFilterWeight:c.default.number,minWidth:c.default.number,maxWidth:c.default.number,minDistance:c.default.number,dotSize:c.default.oneOfType([c.default.number,c.default.func]),penColor:c.default.string,throttle:c.default.number,onEnd:c.default.func,onBegin:c.default.func,canvasProps:c.default.object,clearOnResize:c.default.bool},m.defaultProps={clearOnResize:!0},t.default=m},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t){e.exports=i},function(e,t){e.exports=o}]))},97:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var u=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return a(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,s()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),a=e.minScreenshotWidth!==t.minScreenshotWidth,i=e.minScreenshotHeight!==t.minScreenshotHeight;(r||a||i)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,a=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var i=r/a;a=(r=n.minScreenshotWidth||this.video.clientWidth)/i,n.minScreenshotHeight&&a<n.minScreenshotHeight&&(r=(a=n.minScreenshotHeight)*i)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||a,this.ctx=this.canvas.getContext("2d")}var o=this.ctx,s=this.canvas;return o&&s&&(n.mirrored&&(o.translate(s.width,0),o.scale(-1,1)),o.imageSmoothingEnabled=n.imageSmoothing,o.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),n.mirrored&&(o.scale(-1,1),o.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,a){var i={video:"undefined"===typeof a||a};n.audio&&(i.audio="undefined"===typeof r||r),e.requestUserMediaId++;var o=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(i).then((function(n){e.unmounted||o!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var a=function(e){return{optional:[{sourceId:e}]}},i=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,o=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(o=e.id)}));var s=i(n.audioConstraints);s&&(t=s);var u=i(n.videoConstraints);u&&(o=u),r(a(t),a(o))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,a=n.audio,s=(n.forceScreenshotSourceSize,n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),u=n.style,l=void 0===u?{}:u,c=n.children,d=o(n,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),h=s?i(i({},l),{transform:(l.transform||"")+" scaleX(-1)"}):l,p={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",i({autoPlay:!0,src:t.src,muted:!a,playsInline:!0,ref:function(t){e.video=t},style:h},d)),c&&c(p))},t.defaultProps={audio:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=u},react:function(t,n){t.exports=e}}).default},e.exports=r(n(2791))},6374:function(e,t,n){"use strict";var r=n(2791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:l,ref:c,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=b.prototype=new y;x.constructor=b,m(x,g.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,a)&&!E.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===i?"."+M(u,0):i,w(o)?(a="",null!=e&&(a=e.replace(_,"$&/")+"/"),I(o,t,a,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(_,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",w(e))for(var l=0;l<e.length;l++){var c=i+M(s=e[l],l);u+=I(s,t,a,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=I(s=s.value,t,a,c=i+M(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],a=0;return I(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)k.call(t,l)&&!E.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},9864:function(e){function t(e){return"string"===typeof e?e.replace(/^0+|[^0-9kK]+/g,"").toUpperCase():""}e.exports={validate:function(e){if("string"!==typeof e)return!1;if(/^0+/.test(e))return!1;if(!/^0*(\d{1,3}(\.?\d{3})*)-?([\dkK])$/.test(e))return!1;e=t(e);for(var n=parseInt(e.slice(0,-1),10),r=0,a=1;n>0;)a=(a+n%10*(9-r++%6))%11,n=Math.floor(n/10);return(a>0?""+(a-1):"K")===e.slice(-1)},clean:t,format:function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{dots:!0};if(e=t(e),r.dots){n=e.slice(-4,-1)+"-"+e.substr(e.length-1);for(var a=4;a<e.length;a+=3)n=e.slice(-3-a,-a)+"."+n}else n=e.slice(0,-1)+"-"+e.substr(e.length-1);return n},getCheckDigit:function(e){var n=Array.from(t(e),Number);if(0===n.length||n.includes(NaN))throw new Error('"'.concat(e,'" as RUT is invalid'));var r=11-n.reverse().reduce((function(e,t,n){return e+t*(n%6+2)}),0)%11;return 10===r?"K":11===r?"0":r.toString()}}},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>i(u,n))l<a&&0>i(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<a&&0>i(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],d=1,h=null,p=3,f=!1,m=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function w(e){if(v=!1,x(e),!m)if(null!==r(l))m=!0,O(k);else{var t=r(c);null!==t&&D(w,t.startTime-e)}}function k(e,n){m=!1,v&&(v=!1,y(C),C=-1),f=!0;var i=p;try{for(x(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!I());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&a(l),x(n)}else a(l);h=r(l)}if(null!==h)var u=!0;else{var d=r(c);null!==d&&D(w,d.startTime-n),u=!1}return u}finally{h=null,p=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,T=null,C=-1,_=5,M=-1;function I(){return!(t.unstable_now()-M<_)}function N(){if(null!==T){var e=t.unstable_now();M=e;var n=!0;try{n=T(!0,e)}finally{n?S():(E=!1,T=null)}}else E=!1}if("function"===typeof b)S=function(){b(N)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=N,S=function(){R.postMessage(null)}}else S=function(){g(N,0)};function O(e){T=e,E||(E=!0,S())}function D(e,n){C=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,O(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(c,e),null===r(l)&&e===r(c)&&(v?(y(C),C=-1):v=!0,D(w,i-o))):(e.sortIndex=s,n(l,e),m||f||(m=!0,O(k))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6699:function(e,t,n){var r=n(2501),a=n(9112),i=n(2132),o=n(890),s=n(4113),u=n(1725),l=n(3411);l.alea=r,l.xor128=a,l.xorwow=i,l.xorshift7=o,l.xor4096=s,l.tychei=u,e.exports=l},2501:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},1725:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var r;!function(a,i){var o,s=this,u=256,l="random",c=i.pow(u,6),d=i.pow(2,52),h=2*d,p=u-1;function f(e,t,n){var r=[],p=y(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(u):(e=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(e)),b(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,b(a)]}}():e,3),r),f=new m(r),x=function(){for(var e=f.g(6),t=c,n=0;e<d;)e=(e+n)*u,t*=u,n=f.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|f.g(4)},x.quick=function(){return f.g(4)/4294967296},x.double=x,y(b(f.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,f),e.state=function(){return v(f,{})}),n?(i[l]=e,t):e})(x,p,"global"in t?t.global:this==i,t.state)}function m(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=p&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=p&a+1],n=n*u+o[p&(o[a]=o[i=p&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(g(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function y(e,t){for(var n,r=e+"",a=0;a<r.length;)t[p&a]=p&(n^=19*t[p&a])+r.charCodeAt(a++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(i["seed"+l]=f,y(i.random(),a),e.exports){e.exports=f;try{o=n(5042)}catch(x){}}else void 0===(r=function(){return f}.call(t,n,t,e))||(e.exports=r)}([],Math)},9590:function(e){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e){var t=e.getContext("2d"),n=e.width,r=e.height,a=t.getImageData(0,0,n,r).data,s=i(!0,n,r,a),u=i(!1,n,r,a),l=o(!0,n,r,a),c=o(!1,n,r,a)-l+1,d=u-s+1,h=t.getImageData(l,s,c,d);return e.width=c,e.height=d,t.clearRect(0,0,c,d),t.putImageData(h,0,0),e}function r(e,t,n,r){return{red:r[4*(n*t+e)],green:r[4*(n*t+e)+1],blue:r[4*(n*t+e)+2],alpha:r[4*(n*t+e)+3]}}function a(e,t,n,a){return r(e,t,n,a).alpha}function i(e,t,n,r){for(var i=e?1:-1,o=e?0:n-1;e?o<n:o>-1;o+=i)for(var s=0;s<t;s++)if(a(s,o,t,r))return o;return null}function o(e,t,n,r){for(var i=e?1:-1,o=e?0:t-1;e?o<t:o>-1;o+=i)for(var s=0;s<n;s++)if(a(o,s,t,r))return o;return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}])},1198:function(e,t,n){"use strict";n.d(t,{ej:function(){return s},kG:function(){return u},U6:function(){return h}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};Object.create;Object.create;var a="Invariant Violation",i=Object.setPrototypeOf,o=void 0===i?function(e,t){return e.__proto__=t,e}:i,s=function(e){function t(n){void 0===n&&(n=a);var r=e.call(this,"number"===typeof n?a+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return r.framesToPop=1,r.name=a,o(r,t.prototype),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error);function u(e,t){if(!e)throw new s(t)}var l=["log","warn","error","silent"],c=l.indexOf("log");function d(e){return function(){if(l.indexOf(e)>=c)return console[e].apply(console,arguments)}}function h(e){var t=l[c];return c=Math.max(0,l.indexOf(e)),t}!function(e){e.log=d("log"),e.warn=d("warn"),e.error=d("error")}(u||(u={}))},9388:function(e,t,n){"use strict";n.d(t,{Jh:function(){return u},ZT:function(){return a},_T:function(){return o},mG:function(){return s},pi:function(){return i},pr:function(){return l}});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function a(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function s(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function l(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r}},1338:function(e,t,n){var r;!function(a,i){"use strict";var o="function",s="undefined",u="object",l="string",c="model",d="name",h="type",p="vendor",f="version",m="architecture",v="console",g="mobile",y="tablet",b="smarttv",x="wearable",w="embedded",k="Amazon",S="Apple",E="ASUS",T="BlackBerry",C="Browser",_="Chrome",M="Firefox",I="Google",N="Huawei",A="LG",R="Microsoft",O="Motorola",D="Opera",L="Samsung",P="Sony",F="Xiaomi",j="Zebra",z="Facebook",B=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},U=function(e,t){return typeof e===l&&-1!==W(t).indexOf(W(e))},W=function(e){return e.toLowerCase()},V=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===s?e:e.substring(0,255)},Z=function(e,t){for(var n,r,a,s,l,c,d=0;d<t.length&&!l;){var h=t[d],p=t[d+1];for(n=r=0;n<h.length&&!l;)if(l=h[n++].exec(e))for(a=0;a<p.length;a++)c=l[++r],typeof(s=p[a])===u&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,c):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=c?c.replace(s[1],s[2]):i:this[s[0]]=c?s[1].call(this,c,s[2]):i:4===s.length&&(this[s[0]]=c?s[3].call(this,c.replace(s[1],s[2])):i):this[s]=c||i;d+=2}},H=function(e,t){for(var n in t)if(typeof t[n]===u&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(U(t[n][r],e))return"?"===n?i:n}else if(U(t[n],e))return"?"===n?i:n;return e},G={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,f],[/opios[\/ ]+([\w\.]+)/i],[f,[d,D+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[d,D]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[d,"UC"+C]],[/\bqbcore\/([\w\.]+)/i],[f,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[f,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+C],f],[/\bfocus\/([\w\.]+)/i],[f,[d,M+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[d,D+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[d,D+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[d,"MIUI "+C]],[/fxios\/([-\w\.]+)/i],[f,[d,M]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+C]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+C],f],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,z],f],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[d,_+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,_+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[d,"Android "+C]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,f],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[f,[d,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[f,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[f,H,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[d,M+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,W]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,"",W]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,W]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[p,L],[h,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[p,L],[h,g]],[/\((ip(?:hone|od)[\w ]*);/i],[c,[p,S],[h,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[p,S],[h,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[p,N],[h,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[c,[p,N],[h,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[p,F],[h,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[p,F],[h,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[p,"OPPO"],[h,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[p,"Vivo"],[h,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[p,"Realme"],[h,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[p,O],[h,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[p,O],[h,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[p,A],[h,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[p,A],[h,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[p,"Lenovo"],[h,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[p,"Nokia"],[h,g]],[/(pixel c)\b/i],[c,[p,I],[h,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[p,I],[h,g]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[p,P],[h,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[p,P],[h,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[p,"OnePlus"],[h,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[p,k],[h,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[p,k],[h,g]],[/(playbook);[-\w\),; ]+(rim)/i],[c,p,[h,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[p,T],[h,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[p,E],[h,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[p,E],[h,g]],[/(nexus 9)/i],[c,[p,"HTC"],[h,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[p,[c,/_/g," "],[h,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[p,"Acer"],[h,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[p,"Meizu"],[h,g]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[p,"Sharp"],[h,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,c,[h,g]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,c,[h,y]],[/(surface duo)/i],[c,[p,R],[h,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[p,"Fairphone"],[h,g]],[/(u304aa)/i],[c,[p,"AT&T"],[h,g]],[/\bsie-(\w*)/i],[c,[p,"Siemens"],[h,g]],[/\b(rct\w+) b/i],[c,[p,"RCA"],[h,y]],[/\b(venue[\d ]{2,7}) b/i],[c,[p,"Dell"],[h,y]],[/\b(q(?:mv|ta)\w+) b/i],[c,[p,"Verizon"],[h,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[p,"Barnes & Noble"],[h,y]],[/\b(tm\d{3}\w+) b/i],[c,[p,"NuVision"],[h,y]],[/\b(k88) b/i],[c,[p,"ZTE"],[h,y]],[/\b(nx\d{3}j) b/i],[c,[p,"ZTE"],[h,g]],[/\b(gen\d{3}) b.+49h/i],[c,[p,"Swiss"],[h,g]],[/\b(zur\d{3}) b/i],[c,[p,"Swiss"],[h,y]],[/\b((zeki)?tb.*\b) b/i],[c,[p,"Zeki"],[h,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],c,[h,y]],[/\b(ns-?\w{0,9}) b/i],[c,[p,"Insignia"],[h,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[p,"NextBook"],[h,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],c,[h,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],c,[h,g]],[/\b(ph-1) /i],[c,[p,"Essential"],[h,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[p,"Envizen"],[h,y]],[/\b(trio[-\w\. ]+) b/i],[c,[p,"MachSpeed"],[h,y]],[/\btu_(1491) b/i],[c,[p,"Rotor"],[h,y]],[/(shield[\w ]+) b/i],[c,[p,"Nvidia"],[h,y]],[/(sprint) (\w+)/i],[p,c,[h,g]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[p,R],[h,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[p,j],[h,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[p,j],[h,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,c,[h,v]],[/droid.+; (shield) bui/i],[c,[p,"Nvidia"],[h,v]],[/(playstation [345portablevi]+)/i],[c,[p,P],[h,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[p,R],[h,v]],[/smart-tv.+(samsung)/i],[p,[h,b]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[p,L],[h,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,A],[h,b]],[/(apple) ?tv/i],[p,[c,S+" TV"],[h,b]],[/crkey/i],[[c,_+"cast"],[p,I],[h,b]],[/droid.+aft(\w)( bui|\))/i],[c,[p,k],[h,b]],[/\(dtv[\);].+(aquos)/i],[c,[p,"Sharp"],[h,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[p,V],[c,V],[h,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,b]],[/((pebble))app/i],[p,c,[h,x]],[/droid.+; (glass) \d/i],[c,[p,I],[h,x]],[/droid.+; (wt63?0{2,3})\)/i],[c,[p,j],[h,x]],[/(quest( 2)?)/i],[c,[p,z],[h,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[h,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[h,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[h,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,y]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[h,g]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[f,H,G]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[f,H,G]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[f,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,f],[/\(bb(10);/i],[f,[d,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[d,M+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[f,[d,_+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],f],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,f],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,f]]},X=function e(t,n){if(typeof t===u&&(n=t,t=i),!(this instanceof e))return new e(t,n).getResult();var r=t||(typeof a!==s&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),o=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(q,n):q;return this.getBrowser=function(){var e,t={};return t[d]=i,t[f]=i,Z.call(t,r,o.browser),t.major=typeof(e=t.version)===l?e.replace(/[^\d\.]/g,"").split(".")[0]:i,t},this.getCPU=function(){var e={};return e[m]=i,Z.call(e,r,o.cpu),e},this.getDevice=function(){var e={};return e[p]=i,e[c]=i,e[h]=i,Z.call(e,r,o.device),e},this.getEngine=function(){var e={};return e[d]=i,e[f]=i,Z.call(e,r,o.engine),e},this.getOS=function(){var e={};return e[d]=i,e[f]=i,Z.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===l&&e.length>255?V(e,255):e,this},this.setUA(r),this};X.VERSION="1.0.2",X.BROWSER=B([d,f,"major"]),X.CPU=B([m]),X.DEVICE=B([c,p,h,v,g,b,y,x,w]),X.ENGINE=X.OS=B([d,f]),typeof t!==s?(e.exports&&(t=e.exports=X),t.UAParser=X):n.amdO?(r=function(){return X}.call(t,n,t,e))===i||(e.exports=r):typeof a!==s&&(a.UAParser=X);var Y=typeof a!==s&&(a.jQuery||a.Zepto);if(Y&&!Y.ua){var K=new X;Y.ua=K.getResult(),Y.ua.get=function(){return K.getUA()},Y.ua.set=function(e){K.setUA(e);var t=K.getResult();for(var n in t)Y.ua[n]=t[n]}}}("object"===typeof window?window:this)},5590:function(e){"use strict";var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r=64,a={},i=0,o=0;function s(e){var t="";do{t=n[e%r]+t,e=Math.floor(e/r)}while(e>0);return t}function u(){var e=s(+new Date);return e!==t?(i=0,t=e):e+"."+s(i++)}for(;o<r;o++)a[n[o]]=o;u.encode=s,u.decode=function(e){var t=0;for(o=0;o<e.length;o++)t=t*r+a[e.charAt(o)];return t},e.exports=u},3134:function(e,t,n){e.exports=n(3440).Observable},3440:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}t.Observable=void 0;var i=function(){return"function"===typeof Symbol},o=function(e){return i()&&Boolean(Symbol[e])},s=function(e){return o(e)?Symbol[e]:"@@"+e};i()&&!o("observable")&&(Symbol.observable=Symbol("observable"));var u=s("iterator"),l=s("observable"),c=s("species");function d(e,t){var n=e[t];if(null!=n){if("function"!==typeof n)throw new TypeError(n+" is not a function");return n}}function h(e){var t=e.constructor;return void 0!==t&&null===(t=t[c])&&(t=void 0),void 0!==t?t:k}function p(e){return e instanceof k}function f(e){f.log?f.log(e):setTimeout((function(){throw e}))}function m(e){Promise.resolve().then((function(){try{e()}catch(t){f(t)}}))}function v(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"===typeof t)t();else{var n=d(t,"unsubscribe");n&&n.call(t)}}catch(r){f(r)}}function g(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function y(e,t,n){e._state="running";var r=e._observer;try{var a=d(r,t);switch(t){case"next":a&&a.call(r,n);break;case"error":if(g(e),!a)throw n;a.call(r,n);break;case"complete":g(e),a&&a.call(r)}}catch(i){f(i)}"closed"===e._state?v(e):"running"===e._state&&(e._state="ready")}function b(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void m((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(y(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void y(e,t,n);e._queue.push({type:t,value:n})}}var x=function(){function e(t,r){n(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var a=new w(this);try{this._cleanup=r.call(void 0,a)}catch(i){a.error(i)}"initializing"===this._state&&(this._state="ready")}return a(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(g(this),v(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),w=function(){function e(t){n(this,e),this._subscription=t}return a(e,[{key:"next",value:function(e){b(this._subscription,"next",e)}},{key:"error",value:function(e){b(this._subscription,"error",e)}},{key:"complete",value:function(){b(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),k=function(){function e(t){if(n(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!==typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return a(e,[{key:"subscribe",value:function(e){return"object"===typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new x(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise((function(n,r){if("function"===typeof e)var a=t.subscribe({next:function(t){try{e(t,i)}catch(n){r(n),a.unsubscribe()}},error:r,complete:n});else r(new TypeError(e+" is not a function"));function i(){a.unsubscribe(),n()}}))}},{key:"map",value:function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");return new(h(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(r){return n.error(r)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"filter",value:function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");return new(h(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(r){return n.error(r)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"reduce",value:function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");var n=h(this),r=arguments.length>1,a=!1,i=arguments[1];return new n((function(n){return t.subscribe({next:function(t){var o=!a;if(a=!0,!o||r)try{i=e(i,t)}catch(s){return n.error(s)}else i=t},error:function(e){n.error(e)},complete:function(){if(!a&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(i),n.complete()}})}))}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=h(this);return new a((function(t){var r,i=0;return function e(o){r=o.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){i===n.length?(r=void 0,t.complete()):e(a.from(n[i++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}}))}},{key:"flatMap",value:function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");var n=h(this);return new n((function(r){var a=[],i=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(s){return r.error(s)}var i=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=a.indexOf(i);e>=0&&a.splice(e,1),o()}});a.push(i)},error:function(e){r.error(e)},complete:function(){o()}});function o(){i.closed&&0===a.length&&r.complete()}return function(){a.forEach((function(e){return e.unsubscribe()})),i.unsubscribe()}}))}},{key:l,value:function(){return this}}],[{key:"from",value:function(t){var n="function"===typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=d(t,l);if(r){var a=r.call(t);if(Object(a)!==a)throw new TypeError(a+" is not an object");return p(a)&&a.constructor===n?a:new n((function(e){return a.subscribe(e)}))}if(o("iterator")&&(r=d(t,u)))return new n((function(e){m((function(){if(!e.closed){var n=!0,a=!1,i=void 0;try{for(var o,s=r.call(t)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;if(e.next(u),e.closed)return}}catch(l){a=!0,i=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){m((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new("function"===typeof this?this:e)((function(e){m((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))}},{key:c,get:function(){return this}}]),e}();t.Observable=k,i()&&Object.defineProperty(k,Symbol("extensions"),{value:{symbol:l,hostReportError:f},configurable:!0})},1060:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===i)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},2798:function(e,t,n){var r=n(8018),a=n(4234).each;function i(e,t){this.query=e,this.isUnconditional=t,this.handlers=[],this.mql=window.matchMedia(e);var n=this;this.listener=function(e){n.mql=e.currentTarget||e,n.assess()},this.mql.addListener(this.listener)}i.prototype={constuctor:i,addHandler:function(e){var t=new r(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(e){var t=this.handlers;a(t,(function(n,r){if(n.equals(e))return n.destroy(),!t.splice(r,1)}))},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){a(this.handlers,(function(e){e.destroy()})),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var e=this.matches()?"on":"off";a(this.handlers,(function(t){t[e]()}))}},e.exports=i},3111:function(e,t,n){var r=n(2798),a=n(4234),i=a.each,o=a.isFunction,s=a.isArray;function u(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}u.prototype={constructor:u,register:function(e,t,n){var a=this.queries,u=n&&this.browserIsIncapable;return a[e]||(a[e]=new r(e,u)),o(t)&&(t={match:t}),s(t)||(t=[t]),i(t,(function(t){o(t)&&(t={match:t}),a[e].addHandler(t)})),this},unregister:function(e,t){var n=this.queries[e];return n&&(t?n.removeHandler(t):(n.clear(),delete this.queries[e])),this}},e.exports=u},8018:function(e){function t(e){this.options=e,!e.deferSetup&&this.setup()}t.prototype={constructor:t,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},e.exports=t},4234:function(e){e.exports={isFunction:function(e){return"function"===typeof e},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},each:function(e,t){for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);}}},1254:function(e,t,n){var r=n(3111);e.exports=new r},148:function(e,t,n){var r=n(2626),a=function(e){var t="",n=Object.keys(e);return n.forEach((function(a,i){var o=e[a];(function(e){return/[height|width]$/.test(e)})(a=r(a))&&"number"===typeof o&&(o+="px"),t+=!0===o?a:!1===o?"not "+a:"("+a+": "+o+")",i<n.length-1&&(t+=" and ")})),t};e.exports=function(e){var t="";return"string"===typeof e?e:e instanceof Array?(e.forEach((function(n,r){t+=a(n),r<e.length-1&&(t+=", ")})),t):a(e)}},2982:function(e,t,n){var r=NaN,a="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,h=c||d||Function("return this")(),p=Object.prototype.toString,f=Math.max,m=Math.min,v=function(){return h.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==a}(e))return r;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=s.test(e);return n||u.test(e)?l(e.slice(2),n?2:8):o.test(e)?r:+e}e.exports=function(e,t,n){var r,a,i,o,s,u,l=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,i=a;return r=a=void 0,l=t,o=e.apply(i,n)}function b(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-l>=i}function x(){var e=v();if(b(e))return w(e);s=setTimeout(x,function(e){var n=t-(e-u);return d?m(n,i-(e-l)):n}(e))}function w(e){return s=void 0,h&&r?p(e):(r=a=void 0,o)}function k(){var e=v(),n=b(e);if(r=arguments,a=this,u=e,n){if(void 0===s)return function(e){return l=e,s=setTimeout(x,t),c?p(e):o}(u);if(d)return s=setTimeout(x,t),p(u)}return void 0===s&&(s=setTimeout(x,t)),o}return t=y(t)||0,g(n)&&(c=!!n.leading,i=(d="maxWait"in n)?f(y(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),k.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=a=s=void 0},k.flush=function(){return void 0===s?o:w(v())},k}},2839:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,a){for(var i,o,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var l in i=Object(arguments[u]))n.call(i,l)&&(s[l]=i[l]);if(t){o=t(i);for(var c=0;c<o.length;c++)r.call(i,o[c])&&(s[o[c]]=i[o[c]])}}return s}},4719:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NextArrow=t.PrevArrow=void 0;var r=o(n(9653)),a=o(n(1060)),i=n(7129);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var b=function(e){m(n,e);var t=g(n);function n(){return h(this,n),t.apply(this,arguments)}return f(n,[{key:"clickHandler",value:function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)}},{key:"render",value:function(){var e={"slick-arrow":!0,"slick-prev":!0},t=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(0===this.props.currentSlide||this.props.slideCount<=this.props.slidesToShow)&&(e["slick-disabled"]=!0,t=null);var n={key:"0","data-role":"none",className:(0,a.default)(e),style:{display:"block"},onClick:t},i={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount};return this.props.prevArrow?r.default.cloneElement(this.props.prevArrow,c(c({},n),i)):r.default.createElement("button",u({key:"0",type:"button"},n)," ","Previous")}}]),n}(r.default.PureComponent);t.PrevArrow=b;var x=function(e){m(n,e);var t=g(n);function n(){return h(this,n),t.apply(this,arguments)}return f(n,[{key:"clickHandler",value:function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)}},{key:"render",value:function(){var e={"slick-arrow":!0,"slick-next":!0},t=this.clickHandler.bind(this,{message:"next"});(0,i.canGoNext)(this.props)||(e["slick-disabled"]=!0,t=null);var n={key:"1","data-role":"none",className:(0,a.default)(e),style:{display:"block"},onClick:t},o={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount};return this.props.nextArrow?r.default.cloneElement(this.props.nextArrow,c(c({},n),o)):r.default.createElement("button",u({key:"1",type:"button"},n)," ","Next")}}]),n}(r.default.PureComponent);t.NextArrow=x},1651:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(9653))&&r.__esModule?r:{default:r};var i={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(e){return a.default.createElement("ul",{style:{display:"block"}},e)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(e){return a.default.createElement("button",null,e+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0};t.default=i},8724:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dots=void 0;var r=o(n(9653)),a=o(n(1060)),i=n(7129);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var a=p(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"===typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var f=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(p,e);var t,n,o,s=h(p);function p(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),s.apply(this,arguments)}return t=p,n=[{key:"clickHandler",value:function(e,t){t.preventDefault(),this.props.clickHandler(e)}},{key:"render",value:function(){for(var e,t=this.props,n=t.onMouseEnter,o=t.onMouseOver,s=t.onMouseLeave,c=t.infinite,d=t.slidesToScroll,h=t.slidesToShow,p=t.slideCount,f=t.currentSlide,m=(e={slideCount:p,slidesToScroll:d,slidesToShow:h,infinite:c}).infinite?Math.ceil(e.slideCount/e.slidesToScroll):Math.ceil((e.slideCount-e.slidesToShow)/e.slidesToScroll)+1,v={onMouseEnter:n,onMouseOver:o,onMouseLeave:s},g=[],y=0;y<m;y++){var b=(y+1)*d-1,x=c?b:(0,i.clamp)(b,0,p-1),w=x-(d-1),k=c?w:(0,i.clamp)(w,0,p-1),S=(0,a.default)({"slick-active":c?f>=k&&f<=x:f===k}),E={message:"dots",index:y,slidesToScroll:d,currentSlide:f},T=this.clickHandler.bind(this,E);g=g.concat(r.default.createElement("li",{key:y,className:S},r.default.cloneElement(this.props.customPaging(y),{onClick:T})))}return r.default.cloneElement(this.props.appendDots(g),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:this.props.dotsClass},v))}}],n&&c(t.prototype,n),o&&c(t,o),p}(r.default.PureComponent);t.Dots=f},2346:function(e,t,n){"use strict";var r;t.Z=void 0;var a=((r=n(3172))&&r.__esModule?r:{default:r}).default;t.Z=a},6166:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};t.default=n},1660:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InnerSlider=void 0;var r=h(n(9653)),a=h(n(6166)),i=h(n(2982)),o=h(n(1060)),s=n(7129),u=n(1579),l=n(8724),c=n(4719),d=h(n(3941));function h(e){return e&&e.__esModule?e:{default:e}}function p(e){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function m(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var a=k(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;return w(e)}(this,n)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(k,e);var t,n,h,v=x(k);function k(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),S(w(t=v.call(this,e)),"listRefHandler",(function(e){return t.list=e})),S(w(t),"trackRefHandler",(function(e){return t.track=e})),S(w(t),"adaptHeight",(function(){if(t.props.adaptiveHeight&&t.list){var e=t.list.querySelector('[data-index="'.concat(t.state.currentSlide,'"]'));t.list.style.height=(0,s.getHeight)(e)+"px"}})),S(w(t),"componentDidMount",(function(){if(t.props.onInit&&t.props.onInit(),t.props.lazyLoad){var e=(0,s.getOnDemandLazySlides)(g(g({},t.props),t.state));e.length>0&&(t.setState((function(t){return{lazyLoadedList:t.lazyLoadedList.concat(e)}})),t.props.onLazyLoad&&t.props.onLazyLoad(e))}var n=g({listRef:t.list,trackRef:t.track},t.props);t.updateState(n,!0,(function(){t.adaptHeight(),t.props.autoplay&&t.autoPlay("update")})),"progressive"===t.props.lazyLoad&&(t.lazyLoadTimer=setInterval(t.progressiveLazyLoad,1e3)),t.ro=new d.default((function(){t.state.animating?(t.onWindowResized(!1),t.callbackTimers.push(setTimeout((function(){return t.onWindowResized()}),t.props.speed))):t.onWindowResized()})),t.ro.observe(t.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),(function(e){e.onfocus=t.props.pauseOnFocus?t.onSlideFocus:null,e.onblur=t.props.pauseOnFocus?t.onSlideBlur:null})),window.addEventListener?window.addEventListener("resize",t.onWindowResized):window.attachEvent("onresize",t.onWindowResized)})),S(w(t),"componentWillUnmount",(function(){t.animationEndCallback&&clearTimeout(t.animationEndCallback),t.lazyLoadTimer&&clearInterval(t.lazyLoadTimer),t.callbackTimers.length&&(t.callbackTimers.forEach((function(e){return clearTimeout(e)})),t.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",t.onWindowResized):window.detachEvent("onresize",t.onWindowResized),t.autoplayTimer&&clearInterval(t.autoplayTimer),t.ro.disconnect()})),S(w(t),"componentDidUpdate",(function(e){if(t.checkImagesLoad(),t.props.onReInit&&t.props.onReInit(),t.props.lazyLoad){var n=(0,s.getOnDemandLazySlides)(g(g({},t.props),t.state));n.length>0&&(t.setState((function(e){return{lazyLoadedList:e.lazyLoadedList.concat(n)}})),t.props.onLazyLoad&&t.props.onLazyLoad(n))}t.adaptHeight();var a=g(g({listRef:t.list,trackRef:t.track},t.props),t.state),i=t.didPropsChange(e);i&&t.updateState(a,i,(function(){t.state.currentSlide>=r.default.Children.count(t.props.children)&&t.changeSlide({message:"index",index:r.default.Children.count(t.props.children)-t.props.slidesToShow,currentSlide:t.state.currentSlide}),t.props.autoplay?t.autoPlay("update"):t.pause("paused")}))})),S(w(t),"onWindowResized",(function(e){t.debouncedResize&&t.debouncedResize.cancel(),t.debouncedResize=(0,i.default)((function(){return t.resizeWindow(e)}),50),t.debouncedResize()})),S(w(t),"resizeWindow",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(Boolean(t.track&&t.track.node)){var n=g(g({listRef:t.list,trackRef:t.track},t.props),t.state);t.updateState(n,e,(function(){t.props.autoplay?t.autoPlay("update"):t.pause("paused")})),t.setState({animating:!1}),clearTimeout(t.animationEndCallback),delete t.animationEndCallback}})),S(w(t),"updateState",(function(e,n,a){var i=(0,s.initializedState)(e);e=g(g(g({},e),i),{},{slideIndex:i.currentSlide});var o=(0,s.getTrackLeft)(e);e=g(g({},e),{},{left:o});var u=(0,s.getTrackCSS)(e);(n||r.default.Children.count(t.props.children)!==r.default.Children.count(e.children))&&(i.trackStyle=u),t.setState(i,a)})),S(w(t),"ssrInit",(function(){if(t.props.variableWidth){var e=0,n=0,a=[],i=(0,s.getPreClones)(g(g(g({},t.props),t.state),{},{slideCount:t.props.children.length})),o=(0,s.getPostClones)(g(g(g({},t.props),t.state),{},{slideCount:t.props.children.length}));t.props.children.forEach((function(t){a.push(t.props.style.width),e+=t.props.style.width}));for(var u=0;u<i;u++)n+=a[a.length-1-u],e+=a[a.length-1-u];for(var l=0;l<o;l++)e+=a[l];for(var c=0;c<t.state.currentSlide;c++)n+=a[c];var d={width:e+"px",left:-n+"px"};if(t.props.centerMode){var h="".concat(a[t.state.currentSlide],"px");d.left="calc(".concat(d.left," + (100% - ").concat(h,") / 2 ) ")}return{trackStyle:d}}var p=r.default.Children.count(t.props.children),f=g(g(g({},t.props),t.state),{},{slideCount:p}),m=(0,s.getPreClones)(f)+(0,s.getPostClones)(f)+p,v=100/t.props.slidesToShow*m,y=100/m,b=-y*((0,s.getPreClones)(f)+t.state.currentSlide)*v/100;return t.props.centerMode&&(b+=(100-y*v/100)/2),{slideWidth:y+"%",trackStyle:{width:v+"%",left:b+"%"}}})),S(w(t),"checkImagesLoad",(function(){var e=t.list&&t.list.querySelectorAll&&t.list.querySelectorAll(".slick-slide img")||[],n=e.length,r=0;Array.prototype.forEach.call(e,(function(e){var a=function(){return++r&&r>=n&&t.onWindowResized()};if(e.onclick){var i=e.onclick;e.onclick=function(){i(),e.parentNode.focus()}}else e.onclick=function(){return e.parentNode.focus()};e.onload||(t.props.lazyLoad?e.onload=function(){t.adaptHeight(),t.callbackTimers.push(setTimeout(t.onWindowResized,t.props.speed))}:(e.onload=a,e.onerror=function(){a(),t.props.onLazyLoadError&&t.props.onLazyLoadError()}))}))})),S(w(t),"progressiveLazyLoad",(function(){for(var e=[],n=g(g({},t.props),t.state),r=t.state.currentSlide;r<t.state.slideCount+(0,s.getPostClones)(n);r++)if(t.state.lazyLoadedList.indexOf(r)<0){e.push(r);break}for(var a=t.state.currentSlide-1;a>=-(0,s.getPreClones)(n);a--)if(t.state.lazyLoadedList.indexOf(a)<0){e.push(a);break}e.length>0?(t.setState((function(t){return{lazyLoadedList:t.lazyLoadedList.concat(e)}})),t.props.onLazyLoad&&t.props.onLazyLoad(e)):t.lazyLoadTimer&&(clearInterval(t.lazyLoadTimer),delete t.lazyLoadTimer)})),S(w(t),"slideHandler",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.props,a=r.asNavFor,i=r.beforeChange,o=r.onLazyLoad,u=r.speed,l=r.afterChange,c=t.state.currentSlide,d=(0,s.slideHandler)(g(g(g({index:e},t.props),t.state),{},{trackRef:t.track,useCSS:t.props.useCSS&&!n})),h=d.state,p=d.nextState;if(h){i&&i(c,h.currentSlide);var f=h.lazyLoadedList.filter((function(e){return t.state.lazyLoadedList.indexOf(e)<0}));o&&f.length>0&&o(f),!t.props.waitForAnimate&&t.animationEndCallback&&(clearTimeout(t.animationEndCallback),l&&l(c),delete t.animationEndCallback),t.setState(h,(function(){a&&t.asNavForIndex!==e&&(t.asNavForIndex=e,a.innerSlider.slideHandler(e)),p&&(t.animationEndCallback=setTimeout((function(){var e=p.animating,n=m(p,["animating"]);t.setState(n,(function(){t.callbackTimers.push(setTimeout((function(){return t.setState({animating:e})}),10)),l&&l(h.currentSlide),delete t.animationEndCallback}))}),u))}))}})),S(w(t),"changeSlide",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=g(g({},t.props),t.state),a=(0,s.changeSlide)(r,e);if((0===a||a)&&(!0===n?t.slideHandler(a,n):t.slideHandler(a),t.props.autoplay&&t.autoPlay("update"),t.props.focusOnSelect)){var i=t.list.querySelectorAll(".slick-current");i[0]&&i[0].focus()}})),S(w(t),"clickHandler",(function(e){!1===t.clickable&&(e.stopPropagation(),e.preventDefault()),t.clickable=!0})),S(w(t),"keyHandler",(function(e){var n=(0,s.keyHandler)(e,t.props.accessibility,t.props.rtl);""!==n&&t.changeSlide({message:n})})),S(w(t),"selectHandler",(function(e){t.changeSlide(e)})),S(w(t),"disableBodyScroll",(function(){window.ontouchmove=function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1}})),S(w(t),"enableBodyScroll",(function(){window.ontouchmove=null})),S(w(t),"swipeStart",(function(e){t.props.verticalSwiping&&t.disableBodyScroll();var n=(0,s.swipeStart)(e,t.props.swipe,t.props.draggable);""!==n&&t.setState(n)})),S(w(t),"swipeMove",(function(e){var n=(0,s.swipeMove)(e,g(g(g({},t.props),t.state),{},{trackRef:t.track,listRef:t.list,slideIndex:t.state.currentSlide}));n&&(n.swiping&&(t.clickable=!1),t.setState(n))})),S(w(t),"swipeEnd",(function(e){var n=(0,s.swipeEnd)(e,g(g(g({},t.props),t.state),{},{trackRef:t.track,listRef:t.list,slideIndex:t.state.currentSlide}));if(n){var r=n.triggerSlideHandler;delete n.triggerSlideHandler,t.setState(n),void 0!==r&&(t.slideHandler(r),t.props.verticalSwiping&&t.enableBodyScroll())}})),S(w(t),"touchEnd",(function(e){t.swipeEnd(e),t.clickable=!0})),S(w(t),"slickPrev",(function(){t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"previous"})}),0))})),S(w(t),"slickNext",(function(){t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"next"})}),0))})),S(w(t),"slickGoTo",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e=Number(e),isNaN(e))return"";t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"index",index:e,currentSlide:t.state.currentSlide},n)}),0))})),S(w(t),"play",(function(){var e;if(t.props.rtl)e=t.state.currentSlide-t.props.slidesToScroll;else{if(!(0,s.canGoNext)(g(g({},t.props),t.state)))return!1;e=t.state.currentSlide+t.props.slidesToScroll}t.slideHandler(e)})),S(w(t),"autoPlay",(function(e){t.autoplayTimer&&clearInterval(t.autoplayTimer);var n=t.state.autoplaying;if("update"===e){if("hovered"===n||"focused"===n||"paused"===n)return}else if("leave"===e){if("paused"===n||"focused"===n)return}else if("blur"===e&&("paused"===n||"hovered"===n))return;t.autoplayTimer=setInterval(t.play,t.props.autoplaySpeed+50),t.setState({autoplaying:"playing"})})),S(w(t),"pause",(function(e){t.autoplayTimer&&(clearInterval(t.autoplayTimer),t.autoplayTimer=null);var n=t.state.autoplaying;"paused"===e?t.setState({autoplaying:"paused"}):"focused"===e?"hovered"!==n&&"playing"!==n||t.setState({autoplaying:"focused"}):"playing"===n&&t.setState({autoplaying:"hovered"})})),S(w(t),"onDotsOver",(function(){return t.props.autoplay&&t.pause("hovered")})),S(w(t),"onDotsLeave",(function(){return t.props.autoplay&&"hovered"===t.state.autoplaying&&t.autoPlay("leave")})),S(w(t),"onTrackOver",(function(){return t.props.autoplay&&t.pause("hovered")})),S(w(t),"onTrackLeave",(function(){return t.props.autoplay&&"hovered"===t.state.autoplaying&&t.autoPlay("leave")})),S(w(t),"onSlideFocus",(function(){return t.props.autoplay&&t.pause("focused")})),S(w(t),"onSlideBlur",(function(){return t.props.autoplay&&"focused"===t.state.autoplaying&&t.autoPlay("blur")})),S(w(t),"render",(function(){var e,n,a,i=(0,o.default)("slick-slider",t.props.className,{"slick-vertical":t.props.vertical,"slick-initialized":!0}),d=g(g({},t.props),t.state),h=(0,s.extractObject)(d,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),p=t.props.pauseOnHover;if(h=g(g({},h),{},{onMouseEnter:p?t.onTrackOver:null,onMouseLeave:p?t.onTrackLeave:null,onMouseOver:p?t.onTrackOver:null,focusOnSelect:t.props.focusOnSelect&&t.clickable?t.selectHandler:null}),!0===t.props.dots&&t.state.slideCount>=t.props.slidesToShow){var m=(0,s.extractObject)(d,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),v=t.props.pauseOnDotsHover;m=g(g({},m),{},{clickHandler:t.changeSlide,onMouseEnter:v?t.onDotsLeave:null,onMouseOver:v?t.onDotsOver:null,onMouseLeave:v?t.onDotsLeave:null}),e=r.default.createElement(l.Dots,m)}var y=(0,s.extractObject)(d,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);y.clickHandler=t.changeSlide,t.props.arrows&&(n=r.default.createElement(c.PrevArrow,y),a=r.default.createElement(c.NextArrow,y));var b=null;t.props.vertical&&(b={height:t.state.listHeight});var x=null;!1===t.props.vertical?!0===t.props.centerMode&&(x={padding:"0px "+t.props.centerPadding}):!0===t.props.centerMode&&(x={padding:t.props.centerPadding+" 0px"});var w=g(g({},b),x),k=t.props.touchMove,S={className:"slick-list",style:w,onClick:t.clickHandler,onMouseDown:k?t.swipeStart:null,onMouseMove:t.state.dragging&&k?t.swipeMove:null,onMouseUp:k?t.swipeEnd:null,onMouseLeave:t.state.dragging&&k?t.swipeEnd:null,onTouchStart:k?t.swipeStart:null,onTouchMove:t.state.dragging&&k?t.swipeMove:null,onTouchEnd:k?t.touchEnd:null,onTouchCancel:t.state.dragging&&k?t.swipeEnd:null,onKeyDown:t.props.accessibility?t.keyHandler:null},E={className:i,dir:"ltr",style:t.props.style};return t.props.unslick&&(S={className:"slick-list"},E={className:i}),r.default.createElement("div",E,t.props.unslick?"":n,r.default.createElement("div",f({ref:t.listRefHandler},S),r.default.createElement(u.Track,f({ref:t.trackRefHandler},h),t.props.children)),t.props.unslick?"":a,t.props.unslick?"":e)})),t.list=null,t.track=null,t.state=g(g({},a.default),{},{currentSlide:t.props.initialSlide,slideCount:r.default.Children.count(t.props.children)}),t.callbackTimers=[],t.clickable=!0,t.debouncedResize=null;var n=t.ssrInit();return t.state=g(g({},t.state),n),t}return t=k,(n=[{key:"didPropsChange",value:function(e){for(var t=!1,n=0,a=Object.keys(this.props);n<a.length;n++){var i=a[n];if(!e.hasOwnProperty(i)){t=!0;break}if("object"!==p(e[i])&&"function"!==typeof e[i]&&e[i]!==this.props[i]){t=!0;break}}return t||r.default.Children.count(this.props.children)!==r.default.Children.count(e.children)}}])&&y(t.prototype,n),h&&y(t,h),k}(r.default.Component);t.InnerSlider=E},3172:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(9653)),a=n(1660),i=u(n(148)),o=u(n(1651)),s=n(7129);function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"===typeof t))return t;return v(e)}(this,n)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=(0,s.canUseDOM)()&&n(1254),x=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(d,e);var t,n,u,l=m(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),y(v(t=l.call(this,e)),"innerSliderRefHandler",(function(e){return t.innerSlider=e})),y(v(t),"slickPrev",(function(){return t.innerSlider.slickPrev()})),y(v(t),"slickNext",(function(){return t.innerSlider.slickNext()})),y(v(t),"slickGoTo",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.innerSlider.slickGoTo(e,n)})),y(v(t),"slickPause",(function(){return t.innerSlider.pause("paused")})),y(v(t),"slickPlay",(function(){return t.innerSlider.autoPlay("play")})),t.state={breakpoint:null},t._responsiveMediaHandlers=[],t}return t=d,(n=[{key:"media",value:function(e,t){b.register(e,t),this._responsiveMediaHandlers.push({query:e,handler:t})}},{key:"componentDidMount",value:function(){var e=this;if(this.props.responsive){var t=this.props.responsive.map((function(e){return e.breakpoint}));t.sort((function(e,t){return e-t})),t.forEach((function(n,r){var a;a=0===r?(0,i.default)({minWidth:0,maxWidth:n}):(0,i.default)({minWidth:t[r-1]+1,maxWidth:n}),(0,s.canUseDOM)()&&e.media(a,(function(){e.setState({breakpoint:n})}))}));var n=(0,i.default)({minWidth:t.slice(-1)[0]});(0,s.canUseDOM)()&&this.media(n,(function(){e.setState({breakpoint:null})}))}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach((function(e){b.unregister(e.query,e.handler)}))}},{key:"render",value:function(){var e,t,n=this;(e=this.state.breakpoint?"unslick"===(t=this.props.responsive.filter((function(e){return e.breakpoint===n.state.breakpoint})))[0].settings?"unslick":h(h(h({},o.default),this.props),t[0].settings):h(h({},o.default),this.props)).centerMode&&(e.slidesToScroll,e.slidesToScroll=1),e.fade&&(e.slidesToShow,e.slidesToScroll,e.slidesToShow=1,e.slidesToScroll=1);var i=r.default.Children.toArray(this.props.children);i=i.filter((function(e){return"string"===typeof e?!!e.trim():!!e})),e.variableWidth&&(e.rows>1||e.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),e.variableWidth=!1);for(var s=[],u=null,l=0;l<i.length;l+=e.rows*e.slidesPerRow){for(var d=[],p=l;p<l+e.rows*e.slidesPerRow;p+=e.slidesPerRow){for(var f=[],m=p;m<p+e.slidesPerRow&&(e.variableWidth&&i[m].props.style&&(u=i[m].props.style.width),!(m>=i.length));m+=1)f.push(r.default.cloneElement(i[m],{key:100*l+10*p+m,tabIndex:-1,style:{width:"".concat(100/e.slidesPerRow,"%"),display:"inline-block"}}));d.push(r.default.createElement("div",{key:10*l+p},f))}e.variableWidth?s.push(r.default.createElement("div",{key:l,style:{width:u}},d)):s.push(r.default.createElement("div",{key:l},d))}if("unslick"===e){var v="regular slider "+(this.props.className||"");return r.default.createElement("div",{className:v},i)}return s.length<=e.slidesToShow&&(e.unslick=!0),r.default.createElement(a.InnerSlider,c({style:this.props.style,ref:this.innerSliderRefHandler},e),s)}}])&&p(t.prototype,n),u&&p(t,u),d}(r.default.Component);t.default=x},1579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Track=void 0;var r=o(n(9653)),a=o(n(1060)),i=n(7129);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var a=p(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"===typeof t))return t;return h(e)}(this,n)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){var t,n,r,a,i;return r=(i=e.rtl?e.slideCount-1-e.index:e.index)<0||i>=e.slideCount,e.centerMode?(a=Math.floor(e.slidesToShow/2),n=(i-e.currentSlide)%e.slideCount===0,i>e.currentSlide-a-1&&i<=e.currentSlide+a&&(t=!0)):t=e.currentSlide<=i&&i<e.currentSlide+e.slidesToShow,{"slick-slide":!0,"slick-active":t,"slick-center":n,"slick-cloned":r,"slick-current":i===(e.targetSlide<0?e.targetSlide+e.slideCount:e.targetSlide>=e.slideCount?e.targetSlide-e.slideCount:e.targetSlide)}},y=function(e,t){return e.key||t},b=function(e){var t,n=[],o=[],s=[],u=r.default.Children.count(e.children),l=(0,i.lazyStartIndex)(e),c=(0,i.lazyEndIndex)(e);return r.default.Children.forEach(e.children,(function(d,h){var p,f={message:"children",index:h,slidesToScroll:e.slidesToScroll,currentSlide:e.currentSlide};p=!e.lazyLoad||e.lazyLoad&&e.lazyLoadedList.indexOf(h)>=0?d:r.default.createElement("div",null);var v=function(e){var t={};return void 0!==e.variableWidth&&!1!==e.variableWidth||(t.width=e.slideWidth),e.fade&&(t.position="relative",e.vertical?t.top=-e.index*parseInt(e.slideHeight):t.left=-e.index*parseInt(e.slideWidth),t.opacity=e.currentSlide===e.index?1:0,e.useCSS&&(t.transition="opacity "+e.speed+"ms "+e.cssEase+", visibility "+e.speed+"ms "+e.cssEase)),t}(m(m({},e),{},{index:h})),b=p.props.className||"",x=g(m(m({},e),{},{index:h}));if(n.push(r.default.cloneElement(p,{key:"original"+y(p,h),"data-index":h,className:(0,a.default)(x,b),tabIndex:"-1","aria-hidden":!x["slick-active"],style:m(m({outline:"none"},p.props.style||{}),v),onClick:function(t){p.props&&p.props.onClick&&p.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(f)}})),e.infinite&&!1===e.fade){var w=u-h;w<=(0,i.getPreClones)(e)&&u!==e.slidesToShow&&((t=-w)>=l&&(p=d),x=g(m(m({},e),{},{index:t})),o.push(r.default.cloneElement(p,{key:"precloned"+y(p,t),"data-index":t,tabIndex:"-1",className:(0,a.default)(x,b),"aria-hidden":!x["slick-active"],style:m(m({},p.props.style||{}),v),onClick:function(t){p.props&&p.props.onClick&&p.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(f)}}))),u!==e.slidesToShow&&((t=u+h)<c&&(p=d),x=g(m(m({},e),{},{index:t})),s.push(r.default.cloneElement(p,{key:"postcloned"+y(p,t),"data-index":t,tabIndex:"-1",className:(0,a.default)(x,b),"aria-hidden":!x["slick-active"],style:m(m({},p.props.style||{}),v),onClick:function(t){p.props&&p.props.onClick&&p.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(f)}})))}})),e.rtl?o.concat(n,s).reverse():o.concat(n,s)},x=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,e);var t,n,a,i=d(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(h(e=i.call.apply(i,[this].concat(n))),"node",null),v(h(e),"handleRef",(function(t){e.node=t})),e}return t=o,(n=[{key:"render",value:function(){var e=b(this.props),t=this.props,n={onMouseEnter:t.onMouseEnter,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave};return r.default.createElement("div",u({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},n),e)}}])&&l(t.prototype,n),a&&l(t,a),o}(r.default.PureComponent);t.Track=x},7129:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=u,t.canUseDOM=t.slidesOnLeft=t.slidesOnRight=t.siblingDirection=t.getTotalSlides=t.getPostClones=t.getPreClones=t.getTrackLeft=t.getTrackAnimateCSS=t.getTrackCSS=t.checkSpecKeys=t.getSlideCount=t.checkNavigable=t.getNavigableIndexes=t.swipeEnd=t.swipeMove=t.swipeStart=t.keyHandler=t.changeSlide=t.slideHandler=t.initializedState=t.extractObject=t.canGoNext=t.getSwipeDirection=t.getHeight=t.getWidth=t.lazySlidesOnRight=t.lazySlidesOnLeft=t.lazyEndIndex=t.lazyStartIndex=t.getRequiredLazySlides=t.getOnDemandLazySlides=t.safePreventDefault=void 0;var r,a=(r=n(9653))&&r.__esModule?r:{default:r};function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t,n){return Math.max(t,Math.min(e,n))}var l=function(e){["onTouchStart","onTouchMove","onWheel"].includes(e._reactName)||e.preventDefault()};t.safePreventDefault=l;var c=function(e){for(var t=[],n=d(e),r=h(e),a=n;a<r;a++)e.lazyLoadedList.indexOf(a)<0&&t.push(a);return t};t.getOnDemandLazySlides=c;t.getRequiredLazySlides=function(e){for(var t=[],n=d(e),r=h(e),a=n;a<r;a++)t.push(a);return t};var d=function(e){return e.currentSlide-p(e)};t.lazyStartIndex=d;var h=function(e){return e.currentSlide+f(e)};t.lazyEndIndex=h;var p=function(e){return e.centerMode?Math.floor(e.slidesToShow/2)+(parseInt(e.centerPadding)>0?1:0):0};t.lazySlidesOnLeft=p;var f=function(e){return e.centerMode?Math.floor((e.slidesToShow-1)/2)+1+(parseInt(e.centerPadding)>0?1:0):e.slidesToShow};t.lazySlidesOnRight=f;var m=function(e){return e&&e.offsetWidth||0};t.getWidth=m;var v=function(e){return e&&e.offsetHeight||0};t.getHeight=v;var g=function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=e.startX-e.curX,n=e.startY-e.curY,r=Math.atan2(n,t),(a=Math.round(180*r/Math.PI))<0&&(a=360-Math.abs(a)),a<=45&&a>=0||a<=360&&a>=315?"left":a>=135&&a<=225?"right":!0===i?a>=35&&a<=135?"up":"down":"vertical"};t.getSwipeDirection=g;var y=function(e){var t=!0;return e.infinite||(e.centerMode&&e.currentSlide>=e.slideCount-1||e.slideCount<=e.slidesToShow||e.currentSlide>=e.slideCount-e.slidesToShow)&&(t=!1),t};t.canGoNext=y;t.extractObject=function(e,t){var n={};return t.forEach((function(t){return n[t]=e[t]})),n};t.initializedState=function(e){var t,n=a.default.Children.count(e.children),r=e.listRef,i=Math.ceil(m(r)),s=e.trackRef&&e.trackRef.node,u=Math.ceil(m(s));if(e.vertical)t=i;else{var l=e.centerMode&&2*parseInt(e.centerPadding);"string"===typeof e.centerPadding&&"%"===e.centerPadding.slice(-1)&&(l*=i/100),t=Math.ceil((i-l)/e.slidesToShow)}var d=r&&v(r.querySelector('[data-index="0"]')),h=d*e.slidesToShow,p=void 0===e.currentSlide?e.initialSlide:e.currentSlide;e.rtl&&void 0===e.currentSlide&&(p=n-1-e.initialSlide);var f=e.lazyLoadedList||[],g=c(o(o({},e),{},{currentSlide:p,lazyLoadedList:f})),y={slideCount:n,slideWidth:t,listWidth:i,trackWidth:u,currentSlide:p,slideHeight:d,listHeight:h,lazyLoadedList:f=f.concat(g)};return null===e.autoplaying&&e.autoplay&&(y.autoplaying="playing"),y};t.slideHandler=function(e){var t=e.waitForAnimate,n=e.animating,r=e.fade,a=e.infinite,i=e.index,s=e.slideCount,l=e.lazyLoad,d=e.currentSlide,h=e.centerMode,p=e.slidesToScroll,f=e.slidesToShow,m=e.useCSS,v=e.lazyLoadedList;if(t&&n)return{};var g,b,x,w=i,k={},C={},_=a?i:u(i,0,s-1);if(r){if(!a&&(i<0||i>=s))return{};i<0?w=i+s:i>=s&&(w=i-s),l&&v.indexOf(w)<0&&(v=v.concat(w)),k={animating:!0,currentSlide:w,lazyLoadedList:v,targetSlide:w},C={animating:!1,targetSlide:w}}else g=w,w<0?(g=w+s,a?s%p!==0&&(g=s-s%p):g=0):!y(e)&&w>d?w=g=d:h&&w>=s?(w=a?s:s-1,g=a?0:s-1):w>=s&&(g=w-s,a?s%p!==0&&(g=0):g=s-f),!a&&w+f>=s&&(g=s-f),b=T(o(o({},e),{},{slideIndex:w})),x=T(o(o({},e),{},{slideIndex:g})),a||(b===x&&(w=g),b=x),l&&(v=v.concat(c(o(o({},e),{},{currentSlide:w})))),m?(k={animating:!0,currentSlide:g,trackStyle:E(o(o({},e),{},{left:b})),lazyLoadedList:v,targetSlide:_},C={animating:!1,currentSlide:g,trackStyle:S(o(o({},e),{},{left:x})),swipeLeft:null,targetSlide:_}):k={currentSlide:g,trackStyle:S(o(o({},e),{},{left:x})),lazyLoadedList:v,targetSlide:_};return{state:k,nextState:C}};t.changeSlide=function(e,t){var n,r,a,i,s=e.slidesToScroll,u=e.slidesToShow,l=e.slideCount,c=e.currentSlide,d=e.targetSlide,h=e.lazyLoad,p=e.infinite;if(n=l%s!==0?0:(l-c)%s,"previous"===t.message)i=c-(a=0===n?s:u-n),h&&!p&&(i=-1===(r=c-a)?l-1:r),p||(i=d-s);else if("next"===t.message)i=c+(a=0===n?s:n),h&&!p&&(i=(c+s)%l+n),p||(i=d+s);else if("dots"===t.message)i=t.index*t.slidesToScroll;else if("children"===t.message){if(i=t.index,p){var f=I(o(o({},e),{},{targetSlide:i}));i>t.currentSlide&&"left"===f?i-=l:i<t.currentSlide&&"right"===f&&(i+=l)}}else"index"===t.message&&(i=Number(t.index));return i};t.keyHandler=function(e,t,n){return e.target.tagName.match("TEXTAREA|INPUT|SELECT")||!t?"":37===e.keyCode?n?"next":"previous":39===e.keyCode?n?"previous":"next":""};t.swipeStart=function(e,t,n){return"IMG"===e.target.tagName&&l(e),!t||!n&&-1!==e.type.indexOf("mouse")?"":{dragging:!0,touchObject:{startX:e.touches?e.touches[0].pageX:e.clientX,startY:e.touches?e.touches[0].pageY:e.clientY,curX:e.touches?e.touches[0].pageX:e.clientX,curY:e.touches?e.touches[0].pageY:e.clientY}}};t.swipeMove=function(e,t){var n=t.scrolling,r=t.animating,a=t.vertical,i=t.swipeToSlide,s=t.verticalSwiping,u=t.rtl,c=t.currentSlide,d=t.edgeFriction,h=t.edgeDragged,p=t.onEdge,f=t.swiped,m=t.swiping,v=t.slideCount,b=t.slidesToScroll,x=t.infinite,w=t.touchObject,k=t.swipeEvent,E=t.listHeight,C=t.listWidth;if(!n){if(r)return l(e);a&&i&&s&&l(e);var _,M={},I=T(t);w.curX=e.touches?e.touches[0].pageX:e.clientX,w.curY=e.touches?e.touches[0].pageY:e.clientY,w.swipeLength=Math.round(Math.sqrt(Math.pow(w.curX-w.startX,2)));var N=Math.round(Math.sqrt(Math.pow(w.curY-w.startY,2)));if(!s&&!m&&N>10)return{scrolling:!0};s&&(w.swipeLength=N);var A=(u?-1:1)*(w.curX>w.startX?1:-1);s&&(A=w.curY>w.startY?1:-1);var R=Math.ceil(v/b),O=g(t.touchObject,s),D=w.swipeLength;return x||(0===c&&("right"===O||"down"===O)||c+1>=R&&("left"===O||"up"===O)||!y(t)&&("left"===O||"up"===O))&&(D=w.swipeLength*d,!1===h&&p&&(p(O),M.edgeDragged=!0)),!f&&k&&(k(O),M.swiped=!0),_=a?I+D*(E/C)*A:u?I-D*A:I+D*A,s&&(_=I+D*A),M=o(o({},M),{},{touchObject:w,swipeLeft:_,trackStyle:S(o(o({},t),{},{left:_}))}),Math.abs(w.curX-w.startX)<.8*Math.abs(w.curY-w.startY)?M:(w.swipeLength>10&&(M.swiping=!0,l(e)),M)}};t.swipeEnd=function(e,t){var n=t.dragging,r=t.swipe,a=t.touchObject,i=t.listWidth,s=t.touchThreshold,u=t.verticalSwiping,c=t.listHeight,d=t.swipeToSlide,h=t.scrolling,p=t.onSwipe,f=t.targetSlide,m=t.currentSlide,v=t.infinite;if(!n)return r&&l(e),{};var y=u?c/s:i/s,b=g(a,u),k={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(h)return k;if(!a.swipeLength)return k;if(a.swipeLength>y){var S,C;l(e),p&&p(b);var _=v?m:f;switch(b){case"left":case"up":C=_+w(t),S=d?x(t,C):C,k.currentDirection=0;break;case"right":case"down":C=_-w(t),S=d?x(t,C):C,k.currentDirection=1;break;default:S=_}k.triggerSlideHandler=S}else{var M=T(t);k.trackStyle=E(o(o({},t),{},{left:M}))}return k};var b=function(e){for(var t=e.infinite?2*e.slideCount:e.slideCount,n=e.infinite?-1*e.slidesToShow:0,r=e.infinite?-1*e.slidesToShow:0,a=[];n<t;)a.push(n),n=r+e.slidesToScroll,r+=Math.min(e.slidesToScroll,e.slidesToShow);return a};t.getNavigableIndexes=b;var x=function(e,t){var n=b(e),r=0;if(t>n[n.length-1])t=n[n.length-1];else for(var a in n){if(t<n[a]){t=r;break}r=n[a]}return t};t.checkNavigable=x;var w=function(e){var t=e.centerMode?e.slideWidth*Math.floor(e.slidesToShow/2):0;if(e.swipeToSlide){var n,r=e.listRef,a=r.querySelectorAll&&r.querySelectorAll(".slick-slide")||[];if(Array.from(a).every((function(r){if(e.vertical){if(r.offsetTop+v(r)/2>-1*e.swipeLeft)return n=r,!1}else if(r.offsetLeft-t+m(r)/2>-1*e.swipeLeft)return n=r,!1;return!0})),!n)return 0;var i=!0===e.rtl?e.slideCount-e.currentSlide:e.currentSlide;return Math.abs(n.dataset.index-i)||1}return e.slidesToScroll};t.getSlideCount=w;var k=function(e,t){return t.reduce((function(t,n){return t&&e.hasOwnProperty(n)}),!0)?null:console.error("Keys Missing:",e)};t.checkSpecKeys=k;var S=function(e){var t,n;k(e,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var r=e.slideCount+2*e.slidesToShow;e.vertical?n=r*e.slideHeight:t=M(e)*e.slideWidth;var a={opacity:1,transition:"",WebkitTransition:""};if(e.useTransform){var i=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",s=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",u=e.vertical?"translateY("+e.left+"px)":"translateX("+e.left+"px)";a=o(o({},a),{},{WebkitTransform:i,transform:s,msTransform:u})}else e.vertical?a.top=e.left:a.left=e.left;return e.fade&&(a={opacity:1}),t&&(a.width=t),n&&(a.height=n),window&&!window.addEventListener&&window.attachEvent&&(e.vertical?a.marginTop=e.left+"px":a.marginLeft=e.left+"px"),a};t.getTrackCSS=S;var E=function(e){k(e,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var t=S(e);return e.useTransform?(t.WebkitTransition="-webkit-transform "+e.speed+"ms "+e.cssEase,t.transition="transform "+e.speed+"ms "+e.cssEase):e.vertical?t.transition="top "+e.speed+"ms "+e.cssEase:t.transition="left "+e.speed+"ms "+e.cssEase,t};t.getTrackAnimateCSS=E;var T=function(e){if(e.unslick)return 0;k(e,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var t,n,r=e.slideIndex,a=e.trackRef,i=e.infinite,o=e.centerMode,s=e.slideCount,u=e.slidesToShow,l=e.slidesToScroll,c=e.slideWidth,d=e.listWidth,h=e.variableWidth,p=e.slideHeight,f=e.fade,m=e.vertical;if(f||1===e.slideCount)return 0;var v=0;if(i?(v=-C(e),s%l!==0&&r+l>s&&(v=-(r>s?u-(r-s):s%l)),o&&(v+=parseInt(u/2))):(s%l!==0&&r+l>s&&(v=u-s%l),o&&(v=parseInt(u/2))),t=m?r*p*-1+v*p:r*c*-1+v*c,!0===h){var g,y=a&&a.node;if(g=r+C(e),t=(n=y&&y.childNodes[g])?-1*n.offsetLeft:0,!0===o){g=i?r+C(e):r,n=y&&y.children[g],t=0;for(var b=0;b<g;b++)t-=y&&y.children[b]&&y.children[b].offsetWidth;t-=parseInt(e.centerPadding),t+=n&&(d-n.offsetWidth)/2}}return t};t.getTrackLeft=T;var C=function(e){return e.unslick||!e.infinite?0:e.variableWidth?e.slideCount:e.slidesToShow+(e.centerMode?1:0)};t.getPreClones=C;var _=function(e){return e.unslick||!e.infinite?0:e.slideCount};t.getPostClones=_;var M=function(e){return 1===e.slideCount?1:C(e)+e.slideCount+_(e)};t.getTotalSlides=M;var I=function(e){return e.targetSlide>e.currentSlide?e.targetSlide>e.currentSlide+N(e)?"left":"right":e.targetSlide<e.currentSlide-A(e)?"right":"left"};t.siblingDirection=I;var N=function(e){var t=e.slidesToShow,n=e.centerMode,r=e.rtl,a=e.centerPadding;if(n){var i=(t-1)/2+1;return parseInt(a)>0&&(i+=1),r&&t%2===0&&(i+=1),i}return r?0:t-1};t.slidesOnRight=N;var A=function(e){var t=e.slidesToShow,n=e.centerMode,r=e.rtl,a=e.centerPadding;if(n){var i=(t-1)/2+1;return parseInt(a)>0&&(i+=1),r||t%2!==0||(i+=1),i}return r?t-1:0};t.slidesOnLeft=A;t.canUseDOM=function(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}},483:function(e,t,n){"use strict";var r=n(2839),a=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var l=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;a=d("react.element"),i=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),o=d("react.provider"),s=d("react.context"),u=d("react.forward_ref"),t.Suspense=d("react.suspense"),l=d("react.memo"),c=d("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=v.prototype;var b=y.prototype=new g;b.constructor=y,r(b,v.prototype),b.isPureReactComponent=!0;var x={current:null},w=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!k.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case i:u=!0}}if(u)return o=o(u=e),e=""===r?"."+C(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),_(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=r+C(s=e[l],l);u+=_(s,t,n,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=_(s=s.value,t,n,c=r+C(s,l++),o);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function M(e,t,n){if(null==e)return e;var r=[],a=0;return _(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function I(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function A(){var e=N.current;if(null===e)throw Error(p(321));return e}var R={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(p(143));return e}},t.Component=v,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var i=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:a,type:e.type,key:o,ref:s,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return A().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,n){return A().useReducer(e,t,n)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},9653:function(e,t,n){"use strict";e.exports=n(483)},3941:function(e,t,n){"use strict";n.r(t);var r=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var a=r[n];e.call(t,a[1],a[0])}},t}()}(),a="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,i="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),o="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var s=["top","right","bottom","left","width","height","size","weight"],u="undefined"!==typeof MutationObserver,l=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,a=0;function i(){n&&(n=!1,e()),r&&u()}function s(){o(i)}function u(){var e=Date.now();if(n){if(e-a<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);a=e}return u}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){a&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){a&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;s.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),c=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||i},h=y(0,0,0,0);function p(e){return parseFloat(e)||0}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+p(e["border-"+n+"-width"])}),0)}function m(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return h;var r=d(e).getComputedStyle(e),a=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var a=r[n],i=e["padding-"+a];t[a]=p(i)}return t}(r),i=a.left+a.right,o=a.top+a.bottom,s=p(r.width),u=p(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==t&&(s-=f(r,"left","right")+i),Math.round(u+o)!==n&&(u-=f(r,"top","bottom")+o)),!function(e){return e===d(e).document.documentElement}(e)){var l=Math.round(s+i)-t,c=Math.round(u+o)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(c)&&(u-=c)}return y(a.left,a.top,s,u)}var v="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"===typeof e.getBBox};function g(e){return a?v(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):m(e):h}function y(e,t,n,r){return{x:e,y:t,width:n,height:r}}var b=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=g(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),x=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(i.prototype);return c(o,{x:t,y:n,width:r,height:a,top:n,right:t+r,bottom:a+n,left:t}),o}(t);c(this,{target:e,contentRect:n})},w=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new x(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),k="undefined"!==typeof WeakMap?new WeakMap:new r,S=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=l.getInstance(),r=new w(t,n,this);k.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){S.prototype[e]=function(){var t;return(t=k.get(this))[e].apply(t,arguments)}}));var E="undefined"!==typeof i.ResizeObserver?i.ResizeObserver:S;t.default=E},2626:function(e){e.exports=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})).toLowerCase()}},7969:function(e,t,n){"use strict";n.r(t),t.default={}},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(4062);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}e.exports=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,n){var r=n(6116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),a=n(9617),i=n(4993);e.exports=function(e){var t=a();return function(){var n,a=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return i(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,n){var r=n(4062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5263:function(e,t,n){var r=n(8698).default;function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},2122:function(e,t,n){var r=n(8416);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,a=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(A){d=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),s=new M(r||[]);return o(i,"_invoke",{value:E(e,n,s)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}t.wrap=h;var f={};function m(){}function v(){}function g(){}var y={};d(y,u,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(I([])));x&&x!==n&&i.call(x,u)&&(y=x);var w=g.prototype=m.prototype=Object.create(y);function k(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,o,s,u){var l=p(e[a],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==r(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}})}function E(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return N()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=T(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=p(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function T(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var a=p(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,f;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:N}}function N(){return{value:void 0,done:!0}}return v.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=d(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,d(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},k(S.prototype),d(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new S(h(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(w),d(w,c,"Generator"),d(w,u,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,a=n(5036);e.exports=function(e){var t=a(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},3144:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9142);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(0,r.Z)(a.key),a)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function a(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},4578:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9611);function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.Z)(e,t)}},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},5987:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(3366);function a(e,t){if(null==e)return{};var n,a,i=(0,r.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,{Z:function(){return r}})},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3878);var a=n(181),i=n(5267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||(0,a.Z)(e,t)||(0,i.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var a=n(9199),i=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1002);function a(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==(0,r.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},7173:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(4187);function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var i=10,o=2;function s(e){return u(e,[])}function u(e,t){switch(a(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),a=function(e){var t=e[String(r.Z)];if("function"===typeof t)return t;if("function"===typeof e.inspect)return e.inspect}(e);if(void 0!==a){var s=a.call(e);if(s!==e)return"string"===typeof s?s:u(s,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>o)return"[Array]";for(var n=Math.min(i,e.length),r=e.length-n,a=[],s=0;s<n;++s)a.push(u(e[s],t));1===r?a.push("... 1 more item"):r>1&&a.push("... ".concat(r," more items"));return"["+a.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);if(0===n.length)return"{}";if(t.length>o)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"===typeof e.constructor){var n=e.constructor.name;if("string"===typeof n&&""!==n)return n}return t}(e)+"]";var r=n.map((function(n){return n+": "+u(e[n],t)}));return"{ "+r.join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}},4187:function(e,t){"use strict";var n="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;t.Z=n},3104:function(e,t,n){"use strict";n.d(t,{Ye:function(){return i},WU:function(){return o},UG:function(){return s}});var r=n(4187);function a(e){var t=e.prototype.toJSON;"function"===typeof t||function(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}(0),e.prototype.inspect=t,r.Z&&(e.prototype[r.Z]=t)}var i=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();a(i);var o=function(){function e(e,t,n,r,a,i,o){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=a,this.value=o,this.prev=i,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function s(e){return null!=e&&"string"===typeof e.kind}a(o)},7810:function(e,t,n){"use strict";function r(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,r=!0,a=0,i=null,o=0;o<e.length;++o)switch(e.charCodeAt(o)){case 13:10===e.charCodeAt(o+1)&&++o;case 10:n=!1,r=!0,a=0;break;case 9:case 32:++a;break;default:r&&!n&&(null===i||a<i)&&(i=a),r=!1}return null!==(t=i)&&void 0!==t?t:0}(e);if(0!==n)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var i=0;i<t.length&&a(t[i]);)++i;for(var o=t.length;o>i&&a(t[o-1]);)--o;return t.slice(i,o).join("\n")}function a(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"\t"!==e[t])return!1;return!0}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),a=" "===e[0]||"\t"===e[0],i='"'===e[e.length-1],o="\\"===e[e.length-1],s=!r||i||o||n,u="";return!s||r&&a||(u+="\n"+t),u+=t?e.replace(/\n/g,"\n"+t):e,s&&(u+="\n"),'"""'+u.replace(/"""/g,'\\"""')+'"""'}n.d(t,{LZ:function(){return i},W7:function(){return r}})},344:function(e,t,n){"use strict";n.d(t,{$_:function(){return o},Vn:function(){return s}});var r=n(7173),a=n(3104),i={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},o=Object.freeze({});function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,s=void 0,l=Array.isArray(e),c=[e],d=-1,h=[],p=void 0,f=void 0,m=void 0,v=[],g=[],y=e;do{var b=++d===c.length,x=b&&0!==h.length;if(b){if(f=0===g.length?void 0:v[v.length-1],p=m,m=g.pop(),x){if(l)p=p.slice();else{for(var w={},k=0,S=Object.keys(p);k<S.length;k++){var E=S[k];w[E]=p[E]}p=w}for(var T=0,C=0;C<h.length;C++){var _=h[C][0],M=h[C][1];l&&(_-=T),l&&null===M?(p.splice(_,1),T++):p[_]=M}}d=s.index,c=s.keys,h=s.edits,l=s.inArray,s=s.prev}else{if(f=m?l?d:c[d]:void 0,null===(p=m?m[f]:y)||void 0===p)continue;m&&v.push(f)}var I,N=void 0;if(!Array.isArray(p)){if(!(0,a.UG)(p))throw new Error("Invalid AST Node: ".concat((0,r.Z)(p),"."));var A=u(t,p.kind,b);if(A){if((N=A.call(t,p,f,m,v,g))===o)break;if(!1===N){if(!b){v.pop();continue}}else if(void 0!==N&&(h.push([f,N]),!b)){if(!(0,a.UG)(N)){v.pop();continue}p=N}}}if(void 0===N&&x&&h.push([f,p]),b)v.pop();else s={inArray:l,index:d,keys:c,edits:h,prev:s},c=(l=Array.isArray(p))?p:null!==(I=n[p.kind])&&void 0!==I?I:[],d=-1,h=[],m&&g.push(m),m=p}while(void 0!==s);return 0!==h.length&&(y=h[h.length-1][1]),y}function u(e,t,n){var r=e[t];if(r){if(!n&&"function"===typeof r)return r;var a=n?r.leave:r.enter;if("function"===typeof a)return a}else{var i=n?e.leave:e.enter;if(i){if("function"===typeof i)return i;var o=i[t];if("function"===typeof o)return o}}}},354:function(e,t,n){"use strict";function r(e,t,n){this.x=e,this.y=t,this.time=n||(new Date).getTime()}function a(e,t,n,r){this.startPoint=e,this.control1=t,this.control2=n,this.endPoint=r}function i(e,t){var n=this,r=t||{};this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.throttle="throttle"in r?r.throttle:16,this.minDistance="minDistance"in r?r.minDistance:5,this.throttle?this._strokeMoveUpdate=function(e,t,n){var r,a,i,o=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),o=null,i=e.apply(r,a),o||(r=a=null)};return function(){var l=Date.now();s||!1!==n.leading||(s=l);var c=t-(l-s);return r=this,a=arguments,c<=0||c>t?(o&&(clearTimeout(o),o=null),s=l,i=e.apply(r,a),o||(r=a=null)):o||!1===n.trailing||(o=setTimeout(u,c)),i}}(i.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=i.prototype._strokeUpdate,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onBegin=r.onBegin,this.onEnd=r.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(e){1===e.which&&(n._mouseButtonDown=!0,n._strokeBegin(e))},this._handleMouseMove=function(e){n._mouseButtonDown&&n._strokeMoveUpdate(e)},this._handleMouseUp=function(e){1===e.which&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(e))},this._handleTouchStart=function(e){if(1===e.targetTouches.length){var t=e.changedTouches[0];n._strokeBegin(t)}},this._handleTouchMove=function(e){e.preventDefault();var t=e.targetTouches[0];n._strokeMoveUpdate(t)},this._handleTouchEnd=function(e){e.target===n._canvas&&(e.preventDefault(),n._strokeEnd(e))},this.on()}n.r(t),r.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1},r.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},r.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time},a.prototype.length=function(){for(var e=0,t=void 0,n=void 0,r=0;r<=10;r+=1){var a=r/10,i=this._point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),o=this._point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(r>0){var s=i-t,u=o-n;e+=Math.sqrt(s*s+u*u)}t=i,n=o}return e},a.prototype._point=function(e,t,n,r,a){return t*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*r*(1-e)*e*e+a*e*e*e},i.prototype.clear=function(){var e=this._ctx,t=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0},i.prototype.fromDataURL=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Image,a=n.ratio||window.devicePixelRatio||1,i=n.width||this._canvas.width/a,o=n.height||this._canvas.height/a;this._reset(),r.src=e,r.onload=function(){t._ctx.drawImage(r,0,0,i,o)},this._isEmpty=!1},i.prototype.toDataURL=function(e){var t;if("image/svg+xml"===e)return this._toSVG();for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=this._canvas).toDataURL.apply(t,[e].concat(r))},i.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},i.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},i.prototype.isEmpty=function(){return this._isEmpty},i.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),"function"===typeof this.onBegin&&this.onBegin(e)},i.prototype._strokeUpdate=function(e){var t=e.clientX,n=e.clientY,r=this._createPoint(t,n),a=this._data[this._data.length-1],i=a&&a[a.length-1],o=i&&r.distanceTo(i)<this.minDistance;if(!i||!o){var s=this._addPoint(r),u=s.curve,l=s.widths;u&&l&&this._drawCurve(u,l.start,l.end),this._data[this._data.length-1].push({x:r.x,y:r.y,time:r.time,color:this.penColor})}},i.prototype._strokeEnd=function(e){var t=this.points.length>2,n=this.points[0];if(!t&&n&&this._drawDot(n),n){var r=this._data[this._data.length-1],a=r[r.length-1];n.equals(a)||r.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}"function"===typeof this.onEnd&&this.onEnd(e)},i.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},i.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},i.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},i.prototype._createPoint=function(e,t,n){var a=this._canvas.getBoundingClientRect();return new r(e-a.left,t-a.top,n||(new Date).getTime())},i.prototype._addPoint=function(e){var t=this.points;if(t.push(e),t.length>2){3===t.length&&t.unshift(t[0]);var n=this._calculateCurveControlPoints(t[0],t[1],t[2]).c2,r=this._calculateCurveControlPoints(t[1],t[2],t[3]).c1,i=new a(t[1],n,r,t[2]),o=this._calculateCurveWidths(i);return t.shift(),{curve:i,widths:o}}return{}},i.prototype._calculateCurveControlPoints=function(e,t,n){var a=e.x-t.x,i=e.y-t.y,o=t.x-n.x,s=t.y-n.y,u=(e.x+t.x)/2,l=(e.y+t.y)/2,c=(t.x+n.x)/2,d=(t.y+n.y)/2,h=Math.sqrt(a*a+i*i),p=Math.sqrt(o*o+s*s),f=p/(h+p),m=c+(u-c)*f,v=d+(l-d)*f,g=t.x-m,y=t.y-v;return{c1:new r(u+g,l+y),c2:new r(c+g,d+y)}},i.prototype._calculateCurveWidths=function(e){var t=e.startPoint,n=e.endPoint,r={start:null,end:null},a=this.velocityFilterWeight*n.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(a);return r.start=this._lastWidth,r.end=i,this._lastVelocity=a,this._lastWidth=i,r},i.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)},i.prototype._drawPoint=function(e,t,n){var r=this._ctx;r.moveTo(e,t),r.arc(e,t,n,0,2*Math.PI,!1),this._isEmpty=!1},i.prototype._drawCurve=function(e,t,n){var r=this._ctx,a=n-t,i=Math.floor(e.length());r.beginPath();for(var o=0;o<i;o+=1){var s=o/i,u=s*s,l=u*s,c=1-s,d=c*c,h=d*c,p=h*e.startPoint.x;p+=3*d*s*e.control1.x,p+=3*c*u*e.control2.x,p+=l*e.endPoint.x;var f=h*e.startPoint.y;f+=3*d*s*e.control1.y,f+=3*c*u*e.control2.y,f+=l*e.endPoint.y;var m=t+l*a;this._drawPoint(p,f,m)}r.closePath(),r.fill()},i.prototype._drawDot=function(e){var t=this._ctx,n="function"===typeof this.dotSize?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(e.x,e.y,n),t.closePath(),t.fill()},i.prototype._fromData=function(e,t,n){for(var a=0;a<e.length;a+=1){var i=e[a];if(i.length>1)for(var o=0;o<i.length;o+=1){var s=i[o],u=new r(s.x,s.y,s.time),l=s.color;if(0===o)this.penColor=l,this._reset(),this._addPoint(u);else if(o!==i.length-1){var c=this._addPoint(u),d=c.curve,h=c.widths;d&&h&&t(d,h,l)}}else this._reset(),n(i[0])}},i.prototype._toSVG=function(){var e=this,t=this._data,n=this._canvas,r=Math.max(window.devicePixelRatio||1,1),a=n.width/r,i=n.height/r,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"width",n.width),o.setAttributeNS(null,"height",n.height),this._fromData(t,(function(e,t,n){var r=document.createElement("path");if(!isNaN(e.control1.x)&&!isNaN(e.control1.y)&&!isNaN(e.control2.x)&&!isNaN(e.control2.y)){var a="M "+e.startPoint.x.toFixed(3)+","+e.startPoint.y.toFixed(3)+" C "+e.control1.x.toFixed(3)+","+e.control1.y.toFixed(3)+" "+e.control2.x.toFixed(3)+","+e.control2.y.toFixed(3)+" "+e.endPoint.x.toFixed(3)+","+e.endPoint.y.toFixed(3);r.setAttribute("d",a),r.setAttribute("stroke-width",(2.25*t.end).toFixed(3)),r.setAttribute("stroke",n),r.setAttribute("fill","none"),r.setAttribute("stroke-linecap","round"),o.appendChild(r)}}),(function(t){var n=document.createElement("circle"),r="function"===typeof e.dotSize?e.dotSize():e.dotSize;n.setAttribute("r",r),n.setAttribute("cx",t.x),n.setAttribute("cy",t.y),n.setAttribute("fill",t.color),o.appendChild(n)}));var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+a+" "+i+'" width="'+a+'" height="'+i+'">',u=o.innerHTML;if(void 0===u){var l=document.createElement("dummy"),c=o.childNodes;l.innerHTML="";for(var d=0;d<c.length;d+=1)l.appendChild(c[d].cloneNode(!0));u=l.innerHTML}return"data:image/svg+xml;base64,"+btoa(s+u+"</svg>")},i.prototype.fromData=function(e){var t=this;this.clear(),this._fromData(e,(function(e,n){return t._drawCurve(e,n.start,n.end)}),(function(e){return t._drawDot(e)})),this._data=e},i.prototype.toData=function(){return this._data},t.default=i}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(i,o),i}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".506da295.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="client:";n.l=function(r,a,i,o){if(e[r])e[r].push(a);else{var s,u;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[a];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=i);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var a,i,o=r[0],s=r[1],u=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)u(n)}for(t&&t(r);l<o.length;l++)i=o[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkclient=self.webpackChunkclient||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{Decoder:function(){return ac},Encoder:function(){return rc},PacketType:function(){return tc},protocol:function(){return nc}});var t={};n.r(t),n.d(t,{browserFiles:function(){return Yg},browserHTTPRequest:function(){return sy},concatenateArrayBuffers:function(){return Gv},copyModel:function(){return Dg},decodeWeights:function(){return Bv},encodeWeights:function(){return jv},fromMemory:function(){return dy},getLoadHandlers:function(){return rg},getModelArtifactsForJSON:function(){return Yv},getModelArtifactsInfoForJSON:function(){return Qv},getSaveHandlers:function(){return ng},http:function(){return oy},isHTTPScheme:function(){return ay},listModels:function(){return Ng},loadWeights:function(){return $g},moveModel:function(){return Pg},registerLoadRouter:function(){return tg},registerSaveRouter:function(){return eg},removeModel:function(){return Rg},weightsLoaderFactory:function(){return ty},withSaveHandler:function(){return hy}});var r={};n.r(r),n.d(r,{conv2d:function(){return Kk},depthwiseConv2d:function(){return $k},matMul:function(){return eS}});var a={};n.r(a),n.d(a,{json:function(){return uO}});var i={};n.r(i),n.d(i,{json:function(){return lO}});var o={};n.r(o),n.d(o,{json:function(){return cO}});var s={};n.r(s),n.d(s,{json:function(){return dO}});var u={};n.r(u),n.d(u,{json:function(){return hO}});var l={};n.r(l),n.d(l,{json:function(){return pO}});var c={};n.r(c),n.d(c,{json:function(){return fO}});var d={};n.r(d),n.d(d,{json:function(){return mO}});var h={};n.r(h),n.d(h,{json:function(){return vO}});var p={};n.r(p),n.d(p,{json:function(){return gO}});var f={};n.r(f),n.d(f,{json:function(){return yO}});var m={};n.r(m),n.d(m,{json:function(){return bO}});var v={};n.r(v),n.d(v,{json:function(){return xO}});var g={};n.r(g),n.d(g,{json:function(){return wO}});var y={};n.r(y),n.d(y,{json:function(){return kO}});var b={};n.r(b),n.d(b,{json:function(){return SO}});var x={};n.r(x),n.d(x,{json:function(){return EO}});var w={};n.r(w),n.d(w,{json:function(){return TO}});var k={};n.r(k),n.d(k,{json:function(){return CO}});var S={};n.r(S),n.d(S,{OP_SCOPE_SUFFIX:function(){return Av},abs:function(){return By},acos:function(){return Uy},acosh:function(){return Wy},add:function(){return Vy},addN:function(){return Zy},all:function(){return Hy},any:function(){return Gy},argMax:function(){return qy},argMin:function(){return Xy},asin:function(){return Yy},asinh:function(){return Ky},atan:function(){return Qy},atan2:function(){return Jy},atanh:function(){return $y},avgPool:function(){return mb},avgPool3d:function(){return vb},basicLSTMCell:function(){return Sb},batchNorm:function(){return Tb},batchNorm2d:function(){return Cb},batchNorm3d:function(){return _b},batchNorm4d:function(){return Mb},batchToSpaceND:function(){return Eb},bincount:function(){return Ib},booleanMaskAsync:function(){return Nk},broadcastArgs:function(){return Nb},broadcastTo:function(){return Ab},buffer:function(){return Wg},cast:function(){return Vg},ceil:function(){return Rb},clipByValue:function(){return Ob},clone:function(){return Zg},complex:function(){return Ov},concat:function(){return gb},concat1d:function(){return Db},concat2d:function(){return Lb},concat3d:function(){return Pb},concat4d:function(){return Fb},conv1d:function(){return zb},conv2d:function(){return jb},conv2dTranspose:function(){return Ub},conv3d:function(){return Wb},conv3dTranspose:function(){return Zb},cos:function(){return Hb},cosh:function(){return Gb},cosineWindow:function(){return Wk},cumsum:function(){return qb},denseBincount:function(){return Xb},depthToSpace:function(){return Yb},depthwiseConv2d:function(){return Kb},diag:function(){return Qb},dilation2d:function(){return Jb},div:function(){return ex},divNoNan:function(){return ax},dot:function(){return ix},dropout:function(){return Bk},einsum:function(){return ox},elu:function(){return sx},enclosingPowerOfTwo:function(){return Uk},equal:function(){return tx},erf:function(){return ux},exp:function(){return lx},expandDims:function(){return cx},expm1:function(){return dx},eye:function(){return px},fft:function(){return rk},fill:function(){return fx},floor:function(){return mx},floorDiv:function(){return $b},fused:function(){return r},gather:function(){return vx},gatherND:function(){return zk},greater:function(){return gx},greaterEqual:function(){return yx},ifft:function(){return ak},imag:function(){return bx},image:function(){return tE},inTopKAsync:function(){return Zk},irfft:function(){return ik},isFinite:function(){return xx},isInf:function(){return wx},isNaN:function(){return kx},leakyRelu:function(){return Sx},less:function(){return Ex},lessEqual:function(){return Tx},linalg:function(){return nE},linspace:function(){return Cx},localResponseNormalization:function(){return _x},log:function(){return Mx},log1p:function(){return Ix},logSigmoid:function(){return Rx},logSoftmax:function(){return Px},logSumExp:function(){return Zx},logicalAnd:function(){return Hx},logicalNot:function(){return Gx},logicalOr:function(){return qx},logicalXor:function(){return Xx},losses:function(){return rE},matMul:function(){return yb},max:function(){return Ox},maxPool:function(){return Yx},maxPool3d:function(){return Kx},maxPoolWithArgmax:function(){return Qx},maximum:function(){return Jx},mean:function(){return $x},meshgrid:function(){return nw},min:function(){return rw},minimum:function(){return aw},mirrorPad:function(){return iw},mod:function(){return ow},moments:function(){return uw},movingAverage:function(){return Dk},mul:function(){return bb},multiRNNCell:function(){return lw},multinomial:function(){return cw},neg:function(){return Nx},norm:function(){return Ok},notEqual:function(){return dw},oneHot:function(){return hw},ones:function(){return tw},onesLike:function(){return pw},op:function(){return Rv},outerProduct:function(){return fw},pad:function(){return mw},pad1d:function(){return vw},pad2d:function(){return gw},pad3d:function(){return yw},pad4d:function(){return bw},pool:function(){return ww},pow:function(){return kw},prelu:function(){return Sw},print:function(){return Hg},prod:function(){return Ew},rand:function(){return Tw},randomGamma:function(){return Nw},randomNormal:function(){return Aw},randomUniform:function(){return Rw},range:function(){return Ow},real:function(){return Dw},reciprocal:function(){return Lw},relu:function(){return Pw},relu6:function(){return Fw},reshape:function(){return fb},reverse:function(){return jw},reverse1d:function(){return zw},reverse2d:function(){return Bw},reverse3d:function(){return Uw},reverse4d:function(){return Ww},rfft:function(){return sk},round:function(){return Vw},rsqrt:function(){return Zw},scalar:function(){return jy},scatterND:function(){return Fk},selu:function(){return Hw},separableConv2d:function(){return Gw},setdiff1dAsync:function(){return Xw},sigmoid:function(){return xb},sign:function(){return Yw},signal:function(){return eE},sin:function(){return Kw},sinh:function(){return Qw},slice:function(){return wb},slice1d:function(){return Jw},slice2d:function(){return $w},slice3d:function(){return ek},slice4d:function(){return tk},softmax:function(){return nk},softplus:function(){return Ax},spaceToBatchND:function(){return xw},sparse:function(){return aE},sparseToDense:function(){return jk},spectral:function(){return $S},split:function(){return ok},sqrt:function(){return uk},square:function(){return sw},squaredDifference:function(){return lk},squeeze:function(){return ck},stack:function(){return dk},step:function(){return hk},stridedSlice:function(){return pk},string:function(){return iE},sub:function(){return Dx},sum:function(){return Lx},tan:function(){return fk},tanh:function(){return kb},tensor:function(){return Lv},tensor1d:function(){return mk},tensor2d:function(){return vk},tensor3d:function(){return vy},tensor4d:function(){return gk},tensor5d:function(){return yk},tensor6d:function(){return bk},tile:function(){return hx},topk:function(){return xk},transpose:function(){return Ak},truncatedNormal:function(){return wk},unique:function(){return kk},unsortedSegmentSum:function(){return Sk},unstack:function(){return Ek},variable:function(){return Tk},where:function(){return nx},whereAsync:function(){return Mk},zeros:function(){return ew},zerosLike:function(){return rx}});var E=n(2791),T=n.t(E,2),C=n(1250),_=n(3433);function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var I=n(3144),N=n(9611);function A(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,N.Z)(e,t)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(GK){return!1}}var D=n(1002),L=n(7326);function P(e,t){if(t&&("object"===(0,D.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,L.Z)(e)}function F(e){var t=O();return function(){var n,r=R(e);if(t){var a=R(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return P(this,n)}}function j(e,t,n){return j=O()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&(0,N.Z)(a,n.prototype),a},j.apply(null,arguments)}function z(e){var t="function"===typeof Map?new Map:void 0;return z=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return j(e,arguments,R(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,N.Z)(n,e)},z(e)}var B,U=n(9439),W=n(3878),V=n(9199),Z=n(181),H=n(5267);function G(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,Z.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(B||(B={}));var X,Y="popstate";function K(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Q(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(GK){}}}function J(e,t){return{usr:e.state,key:e.key,idx:t}}function $(e,t,n,r){return void 0===n&&(n=null),q({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?te(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function ee(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,i=e.hash,o=void 0===i?"":i;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function te(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ne(e,t,n,r){void 0===r&&(r={});var a=r,i=a.window,o=void 0===i?document.defaultView:i,s=a.v5Compat,u=void 0!==s&&s,l=o.history,c=B.Pop,d=null,h=p();function p(){return(l.state||{idx:null}).idx}function f(){c=B.Pop;var e=p(),t=null==e?null:e-h;h=e,d&&d({action:c,location:v.location,delta:t})}function m(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:ee(e);return K(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,l.replaceState(q({},l.state,{idx:h}),""));var v={get action(){return c},get location(){return e(o,l)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(Y,f),d=e,function(){o.removeEventListener(Y,f),d=null}},createHref:function(e){return t(o,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=B.Push;var r=$(v.location,e,t);n&&n(r,e);var a=J(r,h=p()+1),i=v.createHref(r);try{l.pushState(a,"",i)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;o.location.assign(i)}u&&d&&d({action:c,location:v.location,delta:1})},replace:function(e,t){c=B.Replace;var r=$(v.location,e,t);n&&n(r,e);var a=J(r,h=p()),i=v.createHref(r);l.replaceState(a,"",i),u&&d&&d({action:c,location:v.location,delta:0})},go:function(e){return l.go(e)}};return v}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(X||(X={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function re(e,t,n){void 0===n&&(n="/");var r=ge(("string"===typeof t?te(t):t).pathname||"/",n);if(null==r)return null;var a=ae(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var i=null,o=0;null==i&&o<a.length;++o)i=fe(a[o],ve(r));return i}function ae(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var a=function(e,a,i){var o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(K(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=we([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(K(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),ae(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:pe(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,i=G(ie(e.path));try{for(i.s();!(r=i.n()).done;){var o=r.value;a(e,t,o)}}catch(s){i.e(s)}finally{i.f()}}else a(e,t)})),t}function ie(e){var t=e.split("/");if(0===t.length)return[];var n,r=(n=t,(0,W.Z)(n)||(0,V.Z)(n)||(0,Z.Z)(n)||(0,H.Z)()),a=r[0],i=r.slice(1),o=a.endsWith("?"),s=a.replace(/\?$/,"");if(0===i.length)return o?[s,""]:[s];var u=ie(i.join("/")),l=[];return l.push.apply(l,(0,_.Z)(u.map((function(e){return""===e?s:[s,e].join("/")})))),o&&l.push.apply(l,(0,_.Z)(u)),l.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var oe=/^:\w+$/,se=3,ue=2,le=1,ce=10,de=-2,he=function(e){return"*"===e};function pe(e,t){var n=e.split("/"),r=n.length;return n.some(he)&&(r+=de),t&&(r+=ue),n.filter((function(e){return!he(e)})).reduce((function(e,t){return e+(oe.test(t)?se:""===t?le:ce)}),r)}function fe(e,t){for(var n=e.routesMeta,r={},a="/",i=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===a?t:t.slice(a.length)||"/",c=me({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var d=s.route;i.push({params:r,pathname:we([a,c.pathname]),pathnameBase:ke(we([a,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(a=we([a,c.pathnameBase]))}return i}function me(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Q("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");var i=new RegExp(a,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),r=(0,U.Z)(n,2),a=r[0],i=r[1],o=t.match(a);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),l=o.slice(1),c=i.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return Q(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{});return{params:c,pathname:s,pathnameBase:u,pattern:e}}function ve(e){try{return decodeURI(e)}catch(t){return Q(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function ge(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ye(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function be(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function xe(e,t,n,r){var a;void 0===r&&(r=!1),"string"===typeof e?a=te(e):(K(!(a=q({},e)).pathname||!a.pathname.includes("?"),ye("?","pathname","search",a)),K(!a.pathname||!a.pathname.includes("#"),ye("#","pathname","hash",a)),K(!a.search||!a.search.includes("#"),ye("#","search","hash",a)));var i,o=""===e||""===a.pathname,s=o?"/":a.pathname;if(r||null==s)i=n;else{var u=t.length-1;if(s.startsWith("..")){for(var l=s.split("/");".."===l[0];)l.shift(),u-=1;a.pathname=l.join("/")}i=u>=0?t[u]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?te(e):e,r=n.pathname,a=n.search,i=void 0===a?"":a,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:Se(i),hash:Ee(s)}}(a,i),d=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}var we=function(e){return e.join("/").replace(/\/\/+/g,"/")},ke=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},Se=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Ee=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Te=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n)}(z(Error));function Ce(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var _e=["post","put","patch","delete"],Me=(new Set(_e),["get"].concat(_e));new Set(Me),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ie.apply(this,arguments)}var Ne=E.createContext(null);var Ae=E.createContext(null);var Re=E.createContext(null);var Oe=E.createContext(null);var De=E.createContext(null);var Le=E.createContext({outlet:null,matches:[],isDataRoute:!1});var Pe=E.createContext(null);function Fe(){return null!=E.useContext(De)}function je(){return Fe()||K(!1),E.useContext(De).location}function ze(e){E.useContext(Oe).static||E.useLayoutEffect(e)}function Be(){return E.useContext(Le).isDataRoute?function(){var e=Qe(He.UseNavigateStable).router,t=$e(Ge.UseNavigateStable),n=E.useRef(!1);ze((function(){n.current=!0}));var r=E.useCallback((function(r,a){void 0===a&&(a={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Ie({fromRouteId:t},a)))}),[e,t]);return r}():function(){Fe()||K(!1);var e=E.useContext(Ne),t=E.useContext(Oe),n=t.basename,r=t.navigator,a=E.useContext(Le).matches,i=je().pathname,o=JSON.stringify(be(a).map((function(e){return e.pathnameBase}))),s=E.useRef(!1);ze((function(){s.current=!0}));var u=E.useCallback((function(t,a){if(void 0===a&&(a={}),s.current)if("number"!==typeof t){var u=xe(t,JSON.parse(o),i,"path"===a.relative);null==e&&"/"!==n&&(u.pathname="/"===u.pathname?n:we([n,u.pathname])),(a.replace?r.replace:r.push)(u,a.state,a)}else r.go(t)}),[n,r,o,i,e]);return u}()}function Ue(){var e=E.useContext(Le).matches,t=e[e.length-1];return t?t.params:{}}function We(e,t){var n=(void 0===t?{}:t).relative,r=E.useContext(Le).matches,a=je().pathname,i=JSON.stringify(be(r).map((function(e){return e.pathnameBase})));return E.useMemo((function(){return xe(e,JSON.parse(i),a,"path"===n)}),[e,i,a,n])}function Ve(e,t,n){Fe()||K(!1);var r,a=E.useContext(Oe).navigator,i=E.useContext(Le).matches,o=i[i.length-1],s=o?o.params:{},u=(o&&o.pathname,o?o.pathnameBase:"/"),l=(o&&o.route,je());if(t){var c,d="string"===typeof t?te(t):t;"/"===u||(null==(c=d.pathname)?void 0:c.startsWith(u))||K(!1),r=d}else r=l;var h=r.pathname||"/",p=re(e,{pathname:"/"===u?h:h.slice(u.length)||"/"});var f=Ke(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:we([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:we([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),i,n);return t&&f?E.createElement(De.Provider,{value:{location:Ie({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:B.Pop}},f):f}function Ze(){var e=function(){var e,t=E.useContext(Pe),n=Je(Ge.UseRouteError),r=$e(Ge.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=Ce(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),n?E.createElement("pre",{style:a},n):null,null)}var He,Ge,qe=E.createElement(Ze,null),Xe=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return(0,I.Z)(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?E.createElement(Le.Provider,{value:this.props.routeContext},E.createElement(Pe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(E.Component);function Ye(e){var t=e.routeContext,n=e.match,r=e.children,a=E.useContext(Ne);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(Le.Provider,{value:t},r)}function Ke(e,t,n){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var i=e,o=null==(r=n)?void 0:r.errors;if(null!=o){var s=i.findIndex((function(e){return e.route.id&&(null==o?void 0:o[e.route.id])}));s>=0||K(!1),i=i.slice(0,Math.min(i.length,s+1))}return i.reduceRight((function(e,r,a){var s=r.route.id?null==o?void 0:o[r.route.id]:null,u=null;n&&(u=r.route.errorElement||qe);var l=t.concat(i.slice(0,a+1)),c=function(){var t;return t=s?u:r.route.Component?E.createElement(r.route.Component,null):r.route.element?r.route.element:e,E.createElement(Ye,{match:r,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?E.createElement(Xe,{location:n.location,revalidation:n.revalidation,component:u,error:s,children:c(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):c()}),null)}function Qe(e){var t=E.useContext(Ne);return t||K(!1),t}function Je(e){var t=E.useContext(Ae);return t||K(!1),t}function $e(e){var t=function(e){var t=E.useContext(Le);return t||K(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||K(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(He||(He={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Ge||(Ge={}));var et;function tt(e){var t=e.to,n=e.replace,r=e.state,a=e.relative;Fe()||K(!1);var i=E.useContext(Le).matches,o=je().pathname,s=Be(),u=xe(t,be(i).map((function(e){return e.pathnameBase})),o,"path"===a),l=JSON.stringify(u);return E.useEffect((function(){return s(JSON.parse(l),{replace:n,state:r,relative:a})}),[s,l,a,n,r]),null}function nt(e){K(!1)}function rt(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,a=void 0===r?null:r,i=e.location,o=e.navigationType,s=void 0===o?B.Pop:o,u=e.navigator,l=e.static,c=void 0!==l&&l;Fe()&&K(!1);var d=n.replace(/^\/*/,"/"),h=E.useMemo((function(){return{basename:d,navigator:u,static:c}}),[d,u,c]);"string"===typeof i&&(i=te(i));var p=i,f=p.pathname,m=void 0===f?"/":f,v=p.search,g=void 0===v?"":v,y=p.hash,b=void 0===y?"":y,x=p.state,w=void 0===x?null:x,k=p.key,S=void 0===k?"default":k,T=E.useMemo((function(){var e=ge(m,d);return null==e?null:{location:{pathname:e,search:g,hash:b,state:w,key:S},navigationType:s}}),[d,m,g,b,w,S,s]);return null==T?null:E.createElement(Oe.Provider,{value:h},E.createElement(De.Provider,{children:a,value:T}))}function at(e){var t=e.children,n=e.location;return Ve(ot(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(et||(et={}));var it=new Promise((function(){}));E.Component;function ot(e,t){void 0===t&&(t=[]);var n=[];return E.Children.forEach(e,(function(e,r){if(E.isValidElement(e)){var a=[].concat((0,_.Z)(t),[r]);if(e.type!==E.Fragment){e.type!==nt&&K(!1),e.props.index&&e.props.children&&K(!1);var i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ot(e.props.children,a)),n.push(i)}else n.push.apply(n,ot(e.props.children,a))}})),n}function st(){return st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},st.apply(this,arguments)}function ut(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var lt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var ct="startTransition";function dt(e){var t,n=e.basename,r=e.children,a=e.window,i=E.useRef();null==i.current&&(i.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),ne((function(e,t){var n=e.location;return $("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:ee(t)}),null,t)));var o=i.current,s=E.useState({action:o.action,location:o.location}),u=(0,U.Z)(s,2),l=u[0],c=u[1],d=E.useCallback((function(e){ct in T?T[ct]((function(){return c(e)})):c(e)}),[c]);return E.useLayoutEffect((function(){return o.listen(d)}),[o,d]),E.createElement(rt,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:o})}var ht="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,pt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ft=E.forwardRef((function(e,t){var n,r=e.onClick,a=e.relative,i=e.reloadDocument,o=e.replace,s=e.state,u=e.target,l=e.to,c=e.preventScrollReset,d=ut(e,lt),h=E.useContext(Oe).basename,p=!1;if("string"===typeof l&&pt.test(l)&&(n=l,ht))try{var f=new URL(window.location.href),m=l.startsWith("//")?new URL(f.protocol+l):new URL(l),v=ge(m.pathname,h);m.origin===f.origin&&null!=v?l=v+m.search+m.hash:p=!0}catch(GK){}var g=function(e,t){var n=(void 0===t?{}:t).relative;Fe()||K(!1);var r=E.useContext(Oe),a=r.basename,i=r.navigator,o=We(e,{relative:n}),s=o.hash,u=o.pathname,l=o.search,c=u;return"/"!==a&&(c="/"===u?a:we([a,u])),i.createHref({pathname:c,search:l,hash:s})}(l,{relative:a}),y=function(e,t){var n=void 0===t?{}:t,r=n.target,a=n.replace,i=n.state,o=n.preventScrollReset,s=n.relative,u=Be(),l=je(),c=We(e,{relative:s});return E.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==a?a:ee(l)===ee(c);u(e,{replace:n,state:i,preventScrollReset:o,relative:s})}}),[l,u,c,a,i,r,e,o,s])}(l,{replace:o,state:s,target:u,preventScrollReset:c,relative:a});return E.createElement("a",st({},d,{href:n||g,onClick:p||i?r:function(e){r&&r(e),e.defaultPrevented||y(e)},ref:t,target:u}))}));var mt,vt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(mt||(mt={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(vt||(vt={}));var gt=n(6212),yt=n(5920),bt=n(6049),xt=n(9388),wt=n(5942),kt=n(3134),St=n.n(kt);function Et(e){return new wt.i((function(t,n){return new(St())((function(r){var a,i,o;try{a=n(t).subscribe({next:function(a){a.errors&&(o=e({graphQLErrors:a.errors,response:a,operation:t,forward:n}))?i=o.subscribe({next:r.next.bind(r),error:r.error.bind(r),complete:r.complete.bind(r)}):r.next(a)},error:function(a){(o=e({operation:t,networkError:a,graphQLErrors:a&&a.result&&a.result.errors,forward:n}))?i=o.subscribe({next:r.next.bind(r),error:r.error.bind(r),complete:r.complete.bind(r)}):r.error(a)},complete:function(){o||r.complete.bind(r)()}})}catch(GK){e({networkError:GK,operation:t,forward:n}),r.error(GK)}return function(){a&&a.unsubscribe(),i&&a.unsubscribe()}}))}))}!function(e){function t(t){var n=e.call(this)||this;return n.link=Et(t),n}(0,xt.ZT)(t,e),t.prototype.request=function(e,t){return this.link.request(e,t)}}(wt.i);var Tt=n(1842),Ct=n.n(Tt),_t=n(7462),Mt=n(423),It=n(8444),Nt=n(9316);var At=function(e){var t=e.children,n=e.theme,r=(0,It.Z)(),a=E.useMemo((function(){var e=null===r?n:function(e,t){return"function"===typeof t?t(e):(0,_t.Z)({},e,t)}(r,n);return null!=e&&(e[Nt.Z]=null!==r),e}),[n,r]);return E.createElement(Mt.Z.Provider,{value:a},t)},Rt=n(8317),Ot={WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box"},Dt=function(e){return(0,_t.Z)({color:e.palette.text.primary},e.typography.body2,{backgroundColor:e.palette.background.default,"@media print":{backgroundColor:e.palette.common.white}})};var Lt=(0,Rt.Z)((function(e){return{"@global":{html:Ot,"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,_t.Z)({margin:0},Dt(e),{"&::backdrop":{backgroundColor:e.palette.background.default}})}}}),{name:"MuiCssBaseline"})((function(e){var t=e.children,n=void 0===t?null:t;return e.classes,E.createElement(E.Fragment,null,n)})),Pt=n(4942),Ft=n(5628),jt=n(3401),zt=n(663);var Bt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,jt.Z)(e,(0,_t.Z)({defaultTheme:zt.Z},t))},Ut=n(6909),Wt=(0,Ft.Z)({palette:{background:{default:"#fff"},primary:{light:"#DE0000",main:"#920000",dark:"#780000"}},overrides:{MuiCssBaseline:{"@global":{body:{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPositionX:"center",backgroundPositionY:"center",backgroundAttachment:"fixed","& ::-webkit-scrollbar":{width:"0.4em"},"& ::-webkit-scrollbar-track":{boxShadow:"inset 0 0 6px rgba(0,0,0,0.00)",webkitBoxShadow:"inset 0 0 6px rgba(0,0,0,0.00)"},"& ::-webkit-scrollbar-thumb":{borderRadius:10,backgroundColor:"rgb(160,160,160)"}}}},MuiOutlinedInput:{root:{borderRadius:20},input:{padding:10}},MuiInputLabel:{outlined:{transform:"translate(14px, 12px) scale(1)"}},MuiButton:{root:{}},MuiListItemIcon:{root:{justifyContent:"center"}}}},Ut._Y);window.matchMedia("(min-width: 660px)").matches;var Vt=Bt((function(e){return{pageContainer:(0,Pt.Z)({},e.breakpoints.down("sm"),{padding:0}),backDrop:{zIndex:e.zIndex.drawer-1,marginTop:90,color:"#fff"}}})),Zt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:window.screen.width<500?"80%":"30%",bgcolor:"background.paper",border:"2px solid #000",borderRadius:20,boxShadow:24,p:4},Ht={fontFamily:"Raleway",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",height:"90%",bgcolor:"background.paper",border:"2px solid #000",borderRadius:20,boxShadow:24,p:4,overflowY:"auto"},Gt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",height:"100%",bgcolor:"background.paper",border:"2px solid #000",borderRadius:20,boxShadow:24,p:4},qt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",height:"100%",bgcolor:"#414646",border:"2px solid #000",borderRadius:20,boxShadow:24,p:4},Xt=function(e){return"superAdmin"===e?"Super Administrador":"admin"===e?"Administrador":"sapExecutive"===e?"Ejecutivo SAP":"inspectionWorker"===e?"Operario de Inspecci\xf3n":"maintenceOperator"===e?"Operario de Mantenci\xf3n":"shiftManager"===e?"Jefe de turno - Inspecci\xf3n y Mantenci\xf3n":"chiefMachinery"===e?"Jefe de maquinaria":"observer"===e?"Observador":void 0},Yt={storageURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.URL_STORAGE||"https://icvmantencion.blob.core.windows.net/plataforma-mantencion/",version:"versi\xf3n 2.9.4",storageApi:{account:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.AZURE_ACCOUNT,accountKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.TOKEN_SAS_BLOB,url:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.STORAGE_URL,urlWithKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.URL_SAS_BLOB,accessKeys:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.ACCESS_KEYS}},Kt=function(e){if(e){var t,n=new Date(e).getDay();1==n?t="Lunes":2==n?t="Martes":3==n?t="Miercoles":4==n?t="Jueves":5==n?t="Viernes":6==n?t="Sabado":7==n&&(t="Domingo");var r,a=new Date(e).getUTCDate(),i=new Date(e).getMonth();return 0==i?r="Enero":1==i?r="Febrero":2==i?r="Marzo":3==i?r="Abril":4==i?r="Mayo":5==i?r="Junio":6==i?r="Julio":7==i?r="Agosto":8==i?r="Septiembre":9==i?r="Octubre":10==i?r="Noviembre":11==i&&(r="Diciembre"),(t+" "+a+" DE "+r).toUpperCase()}return"Sin informaci\xf3n".toUpperCase()},Qt=function(e){var t=new Date(e).getUTCDate(),n=new Date(e).getMonth()+1,r=new Date(e).getFullYear();return n<10&&(n="0"+n),t<10&&(t="0"+t),e?t+"/"+n+"/"+r:"No informado"},Jt=function(e){if(e){console.log(e);var t=new Date(e).toISOString();console.log("Fecha!: ",t);var n=new Date(t);return n.toLocaleDateString("es-ES")+" "+n.toLocaleTimeString("es-ES")}return"Sin informaci\xf3n"},$t=n(4569),en=n.n($t),tn=function(e,t){var n={user:{email:e,password:t}};return en().post("/auth/login",n)},nn=function(e,t){var n={user:{rut:e,password:t}};return en().post("/auth/loginRut",n)},rn=function(e){var t={email:e};return en().post("/auth/forgotpassword",t)},an=function(e,t){var n={password:e};return en().post("/auth/resetpassword/".concat(t),n)},on=function(){return en().get("/machines/getMachinesOfProject")},sn=function(){return en().get("/machines/readAllMachines")},un=function(e){var t={siteId:e};return en().post("/machines/getMachineBySiteId",t)},ln=function(e){var t={machine:e};return en().post("/machines/saveMachineDataById",t)},cn=function(){return en().get("/roles/getRoles")},dn=function(e,t){var n={userData:e,password:t};return en().post("/users/createUser",n)},hn=function(e,t){var n={userData:e,id:t};return en().post("/users/editUser",n)},pn=function(e,t){return en().post("/users/getUsers",{admin:e,isTest:t})},fn=function(e){var t={id:e};return en().post("/users/getUser",t)},mn=function(e){var t={id:e};return en().post("/users/deleteUser",t)},vn=function(e){var t={role:e};return en().post("/users/findByRole",t)},gn=function(e){var t={report:e};return en().post("/reports/createReport",t)},yn=function(e){var t={report:e};return en().post("/reports/editReport",t)},bn=function(e){var t={report:e};return en().post("/reports/editReportById",t)},xn=function(e){var t={id:e};return en().post("/reports/deleteReport",t)},wn=function(){return en().get("/reports/getAllReports")},kn=function(e){var t={site:e};return en().post("/reports/getAllReportsbySite",t)},Sn=function(e,t){var n={userId:e,site:t};return en().post("/reports/findMyAssignations",n)},En=function(e){var t={equid:e};return en().post("/reports/getReportByEquid",t)},Tn=function(){return en().get("/reports/getTotalReportsToIndex")},Cn=function(e){var t={reportData:e};return en().post("/execution-report/getExecutionReportById",t)},_n=function(e){var t={reportData:e};return en().post("/execution-report/saveExecutionReport",t)},Mn=function(e,t,n){var r=new FormData;r.append("image",e,e.name),r.append("path",t),r.append("containerName",n);return en().post("/azure-storage/uploadImage",r,{headers:{"Content-Type":"multipart/form-data"}})},In=function(e){var t={_id:e};return en().post("/internalMessagesData/get-messages-by-user",t)},Nn=function(){return en().get("/internalMessagesData/getAllMessages")},An=function(e){var t={message:e};return en().post("/internalMessagesData/sendMessage",t)},Rn=function(e){var t={_id:e};return en().post("/internalMessagesData/removeMessage",t)},On=function(e){return en().post("/pdf-maker/createPdfDoc",{reportData:e})},Dn=function(e){var t={id:e};return en().post("/notifications/getNotificationsById",t)},Ln=function(e){var t={_id:e,state:!0};return en().post("/notifications/actualiceNotificationState",t)},Pn=function(){return en().get("/patterns/getPatterns")},Fn=function(e){return en().post("/patterns/savePattern",e)},jn=function(){return en().get("/patterns/getPatternDetails")},zn=function(e){return en().post("/sites/getSiteById",{_id:e})},Bn=function(){return en().get("/sites/getSites")},Un=n(5827),Wn=n.n(Un),Vn=function(e){return new Promise((function(t){new(Wn())(e,{quality:.5,success:function(e){var n=new FileReader;n.onload=function(){t(n.result)},n.readAsDataURL(e)}})}))},Zn=function(e){return new Promise((function(t){var n=e.transaction(["Machines"],"readonly").objectStore("Machines");n.openCursor().onsuccess=function(e){e.target.result;n.getAll().onsuccess=function(e){t(e.target.result)}}}))},Hn={initDbMachines:function(){var e,t=window.indexedDB.open("Trucks",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("Machines",{keyPath:"id"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},agregar:function(e,t){t.transaction(["Machines"],"readwrite").objectStore("Machines").add(e).onsuccess=function(){}},obtener:function(e,t){t.transaction(["Machines"],"readonly").objectStore("Machines").get(e).onsuccess=function(e){}},actualizar:function(e,t){return new Promise((function(n){try{t.transaction(["Machines"],"readwrite").objectStore("Machines").put(e).onsuccess=function(){Zn(t).then((function(e){})),n(!0)}}catch(r){n(!1)}}))},eliminar:function(e,t){t.transaction(["Machines"],"readwrite").objectStore("Machines").delete(e).onsuccess=function(){Zn()}},consultar:Zn},Gn=function(e){var t=e.transaction(["pautas"],"readonly").objectStore("pautas"),n=t.openCursor();return new Promise((function(e){n.onsuccess=function(n){n.target.result;t.getAll().onsuccess=function(t){e(t.target.result)}}}))},qn={initDbPMs:function(){var e,t=window.indexedDB.open("Pautas",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("pautas",{keyPath:"id"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},agregar:function(e,t){t.transaction(["pautas"],"readwrite").objectStore("pautas").add(e)},obtener:function(e,t){return new Promise((function(n){t.transaction(["pautas"],"readonly").objectStore("pautas").get(Number(e)).onsuccess=function(e){n(e.target.result)}}))},actualizar:function(e,t){return new Promise((function(n){try{t.transaction(["pautas"],"readwrite").objectStore("pautas").put(e).onsuccess=function(){n(!0)}}catch(r){n(!1)}}))},eliminar:function(e,t){t.transaction(["pautas"],"readwrite").objectStore("pautas").delete(e).onsuccess=function(){Gn()}},consultar:Gn,consultarPorDato:function(e,t){return new Promise((function(e){t.transaction(["pautas"],"readonly").objectStore("pautas").openCursor().onsuccess=function(e){}}))}},Xn=function(e){var t=e.transaction(["Obras"],"readonly").objectStore("Obras"),n=t.openCursor();return new Promise((function(e){n.onsuccess=function(n){n.target.result;t.getAll().onsuccess=function(t){e(t.target.result)}}}))},Yn={initDbObras:function(){var e,t=window.indexedDB.open("Sites",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("Obras",{keyPath:"id"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},agregar:function(e,t){t.transaction(["Obras"],"readwrite").objectStore("Obras").add(e)},obtener:function(e,t){t.transaction(["Obras"],"readonly").objectStore("Obras").get(e).onsuccess=function(e){}},actualizar:function(e,t){return new Promise((function(n){try{t.transaction(["Obras"],"readwrite").objectStore("Obras").put(e).onsuccess=function(){n(!0)}}catch(r){n(!1)}}))},eliminar:function(e,t){t.transaction(["Obras"],"readwrite").objectStore("Obras").delete(e).onsuccess=function(){Xn()}},consultar:Xn};function Kn(){Kn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(M){u=function(e,t,n){return e[t]=n}}function l(e,t,n,a){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),s=new T(a||[]);return r(o,"_invoke",{value:w(e,n,s)}),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(M){return{type:"throw",arg:M}}}e.wrap=l;var d={};function h(){}function p(){}function f(){}var m={};u(m,i,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(C([])));g&&g!==t&&n.call(g,i)&&(m=g);var y=f.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(r,i,o,s){var u=c(e[r],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==(0,D.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,o,s)}),(function(e){a("throw",e,o,s)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return a("throw",e,o,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return _()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function k(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var a=c(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return p.prototype=f,r(y,"constructor",{value:f,configurable:!0}),r(f,"constructor",{value:p,configurable:!0}),p.displayName=u(f,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(x.prototype),u(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(l(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(y),u(y,s,"Generator"),u(y,i,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Qn(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function Jn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Qn(i,r,a,o,s,"next",e)}function s(e){Qn(i,r,a,o,s,"throw",e)}o(void 0)}))}}var $n=function(){var e,t=window.indexedDB.open("3Ds",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){var r=(e=t.target.result).createObjectStore("3dFilesList",{keyPath:"id"});r.createIndex("model","model",{unique:!1}),r.createIndex("name","name",{unique:!1}),r.createIndex("type","type",{unique:!1}),r.createIndex("brand","brand",{unique:!1}),r.createIndex("nameModel","nameModel",{unique:!1}),r.transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},er=function(e,t){return new Promise((function(n){t.transaction(["3dFilesList"],"readonly").objectStore("3dFilesList").index("nameModel").get(e).onsuccess=function(e){n(e.target.result)}}))},tr=function(e){return new Promise((function(t){var n=e.transaction(["Equips"],"readonly").objectStore("Equips");n.openCursor().onsuccess=function(e){e.target.result;n.getAll().onsuccess=function(e){var n=new Array;n=e.target.result,t(n)}}}))},nr={initDbMachines:function(){var e,t=window.indexedDB.open("Machines",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("Equips",{keyPath:"id"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},agregar:function(e,t){t.transaction(["Equips"],"readwrite").objectStore("Equips").add(e).onsuccess=function(){}},obtener:function(e,t){t.transaction(["Equips"],"readonly").objectStore("Equips").get(e).onsuccess=function(e){}},actualizar:function(e,t){return new Promise((function(n){try{t.transaction(["Equips"],"readwrite").objectStore("Equips").put(e).onsuccess=function(){n(!0)}}catch(r){n(!1)}}))},eliminar:function(e,t){t.transaction(["Equips"],"readwrite").objectStore("Equips").delete(e).onsuccess=function(){tr()}},consultar:tr},rr=function(){var e,t=window.indexedDB.open("Documentation",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("Reports",{keyPath:"idIndex"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},ar=function(e,t){return new Promise((function(n){try{var r=t.transaction(["Reports"],"readwrite").objectStore("Reports").put(e);r.onsuccess=function(){n(!0)},r.onerror=function(e){console.log(e),n(!0)}}catch(a){console.log(a),n(!1)}}))},ir=function(e,t){return new Promise((function(n){var r=t.transaction(["Reports"],"readwrite").objectStore("Reports").delete(e);r.onsuccess=function(){n(!0)},r.onerror=function(){n(!1)}}))},or=function(e){var t=e.transaction(["Reports"],"readonly").objectStore("Reports"),n=t.openCursor();return new Promise((function(e){n.onsuccess=function(n){n.target.result;t.getAll().onsuccess=function(t){e(t.target.result)}}}))},sr=function(){var e,t=window.indexedDB.open("Executions",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("Reports",{keyPath:"_id"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},ur=function(e,t){return new Promise((function(n){try{var r=t.transaction(["Reports"],"readwrite").objectStore("Reports").put(e);r.onsuccess=function(){n(!0)},r.onerror=function(){n(!1)}}catch(a){n(a)}}))},lr=function(e){return new Promise((function(t){var n=e.transaction(["Reports"],"readonly").objectStore("Reports");n.openCursor().onsuccess=function(e){e.target.result;n.getAll().onsuccess=function(e){var n=new Array;n=e.target.result,t(n)}}}))},cr=function(e){var t=e.transaction(["MachinesPartsList"],"readonly").objectStore("MachinesPartsList"),n=t.openCursor();return new Promise((function(e){n.onsuccess=function(n){n.target.result;t.getAll().onsuccess=function(t){e(t.target.result)}}}))},dr={initDb:function(){var e,t=window.indexedDB.open("MachinesParts",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("MachinesPartsList",{keyPath:"id"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},agregar:function(e,t){return new Promise((function(n){var r=t.transaction(["MachinesPartsList"],"readwrite").objectStore("MachinesPartsList").add(e);r.onsuccess=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(t);case 2:e.sent&&n(!0);case 4:case"end":return e.stop()}}),e)}))),r.onerror=function(e){n(!1)}}))},obtener:function(e,t){return new Promise((function(n){t.transaction(["MachinesPartsList"],"readonly").objectStore("MachinesPartsList").get(Number(e)).onsuccess=function(e){n(e.target.result)}}))},actualizar:function(e,t){return new Promise((function(n){try{t.transaction(["MachinesPartsList"],"readwrite").objectStore("MachinesPartsList").put(e).onsuccess=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(!0);case 1:case"end":return e.stop()}}),e)})))}catch(r){n(!1)}}))},eliminar:function(e,t){t.transaction(["MachinesPartsList"],"readwrite").objectStore("MachinesPartsList").delete(e).onsuccess=function(){cr()}},consultar:cr,buscarPorNombreModelo:function(e,t){return new Promise((function(n){t.transaction(["MachinesPartsList"],"readonly").objectStore("MachinesPartsList").index("nameModel").get(e).onsuccess=function(e){n(e.target.result)}}))}},hr=function(e){var t=e.transaction(["myUser"],"readonly").objectStore("myUser"),n=t.openCursor();return new Promise((function(e){n.onsuccess=function(n){n.target.result;t.getAll().onsuccess=function(t){e(t.target.result)}}}))},pr={initDb:function(){var e,t=window.indexedDB.open("User",1);return new Promise((function(n){t.onsuccess=function(){e=t.result,n({message:"Base de datos abierta",database:e,state:"abierta"})},t.onupgradeneeded=function(t){(e=t.target.result).createObjectStore("myUser",{keyPath:"_id"}).transaction.oncomplete=function(t){n({message:"Base de datos creada / actualizada",database:e,state:"actualizada"})}},t.onerror=function(e){n(e)}}))},agregar:function(e,t){t.transaction(["myUser"],"readwrite").objectStore("myUser").add(e)},obtener:function(e,t){return new Promise((function(n){t.transaction(["myUser"],"readonly").objectStore("myUser").get(Number(e)).onsuccess=function(e){n(e.target.result)}}))},actualizar:function(e,t){return new Promise((function(n){try{t.transaction(["myUser"],"readwrite").objectStore("myUser").put(e).onsuccess=function(){n(!0)}}catch(r){n(!1)}}))},eliminar:function(e,t){t.transaction(["myUser"],"readwrite").objectStore("myUser").delete(e).onsuccess=function(){hr()}},consultar:hr,consultarPorDato:function(e,t){return new Promise((function(e){t.transaction(["myUser"],"readonly").objectStore("myUser").openCursor().onsuccess=function(e){}}))}},fr=function(e){return new Promise(e?function(){var t=Jn(Kn().mark((function t(n){var r;return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fn(e);case 2:(r=t.sent).data?n("".concat(r.data.name," ").concat(r.data.lastName)):n("Test Name");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}():function(e){e("Sin informaci\xf3n")})},mr=function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Jn(Kn().mark((function e(n){var r,a,i,o,s,u,l,c,d;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn("admin");case 2:return r=e.sent,e.next=5,vn("sapExecutive");case 5:return a=e.sent,e.next=8,vn("shiftManager");case 8:return i=e.sent,e.next=11,vn("chiefMachinery");case 11:o=e.sent,s=r.data,u=a.data,l=i.data,c=o.data,d=[],s.forEach((function(e,r){d.push(e.email),r==s.length-1&&u.forEach((function(e,r){d.push(e.email),r==u.length-1&&(1==t?l.forEach((function(e,t){d.push(e.email),t==l.length-1&&c.forEach((function(e,t){d.push(e.email),t==c.length-1&&n(d.toString())}))})):2==t?l.forEach((function(e,t){d.push(e.email),t==l.length-1&&n(d.toString())})):n(d.toString()))}))}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vr=function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Jn(Kn().mark((function e(n){var r,a,i,o,s,u,l,c,d;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn("admin");case 2:return r=e.sent,e.next=5,vn("sapExecutive");case 5:return a=e.sent,e.next=8,vn("shiftManager");case 8:return i=e.sent,e.next=11,vn("chiefMachinery");case 11:o=e.sent,s=new Array,u=new Array,s=r.data,u=a.data,l=i.data,c=o.data,d=new Array,d=[],s.forEach((function(e,r){d.push(e._id),r==s.length-1&&u.forEach((function(e,r){d.push(e._id),r==u.length-1&&(1==t?l.forEach((function(e,t){d.push(e._id),t==l.length-1&&(c.forEach((function(e,t){d.push(e._id)})),t==c.length-1&&n(d))})):2==t?l.forEach((function(e,t){d.push(e._id),t==l.length-1&&n(d)})):n(d))}))}));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new String;return"Neum\xe1ticos"===e?"Neumaticos":"Chassis"===e?"Chasis":"Direcci\xf3n"===e?"Sistema_direccion":"Sistema Neum\xe1tico"===e?"Sistema_neumatico":"Hidr\xe1ulico"===e?"Sistema_hidraulico":"Suspensi\xf3n"===e?"Suspension":"Mazas"===e?"Maza":"Transmisi\xf3n"===e||"Ejes"===e?"Transmision":"Mando Final"===e?"Mando_final":"Mando de Giro"===e?"Mando_de_giro":"Rodado"===e?"Sistema_rodado":"El\xe9ctrico"===e?"Electrico":"Implementos"===e?"Implemento":e};function yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(n),!0).forEach((function(t){(0,Pt.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xr=n(184),wr={prefix:"fas",iconName:"arrow-circle-left",icon:[512,512,[],"f0a8","M256 504C119 504 8 393 8 256S119 8 256 8s248 111 248 248-111 248-248 248zm28.9-143.6L209.4 288H392c13.3 0 24-10.7 24-24v-16c0-13.3-10.7-24-24-24H209.4l75.5-72.4c9.7-9.3 9.9-24.8.4-34.3l-11-10.9c-9.4-9.4-24.6-9.4-33.9 0L107.7 239c-9.4 9.4-9.4 24.6 0 33.9l132.7 132.7c9.4 9.4 24.6 9.4 33.9 0l11-10.9c9.5-9.5 9.3-25-.4-34.3z"]},kr={prefix:"fas",iconName:"arrow-right",icon:[448,512,[],"f061","M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"]},Sr={prefix:"fas",iconName:"arrow-up",icon:[448,512,[],"f062","M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"]},Er={prefix:"fas",iconName:"book",icon:[448,512,[],"f02d","M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"]},Tr={prefix:"fas",iconName:"camera",icon:[512,512,[],"f030","M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"]},Cr={prefix:"fas",iconName:"circle",icon:[512,512,[],"f111","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"]},_r={prefix:"fas",iconName:"clipboard-list",icon:[384,512,[],"f46d","M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"]},Mr={prefix:"fas",iconName:"clock",icon:[512,512,[],"f017","M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"]},Ir={prefix:"fas",iconName:"comment",icon:[512,512,[],"f075","M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"]},Nr={prefix:"fas",iconName:"comment-dots",icon:[512,512,[],"f4ad","M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"]},Ar={prefix:"fas",iconName:"cube",icon:[512,512,[],"f1b2","M239.1 6.3l-208 78c-18.7 7-31.1 25-31.1 45v225.1c0 18.2 10.3 34.8 26.5 42.9l208 104c13.5 6.8 29.4 6.8 42.9 0l208-104c16.3-8.1 26.5-24.8 26.5-42.9V129.3c0-20-12.4-37.9-31.1-44.9l-208-78C262 2.2 250 2.2 239.1 6.3zM256 68.4l192 72v1.1l-192 78-192-78v-1.1l192-72zm32 356V275.5l160-65v133.9l-160 80z"]},Rr={prefix:"fas",iconName:"eraser",icon:[512,512,[],"f12d","M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"]},Or={prefix:"fas",iconName:"eye",icon:[576,512,[],"f06e","M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"]},Dr={prefix:"fas",iconName:"eye-slash",icon:[640,512,[],"f070","M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"]},Lr={prefix:"fas",iconName:"home",icon:[576,512,[],"f015","M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"]},Pr={prefix:"fas",iconName:"image",icon:[512,512,[],"f03e","M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"]},Fr={prefix:"fas",iconName:"info-circle",icon:[512,512,[],"f05a","M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"]},jr={prefix:"fas",iconName:"list-alt",icon:[512,512,[],"f022","M464 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zM128 120c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm288-136v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12z"]},zr={prefix:"fas",iconName:"list-ol",icon:[512,512,[],"f0cb","M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"]},Br={prefix:"fas",iconName:"map-marker-alt",icon:[384,512,[],"f3c5","M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"]},Ur={prefix:"fas",iconName:"paper-plane",icon:[512,512,[],"f1d8","M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"]},Wr={prefix:"fas",iconName:"paperclip",icon:[448,512,[],"f0c6","M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z"]},Vr={prefix:"fas",iconName:"pen",icon:[512,512,[],"f304","M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"]},Zr={prefix:"fas",iconName:"robot",icon:[640,512,[],"f544","M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"]},Hr={prefix:"fas",iconName:"save",icon:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"]},Gr={prefix:"fas",iconName:"search",icon:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]},qr={prefix:"fas",iconName:"sign-out-alt",icon:[512,512,[],"f2f5","M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"]},Xr={prefix:"fas",iconName:"sliders-h",icon:[512,512,[],"f1de","M496 384H160v-16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h80v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h336c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-160h-80v-16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h336v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h80c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-160H288V48c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16C7.2 64 0 71.2 0 80v32c0 8.8 7.2 16 16 16h208v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h208c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16z"]},Yr={prefix:"fas",iconName:"sync",icon:[512,512,[],"f021","M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"]},Kr={prefix:"fas",iconName:"tools",icon:[512,512,[],"f7d9","M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"]},Qr={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"]},Jr={prefix:"fas",iconName:"truck",icon:[640,512,[],"f0d1","M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"]},$r={prefix:"fas",iconName:"user",icon:[448,512,[],"f007","M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"]},ea={prefix:"fas",iconName:"user-cog",icon:[640,512,[],"f4fe","M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"]},ta={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"]};function na(e){return na="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},na(e)}function ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ia(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){aa(e,t,n[t])}))}return e}function oa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var sa=function(){},ua={},la={},ca={mark:sa,measure:sa};try{"undefined"!==typeof window&&(ua=window),"undefined"!==typeof document&&(la=document),"undefined"!==typeof MutationObserver&&MutationObserver,"undefined"!==typeof performance&&(ca=performance)}catch(GK){}var da=(ua.navigator||{}).userAgent,ha=void 0===da?"":da,pa=ua,fa=la,ma=ca,va=(pa.document,!!fa.documentElement&&!!fa.head&&"function"===typeof fa.addEventListener&&"function"===typeof fa.createElement),ga=(~ha.indexOf("MSIE")||ha.indexOf("Trident/"),"___FONT_AWESOME___"),ya="fa",ba="svg-inline--fa",xa="data-fa-i2svg",wa=(function(){try{return!0}catch(GK){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),ka=wa.concat([11,12,13,14,15,16,17,18,19,20]),Sa={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Ea=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",Sa.GROUP,Sa.SWAP_OPACITY,Sa.PRIMARY,Sa.SECONDARY].concat(wa.map((function(e){return"".concat(e,"x")}))).concat(ka.map((function(e){return"w-".concat(e)}))),pa.FontAwesomeConfig||{});if(fa&&"function"===typeof fa.querySelector){[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=oa(e,2),n=t[0],r=t[1],a=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=fa.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==a&&null!==a&&(Ea[r]=a)}))}var Ta=ia({},{familyPrefix:ya,replacementClass:ba,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Ea);Ta.autoReplaceSvg||(Ta.observeMutations=!1);var Ca=ia({},Ta);pa.FontAwesomeConfig=Ca;var _a=pa||{};_a[ga]||(_a[ga]={}),_a[ga].styles||(_a[ga].styles={}),_a[ga].hooks||(_a[ga].hooks={}),_a[ga].shims||(_a[ga].shims=[]);var Ma=_a[ga],Ia=[];va&&((fa.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(fa.readyState)||fa.addEventListener("DOMContentLoaded",(function e(){fa.removeEventListener("DOMContentLoaded",e),1,Ia.map((function(e){return e()}))})));var Na,Aa="pending",Ra="settled",Oa="fulfilled",Da="rejected",La=function(){},Pa="undefined"!==typeof n.g&&"undefined"!==typeof n.g.process&&"function"===typeof n.g.process.emit,Fa="undefined"===typeof setImmediate?setTimeout:setImmediate,ja=[];function za(){for(var e=0;e<ja.length;e++)ja[e][0](ja[e][1]);ja=[],Na=!1}function Ba(e,t){ja.push([e,t]),Na||(Na=!0,Fa(za,0))}function Ua(e){var t=e.owner,n=t._state,r=t._data,a=e[n],i=e.then;if("function"===typeof a){n=Oa;try{r=a(r)}catch(GK){Ha(i,GK)}}Wa(i,r)||(n===Oa&&Va(i,r),n===Da&&Ha(i,r))}function Wa(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"===typeof t||"object"===na(t))){var r=t.then;if("function"===typeof r)return r.call(t,(function(r){n||(n=!0,t===r?Za(e,r):Va(e,r))}),(function(t){n||(n=!0,Ha(e,t))})),!0}}catch(GK){return n||Ha(e,GK),!0}return!1}function Va(e,t){e!==t&&Wa(e,t)||Za(e,t)}function Za(e,t){e._state===Aa&&(e._state=Ra,e._data=t,Ba(qa,e))}function Ha(e,t){e._state===Aa&&(e._state=Ra,e._data=t,Ba(Xa,e))}function Ga(e){e._then=e._then.forEach(Ua)}function qa(e){e._state=Oa,Ga(e)}function Xa(e){e._state=Da,Ga(e),!e._handled&&Pa&&n.g.process.emit("unhandledRejection",e._data,e)}function Ya(e){n.g.process.emit("rejectionHandled",e)}function Ka(e){if("function"!==typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof Ka===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){Ha(t,e)}try{e((function(e){Va(t,e)}),n)}catch(GK){n(GK)}}(e,this)}Ka.prototype={constructor:Ka,_state:Aa,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(La),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===Da&&Pa&&Ba(Ya,this)),this._state===Oa||this._state===Da?Ba(Ua,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},Ka.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new Ka((function(t,n){var r=[],a=0;function i(e){return a++,function(n){r[e]=n,--a||t(r)}}for(var o,s=0;s<e.length;s++)(o=e[s])&&"function"===typeof o.then?o.then(i(s),n):r[s]=o;a||t(r)}))},Ka.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new Ka((function(t,n){for(var r,a=0;a<e.length;a++)(r=e[a])&&"function"===typeof r.then?r.then(t,n):t(r)}))},Ka.resolve=function(e){return e&&"object"===na(e)&&e.constructor===Ka?e:new Ka((function(t){t(e)}))},Ka.reject=function(e){return new Ka((function(t,n){n(e)}))};var Qa={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Ja(e){if(e&&va){var t=fa.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=fa.head.childNodes,r=null,a=n.length-1;a>-1;a--){var i=n[a],o=(i.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=i)}return fa.head.insertBefore(t,r),e}}var $a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function ei(){for(var e=12,t="";e-- >0;)t+=$a[62*Math.random()|0];return t}function ti(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ni(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n],";")}),"")}function ri(e){return e.size!==Qa.size||e.x!==Qa.x||e.y!==Qa.y||e.rotate!==Qa.rotate||e.flipX||e.flipY}function ai(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,a={transform:"translate(".concat(n/2," 256)")},i="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:a,inner:{transform:"".concat(i," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var ii={x:0,y:0,width:"100%",height:"100%"};function oi(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function si(e){var t=e.icons,n=t.main,r=t.mask,a=e.prefix,i=e.iconName,o=e.transform,s=e.symbol,u=e.title,l=e.maskId,c=e.titleId,d=e.extra,h=e.watchable,p=void 0!==h&&h,f=r.found?r:n,m=f.width,v=f.height,g="fak"===a,y=g?"":"fa-w-".concat(Math.ceil(m/v*16)),b=[Ca.replacementClass,i?"".concat(Ca.familyPrefix,"-").concat(i):"",y].filter((function(e){return-1===d.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(d.classes).join(" "),x={children:[],attributes:ia({},d.attributes,{"data-prefix":a,"data-icon":i,class:b,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(v)})},w=g&&!~d.classes.indexOf("fa-fw")?{width:"".concat(m/v*16*.0625,"em")}:{};p&&(x.attributes[xa]=""),u&&x.children.push({tag:"title",attributes:{id:x.attributes["aria-labelledby"]||"title-".concat(c||ei())},children:[u]});var k=ia({},x,{prefix:a,iconName:i,main:n,mask:r,maskId:l,transform:o,symbol:s,styles:ia({},w,d.styles)}),S=r.found&&n.found?function(e){var t,n=e.children,r=e.attributes,a=e.main,i=e.mask,o=e.maskId,s=e.transform,u=a.width,l=a.icon,c=i.width,d=i.icon,h=ai({transform:s,containerWidth:c,iconWidth:u}),p={tag:"rect",attributes:ia({},ii,{fill:"white"})},f=l.children?{children:l.children.map(oi)}:{},m={tag:"g",attributes:ia({},h.inner),children:[oi(ia({tag:l.tag,attributes:ia({},l.attributes,h.path)},f))]},v={tag:"g",attributes:ia({},h.outer),children:[m]},g="mask-".concat(o||ei()),y="clip-".concat(o||ei()),b={tag:"mask",attributes:ia({},ii,{id:g,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(t=d,"g"===t.tag?t.children:[t])},b]};return n.push(x,{tag:"rect",attributes:ia({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(g,")")},ii)}),{children:n,attributes:r}}(k):function(e){var t=e.children,n=e.attributes,r=e.main,a=e.transform,i=ni(e.styles);if(i.length>0&&(n.style=i),ri(a)){var o=ai({transform:a,containerWidth:r.width,iconWidth:r.width});t.push({tag:"g",attributes:ia({},o.outer),children:[{tag:"g",attributes:ia({},o.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:ia({},r.icon.attributes,o.path)}]}]})}else t.push(r.icon);return{children:t,attributes:n}}(k),E=S.children,T=S.attributes;return k.children=E,k.attributes=T,s?function(e){var t=e.prefix,n=e.iconName,r=e.children,a=e.attributes,i=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ia({},a,{id:!0===i?"".concat(t,"-").concat(Ca.familyPrefix,"-").concat(n):i}),children:r}]}]}(k):function(e){var t=e.children,n=e.main,r=e.mask,a=e.attributes,i=e.styles,o=e.transform;if(ri(o)&&n.found&&!r.found){var s={x:n.width/n.height/2,y:.5};a.style=ni(ia({},i,{"transform-origin":"".concat(s.x+o.x/16,"em ").concat(s.y+o.y/16,"em")}))}return[{tag:"svg",attributes:a,children:t}]}(k)}var ui=function(){},li=(Ca.measurePerformance&&ma&&ma.mark&&ma.measure,function(e,t,n,r){var a,i,o,s=Object.keys(e),u=s.length,l=void 0!==r?function(e,t){return function(n,r,a,i){return e.call(t,n,r,a,i)}}(t,r):t;for(void 0===n?(a=1,o=e[s[0]]):(a=0,o=n);a<u;a++)o=l(o,e[i=s[a]],i,e);return o});function ci(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,a=Object.keys(t).reduce((function(e,n){var r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e}),{});"function"!==typeof Ma.hooks.addPack||r?Ma.styles[e]=ia({},Ma.styles[e]||{},a):Ma.hooks.addPack(e,a),"fas"===e&&ci("fa",t)}var di=Ma.styles,hi=Ma.shims,pi=function(){var e=function(e){return li(di,(function(t,n,r){return t[r]=li(n,e,{}),t}),{})};e((function(e,t,n){return t[3]&&(e[t[3]]=n),e})),e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in di;li(hi,(function(e,n){var r=n[0],a=n[1],i=n[2];return"far"!==a||t||(a="fas"),e[r]={prefix:a,iconName:i},e}),{})};pi();Ma.styles;function fi(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}function mi(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,a=e.children,i=void 0===a?[]:a;return"string"===typeof e?ti(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(ti(e[n]),'" ')}),"").trim()}(r),">").concat(i.map(mi).join(""),"</").concat(t,">")}var vi=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],a=n.slice(1).join("-");if(r&&"h"===a)return e.flipX=!0,e;if(r&&"v"===a)return e.flipY=!0,e;if(a=parseFloat(a),isNaN(a))return e;switch(r){case"grow":e.size=e.size+a;break;case"shrink":e.size=e.size-a;break;case"left":e.x=e.x-a;break;case"right":e.x=e.x+a;break;case"up":e.y=e.y-a;break;case"down":e.y=e.y+a;break;case"rotate":e.rotate=e.rotate+a}return e}),t):t};function gi(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}gi.prototype=Object.create(Error.prototype),gi.prototype.constructor=gi;var yi={fill:"currentColor"},bi={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},xi={tag:"path",attributes:ia({},yi,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},wi=ia({},bi,{attributeName:"opacity"});ia({},yi,{cx:"256",cy:"364",r:"28"}),ia({},bi,{attributeName:"r",values:"28;14;28;28;14;28;"}),ia({},wi,{values:"1;0;1;1;0;1;"}),ia({},yi,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),ia({},wi,{values:"1;0;0;0;0;1;"}),ia({},yi,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),ia({},wi,{values:"0;0;1;1;0;0;"}),Ma.styles;function ki(e){var t=e[0],n=e[1],r=oa(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(Ca.familyPrefix,"-").concat(Sa.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ca.familyPrefix,"-").concat(Sa.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Ca.familyPrefix,"-").concat(Sa.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}Ma.styles;var Si='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';function Ei(){var e=ya,t=ba,n=Ca.familyPrefix,r=Ca.replacementClass,a=Si;if(n!==e||r!==t){var i=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");a=a.replace(i,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(s,".".concat(r))}return a}var Ti=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n.reduce(this._pullDefinitions,{});Object.keys(a).forEach((function(t){e.definitions[t]=ia({},e.definitions[t]||{},a[t]),ci(t,a[t]),pi()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],a=r.prefix,i=r.iconName,o=r.icon;e[a]||(e[a]={}),e[a][i]=o})),e}}],n&&ra(t.prototype,n),r&&ra(t,r),e}();function Ci(){Ca.autoAddCss&&!Ni&&(Ja(Ei()),Ni=!0)}function _i(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return mi(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(va){var t=fa.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function Mi(e){var t=e.prefix,n=void 0===t?"fa":t,r=e.iconName;if(r)return fi(Ii.definitions,n,r)||fi(Ma.styles,n,r)}var Ii=new Ti,Ni=!1,Ai={transform:function(e){return vi(e)}},Ri=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:Mi(t||{}),a=n.mask;return a&&(a=(a||{}).icon?a:Mi(a||{})),e(r,ia({},n,{mask:a}))}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Qa:n,a=t.symbol,i=void 0!==a&&a,o=t.mask,s=void 0===o?null:o,u=t.maskId,l=void 0===u?null:u,c=t.title,d=void 0===c?null:c,h=t.titleId,p=void 0===h?null:h,f=t.classes,m=void 0===f?[]:f,v=t.attributes,g=void 0===v?{}:v,y=t.styles,b=void 0===y?{}:y;if(e){var x=e.prefix,w=e.iconName,k=e.icon;return _i(ia({type:"icon"},e),(function(){return Ci(),Ca.autoA11y&&(d?g["aria-labelledby"]="".concat(Ca.replacementClass,"-title-").concat(p||ei()):(g["aria-hidden"]="true",g.focusable="false")),si({icons:{main:ki(k),mask:s?ki(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:x,iconName:w,transform:ia({},Qa,r),symbol:i,title:d,maskId:l,titleId:p,extra:{attributes:g,styles:b,classes:m}})}))}})),Oi=n(2007),Di=n.n(Oi);function Li(e){return Li="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Li(e)}function Pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(n),!0).forEach((function(t){Pi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Bi(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ui(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var Wi=!1;try{Wi=!0}catch(GK){}function Vi(e){return e&&"object"===Li(e)&&e.prefix&&e.iconName&&e.icon?e:Ai.icon?Ai.icon(e):null===e?null:e&&"object"===Li(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function Zi(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Pi({},e,t):{}}function Hi(e){var t=e.forwardedRef,n=zi(e,["forwardedRef"]),r=n.icon,a=n.mask,i=n.symbol,o=n.className,s=n.title,u=n.titleId,l=Vi(r),c=Zi("classes",[].concat(Bi(function(e){var t,n=e.spin,r=e.pulse,a=e.fixedWidth,i=e.inverse,o=e.border,s=e.listItem,u=e.flip,l=e.size,c=e.rotation,d=e.pull,h=(Pi(t={"fa-spin":n,"fa-pulse":r,"fa-fw":a,"fa-inverse":i,"fa-border":o,"fa-li":s,"fa-flip-horizontal":"horizontal"===u||"both"===u,"fa-flip-vertical":"vertical"===u||"both"===u},"fa-".concat(l),"undefined"!==typeof l&&null!==l),Pi(t,"fa-rotate-".concat(c),"undefined"!==typeof c&&null!==c&&0!==c),Pi(t,"fa-pull-".concat(d),"undefined"!==typeof d&&null!==d),Pi(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(h).map((function(e){return h[e]?e:null})).filter((function(e){return e}))}(n)),Bi(o.split(" ")))),d=Zi("transform","string"===typeof n.transform?Ai.transform(n.transform):n.transform),h=Zi("mask",Vi(a)),p=Ri(l,ji({},c,{},d,{},h,{symbol:i,title:s,titleId:u}));if(!p)return function(){var e;!Wi&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",l),null;var f=p.abstract,m={ref:t};return Object.keys(n).forEach((function(e){Hi.defaultProps.hasOwnProperty(e)||(m[e]=n[e])})),Gi(f[0],m)}Hi.displayName="FontAwesomeIcon",Hi.propTypes={border:Di().bool,className:Di().string,mask:Di().oneOfType([Di().object,Di().array,Di().string]),fixedWidth:Di().bool,inverse:Di().bool,flip:Di().oneOf(["horizontal","vertical","both"]),icon:Di().oneOfType([Di().object,Di().array,Di().string]),listItem:Di().bool,pull:Di().oneOf(["right","left"]),pulse:Di().bool,rotation:Di().oneOf([0,90,180,270]),size:Di().oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Di().bool,symbol:Di().oneOfType([Di().bool,Di().string]),title:Di().string,transform:Di().oneOfType([Di().string,Di().object]),swapOpacity:Di().bool},Hi.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var Gi=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var a=(n.children||[]).map((function(n){return e(t,n)})),i=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=function(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n=t.indexOf(":"),r=Ui(t.slice(0,n)),a=t.slice(n+1).trim();return r.startsWith("webkit")?e[function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(r)]=a:e[r]=a,e}),{})}(r);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[Ui(t)]=r}return e}),{attrs:{}}),o=r.style,s=void 0===o?{}:o,u=zi(r,["style"]);return i.attrs.style=ji({},i.attrs.style,{},s),t.apply(void 0,[n.tag,ji({},i.attrs,{},u)].concat(Bi(a)))}.bind(null,E.createElement),qi=n(5987),Xi=n(4164),Yi=n(503),Ki=n(3366),Qi=n(4578),Ji=!1,$i=E.createContext(null),eo="unmounted",to="exited",no="entering",ro="entered",ao="exiting",io=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(a=to,r.appearStatus=no):a=ro:a=t.unmountOnExit||t.mountOnEnter?eo:to,r.state={status:a},r.nextCallback=null,r}(0,Qi.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===eo?{status:to}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==no&&n!==ro&&(t=no):n!==no&&n!==ro||(t=ao)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===no){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Xi.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===to&&this.setState({status:eo})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[Xi.findDOMNode(this),r],i=a[0],o=a[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!e&&!n||Ji?this.safeSetState({status:ro},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,o),this.safeSetState({status:no},(function(){t.props.onEntering(i,o),t.onTransitionEnd(u,(function(){t.safeSetState({status:ro},(function(){t.props.onEntered(i,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Xi.findDOMNode(this);t&&!Ji?(this.props.onExit(r),this.safeSetState({status:ao},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:to},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:to},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Xi.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=a[0],o=a[1];this.props.addEndListener(i,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===eo)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,Ki.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return E.createElement($i.Provider,{value:null},"function"===typeof n?n(e,r):E.cloneElement(E.Children.only(n),r))},t}(E.Component);function oo(){}io.contextType=$i,io.propTypes={},io.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:oo,onEntering:oo,onEntered:oo,onExit:oo,onExiting:oo,onExited:oo},io.UNMOUNTED=eo,io.EXITED=to,io.ENTERING=no,io.ENTERED=ro,io.EXITING=ao;var so=io,uo=n(9806);function lo(){return(0,It.Z)()||zt.Z}var co=n(812),ho=function(e){return e.scrollTop};function po(e,t){var n=e.timeout,r=e.style,a=void 0===r?{}:r;return{duration:a.transitionDuration||"number"===typeof n?n:n[t.mode]||0,delay:a.transitionDelay}}function fo(e,t){var n=function(e,t){var n,r=t.getBoundingClientRect();if(t.fakeTransform)n=t.fakeTransform;else{var a=window.getComputedStyle(t);n=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("transform")}var i=0,o=0;if(n&&"none"!==n&&"string"===typeof n){var s=n.split("(")[1].split(")")[0].split(",");i=parseInt(s[4],10),o=parseInt(s[5],10)}return"left"===e?"translateX(".concat(window.innerWidth,"px) translateX(").concat(i-r.left,"px)"):"right"===e?"translateX(-".concat(r.left+r.width-i,"px)"):"up"===e?"translateY(".concat(window.innerHeight,"px) translateY(").concat(o-r.top,"px)"):"translateY(-".concat(r.top+r.height-o,"px)")}(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}var mo={enter:co.x9.enteringScreen,exit:co.x9.leavingScreen},vo=E.forwardRef((function(e,t){var n=e.children,r=e.direction,a=void 0===r?"down":r,i=e.in,o=e.onEnter,s=e.onEntered,u=e.onEntering,l=e.onExit,c=e.onExited,d=e.onExiting,h=e.style,p=e.timeout,f=void 0===p?mo:p,m=e.TransitionComponent,v=void 0===m?so:m,g=(0,qi.Z)(e,["children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),y=lo(),b=E.useRef(null),x=E.useCallback((function(e){b.current=Xi.findDOMNode(e)}),[]),w=(0,uo.Z)(n.ref,x),k=(0,uo.Z)(w,t),S=function(e){return function(t){e&&(void 0===t?e(b.current):e(b.current,t))}},T=S((function(e,t){fo(a,e),ho(e),o&&o(e,t)})),C=S((function(e,t){var n=po({timeout:f,style:h},{mode:"enter"});e.style.webkitTransition=y.transitions.create("-webkit-transform",(0,_t.Z)({},n,{easing:y.transitions.easing.easeOut})),e.style.transition=y.transitions.create("transform",(0,_t.Z)({},n,{easing:y.transitions.easing.easeOut})),e.style.webkitTransform="none",e.style.transform="none",u&&u(e,t)})),_=S(s),M=S(d),I=S((function(e){var t=po({timeout:f,style:h},{mode:"exit"});e.style.webkitTransition=y.transitions.create("-webkit-transform",(0,_t.Z)({},t,{easing:y.transitions.easing.sharp})),e.style.transition=y.transitions.create("transform",(0,_t.Z)({},t,{easing:y.transitions.easing.sharp})),fo(a,e),l&&l(e)})),N=S((function(e){e.style.webkitTransition="",e.style.transition="",c&&c(e)})),A=E.useCallback((function(){b.current&&fo(a,b.current)}),[a]);return E.useEffect((function(){if(!i&&"down"!==a&&"right"!==a){var e=(0,Yi.Z)((function(){b.current&&fo(a,b.current)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[a,i]),E.useEffect((function(){i||A()}),[i,A]),E.createElement(v,(0,_t.Z)({nodeRef:b,onEnter:T,onEntered:_,onEntering:C,onExit:I,onExited:N,onExiting:M,appear:!0,in:i,timeout:f},g),(function(e,t){return E.cloneElement(n,(0,_t.Z)({ref:k,style:(0,_t.Z)({visibility:"exited"!==e||i?void 0:"hidden"},h,n.props.style)},t))}))})),go=vo,yo=n(8182),bo=n(1122),xo=n(794),wo=n(4667),ko=n(1565);var So="undefined"!==typeof window?E.useLayoutEffect:E.useEffect,Eo=E.forwardRef((function(e,t){var n=e.children,r=e.container,a=e.disablePortal,i=void 0!==a&&a,o=e.onRendered,s=E.useState(null),u=s[0],l=s[1],c=(0,uo.Z)(E.isValidElement(n)?n.ref:null,t);return So((function(){i||l(function(e){return e="function"===typeof e?e():e,Xi.findDOMNode(e)}(r)||document.body)}),[r,i]),So((function(){if(u&&!i)return(0,ko.Z)(t,u),function(){(0,ko.Z)(t,null)}}),[t,u,i]),So((function(){o&&(u||i)&&o()}),[o,u,i]),i?E.isValidElement(n)?E.cloneElement(n,{ref:c}):n:u?Xi.createPortal(n,u):u}));var To=Eo,Co=n(7545),_o=n(2216),Mo=n(9535);function Io(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}var No=n(7636);function Ao(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Ro(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function Oo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,i=[t,n].concat((0,_.Z)(r)),o=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===i.indexOf(e)&&-1===o.indexOf(e.tagName)&&Ao(e,a)}))}function Do(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function Lo(e,t){var n,r=[],a=[],i=e.container;if(!t.disableScrollLock){if(function(e){var t=(0,wo.Z)(e);return t.body===e?(0,No.Z)(t).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(i)){var o=Io();r.push({value:i.style.paddingRight,key:"padding-right",el:i}),i.style["padding-right"]="".concat(Ro(i)+o,"px"),n=(0,wo.Z)(i).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){a.push(e.style.paddingRight),e.style.paddingRight="".concat(Ro(e)+o,"px")}))}var s=i.parentElement,u="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:i;r.push({value:u.style.overflow,key:"overflow",el:u}),u.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){a[t]?e.style.paddingRight=a[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var Po=function(){function e(){M(this,e),this.modals=[],this.containers=[]}return(0,I.Z)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&Ao(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Oo(t,e.mountNode,e.modalRef,r,!0);var a=Do(this.containers,(function(e){return e.container===t}));return-1!==a?(this.containers[a].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=Do(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=Lo(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=Do(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&Ao(e.modalRef,!0),Oo(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var a=r.modals[r.modals.length-1];a.modalRef&&Ao(a.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var Fo=function(e){var t=e.children,n=e.disableAutoFocus,r=void 0!==n&&n,a=e.disableEnforceFocus,i=void 0!==a&&a,o=e.disableRestoreFocus,s=void 0!==o&&o,u=e.getDoc,l=e.isEnabled,c=e.open,d=E.useRef(),h=E.useRef(null),p=E.useRef(null),f=E.useRef(),m=E.useRef(null),v=E.useCallback((function(e){m.current=Xi.findDOMNode(e)}),[]),g=(0,uo.Z)(t.ref,v),y=E.useRef();return E.useEffect((function(){y.current=c}),[c]),!y.current&&c&&"undefined"!==typeof window&&(f.current=u().activeElement),E.useEffect((function(){if(c){var e=(0,wo.Z)(m.current);r||!m.current||m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex",-1),m.current.focus());var t=function(){null!==m.current&&(e.hasFocus()&&!i&&l()&&!d.current?m.current&&!m.current.contains(e.activeElement)&&m.current.focus():d.current=!1)},n=function(t){!i&&l()&&9===t.keyCode&&e.activeElement===m.current&&(d.current=!0,t.shiftKey?p.current.focus():h.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var a=setInterval((function(){t()}),50);return function(){clearInterval(a),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),s||(f.current&&f.current.focus&&f.current.focus(),f.current=null)}}}),[r,i,s,l,c]),E.createElement(E.Fragment,null,E.createElement("div",{tabIndex:0,ref:h,"data-test":"sentinelStart"}),E.cloneElement(t,{ref:g}),E.createElement("div",{tabIndex:0,ref:p,"data-test":"sentinelEnd"}))},jo={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},zo=E.forwardRef((function(e,t){var n=e.invisible,r=void 0!==n&&n,a=e.open,i=(0,qi.Z)(e,["invisible","open"]);return a?E.createElement("div",(0,_t.Z)({"aria-hidden":!0,ref:t},i,{style:(0,_t.Z)({},jo.root,r?jo.invisible:{},i.style)})):null}));var Bo=new Po,Uo=E.forwardRef((function(e,t){var n=(0,It.Z)(),r=(0,xo.Z)({name:"MuiModal",props:(0,_t.Z)({},e),theme:n}),a=r.BackdropComponent,i=void 0===a?zo:a,o=r.BackdropProps,s=r.children,u=r.closeAfterTransition,l=void 0!==u&&u,c=r.container,d=r.disableAutoFocus,h=void 0!==d&&d,p=r.disableBackdropClick,f=void 0!==p&&p,m=r.disableEnforceFocus,v=void 0!==m&&m,g=r.disableEscapeKeyDown,y=void 0!==g&&g,b=r.disablePortal,x=void 0!==b&&b,w=r.disableRestoreFocus,k=void 0!==w&&w,S=r.disableScrollLock,T=void 0!==S&&S,C=r.hideBackdrop,_=void 0!==C&&C,M=r.keepMounted,I=void 0!==M&&M,N=r.manager,A=void 0===N?Bo:N,R=r.onBackdropClick,O=r.onClose,D=r.onEscapeKeyDown,L=r.onRendered,P=r.open,F=(0,qi.Z)(r,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),j=E.useState(!0),z=j[0],B=j[1],U=E.useRef({}),W=E.useRef(null),V=E.useRef(null),Z=(0,uo.Z)(V,t),H=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(r),G=function(){return(0,wo.Z)(W.current)},q=function(){return U.current.modalRef=V.current,U.current.mountNode=W.current,U.current},X=function(){A.mount(q(),{disableScrollLock:T}),V.current.scrollTop=0},Y=(0,_o.Z)((function(){var e=function(e){return e="function"===typeof e?e():e,Xi.findDOMNode(e)}(c)||G().body;A.add(q(),e),V.current&&X()})),K=E.useCallback((function(){return A.isTopModal(q())}),[A]),Q=(0,_o.Z)((function(e){W.current=e,e&&(L&&L(),P&&K()?X():Ao(V.current,!0))})),J=E.useCallback((function(){A.remove(q())}),[A]);if(E.useEffect((function(){return function(){J()}}),[J]),E.useEffect((function(){P?Y():H&&l||J()}),[P,J,H,l,Y]),!I&&!P&&(!H||z))return null;var $=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(n||{zIndex:Mo.Z}),ee={};return void 0===s.props.tabIndex&&(ee.tabIndex=s.props.tabIndex||"-1"),H&&(ee.onEnter=(0,Co.Z)((function(){B(!1)}),s.props.onEnter),ee.onExited=(0,Co.Z)((function(){B(!0),l&&J()}),s.props.onExited)),E.createElement(To,{ref:Q,container:c,disablePortal:x},E.createElement("div",(0,_t.Z)({ref:Z,onKeyDown:function(e){"Escape"===e.key&&K()&&(D&&D(e),y||(e.stopPropagation(),O&&O(e,"escapeKeyDown")))},role:"presentation"},F,{style:(0,_t.Z)({},$.root,!P&&z?$.hidden:{},F.style)}),_?null:E.createElement(i,(0,_t.Z)({open:P,onClick:function(e){e.target===e.currentTarget&&(R&&R(e),!f&&O&&O(e,"backdropClick"))}},o)),E.createElement(Fo,{disableEnforceFocus:v,disableAutoFocus:h,disableRestoreFocus:k,getDoc:G,isEnabled:K,open:P},E.cloneElement(s,ee))))})),Wo=Uo,Vo={entering:{opacity:1},entered:{opacity:1}},Zo={enter:co.x9.enteringScreen,exit:co.x9.leavingScreen},Ho=E.forwardRef((function(e,t){var n=e.children,r=e.disableStrictModeCompat,a=void 0!==r&&r,i=e.in,o=e.onEnter,s=e.onEntered,u=e.onEntering,l=e.onExit,c=e.onExited,d=e.onExiting,h=e.style,p=e.TransitionComponent,f=void 0===p?so:p,m=e.timeout,v=void 0===m?Zo:m,g=(0,qi.Z)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),y=lo(),b=y.unstable_strictMode&&!a,x=E.useRef(null),w=(0,uo.Z)(n.ref,t),k=(0,uo.Z)(b?x:void 0,w),S=function(e){return function(t,n){if(e){var r=b?[x.current,t]:[t,n],a=(0,U.Z)(r,2),i=a[0],o=a[1];void 0===o?e(i):e(i,o)}}},T=S(u),C=S((function(e,t){ho(e);var n=po({style:h,timeout:v},{mode:"enter"});e.style.webkitTransition=y.transitions.create("opacity",n),e.style.transition=y.transitions.create("opacity",n),o&&o(e,t)})),_=S(s),M=S(d),I=S((function(e){var t=po({style:h,timeout:v},{mode:"exit"});e.style.webkitTransition=y.transitions.create("opacity",t),e.style.transition=y.transitions.create("opacity",t),l&&l(e)})),N=S(c);return E.createElement(f,(0,_t.Z)({appear:!0,in:i,nodeRef:b?x:void 0,onEnter:C,onEntered:_,onEntering:T,onExit:I,onExited:N,onExiting:M,timeout:v},g),(function(e,t){return E.cloneElement(n,(0,_t.Z)({style:(0,_t.Z)({opacity:0,visibility:"exited"!==e||i?void 0:"hidden"},Vo[e],h,n.props.style),ref:k},t))}))})),Go=Ho,qo=E.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.invisible,o=void 0!==i&&i,s=e.open,u=e.transitionDuration,l=e.TransitionComponent,c=void 0===l?Go:l,d=(0,qi.Z)(e,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return E.createElement(c,(0,_t.Z)({in:s,timeout:u},d),E.createElement("div",{className:(0,yo.Z)(r.root,a,o&&r.invisible),"aria-hidden":!0,ref:t},n))})),Xo=(0,Rt.Z)({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(qo),Yo=E.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.component,i=void 0===a?"div":a,o=e.square,s=void 0!==o&&o,u=e.elevation,l=void 0===u?1:u,c=e.variant,d=void 0===c?"elevation":c,h=(0,qi.Z)(e,["classes","className","component","square","elevation","variant"]);return E.createElement(i,(0,_t.Z)({className:(0,yo.Z)(n.root,r,"outlined"===d?n.outlined:n["elevation".concat(l)],!s&&n.rounded),ref:t},h))})),Ko=(0,Rt.Z)((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),(0,_t.Z)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(Yo),Qo={enter:co.x9.enteringScreen,exit:co.x9.leavingScreen},Jo=E.forwardRef((function(e,t){var n=e.BackdropProps,r=e.children,a=e.classes,i=e.className,o=e.disableBackdropClick,s=void 0!==o&&o,u=e.disableEscapeKeyDown,l=void 0!==u&&u,c=e.fullScreen,d=void 0!==c&&c,h=e.fullWidth,p=void 0!==h&&h,f=e.maxWidth,m=void 0===f?"sm":f,v=e.onBackdropClick,g=e.onClose,y=e.onEnter,b=e.onEntered,x=e.onEntering,w=e.onEscapeKeyDown,k=e.onExit,S=e.onExited,T=e.onExiting,C=e.open,_=e.PaperComponent,M=void 0===_?Ko:_,I=e.PaperProps,N=void 0===I?{}:I,A=e.scroll,R=void 0===A?"paper":A,O=e.TransitionComponent,D=void 0===O?Go:O,L=e.transitionDuration,P=void 0===L?Qo:L,F=e.TransitionProps,j=e["aria-describedby"],z=e["aria-labelledby"],B=(0,qi.Z)(e,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),U=E.useRef();return E.createElement(Wo,(0,_t.Z)({className:(0,yo.Z)(a.root,i),BackdropComponent:Xo,BackdropProps:(0,_t.Z)({transitionDuration:P},n),closeAfterTransition:!0},s?{disableBackdropClick:s}:{},{disableEscapeKeyDown:l,onEscapeKeyDown:w,onClose:g,open:C,ref:t},B),E.createElement(D,(0,_t.Z)({appear:!0,in:C,timeout:P,onEnter:y,onEntering:x,onEntered:b,onExit:k,onExiting:T,onExited:S,role:"none presentation"},F),E.createElement("div",{className:(0,yo.Z)(a.container,a["scroll".concat((0,bo.Z)(R))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===U.current&&(U.current=null,v&&v(e),!s&&g&&g(e,"backdropClick"))},onMouseDown:function(e){U.current=e.target}},E.createElement(M,(0,_t.Z)({elevation:24,role:"dialog","aria-describedby":j,"aria-labelledby":z},N,{className:(0,yo.Z)(a.paper,a["paperScroll".concat((0,bo.Z)(R))],a["paperWidth".concat((0,bo.Z)(String(m)))],N.className,d&&a.paperFullScreen,p&&a.paperFullWidth)}),r))))})),$o=(0,Rt.Z)((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":(0,Pt.Z)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":(0,Pt.Z)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":(0,Pt.Z)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":(0,Pt.Z)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":(0,Pt.Z)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(Jo),es=n(3108),ts=n(1175);function ns(e,t){var n=Object.create(null);return e&&E.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,E.isValidElement)(e)?t(e):e}(e)})),n}function rs(e,t,n){return null!=n[t]?n[t]:e.props[t]}function as(e,t,n){var r=ns(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,a=Object.create(null),i=[];for(var o in e)o in t?i.length&&(a[o]=i,i=[]):i.push(o);var s={};for(var u in t){if(a[u])for(r=0;r<a[u].length;r++){var l=a[u][r];s[a[u][r]]=n(l)}s[u]=n(u)}for(r=0;r<i.length;r++)s[i[r]]=n(i[r]);return s}(t,r);return Object.keys(a).forEach((function(i){var o=a[i];if((0,E.isValidElement)(o)){var s=i in t,u=i in r,l=t[i],c=(0,E.isValidElement)(l)&&!l.props.in;!u||s&&!c?u||!s||c?u&&s&&(0,E.isValidElement)(l)&&(a[i]=(0,E.cloneElement)(o,{onExited:n.bind(null,o),in:l.props.in,exit:rs(o,"exit",e),enter:rs(o,"enter",e)})):a[i]=(0,E.cloneElement)(o,{in:!1}):a[i]=(0,E.cloneElement)(o,{onExited:n.bind(null,o),in:!0,exit:rs(o,"exit",e),enter:rs(o,"enter",e)})}})),a}var is=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},os=function(e){function t(t,n){var r,a=(r=e.call(this,t,n)||this).handleExited.bind((0,L.Z)(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}(0,Qi.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,a=t.children,i=t.handleExited;return{children:t.firstRender?(n=e,r=i,ns(n.children,(function(e){return(0,E.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:rs(e,"appear",n),enter:rs(e,"enter",n),exit:rs(e,"exit",n)})}))):as(e,a,i),firstRender:!1}},n.handleExited=function(e,t){var n=ns(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,_t.Z)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,Ki.Z)(e,["component","childFactory"]),a=this.state.contextValue,i=is(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?E.createElement($i.Provider,{value:a},i):E.createElement($i.Provider,{value:a},E.createElement(t,r,i))},t}(E.Component);os.propTypes={},os.defaultProps={component:"div",childFactory:function(e){return e}};var ss=os,us="undefined"===typeof window?E.useEffect:E.useLayoutEffect;var ls=function(e){var t=e.classes,n=e.pulsate,r=void 0!==n&&n,a=e.rippleX,i=e.rippleY,o=e.rippleSize,s=e.in,u=e.onExited,l=void 0===u?function(){}:u,c=e.timeout,d=E.useState(!1),h=d[0],p=d[1],f=(0,yo.Z)(t.ripple,t.rippleVisible,r&&t.ripplePulsate),m={width:o,height:o,top:-o/2+i,left:-o/2+a},v=(0,yo.Z)(t.child,h&&t.childLeaving,r&&t.childPulsate),g=(0,_o.Z)(l);return us((function(){if(!s){p(!0);var e=setTimeout(g,c);return function(){clearTimeout(e)}}}),[g,s,c]),E.createElement("span",{className:f,style:m},E.createElement("span",{className:v}))},cs=E.forwardRef((function(e,t){var n=e.center,r=void 0!==n&&n,a=e.classes,i=e.className,o=(0,qi.Z)(e,["center","classes","className"]),s=E.useState([]),u=s[0],l=s[1],c=E.useRef(0),d=E.useRef(null);E.useEffect((function(){d.current&&(d.current(),d.current=null)}),[u]);var h=E.useRef(!1),p=E.useRef(null),f=E.useRef(null),m=E.useRef(null);E.useEffect((function(){return function(){clearTimeout(p.current)}}),[]);var v=E.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,o=e.cb;l((function(e){return[].concat((0,_.Z)(e),[E.createElement(ls,{key:c.current,classes:a,timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i})])})),c.current+=1,d.current=o}),[a]),g=E.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=t.pulsate,i=void 0!==a&&a,o=t.center,s=void 0===o?r||t.pulsate:o,u=t.fakeElement,l=void 0!==u&&u;if("mousedown"===e.type&&h.current)h.current=!1;else{"touchstart"===e.type&&(h.current=!0);var c,d,g,y=l?null:m.current,b=y?y.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(b.width/2),d=Math.round(b.height/2);else{var x=e.touches?e.touches[0]:e,w=x.clientX,k=x.clientY;c=Math.round(w-b.left),d=Math.round(k-b.top)}if(s)(g=Math.sqrt((2*Math.pow(b.width,2)+Math.pow(b.height,2))/3))%2===0&&(g+=1);else{var S=2*Math.max(Math.abs((y?y.clientWidth:0)-c),c)+2,E=2*Math.max(Math.abs((y?y.clientHeight:0)-d),d)+2;g=Math.sqrt(Math.pow(S,2)+Math.pow(E,2))}e.touches?null===f.current&&(f.current=function(){v({pulsate:i,rippleX:c,rippleY:d,rippleSize:g,cb:n})},p.current=setTimeout((function(){f.current&&(f.current(),f.current=null)}),80)):v({pulsate:i,rippleX:c,rippleY:d,rippleSize:g,cb:n})}}),[r,v]),y=E.useCallback((function(){g({},{pulsate:!0})}),[g]),b=E.useCallback((function(e,t){if(clearTimeout(p.current),"touchend"===e.type&&f.current)return e.persist(),f.current(),f.current=null,void(p.current=setTimeout((function(){b(e,t)})));f.current=null,l((function(e){return e.length>0?e.slice(1):e})),d.current=t}),[]);return E.useImperativeHandle(t,(function(){return{pulsate:y,start:g,stop:b}}),[y,g,b]),E.createElement("span",(0,_t.Z)({className:(0,yo.Z)(a.root,i),ref:m},o),E.createElement(ss,{component:null,exit:!0},u))})),ds=(0,Rt.Z)((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(E.memo(cs)),hs=E.forwardRef((function(e,t){var n=e.action,r=e.buttonRef,a=e.centerRipple,i=void 0!==a&&a,o=e.children,s=e.classes,u=e.className,l=e.component,c=void 0===l?"button":l,d=e.disabled,h=void 0!==d&&d,p=e.disableRipple,f=void 0!==p&&p,m=e.disableTouchRipple,v=void 0!==m&&m,g=e.focusRipple,y=void 0!==g&&g,b=e.focusVisibleClassName,x=e.onBlur,w=e.onClick,k=e.onFocus,S=e.onFocusVisible,T=e.onKeyDown,C=e.onKeyUp,_=e.onMouseDown,M=e.onMouseLeave,I=e.onMouseUp,N=e.onTouchEnd,A=e.onTouchMove,R=e.onTouchStart,O=e.onDragLeave,D=e.tabIndex,L=void 0===D?0:D,P=e.TouchRippleProps,F=e.type,j=void 0===F?"button":F,z=(0,qi.Z)(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),B=E.useRef(null);var U=E.useRef(null),W=E.useState(!1),V=W[0],Z=W[1];h&&V&&Z(!1);var H=(0,ts.Z)(),G=H.isFocusVisible,q=H.onBlurVisible,X=H.ref;function Y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return(0,_o.Z)((function(r){return t&&t(r),!n&&U.current&&U.current[e](r),!0}))}E.useImperativeHandle(n,(function(){return{focusVisible:function(){Z(!0),B.current.focus()}}}),[]),E.useEffect((function(){V&&y&&!f&&U.current.pulsate()}),[f,y,V]);var K=Y("start",_),Q=Y("stop",O),J=Y("stop",I),$=Y("stop",(function(e){V&&e.preventDefault(),M&&M(e)})),ee=Y("start",R),te=Y("stop",N),ne=Y("stop",A),re=Y("stop",(function(e){V&&(q(e),Z(!1)),x&&x(e)}),!1),ae=(0,_o.Z)((function(e){B.current||(B.current=e.currentTarget),G(e)&&(Z(!0),S&&S(e)),k&&k(e)})),ie=function(){var e=Xi.findDOMNode(B.current);return c&&"button"!==c&&!("A"===e.tagName&&e.href)},oe=E.useRef(!1),se=(0,_o.Z)((function(e){y&&!oe.current&&V&&U.current&&" "===e.key&&(oe.current=!0,e.persist(),U.current.stop(e,(function(){U.current.start(e)}))),e.target===e.currentTarget&&ie()&&" "===e.key&&e.preventDefault(),T&&T(e),e.target===e.currentTarget&&ie()&&"Enter"===e.key&&!h&&(e.preventDefault(),w&&w(e))})),ue=(0,_o.Z)((function(e){y&&" "===e.key&&U.current&&V&&!e.defaultPrevented&&(oe.current=!1,e.persist(),U.current.stop(e,(function(){U.current.pulsate(e)}))),C&&C(e),w&&e.target===e.currentTarget&&ie()&&" "===e.key&&!e.defaultPrevented&&w(e)})),le=c;"button"===le&&z.href&&(le="a");var ce={};"button"===le?(ce.type=j,ce.disabled=h):("a"===le&&z.href||(ce.role="button"),ce["aria-disabled"]=h);var de=(0,uo.Z)(r,t),he=(0,uo.Z)(X,B),pe=(0,uo.Z)(de,he),fe=E.useState(!1),me=fe[0],ve=fe[1];E.useEffect((function(){ve(!0)}),[]);var ge=me&&!f&&!h;return E.createElement(le,(0,_t.Z)({className:(0,yo.Z)(s.root,u,V&&[s.focusVisible,b],h&&s.disabled),onBlur:re,onClick:w,onFocus:ae,onKeyDown:se,onKeyUp:ue,onMouseDown:K,onMouseLeave:$,onMouseUp:J,onDragLeave:Q,onTouchEnd:te,onTouchMove:ne,onTouchStart:ee,ref:pe,tabIndex:h?-1:L},ce,z),o,ge?E.createElement(ds,(0,_t.Z)({ref:U,center:i},P)):null)})),ps=(0,Rt.Z)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(hs),fs=E.forwardRef((function(e,t){var n=e.edge,r=void 0!==n&&n,a=e.children,i=e.classes,o=e.className,s=e.color,u=void 0===s?"default":s,l=e.disabled,c=void 0!==l&&l,d=e.disableFocusRipple,h=void 0!==d&&d,p=e.size,f=void 0===p?"medium":p,m=(0,qi.Z)(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return E.createElement(ps,(0,_t.Z)({className:(0,yo.Z)(i.root,o,"default"!==u&&i["color".concat((0,bo.Z)(u))],c&&i.disabled,"small"===f&&i["size".concat((0,bo.Z)(f))],{start:i.edgeStart,end:i.edgeEnd}[r]),centerRipple:!0,focusRipple:!h,disabled:c,ref:t},m),E.createElement("span",{className:i.label},a))})),ms=(0,Rt.Z)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:(0,es.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,es.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,es.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(fs),vs={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},gs=E.forwardRef((function(e,t){var n=e.align,r=void 0===n?"inherit":n,a=e.classes,i=e.className,o=e.color,s=void 0===o?"initial":o,u=e.component,l=e.display,c=void 0===l?"initial":l,d=e.gutterBottom,h=void 0!==d&&d,p=e.noWrap,f=void 0!==p&&p,m=e.paragraph,v=void 0!==m&&m,g=e.variant,y=void 0===g?"body1":g,b=e.variantMapping,x=void 0===b?vs:b,w=(0,qi.Z)(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),k=u||(v?"p":x[y]||vs[y])||"span";return E.createElement(k,(0,_t.Z)({className:(0,yo.Z)(a.root,i,"inherit"!==y&&a[y],"initial"!==s&&a["color".concat((0,bo.Z)(s))],f&&a.noWrap,h&&a.gutterBottom,v&&a.paragraph,"inherit"!==r&&a["align".concat((0,bo.Z)(r))],"initial"!==c&&a["display".concat((0,bo.Z)(c))]),ref:t},w))})),ys=(0,Rt.Z)((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(gs),bs=E.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.disableTypography,o=void 0!==i&&i,s=(0,qi.Z)(e,["children","classes","className","disableTypography"]);return E.createElement("div",(0,_t.Z)({className:(0,yo.Z)(r.root,a),ref:t},s),o?n:E.createElement(ys,{component:"h2",variant:"h6"},n))})),xs=(0,Rt.Z)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(bs),ws=E.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.dividers,i=void 0!==a&&a,o=(0,qi.Z)(e,["classes","className","dividers"]);return E.createElement("div",(0,_t.Z)({className:(0,yo.Z)(n.root,r,i&&n.dividers),ref:t},o))})),ks=(0,Rt.Z)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(ws),Ss=E.forwardRef((function(e,t){return E.createElement(ys,(0,_t.Z)({component:"p",variant:"body1",color:"textSecondary",ref:t},e))})),Es=(0,Rt.Z)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(Ss),Ts=[0,1,2,3,4,5,6,7,8,9,10],Cs=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function _s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/t).concat(String(e).replace(String(n),"")||"px")}var Ms=E.forwardRef((function(e,t){var n=e.alignContent,r=void 0===n?"stretch":n,a=e.alignItems,i=void 0===a?"stretch":a,o=e.classes,s=e.className,u=e.component,l=void 0===u?"div":u,c=e.container,d=void 0!==c&&c,h=e.direction,p=void 0===h?"row":h,f=e.item,m=void 0!==f&&f,v=e.justify,g=e.justifyContent,y=void 0===g?"flex-start":g,b=e.lg,x=void 0!==b&&b,w=e.md,k=void 0!==w&&w,S=e.sm,T=void 0!==S&&S,C=e.spacing,_=void 0===C?0:C,M=e.wrap,I=void 0===M?"wrap":M,N=e.xl,A=void 0!==N&&N,R=e.xs,O=void 0!==R&&R,D=e.zeroMinWidth,L=void 0!==D&&D,P=(0,qi.Z)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),F=(0,yo.Z)(o.root,s,d&&[o.container,0!==_&&o["spacing-xs-".concat(String(_))]],m&&o.item,L&&o.zeroMinWidth,"row"!==p&&o["direction-xs-".concat(String(p))],"wrap"!==I&&o["wrap-xs-".concat(String(I))],"stretch"!==i&&o["align-items-xs-".concat(String(i))],"stretch"!==r&&o["align-content-xs-".concat(String(r))],"flex-start"!==(v||y)&&o["justify-content-xs-".concat(String(v||y))],!1!==O&&o["grid-xs-".concat(String(O))],!1!==T&&o["grid-sm-".concat(String(T))],!1!==k&&o["grid-md-".concat(String(k))],!1!==x&&o["grid-lg-".concat(String(x))],!1!==A&&o["grid-xl-".concat(String(A))]);return E.createElement(l,(0,_t.Z)({className:F,ref:t},P))})),Is=(0,Rt.Z)((function(e){return(0,_t.Z)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return Ts.forEach((function(r){var a=e.spacing(r);0!==a&&(n["spacing-".concat(t,"-").concat(r)]={margin:"-".concat(_s(a,2)),width:"calc(100% + ".concat(_s(a),")"),"& > $item":{padding:_s(a,2)}})})),n}(e,"xs"),e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var r={};Cs.forEach((function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var a="".concat(Math.round(e/12*1e8)/1e6,"%");r[t]={flexBasis:a,flexGrow:0,maxWidth:a}}else r[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?(0,_t.Z)(e,r):e[t.breakpoints.up(n)]=r}(t,e,n),t}),{}))}),{name:"MuiGrid"})(Ms),Ns=Is,As=n(7483);function Rs(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}var Os=E.createContext();var Ds=Os;function Ls(e,t){return parseInt(e[t],10)||0}var Ps="undefined"!==typeof window?E.useLayoutEffect:E.useEffect,Fs={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},js=E.forwardRef((function(e,t){var n=e.onChange,r=e.rows,a=e.rowsMax,i=e.rowsMin,o=e.maxRows,s=e.minRows,u=void 0===s?1:s,l=e.style,c=e.value,d=(0,qi.Z)(e,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),h=o||a,p=r||i||u,f=E.useRef(null!=c).current,m=E.useRef(null),v=(0,uo.Z)(t,m),g=E.useRef(null),y=E.useRef(0),b=E.useState({}),x=b[0],w=b[1],k=E.useCallback((function(){var t=m.current,n=window.getComputedStyle(t),r=g.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var a=n["box-sizing"],i=Ls(n,"padding-bottom")+Ls(n,"padding-top"),o=Ls(n,"border-bottom-width")+Ls(n,"border-top-width"),s=r.scrollHeight-i;r.value="x";var u=r.scrollHeight-i,l=s;p&&(l=Math.max(Number(p)*u,l)),h&&(l=Math.min(Number(h)*u,l));var c=(l=Math.max(l,u))+("border-box"===a?i+o:0),d=Math.abs(l-s)<=1;w((function(e){return y.current<20&&(c>0&&Math.abs((e.outerHeightStyle||0)-c)>1||e.overflow!==d)?(y.current+=1,{overflow:d,outerHeightStyle:c}):e}))}),[h,p,e.placeholder]);E.useEffect((function(){var e=(0,Yi.Z)((function(){y.current=0,k()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[k]),Ps((function(){k()})),E.useEffect((function(){y.current=0}),[c]);return E.createElement(E.Fragment,null,E.createElement("textarea",(0,_t.Z)({value:c,onChange:function(e){y.current=0,f||k(),n&&n(e)},ref:v,rows:p,style:(0,_t.Z)({height:x.outerHeightStyle,overflow:x.overflow?"hidden":null},l)},d)),E.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:g,tabIndex:-1,style:(0,_t.Z)({},Fs,l)}))})),zs=js;function Bs(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Us(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Bs(e.value)&&""!==e.value||t&&Bs(e.defaultValue)&&""!==e.defaultValue)}var Ws="undefined"===typeof window?E.useEffect:E.useLayoutEffect,Vs=E.forwardRef((function(e,t){var n=e["aria-describedby"],r=e.autoComplete,a=e.autoFocus,i=e.classes,o=e.className,s=(e.color,e.defaultValue),u=e.disabled,l=e.endAdornment,c=(e.error,e.fullWidth),d=void 0!==c&&c,h=e.id,p=e.inputComponent,f=void 0===p?"input":p,m=e.inputProps,v=void 0===m?{}:m,g=e.inputRef,y=(e.margin,e.multiline),b=void 0!==y&&y,x=e.name,w=e.onBlur,k=e.onChange,S=e.onClick,T=e.onFocus,C=e.onKeyDown,_=e.onKeyUp,M=e.placeholder,I=e.readOnly,N=e.renderSuffix,A=e.rows,R=e.rowsMax,O=e.rowsMin,D=e.maxRows,L=e.minRows,P=e.startAdornment,F=e.type,j=void 0===F?"text":F,z=e.value,B=(0,qi.Z)(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),U=null!=v.value?v.value:z,W=E.useRef(null!=U).current,V=E.useRef(),Z=E.useCallback((function(e){0}),[]),H=(0,uo.Z)(v.ref,Z),G=(0,uo.Z)(g,H),q=(0,uo.Z)(V,G),X=E.useState(!1),Y=X[0],K=X[1],Q=E.useContext(Os);var J=Rs({props:e,muiFormControl:Q,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});J.focused=Q?Q.focused:Y,E.useEffect((function(){!Q&&u&&Y&&(K(!1),w&&w())}),[Q,u,Y,w]);var $=Q&&Q.onFilled,ee=Q&&Q.onEmpty,te=E.useCallback((function(e){Us(e)?$&&$():ee&&ee()}),[$,ee]);Ws((function(){W&&te({value:U})}),[U,te,W]);E.useEffect((function(){te(V.current)}),[]);var ne=f,re=(0,_t.Z)({},v,{ref:q});"string"!==typeof ne?re=(0,_t.Z)({inputRef:q,type:j},re,{ref:null}):b?!A||D||L||R||O?(re=(0,_t.Z)({minRows:A||L,rowsMax:R,maxRows:D},re),ne=zs):ne="textarea":re=(0,_t.Z)({type:j},re);return E.useEffect((function(){Q&&Q.setAdornedStart(Boolean(P))}),[Q,P]),E.createElement("div",(0,_t.Z)({className:(0,yo.Z)(i.root,i["color".concat((0,bo.Z)(J.color||"primary"))],o,J.disabled&&i.disabled,J.error&&i.error,d&&i.fullWidth,J.focused&&i.focused,Q&&i.formControl,b&&i.multiline,P&&i.adornedStart,l&&i.adornedEnd,"dense"===J.margin&&i.marginDense),onClick:function(e){V.current&&e.currentTarget===e.target&&V.current.focus(),S&&S(e)},ref:t},B),P,E.createElement(Ds.Provider,{value:null},E.createElement(ne,(0,_t.Z)({"aria-invalid":J.error,"aria-describedby":n,autoComplete:r,autoFocus:a,defaultValue:s,disabled:J.disabled,id:h,onAnimationStart:function(e){te("mui-auto-fill-cancel"===e.animationName?V.current:{value:"x"})},name:x,placeholder:M,readOnly:I,required:J.required,rows:A,value:U,onKeyDown:C,onKeyUp:_},re,{className:(0,yo.Z)(i.input,v.className,J.disabled&&i.disabled,b&&i.inputMultiline,J.hiddenLabel&&i.inputHiddenLabel,P&&i.inputAdornedStart,l&&i.inputAdornedEnd,"search"===j&&i.inputTypeSearch,"dense"===J.margin&&i.inputMarginDense),onBlur:function(e){w&&w(e),v.onBlur&&v.onBlur(e),Q&&Q.onBlur?Q.onBlur(e):K(!1)},onChange:function(e){if(!W){var t=e.target||V.current;if(null==t)throw new Error((0,As.Z)(1));te({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];v.onChange&&v.onChange.apply(v,[e].concat(r)),k&&k.apply(void 0,[e].concat(r))},onFocus:function(e){J.disabled?e.stopPropagation():(T&&T(e),v.onFocus&&v.onFocus(e),Q&&Q.onFocus?Q.onFocus(e):K(!0))}}))),l,N?N((0,_t.Z)({},J,{startAdornment:P})):null)})),Zs=(0,Rt.Z)((function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},a={opacity:t?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:(0,_t.Z)({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus:-ms-input-placeholder":a,"&:focus::-ms-input-placeholder":a},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(Vs),Hs=E.forwardRef((function(e,t){var n=e.disableUnderline,r=e.classes,a=e.fullWidth,i=void 0!==a&&a,o=e.inputComponent,s=void 0===o?"input":o,u=e.multiline,l=void 0!==u&&u,c=e.type,d=void 0===c?"text":c,h=(0,qi.Z)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return E.createElement(Zs,(0,_t.Z)({classes:(0,_t.Z)({},r,{root:(0,yo.Z)(r.root,!n&&r.underline),underline:null}),fullWidth:i,inputComponent:s,multiline:l,ref:t,type:d},h))}));Hs.muiName="Input";var Gs=(0,Rt.Z)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(Hs),qs=E.forwardRef((function(e,t){var n=e.disableUnderline,r=e.classes,a=e.fullWidth,i=void 0!==a&&a,o=e.inputComponent,s=void 0===o?"input":o,u=e.multiline,l=void 0!==u&&u,c=e.type,d=void 0===c?"text":c,h=(0,qi.Z)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return E.createElement(Zs,(0,_t.Z)({classes:(0,_t.Z)({},r,{root:(0,yo.Z)(r.root,!n&&r.underline),underline:null}),fullWidth:i,inputComponent:s,multiline:l,ref:t,type:d},h))}));qs.muiName="Input";var Xs=(0,Rt.Z)((function(e){var t="light"===e.palette.type,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:r,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:t?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:r}},"&$focused":{backgroundColor:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(qs),Ys=E.forwardRef((function(e,t){e.children;var n=e.classes,r=e.className,a=e.label,i=e.labelWidth,o=e.notched,s=e.style,u=(0,qi.Z)(e,["children","classes","className","label","labelWidth","notched","style"]),l="rtl"===lo().direction?"right":"left";if(void 0!==a)return E.createElement("fieldset",(0,_t.Z)({"aria-hidden":!0,className:(0,yo.Z)(n.root,r),ref:t,style:s},u),E.createElement("legend",{className:(0,yo.Z)(n.legendLabelled,o&&n.legendNotched)},a?E.createElement("span",null,a):E.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var c=i>0?.75*i+8:.01;return E.createElement("fieldset",(0,_t.Z)({"aria-hidden":!0,style:(0,_t.Z)((0,Pt.Z)({},"padding".concat((0,bo.Z)(l)),8),s),className:(0,yo.Z)(n.root,r),ref:t},u),E.createElement("legend",{className:n.legend,style:{width:o?c:.01}},E.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))})),Ks=(0,Rt.Z)((function(e){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(Ys),Qs=E.forwardRef((function(e,t){var n=e.classes,r=e.fullWidth,a=void 0!==r&&r,i=e.inputComponent,o=void 0===i?"input":i,s=e.label,u=e.labelWidth,l=void 0===u?0:u,c=e.multiline,d=void 0!==c&&c,h=e.notched,p=e.type,f=void 0===p?"text":p,m=(0,qi.Z)(e,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return E.createElement(Zs,(0,_t.Z)({renderSuffix:function(e){return E.createElement(Ks,{className:n.notchedOutline,label:s,labelWidth:l,notched:"undefined"!==typeof h?h:Boolean(e.startAdornment||e.filled||e.focused)})},classes:(0,_t.Z)({},n,{root:(0,yo.Z)(n.root,n.underline),notchedOutline:null}),fullWidth:a,inputComponent:o,multiline:d,ref:t,type:f},m))}));Qs.muiName="Input";var Js=(0,Rt.Z)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:e.shape.borderRadius,"&:hover $notchedOutline":{borderColor:e.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:t}},"&$focused $notchedOutline":{borderColor:e.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:e.palette.error.main},"&$disabled $notchedOutline":{borderColor:e.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:e.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:t},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(Qs);function $s(){return E.useContext(Ds)}var eu=E.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=(e.color,e.component),o=void 0===i?"label":i,s=(e.disabled,e.error,e.filled,e.focused,e.required,(0,qi.Z)(e,["children","classes","className","color","component","disabled","error","filled","focused","required"])),u=Rs({props:e,muiFormControl:$s(),states:["color","required","focused","disabled","error","filled"]});return E.createElement(o,(0,_t.Z)({className:(0,yo.Z)(r.root,r["color".concat((0,bo.Z)(u.color||"primary"))],a,u.disabled&&r.disabled,u.error&&r.error,u.filled&&r.filled,u.focused&&r.focused,u.required&&r.required),ref:t},s),n,u.required&&E.createElement("span",{"aria-hidden":!0,className:(0,yo.Z)(r.asterisk,u.error&&r.error)},"\u2009","*"))})),tu=(0,Rt.Z)((function(e){return{root:(0,_t.Z)({color:e.palette.text.secondary},e.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:e.palette.primary.main},"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),colorSecondary:{"&$focused":{color:e.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:e.palette.error.main}}}}),{name:"MuiFormLabel"})(eu),nu=E.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.disableAnimation,i=void 0!==a&&a,o=(e.margin,e.shrink),s=(e.variant,(0,qi.Z)(e,["classes","className","disableAnimation","margin","shrink","variant"])),u=$s(),l=o;"undefined"===typeof l&&u&&(l=u.filled||u.focused||u.adornedStart);var c=Rs({props:e,muiFormControl:u,states:["margin","variant"]});return E.createElement(tu,(0,_t.Z)({"data-shrink":l,className:(0,yo.Z)(n.root,r,u&&n.formControl,!i&&n.animated,l&&n.shrink,"dense"===c.margin&&n.marginDense,{filled:n.filled,outlined:n.outlined}[c.variant]),classes:{focused:n.focused,disabled:n.disabled,error:n.error,required:n.required,asterisk:n.asterisk},ref:t},s))})),ru=(0,Rt.Z)((function(e){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:e.transitions.create(["color","transform"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}}),{name:"MuiInputLabel"})(nu),au=n(3375),iu=E.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.color,o=void 0===i?"primary":i,s=e.component,u=void 0===s?"div":s,l=e.disabled,c=void 0!==l&&l,d=e.error,h=void 0!==d&&d,p=e.fullWidth,f=void 0!==p&&p,m=e.focused,v=e.hiddenLabel,g=void 0!==v&&v,y=e.margin,b=void 0===y?"none":y,x=e.required,w=void 0!==x&&x,k=e.size,S=e.variant,T=void 0===S?"standard":S,C=(0,qi.Z)(e,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),_=E.useState((function(){var e=!1;return n&&E.Children.forEach(n,(function(t){if((0,au.Z)(t,["Input","Select"])){var n=(0,au.Z)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}})),e})),M=_[0],I=_[1],N=E.useState((function(){var e=!1;return n&&E.Children.forEach(n,(function(t){(0,au.Z)(t,["Input","Select"])&&Us(t.props,!0)&&(e=!0)})),e})),A=N[0],R=N[1],O=E.useState(!1),D=O[0],L=O[1],P=void 0!==m?m:D;c&&P&&L(!1);var F=E.useCallback((function(){R(!0)}),[]),j={adornedStart:M,setAdornedStart:I,color:o,disabled:c,error:h,filled:A,focused:P,fullWidth:f,hiddenLabel:g,margin:("small"===k?"dense":void 0)||b,onBlur:function(){L(!1)},onEmpty:E.useCallback((function(){R(!1)}),[]),onFilled:F,onFocus:function(){L(!0)},registerEffect:undefined,required:w,variant:T};return E.createElement(Ds.Provider,{value:j},E.createElement(u,(0,_t.Z)({className:(0,yo.Z)(r.root,a,"none"!==b&&r["margin".concat((0,bo.Z)(b))],f&&r.fullWidth),ref:t},C),n))})),ou=(0,Rt.Z)({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(iu),su=E.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.component,o=void 0===i?"p":i,s=(e.disabled,e.error,e.filled,e.focused,e.margin,e.required,e.variant,(0,qi.Z)(e,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),u=Rs({props:e,muiFormControl:$s(),states:["variant","margin","disabled","error","filled","focused","required"]});return E.createElement(o,(0,_t.Z)({className:(0,yo.Z)(r.root,("filled"===u.variant||"outlined"===u.variant)&&r.contained,a,u.disabled&&r.disabled,u.error&&r.error,u.filled&&r.filled,u.focused&&r.focused,u.required&&r.required,"dense"===u.margin&&r.marginDense),ref:t},s)," "===n?E.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):n)})),uu=(0,Rt.Z)((function(e){return{root:(0,_t.Z)({color:e.palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(su),lu=n(5352);n(7441);function cu(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var du={entering:{opacity:1,transform:cu(1)},entered:{opacity:1,transform:"none"}},hu=E.forwardRef((function(e,t){var n=e.children,r=e.disableStrictModeCompat,a=void 0!==r&&r,i=e.in,o=e.onEnter,s=e.onEntered,u=e.onEntering,l=e.onExit,c=e.onExited,d=e.onExiting,h=e.style,p=e.timeout,f=void 0===p?"auto":p,m=e.TransitionComponent,v=void 0===m?so:m,g=(0,qi.Z)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),y=E.useRef(),b=E.useRef(),x=lo(),w=x.unstable_strictMode&&!a,k=E.useRef(null),S=(0,uo.Z)(n.ref,t),T=(0,uo.Z)(w?k:void 0,S),C=function(e){return function(t,n){if(e){var r=w?[k.current,t]:[t,n],a=(0,U.Z)(r,2),i=a[0],o=a[1];void 0===o?e(i):e(i,o)}}},_=C(u),M=C((function(e,t){ho(e);var n,r=po({style:h,timeout:f},{mode:"enter"}),a=r.duration,i=r.delay;"auto"===f?(n=x.transitions.getAutoHeightDuration(e.clientHeight),b.current=n):n=a,e.style.transition=[x.transitions.create("opacity",{duration:n,delay:i}),x.transitions.create("transform",{duration:.666*n,delay:i})].join(","),o&&o(e,t)})),I=C(s),N=C(d),A=C((function(e){var t,n=po({style:h,timeout:f},{mode:"exit"}),r=n.duration,a=n.delay;"auto"===f?(t=x.transitions.getAutoHeightDuration(e.clientHeight),b.current=t):t=r,e.style.transition=[x.transitions.create("opacity",{duration:t,delay:a}),x.transitions.create("transform",{duration:.666*t,delay:a||.333*t})].join(","),e.style.opacity="0",e.style.transform=cu(.75),l&&l(e)})),R=C(c);return E.useEffect((function(){return function(){clearTimeout(y.current)}}),[]),E.createElement(v,(0,_t.Z)({appear:!0,in:i,nodeRef:w?k:void 0,onEnter:M,onEntered:I,onEntering:_,onExit:A,onExited:R,onExiting:N,addEndListener:function(e,t){var n=w?e:t;"auto"===f&&(y.current=setTimeout(n,b.current||0))},timeout:"auto"===f?null:f},g),(function(e,t){return E.cloneElement(n,(0,_t.Z)({style:(0,_t.Z)({opacity:0,transform:cu(.75),visibility:"exited"!==e||i?void 0:"hidden"},du[e],h,n.props.style),ref:T},t))}))}));hu.muiSupportAuto=!0;var pu=hu;function fu(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function mu(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function vu(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function gu(e){return"function"===typeof e?e():e}var yu=E.forwardRef((function(e,t){var n=e.action,r=e.anchorEl,a=e.anchorOrigin,i=void 0===a?{vertical:"top",horizontal:"left"}:a,o=e.anchorPosition,s=e.anchorReference,u=void 0===s?"anchorEl":s,l=e.children,c=e.classes,d=e.className,h=e.container,p=e.elevation,f=void 0===p?8:p,m=e.getContentAnchorEl,v=e.marginThreshold,g=void 0===v?16:v,y=e.onEnter,b=e.onEntered,x=e.onEntering,w=e.onExit,k=e.onExited,S=e.onExiting,T=e.open,C=e.PaperProps,_=void 0===C?{}:C,M=e.transformOrigin,I=void 0===M?{vertical:"top",horizontal:"left"}:M,N=e.TransitionComponent,A=void 0===N?pu:N,R=e.transitionDuration,O=void 0===R?"auto":R,D=e.TransitionProps,L=void 0===D?{}:D,P=(0,qi.Z)(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),F=E.useRef(),j=E.useCallback((function(e){if("anchorPosition"===u)return o;var t=gu(r),n=(t&&1===t.nodeType?t:(0,wo.Z)(F.current).body).getBoundingClientRect(),a=0===e?i.vertical:"center";return{top:n.top+fu(n,a),left:n.left+mu(n,i.horizontal)}}),[r,i.horizontal,i.vertical,o,u]),z=E.useCallback((function(e){var t=0;if(m&&"anchorEl"===u){var n=m(e);if(n&&e.contains(n)){var r=function(e,t){for(var n=t,r=0;n&&n!==e;)r+=(n=n.parentElement).scrollTop;return r}(e,n);t=n.offsetTop+n.clientHeight/2-r||0}0}return t}),[i.vertical,u,m]),B=E.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:fu(e,I.vertical)+t,horizontal:mu(e,I.horizontal)}}),[I.horizontal,I.vertical]),U=E.useCallback((function(e){var t=z(e),n={width:e.offsetWidth,height:e.offsetHeight},a=B(n,t);if("none"===u)return{top:null,left:null,transformOrigin:vu(a)};var i=j(t),o=i.top-a.vertical,s=i.left-a.horizontal,l=o+n.height,c=s+n.width,d=(0,No.Z)(gu(r)),h=d.innerHeight-g,p=d.innerWidth-g;if(o<g){var f=o-g;o-=f,a.vertical+=f}else if(l>h){var m=l-h;o-=m,a.vertical+=m}if(s<g){var v=s-g;s-=v,a.horizontal+=v}else if(c>p){var y=c-p;s-=y,a.horizontal+=y}return{top:"".concat(Math.round(o),"px"),left:"".concat(Math.round(s),"px"),transformOrigin:vu(a)}}),[r,u,j,z,B,g]),W=E.useCallback((function(){var e=F.current;if(e){var t=U(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[U]),V=E.useCallback((function(e){F.current=Xi.findDOMNode(e)}),[]);E.useEffect((function(){T&&W()})),E.useImperativeHandle(n,(function(){return T?{updatePosition:function(){W()}}:null}),[T,W]),E.useEffect((function(){if(T){var e=(0,Yi.Z)((function(){W()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[T,W]);var Z=O;"auto"!==O||A.muiSupportAuto||(Z=void 0);var H=h||(r?(0,wo.Z)(gu(r)).body:void 0);return E.createElement(Wo,(0,_t.Z)({container:H,open:T,ref:t,BackdropProps:{invisible:!0},className:(0,yo.Z)(c.root,d)},P),E.createElement(A,(0,_t.Z)({appear:!0,in:T,onEnter:y,onEntered:b,onExit:w,onExited:k,onExiting:S,timeout:Z},L,{onEntering:(0,Co.Z)((function(e,t){x&&x(e,t),W()}),L.onEntering)}),E.createElement(Ko,(0,_t.Z)({elevation:f,ref:V},_,{className:(0,yo.Z)(c.paper,_.className)}),l)))})),bu=(0,Rt.Z)({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(yu);var xu=E.createContext({}),wu=E.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.component,o=void 0===i?"ul":i,s=e.dense,u=void 0!==s&&s,l=e.disablePadding,c=void 0!==l&&l,d=e.subheader,h=(0,qi.Z)(e,["children","classes","className","component","dense","disablePadding","subheader"]),p=E.useMemo((function(){return{dense:u}}),[u]);return E.createElement(xu.Provider,{value:p},E.createElement(o,(0,_t.Z)({className:(0,yo.Z)(r.root,a,u&&r.dense,!c&&r.padding,d&&r.subheader),ref:t},h),d,n))})),ku=(0,Rt.Z)({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(wu);function Su(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function Eu(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function Tu(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function Cu(e,t,n,r,a,i){for(var o=!1,s=a(e,t,!!t&&n);s;){if(s===e.firstChild){if(o)return;o=!0}var u=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&Tu(s,i)&&!u)return void s.focus();s=a(e,s,n)}}var _u="undefined"===typeof window?E.useEffect:E.useLayoutEffect,Mu=E.forwardRef((function(e,t){var n=e.actions,r=e.autoFocus,a=void 0!==r&&r,i=e.autoFocusItem,o=void 0!==i&&i,s=e.children,u=e.className,l=e.disabledItemsFocusable,c=void 0!==l&&l,d=e.disableListWrap,h=void 0!==d&&d,p=e.onKeyDown,f=e.variant,m=void 0===f?"selectedMenu":f,v=(0,qi.Z)(e,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),g=E.useRef(null),y=E.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});_u((function(){a&&g.current.focus()}),[a]),E.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!g.current.style.width;if(e.clientHeight<g.current.clientHeight&&n){var r="".concat(Io(),"px");g.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,g.current.style.width="calc(100% + ".concat(r,")")}return g.current}}}),[]);var b=E.useCallback((function(e){g.current=Xi.findDOMNode(e)}),[]),x=(0,uo.Z)(b,t),w=-1;E.Children.forEach(s,(function(e,t){E.isValidElement(e)&&(e.props.disabled||("selectedMenu"===m&&e.props.selected||-1===w)&&(w=t))}));var k=E.Children.map(s,(function(e,t){if(t===w){var n={};return o&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===m&&(n.tabIndex=0),E.cloneElement(e,n)}return e}));return E.createElement(ku,(0,_t.Z)({role:"menu",ref:x,className:u,onKeyDown:function(e){var t=g.current,n=e.key,r=(0,wo.Z)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),Cu(t,r,h,c,Su);else if("ArrowUp"===n)e.preventDefault(),Cu(t,r,h,c,Eu);else if("Home"===n)e.preventDefault(),Cu(t,null,h,c,Su);else if("End"===n)e.preventDefault(),Cu(t,null,h,c,Eu);else if(1===n.length){var a=y.current,i=n.toLowerCase(),o=performance.now();a.keys.length>0&&(o-a.lastTime>500?(a.keys=[],a.repeating=!0,a.previousKeyMatched=!0):a.repeating&&i!==a.keys[0]&&(a.repeating=!1)),a.lastTime=o,a.keys.push(i);var s=r&&!a.repeating&&Tu(r,a);a.previousKeyMatched&&(s||Cu(t,r,!1,c,Su,a))?e.preventDefault():a.previousKeyMatched=!1}p&&p(e)},tabIndex:a?0:-1},v),k)})),Iu=Mu,Nu={vertical:"top",horizontal:"right"},Au={vertical:"top",horizontal:"left"},Ru=E.forwardRef((function(e,t){var n=e.autoFocus,r=void 0===n||n,a=e.children,i=e.classes,o=e.disableAutoFocusItem,s=void 0!==o&&o,u=e.MenuListProps,l=void 0===u?{}:u,c=e.onClose,d=e.onEntering,h=e.open,p=e.PaperProps,f=void 0===p?{}:p,m=e.PopoverClasses,v=e.transitionDuration,g=void 0===v?"auto":v,y=e.TransitionProps,b=(y=void 0===y?{}:y).onEntering,x=(0,qi.Z)(y,["onEntering"]),w=e.variant,k=void 0===w?"selectedMenu":w,S=(0,qi.Z)(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"]),T=lo(),C=r&&!s&&h,_=E.useRef(null),M=E.useRef(null),I=-1;E.Children.map(a,(function(e,t){E.isValidElement(e)&&(e.props.disabled||("menu"!==k&&e.props.selected||-1===I)&&(I=t))}));var N=E.Children.map(a,(function(e,t){return t===I?E.cloneElement(e,{ref:function(t){M.current=Xi.findDOMNode(t),(0,ko.Z)(e.ref,t)}}):e}));return E.createElement(bu,(0,_t.Z)({getContentAnchorEl:function(){return M.current},classes:m,onClose:c,TransitionProps:(0,_t.Z)({onEntering:function(e,t){_.current&&_.current.adjustStyleForScrollbar(e,T),d&&d(e,t),b&&b(e,t)}},x),anchorOrigin:"rtl"===T.direction?Nu:Au,transformOrigin:"rtl"===T.direction?Nu:Au,PaperProps:(0,_t.Z)({},f,{classes:(0,_t.Z)({},f.classes,{root:i.paper})}),open:h,ref:t,transitionDuration:g},S),E.createElement(Iu,(0,_t.Z)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),c&&c(e,"tabKeyDown"))},actions:_,autoFocus:r&&(-1===I||s),autoFocusItem:C,variant:k},l,{className:(0,yo.Z)(i.list,l.className)}),N))})),Ou=(0,Rt.Z)({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(Ru),Du=n(2497);function Lu(e,t){return"object"===(0,D.Z)(t)&&null!==t?e===t:String(e)===String(t)}var Pu=E.forwardRef((function(e,t){var n=e["aria-label"],r=e.autoFocus,a=e.autoWidth,i=e.children,o=e.classes,s=e.className,u=e.defaultValue,l=e.disabled,c=e.displayEmpty,d=e.IconComponent,h=e.inputRef,p=e.labelId,f=e.MenuProps,m=void 0===f?{}:f,v=e.multiple,g=e.name,y=e.onBlur,b=e.onChange,x=e.onClose,w=e.onFocus,k=e.onOpen,S=e.open,T=e.readOnly,C=e.renderValue,_=e.SelectDisplayProps,M=void 0===_?{}:_,I=e.tabIndex,N=(e.type,e.value),A=e.variant,R=void 0===A?"standard":A,O=(0,qi.Z)(e,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),D=(0,Du.Z)({controlled:N,default:u,name:"Select"}),L=(0,U.Z)(D,2),P=L[0],F=L[1],j=E.useRef(null),z=E.useState(null),B=z[0],W=z[1],V=E.useRef(null!=S).current,Z=E.useState(),H=Z[0],G=Z[1],q=E.useState(!1),X=q[0],Y=q[1],K=(0,uo.Z)(t,h);E.useImperativeHandle(K,(function(){return{focus:function(){B.focus()},node:j.current,value:P}}),[B,P]),E.useEffect((function(){r&&B&&B.focus()}),[r,B]),E.useEffect((function(){if(B){var e=(0,wo.Z)(B).getElementById(p);if(e){var t=function(){getSelection().isCollapsed&&B.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[p,B]);var Q,J,$=function(e,t){e?k&&k(t):x&&x(t),V||(G(a?null:B.clientWidth),Y(e))},ee=E.Children.toArray(i),te=function(e){return function(t){var n;if(v||$(!1,t),v){n=Array.isArray(P)?P.slice():[];var r=P.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;e.props.onClick&&e.props.onClick(t),P!==n&&(F(n),b&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:n,name:g}}),b(t,e)))}},ne=null!==B&&(V?S:X);delete O["aria-invalid"];var re=[],ae=!1;(Us({value:P})||c)&&(C?Q=C(P):ae=!0);var ie=ee.map((function(e){if(!E.isValidElement(e))return null;var t;if(v){if(!Array.isArray(P))throw new Error((0,As.Z)(2));t=P.some((function(t){return Lu(t,e.props.value)})),t&&ae&&re.push(e.props.children)}else(t=Lu(P,e.props.value))&&ae&&(J=e.props.children);return t&&!0,E.cloneElement(e,{"aria-selected":t?"true":void 0,onClick:te(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));ae&&(Q=v?re.join(", "):J);var oe,se=H;!a&&V&&B&&(se=B.clientWidth),oe="undefined"!==typeof I?I:l?null:0;var ue=M.id||(g?"mui-component-select-".concat(g):void 0);return E.createElement(E.Fragment,null,E.createElement("div",(0,_t.Z)({className:(0,yo.Z)(o.root,o.select,o.selectMenu,o[R],s,l&&o.disabled),ref:W,tabIndex:oe,role:"button","aria-disabled":l?"true":void 0,"aria-expanded":ne?"true":void 0,"aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[p,ue].filter(Boolean).join(" ")||void 0,onKeyDown:function(e){if(!T){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),$(!0,e))}},onMouseDown:l||T?null:function(e){0===e.button&&(e.preventDefault(),B.focus(),$(!0,e))},onBlur:function(e){!ne&&y&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:P,name:g}}),y(e))},onFocus:w},M,{id:ue}),function(e){return null==e||"string"===typeof e&&!e.trim()}(Q)?E.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):Q),E.createElement("input",(0,_t.Z)({value:Array.isArray(P)?P.join(","):P,name:g,ref:j,"aria-hidden":!0,onChange:function(e){var t=ee.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=ee[t];F(n.props.value),b&&b(e,n)}},tabIndex:-1,className:o.nativeInput,autoFocus:r},O)),E.createElement(d,{className:(0,yo.Z)(o.icon,o["icon".concat((0,bo.Z)(R))],ne&&o.iconOpen,l&&o.disabled)}),E.createElement(Ou,(0,_t.Z)({id:"menu-".concat(g||""),anchorEl:B,open:ne,onClose:function(e){$(!1,e)}},m,{MenuListProps:(0,_t.Z)({"aria-labelledby":p,role:"listbox",disableListWrap:!0},m.MenuListProps),PaperProps:(0,_t.Z)({},m.PaperProps,{style:(0,_t.Z)({minWidth:se},null!=m.PaperProps?m.PaperProps.style:null)})}),ie))})),Fu=Pu,ju=n(8499),zu=(0,ju.Z)(E.createElement("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Bu=E.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.disabled,i=e.IconComponent,o=e.inputRef,s=e.variant,u=void 0===s?"standard":s,l=(0,qi.Z)(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return E.createElement(E.Fragment,null,E.createElement("select",(0,_t.Z)({className:(0,yo.Z)(n.root,n.select,n[u],r,a&&n.disabled),disabled:a,ref:o||t},l)),e.multiple?null:E.createElement(i,{className:(0,yo.Z)(n.icon,n["icon".concat((0,bo.Z)(u))],a&&n.disabled)}))})),Uu=Bu,Wu=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},Vu=E.createElement(Gs,null),Zu=E.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.IconComponent,i=void 0===a?zu:a,o=e.input,s=void 0===o?Vu:o,u=e.inputProps,l=(e.variant,(0,qi.Z)(e,["children","classes","IconComponent","input","inputProps","variant"])),c=Rs({props:e,muiFormControl:$s(),states:["variant"]});return E.cloneElement(s,(0,_t.Z)({inputComponent:Uu,inputProps:(0,_t.Z)({children:n,classes:r,IconComponent:i,variant:c.variant,type:void 0},u,s?s.props.inputProps:{}),ref:t},l))}));Zu.muiName="Select";(0,Rt.Z)(Wu,{name:"MuiNativeSelect"})(Zu);var Hu=Wu,Gu=E.createElement(Gs,null),qu=E.createElement(Xs,null),Xu=E.forwardRef((function e(t,n){var r=t.autoWidth,a=void 0!==r&&r,i=t.children,o=t.classes,s=t.displayEmpty,u=void 0!==s&&s,l=t.IconComponent,c=void 0===l?zu:l,d=t.id,h=t.input,p=t.inputProps,f=t.label,m=t.labelId,v=t.labelWidth,g=void 0===v?0:v,y=t.MenuProps,b=t.multiple,x=void 0!==b&&b,w=t.native,k=void 0!==w&&w,S=t.onClose,T=t.onOpen,C=t.open,_=t.renderValue,M=t.SelectDisplayProps,I=t.variant,N=void 0===I?"standard":I,A=(0,qi.Z)(t,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),R=k?Uu:Fu,O=Rs({props:t,muiFormControl:$s(),states:["variant"]}).variant||N,D=h||{standard:Gu,outlined:E.createElement(Js,{label:f,labelWidth:g}),filled:qu}[O];return E.cloneElement(D,(0,_t.Z)({inputComponent:R,inputProps:(0,_t.Z)({children:i,IconComponent:c,variant:O,type:void 0,multiple:x},k?{id:d}:{autoWidth:a,displayEmpty:u,labelId:m,MenuProps:y,onClose:S,onOpen:T,open:C,renderValue:_,SelectDisplayProps:(0,_t.Z)({id:d},M)},p,{classes:p?(0,lu.Z)({baseClasses:o,newClasses:p.classes,Component:e}):o},h?h.props.inputProps:{}),ref:n},A))}));Xu.muiName="Select";var Yu=(0,Rt.Z)(Hu,{name:"MuiSelect"})(Xu),Ku={standard:Gs,filled:Xs,outlined:Js},Qu=E.forwardRef((function(e,t){var n=e.autoComplete,r=e.autoFocus,a=void 0!==r&&r,i=e.children,o=e.classes,s=e.className,u=e.color,l=void 0===u?"primary":u,c=e.defaultValue,d=e.disabled,h=void 0!==d&&d,p=e.error,f=void 0!==p&&p,m=e.FormHelperTextProps,v=e.fullWidth,g=void 0!==v&&v,y=e.helperText,b=e.hiddenLabel,x=e.id,w=e.InputLabelProps,k=e.inputProps,S=e.InputProps,T=e.inputRef,C=e.label,_=e.multiline,M=void 0!==_&&_,I=e.name,N=e.onBlur,A=e.onChange,R=e.onFocus,O=e.placeholder,D=e.required,L=void 0!==D&&D,P=e.rows,F=e.rowsMax,j=e.maxRows,z=e.minRows,B=e.select,U=void 0!==B&&B,W=e.SelectProps,V=e.type,Z=e.value,H=e.variant,G=void 0===H?"standard":H,q=(0,qi.Z)(e,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","maxRows","minRows","select","SelectProps","type","value","variant"]);var X={};if("outlined"===G&&(w&&"undefined"!==typeof w.shrink&&(X.notched=w.shrink),C)){var Y,K=null!==(Y=null===w||void 0===w?void 0:w.required)&&void 0!==Y?Y:L;X.label=E.createElement(E.Fragment,null,C,K&&"\xa0*")}U&&(W&&W.native||(X.id=void 0),X["aria-describedby"]=void 0);var Q=y&&x?"".concat(x,"-helper-text"):void 0,J=C&&x?"".concat(x,"-label"):void 0,$=Ku[G],ee=E.createElement($,(0,_t.Z)({"aria-describedby":Q,autoComplete:n,autoFocus:a,defaultValue:c,fullWidth:g,multiline:M,name:I,rows:P,rowsMax:F,maxRows:j,minRows:z,type:V,value:Z,id:x,inputRef:T,onBlur:N,onChange:A,onFocus:R,placeholder:O,inputProps:k},X,S));return E.createElement(ou,(0,_t.Z)({className:(0,yo.Z)(o.root,s),disabled:h,error:f,fullWidth:g,hiddenLabel:b,ref:t,required:L,color:l,variant:G},q),C&&E.createElement(ru,(0,_t.Z)({htmlFor:x,id:J},w),C),U?E.createElement(Yu,(0,_t.Z)({"aria-describedby":Q,id:x,labelId:J,value:Z,input:ee},W),i):ee,y&&E.createElement(uu,(0,_t.Z)({id:Q},m),y))})),Ju=(0,Rt.Z)({root:{}},{name:"MuiTextField"})(Qu),$u=E.forwardRef((function(e,t){var n=e.disableSpacing,r=void 0!==n&&n,a=e.classes,i=e.className,o=(0,qi.Z)(e,["disableSpacing","classes","className"]);return E.createElement("div",(0,_t.Z)({className:(0,yo.Z)(a.root,i,!r&&a.spacing),ref:t},o))})),el=(0,Rt.Z)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})($u),tl=E.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.color,o=void 0===i?"default":i,s=e.component,u=void 0===s?"button":s,l=e.disabled,c=void 0!==l&&l,d=e.disableElevation,h=void 0!==d&&d,p=e.disableFocusRipple,f=void 0!==p&&p,m=e.endIcon,v=e.focusVisibleClassName,g=e.fullWidth,y=void 0!==g&&g,b=e.size,x=void 0===b?"medium":b,w=e.startIcon,k=e.type,S=void 0===k?"button":k,T=e.variant,C=void 0===T?"text":T,_=(0,qi.Z)(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),M=w&&E.createElement("span",{className:(0,yo.Z)(r.startIcon,r["iconSize".concat((0,bo.Z)(x))])},w),I=m&&E.createElement("span",{className:(0,yo.Z)(r.endIcon,r["iconSize".concat((0,bo.Z)(x))])},m);return E.createElement(ps,(0,_t.Z)({className:(0,yo.Z)(r.root,r[C],a,"inherit"===o?r.colorInherit:"default"!==o&&r["".concat(C).concat((0,bo.Z)(o))],"medium"!==x&&[r["".concat(C,"Size").concat((0,bo.Z)(x))],r["size".concat((0,bo.Z)(x))]],h&&r.disableElevation,c&&r.disabled,y&&r.fullWidth),component:u,disabled:c,focusRipple:!f,focusVisibleClassName:(0,yo.Z)(r.focusVisible,v),ref:t,type:S},_),E.createElement("span",{className:r.label},M,n,I))})),nl=(0,Rt.Z)((function(e){return{root:(0,_t.Z)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:(0,es.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,es.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,es.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat((0,es.Fq)(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:(0,es.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat((0,es.Fq)(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:(0,es.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(tl),rl=(0,ju.Z)(E.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),al=(window.indexedDB,n(1176));var il=n(6421),ol="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function sl(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||il))return new XMLHttpRequest}catch(GK){}if(!t)try{return new(ol[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(GK){}}function ul(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var ll=setTimeout,cl=clearTimeout;function dl(e,t){t.useNativeTimers?(e.setTimeoutFn=ll.bind(ol),e.clearTimeoutFn=cl.bind(ol)):(e.setTimeoutFn=setTimeout.bind(ol),e.clearTimeoutFn=clearTimeout.bind(ol))}var hl=n(3529);function pl(){return pl="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},pl.apply(this,arguments)}var fl=Object.create(null);fl.open="0",fl.close="1",fl.ping="2",fl.pong="3",fl.message="4",fl.upgrade="5",fl.noop="6";var ml=Object.create(null);Object.keys(fl).forEach((function(e){ml[fl[e]]=e}));for(var vl={type:"error",data:"parser error"},gl="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),yl="function"===typeof ArrayBuffer,bl=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)},xl=function(e,t,n){var r,a=e.type,i=e.data;return gl&&i instanceof Blob?t?n(i):bl(i,n):yl&&(i instanceof ArrayBuffer||(r=i,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?t?n(i):bl(new Blob([i]),n):n(fl[a]+(i||""))},wl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kl="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Sl=0;Sl<64;Sl++)kl[wl.charCodeAt(Sl)]=Sl;var El="function"===typeof ArrayBuffer,Tl=function(e,t){if(El){var n=function(e){var t,n,r,a,i,o=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l=new ArrayBuffer(o),c=new Uint8Array(l);for(t=0;t<s;t+=4)n=kl[e.charCodeAt(t)],r=kl[e.charCodeAt(t+1)],a=kl[e.charCodeAt(t+2)],i=kl[e.charCodeAt(t+3)],c[u++]=n<<2|r>>4,c[u++]=(15&r)<<4|a>>2,c[u++]=(3&a)<<6|63&i;return l}(e);return Cl(n,t)}return{base64:!0,data:e}},Cl=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},_l=function(e,t){if("string"!==typeof e)return{type:"message",data:Cl(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:Tl(e.substring(1),t)}:ml[n]?e.length>1?{type:ml[n],data:e.substring(1)}:{type:ml[n]}:vl},Ml=String.fromCharCode(30),Il=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).writable=!1,dl((0,L.Z)(r),e),r.opts=e,r.query=e.query,r.readyState="",r.socket=e.socket,r}return(0,I.Z)(n,[{key:"onError",value:function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,pl(R(n.prototype),"emit",this).call(this,"error",r),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,pl(R(n.prototype),"emit",this).call(this,"open")}},{key:"onData",value:function(e){var t=_l(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){pl(R(n.prototype),"emit",this).call(this,"packet",e)}},{key:"onClose",value:function(){this.readyState="closed",pl(R(n.prototype),"emit",this).call(this,"close")}}]),n}(hl.Q),Nl=n(5590),Al=n(5988),Rl=function(e){A(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.apply(this,arguments)).polling=!1,e}return(0,I.Z)(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emit("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(Ml),r=[],a=0;a<n.length;a++){var i=_l(n[a],t);if(r.push(i),"error"===i.type)break}return r})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var n=e.length,r=new Array(n),a=0;e.forEach((function(e,i){xl(e,!1,(function(e){r[i]=e,++a===n&&t(r.join(Ml))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emit("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=Nl()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=Al.encode(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}}]),n}(Il);function Ol(){}var Dl=null!=new sl({xdomain:!1}).responseType,Ll=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),r=t.call(this,e),"undefined"!==typeof location){var a="https:"===location.protocol,i=location.port;i||(i=a?"443":"80"),r.xd="undefined"!==typeof location&&e.hostname!==location.hostname||i!==e.port,r.xs=e.secure!==a}var o=e&&e.forceBase64;return r.supportsBinary=Dl&&!o,r}return(0,I.Z)(n,[{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Pl(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(function(e){n.onError("xhr post error",e)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t}}]),n}(Rl),Pl=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),a=t.call(this),dl((0,L.Z)(a),r),a.opts=r,a.method=r.method||"GET",a.uri=e,a.async=!1!==r.async,a.data=void 0!==r.data?r.data:null,a.create(),a}return(0,I.Z)(n,[{key:"create",value:function(){var e=this,t=ul(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var r=this.xhr=new sl(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var a in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this.opts.extraHeaders[a])}catch(GK){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(GK){}try{r.setRequestHeader("Accept","*/*")}catch(GK){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(GK){return void this.setTimeoutFn((function(){e.onError(GK)}),0)}"undefined"!==typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success"),this.cleanup()}},{key:"onData",value:function(e){this.emit("data",e),this.onSuccess()}},{key:"onError",value:function(e){this.emit("error",e),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=Ol,e)try{this.xhr.abort()}catch(GK){}"undefined"!==typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&this.onData(e)}},{key:"abort",value:function(){this.cleanup()}}]),n}(hl.Q);if(Pl.requestsCount=0,Pl.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",Fl);else if("function"===typeof addEventListener){addEventListener("onpagehide"in ol?"pagehide":"unload",Fl,!1)}function Fl(){for(var e in Pl.requests)Pl.requests.hasOwnProperty(e)&&Pl.requests[e].abort()}var jl="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},zl=ol.WebSocket||ol.MozWebSocket,Bl="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),Ul=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).supportsBinary=!e.forceBase64,r}return(0,I.Z)(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=Bl?{}:ul(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Bl?new zl(e,t,n):t?new zl(e,t):new zl(e)}catch(r){return this.emit("error",r)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(){var n=e[r],a=r===e.length-1;xl(n,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(GK){}a&&jl((function(){t.writable=!0,t.emit("drain")}),t.setTimeoutFn)}))},r=0;r<e.length;r++)n()}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=Nl()),this.supportsBinary||(e.b64=1);var r=Al.encode(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!zl&&!("__initialize"in zl&&this.name===n.prototype.name)}}]),n}(Il),Wl={websocket:Ul,polling:Ll},Vl=function(e){A(n,e);var t=F(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return M(this,n),r=t.call(this),e&&"object"===typeof e&&(a=e,e=null),e?(e=al(e),a.hostname=e.host,a.secure="https"===e.protocol||"wss"===e.protocol,a.port=e.port,e.query&&(a.query=e.query)):a.host&&(a.hostname=al(a.host).host),dl((0,L.Z)(r),a),r.secure=null!=a.secure?a.secure:"undefined"!==typeof location&&"https:"===location.protocol,a.hostname&&!a.port&&(a.port=r.secure?"443":"80"),r.hostname=a.hostname||("undefined"!==typeof location?location.hostname:"localhost"),r.port=a.port||("undefined"!==typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=a.transports||["polling","websocket"],r.readyState="",r.writeBuffer=[],r.prevBufferLen=0,r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},a),r.opts.path=r.opts.path.replace(/\/$/,"")+"/","string"===typeof r.opts.query&&(r.opts.query=Al.decode(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"===typeof addEventListener&&(r.opts.closeOnBeforeunload&&addEventListener("beforeunload",(function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())}),!1),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close")},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return(0,I.Z)(n,[{key:"createTransport",value:function(e){var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Wl[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(GK){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(){t.onClose("transport close")}))}},{key:"probe",value:function(e){var t=this,r=this.createTransport(e),a=!1;n.priorWebsocketSuccess=!1;var i=function(){a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!a)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,t.transport.pause((function(){a||"closed"!==t.readyState&&(d(),t.setTransport(r),r.send([{type:"upgrade"}]),t.emitReserved("upgrade",r),r=null,t.upgrading=!1,t.flush())}))}else{var i=new Error("probe error");i.transport=r.name,t.emitReserved("upgradeError",i)}})))};function o(){a||(a=!0,d(),r.close(),r=null)}var s=function(e){var n=new Error("probe error: "+e);n.transport=r.name,o(),t.emitReserved("upgradeError",n)};function u(){s("transport closed")}function l(){s("socket closed")}function c(e){r&&e.name!==r.name&&o()}var d=function(){r.removeListener("open",i),r.removeListener("error",s),r.removeListener("close",u),t.off("close",l),t.off("upgrading",c)};r.once("open",i),r.once("error",s),r.once("close",u),this.once("close",l),this.once("upgrading",c),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var a={type:e,data:t,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){n.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(hl.Q);Vl.protocol=4;Vl.protocol;var Zl="function"===typeof ArrayBuffer,Hl=function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer},Gl=Object.prototype.toString,ql="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Gl.call(Blob),Xl="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Gl.call(File);function Yl(e){return Zl&&(e instanceof ArrayBuffer||Hl(e))||ql&&e instanceof Blob||Xl&&e instanceof File}function Kl(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(Kl(e[n]))return!0;return!1}if(Yl(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Kl(e.toJSON(),!0);for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&Kl(e[a]))return!0;return!1}function Ql(e){var t=[],n=e.data,r=e;return r.data=Jl(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Jl(e,t){if(!e)return e;if(Yl(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),a=0;a<e.length;a++)r[a]=Jl(e[a],t);return r}if("object"===typeof e&&!(e instanceof Date)){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=Jl(e[o],t));return i}return e}function $l(e,t){return e.data=ec(e.data,t),e.attachments=void 0,e}function ec(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=ec(e[n],t);else if("object"===typeof e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=ec(e[r],t));return e}var tc,nc=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(tc||(tc={}));var rc=function(){function e(){M(this,e)}return(0,I.Z)(e,[{key:"encode",value:function(e){return e.type!==tc.EVENT&&e.type!==tc.ACK||!Kl(e)?[this.encodeAsString(e)]:(e.type=e.type===tc.EVENT?tc.BINARY_EVENT:tc.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==tc.BINARY_EVENT&&e.type!==tc.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),t}},{key:"encodeAsBinary",value:function(e){var t=Ql(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}(),ac=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.call(this)}return(0,I.Z)(n,[{key:"add",value:function(e){var t;if("string"===typeof e)(t=this.decodeString(e)).type===tc.BINARY_EVENT||t.type===tc.BINARY_ACK?(this.reconstructor=new ic(t),0===t.attachments&&pl(R(n.prototype),"emitReserved",this).call(this,"decoded",t)):pl(R(n.prototype),"emitReserved",this).call(this,"decoded",t);else{if(!Yl(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,pl(R(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===tc[r.type])throw new Error("unknown packet type "+r.type);if(r.type===tc.BINARY_EVENT||r.type===tc.BINARY_ACK){for(var a=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var i=e.substring(a,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===e.charAt(t+1)){for(var o=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(o,t)}else r.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var u=t+1;++t;){var l=e.charAt(t);if(null==l||Number(l)!=l){--t;break}if(t===e.length)break}r.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var c=function(e){try{return JSON.parse(e)}catch(GK){return!1}}(e.substr(t));if(!n.isPayloadValid(r.type,c))throw new Error("invalid payload");r.data=c}return r}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case tc.CONNECT:return"object"===typeof t;case tc.DISCONNECT:return void 0===t;case tc.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case tc.EVENT:case tc.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case tc.ACK:case tc.BINARY_ACK:return Array.isArray(t)}}}]),n}(hl.Q);var ic=function(){function e(t){M(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return(0,I.Z)(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=$l(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function oc(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var sc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),uc=function(e){A(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this)).connected=!1,i.disconnected=!0,i.receiveBuffer=[],i.sendBuffer=[],i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=r,a&&a.auth&&(i.auth=a.auth),i.io._autoConnect&&i.open(),i}return(0,I.Z)(n,[{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[oc(e,"open",this.onopen.bind(this)),oc(e,"packet",this.onpacket.bind(this)),oc(e,"error",this.onerror.bind(this)),oc(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(sc.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.unshift(e);var a={type:tc.EVENT,data:n,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){var i=this.ids++,o=n.pop();this._registerAckCallback(i,o),a.id=i}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?this.packet(a):this.sendBuffer.push(a)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n=this,r=this.flags.timeout;if(void 0!==r){var a=this.io.setTimeoutFn((function(){delete n.acks[e];for(var r=0;r<n.sendBuffer.length;r++)n.sendBuffer[r].id===e&&n.sendBuffer.splice(r,1);t.call(n,new Error("operation has timed out"))}),r);this.acks[e]=function(){n.io.clearTimeoutFn(a);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t.apply(n,[null].concat(r))}}else this.acks[e]=t}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e.packet({type:tc.CONNECT,data:t})})):this.packet({type:tc.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case tc.CONNECT:if(e.data&&e.data.sid){var t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case tc.EVENT:case tc.BINARY_EVENT:this.onevent(e);break;case tc.ACK:case tc.BINARY_ACK:this.onack(e);break;case tc.DISCONNECT:this.ondisconnect();break;case tc.CONNECT_ERROR:this.destroy();var n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,r=G(this._anyListeners.slice());try{for(r.s();!(t=r.n()).done;){t.value.apply(this,e)}}catch(a){r.e(a)}finally{r.f()}}pl(R(n.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];t.packet({type:tc.ACK,id:e,data:a})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e){this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){return e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:tc.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}}]),n}(hl.Q),lc=n(8077),cc=function(t){A(r,t);var n=F(r);function r(t,a){var i,o;M(this,r),(i=n.call(this)).nsps={},i.subs=[],t&&"object"===typeof t&&(a=t,t=void 0),(a=a||{}).path=a.path||"/socket.io",i.opts=a,dl((0,L.Z)(i),a),i.reconnection(!1!==a.reconnection),i.reconnectionAttempts(a.reconnectionAttempts||1/0),i.reconnectionDelay(a.reconnectionDelay||1e3),i.reconnectionDelayMax(a.reconnectionDelayMax||5e3),i.randomizationFactor(null!==(o=a.randomizationFactor)&&void 0!==o?o:.5),i.backoff=new lc({min:i.reconnectionDelay(),max:i.reconnectionDelayMax(),jitter:i.randomizationFactor()}),i.timeout(null==a.timeout?2e4:a.timeout),i._readyState="closed",i.uri=t;var s=a.parser||e;return i.encoder=new s.Encoder,i.decoder=new s.Decoder,i._autoConnect=!1!==a.autoConnect,i._autoConnect&&i.open(),i}return(0,I.Z)(r,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new Vl(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var a=oc(n,"open",(function(){r.onopen(),e&&e()})),i=oc(n,"error",(function(n){r.cleanup(),r._readyState="closed",t.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var o=this._timeout;0===o&&a();var s=this.setTimeoutFn((function(){a(),n.close(),n.emit("error",new Error("timeout"))}),o);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(a),this.subs.push(i),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(oc(e,"ping",this.onping.bind(this)),oc(e,"data",this.ondata.bind(this)),oc(e,"error",this.onerror.bind(this)),oc(e,"close",this.onclose.bind(this)),oc(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){this.decoder.add(e)}},{key:"ondecoded",value:function(e){this.emitReserved("packet",e)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n||(n=new uc(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),r}(hl.Q),dc={};function hc(e,t){"object"===typeof e&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=al(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var a=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+t,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),a=r.source,i=r.id,o=r.path,s=dc[i]&&o in dc[i].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new cc(a,t):(dc[i]||(dc[i]=new cc(a,t)),n=dc[i]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}Object.assign(hc,{Manager:cc,Socket:uc,io:hc,connect:hc});var pc=hc(),fc=function(e,t){pc.on("notification_".concat(e._id),(function(e){console.log(e),t(e)}))},mc=function(e,t){pc.on("nuevo_reporte_".concat(e._id),(function(e){t(e)}))},vc=function(e){console.log("Revisando"),pc.emit("isConnected",{id:e._id,frontVersion:Yt.version})},gc=function(e,t,n,r,a,i,o,s){pc.emit(e,{title:r,from:t,subtitle:a,message:i,id:n,url:o,reportId:s||null})},yc=function(e,t,n,r,a,i,o){pc.emit(e,{title:n,from:t,subtitle:r,message:a,url:i,uid:o})},bc=function(e,t,n,r,a,i){pc.emit(e,{title:n,from:t,subtitle:r,message:a,url:i})},xc=n(7351);function wc(e,t){var n={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(n[r]=e[r])})),n}function kc(e){var t=function(t){var n=e(t);return t.css?(0,_t.Z)({},(0,xc.Z)(n,e((0,_t.Z)({theme:t.theme},t.css))),wc(t.css,[e.filterProps])):t.sx?(0,_t.Z)({},(0,xc.Z)(n,e((0,_t.Z)({theme:t.theme},t.sx))),wc(t.sx,[e.filterProps])):n};return t.propTypes={},t.filterProps=["css","sx"].concat((0,_.Z)(e.filterProps)),t}var Sc=kc;var Ec=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(e){return t.reduce((function(t,n){var r=n(e);return r?(0,xc.Z)(t,r):t}),{})};return r.propTypes={},r.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),r},Tc=n(6086);function Cc(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}var _c=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,a=e.themeKey,i=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=Cc(e.theme,a)||{};return(0,Tc.k)(e,n,(function(e){var t;return"function"===typeof o?t=o(e):Array.isArray(o)?t=o[e]||e:(t=Cc(o,e)||e,i&&(t=i(t))),!1===r?t:(0,Pt.Z)({},r,t)}))};return o.propTypes={},o.filterProps=[t],o};function Mc(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var Ic=Ec(_c({prop:"border",themeKey:"borders",transform:Mc}),_c({prop:"borderTop",themeKey:"borders",transform:Mc}),_c({prop:"borderRight",themeKey:"borders",transform:Mc}),_c({prop:"borderBottom",themeKey:"borders",transform:Mc}),_c({prop:"borderLeft",themeKey:"borders",transform:Mc}),_c({prop:"borderColor",themeKey:"palette"}),_c({prop:"borderRadius",themeKey:"shape"})),Nc=_c({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),Ac=Ec(Nc,_c({prop:"display"}),_c({prop:"overflow"}),_c({prop:"textOverflow"}),_c({prop:"visibility"}),_c({prop:"whiteSpace"})),Rc=Ec(_c({prop:"flexBasis"}),_c({prop:"flexDirection"}),_c({prop:"flexWrap"}),_c({prop:"justifyContent"}),_c({prop:"alignItems"}),_c({prop:"alignContent"}),_c({prop:"order"}),_c({prop:"flex"}),_c({prop:"flexGrow"}),_c({prop:"flexShrink"}),_c({prop:"alignSelf"}),_c({prop:"justifyItems"}),_c({prop:"justifySelf"})),Oc=Ec(_c({prop:"gridGap"}),_c({prop:"gridColumnGap"}),_c({prop:"gridRowGap"}),_c({prop:"gridColumn"}),_c({prop:"gridRow"}),_c({prop:"gridAutoFlow"}),_c({prop:"gridAutoColumns"}),_c({prop:"gridAutoRows"}),_c({prop:"gridTemplateColumns"}),_c({prop:"gridTemplateRows"}),_c({prop:"gridTemplateAreas"}),_c({prop:"gridArea"})),Dc=Ec(_c({prop:"position"}),_c({prop:"zIndex",themeKey:"zIndex"}),_c({prop:"top"}),_c({prop:"right"}),_c({prop:"bottom"}),_c({prop:"left"})),Lc=Ec(_c({prop:"color",themeKey:"palette"}),_c({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"})),Pc=_c({prop:"boxShadow",themeKey:"shadows"});function Fc(e){return e<=1?"".concat(100*e,"%"):e}var jc=_c({prop:"width",transform:Fc}),zc=_c({prop:"maxWidth",transform:Fc}),Bc=_c({prop:"minWidth",transform:Fc}),Uc=_c({prop:"height",transform:Fc}),Wc=_c({prop:"maxHeight",transform:Fc}),Vc=_c({prop:"minHeight",transform:Fc}),Zc=(_c({prop:"size",cssProperty:"width",transform:Fc}),_c({prop:"size",cssProperty:"height",transform:Fc}),Ec(jc,zc,Bc,Uc,Wc,Vc,_c({prop:"boxSizing"}))),Hc=n(9908),Gc=Ec(_c({prop:"fontFamily",themeKey:"typography"}),_c({prop:"fontSize",themeKey:"typography"}),_c({prop:"fontStyle",themeKey:"typography"}),_c({prop:"fontWeight",themeKey:"typography"}),_c({prop:"letterSpacing"}),_c({prop:"lineHeight"}),_c({prop:"textAlign"})),qc=n(2110),Xc=n.n(qc);function Yc(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.name,a=(0,qi.Z)(n,["name"]);var i,o=r,s="function"===typeof t?function(e){return{root:function(n){return t((0,_t.Z)({theme:e},n))}}}:{root:t},u=(0,jt.Z)(s,(0,_t.Z)({Component:e,name:r||e.displayName,classNamePrefix:o},a));t.filterProps&&(i=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);var l=E.forwardRef((function(t,n){var r=t.children,a=t.className,o=t.clone,s=t.component,l=(0,qi.Z)(t,["children","className","clone","component"]),c=u(t),d=(0,yo.Z)(c.root,a),h=l;if(i&&(h=function(e,t){var n={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(n[r]=e[r])})),n}(h,i)),o)return E.cloneElement(r,(0,_t.Z)({className:(0,yo.Z)(r.props.className,d)},h));if("function"===typeof r)return r((0,_t.Z)({className:d},h));var p=s||e;return E.createElement(p,(0,_t.Z)({ref:n,className:d},h),r)}));return Xc()(l,e),l}}var Kc=function(e){var t=Yc(e);return function(e,n){return t(e,(0,_t.Z)({defaultTheme:zt.Z},n))}},Qc=Sc(Ec(Ic,Ac,Rc,Oc,Dc,Lc,Pc,Zc,Hc.Z,Gc)),Jc=Kc("div")(Qc,{name:"MuiBox"}),$c=44,ed=E.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.color,i=void 0===a?"primary":a,o=e.disableShrink,s=void 0!==o&&o,u=e.size,l=void 0===u?40:u,c=e.style,d=e.thickness,h=void 0===d?3.6:d,p=e.value,f=void 0===p?0:p,m=e.variant,v=void 0===m?"indeterminate":m,g=(0,qi.Z)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),y={},b={},x={};if("determinate"===v||"static"===v){var w=2*Math.PI*(($c-h)/2);y.strokeDasharray=w.toFixed(3),x["aria-valuenow"]=Math.round(f),y.strokeDashoffset="".concat(((100-f)/100*w).toFixed(3),"px"),b.transform="rotate(-90deg)"}return E.createElement("div",(0,_t.Z)({className:(0,yo.Z)(n.root,r,"inherit"!==i&&n["color".concat((0,bo.Z)(i))],{determinate:n.determinate,indeterminate:n.indeterminate,static:n.static}[v]),style:(0,_t.Z)({width:l,height:l},b,c),ref:t,role:"progressbar"},x,g),E.createElement("svg",{className:n.svg,viewBox:"".concat(22," ").concat(22," ").concat($c," ").concat($c)},E.createElement("circle",{className:(0,yo.Z)(n.circle,s&&n.circleDisableShrink,{determinate:n.circleDeterminate,indeterminate:n.circleIndeterminate,static:n.circleStatic}[v]),style:y,cx:$c,cy:$c,r:($c-h)/2,fill:"none",strokeWidth:h})))})),td=(0,Rt.Z)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(ed),nd=function(e){var t=e.open,n=e.progress,r=e.loadingData,a=e.withProgress;return(0,xr.jsx)(Wo,{open:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,xr.jsx)(Jc,{sx:Zt,children:(0,xr.jsxs)("div",{style:{height:300,textAlign:"center"},children:[a&&(0,xr.jsx)(td,{variant:"determinate",size:200,value:Number(n)}),!a&&(0,xr.jsx)(td,{size:200}),(0,xr.jsx)("h2",{children:r})]})})})},rd="undefined"===typeof window?E.useEffect:E.useLayoutEffect,ad=E.forwardRef((function(e,t){var n=e.alignItems,r=void 0===n?"center":n,a=e.autoFocus,i=void 0!==a&&a,o=e.button,s=void 0!==o&&o,u=e.children,l=e.classes,c=e.className,d=e.component,h=e.ContainerComponent,p=void 0===h?"li":h,f=e.ContainerProps,m=(f=void 0===f?{}:f).className,v=(0,qi.Z)(f,["className"]),g=e.dense,y=void 0!==g&&g,b=e.disabled,x=void 0!==b&&b,w=e.disableGutters,k=void 0!==w&&w,S=e.divider,T=void 0!==S&&S,C=e.focusVisibleClassName,_=e.selected,M=void 0!==_&&_,I=(0,qi.Z)(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),N=E.useContext(xu),A={dense:y||N.dense||!1,alignItems:r},R=E.useRef(null);rd((function(){i&&R.current&&R.current.focus()}),[i]);var O=E.Children.toArray(u),D=O.length&&(0,au.Z)(O[O.length-1],["ListItemSecondaryAction"]),L=E.useCallback((function(e){R.current=Xi.findDOMNode(e)}),[]),P=(0,uo.Z)(L,t),F=(0,_t.Z)({className:(0,yo.Z)(l.root,c,A.dense&&l.dense,!k&&l.gutters,T&&l.divider,x&&l.disabled,s&&l.button,"center"!==r&&l.alignItemsFlexStart,D&&l.secondaryAction,M&&l.selected),disabled:x},I),j=d||"li";return s&&(F.component=d||"div",F.focusVisibleClassName=(0,yo.Z)(l.focusVisible,C),j=ps),D?(j=F.component||d?j:"div","li"===p&&("li"===j?j="div":"li"===F.component&&(F.component="div")),E.createElement(xu.Provider,{value:A},E.createElement(p,(0,_t.Z)({className:(0,yo.Z)(l.container,m),ref:P},v),E.createElement(j,F,O),O.pop()))):E.createElement(xu.Provider,{value:A},E.createElement(j,(0,_t.Z)({ref:P},F),O))})),id=(0,Rt.Z)((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}}),{name:"MuiListItem"})(ad),od=E.forwardRef((function(e,t){var n=e.autoFocus,r=e.checked,a=e.checkedIcon,i=e.classes,o=e.className,s=e.defaultChecked,u=e.disabled,l=e.icon,c=e.id,d=e.inputProps,h=e.inputRef,p=e.name,f=e.onBlur,m=e.onChange,v=e.onFocus,g=e.readOnly,y=e.required,b=e.tabIndex,x=e.type,w=e.value,k=(0,qi.Z)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),S=(0,Du.Z)({controlled:r,default:Boolean(s),name:"SwitchBase",state:"checked"}),T=(0,U.Z)(S,2),C=T[0],_=T[1],M=$s(),I=u;M&&"undefined"===typeof I&&(I=M.disabled);var N="checkbox"===x||"radio"===x;return E.createElement(ms,(0,_t.Z)({component:"span",className:(0,yo.Z)(i.root,o,C&&i.checked,I&&i.disabled),disabled:I,tabIndex:null,role:void 0,onFocus:function(e){v&&v(e),M&&M.onFocus&&M.onFocus(e)},onBlur:function(e){f&&f(e),M&&M.onBlur&&M.onBlur(e)},ref:t},k),E.createElement("input",(0,_t.Z)({autoFocus:n,checked:r,defaultChecked:s,className:i.input,disabled:I,id:N&&c,name:p,onChange:function(e){var t=e.target.checked;_(t),m&&m(e,t)},readOnly:g,ref:h,required:y,tabIndex:b,type:x,value:w},d)),C?a:l)})),sd=(0,Rt.Z)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(od),ud=E.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.color,i=void 0===a?"secondary":a,o=e.edge,s=void 0!==o&&o,u=e.size,l=void 0===u?"medium":u,c=(0,qi.Z)(e,["classes","className","color","edge","size"]),d=E.createElement("span",{className:n.thumb});return E.createElement("span",{className:(0,yo.Z)(n.root,r,{start:n.edgeStart,end:n.edgeEnd}[s],"small"===l&&n["size".concat((0,bo.Z)(l))])},E.createElement(sd,(0,_t.Z)({type:"checkbox",icon:d,checkedIcon:d,classes:{root:(0,yo.Z)(n.switchBase,n["color".concat((0,bo.Z)(i))]),input:n.input,checked:n.checked,disabled:n.disabled},ref:t},c)),E.createElement("span",{className:n.track}))})),ld=(0,Rt.Z)((function(e){return{root:{display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:"light"===e.palette.type?.12:.1}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,es.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.primary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,es.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.secondary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}}),{name:"MuiSwitch"})(ud),cd=E.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.color,o=void 0===i?"default":i,s=e.component,u=void 0===s?"button":s,l=e.disabled,c=void 0!==l&&l,d=e.disableFocusRipple,h=void 0!==d&&d,p=e.focusVisibleClassName,f=e.size,m=void 0===f?"large":f,v=e.variant,g=void 0===v?"circular":v,y=(0,qi.Z)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return E.createElement(ps,(0,_t.Z)({className:(0,yo.Z)(r.root,a,"large"!==m&&r["size".concat((0,bo.Z)(m))],c&&r.disabled,"extended"===g&&r.extended,{primary:r.primary,secondary:r.secondary,inherit:r.colorInherit}[o]),component:u,disabled:c,focusRipple:!h,focusVisibleClassName:(0,yo.Z)(r.focusVisible,p),ref:t},y),E.createElement("span",{className:r.label},n))})),dd=(0,Rt.Z)((function(e){return{root:(0,_t.Z)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(cd),hd=function(e){var t=e.open,n=e.userModal,r=e.handleChange,a=e.checked,i=(e.permissionsReports,e.permissionsUsers,e.closeModal);return(0,xr.jsx)(Wo,{open:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,xr.jsxs)(Jc,{sx:Zt,children:[(0,xr.jsx)("div",{style:{textAlign:"left",width:"100%"},children:(0,xr.jsx)("h2",{children:"Datos del Usuario"})}),(0,xr.jsxs)("div",{style:{width:"100%",height:"25vh"},children:[(0,xr.jsxs)("div",{style:{float:"left",width:"30%"},children:[(0,xr.jsx)("p",{children:(0,xr.jsx)("strong",{children:"Nombre y Apellido"})}),(0,xr.jsxs)("p",{children:[" ",n.name," ",n.lastName," "]}),(0,xr.jsx)("br",{}),(0,xr.jsx)("p",{children:(0,xr.jsx)("strong",{children:"Rol del usuario"})}),(0,xr.jsxs)("p",{children:[" ",n.roleTranslated," "]})]}),(0,xr.jsxs)("div",{style:{float:"left",width:"30%"},children:[(0,xr.jsx)("p",{children:(0,xr.jsx)("strong",{children:"Email"})}),(0,xr.jsxs)("p",{children:[" ",n.email]}),(0,xr.jsx)("br",{}),(0,xr.jsx)("p",{children:(0,xr.jsx)("strong",{children:"RUN"})}),(0,xr.jsxs)("p",{children:[" ",n.rut," "]})]}),(0,xr.jsx)("div",{style:{float:"right",width:"30%"},children:(0,xr.jsxs)(id,{children:[(0,xr.jsx)(ld,{onChange:r,checked:a}),a&&(0,xr.jsx)("p",{children:"Usuario activo"}),!a&&(0,xr.jsx)("p",{children:"Usuario inactivo"})]})})]}),(0,xr.jsx)("div",{style:{width:"100%",height:"5vh",margin:10},children:(0,xr.jsx)("button",{style:{width:189,height:48,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D",position:"absolute",right:30},children:"Editar usuario"})}),(0,xr.jsx)(dd,{onClick:function(){return i(n)},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,xr.jsx)(rl,{style:{color:"#ccc"}})})]})})},pd=(0,ju.Z)(E.createElement("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}),"Undo"),fd=function(e){var t=e.open,n=e.closeModal;return(0,xr.jsx)(Wo,{open:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,xr.jsxs)(Jc,{sx:Zt,children:[(0,xr.jsxs)("div",{style:{textAlign:"left",width:"100%"},children:[(0,xr.jsxs)("h2",{children:["Versi\xf3n ",Yt.version]}),(0,xr.jsx)("li",{children:"Se corrige error al enviar t\xe9rmino de jornada."})]}),(0,xr.jsxs)("div",{style:{width:"100%",height:"25vh",overflowY:"auto"},children:[(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v2.9.3"}),(0,xr.jsx)("li",{children:"Se deshabilita actualizaci\xf3n de app por medio de vertical scrolling."}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v2.9.2"}),(0,xr.jsx)("li",{children:"Se corrige error de asignaci\xf3n de usuarios y bot\xf3n de sincronizaci\xf3n."}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v2.9.1"}),(0,xr.jsx)("li",{children:"Correcci\xf3n de errores"}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v2.9"}),(0,xr.jsx)("li",{children:"Se mejora el rendimiento y repara errores de bugs producto de"}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v2.6.4"}),(0,xr.jsx)("li",{children:"Cambios en Pautas. Ahora se pueden eliminar comentarios, fotos y el estado de ticket verde o amarillo a vac\xedo en caso de error."}),(0,xr.jsx)("li",{children:"Se aplican filtros en OT de maquinaria."}),(0,xr.jsx)("li",{children:"Otras modificaciones menores."}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v2.6.3"}),(0,xr.jsx)("li",{children:"Se permite el borrado de mensajes a usuarios que crean los mensajes o Admins"}),(0,xr.jsx)("li",{children:"Se agrega nueva vista de resumen de insumos o materiales, para ejecutivos SAP o Administradores"}),(0,xr.jsx)("strong",{children:"v2.6.2"}),(0,xr.jsx)("li",{children:"Reparaci\xf3n visualizaci\xf3n de pautas"}),(0,xr.jsx)("li",{children:"Se agrega en opciones un bot\xf3n para ver las pautas descargadas en el dispositivo"}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v2.6.1"}),(0,xr.jsx)("li",{children:"Se genera vista previa de la OT para Ejecutivo SAP y los administradores"}),(0,xr.jsx)("li",{children:"Se crea bot\xf3n de eliminaci\xf3n de mensajes de tareas para OTs"}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v2.6"}),(0,xr.jsx)("li",{children:"Reparaci\xf3n errore de carga de datos"}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v2.5.5"}),(0,xr.jsx)("li",{children:"Nueva m\xe1quina Bulldozer Caterpillar D10-T2"}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v.2.5"}),(0,xr.jsx)("li",{children:"Nuevas Obras y Nuevas m\xe1quinas."}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v.2.3.1"}),(0,xr.jsx)("li",{children:"Reparaciones menores en lista de Ordenes"}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v.2.3.1"}),(0,xr.jsx)("li",{children:"Error de login con R.U.N. resuelto"}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v.2.3"}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"Documentos PDF"}),(0,xr.jsx)("li",{children:"Se agrega Nro de Pauta en t\xedtulo de la OT"}),(0,xr.jsx)("li",{children:"Se agrega ID de Documento"}),(0,xr.jsx)("li",{children:"Se corrige nombre de la pauta al descargar"}),(0,xr.jsx)("strong",{children:"P\xe1gina Ordenes"}),(0,xr.jsx)("li",{children:"Se agrega primeros filtros (ordenar por OT y ordenar por Nro de M\xe1quina)"}),(0,xr.jsxs)("li",{children:["Se puede corregir n\xfamero SAP desde ventana emergente al presionar vot\xf3n ",(0,xr.jsx)("button",{style:{backgroundColor:"#F9F9F9",borderRadius:20,borderColor:"#757575",maxWidth:130,height:24,fontSize:12},children:"Ver"})]}),(0,xr.jsx)("strong",{children:"M\xe1quinas"}),(0,xr.jsxs)("li",{children:["Al ingresar a cada m\xe1quina, en el listado de las OT, puede ver un ",(0,xr.jsx)("a",{href:"#",children:"Enlace Documento"})," en caso de existir documento PDF creado."]}),(0,xr.jsx)("strong",{children:"Login"}),(0,xr.jsx)("li",{children:"Login por defecto queda por R.U.N."}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v.2.2.1"}),(0,xr.jsx)("li",{children:"Reparaci\xf3n de errores generados en versi\xf3n 2.2"}),(0,xr.jsx)("strong",{children:"v.2.2"}),(0,xr.jsx)("li",{children:"Se habilita multiusuarios."}),(0,xr.jsx)("strong",{children:"v.2.1"}),(0,xr.jsx)("li",{children:"Correcci\xf3n de errores al cierre de OT."}),(0,xr.jsx)("li",{children:"Todo usuario que no sea operario, obtendr\xe1 la pauta desde la base de datos. Con esto se espera que se elimine la informaci\xf3n."}),(0,xr.jsx)("p",{children:"Se ha actualizado la aplicaci\xf3n de servicios de Mantenimiento e Inspecci\xf3n."}),(0,xr.jsx)("strong",{children:"v.2.0"}),(0,xr.jsx)("li",{children:"Se agrega al servicio sistema de b\xfasqueda por Nombre, Rut y Correo Electr\xf3nico"}),(0,xr.jsx)("li",{children:"Se elimina la posibilidad al Jefe de Maquinaria la posibilidad de comentar."}),(0,xr.jsxs)("li",{children:["Se agrega al servicio restaurador de datos de ejecuci\xf3n de OT desde la cuenta de Operador o Mantenedor, utilizando bot\xf3n ",(0,xr.jsx)("strong",{children:"Restaurar"}),"."]}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,xr.jsx)(dd,{color:"primary","aria-label":"add",children:(0,xr.jsx)(pd,{})})}),(0,xr.jsx)("div",{style:{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:"#ccc",paddingTop:0,marginBottom:50}}),(0,xr.jsx)("strong",{children:"v.1.9.9"}),(0,xr.jsx)("li",{children:"Modificaciones en vistas de Ordenes."}),(0,xr.jsx)("li",{children:"Se habilita vista de Ordenes para Jefe de Maquinaria. Este perfil no puede generar nuevo documento PDF por estar fuera del flujo de actualizaciones de la OT."}),(0,xr.jsx)("strong",{children:"v.1.9.8"}),(0,xr.jsx)("li",{children:"Reparaci\xf3n de fallos al subir las AST."}),(0,xr.jsx)("strong",{children:"v.1.9.7"}),(0,xr.jsx)("li",{children:"Reparaci\xf3n de fallos PDF."}),(0,xr.jsx)("strong",{children:"v.1.9.6"}),(0,xr.jsx)("li",{children:"Inserta im\xe1genes de comentarios en PDF."}),(0,xr.jsx)("strong",{children:"v.1.9.5"}),(0,xr.jsx)("li",{children:"Cambios en la generaci\xf3n del documento PDF. Ahora se crea autom\xe1ticamente al cerrar la OT por parte del Ejecutivo SAP, Admin o Super Admin."}),(0,xr.jsx)("li",{children:"Listado de OTs en p\xe1gina Ordenes, ordenados por Nro OT."}),(0,xr.jsx)("strong",{children:"v.1.9"}),(0,xr.jsx)("li",{children:"Se integra servicio Storage para im\xe1genes de la plataforma."}),(0,xr.jsx)("strong",{children:"v.1.8.9"}),(0,xr.jsx)("li",{children:"Cambios en forma de llenado de pauta, presionando el checkbox."}),(0,xr.jsx)("li",{children:"Mejoras de rendimiento."}),(0,xr.jsx)("strong",{children:"v.1.8.8"}),(0,xr.jsx)("li",{children:"Reparaci\xf3n de notificaciones."}),(0,xr.jsx)("li",{children:"Vista notificaciones de p\xe1gina de inicio se actualiza junto a la llegada de notificaciones push."}),(0,xr.jsx)("strong",{children:"v.1.8.7"}),(0,xr.jsx)("li",{children:"Cambios en los permisos de roles."}),(0,xr.jsx)("li",{children:"Correo para creaci\xf3n de usuarios opcional."}),(0,xr.jsx)("strong",{children:"v.1.8.6"}),(0,xr.jsx)("li",{children:"Se agrega login usando RUT."}),(0,xr.jsx)("li",{children:"Reparaci\xf3nes menores."}),(0,xr.jsx)("strong",{children:"v.1.8.5"}),(0,xr.jsx)("li",{children:"Reparaciones menores."}),(0,xr.jsx)("strong",{children:"v.1.8"}),(0,xr.jsx)("li",{children:"Modelo 3D de subsistema desde la OT."}),(0,xr.jsx)("li",{children:"Etiquetado de Pala y Cami\xf3n."}),(0,xr.jsx)("strong",{children:"v.1.7"}),(0,xr.jsx)("li",{children:"Se posicionan etiquetas de Pala y Cami\xf3n de acuerdo a indicaciones."}),(0,xr.jsx)("strong",{children:"v.1.6"}),(0,xr.jsx)("li",{children:"Se habilita vista 3D de m\xe1quinas. Solo cambi\xf3n Caterpillar 793-F cuenta con etiquetas en las partes."}),(0,xr.jsx)("li",{children:"Se habilita bot\xf3n de borrado del sistema en caso de requerir limpiar la memoria."}),(0,xr.jsx)("strong",{children:"v.1.5"}),(0,xr.jsx)("li",{children:"Se agrega elemento que permite borrar o cambiar la AST."}),(0,xr.jsx)("strong",{children:"v.1.4"}),(0,xr.jsx)("li",{children:"Optimizaciones. Cambios al proceso de flujo. Se corrige error al enviar OT finalizando sin conexi\xf3n."}),(0,xr.jsx)("strong",{children:"v.1.3"}),(0,xr.jsx)("li",{children:"Ajustes de usuarios. Correcci\xf3n en caso de cambios para la AST."}),(0,xr.jsx)("li",{children:"Correcci\xf3n de errores."}),(0,xr.jsx)("strong",{children:"v.1.2"}),(0,xr.jsx)("li",{children:"Cambios de vistas. Se agrega foto AST en pautas."}),(0,xr.jsx)("strong",{children:"v.1.1"}),(0,xr.jsx)("li",{children:"Se agrega listado de OTs asignadas a cada m\xe1quina."}),(0,xr.jsx)("li",{children:"Se ajustan cambios en pautas."}),(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:"v.1.0"}),(0,xr.jsx)("li",{children:"Habilitado producci\xf3n."})]}),(0,xr.jsx)(dd,{onClick:function(){return n()},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,xr.jsx)(rl,{style:{color:"#ccc"}})})]})})},md=n(5203),vd=function(){function e(t,n){M(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return(0,I.Z)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),gd=function(){function e(){M(this,e)}return(0,I.Z)(e,[{key:"refCount",value:function(e){return yd("refCount")}},{key:"incRef",value:function(e){return yd("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return yd("time")}},{key:"read",value:function(e){return yd("read")}},{key:"readSync",value:function(e){return yd("readSync")}},{key:"readToGPU",value:function(e,t){return yd("readToGPU")}},{key:"numDataIds",value:function(){return yd("numDataIds")}},{key:"disposeData",value:function(e,t){return yd("disposeData")}},{key:"write",value:function(e,t,n){return yd("write")}},{key:"move",value:function(e,t,n,r,a){return yd("move")}},{key:"memory",value:function(){return yd("memory")}},{key:"floatPrecision",value:function(){return yd("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return yd("dispose")}}]),e}();function yd(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function bd(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,kd(e,--t,n)}function xd(e,t,n){return Math.max(e,Math.min(t,n))}function wd(e){return e%2===0?e:e+1}function kd(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Sd(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function Ed(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function Td(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Ed(Id(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function Cd(e){Ed(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function _d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||Bd(e)&&!n)for(var r=0;r<e.length;++r)_d(e[r],t,n);else t.push(e);return t}function Md(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Id(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Nd(e){return e%1===0}function Ad(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Rd(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Od(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function Dd(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function Ld(e,t){var n=t.length;return e=null==e?t.map((function(e,t){return t})):[].concat(e),Ed(e.every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),Ed(e.every((function(e){return Nd(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function Pd(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:Ld(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Fd(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function jd(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function zd(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function Bd(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function Ud(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function Wd(e){return"string"===typeof e||e instanceof String}function Vd(e){return"number"===typeof e}function Zd(e){return Array.isArray(e)?Zd(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":Vd(e)?"float32":Wd(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function Hd(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Gd(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function qd(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Xd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),l=u.reduce((function(e,t){return e*t}))*(r?2:1),c=0;c<s;c++)a[c]=Xd(e+c*l,u,n,r);return a}function Yd(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return Xd(0,e,t,n)}function Kd(e,t){for(var n=Qd(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Qd(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function Jd(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return Yd(e,new Float32Array(n));if("int32"===t)return Yd(e,new Int32Array(n));if("bool"===t)return Yd(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function $d(e){e.forEach((function(t){Ed(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function eh(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function th(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function nh(e){return e&&e.then&&"function"===typeof e.then}var rh="tfjsflags",ah=function(){function e(t){M(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=ih,this.populateURLFlags()}return(0,I.Z)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(oh().getBool("IS_TEST")||oh().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];oh().getBool("IS_TEST")||oh().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(nh(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(rh in t)t[rh].split(",").forEach((function(t){var n=t.split(":"),r=(0,U.Z)(n,2),a=r[0],i=r[1];e.urlFlags[a]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(a,i)}))}}}]),e}();function ih(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function oh(){return uh}var sh,uh=null;function lh(){if(null==sh){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}sh=e}return sh}function ch(e,t){var n=function(){var e=lh();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var dh="Abs",hh="Acos",ph="Acosh",fh="Add",mh="AddN",vh="All",gh="Any",yh="ArgMax",bh="ArgMin",xh="Asin",wh="Asinh",kh="Atan",Sh="Atanh",Eh="Atan2",Th="AvgPool",Ch="AvgPoolGrad",_h="AvgPool3D",Mh="AvgPool3DGrad",Ih="BatchMatMul",Nh="BatchToSpaceND",Ah="Bincount",Rh="BroadcastArgs",Oh="Cast",Dh="Ceil",Lh="ClipByValue",Ph="Complex",Fh="ComplexAbs",jh="Concat",zh="Conv2D",Bh="Conv2DBackpropFilter",Uh="Conv2DBackpropInput",Wh="Conv3D",Vh="Conv3DBackpropFilterV2",Zh="Conv3DBackpropInputV2",Hh="Cos",Gh="Cosh",qh="Cumsum",Xh="CropAndResize",Yh="DenseBincount",Kh="DepthToSpace",Qh="DepthwiseConv2dNative",Jh="DepthwiseConv2dNativeBackpropFilter",$h="DepthwiseConv2dNativeBackpropInput",ep="Diag",tp="Dilation2D",np="Dilation2DBackpropInput",rp="Dilation2DBackpropFilter",ap="RealDiv",ip="Einsum",op="Elu",sp="EluGrad",up="Erf",lp="Equal",cp="Exp",dp="ExpandDims",hp="Expm1",pp="FFT",fp="Fill",mp="FlipLeftRight",vp="Floor",gp="FloorDiv",yp="FusedBatchNorm",bp="GatherV2",xp="GatherNd",wp="Greater",kp="GreaterEqual",Sp="Identity",Ep="IFFT",Tp="Imag",Cp="IsFinite",_p="IsInf",Mp="IsNan",Ip="LeakyRelu",Np="Less",Ap="LessEqual",Rp="LinSpace",Op="Log",Dp="Log1p",Lp="LogicalAnd",Pp="LogicalNot",Fp="LogicalOr",jp="LRN",zp="LRNGrad",Bp="Max",Up="Maximum",Wp="MaxPool",Vp="MaxPoolGrad",Zp="MaxPool3D",Hp="MaxPool3DGrad",Gp="MaxPoolWithArgmax",qp="Mean",Xp="Min",Yp="Minimum",Kp="MirrorPad",Qp="Mod",Jp="Multinomial",$p="Multiply",ef="Neg",tf="NotEqual",nf="NonMaxSuppressionV3",rf="NonMaxSuppressionV4",af="NonMaxSuppressionV5",of="OnesLike",sf="OneHot",uf="Pack",lf="PadV2",cf="Pow",df="Prelu",hf="Prod",pf="Range",ff="Real",mf="Reciprocal",vf="Relu",gf="Reshape",yf="ResizeNearestNeighbor",bf="ResizeNearestNeighborGrad",xf="ResizeBilinear",wf="ResizeBilinearGrad",kf="Relu6",Sf="Reverse",Ef="Round",Tf="Rsqrt",Cf="ScatterNd",_f="Select",Mf="Selu",If="Slice",Nf="Sin",Af="Sinh",Rf="Sign",Of="Sigmoid",Df="Softplus",Lf="Sqrt",Pf="Sum",Ff="SpaceToBatchND",jf="SplitV",zf="Softmax",Bf="SparseFillEmptyRows",Uf="SparseReshape",Wf="SparseSegmentMean",Vf="SparseSegmentSum",Zf="SparseToDense",Hf="SquaredDifference",Gf="Square",qf="StridedSlice",Xf="StringNGrams",Yf="StringSplit",Kf="StringToHashBucketFast",Qf="Sub",Jf="Tan",$f="Tanh",em="Tile",tm="TopK",nm="Transform",rm="Transpose",am="Unique",im="Unpack",om="UnsortedSegmentSum",sm="ZerosLike",um="Step",lm="FromPixels",cm="RotateWithOffset",dm="_FusedMatMul",hm="FusedConv2D",pm="FusedDepthwiseConv2D";function fm(){var e;oh().getBool("IS_TEST")||oh().getBool("PROD")||(e=console).warn.apply(e,arguments)}var mm=ch("kernelRegistry",(function(){return new Map})),vm=ch("gradRegistry",(function(){return new Map}));function gm(e,t){var n=km(e,t);return mm.get(n)}function ym(e){return vm.get(e)}function bm(e){for(var t=mm.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=(0,U.Z)(i,2),s=o[0],u=o[1],l=s.split("_");(0,U.Z)(l,1)[0]===e&&n.push(u)}return n}function xm(e){var t=e.kernelName,n=e.backendName,r=km(t,n);mm.has(r)&&fm("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),mm.set(r,e)}function wm(e){var t=e.kernelName;vm.has(t)&&oh().getBool("DEBUG")&&fm("Overriding the gradient for '".concat(t,"'")),vm.set(t,e)}function km(e,t){return"".concat(t,"_").concat(e)}var Sm=n(8987),Em=n.n(Sm)()||Sm;function Tm(e){return Em.fromString(e,!0,16)}var Cm=Tm("c3a5c85c97cb3127"),_m=Tm("b492b66fbe98f273"),Mm=Tm("9ae16a3b2f90404f");function Im(e){return e.xor(e.shru(47))}function Nm(e,t,n){var r=e.slice(t,t+n);return Em.fromBytes(Array.from(r),!0,!0)}function Am(e,t){return Nm(e,t,8)}function Rm(e,t){return Nm(e,t,4)}function Om(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function Dm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tm("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function Lm(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=Om(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(Om(a,44)),[a.add(r),i.add(o)]}(Am(e,t),Am(e,t+8),Am(e,t+16),Am(e,t+24),n,r)}function Pm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Em.fromNumber(81,!0);if(t<=32)return t<=16?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=Mm.add(2*t),r=Am(e,0).add(Mm),a=Am(e,t-8);return Dm(Om(a,37).mul(n).add(r),Om(r,25).add(a).mul(n),n)}if(t>=4){var i=Mm.add(2*t);return Dm(Rm(e,0).shl(3).add(t),Rm(e,t-4),i)}if(t>0){var o=e[0]+(e[t>>1]<<8),s=t+(e[t-1]<<2);return Im(Mm.mul(o).xor(Cm.mul(s))).mul(Mm)}return Mm}(e,t):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Mm.add(2*t),r=Am(e,0).mul(_m),a=Am(e,8),i=Am(e,t-8).mul(n),o=Am(e,t-16).mul(Mm);return Dm(Om(r.add(a),43).add(Om(i,30)).add(o),r.add(Om(a.add(Mm),18)).add(i),n)}(e,t);if(t<=64)return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Mm.add(2*t),r=Am(e,0).mul(Mm),a=Am(e,8),i=Am(e,t-8).mul(n),o=Am(e,t-16).mul(Mm),s=Om(r.add(a),43).add(Om(i,30)).add(o),u=Dm(s,r.add(Om(a.add(Mm),18)).add(i),n),l=Am(e,16).mul(n),c=Am(e,24),d=s.add(Am(e,t-32)).mul(n),h=u.add(Am(e,t-24)).mul(n);return Dm(Om(l.add(c),43).add(Om(d,30)).add(h),l.add(Om(c.add(r),18)).add(d),n)}(e,t);var r=n,a=n.mul(_m).add(113),i=Im(a.mul(Mm).add(113)).mul(Mm),o=[Em.UZERO,Em.UZERO],s=[Em.UZERO,Em.UZERO];r=r.mul(Mm).add(Am(e,0));var u=0,l=64*(t-1>>6),c=l+(t-1&63)-63;do{r=Om(r.add(a).add(o[0]).add(Am(e,u+8)),37).mul(_m),a=Om(a.add(o[1]).add(Am(e,u+48)),42).mul(_m),r=r.xor(s[1]),a=a.add(o[0]).add(Am(e,u+40)),i=Om(i.add(s[0]),33).mul(_m),o=Lm(e,u,o[1].mul(_m),r.add(s[0])),s=Lm(e,u+32,i.add(s[1]),a.add(Am(e,u+16)));var d=[r,i];i=d[0],r=d[1],u+=64}while(u!==l);var h=_m.add(i.and(255).shl(1));u=c,s[0]=s[0].add(t-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=Om(r.add(a).add(o[0]).add(Am(e,u+8)),37).mul(h),a=Om(a.add(o[1]).add(Am(e,u+48)),42).mul(h),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(Am(e,u+40))),i=Om(i.add(s[0]),33).mul(h),o=Lm(e,u,o[1].mul(h),r.add(s[0])),s=Lm(e,u+32,i.add(s[1]),a.add(Am(e,u+16)));var p=[r,i];return i=p[0],r=p[1],Dm(Dm(o[0],s[0],h).add(Im(a).mul(Cm)).add(i),Dm(o[1],s[1],h).add(r),h)}function Fm(e,t){return"string"===t?Bm(e):jm([e],t)}function jm(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=_d(e)),oh().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function zm(){return oh().platform.now()}function Bm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",oh().platform.encode(e,t)}function Um(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",oh().platform.decode(e,t)}var Wm=function(){function e(t,n){M(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new Vm)}return(0,I.Z)(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=zm();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=G(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(d){u.e(d)}finally{u.f()}a=Promise.resolve({kernelMs:zm()-o})}if(oh().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var l=function(){var t=r[c];t.data().then((function(n){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(n,t.dtype,e)}))},c=0;c<r.length;c++)l();return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var Vm=function(){function e(){M(this,e)}return(0,I.Z)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?Rd("".concat(r,"ms"),9):r.error,s=Rd(e,25),u=t.rank,l=t.size,c=Rd(t.shape.toString(),14),d="";for(var h in a){var p=a[h];if(null!=p){var f=p.shape||t.shape,m=f.length;d+="".concat(h,": ").concat(m,"D ").concat(m>0?f:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(c,"\t%c").concat(l,"\t%c").concat(d,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();var Zm=20,Hm=3,Gm=7;function qm(e,t,n,r){var a=qd(t),i=function(e,t,n,r){var a=Md(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?Qm(e):e;if(s>1)for(var l=0;l<a/i;l++)for(var c=l*i,d=0;d<i;d++)o[d]=Math.max(o[d],Xm(u[c+d],0,n).length);return o}(e,t,n,a),o=t.length,s=Km(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function Xm(e,t,n){return Rd(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(Gm))," + ")+"".concat(parseFloat(e[1].toFixed(Gm)),"j"):Wd(e)?"'".concat(e,"'"):"bool"===n?Ym(e):parseFloat(e.toFixed(Gm)).toString(),t)}function Ym(e){return 0===e?"false":"true"}function Km(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u)return"complex64"===n?[Xm(Qm(e)[0],0,n)]:"bool"===n?[Ym(e[0])]:[e[0].toString()];if(1===u){if(s>Zm){var l=Hm*o,c=Array.from(e.slice(0,l)),d=Array.from(e.slice((s-Hm)*o,s*o));return"complex64"===n&&(c=Qm(c),d=Qm(d)),["["+c.map((function(e,t){return Xm(e,a[t],n)})).join(", ")+", ..., "+d.map((function(e,t){return Xm(e,a[s-Hm+t],n)})).join(", ")+"]"]}return["["+("complex64"===n?Qm(e):Array.from(e)).map((function(e,t){return Xm(e,a[t],n)})).join(", ")+"]"]}var h=t.slice(1),p=r.slice(1),f=r[0]*o,m=[];if(s>Zm){for(var v=0;v<Hm;v++){var g=v*f,y=g+f;m.push.apply(m,(0,_.Z)(Km(e.slice(g,y),h,n,p,a,!1)))}m.push("...");for(var b=s-Hm;b<s;b++){var x=b*f,w=x+f;m.push.apply(m,(0,_.Z)(Km(e.slice(x,w),h,n,p,a,b===s-1)))}}else for(var k=0;k<s;k++){var S=k*f,E=S+f;m.push.apply(m,(0,_.Z)(Km(e.slice(S,E),h,n,p,a,k===s-1)))}var T=2===u?",":"";m[0]="["+m[0]+T;for(var C=1;C<m.length-1;C++)m[C]=" "+m[C]+T;for(var M=",\n",I=2;I<u;I++)M+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(i?"":M),m}function Qm(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Jm=function(){function e(t,n,r){var a=this;if(M(this,e),this.dtype=n,this.shape=t.slice(),this.size=Md(t),null!=r){var i=r.length;Ed(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||jd(n,this.size),this.strides=qd(t)}return(0,I.Z)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),Ed(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],l=0;l<t.length-1;++l)u+=this.strides[l]*t[l];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return $m().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),$m=null,ev=null;var tv=function(){function e(t,n,r,a){M(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Md(t),this.strides=qd(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return(0,I.Z)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",ev.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return ev.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Yd(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Yd(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=Jn(Kn().mark((function e(){var t,n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=$m().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return Um(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),$m().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=$m().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Um(e)}))}catch(l4){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,$m().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||($m().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ev.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),ev.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return qm(this.dataSync(),this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),ev.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),$m().makeVariable(this,e,t,n)}}]),e}();function nv(){return ch("Tensor",(function(){return tv}))}Object.defineProperty(tv,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),nv();var rv,av,iv,ov,sv,uv=function(e){A(n,e);var t=F(n);function n(e,r,a,i){var o;return M(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return(0,I.Z)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Id(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));$m().disposeTensor(this),this.dataId=e.dataId,$m().incRef(this,null)}},{key:"dispose",value:function(){$m().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(tv);Object.defineProperty(uv,Symbol.hasInstance,{value:function(e){return e instanceof tv&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(rv||(rv={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(av||(av={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(iv||(iv={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(ov||(ov={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(sv||(sv={}));var lv={float32:ov,int32:av,bool:iv,complex64:sv};function cv(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return lv[e][t]}function dv(e){return cv(e,"int32")}function hv(e,t){if(e.dtype===t.dtype)return[e,t];var n=cv(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function pv(e,t){return t.some((function(t){return t.id===e.id}))}function fv(e){var t=[];return mv(e,t,new Set),t}function mv(e,t,n){if(null!=e)if(e instanceof tv)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),mv(o,t,n))}}}function vv(e){return null!=e.kernelName}var gv=function(){function e(){M(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return(0,I.Z)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),yv=function(){function e(t){M(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new gv}return(0,I.Z)(e,[{key:"ready",value:function(){var e=Jn(Kn().mark((function e(){var t,n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(fm("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=Jn(Kn().mark((function e(t){var n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Wm(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;bm(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;bm(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof gd||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,fm("Initialization of backend ".concat(e," failed")),fm(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return fm("Initialization of backend ".concat(e," failed")),fm(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(Gie){throw t(),Gie}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=wv.runKernel(Sp,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return wv.runKernel(Oh,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=gm(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var l=vv(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(vv(e)){var c=e.kernelName,d=e.inputs,h=e.attrs;null==this.backendName&&this.backend;var p=gm(c,this.backendName);Ed(null!=p,(function(){return"Cannot find registered kernel '".concat(c,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=p.kernelFunc({inputs:d,attrs:h,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(o){var s=a.getTensorsForGradient(c,d,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var f=e.forwardFunc,m=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return f(a.backend,m)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t),t}}var v,g=e.inputs,y=e.attrs,b=vv(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(v=a.profiler.profileKernel(l,g,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(v),t=v.outputs):t=n()})),o&&this.addTapeNode(l,g,t,b,i,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map((function(e){return null!=g[e]?g[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:v.timeMs,extraInfo:v.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=ym(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(Ed(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&Wd(e[0])&&(a=e.map((function(e){return Bm(e)})));var i=r.write(a,t,n),o=new tv(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a=new tv(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new uv(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Ud(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof uv||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*Ud(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i,o;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,_.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=G(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=24;break}return o=i.value,e.next=18,o.kernelTimeMs;case 18:return o.kernelTimeMs=e.sent,e.next=21,o.extraInfo;case 21:o.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=ym(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Qd(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=fv(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Ed(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));Ed(i instanceof tv,(function(){return"The result y returned by f() must be a tensor."}));var o=function(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var l in u){for(var c=u[l],d=!1,h=0;h<t.length;h++)if(r[c.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var p={};p[n.id]=!0;for(var f={},m=e.length-1;m>=0;m--)for(var v=e[m],g=v.inputs,y=0;y<v.outputs.length;y++)if(p[v.outputs[y].id]){for(var b in g)p[g[b].id]=!0,f[v.id]=!0;break}for(var x=[],w=0;w<e.length;w++){var k=e[w];if(a[k.id]&&f[k.id]){var S={};for(var E in k.inputs){var T=k.inputs[E];r[T.id]&&(S[E]=T)}var C=Object.assign({},k);C.inputs=S,C.outputs=k.outputs,x.push(C)}}return x}(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?function(e){var t=Kd(Md(e),"float32");return wv.makeTensor(t,e,"float32")}(i.shape):n,function(e,t,n,r){for(var a=function(){var a=t[i],o=[];if(a.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(a.kernelName,"."));var s=a.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var i=n((function(){return s[t]()}));if("float32"!==i.dtype)throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(i.dtype,"'"));var o=a.inputs[t];if(!Id(i.shape,o.shape))throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(i.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=i;else{var u=e[o.id];e[o.id]=r(u,i),u.dispose()}};for(var l in a.inputs)u(l)},i=t.length-1;i>=0;i--)a()}(e,o,(function(e){return r.tidy(e)}),kv);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=G(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return Ed(Hd(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;Ed(r.every((function(e){return e instanceof tv})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));return t.runKernelFunc({forwardFunc:function(t,n){return Ed((i=e.apply(void 0,[].concat(r,[n]))).value instanceof tv,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Ed(Hd(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},backwardsFunc:function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];Ed(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Ed(a.every((function(e){return e instanceof tv})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o},inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=Jn(Kn().mark((function e(t){var n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zm(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=zm()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new gv,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function bv(){var e=lh();if(null==e._tfengine){var t=new ah(e);e._tfengine=new yv(t)}return function(e){uh=e}(e._tfengine.ENV),function(e){$m=e}((function(){return e._tfengine})),e._tfengine}yv.nextTensorId=0,yv.nextVariableId=0;var xv,wv=bv();function kv(e,t){var n={a:e,b:t};return wv.runKernel(fh,n)}function Sv(e){if(void 0!==xv)return xv;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Ev(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var Tv=oh();function Cv(e,t){var n=e;if(Bd(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Bd(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&oh().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&_v(e,r,[]),r}function _v(e,t,n){if(n=n||[],Array.isArray(e)||Bd(e)){Ed(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),Ed(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)_v(e[a],r,n.concat(a))}else Ed(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function Mv(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function Iv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof tv)return Mv(r,e.dtype,t,n),e;var a=Zd(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Mv(r,a,t,n),null==e||!Bd(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=Cv(e,a);Bd(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?jm(e,a):_d(e,[],!0);return wv.makeTensor(s,o,a)}function Nv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map((function(e,a){return Iv(e,"".concat(t,"[").concat(a,"]"),n,r)}))}Tv.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Tv.registerFlag("IS_BROWSER",(function(){return Ev()})),Tv.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),Tv.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Tv.registerFlag("PROD",(function(){return!1})),Tv.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Tv.getBool("DEBUG")})),Tv.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Tv.registerFlag("IS_TEST",(function(){return!1})),Tv.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),Tv.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1}));var Av="__op";function Rv(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=Av;var a=function(){wv.startScope(n);try{var e=r.apply(void 0,arguments);return nh(e)&&console.error("Cannot return a Promise inside of tidy."),wv.endScope(e),e}catch(Gie){throw wv.endScope(null),Gie}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var Ov=Rv({complex_:function(e,t){var n=Iv(e,"real","complex"),r=Iv(t,"imag","complex");Td(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return wv.runKernel(Ph,a)}});function Dv(e,t,n,r){if(null==r&&(r=Zd(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Bd(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){$d(t);var a=Md(t),i=Md(n);Ed(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==Md(t.slice(o));Ed(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return Bd(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?jm(e,r):_d(e,[],!0),wv.makeTensor(e,t,r)}function Lv(e,t,n){return Dv(e,t,Cv(e,n),n)}var Pv={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},Fv=4;function jv(e,t){return zv.apply(this,arguments)}function zv(){return zv=Jn(Kn().mark((function e(t,n){var r,a,i,o,s,u;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=Kn().mark((function e(){var o,u,l,c;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i[s],"float32"===(u=Array.isArray(t)?t[s].tensor:t[o]).dtype||"int32"===u.dtype||"bool"===u.dtype||"string"===u.dtype||"complex64"===u.dtype){e.next=4;break}throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(u.dtype));case 4:l={name:o,shape:u.shape,dtype:u.dtype},"string"===u.dtype?(c=new Promise(function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i,o,s,l;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+Fv*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)s=n[o],l=new Uint8Array(new Uint32Array([s.length]).buffer),a.set(l,i),i+=Fv,a.set(s,i),i+=s.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.push(c)):a.push(u.data()),null!=n&&(l.group=n),r.push(l);case 8:case"end":return e.stop()}}),e)})),s=0;case 5:if(!(s<i.length)){e.next=10;break}return e.delegateYield(o(),"t0",7);case 7:++s,e.next=5;break;case 10:return e.next=12,Promise.all(a);case 12:return u=e.sent,e.abrupt("return",{data:Uv(u),specs:r});case 14:case"end":return e.stop()}}),e)}))),zv.apply(this,arguments)}function Bv(e,t){var n,r,a={},i=0,o=G(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,l=s.dtype,c=s.shape,d=Md(c),h=void 0;if("quantization"in s){var p=s.quantization;if("uint8"===p.dtype||"uint16"===p.dtype){if(!("min"in p)||!("scale"in p))throw new Error("Weight ".concat(s.name," with quantization ").concat(p.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==p.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(p.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==l)throw new Error("Weight ".concat(s.name," is quantized with ").concat(p.dtype," ")+"which only supports weights of type float32 not ".concat(l,"."))}var f=Pv[p.dtype],m=e.slice(i,i+d*f),v="uint8"===p.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===l)if("uint8"===p.dtype||"uint16"===p.dtype){h=new Float32Array(v.length);for(var g=0;g<v.length;g++){var y=v[g];h[g]=y*p.scale+p.min}}else{if("float16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type float32.");void 0===n&&(n=Jv()),h=n(v)}else{if("int32"!==l)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(l));if("uint8"!==p.dtype&&"uint16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type int32.");h=new Int32Array(v.length);for(var b=0;b<v.length;b++){var x=v[b];h[b]=Math.round(x*p.scale+p.min)}}i+=d*f}else if("string"===l){var w=Md(s.shape);h=[];for(var k=0;k<w;k++){var S=new Uint32Array(e.slice(i,i+Fv))[0];i+=Fv;var E=new Uint8Array(e.slice(i,i+S));h.push(E),i+=S}}else{var T=Pv[l],C=e.slice(i,i+d*T);if("float32"===l)h=new Float32Array(C);else if("int32"===l)h=new Int32Array(C);else if("bool"===l)h=new Uint8Array(C);else{if("complex64"!==l)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(l));h=new Float32Array(C);for(var _=new Float32Array(h.length/2),M=new Float32Array(h.length/2),I=0;I<_.length;I++)_[I]=h[2*I],M[I]=h[2*I+1];var N=Lv(_,c,"float32"),A=Lv(M,c,"float32");a[u]=Ov(N,A),N.dispose(),A.dispose()}i+=d*T}"complex64"!==l&&(a[u]=Lv(h,c,l))}}catch(R){o.e(R)}finally{o.f()}return a}function Uv(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var Wv="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function Vv(e){return Wv?Buffer.byteLength(e):new Blob([e]).size}function Zv(e){if(Wv)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function Hv(e){if(Wv){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function Gv(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function qv(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Xv(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function Yv(e,t){return Kv.apply(this,arguments)}function Kv(){return Kv=Jn(Kn().mark((function e(t,n){var r,a,i,o,s;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:a=e.sent,i=(0,U.Z)(a,2),o=i[0],s=i[1],r.weightSpecs=o,r.weightData=s;case 11:return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)}))),Kv.apply(this,arguments)}function Qv(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Vv(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Vv(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function Jv(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var $v=function(){function e(){M(this,e),this.saveRouters=[],this.loadRouters=[]}return(0,I.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),eg=function(e){return $v.registerSaveRouter(e)},tg=function(e){return $v.registerLoadRouter(e)},ng=function(e){return $v.getSaveHandlers(e)},rg=function(e,t){return $v.getLoadHandlers(e,t)},ag="tensorflowjs",ig="models_store",og="model_info_store";function sg(){if(!oh().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function ug(e){var t=e.result;t.createObjectStore(ig,{keyPath:"modelPath"}),t.createObjectStore(og,{keyPath:"modelPath"})}var lg=function(){function e(t){if(M(this,e),this.indexedDB=sg(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return(0,I.Z)(e,[{key:"save",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(ag,1);a.onupgradeneeded=function(){return ug(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(ig,"readonly"),s=o.objectStore(ig).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,l=Qv(t),c=i.transaction(og,"readwrite"),d=c.objectStore(og),h=d.put({modelPath:n.modelPath,modelArtifactsInfo:l});h.onsuccess=function(){var a=(u=i.transaction(ig,"readwrite")).objectStore(ig).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(d=c.objectStore(og)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},h.onerror=function(e){return i.close(),r(h.error)},c.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();lg.URL_SCHEME="indexeddb://";var cg=function(e){return oh().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(lg.URL_SCHEME)?(t=e.slice(lg.URL_SCHEME.length),new lg(t)):null;var t};$v.registerSaveRouter(cg),$v.registerLoadRouter(cg);var dg=function(){function e(){M(this,e),this.indexedDB=sg()}return(0,I.Z)(e,[{key:"listModels",value:function(){var e=Jn(Kn().mark((function e(){var t=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(ag,1);r.onupgradeneeded=function(){return ug(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(og,"readonly"),i=a.objectStore(og).getAll();i.onsuccess=function(){var t,n={},r=G(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Jn(Kn().mark((function e(t){var n=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(lg.URL_SCHEME)?r.slice(lg.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(ag,1);a.onupgradeneeded=function(){return ug(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(og,"readwrite"),s=o.objectStore(og),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(ig,"readwrite")).objectStore(ig).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),hg="/",pg="tensorflowjs_models",fg="info",mg="model_topology",vg="weight_specs",gg="weight_data",yg="model_metadata";function bg(e){return{info:[pg,e,fg].join(hg),topology:[pg,e,mg].join(hg),weightSpecs:[pg,e,vg].join(hg),weightData:[pg,e,gg].join(hg),modelMetadata:[pg,e,yg].join(hg)}}function xg(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function wg(e){var t=e.split(hg);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(hg)}var kg=function(){function e(t){if(M(this,e),!oh().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=bg(this.modelPath)}return(0,I.Z)(e,[{key:"save",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Qv(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Zv(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),xg(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a,i,o,s;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=Hv(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();kg.URL_SCHEME="localstorage://";var Sg=function(e){return oh().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(kg.URL_SCHEME)?(t=e.slice(kg.URL_SCHEME.length),new kg(t)):null;var t};$v.registerSaveRouter(Sg),$v.registerLoadRouter(Sg);var Eg=function(){function e(){M(this,e),Ed(oh().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Ed("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return(0,I.Z)(e,[{key:"listModels",value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a,i,o;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=pg+hg,r=hg+fg,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=wg(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Jn(Kn().mark((function e(t){var n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(kg.URL_SCHEME)?a.slice(kg.URL_SCHEME.length):a,n=bg(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),xg(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Tg="://",Cg=function(){function e(){M(this,e),this.managers={}}return(0,I.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){Ed(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Tg)&&(t=t.slice(0,t.indexOf(Tg))),Ed(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Ed(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function _g(e){if(-1===e.indexOf(Tg))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(Cg.getSchemes().join(",")));return{scheme:e.split(Tg)[0],path:e.split(Tg)[1]}}function Mg(e,t){return Ig.apply(this,arguments)}function Ig(){return Ig=Jn(Kn().mark((function e(t,n){var r,a,i,o,s,u,l,c,d,h,p=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],Ed(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),Ed((a=$v.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),Ed(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],Ed((o=$v.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),Ed(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],u=_g(t).scheme,l=_g(t).path,c=u===_g(t).scheme,e.next=15,i.load();case 15:if(d=e.sent,!r||!c){e.next=19;break}return e.next=19,Cg.getManager(u).removeModel(l);case 19:return e.next=21,s.save(d);case 21:if(h=e.sent,!r||c){e.next=25;break}return e.next=25,Cg.getManager(u).removeModel(l);case 25:return e.abrupt("return",h.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),Ig.apply(this,arguments)}function Ng(){return Ag.apply(this,arguments)}function Ag(){return(Ag=Jn(Kn().mark((function e(){var t,n,r,a,i,o,s;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Cg.getSchemes(),n={},r=G(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,Cg.getManager(i).listModels();case 9:for(s in o=e.sent)n[i+Tg+s]=o[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function Rg(e){return Og.apply(this,arguments)}function Og(){return Og=Jn(Kn().mark((function e(t){var n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_g(t),r=Cg.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)}))),Og.apply(this,arguments)}function Dg(e,t){return Lg.apply(this,arguments)}function Lg(){return(Lg=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",Mg(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pg(e,t){return Fg.apply(this,arguments)}function Fg(){return(Fg=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",Mg(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jg=function(){function e(){M(this,e)}return(0,I.Z)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(oh().get("IS_BROWSER")){oh().setPlatform("browser",new jg);try{Cg.registerManager(kg.URL_SCHEME,new Eg)}catch(sde){}try{Cg.registerManager(lg.URL_SCHEME,new dg)}catch(sde){}}var zg,Bg=function(){return n(5410)};var Ug=function(){function e(){M(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return(0,I.Z)(e,[{key:"fetch",value:function(e,t){return null!=oh().global.fetch?oh().global.fetch(e,t):(null==zg&&(zg=Bg()),zg(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function Wg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",$d(e),new Jm(e,t,n)}oh().get("IS_NODE")&&oh().setPlatform("node",new Ug);var Vg=Rv({cast_:function(e,t){var n=Iv(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return wv.runKernel(Oh,r,a)}});var Zg=Rv({clone_:function(e){var t={x:Iv(e,"x","clone","string_or_numeric")};return wv.runKernel(Sp,t)}});function Hg(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}bv(),ev={buffer:Wg,cast:Vg,clone:Zg,print:Hg};function Gg(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var qg=function(){function e(t){if(M(this,e),!oh().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return(0,I.Z)(e,[{key:"save",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i,o,s;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Xv(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,Gg((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,Gg((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:Qv(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();qg.URL_SCHEME="downloads://";var Xg=function(){function e(t){if(M(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return(0,I.Z)(e,[{key:"load",value:function(){var e=Jn(Kn().mark((function e(){var t=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=Yv(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=G(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,(0,_.Z)(o.weights)),a.push.apply(a,(0,_.Z)(o.paths))}}catch(sde){i.e(sde)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,Gv(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return qv(e.name)})),i={},o=G(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=qv(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(sde){o.e(sde)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return i}}]),e}();function Yg(e){return new Xg(e)}function Kg(e,t,n,r){!function(e){Ed(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Ed(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),Ed(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),Ed(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function Qg(e,t){return Jg.apply(this,arguments)}function Jg(){return(Jg=Jn(Kn().mark((function e(t,n){var r,a,i,o,s,u,l,c,d;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?oh().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,Kg(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),l=.5,c=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,Kg(u,n.onProgress,l,c);case 26:e.t1=e.sent;case 27:return d=e.t1,e.abrupt("return",d);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $g(e){return ey.apply(this,arguments)}function ey(){return ey=Jn(Kn().mark((function e(t){var n,r,a,i,o=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=ty((function(e){return Qg(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)}))),ey.apply(this,arguments)}function ty(e){return function(){var t=Jn(Kn().mark((function t(n){var r,a,i,o,s,u,l,c,d,h,p,f,m=arguments;return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"",a=m.length>2?m[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,l=Pv[r]*Md(e.shape),c=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=a?a.forEach((function(t,n){t===e.name&&(c(),s[n]=!0)})):c(),u.push(e.name),n+=l}))})),s.every((function(e){return e}))){t.next=10;break}throw l=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(l.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return c=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),d=[],c.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;d.push(t)}))})),t.next=15,e(d);case 15:return h=t.sent,p={},f=0,c.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=h[f+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,l=0;l<t;l++){var c=new Uint8Array(h[f+l]);s.set(c,u),u+=c.byteLength}o[e].forEach((function(e){var t=Bv(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)p[n]=t[n]})),f+=t})),t.abrupt("return",p);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}$v.registerSaveRouter((function(e){return oh().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(qg.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new qg(e)}(e.slice(qg.URL_SCHEME.length)):null}));var ny=function(){function e(t,n){if(M(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(Ed("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=oh().platform.fetch,Ed(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&Ed(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return(0,I.Z)(e,[{key:"save",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=Xv(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:Qv(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a,i,o=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",Yv(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i,o,s,u,l,c,d,h,p,f,m,v,g,y,b,x;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=ry(n),a=(0,U.Z)(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=[],l=G(t);try{for(l.s();!(c=l.n()).done;)d=c.value,u.push.apply(u,(0,_.Z)(d.weights))}catch(sde){l.e(sde)}finally{l.f()}h=[],p=[],f=G(t);try{for(f.s();!(m=f.n()).done;){v=m.value,g=G(v.paths);try{for(g.s();!(y=g.n()).done;)b=y.value,null!=this.weightUrlConverter?p.push(this.weightUrlConverter(b)):h.push(s+b+o)}catch(sde){g.e(sde)}finally{g.f()}}}catch(sde){f.e(sde)}finally{f.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=h.push,e.t1=h,e.t2=_.Z,e.next=16,Promise.all(p);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,Qg(h,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return x=e.sent,e.abrupt("return",[u,Gv(x)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ry(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function ay(e){return null!=e.match(ny.URL_SCHEME_REGEX)}ny.URL_SCHEME_REGEX=/^https?:\/\//;var iy=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return ay(e)})):ay(e))?oy(e,t):null};function oy(e,t){return new ny(e,t)}function sy(e,t){return oy(e,t)}$v.registerSaveRouter(iy),$v.registerLoadRouter(iy);var uy,ly=function(){function e(t){M(this,e),this.modelArtifacts=t}return(0,I.Z)(e,[{key:"load",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelArtifacts);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),cy=function(){function e(t){M(this,e),this.saveHandler=t}return(0,I.Z)(e,[{key:"save",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveHandler(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function dy(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new ly(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ly({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ly({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function hy(e){return new cy(e)}function py(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function fy(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function my(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}function vy(e,t,n){if(Cd(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=Cv(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Dv(e,t,r,n)}function gy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(a){if(a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=gm(lm,wv.backendName)){var u={pixels:e},l={numChannels:t};return wv.runKernel(lm,u,l)}var c,d,h=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],p=(0,U.Z)(h,2),f=p[0],m=p[1];if(o)c=e.getContext("2d").getImageData(0,0,f,m).data;else if(r||n)c=e.data;else if(i||a||s){if(null==uy)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");uy=new OffscreenCanvas(1,1).getContext("2d")}else uy=document.createElement("canvas").getContext("2d");uy.canvas.width=f,uy.canvas.height=m,uy.drawImage(e,0,0,f,m),c=uy.getImageData(0,0,f,m).data}if(4===t)d=new Int32Array(c);else{var v=f*m;d=new Int32Array(v*t);for(var g=0;g<v;g++)for(var y=0;y<t;++y)d[g*t+y]=c[4*g+y]}return vy(d,[m,f,t],"int32")}var yy=Rv({fromPixels_:gy}),by=-2,xy=-1;function wy(e,t,n){var r=e.shape.length;Ed(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),Ed(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){Ed(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function ky(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function Sy(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function Ey(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Ty(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat((0,_.Z)(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){Ed(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat((0,_.Z)(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(Ed(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function Cy(e,t,n,r,a,i,o,s,u){var l;if(null==r?(l=new Array(t.length)).fill(1):l=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var c=!1,d={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:l.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},h=0;h<d.dims;h++)c&&0!==(1<<h&s)&&d.numAddAxisAfterEllipsis++,1<<h&o&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);var p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(by),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(xy),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,p);for(var f=!0,m=!0,v=!0,g=[],y=[],b=0;b<e.length;++b){if(0===p.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(p.shrinkAxisMask&1<<b),w=e[b];if(-1!==w){var k=[p.beginMask&1<<b,p.endMask&1<<b],S=[p.strides[b]>0?0:-1,p.strides[b]>0?w:w-1];if(x&&p.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&1===p.strides[b];var E=!!(p.beginMask&1<<b&&p.endMask&1<<b);if(p.beginValid&&p.endValid){if(x){var T=p.begin[b]<0?w+p.begin[b]:p.begin[b];if(p.begin[b]=T,p.end[b]=p.begin[b]+1,T<0||T>=w)throw Error("slice index ".concat(p.begin[b]," of dimension ").concat(b," out of bounds."))}else p.begin[b]=_y(p.begin[b],0,p.strides[b],w,k,S),p.end[b]=_y(p.end[b],1,p.strides[b],w,k,S);var C=1===p.strides[b]&&0===p.begin[b]&&p.end[b]===w;f=f&&C,m=m&&(0===b&&1===p.strides[b]||C)}else f=f&&1===p.strides[b]&&E,m=m&&(0===b&&1===p.strides[b]||E);var _=void 0,M=!1;if(p.beginValid&&p.endValid?(_=p.end[b]-p.begin[b],M=!0):x?(_=1,M=!0):E&&w>=0&&(_=p.strides[b]<0?-w:w,M=!0),M){var I=void 0;I=0===_||_<0!==p.strides[b]<0?0:Math.trunc(_/p.strides[b])+(_%p.strides[b]!==0?1:0),g.push(I)}else g.push(-1)}else g.push(x?1:-1)}for(var N=0;N<p.finalShapeGatherIndices.length;++N){var A=p.finalShapeGatherIndices[N];A>=0?y.push(g[A]):A===by&&y.push(1)}var R=y.filter((function(e,t){return p.finalShapeGatherIndices[t]!==by}));return{finalShapeSparse:R,finalShape:y,isIdentity:f,sliceDim0:m,isSimpleSlice:v,begin:p.begin,end:p.end,strides:p.strides}}function _y(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var My=function(){function e(){M(this,e)}return(0,I.Z)(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),Iy=function(){function e(){M(this,e),this.classNameMap={}}return(0,I.Z)(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function Ny(e){Ed(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Ed("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Ed(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Iy.register(e)}function Ay(){return wv}function Ry(){return wv.memory()}function Oy(e,t){return wv.tidy(e,t)}function Dy(e){fv(e).forEach((function(e){return e.dispose()}))}function Ly(e){return wv.keep(e)}function Py(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return wv.registerBackend(e,t,n)}function Fy(e){return wv.customGrad(e)}function jy(e,t){if((Bd(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Bd(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Dv(e,[],[],t)}!function(e){e}((function(e){oh().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}));var zy=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return Dy(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return function(e,t){Ed(Hd(e),(function(){return"The f passed in variableGrads(f) must be a function"})),Ed(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof uv})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],wv.registeredVariables)t.push(wv.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;t=t.filter((function(e){return e.trainable})),Ed(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."}));var o=wv.gradients(e,t,null,!0),s=o.value,u=o.grads;Ed(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),Ed(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var l={};return t.forEach((function(e,t){null!=u[t]&&(l[e.name]=u[t])})),null!=a&&a.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&Dy(this.iterations_)}},{key:"saveIterations",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:jy(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(My);Object.defineProperty(zy,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var By=Rv({abs_:function(e){var t=Iv(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return wv.runKernel(Fh,n)}var r={x:t};return wv.runKernel(dh,r)}});var Uy=Rv({acos_:function(e){var t={x:Iv(e,"x","acos")};return wv.runKernel(hh,t)}});var Wy=Rv({acosh_:function(e){var t={x:Iv(e,"x","acosh")};return wv.runKernel(ph,t)}});var Vy=Rv({add_:function(e,t){var n=Iv(e,"a","add"),r=Iv(t,"b","add"),a=hv(n,r),i=(0,U.Z)(a,2),o={a:n=i[0],b:r=i[1]};return wv.runKernel(fh,o)}});var Zy=Rv({addN_:function(e){Ed(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),Ed(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return Iv(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!Id(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return wv.runKernel(mh,r)}});var Hy=Rv({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Iv(e,"x","all","bool")},a={axis:t,keepDims:n};return wv.runKernel(vh,r,a)}});var Gy=Rv({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Iv(e,"x","any","bool")},a={axis:t,keepDims:n};return wv.runKernel(gh,r,a)}});var qy=Rv({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Iv(e,"x","argMax")},r={axis:t};return wv.runKernel(yh,n,r)}});var Xy=Rv({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Iv(e,"x","argMin")},r={axis:t};return wv.runKernel(bh,n,r)}});var Yy=Rv({asin_:function(e){var t={x:Iv(e,"x","asin")};return wv.runKernel(xh,t)}});var Ky=Rv({asinh_:function(e){var t={x:Iv(e,"x","asinh")};return wv.runKernel(wh,t)}});var Qy=Rv({atan_:function(e){var t={x:Iv(e,"x","atan")};return wv.runKernel(kh,t)}});var Jy=Rv({atan2_:function(e,t){var n=Iv(e,"a","atan2"),r=Iv(t,"b","atan2"),a=hv(n,r),i=(0,U.Z)(a,2),o={a:n=i[0],b:r=i[1]};return wv.runKernel(Eh,o)}});var $y=Rv({atanh_:function(e){var t={x:Iv(e,"x","atanh")};return wv.runKernel(Sh,t)}});function eb(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3];return rb(e,[].concat((0,_.Z)(t),[o]),n,i,r,null,null,hb(a))}function tb(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=ob(t),l=(0,U.Z)(u,2),c=l[0],d=l[1];if("channelsLast"===s)o=[c,d,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[c,d,e[1],e[1]]}return rb(e,o,n,r,a,i,!1,s)}function nb(e,t,n,r,a,i){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",l=sb(t),c=(0,U.Z)(l,3),d=c[0],h=c[1],p=c[2];if("NDHWC"===u)s="channelsLast",o=[d,h,p,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",o=[d,h,p,e[1],e[1]]}return ab(e,o,n,r,a,!1,s,i)}function rb(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,l=-1,c=-1,d=-1;if("channelsLast"===s){var h=(0,U.Z)(e,4);u=h[0],l=h[1],c=h[2],d=h[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var p=(0,U.Z)(e,4);u=p[0],d=p[1],l=p[2],c=p[3]}var f,m=(0,U.Z)(t,4),v=m[0],g=m[1],y=m[3],b=ob(n),x=(0,U.Z)(b,2),w=x[0],k=x[1],S=ob(r),E=(0,U.Z)(S,2),T=E[0],C=E[1],_=ub(v,T),M=ub(g,C),I=function(e,t,n,r,a,i,o,s,u){var l,c,d;if("number"===typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,a){null==r&&(r=ib(e,t,n));var i=e[0],o=e[1],s=lb((i-t+2*r)/n+1,a),u=lb((o-t+2*r)/n+1,a);return[s,u]}([t,n],i,r,e,s);c=h[0],d=h[1]}else if("same"===e){c=Math.ceil(t/r),d=Math.ceil(n/a);var p=Math.max(0,(c-1)*r+i-t),f=Math.max(0,(d-1)*a+o-n),m=Math.floor(p/2),v=p-m,g=Math.floor(f/2);l={top:m,bottom:v,left:g,right:f-g,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),d=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],w="channelsLast"===u?e[2][1]:e[3][1];l={top:y,bottom:b,left:x,right:w,type:0===y&&0===b&&0===x&&0===w?"VALID":"EXPLICIT"},c=lb((t-i+y+b)/r+1,s),d=lb((n-o+x+w)/a+1,s)}return{padInfo:l,outHeight:c,outWidth:d}}(a,l,c,w,k,_,M,i,s),N=I.padInfo,A=I.outHeight,R=I.outWidth,O=o?y*d:y;return"channelsFirst"===s?f=[u,O,A,R]:"channelsLast"===s&&(f=[u,A,R,O]),{batchSize:u,dataFormat:s,inHeight:l,inWidth:c,inChannels:d,outHeight:A,outWidth:R,outChannels:O,padInfo:N,strideHeight:w,strideWidth:k,filterHeight:v,filterWidth:g,effectiveFilterHeight:_,effectiveFilterWidth:M,dilationHeight:T,dilationWidth:C,inShape:e,outShape:f,filterShape:t}}function ab(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,l=-1,c=-1,d=-1,h=-1;if("channelsLast"===o){var p=(0,U.Z)(e,5);u=p[0],l=p[1],c=p[2],d=p[3],h=p[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var f=(0,U.Z)(e,5);u=f[0],h=f[1],l=f[2],c=f[3],d=f[4]}var m,v=(0,U.Z)(t,5),g=v[0],y=v[1],b=v[2],x=v[4],w=sb(n),k=(0,U.Z)(w,3),S=k[0],E=k[1],T=k[2],C=sb(r),_=(0,U.Z)(C,3),M=_[0],I=_[1],N=_[2],A=ub(g,M),R=ub(y,I),O=ub(b,N),D=function(e,t,n,r,a,i,o,s,u,l,c){var d,h,p,f;if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,i){null==a&&(a=ib(e,t,r));var o=e[0],s=e[1],u=e[2],l=lb((o-t+2*a)/r+1,i),c=lb((s-t+2*a)/r+1,i),d=lb((u-t+2*a)/r+1,i);return[l,c,d,n]}([t,n,r,1],s,1,a,e,c);h=m[0],p=m[1],f=m[2]}else if("same"===e){var v=((h=Math.ceil(t/a))-1)*a+s-t,g=((p=Math.ceil(n/i))-1)*i+u-n,y=((f=Math.ceil(r/o))-1)*o+l-r,b=Math.floor(v/2),x=v-b,w=Math.floor(g/2),k=g-w,S=Math.floor(y/2);d={top:w,bottom:k,left:S,right:y-S,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-s+1)/a),p=Math.ceil((n-u+1)/i),f=Math.ceil((r-l+1)/o)}return{padInfo:d,outDepth:h,outHeight:p,outWidth:f}}(a,l,c,d,S,E,T,A,R,O,s),L=D.padInfo,P=D.outDepth,F=D.outHeight,j=D.outWidth,z=i?x*h:x;return"channelsFirst"===o?m=[u,z,P,F,j]:"channelsLast"===o&&(m=[u,P,F,j,z]),{batchSize:u,dataFormat:o,inDepth:l,inHeight:c,inWidth:d,inChannels:h,outDepth:P,outHeight:F,outWidth:j,outChannels:z,padInfo:L,strideDepth:S,strideHeight:E,strideWidth:T,filterDepth:g,filterHeight:y,filterWidth:b,effectiveFilterDepth:A,effectiveFilterHeight:R,effectiveFilterWidth:O,dilationDepth:M,dilationHeight:I,dilationWidth:N,inShape:e,outShape:m,filterShape:t}}function ib(e,t,n){var r=ub(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function ob(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function sb(e){return"number"===typeof e?[e,e,e]:e}function ub(e,t){return t<=1?e:e+(e-1)*(t-1)}function lb(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function cb(e){var t=ob(e),n=(0,U.Z)(t,3),r=n[0],a=n[1],i=n[2];return 1===r&&1===a&&1===i}function db(e,t){return cb(e)||cb(t)}function hb(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function pb(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)Ed(Nd(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){Ed(Nd(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var fb=Rv({reshape_:function(e,t){var n={x:Iv(e,"x","reshape","string_or_numeric")},r={shape:t};return wv.runKernel(gf,n,r)}});var mb=Rv({avgPool_:function(e,t,n,r,a){var i=Iv(e,"x","avgPool","float32");Ed(db(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=fb(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Ed(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),pb("avgPool",r,a);var u={x:o},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=wv.runKernel(Th,u,l);return c=Vg(c,i.dtype),s?fb(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var vb=Rv({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Iv(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=fb(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Ed(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),Ed("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),pb("avgPool3d",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=wv.runKernel(_h,l,c);return d=Vg(d,s.dtype),u?fb(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var gb=Rv({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Ed(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Nv(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return Zg(n[0]);var r=n,a={axis:t};return wv.runKernel(jh,r,a)}});var yb=Rv({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Iv(e,"a","matMul"),i=Iv(t,"b","matMul"),o=hv(a,i),s=(0,U.Z)(o,2),u={a:a=s[0],b:i=s[1]},l={transposeA:n,transposeB:r};return wv.runKernel(Ih,u,l)}});var bb=Rv({mul_:function(e,t){var n=Iv(e,"a","mul"),r=Iv(t,"b","mul"),a=hv(n,r),i=(0,U.Z)(a,2),o={a:n=i[0],b:r=i[1]};return wv.runKernel($p,o)}});var xb=Rv({sigmoid_:function(e){var t={x:Iv(e,"x","sigmoid","float32")};return wv.runKernel(Of,t)}});var wb=Rv({slice_:function(e,t,n){var r=Iv(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return wv.runKernel(If,a,i)}});var kb=Rv({tanh_:function(e){var t={x:Iv(e,"x","tanh","float32")};return wv.runKernel($f,t)}});var Sb=Rv({basicLSTMCell_:function(e,t,n,r,a,i){var o=Iv(e,"forgetBias","basicLSTMCell"),s=Iv(t,"lstmKernel","basicLSTMCell"),u=Iv(n,"lstmBias","basicLSTMCell"),l=Iv(r,"data","basicLSTMCell"),c=Iv(a,"c","basicLSTMCell"),d=Iv(i,"h","basicLSTMCell"),h=gb([l,d],1),p=yb(h,s),f=Vy(p,u),m=f.shape[0],v=f.shape[1]/4,g=[m,v],y=wb(f,[0,0],g),b=wb(f,[0,v],g),x=wb(f,[0,2*v],g),w=wb(f,[0,3*v],g),k=Vy(bb(xb(y),kb(b)),bb(c,xb(Vy(o,x))));return[k,bb(kb(k),xb(w))]}});var Eb=Rv({batchToSpaceND_:function(e,t,n){var r=Iv(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));Ed(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),Ed(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),Ed(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return wv.runKernel(Nh,i,o)}});var Tb=Rv({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=Iv(e,"x","batchNorm"),l=Iv(t,"mean","batchNorm"),c=Iv(n,"variance","batchNorm");null!=a&&(o=Iv(a,"scale","batchNorm")),null!=r&&(s=Iv(r,"offset","batchNorm")),Ed(l.rank===c.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Ed(null==s||l.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Ed(null==o||l.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var d=function(e){return 0===e.rank||1===e.rank?fb(e,[1,1,1,e.size]):2===e.rank?fb(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?fb(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),h={x:d,scale:o,offset:s,mean:l,variance:c},p={varianceEpsilon:i},f=wv.runKernel(yp,h,p);return fb(f,u.shape)}});var Cb=Rv({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=Iv(e,"x","batchNorm"),l=Iv(t,"mean","batchNorm"),c=Iv(n,"variance","batchNorm");return null!=a&&(o=Iv(a,"scale","batchNorm")),null!=r&&(s=Iv(r,"offset","batchNorm")),Ed(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),Ed(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(l.rank,".")})),Ed(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&Ed(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Ed(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),Tb(u,l,c,s,o,i)}});var _b=Rv({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=Iv(e,"x","batchNorm"),l=Iv(t,"mean","batchNorm"),c=Iv(n,"variance","batchNorm");return null!=a&&(o=Iv(a,"scale","batchNorm")),null!=r&&(s=Iv(r,"offset","batchNorm")),Ed(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),Ed(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(l.rank,".")})),Ed(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&Ed(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Ed(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),Tb(u,l,c,s,o,i)}});var Mb=Rv({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=Iv(e,"x","batchNorm"),l=Iv(t,"mean","batchNorm"),c=Iv(n,"variance","batchNorm");return null!=a&&(o=Iv(a,"scale","batchNorm")),null!=r&&(s=Iv(r,"offset","batchNorm")),Ed(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),Ed(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(l.rank,".")})),Ed(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&Ed(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Ed(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),Tb(u,l,c,s,o,i)}});var Ib=Rv({bincount_:function(e,t,n){var r=Iv(e,"x","bincount"),a=Iv(t,"weights","bincount");Ed("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),Ed(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),Ed(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return wv.runKernel(Ah,i,o)}});var Nb=Rv({broadcastArgs_:function(e,t){var n=Iv(e,"s0","broadcastArgs","int32"),r=Iv(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return wv.runKernel(Rh,a)}});var Ab=Rv({broadcastTo_:function(e,t){var n=Iv(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=fb(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return Zg(n);var l={x:n},c={reps:o};return wv.runKernel(em,l,c)}});var Rb=Rv({ceil_:function(e){var t={x:Iv(e,"x","ceil","float32")};return wv.runKernel(Dh,t)}});var Ob=Rv({clipByValue_:function(e,t,n){var r=Iv(e,"x","clipByValue");Ed(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var a={x:r},i={clipValueMin:t,clipValueMax:n};return wv.runKernel(Lh,a,i)}});var Db=Rv({concat1d_:function(e){return gb(e,0)}});var Lb=Rv({concat2d_:function(e,t){return gb(e,t)}});var Pb=Rv({concat3d_:function(e,t){return gb(e,t)}});var Fb=Rv({concat4d_:function(e,t){return gb(e,t)}});var jb=Rv({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Iv(e,"x","conv2d","float32"),u=Iv(t,"filter","conv2d","float32"),l=s,c=!1;3===s.rank&&(c=!0,l=fb(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Ed(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(l.rank,".")})),Ed(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),pb("conv2d",r,o);var d="NHWC"===a?l.shape[3]:l.shape[1];Ed(d===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(d,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),Ed(db(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}));var h={x:l,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},f=wv.runKernel(zh,h,p);return c?fb(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var zb=Rv({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=Iv(e,"x","conv1d"),u=Iv(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=fb(s,[1,s.shape[0],s.shape[1]])),Ed(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(l.rank,".")})),Ed(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),pb("conv1d",r,o),Ed(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(l.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),Ed(db(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),Ed("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var d=fb(u,[1,u.shape[0],u.shape[1],u.shape[2]]),h=fb(l,[l.shape[0],1,l.shape[1],l.shape[2]]),p=jb(h,d,[1,n],r,"NHWC",[1,i],o);return fb(p,c?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});var Bb=Rv({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;Ed(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,l=!1;3===t.rank&&(l=!0,u=fb(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),Ed(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),Ed(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),Ed(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var c="NHWC"===i?s[3]:s[1],d="NHWC"===i?u.shape[3]:u.shape[1];Ed(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),Ed(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),pb("conv2dDerInput",a,o);var h={dy:u,filter:n},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},f=wv.runKernel(Uh,h,p);return l?fb(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var Ub=Rv({conv2dTranspose_:function(e,t,n,r,a,i){var o=Iv(e,"x","conv2dTranspose"),s=Iv(t,"filter","conv2dTranspose");return Bb(n,o,s,r,a,"NHWC",i)}});var Wb=Rv({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=Iv(e,"x","conv3d"),s=Iv(t,"filter","conv3d"),u=o,l=!1;4===o.rank&&(l=!0,u=fb(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Ed(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),Ed(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),Ed(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),Ed(db(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),Ed("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var c={x:u,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:i},h=wv.runKernel(Wh,c,d);return l?fb(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var Vb=Rv({conv3DBackpropInput_:function(e,t,n,r,a){Ed(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=fb(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],l=o.shape[4];Ed(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),Ed(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),Ed(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),Ed(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),Ed(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(l,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var c={dy:o,filter:n},d={pad:a,strides:r,inputShape:i},h=wv.runKernel(Zh,c,d);return s?fb(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var Zb=Rv({conv3dTranspose_:function(e,t,n,r,a){var i=Iv(e,"x","conv3dTranspose"),o=Iv(t,"filter","conv3dTranspose");return Vb(n,i,o,r,a)}});var Hb=Rv({cos_:function(e){var t={x:Iv(e,"x","cos","float32")};return wv.runKernel(Hh,t)}});var Gb=Rv({cosh_:function(e){var t={x:Iv(e,"x","cosh","float32")};return wv.runKernel(Gh,t)}});var qb=Rv({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:Iv(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return wv.runKernel(qh,a,i)}});var Xb=Rv({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Iv(e,"x","denseBincount"),i=Iv(t,"weights","denseBincount");Ed("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),Ed(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),Ed(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),Ed(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")}));var o={x:a,weights:i},s={size:n,binaryOutput:r};return wv.runKernel(Yh,o,s)}});var Yb=Rv({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=Iv(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];Ed(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),Ed(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),Ed(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),Ed(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return wv.runKernel(Kh,s,u)}});var Kb=Rv({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Iv(e,"x","depthwiseConv2d","float32"),u=Iv(t,"filter","depthwiseConv2d","float32"),l=s,c=!1;3===s.rank&&(c=!0,l=fb(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Ed(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),Ed(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),Ed(l.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(l.shape[3],") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),pb("depthwiseConv2d",r,o);var d={x:l,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=wv.runKernel(Qh,d,h);return c?fb(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var Qb=Rv({diag_:function(e){var t={x:Iv(e,"x","diag")};return wv.runKernel(ep,t)}});var Jb=Rv({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=Iv(e,"x","dilation2d"),s=Iv(t,"filter","dilation2d");Ed(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")})),Ed(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),Ed("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)}));var u=o,l=!1;3===o.rank&&(u=fb(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0);var c={x:u,filter:s},d={strides:n,pad:r,dilations:a},h=wv.runKernel(tp,c,d);return l?fb(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var $b=Rv({floorDiv_:function(e,t){var n=Iv(e,"a","floorDiv"),r=Iv(t,"b","floorDiv"),a=hv(n,r),i=(0,U.Z)(a,2),o={a:n=i[0],b:r=i[1]};return wv.runKernel(gp,o)}});var ex=Rv({div_:function(e,t){var n=Iv(e,"a","div"),r=Iv(t,"b","div"),a=hv(n,r),i=(0,U.Z)(a,2);if(n=i[0],r=i[1],"int32"===n.dtype&&"int32"===r.dtype)return $b(n,r);var o={a:n,b:r};return wv.runKernel(ap,o,{})}});var tx=Rv({equal_:function(e,t){var n=Iv(e,"a","equal","string_or_numeric"),r=Iv(t,"b","equal","string_or_numeric"),a=hv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],my(n.shape,r.shape);var o={a:n,b:r};return wv.runKernel(lp,o)}});var nx=Rv({where_:function(e,t,n){var r=Iv(t,"a","where"),a=Iv(n,"b","where"),i=Iv(e,"condition","where","bool"),o=my(my(i.shape,r.shape),a.shape),s={condition:Ab(i,o),t:Ab(r,o),e:Ab(a,o)};return wv.runKernel(_f,s)}});var rx=Rv({zerosLike_:function(e){var t={x:Iv(e,"x","zerosLike")};return wv.runKernel(sm,t)}});var ax=Rv({divNoNan_:function(e,t){var n=Iv(e,"a","div"),r=Iv(t,"b","div"),a=hv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1];var o=ex(n,r),s=rx(o),u=tx(r,s);return nx(u,s,o)}});var ix=Rv({dot_:function(e,t){var n=Iv(e,"t1","dot"),r=Iv(t,"t2","dot");Ed((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(Ed(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=fb(n,[1,-1]),s=fb(r,[-1,1]),u=yb(o,s);return fb(u,[])}if(1===n.rank&&2===r.rank){var l=fb(n,[1,-1]),c=fb(r,[r.shape[0],r.shape[1]]),d=yb(l,c);return fb(d,[d.size])}if(2===n.rank&&1===r.rank){var h=fb(r,[-1,1]),p=yb(n,h);return fb(p,[p.size])}var f=fb(r,[r.shape[0],r.shape[1]]);return yb(n,f)}});var ox=Rv({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return Iv(e,"tensors".concat(t),"einsum")})),i={equation:e};return wv.runKernel(ip,a,i)}});var sx=Rv({elu_:function(e){var t={x:Iv(e,"x","elu","float32")};return wv.runKernel(op,t)}});var ux=Rv({erf_:function(e){var t=Iv(e,"x","erf");Ed("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=Vg(t,"float32"));var n={x:t};return wv.runKernel(up,n)}});var lx=Rv({exp_:function(e){var t={x:Iv(e,"x","exp")};return wv.runKernel(cp,t)}});var cx=Rv({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Iv(e,"x","expandDims","string_or_numeric");Ed(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return wv.runKernel(dp,r,a)}});var dx=Rv({expm1_:function(e){var t={x:Iv(e,"x","expm1")};return wv.runKernel(hp,t)}});var hx=Rv({tile_:function(e,t){var n=Iv(e,"x","tile","string_or_numeric");Ed(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return wv.runKernel(em,r,a)}});var px=Rv({eye_:function(e,t,n){null==t&&(t=e);for(var r=Wg([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),a=e<=t?e:t,i=0;i<a;++i)r.set(1,i,i);var o=fb(r.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return hx(cx(o,0),[n[0],1,1]);if(2===n.length)return hx(cx(cx(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return hx(cx(cx(cx(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});function fx(e,t,n){var r={shape:e,value:t,dtype:n};return wv.runKernel(fp,{},r)}var mx=Rv({floor_:function(e){var t={x:Iv(e,"x","floor","float32")};return wv.runKernel(vp,t)}});var vx=Rv({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a={x:Iv(e,"x","gather"),indices:Iv(t,"indices","gather","int32")},i={axis:n,batchDims:r};return wv.runKernel(bp,a,i)}});var gx=Rv({greater_:function(e,t){var n=Iv(e,"a","greater","string_or_numeric"),r=Iv(t,"b","greater","string_or_numeric"),a=hv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],my(n.shape,r.shape);var o={a:n,b:r};return wv.runKernel(wp,o)}});var yx=Rv({greaterEqual_:function(e,t){var n=Iv(e,"a","greaterEqual","string_or_numeric"),r=Iv(t,"b","greaterEqual","string_or_numeric"),a=hv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],my(n.shape,r.shape);var o={a:n,b:r};return wv.runKernel(kp,o)}});var bx=Rv({imag_:function(e){var t={input:Iv(e,"input","imag")};return wv.runKernel(Tp,t)}});var xx=Rv({isFinite_:function(e){var t={x:Iv(e,"x","isFinite")};return wv.runKernel(Cp,t)}});var wx=Rv({isInf_:function(e){var t={x:Iv(e,"x","isInf")};return wv.runKernel(_p,t)}});var kx=Rv({isNaN_:function(e){var t={x:Iv(e,"x","isNaN")};return wv.runKernel(Mp,t)}});var Sx=Rv({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:Iv(e,"x","leakyRelu")},r={alpha:t};return wv.runKernel(Ip,n,r)}});var Ex=Rv({less_:function(e,t){var n=Iv(e,"a","less","string_or_numeric"),r=Iv(t,"b","less","string_or_numeric"),a=hv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],my(n.shape,r.shape);var o={a:n,b:r};return wv.runKernel(Np,o)}});var Tx=Rv({lessEqual_:function(e,t){var n=Iv(e,"a","lessEqual","string_or_numeric"),r=Iv(t,"b","lessEqual","string_or_numeric"),a=hv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],my(n.shape,r.shape);var o={a:n,b:r};return wv.runKernel(Ap,o)}});function Cx(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return wv.runKernel(Rp,{},r)}var _x=Rv({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=Iv(e,"x","localResponseNormalization");Ed(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),Ed(Nd(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=fb(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},l={depthRadius:t,bias:n,alpha:r,beta:a},c=wv.runKernel(jp,u,l);return s?fb(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Mx=Rv({log_:function(e){var t={x:Iv(e,"x","log","float32")};return wv.runKernel(Op,t)}});var Ix=Rv({log1p_:function(e){var t={x:Iv(e,"x","log1p")};return wv.runKernel(Dp,t)}});var Nx=Rv({neg_:function(e){var t={x:Iv(e,"x","neg")};return wv.runKernel(ef,t)}});var Ax=Rv({softplus_:function(e){var t={x:Iv(e,"x","softplus")};return wv.runKernel(Df,t)}});var Rx=Rv({logSigmoid_:function(e){var t=Iv(e,"x","logSigmoid"),n=Fy((function(e){return{value:Nx(Ax(Nx(e))),gradFunc:function(t){return bb(t,xb(Nx(e)))}}}));return n(t)}});var Ox=Rv({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Iv(e,"x","max")},a={reductionIndices:t,keepDims:n};return wv.runKernel(Bp,r,a)}});var Dx=Rv({sub_:function(e,t){var n=Iv(e,"a","sub"),r=Iv(t,"b","sub"),a=hv(n,r),i=(0,U.Z)(a,2),o={a:n=i[0],b:r=i[1]};return wv.runKernel(Qf,o)}});var Lx=Rv({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Iv(e,"x","sum");"bool"===r.dtype&&(r=Vg(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return wv.runKernel(Pf,a,i)}});var Px=Rv({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Iv(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=Fy((function(e,n){var r=Ox(e,t,!0),a=Dx(e,r),i=Dx(Vg(a,"float32"),Mx(Lx(lx(a),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var r=(0,U.Z)(n,1)[0],a=lx(r);return Dx(e,bb(Lx(e,t,!0),a))}}}));return r(n)}});function Fx(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function jx(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function zx(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}(e,t.map((function(e){return 1})),t)}function Bx(e,t,n){Ed(Fx(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function Ux(e,t){if(Fx(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Wx(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Vx(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var Zx=Rv({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Iv(e,"x","logSumExp"),a=Ld(t,r.shape),i=Ox(r,a,!0),o=Dx(r,i),s=lx(o),u=Lx(s,a),l=Mx(u),c=Vy(fb(i,l.shape),l);if(n){var d=zx(c.shape,a);return fb(c,d)}return c}});var Hx=Rv({logicalAnd_:function(e,t){var n=Iv(e,"a","logicalAnd","bool"),r=Iv(t,"b","logicalAnd","bool");my(n.shape,r.shape);var a={a:n,b:r};return wv.runKernel(Lp,a)}});var Gx=Rv({logicalNot_:function(e){var t={x:Iv(e,"x","logicalNot","bool")};return wv.runKernel(Pp,t)}});var qx=Rv({logicalOr_:function(e,t){var n=Iv(e,"a","logicalOr","bool"),r=Iv(t,"b","logicalOr","bool");my(n.shape,r.shape);var a={a:n,b:r};return wv.runKernel(Fp,a)}});var Xx=Rv({logicalXor_:function(e,t){var n=Iv(e,"a","logicalXor","bool"),r=Iv(t,"b","logicalXor","bool");return my(n.shape,r.shape),Hx(qx(e,t),Gx(Hx(e,t)))}});var Yx=Rv({maxPool_:function(e,t,n,r,a){var i=Iv(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=fb(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Ed(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),Ed(db(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),pb("maxPool",r,a);var u={x:o},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=wv.runKernel(Wp,u,l);return s?fb(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Kx=Rv({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Iv(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=fb(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Ed(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),Ed("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),pb("maxPool3d",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=wv.runKernel(Zp,l,c);return u?fb(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var Qx=Rv({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={x:Iv(e,"x","maxPoolWithArgmax")},o={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},s=wv.runKernel(Gp,i,o);return{result:s[0],indexes:s[1]}}});var Jx=Rv({maximum_:function(e,t){var n=Iv(e,"a","maximum"),r=Iv(t,"b","maximum"),a=hv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],"bool"===n.dtype&&(n=Vg(n,"int32"),r=Vg(r,"int32")),my(n.shape,r.shape);var o={a:n,b:r};return wv.runKernel(Up,o)}});var $x=Rv({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Iv(e,"x","mean")},a={axis:t,keepDims:n};return wv.runKernel(qp,r,a)}});function ew(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=ew(e,"float32"),r=ew(e,"float32");return Ov(n,r)}var a=Qd(Md(e),t);return wv.makeTensor(a,e,t)}function tw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=tw(e,"float32"),r=ew(e,"float32");return Ov(n,r)}var a=Kd(Md(e),t);return wv.makeTensor(a,e,t)}function nw(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).indexing,r=void 0===n?"xy":n;if("xy"!==r&&"ij"!==r)throw new TypeError("".concat(r," is not a valid third argument to meshgrid"));if(void 0===e)return[];var a=Iv(e,"x","meshgrid",e instanceof tv?e.dtype:"float32");if(void 0===t)return[a];var i=Iv(t,"y","meshgrid",t instanceof tv?t.dtype:"float32"),o=Md(a.shape),s=Md(i.shape);return"xy"===r?(a=fb(a,[1,-1]),i=fb(i,[-1,1]),[yb(tw([s,1],a.dtype),a),yb(i,tw([1,o],i.dtype))]):(a=fb(a,[-1,1]),i=fb(i,[1,-1]),[yb(a,tw([1,s],a.dtype)),yb(tw([o,1],i.dtype),i)])}var rw=Rv({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Iv(e,"x","min")},a={axis:t,keepDims:n};return wv.runKernel(Xp,r,a)}});var aw=Rv({minimum_:function(e,t){var n=Iv(e,"a","minimum"),r=Iv(t,"b","minimum"),a=hv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],"bool"===n.dtype&&(n=Vg(n,"int32"),r=Vg(r,"int32")),my(n.shape,r.shape);var o={a:n,b:r};return wv.runKernel(Yp,o)}});var iw=Rv({mirrorPad_:function(e,t,n){Ed("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=Iv(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Ed(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){Ed(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Ed(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return wv.runKernel(Kp,u,s)}});var ow=Rv({mod_:function(e,t){var n=Iv(e,"a","mod"),r=Iv(t,"b","mod"),a=hv(n,r),i=(0,U.Z)(a,2),o={a:n=i[0],b:r=i[1]};return wv.runKernel(Qp,o)}});var sw=Rv({square_:function(e){var t=Iv(e,"x","square");return wv.runKernel("Square",{x:t},{})}});var uw=Rv({moments_:function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Ld(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=Iv(e,"x","moments")).shape),r=$x(e,n,t),a=r.shape;t||(a=zx(r.shape,n));var i=sw(Dx(Vg(e,"float32"),fb(r,a)));return{mean:r,variance:$x(i,n,t)}}});var lw=Rv({multiRNNCell_:function(e,t,n,r){for(var a=Iv(t,"data","multiRNNCell"),i=Nv(n,"c","multiRNNCell"),o=Nv(r,"h","multiRNNCell"),s=a,u=[],l=0;l<e.length;l++){var c=e[l](s,i[l],o[l]);u.push(c[0]),u.push(c[1]),s=c[1]}for(var d=[],h=[],p=0;p<u.length;p+=2)d.push(u[p]),h.push(u[p+1]);return[d,h]}});var cw=Rv({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Iv(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s={logits:1===o?fb(a,[1,-1]):a},u={numSamples:t,seed:n,normalized:r},l=wv.runKernel(Jp,s,u);return 1===o?fb(l,[l.size]):l}});var dw=Rv({notEqual_:function(e,t){var n=Iv(e,"a","notEqual","string_or_numeric"),r=Iv(t,"b","notEqual","string_or_numeric"),a=hv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],my(n.shape,r.shape);var o={a:n,b:r};return wv.runKernel(tf,o)}});var hw=Rv({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a={indices:Iv(e,"indices","oneHot","int32")},i={depth:t,onValue:n,offValue:r};return wv.runKernel(sf,a,i)}});var pw=Rv({onesLike_:function(e){var t={x:Iv(e,"x","onesLike")};return wv.runKernel(of,t)}});var fw=Rv({outerProduct_:function(e,t){var n=Iv(e,"v1","outerProduct"),r=Iv(t,"v2","outerProduct");Ed(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=fb(n,[-1,1]),i=fb(r,[1,-1]);return yb(a,i)}});var mw=Rv({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Iv(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return wv.runKernel(lf,i,a)}});var vw=Rv({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ed(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),mw(e,[t],n)}});var gw=Rv({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ed(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),mw(e,t,n)}});var yw=Rv({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ed(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),mw(e,t,n)}});var bw=Rv({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ed(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),mw(e,t,n)}});var xw=Rv({spaceToBatchND_:function(e,t,n){var r=Iv(e,"x","spaceToBatchND");Ed(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),Ed(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),Ed(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return wv.runKernel(Ff,a,i)}});var ww=Rv({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var s=Iv(e,"x","maxPool"),u=s,l=!1;3===s.rank&&(l=!0,u=fb(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Ed(db(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var c,d=tb(u.shape,t,i,a,r),h=[d.dilationHeight,d.dilationWidth];c="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})),r=n.map((function(e){return e-1})),a=r.map((function(e){return Math.floor(e/2)})),i=r.map((function(e,t){return e-a[t]}));return r.map((function(e,t){return[a[t],i[t]]}))}([d.filterHeight,d.filterWidth],h):[[0,0],[0,0]];var p=1===h[0]&&1===h[1],f=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),l=t.map((function(e,t){return[0,o[t]]}));return[u,l]}([d.inHeight,d.inWidth],h,c),m=(0,U.Z)(f,2),v=m[0],g=m[1],y=p?r:"valid",b=p?u:xw(u,h,v),x=("avg"===n?function(){return mb(b,t,i,y,o)}:function(){return Yx(b,t,i,y,o)})(),w=p?x:Eb(x,h,g);return l?fb(w,[w.shape[1],w.shape[2],w.shape[3]]):w}});var kw=Rv({pow_:function(e,t){var n=Iv(e,"base","pow"),r=Iv(t,"exp","pow"),a=hv(n,r),i=(0,U.Z)(a,2),o={a:n=i[0],b:r=i[1]};return wv.runKernel(cf,o)}});var Sw=Rv({prelu_:function(e,t){var n={x:Iv(e,"x","prelu"),alpha:Iv(t,"alpha","prelu")};return wv.runKernel(df,n)}});var Ew=Rv({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Iv(e,"x","prod");"bool"===r.dtype&&(r=Vg(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return wv.runKernel(hf,a,i)}});var Tw=Rv({rand_:function(e,t,n){var r=Md(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return wv.makeTensor(a,e,n)}}),Cw=n(6699),_w=function(){function e(t,n,r,a,i){M(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=Cw.alea(o.toString())}return(0,I.Z)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),Mw=function(){function e(t,n,r,a){M(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=Cw.alea(i.toString()),this.randn=new _w(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return(0,I.Z)(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),Iw=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(M(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=Cw.alea(i)}return(0,I.Z)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var Nw=Rv({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new Mw(t,n,r,a),o=Wg(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var Aw=Rv({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new _w(t,n,r,!1,a),o=Wg(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var Rw=Rv({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>4?arguments[4]:void 0,a=Wg(e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),i=new Iw(t,n,null,r),o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}});function Ow(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return wv.runKernel(pf,{},a)}var Dw=Rv({real_:function(e){var t={input:Iv(e,"input","real")};return wv.runKernel(ff,t)}});var Lw=Rv({reciprocal_:function(e){var t={x:Iv(e,"x","reciprocal")};return wv.runKernel(mf,t)}});var Pw=Rv({relu_:function(e){var t={x:Iv(e,"x","relu")};return wv.runKernel(vf,t)}});var Fw=Rv({relu6_:function(e){var t={x:Iv(e,"x","relu6")};return wv.runKernel(kf,t)}});var jw=Rv({reverse_:function(e,t){var n={x:Iv(e,"x","reverse")},r={dims:t};return wv.runKernel(Sf,n,r)}});var zw=Rv({reverse1d_:function(e){var t=Iv(e,"x","reverse");return Ed(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),jw(t,0)}});var Bw=Rv({reverse2d_:function(e,t){var n=Iv(e,"x","reverse");return Ed(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),jw(n,t)}});var Uw=Rv({reverse3d_:function(e,t){var n=Iv(e,"x","reverse");return Ed(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),jw(n,t)}});var Ww=Rv({reverse4d_:function(e,t){var n=Iv(e,"x","reverse");return Ed(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),jw(n,t)}});var Vw=Rv({round_:function(e){var t={x:Iv(e,"x","round")};return wv.runKernel(Ef,t)}});var Zw=Rv({rsqrt_:function(e){var t={x:Iv(e,"x","rsqrt","float32")};return wv.runKernel(Tf,t)}});var Hw=Rv({selu_:function(e){var t={x:Iv(e,"x","selu")};return wv.runKernel(Mf,t)}});var Gw=Rv({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=Iv(e,"x","separableConv2d"),u=Iv(t,"depthwiseFilter","separableConv2d"),l=Iv(n,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(3===s.rank&&(d=!0,c=fb(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Ed(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),Ed(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),Ed(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),Ed(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(l.shape[0],".")})),Ed(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(l.shape[1],".")}));var h=u.shape[2],p=u.shape[3];Ed(l.shape[2]===h*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(h*p,", ")+"but got ".concat(l.shape[2],".")}));var f=Kb(c,u,r,a,o,i),m=jb(f,l,1,"valid",o);return d?fb(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});function qw(){return qw=Jn(Kn().mark((function e(t,n){var r,a,i,o,s,u,l,c,d,h,p;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Iv(t,"x","setdiff1d"),a=Iv(n,"y","setdiff1d"),Ed(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),Ed(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),Ed(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return i=e.sent,e.next=10,a.data();case 10:for(o=e.sent,s=new Set(o),u=0,l=0;l<i.length;l++)s.has(i[l])||u++;for(c=new Jm([u],r.dtype),d=new Jm([u],"int32"),h=0,p=0;h<i.length;h++)s.has(i[h])||(c.values[p]=i[h],d.values[p]=h,p++);return e.abrupt("return",[c.toTensor(),d.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),qw.apply(this,arguments)}var Xw=function(e,t){return qw.apply(this,arguments)};var Yw=Rv({sign_:function(e){var t={x:Iv(e,"x","sign")};return wv.runKernel(Rf,t)}});var Kw=Rv({sin_:function(e){var t={x:Iv(e,"x","sin","float32")};return wv.runKernel(Nf,t)}});var Qw=Rv({sinh_:function(e){var t={x:Iv(e,"x","sinh")};return wv.runKernel(Af,t)}});var Jw=Rv({slice1d_:function(e,t,n){var r=Iv(e,"x","slice1d");return Ed(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),wb(r,[t],[n])}});var $w=Rv({slice2d_:function(e,t,n){var r=Iv(e,"x","slice2d");return Ed(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),wb(r,t,n)}});var ek=Rv({slice3d_:function(e,t,n){var r=Iv(e,"x","slice3d");return Ed(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),wb(r,t,n)}});var tk=Rv({slice4d_:function(e,t,n){var r=Iv(e,"x","slice4d");return Ed(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),wb(r,t,n)}});var nk=Rv({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Iv(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return wv.runKernel(zf,r,a)}});var rk=Rv({fft_:function(e){Ed("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return wv.runKernel(pp,t)}});var ak=Rv({ifft_:function(e){Ed("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return wv.runKernel(Ep,t)}});var ik=Rv({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=fb(e,[r,n]);t=ak(a)}else{var i=[r,2*(n-1)],o=fb(Dw(e),[r,n]),s=fb(bx(e),[r,n]),u=jw(wb(o,[0,1],[r,n-2]),1),l=bb(jw(wb(s,[0,1],[r,n-2]),1),jy(-1)),c=gb([o,u],1),d=gb([s,l],1),h=fb(Ov(c,d),[i[0],i[1]]);t=ak(h)}if(t=Dw(t),3===e.rank&&0!==e.shape[0]){var p=t,f=e.shape[0];t=fb(t,[f,t.shape[0]/f,t.shape[1]]),p.dispose()}return t}});var ok=Rv({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={x:Iv(e,"x","split")},a={numOrSizeSplits:t,axis:n};return wv.runKernel(jf,r,a)}});var sk=Rv({rfft_:function(e,t){Ed("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=wb(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=gb([e,ew(s)],e.shape.length-1),r=t}else n=e;var u=rx(n),l=fb(Ov(n,u),[a,r]),c=rk(l),d=Math.floor(r/2)+1,h=Dw(c),p=bx(c),f=ok(h,[d,r-d],h.shape.length-1),m=ok(p,[d,r-d],p.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=d,fb(Ov(f[0],m[0]),v)}});var uk=Rv({sqrt_:function(e){var t={x:Iv(e,"x","sqrt","float32")};return wv.runKernel(Lf,t)}});var lk=Rv({squaredDifference_:function(e,t){var n=Iv(e,"a","squaredDifference"),r=Iv(t,"b","squaredDifference"),a=hv(n,r),i=(0,U.Z)(a,2);n=i[0],r=i[1],my(n.shape,r.shape);var o={a:n,b:r};return wv.runKernel(Hf,o,{})}});var ck=Rv({squeeze_:function(e,t){var n=Iv(e,"x","squeeze");return fb(n,Pd(n.shape,t).newShape)}});var dk=Rv({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Nv(e,"tensors","stack","string_or_numeric");Ed(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&Ed(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return wv.runKernel(uf,r,a)}});var hk=Rv({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Iv(e,"x","step")},r={alpha:t};return wv.runKernel(um,n,r)}});var pk=Rv({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l={x:Iv(e,"x","stridedSlice","string_or_numeric")},c={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return wv.runKernel(qf,l,c)}});var fk=Rv({tan_:function(e){var t={x:Iv(e,"x","tan","float32")};return wv.runKernel(Jf,t)}});function mk(e,t){Cd(e);var n=Cv(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Dv(e,null,n,t)}function vk(e,t,n){if(Cd(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Cv(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Dv(e,t,r,n)}function gk(e,t,n){if(Cd(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Cv(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Dv(e,t,r,n)}function yk(e,t,n){if(Cd(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Cv(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Dv(e,t,r,n)}function bk(e,t,n){if(Cd(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Cv(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Dv(e,t=t||r,r,n)}var xk=Rv({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Iv(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=wv.runKernel(tm,i,o),u=(0,U.Z)(s,2);return{values:u[0],indices:u[1]}}});var wk=Rv({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new _w(t,n,r,!0,a),o=Wg(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var kk=Rv({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Iv(e,"x","unique","string_or_numeric");Ed(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=wv.runKernel(am,r,a),o=(0,U.Z)(i,2);return{values:o[0],indices:o[1]}}});var Sk=Rv({unsortedSegmentSum_:function(e,t,n){var r=Iv(e,"x","unsortedSegmentSum"),a=Iv(t,"segmentIds","unsortedSegmentSum","int32");Ed(Nd(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return wv.runKernel(om,i,o)}});var Ek=Rv({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Iv(e,"x","unstack","string_or_numeric");Ed(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return wv.runKernel(im,r,a)}});function Tk(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return wv.makeVariable(e,t,n,r)}function Ck(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=Wg(e,"int32"),i=Wg([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}function _k(){return(_k=Jn(Kn().mark((function e(t){var n,r,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Iv(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=Ck(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mk=function(e){return _k.apply(this,arguments)};function Ik(){return Ik=Jn(Kn().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,v;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=Iv(t,"tensor","boolMask"),i=Iv(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,u=a.shape,Ed(s>0,(function(){return"mask cannot be scalar"})),Td(u.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,c=o;c<o+s;c++)l*=u[c];return d=u.slice(0,o).concat([l],u.slice(o+s)),h=fb(a,d),p=fb(i,[-1]),e.next=14,Mk(p);case 14:return f=e.sent,m=ck(f,[1]),v=vx(h,m,o),t!==a&&a.dispose(),n!==i&&i.dispose(),m.dispose(),h.dispose(),p.dispose(),f.dispose(),e.abrupt("return",v);case 24:case"end":return e.stop()}}),e)}))),Ik.apply(this,arguments)}var Nk=function(e,t,n){return Ik.apply(this,arguments)};var Ak=Rv({transpose_:function(e,t){var n=Iv(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),Ed(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){Ed(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1)return n.clone();var r={x:n},a={perm:t};return wv.runKernel(rm,r,a)}});function Rk(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return By(e);if(1!==e.rank&&null===n)return Rk(fb(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Lx(By(e),n);if(t===1/0)return Ox(By(e),n);if(t===-1/0)return rw(By(e),n);if("euclidean"===t||2===t)return uk(Lx(kw(By(e),jy(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Ox(Lx(By(e),n[0]),n[1]-1);if(t===1/0)return Ox(Lx(By(e),n[1]),n[0]);if(t===-1/0)return rw(Lx(By(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return uk(Lx(sw(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Ok=Rv({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Rk(e=Iv(e,"x","norm"),t,n),i=a.shape;if(r){var o=Ld(n,e.shape);i=zx(a.shape,o)}return fb(a,i)}});var Dk=Rv({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=Iv(e,"v","movingAverage"),o=Iv(t,"x","movingAverage"),s=Iv(n,"decay","movingAverage");!function(e,t){Ed(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}(i,o),Ed(Id(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=jy(1),l=Dx(u,s),c=bb(Dx(o,i),l);if(a){Ed(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=Iv(r,"step","movingAverage");c=ex(c,Dx(u,kw(s,d)))}return Vy(i,c)}});function Lk(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}!function(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}(n,t,e)}function Pk(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:Md(t.shape)/u,sliceSize:o,strides:[].concat((0,_.Z)(qd(n.slice(0,a))),[1]),outputSize:Md(n)}}var Fk=Rv({scatterND_:function(e,t,n){var r=Iv(e,"indices","scatterND","int32"),a=Iv(t,"updates","scatterND");Lk(a,r,n);var i={indices:r,updates:a},o={shape:n};return wv.runKernel(Cf,i,o)}});var jk=Rv({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Iv(e,"sparseIndices","sparseToDense","int32"),i=Iv(t,"sparseValues","sparseToDense"),o=Iv(r,"defaultValue","sparseToDense",i.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},u={outputShape:n};return wv.runKernel(Zf,s,u)}});var zk=Rv({gatherND_:function(e,t){var n=Iv(t,"indices","gatherND","int32"),r={params:Iv(e,"x","gatherND","string_or_numeric"),indices:n};return wv.runKernel(xp,r)}});var Bk=Rv({dropout_:function(e,t,n,r){var a=Iv(e,"x","dropout");if(Ed("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),Ed(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof tv?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(Id(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=ex(mx(Vy(Rw(i,0,1,"float32",r),o)),o);return bb(a,s)}});function Uk(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Wk(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return mk(a,"float32")}function Vk(){return Vk=Jn(Kn().mark((function e(t,n){var r,a,i,o,s,u,l,c,d,h,p,f,m,v,g,y=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:1,a=Iv(t,"predictions","inTopK"),i=Iv(n,"targets","inTopK"),Ed(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),Ed(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),Td(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],Ed(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=10,a.data();case 10:return s=e.sent,e.next=13,i.data();case 13:u=e.sent,l=s.length/o,c=o,d=Fd("bool",l),h=0;case 17:if(!(h<l)){e.next=35;break}for(p=h*c,f=s.subarray(p,p+c),m=[],v=0;v<f.length;v++)m.push({value:f[v],index:v});m.sort((function(e,t){return t.value-e.value})),d[h]=0,g=0;case 25:if(!(g<r)){e.next=32;break}if(m[g].index!==u[h]){e.next=29;break}return d[h]=1,e.abrupt("break",32);case 29:g++,e.next=25;break;case 32:h++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",Lv(d,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),Vk.apply(this,arguments)}var Zk=function(e,t){return Vk.apply(this,arguments)};var Hk=Rv({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=fb(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=fb(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Ed(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),Ed(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),Ed(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var l="NHWC"===i?s.shape[3]:s.shape[1],c="NHWC"===i?u.shape[3]:u.shape[1];Ed(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(l,") must ")+"match input depth in filter (".concat(n[2],".")})),Ed(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(c,") must ")+"match output depth for filter (".concat(n[3],").")})),pb("conv2dDerFilter",a,o);var d={x:s,dy:u},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return wv.runKernel(Bh,d,h)}});function Gk(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return bb(e,hk(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function qk(e,t){var n=t,r=fy(e.shape,t.shape);return r.length>0&&(n=Lx(n,r)),fb(n,e.shape)}function Xk(e,t,n,r){if("linear"===t)return e;if("relu"===t)return Pw(e);if("elu"===t)return sx(e);if("relu6"===t)return Fw(e);if("prelu"===t)return Sw(e,n);if("leakyrelu"===t)return Sx(e,r);if("sigmoid"===t)return xb(e);throw new Error("Unknown fused activation ".concat(t,"."))}var Yk=function(e,t){return!(e>0)||"linear"===t};var Kk=Rv({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,d=e.activation,h=void 0===d?"linear":d,p=e.preluActivationWeights,f=e.leakyreluAlpha;if(h=h||"linear",!1===Yk(wv.state.gradientDepth,h)){var m=jb(t,n,r,a,o,u,l);return null!=c&&(m=Vy(m,c)),Xk(m,h,p,f)}var v=Iv(t,"x","conv2d","float32"),g=Iv(n,"filter","conv2d","float32"),y=v,b=!1;3===v.rank&&(b=!0,y=fb(v,[1,v.shape[0],v.shape[1],v.shape[2]])),Ed(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(y.rank,".")})),Ed(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(g.rank,".")})),pb("fused conv2d",a,l),Ed(y.shape[3]===g.shape[2],(function(){return"Error in conv2d: depth of input (".concat(y.shape[3],") must match ")+"input depth for filter ".concat(g.shape[2],".")})),Ed(db(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(u,"'")})),Ed("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var x,w,k=rb(y.shape,g.shape,r,u,a,l);if(null!=c){var S=hv(x=Iv(c,"bias","fused conv2d"),v);x=(0,U.Z)(S,1)[0],my(k.outShape,x.shape)}null!=p&&(w=Iv(p,"prelu weights","fused conv2d"));var E=function(e,t){var n=(0,U.Z)(t,4),i=n[0],o=n[1],s=n[2],l=n[3],c=Gk(e,s,h);Ed(cb(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")}));var d=[Bb(o.shape,c,i,r,a),Hk(o,c,i.shape,r,a)];if(null!=l){var p=qk(l,c);d.push(p)}return d},T={x:y,filter:g,bias:x,preluActivationWeights:w},C={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:l,activation:h,leakyreluAlpha:f};if(null==c){var _=Fy((function(e,t,n){var r=wv.runKernel(hm,T,C);return n([t,e,r]),b&&(r=fb(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:E}}));return _(y,g)}var M=Fy((function(e,t,n,r){var a=wv.runKernel(hm,T,C);return r([t,e,a,n]),b&&(a=fb(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:E}}));return M(y,g,x)}});var Qk=Rv({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=fb(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=fb(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={x:s,dy:u},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return wv.runKernel(Jh,l,c)}});var Jk=Rv({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=fb(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},d=wv.runKernel($h,l,c);return u?fb(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var $k=Rv({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,d=e.activation,h=void 0===d?"linear":d,p=e.preluActivationWeights,f=e.leakyreluAlpha;if(!1===Yk(wv.state.gradientDepth,h)){var m=Kb(t,n,r,a,o,u,l);return null!=c&&(m=Vy(m,c)),Xk(m,h,p,f)}var v=Iv(t,"x","depthwiseConv2d","float32"),g=Iv(n,"filter","depthwiseConv2d","float32"),y=v,b=!1;3===v.rank&&(b=!0,y=fb(v,[1,v.shape[0],v.shape[1],v.shape[2]])),Ed(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(y.rank,".")})),Ed(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(g.rank,".")})),Ed(y.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(y.shape[3],") must match the inChannels dimension in ")+"filter ".concat(g.shape[2],".")})),null==u&&(u=[1,1]),Ed(db(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),pb("fused depthwiseConv2d",a,l);var x,w,k=rb(y.shape,g.shape,r,u,a,l,!0);if(null!=c){var S=hv(x=Iv(c,"bias","fused conv2d"),v),E=(0,U.Z)(S,1);x=E[0],my(k.outShape,x.shape)}null!=p&&(w=Iv(p,"prelu weights","fused depthwiseConv2d"));var T=function(e,t){Ed(cb(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var n=(0,U.Z)(t,4),i=n[0],o=n[1],s=n[2],c=n[3],d=Gk(e,s,h),p=Jk(o.shape,d,i,r,a,u,l),f=Qk(o,d,i.shape,r,a,u,l);return null!=c?[p,f,qk(x,d)]:[p,f]},C={x:y,filter:g,bias:x,preluActivationWeights:w},_={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:l,activation:h,leakyreluAlpha:f};if(null==c){var M=Fy((function(e,t,n){var r=wv.runKernel(pm,C,_);return n([t,e,r]),b&&(r=fb(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:T}}));return M(y,g)}var I=Fy((function(e,t,n,r){var a=wv.runKernel(pm,C,_);return r([t,e,a,n]),b&&(a=fb(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:T}}));return I(y,g,x)}});var eS=Rv({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,u=e.activation,l=void 0===u?"linear":u,c=e.preluActivationWeights,d=e.leakyreluAlpha;if(!1===Yk(wv.state.gradientDepth,l)){var h=yb(t,n,a,o);return null!=s&&(h=Vy(h,s)),Xk(h,l,c,d)}var p=Iv(t,"a","fused matMul"),f=Iv(n,"b","fused matMul"),m=hv(p,f),v=(0,U.Z)(m,2);p=v[0],f=v[1];var g=a?p.shape[p.rank-2]:p.shape[p.rank-1],y=o?f.shape[f.rank-1]:f.shape[f.rank-2],b=a?p.shape[p.rank-1]:p.shape[p.rank-2],x=o?f.shape[f.rank-2]:f.shape[f.rank-1],w=p.shape.slice(0,-2),k=f.shape.slice(0,-2),S=Md(w),E=Md(k);Ed(g===y,(function(){return"Error in fused matMul: inner shapes (".concat(g,") and (")+"".concat(y,") of Tensors with shapes ").concat(p.shape," and ")+"".concat(f.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var T,C,_=my(p.shape.slice(0,-2),f.shape.slice(0,-2)).concat([b,x]),M=fb(p,a?[S,g,b]:[S,b,g]),I=fb(f,o?[E,x,y]:[E,y,x]);if(null!=s){var N=hv(T=Iv(s,"bias","fused matMul"),p);T=(0,U.Z)(N,1)[0],my(_,T.shape)}null!=c&&(C=Iv(c,"prelu weights","fused matMul"));var A=function(e,t){var n,r,i=(0,U.Z)(t,4),u=i[0],c=i[1],d=i[2],h=i[3],p=Gk(fb(e,d.shape),d,l);return a||o?!a&&o?(n=yb(p,c,!1,!1),r=yb(p,u,!0,!1)):a&&!o?(n=yb(c,p,!1,!0),r=yb(u,p,!1,!1)):(n=yb(c,p,!0,!0),r=yb(p,u,!0,!0)):(n=yb(p,c,!1,!0),r=yb(u,p,!0,!1)),null!=s?[n,r,qk(h,p)]:[n,r]},R={a:M,b:I,bias:T,preluActivationWeights:C},O={transposeA:a,transposeB:o,activation:l,leakyreluAlpha:d};if(null==s){var D=Fy((function(e,t,n){var r=wv.runKernel(dm,R,O);return n([e,t,r]),{value:fb(r,_),gradFunc:A}}));return D(M,I)}var L=Fy((function(e,t,n,r){var a=wv.runKernel(dm,R,O);return r([e,t,a,n]),{value:fb(a,_),gradFunc:A}}));return L(M,I,T)}});var tS=Rv({hammingWindow_:function(e){return Wk(e,.54,.46)}});var nS=Rv({hannWindow_:function(e){return Wk(e,.5,.5)}});var rS=Rv({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(wb(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=gb([wb(e,i,t-s),fx([s],a)]);o.push(u),i+=n}return 0===o.length?vk([],[0,t]):fb(gb(o),[o.length,t])}});var aS=Rv({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:nS;null==r&&(r=Uk(t));var i=rS(e,t,n),o=bb(i,a(t));return sk(o,r)}});var iS=Rv({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Iv(e,"image","cropAndResize"),s=Iv(t,"boxes","cropAndResize","float32"),u=Iv(n,"boxInd","cropAndResize","int32"),l=s.shape[0];Ed(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),Ed(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(l,",4] ")+"but had shape ".concat(s.shape,".")})),Ed(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(l,"] ")+"but had shape ".concat(s.shape,".")})),Ed(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),Ed(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),Ed("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var c={image:o,boxes:s,boxInd:u},d={method:a,extrapolationValue:i,cropSize:r};return wv.runKernel(Xh,c,d)}});var oS=Rv({flipLeftRight_:function(e){var t=Iv(e,"image","flipLeftRight","float32");Ed(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return wv.runKernel(mp,n,{})}});var sS=Rv({grayscaleToRGB_:function(e){var t=Iv(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];Ed(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),Ed(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,hx(t,a)}});var uS=Rv({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Iv(e,"image","rotateWithOffset","float32");Ed(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r};return wv.runKernel(cm,i,o)}});function lS(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),Ed(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),Ed(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),Ed(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),Ed(1===t.rank,(function(){return"scores must be a 1D tensor"})),Ed(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),Ed(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var cS=Rv({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=Iv(e,"boxes","nonMaxSuppression","float32"),o=Iv(t,"scores","nonMaxSuppression","float32"),s=lS(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return wv.runKernel(nf,{boxes:i,scores:o},u)}});function dS(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||hS)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function hS(e,t){return e>t?1:e<t?-1:0}function pS(e,t,n,r,a){return vS(e,t,n,r,a,0)}function fS(e,t,n,r,a,i){return vS(e,t,n,r,a,0,!1,i,!0)}function mS(e,t,n,r,a,i){return vS(e,t,n,r,a,i,!0)}function vS(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],l=[],c=0;c<t.length;c++)t[c]>a&&l.push({score:t[c],boxIndex:c,suppressBeginIndex:0});l.sort(bS);for(var d=i>0?-.5/i:0,h=[],p=[];h.length<n&&l.length>0;){var f=l.pop(),m=f.score,v=f.boxIndex,g=f.suppressBeginIndex;if(m<a)break;for(var y=!1,b=h.length-1;b>=g;--b){var x=gS(e,v,h[b]);if(x>=r){y=!0;break}if(f.score=f.score*yS(r,d,x),f.score<=a)break}f.suppressBeginIndex=h.length,y||(f.score===m?(h.push(v),p.push(f.score)):f.score>a&&dS(l,f,bS))}var w=h.length,k=n-w;s&&k>0&&(h.push.apply(h,(0,_.Z)(new Array(k).fill(0))),p.push.apply(p,(0,_.Z)(new Array(k).fill(0))));var S={selectedIndices:h};return o&&(S.selectedScores=p),u&&(S.validOutputs=w),S}function gS(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),p=(s-i)*(u-o),f=(d-l)*(h-c);if(p<=0||f<=0)return 0;var m=Math.max(i,l),v=Math.max(o,c),g=Math.min(s,d),y=Math.min(u,h),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(p+f-b)}function yS(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function bS(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function xS(){return xS=Jn(Kn().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>3&&void 0!==f[3]?f[3]:.5,i=f.length>4&&void 0!==f[4]?f[4]:Number.NEGATIVE_INFINITY,o=Iv(t,"boxes","nonMaxSuppressionAsync"),s=Iv(n,"scores","nonMaxSuppressionAsync"),u=lS(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return l=e.sent,c=l[0],d=l[1],h=pS(c,d,r,a,i),p=h.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",mk(p,"int32"));case 17:case"end":return e.stop()}}),e)}))),xS.apply(this,arguments)}var wS=function(e,t,n){return xS.apply(this,arguments)};var kS=Rv({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Iv(e,"boxes","nonMaxSuppression"),s=Iv(t,"scores","nonMaxSuppression"),u=lS(o,s,n,r,a,i),l={boxes:o,scores:s},c={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},d=wv.runKernel(af,l,c);return{selectedIndices:d[0],selectedScores:d[1]}}});function SS(){return SS=Jn(Kn().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,v=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:.5,i=v.length>4&&void 0!==v[4]?v[4]:Number.NEGATIVE_INFINITY,o=v.length>5&&void 0!==v[5]?v[5]:0,s=Iv(t,"boxes","nonMaxSuppressionAsync"),u=Iv(n,"scores","nonMaxSuppressionAsync"),l=lS(s,u,r,a,i,o),r=l.maxOutputSize,a=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return c=e.sent,d=c[0],h=c[1],p=mS(d,h,r,a,i,o),f=p.selectedIndices,m=p.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:mk(f,"int32"),selectedScores:mk(m)});case 19:case"end":return e.stop()}}),e)}))),SS.apply(this,arguments)}var ES=function(e,t,n){return SS.apply(this,arguments)};var TS=Rv({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Iv(e,"boxes","nonMaxSuppression"),s=Iv(t,"scores","nonMaxSuppression"),u=lS(o,s,n,r,a,null),l={boxes:o,scores:s},c={maxOutputSize:u.maxOutputSize,iouThreshold:u.iouThreshold,scoreThreshold:u.scoreThreshold,padToMaxOutputSize:i},d=wv.runKernel(rf,l,c);return{selectedIndices:d[0],validOutputs:d[1]}}});function CS(){return CS=Jn(Kn().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,v,g,y,b,x=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>3&&void 0!==x[3]?x[3]:.5,i=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,o=x.length>5&&void 0!==x[5]&&x[5],s=Iv(t,"boxes","nonMaxSuppressionAsync"),u=Iv(n,"scores","nonMaxSuppressionAsync"),l=lS(s,u,r,a,i,null),c=l.maxOutputSize,d=l.iouThreshold,h=l.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return p=e.sent,f=(0,U.Z)(p,2),m=f[0],v=f[1],g=fS(m,v,c,d,h,o),y=g.selectedIndices,b=g.validOutputs,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:mk(y,"int32"),validOutputs:jy(b,"int32")});case 19:case"end":return e.stop()}}),e)}))),CS.apply(this,arguments)}var _S=function(e,t,n){return CS.apply(this,arguments)};var MS=Rv({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Iv(e,"images","resizeBilinear");Ed(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Ed(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),Ed(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=fb(a,[1,a.shape[0],a.shape[1],a.shape[2]])),(0,U.Z)(t,0);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=wv.runKernel(xf,s,u);return o?fb(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var IS=Rv({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Iv(e,"images","resizeNearestNeighbor");Ed(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Ed(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),Ed("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),Ed(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=fb(a,[1,a.shape[0],a.shape[1],a.shape[2]])),(0,U.Z)(t,0);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=wv.runKernel(yf,s,u);return o?fb(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var NS=Rv({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=Iv(e,"image","threshold"),l=u.shape[0]*u.shape[1],c=bb(mk([s]),255);if(Ed(3===u.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(u.rank,".")})),Ed(3===u.shape[2]||1===u.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(u.shape[2],".")})),Ed("int32"===u.dtype||"float32"===u.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(u.dtype,".")})),Ed("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===u.shape[2]){var d=ok(u,[1,1,1],-1),h=(0,U.Z)(d,3);t=h[0],n=h[1],r=h[2];var p=bb(t,.2989),f=bb(n,.587),m=bb(r,.114);a=Vy(Vy(p,f),m)}else a=e;"otsu"===i&&(c=function(e,t){for(var n,r,a,i,o,s,u=mk([-1]),l=mk([0]),c=mk([0]),d=0;d<e.size-1;d++){n=wb(e,0,d+1),r=wb(e,d+1),o=ex(Lx(n),t),s=ex(Lx(r),t);var h=Lx(bb(n,Ow(0,n.size)));a=ex(h,Lx(n));var p=fx(r.shape,n.size),f=Vy(Ow(0,r.size),p),m=bb(r,f);i=ex(Lx(m),Lx(r));var v=Dx(a,i),g=Dx(a,i),y=bb(o,s);c=bb(bb(y,v),g);var b=gx(c,l);l=nx(b,c,l),u=nx(b,mk([d]),u)}return u}(Ib(Vg(Vw(a),"int32"),Lv([]),256),l));var v=o?Tx(a,c):gx(a,c);return Vg(bb(v,255),"int32")}});var AS=Rv({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=Iv(e,"image","transform","float32"),s=Iv(t,"transforms","transform","float32");Ed(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),Ed(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),Ed(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var u={image:o,transforms:s},l={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return wv.runKernel(nm,u,l)}});var RS=Rv({bandPart_:function(e,t,n){Ed(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),Ed(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=Iv(e,"a","bandPart");Ed(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=r.shape.slice(-2),o=(0,U.Z)(i,2),s=o[0],u=o[1];if(!(t<=s))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(s,")."));if(!(n<=u))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(u,")."));t<0&&(t=s),n<0&&(n=u);var l=fb(Ow(0,s,1,"int32"),[-1,1]),c=Ow(0,u,1,"int32"),d=Dx(l,c),h=Hx(Tx(d,jy(+t,"int32")),yx(d,jy(-n,"int32"))),p=ew([s,u],r.dtype);return fb(dk(Ek(fb(r,[-1,s,u])).map((function(e){return nx(h,e,p)}))),a)}});var OS=Rv({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,Ed(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Ed(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}else t=!0,e=ok(e,e.shape[0],0).map((function(e){return ck(e,[0])}));Ed(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var i=[],o=e,s=function(e){i.push(wv.tidy((function(){var t=o[e];if(e>0)for(var n=0;n<e;++n){var r=bb(Lx(bb(i[n],t)),i[n]);t=Dx(t,r)}return ex(t,Ok(t,"euclidean"))})))},u=0;u<e.length;++u)s(u);return t?dk(i,0):i}});function DS(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return wv.tidy((function(){Ed(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=px(n),i=Zg(e),o=vk([[1]],[1,1]),s=Zg(o),u=n>=r?r:n,l=function(e){var t=i,u=s,l=a,c=wv.tidy((function(){var t=wb(i,[e,e],[n-e,1]),u=Ok(t),l=wb(i,[e,e],[1,1]),c=nx(gx(l,0),vk([[-1]]),vk([[1]])),d=Dx(l,bb(c,u)),h=ex(t,d);s=1===h.shape[0]?Zg(o):gb([o,wb(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);var p=Nx(ex(yb(c,d),u)),f=wb(i,[e,0],[n-e,r]),m=bb(p,s),v=Ak(s);if(0===e)i=Dx(f,yb(m,yb(v,f)));else{var g=Dx(f,yb(m,yb(v,f)));i=gb([wb(i,[0,0],[e,r]),g],0)}var y=Ak(m),b=wb(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=Dx(b,yb(yb(b,s),y));else{var x=Dx(b,yb(yb(b,s),y));a=gb([wb(a,[0,0],[n,e]),x],1)}return[s,i,a]})),d=(0,U.Z)(c,3);s=d[0],i=d[1],a=d[2],Dy([t,u,l])},c=0;c<u;++c)l(c);return!t&&n>r&&(a=wb(a,[0,0],[n,r]),i=wb(i,[0,0],[r,r])),[a,i]}))}var LS,PS=Rv({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Ed(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return DS(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Ek(fb(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach((function(e){var n=DS(e,t),r=(0,U.Z)(n,2),o=r[0],s=r[1];a.push(o),i.push(s)})),[fb(dk(a,0),e.shape),fb(dk(i,0),e.shape)]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(LS||(LS={}));var FS=Rv({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:LS.SUM_BY_NONZERO_WEIGHTS,r=Iv(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Iv(t,"weights","computeWeightedLoss"));var i=null==a?r:bb(r,a);if(n===LS.NONE)return i;if(n===LS.SUM)return Lx(i);if(n===LS.MEAN){if(null==a)return $x(i);var o=r.size/a.size,s=ex(Lx(i),Lx(a));return o>1?ex(s,jy(o)):s}if(n===LS.SUM_BY_NONZERO_WEIGHTS){if(null==a)return ex(Lx(i),jy(r.size));var u=bb(a,tw(r.shape)),l=Vg(Lx(dw(u,jy(0))),"float32");return ex(Lx(i),l)}throw Error("Unknown reduction: ".concat(n))}});var jS=Rv({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:LS.SUM_BY_NONZERO_WEIGHTS,a=Iv(e,"labels","absoluteDifference"),i=Iv(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=Iv(n,"weights","absoluteDifference")),Td(a.shape,i.shape,"Error in absoluteDifference: ");var s=By(Dx(a,i));return FS(s,o,r)}});var zS=Rv({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LS.SUM_BY_NONZERO_WEIGHTS,i=Iv(e,"labels","cosineDistance"),o=Iv(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Iv(r,"weights","cosineDistance")),Td(i.shape,o.shape,"Error in cosineDistance: ");var u=jy(1),l=Dx(u,Lx(bb(i,o),n,!0));return FS(l,s,a)}});var BS=Rv({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:LS.SUM_BY_NONZERO_WEIGHTS,a=Iv(e,"labels","hingeLoss"),i=Iv(t,"predictions","hingeLoss"),o=null;null!=n&&(o=Iv(n,"weights","hingeLoss")),Td(a.shape,i.shape,"Error in hingeLoss: ");var s=jy(1);a=Dx(bb(jy(2),a),s);var u=Pw(Dx(s,bb(a,i)));return FS(u,o,r)}});var US=Rv({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LS.SUM_BY_NONZERO_WEIGHTS,i=Iv(e,"labels","huberLoss"),o=Iv(t,"predictions","huberLoss"),s=null;null!=n&&(s=Iv(n,"weights","huberLoss")),Td(i.shape,o.shape,"Error in huberLoss: ");var u=jy(r),l=By(Dx(o,i)),c=aw(l,u),d=Dx(l,c),h=Vy(bb(jy(.5),sw(c)),bb(u,d));return FS(h,s,a)}});var WS=Rv({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LS.SUM_BY_NONZERO_WEIGHTS,i=Iv(e,"labels","logLoss"),o=Iv(t,"predictions","logLoss"),s=null;null!=n&&(s=Iv(n,"weights","logLoss")),Td(i.shape,o.shape,"Error in logLoss: ");var u=jy(1),l=jy(r),c=Nx(bb(i,Mx(Vy(o,l)))),d=bb(Dx(u,i),Mx(Vy(Dx(u,o),l))),h=Dx(c,d);return FS(h,s,a)}});var VS=Rv({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:LS.SUM_BY_NONZERO_WEIGHTS,a=Iv(e,"labels","meanSquaredError"),i=Iv(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=Iv(n,"weights","meanSquaredError")),Td(a.shape,i.shape,"Error in meanSquaredError: ");var s=lk(a,i);return FS(s,o,r)}});var ZS=Rv({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LS.SUM_BY_NONZERO_WEIGHTS,i=Iv(e,"multiClassLabels","sigmoidCrossEntropy"),o=Iv(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Iv(n,"weights","sigmoidCrossEntropy")),Td(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=jy(r),l=jy(1),c=jy(.5);i=Vy(bb(i,Dx(l,u)),bb(c,u))}var d=function(e,t){var n=Iv(e,"labels","sigmoidCrossEntropyWithLogits"),r=Iv(t,"logits","sigmoidCrossEntropyWithLogits");Td(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=Pw(r),i=bb(r,n),o=Ix(lx(Nx(By(r))));return Vy(Dx(a,i),o)}(i,o);return FS(d,s,a)}});var HS=Rv({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LS.SUM_BY_NONZERO_WEIGHTS,i=Iv(e,"onehotLabels","softmaxCrossEntropy"),o=Iv(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Iv(n,"weights","softmaxCrossEntropy")),Td(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=jy(r),l=jy(1),c=jy(i.shape[1]);i=Vy(bb(i,Dx(l,u)),ex(u,c))}var d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=Fy((function(e,t,r){var a=Zx(t,[n],!0),i=Dx(Vg(t,"float32"),a);r([e,i]);var o=Nx(bb(i,e));return{value:Lx(o,[n]),gradFunc:function(e,t){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=zx(e.shape,[n]);return[bb(fb(e,o),Dx(Vg(a,"float32"),lx(i))),bb(fb(e,o),Dx(lx(i),Vg(a,"float32")))]}}}));return r(e,t)}(i,o);return FS(d,s,a)}});var GS=Rv({sparseFillEmptyRows_:function(e,t,n,r){var a=Iv(e,"indices","sparseFillEmptyRows","int32"),i=Iv(t,"values","sparseFillEmptyRows"),o=Iv(n,"denseShape","sparseFillEmptyRows","int32"),s=Iv(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},l=wv.runKernel(Bf,u);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}});var qS=Rv({sparseReshape_:function(e,t,n){var r=Iv(e,"inputIndices","sparseReshape","int32"),a=Iv(t,"inputShape","sparseReshape","int32"),i=Iv(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=wv.runKernel(Uf,o);return{outputIndices:s[0],outputShape:s[1]}}});var XS=Rv({sparseSegmentMean_:function(e,t,n){var r=Iv(e,"data","sparseSegmentMean"),a=Iv(t,"indices","sparseSegmentMean","int32"),i=Iv(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return wv.runKernel(Wf,o)}});var YS=Rv({sparseSegmentSum_:function(e,t,n){var r=Iv(e,"data","sparseSegmentSum"),a=Iv(t,"indices","sparseSegmentSum","int32"),i=Iv(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return wv.runKernel(Vf,o)}});var KS=Rv({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=Iv(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var l=Iv(t,"dataSplits","stringNGrams");if("int32"!==l.dtype)throw new Error("Data splits must be of datatype int32");var c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:u,dataSplits:l},h=wv.runKernel(Xf,d,c);return{nGrams:h[0],nGramsSplits:h[1]}}});var QS=Rv({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Iv(e,"input","stringSplit","string"),a=Iv(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=wv.runKernel(Yf,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});var JS=Rv({stringToHashBucketFast_:function(e,t){var n=Iv(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return wv.runKernel(Kf,a,r)}}),$S={fft:rk,ifft:ak,rfft:sk,irfft:ik},eE={hammingWindow:tS,hannWindow:nS,frame:rS,stft:aS},tE={flipLeftRight:oS,grayscaleToRGB:sS,resizeNearestNeighbor:IS,resizeBilinear:MS,rotateWithOffset:uS,cropAndResize:iS,nonMaxSuppression:cS,nonMaxSuppressionAsync:wS,nonMaxSuppressionWithScore:kS,nonMaxSuppressionWithScoreAsync:ES,nonMaxSuppressionPadded:TS,nonMaxSuppressionPaddedAsync:_S,threshold:NS,transform:AS},nE={bandPart:RS,gramSchmidt:OS,qr:PS},rE={absoluteDifference:jS,computeWeightedLoss:FS,cosineDistance:zS,hingeLoss:BS,huberLoss:US,logLoss:WS,meanSquaredError:VS,sigmoidCrossEntropy:ZS,softmaxCrossEntropy:HS},aE={sparseFillEmptyRows:GS,sparseReshape:qS,sparseSegmentMean:XS,sparseSegmentSum:YS},iE={stringNGrams:KS,stringSplit:QS,stringToHashBucketFast:JS},oE=function(e){A(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return M(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=wv.backend.epsilon()),a}return(0,I.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=wv.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:Oy((function(){return rx(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:Oy((function(){return rx(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;Oy((function(){var e=Vy(bb(o,t.rho),bb(sw(i),1-t.rho)),n=bb(ex(uk(Vy(s,t.epsilon)),uk(Vy(o,t.epsilon))),i),r=Vy(bb(s,t.rho),bb(sw(n),1-t.rho));o.assign(e),s.assign(r);var u=Vy(bb(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(Dy(this.accumulatedGrads.map((function(e){return e.variable}))),Dy(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,_.Z)(this.accumulatedGrads),(0,_.Z)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Jn(Kn().mark((function e(t){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(zy);oE.className="Adadelta",Ny(oE);var sE=function(e){A(n,e);var t=F(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return M(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return(0,I.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=wv.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:Oy((function(){return fx(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;Oy((function(){var e=Vy(o,sw(i));o.assign(e);var n=Vy(bb(ex(i,uk(Vy(e,wv.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&Dy(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(zy);sE.className="Adagrad",Ny(sE);var uE=function(e){A(n,e);var t=F(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return M(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],Oy((function(){i.accBeta1=jy(r).variable(),i.accBeta2=jy(a).variable()})),null==o&&(i.epsilon=wv.backend.epsilon()),i}return(0,I.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Oy((function(){var r=Dx(1,t.accBeta1),a=Dx(1,t.accBeta2);n.forEach((function(n,i){var o=wv.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Oy((function(){return rx(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:Oy((function(){return rx(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,l=t.accumulatedSecondMoment[i].variable,c=Vy(bb(u,t.beta1),bb(s,1-t.beta1)),d=Vy(bb(l,t.beta2),bb(sw(s),1-t.beta2)),h=ex(c,r),p=ex(d,a);u.assign(c),l.assign(d);var f=Vy(bb(ex(h,Vy(uk(p),t.epsilon)),-t.learningRate),o);o.assign(f)}})),t.accBeta1.assign(bb(t.accBeta1,t.beta1)),t.accBeta2.assign(bb(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Dy(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&Dy(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,_.Z)(this.accumulatedFirstMoment),(0,_.Z)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Jn(Kn().mark((function e(t){var n,r=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,Oy((function(){r.accBeta1.assign(kw(r.beta1,r.iterations_+1)),r.accBeta2.assign(kw(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(zy);uE.className="Adam",Ny(uE);var lE=function(e){A(n,e);var t=F(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return M(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],Oy((function(){i.iteration=jy(0).variable(),i.accBeta1=jy(r).variable()})),null==o&&(i.epsilon=wv.backend.epsilon()),i}return(0,I.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Oy((function(){var r=Dx(1,t.accBeta1),a=ex(-t.learningRate,Vy(bb(t.iteration,t.decay),1));n.forEach((function(n,i){var o=wv.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:rx(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:rx(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,l=t.accumulatedWeightedInfNorm[i].variable,c=Vy(bb(u,t.beta1),bb(s,1-t.beta1)),d=bb(l,t.beta2),h=By(s),p=Jx(d,h);u.assign(c),l.assign(p);var f=Vy(bb(ex(a,r),ex(c,Vy(p,t.epsilon))),o);o.assign(f)}})),t.iteration.assign(Vy(t.iteration,1)),t.accBeta1.assign(bb(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Dy(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&Dy(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(zy);lE.className="Adamax",Ny(lE);var cE=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return(0,I.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);n.forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=wv.registeredVariables[n];Oy((function(){var e=Vy(bb(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Ly(jy(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(zy);cE.className="SGD",Ny(cE);var dE=function(e){A(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return M(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=jy(a.momentum),a}return(0,I.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=wv.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:Oy((function(){return rx(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&Oy((function(){var e,n=Vy(bb(t.m,i),o);e=t.useNesterov?Vy(bb(t.c,Vy(o,bb(n,t.m))),a):Vy(bb(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&Dy(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(cE);dE.className="Momentum",Ny(dE);var hE=function(e){A(n,e);var t=F(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(M(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==o&&(r.epsilon=wv.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return(0,I.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=wv.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:Oy((function(){return rx(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:Oy((function(){return rx(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:Oy((function(){return rx(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;Oy((function(){var e=Vy(bb(s,t.decay),bb(sw(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=Vy(bb(n,t.decay),bb(o,1-t.decay)),l=ex(bb(o,t.learningRate),uk(Dx(e,Vy(sw(i),t.epsilon)))),c=Vy(bb(u,t.momentum),l);s.assign(e),n.assign(i),u.assign(c);var d=Dx(a,c);a.assign(d)}else{var h=Vy(bb(s,t.decay),bb(sw(o),1-t.decay)),p=Vy(bb(u,t.momentum),ex(bb(o,t.learningRate),uk(Vy(h,t.epsilon))));s.assign(h),u.assign(p);var f=Dx(a,p);a.assign(f)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&Dy(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&Dy(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&Dy(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,_.Z)(this.accumulatedMeanSquares),(0,_.Z)(this.accumulatedMoments)),this.centered&&t.push.apply(t,(0,_.Z)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Jn(Kn().mark((function e(t){var n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(zy);hE.className="RMSProp",Ny(hE);var pE=function(){function e(){M(this,e)}return(0,I.Z)(e,null,[{key:"sgd",value:function(e){return new cE(e)}},{key:"momentum",value:function(e,t){return new dE(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}},{key:"rmsprop",value:function(e){return new hE(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}},{key:"adam",value:function(){return new uE(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}},{key:"adadelta",value:function(){return new oE(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"adamax",value:function(){return new lE(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}},{key:"adagrad",value:function(e){return new sE(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}}]),e}(),fE={sgd:pE.sgd,momentum:pE.momentum,adadelta:pE.adadelta,adagrad:pE.adagrad,rmsprop:pE.rmsprop,adamax:pE.adamax,adam:pE.adam},mE="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function vE(){return new Promise((function(e){return mE((function(){return e()}))}))}function gE(e,t){var n=e[0].length;e.forEach((function(e,t){Ed(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),Ed(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)Ed(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function yE(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var bE=30;function xE(e){return e<=bE?e:Gd(e,Math.floor(Math.sqrt(e)))}function wE(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function kE(e,t,n){var r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])(r=r.concat(t.slice(0))).push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);for(var a=t.length,i=0;i<a;++i)r=r.concat([e[i+1]/t[i],t[i]]);r=r.concat(e.slice(a+1))}return r}function SE(e,t){var n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(var r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{for(var a=[],i=[],o=1;o<e;++o)o>=2*t+1||o%2===1?i.push(o):a.push(o);n.push.apply(n,a),n.push(0),n.push.apply(n,i)}return n}function EE(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function TE(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function CE(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function _E(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===Md(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,l=a.slice();l.pop();for(var c=1,d=i;d<n;++d)c*=u[d],l.push(u[d]);var h=[].concat((0,_.Z)(qd(e.shape).map((function(e){return e/c}))),[1]).slice(0,i);return[l,o,c,h]}var ME=1.7580993408473768,IE=1.0507009873554805,NE=.3275911,AE=.254829592,RE=-.284496736,OE=1.421413741,DE=-1.453152027,LE=1.061405429;function PE(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function FE(e,t){return{real:e[2*t],imag:e[2*t+1]}}function jE(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function zE(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var BE="->",UE=/->/g,WE=",",VE="...";function ZE(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(UE,"").length)/BE.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(BE,'").'));var r=e.split(BE),a=(0,U.Z)(r,2),i=a[0],o=a[1];Ed(-1===i.indexOf(VE),(function(){return'The ellipsis notation ("'.concat(VE,'") is not supported yet.')}));var s=i.split(WE),u=s.length;if(t!==u)throw new Error("Expected ".concat(u," input tensors, received ").concat(t));if(u>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var l=[],c=function(){var e=o[d];if(!s.some((function(t){return-1!==t.indexOf(e)})))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===l.indexOf(e)&&l.push(e)},d=0;d<o.length;++d)c();for(var h=0;h<i.length;++h){var p=i[h];-1===l.indexOf(p)&&p!==WE&&l.push(p)}for(var f=new Array(s.length),m=0;m<u;++m){if(new Set(s[m].split("")).size!==s[m].length)throw new Error("Found duplicate axes in input component ".concat(s[m],". ")+"Support for duplicate axes in input is not implemented yet.");f[m]=[];for(var v=0;v<s[m].length;++v)f[m].push(l.indexOf(s[m][v]))}for(var g=l.length,y=[],b=o.length;b<g;++b)y.push(b);return{allDims:l,summedDims:y,idDims:f}}function HE(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return n=n.filter((function(e){return-1!==e})),{permutationIndices:n,expandDims:a}}function GE(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:Ed(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function qE(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,l=G(YE(t,r[s]));try{for(l.s();!(u=l.n()).done;){var c=u.value;-1===o.indexOf(c)&&(a[s].push(c),o.push(c))}}catch(sde){l.e(sde)}finally{l.f()}}return{path:r,steps:a}}function XE(e){return e.every((function(e,t){return e===t}))}function YE(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function KE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)Ed(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);Ed(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}Ed(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function QE(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function JE(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function $E(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function eT(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function tT(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function nT(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],l=1,c=1,d=1,h=0;h<r;++h)u.push(e.shape[h]),l*=e.shape[h];for(var p=r;p<n;p++)u.push(e.shape[p]),c*=e.shape[p];for(var f=r;f<a;f++)u.push(t.shape[f]);for(var m=n+1;m<i;m++)u.push(e.shape[m]),d*=e.shape[m];return{batchSize:l,sliceSize:d,outerSize:c,dimSize:s,outputShape:u}}function rT(e){try{return e.map((function(e){return Um(e)}))}catch(sde){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(sde))}}var aT={kernelName:dh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return bb(e,hk(Vg(n,"float32"),-1))}}}},iT={kernelName:hh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){var t=sw(Vg(n,"float32")),r=uk(Dx(jy(1),t));return Nx(ex(e,r))}}}},oT={kernelName:ph,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){var t=uk(Dx(sw(Vg(n,"float32")),1));return ex(e,t)}}}},sT={kernelName:fh,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=my(r.shape,a.shape);return{a:function(){var t=e,n=fy(r.shape,i);return n.length>0&&(t=Lx(t,n)),fb(t,r.shape)},b:function(){var t=e,n=fy(a.shape,i);return n.length>0&&(t=Lx(t,n)),fb(t,a.shape)}}}},uT={kernelName:mh,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},lT={kernelName:yh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return rx(n)}}}},cT={kernelName:bh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return rx(n)}}}},dT={kernelName:xh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return ex(e,uk(Dx(jy(1),sw(Vg(n,"float32")))))}}}},hT={kernelName:wh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){var t=uk(Vy(jy(1),sw(Vg(n,"float32"))));return ex(e,t)}}}},pT={kernelName:Eh,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=my(r.shape,a.shape);return{a:function(){var t=Vy(sw(r),sw(a)),n=bb(e,ex(a,t)),o=fy(r.shape,i);return o.length>0&&(n=Lx(n,o)),fb(n,r.shape)},b:function(){var t=Vy(sw(r),sw(a)),n=Nx(bb(e,ex(r,t))),o=fy(a.shape,i);return o.length>0&&(n=Lx(n,o)),fb(n,a.shape)}}}},fT={kernelName:kh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return ex(e,Vy(sw(Vg(n,"float32")),1))}}}},mT={kernelName:Sh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return ex(e,Dx(jy(1),sw(Vg(n,"float32"))))}}}};var vT=Rv({avgPool3dGrad_:function(e,t,n,r,a,i){var o=Iv(e,"dy","avgPool3dGrad"),s=Iv(t,"input","avgPool3dGrad"),u=o,l=s,c=!1;4===s.rank&&(c=!0,u=fb(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),l=fb(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Ed(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),Ed(5===l.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(l.rank,".")})),pb("avgPool3dGrad",a,i);var d={dy:u,input:l},h={filterSize:n,strides:r,pad:a,dimRoundingMode:i},p=wv.runKernel(Mh,d,h);return c?fb(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),gT={kernelName:_h,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad,s=n.dimRoundingMode;return{x:function(){return vT(e,r,a,i,o,s)}}}};var yT=Rv({avgPoolGrad_:function(e,t,n,r,a){var i=Iv(e,"dy","avgPoolGrad"),o=Iv(t,"input","avgPoolGrad");Ed(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,u=i,l=!1;3===o.rank&&(l=!0,s=fb(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=fb(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Ed(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),Ed(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var c={dy:u,input:s},d={filterSize:n,strides:r,pad:a},h=wv.runKernel(Ch,c,d);return l?fb(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),bT={kernelName:Th,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return yT(e,r,a,i,o)}}}},xT={kernelName:Ih,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return yb(e,i,!1,!1)},b:function(){return yb(e,a,!0,!1)}}:o&&!s?{a:function(){return yb(i,e,!1,!0)},b:function(){return yb(a,e,!1,!1)}}:{a:function(){return yb(i,e,!0,!0)},b:function(){return yb(e,a,!0,!0)}}:{a:function(){return yb(e,i,!1,!0)},b:function(){return yb(a,e,!0,!1)}}}},wT={kernelName:Nh,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return xw(e,r,a)}}}},kT={kernelName:"BroadcastTo",gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var u=[],l=0;l<o.length;l++)o[l]>1&&u.push(l);return{x:function(){return Lx(e,u,!0)}}}},ST={kernelName:Oh,gradFunc:function(e){return{x:function(){return e.clone()}}}},ET={kernelName:Dh,gradFunc:function(e){return{x:function(){return rx(e)}}}},TT={kernelName:Lh,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return nx(Hx(yx(r,a),Tx(r,i)),e,rx(e))}}}},CT={kernelName:Fh,inputsToSave:["x"],gradFunc:aT.gradFunc},_T={kernelName:jh,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=Ld(n.axis,t[0].shape)[0],i=r.map((function(e){return e[a]}));return ok(e,i,a).map((function(e){return function(){return e}}))}},MT={kernelName:zh,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,u=n.pad,l=n.dataFormat;return Ed(cb(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return Bb(a.shape,e,i,s,u,l)},filter:function(){return Hk(a,e,i.shape,s,u,l)}}}},IT={kernelName:Uh,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,u=n.dataFormat,l=n.dimRoundingMode;return{dy:function(){return jb(e,i,o,s,u,1,l)},filter:function(){return Hk(e,a,i.shape,o,s,u,l)}}}};var NT=Rv({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=fb(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=fb(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Ed(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),Ed(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")})),Ed(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),Ed(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),Ed(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:i,dy:o},u={strides:r,pad:a,filterShape:n};return wv.runKernel(Vh,s,u)}}),AT={kernelName:Wh,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;Ed(cb(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=(0,U.Z)(t,2),s=o[0],u=o[1];return{x:function(){return Vb(s.shape,e,u,a,i)},filter:function(){return NT(s,e,u.shape,a,i)}}}},RT={kernelName:Hh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return bb(Nx(Kw(Vg(n,"float32"))),e)}}}},OT={kernelName:Gh,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return bb(Qw(Vg(n,"float32")),e)}}}},DT={kernelName:qh,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=Ux([a],r.rank),n=qb(e,a,i,!o);return null!=t&&(n=Ak(n,t)),n}}}},LT={kernelName:Qh,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==r?[1,1]:r;Ed(cb(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var u=(0,U.Z)(t,2),l=u[0],c=u[1];return Ed(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,".")})),Ed(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(c.rank,".")})),Ed(l.shape[3]===c.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(c.shape[2],".")})),Ed(db(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),pb("depthwiseConv2d",i,o),{x:function(){return Jk(l.shape,e,c,a,i,s,o)},filter:function(){return Qk(l,e,c.shape,a,i,s,o)}}}},PT={kernelName:tp,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},s={x:a,filter:i,dy:e};return{x:function(){return wv.runKernel(np,o,n)},filter:function(){return wv.runKernel(rp,s,n)}}}},FT={kernelName:op,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:(0,U.Z)(t,1)[0]};return{x:function(){return wv.runKernel(sp,n)}}}},jT={kernelName:up,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0],r=bb(lx(Nx(sw(n))),2/Math.sqrt(Math.PI));return{x:function(){return bb(e,r)}}}},zT={kernelName:cp,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return bb(e,n)}}}},BT={kernelName:dp,inputsToSave:["input"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{input:function(){return fb(e,n.shape)}}}},UT={kernelName:hp,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return bb(e,lx(n))}}}},WT={kernelName:vp,gradFunc:function(e){return{x:function(){return rx(e)}}}},VT={kernelName:gp,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=my(r.shape,a.shape);return{a:function(){var t=ex(e,Vg(a,"float32")),n=fy(r.shape,i);return n.length>0?fb(Lx(t,n),r.shape):t},b:function(){var t=bb(e,Vg(r,"float32")),n=fy(a.shape,i);n.length>0&&(t=fb(Lx(t,n),a.shape));var o=sw(a);return Nx(ex(t,Vg(o,"float32")))}}}},ZT={kernelName:yp,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=(0,U.Z)(t,4),i=a[0],o=a[1],s=a[2],u=a[3],l=null==u?jy(1):u,c=fy(o.shape,i.shape),d=[];if(1===o.rank){for(var h=0;h<i.shape.length-1;++h)d.push(i.shape[h]);d.push(1)}var p=Dx(i,o),f=bb(e,l),m=Zw(Vy(s,jy(r))),v=bb(bb(bb(m,m),m),jy(-.5));return{x:function(){return 1===o.rank?fb(bb(bb(e,hx(fb(m,[1,1,1,o.shape[0]]),d)),l),i.shape):fb(bb(bb(e,m),l),i.shape)},mean:function(){var e=bb(bb(m,jy(-1)),f);return 1===o.rank&&(e=Lx(e,c)),fb(e,o.shape)},variance:function(){var e=bb(bb(v,p),f);return 1===o.rank&&(e=Lx(e,c)),fb(e,o.shape)},scale:function(){var t=bb(p,m),n=bb(e,t);return 1===o.rank&&(n=Lx(n,c)),fb(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=Lx(t,c)),fb(t,o.shape)}}}},HT={kernelName:bp,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.axis,s=Ld(o,a.shape)[0];return{x:function(){var t=a.shape,n=i.size,r=t.slice(0,s),u=r.length,l=t.slice(o,t.length).slice(1),c=l.length,d=GT(0,u),h=GT(u+1,u+1+c),p=qT([r,[n],l]),f=fb(e,p),m=fb(i,[n]),v=qT([[u],d,h]),g=Ak(f,v),y=Sk(g,m,a.shape[s]),b=Wx(v);return y=Ak(y,b)},indices:function(){return i}}}};function GT(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function qT(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var XT={kernelName:kp,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1];return{a:function(){return rx(r)},b:function(){return rx(a)}}}},YT={kernelName:Sp,gradFunc:function(e){return{x:function(){return Vg(e,"float32")}}}},KT={kernelName:Cp,gradFunc:function(e){return{x:function(){return rx(e)}}}},QT={kernelName:_p,gradFunc:function(e){return{x:function(){return rx(e)}}}},JT={kernelName:Mp,gradFunc:function(e){return{x:function(){return rx(e)}}}},$T={kernelName:Ip,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.alpha,i=gx(r,0);return{x:function(){return nx(i,e,bb(e,a))}}}},eC={kernelName:Dp,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return ex(e,Vy(n,1))}}}},tC={kernelName:Op,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return ex(e,Vg(n,"float32"))}}}},nC={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.axis;return{logits:function(){var t=lx(r);return Dx(e,bb(Lx(e,a,!0),t))}}}};var rC=Rv({localResponseNormalizationBackprop_:function(e,t,n){var r={x:e,y:t,dy:n},a={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return wv.runKernel(zp,r,a)}}),aC={kernelName:jp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,u=n.alpha,l=n.beta;return{x:function(){return rC(a,i,e,o,s,u,l)}}}};function iC(e,t,n,r){return t.rank<n.rank&&(t=fb(t,zx(t.shape,r))),e.rank<n.rank&&(e=fb(e,zx(e.shape,r))),{x:function(){return bb(e,Vg(tx(n,t),e.dtype))}}}var oC={kernelName:Bp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=iC(e,t[1],a,Ld(r,a.shape));return{x:function(){return i.x()}}}},sC={kernelName:Up,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1];return{a:function(){return bb(e,Vg(yx(r,a),"float32"))},b:function(){return bb(e,Vg(Ex(r,a),"float32"))}}}};var uC=Rv({maxPool3dGrad_:function(e,t,n,r,a,i,o){var s=Iv(e,"dy","maxPool3dGrad"),u=Iv(t,"input","maxPool3dGrad"),l=Iv(n,"output","maxPool3dGrad"),c=s,d=u,h=l,p=!1;4===u.rank&&(p=!0,c=fb(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=fb(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),h=fb(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),Ed(5===c.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(c.rank,".")})),Ed(5===d.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(d.rank,".")})),Ed(5===h.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(h.rank,".")})),pb("maxPool3dGrad",i,o);var f={dy:c,input:d,output:h},m={filterSize:r,strides:a,pad:i,dimRoundingMode:o},v=wv.runKernel(Hp,f,m);return p?fb(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}}),lC={kernelName:Zp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad,l=n.dimRoundingMode;return{x:function(){return uC(e,a,i,o,s,u,l)}}}};var cC=Rv({maxPoolGrad_:function(e,t,n,r,a,i,o){var s=Iv(e,"dy","maxPoolGrad"),u=Iv(t,"input","maxPoolGrad"),l=Iv(n,"output","maxPoolGrad");Ed(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),Ed(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),Ed(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")})),pb("maxPoolGrad",i,o);var c={dy:s,input:u,output:l},d={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return wv.runKernel(Vp,c,d)}}),dC={kernelName:Wp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad;return{x:function(){return cC(e,a,i,o,s,u)}}}},hC={kernelName:qp,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=Ld(n.axis,r.shape),i=Md(jx(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=fb(e,t);return ex(bb(n,tw(r.shape,"float32")),i)}}}},pC={kernelName:Xp,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=(0,U.Z)(t,2),i=a[0],o=iC(e,a[1],i,Ld(r,i.shape));return{x:function(){return o.x()}}}},fC={kernelName:Yp,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1];return{a:function(){return bb(e,Vg(Tx(r,a),"float32"))},b:function(){return bb(e,Vg(gx(r,a),"float32"))}}}},mC={kernelName:Kp,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return wb(e,a,r.shape)}}}},vC={kernelName:Qp,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=my(r.shape,a.shape);return{a:function(){var t=fy(r.shape,i);return t.length>0?fb(Lx(e,t),r.shape):e},b:function(){var t=bb(e,Nx(mx(ex(r,a)))),n=fy(a.shape,i);return n.length>0?fb(Lx(t,n),a.shape):t}}}},gC={kernelName:$p,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=my(r.shape,a.shape);return{a:function(){var t=bb(e,Vg(a,"float32")),n=fy(r.shape,i);return n.length>0?fb(Lx(t,n),r.shape):t},b:function(){var t=bb(e,Vg(r,"float32")),n=fy(a.shape,i);return n.length>0?fb(Lx(t,n),a.shape):t}}}},yC={kernelName:ef,gradFunc:function(e){return{x:function(){return Nx(e)}}}},bC={kernelName:of,gradFunc:function(e){return{x:function(){return rx(e)}}}},xC={kernelName:uf,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return Ek(e,r).map((function(e){return function(){return e}}))}},wC={kernelName:lf,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return wb(e,a,r.shape)}}}},kC={kernelName:cf,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=(0,U.Z)(t,3),r=n[0],a=n[1],i=n[2],o=r,s=a,u=my(o.shape,s.shape);return{a:function(){var t=Vg(s,"float32"),n=bb(e,bb(t,kw(o,Dx(t,jy(1))))),r=fy(o.shape,u);return r.length>0&&(n=Lx(n,r)),fb(n,o.shape)},b:function(){var t=gx(o,0),n=nx(t,Mx(o),rx(o)),r=bb(e,bb(i,n)),a=fy(s.shape,u);return a.length>0&&(r=Lx(r,a)),fb(r,s.shape)}}}},SC={kernelName:df,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=gx(r,0);return{x:function(){return nx(i,e,bb(e,a))},alpha:function(){var t=nx(i,rx(e),bb(e,r)),n=fy(a.shape,e.shape);return n.length>0&&(t=Lx(t,n)),fb(t,a.shape)}}}},EC={kernelName:ap,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=my(r.shape,a.shape);return{a:function(){var t=ex(e,Vg(a,"float32")),n=fy(r.shape,i);return n.length>0?fb(Lx(t,n),r.shape):t},b:function(){var t=bb(e,Vg(r,"float32")),n=fy(a.shape,i);n.length>0&&(t=fb(Lx(t,n),a.shape));var o=sw(a);return Nx(ex(t,Vg(o,"float32")))}}}},TC={kernelName:mf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return ex(e,Nx(sw(n)))}}}},CC={kernelName:kf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0],r=bb(Tx(n,6),hk(n));return{x:function(){return bb(e,Vg(r,"float32"))}}}},_C={kernelName:vf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return bb(e,Vg(hk(n),"float32"))}}}},MC={kernelName:gf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return fb(e,n.shape)}}}},IC={kernelName:xf,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,U.Z)(t,1)[0]};return{images:function(){return wv.runKernel(wf,r,n)}}}},NC={kernelName:yf,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,U.Z)(t,1)[0]};return{images:function(){return wv.runKernel(bf,r,n)}}}},AC={kernelName:Sf,gradFunc:function(e,t,n){var r=Ld(n.dims,e.shape);return{x:function(){return jw(e,r)}}}},RC={kernelName:Ef,gradFunc:function(e){return{x:function(){return rx(e)}}}},OC={kernelName:Tf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return Nx(ex(e,bb(kw(n,1.5),2)))}}}},DC={kernelName:_f,inputsToSave:["condition"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{condition:function(){return Vg(rx(n),"float32")},t:function(){return bb(e,Vg(n,e.dtype))},e:function(){return bb(e,Vg(Gx(n),e.dtype))}}}},LC={kernelName:Mf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){var t=gx(n,jy(0)),r=jy(ME),a=jy(IE),i=bb(e,a),o=bb(bb(e,r),lx(Vg(n,"float32")));return nx(t,i,o)}}}},PC={kernelName:Of,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return bb(e,bb(n,Dx(jy(1),n)))}}}},FC={kernelName:Rf,gradFunc:function(e){return{x:function(){return rx(e)}}}},jC={kernelName:Nf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return bb(Hb(Vg(n,"float32")),e)}}}},zC={kernelName:Af,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return bb(Gb(Vg(n,"float32")),e)}}}},BC={kernelName:If,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=(0,U.Z)(t,1)[0],a=n.begin,i=n.size,o=r.shape,s=Ty(r,a,i),u=(0,U.Z)(s,2),l=u[0],c=u[1],d=[],h=0;h<e.rank;h++)d.push([l[h],o[h]-l[h]-c[h]]);return{x:function(){return mw(e,d)}}}},UC={kernelName:zf,outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.dim,i=bb(e,r);return{logits:function(){return Dx(i,bb(Lx(i,[a],true),r))}}}},WC={kernelName:Df,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return bb(e,xb(n))}}}},VC={kernelName:Ff,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return Eb(e,r,a)}}}},ZC={kernelName:jf,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return gb(e,r)}}}},HC={kernelName:Lf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return ex(e,bb(uk(Vg(n,"float32")),2))}}}},GC={kernelName:Gf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return bb(e,bb(Vg(n,"float32"),2))}}}},qC={kernelName:Hf,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=jy(2);return{a:function(){return bb(e,bb(i,Dx(r,a)))},b:function(){return bb(e,bb(i,Dx(a,r)))}}}},XC={kernelName:um,gradFunc:function(e){return{x:function(){return rx(e)}}}},YC={kernelName:Qf,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,U.Z)(t,2),r=n[0],a=n[1],i=my(r.shape,a.shape);return{a:function(){var t=e,n=fy(r.shape,i);return n.length>0&&(t=Lx(t,n)),fb(t,r.shape)},b:function(){var t=e,n=fy(a.shape,i);return n.length>0&&(t=Lx(t,n)),fb(Nx(t),a.shape)}}}},KC={kernelName:Pf,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=r.shape.slice();Ld(n.axis,r.shape).forEach((function(e){a[e]=1}));var i=fb(e,a),o=bb(i,tw(r.shape,"float32"));return{x:function(){return o}}}},QC={kernelName:Jf,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return ex(e,sw(Hb(n)))}}}},JC={kernelName:$f,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return bb(Dx(jy(1),sw(n)),e)}}}},$C={kernelName:em,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,U.Z)(t,1)[0],a=n.reps;return{x:function(){var t=rx(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=Vy(t,wb(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=Vy(t,wb(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var l=0;l<a[2];++l)t=Vy(t,wb(e,[s*r.shape[0],u*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var c=0;c<a[0];++c)for(var d=0;d<a[1];++d)for(var h=0;h<a[2];++h)for(var p=0;p<a[3];++p)t=Vy(t,wb(e,[c*r.shape[0],d*r.shape[1],h*r.shape[2],p*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},e_={kernelName:rm,gradFunc:function(e,t,n){var r=Wx(n.perm);return{x:function(){return Ak(e,r)}}}},t_={kernelName:im,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return dk(e,r)}}}},n_={kernelName:om,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=(0,U.Z)(t,1)[0];return{x:function(){return function(e,t){for(var n=Jx(t,rx(t)),r=vx(e,n),a=yx(t,jy(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=cx(a,o+1);a=Hx(a,tw(r.shape,"bool"));var s=rx(r);return nx(a,r,s)}(e,n)}}}};for(var r_,a_={kernelName:sm,gradFunc:function(e){return{x:function(){return rx(e)}}}},i_=0,o_=[aT,iT,oT,sT,uT,lT,cT,dT,hT,pT,fT,mT,gT,bT,xT,wT,kT,ST,ET,TT,CT,_T,IT,MT,AT,RT,OT,DT,LT,PT,EC,FT,jT,zT,BT,UT,VT,WT,ZT,HT,XT,YT,KT,QT,JT,$T,eC,tC,nC,aC,oC,oC,sC,lC,dC,hC,pC,fC,mC,vC,gC,yC,{kernelName:sf,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return ew(n.shape,"float32")}}}},bC,xC,wC,wC,kC,SC,TC,CC,_C,MC,IC,NC,AC,RC,OC,DC,LC,PC,FC,jC,zC,BC,UC,WC,VC,VC,ZC,ZC,HC,qC,GC,XC,YC,KC,QC,JC,$C,e_,t_,n_,a_];i_<o_.length;i_++){wm(o_[i_])}function s_(){return null==r_&&(r_=wv.backend.epsilon()),r_}nv().prototype.abs=function(){return this.throwIfDisposed(),By(this)},nv().prototype.acos=function(){return this.throwIfDisposed(),Uy(this)},nv().prototype.acosh=function(){return this.throwIfDisposed(),Wy(this)},nv().prototype.add=function(e){return this.throwIfDisposed(),Vy(this,e)},nv().prototype.all=function(e,t){return this.throwIfDisposed(),Hy(this,e,t)},nv().prototype.any=function(e,t){return this.throwIfDisposed(),Gy(this,e,t)},nv().prototype.argMax=function(e){return this.throwIfDisposed(),qy(this,e)},nv().prototype.argMin=function(e){return this.throwIfDisposed(),Xy(this,e)},nv().prototype.asScalar=function(){return this.throwIfDisposed(),Ed(1===this.size,(function(){return"The array must have only 1 element."})),fb(this,[])},nv().prototype.asType=function(e){return this.throwIfDisposed(),Vg(this,e)},nv().prototype.as1D=function(){return this.throwIfDisposed(),fb(this,[this.size])},nv().prototype.as2D=function(e,t){return this.throwIfDisposed(),fb(this,[e,t])},nv().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),fb(this,[e,t,n])},nv().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),fb(this,[e,t,n,r])},nv().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),fb(this,[e,t,n,r,a])},nv().prototype.asin=function(){return this.throwIfDisposed(),Yy(this)},nv().prototype.asinh=function(){return this.throwIfDisposed(),Ky(this)},nv().prototype.atan=function(){return this.throwIfDisposed(),Qy(this)},nv().prototype.atan2=function(e){return this.throwIfDisposed(),Jy(this,e)},nv().prototype.atanh=function(){return this.throwIfDisposed(),$y(this)},nv().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),mb(this,e,t,n,r)},nv().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Eb(this,e,t)},nv().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Tb(this,e,t,n,r,a)},nv().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Ab(this,e)},nv().prototype.cast=function(e){return this.throwIfDisposed(),Vg(this,e)},nv().prototype.ceil=function(){return this.throwIfDisposed(),Rb(this)},nv().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Ob(this,e,t)},nv().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof tv&&(e=[e]),gb([this].concat((0,_.Z)(e)),t)},nv().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),zb(this,e,t,n,r,a,i)},nv().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Ub(this,e,t,n,r,a)},nv().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),jb(this,e,t,n,r,a,i)},nv().prototype.cos=function(){return this.throwIfDisposed(),Hb(this)},nv().prototype.cosh=function(){return this.throwIfDisposed(),Gb(this)},nv().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),qb(this,e,t,n)},nv().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Yb(this,e,t)},nv().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Kb(this,e,t,n,r,a,i)},nv().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),Jb(this,e,t,n,r,a)},nv().prototype.divNoNan=function(e){return this.throwIfDisposed(),ax(this,e)},nv().prototype.div=function(e){return this.throwIfDisposed(),ex(this,e)},nv().prototype.dot=function(e){return this.throwIfDisposed(),ix(this,e)},nv().prototype.elu=function(){return this.throwIfDisposed(),sx(this)},nv().prototype.equal=function(e){return this.throwIfDisposed(),tx(this,e)},nv().prototype.erf=function(){return this.throwIfDisposed(),ux(this)},nv().prototype.exp=function(){return this.throwIfDisposed(),lx(this)},nv().prototype.expandDims=function(e){return this.throwIfDisposed(),cx(this,e)},nv().prototype.expm1=function(){return this.throwIfDisposed(),dx(this)},nv().prototype.fft=function(){return this.throwIfDisposed(),rk(this)},nv().prototype.flatten=function(){return this.throwIfDisposed(),fb(this,[this.size])},nv().prototype.floor=function(){return this.throwIfDisposed(),mx(this)},nv().prototype.floorDiv=function(e){return this.throwIfDisposed(),$b(this,e)},nv().prototype.gather=function(e,t){return this.throwIfDisposed(),vx(this,e,t)},nv().prototype.greaterEqual=function(e){return this.throwIfDisposed(),yx(this,e)},nv().prototype.greater=function(e){return this.throwIfDisposed(),gx(this,e)},nv().prototype.ifft=function(){return this.throwIfDisposed(),ak(this)},nv().prototype.irfft=function(){return this.throwIfDisposed(),ik(this)},nv().prototype.isFinite=function(){return this.throwIfDisposed(),xx(this)},nv().prototype.isInf=function(){return this.throwIfDisposed(),wx(this)},nv().prototype.isNaN=function(){return this.throwIfDisposed(),kx(this)},nv().prototype.leakyRelu=function(e){return this.throwIfDisposed(),Sx(this,e)},nv().prototype.lessEqual=function(e){return this.throwIfDisposed(),Tx(this,e)},nv().prototype.less=function(e){return this.throwIfDisposed(),Ex(this,e)},nv().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),_x(this,e,t,n,r)},nv().prototype.logSigmoid=function(){return this.throwIfDisposed(),Rx(this)},nv().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Px(this,e)},nv().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Zx(this,e,t)},nv().prototype.log=function(){return this.throwIfDisposed(),Mx(this)},nv().prototype.log1p=function(){return this.throwIfDisposed(),Ix(this)},nv().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Hx(this,e)},nv().prototype.logicalNot=function(){return this.throwIfDisposed(),Gx(this)},nv().prototype.logicalOr=function(e){return this.throwIfDisposed(),qx(this,e)},nv().prototype.logicalXor=function(e){return this.throwIfDisposed(),Xx(this,e)},nv().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),yb(this,e,t,n)},nv().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Yx(this,e,t,n,r)},nv().prototype.max=function(e,t){return this.throwIfDisposed(),Ox(this,e,t)},nv().prototype.maximum=function(e){return this.throwIfDisposed(),Jx(this,e)},nv().prototype.mean=function(e,t){return this.throwIfDisposed(),$x(this,e,t)},nv().prototype.min=function(e,t){return this.throwIfDisposed(),rw(this,e,t)},nv().prototype.minimum=function(e){return this.throwIfDisposed(),aw(this,e)},nv().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),iw(this,e,t)},nv().prototype.mod=function(e){return this.throwIfDisposed(),ow(this,e)},nv().prototype.mul=function(e){return this.throwIfDisposed(),bb(this,e)},nv().prototype.neg=function(){return this.throwIfDisposed(),Nx(this)},nv().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Ok(this,e,t,n)},nv().prototype.notEqual=function(e){return this.throwIfDisposed(),dw(this,e)},nv().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),hw(this,e,t,n)},nv().prototype.onesLike=function(){return this.throwIfDisposed(),pw(this)},nv().prototype.pad=function(e,t){return this.throwIfDisposed(),mw(this,e,t)},nv().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),ww(this,e,t,n,r,a,i)},nv().prototype.pow=function(e){return this.throwIfDisposed(),kw(this,e)},nv().prototype.prelu=function(e){return this.throwIfDisposed(),Sw(this,e)},nv().prototype.prod=function(e,t){return this.throwIfDisposed(),Ew(this,e,t)},nv().prototype.reciprocal=function(){return this.throwIfDisposed(),Lw(this)},nv().prototype.relu=function(){return this.throwIfDisposed(),Pw(this)},nv().prototype.relu6=function(){return this.throwIfDisposed(),Fw(this)},nv().prototype.reshapeAs=function(e){return this.throwIfDisposed(),fb(this,e.shape)},nv().prototype.reshape=function(e){return this.throwIfDisposed(),fb(this,e)},nv().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),MS(this,e,t,n)},nv().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),IS(this,e,t,n)},nv().prototype.reverse=function(e){return this.throwIfDisposed(),jw(this,e)},nv().prototype.rfft=function(){return this.throwIfDisposed(),sk(this)},nv().prototype.round=function(){return this.throwIfDisposed(),Vw(this)},nv().prototype.rsqrt=function(){return this.throwIfDisposed(),Zw(this)},nv().prototype.selu=function(){return this.throwIfDisposed(),Hw(this)},nv().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Gw(this,e,t,n,r,a,i)},nv().prototype.sigmoid=function(){return this.throwIfDisposed(),xb(this)},nv().prototype.sign=function(){return this.throwIfDisposed(),Yw(this)},nv().prototype.sin=function(){return this.throwIfDisposed(),Kw(this)},nv().prototype.sinh=function(){return this.throwIfDisposed(),Qw(this)},nv().prototype.slice=function(e,t){return this.throwIfDisposed(),wb(this,e,t)},nv().prototype.softmax=function(e){return this.throwIfDisposed(),nk(this,e)},nv().prototype.softplus=function(){return this.throwIfDisposed(),Ax(this)},nv().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),xw(this,e,t)},nv().prototype.split=function(e,t){return this.throwIfDisposed(),ok(this,e,t)},nv().prototype.sqrt=function(){return this.throwIfDisposed(),uk(this)},nv().prototype.square=function(){return this.throwIfDisposed(),sw(this)},nv().prototype.squaredDifference=function(e){return this.throwIfDisposed(),lk(this,e)},nv().prototype.squeeze=function(e){return this.throwIfDisposed(),ck(this,e)},nv().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof tv?[this,e]:[this].concat((0,_.Z)(e));return dk(n,t)},nv().prototype.step=function(e){return this.throwIfDisposed(),hk(this,e)},nv().prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),pk(this,e,t,n,r,a,i,o,s)},nv().prototype.sub=function(e){return this.throwIfDisposed(),Dx(this,e)},nv().prototype.sum=function(e,t){return this.throwIfDisposed(),Lx(this,e,t)},nv().prototype.tan=function(){return this.throwIfDisposed(),fk(this)},nv().prototype.tanh=function(){return this.throwIfDisposed(),kb(this)},nv().prototype.tile=function(e){return this.throwIfDisposed(),hx(this,e)},nv().prototype.toBool=function(){return this.throwIfDisposed(),Vg(this,"bool")},nv().prototype.toFloat=function(){return this.throwIfDisposed(),Vg(this,"float32")},nv().prototype.toInt=function(){return this.throwIfDisposed(),Vg(this,"int32")},nv().prototype.topk=function(e,t){return this.throwIfDisposed(),xk(this,e,t)},nv().prototype.transpose=function(e){return this.throwIfDisposed(),Ak(this,e)},nv().prototype.unique=function(e){return this.throwIfDisposed(),kk(this,e)},nv().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Sk(this,e,t)},nv().prototype.unstack=function(e){return this.throwIfDisposed(),Ek(this,e)},nv().prototype.where=function(e,t){return this.throwIfDisposed(),nx(e,this,t)},nv().prototype.zerosLike=function(){return this.throwIfDisposed(),rx(this)};var u_=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,e),Object.setPrototypeOf((0,L.Z)(r),n.prototype),r}return(0,I.Z)(n)}(z(Error)),l_=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,e),Object.setPrototypeOf((0,L.Z)(r),n.prototype),r}return(0,I.Z)(n)}(z(Error)),c_=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,e),Object.setPrototypeOf((0,L.Z)(r),n.prototype),r}return(0,I.Z)(n)}(z(Error)),d_=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,e),Object.setPrototypeOf((0,L.Z)(r),n.prototype),r}return(0,I.Z)(n)}(z(Error)),h_=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,e),Object.setPrototypeOf((0,L.Z)(r),n.prototype),r}return(0,I.Z)(n)}(z(Error));function p_(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function f_(e,t){if(!e)throw new h_(t)}function m_(e,t){var n,r=0,a=G(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(sde){a.e(sde)}finally{a.f()}return r}function v_(e){return 1===e.length?e[0]:e}function g_(e){return Array.isArray(e)?e:[e]}function y_(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function b_(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var x_={};function w_(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function k_(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return k_(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?k_(a):e[r]=a.value)}}function S_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var i,o=e;if(o in n)i=n[o];else if(o in x_)i=x_[o];else if(null==(i=t[o]))throw new c_("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var s=e;if(null==s.className||null==s.config)throw new c_("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");var u,l,c=s.className;if(c in n){var d=(0,U.Z)(n[c],2);u=d[0],l=d[1]}else if(c in x_){var h=(0,U.Z)(x_.className,2);u=h[0],l=h[1]}else if(c in t){var p=(0,U.Z)(t[c],2);u=p[0],l=p[1]}if(null==u)throw new c_("Unknown ".concat(r,": ").concat(c,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){for(var f={},m=0,v=Object.keys(x_);m<v.length;m++){var g=v[m];f[g]=x_[g]}for(var y=0,b=Object.keys(n);y<b.length;y++){var x=b[y];f[x]=n[x]}s.config.customObjects=f;for(var w=Object.assign({},x_),k=0,S=Object.keys(n);k<S.length;k++){var E=S[k];x_[E]=n[E]}k_(s.config);var T=l(u,s.config,n,a);return x_=Object.assign({},w),T}for(var C=Object.assign({},x_),_=0,M=Object.keys(n);_<M.length;_++){var I=M[_];x_[I]=n[I]}var N=new u(s.config);return x_=Object.assign({},C),N}function E_(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function T_(e){if(null==e)return e;var t,n=[],r=G(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(sde){r.e(sde)}finally{r.f()}return n}function C_(e){if(null==e)throw new c_("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function __(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new c_("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function M_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return f_(n>=0),f_(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function I_(e,t){Array.isArray(e)?(Ed(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return I_(e,"element ".concat(n+1," of ").concat(t))}))):Ed(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(N_(e),".")}))}function N_(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return N_(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function A_(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function R_(e,t){return Oy((function(){return uk(Lx(bb(e,e),t,!0))}))}var O_=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(My),D_=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,I.Z)(n,[{key:"apply",value:function(e){var t=this;return Oy((function(){var n=R_(e,t.axis),r=Ob(n,0,t.maxValue);return bb(e,ex(r,Vy(s_(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(O_);D_.className="MaxNorm",Ny(D_);var L_=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,I.Z)(n,[{key:"apply",value:function(e){var t=this;return Oy((function(){return ex(e,Vy(s_(),R_(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(O_);L_.className="UnitNorm",Ny(L_);var P_=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){return Pw(e)}}]),n}(O_);P_.className="NonNeg",Ny(P_);var F_=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return(0,I.Z)(n,[{key:"apply",value:function(e){var t=this;return Oy((function(){var n=R_(e,t.axis),r=Vy(bb(t.rate,Ob(n,t.minValue,t.maxValue)),bb(1-t.rate,n));return bb(e,ex(r,Vy(s_(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(O_);F_.className="MinMaxNorm",Ny(F_);var j_={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function z_(e){return w_(e)}function B_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return S_(e,Iy.getMap().classNameMap,t,"constraint")}function U_(e){return null==e?null:"string"===typeof e?B_({className:e in j_?j_[e]:e,config:{}}):e instanceof O_?e:B_(e)}var W_=["channelsFirst","channelsLast"],V_=["nearest","bilinear"],Z_=["valid","same","causal"],H_=["max","avg"],G_=["sum","mul","concat","ave"],q_=new Map;function X_(e){__(W_,"DataFormat",e)}function Y_(e){__(Z_,"PaddingMode",e)}function K_(e){__(H_,"PoolMode",e)}var Q_=[],J_="/";function $_(e,t){Q_.push(e);try{var n=t();return Q_.pop(),n}catch(GK){throw Q_.pop(),GK}}function eM(e){if(!rM(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Q_.length?"":Q_.join(J_)+J_)+e}function tM(e){if(!rM(e))throw new Error("Not a valid tensor name: '"+e+"'");q_.has(e)||q_.set(e,0);var t=q_.get(e);if(q_.set(e,q_.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return q_.set(n,1),n}return e}var nM=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function rM(e){return!!e.match(nM)}function aM(e){return e===parseInt(e.toString(),10)}function iM(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function oM(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function sM(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function uM(e,t){if(t<e)throw new c_("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function lM(e,t){return Vg(e,t)}function cM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),fb(e,n)}function dM(e,t,n){return Oy((function(){switch(e.rank){case 1:return Jw(e,t,n);case 2:return $w(e,[t,0],[n,e.shape[1]]);case 3:return ek(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return tk(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return wb(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return wb(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new c_("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function hM(e,t,n){return Oy((function(){switch(e.rank){case 1:return Jw(e,t,n);case 2:return $w(e,[0,t],[e.shape[0],n]);case 3:return ek(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return tk(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new c_("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function pM(e,t,n,r){return Oy((function(){switch(e.rank){case 1:return Jw(e,t,n);case 2:switch(r){case 1:return dM(e,t,n);case 2:return hM(e,t,n);default:throw new c_("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return dM(e,t,n);case 2:return ek(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return hM(e,t,n);default:throw new c_("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return dM(e,t,n);case 2:return tk(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return tk(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return hM(e,t,n);default:throw new c_("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new c_("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function fM(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),gb(e,n)}function mM(e,t){switch(e.rank){case 1:return Db([e,t]);case 2:return Lb([e,t],0);case 3:return Pb([e,t],0);case 4:return Fb([e,t],0);default:throw new c_("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function vM(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new c_("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return hx(e,t)}function gM(e){return Aw(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function yM(e,t,n,r){if(e.rank<2||t.rank<2)throw new d_("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new d_("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return eS({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?wM(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),i=a.pop();e=fb(e,[-1,i]);var o=t.shape.slice(),s=o.pop(),u=o.pop(),l=[].concat((0,_.Z)(o),[s]),c=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=fb(Ak(t,c),[u,-1]);var d=[].concat((0,_.Z)(a),(0,_.Z)(l));return fb(eS({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?wM(e.rank,r,"channelsLast"):null,activation:n}),d)}function bM(e,t,n){return Oy((function(){return t=Array.isArray(t)?mk(t,"int32"):Vg(t,"int32"),vx(e,t,n)}))}function xM(e){return bb(e,e)}function wM(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new c_("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?fb(t,[1,r[0],1,1,1]):fb(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?fb(t,[1,1,1,1,r[0]]):fb(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?fb(t,[1,r[0],1,1]):fb(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?fb(t,[1,1,1,r[0]]):fb(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?fb(t,[1,r[0],1]):fb(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?fb(t,[1,1,r[0]]):fb(t,[1].concat(r))}else if(e<3)return t;throw new c_("Unsupported input rank by biasAdd: ".concat(t.rank))}function kM(e,t,n){return Oy((function(){return null==n&&(n="channelsLast"),X_(n),Vy(e,wM(e.rank,t,n))}))}function SM(e,t,n,r){return Oy((function(){return Bk(e,t,n,r)}))}function EM(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}var TM=["fanIn","fanOut","fanAvg"],CM=["normal","uniform","truncatedNormal"];var _M=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(My),MM=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e,t){return ew(e,t)}}]),n}(_M);MM.className="Zeros",Ny(MM);var IM=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e,t){return tw(e,t)}}]),n}(_M);IM.className="Ones",Ny(IM);var NM=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),r=t.call(this),"object"!==typeof e)throw new c_("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new c_("config must have value set but got ".concat(e));return r.value=e.value,r}return(0,I.Z)(n,[{key:"apply",value:function(e,t){var n=this;return Oy((function(){return bb(jy(n.value),tw(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(_M);NM.className="Constant",Ny(NM);var AM=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return(0,I.Z)(n,[{key:"apply",value:function(e,t){return Rw(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(_M);AM.className="RandomUniform",Ny(AM);var RM=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,I.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new d_("randomNormal does not support dType ".concat(t,"."));return gM(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(_M);RM.className="RandomNormal",Ny(RM);var OM=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return(0,I.Z)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new d_("truncatedNormal does not support dType ".concat(t,"."));return wk(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(_M);OM.className="TruncatedNormal",Ny(OM);var DM=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return(0,I.Z)(n,[{key:"apply",value:function(e,t){var n=this;return Oy((function(){if(2!==e.length||e[0]!==e[1])throw new c_("Identity matrix initializer can only be used for 2D square matrices.");return bb(n.gain,px(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(_M);DM.className="Identity",Ny(DM);var LM=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),r=t.call(this),e.scale<0)throw new c_("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,function(e){__(TM,"FanMode",e)}(r.mode),r.distribution=null==e.distribution?"normal":e.distribution,function(e){__(CM,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return(0,I.Z)(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(X_(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=iM(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=iM(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=iM(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new d_("".concat(this.getClassName()," does not support dType ").concat(t,"."));return wk(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return Rw(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(_M);LM.className="VarianceScaling",Ny(LM);var PM=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return(0,I.Z)(n,[{key:"getClassName",value:function(){return LM.className}}]),n}(LM);PM.className="GlorotUniform",Ny(PM);var FM=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return(0,I.Z)(n,[{key:"getClassName",value:function(){return LM.className}}]),n}(LM);FM.className="GlorotNormal",Ny(FM);var jM=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,I.Z)(n,[{key:"getClassName",value:function(){return LM.className}}]),n}(LM);jM.className="HeNormal",Ny(jM);var zM=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,I.Z)(n,[{key:"getClassName",value:function(){return LM.className}}]),n}(LM);zM.className="HeUniform",Ny(zM);var BM=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return(0,I.Z)(n,[{key:"getClassName",value:function(){return LM.className}}]),n}(LM);BM.className="LeCunNormal",Ny(BM);var UM=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return(0,I.Z)(n,[{key:"getClassName",value:function(){return LM.className}}]),n}(LM);UM.className="LeCunNormal",Ny(UM);var WM=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new d_("Random seed is not implemented for Orthogonal Initializer yet.");return r}return(0,I.Z)(n,[{key:"apply",value:function(e,t){var n=this;return Oy((function(){if(e.length<2)throw new d_("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=gM(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=nE.gramSchmidt(t);return e[0]>e[1]&&(r=Ak(r)),bb(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(_M);WM.className="Orthogonal",Ny(WM);var VM={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function ZM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return S_(e,Iy.getMap().classNameMap,t,"initializer")}function HM(e){return w_(e)}function GM(e){if("string"===typeof e){var t=e in VM?VM[e]:e;if("GlorotNormal"===t)return new FM;if("GlorotUniform"===t)return new PM;if("HeNormal"===t)return new jM;if("HeUniform"===t)return new zM;if("LeCunNormal"===t)return new BM;if("LeCunUniform"===t)return new UM;var n={};return n.className=t,n.config={},ZM(n)}return e instanceof _M?e:ZM(e)}var qM=0;function XM(){return qM++}var YM={};function KM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in YM||(YM[e]=0),YM[e]+=1,e+YM[e].toString()}function QM(e){return Array.isArray(e)&&Array.isArray(e[0])}function JM(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function $M(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new c_("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function eI(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new c_("Expected exactly 1 Shape; got ".concat(e.length))}return e}function tI(e){var t,n=0,r=G(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(sde){r.e(sde)}finally{r.f()}return n}var nI="Variable",rI=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nI,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;M(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=XM(),r=null==r?nI:r,this.originalName=eM(r),this.name=tM(this.originalName),this.trainable_=a,this.constraint=i,this.val=Tk(t,this.trainable_,this.name,this.dtype)}return(0,I.Z)(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function aI(e){return e.map((function(e){return e.read()}))}function iI(e){e.forEach((function(e){e[0].write(e[1])}))}var oI=(0,I.Z)((function e(t){M(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),sI=(0,I.Z)((function e(t,n,r,a,i,o,s){M(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=XM(),null!=o&&(this.originalName=eM(o),this.name=tM(this.originalName)),this.rank=n.length})),uI=0,lI=function(){function e(t,n){M(this,e),this.callArgs=n,this.id=uI++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=G(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(sde){a.e(sde)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return(0,I.Z)(e,[{key:"getConfig",value:function(){var e,t=[],n=G(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(sde){n.e(sde)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),cI=0,dI=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};M(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=cI++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=y_(i)+"_"+KM(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return(0,I.Z)(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new l_("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new c_("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return v_(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return v_(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new u_("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new u_("Layer ".concat(this.name)+" is not connected, no input to return.");return v_(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new u_("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new u_("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return v_(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=g_(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=g_(this.inputSpec);if(e.length!==t.length)throw new c_("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new c_("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new c_("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new c_("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new c_("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),l=a.axes[s],c=u>=0?o[u]:o[o.length+u];if(null!=l&&-1===[l,null].indexOf(c))throw new c_("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(u," of input shape to ")+"have value ".concat(l," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var d=0;d<a.shape.length;++d){var h=a.shape[d],p=r.shape[d];if(null!=h&&null!=p&&h!==p)throw new c_("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=g_(e),i=!0,o=G(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof sI)){i=!1;break}}}catch(sde){o.e(sde)}finally{o.f()}var s,u=!0,l=G(a);try{for(l.s();!(s=l.n()).done;){if(s.value instanceof sI){u=!1;break}}}catch(sde){l.e(sde)}finally{l.f()}if(i===u)throw new c_("Arguments to apply() must be all SymbolicTensors or all Tensors");return $_(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=G(g_(e));try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push(s.shape)}}catch(sde){o.e(sde)}finally{o.f()}n.build(v_(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var l,c=n.call(e,t),d=[],h=G(g_(c));try{for(h.s();!(l=h.n()).done;){var p=l.value;-1!==a.indexOf(p)&&(p=p.clone()),d.push(p)}}catch(sde){h.e(sde)}finally{h.f()}if(c=v_(d),null!=n.activityRegularizer)throw new d_("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return c}var f,m=function(e){e=g_(e);var t,n=[],r=G(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(sde){r.e(sde)}finally{r.f()}return v_(n)}(e),v=n.computeOutputShape(m),g="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?m[0]:m),f=null!=v&&v.length>0&&Array.isArray(v[0])?v.map((function(r,a){return new sI(g,r,n,g_(e),t,n.name,a)})):new sI(g,v,n,g_(e),t,n.name),n.addInboundNode(e,f,null,null,m,v,t),n._refCount++,null!=n.activityRegularizer)throw new d_("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return f}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new u_("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=G(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(sde){n.e(sde)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new u_("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new l_("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return tI(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){return aI(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;Oy((function(){var n=t.weights;if(n.length!==e.length)throw new c_('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=aI(n),i=0;i<a.length;++i){var o=a[i],s=n[i],u=e[i];if(!Id(o.shape,u.shape))throw new c_("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(u.shape));r.push([s,u])}iI(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new c_("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():GM("zeros"));var u=r.apply(t,n),l=new rI(u,n,e,i,o);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(l.read())})),null==i&&(i=!0),i?this._trainableWeights.push(l):this._nonTrainableWeights.push(l),l}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=g_(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,(0,_.Z)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=g_(e);t=g_(t),n=g_(n),r=g_(r),a=JM(a),i=JM(i);var u,l=[],c=[],d=[],h=G(s);try{for(h.s();!(u=h.n()).done;){var p=u.value;l.push(p.sourceLayer),c.push(p.nodeIndex),d.push(p.tensorIndex)}}catch(sde){h.e(sde)}finally{h.f()}new lI({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:d,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var f=0;f<t.length;f++)t[f].sourceLayer=this,t[f].nodeIndex=this.inboundNodes.length-1,t[f].tensorIndex=f}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(My);function hI(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,s=G(hI(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]));try{for(s.s();!(o=s.n()).done;){var u=o.value;-1===a.indexOf(u)&&a.push(u)}}catch(sde){s.e(sde)}finally{s.f()}}return a}var pI,fI=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:KM("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new c_("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new c_("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new c_("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new sI(r.dtype,r.batchInputShape,(0,L.Z)(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new lI({outboundLayer:(0,L.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return(0,I.Z)(n,[{key:"apply",value:function(e,t){throw new c_("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(dI);function mI(e){return vI.apply(this,arguments)}function vI(){return vI=Jn(Kn().mark((function e(t){var n,r,a,i,o,s,u,l;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!==typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(u=e.sent,l=0;l<u.length;++l)t[r[l]]=u[l][0];Dy(a);case 12:case"end":return e.stop()}}),e)}))),vI.apply(this,arguments)}function gI(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}fI.className="InputLayer",Ny(fI),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(pI||(pI={}));var yI=function(){function e(){M(this,e),this.validationData=null}return(0,I.Z)(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),bI=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;M(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return(0,I.Z)(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=G(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(sde){n.e(sde)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=G(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(sde){n.e(sde)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=G(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=G(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=G(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=G(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=G(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=G(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),xI=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.call(this)}return(0,I.Z)(n,[{key:"onEpochBegin",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a,i,o=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=Kn().mark((function e(t){var a,i,s;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"number"===typeof(a=n[t])?(o.totals.hasOwnProperty(t)||(o.totals[t]=0),o.totals[t]=o.totals[t]+a*r):(t in o.totals?i=o.totals[t]:o.totals[t]=0,s=Oy((function(){return Vy(o.totals[t],bb(a,r))})),o.totals[t]=s,null!=i&&i.dispose());case 2:case"end":return e.stop()}}),e)})),e.t0=Kn().keys(n);case 5:if((e.t1=e.t0()).done){e.next=10;break}return i=e.t1.value,e.delegateYield(a(i),"t2",8);case 8:e.next=5;break;case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a,i,o=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=20;break}r=G(this.params.metrics),e.prev=2,i=Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.value,null!=o.totals[t]){e.next=3;break}return e.abrupt("return","continue");case 3:"number"===typeof o.totals[t]?n[t]=o.totals[t]/o.seen:Oy((function(){var e=bb(ex(1,o.seen),o.totals[t]);n[t]=e,o.totals[t].dispose(),Ly(n[t])}));case 4:case"end":return e.stop()}}),e)})),r.s();case 5:if((a=r.n()).done){e.next=12;break}return e.delegateYield(i(),"t0",7);case 7:if("continue"!==e.t0){e.next=10;break}return e.abrupt("continue",10);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(2),r.e(e.t1);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[2,14,17,20]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(yI),wI=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"onTrainBegin",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Jn(Kn().mark((function e(t,n){var r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a,i,o,s,u,l;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!==typeof i[o]&&(s=i[o],t.push(s.data()),n.push(a),r.push(o));return e.next=6,Promise.all(t);case 6:for(u=e.sent,l=0;l<u.length;++l)this.history[n[l]][r[l]].dispose(),this.history[n[l]][r[l]]=u[l][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(yI),kI=function(e){A(n,e);var t=F(n);function n(e,r){var a;if(M(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||vE,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return Vd(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():zm();return function(){var i=null!=n?n():zm();return i-a<t?r:(a=i,r=e.apply(void 0,arguments))}}(a.maybeWait.bind((0,L.Z)(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return(0,I.Z)(n,[{key:"maybeWait",value:function(){var e=Jn(Kn().mark((function e(t,n,r){var a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,mI(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,mI(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Jn(Kn().mark((function e(t,n){var r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,mI(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,mI(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Jn(Kn().mark((function e(t,n){var r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,mI(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):Vd(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,mI(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,mI(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(yI);function SI(e,t){return null==e&&(e={}),e instanceof yI?[e]:Array.isArray(e)&&e[0]instanceof yI?e:g_(e).map((function(e){return new kI(e,t)}))}var EI=function(){function e(){M(this,e)}return(0,I.Z)(e,null,[{key:"registerCallbackConstructor",value:function(t,n){Ed(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new c_("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,(0,_.Z)(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function TI(e,t,n,r,a,i,o,s,u){var l=new wI,c=[new xI].concat((0,_.Z)(EI.createCallbacks(t)));null!=e&&c.push.apply(c,(0,_.Z)(e)),c.push(l);var d=new bI(c);return d.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:d,history:l}}function CI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return S_(e,Iy.getMap().classNameMap,t,"layer",n)}function _I(e,t){return Oy((function(){"float32"!==e.dtype&&(e=Vg(e,"float32"));var n=Lx(xM(e),t,!0),r=fx(n.shape,s_()),a=uk(Jx(n,r));return ex(e,a)}))}function MI(e,t){return Oy((function(){return $x(xM(Dx(t,e)),-1)}))}function II(e,t){return Oy((function(){return $x(By(Dx(t,e)),-1)}))}function NI(e,t){return Oy((function(){var n=Dx(e,t),r=Ob(By(e),s_(),Number.MAX_VALUE),a=By(ex(n,r));return bb(100,$x(a,-1))}))}function AI(e,t){return Oy((function(){var n=Ob(t,s_(),Number.MAX_VALUE),r=Mx(Vy(1,n)),a=Ob(e,s_(),Number.MAX_VALUE),i=Mx(Vy(1,a));return $x(xM(Dx(r,i)),-1)}))}function RI(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Oy((function(){if(n)t=nk(t);else{var r=Lx(t,t.shape.length-1,!0);t=ex(t,r)}return t=Ob(t,s_(),1-s_()),Nx(Lx(bb(Vg(e,"float32"),Mx(t)),t.shape.length-1))}))}function OI(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Oy((function(){var r=Vg(mx(function(e){var t=[iM(e.shape)];return fb(e,t)}(e)),"int32"),a=(t=Ob(t,s_(),1-s_())).shape;return RI(fb(hw(r,a[a.length-1]),a),t,n)}))}function DI(e,t){return Oy((function(){var n;return n=Ob(t,s_(),1-s_()),n=Mx(ex(n,Dx(1,n))),$x(function(e,t){if(!Id(e.shape,t.shape))throw new c_("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return Oy((function(){var n=Pw(t),r=Nx(By(t));return Vy(Dx(n,bb(t,e)),Ix(lx(r)))}))}(e,n),-1)}))}function LI(e,t){return Oy((function(){var n=Ob(e,s_(),1),r=Ob(t,s_(),1);return Lx(bb(e,Mx(ex(n,r))),-1)}))}function PI(e,t){return Oy((function(){var n=_I(e,-1),r=_I(t,-1),a=bb(n,r);return Nx(Lx(a,-1))}))}EI.constructors={};var FI={meanSquaredError:MI,meanAbsoluteError:II,meanAbsolutePercentageError:NI,meanSquaredLogarithmicError:AI,squaredHinge:function(e,t){return Oy((function(){var n=Jx(0,Dx(1,bb(e,t)));return $x(xM(n),-1)}))},hinge:function(e,t){return Oy((function(){var n=Jx(0,Dx(1,bb(e,t)));return $x(n,-1)}))},categoricalHinge:function(e,t){return Oy((function(){var n=Lx(bb(e,t),-1),r=Ox(bb(Dx(1,e),t),-1);return Jx(0,Vy(1,Dx(r,n)))}))},logcosh:function(e,t){return Oy((function(){var n=Math.log(2),r=Dx(t,e),a=Dx(Vy(r,Ax(bb(-2,r))),n);return $x(a,-1)}))},categoricalCrossentropy:RI,sparseCategoricalCrossentropy:OI,binaryCrossentropy:DI,kullbackLeiblerDivergence:LI,poisson:function(e,t){return Oy((function(){var n=Mx(Vy(s_(),t));return $x(Dx(t,bb(e,n)),-1)}))},cosineProximity:PI};function jI(e){if("string"===typeof e){if(e in FI)return FI[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new c_(t)}return e}function zI(e,t){return Oy((function(){var n=bb(.5,pw(t)),r=lM(gx(t,n),e.dtype);return $x(tx(e,r),-1)}))}function BI(e,t){return Oy((function(){return lM(tx(qy(e,-1),qy(t,-1)),"float32")}))}function UI(e,t){return Oy((function(){return Vg(Lx(Hx(tx(e,1),tx(t,1))),"float32")}))}function WI(e,t){return DI(e,t)}function VI(e,t){return e.rank===t.rank&&(e=ck(e,[e.rank-1])),(t=qy(t,-1)).dtype!==e.dtype&&(t=Vg(t,e.dtype)),Vg(tx(e,t),"float32")}var ZI=RI,HI=OI,GI={binaryAccuracy:zI,categoricalAccuracy:BI,precision:function(e,t){return Oy((function(){var n=UI(e,t),r=function(e,t){return Oy((function(){return Vg(Lx(Hx(tx(e,0),tx(t,1))),"float32")}))}(e,t),a=Vy(n,r);return Vg(nx(gx(a,0),ex(n,a),0),"float32")}))},categoricalCrossentropy:ZI,sparseCategoricalCrossentropy:HI,mse:MI,MSE:MI,mae:II,MAE:II,mape:NI,MAPE:NI,cosine:PI};function qI(e){if(f_(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(FI);n<r.length;n++){var a=r[n];if(FI[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(GI);i<o.length;i++){var s=o[i];if(GI[s]===e){t=s;break}}return void 0!==t?t:e.name}var XI=1048576;function YI(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!KI(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>XI&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(XI,"."))}}function KI(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!KI(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=G(e);try{for(i.s();!(a=i.n()).done;){if(!KI(a.value))return!1}}catch(sde){i.e(sde)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function QI(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=function(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,(0,_.Z)(s))}if(t){var u,l=G(e.layers);try{for(l.s();!(u=l.n()).done;){var c,d=u.value,h=!1,p=G(d.inboundNodes);try{for(p.s();!(c=p.n()).done;){var f=c.value;if(-1!==r.indexOf(f)){if(h){t=!1;break}h=!0}}}catch(sde){p.e(sde)}finally{p.f()}if(!t)break}}catch(sde){l.e(sde)}finally{l.f()}}return t}(e),o=["Layer (type)","Output shape","Param #"];if(i?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,(0,_.Z)(e.nodesByDepth[s]))}a("_".repeat(t)),JI(o,n,a),a("=".repeat(t));for(var l=e.layers,c=0;c<l.length;++c)i?$I(l[c],n,a):eN(l[c],n,r,a),a((c===l.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var d=function(e){var t;t=null!=e.collectedTrainableWeights?tI(e.collectedTrainableWeights):tI(e.trainableWeights);return t}(e),h=tI(e.nonTrainableWeights);a("Total params: ".concat(d+h)),a("Trainable params: ".concat(d)),a("Non-trainable params: ".concat(h)),a("_".repeat(t))}function JI(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function $I(e,t,n){var r;try{r=JSON.stringify(e.outputShape)}catch(sde){r="multiple"}var a=e.name,i=e.getClassName();JI(["".concat(a," (").concat(i,")"),r,e.countParams().toString()],t,n)}function eN(e,t,n,r){var a;try{a=JSON.stringify(e.outputShape)}catch(sde){a="multiple"}var i,o=[],s=G(e.inboundNodes);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(var l=0;l<u.inboundLayers.length;++l){var c=u.inboundLayers[l].name,d=u.nodeIndices[l],h=u.tensorIndices[l];o.push("".concat(c,"[").concat(d,"][").concat(h,"]"))}}}catch(sde){s.e(sde)}finally{s.f()}var p=e.name,f=e.getClassName(),m=0===o.length?"":o[0];JI(["".concat(p," (").concat(f,")"),a,e.countParams().toString(),m],t,r);for(var v=1;v<o.length;++v)JI(["","","",o[v]],t,r)}function tN(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function nN(e,t){if(null===e)return null;if("string"===typeof e)return b_(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];tN(t,a,i)?n.push(i):n.push(nN(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],c=e[l];if("name"===l&&"string"===typeof c)o[l]=c;else{var d=b_(l);o[d]=nN(c,d)}}return o}function rN(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return y_(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];tN(t,a,i)?n.push(i):n.push(rN(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],c=e[l],d=y_(l);o[d]="name"!==l&&"className"!==l||"string"!==typeof c?rN(c,l):c}return o}var aN="3.13.0";var iN=function(){function e(t){if(M(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=G(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(sde){a.e(sde)}finally{a.f()}}}return(0,I.Z)(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new c_("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Vg(t,e.dtype)}catch(sde){throw new c_("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof sI){if(null==this.id2Value[e.id])throw new c_("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new c_("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof sI){if(null==this.id2Value[e.id])throw new c_("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new c_("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&Dy(this.id2Mask)}}]),e}(),oN={},sN={};function uN(e,t,n,r){var a,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],u=s.map((function(e){return e.name})),l=[],c=t.names(),d=G(u);try{for(d.s();!(a=d.n()).done;){var h=a.value;-1!==c.indexOf(h)?l.push(t.getValue(h)):l.push(null)}}catch(sde){d.e(sde)}finally{d.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var p,f,m=u.join(",")+"|"+t.names().join(",");if(null==oN[m]){var v=function(e,t){Ed(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=cN(e[0],t);n=a.sorted,r=a.recipientMap}else{var i,o=new Set,s=G(e);try{for(s.s();!(i=s.n()).done;){var u,l=cN(i.value,t),c=l.sorted,d=l.recipientMap,h=G(c);try{for(h.s();!(u=h.n()).done;){var p=u.value;o.has(p.name)||(n.push(p),o.add(p.name))}}catch(sde){h.e(sde)}finally{h.f()}var f=function(e){null==r[e]&&(r[e]=new Set),d[e].forEach((function(t){return r[e].add(t)}))};for(var m in d)f(m)}}catch(sde){s.e(sde)}finally{s.f()}}return{sorted:n,recipientCounts:lN(r)}}(s,t);p=v.sorted,f=v.recipientCounts,oN[m]=p,sN[m]=f}p=oN[m],f={},i||Object.assign(f,sN[m]);for(var g=new iN(t),y=0;y<p.length;++y){if(null!=r){var b=Ry().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=p[y],w=x.sourceLayer;if(!(w instanceof fI)){var k,S=[],E=[],T=[],C=!1,_=G(x.inputs);try{for(_.s();!(k=_.n()).done;){var M=k.value,I=g.getValue(M),N=g.getMask(M);S.push(I),E.push(N),null!=N&&(C=!0),i||(f[M.name]--,0!==f[M.name]||t.hasKey(M)||-1!==u.indexOf(M.name)||I.isDisposed||!0===M.sourceLayer.stateful||T.push(I))}}catch(sde){_.e(sde)}finally{_.f()}C&&((n=n||{}).mask=E[0]);var A=g_(w.apply(S,n)),R=null;w.supportsMasking&&(R=w.computeMask(S,E));for(var O=dN(x),D=Array.isArray(O)?O:[O],L=0;L<D.length;++L){g.hasKey(D[L])||g.add(D[L],A[L],Array.isArray(R)?R[0]:R);var P=u.indexOf(D[L].name);-1!==P&&(l[P]=A[L])}i||Dy(T)}}return g.disposeMasks(),o?l:l[0]}function lN(e){var t={};for(var n in e)t[n]=e[n].size;return t}function cN(e,t){var n,r=new Set,a=[],i={},o=G(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(sde){o.e(sde)}finally{o.f()}var u=[],l=[];for(u.push(e);u.length>0;){var c=u[u.length-1];if(r.has(c.name))u.pop();else{var d=l[l.length-1]===u.length-1;if(0===c.inputs.length||d)u.pop(),a.push(c),r.add(c.name),d&&l.pop();else{l.push(u.length-1);var h,p=G(c.inputs);try{for(p.s();!(h=p.n()).done;){var f=h.value;null==i[f.name]&&(i[f.name]=new Set),i[f.name].add(c.name),r.has(f.name)||u.push(f)}}catch(sde){p.e(sde)}finally{p.f()}}}}return{sorted:a,recipientMap:i}}function dN(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=G(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(sde){i.e(sde)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}var hN=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=KM(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],T_(r.inputs).length!==r.inputs.length)throw new c_("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));T_(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=G(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.sourceLayer,l=s.nodeIndex,c=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(l),r.outputLayersTensorIndices.push(c)}}catch(sde){o.e(sde)}finally{o.f()}var d,h=G(r.inputs);try{for(h.s();!(d=h.n()).done;){var p=d.value,f=p.sourceLayer,m=p.nodeIndex,v=p.tensorIndex;f_(0===m,"input layer has >1 nodes"),f_(0===v,"input layer has >1 tensors"),r.inputLayers.push(f),r.inputLayersNodeIndices.push(m),r.inputLayersTensorIndices.push(v)}}catch(sde){h.e(sde)}finally{h.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var g=0;g<r.inputLayers.length;g++){var y=r.inputLayers[g];if(!(y instanceof fI))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(g," (0-based) originates ")+"from layer type ".concat(y.getClassName(),"."));r.inputNames.push(y.name),r.feedInputShapes.push(y.batchInputShape),r.feedInputNames.push(y.name)}var b,x=G(r.outputLayers);try{for(x.s();!(b=x.n()).done;){var w=b.value;r.outputNames.push(w.name)}}catch(sde){x.e(sde)}finally{x.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var k,S={},E={},T={},C={},_={},I=[],N=function e(t,a,i,o,s,u){null!=o&&null!=s&&null!=u||(o=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var l=o.inboundNodes[s];if(-1!==i.indexOf(l))throw new l_("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(l)){r.containerNodes.add(n.nodeKey(o,s)),o.id in _||(_[o.id]=Object.keys(_).length),-1===i.indexOf(l)&&i.push(l);for(var c=l.inboundLayers.length,d=0;d<c;d++){e(l.inputTensors[d],a,i,l.inboundLayers[d],l.nodeIndices[d],l.tensorIndices[d])}for(a.push(l);i.indexOf(l)>=0;)i.splice(i.indexOf(l),1);I.push(l)}},A=[],R=[],O=G(r.outputs);try{for(O.s();!(k=O.n()).done;){N(k.value,A,R)}}catch(sde){O.e(sde)}finally{O.f()}var D,P=G(I.slice().reverse());try{for(P.s();!(D=P.n()).done;){var F=D.value;E[F.id]=F,F.id in S||(S[F.id]=0);var j=S[F.id],z=null==T[F.outboundLayer.id]?0:T[F.outboundLayer.id];j=Math.max(j,z),T[F.outboundLayer.id]=j,C[F.outboundLayer.id]=F.outboundLayer,S[F.id]=j;for(var B=0;B<F.inboundLayers.length;B++){var U=F.inboundLayers[B],W=F.nodeIndices[B],V=U.inboundNodes[W],Z=null==S[V.id]?0:S[V.id];S[V.id]=Math.max(j+1,Z),E[V.id]=V}}}catch(sde){P.e(sde)}finally{P.f()}var H={};for(var q in S){var X=S[q];X in H||(H[X]=[]),H[X].push(E[q])}var Y={};for(var K in T){var Q=T[K];Q in Y||(Y[Q]=[]),Y[Q].push(C[K])}var J=Object.keys(Y).map((function(e){return parseInt(e,10)})).sort(E_);r.layers=[];var $,ee=G(J);try{for(ee.s();!($=ee.n()).done;){var te=Y[$.value];te.sort((function(e,t){var n=_[e.id],r=_[t.id];return n<r?-1:n>r?1:0}));var ne,re=G(te);try{for(re.s();!(ne=re.n()).done;){var ae=ne.value;ae instanceof n&&r.internalContainerRefs.push(ae),r.layers.push(ae)}}catch(sde){re.e(sde)}finally{re.f()}}}catch(sde){ee.e(sde)}finally{ee.f()}r.layersByDepth=Y,J=Object.keys(H).map((function(e){return parseInt(e,10)})).sort(E_);var ie,oe=r.inputs.slice(),se=[],ue=G(J);try{for(ue.s();!(ie=ue.n()).done;){var le,ce=G(H[ie.value]);try{for(ce.s();!(le=ce.n()).done;){var de=le.value,he=de.outboundLayer;if(null!=he){var pe,fe=G(de.inputTensors);try{for(fe.s();!(pe=fe.n()).done;){var me=pe.value;if(-1===oe.indexOf(me))throw new l_("Graph disconnected: cannot obtain value for tensor ".concat(me)+' at layer "'.concat(he.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(se))}}catch(sde){fe.e(sde)}finally{fe.f()}var ve,ge=G(de.outputTensors);try{for(ge.s();!(ve=ge.n()).done;){var ye=ve.value;oe.push(ye)}}catch(sde){ge.e(sde)}finally{ge.f()}se.push(he.name)}}}catch(sde){ce.e(sde)}finally{ce.f()}}}catch(sde){ue.e(sde)}finally{ue.f()}r.nodesByDepth=H;var be,xe=r.layers.map((function(e){return e.name})),we=G(xe);try{var ke=function(){var e=be.value,t=xe.filter((function(t){return t===e})).length;if(1!==t)throw new l_('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(xe))};for(we.s();!(be=we.n()).done;)ke()}catch(sde){we.e(sde)}finally{we.f()}return r.outboundNodes=[],r.inboundNodes=[],new lI({outboundLayer:(0,L.Z)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return(0,I.Z)(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=G(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(sde){n.e(sde)}finally{n.f()}var a,i=G(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(sde){i.e(sde)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new c_("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=G(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(sde){n.e(sde)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=G(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,_.Z)(r.nonTrainableWeights))}}catch(sde){n.e(sde)}finally{n.f()}if(!this.trainable){var a,i=[],o=G(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,(0,_.Z)(s.trainableWeights))}}catch(sde){o.e(sde)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=G(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=G(t.value.weights);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(null!=r[u.originalName])throw new c_("Duplicate weight name: ".concat(u.originalName));r[u.originalName]=u,a++}}catch(sde){s.e(sde)}finally{s.f()}}}catch(sde){i.e(sde)}finally{i.f()}var l=[];for(var c in e){var d=c;if(null==r[c]){var h=c.split("/");d=h.slice(0,-2).concat([h[h.length-1]]).join("/")}if(null!=r[d])l.push([r[d],e[c]]);else if(n)throw new c_("Provided weight data has no target variable: ".concat(c));delete r[d]}if(n){var p=[];for(var f in r)p.push(f);if(p.length>0)throw new c_("".concat(p.length," of ").concat(a," weights are not set: ")+"".concat(p))}iI(l)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(aN),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=rN(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return Oy((function(){e=g_(e);for(var r=new iN,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return uN(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return Oy((function(){var r;return e=g_(e),r=null==t?p_(null,e.length):g_(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=JM(e);if(t.length!==this.inputLayers.length)throw new c_("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(E_);if(o.length>1){var s,u=G(o);try{for(u.s();!(s=u.n()).done;){var l,c=s.value,d=G(this.nodesByDepth[c]);try{for(d.s();!(l=d.n()).done;){var h=l.value,p=h.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(p.id)){for(var f=[],m=0;m<h.inboundLayers.length;m++){var v=h.inboundLayers[m],g=h.nodeIndices[m],y=h.tensorIndices[m],b=n["".concat(v.name,"_").concat(g,"_").concat(y)];f.push(b)}for(var x=JM(p.computeOutputShape(v_(f))),w=p.inboundNodes.indexOf(h),k=0;k<x.length;k++){n["".concat(p.name,"_").concat(w,"_").concat(k)]=x[k]}}}}catch(sde){d.e(sde)}finally{d.f()}}}catch(sde){u.e(sde)}finally{u.f()}}for(var S=[],E=[],T=0;T<this.outputLayers.length;T++){var C=this.outputLayers[T],_=this.outputLayersNodeIndices[T],M=this.outputLayersTensorIndices[T],I="".concat(C.name,"_").concat(_,"_").concat(M);E.push(I)}for(var N=0;N<E.length;N++){var A=E[N];f_(A in n),S.push(n[A])}return v_(S)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=p_(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}var s,u=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(E_),l=G(u);try{for(l.s();!(s=l.n()).done;){var c,d=s.value,h=G(this.nodesByDepth[d]);try{for(h.s();!(c=h.n()).done;){var p,f=c.value,m=f.outboundLayer,v=f.inputTensors,g=f.outputTensors,y=new Array,b=G(v);try{for(b.s();!(p=b.n()).done;){var x=p.value;x.id in n&&y.push(n[x.id])}}catch(sde){b.e(sde)}finally{b.f()}if(y.length===v.length){var w={},k=void 0,S=void 0,E=void 0,T=void 0;if(null!=f.callArgs&&(w=f.callArgs),1===y.length){var C=(0,U.Z)(y[0],2),_=C[0],M=C[1];null==w.mask&&(w.mask=M),E=g_(m.call(_,w)),T=g_(m.computeMask(_,M)),k=[_],S=[M]}else k=y.map((function(e){return e[0]})),S=y.map((function(e){return e[1]})),null==w.mask&&(w.mask=S),E=g_(m.call(k,w)),T=g_(m.computeMask(k,S));if(m.activityRegularizer)throw new d_("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var I=0;I<g.length;++I){var N=g[I],A=E[I],R=T[I];n[N.id]=[A,R]}}}}catch(sde){h.e(sde)}finally{h.f()}}}catch(sde){l.e(sde)}finally{l.f()}var O,D=[],L=[],P=[],F=G(this.outputs);try{for(F.s();!(O=F.n()).done;){var j=O.value;f_(j.id in n,"Could not compute output ".concat(j.name," : ").concat(j.id));var z=(0,U.Z)(n[j.id],2),B=z[0],W=z[1];P.push(B.shape),D.push(B),L.push(W)}}catch(sde){F.e(sde)}finally{F.f()}return[D,L,P]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=G(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=n.nodeKey(o,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(sde){i.e(sde)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new c_("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new c_("Provide either a layer name or layer index");var n,r=G(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(sde){r.e(sde)}finally{r.f()}throw new c_("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return Oy((function(){var t,r=[],a=G(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,(0,_.Z)(i.calculateLosses()))}}catch(sde){a.e(sde)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=G(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),u=o.getConfig(),l=[],c=0;c<o.inboundNodes.length;c++){var d=o.inboundNodes[c],h=n.nodeKey(o,c),p={};if(this.containerNodes.has(h)){if(d.callArgs)try{JSON.stringify(d.callArgs),p=d.callArgs}catch(sde){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(d.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),p={}}if(d.inboundLayers.length>0){for(var f=[],m=0;m<d.inboundLayers.length;m++){var v=d.inboundLayers[m],g=d.nodeIndices[m],y=d.tensorIndices[m],b=r[n.nodeKey(v,g)];null==b&&(b=0),f.push([v.name,b,y,p])}l.push(f)}}}var x={};x.name=o.name,x.className=s,x.config=u,x.inboundNodes=l,a.push(x)}}catch(sde){i.e(sde)}finally{i.f()}t.layers=a;for(var w=[],k=0;k<this.inputLayers.length;k++){var S=this.inputLayers[k],E=this.inputLayersNodeIndices[k],T=n.nodeKey(S,E);if(this.containerNodes.has(T)){var C=r[T];null!==C&&void 0!==C||(C=0);var _=this.inputLayersTensorIndices[k];w.push([S.name,C,_])}}t.inputLayers=w;for(var M=[],I=0;I<this.outputLayers.length;I++){var N=this.outputLayers[I],A=this.outputLayersNodeIndices[I],R=n.nodeKey(N,A);if(this.containerNodes.has(R)){var O=r[R];null!==O&&void 0!==O||(O=0);var D=this.outputLayersTensorIndices[I];M.push([N.name,O,D])}}return t.outputLayers=M,t}},{key:"stateful",get:function(){if(this._stateful)throw new c_("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=G(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(sde){t.e(sde)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;Oy((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=G(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=u[0],c=u[1],d=u[2];if(n=null==u[3]?{}:u[3],!(l in r))return void i(e,t);var h=r[l];if(h.inboundNodes.length<=c)return void i(e,t);var p=h.inboundNodes[c];o.push(p.outputTensors[d])}}catch(sde){s.e(sde)}finally{s.f()}o.length>0&&e.apply(v_(o),n)}function s(e){var a=e.name,o=CI(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new c_("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var u,l=t.name,c=t.layers,d=G(c);try{for(d.s();!(u=d.n()).done;){s(u.value)}}catch(sde){d.e(sde)}finally{d.f()}for(;!C_(a);){var h,p=G(c);try{for(p.s();!(h=p.n()).done;){var f=h.value,m=r[f.name];if(m.name in a){var v=a[m.name];delete a[m.name];var g,y=G(v);try{for(y.s();!(g=y.n()).done;){o(m,g.value)}}catch(sde){y.e(sde)}finally{y.f()}}}}catch(sde){p.e(sde)}finally{p.f()}}var b,x=[],w=[],k=G(t.inputLayers);try{for(k.s();!(b=k.n()).done;){var S=b.value,E=S[0],T=S[1],C=S[2];f_(E in r);var _=r[E].inboundNodes[T].outputTensors;x.push(_[C])}}catch(sde){k.e(sde)}finally{k.f()}var M,I=G(t.outputLayers);try{for(I.s();!(M=I.n()).done;){var N=M.value,A=N[0],R=N[1],O=N[2];f_(A in r);var D=r[A].inboundNodes[R].outputTensors;w.push(D[O])}}catch(sde){I.e(sde)}finally{I.f()}return new e({inputs:x,outputs:w,name:l})}}]),n}(dI);function pN(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function fN(e,t){return pN(e,t,"classWeight")}function mN(e,t,n,r){return vN.apply(this,arguments)}function vN(){return vN=Jn(Kn().mark((function e(t,n,r,a){var i,o,s;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return i=Oy((function(){if(1===t.shape.length)return Zg(t);if(2===t.shape.length){if(t.shape[1]>1){return qy(t,1)}if(1===t.shape[1])return fb(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),Dy(i),s=[],o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",mk(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)}))),vN.apply(this,arguments)}function gN(e,t){return bb(e,t)}var yN=32;function bN(e,t){var n,r,a=t;n=a.xs,r=a.ys,Ed(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var i=xN("input",e.inputNames,n),o=xN("output",e.outputNames,r),s=i[0].shape[0];Ed(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),Ed(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){Ed(i[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},l=0;l<i.length;l++)u(l);for(var c=function(t){Ed(o[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},d=0;d<o.length;d++)c(d);return{xs:i,ys:o}}function xN(e,t,n){if(n instanceof tv)return[n];if(Array.isArray(n))return Ed(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],i=G(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null==n[o])throw new c_("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));a.push(n[o])}}catch(sde){i.e(sde)}finally{i.f()}return a}function wN(e){if(3===e.length)throw new d_("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function kN(e,t,n){return SN.apply(this,arguments)}function SN(){return SN=Jn(Kn().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,v,g,y,b,x,w,k,S,E,T,C,_,M,I,N,A,R,O,D,L,P;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,Ed(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),Ed(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),Ed(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),Ed(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),Ed(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(i=null!=r.validationData)&&(TN(r.validationData)?Ed(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(u=wN(r.validationData),o=u.xs,s=u.ys)),l=t.makeTrainFunction(),c=t.getDedupedMetricsNames(),d=i?c.slice().concat(c.map((function(e){return"val_"+e}))):c.slice(),h=SI(r.callbacks,r.yieldEvery),p=null==r.verbose?1:r.verbose,f=TI(h,p,r.epochs,null,null,EN(n,r),null,i,d),m=f.callbackList,v=f.history,m.setModel(t),t.history=v,e.next=22,m.onTrainBegin();case 22:return t.stopTraining_=!1,g=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:y=e.sent;case 27:if(!(g<r.epochs)){e.next=98;break}return b={},e.next=31,m.onEpochBegin(g);case 31:if(x=0,w=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:y=e.sent;case 37:if(a&&!(x<r.batchesPerEpoch)){e.next=91;break}return e.next=40,y.next();case 40:if(k=e.sent,!a||!k.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(x," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==k.value){e.next=73;break}return S=bN(t,k.value),E=S.xs,T=S.ys,(C={}).batch=w,C.size=E[0].shape[0],e.next=51,m.onBatchBegin(w,C);case 51:if(_=[],null==r.classWeight){e.next=64;break}M=fN(r.classWeight,t.outputNames),I=0;case 55:if(!(I<M.length)){e.next=64;break}return e.t0=_,e.next=59,mN(T[I],null,M[I]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++I,e.next=55;break;case 64:for(N=E.concat(T).concat(_),A=l(N),Dy(N),R=0;R<c.length;++R)O=c[R],D=A[R],C[O]=D,Ly(D);return e.next=70,m.onBatchEnd(w,C);case 70:gI(C),w++,x++;case 73:if(!(a?x>=r.batchesPerEpoch:k.done)){e.next=87;break}if(!i){e.next=86;break}if(L=void 0,!TN(r.validationData)){e.next=84;break}return e.t2=g_,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,L=(0,e.t2)(e.t3),e.next=85;break;case 84:L=g_(t.evaluate(o,s,{batchSize:null==r.validationBatchSize?yN:r.validationBatchSize,verbose:0}));case 85:for(P=0;P<t.metricsNames.length;++P)b["val_".concat(t.metricsNames[P])]=L[P];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,m.onEpochEnd(g,b);case 93:if(g++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,m.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),SN.apply(this,arguments)}function EN(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function TN(e){return"function"===typeof e.iterator}function CN(e,t,n){return _N.apply(this,arguments)}function _N(){return _N=Jn(Kn().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,o=[],!(r.verbose>0)){e.next=6;break}throw new d_("Verbose mode is not implemented yet.");case 6:if(Ed(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),"function"!==typeof n.next){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,u=0,l=0,c=Kn().mark((function e(){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,o=Oy((function(){if(n.value){var e=bN(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),c=Oy((function(){return i(s)}));if(Dy(s),0===l)for(var d=0;d<c.length;++d)o.push(jy(0));for(var h=s[0].shape[0],p=function(e){var t=c[e],n=o[e];o[e]=Oy((function(){return Vy(o[e],bb(h,t))})),l>0&&Dy(n)},f=0;f<c.length;++f)p(f);Dy(c),u+=h,++l}return o})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(l<r.batches)){e.next=25;break}return e.delegateYield(c(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(d=0;d<o.length;++d)h=o[d],o[d]=ex(o[d],u),Dy(h);return e.abrupt("return",v_(o));case 27:case"end":return e.stop()}}),e)}))),_N.apply(this,arguments)}function MN(e){Ed(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function IN(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return dM(e,t,n-t)})):dM(e,t,n-t)}function NN(e,t){return Oy((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return NN(e,t)})):bM(e,"int32"===t.dtype?t:Vg(t,"int32"))}))}function AN(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function RN(e,t,n,r,a,i,o,s,u,l,c,d,h,p,f){return ON.apply(this,arguments)}function ON(){return ON=Jn(Kn().mark((function e(t,n,r,a,i,o,s,u,l,c,d,h,p,f,m){var v,g,y,b,x,w,k,S;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==i&&(i=32),null==o&&(o=1),null==d&&(d=!0),null==p&&(p=0),v=!1,null!=l&&null!=c&&(v=!0),null==m){e.next=10;break}if(v=!0,null!=f){e.next=10;break}throw new c_("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(g=t.checkNumSamples(r,i,f,"steps_per_epoch"))&&(y=uM(0,g)),null==s&&(s=1),b=TI(u,s,o,p,g,f,i,v,h),x=b.callbackList,w=b.history,x.setModel(t),t.history=w,e.next=18,x.onTrainBegin();case 18:t.stopTraining_=!1,k=Kn().mark((function e(){var o,s,u,h,p;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.onEpochBegin(S);case 2:if(o={},null==f){e.next=7;break}throw new d_("stepsPerEpoch mode is not implemented yet.");case 7:if("batch"!==d){e.next=11;break}throw new d_("batch shuffling is not implemneted yet");case 11:d&&bd(y);case 12:s=mk(y),u=AN(g,i),h=Kn().mark((function e(d){var h;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h={},e.next=3,x.onBatchBegin(d,h);case 3:return Oy((function(){var e=u[d][0],p=u[d][1],f=dM(s,e,p-e);h.batch=d,h.size=p-e;for(var m=NN(r,f),g=n(m),y=0;y<a.length;++y){var b=a[y],x=g[y];h[b]=x,Ly(x)}if(d===u.length-1&&v)for(var w=t.testLoop(l,c,i),k=0;k<a.length;++k){var S=a[k],E=w[k];Ly(E),o["val_"+S]=E}})),e.next=6,x.onBatchEnd(d,h);case 6:if(gI(h),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),p=0;case 16:if(!(p<u.length)){e.next=24;break}return e.delegateYield(h(p),"t0",18);case 18:if("break"!==e.t0){e.next=21;break}return e.abrupt("break",24);case 21:++p,e.next=16;break;case 24:s.dispose();case 25:return e.next=27,x.onEpochEnd(S,o);case 27:if(!t.stopTraining_){e.next=29;break}return e.abrupt("return","break");case 29:case"end":return e.stop()}}),e)})),S=p;case 21:if(!(S<o)){e.next=29;break}return e.delegateYield(k(),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++S,e.next=21;break;case 29:return e.next=31,x.onTrainEnd();case 31:return e.next=33,t.history.syncData();case 33:return e.abrupt("return",t.history);case 34:case"end":return e.stop()}}),e)}))),ON.apply(this,arguments)}function DN(e,t,n){return LN.apply(this,arguments)}function LN(){return LN=Jn(Kn().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,v,g,y,b,x,w,k,S,E,T,C,_,M=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=M.length>3&&void 0!==M[3]?M[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,MN(f=null==a.batchSize?32:a.batchSize),!1,e.next=10,t.standardizeUserData(n,r,a.sampleWeight,a.classWeight,false,f);case 10:if(m=e.sent,i=m[0],o=m[1],p=m[2],v=!1,!(null!=a.validationData&&a.validationData.length>0)){e.next=36;break}if(v=!0,2!==a.validationData.length){e.next=22;break}l=a.validationData[0],c=a.validationData[1],e.next=27;break;case 22:if(3!==a.validationData.length){e.next=26;break}throw new d_("validationData including sample weights is not supported yet.");case 26:throw new c_("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(a.validationData," is invalid."));case 27:return!0,e.next=30,t.standardizeUserData(l,c,null,null,true,f);case 30:y=e.sent,d=y[0],h=y[1],g=d.concat(h),e.next=37;break;case 36:null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1?(v=!0,b=Math.floor(i[0].shape[0]*(1-a.validationSplit)),x=i[0].shape[0],d=IN(i,b,x),s=i,i=IN(i,0,b),h=IN(o,b,x),u=o,o=IN(o,0,b),g=d.concat(h)):null!=a.validationSteps&&(v=!0);case 37:return w=i.concat(o).concat(p),t.checkTrainableWeightsConsistency(),k=t.makeTrainFunction(),S=t.getDedupedMetricsNames(),v?(t.makeTestFunction(),E=t.testFunction,T=S.slice().concat(S.map((function(e){return"val_"+e})))):(E=null,g=[],T=S.slice()),C=SI(a.callbacks,a.yieldEvery),e.next=45,RN(t,k,w,S,f,a.epochs,a.verbose,C,E,g,a.shuffle,T,a.initialEpoch,null,null);case 45:return _=e.sent,e.abrupt("return",_);case 47:return e.prev=47,t.isTraining=!1,FN(i,n),FN(o,r),FN(s,n),FN(u,r),FN(d,l),FN(h,c),null!=p&&Dy(p),e.finish(47);case 57:case"end":return e.stop()}}),e,null,[[4,,47,57]])}))),LN.apply(this,arguments)}function PN(e){var t=[];e instanceof tv&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(cM(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function FN(e,t){if(null!=e){var n=[];if(t instanceof tv)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof tv)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function jN(e){return Array.isArray(e)}function zN(e){return!function(e){return e instanceof tv}(e)&&!jN(e)}function BN(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(jN(e)&&e.length>0)o=!0;else if(zN(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new c_("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(zN(e)){r=[];var u,l=G(t);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(null==e[c])throw new c_('No data provided for "'.concat(c,'". Need data for each key in: ')+"".concat(t));r.push(e[c])}}catch(sde){l.e(sde)}finally{l.f()}}else if(jN(e)){if(e.length!==t.length)throw new c_("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new c_("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=PN(r),null!=n)for(var d=0;d<t.length;++d)if(null!=n[d]){var h=r[d];if(h.shape.length!==n[d].length)throw new c_("Error when checking ".concat(i,": expected ").concat(t[d]," ")+"to have ".concat(n[d].length," dimension(s). but got array with ")+"shape ".concat(h.shape));for(var p=0;p<n[d].length;++p)if(0!==p||a){var f=h.shape[p],m=n[d][p];if(null!=m&&m>=0&&f!==m)throw new c_("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[d].slice(1,n[d].length),"] ")+"(i.e.,tensor shape [*,".concat(n[d].slice(1,n[d].length),"])")+" but the ".concat(i," received an input with ").concat(h.shape[0])+" examples, each with shape [".concat(h.shape.slice(1,h.shape.length),"]")+" (tensor shape [".concat(h.shape,"])"))}}return r}function UN(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new c_("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new c_("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new c_("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(0!==u||a){var l=s.shape[u],c=n[o][u];if(null!=c&&c!==l)throw new c_("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var WN=function(e){A(r,e);var n=F(r);function r(e){var t;return M(this,r),(t=n.call(this,e)).isTraining=!1,t}return(0,I.Z)(r,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new c_("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");QI(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return fE.adagrad(.01)},Adadelta:function(){return fE.adadelta(1,.95,s_())},Adam:function(){return fE.adam(.001,.9,.999,s_())},Adamax:function(){return fE.adamax(.002,.9,.999,s_(),0)},RMSProp:function(){return fE.rmsprop(.001,.9,0,s_())},SGD:function(){return fE.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new c_("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof zy))throw new c_("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new c_("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return jI(e)}))}else{var a=jI(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var i in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(i))throw new c_('Unknown entry in loss dictionary: "'.concat(i,'". ')+"Only expected the following keys: ".concat(this.outputNames));var o,s=G(this.outputNames);try{for(s.s();!(o=s.n()).done;){var u=o.value;null==e.loss[u]&&console.warn('Output "'.concat(u,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(u," during training")),n.push(jI(e.loss[u]))}}catch(sde){s.e(sde)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var l=0;l<this.outputs.length;++l){var c=this.internalOutputShapes[l],d=this.outputNames[l];this.feedOutputNames.push(d),this.feedOutputShapes.push(c),this.feedLossFns.push(this.lossFunctions[l])}var h=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],$_("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===h.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var p=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=G(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(sde){i.e(sde)}finally{i.f()}return a}(e.metrics,this.outputNames);$_("metric",(function(){for(var e=function(e){if(-1!==h.indexOf(e))return"continue";!function(n){var r,a,i,o,s=G(n);try{var u=function(){var n,s=o.value;if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){var u,l=t.internalOutputShapes[e];1===l[l.length-1]||t.lossFunctions[e]===DI?-1!==["accuracy","acc"].indexOf(s)?a=zI:-1!==["crossentropy","ce"].indexOf(s)&&(a=WI):t.lossFunctions[e]===OI?-1!==["accuracy","acc"].indexOf(s)?a=VI:-1!==["crossentropy","ce"].indexOf(s)&&(a=HI):-1!==["accuracy","acc"].indexOf(s)?a=BI:-1!==["crossentropy","ce"].indexOf(s)&&(a=ZI),-1!==["accuracy","acc"].indexOf(s)?u="acc":-1!==["crossentropy","ce"].indexOf(s)&&(u="ce"),i=a,r=""+u}else{var c=function(e){if("string"===typeof e&&e in GI)return GI[e];if("string"!==typeof e&&null!=e)return e;throw new c_("Unknown metric ".concat(e))}(s);i=c,r=""+qI(s)}$_(r,(function(){n=i})),function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])}(e,r,n)};for(s.s();!(o=s.n()).done;)u()}catch(sde){s.e(sde)}finally{s.f()}}(p[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;MN(r);var a=this.standardizeUserDataXY(e,t,!0,r);try{var i=a[0].concat(a[1]);this.makeTestFunction();var o=this.testFunction;return v_(this.testLoop(o,i,r,n.verbose,n.steps))}finally{FN(a[0],e),FN(a[1],t)}}},{key:"evaluateDataset",value:function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",CN(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new c_("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new c_("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new c_("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new iN;if(e instanceof tv&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new c_("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var s,u=G(this.inputs);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=e[l.name];if(null==c)throw new c_("No value is provided for the model's input ".concat(l.name));i.add(l,c)}}catch(sde){u.e(sde)}finally{u.f()}}var d=uN(a,i);return n?d:d[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=p_(null,e.length),r=e.length,a=G(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var l=s.indexOf(e[u]);if(-1!==l&&(n[u]=o[l],r--),0===r)break}if(0===r)break}}catch(sde){a.e(sde)}finally{a.f()}if(r>0){var c=[];throw n.forEach((function(t,n){null==t&&c.push(e[n])})),new c_("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(c)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Oy((function(){var a=t.checkNumSamples(e);if(r)throw new d_("Verbose predictLoop() is not implemented yet.");for(var i=AN(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){var r=Oy((function(){var r=i[n][0],a=i[n][1],o=IN(e,r,a),s=[];if(Array.isArray(o))for(var u=0;u<o.length;++u)s.push({key:t.inputs[u],value:o[u]});else s.push({key:t.inputs[0],value:o});var l=new iN(s);return uN(t.outputs,l)}));r.forEach((function(e,t){return o[t].push(e)}))},u=0;u<i.length;++u)s(u);return v_(o.map((function(e){return gb(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=PN(e);UN(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return MN(r),this.predictLoop(n,r)}finally{FN(n,e)}}},{key:"predictOnBatch",value:function(e){UN(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new l_("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a];this.feedLossFns[a]===OI?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(function(e,t,n){var r=T_(e.map((function(e){return e.shape[0]})));r.sort();var a=T_(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new c_("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new c_("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!Id(r,a))throw new c_("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}(e=BN(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=BN(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){for(var r=[MI,DI,RI],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===RI&&1===i.shape[i.shape.length-1])throw new c_("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var d=u[c],h=l[c];if(null!=h&&d!==h)throw new c_("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new c_("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=Jn(Kn().mark((function e(t,n,r,a){var i,o,s,u,l,c,d,h,p,f=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(f.length>4&&void 0!==f[4])||f[4],o=f.length>5?f[5]:void 0,s=this.standardizeUserDataXY(t,n,i,o),u=(0,U.Z)(s,2),l=u[0],c=u[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(d=null,null==a){e.next=19;break}h=fN(a,this.outputNames),d=[],p=0;case 10:if(!(p<h.length)){e.next=19;break}return e.t0=d,e.next=14,mN(c[p],null,h[p]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++p,e.next=10;break;case 19:return e.abrupt("return",[l,c,d]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return Oy((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new d_("Verbose mode is not implemented yet.");if(null!=i)throw new d_("steps mode in testLoop() is not implemented yet");for(var u=AN(o,n),l=mk(uM(0,o)),c=0;c<u.length;++c){var d=u[c][0],h=u[c][1],p=dM(l,d,h-d),f=NN(t,p),m=e(f);if(0===c)for(var v=0;v<m.length;++v)s.push(jy(0));for(var g=0;g<m.length;++g){var y=m[g];s[g]=Vy(s[g],bb(h-d,y))}}for(var b=0;b<s.length;++b)s[b]=ex(s[b],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(m_(e,r)>1){var i=m_(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()})),u=e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,l=new iN(t),c=uN(e.outputs,l,{training:!0}),d=0;d<e.lossFunctions.length;++d){var h=(0,e.lossFunctions[d])(a[d],c[d]);null!=i[d]&&(h=gN(h,i[d]));var p=$x(h);n.push(p),u=0===d?h:Vy(u,h)}for(var f=0;f<e.metricsTensors.length;++f){var m=void 0;if(e.outputs.length>1&&f<e.outputs.length)m=n[f];else{var v=e.metricsTensors[f][0],g=e.metricsTensors[f][1];m=$x(v(a[g],c[g]))}Ly(m),o.push(m)}return u=$x(u),e.calculateLosses().forEach((function(e){u=Vy(u,e)})),u}),!0,s);return[u].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return Oy((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var u=new iN(o),l=uN(e.outputs,u),c=0;c<e.lossFunctions.length;++c){var d=e.lossFunctions[c],h=$x(d(i[c],l[c]));n=0===c?h:Vy(n,h),r.push(n)}for(var p=0;p<e.metricsTensors.length;++p){var f=e.metricsTensors[p][0],m=e.metricsTensors[p][1],v=$x(f(i[m],l[m]));r.push(v)}return r}))}}},{key:"fit",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",DN(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kN(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a,i,o,s,u,l,c,d,h;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction(),s=o(a.concat(i)),u=[],l=G(s),e.prev=9,l.s();case 11:if((c=l.n()).done){e.next=19;break}return d=c.value,e.next=15,d.data();case 15:h=e.sent,u.push(h[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),l.e(e.t0);case 24:return e.prev=24,l.f(),e.finish(24);case 27:return Dy(s),FN(r[0],t),FN(r[1],n),e.abrupt("return",v_(u));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=pl(R(r.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=Ry().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-Ry().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=y_(this.loss);else if(Array.isArray(this.loss)){var t,n=G(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(sde){n.e(sde)}finally{n.f()}e=this.loss.map((function(e){return y_(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!==typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=y_(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[y_(qI(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return y_(qI(e))}));var e={};for(var t in this.metrics)e[t]=y_(qI(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=CI(nN(e.optimizer_config));if("string"===typeof e.loss)t=b_(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return b_(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=b_(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return b_(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=b_(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var e=Jn(Kn().mark((function e(n,r){var a,i,o,s,u,l,c,d,h;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof n){e.next=9;break}if(0!==(a=ng(n)).length){e.next=6;break}throw new c_("Cannot find any save handlers for URL '".concat(n,"'"));case 6:if(!(a.length>1)){e.next=8;break}throw new c_("Found more than one (".concat(a.length,") save handlers for ")+"URL '".concat(n,"'"));case 8:n=a[0];case 9:if(null!=n.save){e.next=11;break}throw new c_("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.next=13,jv(this.getNamedWeights(r));case 13:if(i=e.sent,!1,null,o=this.toJSON(null,false),s={modelTopology:o,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(aN),convertedBy:null},!(null!=r&&r.includeOptimizer)||null==this.optimizer){e.next=34;break}return s.trainingConfig=this.getTrainingConfig(),l="optimizer",e.t0=t,e.next=25,this.optimizer.getWeights();case 25:return e.t1=e.sent,e.t2=l,e.next=29,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 29:c=e.sent,d=c.data,h=c.specs,(u=i.specs).push.apply(u,(0,_.Z)(h)),i.data=Gv([i.data,d]);case 34:return null!=this.userDefinedMetadata&&(!0,YI(this.userDefinedMetadata,this.name,true),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=i.data,s.weightSpecs=i.specs,e.abrupt("return",n.save(s));case 38:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){YI(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),r}(hN);WN.className="Model",Ny(WN);var VN=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n)}(WN);VN.className="Functional",Ny(VN);var ZN=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:KM("sequential_"),null!=e.layers){var a,i=G(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(sde){i.e(sde)}finally{i.f()}}return r}return(0,I.Z)(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new c_("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof WN;if(r){if(1!==(t=e).outputs.length)throw new c_("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new c_("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new c_("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new c_("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new fI({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new c_("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new c_("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=hI(this.outputs[0])}this.inboundNodes=[],new lI({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:p_(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(eI(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new WN({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),pl(R(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),pl(R(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new l_("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new l_("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new l_("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new l_("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new c_("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new c_("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=G(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(sde){n.e(sde)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new c_("Legacy serialization format not supported yet.");r=t}else Ed(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof n))throw new d_("Sequential.fromConfig called on non-Sequential input: ".concat(o));var s,u=G(r);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=CI(l,undefined,a);a&&c.setFastWeightInitDuringBuild(!0),o.add(c)}}catch(sde){u.e(sde)}finally{u.f()}return o}}]),n}(WN);ZN.className="Sequential",Ny(ZN);var HN=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"getConfig",value:function(){return{}}}]),n}(My),GN=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new d_("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return sx(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}]),n}(HN);GN.className="elu",Ny(GN);var qN=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){return Hw(e)}}]),n}(HN);qN.className="selu",Ny(qN);var XN=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){return Pw(e)}}]),n}(HN);XN.className="relu",Ny(XN);var YN=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){return Oy((function(){return aw(6,Pw(e))}))}}]),n}(HN);YN.className="relu6",Ny(YN);var KN=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){return e}}]),n}(HN);KN.className="linear",Ny(KN);var QN=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){return xb(e)}}]),n}(HN);QN.className="sigmoid",Ny(QN);var JN=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){return function(e){return Oy((function(){var t=Vy(.5,bb(.2,e));return Ob(t,0,1)}))}(e)}}]),n}(HN);JN.className="hardSigmoid",Ny(JN);var $N=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){return Ax(e)}}]),n}(HN);$N.className="softplus",Ny($N);var eA=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){return function(e){return Oy((function(){return ex(e,Vy(By(e),1))}))}(e)}}]),n}(HN);eA.className="softsign",Ny(eA);var tA=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){return kb(e)}}]),n}(HN);tA.className="tanh",Ny(tA);var nA=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){return nk(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}]),n}(HN);nA.className="softmax",Ny(nA);var rA=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){return Px(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}]),n}(HN);rA.className="logSoftmax",Ny(rA);var aA=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Oy((function(){return bb(xb(bb(e,t)),e)}))}}]),n}(HN);aA.className="swish",Ny(aA);var iA=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e){return Oy((function(){return bb(e,kb(Ax(e)))}))}}]),n}(HN);function oA(e){return e.getClassName()}function sA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return S_(e,Iy.getMap().classNameMap,t,"activation")}function uA(e){if(null==e){var t={className:"linear",config:{}};return sA(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},sA(n)}return e instanceof HN?e:sA(e)}function lA(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}iA.className="mish",Ny(iA);var cA=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n)}(My),dA=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this),lA(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return(0,I.Z)(n,[{key:"apply",value:function(e){var t=this;return Oy((function(){var n=ew([1]);return t.hasL1&&(n=Vy(n,Lx(bb(t.l1,By(e))))),t.hasL2&&(n=Vy(n,Lx(bb(t.l2,xM(e))))),fb(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(cA);dA.className="L1L2",Ny(dA);var hA={l1l2:"L1L2"};function pA(e){return w_(e)}function fA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return S_(e,Iy.getMap().classNameMap,t,"regularizer")}function mA(e){return null==e?null:"string"===typeof e?fA({className:e in hA?hA[e]:e,config:{}}):e instanceof cA?e:fA(e)}var vA=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return(0,I.Z)(n,[{key:"call",value:function(e,t){e=$M(e);var n=Pw(e);return null!=this.maxValue&&(n=Ob(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);vA.className="ReLU",Ny(vA);var gA=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,I.Z)(n,[{key:"call",value:function(e,t){var n=$M(e);return Sx(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);gA.className="LeakyReLU",Ny(gA);var yA=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=GM(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=mA(e.alphaRegularizer),r.alphaConstraint=U_(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new c_("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return(0,I.Z)(n,[{key:"build",value:function(e){var t=(e=eI(e)).slice(1);if(null!=this.sharedAxes){var n,r=G(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(sde){r.e(sde)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new oI({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=$M(e),Sw(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:HM(this.alphaInitializer),alphaRegularizer:pA(this.alphaRegularizer),alphaConstraint:z_(this.alphaConstraint),sharedAxes:this.sharedAxes},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);yA.className="PReLU",Ny(yA);var bA=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new d_("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return(0,I.Z)(n,[{key:"call",value:function(e,t){var n=$M(e);return sx(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);bA.className="ELU",Ny(bA);var xA=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return(0,I.Z)(n,[{key:"call",value:function(e,t){var n=$M(e);return bb(n,Vg(gx(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);xA.className="ThresholdedReLU",Ny(xA);var wA=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new nA).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return(0,I.Z)(n,[{key:"call",value:function(e,t){var n=$M(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);function kA(e,t,n){if("number"===typeof e)return p_(e,t);if(e.length!==t)throw new c_("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if(!aM(a))throw new c_("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e}function SA(e,t,n,r){var a;return null==e?e:(a="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((a+r-1)/r))}function EA(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+sM([n-t,0]);else{if("same"!==r)throw new c_("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function TA(e,t){return Oy((function(){return X_(t),"channelsFirst"===t?Ak(e,[0,2,3,1]):e}))}function CA(e,t){return Oy((function(){return X_(t),"channelsFirst"===t?Ak(e,[0,2,3,4,1]):e}))}function _A(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Oy((function(){if(null==i&&(i="channelsLast"),X_(i),3!==e.shape.length)throw new c_("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new c_("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new c_("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=Ak(e,[0,2,1])),"causal"===a)throw new d_("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=zb(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=kM(s,n)),s}))}function MA(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Oy((function(){if(null==i&&(i="channelsLast"),X_(i),3!==e.rank&&4!==e.rank)throw new c_("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new c_("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=TA(e,i);if("causal"===a)throw new d_("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=Kk({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=Ak(u,[0,3,1,2])),u}))}function IA(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return Oy((function(){if(null==i&&(i="channelsLast"),X_(i),4!==e.rank&&5!==e.rank)throw new c_("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new c_("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=CA(e,i);if("causal"===a)throw new d_("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=Wb(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=kM(s,n)),"channelsFirst"===i&&(s=Ak(s,[0,4,1,2,3])),s}))}wA.className="Softmax",Ny(wA);var NA=function(e){A(n,e);var t=F(n);function n(e,r){var a;if(M(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,I_(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new d_("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=kA(r.kernelSize,e,"kernelSize"),a.strides=kA(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,Y_(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,X_(a.dataFormat),a.activation=uA(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=GM(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=U_(r.biasConstraint),a.biasRegularizer=mA(r.biasRegularizer),a.activityRegularizer=mA(r.activityRegularizer),a.dilationRate=kA(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new c_("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new c_("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new c_("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return(0,I.Z)(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:oA(this.activation),useBias:this.useBias,biasInitializer:HM(this.biasInitializer),biasRegularizer:pA(this.biasRegularizer),activityRegularizer:pA(this.activityRegularizer),biasConstraint:z_(this.biasConstraint)},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(f_("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!M_(e.kernelSize,"number",1,3))throw new c_("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(dI),AA=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,I_(a.filters,"filters"),a.kernelInitializer=GM(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=U_(r.kernelConstraint),a.kernelRegularizer=mA(r.kernelRegularizer),a}return(0,I.Z)(n,[{key:"build",value:function(e){e=eI(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new c_("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(0,Pt.Z)({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Oy((function(){var t;e=$M(e);var r=null==n.bias?null:n.bias.read(),a=A_(n.activation.getClassName());if(null!=a&&2===n.rank)t=MA(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=_A(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=MA(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new d_("convolutions greater than 3D are not implemented yet.");t=IA(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=eI(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=SA(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:HM(this.kernelInitializer),kernelRegularizer:pA(this.kernelRegularizer),kernelConstraint:z_(this.kernelConstraint)},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new c_("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(NA),RA=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return(0,I.Z)(n,[{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!M_(e.kernelSize,"number",1,2))throw new c_("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(AA);RA.className="Conv2D",Ny(RA);var OA=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return(0,I.Z)(n,[{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new c_("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(AA);OA.className="Conv3D",Ny(OA);var DA=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,e)).inputSpec=[new oI({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new c_("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,I.Z)(n,[{key:"build",value:function(e){if(4!==(e=eI(e)).length)throw new c_("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new c_("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new oI({ndim:4,axes:(0,Pt.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Oy((function(){var t=$M(e);if(4!==t.shape.length)throw new c_("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],u=i[a],l=n.kernelSize[0],c=n.kernelSize[1],d=n.strides[0],h=n.strides[1],p=[o,EA(s,d,l,n.padding),EA(u,h,c,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=Ak(t,[0,2,3,1]));var f=Ub(t,n.kernel.read(),p,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(f=Ak(f,[0,3,1,2])),null!=n.bias&&(f=kM(f,n.bias.read(),n.dataFormat)),null!=n.activation&&(f=n.activation.apply(f)),f}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=eI(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=EA(a[n],s,i,this.padding),a[r]=EA(a[r],u,o,this.padding),a}},{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(RA);DA.className="Conv2DTranspose",Ny(DA);var LA=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,e)).inputSpec=[new oI({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new c_("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return(0,I.Z)(n,[{key:"build",value:function(e){if(5!==(e=eI(e)).length)throw new c_("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new c_("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new oI({ndim:5,axes:(0,Pt.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Oy((function(){var t=$M(e);if(5!==t.shape.length)throw new c_("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i,o=t.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,r=3,a=4):(i=1,r=2,a=3);var u=o[i],l=o[r],c=o[a],d=n.kernelSize[0],h=n.kernelSize[1],p=n.kernelSize[2],f=n.strides[0],m=n.strides[1],v=n.strides[2],g=[s,EA(u,f,d,n.padding),EA(l,m,h,n.padding),EA(c,v,p,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=Ak(t,[0,2,3,4,1]));var y=Zb(t,n.kernel.read(),g,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=Ak(y,[0,4,1,2,3])),null!==n.bias&&(y=kM(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,i=(e=eI(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var o=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],l=this.strides[0],c=this.strides[1],d=this.strides[2];return i[t]=this.filters,i[n]=EA(i[n],l,o,this.padding),i[r]=EA(i[r],c,s,this.padding),i[a]=EA(i[a],d,u,this.padding),i}},{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(OA);LA.className="Conv3DTranspose",Ny(LA);var PA=function(e){A(n,e);var t=F(n);function n(e,r){var a;if(M(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new c_("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new c_("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new c_("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=GM(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=mA(r.depthwiseRegularizer),a.depthwiseConstraint=U_(r.depthwiseConstraint),a.pointwiseInitializer=GM(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=mA(r.pointwiseRegularizer),a.pointwiseConstraint=U_(r.pointwiseConstraint),a}return(0,I.Z)(n,[{key:"build",value:function(e){if((e=eI(e)).length<this.rank+2)throw new c_("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new c_("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new oI({ndim:this.rank+2,axes:(0,Pt.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Oy((function(){var t;if(e=$M(e),1===n.rank)throw new d_("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=Ak(e,[0,2,3,1])),t=Gw(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=kM(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=Ak(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=HM(this.depthwiseInitializer),e.pointwiseInitializer=HM(this.pointwiseInitializer),e.depthwiseRegularizer=pA(this.depthwiseRegularizer),e.pointwiseRegularizer=pA(this.pointwiseRegularizer),e.depthwiseConstraint=z_(this.depthwiseConstraint),e.pointwiseConstraint=z_(this.pointwiseConstraint),e}}]),n}(AA);PA.className="SeparableConv";var FA=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,2,e)}return(0,I.Z)(n)}(PA);FA.className="SeparableConv2D",Ny(FA);var jA=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return(0,I.Z)(n,[{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!M_(e.kernelSize,"number",1,1))throw new c_("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(AA);jA.className="Conv1D",Ny(jA);var zA=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return(0,I.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return Oy((function(){if(e=$M(e),"channelsLast"===n.dataFormat){var t=pM(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return pM(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=pM(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return pM(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);zA.className="Cropping2D",Ny(zA);var BA=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,X_(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){__(V_,"InterpolationFormat",e)}(r.interpolation),r}return(0,I.Z)(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return Oy((function(){var t=$M(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=Ak(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?tE.resizeNearestNeighbor(t,[a,i]):tE.resizeBilinear(t,[a,i]);return Ak(o,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?tE.resizeNearestNeighbor(t,[s,u]):tE.resizeBilinear(t,[s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);BA.className="UpSampling2D",Ny(BA);var UA=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=GM(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=U_(e.depthwiseConstraint),r.depthwiseRegularizer=mA(e.depthwiseRegularizer),r}return(0,I.Z)(n,[{key:"build",value:function(e){if((e=eI(e)).length<4)throw new c_("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new c_("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Oy((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return Oy((function(){null==a&&(a="channelsLast"),X_(a);var o=TA(e,a);if(4!==e.rank)throw new c_("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new c_("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=Kb(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=Ak(o,[0,3,1,2])),o}))}(e=$M(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=kM(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=eI(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=SA(t,this.kernelSize[0],this.padding,this.strides[0]),i=SA(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=HM(this.depthwiseInitializer),e.depthwiseRegularizer=pA(this.depthwiseRegularizer),e.depthwiseConstraint=z_(this.depthwiseRegularizer),e}}]),n}(NA);function WA(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new c_("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function VA(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return Oy((function(){var u=t.shape.length;if(u<3)throw new c_("Input should be at least 3D, but is ".concat(u,"D."));var l=[1,0].concat(uM(2,u));if(t=Ak(t,l),null!=i)throw new d_("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=Vg(Vg(a,"bool"),"float32")).rank===u-1&&(a=cx(a,-1)),a=Ak(a,l)),r&&(t=jw(t,0),null!=a&&(a=jw(a,0)));var c,d,h=[],p=n,f=t.shape[0],m=Ek(t);null!=a&&(d=Ek(a));for(var v,g=function(t){var n=m[t],r=Oy((function(){return e(n,p)}));if(null==a)c=r[0],p=r[1];else{var i=Oy((function(){var e=d[t],n=Dx(pw(e),e),a=Vy(bb(r[0],e),bb(p[0],n)),i=p.map((function(t,a){return Vy(bb(r[1][a],e),bb(t,n))}));return{output:a,newStates:i}}));c=i.output,p=i.newStates}s&&h.push(c)},y=0;y<f;++y)g(y);if(s){v=dk(h,1)}return[c,v,p]}))}UA.className="DepthwiseConv2D",Ny(UA);var ZA=function(e){A(n,e);var t=F(n);function n(e){var r,a;if(M(this,n),r=t.call(this,e),null==e.cell)throw new c_("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new JA({cells:e.cell}):e.cell).stateSize)throw new c_("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new oI({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return(0,I.Z)(n,[{key:"getStates",value:function(){return null==this.states_?uM(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){QM(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=G(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(sde){o.e(sde)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return Oy((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new d_("Constants support is not implemented in RNN yet.");QM(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new oI({shape:[t,null].concat((0,_.Z)(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Id(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new c_("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new oI({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Oy((function(){if(!t.stateful)throw new u_("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new c_("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return ew([r,e])})):t.states_=[ew([r,t.cell.stateSize])];else if(null==e)Dy(t.states_),null!=t.keptStates&&(Dy(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return ew([r,e])})):t.states_[0]=ew([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new c_("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):Dy(t.states_);for(var a=0;a<t.states_.length;++a){var i=e[a],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,o];if(!Id(i.shape,s))throw new c_("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(i.shape));t.states_[a]=i}}t.states_=t.states_.map((function(e){return Ly(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=WA(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var u,l=G(r);try{for(l.s();!(u=l.n()).done;){var c=u.value;this.stateSpec.push(new oI({shape:c.shape}))}}catch(sde){l.e(sde)}finally{l.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof sI){var d=[e].concat(o),h=this.inputSpec.concat(s),p=this.inputSpec;this.inputSpec=h;var f=pl(R(n.prototype),"apply",this).call(this,d,t);return this.inputSpec=p,f}return pl(R(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Oy((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=$M(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new c_("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=VA((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),l=u[0],c=u[1],d=u[2];n.stateful&&n.resetStates(d,a);var h=n.returnSequences?c:l;return n.returnState?[h].concat(d):h}))}},{key:"getInitialState",value:function(e){var t=this;return Oy((function(){var n=ew(e.shape);return n=cM(n=Lx(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?vM(n,[1,e]):n})):t.cell.stateSize>1?[vM(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){pl(R(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=CI(t.cell,n);return new e(Object.assign(t,{cell:r}))}}]),n}(dI);ZA.className="RNN",Ny(ZA);var HA=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n)}(dI),GA=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,I_(r.units,"units"),r.activation=uA(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=GM(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=GM(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=GM(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=mA(e.kernelRegularizer),r.recurrentRegularizer=mA(e.recurrentRegularizer),r.biasRegularizer=mA(e.biasRegularizer),r.kernelConstraint=U_(e.kernelConstraint),r.recurrentConstraint=U_(e.recurrentConstraint),r.biasConstraint=U_(e.biasConstraint),r.dropout=oM([1,sM([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=oM([1,sM([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,I.Z)(n,[{key:"build",value:function(e){e=eI(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Oy((function(){if(2!==e.length)throw new c_("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=$A({ones:function(){return pw(e)},rate:n.dropout,training:i,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=$A({ones:function(){return pw(r)},rate:n.recurrentDropout,training:i,dropoutFunc:n.dropoutFunc}));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=yM(null!=o?bb(e,o):e,n.kernel.read()),null!=n.bias&&(a=kM(a,n.bias.read())),null!=s&&(r=bb(r,s));var u=Vy(a,yM(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:oA(this.activation),useBias:this.useBias,kernelInitializer:HM(this.kernelInitializer),recurrentInitializer:HM(this.recurrentInitializer),biasInitializer:HM(this.biasInitializer),kernelRegularizer:pA(this.kernelRegularizer),recurrentRegularizer:pA(this.recurrentRegularizer),biasRegularizer:pA(this.biasRegularizer),activityRegularizer:pA(this.activityRegularizer),kernelConstraint:z_(this.kernelConstraint),recurrentConstraint:z_(this.recurrentConstraint),biasConstraint:z_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}]),n}(HA);GA.className="SimpleRNNCell",Ny(GA);var qA=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),e.cell=new GA(e),t.call(this,e)}return(0,I.Z)(n,[{key:"call",value:function(e,t){var r=this;return Oy((function(){null!=r.cell.dropoutMask&&(Dy(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Dy(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return pl(R(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(ZA);qA.className="SimpleRNN",Ny(qA);var XA=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new c_("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,I_(r.units,"units"),r.activation=uA(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=uA(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=GM(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=GM(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=GM(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=mA(e.kernelRegularizer),r.recurrentRegularizer=mA(e.recurrentRegularizer),r.biasRegularizer=mA(e.biasRegularizer),r.kernelConstraint=U_(e.kernelConstraint),r.recurrentConstraint=U_(e.recurrentConstraint),r.biasConstraint=U_(e.biasConstraint),r.dropout=oM([1,sM([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=oM([1,sM([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,I.Z)(n,[{key:"build",value:function(e){var t=(e=eI(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Oy((function(){if(2!==e.length)throw new c_("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=$A({ones:function(){return pw(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=$A({ones:function(){return pw(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var i,o,s,u=n.dropoutMask,l=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=bb(e,u[0]));var c=yM(e,n.kernel.read());n.useBias&&(c=kM(c,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=bb(a,l[0]));var d=n.recurrentKernel.read(),h=ok(d,[2*n.units,n.units],d.rank-1),p=(0,U.Z)(h,2),f=p[0],m=p[1],v=yM(a,f),g=ok(c,3,c.rank-1),y=(0,U.Z)(g,3),b=y[0],x=y[1],w=y[2],k=ok(v,2,v.rank-1),S=(0,U.Z)(k,2),E=S[0],T=S[1];i=n.recurrentActivation.apply(Vy(b,E)),o=n.recurrentActivation.apply(Vy(x,T));var C=yM(bb(o,a),m);s=n.activation.apply(Vy(w,C));var _=Vy(bb(i,a),bb(Vy(1,Nx(i)),s));return[_,_]}))}},{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:oA(this.activation),recurrentActivation:oA(this.recurrentActivation),useBias:this.useBias,kernelInitializer:HM(this.kernelInitializer),recurrentInitializer:HM(this.recurrentInitializer),biasInitializer:HM(this.biasInitializer),kernelRegularizer:pA(this.kernelRegularizer),recurrentRegularizer:pA(this.recurrentRegularizer),biasRegularizer:pA(this.biasRegularizer),activityRegularizer:pA(this.activityRegularizer),kernelConstraint:z_(this.kernelConstraint),recurrentConstraint:z_(this.recurrentConstraint),biasConstraint:z_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}]),n}(HA);XA.className="GRUCell",Ny(XA);var YA=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new XA(e),t.call(this,e)}return(0,I.Z)(n,[{key:"call",value:function(e,t){var r=this;return Oy((function(){null!=r.cell.dropoutMask&&(Dy(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Dy(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return pl(R(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(ZA);YA.className="GRU",Ny(YA);var KA=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,I_(r.units,"units"),r.activation=uA(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=uA(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=GM(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=GM(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=GM(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=mA(e.kernelRegularizer),r.recurrentRegularizer=mA(e.recurrentRegularizer),r.biasRegularizer=mA(e.biasRegularizer),r.kernelConstraint=U_(e.kernelConstraint),r.recurrentConstraint=U_(e.recurrentConstraint),r.biasConstraint=U_(e.biasConstraint),r.dropout=oM([1,sM([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=oM([1,sM([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return(0,I.Z)(n,[{key:"build",value:function(e){var t,n,r=(e=eI(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new IM).apply([i]),o=a.apply([2*i]);return mM(mM(n,r),o)}}]),n}(_M),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return Oy((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new c_("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=$A({ones:function(){return pw(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=$A({ones:function(){return pw(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var o,s,u,l,c=n.dropoutMask,d=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=bb(e,c[0]));var h=yM(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=bb(a,d[0])),h=Vy(h,yM(a,n.recurrentKernel.read())),n.useBias&&(h=kM(h,n.bias.read()));var p=ok(h,4,h.rank-1),f=(0,U.Z)(p,4),m=f[0],v=f[1],g=f[2],y=f[3];o=n.recurrentActivation.apply(m),s=n.recurrentActivation.apply(v),u=Vy(bb(s,i),bb(o,n.activation.apply(g))),l=n.recurrentActivation.apply(y);var b=bb(l,n.activation.apply(u));return[b,b,u]}))}},{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:oA(this.activation),recurrentActivation:oA(this.recurrentActivation),useBias:this.useBias,kernelInitializer:HM(this.kernelInitializer),recurrentInitializer:HM(this.recurrentInitializer),biasInitializer:HM(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:pA(this.kernelRegularizer),recurrentRegularizer:pA(this.recurrentRegularizer),biasRegularizer:pA(this.biasRegularizer),activityRegularizer:pA(this.activityRegularizer),kernelConstraint:z_(this.kernelConstraint),recurrentConstraint:z_(this.recurrentConstraint),biasConstraint:z_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}]),n}(HA);KA.className="LSTMCell",Ny(KA);var QA=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new KA(e),t.call(this,e)}return(0,I.Z)(n,[{key:"call",value:function(e,t){var r=this;return Oy((function(){null!=r.cell.dropoutMask&&(Dy(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Dy(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return pl(R(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(ZA);QA.className="LSTM",Ny(QA);var JA=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).cells=e.cells,r}return(0,I.Z)(n,[{key:"stateSize",get:function(){var e,t=[],n=G(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,(0,_.Z)(r.stateSize)):t.push(r.stateSize)}}catch(sde){n.e(sde)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return Oy((function(){var r,a=e.slice(1),i=[],o=G(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(sde){o.e(sde)}finally{o.f()}i.reverse();for(var u,l=[],c=0;c<n.cells.length;++c){var d=n.cells[c];a=i[c],u=0===c?[e[0]].concat(a):[u[0]].concat(a),u=d.call(u,t),l.push(u.slice(1))}a=[];var h,p=G(l.slice().reverse());try{for(p.s();!(h=p.n()).done;){var f,m=h.value;(f=a).push.apply(f,(0,_.Z)(m))}}catch(sde){p.e(sde)}finally{p.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;QM(e)&&(e=e[0]),this.cells.forEach((function(n,r){$_("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign({},e,t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=G(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,_.Z)(r.trainableWeights))}}catch(sde){n.e(sde)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=G(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,_.Z)(r.nonTrainableWeights))}}catch(sde){n.e(sde)}finally{n.f()}if(!this.trainable){var a,i=[],o=G(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,(0,_.Z)(s.trainableWeights))}}catch(sde){o.e(sde)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=G(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,_.Z)(r.weights))}}catch(sde){n.e(sde)}finally{n.f()}return aI(t)}},{key:"setWeights",value:function(e){var t,n=[],r=G(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)n.push([a.weights[s],o[s]])}catch(sde){r.e(sde)}finally{r.f()}iI(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=G(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(CI(o,r))}}catch(sde){i.e(sde)}finally{i.f()}return new e({cells:a})}}]),n}(HA);function $A(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=e.dropoutFunc,u=function(){return null!=s?s(t(),n):SM(t(),n)},l=function(){return EM(u,t,a)};return!o||o<=1?Ly(l().clone()):Array(o).fill(void 0).map(l).map((function(e){return Ly(e.clone())}))}JA.className="StackedRNNCells",Ny(JA);var eR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},tR=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),e.unroll)throw new d_("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new d_("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new oI({ndim:5})],r}return(0,I.Z)(n,[{key:"call",value:function(e,t){var r=this;return Oy((function(){if(null!=r.cell.dropoutMask&&(Dy(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Dy(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new c_("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return pl(R(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat((0,_.Z)(t.slice(2)))),this.returnState&&(t=[t].concat((0,_.Z)(Array(2).fill([e[0]].concat((0,_.Z)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return Oy((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=ew([a[0]].concat((0,_.Z)(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(i):[i]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Oy((function(){if(!t.stateful)throw new u_("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat((0,_.Z)(a.slice(2)));if(null==r[0])throw new c_("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return ew(i)})):t.states_=[ew(i)];else if(null==e)Dy(t.states_),null!=t.keptStates&&(Dy(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return ew(i)})):t.states_[0]=ew(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new c_("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):Dy(t.states_);for(var o=0;o<t.states_.length;++o){var s=e[o],u=i;if(!Id(s.shape,u))throw new c_("State ".concat(o," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(u,", received shape=").concat(s.shape));t.states_[o]=s}}t.states_=t.states_.map((function(e){return Ly(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,u="channelsFirst"===n,l=e[u?3:2],c=e[u?4:3],d=SA(l,a[0],i,o[0],s[0]),h=SA(c,a[1],i,o[1],s[1]);return[].concat((0,_.Z)(e.slice(0,2)),(0,_.Z)(u?[r,d,h]:[d,h,r]))}}]),n}(ZA);tR.className="ConvRNN2D";var nR=function(e){A(n,e);var t=F(n);function n(e){var r;M(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,u=e.dataFormat,l=e.dilationRate;return(r=t.call(this,Object.assign({},e,{units:a}))).filters=a,I_(r.filters,"filters"),r.kernelSize=kA(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return I_(e,"kernelSize")})),r.strides=kA(o||1,2,"strides"),r.strides.forEach((function(e){return I_(e,"strides")})),r.padding=s||"valid",Y_(r.padding),r.dataFormat=u||"channelsLast",X_(r.dataFormat),r.dilationRate=kA(l||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return I_(e,"dilationRate")})),r}return(0,I.Z)(n,[{key:"build",value:function(e){var t;e=eI(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new c_("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;o=new(t=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"apply",value:function(e,t){return fM([s.apply([u]),tw([u]),s.apply([2*u])])}}]),n}(_M),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return Oy((function(){if(3!==e.length)throw new c_("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=$A({ones:function(){return pw(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var s=n.dropoutMask,u=function(e,t,n){return t&&t[n]?bb(t[n],e):e},l=u(a,s,0),c=u(a,s,1),d=u(a,s,2),h=u(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=$A({ones:function(){return pw(i)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var p=n.recurrentDropoutMask,f=u(i,p,0),m=u(i,p,1),v=u(i,p,2),g=u(i,p,3),y=ok(n.kernel.read(),4,3),b=(0,U.Z)(y,4),x=b[0],w=b[1],k=b[2],S=b[3],E=n.useBias?ok(n.bias.read(),4):[null,null,null,null],T=(0,U.Z)(E,4),C=T[0],_=T[1],M=T[2],I=T[3];l=n.inputConv(l,x,C,n.padding),c=n.inputConv(c,w,_,n.padding),d=n.inputConv(d,k,M,n.padding),h=n.inputConv(h,S,I,n.padding);var N=ok(n.recurrentKernel.read(),4,3),A=(0,U.Z)(N,4),R=A[0],O=A[1],D=A[2],L=A[3];f=n.recurrentConv(f,R),m=n.recurrentConv(m,O),v=n.recurrentConv(v,D),g=n.recurrentConv(g,L);var P=n.recurrentActivation.apply(Vy(l,f)),F=n.recurrentActivation.apply(Vy(c,m)),j=Vy(bb(F,o),bb(P,n.activation.apply(Vy(d,v)))),z=bb(n.recurrentActivation.apply(Vy(h,g)),n.activation.apply(j));return[z,z,j]}))}},{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this),t=(e.units,eR(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},t,r)}},{key:"inputConv",value:function(e,t,n,r){var a=jb(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?kM(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return jb(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(KA);nR.className="ConvLSTM2DCell",Ny(nR);var rR=function(e){A(n,e);var t=F(n);function n(e){M(this,n);var r=new nR(e);return t.call(this,Object.assign({},e,{cell:r}))}return(0,I.Z)(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(tR);rR.className="ConvLSTM2D",Ny(rR);var aR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return(0,I.Z)(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return Oy((function(){n.invokeCallHook(e,t);var r=$M(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return EM((function(){return SM(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return pl(R(n.prototype),"dispose",this).call(this)}}]),n}(dI);aR.className="Dropout",Ny(aR);var iR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return(0,I.Z)(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(aR);iR.className="SpatialDropout1D",Ny(iR);var oR=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,I_(r.units,"units"),r.activation=uA(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=GM(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=GM(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=U_(e.kernelConstraint),r.biasConstraint=U_(e.biasConstraint),r.kernelRegularizer=mA(e.kernelRegularizer),r.biasRegularizer=mA(e.biasRegularizer),r.activityRegularizer=mA(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return(0,I.Z)(n,[{key:"build",value:function(e){var t=(e=eI(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(0,Pt.Z)({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=eI(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return Oy((function(){n.invokeCallHook(e,t);var r,a=$M(e),i=A_(n.activation.getClassName());return null!=i?r=yM(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=yM(a,n.kernel.read()),null!=n.bias&&(r=kM(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:oA(this.activation),useBias:this.useBias,kernelInitializer:HM(this.kernelInitializer),biasInitializer:HM(this.biasInitializer),kernelRegularizer:pA(this.kernelRegularizer),biasRegularizer:pA(this.biasRegularizer),activityRegularizer:pA(this.activityRegularizer),kernelConstraint:z_(this.kernelConstraint),biasConstraint:z_(this.biasConstraint)},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);oR.className="Dense",Ny(oR);var sR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return(0,I.Z)(n,[{key:"computeOutputShape",value:function(e){var t,n=G((e=eI(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new c_('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(sde){n.e(sde)}finally{n.f()}return[e[0],iM(e,1)]}},{key:"call",value:function(e,t){var n=this;return Oy((function(){n.invokeCallHook(e,t);var r=$M(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=Ak(r,a)}return function(e){if(e.rank<=1)throw new c_("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],iM(e.shape,1)];return fb(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);sR.className="Flatten",Ny(sR);var uR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=uA(e.activation),r}return(0,I.Z)(n,[{key:"call",value:function(e,t){var n=this;return Oy((function(){n.invokeCallHook(e,t);var r=$M(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:oA(this.activation)},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);uR.className="Activation",Ny(uR);var lR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return(0,I.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return Oy((function(){return function(e,t){return Oy((function(){if(2!==e.shape.length)throw new c_("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));return vM(cM(e,1),[1,t,1])}))}(e=$M(e),n.n)}))}},{key:"getConfig",value:function(){var e={n:this.n},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);lR.className="RepeatVector",Ny(lR);var cR=function(e){A(n,e);var t=F(n);function n(e){var r;M(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return(0,I.Z)(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new c_("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=iM(e);if(null!==i){if(0===a||u%a!==0)throw new c_(n);r[i]=u/a}else if(u!==a)throw new c_(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return Oy((function(){n.invokeCallHook(e,t);var r=$M(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return fb(r,i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);cR.className="Reshape",Ny(cR);var dR=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=uM(1,e.dims.length+1);if(!Id(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new oI({ndim:r.dims.length+1})],r}return(0,I.Z)(n,[{key:"computeOutputShape",value:function(e){var t=(e=eI(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return Ak($M(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);dR.className="Permute",Ny(dR);var hR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return(0,I.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=$M(e);return Gy(dw(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return Oy((function(){n.invokeCallHook(e,t);var r=$M(e),a=Gy(dw(r,n.maskValue),-1,!0);return bb(r,Vg(a,r.dtype))}))}}]),n}(dI);hR.className="Masking",Ny(hR);var pR=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(g_(e.inputLength))}return r.inputDim=e.inputDim,I_(r.inputDim,"inputDim"),r.outputDim=e.outputDim,I_(r.outputDim,"outputDim"),r.embeddingsInitializer=GM(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=mA(e.embeddingsRegularizer),r.activityRegularizer=mA(e.activityRegularizer),r.embeddingsConstraint=U_(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return(0,I.Z)(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return Oy((function(){return n.maskZero?(e=$M(e),dw(e,rx(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=eI(e),null==this.inputLength)return[].concat((0,_.Z)(e),[this.outputDim]);var t=g_(this.inputLength);if(t.length!==e.length-1)throw new c_('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new c_('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat((0,_.Z)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return Oy((function(){n.invokeCallHook(e,t);var r=$M(e);"int32"!==r.dtype&&(r=lM(r,"int32"));var a=bM(n.embeddings.read(),fb(r,[r.size]));return fb(a,eI(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:HM(this.embeddingsInitializer),embeddingsRegularizer:pA(this.embeddingsRegularizer),activityRegularizer:pA(this.activityRegularizer),embeddingsConstraint:z_(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);pR.className="Embedding",Ny(pR);var fR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return(0,I.Z)(n,[{key:"mergeFunction",value:function(e){throw new d_}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new c_("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[eI(e)]),e.length<2)throw new c_("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=G(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(sde){r.e(sde)}finally{r.f()}if((n=T_(n)).length>1)throw new c_("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===T_(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return Oy((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=sM(r),o=G(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,u=s.rank,l=0;l<i-u;++l)s=cM(s,1);t.push(s)}}catch(sde){o.e(sde)}finally{o.f()}return n.mergeFunction(t)}var c,d=!1,h=G(e);try{for(h.s();!(c=h.n()).done;){var p=c.value,f=p.rank;if(null==f){var m=p.shape,v=m[0],g=m.slice(1).concat([v]),y=fb(p,[v].concat(iM(m.slice(1))));y=Ak(y,[1,0]),y=fb(y,g),t.push(y),d=!0}else if(f>1){var b=uM(1,f).concat([0]);t.push(Ak(p,b)),d=!0}else t.push(p)}}catch(sde){h.e(sde)}finally{h.f()}var x=n.mergeFunction(t),w=x.rank;if(d)if(null==w){var k=x.shape,S=k[k.length-1],E=[S].concat(k.slice(0,k.length-1));x=fb(Ak(fb(x,[-1,S]),[1,0]),E)}else if(w>1){var T=[w-1].concat(uM(0,w-1));x=Ak(x,T)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=G(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(sde){o.e(sde)}finally{o.f()}return t=1===(i=T_(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return Oy((function(){if(null==t)return null;if(!Array.isArray(t))throw new c_("`mask` should be an Array");if(!Array.isArray(e))throw new c_("`inputs` should be an Array");if(t.length!==e.length)throw new c_("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;t=t.map((function(e){return null==e?e:cx(e,0)}));for(var n=t[0],r=1;r<t.length-1;++r)n=Hx(n,t[r]);return n}))}}]),n}(dI),mR=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"mergeFunction",value:function(e){return Oy((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Vy(t,e[n]);return t}))}}]),n}(fR);mR.className="Add",Ny(mR);var vR=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"mergeFunction",value:function(e){return Oy((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=bb(t,e[n]);return t}))}}]),n}(fR);vR.className="Multiply",Ny(vR);var gR=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"mergeFunction",value:function(e){return Oy((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Vy(t,e[n]);return bb(1/e.length,t)}))}}]),n}(fR);gR.className="Average",Ny(gR);var yR=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"mergeFunction",value:function(e){return Oy((function(){for(var t=e[0],n=1;n<e.length;++n)t=Jx(t,e[n]);return t}))}}]),n}(fR);yR.className="Maximum",Ny(yR);var bR=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"mergeFunction",value:function(e){return Oy((function(){for(var t=e[0],n=1;n<e.length;++n)t=aw(t,e[n]);return t}))}}]),n}(fR);bR.className="Minimum",Ny(bR);var xR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,I.Z)(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new c_("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=G(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(sde){r.e(sde)}finally{r.f()}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var s,u=!1,l=G(a);try{for(l.s();!(s=l.n()).done;){if(Id(s.value,o)){u=!0;break}}}catch(sde){l.e(sde)}finally{l.f()}u||a.push(o)}if(a.length>1)throw new c_("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return Oy((function(){return fM(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new c_("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=G(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(sde){i.e(sde)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new c_("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new c_("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new c_("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return Oy((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push(Vg(pw(e[i]),"bool")):t[i].rank<e[i].rank?a.push(cx(t[i],-1)):a.push(t[i]);var o=gb(a,n.axis);return Hy(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(fR);function wR(e,t){for(;e<0;)e+=t;return e}xR.className="Concatenate",Ny(xR);var kR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return(0,I.Z)(n,[{key:"build",value:function(e){Ed(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new d_("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new c_("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new c_("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return wR(t,e[n].shape.length)})):[wR(this.axes,n.shape.length),wR(this.axes,r.shape.length)],this.normalize&&(n=_I(n,t[0]),r=_I(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new d_("batchDot is not implemented for tensors of 4D or higher rank yet");if(Ed(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),Ed(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new d_("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return Oy((function(){var n,o;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=fb(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var l=[],c=0;c<n;++c)l.push(1);e=fb(e,e.shape.concat(l))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?Lx(bb(e,t),i[0]):Lx(bb(Ak(e,[1,0]),t),i[1]);else{var d=i[0]!==e.shape.length-1,h=i[1]===t.shape.length-1;o=yb(e,t,d,h)}if(n>0){for(var p,f=[],m=p=r>a?r+a-3:r-1;m<p+n;++m)f.push(m);o=ck(o,f)}return 1===o.shape.length&&(o=cx(o,1)),o}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[wR(this.axes,e.length),wR(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){Ed(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new d_("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(fR);kR.className="Dot",Ny(kR);var SR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return(0,I.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Oy((function(){n.invokeCallHook(e,t);var r=$M(e);return EM((function(){return Vy(gM(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(dI);SR.className="GaussianNoise",Ny(SR);var ER=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return(0,I.Z)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Oy((function(){n.invokeCallHook(e,t);var r=$M(e);if(n.rate>0&&n.rate<1){return EM((function(){var e=Math.sqrt(n.rate/(1-n.rate));return bb(r,gM(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(dI);ER.className="GaussianDropout",Ny(ER);var TR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return(0,I.Z)(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||$M(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=pl(R(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Oy((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return EM((function(){var t=$M(e),a=-1.7580993408473766,i=yx(Rw(r),n.rate);i=lM(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate,u=Vy(bb(t,i),bb(Vy(i,-1),a));return Vy(bb(u,o),s)}),(function(){return $M(e)}),t.training||!1)}return e}))}}]),n}(dI);function CR(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=Cb(e,t,n,r,a,o);else if(3===e.rank)i=_b(e,t,n,r,a,o);else{if(4!==e.rank)throw new d_("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=Mb(e,t,n,r,a,o)}return i}function _R(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Id(r.slice().sort(),uM(0,e.rank-1))?function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Oy((function(){var i=uw(e,r),o=i.mean,s=i.variance;return[CR(e,o,s,n,t,a),o,s]}))}(e,t,n,r,a):function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Oy((function(){var i,o=uw(e,r),s=o.mean,u=o.variance,l=[],c=G(uM(0,e.rank));try{for(c.s();!(i=c.n()).done;){var d=i.value;-1!==r.indexOf(d)?l.push(1):l.push(e.shape[d])}}catch(sde){c.e(sde)}finally{c.f()}var h=fb(s,l),p=fb(u,l),f=null==t?null:fb(t,l),m=null==n?null:fb(n,l);return[CR(e,h,p,m,f,a),s,u]}))}(e,t,n,r,a)}TR.className="AlphaDropout",Ny(TR);var MR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=GM(e.betaInitializer||"zeros"),r.gammaInitializer=GM(e.gammaInitializer||"ones"),r.movingMeanInitializer=GM(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=GM(e.movingVarianceInitializer||"ones"),r.betaConstraint=U_(e.betaConstraint),r.gammaConstraint=U_(e.gammaConstraint),r.betaRegularizer=mA(e.betaRegularizer),r.gammaRegularizer=mA(e.gammaRegularizer),r}return(0,I.Z)(n,[{key:"build",value:function(e){e=eI(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new c_("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new oI({ndim:e.length,axes:(0,Pt.Z)({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return Oy((function(){var r=null!=t.training&&t.training,a=$M(e),i=a.shape,o=i.length,s=uM(0,o),u=n.axis>=0?n.axis:n.axis+o;s.splice(u,1);var l=p_(1,o);l[u]=i[u];var c=s.slice();c.sort();var d=!Id(c,uM(0,o).slice(0,o-1));if(!r)return function(){if(d){var e=fb(n.movingMean.read(),l),t=fb(n.movingVariance.read(),l),r=n.center?fb(n.beta.read(),l):null,i=n.scale?fb(n.gamma.read(),l):null;return CR(a,e,t,r,i,n.epsilon)}return CR(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var h=_R(a,n.gamma.read(),n.beta.read(),s,n.epsilon),p=(0,U.Z)(h,3),f=p[0],m=p[1],v=p[2],g=function(e,t,n){Oy((function(){var r=1-n,a=e.read(),i=bb(Dx(a,t),r);e.write(Dx(a,i))}))};return g(n.movingMean,m,n.momentum),g(n.movingVariance,v,n.momentum),f}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:HM(this.betaInitializer),gammaInitializer:HM(this.gammaInitializer),movingMeanInitializer:HM(this.movingMeanInitializer),movingVarianceInitializer:HM(this.movingVarianceInitializer),betaRegularizer:pA(this.betaRegularizer),gammaRegularizer:pA(this.gammaRegularizer),betaConstraint:z_(this.betaConstraint),gammaConstraint:z_(this.gammaConstraint)},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);MR.className="BatchNormalization",Ny(MR);var IR=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=G(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(sde){i.e(sde)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=GM(e.betaInitializer||"zeros"),r.gammaInitializer=GM(e.gammaInitializer||"ones"),r.betaRegularizer=mA(e.betaRegularizer),r.gammaRegularizer=mA(e.gammaRegularizer),r.supportsMasking=!0,r}return(0,I.Z)(n,[{key:"build",value:function(e){var t=(e=eI(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=G(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(sde){a.e(sde)}finally{a.f()}if(this.axis.length!==T_(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=$M(e),a=r.shape,i=a.length;return Oy((function(){var e,t=uw(r,n.axis,!0),o=t.mean,s=t.variance,u=p_(1,i),l=G(n.axis);try{for(l.s();!(e=l.n()).done;){var c=e.value;u[c]=a[c]}}catch(sde){l.e(sde)}finally{l.f()}for(var d=function(e){return null!=e&&e.shape.length!==i?fb(e,u):e},h=d(n.gamma.read()),p=d(n.beta.read()),f=[],m=[],v=0;v<i;++v)-1!==n.axis.indexOf(v)?(f.push(a[v]),m.push(1)):(f.push(1),m.push(a[v]));return o=hx(o,f),s=hx(s,f),h=hx(h,m),p=hx(p,m),CR(r,o,s,p,h,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:HM(this.betaInitializer),gammaInitializer:HM(this.gammaInitializer),betaRegularizer:pA(this.betaRegularizer),gammaRegularizer:pA(this.gammaRegularizer)},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);IR.className="LayerNormalization",Ny(IR);var NR=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new c_("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new c_("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new c_("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new oI({ndim:4})],r}return(0,I.Z)(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=eI(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return Oy((function(){return function(e,t,n){return Oy((function(){if(4!==e.rank)throw new c_("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new c_("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new c_("Unknown data format: ".concat(n,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],mw(e,r)}))}($M(e),n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI);function AR(e,t,n,r,a,i){return Oy((function(){var o;X_(a),K_(i),Y_(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=TA(e,a);var s="same"===r?"same":"valid";return o="max"===i?Yx(e,t,n,s):mb(e,t,n,s),"channelsFirst"===a&&(o=Ak(o,[0,3,1,2])),o}))}function RR(e,t,n,r,a,i){return Oy((function(){var o;X_(a),K_(i),Y_(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=CA(e,a);var s="same"===r?"same":"valid";return o="max"===i?Kx(e,t,n,s):vb(e,t,n,s),"channelsFirst"===a&&(o=Ak(o,[0,4,1,2,3])),o}))}NR.className="ZeroPadding2D",Ny(NR);var OR=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new c_("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(I_(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new c_("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return I_(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,Y_(r.padding),r.inputSpec=[new oI({ndim:3})],r}return(0,I.Z)(n,[{key:"computeOutputShape",value:function(e){var t=SA((e=eI(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return Oy((function(){n.invokeCallHook(e,t),e=cM($M(e),2);var r=n.poolingFunction($M(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return ck(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI),DR=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return X_(a),Y_(r),AR(e,t,n,r,a,"max")}}]),n}(OR);DR.className="MaxPooling1D",Ny(DR);var LR=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return X_(a),Y_(r),AR(e,t,n,r,a,"avg")}}]),n}(OR);LR.className="AveragePooling1D",Ny(LR);var PR=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new c_("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return I_(r.poolSize,"poolSize"),I_(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,X_(r.dataFormat),Y_(r.padding),r.inputSpec=[new oI({ndim:4})],r}return(0,I.Z)(n,[{key:"computeOutputShape",value:function(e){e=eI(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=SA(t,this.poolSize[0],this.padding,this.strides[0]),n=SA(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return Oy((function(){return n.invokeCallHook(e,t),n.poolingFunction($M(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI),FR=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return X_(a),Y_(r),AR(e,t,n,r,a,"max")}}]),n}(PR);FR.className="MaxPooling2D",Ny(FR);var jR=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return X_(a),Y_(r),AR(e,t,n,r,a,"avg")}}]),n}(PR);jR.className="AveragePooling2D",Ny(jR);var zR=function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new c_("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return I_(r.poolSize,"poolSize"),I_(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,X_(r.dataFormat),Y_(r.padding),r.inputSpec=[new oI({ndim:5})],r}return(0,I.Z)(n,[{key:"computeOutputShape",value:function(e){e=eI(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=SA(t,this.poolSize[0],this.padding,this.strides[0]),n=SA(n,this.poolSize[1],this.padding,this.strides[1]),r=SA(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return Oy((function(){return n.invokeCallHook(e,t),n.poolingFunction($M(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI),BR=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return X_(a),Y_(r),RR(e,t,n,r,a,"max")}}]),n}(zR);BR.className="MaxPooling3D",Ny(BR);var UR=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return X_(a),Y_(r),RR(e,t,n,r,a,"avg")}}]),n}(zR);UR.className="AveragePooling3D",Ny(UR);var WR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).inputSpec=[new oI({ndim:3})],r}return(0,I.Z)(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new d_}}]),n}(dI),VR=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e||{})}return(0,I.Z)(n,[{key:"call",value:function(e,t){return Oy((function(){var t=$M(e);return $x(t,1)}))}}]),n}(WR);VR.className="GlobalAveragePooling1D",Ny(VR);var ZR=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e||{})}return(0,I.Z)(n,[{key:"call",value:function(e,t){return Oy((function(){var t=$M(e);return Ox(t,1)}))}}]),n}(WR);ZR.className="GlobalMaxPooling1D",Ny(ZR);var HR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,X_(r.dataFormat),r.inputSpec=[new oI({ndim:4})],r}return(0,I.Z)(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new d_}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(dI),GR=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"call",value:function(e,t){var n=this;return Oy((function(){var t=$M(e);return"channelsLast"===n.dataFormat?$x(t,[1,2]):$x(t,[2,3])}))}}]),n}(HR);GR.className="GlobalAveragePooling2D",Ny(GR);var qR=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"call",value:function(e,t){var n=this;return Oy((function(){var t=$M(e);return"channelsLast"===n.dataFormat?Ox(t,[1,2]):Ox(t,[2,3])}))}}]),n}(HR);qR.className="GlobalMaxPooling2D",Ny(qR);var XR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).layer=e.layer,r}return(0,I.Z)(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){pl(R(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=CI(t.layer,n);delete t.layer;var a={layer:r};return Object.assign(a,t),new e(a)}}]),n}(dI),YR=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return(0,I.Z)(n,[{key:"build",value:function(e){if((e=eI(e)).length<3)throw new c_("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),pl(R(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=eI(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return Oy((function(){return VA((function(e,r){return[$M(n.layer.call(e,t)),[]]}),e=$M(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(XR);YR.className="TimeDistributed",Ny(YR);var KR=function(e){A(n,e);var t=F(n);function n(e){var r;M(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=CI(i),a.goBackwards=!0!==a.goBackwards;var o={};if(o.className=e.layer.getClassName(),o.config=a,r.backwardLayer=CI(o),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){__(G_,"BidirectionalMergeMode",e)}(r.mergeMode),e.weights)throw new d_("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return(0,I.Z)(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):v_(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=WA(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return pl(R(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new c_("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,(0,_.Z)(r));var l=r.map((function(e){return new oI({shape:e.shape})}));this.forwardLayer.stateSpec=l.slice(0,u/2),this.backwardLayer.stateSpec=l.slice(u/2),s.push.apply(s,(0,_.Z)(l))}if(null!=a)throw new d_("Support for constants in Bidirectional layers is not implemented yet.");for(var c=o[0]instanceof sI,d=0,h=o;d<h.length;d++){if(h[d]instanceof sI!==c)throw new c_("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(c){var p=[e].concat(o),f=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=f;var v=pl(R(n.prototype),"apply",this).call(this,p,t);return this.inputSpec=m,v}return pl(R(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Oy((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),l=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:l}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=jw(a,1)),"concat"===n.mergeMode?o=fM([r,a]):"sum"===n.mergeMode?o=Vy(r,a):"ave"===n.mergeMode?o=bb(.5,Vy(r,a)):"mul"===n.mergeMode?o=bb(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;$_(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),$_(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){pl(R(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=pl(R(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=CI(t.layer);if(delete t.layer,null!=t.numConstants)throw new d_("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(XR);KR.className="Bidirectional",Ny(KR);var QR,JR;oh().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(QR||(QR={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(JR||(JR={}));var $R={};function eO(e){return $R[e]}function tO(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd;if("tensor"===i.type)return nO(t.inputNames[i.inputIndexStart],n,r,a);if("tensors"===i.type)return t.inputNames.slice(o,s).map((function(e){return nO(e,n,r,a)}));var u=nO(t.inputNames.slice(o)[0],n,r,a),l=u.dataSync();return"number"===i.type?l[0]:Yd(u.shape,l)}var c=t.attrParams[e];return c&&c.value}function nO(e,t,n,r){var a=iO(e),i=(0,U.Z)(a,2),o=i[0],s=i[1];if(null!=r){var u=r.getHashTableHandleByName(o);if(null!=u)return u}var l=n.currentContextIds.find((function(e){return!!t[aO(o,e)]}));return void 0!==l?t[aO(o,l)][s]:void 0}function rO(e,t){var n=iO(e),r=(0,U.Z)(n,3),a=r[0],i=r[1],o=r[2];return[aO(a,t&&t.currentContextId),i,o]}function aO(e,t){return t?"".concat(e,"-").concat(t):e}function iO(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function oO(e,t,n){var r=tO("pad",e,t,n);if("explicit"===r){r=tO("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function sO(e){return e.kept?e:Zg(e)}var uO=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],lO=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],cO=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],dO=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],hO=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],pO=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],fO=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],mO=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],vO=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],gO=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],yO=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],bO=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],xO=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],wO=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],kO=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],SO=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],EO=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],TO=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],CO=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],_O=function(){function e(){var t;M(this,e);var n=[a,i,o,s,u,l,c,d,h,p,f,m,v,g,y,b,x,w,k],r=(t=[]).concat.apply(t,(0,_.Z)(n.map((function(e){return e.json}))));this.opMappers=r.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return(0,I.Z)(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):null!=n.input&&0!==n.input.length||o.push(e[n.name]),e}),{}),u=[],l=[],c={},d={};null!=n&&(c=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));var h=Object.keys(s);h.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=rO(e),a=(0,U.Z)(r,3),i=a[0],o=a[2],u=s[i];if(null!=u.outputs){var l=u.outputs.indexOf(o);if(-1!==l){var c="".concat(i,":").concat(l);t.inputNames[n]=c}}t.inputs.push(u),u.children.push(t)}))})),0===Object.keys(d).length?h.forEach((function(e){var t=s[e];0===t.children.length&&l.push(t)})):Object.keys(d).forEach((function(e){var t=rO(e),n=(0,U.Z)(t,1)[0],r=s[n];null!=r&&(r.signatureKey=d[e],l.push(r))})),Object.keys(c).length>0?Object.keys(c).forEach((function(e){var t=rO(e),n=(0,U.Z)(t,1)[0],r=s[n];r&&(r.signatureKey=c[e],u.push(r))})):u=a;var p={};null!=e.library&&null!=e.library.function&&(p=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var f={nodes:s,inputs:u,outputs:l,weights:i,placeholders:a,signature:n,functions:p};return o.length>0&&(f.initNodes=o),f}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=eO(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=IO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=IO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=zO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=zO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=AO(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=AO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=jO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=jO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=NO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=NO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=UO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=UO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=FO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=FO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=BO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=BO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=DO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=DO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=LO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=LO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=OO(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=OO(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=rO(e.name),n=(0,U.Z)(t,1)[0],r={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:RO(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,i.push(r),a[n]=r})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=rO(e),i=(0,U.Z)(r,3),o=i[0],s=i[2],u=a[o];if(null!=u.outputs){var l=u.outputs.indexOf(s);if(-1!==l){var c="".concat(o,":").concat(l);t.inputNames[n]=c}}t.inputs.push(u),u.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=rO(s[e.name]),n=(0,U.Z)(t,2),r=n[0],i=n[1],u=a[r];null!=u&&(u.defaultOutput=i,o.push(u))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function MO(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=oh().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function IO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?MO(a.s,r):n}function NO(e,t,n){var r=e[t];return r?r.b:n}function AO(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function RO(e){switch("string"===typeof e&&(e=QR[e]),e){case QR.DT_FLOAT:case QR.DT_HALF:return"float32";case QR.DT_INT32:case QR.DT_INT64:case QR.DT_INT8:case QR.DT_UINT8:return"int32";case QR.DT_BOOL:return"bool";case QR.DT_DOUBLE:return"float32";case QR.DT_STRING:return"string";default:return null}}function OO(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function DO(e,t,n){var r=e[t];return r&&r.type?RO(r.type):n}function LO(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return RO(e)})):n}function PO(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function FO(e,t,n){var r=e[t];return r&&r.shape?PO(r.shape):n}function jO(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function zO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return MO(e,r)})):n}function BO(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return PO(e)})):n}function UO(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var WO=function(){function e(t,n,r){var a=this;M(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return(0,I.Z)(e,[{key:"getInput",value:function(e){return nO(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return nO(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return AO(this.node.rawAttrs,e,t);if(null!=n.s)return IO(this.node.rawAttrs,e,t);if(null!=n.b)return NO(this.node.rawAttrs,e,t);if(null!=n.shape)return FO(this.node.rawAttrs,e,t);if(null!=n.type)return DO(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return jO(this.node.rawAttrs,e,t);if(null!=n.list.s)return zO(this.node.rawAttrs,e,t);if(null!=n.list.shape)return BO(this.node.rawAttrs,e,t);if(null!=n.list.b)return UO(this.node.rawAttrs,e,t);if(null!=n.list.type)return LO(this.node.rawAttrs,e,t)}return t}}]),e}();function VO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){Ed(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];Ed(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function ZO(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function HO(e,t,n){var r=GO(e,n),a=!ZO(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=GO(e.shape,r)})),!ZO(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function GO(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var qO=function(){function e(t,n,r,a,i,o,s){M(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=jy(0),Ly(this.idTensor)}return(0,I.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),VO(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,Ly(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return Lv([],[0].concat(this.elementShape));var r=this.readMany(e);return VO(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),dk(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return Lv([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return VO(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),gb(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,(0,_.Z)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,Ek(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];Oy((function(){t=fb(t,[1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],l=[1,e[s],i];o[s]=fb(wb(t,u,l),n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}]),e}(),XO=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;M(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));VO(n,e.shape,"TensorList shape mismatch: "),Ly(e)})),this.idTensor=jy(0),this.maxNumElements=a,Ly(this.idTensor)}return(0,I.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e((0,_.Z)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));VO(e,this.elementShape,"TensorList shape mismatch: ");var a=HO(this.elementShape,this.tensors,e);return Oy((function(){var e=n.tensors.map((function(e){return fb(e,a)}));return dk(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=HO(this.elementShape,this.tensors,e),r=this.tensors.pop();return VO(r.shape,e,"TensorList shape mismatch: "),fb(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(VO(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Ly(e),this.tensors.push(e)}},{key:"resize",value:function(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));this.tensors.length=e}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));VO(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=HO(this.elementShape,this.tensors,t);return fb(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));VO(this.elementShape,t.shape,"TensorList shape mismatch: "),Ly(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));VO(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=HO(this.elementShape,this.tensors,n);return 0===e.length?Lv([],[0].concat(a)):Oy((function(){var t=e.map((function(e){return fb(r.tensors[e],a)}));return dk(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));VO(this.elementShape,t,"TensorList shape mismatch: ");var r=HO(this.elementShape,this.tensors,t);return 0===this.size()?Lv([],[0].concat(r)):Oy((function(){var e=n.tensors.map((function(e){return fb(e,r)}));return gb(e,0)}))}}]),e}();function YO(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));VO(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=Ek(e);return new XO(a,t,r)}function KO(e,t,n){return new XO([],e,t,n)}function QO(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,(0,_.Z)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new XO([],n,e.dtype,r),o=Ek(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function JO(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=GO(e.shape.slice(1),n),o=0===r?0:e.size/r,s=Oy((function(){var n=[];e=fb(e,[1,r,o]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],l=[1,t[s],o];n[s]=fb(wb(e,u,l),i)}return e.dispose(),n})),u=new XO([],n,e.dtype,t.length),l=0;l<s.length;l++)u.setItem(l,s[l]);return u}var $O=function(){var e=Jn(Kn().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,v,g,y,b,x,w,k,S,E,T,C,_,M,I,N,A,R,O,D,L,P,F,j,z,B,U,W,V,Z,H,G,q,X,Y,K,Q,J,$,ee,te,ne,re,ae,ie,oe,se,ue,le,ce,de,he,pe,fe,me,ve,ge,ye,be,xe,we,ke,Se,Ee,Te,Ce,_e,Me,Ie,Ne,Ae,Re,Oe,De,Le,Pe,Fe,je,ze,Be,Ue,We,Ve,Ze,He,Ge,qe,Xe,Ye,Ke,Qe,Je;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?33:"Switch"===e.t0?35:"Merge"===e.t0?46:"Enter"===e.t0?51:"Exit"===e.t0?55:"NextIteration"===e.t0?58:"TensorArrayV3"===e.t0?61:"TensorArrayWriteV3"===e.t0?71:"TensorArrayReadV3"===e.t0?77:"TensorArrayGatherV3"===e.t0?81:"TensorArrayScatterV3"===e.t0?86:"TensorArrayConcatV3"===e.t0?92:"TensorArraySplitV3"===e.t0?96:"TensorArraySizeV3"===e.t0?102:"TensorArrayCloseV3"===e.t0?105:"TensorListSetItem"===e.t0?109:"TensorListGetItem"===e.t0?115:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?121:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?128:"TensorListGather"===e.t0?135:"TensorListStack"===e.t0?141:"TensorListFromTensor"===e.t0?147:"TensorListConcat"===e.t0?153:"TensorListPushBack"===e.t0?158:"TensorListPopBack"===e.t0?163:"TensorListSplit"===e.t0?168:174;break;case 3:return a=tO("thenBranch",t,n,r),i=tO("elseBranch",t,n,r),o=tO("cond",t,n,r),s=tO("args",t,n,r),e.next=9,o.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return u=tO("body",t,n,r),l=tO("cond",t,n,r),c=tO("args",t,n,r),e.next=20,r.functionMap[l].executeFunctionAsync(c,r.tensorArrayMap,r.tensorListMap);case 20:return d=e.sent,h=c.map((function(e){return e.id})),e.next=24,d[0].data();case 24:p=e.sent,d.forEach((function(e){e.kept||-1!==h.indexOf(e.id)||e.dispose()})),f=c,m=Kn().mark((function e(){var t,n,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f,e.next=3,r.functionMap[u].executeFunctionAsync(f,r.tensorArrayMap,r.tensorListMap);case 3:return f=e.sent,n=f.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==h.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[l].executeFunctionAsync(f,r.tensorArrayMap,r.tensorListMap);case 8:return a=e.sent,e.next=11,a[0].data();case 11:p=e.sent,a.forEach((function(e){e.kept||-1!==h.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 28:if(!p[0]){e.next=32;break}return e.delegateYield(m(),"t1",30);case 30:e.next=28;break;case 32:return e.abrupt("return",f);case 33:return v=tO("pred",t,n,r),e.abrupt("return",[sO(v)]);case 35:return g=tO("pred",t,n,r),(y=tO("data",t,n,r)).kept||(y=sO(y)),e.next=40,g.data();case 40:if(!e.sent[0]){e.next=44;break}e.t2=[void 0,y],e.next=45;break;case 44:e.t2=[y,void 0];case 45:return e.abrupt("return",e.t2);case 46:if(b=t.inputNames.find((function(e){return void 0!==nO(e,n,r)})),!b){e.next=50;break}return x=nO(b,n,r),e.abrupt("return",[sO(x)]);case 50:return e.abrupt("return",void 0);case 51:return w=tO("frameName",t,n,r),k=tO("tensor",t,n,r),r.enterFrame(w),e.abrupt("return",[sO(k)]);case 55:return S=tO("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[sO(S)]);case 58:return E=tO("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[sO(E)]);case 61:return T=tO("size",t,n,r),C=tO("dtype",t,n,r),_=tO("elementShape",t,n,r),M=tO("dynamicSize",t,n,r),I=tO("clearAfterRead",t,n,r),N=tO("identicalElementShapes",t,n,r),A=tO("name",t,n,r),R=new qO(A,C,T,_,N,M,I),r.addTensorArray(R),e.abrupt("return",[R.idTensor,jy(1)]);case 71:return O=tO("tensorArrayId",t,n,r),D=tO("index",t,n,r),L=tO("tensor",t,n,r),(P=r.getTensorArray(O.id)).write(D,L),e.abrupt("return",[P.idTensor]);case 77:return F=tO("tensorArrayId",t,n,r),j=tO("index",t,n,r),z=r.getTensorArray(F.id),e.abrupt("return",[z.read(j)]);case 81:return B=tO("tensorArrayId",t,n,r),U=tO("indices",t,n,r),W=tO("dtype",t,n,r),V=r.getTensorArray(B.id),e.abrupt("return",[V.gather(U,W)]);case 86:return Z=tO("tensorArrayId",t,n,r),H=tO("indices",t,n,r),G=tO("tensor",t,n,r),(q=r.getTensorArray(Z.id)).scatter(H,G),e.abrupt("return",[q.idTensor]);case 92:return X=tO("tensorArrayId",t,n,r),Y=r.getTensorArray(X.id),K=tO("dtype",t,n,r),e.abrupt("return",[Y.concat(K)]);case 96:return Q=tO("tensorArrayId",t,n,r),J=tO("tensor",t,n,r),$=tO("lengths",t,n,r),(ee=r.getTensorArray(Q.id)).split($,J),e.abrupt("return",[ee.idTensor]);case 102:return te=tO("tensorArrayId",t,n,r),ne=r.getTensorArray(te.id),e.abrupt("return",[jy(ne.size(),"int32")]);case 105:return re=tO("tensorArrayId",t,n,r),(ae=r.getTensorArray(re.id)).clearAndClose(),e.abrupt("return",[ae.idTensor]);case 109:return ie=tO("tensorListId",t,n,r),oe=tO("index",t,n,r),se=tO("tensor",t,n,r),(ue=r.getTensorList(ie.id)).setItem(oe,se),e.abrupt("return",[ue.idTensor]);case 115:return le=tO("tensorListId",t,n,r),ce=tO("index",t,n,r),de=tO("elementShape",t,n,r),he=tO("elementDType",t,n,r),pe=r.getTensorList(le.id),e.abrupt("return",[pe.getItem(ce,de,he)]);case 121:return fe=tO("indices",t,n,r),me=tO("tensor",t,n,r),ve=tO("elementShape",t,n,r),ge=tO("numElements",t,n,r),ye=QO(me,fe,ve,ge),r.addTensorList(ye),e.abrupt("return",[ye.idTensor]);case 128:return be=tO("elementShape",t,n,r),xe=tO("elementDType",t,n,r),we="TensorListReserve"===t.op?"numElements":"maxNumElements",ke=tO(we,t,n,r),Se=KO(be,xe,ke),r.addTensorList(Se),e.abrupt("return",[Se.idTensor]);case 135:return Ee=tO("tensorListId",t,n,r),Te=tO("indices",t,n,r),Ce=tO("elementShape",t,n,r),_e=tO("elementDType",t,n,r),Me=r.getTensorList(Ee.id),e.abrupt("return",[Me.gather(Te,_e,Ce)]);case 141:return Ie=tO("tensorListId",t,n,r),Ne=tO("elementShape",t,n,r),Ae=tO("elementDType",t,n,r),Re=tO("numElements",t,n,r),Oe=r.getTensorList(Ie.id),e.abrupt("return",[Oe.stack(Ne,Ae,Re)]);case 147:return De=tO("tensor",t,n,r),Le=tO("elementShape",t,n,r),Pe=tO("elementDType",t,n,r),Fe=YO(De,Le,Pe),r.addTensorList(Fe),e.abrupt("return",[Fe.idTensor]);case 153:return je=tO("tensorListId",t,n,r),ze=r.getTensorList(je.id),Be=tO("dtype",t,n,r),Ue=tO("elementShape",t,n,r),e.abrupt("return",[ze.concat(Be,Ue)]);case 158:return We=tO("tensorListId",t,n,r),Ve=tO("tensor",t,n,r),(Ze=r.getTensorList(We.id)).pushBack(Ve),e.abrupt("return",[Ze.idTensor]);case 163:return He=tO("tensorListId",t,n,r),Ge=tO("elementShape",t,n,r),qe=tO("elementDType",t,n,r),Xe=r.getTensorList(He.id),e.abrupt("return",[Xe.popBack(Ge,qe)]);case 168:return Ye=tO("tensor",t,n,r),Ke=tO("elementShape",t,n,r),Qe=tO("lengths",t,n,r),Je=JO(Ye,Qe,Ke),r.addTensorList(Je),e.abrupt("return",[Je.idTensor]);case 174:throw TypeError("Node type ".concat(t.op," is not implemented"));case 175:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function eD(e,t,n){var r=tO("fusedOps",e,t,n),a=(0,U.Z)(r,2),i=a[0],o=a[1],s="biasadd"===i,u=!s,l="prelu"===o,c="fusedbatchnorm"===i,d=tO("numArgs",e,t,n);if(s){if(l&&2!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&s&&1!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var h=tO("strides",e,t,n),p=oO(e,t,n),f=tO("dataFormat",e,t,n).toUpperCase(),m=tO("dilations",e,t,n),v=tO("args",e,t,n),g=(0,U.Z)(v,2),y=g[0],b=g[1];return u&&(b=y,y=void 0),{stride:h,pad:p,dataFormat:f,dilations:m,biasArg:y,preluArg:b,activationFunc:o,leakyreluAlpha:tO("leakyreluAlpha",e,t,n)}}function tD(e,t,n){return{boxes:tO("boxes",e,t,n),scores:tO("scores",e,t,n),maxOutputSize:tO("maxOutputSize",e,t,n),iouThreshold:tO("iouThreshold",e,t,n),scoreThreshold:tO("scoreThreshold",e,t,n),softNmsSigma:tO("softNmsSigma",e,t,n)}}var nD=function(){var e=Jn(Kn().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,v,g,y,b,x,w,k,S,E,T,C,_;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?8:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?14:"Where"===e.t0?19:"ListDiff"===e.t0?26:27;break;case 3:return a=tD(t,n,r),i=a.boxes,o=a.scores,s=a.maxOutputSize,u=a.iouThreshold,l=a.scoreThreshold,c=a.softNmsSigma,e.next=6,tE.nonMaxSuppressionWithScoreAsync(i,o,s,u,l,c);case 6:return d=e.sent,e.abrupt("return",[d.selectedIndices,d.selectedScores]);case 8:return h=tD(t,n,r),p=h.boxes,f=h.scores,m=h.maxOutputSize,v=h.iouThreshold,g=h.scoreThreshold,y=tO("padToMaxOutputSize",t,n,r),e.next=12,tE.nonMaxSuppressionPaddedAsync(p,f,m,v,g,y);case 12:return b=e.sent,e.abrupt("return",[b.selectedIndices,b.validOutputs]);case 14:return x=tD(t,n,r),w=x.boxes,k=x.scores,S=x.maxOutputSize,E=x.iouThreshold,T=x.scoreThreshold,e.next=17,tE.nonMaxSuppressionAsync(w,k,S,E,T);case 17:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 19:return C=Vg(tO("condition",t,n,r),"bool"),e.next=22,Mk(C);case 22:return e.t2=e.sent,_=[e.t2],C.dispose(),e.abrupt("return",_);case 26:return e.abrupt("return",Xw(tO("x",t,n,r),tO("y",t,n,r)));case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),rD=function(){function e(t,n){M(this,e),this.keyDType=t,this.valueDType=n,this.handle=jy(0),this.tensorMap=new Map,Ly(this.handle)}return(0,I.Z)(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return jy(this.size(),"int32")}},{key:"import",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",Oy((function(){var e=Ek(n),t=r.length,i=e.length;Ed(t===i,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(i," ")+"elements."}));for(var o=0;o<t;o++){var s=r[o],u=e[o];Ly(u),a.tensorMap.set(s,u)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",Oy((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return dk(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),aD=function(){var e=Jn(Kn().mark((function e(t,n,r,a){var i,o,s,u,l,c,d,h,p,f,m,v,g;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?8:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?16:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?24:27;break;case 3:return i=tO("keyDType",t,n,r),o=tO("valueDType",t,n,r),s=new rD(i,o),a.addHashTable(t.name,s),e.abrupt("return",[s.handle]);case 8:return u=tO("tableHandle",t,n,r,a),l=tO("keys",t,n,r),c=tO("values",t,n,r),d=a.getHashTableById(u.id),e.next=14,d.import(l,c);case 14:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 16:return h=tO("tableHandle",t,n,r,a),p=tO("keys",t,n,r),f=tO("defaultValue",t,n,r),m=a.getHashTableById(h.id),e.next=22,m.find(p,f);case 22:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 24:return v=tO("tableHandle",t,n,r,a),g=a.getHashTableById(v.id),e.abrupt("return",[g.tensorSize()]);case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();function iD(e,t,n,r){var a=function(e,t,n){switch(e.category){case"arithmetic":return Oy((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[Vy(tO("a",e,t,n),tO("b",e,t,n))];case"AddN":return[Zy(tO("tensors",e,t,n))];case"FloorMod":case"Mod":return[ow(tO("a",e,t,n),tO("b",e,t,n))];case"Mul":return[bb(tO("a",e,t,n),tO("b",e,t,n))];case"RealDiv":case"Div":return[ex(tO("a",e,t,n),tO("b",e,t,n))];case"DivNoNan":return[ax(tO("a",e,t,n),tO("b",e,t,n))];case"FloorDiv":return[$b(tO("a",e,t,n),tO("b",e,t,n))];case"Sub":return[Dx(tO("a",e,t,n),tO("b",e,t,n))];case"Minimum":return[aw(tO("a",e,t,n),tO("b",e,t,n))];case"Maximum":return[Jx(tO("a",e,t,n),tO("b",e,t,n))];case"Pow":return[kw(tO("a",e,t,n),tO("b",e,t,n))];case"SquaredDifference":return[lk(tO("a",e,t,n),tO("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"basic_math":return Oy((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[By(tO("x",e,t,n))];case"Acos":return[Uy(tO("x",e,t,n))];case"Acosh":return[Wy(tO("x",e,t,n))];case"Asin":return[Yy(tO("x",e,t,n))];case"Asinh":return[Ky(tO("x",e,t,n))];case"Atan":return[Qy(tO("x",e,t,n))];case"Atan2":return[Jy(tO("x",e,t,n),tO("y",e,t,n))];case"Atanh":return[$y(tO("x",e,t,n))];case"Ceil":return[Rb(tO("x",e,t,n))];case"Complex":return[Ov(tO("real",e,t,n),tO("imag",e,t,n))];case"Cos":return[Hb(tO("x",e,t,n))];case"Cosh":return[Gb(tO("x",e,t,n))];case"Elu":return[sx(tO("x",e,t,n))];case"Erf":return[ux(tO("x",e,t,n))];case"Exp":return[lx(tO("x",e,t,n))];case"Expm1":return[dx(tO("x",e,t,n))];case"Floor":return[mx(tO("x",e,t,n))];case"Log":return[Mx(tO("x",e,t,n))];case"Log1p":return[Ix(tO("x",e,t,n))];case"Imag":return[bx(tO("x",e,t,n))];case"Neg":return[Nx(tO("x",e,t,n))];case"Reciprocal":return[Lw(tO("x",e,t,n))];case"Real":return[Dw(tO("x",e,t,n))];case"Relu":return[Pw(tO("x",e,t,n))];case"Round":return[Vw(tO("x",e,t,n))];case"Selu":return[Hw(tO("x",e,t,n))];case"Sigmoid":return[xb(tO("x",e,t,n))];case"Sin":return[Kw(tO("x",e,t,n))];case"Sign":return[Yw(tO("x",e,t,n))];case"Sinh":return[Qw(tO("x",e,t,n))];case"Softplus":return[Ax(tO("x",e,t,n))];case"Sqrt":return[uk(tO("x",e,t,n))];case"Square":return[sw(tO("x",e,t,n))];case"Tanh":return[kb(tO("x",e,t,n))];case"Tan":return[fk(tO("x",e,t,n))];case"ClipByValue":return[Ob(tO("x",e,t,n),tO("clipValueMin",e,t,n),tO("clipValueMax",e,t,n))];case"Relu6":return[Fw(tO("x",e,t,n))];case"Rsqrt":return[Zw(nO(e.inputNames[0],t,n))];case"Prod":return[Ew(tO("x",e,t,n),tO("axes",e,t,n))];case"LeakyRelu":return[Sx(tO("x",e,t,n),tO("alpha",e,t,n))];case"Prelu":return[Sw(tO("x",e,t,n),tO("alpha",e,t,n))];case"IsNan":return[kx(nO(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"control":return $O(e,t,n);case"convolution":return Oy((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=tO("stride",e,t,n),a=tO("pad",e,t,n),i=tO("dataFormat",e,t,n).toUpperCase(),o=tO("dilation",e,t,n);return[zb(tO("x",e,t,n),tO("filter",e,t,n),r,a,i,o)];case"Conv2D":var s=tO("strides",e,t,n),u=oO(e,t,n),l=tO("dataFormat",e,t,n).toUpperCase(),c=tO("dilations",e,t,n);return[jb(tO("x",e,t,n),tO("filter",e,t,n),[s[1],s[2]],u,l,[c[1],c[2]])];case"_FusedConv2D":var d=eD(e,t,n),h=d.stride,p=d.pad,f=d.dataFormat,m=d.dilations,v=d.biasArg,g=d.preluArg,y=d.activationFunc,b=d.leakyreluAlpha;return[Kk({x:tO("x",e,t,n),filter:tO("filter",e,t,n),strides:[h[1],h[2]],pad:p,dataFormat:f,dilations:[m[1],m[2]],bias:v,activation:y,preluActivationWeights:g,leakyreluAlpha:b})];case"FusedDepthwiseConv2dNative":var x=eD(e,t,n),w=x.stride,k=x.pad,S=x.dataFormat,E=x.dilations,T=x.biasArg,C=x.preluArg,_=x.activationFunc,M=x.leakyreluAlpha;return[$k({x:tO("x",e,t,n),filter:tO("filter",e,t,n),strides:[w[1],w[2]],pad:k,dataFormat:S,dilations:[E[1],E[2]],bias:T,activation:_,preluActivationWeights:C,leakyreluAlpha:M})];case"Conv2DBackpropInput":case"Conv2dTranspose":var I=tO("outputShape",e,t,n),N=tO("strides",e,t,n),A=oO(e,t,n);return[Ub(tO("x",e,t,n),tO("filter",e,t,n),I,[N[1],N[2]],A)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var R=tO("strides",e,t,n),O=oO(e,t,n),D=tO("dilations",e,t,n),L=tO("dataFormat",e,t,n).toUpperCase();return[Kb(tO("input",e,t,n),tO("filter",e,t,n),[R[1],R[2]],O,L,[D[1],D[2]])];case"Conv3D":var P=tO("strides",e,t,n),F=tO("pad",e,t,n),j=tO("dataFormat",e,t,n).toUpperCase(),z=tO("dilations",e,t,n);return[Wb(tO("x",e,t,n),tO("filter",e,t,n),[P[1],P[2],P[3]],F,j,[z[1],z[2],z[3]])];case"AvgPool":var B=tO("strides",e,t,n),U=tO("pad",e,t,n),W=tO("kernelSize",e,t,n);return[mb(tO("x",e,t,n),[W[1],W[2]],[B[1],B[2]],U)];case"MaxPool":var V=tO("strides",e,t,n),Z=tO("pad",e,t,n),H=tO("kernelSize",e,t,n);return[Yx(tO("x",e,t,n),[H[1],H[2]],[V[1],V[2]],Z)];case"MaxPoolWithArgmax":var G=tO("strides",e,t,n),q=tO("pad",e,t,n),X=tO("kernelSize",e,t,n),Y=tO("includeBatchInIndex",e,t,n),K=Qx(tO("x",e,t,n),[X[1],X[2]],[G[1],G[2]],q,Y);return[K.result,K.indexes];case"AvgPool3D":var Q=tO("strides",e,t,n),J=tO("pad",e,t,n),$=tO("kernelSize",e,t,n);return[vb(tO("x",e,t,n),[$[1],$[2],$[3]],[Q[1],Q[2],Q[3]],J)];case"MaxPool3D":var ee=tO("strides",e,t,n),te=tO("pad",e,t,n),ne=tO("kernelSize",e,t,n);return[Kx(tO("x",e,t,n),[ne[1],ne[2],ne[3]],[ee[1],ee[2],ee[3]],te)];case"Dilation2D":var re=tO("strides",e,t,n),ae=tO("pad",e,t,n),ie=tO("dilations",e,t,n),oe=re[1],se=re[2],ue=ie[1],le=ie[2];return[Jb(tO("x",e,t,n),tO("filter",e,t,n),[oe,se],ae,[ue,le],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"creation":return Oy((function(){return function(e,t,n){switch(e.op){case"Fill":var r=tO("shape",e,t,n),a=tO("dtype",e,t,n);return[fx(r,tO("value",e,t,n),a)];case"LinSpace":return[Cx(tO("start",e,t,n),tO("stop",e,t,n),tO("num",e,t,n))];case"Multinomial":var i=tO("logits",e,t,n),o=tO("numSamples",e,t,n),s=tO("seed",e,t,n);return[cw(i,o,s)];case"OneHot":var u=tO("indices",e,t,n),l=tO("depth",e,t,n),c=tO("onValue",e,t,n),d=tO("offValue",e,t,n);return[hw(u,l,c,d)];case"Ones":return[tw(tO("shape",e,t,n),tO("dtype",e,t,n))];case"OnesLike":return[pw(tO("x",e,t,n))];case"RandomUniform":return[Rw(tO("shape",e,t,n),tO("minval",e,t,n),tO("maxval",e,t,n),tO("dtype",e,t,n))];case"Range":return[Ow(tO("start",e,t,n),tO("stop",e,t,n),tO("step",e,t,n),tO("dtype",e,t,n))];case"TruncatedNormal":var h=tO("shape",e,t,n),p=tO("mean",e,t,n),f=tO("stdDev",e,t,n),m=tO("seed",e,t,n);return[wk(h,p,f,tO("dtype",e,t,n),m)];case"Zeros":return[ew(tO("shape",e,t,n),tO("dtype",e,t,n))];case"ZerosLike":return[rx(tO("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"dynamic":return nD(e,t,n);case"evaluation":return Oy((function(){return function(e,t,n){switch(e.op){case"TopKV2":var r=tO("x",e,t,n),a=tO("k",e,t,n),i=tO("sorted",e,t,n),o=xk(r,a,i);return[o.values,o.indices];case"Unique":var s=tO("x",e,t,n),u=kk(s);return[u.values,u.indices];case"UniqueV2":var l=tO("x",e,t,n),c=tO("axis",e,t,n),d=kk(l,c);return[d.values,d.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"image":return Oy((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=tO("images",e,t,n),a=tO("size",e,t,n),i=tO("alignCorners",e,t,n),o=tO("halfPixelCenters",e,t,n);return[tE.resizeBilinear(r,[a[0],a[1]],i,o)];case"ResizeNearestNeighbor":var s=tO("images",e,t,n),u=tO("size",e,t,n),l=tO("alignCorners",e,t,n),c=tO("halfPixelCenters",e,t,n);return[tE.resizeNearestNeighbor(s,[u[0],u[1]],l,c)];case"CropAndResize":var d=tO("image",e,t,n),h=tO("boxes",e,t,n),p=tO("boxInd",e,t,n),f=tO("cropSize",e,t,n),m=tO("method",e,t,n),v=tO("extrapolationValue",e,t,n);return[tE.cropAndResize(d,h,p,f,m,v)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"graph":return Oy((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=tO("default",e,t,n);return[nO(e.name,t,n)||r];case"Placeholder":return[nO(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[sO(tO("x",e,t,n))];case"IdentityN":return tO("x",e,t,n).map((function(e){return sO(e)}));case"Shape":return[mk(tO("x",e,t,n).shape,"int32")];case"ShapeN":return tO("x",e,t,n).map((function(e){return mk(e.shape)}));case"Size":return[jy(tO("x",e,t,n).size,"int32")];case"Rank":return[jy(tO("x",e,t,n).rank,"int32")];case"NoOp":return[jy(1)];case"Print":var a=tO("x",e,t,n),i=tO("data",e,t,n),o=tO("message",e,t,n),s=tO("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(var u=0;u<i.length;u++)console.log(Array.prototype.slice.call(i[u].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"logical":return Oy((function(){return function(e,t,n){switch(e.op){case"Equal":return[tx(tO("a",e,t,n),tO("b",e,t,n))];case"NotEqual":return[dw(tO("a",e,t,n),tO("b",e,t,n))];case"Greater":return[gx(tO("a",e,t,n),tO("b",e,t,n))];case"GreaterEqual":return[yx(tO("a",e,t,n),tO("b",e,t,n))];case"Less":return[Ex(tO("a",e,t,n),tO("b",e,t,n))];case"LessEqual":return[Tx(tO("a",e,t,n),tO("b",e,t,n))];case"LogicalAnd":return[Hx(tO("a",e,t,n),tO("b",e,t,n))];case"LogicalNot":return[Gx(tO("a",e,t,n))];case"LogicalOr":return[qx(tO("a",e,t,n),tO("b",e,t,n))];case"Select":case"SelectV2":return[nx(tO("condition",e,t,n),tO("a",e,t,n),tO("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"matrices":return Oy((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[yb(tO("a",e,t,n),tO("b",e,t,n),tO("transposeA",e,t,n),tO("transposeB",e,t,n))];case"Einsum":return[ox.apply(S,[tO("equation",e,t,n)].concat((0,_.Z)(tO("tensors",e,t,n))))];case"Transpose":return[Ak(tO("x",e,t,n),tO("perm",e,t,n))];case"_FusedMatMul":var r=tO("fusedOps",e,t,n),a=(0,U.Z)(r,2),i=a[0],o=a[1],s="biasadd"===i,u="prelu"===o,l=tO("numArgs",e,t,n),c=tO("leakyreluAlpha",e,t,n);if(s){if(u&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var d=tO("args",e,t,n),h=(0,U.Z)(d,2),p=h[0],f=h[1];return[eS({a:tO("a",e,t,n),b:tO("b",e,t,n),transposeA:tO("transposeA",e,t,n),transposeB:tO("transposeB",e,t,n),bias:p,activation:o,preluActivationWeights:f,leakyreluAlpha:c})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"normalization":return Oy((function(){return function(e,t,n){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Tb(tO("x",e,t,n),tO("mean",e,t,n),tO("variance",e,t,n),tO("offset",e,t,n),tO("scale",e,t,n),tO("epsilon",e,t,n))];case"LRN":return[_x(tO("x",e,t,n),tO("radius",e,t,n),tO("bias",e,t,n),tO("alpha",e,t,n),tO("beta",e,t,n))];case"Softmax":return[nk(tO("x",e,t,n))];case"LogSoftmax":return[Px(tO("x",e,t,n))];case"SparseToDense":return[jk(tO("sparseIndices",e,t,n),tO("outputShape",e,t,n),tO("sparseValues",e,t,n),tO("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"reduction":return Oy((function(){return function(e,t,n){switch(e.op){case"Max":var r=tO("axis",e,t,n),a=tO("keepDims",e,t,n);return[Ox(tO("x",e,t,n),r,a)];case"Mean":var i=tO("axis",e,t,n),o=tO("keepDims",e,t,n);return[$x(tO("x",e,t,n),i,o)];case"Min":var s=tO("axis",e,t,n),u=tO("keepDims",e,t,n);return[rw(tO("x",e,t,n),s,u)];case"Sum":var l=tO("axis",e,t,n),c=tO("keepDims",e,t,n);return[Lx(tO("x",e,t,n),l,c)];case"All":var d=tO("axis",e,t,n),h=tO("keepDims",e,t,n);return[Hy(tO("x",e,t,n),d,h)];case"Any":var p=tO("axis",e,t,n),f=tO("keepDims",e,t,n);return[Gy(tO("x",e,t,n),p,f)];case"ArgMax":var m=tO("axis",e,t,n);return[qy(tO("x",e,t,n),m)];case"ArgMin":var v=tO("axis",e,t,n);return[Xy(tO("x",e,t,n),v)];case"Prod":var g=tO("axis",e,t,n),y=tO("keepDims",e,t,n);return[Ew(tO("x",e,t,n),g,y)];case"Cumsum":var b=tO("axis",e,t,n),x=tO("exclusive",e,t,n),w=tO("reverse",e,t,n);return[qb(tO("x",e,t,n),b,x,w)];case"Bincount":var k=tO("x",e,t,n),S=tO("weights",e,t,n),E=tO("size",e,t,n);return[Ib(k,S,E)];case"DenseBincount":var T=tO("x",e,t,n),C=tO("weights",e,t,n),_=tO("size",e,t,n),M=tO("binaryOutput",e,t,n);return[Xb(T,C,_,M)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"slice_join":return Oy((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=tO("n",e,t,n),a=tO("axis",e,t,n),i=tO("tensors",e,t,n);return i=i.slice(0,r),[gb(i,a)];case"Gather":var o=tO("x",e,t,n),s=tO("indices",e,t,n);return[vx(o,Vg(s,"int32"),0)];case"GatherV2":var u=tO("axis",e,t,n),l=tO("batchDims",e,t,n),c=tO("x",e,t,n),d=tO("indices",e,t,n);return[vx(c,Vg(d,"int32"),u,l)];case"Reverse":for(var h=tO("dims",e,t,n),p=[],f=0;f<h.length;f++)h[f]&&p.push(f);var m=tO("x",e,t,n);return[jw(m,p)];case"ReverseV2":var v=tO("axis",e,t,n),g=tO("x",e,t,n);return[jw(g,v)];case"Slice":var y=tO("begin",e,t,n),b=tO("size",e,t,n);return[wb(tO("x",e,t,n),y,b)];case"StridedSlice":var x=tO("begin",e,t,n),w=tO("end",e,t,n),k=tO("strides",e,t,n),S=tO("beginMask",e,t,n),E=tO("endMask",e,t,n),T=tO("ellipsisMask",e,t,n),C=tO("newAxisMask",e,t,n),_=tO("shrinkAxisMask",e,t,n),M=tO("x",e,t,n);return[pk(M,x,w,k,S,E,T,C,_)];case"Pack":return Oy((function(){var r=tO("axis",e,t,n),a=tO("tensors",e,t,n),i=a[0].shape,o=ck(a[0]).shape,s=a.map((function(e){var t=Id(e.shape,i);if(!t&&!Id(ck(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:fb(e,i)}));return[dk(s,r)]}));case"Unpack":var I=tO("axis",e,t,n),N=tO("tensor",e,t,n);return Ek(N,I);case"Tile":var A=tO("reps",e,t,n);return[hx(tO("x",e,t,n),A)];case"Split":case"SplitV":var R=tO("axis",e,t,n),O=tO("numOrSizeSplits",e,t,n),D=tO("x",e,t,n);return ok(D,O,R);case"ScatterNd":var L=tO("indices",e,t,n),P=tO("values",e,t,n),F=tO("shape",e,t,n);return[Fk(L,P,F)];case"GatherNd":var j=tO("x",e,t,n),z=tO("indices",e,t,n);return[zk(j,z)];case"SparseToDense":var B=tO("sparseIndices",e,t,n),U=tO("outputShape",e,t,n),W=tO("sparseValues",e,t,n),V=tO("defaultValue",e,t,n);return[jk(B,W,U,W.dtype===V.dtype?V:Vg(V,W.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"sparse":return Oy((function(){return function(e,t,n){switch(e.op){case"SparseFillEmptyRows":var r=aE.sparseFillEmptyRows(tO("indices",e,t,n),tO("values",e,t,n),tO("denseShape",e,t,n),tO("defaultValue",e,t,n));return[r.outputIndices,r.outputValues,r.emptyRowIndicator,r.reverseIndexMap];case"SparseReshape":var a=aE.sparseReshape(tO("inputIndices",e,t,n),tO("inputShape",e,t,n),tO("newShape",e,t,n));return[a.outputIndices,a.outputShape];case"SparseSegmentMean":return[aE.sparseSegmentMean(tO("data",e,t,n),tO("indices",e,t,n),tO("segmentIds",e,t,n))];case"SparseSegmentSum":return[aE.sparseSegmentSum(tO("data",e,t,n),tO("indices",e,t,n),tO("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"spectral":return Oy((function(){return function(e,t,n){switch(e.op){case"FFT":return[rk(tO("x",e,t,n))];case"IFFT":return[ak(tO("x",e,t,n))];case"RFFT":return[sk(tO("x",e,t,n))];case"IRFFT":return[ik(tO("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"string":return Oy((function(){return function(e,t,n){switch(e.op){case"StringNGrams":var r=iE.stringNGrams(tO("data",e,t,n),tO("dataSplits",e,t,n),tO("separator",e,t,n),tO("nGramWidths",e,t,n),tO("leftPad",e,t,n),tO("rightPad",e,t,n),tO("padWidth",e,t,n),tO("preserveShortSequences",e,t,n));return[r.nGrams,r.nGramsSplits];case"StringSplit":var a=iE.stringSplit(tO("input",e,t,n),tO("delimiter",e,t,n),tO("skipEmpty",e,t,n));return[a.indices,a.values,a.shape];case"StringToHashBucketFast":return[iE.stringToHashBucketFast(tO("input",e,t,n),tO("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"transformation":return Oy((function(){return function(e,t,n){switch(e.op){case"Cast":return[Vg(tO("x",e,t,n),tO("dtype",e,t,n))];case"ExpandDims":var r=tO("axis",e,t,n);return[cx(tO("x",e,t,n),r)];case"Squeeze":var a=tO("axis",e,t,n);return[ck(tO("x",e,t,n),a)];case"Reshape":return[fb(tO("x",e,t,n),tO("shape",e,t,n))];case"MirrorPad":return[iw(tO("x",e,t,n),tO("padding",e,t,n),tO("mode",e,t,n))];case"PadV2":case"Pad":return[mw(tO("x",e,t,n),tO("padding",e,t,n),tO("constantValue",e,t,n))];case"SpaceToBatchND":var i=tO("blockShape",e,t,n),o=tO("paddings",e,t,n);return[xw(tO("x",e,t,n),i,o)];case"BatchToSpaceND":var s=tO("blockShape",e,t,n),u=tO("crops",e,t,n);return[Eb(tO("x",e,t,n),s,u)];case"DepthToSpace":var l=tO("blockSize",e,t,n),c=tO("dataFormat",e,t,n).toUpperCase();return[Yb(tO("x",e,t,n),l,c)];case"BroadcastTo":return[Ab(tO("x",e,t,n),tO("shape",e,t,n))];case"BroadcastArgs":return[Nb(tO("s0",e,t,n),tO("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"hash_table":return aD(e,t,n,r);case"custom":var a=eO(e.op);if(a&&a.customExecutor)return a.customExecutor(new WO(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return nh(a)?a.then((function(e){return[].concat(e)})):[].concat(a)}var oD=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};M(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return(0,I.Z)(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function sD(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,l=Object.keys(e).map((function(e){return iO(e)[0]})),c=[];null!=r&&(c=r.map((function(e){return iO(e.name)[0]})));for(var d=(0,_.Z)(t);d.length>0;){var h=d.pop();(dD(h)||hD(h)||pD(h))&&null==o&&(s=(o=h).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(h.name),null==n[h.name]&&(-1===l.indexOf(h.name)&&-1===c.indexOf(h.name)&&(0!==h.inputs.length?h.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),d.push(e))})):i.push(h.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var uD=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],lD=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],cD=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function dD(e){return uD.indexOf(e.op)>=0}function hD(e){return lD.indexOf(e.op)>=0}function pD(e){return cD.indexOf(e.op)>=0}var fD=function(){function e(t,n){var r=this;M(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return(0,I.Z)(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,(0,_.Z)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=sD(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(e){return iO(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;o.forEach((function(e){r.has(e.name)&&i.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&i.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&i.push(e)}));for(var u=new Set,l=[];i.length>0;){var c=i.pop();u.add(c.name),t[c.name]||l.push(c),c.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&i.push(e)}))}return l}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[iO(e)[0]]})),i=t.map((function(e){return iO(e)[0]})),o=i.map((function(e){return n.graph.nodes[e]}));this.resetIntermediateTensors(),0===o.length&&(o=this._outputs);var s=this.getCompilationKey(a,o),u=this.compiledMap.get(s);null==u&&(u=this.compile(e,o),this.compiledMap.set(s,u));var l={},c={};return Oy((function(){var r=new oD(n.weightMap,l,c,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=iO(t),r=(0,U.Z)(n,2),i=r[0],o=[];o[r[1]]=e[t],a[i]=o}));for(var o=n.getFrozenTensorIds(a),s={},d=0;d<u.length;d++){var h=u[d];if(!a[h.name]){var p=iD(h,a,r,n._resourceManager);if(nh(p))throw new Error("The execution of the op '".concat(h.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[h.name]=p,n.checkTensorForDisposal(h.name,h,a,r,o,i,s)}}return null==n.parent&&r.dispose(o),t.map((function(e){return nO(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){var s=this;"control"!==t.category&&-1===i.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var i=function(e,t,n){return t[aO(e,n.currentContextId)]}(e.name,n,r);null!=i&&i.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var n=o[e.id];if(1===n){if(s.keepTensorForDebug){var i=rO(t.name,r),u=(0,U.Z)(i,2),l=u[0],c=u[1];s.intermediateTensors[l]||(s.intermediateTensors[l]=[]),s.intermediateTensors[l][c]=e}else e.dispose();delete o[e.id]}else null!=n&&o[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){var e=this;this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach((function(t){return e.intermediateTensors[t].forEach((function(e){return e.dispose()}))})),this.disposeTensorsMap())}},{key:"disposeTensorsMap",value:function(){var e=this;this.tensorsMap&&Object.keys(this.tensorsMap).forEach((function(t){e.tensorsMap[t].forEach((function(t){!t||t.kept||t.isDisposed||e.keepIds.has(t.id)||t.dispose()}))}))}},{key:"getIntermediateTensors",value:function(){return this.tensorsMap}},{key:"resetIntermediateTensors",value:function(){for(var e in this.intermediateTensors)this.intermediateTensors[e].forEach((function(e){return e.dispose()})),delete this.intermediateTensors[e]}},{key:"_executeAsync",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a,i,o,s,u,l,c=this,d=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=d.length>3&&void 0!==d[3]?d[3]:{},i=d.length>4&&void 0!==d[4]?d[4]:{},(r=d.length>2&&void 0!==d[2]&&d[2])||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=oh().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(GK){console.warn(GK.message)}return this.resetIntermediateTensors(),o=new oD(this.weightMap,a,i,this.functionExecutorMap),e.next=9,this.executeWithControlFlow(t,o,n,r);case 9:return this.tensorsMap=e.sent,s=n.map((function(e){return nO(e,c.tensorsMap,o)})),u=s.map((function(e){return e.id})),l=Object.keys(t).map((function(e){return t[e].id})),this.keepIds=new Set([].concat((0,_.Z)(u),(0,_.Z)(l),(0,_.Z)(this.weightIds))),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&o.dispose(this.keepIds),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=Jn(Kn().mark((function e(t,n,r){var a,i=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=Jn(Kn().mark((function e(t,n,r,a){var i,o,s,u,l,c,d,h,p,f,m,v,g,y,b,x,w,k=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return k.graph.nodes[iO(e)[0]]})),s=r.map((function(e){return iO(e)[0]})),0===(u=s.map((function(e){return k.graph.nodes[e]}))).length&&(u=this._outputs),l=sD(t,u,this.weightMap,this._initNodes),c=l.usedNodes,d=l.missingInputs,h=l.dynamicNode,p=l.syncInputs,f=[].concat((0,_.Z)(o),(0,_.Z)(this.graph.weights),(0,_.Z)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=iO(e),r=(0,U.Z)(n,2),a=r[0],i=[];i[r[1]]=t[e],m[a]=i})),v={},g=this.getFrozenTensorIds(m),y={};case 12:if(!(f.length>0)){e.next=18;break}return b=this.processStack(o,f,n,m,y,g,s,v,c),e.next=16,Promise.all(b);case 16:e.next=12;break;case 18:if(null!=h||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((x=u.filter((function(e){return!dD(e)&&!nO(e.name,m,n)})).map((function(e){return e.name}))).length>0)){e.next=24;break}throw w="",null!=h&&(w="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(x,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(d,"]. ").concat(w));case 24:return e.abrupt("return",m);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,s,u){for(var l=this,c=[],d=function(){var e=t.pop();n.currentContext=e.contexts;var d="";if("Enter"===e.node.op&&tO("isConstant",e.node,r,n)){var h=rO(e.node.name,n),p=(0,U.Z)(h,1);d=p[0]}if(null==r[e.node.name]){var f=iD(e.node,r,n,l._resourceManager);if(!d){var m=rO(e.node.name,n),v=(0,U.Z)(m,1);d=v[0]}var g=n.currentContext;nh(f)?c.push(f.then((function(c){return r[d]=c,n.currentContext=g,l.checkTensorForDisposal(d,e.node,r,n,i,o,s),l.processChildNodes(e.node,t,n,r,a,u),c}))):(r[d]=f,l.checkTensorForDisposal(d,e.node,r,n,i,o,s),l.processChildNodes(e.node,t,n,r,a,u))}else l.processChildNodes(e.node,t,n,r,a,u)};t.length>0;)d();return c}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=rO(e.name,n),s=(0,U.Z)(o,1)[0];!a[s]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!nO(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!nO(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=iO(n),i=(0,U.Z)(a,1)[0],o=t.graph.nodes[i];if(o.attrParams.shape&&o.attrParams.shape.value){var s=o.attrParams.shape.value,u=s.length===r.shape.length&&r.shape.every((function(e,t){return-1===s[t]||s[t]===e}));Ed(u,(function(){return"The shape of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be [".concat(s,"], but was ")+"[".concat(r.shape,"]")}))}o.attrParams.dtype&&o.attrParams.dtype.value&&Ed(r.dtype===o.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(o.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=iO(e),r=(0,U.Z)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=iO(e),r=(0,U.Z)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),mD=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};M(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return(0,I.Z)(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),vD="?tfjs-format=file",gD="model.json",yD=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};M(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new mD}return(0,I.Z)(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=sy(e,this.loadOptions);else{var t=rg(e,this.loadOptions);if(0===t.length)t.push(sy(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.findIOHandler(),null!=this.handler.load){e.next=3;break}throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,this.handler.load();case 5:return t=e.sent,e.abrupt("return",this.loadSync(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadSync",value:function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var r=Bv(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new fD(_O.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=_O.Instance.transformGraph(e.modelInitializer);this.initializer=new fD(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var e=Jn(Kn().mark((function e(t,n){var r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=ng(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){return this.execute(e,this.outputNodes)}},{key:"normalizeInputs",value:function(e){if(!(e instanceof tv)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=Jn(Kn().mark((function e(t,n){var r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=4,this.executor.executeAsync(t,n);case 4:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),e}();function bD(e){return xD.apply(this,arguments)}function xD(){return xD=Jn(Kn().mark((function e(t){var n,r,a=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t="".concat(t).concat(gD).concat(vD)),r=new yD(t,n),e.next=8,r.load();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),xD.apply(this,arguments)}function wD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(TD(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=wD(e[o],t,n,r);i[o]=s}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function kD(e){return SD(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:ED)}function SD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(TD(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=e.map((function(e){return e[r]})),o=SD(a,t,n);i[r]=o};for(var s in r)o(s);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function ED(e){return null===e?null:TD(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function TD(e){var t=!1;oh().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof n(4977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof tv)&&!(e instanceof Promise)&&!t)}function CD(e){return function(e,t){return wD(e,t)}(e,_D)}function _D(e){return e instanceof tv?{value:e.clone(),recurse:!1}:TD(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var MD=function(){function e(t){if(M(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return(0,I.Z)(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=G(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(sde){n.e(sde)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),ID=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.call(this,n.INITIAL_CAPACITY)}return(0,I.Z)(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){pl(R(n.prototype),"isFull",this).call(this)&&this.expand(),pl(R(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){pl(R(n.prototype),"isFull",this).call(this)&&this.expand(),pl(R(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(MD);function ND(e){return new LD(e)}function AD(e,t){return new GD(e,t)}ID.INITIAL_CAPACITY=32;var RD,OD=function(){function e(){M(this,e)}return(0,I.Z)(e,[{key:"toArray",value:function(){var e=Jn(Kn().mark((function e(){var t,n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Jn(Kn().mark((function e(){var t,n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=Jn(Kn().mark((function e(t){var n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new WD(this,e)}},{key:"filter",value:function(e){return new BD(this,e)}},{key:"map",value:function(e){return new UD(this,e)}},{key:"mapAsync",value:function(e){return new VD(this,e)}},{key:"serialMapAsync",value:function(e){return new VD(this,e).serial()}},{key:"flatmap",value:function(e){return new HD(this,e)}},{key:"forEachAsync",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){return new zD(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ED;return this.rowMajorBatch(e,t).map((function(e){return kD(e,n)}))}},{key:"concatenate",value:function(e,t){return new GD(new DD([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new jD(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new FD(this,e)}},{key:"prefetch",value:function(e){return new qD(this,e)}},{key:"shuffle",value:function(e,t){return new XD(this,e,t)}},{key:"serial",value:function(){return new PD(this)}}]),e}(),DD=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).items=e,r.trav=0,r}return(0,I.Z)(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:CD(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(OD),LD=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).nextFn=e,r}return(0,I.Z)(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(OD),PD=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return(0,I.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=Jn(Kn().mark((function e(){var t=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(OD),FD=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,I.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=Jn(Kn().mark((function e(){var t=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:Dy(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(OD),jD=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return(0,I.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(OD),zD=function(e){A(n,e);var t=F(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return M(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,I.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=Jn(Kn().mark((function e(){var t=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Jn(Kn().mark((function e(){var t,n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(OD),BD=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,I.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=Jn(Kn().mark((function e(){var t=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:Dy(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(OD),UD=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,I.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a,i,o,s;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=fv(t.value),r=this.transform(t.value),a=fv(r),i=G(n);try{for(i.s();!(o=i.n()).done;)pv(s=o.value,a)||s.dispose()}catch(sde){i.e(sde)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(OD),WD=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return(0,I.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=Jn(Kn().mark((function e(){var t=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(OD),VD=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,I.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a,i,o,s;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=fv(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=fv(r),i=G(n);try{for(i.s();!(o=i.n()).done;)pv(s=o.value,a)||s.dispose()}catch(sde){i.e(sde)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(OD),ZD=function(e){A(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).outputQueue=new ID,e.lastRead=Promise.resolve({value:null,done:!1}),e}return(0,I.Z)(n,[{key:"next",value:function(){var e=Jn(Kn().mark((function e(){var t=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(OD),HD=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return(0,I.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a,i,o,s;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=fv(t.value),r=this.transform(t.value),a=fv(r),this.outputQueue.pushAll(r),i=G(n);try{for(i.s();!(o=i.n()).done;)pv(s=o.value,a)||s.dispose()}catch(sde){i.e(sde)}finally{i.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ZD),GD=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return(0,I.Z)(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=Jn(Kn().mark((function e(t){var n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(OD);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(RD||(RD={}));var qD=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new MD(r),a}return(0,I.Z)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(OD),XD=function(e){A(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=Cw.alea(a||zm().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return(0,I.Z)(n,[{key:"next",value:function(){var e=Jn(Kn().mark((function e(){var t=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=Jn(Kn().mark((function e(){var t,n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(qD),YD=function(){function e(){M(this,e),this.size=null}return(0,I.Z)(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return Ed(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),KD(Jn(Kn().mark((function t(){return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,QD));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,KD(Jn(Kn().mark((function t(){return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,KD(Jn(Kn().mark((function t(){return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return Oy((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return KD(Jn(Kn().mark((function n(){return Kn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return Oy((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return KD(Jn(Kn().mark((function n(){return Kn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return KD(Jn(Kn().mark((function n(){return Kn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,KD(Jn(Kn().mark((function t(){var r;return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=ND(Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",AD(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,KD(Jn(Kn().mark((function t(){return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=Cw.alea(t||zm().toString());return KD(Jn(Kn().mark((function t(){var i;return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,KD(Jn(Kn().mark((function t(){return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function KD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){A(a,n);var r=F(a);function a(){var e;return M(this,a),(e=r.apply(this,arguments)).size=t,e}return(0,I.Z)(a,[{key:"iterator",value:function(){var t=Jn(Kn().mark((function t(){return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(YD))}function QD(e){if(null===e)return null;var t,n=e[0];return null==(t=n)||function(e){return null===e||"object"!==typeof e&&"function"!==typeof e}(t)||Array.isArray(t)||"object"===typeof t&&t instanceof tv||Bd(t)?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof tv?dk(e):Lv(e)}(e),recurse:!1}:{value:null,recurse:!0}}YD.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function JD(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Ed("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var $D=Ck,eL=function(e){A(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new vd((0,L.Z)(e),Ay()),e}return(0,I.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,oh().get("IS_NODE")&&fm("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Wd(n[0])){var a=n.map((function(e){return Bm(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?PE(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return Um(e)}))}catch(l4){throw new Error("Failed to decode encoded string bytes into utf-8")}return Wg(e.shape,e.dtype,n)}},{key:"makeOutput",value:function(e,t,n){var r=this.write(e,t,n);return Ay().makeTensorFromDataId(r,t,n,this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e).complexTensorInfos;null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=Jn(Kn().mark((function e(t){var n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zm(),t(),r=zm()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){JD([e],"where");var t=this.readSync(e.dataId);return $D(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return pl(R(n.prototype),"epsilon",this).call(this)}}]),n}(gd);eL.nextDataId=0;function tL(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(JD(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=o,l=u.data.get(s.dataId).values,c=Md(s.shape),d=n||s.dtype,h=jd(d,c),p=0;p<c;++p)h[p]=t(l[p],i);return u.makeTensorInfo(s.shape,d,h)}}function nL(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(JD(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=o,l=u.data.get(s.dataId).values,c=n||s.dtype,d=t(l,c,i);return u.makeTensorInfo(s.shape,c,d)}}Py("cpu",(function(){return new eL}),1);var rL=tL(op,(function(e){return e>=0?e:Math.exp(e)-1})),aL={kernelName:op,backendName:"cpu",kernelFunc:rL};function iL(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var oL={kernelName:Sp,backendName:"cpu",kernelFunc:iL};function sL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;JD([a],"leakyRelu");for(var o=Md(a.shape),s=n.data.get(a.dataId).values,u=Fd("float32",o),l=0;l<s.length;l++)u[l]=s[l]<0?i*s[l]:s[l];return n.makeTensorInfo(a.shape,"float32",u)}var uL={kernelName:Ip,backendName:"cpu",kernelFunc:sL};function lL(e){return function(t,n,r,a,i){var o=my(t,n),s=o.length,u=qd(o),l=Fd(i,Md(o)),c=t.length,d=n.length,h=qd(t),p=qd(n),f=py(t,o),m=py(n,o);if(f.length+m.length===0)for(var v=0;v<l.length;++v)l[v]=e(r[v%r.length],a[v%a.length]);else for(var g=function(){var t=th(y,s,u),n=t.slice(-c);f.forEach((function(e){return n[e]=0}));var i=eh(n,c,h),o=t.slice(-d);m.forEach((function(e){return o[e]=0}));var v=eh(o,d,p);l[y]=e(r[i],a[v])},y=0;y<l.length;++y)g();return[l,o]}}var cL=lL((function(e,t){return e<0?t*e:e}));function dL(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;JD([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=cL(r.shape,a.shape,i,o,"float32"),u=(0,U.Z)(s,2),l=u[0],c=u[1];return n.makeTensorInfo(c,"float32",l)}var hL={kernelName:df,backendName:"cpu",kernelFunc:dL},pL=tL(vf,(function(e){return Math.max(0,e)})),fL={kernelName:vf,backendName:"cpu",kernelFunc:pL},mL=tL(kf,(function(e){return Math.min(Math.max(0,e),6)})),vL={kernelName:kf,backendName:"cpu",kernelFunc:mL};function gL(e){return function(t,n,r){for(var a=Fd(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}var yL=gL((function(e){return 1/(1+Math.exp(-e))})),bL=tL(Of,(function(e){return 1/(1+Math.exp(-e))})),xL={kernelName:Of,backendName:"cpu",kernelFunc:bL};function wL(e,t,n,r,a){if("linear"===n)return iL({inputs:{x:t},backend:e});if("relu"===n)return pL({inputs:{x:t},backend:e});if("elu"===n)return rL({inputs:{x:t},backend:e});if("relu6"===n)return mL({inputs:{x:t},backend:e});if("prelu"===n)return dL({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return sL({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return bL({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function kL(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var SL={kernelName:Ph,backendName:"cpu",kernelFunc:kL};function EL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n)return kL({inputs:{real:EL(e,t,"float32"),imag:EL(e,t,"float32")},backend:e});var r=Qd(Md(t),n);return e.makeTensorInfo(t,n,r)}function TL(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var CL={kernelName:ff,backendName:"cpu",kernelFunc:TL};function _L(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return iL({inputs:{x:a},backend:n});var o=EL(n,a.shape,a.dtype),s=_L({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=kL({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var l=TL({inputs:{input:a},backend:n}),c=_L({inputs:{x:l},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(l),c}if(!zd(a.dtype,i)){var d=iL({inputs:{x:a},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:i}}if("int32"===i){var h=n.data.get(a.dataId).values,p=Int32Array.from(h);return n.makeTensorInfo(a.shape,"int32",p)}if("bool"===i){var f=n.data.get(a.dataId).values,m=jm([0],a.dtype),v=lL((function(e,t){return e!==t?1:0}))(a.shape,[],f,m,"bool"),g=(0,U.Z)(v,2),y=g[0],b=g[1];return n.makeTensorInfo(b,"bool",y)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}var ML={kernelName:Oh,backendName:"cpu",kernelFunc:_L};function IL(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,u=i;JD([o,s],e);var l=u.data.get(o.dataId).values,c=u.data.get(s.dataId).values,d="string"===o.dtype?rT(l):l,h="string"===o.dtype?rT(c):c,p=r||o.dtype,f=t(o.shape,s.shape,d,h,p),m=(0,U.Z)(f,2),v=m[0],g=m[1];return u.makeTensorInfo(g,p,v)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,u=i;if("complex64"===o.dtype||"complex64"===s.dtype){var l=_L({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),c=u.data.get(l.dataId),d=c.complexTensorInfos.real,h=c.complexTensorInfos.imag,p=u.data.get(d.dataId).values,f=u.data.get(h.dataId).values,m=_L({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),v=u.data.get(m.dataId),g=v.complexTensorInfos.real,y=v.complexTensorInfos.imag,b=u.data.get(g.dataId).values,x=u.data.get(y.dataId).values,w=n(o.shape,s.shape,p,f,b,x),k=(0,U.Z)(w,3),S=k[0],E=k[1],T=k[2],C=u.makeTensorInfo(T,"float32",S),_=u.makeTensorInfo(T,"float32",E),M=kL({inputs:{real:C,imag:_},backend:u});return u.disposeIntermediateTensorInfo(l),u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(C),u.disposeIntermediateTensorInfo(_),M}var I=u.data.get(o.dataId).values,N=u.data.get(s.dataId).values,A=r||o.dtype,R=t(o.shape,s.shape,I,N,A),O=(0,U.Z)(R,2),D=O[0],L=O[1];return u.makeTensorInfo(L,A,D)}}function NL(e){return function(t,n,r,a,i,o){var s=my(t,n),u=Md(s),l=s.length,c=qd(s),d=Fd("float32",u),h=Fd("float32",u),p=py(t,s),f=py(n,s),m=PE(r,a),v=PE(i,o),g=t.length,y=qd(t),b=n.length,x=qd(n);if(p.length+f.length===0)for(var w=0;w<d.length;w++){var k=w%m.length,S=w%v.length,E=e(m[2*k],m[2*k+1],v[2*S],v[2*S+1]);d[w]=E.real,h[w]=E.imag}else for(var T=function(){var t=th(C,l,c),n=t.slice(-g);p.forEach((function(e){return n[e]=0}));var r=eh(n,g,y),a=t.slice(-b);f.forEach((function(e){return a[e]=0}));var i=eh(a,b,x),o=e(m[2*r],m[2*r+1],v[2*i],v[2*i+1]);d[C]=o.real,h[C]=o.imag},C=0;C<d.length;C++)T();return[d,h,s]}}var AL=lL((function(e,t){return e+t})),RL=NL((function(e,t,n,r){return{real:e+n,imag:t+r}})),OL=IL(fh,AL,RL),DL={kernelName:fh,backendName:"cpu",kernelFunc:OL};function LL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=Md(a.shape),s=Dd(i,o),u=Md(s);Ed(o===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var l=n.data.get(a.dataId);if(null!=l.complexTensorInfos){var c=l.complexTensorInfos.real,d=l.complexTensorInfos.imag;c.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var PL={kernelName:gf,backendName:"cpu",kernelFunc:LL};function FL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;JD([a,i],"matMul");var u=a.shape.length,l=i.shape.length,c=o?a.shape[u-2]:a.shape[u-1],d=s?i.shape[l-1]:i.shape[l-2],h=o?a.shape[u-1]:a.shape[u-2],p=s?i.shape[l-2]:i.shape[l-1],f=a.shape.slice(0,-2),m=i.shape.slice(0,-2),v=Md(f),g=Md(m),y=my(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,p]);Ed(c===d,(function(){return"Error in matMul: inner shapes (".concat(c,") and (")+"".concat(d,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")}));for(var b=s?[g,p,d]:[g,d,p],x=LL({inputs:{x:a},backend:n,attrs:{shape:o?[v,c,h]:[v,h,c]}}),w=LL({inputs:{x:i},backend:n,attrs:{shape:b}}),k=o?x.shape[1]:x.shape[2],S=o?x.shape[2]:x.shape[1],E=s?w.shape[1]:w.shape[2],T=Math.max(v,g),C=n.data.get(x.dataId).values,_=n.data.get(w.dataId).values,M=qd(x.shape),I=qd(w.shape),N=o?[M[0],1,M[1]]:[M[0],M[1],1],A=(0,U.Z)(N,3),R=A[0],O=A[1],D=A[2],L=s?[1,I[1],I[0]]:[I[1],1,I[0]],P=(0,U.Z)(L,3),F=P[0],j=P[1],z=P[2],B=S*E,W=Wg([T,S,E],x.dtype),V=W.values,Z=n.blockSize,H=0;H<T;H++)for(var G=0;G<S;G+=Z)for(var q=0;q<E;q+=Z)for(var X=0;X<k;X+=Z)for(var Y=Math.min(G+Z,S),K=Math.min(q+Z,E),Q=Math.min(X+Z,k),J=G;J<Y;J++)for(var $=q;$<K;$++){for(var ee=0,te=X;te<Q;te++){var ne=Math.min(H,v-1)*R,re=Math.min(H,g-1)*z;ee+=C[ne+J*O+te*D]*_[te*F+$*j+re]}V[H*B+(J*E+$)]+=ee}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(y,W.dtype,W.values)}var jL={kernelName:Ih,backendName:"cpu",kernelFunc:FL};var zL={kernelName:dm,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,u=a.b,l=a.bias,c=a.preluActivationWeights,d=o.transposeA,h=o.transposeB,p=o.activation,f=o.leakyreluAlpha,m=[];t=FL({inputs:{a:s,b:u},attrs:{transposeA:d,transposeB:h},backend:i}),l&&(n=OL({inputs:{a:t,b:l},backend:i}),m.push(t),t=n),p&&(r=wL(i,t,p,c,f),m.push(t),t=r);for(var v=0,g=m;v<g.length;v++){var y=g[v];i.disposeIntermediateTensorInfo(y)}return t}};function BL(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var UL={kernelName:dh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;JD(t,"abs");var r=new Float32Array(Md(t.shape));return r=BL(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},WL=tL(hh,(function(e){return Math.acos(e)})),VL={kernelName:hh,backendName:"cpu",kernelFunc:WL},ZL=tL(ph,(function(e){return Math.acosh(e)})),HL={kernelName:ph,backendName:"cpu",kernelFunc:ZL};var GL={kernelName:mh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;JD(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=Wg(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var u=a[s],l=0;l<o.length;l++)o[l]+=u[l];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function qL(e,t,n,r,a){for(var i=t.length,o=Md(t),s=qd(t),u=qd(a),l=Fd(n,Md(a)),c=0;c<o;++c){for(var d=th(c,i,s),h=new Array(d.length),p=0;p<h.length;p++)h[p]=d[r[p]];l[eh(h,i,u)]=e[c]}return l}function XL(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;JD(a,"transpose");for(var o=a.shape.length,s=new Array(o),u=0;u<s.length;u++)s[u]=a.shape[i[u]];var l=qL(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(l,s,a.dtype),shape:s,dtype:a.dtype}}var YL={kernelName:rm,backendName:"cpu",kernelFunc:XL};var KL={kernelName:vh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;JD(a,"all");var s=Ld(i,a.shape),u=s,l=Ux(u,a.shape.length),c=a;null!=l&&(c=XL({inputs:{x:a},backend:n,attrs:{perm:l}}),u=Vx(u.length,a.shape.length)),Bx("all",u,c.shape.length);for(var d=jx(c.shape,u),h=(0,U.Z)(d,2),p=h[0],f=Md(h[1]),m=Qd(Md(p),c.dtype),v=n.data.get(c.dataId).values,g=0;g<m.length;++g){for(var y=g*f,b=v[y],x=0;x<f;++x){var w=v[y+x];b=b&&w}m[g]=b}null!=l&&n.disposeIntermediateTensorInfo(c);var k=n.makeTensorInfo(p,c.dtype,m);if(o){var S=LL({inputs:{x:k},backend:n,attrs:{shape:zx(p,s)}});return n.disposeIntermediateTensorInfo(k),S}return k}};var QL={kernelName:gh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;JD(a,"any");var s=Ld(i,a.shape),u=s,l=Ux(u,a.shape.length),c=a;null!=l&&(c=XL({inputs:{x:a},backend:n,attrs:{perm:l}}),u=Vx(u.length,a.shape.length)),Bx("any",u,c.shape.length);for(var d=jx(c.shape,u),h=(0,U.Z)(d,2),p=h[0],f=Md(h[1]),m=Qd(Md(p),c.dtype),v=n.data.get(c.dataId).values,g=0;g<m.length;++g){for(var y=g*f,b=v[y],x=0;x<f;++x){var w=v[y+x];b=b||w}m[g]=b}null!=l&&n.disposeIntermediateTensorInfo(c);var k=n.makeTensorInfo(p,c.dtype,m);if(o){var S=LL({inputs:{x:k},backend:n,attrs:{shape:zx(p,s)}});return n.disposeIntermediateTensorInfo(k),S}return k}};var JL={kernelName:yh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;JD(a,"argMax");var o=Ld(i,a.shape),s=Ux(o,a.shape.length),u=a,l=[];null!=s&&(u=XL({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=Vx(o.length,u.shape.length)),Bx("argMax",o=[o[0]],u.shape.length);for(var c=jx(u.shape,o),d=(0,U.Z)(c,2),h=d[0],p=d[1],f=Qd(Md(h),"int32"),m=Md(p),v=n.data.get(u.dataId).values,g=0;g<f.length;++g){for(var y=g*m,b=v[y],x=0,w=0;w<m;++w){var k=v[y+w];k>b&&(b=k,x=w)}f[g]=x}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(h,"int32",f)}};var $L={kernelName:bh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;JD(a,"argMin");var o=Ld(i,a.shape),s=Ux(o,a.shape.length),u=a,l=[];null!=s&&(u=XL({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=Vx(o.length,u.shape.length)),Bx("argMin",o=[o[0]],u.shape.length);for(var c=jx(u.shape,o),d=(0,U.Z)(c,2),h=d[0],p=d[1],f=Qd(Md(h),"int32"),m=Md(p),v=n.data.get(u.dataId).values,g=0;g<f.length;++g){for(var y=g*m,b=v[y],x=0,w=0;w<m;++w){var k=v[y+w];k<b&&(b=k,x=w)}f[g]=x}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(h,"int32",f)}},eP=tL(xh,(function(e){return Math.asin(e)})),tP={kernelName:xh,backendName:"cpu",kernelFunc:eP},nP=tL(wh,(function(e){return Math.asinh(e)})),rP={kernelName:wh,backendName:"cpu",kernelFunc:nP},aP=tL(kh,(function(e){return Math.atan(e)})),iP={kernelName:kh,backendName:"cpu",kernelFunc:aP},oP=lL((function(e,t){return Math.atan2(e,t)})),sP=IL(Eh,oP),uP={kernelName:Eh,backendName:"cpu",kernelFunc:sP},lP=tL(Sh,(function(e){return Math.atanh(e)})),cP={kernelName:Sh,backendName:"cpu",kernelFunc:lP};function dP(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,c=a.effectiveFilterHeight,d=a.effectiveFilterWidth,h=a.padInfo.top,p=a.padInfo.left,f="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Wg(a.outShape,n),v=m.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var w=x*g,k=x*r[0],S=0;S<a.inChannels;++S)for(var E=0;E<a.outHeight;++E)for(var T=E*o-h,C=Math.max(0,T),_=Math.min(a.inHeight,c+T),M=w+E*y,I=0;I<a.outWidth;++I){for(var N=I*s-p,A=Math.max(0,N),R=Math.min(a.inWidth,d+N),O=f,D=0,L=0,P=C;P<_;P+=u){for(var F=k+P*r[1],j=A;j<R;j+=l){var z=e[F+j*r[2]+S];"max"===i&&z>O?O=z:"avg"===i&&(D+=z,L++)}if(isNaN(O))break}v[M+I*b+S]="avg"===i?D/L:O}return m}function hP(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Wg(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=Wg(t,n,e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var b=y*s-p,x=b;x<0;)x+=l;for(var w=Math.min(r.inHeight,d+b),k=0;k<r.outWidth;++k){for(var S=k*u-f,E=S;E<0;)E+=c;for(var T=Math.min(r.inWidth,h+S),C=Number.NEGATIVE_INFINITY,_=-1,M=x;M<w;M+=l)for(var I=M-b,N=E;N<T;N+=c){var A=N-S,R=m.get(v,M,N,g);R>C&&(C=R,_=a?i?((v*r.inHeight+M)*r.inWidth+N)*r.inChannels+g:(M*r.inWidth+N)*r.inChannels+g:I*h+A)}o.set(_,v,y,k,g)}}return o}function pP(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,l=a.dilationDepth,c=a.dilationHeight,d=a.dilationWidth,h=a.effectiveFilterDepth,p=a.effectiveFilterHeight,f=a.effectiveFilterWidth,m=a.padInfo.front,v=a.padInfo.top,g=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Wg(a.outShape,n),x=b.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],S=a.outShape[3]*a.outShape[4],E=a.outShape[4],T=0;T<a.batchSize;++T)for(var C=T*w,_=T*r[0],M=0;M<a.inChannels;++M)for(var I=0;I<a.outDepth;++I){for(var N=I*o-m,A=N;A<0;)A+=l;for(var R=Math.min(a.inDepth,h+N),O=C+I*k,D=0;D<a.outHeight;++D){for(var L=D*s-v,P=L;P<0;)P+=c;for(var F=Math.min(a.inHeight,p+L),j=O+D*S,z=0;z<a.outWidth;++z){for(var B=z*u-g,U=B;U<0;)U+=d;for(var W=Math.min(a.inWidth,f+B),V=j+z*E,Z=y,H=0,G=0,q=A;q<R;q+=l){for(var X=_+q*r[1],Y=P;Y<F;Y+=c){for(var K=X+Y*r[2],Q=U;Q<W;Q+=d){var J=e[K+Q*r[3]+M];if("max"===i&&J>Z?Z=J:"avg"===i&&(H+=J,G++),isNaN(Z))break}if(isNaN(Z))break}if(isNaN(Z))break}x[V+M]="avg"===i?H/G:Z}}}return b}var fP={kernelName:Th,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;JD(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Ed(db(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var l,c=tb(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Id(c.inShape,c.outShape))l=iL({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,h=qd(a.shape),p=dP(d,a.shape,a.dtype,h,c,"avg");l=n.makeTensorInfo(c.outShape,a.dtype,p.values)}return l}};var mP={kernelName:_h,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat;JD(a,"avgPool3d");var c=nb(a.shape,i,o,1,s,u,l),d=pP(n.data.get(a.dataId).values,a.shape,a.dtype,qd(a.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};var vP={kernelName:Mh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode;JD([a,i],"avgPool3DGrad");for(var c=nb(i.shape,o,s,1,u,l),d=c.strideDepth,h=c.strideHeight,p=c.strideWidth,f=c.filterDepth,m=c.filterHeight,v=c.filterWidth,g=c.dilationDepth,y=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,k=c.effectiveFilterWidth,S=x-1-c.padInfo.front,E=k-1-c.padInfo.left,T=w-1-c.padInfo.top,C=Wg(i.shape,"float32"),_=1/(f*m*v),M=n.bufferSync(a),I=0;I<c.batchSize;++I)for(var N=0;N<c.inChannels;++N)for(var A=0;A<c.inDepth;++A)for(var R=0;R<c.inHeight;++R)for(var O=0;O<c.inWidth;++O){for(var D=A-S,L=R-T,P=O-E,F=0,j=0;j<x;j+=g){var z=(D+j)/d;if(!(z<0||z>=c.outDepth||Math.floor(z)!==z))for(var B=0;B<w;B+=y){var U=(L+B)/h;if(!(U<0||U>=c.outHeight||Math.floor(U)!==U))for(var W=0;W<k;W+=b){var V=(P+W)/p;if(!(V<0||V>=c.outWidth||Math.floor(V)!==V))F+=M.get(I,z,U,V,N)}}}C.set(F*_,I,A,R,O,N)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};var gP={kernelName:Ch,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;JD([a,i],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,l=r.pad,c=tb(o.shape,s,u,1,l),d=c.strideHeight,h=c.strideWidth,p=c.filterHeight,f=c.filterWidth,m=c.dilationHeight,v=c.dilationWidth,g=c.effectiveFilterHeight,y=c.effectiveFilterWidth,b=y-1-c.padInfo.left,x=g-1-c.padInfo.top,w=Wg(o.shape,"float32"),k=1/(p*f),S=n.data.get(a.dataId).values,E=Wg(a.shape,"float32",S),T=0;T<c.batchSize;++T)for(var C=0;C<c.inChannels;++C)for(var _=0;_<c.inHeight;++_)for(var M=0;M<c.inWidth;++M){for(var I=_-x,N=M-b,A=0,R=0;R<g;R+=m){var O=(I+R)/d;if(!(O<0||O>=c.outHeight||Math.floor(O)!==O))for(var D=0;D<y;D+=v){var L=(N+D)/h;if(!(L<0||L>=c.outWidth||Math.floor(L)!==L))A+=E.get(T,O,L,C)}}w.set(A*k,T,_,M,C)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var yP={kernelName:yp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance;Ed(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Ed(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Ed(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),JD([a,s,u,i,o],"batchNorm");var l=r.varianceEpsilon;null==l&&(l=.001);for(var c=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,h=n.data.get(u.dataId).values,p=i?n.data.get(i.dataId).values:new Float32Array([1]),f=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),v=f.length,g=p.length,y=h.length,b=d.length,x=0,w=0,k=0,S=0,E=0;E<c.length;++E)m[E]=f[x++]+(c[E]-d[w++])*p[k++]/Math.sqrt(h[S++]+l),x>=v&&(x=0),w>=b&&(w=0),k>=g&&(k=0),S>=y&&(S=0);return n.makeTensorInfo(a.shape,a.dtype,m)}};function bP(e,t,n,r,a){var i=Sy(r,t,n),o=Md(n),s=qd(r);if(i){var u=Ey(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var l=Wg(r,a,"string"===a?rT(e):e),c=Wg(n,a),d=0;d<c.size;++d){var h=c.indexToLoc(d),p=h.map((function(e,n){return e+t[n]}));c.set.apply(c,[l.get.apply(l,(0,_.Z)(p))].concat((0,_.Z)(h)))}return"string"===a?c.values.map((function(e){return Bm(e)})):c.values}function xP(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;JD(a,"slice");var s=Ty(a,i,o),u=(0,U.Z)(s,2),l=u[0],c=u[1];wy(a,l,c);var d=bP(n.data.get(a.dataId).values,l,c,a.shape,a.dtype);return n.makeTensorInfo(c,a.dtype,d)}var wP={kernelName:If,backendName:"cpu",kernelFunc:xP};var kP={kernelName:Nh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;JD([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),u=kE(a.shape,i,s),l=SE(u.length,i.length),c=EE(a.shape,i,s),d=TE(o,i.length),h=CE(c,o,i.length),p=LL({inputs:{x:a},backend:n,attrs:{shape:u}}),f=XL({inputs:{x:p},backend:n,attrs:{perm:l}}),m=LL({inputs:{x:f},backend:n,attrs:{shape:c}}),v=xP({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),v}};function SP(e,t,n,r,a){for(var i=Md(r),o=Qd(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o}function EP(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=Wg([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var l=e.get(s,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?o.set(1,s,l):t.size>0?o.set(o.get(s,l)+t.get(s,u),s,l):o.set(o.get(s,l)+1,s,l))}return o}var TP={kernelName:Ah,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=SP(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};var CP={kernelName:Rh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=my(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},_P=gL((function(e){return Math.ceil(e)})),MP=nL(Dh,_P),IP={kernelName:Dh,backendName:"cpu",kernelFunc:MP},NP=tL(Lh,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),AP={kernelName:Lh,backendName:"cpu",kernelFunc:NP},RP={kernelName:Fh,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(Md(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,l=0;l<s.length;l++){var c=s[l],d=u[l];r[l]=Math.hypot(c,d)}return n.makeOutput(r,t.shape,"float32")}};function OP(e,t,n,r){var a=jd(n,Md(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=Md(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?rT(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,l=0;l<e.shape[1];++l)a[u+l]=r[i++];o+=e.shape[1]}))}return a}function DP(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var LP={kernelName:Tp,backendName:"cpu",kernelFunc:DP};function PP(e){var t=e.inputs,n=e.backend,r=Ld(e.attrs.axis,t[0].shape)[0],a=yE(t.map((function(e){return e.shape})),r);if(0===Md(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return Md(e.shape)>0}));if(1===i.length)return iL({inputs:{x:i[0]},backend:n});var o=i.map((function(e){return e.shape}));if(gE(o,r),"complex64"===i[0].dtype){var s=i.map((function(e){return TL({inputs:{input:e},backend:n})})),u=i.map((function(e){return DP({inputs:{input:e},backend:n})})),l=PP({inputs:s,backend:n,attrs:{axis:r}}),c=PP({inputs:u,backend:n,attrs:{axis:r}}),d=kL({inputs:{real:l,imag:c},backend:n});return s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),d}var h=i.map((function(e){var t=Md(e.shape.slice(r));return LL({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),p=h.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=yE(h.map((function(e){return e.shape})),1);var f=1===h[0].shape[0],m=OP(p,a,t[0].dtype,f),v=yE(i.map((function(e){return e.shape})),r),g=n.makeTensorInfo(v,t[0].dtype,m);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}var FP={kernelName:jh,backendName:"cpu",kernelFunc:PP};function jP(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dilations,c=r.dimRoundingMode;JD([a,i],"conv2d");for(var d=hb(u),h=rb(a.shape,i.shape,o,l,s,c,!1,d),p=h.filterHeight,f=h.filterWidth,m=h.dilationHeight,v=h.dilationWidth,g=h.padInfo.left,y=h.padInfo.top,b="channelsLast"===h.dataFormat,x=new Jm(h.outShape,a.dtype),w=qd(a.shape),k=qd(i.shape),S=w[0],E=b?w[1]:w[2],T=b?w[2]:1,C=b?1:w[1],_=x.strides[0],M=b?x.strides[1]:x.strides[2],I=b?x.strides[2]:1,N=b?1:x.strides[1],A=n.data.get(a.dataId).values,R=n.data.get(i.dataId).values,O=x.values,D=0;D<h.batchSize;++D)for(var L=D*S,P=D*_,F=0;F<h.outHeight;++F)for(var j=P+F*M,z=F*h.strideHeight-y,B=0;B<p;++B){var U=z+B*m;if(!(U<0||U>=h.inHeight))for(var W=B*k[0],V=L+U*E,Z=0;Z<h.outWidth;++Z)for(var H=j+Z*I,G=Z*h.strideWidth-g,q=0;q<f;++q){var X=G+q*v;if(!(X<0||X>=h.inWidth))for(var Y=V+X*T,K=W+q*k[1],Q=0;Q<h.inChannels;++Q){for(var J=A[Y+Q*C],$=0;$<h.outChannels;++$)O[H+$*N]+=J*R[K+$];K+=h.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,O)}var zP={kernelName:zh,backendName:"cpu",kernelFunc:jP};var BP={kernelName:Bh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=r.filterShape;JD([a,i],"conv2dBackpropFilter");for(var d=hb(u),h=rb(a.shape,c,o,1,s,l,!1,d),p=h.strideHeight,f=h.strideWidth,m=h.filterHeight,v=h.filterWidth,g="channelsLast"===h.dataFormat,y=new Jm(h.filterShape,"float32"),b=h.padInfo.left,x=h.padInfo.top,w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,S=new Jm(a.shape,a.dtype,w),E=new Jm(i.shape,i.dtype,k),T=0;T<m;++T)for(var C=Math.max(0,Math.ceil((x-T)/p)),_=Math.min(h.outHeight,(h.inHeight+x-T)/p),M=0;M<v;++M)for(var I=Math.max(0,Math.ceil((b-M)/f)),N=Math.min(h.outWidth,(h.inWidth+b-M)/f),A=0;A<h.inChannels;++A)for(var R=0;R<h.outChannels;++R){for(var O=0,D=0;D<h.batchSize;++D)for(var L=C;L<_;++L)for(var P=T+L*p-x,F=I;F<N;++F){var j=M+F*f-b;O+=g?S.get(D,P,j,A)*E.get(D,L,F,R):S.get(D,A,P,j)*E.get(D,R,L,F)}y.set(O,T,M,A,R)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var UP={kernelName:Uh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,l=r.dataFormat,c=r.dimRoundingMode;JD([a,i],"conv2dBackpropInput");var d=qd(i.shape),h=qd(a.shape),p=hb(l),f=rb(o,i.shape,s,1,u,c,!1,p),m=new Jm(f.inShape,"float32"),v=m.values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,b=(0,U.Z)(d,3),x=b[0],w=b[1],k=b[2],S=f.batchSize,E=f.filterHeight,T=f.filterWidth,C=f.inChannels,_=f.inHeight,M=f.inWidth,I=f.outChannels,N=f.outHeight,A=f.outWidth,R=f.strideHeight,O=f.strideWidth;p=f.dataFormat;for(var D=E-1-f.padInfo.top,L=T-1-f.padInfo.left,P="channelsLast"===p,F=m.strides[0],j=P?m.strides[1]:m.strides[2],z=P?m.strides[2]:1,B=P?1:m.strides[1],W=h[0],V=P?h[1]:h[2],Z=P?h[2]:1,H=P?1:h[1],G=0;G<S;++G)for(var q=0;q<C;++q)for(var X=0;X<_;++X)for(var Y=X-D,K=Math.max(0,Math.ceil(Y/R)),Q=Math.min(N,(E+Y)/R),J=0;J<M;++J){for(var $=J-L,ee=Math.max(0,Math.ceil($/O)),te=Math.min(A,(T+$)/O),ne=0,re=K;re<Q;++re)for(var ae=re*R-Y,ie=ee;ie<te;++ie)for(var oe=W*G+V*re+Z*ie,se=x*(E-1-ae)+w*(T-1-(ie*O-$))+k*q,ue=0;ue<I;++ue){ne+=g[oe+H*ue]*y[se+ue]}v[F*G+j*X+z*J+B*q]=ne}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var WP={kernelName:Wh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations;JD([a,i],"conv3d");for(var l=ab(a.shape,i.shape,o,u,s),c=l.filterDepth,d=l.filterHeight,h=l.filterWidth,p=l.dilationDepth,f=l.dilationHeight,m=l.dilationWidth,v=l.padInfo,g=v.front,y=v.left,b=v.top,x=new Jm(l.outShape,a.dtype),w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,S=x.values,E=qd(a.shape),T=qd(i.shape),C=0;C<l.batchSize;++C)for(var _=C*E[0],M=C*x.strides[0],I=0;I<l.outDepth;++I)for(var N=M+I*x.strides[1],A=I*l.strideDepth-g,R=0;R<c;++R){var O=A+R*p;if(!(O<0||O>=l.inDepth))for(var D=R*T[0],L=_+O*E[1],P=0;P<l.outHeight;++P)for(var F=N+P*x.strides[2],j=P*l.strideHeight-b,z=0;z<d;++z){var B=j+z*f;if(!(B<0||B>=l.inHeight))for(var U=D+z*T[1],W=L+B*E[2],V=0;V<l.outWidth;++V)for(var Z=F+V*l.outChannels,H=V*l.strideWidth-y,G=0;G<h;++G){var q=H+G*m;if(!(q<0||q>=l.inWidth))for(var X=U+G*T[2],Y=W+q*l.inChannels,K=X,Q=0;Q<l.inChannels;++Q){for(var J=w[Y+Q],$=0;$<l.outChannels;++$)S[Z+$]+=J*k[K+$];K+=l.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var VP={kernelName:Vh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape;JD([a,i],"conv3dBackpropFilterV2");for(var l=qd(a.shape),c=qd(i.shape),d=ab(a.shape,u,o,1,s),h=d.strideDepth,p=d.strideHeight,f=d.strideWidth,m=d.filterDepth,v=d.filterHeight,g=d.filterWidth,y=new Jm(d.filterShape,"float32"),b=y.values,x=(0,U.Z)(y.strides,4),w=x[0],k=x[1],S=x[2],E=x[3],T=n.data.get(i.dataId).values,C=(0,U.Z)(c,4),_=C[0],M=C[1],I=C[2],N=C[3],A=n.data.get(a.dataId).values,R=(0,U.Z)(l,4),O=R[0],D=R[1],L=R[2],P=R[3],F=d.padInfo.front,j=d.padInfo.left,z=d.padInfo.top,B=0;B<m;++B)for(var W=Math.max(0,Math.ceil((F-B)/h)),V=Math.min(d.outDepth,(d.inDepth+F-B)/h),Z=B*w,H=0;H<v;++H)for(var G=Math.max(0,Math.ceil((z-H)/p)),q=Math.min(d.outHeight,(d.inHeight+z-H)/p),X=H*k+Z,Y=0;Y<g;++Y)for(var K=Math.max(0,Math.ceil((j-Y)/f)),Q=Math.min(d.outWidth,(d.inWidth+j-Y)/f),J=Y*S+X,$=0;$<d.inChannels;++$)for(var ee=$*E+J,te=0;te<d.outChannels;++te){for(var ne=0,re=0;re<d.batchSize;++re)for(var ae=re*O,ie=re*_,oe=W;oe<V;++oe)for(var se=(B+oe*h-F)*D+ae,ue=oe*M+ie,le=G;le<q;++le)for(var ce=(H+le*p-z)*L+se,de=le*I+ue,he=K;he<Q;++he){var pe=he*N+de;ne+=A[(Y+he*f-j)*P+ce+$]*T[pe+te]}b[ee+te]=ne}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var ZP={kernelName:Zh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape;JD([a],"conv3dBackpropInputV2");for(var l=qd(a.shape),c=qd(i.shape),d=ab(u,i.shape,s,1,o),h=new Jm(d.inShape,"float32"),p=h.values,f=(0,U.Z)(h.strides,4),m=f[0],v=f[1],g=f[2],y=f[3],b=n.data.get(a.dataId).values,x=(0,U.Z)(l,4),w=x[0],k=x[1],S=x[2],E=x[3],T=n.data.get(i.dataId).values,C=(0,U.Z)(c,4),_=C[0],M=C[1],I=C[2],N=C[3],A=d.batchSize,R=d.filterDepth,O=d.filterHeight,D=d.filterWidth,L=d.inChannels,P=d.inDepth,F=d.inHeight,j=d.inWidth,z=d.outChannels,B=d.outDepth,W=d.outHeight,V=d.outWidth,Z=d.strideDepth,H=d.strideHeight,G=d.strideWidth,q=R-1-d.padInfo.front,X=O-1-d.padInfo.top,Y=D-1-d.padInfo.left,K=0;K<A;++K)for(var Q=0;Q<L;++Q)for(var J=0;J<P;++J)for(var $=J-q,ee=Math.max(0,Math.ceil($/Z)),te=Math.min(B,(R+$)/Z),ne=0;ne<F;++ne)for(var re=ne-X,ae=Math.max(0,Math.ceil(re/H)),ie=Math.min(W,(O+re)/H),oe=0;oe<j;++oe){for(var se=oe-Y,ue=Math.max(0,Math.ceil(se/G)),le=Math.min(V,(D+se)/G),ce=0,de=ee;de<te;++de)for(var he=de*Z-$,pe=ae;pe<ie;++pe)for(var fe=pe*H-re,me=ue;me<le;++me)for(var ve=w*K+k*de+S*pe+E*me,ge=_*(R-1-he)+M*(O-1-fe)+I*(D-1-(me*G-se))+N*Q,ye=0;ye<z;++ye){ce+=b[ve+ye]*T[ge+ye]}p[m*K+v*J+g*ne+y*oe+Q]=ce}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},HP=tL(Hh,(function(e){return Math.cos(e)})),GP={kernelName:Hh,backendName:"cpu",kernelFunc:HP},qP=tL(Gh,(function(e){return Math.cosh(e)})),XP={kernelName:Gh,backendName:"cpu",kernelFunc:qP};var YP={kernelName:Xh,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,l=r.extrapolationValue,c=(0,U.Z)(a.shape,4),d=c[0],h=c[1],p=c[2],f=c[3],m=i.shape[0],v=(0,U.Z)(s,2),g=v[0],y=v[1],b=Wg([m,g,y,f],"float32"),x=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,k=n.data.get(a.dataId).values,S=qd(a.shape),E=qd(b.shape),T=0;T<m;T++){var C=4*T,_=x[C],M=x[C+1],I=x[C+2],N=x[C+3],A=w[T];if(!(A>=d))for(var R=g>1?(I-_)*(h-1)/(g-1):0,O=y>1?(N-M)*(p-1)/(y-1):0,D=0;D<g;D++){var L=g>1?_*(h-1)+D*R:.5*(_+I)*(h-1);if(L<0||L>h-1)for(var P=0;P<y;P++)for(var F=0;F<f;F++){var j=F+P*E[2]+D*E[1]+T*E[0];b.values[j]=l}else if("bilinear"===u)for(var z=Math.floor(L),B=Math.ceil(L),W=L-z,V=0;V<y;V++){var Z=y>1?M*(p-1)+V*O:.5*(M+N)*(p-1);if(Z<0||Z>p-1)for(var H=0;H<f;H++){var G=H+V*E[2]+D*E[1]+T*E[0];b.values[G]=l}else for(var q=Math.floor(Z),X=Math.ceil(Z),Y=Z-q,K=0;K<f;K++){var Q=K+q*S[2]+z*S[1]+A*S[0],J=k[Q],$=k[Q=K+X*S[2]+z*S[1]+A*S[0]],ee=k[Q=K+q*S[2]+B*S[1]+A*S[0]],te=J+($-J)*Y,ne=ee+(k[Q=K+X*S[2]+B*S[1]+A*S[0]]-ee)*Y;Q=K+V*E[2]+D*E[1]+T*E[0],b.values[Q]=te+(ne-te)*W}}else for(var re=0;re<y;++re){var ae=y>1?M*(p-1)+re*O:.5*(M+N)*(p-1);if(ae<0||ae>p-1)for(var ie=0;ie<f;ie++){var oe=ie+re*E[2]+D*E[1]+T*E[0];b.values[oe]=l}else for(var se=Math.round(ae),ue=Math.round(L),le=0;le<f;le++){var ce=le+se*S[2]+ue*S[1]+A*S[0],de=le+re*E[2]+D*E[1]+T*E[0];b.values[de]=k[ce]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var KP={kernelName:qh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;JD(a,"cumsum");var u=Ux([i],a.shape.length),l=a;null!=u&&(l=XL({inputs:{x:a},backend:n,attrs:{perm:u}}));var c=Vx(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(c));for(var d=cv(l.dtype,"int32"),h=Qd(Md(l.shape),d),p=n.data.get(l.dataId).values,f=l.shape[l.shape.length-1],m=s?function(e,t){return e+f-t-1}:function(e,t){return e+t},v=0;v<p.length;v+=f)for(var g=0;g<f;g++){var y=m(v,g);if(0===g)h[y]=o?0:p[y];else{var b=m(v,g-1);h[y]=o?p[b]+h[b]:p[y]+h[b]}}var x=n.makeTensorInfo(l.shape,d,h);if(null!=u){var w=XL({inputs:{x:x},backend:n,attrs:{perm:Wx(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(l),w}return x}};var QP={kernelName:Yh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=SP(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}if(2===a.shape.length){var l=EP(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(l.shape,i.dtype,l.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var JP={kernelName:Kh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;Ed("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],l=a.shape[2],c=a.shape[3],d=u*i,h=l*i,p=c/(i*i),f=n.data.get(a.dataId).values,m=new Float32Array(s*d*h*p),v=0,g=0;g<s;++g)for(var y=0;y<d;++y)for(var b=Math.floor(y/i),x=y%i,w=0;w<h;++w)for(var k=Math.floor(w/i),S=(x*i+w%i)*p,E=0;E<p;++E){var T=E+S+c*(k+l*(b+u*g));m[v++]=f[T]}return n.makeTensorInfo([s,d,h,p],a.dtype,m)}};function $P(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode;JD([a,i],"depthwiseConv2DNative");var c=qd(a.shape),d=qd(i.shape),h=u;null==h&&(h=[1,1]),Ed(db(o,h),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(h,"'")}));for(var p=rb(a.shape,i.shape,o,h,s,l,!0),f=p.filterHeight,m=p.filterWidth,v=p.dilationHeight,g=p.dilationWidth,y=p.padInfo,b=y.left,x=y.top,w=p.outChannels/p.inChannels,k=new Jm(p.outShape,a.dtype),S=n.data.get(a.dataId).values,E=n.data.get(i.dataId).values,T=k.values,C=0;C<p.batchSize;++C)for(var _=C*c[0],M=C*k.strides[0],I=0;I<p.outHeight;++I)for(var N=M+I*k.strides[1],A=I*p.strideHeight-x,R=0;R<f;++R){var O=A+R*v;if(!(O<0||O>=p.inHeight))for(var D=R*d[0],L=_+O*c[1],P=0;P<p.outWidth;++P)for(var F=N+P*k.strides[2],j=P*p.strideWidth-b,z=0;z<m;++z){var B=j+z*g;if(!(B<0||B>=p.inWidth))for(var U=D+z*d[1],W=L+B*p.inChannels,V=F,Z=U,H=0;H<p.inChannels;++H){for(var G=S[W+H],q=0;q<w;++q)T[V+q]+=G*E[Z+q];V+=w,Z+=w}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}var eF={kernelName:Qh,backendName:"cpu",kernelFunc:$P};var tF={kernelName:Jh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.filterShape;JD([a,i],"depthwiseConv2dNativeBackpropFilter");for(var d=rb(a.shape,c,o,s,u,l,!0),h=d.strideHeight,p=d.strideWidth,f=d.filterHeight,m=d.filterWidth,v=new Jm(d.filterShape,"float32"),g=d.padInfo.left,y=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(a.dataId).values,w=new Jm(a.shape,a.dtype,x),k=n.data.get(i.dataId).values,S=new Jm(i.shape,i.dtype,k),E=0;E<f;++E)for(var T=Math.max(0,Math.ceil((y-E)/h)),C=Math.min(d.outHeight,(d.inHeight+y-E)/h),_=0;_<m;++_)for(var M=Math.max(0,Math.ceil((g-_)/p)),I=Math.min(d.outWidth,(d.inWidth+g-_)/p),N=0;N<d.outChannels;++N){for(var A=Math.trunc(N/b),R=N%b,O=0,D=0;D<d.batchSize;++D)for(var L=T;L<C;++L)for(var P=E+L*h-y,F=M;F<I;++F){var j=_+F*p-g;O+=w.get(D,P,j,A)*S.get(D,L,F,N)}v.set(O,E,_,A,R)}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var nF={kernelName:$h,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.inputShape;JD([a,i],"depthwiseConv2DNativeBackpropInput");for(var d=qd(a.shape),h=qd(i.shape),p=rb(c,i.shape,o,s,u,l,!0),f=new Jm(p.inShape,"float32"),m=f.values,v=(0,U.Z)(f.strides,3),g=v[0],y=v[1],b=v[2],x=n.data.get(a.dataId).values,w=(0,U.Z)(d,3),k=w[0],S=w[1],E=w[2],T=n.data.get(i.dataId).values,C=(0,U.Z)(h,3),_=C[0],M=C[1],I=C[2],N=p.batchSize,A=p.filterHeight,R=p.filterWidth,O=p.inChannels,D=p.inHeight,L=p.inWidth,P=p.outChannels,F=p.outHeight,j=p.outWidth,z=p.strideHeight,B=p.strideWidth,W=A-1-p.padInfo.top,V=R-1-p.padInfo.left,Z=P/O,H=0;H<N;++H)for(var G=0;G<O;++G)for(var q=0;q<D;++q)for(var X=q-W,Y=Math.max(0,Math.ceil(X/z)),K=Math.min(F,(A+X)/z),Q=0;Q<L;++Q){for(var J=Q-V,$=Math.max(0,Math.ceil(J/B)),ee=Math.min(j,(R+J)/B),te=0,ne=Y;ne<K;++ne)for(var re=ne*z-X,ae=$;ae<ee;++ae)for(var ie=k*H+S*ne+E*ae,oe=_*(A-1-re)+M*(R-1-(ae*B-J))+I*G,se=0;se<Z;++se){te+=x[ie+(G*Z+se)]*T[oe+se]}m[g*H+y*q+b*Q+G]=te}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};var rF={kernelName:ep,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=Md(r.shape),i=n.data.get(r.dataId).values,o=Wg([a,a],r.dtype),s=o.values,u=0;u<i.length;u++)s[u*a+u]=i[u];var l=[].concat((0,_.Z)(r.shape),(0,_.Z)(r.shape));return n.makeTensorInfo(l,o.dtype,o.values)}},aF={kernelName:tp,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=n,c=l.data.get(a.dataId).values,d=a.shape.length,h=l.data.get(i.dataId).values,p=i.shape.length,f=eb(a.shape,i.shape,o,s,"NHWC",u),m=f.batchSize,v=f.inHeight,g=f.inWidth,y=f.inChannels,b=f.outHeight,x=f.outWidth,w=f.padInfo,k=f.strideHeight,S=f.strideWidth,E=f.filterHeight,T=f.filterWidth,C=f.dilationHeight,_=f.dilationWidth,M=f.outShape,I=Md(M),N=M.length,A=jd(a.dtype,I),R=0;R<m;++R)for(var O=0;O<b;++O)for(var D=O*k-w.top,L=0;L<x;++L)for(var P=L*S-w.left,F=0;F<y;++F){for(var j=Number.MIN_SAFE_INTEGER,z=0;z<E;++z){var B=D+z*C;if(B>=0&&B<v)for(var U=0;U<T;++U){var W=P+U*_;if(W>=0&&W<g){var V=eh([R,B,W,F],d,qd(a.shape)),Z=eh([z,U,F],p,qd(i.shape)),H=c[V]+h[Z];H>j&&(j=H)}}}A[eh([R,O,L,F],N,qd(M))]=j}return{dataId:l.write(jm(A,a.dtype),M,a.dtype),shape:M,dtype:a.dtype}}},iF={kernelName:rp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,l=r.dilations,c=n,d=Yd(a.shape,c.data.get(a.dataId).values),h=Yd(i.shape,c.data.get(i.dataId).values),p=eb(a.shape,i.shape,s,u,"NHWC",l),f=p.batchSize,m=p.inHeight,v=p.inWidth,g=p.inChannels,y=p.outHeight,b=p.outWidth,x=p.padInfo,w=p.strideHeight,k=p.strideWidth,S=p.filterHeight,E=p.filterWidth,T=p.dilationHeight,C=p.dilationWidth,_=p.outShape;Ed(o.rank===_.length,(function(){return"Error in ".concat(rp,", dy ")+"must have the same rank as output ".concat(_.length,", but got ")+"".concat(o.rank)}));for(var M=Yd(_,c.data.get(o.dataId).values),I=Jd(i.shape,i.dtype),N=0;N<f;++N)for(var A=0;A<y;++A)for(var R=A*w-x.top,O=0;O<b;++O)for(var D=O*k-x.left,L=0;L<g;++L){for(var P=Number.MIN_SAFE_INTEGER,F=0,j=0,z=0;z<S;++z){var B=R+z*T;if(B>=0&&B<m)for(var U=0;U<E;++U){var W=D+U*C;if(W>=0&&W<v){var V=d[N][B][W][L]+h[z][U][L];V>P&&(P=V,F=z,j=U)}}}I[F][j][L]+=M[N][A][O][L]}return{dataId:c.write(jm(I,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},oF={kernelName:np,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,l=r.dilations,c=n,d=Yd(a.shape,c.data.get(a.dataId).values),h=Yd(i.shape,c.data.get(i.dataId).values),p=eb(a.shape,i.shape,s,u,"NHWC",l),f=p.batchSize,m=p.inHeight,v=p.inWidth,g=p.inChannels,y=p.outHeight,b=p.outWidth,x=p.padInfo,w=p.strideHeight,k=p.strideWidth,S=p.filterHeight,E=p.filterWidth,T=p.dilationHeight,C=p.dilationWidth,_=p.outShape;Ed(o.rank===_.length,(function(){return"Error in ".concat(np,", dy ")+"must have the same rank as output ".concat(_.length,", but got ")+"".concat(o.rank)}));for(var M=Yd(_,c.data.get(o.dataId).values),I=Jd(a.shape,a.dtype),N=0;N<f;++N)for(var A=0;A<y;++A)for(var R=A*w-x.top,O=0;O<b;++O)for(var D=O*k-x.left,L=0;L<g;++L){for(var P=Number.MIN_SAFE_INTEGER,F=R<0?0:R,j=D<0?0:D,z=0;z<S;++z){var B=R+z*T;if(B>=0&&B<m)for(var U=0;U<E;++U){var W=D+U*C;if(W>=0&&W<v){var V=d[N][B][W][L]+h[z][U][L];V>P&&(P=V,F=B,j=W)}}}I[N][F][j][L]+=M[N][A][O][L]}return{dataId:c.write(jm(I,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},sF=lL((function(e,t){return e*t})),uF=NL((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),lF=IL($p,sF,uF),cF={kernelName:$p,backendName:"cpu",kernelFunc:lF};function dF(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims;JD(i,"sum");var u=(t="bool"===i.dtype?_L({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):iL({inputs:{x:i},backend:r})).shape.length,l=Ld(o,t.shape),c=Ux(l,u),d=l,h=t;null!=c&&(h=XL({inputs:{x:t},backend:r,attrs:{perm:c}}),d=Vx(d.length,u)),Bx("sum",d,h.shape.length);for(var p=jx(h.shape,d),f=(0,U.Z)(p,2),m=f[0],v=f[1],g=EL(r,m,cv(h.dtype,"int32")),y=Md(v),b=r.data.get(g.dataId).values,x=r.data.get(h.dataId).values,w=0;w<b.length;++w){for(var k=w*y,S=0,E=0;E<y;++E)S+=x[k+E];b[w]=S}if(s){var T=g;g=LL({inputs:{x:g},backend:r,attrs:{shape:zx(g.shape,l)}}),r.disposeIntermediateTensorInfo(T)}return r.disposeIntermediateTensorInfo(t),null!=c&&r.disposeIntermediateTensorInfo(h),g}var hF={kernelName:Pf,backendName:"cpu",kernelFunc:dF};var pF={kernelName:ip,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=ZE(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;GE(i.length,s,r);for(var u=qE(o,s),l=u.path,c=u.steps,d=c.length,h=null,p=i.length,f=[],m=0;m<d;++m){var v,g=G(c[m]);try{for(g.s();!(v=g.n()).done;){var y=v.value,b=HE(p,s[y]),x=b.permutationIndices,w=b.expandDims,k=void 0;XE(x)?k=r[y]:(k=XL({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),f.push(k));for(var S=k.shape.slice(),E=0;E<w.length;++E)S.splice(w[E],0,1);Id(k.shape,S)||(k=LL({inputs:{x:k},backend:n,attrs:{shape:S}}),f.push(k)),null===h?h=k:(h=lF({inputs:{a:k,b:h},backend:n}),f.push(h))}}catch(sde){g.e(sde)}finally{g.f()}m<d-1&&(l[m]>=0&&(h=dF({inputs:{x:h},backend:n,attrs:{axis:l[m]-(i.length-p),keepDims:!1}}),f.push(h)),p--)}for(var T=0,C=f;T<C.length;T++){var _=C[T];_!==h&&n.disposeIntermediateTensorInfo(_)}return h}};var fF={kernelName:sp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;JD([r,a],"eluGrad");for(var i=new Float32Array(Md(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<o.length;++u){var l=o[u];i[u]=l>=1?s[u]:s[u]*(l+1)}return n.makeTensorInfo(a.shape,"float32",i)}},mF=lL((function(e,t){return e===t?1:0})),vF=IL(lp,mF,null,"bool"),gF={kernelName:lp,backendName:"cpu",kernelFunc:vF},yF=tL(up,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))})),bF={kernelName:up,backendName:"cpu",kernelFunc:yF},xF=gL((function(e){return Math.exp(e)})),wF=nL(cp,xF,"float32"),kF={kernelName:cp,backendName:"cpu",kernelFunc:wF};function SF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(Ed(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),LL({inputs:{x:a},backend:n,attrs:{shape:s}})}var EF={kernelName:dp,backendName:"cpu",kernelFunc:SF},TF=gL((function(e){return Math.expm1(e)})),CF=nL(hp,TF),_F={kernelName:hp,backendName:"cpu",kernelFunc:CF},MF=lL((function(e,t){return e/t})),IF=IL(ap,MF),NF={kernelName:ap,backendName:"cpu",kernelFunc:IF},AF=lL((function(e,t){return e-t})),RF=NL((function(e,t,n,r){return{real:e-n,imag:t-r}})),OF=IL(Qf,AF,RF),DF={kernelName:Qf,backendName:"cpu",kernelFunc:OF};function LF(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,l=[a,i],c=Md(l),d=Fd("float32",c),h=Fd("float32",c),p=0;p<a;p++){for(var f=xP({inputs:{x:s},backend:n,attrs:{begin:[p,0],size:[1,i]}}),m=xP({inputs:{x:u},backend:n,attrs:{begin:[p,0],size:[1,i]}}),v=kL({inputs:{real:f,imag:m},backend:n}),g=PF(v,t,n),y=PE(g.real,g.imag),b=0;b<i;b++){var x=FE(y,b);d[p*i+b]=x.real,h[p*i+b]=x.imag}n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v)}var w=n.makeTensorInfo(l,"float32",d),k=n.makeTensorInfo(l,"float32",h),S=kL({inputs:{real:w,imag:k},backend:n});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(k),S}function PF(e,t,n){var r=Md(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((g=r)&g-1)){var s=FF(i,o,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(u,"float32",s.real),c=n.makeTensorInfo(u,"float32",s.imag),d=n.makeTensorInfo([],"float32",Fm(r,"float32")),h=iL({inputs:{x:d},backend:n}),p=NF.kernelFunc({inputs:{a:l,b:d},backend:n}),f=NF.kernelFunc({inputs:{a:c,b:h},backend:n}),m=n.data.get(p.dataId).values,v=n.data.get(f.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),{real:m,imag:v}}return s}var g,y=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=zE(a*s,t,n),l=FE(e,s);i+=l.real*u.real-l.imag*u.imag,o+=l.real*u.imag+l.imag*u.real}n&&(i/=t,o/=t),jE(r,i,o,a)}return r}(PE(i,o),r,t);return function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(y)}function FF(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=PE(e,t),o=n/2,s=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(i),u=s.real,l=s.imag,c=[u.length],d=a.makeTensorInfo(c,"float32",u),h=a.makeTensorInfo(c,"float32",l),p=kL({inputs:{real:d,imag:h},backend:a}),f=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(i),m=f.real,v=f.imag,g=[m.length],y=a.makeTensorInfo(g,"float32",m),b=a.makeTensorInfo(g,"float32",v),x=kL({inputs:{real:y,imag:b},backend:a}),w=FF(u,l,o,r,a),k=w.real,S=w.imag,E=[k.length],T=a.makeTensorInfo(E,"float32",k),C=a.makeTensorInfo(E,"float32",S),_=kL({inputs:{real:T,imag:C},backend:a}),M=FF(m,v,o,r,a),I=M.real,N=M.imag,A=[I.length],R=a.makeTensorInfo(A,"float32",I),O=a.makeTensorInfo(A,"float32",N),D=kL({inputs:{real:R,imag:O},backend:a}),L=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}(n,r),P=[L.real.length],F=a.makeTensorInfo(P,"float32",L.real),j=a.makeTensorInfo(P,"float32",L.imag),z=kL({inputs:{real:F,imag:j},backend:a}),B=lF({inputs:{a:z,b:D},backend:a}),U=OL({inputs:{a:_,b:B},backend:a}),W=OF({inputs:{a:_,b:B},backend:a}),V=TL({inputs:{input:U},backend:a}),Z=TL({inputs:{input:W},backend:a}),H=DP({inputs:{input:U},backend:a}),G=DP({inputs:{input:W},backend:a}),q=PP({inputs:[V,Z],backend:a,attrs:{axis:0}}),X=PP({inputs:[H,G],backend:a,attrs:{axis:0}}),Y=a.data.get(q.dataId).values,K=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(X),{real:Y,imag:K}}var jF={kernelName:pp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Md(r.shape),i=r.shape[r.shape.length-1],o=LL({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=LF(o,!1,n),u=LL({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}};function zF(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||Zd(a),o=jd(i,Md(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var BF={kernelName:fp,backendName:"cpu",kernelFunc:zF};var UF={kernelName:mp,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=Fd(r.dtype,Md(r.shape)),o=(0,U.Z)(r.shape,4),s=o[0],u=o[1],l=o[2],c=o[3],d=a.data.get(r.dataId).values,h=0;h<s;h++)for(var p=h*l*u*c,f=0;f<u;f++)for(var m=f*(l*c),v=0;v<l;v++)for(var g=v*c,y=0;y<c;y++){var b=Math.round(l-v-1),x=p+m+g+y,w=d[x];if(b>=0&&b<l)w=d[p+m+b*c+y];i[x]=w}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},WF=gL((function(e){return Math.floor(e)})),VF=nL(vp,WF),ZF={kernelName:vp,backendName:"cpu",kernelFunc:VF},HF=lL((function(e,t){return Math.floor(e/t)})),GF=IL(gp,HF,null,"int32"),qF={kernelName:gp,backendName:"cpu",kernelFunc:GF};var XF={kernelName:hm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dataFormat,d=r.dilations,h=r.dimRoundingMode,p=r.activation,f=r.leakyreluAlpha,m=jP({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h}});if(o){var v=m;m=OL({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(p){var g=m;m=wL(n,m,p,s,f),n.disposeIntermediateTensorInfo(g)}return m}};var YF={kernelName:pm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dataFormat,d=r.dilations,h=r.dimRoundingMode,p=r.activation,f=r.leakyreluAlpha,m=$P({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h}});if(o){var v=m;m=OL({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(p){var g=m;m=wL(n,m,p,s,f),n.disposeIntermediateTensorInfo(g)}return m}};function KF(e,t,n,r,a,i,o,s,u){for(var l=Wg([r,i],n),c=0;c<r;c++){for(var d=[],h=0,p=0;p<a;p++){var f=e[c*a+p];h+=f*o[p],d.push(f)}if(h<0||h>=u/i)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(s));for(var m=0;m<i;m++)l.values[c*i+m]=t.get.apply(t,(0,_.Z)(t.indexToLoc(h*i+m)))}return l}var QF={kernelName:xp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=Md(r.shape),o=a.shape,s=o[o.length-1],u=_E(r,a),l=(0,U.Z)(u,4),c=l[0],d=l[1],h=l[2],p=l[3];if(0===d)return n.makeTensorInfo(c,r.dtype,[]);var f=KF(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,d,s,h,p,r.shape,i);return n.makeTensorInfo(c,r.dtype,f.values)}};function JF(e,t,n){for(var r=Wg(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var l=e.locToIndex(i);0<=l&&l<e.values.length&&(r.values[a]=e.values[l])}return r}var $F={kernelName:bp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;JD([a,i],"gatherV2");for(var u=Ld(o,a.shape)[0],l=n.data.get(i.dataId).values,c=a.shape[u],d=function(){var e=l[h];Ed(e<=c-1&&e>=0,(function(){return"GatherV2: the index value ".concat(e," is not in [0, ").concat(c-1,"]")}))},h=0;h<l.length;++h)d();var p=s;null==s&&(p=0);var f=Md(i.shape),m=nT(a,i,u,p),v=LL({inputs:{x:a},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),g=LL({inputs:{x:i},backend:n,attrs:{shape:[m.batchSize,f/m.batchSize]}}),y=[m.batchSize,m.outerSize,f/m.batchSize,m.sliceSize],b=n.bufferSync(g),x=JF(n.bufferSync(v),b,y);return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(m.outputShape,x.dtype,x.values)}},ej=lL((function(e,t){return e>t?1:0})),tj=IL(wp,ej,null,"bool"),nj={kernelName:wp,backendName:"cpu",kernelFunc:tj},rj=lL((function(e,t){return e>=t?1:0})),aj=IL(kp,rj,null,"bool"),ij={kernelName:kp,backendName:"cpu",kernelFunc:aj};var oj={kernelName:Ep,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Md(r.shape),i=r.shape[r.shape.length-1],o=LL({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=LF(o,!0,n),u=LL({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}},sj=tL(Cp,(function(e){return Number.isFinite(e)?1:0}),"bool"),uj={kernelName:Cp,backendName:"cpu",kernelFunc:sj},lj=tL(_p,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),cj={kernelName:_p,backendName:"cpu",kernelFunc:lj},dj=tL(Mp,(function(e){return Number.isNaN(e)?1:0}),"bool"),hj={kernelName:Mp,backendName:"cpu",kernelFunc:dj},pj=lL((function(e,t){return e<t?1:0})),fj=IL(Np,pj,null,"bool"),mj={kernelName:Np,backendName:"cpu",kernelFunc:fj},vj=lL((function(e,t){return e<=t?1:0})),gj=IL(Ap,vj,null,"bool"),yj={kernelName:Ap,backendName:"cpu",kernelFunc:gj};function bj(e,t,n){var r=(t-e)/(n-1),a=Qd(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var xj={kernelName:Rp,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=bj(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},wj=gL((function(e){return Math.log(e)})),kj=nL(Op,wj),Sj={kernelName:Op,backendName:"cpu",kernelFunc:kj},Ej=tL(Dp,(function(e){return Math.log1p(e)})),Tj={kernelName:Dp,backendName:"cpu",kernelFunc:Ej},Cj=lL((function(e,t){return e&&t})),_j=IL(Lp,Cj,null,"bool"),Mj={kernelName:Lp,backendName:"cpu",kernelFunc:_j},Ij=tL(Pp,(function(e){return e?0:1}),"bool"),Nj={kernelName:Pp,backendName:"cpu",kernelFunc:Ij},Aj=lL((function(e,t){return e||t})),Rj=IL(Fp,Aj,null,"bool"),Oj={kernelName:Fp,backendName:"cpu",kernelFunc:Rj};var Dj={kernelName:jp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta;JD(a,"LRN");var l=a.shape[3],c=l-1,d=n.data.get(a.dataId).values,h=Md(a.shape),p=new Float32Array(h);function f(e){for(var t=e%l,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,c),a=0;n<=r;n++){var o=d[n];a+=o*o}return a}for(var m=0;m<h;m++){var v=f(m),g=d[m]*Math.pow(o+s*v,-u);p[m]=g}return n.makeTensorInfo(a.shape,a.dtype,p)}};var Lj={kernelName:zp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,l=r.alpha,c=r.beta;JD(o,"LRNGrad");for(var d=Md(o.shape),h=o.shape[3],p=n.data.get(o.dataId).values,f=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,v=new Float32Array(d),g=d,y=0;y<g;y++){for(var b=y%h,x=y-b+Math.max(0,b-s),w=y-b+Math.min(h,b+s+1),k=0,S=x;S<w;S++)k+=Math.pow(f[S],2);k=l*k+u;for(var E=x;E<w;E++){var T=-2*l*c*f[E]*m[y]/k;y===E&&(T+=Math.pow(k,-c)),T*=p[y],v[E]+=T}}return n.makeTensorInfo(o.shape,a.dtype,v)}};function Pj(e,t,n,r){for(var a=Fd(r,Md(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var l=e[o+u];(Number.isNaN(l)||l>s)&&(s=l)}a[i]=s}return a}function Fj(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=n,u=a.shape,l=u.length,c=Ld(i,u),d=c,h=Ux(d,l),p=s.data.get(a.dataId).values;if(null!=h){for(var f=new Array(l),m=0;m<f.length;m++)f[m]=u[h[m]];p=qL(p,u,a.dtype,h,f),d=Vx(d.length,l),u=f}JD(a,"max"),Bx("max",d,l);var v=jx(u,d),g=(0,U.Z)(v,2),y=g[0],b=Pj(p,Md(g[1]),y,a.dtype),x=s.write(b,y,a.dtype),w=y;o&&(w=zx(y,c));return{dataId:x,shape:w,dtype:a.dtype}}var jj={kernelName:Bp,backendName:"cpu",kernelFunc:Fj},zj=lL((function(e,t){return Math.max(e,t)})),Bj=IL(Up,zj),Uj={kernelName:Up,backendName:"cpu",kernelFunc:Bj};var Wj={kernelName:Wp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;JD(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Ed(db(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var l,c=tb(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Id(c.inShape,c.outShape))l=iL({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,h=qd(a.shape),p=dP(d,a.shape,a.dtype,h,c,"max");l=n.makeTensorInfo(c.outShape,a.dtype,p.values)}return l}};var Vj={kernelName:Zp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat;JD(a,"maxPool3d");var c=nb(a.shape,i,o,1,s,u,l),d=pP(n.data.get(a.dataId).values,a.shape,a.dtype,qd(a.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};var Zj={kernelName:Hp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode;JD([a,i],"maxPool3DGrad");for(var c=nb(i.shape,o,s,1,u,l),d=function(e,t){for(var n=Wg(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left,m=0;m<t.batchSize;++m)for(var v=0;v<t.inChannels;++v)for(var g=0;g<t.outDepth;++g){for(var y=g*r-h,b=y;b<0;)b+=o;for(var x=Math.min(t.inDepth,l+y),w=0;w<t.outHeight;++w){for(var k=w*a-p,S=k;S<0;)S+=s;for(var E=Math.min(t.inHeight,c+k),T=0;T<t.outWidth;++T){for(var C=T*i-f,_=C;_<0;)_+=u;for(var M=Math.min(t.inWidth,d+C),I=Number.NEGATIVE_INFINITY,N=-1,A=b;A<x;A+=o)for(var R=A-y,O=S;O<E;O+=s)for(var D=O-k,L=_;L<M;L+=u){var P=L-C,F=e.get(m,A,O,L,v);F>=I&&(I=F,N=R*c*d+D*c+P)}n.set(N,m,g,w,T,v)}}}return n}(n.bufferSync(i),c),h=c.strideDepth,p=c.strideHeight,f=c.strideWidth,m=c.dilationDepth,v=c.dilationHeight,g=c.dilationWidth,y=c.effectiveFilterDepth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=y-1-c.padInfo.front,k=x-1-c.padInfo.left,S=b-1-c.padInfo.top,E=Wg(i.shape,"float32"),T=n.bufferSync(a),C=0;C<c.batchSize;++C)for(var _=0;_<c.inChannels;++_)for(var M=0;M<c.inDepth;++M)for(var I=0;I<c.inHeight;++I)for(var N=0;N<c.inWidth;++N){for(var A=M-w,R=I-S,O=N-k,D=0,L=0;L<y;L+=m){var P=(A+L)/h;if(!(P<0||P>=c.outDepth||Math.floor(P)!==P))for(var F=0;F<b;F+=v){var j=(R+F)/p;if(!(j<0||j>=c.outHeight||Math.floor(j)!==j))for(var z=0;z<x;z+=g){var B=(O+z)/f;if(!(B<0||B>=c.outWidth||Math.floor(B)!==B)){var U=y*b*x-1-d.get(C,P,j,B,_)===L*b*x+F*x+z?1:0;if(0!==U)D+=T.get(C,P,j,B,_)*U}}}}E.set(D,C,M,I,N,_)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};var Hj={kernelName:Vp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;JD([i,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,l=r.pad,c=r.dimRoundingMode,d=tb(o.shape,s,u,1,l,c),h=n.data.get(o.dataId).values,p=Wg(d.outShape,o.dtype,hP(h,o.shape,o.dtype,d).values),f=d.strideHeight,m=d.strideWidth,v=d.dilationHeight,g=d.dilationWidth,y=d.effectiveFilterHeight,b=d.effectiveFilterWidth,x=b-1-d.padInfo.left,w=y-1-d.padInfo.top,k=Wg(o.shape,"float32"),S=n.data.get(a.dataId).values,E=Wg(a.shape,"float32",S),T=0;T<d.batchSize;++T)for(var C=0;C<d.inChannels;++C)for(var _=0;_<d.inHeight;++_)for(var M=0;M<d.inWidth;++M){for(var I=_-w,N=M-x,A=0,R=0;R<y;R+=v){var O=(I+R)/f;if(!(O<0||O>=d.outHeight||Math.floor(O)!==O))for(var D=0;D<b;D+=g){var L=(N+D)/m;if(!(L<0||L>=d.outWidth||Math.floor(L)!==L)){var P=y*b-1-p.get(T,O,L,C)===R*b+D?1:0;if(0!==P)A+=E.get(T,O,L,C)*P}}}k.set(A,T,_,M,C)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var Gj={kernelName:Gp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,l=r;JD(a,"MaxPoolWithArgmax");var c=l.data.get(a.dataId).values,d=tb(a.shape,i,o,[1,1],s),h=function(e,t,n,r,a){var i=dP(e,0,n,qd(t),a,"max"),o=hP(e,t,n,a,!0,r);return[i.values,o.values]}(c,a.shape,a.dtype,u,d),p=(0,U.Z)(h,2),f=p[0],m=p[1],v=l.write(f,d.outShape,a.dtype),g=l.write(m,d.outShape,a.dtype);return[{dataId:v,shape:d.outShape,dtype:a.dtype},{dataId:g,shape:d.outShape,dtype:"int32"}]}};var qj={kernelName:qp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=Ld(i,a.shape),u=Md(jx(a.shape,s)[1]),l=[],c=n.makeTensorInfo([],"float32",new Float32Array([u]));l.push(c);var d=_L({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});l.push(d);var h=IF({inputs:{a:d,b:c},backend:n});l.push(h);var p=dF({inputs:{x:h},backend:n,attrs:{axis:i,keepDims:o}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),p}};var Xj={kernelName:Xp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;JD(a,"min");var s=Ld(i,a.shape),u=s,l=Ux(u,a.shape.length),c=a;null!=l&&(c=XL({inputs:{x:a},backend:n,attrs:{perm:l}}),u=Vx(u.length,a.shape.length)),Bx("min",u,c.shape.length);for(var d=jx(c.shape,u),h=(0,U.Z)(d,2),p=h[0],f=Md(h[1]),m=Qd(Md(p),c.dtype),v=n.data.get(c.dataId).values,g=0;g<m.length;++g){for(var y=g*f,b=v[y],x=0;x<f;++x){var w=v[y+x];(Number.isNaN(w)||w<b)&&(b=w)}m[g]=b}null!=l&&n.disposeIntermediateTensorInfo(c);var k=n.makeTensorInfo(p,c.dtype,m);if(o){var S=LL({inputs:{x:k},backend:n,attrs:{shape:zx(p,s)}});return n.disposeIntermediateTensorInfo(k),S}return k}},Yj=lL((function(e,t){return Math.min(e,t)})),Kj=IL(Yp,Yj),Qj={kernelName:Yp,backendName:"cpu",kernelFunc:Kj};var Jj={kernelName:Kp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;JD(a,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),l=i.map((function(e,t){return e[0]+a.shape[t]})),c="reflect"===o?0:1,d=n.data.get(a.dataId).values,h=a.shape.length,p=qd(a.shape),f=Md(s),m=s.length,v=qd(s),g=Fd(a.dtype,f),y=0;y<f;y++){for(var b=th(y,m,v),x=0;x<m;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-c:b[x]>=l[x]&&(b[x]=2*(l[x]-1)-b[x]+c);b=b.map((function(e,t){return e-u[t]}));var w=eh(b,h,p);g[y]=d[w]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},$j=lL((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),ez=IL(Qp,$j),tz={kernelName:Qp,backendName:"cpu",kernelFunc:ez};function nz(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(o," and dim was ").concat(s));var u=Ld([s],a.shape),l=Fj({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=zx(l.shape,u),d=LL({inputs:{x:l},backend:n,attrs:{shape:c}}),h=OF({inputs:{a:a,b:d},backend:n}),p=wF({inputs:{x:h},backend:n}),f=dF({inputs:{x:p},backend:n,attrs:{axis:u,keepDims:!1}}),m=LL({inputs:{x:f},backend:n,attrs:{shape:c}}),v=IF({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),v}var rz={kernelName:zf,backendName:"cpu",kernelFunc:nz};var az={kernelName:Jp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;JD(a,"multinomial");for(var u=s?a:nz({inputs:{logits:a},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],d=n.data.get(u.dataId).values,h=[l,i],p=Qd(Md(h),"int32"),f=0;f<l;++f){var m=f*c,v=new Float32Array(c-1);v[0]=d[m];for(var g=1;g<v.length;++g)v[g]=v[g-1]+d[m+g];for(var y=Cw.alea(o.toString()),b=f*i,x=0;x<i;++x){var w=y();p[b+x]=v.length;for(var k=0;k<v.length;k++)if(w<v[k]){p[b+x]=k;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(h,"int32",p)}};function iz(e,t,n){var r=Fm(-1,n);return sF([],t,r,e,n)}var oz={kernelName:ef,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;JD(r,"neg");var a=iz(n.data.get(r.dataId).values,r.shape,r.dtype),i=(0,U.Z)(a,2),o=i[0],s=i[1];return n.makeTensorInfo(s,r.dtype,o)}},sz=pS;var uz={kernelName:nf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;JD(a,"NonMaxSuppression");var l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,d=sz(l,c,o,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},lz=fS;var cz={kernelName:rf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize;JD(a,"NonMaxSuppressionPadded");var c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,h=lz(c,d,o,s,u,l),p=h.selectedIndices,f=h.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}},dz=mS;var hz={kernelName:af,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma;JD(a,"NonMaxSuppressionWithScore");var c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,h=dz(c,d,o,s,u,l),p=h.selectedIndices,f=h.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([f.length],"float32",new Float32Array(f))]}},pz=lL((function(e,t){return e!==t?1:0})),fz=IL(tf,pz,null,"bool"),mz={kernelName:tf,backendName:"cpu",kernelFunc:fz};var vz={kernelName:sf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue;JD(a,"oneHot");var u=Md(a.shape),l=new Float32Array(u*i);l.fill(s);for(var c=n.data.get(a.dataId).values,d=0;d<u;++d)c[d]>=0&&c[d]<i&&(l[d*i+c[d]]=o);return n.makeTensorInfo([].concat((0,_.Z)(a.shape),[i]),"int32",l)}};function gz(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=TL({inputs:{input:r},backend:n}),i=gz({inputs:{x:a},backend:n}),o=DP({inputs:{input:r},backend:n}),s=gz({inputs:{x:o},backend:n}),u=kL({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return zF({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var yz={kernelName:sm,backendName:"cpu",kernelFunc:gz};var bz={kernelName:of,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=TL({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=DP({inputs:{input:a},backend:r}),u=gz({inputs:{x:s},backend:r}),l=kL({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}return zF({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function xz(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return SF({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Td(a,e.shape,"All tensors passed to stack must have matching shapes"),Ed(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=SF({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=PP({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}var wz={kernelName:uf,backendName:"cpu",kernelFunc:xz};var kz={kernelName:lf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;JD(a,"pad");var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),l=n.data.get(a.dataId).values,c=Md(a.shape),d=a.shape.length,h=qd(a.shape),p=Md(s),f=s.length,m=qd(s),v=Fd(a.dtype,p);0!==o&&v.fill(o);for(var g=0;g<c;g++){var y=th(g,d,h).map((function(e,t){return e+u[t]}));v[eh(y,f,m)]=l[g]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}},Sz=lL((function(e,t){return Math.pow(e,t)})),Ez=IL(cf,Sz),Tz={kernelName:cf,backendName:"cpu",kernelFunc:Ez};function Cz(e,t,n,r){for(var a=jx(e,r),i=(0,U.Z)(a,2),o=i[0],s=i[1],u=cv(t,"int32"),l=Qd(Md(o),u),c=Md(s),d=0;d<l.length;++d){for(var h=d*c,p=1,f=0;f<c;++f)p*=n[h+f];l[d]=p}return{outVals:l,outShape:o,outDtype:u}}var _z={kernelName:hf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;JD(a,"prod");var s=a.shape.length,u=Ld(i,a.shape),l=Ux(u,s),c=u,d=a,h=[];null!=l&&(d=XL({inputs:{x:a},backend:n,attrs:{perm:l}}),h.push(d),c=Vx(c.length,s));var p=n.data.get(d.dataId).values,f=Cz(d.shape,d.dtype,p,c),m=f.outVals,v=f.outShape,g=f.outDtype,y=v;return o&&(y=zx(v,u)),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,g,m)}};function Mz(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Qd(0,r);var a=Qd(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return a}var Iz={kernelName:pf,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=Mz(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},Nz=tL(mf,(function(e){return 1/e})),Az={kernelName:mf,backendName:"cpu",kernelFunc:Nz};var Rz={kernelName:xf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;JD(a,"resizeBilinear");for(var u=qd(a.shape),l=(0,U.Z)(s,2),c=l[0],d=l[1],h=(0,U.Z)(a.shape,4),p=h[0],f=h[1],m=h[2],v=h[3],g=n.data.get(a.dataId).values,y=new Float32Array(Md([p,c,d,v])),b=[i&&c>1?f-1:f,i&&d>1?m-1:m],x=[i&&c>1?c-1:c,i&&d>1?d-1:d],w=0,k=b[0]/x[0],S=b[1]/x[1],E=0;E<p;E++)for(var T=0;T<c;T++){var C=void 0;C=o?k*(T+.5)-.5:k*T;for(var _=Math.max(0,Math.floor(C)),M=C-_,I=Math.min(f-1,Math.ceil(C)),N=E*u[0]+_*u[1],A=E*u[0]+I*u[1],R=0;R<d;R++){var O=void 0;O=o?S*(R+.5)-.5:S*R;for(var D=Math.max(0,Math.floor(O)),L=O-D,P=Math.min(m-1,Math.ceil(O)),F=N+D*u[2],j=A+D*u[2],z=N+P*u[2],B=A+P*u[2],W=0;W<v;W++){var V=g[F+W],Z=g[j+W],H=V+(g[z+W]-V)*L,G=H+(Z+(g[B+W]-Z)*L-H)*M;y[w++]=G}}}return n.makeTensorInfo([p,c,d,v],"float32",y)}};var Oz={kernelName:wf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;JD([i,a],"resizeBilinearGrad");for(var s=qd(a.shape),u=(0,U.Z)(a.shape,4),l=u[0],c=u[1],d=u[2],h=u[3],p=(0,U.Z)(i.shape,3),f=p[1],m=p[2],v=new Float32Array(l*c*d*h),g=[o&&f>1?c-1:c,o&&m>1?d-1:d],y=[o&&f>1?f-1:f,o&&m>1?m-1:m],b=g[0]/y[0],x=g[1]/y[1],w=n.data.get(i.dataId).values,k=0,S=0;S<l;S++)for(var E=S*s[0],T=0;T<f;T++)for(var C=T*b,_=Math.floor(C),M=Math.min(Math.ceil(C),c-1),I=E+_*s[1],N=E+M*s[1],A=C-_,R=1-A,O=0;O<m;O++)for(var D=O*x,L=Math.floor(D),P=Math.min(Math.ceil(D),d-1),F=D-L,j=1-F,z=I+L*s[2],B=I+P*s[2],W=N+L*s[2],V=N+P*s[2],Z=R*j,H=R*F,G=A*j,q=A*F,X=0;X<h;X++){var Y=w[k++];v[z+X]+=Y*Z,v[B+X]+=Y*H,v[W+X]+=Y*G,v[V+X]+=Y*q}return n.makeTensorInfo([l,d,c,h],"float32",v)}};var Dz={kernelName:yf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;JD(a,"resizeNearestNeighbor");for(var u=qd(a.shape),l=(0,U.Z)(s,2),c=l[0],d=l[1],h=(0,U.Z)(a.shape,4),p=h[0],f=h[1],m=h[2],v=h[3],g=n.data.get(a.dataId).values,y=new Float32Array(p*c*d*v),b=[i&&c>1?f-1:f,i&&d>1?m-1:m],x=[i&&c>1?c-1:c,i&&d>1?d-1:d],w=b[0]/x[0],k=b[1]/x[1],S=0,E=0;E<p;E++)for(var T=E*u[0],C=0;C<c;C++){var _=o?w*(C+.5):w*C,M=Math.min(f-1,i?Math.round(_):Math.floor(_));o&&(M=Math.max(0,M));for(var I=T+M*u[1],N=0;N<d;N++){var A=o?k*(N+.5):k*N,R=Math.min(m-1,i?Math.round(A):Math.floor(A));o&&(R=Math.max(0,R));for(var O=I+R*u[2],D=0;D<v;D++){var L=g[O+D];y[S++]=L}}}return n.makeTensorInfo([p,c,d,v],a.dtype,y)}};var Lz={kernelName:bf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;JD([i,a],"resizeNearestNeighborGrad");for(var s=qd(a.shape),u=qd(i.shape),l=(0,U.Z)(a.shape,4),c=l[0],d=l[1],h=l[2],p=l[3],f=(0,U.Z)(i.shape,3),m=f[1],v=f[2],g=new Float32Array(c*d*h*p),y=n.data.get(i.dataId).values,b=[o&&m>1?d-1:d,o&&v>1?h-1:h],x=[o&&m>1?m-1:m,o&&v>1?v-1:v],w=b[0]/x[0],k=b[1]/x[1],S=1/w,E=1/k,T=2*Math.ceil(S)+2,C=2*Math.ceil(E)+2,_=0;_<c;_++)for(var M=_*s[0],I=0;I<d;I++)for(var N=M+I*s[1],A=Math.floor(I*S),R=Math.floor(A-T/2),O=0;O<h;O++)for(var D=N+O*s[2],L=Math.floor(O*E),P=Math.floor(L-C/2),F=0;F<p;F++){for(var j=0,z=0;z<T;z++){var B=z+R;if(!(B<0||B>=m)){var W=M+B*u[1],V=B*w;if(I===Math.min(d-1,o?Math.round(V):Math.floor(V)))for(var Z=0;Z<C;Z++){var H=Z+P;if(!(H<0||H>=v)){var G=W+H*u[2],q=H*k;O===Math.min(h-1,o?Math.round(q):Math.floor(q))&&(j+=y[G+F])}}}}g[D+F]=j}return n.makeTensorInfo(a.shape,a.dtype,g)}};var Pz={kernelName:Sf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;JD(a,"reverse");var o=a.shape.length,s=Ld(i,a.shape);if(0===o)return iL({inputs:{x:a},backend:n});for(var u=new Jm(a.shape,a.dtype),l=n.bufferSync(a),c=function(){var e=u.indexToLoc(d),t=e.slice();s.forEach((function(e){return t[e]=a.shape[e]-1-t[e]})),u.set.apply(u,[l.get.apply(l,(0,_.Z)(t))].concat((0,_.Z)(e)))},d=0;d<u.size;d++)c();return n.makeTensorInfo(u.shape,u.dtype,u.values)}},Fz={kernelName:cm,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,l=Fd(a.dtype,Md(a.shape)),c=(0,U.Z)(a.shape,4),d=c[0],h=c[1],p=c[2],f=c[3],m=wE(s,h,p),v=(0,U.Z)(m,2),g=v[0],y=v[1],b=Math.sin(i),x=Math.cos(i),w=u.data.get(a.dataId).values,k=0;k<d;k++)for(var S=k*p*h*f,E=0;E<h;E++)for(var T=E*(p*f),C=0;C<p;C++)for(var _=C*f,M=0;M<f;M++){var I=[d,E,C,M],N=I[2],A=I[1],R=(N-g)*x-(A-y)*b,O=(N-g)*b+(A-y)*x;R=Math.round(R+g),O=Math.round(O+y);var D=o;if("number"!==typeof o&&(D=3===M?255:o[M]),R>=0&&R<p&&O>=0&&O<h)D=w[S+O*(p*f)+R*f+M];l[S+T+_+M]=D}return{dataId:u.write(l,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},jz=tL(Ef,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),zz={kernelName:Ef,backendName:"cpu",kernelFunc:jz},Bz=gL((function(e){return 1/Math.sqrt(e)})),Uz=nL(Tf,Bz),Wz={kernelName:Tf,backendName:"cpu",kernelFunc:Uz};function Vz(e,t,n,r,a,i,o,s,u,l){var c=[r/a,a],d=e.values,h=t.values;if(0===r)return Wg(n,t.dtype);var p=Wg(c,t.dtype);p.values.fill(u);for(var f=0;f<i;f++){for(var m=[],v=0,g=0;g<o;g++){var y=d[f*o+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var b=0;b<a;b++)l?p.values[v*a+b]+=h[f*a+b]:p.values[v*a+b]=0===t.rank?h[0]:h[f*a+b]}return p}var Zz={kernelName:Cf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=Pk(0,a,o),u=s.sliceRank,l=s.numUpdates,c=s.sliceSize,d=s.strides,h=s.outputSize,p=Vz(n.bufferSync(a),n.bufferSync(i),o,h,c,l,u,d,0,!0);return n.makeTensorInfo(o,p.dtype,p.values)}};var Hz={kernelName:_f,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;JD([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=cv(a.dtype,i.dtype),d=Qd(Md(a.shape),c),h=0,p=0===o||o>1||1===a.shape.length?1:Md(a.shape.slice(1)),f=0;f<s.length;f++)for(var m=0;m<p;m++)1===s[f]?d[h++]=u[f]:d[h++]=l[f];return n.makeTensorInfo(a.shape,c,d)}},Gz=tL(Mf,(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)})),qz={kernelName:Mf,backendName:"cpu",kernelFunc:Gz},Xz=tL(Rf,(function(e){return e<0?-1:e>0?1:0})),Yz={kernelName:Rf,backendName:"cpu",kernelFunc:Xz},Kz=tL(Nf,(function(e){return Math.sin(e)})),Qz={kernelName:Nf,backendName:"cpu",kernelFunc:Kz},Jz=tL(Af,(function(e){return Math.sinh(e)})),$z={kernelName:Af,backendName:"cpu",kernelFunc:Jz},eB=Math.log(1.1920928955078125e-7)+2,tB=tL(Df,(function(e){var t=e>-eB,n=e<eB,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),nB={kernelName:Df,backendName:"cpu",kernelFunc:tB};var rB={kernelName:Ff,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;JD([a],"spaceToBatchND");var s=Md(i),u=[[0,0]];u.push.apply(u,(0,_.Z)(o));for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=kz.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=kE(c.shape,i,s,!1),h=SE(d.length,i.length,!1),p=EE(c.shape,i,s,!1),f=LL({inputs:{x:c},backend:n,attrs:{shape:d}}),m=XL({inputs:{x:f},backend:n,attrs:{perm:h}}),v=LL({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),v}};function aB(e,t,n,r,a,i,o){var s=t[0],u=i[0],l=new Array(u),c=new Array(s),d=t[1];if(0===u){if(0!==s)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(s));return[jd(n,0),[0,d],jd(a,0),l,c]}for(var h=!0,p=0,f=new Array(u).fill(0),m=0;m<s;++m){var v=e[m*d];if(v<0)throw new Error(QE(m,v));if(v>=u)throw new Error(JE(m,v,u));++f[v],h=h&&v>=p,p=v}for(var g=!0,y=0;y<u;++y){var b=0===f[y];l[y]=b,g=g&&!b,f[y]=Math.max(f[y],1),y>0&&(f[y]+=f[y-1])}if(g&&h){for(var x=e,w=r,k=0;k<s;++k)c[k]=k;return[x,[s,d],w,l,c]}for(var S=f[u-1],E=jd(n,S*d),T=jd(a,S),C=new Array(u).fill(0),_=0;_<s;++_){var M=e[_*d],I=C[M],N=(0===M?0:f[M-1])+I;C[M]++;for(var A=0;A<d;++A)E[N*d+A]=e[_*d+A];T[N]=r[_],c[_]=N}for(var R=0;R<u;++R){if(0===C[R]){var O=0===R?0:f[R-1];E[O*d+0]=R;for(var D=1;D<d;++D)E[O*d+D]=0;T[O]=o}}return[E,[S,d],T,l,c]}var iB={kernelName:Bf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],d=aB(s,r.shape,r.dtype,u,a.dtype,l,c),h=(0,U.Z)(d,5),p=h[0],f=h[1],m=h[2],v=h[3],g=h[4];return[n.makeTensorInfo(f,r.dtype,p),n.makeTensorInfo([f[0]],a.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};function oB(e,t,n,r,a){for(var i,o=Md(r),s=t[0],u=a.length,l=[],c=1,d=-1,h=0;h<u;++h){var p=a[h];if(-1===p){if(-1!==d)throw new Error((i=h,"only one output dimension may be -1, not both ".concat(d," and ").concat(i)));d=h,l.push(1)}else{if(p<0)throw new Error($E(h,p));c*=p,l.push(p)}}if(-1!==d){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var f=Math.trunc(o/c);if(c*f!==o)throw new Error(function(e,t){var n=Md(e),r=Md(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}(r,l));l[d]=f}if(Md(l)!==o)throw new Error(function(e,t){var n=Md(e),r=Md(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}(r,l));var m=r.length,v=[];if(m>0){v[m-1]=1;for(var g=m-2;g>=0;--g)v[g]=v[g+1]*r[g+1]}var y=[];if(u>0){y[u-1]=1;for(var b=u-2;b>=0;--b)y[b]=y[b+1]*l[b+1]}for(var x=jd(n,s*u),w=0;w<s;++w){for(var k=0,S=0;S<m;++S)k+=e[w*m+S]*v[S];for(var E=0;E<u;++E)x[w*u+E]=Math.trunc(k/y[E]),k%=y[E]}return[x,[s,u],l]}var sB={kernelName:Uf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(i.dataId).values),l=oB(s,r.shape,r.dtype,o,u),c=(0,U.Z)(l,3),d=c[0],h=c[1],p=c[2];return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};function uB(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],l=u[1],c=s>0?a[s-1]+1:0;if(c<0)throw new Error("segment ids must be >= 0");var d=t.slice();d[0]=c;var h=d.reduce((function(e,t){return e*t}),1),p=jd(n,h);if(0===s)return c>0&&p.fill(o),[p,d];if(c<=0)throw new Error("segment ids must be >= 0");for(var f=0,m=1,v=0,g=a[f];;){var y=0;if(m<s){if(g===(y=a[m])){++m;continue}if(g>=y)throw new Error("segment ids are not increasing")}if(g<0||g>=c)throw new Error(eT(g,c));g>v&&p.fill(o,v*l,g*l);for(var b=f;b<m;++b){var x=r[b];if(x<0||x>=u[0])throw new Error(tT(b,r[b],u[0]));for(var w=0;w<l;w++)p[g*l+w]+=e[x*l+w]}if(i)for(var k=0;k<l;k++)p[g*l+k]/=m-f;if(f=m,v=g+1,g=y,++m>s)break}return v<c&&p.fill(o,v*l,c*l),[p,d]}var lB={kernelName:Wf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=uB(o,r.shape,r.dtype,s,u,!0),c=(0,U.Z)(l,2),d=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,d)}};var cB={kernelName:Vf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=uB(o,r.shape,r.dtype,s,u),c=(0,U.Z)(l,2),d=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,d)}};var dB={kernelName:Zf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=Pk(0,a,s),l=u.sliceRank,c=u.numUpdates,d=u.sliceSize,h=u.strides,p=u.outputSize,f=Vz(n.bufferSync(a),n.bufferSync(i),s,p,d,c,l,h,n.data.get(o.dataId).values[0],!1);return n.makeTensorInfo(s,f.dtype,f.values)}};var hB={kernelName:jf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=Ld(r.axis,a.shape)[0],s=KE(a,i,o),u=new Array(a.shape.length).fill(0),l=a.shape.slice();return s.map((function(e){var t=(0,_.Z)(l);t[o]=e;var r=xP({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r}))}},pB=gL((function(e){return Math.sqrt(e)})),fB=tL(Lf,(function(e){return Math.sqrt(e)})),mB={kernelName:Lf,backendName:"cpu",kernelFunc:fB},vB={kernelName:Gf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;JD(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},gB=lL((function(e,t){var n=e-t;return n*n})),yB=IL(Hf,gB),bB={kernelName:Hf,backendName:"cpu",kernelFunc:yB},xB=tL(um,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),wB={kernelName:um,backendName:"cpu",kernelFunc:xB};function kB(e,t,n,r){for(var a=Wg(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat((0,_.Z)(o)))}return a}var SB={kernelName:qf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,l=r.endMask,c=r.ellipsisMask,d=r.newAxisMask,h=r.shrinkAxisMask;JD(a,"stridedSlice");var p,f=Cy(a.shape,i,o,s,u,l,c,d,h),m=f.finalShapeSparse,v=f.finalShape,g=f.isIdentity,y=f.sliceDim0,b=f.isSimpleSlice,x=f.begin,w=f.end,k=f.strides;if(g)p=LL({inputs:{x:a},backend:n,attrs:{shape:v}});else if(y||b){Ed(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var S=ky(x,w,k),E=xP({inputs:{x:a},backend:n,attrs:{begin:x,size:S}});p=LL({inputs:{x:E},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(E)}else{var T=kB(m,n.bufferSync(a),k,x);p=n.makeTensorInfo(v,T.dtype,T.values)}return p}},EB=function(){function e(t,n,r,a,i,o){M(this,e),this.separator=Bm(t),this.nGramWidths=n,this.leftPad=Bm(r),this.rightPad=Bm(a),this.padWidth=i,this.preserveShort=o}return(0,I.Z)(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(){var s=o.getPadWidth(i),l=Math.max(0,s-u),c=Math.max(0,s-(a-(u+1))),d=i-(l+c),h=t+(l>0?0:u-s),p=0;p+=l*o.leftPad.length;for(var f=0;f<d;++f)p+=e[h+f].length;p+=c*o.rightPad.length,p+=(l+c+d-1)*o.separator.length,n[r+u]=new Uint8Array(p);for(var m=n[r+u],v=0,g=function(e){return e.forEach((function(e){return m[v++]=e}))},y=0;y<l;++y)g(o.leftPad),g(o.separator);for(var b=0;b<d-1;++b)g(e[h+b]),g(o.separator);if(d>0){g(e[h+d-1]);for(var x=0;x<c;++x)g(o.separator),g(o.rightPad)}else{for(var w=0;w<c-1;++w)g(o.rightPad),g(o.separator);g(o.rightPad)}},u=0;u<a;++u)s()}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=a-1,l=jd("int32",a);if(0===r||0===a){for(var c=new Array(r),d=0;d<=u;++d)l[d]=0;return[c,l]}l[0]=0;for(var h=function(){var e=t[p]-t[p-1],r=0;n.nGramWidths.forEach((function(t){r+=n.getNumNGrams(e,t)})),n.preserveShort&&e>0&&0===r&&(r=1),l[p]=l[p-1]+r},p=1;p<=u;++p)h();for(var f=new Array(l[u]),m=function(r){var a=t[r],i=l[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,f,i,u,o),i+=u})),n.preserveShort&&i===l[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,f,i,1,s)}},v=0;v<u;++v)m(v);return[f,l]}}]),e}();function TB(e,t,n,r,a,i,o,s){return new EB(n,r,a,i,o,s).compute(e,t)}var CB={kernelName:Xf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,l=r.preserveShortSequences,c=t.data,d=t.dataSplits,h=TB(n.data.get(c.dataId).values,n.data.get(d.dataId).values,a,i,o,s,u,l),p=(0,U.Z)(h,2),f=p[0],m=p[1];return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",m)]}};function _B(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var l=e.subarray(0,u);n&&0===l.length||r.push(l),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var c=0;c<e.length;++c)r.push(e.subarray(c,c+1))}function MB(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var l=a.length;_B(e[u],t,n,a);var c=a.length-l;s[u]=c,i+=c,o=Math.max(o,c)}for(var d=jd("int32",2*i),h=new Array(i),p=[r,o],f=0,m=0;m<r;++m)for(var v=0;v<s[m];++v)d[2*f]=m,d[2*f+1]=v,h[f]=a[f],++f;return[d,h,p]}var IB={kernelName:Yf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=MB(n.data.get(a.dataId).values,n.data.get(i.dataId).values[0],r),s=(0,U.Z)(o,3),u=s[0],l=s[1],c=s[2],d=l.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(c))]}};function NB(e,t){for(var n=jd("int32",e.length),r=0;r<e.length;++r)n[r]=Pm(e[r]).modulo(t).getLowBitsUnsigned();return n}var AB={kernelName:Kf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=NB(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",i)}},RB=tL(Jf,(function(e){return Math.tan(e)})),OB={kernelName:Jf,backendName:"cpu",kernelFunc:RB},DB=tL($f,(function(e){return Math.tanh(e)}));function LB(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=Wg(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var l=e.locToIndex(s);a.values[i]=e.values[l]}return a}var PB={kernelName:em,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;JD(a,"tile");var o=LB(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},FB=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function jB(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2);jB(e,t,Math.max(n,Math.floor(t-i*s/a+u)),Math.min(r,Math.floor(t+(a-i)*s/a+u)))}var l=e[t],c=n,d=r;for(kd(e,n,t),FB(e[r],l)>0&&kd(e,n,r);c<d;){for(kd(e,c,d),c++,d--;FB(e[c],l)<0;)c+=1;for(;FB(e[d],l)>0;)d-=1}0===FB(e[n],l)?kd(e,n,d):kd(e,d+=1,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function zB(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=Fd(n,o*r),l=Fd("int32",o*r),c=function(){var t=d*s,n=e.subarray(t,t+s),i=new Array(n.length);n.forEach((function(e,t){return i[t]={value:e,index:t}})),r<i.length&&(jB(i,r),i=i.slice(0,r)),a&&i.sort(FB);for(var o=d*r,c=u.subarray(o,o+r),h=l.subarray(o,o+r),p=0;p<r;p++)c[p]=i[p].value,h[p]=i[p].index},d=0;d<o;d++)c();var h=t.slice();return h[h.length-1]=r,[Wg(h,n,u),Wg(h,"int32",l)]}var BB={kernelName:tm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;JD(a,"topk");var s=zB(n.data.get(a.dataId).values,a.shape,a.dtype,i,o),u=(0,U.Z)(s,2),l=u[0],c=u[1];return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};var UB={kernelName:nm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=t.transforms,o=n.interpolation,s=n.fillMode,u=n.fillValue,l=n.outputShape,c=(0,U.Z)(a.shape,4),d=c[0],h=c[1],p=c[2],f=c[3],m=null!=l?l:[h,p],v=(0,U.Z)(m,2),g=v[0],y=v[1],b=[d,g,y,f],x=qd(a.shape),w=x[0],k=x[1],S=x[2],E=Fd(a.dtype,Md(b));E.fill(u);for(var T=r.data.get(a.dataId).values,C=r.data.get(i.dataId).values,_=0;_<d;++_){for(var M=1===i.shape[0]?C:C.subarray(8*_,8*_+8),I=0;I<g;++I)for(var N=0;N<y;++N)for(var A=0;A<f;++A){var R=void 0,O=M[6]*N+M[7]*I+1;if(0!==O){var D=(M[0]*N+M[1]*I+M[2])/O,L=(M[3]*N+M[4]*I+M[5])/O,P=WB(D,p,s),F=WB(L,h,s);switch(o){case"nearest":R=ZB(T,h,p,w,k,S,_,F,P,A,u);break;case"bilinear":R=HB(T,h,p,w,k,S,_,F,P,A,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(o))}E[_*w+I*k+N*S+A]=R}}return r.makeTensorInfo(b,a.dtype,E)}return{dataId:r.write(E,b,a.dtype),shape:a.shape,dtype:a.dtype}}};function WB(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return xd(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return xd(0,n,t-1)}(e,t);case"nearest":return function(e,t){return xd(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function VB(e,t,n,r,a,i,o,s,u,l,c){return 0<=s&&s<t&&0<=u&&u<n?e[o*r+s*a+u*i+l]:c}function ZB(e,t,n,r,a,i,o,s,u,l,c){return VB(e,t,n,r,a,i,o,Math.round(s),Math.round(u),l,c)}function HB(e,t,n,r,a,i,o,s,u,l,c){var d=Math.floor(s),h=Math.floor(u),p=d+1,f=h+1;return(p-s)*((f-u)*VB(e,t,n,r,a,i,o,d,h,l,c)+(u-h)*VB(e,t,n,r,a,i,o,d,f,l,c))+(s-d)*((f-u)*VB(e,t,n,r,a,i,o,p,h,l,c)+(u-h)*VB(e,t,n,r,a,i,o,p,f,l,c))}function GB(e,t,n,r){for(var a=Ld(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u={},l=new Int32Array(n[a]),c=new Jm(i,r,e),d=[],h=1===i[0]&&1===i[2],p=0;p<n[a];p++){var f=void 0;if(h)f=e[p].toString();else{for(var m=[],v=0;v<i[0];v++)for(var g=0;g<i[2];g++)m.push(c.get(v,p,g));f=m.join(",")}if(void 0!==u[f])l[p]=u[f];else{var y=Object.keys(u).length;u[f]=y,l[p]=y,d.push(p)}}var b=i.slice();b[1]=Object.keys(u).length;var x=new Jm(b,r);d.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)x.set(c.get(n,e,r),n,t,r)}));var w=n.slice();return w[a]=b[1],{outputValues:x.values,outputShape:w,indices:l}}var qB={kernelName:am,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;JD(i,"unique");var o=GB(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,u=o.outputShape,l=o.indices;return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}};var XB={kernelName:im,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),l=0,c=0;c<o;c++)c!==i&&(u[l++]=a.shape[c]);var d=new Array(o).fill(0),h=a.shape.slice();h[i]=1;for(var p=new Array(s),f=0;f<p.length;f++){d[i]=f;var m=xP({inputs:{x:a},backend:n,attrs:{begin:d,size:h}});p[f]=LL({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return p}};for(var YB={kernelName:om,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;JD(a,"unsortedSegmentSum");for(var s=[],u=[],l=a.shape.length-i.shape.length,c=i,d=0;d<l;++d){var h=SF({inputs:{input:c},backend:n,attrs:{dim:d+1}});c=h,u.push(h)}for(var p=0;p<o;++p){var f=Fm(p,"int32"),m=n.makeTensorInfo([],"int32",f),v=vF({inputs:{a:m,b:c},backend:n}),g=_L({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),y=lF({inputs:{a:g,b:a},backend:n}),b=dF({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(m),u.push(v),u.push(g),u.push(y),u.push(b)}var x=xz({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},KB=0,QB=[zL,UL,VL,HL,DL,GL,KL,QL,JL,$L,tP,rP,iP,uP,cP,fP,mP,vP,gP,jL,yP,kP,TP,CP,ML,IP,AP,SL,RP,FP,zP,BP,UP,WP,VP,ZP,GP,XP,YP,KP,QP,JP,eF,tF,nF,rF,aF,iF,oF,pF,aL,fF,gF,bF,kF,EF,_F,jF,BF,UF,ZF,qF,XF,YF,QF,$F,nj,ij,oL,oj,LP,uj,cj,hj,uL,mj,yj,xj,Sj,Tj,Mj,Nj,Oj,Dj,Lj,jj,Uj,Wj,Vj,Zj,Hj,Gj,qj,Xj,Qj,Jj,tz,az,cF,oz,uz,cz,hz,mz,vz,bz,wz,kz,Tz,hL,_z,Iz,CL,NF,Az,fL,vL,PL,Rz,Oz,Dz,Lz,Pz,Fz,zz,Wz,Zz,Hz,qz,xL,Yz,Qz,$z,wP,rz,nB,rB,iB,sB,lB,cB,dB,hB,mB,vB,bB,wB,SB,CB,IB,AB,DF,hF,OB,{kernelName:$f,backendName:"cpu",kernelFunc:DB},PB,BB,UB,YL,qB,XB,YB,yz];KB<QB.length;KB++){xm(QB[KB])}var JB,$B,eU,tU={},nU={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function rU(e,t){if(!(e in tU)){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;if(n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete tU[e]}),!1),1===e)return n.getContext("webgl",nU)||n.getContext("experimental-webgl",nU);return n.getContext("webgl2",nU)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;tU[e]=n}var r=tU[e];return null==r||r.isContextLost()?(delete tU[e],rU(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),tU[e])}function aU(e,t){return[t,e]}function iU(e){var t=Md(e);return Ad(Math.ceil(t/4))}function oU(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function sU(e,t){var n,r,a,i,o,s,u,l,c,d,h=e;return 2===oh().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,a=h.RGBA16F,i=h.RGBA32F,o=h.RED,u=4,l=1,c=h.HALF_FLOAT,d=h.FLOAT,s=h.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=h.RGBA,o=e.RGBA,u=4,l=4,c=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:l,textureTypeHalfFloat:c,textureTypeFloat:d}}function uU(e,t){var n=t();return oh().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(JB||(JB={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}($B||($B={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(eU||(eU={}));function lU(e){return!!(oh().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function cU(e,t){return wU(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function dU(e,t){var n=wU(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(uU(e,(function(){return e.shaderSource(n,t)})),uU(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=fU.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return Rd((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var l=o.slice(0,r-1),c=o.slice(r-1,r),d=o.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(Rd(c[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var hU,pU,fU=/ERROR: [0-9]+:([0-9]+):/g;function mU(e,t){if(uU(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function vU(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(uU(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),uU(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),uU(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function gU(e,t,n,r){uU(e,(function(){return function(e,t,n){kU(e,n),uU(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),uU(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),uU(e,(function(){return e.uniform1i(n,r)}))}function yU(e,t,n){uU(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),uU(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function bU(e,t){uU(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),uU(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function xU(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function wU(e,t,n){var r=uU(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function kU(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function SU(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Md(e.slice(0,e.length-t))}function EU(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function TU(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[SU(e)].concat((0,_.Z)(EU(e)))),t}function CU(e){return e%2===0}function _U(e,t){if(Id(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(CU(n)&&CU(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&CU(e[0])&&CU(t[0])}function MU(e,t){return null!=e.getExtension(t)}function IU(e){try{if(null!=rU(e))return!0}catch(GK){return console.log("Error when getting WebGL context: ",GK),!1}return!1}function NU(e){if(0===e)return!1;var t=rU(e);if(1!==e){if(MU(t,"EXT_color_buffer_float"))return AU(t);var n="EXT_color_buffer_half_float";if(MU(t,n)){var r=t.getExtension(n);return function(e,t){var n=sU(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!MU(t,"OES_texture_float")&&(!!MU(t,"WEBGL_color_buffer_float")&&AU(t))}function AU(e){var t=sU(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function RU(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Ed("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var OU=oh();function DU(){var e,t,n,r,a,i,o,s,u,l;return 2===oh().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function LU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=qd(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function PU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=qd(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function FU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=function(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}function jU(e){var t=qd(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}OU.registerFlag("HAS_WEBGL",(function(){return OU.getNumber("WEBGL_VERSION")>0})),OU.registerFlag("WEBGL_VERSION",(function(){return IU(2)?2:IU(1)?1:0})),OU.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),OU.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===OU.get("WEBGL_VERSION")})),OU.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),OU.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),OU.registerFlag("WEBGL_PACK",(function(){return OU.getBool("HAS_WEBGL")})),OU.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return OU.getBool("WEBGL_PACK")})),OU.registerFlag("WEBGL_PACK_CLIP",(function(){return OU.getBool("WEBGL_PACK")})),OU.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return OU.getBool("WEBGL_PACK")})),OU.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return OU.getBool("WEBGL_PACK")})),OU.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return OU.getBool("WEBGL_PACK")})),OU.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return OU.getBool("WEBGL_PACK")})),OU.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return OU.getBool("WEBGL_PACK")})),OU.registerFlag("WEBGL_PACK_REDUCE",(function(){return OU.getBool("WEBGL_PACK")})),OU.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return OU.getBool("WEBGL_PACK")})),OU.registerFlag("WEBGL_CONV_IM2COL",(function(){return OU.getBool("WEBGL_PACK")})),OU.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==hU){var t=rU(e);hU=t.getParameter(t.MAX_TEXTURE_SIZE)}return hU}(OU.getNumber("WEBGL_VERSION"))})),OU.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==pU){var t=rU(e);pU=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,pU)}(OU.getNumber("WEBGL_VERSION"))})),OU.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=OU.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=rU(e);return MU(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:MU(t,"EXT_disjoint_timer_query")?1:0}(e)})),OU.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return OU.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Sv()})),OU.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=rU(e);if(1===e){if(!MU(t,"OES_texture_float"))return!1}else if(!MU(t,"EXT_color_buffer_float"))return!1;return AU(t)}(OU.getNumber("WEBGL_VERSION"))})),OU.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!OU.getBool("WEBGL_FORCE_F16_TEXTURES")&&OU.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),OU.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return NU(OU.getNumber("WEBGL_VERSION"))})),OU.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=OU.getNumber("WEBGL_VERSION"))&&null!=rU(e).fenceSync;var e})),OU.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return OU.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),OU.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),OU.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return Sv()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),OU.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),OU.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),OU.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),OU.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var zU="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",BU=py;function UU(e,t,n){var r=[];if(e.forEach((function(e){var t=Md(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(QU(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?VU(e,r):WU(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=BU(e.shapeInfo.logicalShape,t.logicalShape),l=KU(s),c=s-o,d=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(d[e+c]," = 0;")})).join("\n");var h="";h=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+c])})).join(", ");var p="return outputValue;",f=1===Md(e.shapeInfo.logicalShape),m=Md(t.logicalShape),v=1===m;if(1!==o||f||v){if(f&&!v)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=o-2,y=o-1;u.indexOf(g)>-1&&u.indexOf(y)>-1?p="return vec4(outputValue.x);":u.indexOf(g)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(y)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(h,");\n      ").concat(p,"\n    }\n  ")}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&Id(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var l,c=KU(u),d=BU(e.shapeInfo.logicalShape,t.logicalShape),h=u-s,p=["x","y","z","w","u","v"];l=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(p[e+h]," = 0;")})).join("\n");var f="";f=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+h])})).join(", ");return"\n    float ".concat(a,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(l,"\n      return get").concat(r,"(").concat(f,");\n    }\n  ")}(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,l=DU(),c=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(l),d=function(e){var t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(ZU,"\n    ").concat(HU,"\n    ").concat(GU,"\n  ");return t}(l);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Id(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",l=2;l<e.length-1;l++)o*=e[e.length-l-1],s="\n      int b".concat(l," = index / ").concat(o,";\n      index -= b").concat(l," * ").concat(o,";\n    ")+s,u="b".concat(l,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(l)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(Id(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=PU(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=LU(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=PU(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=LU(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=LU(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=LU(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(l)),n.packedInputs&&(d+=qU),[d,c,i,o,a,s,n.userCode].join("\n")}function WU(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=(0,U.Z)(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=XU(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=(0,U.Z)(e.shapeInfo.texShape,2),l=u[0],c=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(l,", ").concat(c,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(YU(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=XU(n);if(1===o)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===i)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&Id(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=Pd(n),l=u.newShape,c=u.keptDims,d=l;if(d.length<n.length){var h=JU(e,d),p=["row","col"];return"\n      ".concat(WU(h,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat($U(p,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(YU(e),"\n      }\n    ");var f=i[0],m=i[1],v=XU(r);if(1===m)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(f,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===f)return t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(m,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(t)return"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(v,";\n    vec2 uv = uvFromFlat(").concat(f,", ").concat(m,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=Pd(n),u=s.newShape,l=s.keptDims,c=u;if(c.length<n.length){var d=JU(e,c),h=["row","col","depth"];return"\n        ".concat(WU(d,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat($U(h,l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(YU(e),"\n      }\n    ");var p=e.shapeInfo.texShape,f=p[0],m=p[1],v=e.shapeInfo.flatOffset;if(m===i&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(m,".0, ").concat(f,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(m===o&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(m,".0, ").concat(f,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var g=XU(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n        vec2 uv = uvFromFlat(").concat(f,", ").concat(m,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=Pd(n),l=u.newShape,c=u.keptDims;if(l.length<n.length){var d=JU(e,l),h=["row","col","depth","depth2"];return"\n      ".concat(WU(d,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat($U(h,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(YU(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,m=f[0],v=f[1],g="int stride2 = ".concat(r,"Shape[3];"),y="int stride1 = ".concat(r,"Shape[2] * stride2;"),b="int stride0 = ".concat(r,"Shape[1] * stride1;");if(v===s&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(g,"\n        ").concat(y,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(v===i&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var x=XU(r);if(t)return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(g,"\n      ").concat(y,"\n      ").concat(b,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(x,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index + ").concat(x,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=Pd(t),l=u.newShape,c=u.keptDims;if(l.length<t.length){var d=JU(e,l),h=["row","col","depth","depth2","depth3"];return"\n      ".concat(WU(d),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat($U(h,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(YU(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,m=f[0],v=f[1];if(v===s&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=XU(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Pd(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=JU(e,i),u=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(WU(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat($U(u,o),");\n      }\n    ")}var l=t[5],c=t[4]*l,d=t[3]*c,h=t[2]*d,p=t[1]*h;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(p,", ").concat(h,", ").concat(d,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(l,", 1)));\n        ").concat(YU(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,m=e.shapeInfo.texShape,v=m[0],g=m[1];if(g===p&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(h,", ").concat(d,", ").concat(c,", ").concat(l,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(g===l&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var y=XU(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(p," + col * ").concat(h," + depth * ").concat(d," +\n          depth2 * ").concat(c," + depth3 * ").concat(l," + depth4 + ").concat(y,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(g,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function VU(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=DU();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=DU();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=DU();if(null!=i&&Id(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(c,", ").concat(l[0],", ").concat(l[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=JU(e,n.slice(1)),l=["b","row","col"];return"\n        ".concat(VU(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat($U(l,s),");\n        }\n      ")}var c=DU();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ");var d=o[0],h=o[1],p=Math.ceil(n[2]/2),f=p*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(d,", ").concat(h,", ").concat(f,", ").concat(p,", b, row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=DU();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=u[0],c=u[1],d=Math.ceil(i[o-1]/2),h=d*Math.ceil(i[o-2]/2),p="int b, int row, int col",f="b * ".concat(h," + (row / 2) * ").concat(d," + (col / 2)"),m=2;m<o-1;m++)p="int b".concat(m,", ")+p,h*=i[o-m-1],f="b".concat(m," * ").concat(h," + ")+f;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(c,";\n      int texC = index - texR * ").concat(c,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(c,", ").concat(l,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var ZU="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",HU="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",GU="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",qU="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function XU(e){return"offset".concat(e)}function YU(e){var t=e.name,n=Md(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function KU(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function QU(e,t,n){var r=Pd(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],u=s?t.slice(1):a,l=!e&&o>1&&!Id(t,n)&&a.length<o||s;return{useSqueezeShape:l,uniformShape:l?u:t,keptDims:i}}function JU(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function $U(e,t){return t.map((function(t){return e[t]})).join(", ")}function eW(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!Id(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!Id(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function tW(e){return oh().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var nW=(0,I.Z)((function e(t){M(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=JB.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=DU();this.outputShape=t,this.enableShapeUniforms=tW(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?PU(["r","c","d"],t):LU(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),rW=(0,I.Z)((function e(t){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=JB.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=DU();this.outputShape=t,this.enableShapeUniforms=tW(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?PU(["r","c","d"],t):LU(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),aW=(0,I.Z)((function e(t){M(this,e),this.variableNames=["A"],this.outTexUsage=$B.DOWNLOAD;var n=DU();this.outputShape=t,this.userCode="\n      ".concat(zU,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),iW=(0,I.Z)((function e(t){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=$B.DOWNLOAD;var n=DU();this.outputShape=t,this.userCode="\n      ".concat(zU,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),oW=(0,I.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];M(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=DU();this.outputShape=t,this.enableShapeUniforms=tW(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":jU(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),sW=(0,I.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];M(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=DU();this.outputShape=t,this.enableShapeUniforms=tW(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":jU(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")}));function uW(e){var t=DU();return function(e,t){var n=wU(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(uU(e,(function(){return e.shaderSource(n,t)})),uU(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function lW(e){return function(e,t){var n=wU(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return uU(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),uU(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function cW(e){return function(e,t){var n=wU(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return uU(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),uU(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function dW(e,t,n,r,a,i){!function(e,t){var n=oh().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);var o=function(e){return wU(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return uU(e,(function(){return e.bindTexture(s,o)})),uU(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),uU(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),uU(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),uU(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===oh().getNumber("WEBGL_VERSION")?uU(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):uU(e,(function(){return e.texStorage2D(s,1,r,t,n)})),uU(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function hW(e){return e.internalFormatFloat}function pW(e){return e.internalFormatHalfFloat}function fW(e){return e.downloadTextureFormat}function mW(e){return e.internalFormatPackedFloat}function vW(e){return e.internalFormatPackedHalfFloat}function gW(e,t,n,r,a,i,o,s){var u=e,l=new Float32Array(function(e,t){var n=oU(e,t),r=(0,U.Z)(n,2);return r[0]*r[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}var yW=function(){function e(t){M(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=oh().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){tU[e]=t}(n,t)):this.gl=rU(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(1===oh().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=cU(this.gl,"OES_texture_float"),MU(this.gl,i))this.textureHalfFloatExtension=cU(this.gl,i);else if(oh().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),MU(this.gl,a))this.colorBufferHalfFloatExtension=cU(this.gl,a);else if(oh().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",MU(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!MU(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=lW(this.gl),this.indexBuffer=cW(this.gl),this.framebuffer=function(e){return wU(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=sU(this.gl,this.textureHalfFloatExtension)}return(0,I.Z)(e,[{key:"debug",get:function(){return oh().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;uU(t,(function(){return t.finish()})),uU(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),uU(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),uU(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),uU(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),uU(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=aU(t,n),i=(0,U.Z)(a,2);return dW(e,i[0],i[1],hW(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=aU(t,n),i=(0,U.Z)(a,2);return dW(e,i[0],i[1],pW(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=aU(t,n),i=(0,U.Z)(a,2);return dW(e,i[0],i[1],fW(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){uU(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===oh().getNumber("WEBGL_VERSION")?uU(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):uU(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===oh().getNumber("WEBGL_VERSION")?uU(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):uU(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),uU(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,s,u;uU(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),2===oh().getNumber("WEBGL_VERSION")?uU(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):uU(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),uU(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=oU(t,n),i=(0,U.Z)(a,2);return dW(e,i[0],i[1],vW(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=oU(t,n),i=(0,U.Z)(a,2);return dW(e,i[0],i[1],mW(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(bU(this.gl,this.framebuffer),this.outputTexture=null),uU(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=aU(t,n),i=(0,U.Z)(a,2),o=i[0],s=i[1],u=new Uint8Array(t*n*4);return uU(e,(function(){return e.readPixels(0,0,o,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return gW(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();uU(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return uU(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),uU(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),uU(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(oh().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else oh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,oh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return uU(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=uW(n));var r=function(e){return wU(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return uU(n,(function(){return n.attachShader(r,t.vertexShader)})),uU(n,(function(){return n.attachShader(r,e)})),function(e,t){if(uU(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,r),this.debug&&mU(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return uU(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),vU(e,t,"clipSpacePos",n,3,20,0)&&vU(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&uU(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&mU(this.gl,this.program),uU(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return wU(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),uU(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),gU(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=oU(t,n),a=(0,U.Z)(r,2),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,i,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&mU(this.gl,this.program),xU(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),uU(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),uU(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=cU(this.gl,2===oh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===oh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==oh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=Jn(Kn().mark((function e(t){var n=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Od((function(){return n.disposed||n.isQueryAvailable(t,oh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,oh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||Od((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),yU(this.gl,e,this.framebuffer),this.debug&&xU(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(yU(this.gl,this.outputTexture,this.framebuffer),this.debug&&xU(this.gl)):bU(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;yU(r,e,this.framebuffer),this.debug&&xU(r),this.outputTexture=e,uU(r,(function(){return r.viewport(0,0,t,n)})),uU(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),uU(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var bW=AL,xW=SP,wW=EP,kW=_P,SW=OP,EW=mF,TW=xF,CW=TF,_W=WF,MW=KF,IW=JF,NW=ej,AW=rj,RW=pj,OW=vj,DW=bj,LW=wj,PW=Pj,FW=zj,jW=Yj,zW=sF,BW=iz,UW=pz,WW=Cz,VW=Mz,ZW=Bz,HW=yL,GW=BL,qW=bP,XW=aB,YW=oB,KW=uB,QW=pB,JW=kB,$W=TB,eV=MB,tV=NB,nV=AF,rV=LB,aV=zB,iV=qL,oV=GB;function sV(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function uV(e,t){return 1===t?[e]:sV(e,t)}var lV=function(){function e(t){if(M(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=tW(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=uV("rc",this.rank),r=KU(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return(0,I.Z)(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),cV=(0,I.Z)((function e(t,n){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=tW(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?FU(["r","c","d"],"inputShape"):LU(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":jU(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var dV=function(){function e(t){M(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return(0,I.Z)(e,[{key:"acquireTexture",value:function(e,t,n){var r=pV(t,n),a=fV(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=hV(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===eU.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===eU.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===eU.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===eU.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===eU.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=pV(n,r),i=fV(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=hV(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=oh().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],l=u.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(l,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function hV(e,t,n,r,a){var i,o=function(e,t){switch(e){case eU.PACKED_2X2_FLOAT32:return mW(t);case eU.PACKED_2X2_FLOAT16:return vW(t);case eU.UNPACKED_FLOAT32:return hW(t);case eU.UNPACKED_FLOAT16:return pW(t);case eU.PACKED_4X1_UNSIGNED_BYTE:return fW(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=oU(e[0],e[1]),u=(0,U.Z)(s,2);i=u[0]*u[1]}else{var l=aU(e[0],e[1]),c=(0,U.Z)(l,2);i=c[0]*c[1]}var d=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*d}function pV(e,t){if(e===$B.UPLOAD)return eU.PACKED_2X2_FLOAT32;if(e===$B.RENDER||null==e)return function(e){return oh().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?eU.PACKED_2X2_FLOAT32:eU.UNPACKED_FLOAT32:e?eU.PACKED_2X2_FLOAT16:eU.UNPACKED_FLOAT16}(t);if(e===$B.DOWNLOAD||e===$B.PIXELS)return eU.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function fV(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var mV=(0,I.Z)((function e(t,n){M(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=tW(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),vV="if (isnan(x)) return x;",gV="return x;",yV="return abs(x);";var bV="return (x >= 0.0) ? x : (exp(x) - 1.0);",xV=vV+"\n  return (x < 0.0) ? 0.0 : x;\n",wV=vV+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",kV="return x;",SV="return 1.0 / (1.0 + exp(-1.0 * x));",EV="return x;",TV="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",CV="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",_V="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",MV="return 1.0 / (1.0 + exp(-1.0 * x));",IV=(0,I.Z)((function e(t,n){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=tW(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),NV=(0,I.Z)((function e(t){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=tW(this.outputShape.length);var n=t.length,r=uV("rc",n),a=KU(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),AV=Ck,RV={};var OV=oh().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var DV=function(e){A(n,e);var t=F(n);function n(e){var r,a,i;if(M(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!oh().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof yW)a=e;else{var o=rU(oh().getNumber("WEBGL_VERSION"),e);a=new yW(o)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=rU(oh().getNumber("WEBGL_VERSION"));a=new yW(s),r.binaryCache=((i=oh().getNumber("WEBGL_VERSION"))in RV||(RV[i]={}),RV[i]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new dV(r.gpgpu),r.numMBBeforeWarning=null==oh().global.screen?1024:oh().global.screen.height*oh().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new vd((0,L.Z)(r),Ay()),r}return(0,I.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((oh().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||oh().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:$B.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(oh().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:$B.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new IV(o,kV):new mV(o,kV);var l=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),c=this.readSync(l.dataId);return this.disposeIntermediateTensorInfo(l),c}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,h,p=null!=this.activeTimers;(p&&(d=zm()),"complex64"===r)?h=PE(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):h=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=zm()-d),this.convertAndCacheOnCPU(e,h)}},{key:"read",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i,o,s,u,l,c,d,h,p,f,m,v,g,y,b,x,w,k,S,E;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,u=r.complexTensorInfos,l=r.isPacked,null==o){e.next=11;break}return c=l?new IV(i,kV):new mV(i,kV),d=this.runWebGLProgram(c,[{dataId:t,shape:i,dtype:s}],s),h=this.read(d.dataId),this.disposeIntermediateTensorInfo(d),e.abrupt("return",h);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!oh().getBool("DEBUG")){e.next=16;break}if(oh().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==oh().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(p=null,"complex64"!==s&&oh().get("WEBGL_BUFFER_SUPPORTED")&&(f=this.decode(t),v=this.texData.get(f.dataId),p=(m=this.gpgpu).createBufferFromTexture.apply(m,[v.texture.texture].concat((0,_.Z)(iU(i))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 25:y=e.sent,b=y[0],x=y[1],g=PE(b,x),e.next=32;break;case 31:null==p?g=this.getValuesFromTexture(t):(w=Md(i),g=this.gpgpu.downloadFloat32MatrixFromBuffer(p,w));case 32:return null!=f&&this.disposeIntermediateTensorInfo(f),null!=p&&uU(k=this.gpgpu.gl,(function(){return k.deleteBuffer(p)})),S=this.convertAndCacheOnCPU(t,g),E=this.pendingRead.get(t),this.pendingRead.delete(t),E.forEach((function(e){return e(S)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Ay().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",S);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var l;l=s?new IV(a,kV):new mV(a,kV);var c=this.runWebGLProgram(l,[{dataId:e,shape:a,dtype:o}],o),d=this.readToGPU(c,t);return this.disposeIntermediateTensorInfo(c),d}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var h=this.decode(e,t.customTexShape),p=Ay().makeTensorFromDataId(h.dataId,h.shape,h.dtype),f=this.texData.get(h.dataId);return Object.assign({tensorRef:p},f.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return Um(e)}))}catch(l4){throw new Error("Failed to decode encoded string bytes into utf-8")}return Wg(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!lU(n)){if(oh().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=Md(n);if(oh().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),l=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture.texture].concat((0,_.Z)(iU(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),l}var c=oh().getBool("WEBGL_PACK")&&!0===a,d=c?TU(n):n,h=c?new iW(d):new aW(d),p=this.runWebGLProgram(h,[{shape:d,dtype:r,dataId:e}],"float32"),f=this.texData.get(p.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(f.texture.texture,f.texShape[0],f.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(p),m}},{key:"timerAvailable",value:function(){return oh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=_d(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=_d(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return Jn(Kn().mark((function e(){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(oh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=Sd(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return oh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:zm(),endMs:null}}},{key:"endTimer",value:function(e){return oh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=zm(),e)}},{key:"getQueryTime",value:function(){var e=Jn(Kn().mark((function e(t){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(oh().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e).complexTensorInfos;return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:OV;return oh().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&Md(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){fm("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return AV(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new IV(e.shape,t),a=this.compileAndRun(r,[e],n);return Ay().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=GW(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(oh().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,yV,e.dtype);var n=new mV(e.shape,yV),r=this.compileAndRun(n,[e]);return Ay().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Wd(n[0])){var a=n.map((function(e){return Bm(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return Ay().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new NV(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new lV(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[SU(e.shape)].concat((0,_.Z)(EU(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[SU(t)].concat((0,_.Z)(EU(t))),i=new cV(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;null!=t&&Ed(Md(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var o,s=TU(a);o=r?new rW(s):new nW(s);var u=[null!=t?t:iU(s)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,u,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===JB.DENSE){var l=null!=o?o:iU(e.outputShape);u.texShape=l.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===Md(s.shape))return u.values=Fd(s.dtype,0),s;var c=[],d=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Md(t.shape)<=oh().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),c.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!_U(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),c.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var h,p={shape:s.shape,texData:u,isUniform:!1},f=function(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=QU(e.packedInputs,t.shape,i),s=o.useSqueezeShape,u=o.uniformShape,l=o.keptDims,c="",d="",h="";if(1===u.length&&e.packedInputs){var p=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];c="".concat(p[0]>1,"_").concat(p[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var f=qd(u);h="".concat(f[0]===i[1],"_").concat(f[f.length-1]===i[1])}}else d="".concat(u[0]>1,"_").concat(u[1]>1);var m=t.shape.length,v=2===u.length&&Id(t.shape,i),g=1===Md(t.shape),y=py(t.shape,n.shape),b=!e.packedInputs&&m===n.shape.length&&Id(i,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(m,"_").concat(b,"_").concat(s?l:"","_").concat(u.length,"_").concat(g,"_").concat(y,"_").concat(v,"_").concat(c,"_").concat(d,"_").concat(h,"_").concat(x,"_").concat(a)}else{var w=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(w,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+"_"+r+"_"+a+"".concat(oh().getNumber("WEBGL_VERSION"))}(e,d,p),m=this.getAndSaveBinary(f,(function(){return function(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=UU(a,o,t),u=dU(e.gl,s),l=e.createProgram(u),c=null,d=e.getUniformLocation(l,"NAN",!1);1===oh().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(l,"INFINITY",!1));for(var h,p,f,m=!1,v={},g={},y={},b=0;b<t.variableNames.length;b++){var x=t.variableNames[b];v[x]=e.getUniformLocation(l,x,m),v["offset".concat(x)]=e.getUniformLocation(l,"offset".concat(x),m),t.enableShapeUniforms&&(g["".concat(x,"Shape")]=e.getUniformLocation(l,"".concat(x,"Shape"),m),y["".concat(x,"TexShape")]=e.getUniformLocation(l,"".concat(x,"TexShape"),m))}t.enableShapeUniforms&&(h=e.getUniformLocation(l,"outShape",m),f=e.getUniformLocation(l,"outShapeStrides",m),p=e.getUniformLocation(l,"outTexShape",m));var w=[];return t.customUniforms&&t.customUniforms.forEach((function(t,n){w[n]=e.getUniformLocation(l,t.name,m)})),{program:t,fragmentShader:u,source:s,webGLProgram:l,uniformLocations:v,customUniformLocations:w,inShapeInfos:i,outShapeInfo:o,infLoc:c,nanLoc:d,inShapesLocations:g,inTexShapesLocations:y,outShapeLocation:h,outShapeStridesLocation:f,outTexShapeLocation:p}}(a.gpgpu,e,d,p)})),v=null!=this.activeTimers;v&&(h=this.startTimer()),function(e,t,n,r,a){t.program.enableShapeUniforms||(eW(t.inShapeInfos,n),eW([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===oh().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var l=QU(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(l.length){case 1:e.gl.uniform1iv(s,new Int32Array(l));break;case 2:e.gl.uniform2iv(s,new Int32Array(l));break;case 3:e.gl.uniform3iv(s,new Int32Array(l));break;case 4:e.gl.uniform4iv(s,new Int32Array(l))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=i)if(n.isUniform)if(Md(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var c=n.uniformValues;c instanceof Float32Array||(c=new Float32Array(c)),e.gl.uniform1fv(i,c)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=qd(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var i=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(i,o)}})),e.executeProgram()}(this.gpgpu,m,d,p,r),c.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),v&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)}));var g=oh().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var y=zm();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!oh().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!oh().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Oy((function(){if(!oh().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=oh().getBool("DEBUG");oh().set("DEBUG",!1);var n=e.abs(jy(1e-8)).dataSync()[0];if(oh().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var u,l=null!=this.activeTimers;l&&(u=zm());var c=t.texShape;if(null==c&&(c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=oh().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,e=e.map((function(t,n){return n>=e.length-2?wd(e[n]):e[n]})),1===e.length&&(e=[2,e[0]])),2!==e.length){var r=Pd(e);e=r.newShape}var a=Md(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var i=SU(e),o=2,s=2;if(e.length){var u=EU(e),l=(0,U.Z)(u,2);o=l[0],s=l[1]}return Ad(a=i*(o/2)*(s/2)).map((function(e){return 2*e}))}return Ad(a)}(n,s),t.texShape=c),null!=a){var d,h=TU(n),p=c[1],f=c[0],m=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(s||!m){var v=oU(c[0],c[1]),g=(0,U.Z)(v,2);p=g[0],f=g[1]}d=s?new sW(h,m):new oW(h,m);var y=m?[f,p]:c,b=this.makeTensorInfo(y,r),x=this.texData.get(b.dataId);x.usage=m?$B.PIXELS:$B.UPLOAD,x.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,f,a);var w=[[f,p]],k=this.runWebGLProgram(d,[b],r,w,!0),S=this.texData.get(k.dataId);t.texture=S.texture,t.texShape=S.texShape,t.isPacked=S.isPacked,t.usage=S.usage,this.disposeIntermediateTensorInfo(b),this.texData.delete(k.dataId),t.values=null,l&&(this.uploadWaitMs+=zm()-u)}else{var E=this.acquireTexture(c,o,r,s);t.texture=E}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*Ud(t)}}]),n}(gd);DV.nextDataId=0;Ev()&&Py("webgl",(function(){return new DV}),2);var LV="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",PV=(0,I.Z)((function e(t,n,r){M(this,e),this.variableNames=["A","B"],this.outputShape=my(n,r),this.enableShapeUniforms=tW(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),FV="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n",jV=(0,I.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];M(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=my(n,r);var i=this.outputShape.length;this.enableShapeUniforms=tW(i);var o="";if(a)if(0===i||1===Md(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=KU(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=uV("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function zV(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var BV={kernelName:Sp,backendName:"webgl",kernelFunc:zV};function UV(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=zV({inputs:{x:r},backend:n}),u=zV({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var WV={kernelName:Ph,backendName:"webgl",kernelFunc:UV},VV="return (a < 0.) ? b * a : a;",ZV="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var HV={kernelName:Ip,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",Fm(i,"float32")),s=oh().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jV(ZV,a.shape,o.shape):new PV(VV,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},GV="return (a < 0.) ? b * a : a;",qV="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var XV={kernelName:df,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=oh().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jV(qV,r.shape,a.shape):new PV(GV,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}},YV="if (isnan(x)) return x;";function KV(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,l=s,c=a||u.dtype;if(l.shouldExecuteOnCPU([u])&&null!=r){var d=l.texData.get(u.dataId),h=r(d.values,c);return l.makeTensorInfo(u.shape,c,h)}return i=oh().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new IV(u.shape,n):new mV(u.shape,t),l.runWebGLProgram(i,[u],c)}}function QV(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,i=e.backend,l=r.a,c=r.b,d=i;if(o&&"complex64"===l.dtype){var h=d.texData.get(l.dataId),p=d.texData.get(c.dataId),f=[[h.complexTensorInfos.real,p.complexTensorInfos.real],[h.complexTensorInfos.imag,p.complexTensorInfos.imag]].map((function(e){var n=(0,U.Z)(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:l.shape},o={dataId:a.dataId,dtype:a.dtype,shape:c.shape},s=new PV(t,l.shape,c.shape);return d.runWebGLProgram(s,[i,o],cv(r.dtype,a.dtype))})),m=(0,U.Z)(f,2),v=m[0],g=m[1],y=UV({inputs:{real:v,imag:g},backend:d});return d.disposeIntermediateTensorInfo(v),d.disposeIntermediateTensorInfo(g),y}var b,x=u||cv(l.dtype,c.dtype);if(("string"===l.dtype||"string"===c.dtype||d.shouldExecuteOnCPU([l,c]))&&null!=s){var w=d.texData.get(l.dataId).values,k=d.texData.get(c.dataId).values,S="string"===l.dtype?rT(w):w,E="string"===l.dtype?rT(k):k,T=s(l.shape,c.shape,S,E,x),C=(0,U.Z)(T,2),_=C[0],M=C[1],I=d.makeTensorInfo(M,x);return d.texData.get(I.dataId).values=_,I}return b=oh().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new jV(n,l.shape,c.shape,a):new PV(t,l.shape,c.shape),d.runWebGLProgram(b,[l,c],x)}}function JV(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?EV:gV;if("relu"===e)return t?CV:xV;if("elu"===e)return t?TV:bV;if("relu6"===e)return t?_V:wV;if("prelu"===e)return t?qV:GV;if("leakyrelu"===e)return t?ZV:VV;if("sigmoid"===e)return t?MV:SV;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var $V=(0,I.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];M(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=tW(this.outputShape.length);var c=a?t[1]:t[2],d=Math.ceil(c/2),h=a?"i * 2, rc.y":"rc.y, i * 2",p=i?"rc.z, i * 2":"i * 2, rc.z",f=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],v="",g="";s&&(v=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):l?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(v,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(d,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(f[0]," * ").concat(m[0],");\n          result += (").concat(f[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")})),eZ={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},tZ=(0,I.Z)((function e(t,n,r){M(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=my(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),nZ="return a * b;";function rZ(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=cv(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(i.dataId),l=new tZ(eZ.REAL,a.shape,i.shape),c=new tZ(eZ.IMAG,a.shape,i.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],h=r.runWebGLProgram(l,d,"float32"),p=r.runWebGLProgram(c,d,"float32"),f=UV({inputs:{real:h,imag:p},backend:r});return r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(p),f}if(r.shouldExecuteOnCPU([a,i])){var m=r.texData.get(a.dataId),v=r.texData.get(i.dataId),g=zW(a.shape,i.shape,m.values,v.values,o),y=(0,U.Z)(g,2),b=y[0],x=y[1],w=r.makeTensorInfo(x,o);return r.texData.get(w.dataId).values=b,w}return t=oh().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jV(nZ,a.shape,i.shape):new PV(nZ,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var aZ={kernelName:$p,backendName:"webgl",kernelFunc:rZ};function iZ(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=Md(a.shape),u=Dd(i,s),l=Md(u);Ed(s===l,(function(){return"The new shape (".concat(u,") has ").concat(l," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var c=o.texData.get(a.dataId);return!c.isPacked||_U(a.shape,u)||null!==c.texture&&_U(c.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[SU(e.shape)].concat((0,_.Z)(EU(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[SU(t)].concat((0,_.Z)(EU(t))),o=new cV(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,o)}var oZ={kernelName:gf,backendName:"webgl",kernelFunc:iZ},sZ=(0,I.Z)((function e(t,n){M(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),u=r%4,l="sumValue += dot(values, ones);";if(null!=n){var c=1/n;l="sumValue += dot(values * ".concat(Nd(c)?c.toPrecision(2):c,", ones);")}var d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),uZ=(0,I.Z)((function e(t,n){M(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var l="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?l="sumValue":"prod"===n?l="prodValue":"all"===n?l="allValue":"any"===n&&(l="anyValue");var c=4*Math.floor(r/4),d=r%4,h="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),p="vec4";"all"===n?(s="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(s="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}));function lZ(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=xE(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],l=u.inSize,c=u.windowSize,d=u.outSize,h=void 0;h="mean"===n?0===o?new sZ({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:d},l):new sZ({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:d}):new uZ({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:d},n),s=i,i=r.runWebGLProgram(h,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var cZ=(0,I.Z)((function e(t,n){M(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=KU(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var dZ=(0,I.Z)((function e(t,n){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=KU(this.rank),o=sV("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var l="vec2(".concat(s.slice(-2).join(),")"),c="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(l,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(c,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(c,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function hZ(e,t,n){var r=oh().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dZ(e.shape,t):new cZ(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function pZ(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=Ld(a,e.shape),s=o,u=Ux(s,i),l=null!=u,c=e;l&&(c=hZ(e,u,r),s=Vx(s.length,i)),Bx("sum",s,i);var d=jx(c.shape,s),h=(0,U.Z)(d,2),p=h[0],f=h[1],m=p;n&&(m=zx(p,o));var v=Md(f),g=iZ({inputs:{x:c},attrs:{shape:[Md(e.shape)/v,v]},backend:r}),y=lZ(g,dv(e.dtype),"sum",r),b=iZ({inputs:{x:y},attrs:{shape:m},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(y),l&&r.disposeIntermediateTensorInfo(c),b}(t.x,r.axis,r.keepDims,n)}var fZ={kernelName:Pf,backendName:"webgl",kernelFunc:pZ};function mZ(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,l=new Array(u),c=0;c<l.length;c++)l[c]=i.shape[o[c]];if(s.shouldExecuteOnCPU([i])){var d=s.texData.get(i.dataId).values,h=iV(d,i.shape,i.dtype,o,l);t=s.makeTensorInfo(l,i.dtype),s.texData.get(t.dataId).values=h}else t=hZ(i,o,s);return t}var vZ={kernelName:rm,backendName:"webgl",kernelFunc:mZ},gZ=1e3;function yZ(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,l=void 0===u?null:u,c=e.leakyreluAlpha,d=void 0===c?0:c,h=e.activation,p=void 0===h?null:h,f=t.shape.length,m=n.shape.length,v=r?t.shape[f-2]:t.shape[f-1],g=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[f-1]:t.shape[f-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),w=n.shape.slice(0,-2),k=Md(x),S=Md(w),E=my(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);Ed(v===g,(function(){return"Error in matMul: inner shapes (".concat(v,") and (")+"".concat(g,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var T,C=r?[k,v,y]:[k,y,v],_=a?[S,b,g]:[S,g,b],M=iZ({inputs:{x:t},backend:i,attrs:{shape:C}}),I=iZ({inputs:{x:n},backend:i,attrs:{shape:_}}),N=[M,I],A=Math.max(k,S),R=r?M.shape[1]:M.shape[2],O=null!=s,D=null!=l,L="leakyrelu"===p,P=null!=p?JV(p,!0):null;if((1===y||1===b)&&R>gZ&&!1===(O||D||L||null!=P)){var F=M,j=I;r&&(F=mZ({inputs:{x:M},backend:i,attrs:{perm:[0,2,1]}}),N.push(F)),a&&(j=mZ({inputs:{x:I},backend:i,attrs:{perm:[0,2,1]}}),N.push(j));var z=1===b,B=F;1!==b&&(B=iZ({inputs:{x:F},backend:i,attrs:{shape:[A,R,1]}}),N.push(B));var U=1===b?2:1,W=j;z&&(W=iZ({inputs:{x:j},backend:i,attrs:{shape:[A,1,R]}}),N.push(W));var V=rZ({inputs:{a:B,b:W},backend:i});T=pZ({inputs:{x:V},backend:i,attrs:{axis:U,keepDims:!0}}),N.push(V)}else{var Z=cv(t.dtype,n.dtype),H=new $V(C,_,[A,y,b],r,a,O,P,D,L),G=[M,I];if(null!=s&&G.push(s),D&&G.push(l),L){var q=i.makeTensorInfo([],"float32",Fm(d,"float32"));G.push(q),N.push(q)}T=i.runWebGLProgram(H,G,Z)}var X=iZ({inputs:{x:T},backend:i,attrs:{shape:E}});N.push(T);for(var Y=0,K=N;Y<K.length;Y++){var Q=K[Y];i.disposeIntermediateTensorInfo(Q)}return X}var bZ={kernelName:dm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,l=r.transposeB,c=r.activation;return yZ({a:a,b:i,transposeA:u,transposeB:l,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:c})}},xZ="return abs(x);";var wZ={kernelName:dh,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=GW(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=oh().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new IV(a.shape,xZ):new mV(a.shape,xZ),r.runWebGLProgram(t,[a],a.dtype)}},kZ=KV({opSnippet:vV+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),SZ={kernelName:hh,backendName:"webgl",kernelFunc:kZ},EZ=KV({opSnippet:vV+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),TZ={kernelName:ph,backendName:"webgl",kernelFunc:EZ},CZ="return a + b;",_Z=QV({opSnippet:CZ,packedOpSnippet:CZ,supportsComplex:!0,cpuKernelImpl:bW}),MZ={kernelName:fh,backendName:"webgl",kernelFunc:_Z},IZ=(0,I.Z)((function e(t,n){M(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),NZ=(0,I.Z)((function e(t,n){M(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var AZ={kernelName:mh,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return zV({inputs:{x:a[0]},backend:r});if(a.length>oh().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return cv(e,t)})),l=a.map((function(e){return e.shape})),c=oh().getBool("WEBGL_PACK")?new NZ(a[0].shape,l):new IZ(a[0].shape,l);return r.runWebGLProgram(c,a,u)}};var RZ={kernelName:vh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=Ld(i,a.shape),l=u,c=Ux(l,s),d=a;null!=c&&(d=mZ({inputs:{x:a},backend:n,attrs:{perm:c}}),l=Vx(l.length,s)),Bx("all",l,s);var h,p=jx(d.shape,l),f=(0,U.Z)(p,2),m=f[0],v=iZ({inputs:{x:d},backend:n,attrs:{shape:[-1,Md(f[1])]}}),g=lZ(v,v.dtype,"all",n);return h=iZ(o?{inputs:{x:g},backend:n,attrs:{shape:zx(m,u)}}:{inputs:{x:g},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(d),h}};var OZ={kernelName:gh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=Ld(i,a.shape),l=u,c=Ux(l,s),d=a;null!=c&&(d=mZ({inputs:{x:a},backend:n,attrs:{perm:c}}),l=Vx(l.length,s)),Bx("any",l,s);var h,p=jx(d.shape,l),f=(0,U.Z)(p,2),m=f[0],v=iZ({inputs:{x:d},backend:n,attrs:{shape:[-1,Md(f[1])]}}),g=lZ(v,v.dtype,"any",n);return h=iZ(o?{inputs:{x:g},backend:n,attrs:{shape:zx(m,u)}}:{inputs:{x:g},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(d),h}},DZ=(0,I.Z)((function e(t,n,r){M(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),LZ=(0,I.Z)((function e(t,n,r,a){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Ed(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,u,l=this.outputShape,c=l.length,d=KU(c),h=uV("coords",c);if(1===o){var p=KU(u=c+1);s="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(h.join(),", 0);\n        ++").concat(h[c-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(h.join(),", 0);\n        ++").concat(h[c-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(h.join(),", 0);\n        --").concat(h[c-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(h.join(),", 0);\n        --").concat(h[c-2],";")}else u=c,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(h[c-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(h[c-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(h[c-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(h[c-2],";");var f=["x","y","z","w","u","v"].slice(0,u),m="."+f[u-1],v=f.map((function(e){return"int "+e})),g=uV("sourceLocR",u-1).concat("inIdx.r"),y=uV("sourceLocG",u-1).concat("inIdx.g"),b=uV("sourceLocB",u-1).concat("inIdx.b"),x=uV("sourceLocA",u-1).concat("inIdx.a"),w="max"===r?"greaterThan":"lessThan",k=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),S="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),E=a?"":"\n      float getBestIndicesAChannel(".concat(v.join(),") {\n        return getChannel(getBestIndicesA(").concat(f.join(),"),\n                                          vec2(").concat(f.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(v.join(),") {\n        return getChannel(getA(").concat(f.join(),"),\n                               vec2(").concat(f.slice(-2).join(),"));\n      }\n      ").concat(E,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(h[c-1]," < ").concat(l[c-1]-1,";\n        bool hasNextRow = ").concat(h[c-2]," < ").concat(l[c-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(S,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(k,"\n          vec4 candidate = ").concat(S,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(w,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function PZ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=xE(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new DZ(s,n,null==r),l=[t];null!=r&&l.push(r);var c=e.runWebGLProgram(u,l,"int32");if(1===c.shape[1])return c;var d=PZ(e,t,n,c);return e.disposeIntermediateTensorInfo(c),d}function FZ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=xE(a[a.length-1]),o=new LZ(a,i,n,null==r),s=null==r?[t]:[t,r],u=e.runWebGLProgram(o,s,"int32");if(u.shape.length===t.shape.length){var l=FZ(e,t,n,u);return e.disposeIntermediateTensorInfo(u),l}return u}function jZ(e,t,n,r){var a=[n];if(Bx("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!oh().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var u=jx(s.shape,a),l=(0,U.Z)(u,2),c=l[0],d=Md(l[1]),h=iZ({inputs:{x:s},backend:e,attrs:{shape:[-1,d]}});i.push(h);var p=PZ(e,h,r);i.push(p);var f=iZ({inputs:{x:p},backend:e,attrs:{shape:c}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),f}return FZ(e,t,r)}var zZ={kernelName:yh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=Ld(r.axis,a.shape),o=Ux(i,a.shape.length),s=a,u=[];null!=o&&(s=mZ({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=Vx(i.length,s.shape.length)),Bx("argMax",[i[0]],s.shape.length);var l=jZ(n,s,i[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}};var BZ={kernelName:bh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=Ld(r.axis,a.shape),o=Ux(i,a.shape.length),s=a,u=[];null!=o&&(s=mZ({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=Vx(i.length,s.shape.length)),Bx("argMin",[i[0]],s.shape.length);var l=jZ(n,s,i[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}},UZ=KV({opSnippet:vV+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),WZ={kernelName:xh,backendName:"webgl",kernelFunc:UZ},VZ=KV({opSnippet:vV+"return log(x + sqrt(x * x + 1.0));"}),ZZ={kernelName:wh,backendName:"webgl",kernelFunc:VZ},HZ=KV({opSnippet:vV+"\n  return atan(x);\n"}),GZ={kernelName:kh,backendName:"webgl",kernelFunc:HZ},qZ=QV({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),XZ={kernelName:Eh,backendName:"webgl",kernelFunc:qZ},YZ=KV({opSnippet:vV+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),KZ={kernelName:Sh,backendName:"webgl",kernelFunc:YZ},QZ=(0,I.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(M(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,l=t.dilationHeight,c=t.dilationWidth,d=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=t.padInfo.top,f=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,v="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(m||(y="-1.0 / 1e-20"),r){this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(f,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(">="," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?v:g:"wR * ".concat(h," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var b="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(b="avgValue / count");var x=4*Math.floor(o/4),w=o%4,k="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(f,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(x,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat(k,"\n          }\n\n          int xC = xCCorner + ").concat(x,";\n          if (").concat(1===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(k,"\n          } else if (").concat(2===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(k,"\n          } else if (").concat(3===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat(k,"\n          }\n        }\n        setOutput(").concat(b,");\n      }\n    ")}})),JZ=(0,I.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(M(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,l=t.strideWidth,c=t.dilationDepth,d=t.dilationHeight,h=t.dilationWidth,p=t.effectiveFilterDepth,f=t.effectiveFilterHeight,m=t.effectiveFilterWidth,v=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(v,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(f,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(h,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(">="," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(f," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(w="avgValue / count");var k=4*Math.floor(o/4),S=o%4,E="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(v,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(k,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(h,", ch)\n              );\n\n              ").concat(E,"\n            }\n\n            int xC = xCCorner + ").concat(k,";\n            if (").concat(1===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(2===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(3===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                initializationValue\n              );\n\n              ").concat(E,"\n            }\n          }\n          setOutput(").concat(w,");\n        }\n      }\n    ")}}));var $Z={kernelName:Th,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;RU(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Ed(db(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var l=tb(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Id(l.inShape,l.outShape))return zV({inputs:{x:a},backend:n});var c=new QZ(l,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}};var eH={kernelName:_h,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat,c=nb(a.shape,i,o,[1,1,1],s,u,l),d=new JZ(c,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}},tH=(0,I.Z)((function e(t){M(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=u-1-t.padInfo.top,d=l-1-t.padInfo.left,h=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(c,", ").concat(d,");\n      const float avgMultiplier = float(").concat(h,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),nH=(0,I.Z)((function e(t){M(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,c=t.dilationWidth,d=t.effectiveFilterDepth,h=t.effectiveFilterHeight,p=t.effectiveFilterWidth,f=d-1-t.padInfo.front,m=h-1-t.padInfo.top,v=p-1-t.padInfo.left,g=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(f,", ").concat(m,", ").concat(v,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(c,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var rH={kernelName:Mh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode,c=nb(i.shape,o,s,[1,1,1],u,l),d=new nH(c);return n.runWebGLProgram(d,[a],i.dtype)}};var aH={kernelName:Ch,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;RU([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,c=tb(o.shape,s,u,1,l),d=new tH(c);return n.runWebGLProgram(d,[a],o.dtype)}};var iH={kernelName:Ih,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return yZ({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},oH=(0,I.Z)((function e(t,n,r,a,i,o){M(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],my(t,n),my(t,r);var s="0.0";null!=a&&(my(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(my(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),sH=(0,I.Z)((function e(t,n,r,a,i,o){M(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],my(t,n),my(t,r);var s="vec4(0.0)";null!=a&&(my(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(my(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),uH={kernelName:yp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;Ed(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Ed(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Ed(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var l=r.varianceEpsilon;null==l&&(l=.001);var c=[a,i,o],d=null;null!=s&&(d=s.shape,c.push(s));var h=null;null!=u&&(h=u.shape,c.push(u));var p=oh().getBool("WEBGL_PACK_NORMALIZATION")?new sH(a.shape,i.shape,o.shape,d,h,l):new oH(a.shape,i.shape,o.shape,d,h,l);return n.runWebGLProgram(p,c,c[0].dtype)}},lH=(0,I.Z)((function e(t){M(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=KU(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return cH.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(cH[t]," = start[").concat(t,"] + coords.").concat(cH[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),cH=["x","y","z","w","u","v"];var dH=(0,I.Z)((function e(t){M(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=KU(this.rank),r=uV("coords",this.rank),a=uV("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function hH(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=Ty(a,r.begin,r.size),o=(0,U.Z)(i,2),s=o[0],u=o[1];if(wy(a,s,u),0===Md(u))return n.makeTensorInfo(u,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var l=n.texData.get(a.dataId),c=qW(l.values,s,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,c)}var d=n.texData.get(a.dataId).isPacked,h=Sy(a.shape,s,u);if(d||!h){var p=oh().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dH(u):new lH(u),f=[s];return n.runWebGLProgram(p,[a],a.dtype,f)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=Ey(t,qd(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,s,u,n)}var pH={kernelName:If,backendName:"webgl",kernelFunc:hH},fH={kernelName:Nh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;Ed(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=kE(a.shape,i,s),l=SE(u.length,i.length),c=EE(a.shape,i,s),d=TE(o,i.length),h=CE(c,o,i.length),p=[],f=iZ({inputs:{x:a},backend:n,attrs:{shape:u}}),m=mZ({inputs:{x:f},backend:n,attrs:{perm:l}}),v=iZ({inputs:{x:m},backend:n,attrs:{shape:c}}),g=hH({inputs:{x:v},backend:n,attrs:{begin:d,size:h}});return p.push(f),p.push(m),p.push(v),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var mH={kernelName:Ah,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=xW(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}};var vH={kernelName:Rh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=my(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},gH=QV({opSnippet:"return float(a != b);",cpuKernelImpl:UW,dtype:"bool"}),yH={kernelName:tf,backendName:"webgl",kernelFunc:gH};function bH(e){var t=e.inputs,n=e.backend,r=t.input;return zV({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var xH={kernelName:ff,backendName:"webgl",kernelFunc:bH},wH="return float(int(x));";var kH={kernelName:Oh,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return zV({inputs:{x:i},backend:r});var s=ew(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),l=UV({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),l}if("complex64"===i.dtype){var c=bH({inputs:{input:i},backend:r}),d=e({inputs:{x:c},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(c),d}if(!zd(i.dtype,o)){var h=zV({inputs:{x:i},backend:r});return{dataId:h.dataId,shape:h.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new mV(e.shape,wH),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var p=r.makeTensorInfo([],"bool",Fd("bool",1)),f=gH({inputs:{a:i,b:p},backend:r});return r.disposeIntermediateTensorInfo(p),f}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},SH="return ceil(x);",EH=KV({opSnippet:SH,packedOpSnippet:SH,cpuKernelImpl:kW}),TH={kernelName:Dh,backendName:"webgl",kernelFunc:EH},CH=(0,I.Z)((function e(t){M(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),_H=(0,I.Z)((function e(t){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var MH={kernelName:Lh,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=oh().getBool("WEBGL_PACK_CLIP")?new _H(i.shape):new CH(i.shape);var u=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},IH=(0,I.Z)((function e(t){M(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function NH(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var AH={kernelName:Fh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new IH(r.shape),o=[NH(r,a.complexTensorInfos.real),NH(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},RH=(0,I.Z)((function e(t){M(this,e),this.outputShape=[],this.outputShape=yE(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),OH=(0,I.Z)((function e(t,n){M(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=yE(t,n);var r=this.outputShape,a=r.length,i=KU(a),o=uV("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var l=1;l<u.length;l++)u[l]=u[l-1]+t[l][n];for(var c=s[n],d=s.slice(-2),h=s.join(),p="if (".concat(c," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(h,"), vec2(").concat(d.join(),"));\n        }"),f=1;f<u.length;f++){var m=u[f-1];p+="\n        if (".concat(c," < ").concat(u[f],"  && ").concat(c," >= ").concat(u[f-1],") {\n          return getChannel(\n            getT").concat(f,"(").concat(DH(s,c,m),"),\n            vec2(").concat(DH(d,c,m),"));\n        }")}var v=u.length,g=u[u.length-1];p+="\n        return getChannel(\n          getT".concat(v,"(").concat(DH(s,c,g),"),\n          vec2(").concat(DH(d,c,g),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function DH(e,t,n){var r=e.indexOf(t),a=e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e}));return a.join()}function LH(e){var t=e.inputs,n=e.backend,r=t.input;return zV({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var PH={kernelName:Tp,backendName:"webgl",kernelFunc:LH};function FH(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return bH({inputs:{input:e},backend:n})})),i=e.map((function(e){return LH({inputs:{input:e},backend:n})})),o=FH(a,t,n),s=FH(i,t,n),u=UV({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}var l=n.shouldExecuteOnCPU(e);if("string"===r&&(l=!0),l){var c=e.map((function(e){var r=Md(e.shape.slice(t));return iZ({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),d=c.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),h=yE(c.map((function(e){return e.shape})),1),p=1===c[0].shape[0],f=SW(d,h,r,p),m=yE(e.map((function(e){return e.shape})),t),v=n.makeTensorInfo(m,r,f);return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}if(e.length>oh().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var g=Math.floor(e.length/2),y=FH(e.slice(0,g),t,n),b=FH(e.slice(g),t,n),x=FH([y,b],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}if(oh().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var w=new OH(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(w,e,r)}var k=function(e,t,n){var r=yE(e.map((function(e){return e.shape})),t),a=e.map((function(e){return iZ({inputs:{x:e},attrs:{shape:[-1,Md(e.shape.slice(t))]},backend:n})}));return{tensors2D:a,outShape:r}}(e,t,n),S=k.tensors2D,E=k.outShape,T=new RH(S.map((function(e){return e.shape}))),C=n.runWebGLProgram(T,S,r);S.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var _=iZ({inputs:{x:C},attrs:{shape:E},backend:n});return n.disposeIntermediateTensorInfo(C),_}function jH(e){var t=e.inputs,n=e.backend,r=Ld(e.attrs.axis,t[0].shape)[0],a=yE(t.map((function(e){return e.shape})),r);if(0===Md(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return Md(e.shape)>0}));if(1===i.length)return zV({inputs:{x:i[0]},backend:n});var o=i.map((function(e){return e.shape}));return gE(o,r),FH(i,r,n)}var zH={kernelName:jh,backendName:"webgl",kernelFunc:jH},BH=(0,I.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];M(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,h=t.filterHeight,p=t.filterWidth,f=4*Math.floor(t.inChannels/4),m=t.inChannels%4,v="channelsLast"===t.dataFormat,g=v?1:2,y=v?2:3,b=v?3:1,x="",w="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),w="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(c,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(f,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(v,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(v,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(f,") *\n                    getW(wR, wC, ").concat(f,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(f,", xR, xC) *\n                    getW(wR, wC, ").concat(f,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(f,", d2),\n                getW(wR, wC, ").concat(f," + 1, d2)\n              );\n\n              if (").concat(v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(f,"),\n                  getX(batch, xR, xC, ").concat(f," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(f,", xR, xC),\n                  getX(batch, ").concat(f," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(f,", d2),\n                getW(wR, wC, ").concat(f," + 1, d2),\n                getW(wR, wC, ").concat(f," + 2, d2)\n              );\n\n              if (").concat(v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(f,"),\n                  getX(batch, xR, xC, ").concat(f," + 1),\n                  getX(batch, xR, xC, ").concat(f," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(f,", xR, xC),\n                  getX(batch, ").concat(f," + 1, xR, xC),\n                  getX(batch, ").concat(f," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(k,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")})),UH=(0,I.Z)((function e(t){M(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,c=t.dilationWidth,d=t.filterDepth,h=t.filterHeight,p=t.filterWidth,f=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(f,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(f,") *\n                  getW(wF, wR, wC, ").concat(f,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(f,"),\n                  getX(batch, xF, xR, xC, ").concat(f," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(f,", d2),\n                  getW(wF, wR, wC, ").concat(f," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(f,"),\n                  getX(batch, xF, xR, xC, ").concat(f," + 1),\n                  getX(batch, xF, xR, xC, ").concat(f," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(f,", d2),\n                  getW(wF, wR, wC, ").concat(f," + 1, d2),\n                  getW(wF, wR, wC, ").concat(f," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),WH=(0,I.Z)((function e(t,n){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=tW(this.outputShape.length);for(var r=n.dataFormat,a=DU(),i="channelsLast"===r,o=i?0:1,s=i?1:2,u=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":"if(blockIndex < ".concat(t[1]," && pos < ").concat(t[0],") {"),l="",c=0;c<=1;c++)for(var d=0;d<=1;d++)l+="\n          blockIndex = rc.y + ".concat(d,";\n          pos = rc.x + ").concat(c,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*c+d,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*c+d,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(l,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function VH(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,l=void 0===u?null:u,c=e.leakyreluAlpha,d=void 0===c?0:c,h=e.activation,p=void 0===h?null:h,f=n.shape,m=i.texData.get(n.dataId),v=a.inChannels,g=f[0]*f[1]*f[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(!((1===g||1===y)&&v>gZ)&&m.isPacked&&b&&null!=m.texture&&f[2]%2!==0&&Id(m.shape.slice(-3),f.slice(-3))){var w=f[0]*f[1]*(f[2]+1),k={dataId:n.dataId,shape:[1,w,a.inChannels],dtype:n.dtype},S=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,Ed(_U(m.shape,k.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(k.shape," isn't free")}));var E=iZ({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(E);var T=yZ({a:k,b:E,backend:i,transposeA:false,transposeB:false,bias:s,activation:p,preluActivationWeights:l,leakyreluAlpha:d}),C=i.texData.get(T.dataId);Ed(C.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=S,C.shape=a.outShape,(t=zV({inputs:{x:T},backend:i})).shape=a.outShape,x.push(T)}else{var _=iZ({inputs:{x:n},backend:i,attrs:{shape:[1,b?f[0]*f[1]*f[2]:f[0]*f[2]*f[3],a.inChannels]}}),M=iZ({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),I=yZ({a:_,b:M,transposeA:false,transposeB:false,backend:i,bias:s,activation:p,preluActivationWeights:l,leakyreluAlpha:d});t=iZ({inputs:{x:I},backend:i,attrs:{shape:a.outShape}}),x.push(_),x.push(M),x.push(I)}for(var N=0,A=x;N<A.length;N++){var R=A[N];i.disposeIntermediateTensorInfo(R)}return t}function ZH(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,l=e.leakyreluAlpha,c=void 0===l?0:l,d=e.activation,h=void 0===d?null:d,p=r.filterWidth,f=r.filterHeight,m=r.inChannels,v=r.outWidth,g=r.outHeight,y="channelsLast"===r.dataFormat,b=p*f*m,x=g*v,w=[b,x],k=[],S=iZ({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),E=iZ({inputs:{x:n},backend:a,attrs:{shape:[1,b,Md(n.shape)/b]}});k.push(S),k.push(E);var T=new WH(w,r),C=[S.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],_=a.runWebGLProgram(T,[S],"float32",C),M=iZ({inputs:{x:_},backend:a,attrs:{shape:[1,w[0],w[1]]}});k.push(_),k.push(M);var I=null!=o,N=null!=u,A="leakyrelu"===h,R=h?JV(h,!0):null,O=new $V(M.shape,E.shape,[1,x,r.outChannels],!0,!1,I,R,N,A),D=[M,E];if(o&&D.push(o),N&&D.push(u),A){var L=a.makeTensorInfo([],"float32",Fm(c,"float32"));D.push(L),k.push(L)}var P=a.runWebGLProgram(O,D,"float32"),F=iZ({inputs:{x:P},backend:a,attrs:{shape:y?[1,g,v,r.outChannels]:[1,r.outChannels,g,v]}});k.push(P);for(var j=0,z=k;j<z.length;j++){var B=z[j];a.disposeIntermediateTensorInfo(B)}return F}var HH={kernelName:zh,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,l=a.dataFormat,c=a.dilations,d=a.dimRoundingMode,h=hb(l),p=rb(i.shape,o.shape,s,c,u,d,!1,h);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(oh().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=ZH({x:i,filter:o,convInfo:p,backend:r});else{var f=new BH(p);t=r.runWebGLProgram(f,[i,o],"float32")}else t=VH({x:i,filter:o,convInfo:p,backend:r});var m=iZ({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),m}},GH=(0,I.Z)((function e(t){M(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),qH=(0,I.Z)((function e(t){M(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,l=o?1:2,c=o?2:3,d=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(c,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),XH=(0,I.Z)((function e(t){M(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),YH=(0,I.Z)((function e(t){M(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,l=r-1-t.padInfo.top,c=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(l,", ").concat(c,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var KH={kernelName:Bh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=r.filterShape,d=hb(u),h=rb(a.shape,c,o,1,s,l,!1,d),p=new GH(h);return n.runWebGLProgram(p,[a,i],"float32")}};var QH={kernelName:Uh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,l=r.dataFormat,c=r.dimRoundingMode,d=hb(l),h=rb(o,i.shape,s,1,u,c,!1,d),p=new qH(h);return n.runWebGLProgram(p,[a,i],"float32")}};var JH={kernelName:Wh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=ab(a.shape,i.shape,o,u,s),c=new UH(l);return n.runWebGLProgram(c,[a,i],"float32")}};var $H={kernelName:Vh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,l=ab(a.shape,u,o,1,s),c=new XH(l);return n.runWebGLProgram(c,[a,i],"float32")}};var eG={kernelName:Zh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=ab(r.inputShape,i.shape,s,1,o),l=new YH(u);return n.runWebGLProgram(l,[a,i],"float32")}},tG=KV({opSnippet:YV+"\n  return cos(x);\n"}),nG={kernelName:Hh,backendName:"webgl",kernelFunc:tG},rG=KV({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),aG={kernelName:Gh,backendName:"webgl",kernelFunc:rG},iG=(0,I.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=(0,U.Z)(t,4),s=o[0],u=o[1],l=o[2],c=o[3],d=(0,U.Z)(n,1)[0],h=(0,U.Z)(r,2),p=h[0],f=h[1];this.outputShape=[d,p,f,c];var m="bilinear"===a?1:0,v="".concat(u-1,".0"),g="".concat(l-1,".0"),y=p>1?["".concat((u-1)/(p-1)),"(y2-y1) * height_ratio","y1*".concat(v," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(v)],b=(0,U.Z)(y,3),x=b[0],w=b[1],k=b[2],S=f>1?["".concat((l-1)/(f-1)),"(x2-x1) * width_ratio","x1*".concat(g," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(g)],E=(0,U.Z)(S,3),T=E[0],C=E[1],_=E[2];this.userCode="\n      const float height_ratio = float(".concat(x,");\n      const float width_ratio = float(").concat(T,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(w,";\n        float width_scale = ").concat(C,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(v," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(_,";\n        if( in_x < 0.0 || in_x > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),oG={kernelName:Xh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,l=r.extrapolationValue,c=new iG(a.shape,i.shape,s,u,l);return n.runWebGLProgram(c,[a,i,o],"float32")}},sG=(0,I.Z)((function e(t,n,r){M(this,e),this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;var a=t.length,i=n?"0.0":"getX(".concat(uG(a,"coords"),")"),o=t[t.length-1],s="",u="";n?(s=r?"end != ".concat(o-1):"end != 0",u=r?"end + 1":"end - 1"):(s=r?"end + pow2 < ".concat(o):"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(KU(a)," coords = getOutputCoords();\n        int end = ").concat(lG(a,"coords"),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(u,";\n          ").concat(lG(a,"coords")," = idx;\n          val += getX(").concat(uG(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}));function uG(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function lG(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}var cG={kernelName:qh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length,l=Ux([i],u),c=a;null!=l&&(c=mZ({inputs:{x:a},backend:n,attrs:{perm:l}}));var d=Vx(1,u)[0];if(d!==u-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(a.shape.length-1," ")+"but got axis=".concat(i));for(var h=c.shape[d],p=zV({inputs:{x:c},backend:n}),f=0;f<=Math.ceil(Math.log2(h))-1;f++){var m=new sG(c.shape,!1,s),v=[[f]],g=p;p=n.runWebGLProgram(m,[p],p.dtype,v),n.disposeIntermediateTensorInfo(g)}if(o){var y=new sG(c.shape,o,s),b=p;p=n.runWebGLProgram(y,[p],p.dtype),n.disposeIntermediateTensorInfo(b)}if(null!=l){var x=mZ({inputs:{x:p},backend:n,attrs:{perm:Wx(l)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(c),x}return p}};var dG={kernelName:Yh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=xW(u,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}if(2===a.shape.length){var d=n.bufferSync(a),h=n.bufferSync(i),p=wW(d,h,o,s);return n.makeTensorInfo(p.shape,i.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},hG=function(){function e(t,n,r){M(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return(0,I.Z)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var pG={kernelName:Kh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,l=("NHWC"===o?a.shape[2]:a.shape[3])*i,c=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d=new hG("NHWC"===o?[s,u,l,c]:[s,c,u,l],i,o);return n.runWebGLProgram(d,[a],a.dtype)}},fG=(0,I.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];M(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=tW(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,l="",c="";r&&(l=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),c="result = activation(result);");var d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(l,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(d,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")})),mG=(0,I.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];M(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=tW(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,l=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,h=d,p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",f=0;f<d;f++)p+="\n          vec4 xTexelC".concat(2*f,";\n          int xTexelC").concat(2*f,"Ready;\n          vec4 xTexelC").concat(2*f+1,";\n          int xTexelC").concat(2*f+1,"Ready;\n          vec4 xC").concat(f,";");p+="\n    for (int r = 0; r < ".concat(c,"; r++) {\n      ");for(var m=0;m<d;m++)p+="\n          xTexelC".concat(2*m," = vec4(0.0);\n          xTexelC").concat(2*m,"Ready = 0;\n          xTexelC").concat(2*m+1," = vec4(0.0);\n          xTexelC").concat(2*m+1,"Ready = 0;\n          xC").concat(m," = vec4(0.0);");p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var v=0;v<(h+1)/2;v++){var g=2*v;if(p+="\n          xC = xCCorner + ".concat(g*l,";\n          "),1===u){if(g<d&&(s%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n              "),p+=1===l&&g>0?"\n                xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                  } else {\n                    xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xC").concat(g," = xTexelC").concat(g,";\n                "),g+1<d)){var y=s%2===0?wd(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                    xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(g+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(g+1,"Ready = 1;\n                  }\n                  "),l>1&&(p+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                      xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(g,"Ready = 1;\n                    }\n                    ")),p+="\n                  xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                  ")):p+=1===y?"\n                    xC".concat(g+1," = xTexelC").concat(g,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                      xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(g+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(g+1,"Ready = 1;\n                    }\n\n                    xC").concat(g+1," = xTexelC").concat(g+1,";\n                    ")}}else g<d&&(s%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n              "),g+1<d&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(\n                  xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n              "),g+1<d&&(p+="\n                  xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                "))));g<d&&(p+="\n            wTexel = getW(r, ".concat(g,", d1, q);\n            dotProd += xC").concat(g," * vec4(wTexel.xz, wTexel.xz);\n          "),g+1<d&&(p+="\n              wTexel = getW(r, ".concat(g+1,", d1, q);\n              dotProd += xC").concat(g+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n    }\n  ",p+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(w,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var vG={kernelName:Qh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode,c=u;null==c&&(c=[1,1]),Ed(db(o,c),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(c,"'")}));var d,h=rb(a.shape,i.shape,o,c,s,l,!0);d=oh().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new mG(h):new fG(h);var p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(d,[a,i],"float32",p)}},gG=(0,I.Z)((function e(t){M(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),yG=(0,I.Z)((function e(t){M(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var bG={kernelName:Jh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.filterShape,d=rb(a.shape,c,o,s,u,l,!0),h=new gG(d);return n.runWebGLProgram(h,[a,i],"float32")}};var xG={kernelName:$h,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=rb(r.inputShape,i.shape,o,s,u,l,!0),d=new yG(c);return n.runWebGLProgram(d,[a,i],"float32")}},wG=(0,I.Z)((function e(t){M(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var kG={kernelName:ep,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,_.Z)(r.shape),(0,_.Z)(r.shape)),i=Md(r.shape),o=iZ({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new wG(i),u=n.runWebGLProgram(s,[o],o.dtype),l=iZ({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}},SG=(0,I.Z)((function e(t){M(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,l=t.dilationHeight,c=t.dilationWidth,d=a.top,h=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(h,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(c,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var EG={kernelName:tp,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,l=a.dilations,c=eb(i.shape,o.shape,s,u,"NHWC",l),d=new SG(c),h=iZ({inputs:{x:t=r.runWebGLProgram(d,[i,o],"float32")},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(t),h}};var TG={kernelName:ip,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=ZE(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;GE(i.length,s,r);for(var u=qE(o,s),l=u.path,c=u.steps,d=c.length,h=null,p=i.length,f=[],m=0;m<d;++m){var v,g=G(c[m]);try{for(g.s();!(v=g.n()).done;){var y=v.value,b=HE(p,s[y]),x=b.permutationIndices,w=b.expandDims,k=void 0;XE(x)?k=r[y]:(k=mZ({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),f.push(k));for(var S=k.shape.slice(),E=0;E<w.length;++E)S.splice(w[E],0,1);Id(k.shape,S)||(k=iZ({inputs:{x:k},backend:n,attrs:{shape:S}}),f.push(k)),null===h?h=k:(h=rZ({inputs:{a:k,b:h},backend:n}),f.push(h))}}catch(sde){g.e(sde)}finally{g.f()}m<d-1&&(l[m]>=0&&(h=pZ({inputs:{x:h},backend:n,attrs:{axis:l[m]-(i.length-p),keepDims:!1}}),f.push(h)),p--)}for(var T=0,C=f;T<C.length;T++){var _=C[T];_!==h&&n.disposeIntermediateTensorInfo(_)}return h}},CG=KV({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),_G={kernelName:op,backendName:"webgl",kernelFunc:CG},MG={kernelName:sp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=oh().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new jV("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new PV("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},IG=QV({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:EW}),NG={kernelName:lp,backendName:"webgl",kernelFunc:IG},AG=KV({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(NE,";\n  float a1 = ").concat(AE,";\n  float a2 = ").concat(RE,";\n  float a3 = ").concat(OE,";\n  float a4 = ").concat(DE,";\n  float a5 = ").concat(LE,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),RG={kernelName:up,backendName:"webgl",kernelFunc:AG},OG=KV({opSnippet:YV+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:TW,dtype:"float32"}),DG={kernelName:cp,backendName:"webgl",kernelFunc:OG};function LG(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(Ed(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),iZ({inputs:{x:i},backend:r,attrs:{shape:s}})}var PG={kernelName:dp,backendName:"webgl",kernelFunc:LG},FG="return exp(x) - 1.0;",jG=KV({opSnippet:FG,packedOpSnippet:FG,cpuKernelImpl:CW}),zG={kernelName:hp,backendName:"webgl",kernelFunc:jG},BG=(0,I.Z)((function e(t,n,r){M(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function UG(e,t,n){var r=n.texData.get(e.dataId),a=Md(e.shape),i=e.shape[e.shape.length-1],o=iZ({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new BG("real",s,t),l=new BG("imag",s,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(u,c,"float32"),h=n.runWebGLProgram(l,c,"float32"),p=UV({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);var f=iZ({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(p),f}var WG={kernelName:pp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return UG(t.input,!1,n)}},VG=(0,I.Z)((function e(t,n){M(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function ZG(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||Zd(a))){var o=jd(i,Md(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new VG(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}var HG,GG={kernelName:fp,backendName:"webgl",kernelFunc:ZG},qG=(0,I.Z)((function e(t){M(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),XG={kernelName:mp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new qG(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},YG="return floor(x);",KG=KV({opSnippet:YG,packedOpSnippet:YG,cpuKernelImpl:_W}),QG={kernelName:vp,backendName:"webgl",kernelFunc:KG},JG=QV({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),$G={kernelName:gp,backendName:"webgl",kernelFunc:JG},eq=(0,I.Z)((function e(t){M(this,e),this.variableNames=["A"];var n=DU(),r=(0,U.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),tq=(0,I.Z)((function e(t){M(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=DU(),r=(0,U.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),nq={kernelName:lm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,u=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],l=(0,U.Z)(u,2),c=l[0],d=l[1],h=[d,c],p=[d,c,i];(s||o)&&(null==HG&&(HG=document.createElement("canvas").getContext("2d")),HG.canvas.width=c,HG.canvas.height=d,HG.drawImage(a,0,0,c,d),a=HG.canvas);var f=n.makeTensorInfo(h,"int32");n.texData.get(f.dataId).usage=$B.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),a);var m=oh().getBool("WEBGL_PACK")?new tq(p):new eq(p),v=n.runWebGLProgram(m,[f],"int32");return n.disposeData(f.dataId),v}};var rq={kernelName:hm,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,l=a.strides,c=a.pad,d=a.dataFormat,h=a.dilations,p=a.dimRoundingMode,f=a.activation,m=a.leakyreluAlpha,v=hb(d),g=rb(i.shape,o.shape,l,h,c,p,!1,v),y=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(oh().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=ZH({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:f,preluActivationWeights:u,leakyreluAlpha:m});else{var b=null!=s,x=null!=u,w="leakyrelu"===f,k=f?JV(f,!1):null,S=new BH(g,b,k,x,w),E=[i,o];if(s&&E.push(s),u&&E.push(u),w){var T=r.makeTensorInfo([],"float32",Fm(m,"float32"));E.push(T),y.push(T)}t=r.runWebGLProgram(S,E,"float32")}else t=VH({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:f,preluActivationWeights:u,leakyreluAlpha:m});var C=iZ({inputs:{x:t},backend:r,attrs:{shape:g.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),C}};var aq={kernelName:pm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dilations,d=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,f=[],m=c;null==m&&(m=[1,1]),Ed(db(u,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(m,"'")}));var v,g=rb(a.shape,i.shape,u,m,l,d,!0),y=oh().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=h?JV(h,y):null,x=[a,i],w=null!=o,k=null!=s,S="leakyrelu"===h;if(w&&x.push(o),k&&x.push(s),S){var E=n.makeTensorInfo([],"float32",Fm(p,"float32"));x.push(E),f.push(E)}v=y?new mG(g,w,b,k,S):new fG(g,w,b,k,S);var T=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],C=n.runWebGLProgram(v,x,"float32",T);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),C}},iq=(0,I.Z)((function e(t,n,r){M(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=KU(n.length),i=KU(r.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(o,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")}));var oq={kernelName:xp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=Md(r.shape),u=_E(r,a),l=(0,U.Z)(u,4),c=l[0],d=l[1],h=l[2],p=l[3],f=iZ({inputs:{x:a},backend:n,attrs:{shape:[d,o]}}),m=iZ({inputs:{x:r},backend:n,attrs:{shape:[Md(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var v=n.readSync(a.dataId),g=n.bufferSync(r),y=MW(v,g,r.dtype,d,o,h,p,r.shape,s);return n.makeTensorInfo(c,r.dtype,y.values)}var b=new iq(o,p,[d,h]),x=n.runWebGLProgram(b,[m,f],m.dtype),w=iZ({inputs:{x:x},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),w}},sq=(0,I.Z)((function e(t,n){M(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=KU(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function uq(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=Ld(o,a.shape)[0];if(oh().get("DEBUG"))for(var l=n.readSync(i.dataId),c=a.shape[u],d=function(){var e=l[h];Ed(e<=c-1&&e>=0,(function(){return"GatherV2: the index value ".concat(e," is not in [0, ").concat(c-1,"]")}))},h=0;h<l.length;++h)d();var p=nT(a,i,u,s),f=Md(i.shape),m=[],v=iZ({inputs:{x:a},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),g=iZ({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,f/p.batchSize]}});m.push(v),m.push(g);var y=[p.batchSize,p.outerSize,f/p.batchSize,p.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var b=n.bufferSync(g),x=n.bufferSync(v),w=IW(x,b,y);return m.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(p.outputShape,w.dtype,w.values)}var k=new sq(v.shape,y),S=n.runWebGLProgram(k,[v,g],v.dtype);m.push(S);var E=iZ({inputs:{x:S},backend:n,attrs:{shape:p.outputShape}});return m.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),E}var lq={kernelName:bp,backendName:"webgl",kernelFunc:uq},cq=QV({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:NW,dtype:"bool"}),dq={kernelName:wp,backendName:"webgl",kernelFunc:cq},hq=QV({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:AW}),pq={kernelName:kp,backendName:"webgl",kernelFunc:hq};var fq={kernelName:Ep,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return UG(t.input,!0,n)}},mq=KV({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),vq={kernelName:Cp,backendName:"webgl",kernelFunc:mq},gq=KV({opSnippet:"return float(isinf(x));",dtype:"bool"}),yq={kernelName:_p,backendName:"webgl",kernelFunc:gq},bq=KV({opSnippet:"return float(isnan(x));",dtype:"bool"}),xq={kernelName:Mp,backendName:"webgl",kernelFunc:bq},wq=QV({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:RW,dtype:"bool"}),kq={kernelName:Np,backendName:"webgl",kernelFunc:wq},Sq=QV({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:OW,dtype:"bool"}),Eq={kernelName:Ap,backendName:"webgl",kernelFunc:Sq};var Tq={kernelName:Rp,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=DW(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},Cq=KV({opSnippet:YV+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:LW}),_q={kernelName:Op,backendName:"webgl",kernelFunc:Cq},Mq=KV({opSnippet:YV+"\n  return log(1.0 + x);\n"}),Iq={kernelName:Dp,backendName:"webgl",kernelFunc:Mq},Nq=QV({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),Aq={kernelName:Lp,backendName:"webgl",kernelFunc:Nq},Rq=KV({opSnippet:"return float(!(x >= 1.0));"}),Oq={kernelName:Pp,backendName:"webgl",kernelFunc:Rq},Dq=QV({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),Lq={kernelName:Fp,backendName:"webgl",kernelFunc:Dq},Pq=(0,I.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=t[3]-1;this.outputShape=t;var l="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(l,")"):1===i?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),Fq=(0,I.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=t[3]-1;this.outputShape=t;var l="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(l,")"):1===i?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),jq={kernelName:jp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,l=oh().getBool("WEBGL_PACK_NORMALIZATION")?new Fq(a.shape,i,o,s,u):new Pq(a.shape,i,o,s,u);return n.runWebGLProgram(l,[a],a.dtype)}},zq=(0,I.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),Bq={kernelName:zp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,l=r.alpha,c=r.beta,d=new zq(a.shape,s,u,l,c);return n.runWebGLProgram(d,[a,i,o],a.dtype)}};function Uq(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,u=Ld(i,a.shape),l=u,c=Ux(l,s),d=null!=c,h=n.shouldExecuteOnCPU([a]),p=a;if(d){if(h){for(var f=n.texData.get(p.dataId).values,m=new Array(s),v=0;v<m.length;v++)m[v]=a.shape[c[v]];var g=iV(f,a.shape,a.dtype,c,m);p=n.makeTensorInfo(m,a.dtype),n.texData.get(p.dataId).values=g}else p=hZ(a,c,n);l=Vx(l.length,s)}Bx("max",l,s);var y,b=jx(p.shape,l),x=(0,U.Z)(b,2),w=x[0],k=x[1],S=w;if(o&&(S=zx(w,u)),h){var E=n.texData.get(p.dataId).values,T=PW(E,Md(k),S,a.dtype);y=n.makeTensorInfo(S,a.dtype),n.texData.get(y.dataId).values=T}else y=function(e,t,n,r){var a=Md(t),i=iZ({inputs:{x:e},attrs:{shape:[Md(e.shape)/a,a]},backend:r}),o=lZ(i,e.dtype,"max",r),s=iZ({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(p,k,S,n);return d&&n.disposeIntermediateTensorInfo(p),y}var Wq={kernelName:Bp,backendName:"webgl",kernelFunc:Uq},Vq=QV({opSnippet:LV+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+FV+"\n  return result;\n",cpuKernelImpl:FW}),Zq={kernelName:Up,backendName:"webgl",kernelFunc:Vq};var Hq={kernelName:Wp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;RU(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Ed(db(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var l=tb(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Id(l.inShape,l.outShape))return zV({inputs:{x:a},backend:n});var c=new QZ(l,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}};var Gq={kernelName:Zp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=nb(a.shape,i,o,[1,1,1],s,l,u),d=new JZ(c,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}},qq=(0,I.Z)((function e(t){M(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,l=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Xq=(0,I.Z)((function e(t){M(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,l=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=u-1-t.padInfo.front,h=l-1-t.padInfo.top,p=c-1-t.padInfo.left,f=u*l*c-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(h,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(f," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(c," +\n                  wR * ").concat(c," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var Yq={kernelName:Hp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode,c=nb(i.shape,o,s,[1,1,1],u,l),d=new JZ(c,"max",!0),h=n.runWebGLProgram(d,[i],i.dtype),p=new Xq(c),f=n.runWebGLProgram(p,[a,h],i.dtype);return n.disposeIntermediateTensorInfo(h),f}};var Kq={kernelName:Vp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;RU([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,c=r.dimRoundingMode,d=tb(o.shape,s,u,1,l,c),h=new QZ(d,"max",!0),p=n.runWebGLProgram(h,[o],o.dtype),f=new qq(d),m=n.runWebGLProgram(f,[a,p],o.dtype);return n.disposeIntermediateTensorInfo(p),m}};var Qq={kernelName:Gp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,l=r;Ed(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var c=[1,1];Ed(db(o,c),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(c,"'")}));var d=tb(a.shape,i,o,c,s),h=function(e,t,n,r){var a=new QZ(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new QZ(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,u,d,l),p=(0,U.Z)(h,2);return[p[0],p[1]]}};var Jq={kernelName:qp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,u=a.shape.length,l=Ld(o,a.shape),c=l,d=Ux(c,u),h=null!=d,p=s.shouldExecuteOnCPU([a]),f=[],m=a;if(h){if(p){for(var v=s.texData.get(m.dataId).values,g=new Array(u),y=0;y<g.length;y++)g[y]=a.shape[d[y]];var b=iV(v,a.shape,a.dtype,d,g);m=s.makeTensorInfo(g,a.dtype),s.texData.get(m.dataId).values=b}else m=hZ(a,d,s);f.push(m),c=Vx(c.length,u)}Bx("sum",c,u);var x=jx(m.shape,c),w=(0,U.Z)(x,2),k=w[0],S=w[1],E=k;i&&(E=zx(k,l));for(var T=function(e,t,n,r){var a=Md(t),i=iZ({inputs:{x:e},attrs:{shape:[Md(e.shape)/a,a]},backend:r}),o=lZ(i,"float32","mean",r),s=iZ({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(m,S,E,s),C=0,_=f;C<_.length;C++){var M=_[C];s.disposeIntermediateTensorInfo(M)}return T}};var $q={kernelName:Xp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=Ld(i,a.shape),l=u,c=Ux(l,s),d=a;null!=c&&(d=mZ({inputs:{x:a},backend:n,attrs:{perm:c}}),l=Vx(l.length,a.shape.length)),Bx("min",l,s);var h,p=jx(d.shape,l),f=(0,U.Z)(p,2),m=f[0],v=iZ({inputs:{x:d},backend:n,attrs:{shape:[-1,Md(f[1])]}}),g=lZ(v,v.dtype,"min",n);return h=iZ(o?{inputs:{x:g},backend:n,attrs:{shape:zx(m,u)}}:{inputs:{x:g},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(d),h}},eX=QV({opSnippet:LV+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+FV+"\n  return result;\n",cpuKernelImpl:jW}),tX={kernelName:Yp,backendName:"webgl",kernelFunc:eX},nX=(0,I.Z)((function e(t,n,r){M(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=KU(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),l="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(l,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(l,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(l,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(l,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),rX=(0,I.Z)((function e(t,n,r){M(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=KU(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=uV("rc",a),l=uV("source",a),c="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(l.slice(-2).join(),")"),h="reflect"===r?0:1,p="";if(1===a){var f="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(h,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(h,";\n        }\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(f,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(c,") {\n          ").concat(f,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(d,");\n        }\n      ")}else{var m="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(h,") +\n                gte * ((end - 1) * 2 - source + ").concat(h,");\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(c,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(l.join(),"), ").concat(d,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(c,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(l.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),aX={kernelName:Kp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=oh().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rX(a.shape,i,o):new nX(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},iX=QV({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  "+FV+"\n  return result;\n"}),oX={kernelName:Qp,backendName:"webgl",kernelFunc:iX},sX=(0,I.Z)((function e(t,n,r){M(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),uX=QV({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),lX={kernelName:ap,backendName:"webgl",kernelFunc:uX},cX="return a - b;",dX=QV({opSnippet:cX,packedOpSnippet:cX,supportsComplex:!0,cpuKernelImpl:nV}),hX={kernelName:Qf,backendName:"webgl",kernelFunc:dX};function pX(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=Ld([r.dim],a.shape),o=Uq({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),s=zx(o.shape,i),u=iZ({inputs:{x:o},backend:n,attrs:{shape:s}}),l=dX({inputs:{a:a,b:u},backend:n}),c=OG({inputs:{x:l},backend:n}),d=pZ({inputs:{x:c},backend:n,attrs:{axis:i,keepDims:!1}}),h=iZ({inputs:{x:d},backend:n,attrs:{shape:s}}),p=uX({inputs:{a:c,b:h},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),p}var fX={kernelName:zf,backendName:"webgl",kernelFunc:pX};var mX={kernelName:Jp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:pX({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),l=u.shape[0],c=u.shape[1],d=new sX(l,c,i),h=[[o]],p=n.runWebGLProgram(d,[u],"int32",h);return s||n.disposeIntermediateTensorInfo(u),p}},vX=vV+"\n  return -x;\n";var gX={kernelName:ef,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=BW(i.values,a.shape,a.dtype),s=(0,U.Z)(o,2),u=s[0],l=s[1];return r.makeTensorInfo(l,a.dtype,u)}return t=oh().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new IV(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new mV(a.shape,vX),r.runWebGLProgram(t,[a],a.dtype)}},yX=pS;var bX={kernelName:nf,backendName:"webgl",kernelFunc:function(e){fm("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=n.readSync(a.dataId),c=n.readSync(i.dataId),d=yX(l,c,o,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},xX=fS;var wX={kernelName:rf,backendName:"webgl",kernelFunc:function(e){fm("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize,c=n.readSync(a.dataId),d=n.readSync(i.dataId),h=xX(c,d,o,s,u,l),p=h.selectedIndices,f=h.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}},kX=mS;var SX={kernelName:af,backendName:"webgl",kernelFunc:function(e){fm("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma,c=n.readSync(a.dataId),d=n.readSync(i.dataId),h=kX(c,d,o,s,u,l),p=h.selectedIndices,f=h.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([f.length],"float32",new Float32Array(f))]}},EX=(0,I.Z)((function e(t,n,r,a){M(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),TX={kernelName:sf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,u=Md(a.shape),l=new EX(u,i,o,s),c=iZ({inputs:{x:a},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(l,[c],a.dtype);n.disposeIntermediateTensorInfo(c);var h=iZ({inputs:{x:d},backend:n,attrs:{shape:[].concat((0,_.Z)(a.shape),[i])}});return n.disposeIntermediateTensorInfo(d),h}};function CX(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=bH({inputs:{input:r},backend:n}),i=CX({inputs:{x:a},backend:n}),o=LH({inputs:{input:r},backend:n}),s=CX({inputs:{x:o},backend:n}),u=UV({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return ZG({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var _X={kernelName:sm,backendName:"webgl",kernelFunc:CX};var MX={kernelName:of,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=bH({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=LH({inputs:{input:a},backend:r}),u=CX({inputs:{x:s},backend:r}),l=UV({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}return ZG({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var IX={kernelName:uf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return LG({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Td(a,e.shape,"All tensors passed to stack must have matching shapes"),Ed(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=LG({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=jH({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}},NX=(0,I.Z)((function e(t,n,r){M(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=KU(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),AX=(0,I.Z)((function e(t,n,r){M(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=KU(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=uV("rc",a),l=uV("source",a),c="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(l.slice(-2).join(),")"),h=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(c,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(c,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="",m=0,v=1===a?2:4;m<v;m++)f+="\n        ".concat(h[m],"\n        if (").concat(p,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(l.join(),"), ").concat(d,");\n        }\n      ");f+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")})),RX=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===Md(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return ZG({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=oh().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new AX(a.shape,i,o):new NX(a.shape,i,o),l=[[o]];return n.runWebGLProgram(u,[a],a.dtype,l)},OX={kernelName:lf,backendName:"webgl",kernelFunc:RX},DX=QV({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  "+FV+"\n  return result;\n"}),LX={kernelName:cf,backendName:"webgl",kernelFunc:DX};var PX={kernelName:hf,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,u=i.shape.length,l=[],c=Ld(o,i.shape),d=c,h=Ux(d,u),p=i;if(null!=h&&(p=mZ({inputs:{x:i},backend:r,attrs:{perm:h}}),d=Vx(d.length,u),l.push(p)),Bx("prod",d,u),r.shouldExecuteOnCPU([p])){var f=r.texData.get(p.dataId).values,m=WW(p.shape,p.dtype,f,d),v=m.outVals,g=m.outShape,y=m.outDtype;t=r.makeTensorInfo(g,y,v)}else{var b=jx(p.shape,d),x=(0,U.Z)(b,2),w=x[0],k=Md(x[1]),S=iZ({inputs:{x:p},backend:r,attrs:{shape:[-1,k]}}),E=lZ(S,dv(i.dtype),"prod",r);t=iZ({inputs:{x:E},backend:r,attrs:{shape:w}}),l.push(S),l.push(E)}if(s){l.push(t);var T=zx(t.shape,c);t=iZ({inputs:{x:t},backend:r,attrs:{shape:T}})}return l.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},FX=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=VW(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},jX={kernelName:pf,backendName:"webgl",kernelFunc:FX},zX=KV({opSnippet:"return 1.0 / x;"}),BX={kernelName:mf,backendName:"webgl",kernelFunc:zX},UX=KV({opSnippet:vV+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),WX={kernelName:vf,backendName:"webgl",kernelFunc:UX},VX=KV({opSnippet:vV+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),ZX={kernelName:kf,backendName:"webgl",kernelFunc:VX},HX=(0,I.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,U.Z)(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var d,h=[a&&n>1?u-1:u,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),GX=(0,I.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,U.Z)(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var d,h=[a&&n>1?u-1:u,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],",\n          ").concat(h[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var qX={kernelName:xf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=(0,U.Z)(s,2),l=u[0],c=u[1],d=oh().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new GX(a.shape,l,c,i,o):new HX(a.shape,l,c,i,o);return n.runWebGLProgram(d,[a],"float32")}},XX=(0,I.Z)((function e(t,n,r){M(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,U.Z)(n,3),i=a[1],o=a[2],s=(0,U.Z)(t,3),u=s[1],l=s[2],c=[r&&u>1?i-1:i,r&&l>1?o-1:o],d=[r&&u>1?u-1:u,r&&l>1?l-1:l],h=c[0]/d[0],p=c[1]/d[1],f=1/h,m=1/p,v=2*Math.ceil(f)+2,g=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(f,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var YX={kernelName:wf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new XX(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},KX=(0,I.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,U.Z)(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var d,h=[a&&n>1?u-1:u,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],f=a?"0.5":"0.0";d=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(f,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),QX=(0,I.Z)((function e(t,n,r,a,i){M(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,U.Z)(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var d,h=[a&&n>1?u-1:u,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],f=a?"0.5":"0.0";d=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],",\n          ").concat(h[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(f,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var JX={kernelName:yf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=(0,U.Z)(s,2),l=u[0],c=u[1],d=oh().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new QX(a.shape,l,c,i,o):new KX(a.shape,l,c,i,o);return n.runWebGLProgram(d,[a],a.dtype)}},$X=(0,I.Z)((function e(t,n,r){M(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,U.Z)(n,3),i=a[1],o=a[2],s=(0,U.Z)(t,3),u=s[1],l=s[2],c=[r&&u>1?i-1:i,r&&l>1?o-1:o],d=[r&&u>1?u-1:u,r&&l>1?l-1:l],h=c[0]/d[0],p=c[1]/d[1],f=1/h,m=1/p,v=2*Math.ceil(f)+2,g=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(f,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(c[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(c[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var eY={kernelName:bf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new $X(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},tY=(0,I.Z)((function e(t,n){M(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=KU(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),nY=(0,I.Z)((function e(t,n){M(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=uV("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=KU(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var rY={kernelName:Sf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=Ld(i,a.shape);if(0===o)return zV({inputs:{x:a},backend:n});var u=oh().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nY(a.shape,s):new tY(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},aY=(0,I.Z)((function e(t,n){M(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),iY={kernelName:cm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,l=new aY(a.shape,o),c=wE(s,a.shape[1],a.shape[2]),d=(0,U.Z)(c,2),h=[[d[0],d[1],Math.sin(i),Math.cos(i)]];return u.runWebGLProgram(l,[a],a.dtype,h)}},oY=KV({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),sY={kernelName:Ef,backendName:"webgl",kernelFunc:oY},uY=KV({opSnippet:"return inversesqrt(x);",cpuKernelImpl:ZW}),lY={kernelName:Tf,backendName:"webgl",kernelFunc:uY},cY=(0,I.Z)((function e(t,n,r,a,i,o){M(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=KU(i.length),u=KU(o.length),l="";1===r?l="i":2===r&&(l="i, j");var c="getIndices(".concat(l,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var h="getUpdates(".concat(d,")"),p=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(c,");\n              flattenedIndex += index * ").concat(p,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var dY={kernelName:Cf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=Pk(0,a,o),u=s.sliceRank,l=s.numUpdates,c=s.sliceSize,d=s.strides,h=s.outputSize,p=[h/c,c];if(0===h)return n.makeTensorInfo(o,a.dtype);var f=iZ({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),m=iZ({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new cY(l,u,f.shape.length,m.shape.length,d,p),y=n.runWebGLProgram(g,[m,f,v],m.dtype),b=iZ({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),b}},hY=(0,I.Z)((function e(t,n,r){var a,i;if(M(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],l=0;l<n.length;l++)u.push("".concat(o[l])),l<t&&s.push("".concat(o[l]));a=s.join(),i=u.join()}var c=KU(r);this.userCode="\n      void main() {\n        ".concat(c," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var pY={kernelName:_f,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new hY(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],cv(a.dtype,i.dtype))}},fY=KV({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(ME,";\n  float scale = ").concat(IE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),mY={kernelName:Mf,backendName:"webgl",kernelFunc:fY},vY=KV({opSnippet:YV+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:HW}),gY={kernelName:Of,backendName:"webgl",kernelFunc:vY},yY=KV({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),bY={kernelName:Rf,backendName:"webgl",kernelFunc:yY},xY=KV({opSnippet:YV+"\n  return sin(x);\n"}),wY={kernelName:Nf,backendName:"webgl",kernelFunc:xY},kY=KV({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),SY={kernelName:Af,backendName:"webgl",kernelFunc:kY},EY=KV({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),TY={kernelName:Df,backendName:"webgl",kernelFunc:EY},CY={kernelName:Ff,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;Ed(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,(0,_.Z)(o));for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=[],d=RX({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),h=kE(d.shape,i,s,!1),p=SE(h.length,i.length,!1),f=EE(d.shape,i,s,!1),m=iZ({inputs:{x:d},backend:n,attrs:{shape:h}}),v=mZ({inputs:{x:m},backend:n,attrs:{perm:p}}),g=iZ({inputs:{x:v},backend:n,attrs:{shape:f}});return c.push(d),c.push(m),c.push(v),c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var _Y={kernelName:Bf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],d=XW(s,r.shape,r.dtype,u,a.dtype,l,c),h=(0,U.Z)(d,5),p=h[0],f=h[1],m=h[2],v=h[3],g=h[4];return[n.makeTensorInfo(f,r.dtype,p),n.makeTensorInfo([f[0]],a.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};var MY={kernelName:Uf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),l=YW(s,r.shape,r.dtype,o,u),c=(0,U.Z)(l,3),d=c[0],h=c[1],p=c[2];return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};var IY={kernelName:Wf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=KW(o,r.shape,r.dtype,s,u,!0),c=(0,U.Z)(l,2),d=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,d)}};var NY={kernelName:Vf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=KW(o,r.shape,r.dtype,s,u),c=(0,U.Z)(l,2),d=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,d)}};var AY={kernelName:Zf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=Pk(0,a,s),l=u.sliceRank,c=u.numUpdates,d=u.strides,h=u.outputSize,p=new cY(c,l,a.shape.length,i.shape.length,d,[h,1],!1),f=n.runWebGLProgram(p,[i,a,o],i.dtype),m=iZ({inputs:{x:f},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(f),m}};var RY={kernelName:jf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=Ld(r.axis,a.shape)[0],s=KE(a,i,o),u=a.shape.length,l=new Array(u).fill(0),c=a.shape.slice();return s.map((function(e){var t=(0,_.Z)(c);t[o]=e;var r=hH({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[o]+=e,r}))}},OY="return sqrt(x);",DY=KV({opSnippet:OY,packedOpSnippet:OY,cpuKernelImpl:QW}),LY={kernelName:Lf,backendName:"webgl",kernelFunc:DY},PY={kernelName:Gf,backendName:"webgl",kernelFunc:KV({opSnippet:"return x * x;"})},FY="return (a - b) * (a - b);",jY=QV({opSnippet:FY,packedOpSnippet:FY}),zY={kernelName:Hf,backendName:"webgl",kernelFunc:jY};var BY={kernelName:um,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=vV+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new mV(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},UY=(0,I.Z)((function e(t,n,r){M(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=KU(r.length),o=KU(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var WY={kernelName:qf,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,l=a.beginMask,c=a.endMask,d=a.ellipsisMask,h=a.newAxisMask,p=a.shrinkAxisMask,f=Cy(i.shape,o,s,u,l,c,d,h,p),m=f.finalShapeSparse,v=f.finalShape,g=f.isIdentity,y=f.sliceDim0,b=f.isSimpleSlice,x=f.begin,w=f.end,k=f.strides;if(g)t=iZ({inputs:{x:i},backend:r,attrs:{shape:v}});else if(y||b){Ed(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var S=ky(x,w,k),E=hH({inputs:{x:i},backend:r,attrs:{begin:x,size:S}});t=iZ({inputs:{x:E},backend:r,attrs:{shape:v}}),r.disposeIntermediateTensorInfo(E)}else{if(r.shouldExecuteOnCPU([i])){var T=r.readSync(i.dataId),C=Wg(i.shape,i.dtype,T),_=JW(m,C,k,x);t=r.makeTensorInfo(v,i.dtype,_.values)}else{var M=new UY(x,k,m);t=r.runWebGLProgram(M,[i],i.dtype)}}var I=iZ({inputs:{x:t},backend:r,attrs:{shape:v}});return r.disposeIntermediateTensorInfo(t),I}};var VY={kernelName:Xf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,l=r.preserveShortSequences,c=t.data,d=t.dataSplits,h=n.readSync(c.dataId),p=n.readSync(d.dataId),f=$W(h,p,a,i,o,s,u,l),m=(0,U.Z)(f,2),v=m[0],g=m[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(d.shape,"int32",g)]}};var ZY={kernelName:Yf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],u=eV(o,s,r),l=(0,U.Z)(u,3),c=l[0],d=l[1],h=l[2],p=d.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};var HY={kernelName:Kf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=tV(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},GY=KV({opSnippet:"return tan(x);"}),qY={kernelName:Jf,backendName:"webgl",kernelFunc:GY},XY=KV({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),YY={kernelName:$f,backendName:"webgl",kernelFunc:XY},KY=(0,I.Z)((function e(t,n){M(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=KU(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function QY(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return Um(e)})):o,u=Wg(a.shape,a.dtype,s),l=rV(u,i);return n.makeTensorInfo(l.shape,l.dtype,l.values)}var c=new KY(a.shape,i);return n.runWebGLProgram(c,[a],a.dtype)}var JY={kernelName:em,backendName:"webgl",kernelFunc:QY},$Y=(0,I.Z)((function e(t){M(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),eK=(0,I.Z)((function e(t){M(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function tK(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function nK(e){for(var t=1;t<e;)t*=2;return t}var rK={kernelName:tm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=oh().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=oh().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=a.shape,c=l[l.length-1];if(n.shouldExecuteOnCPU([a])||c<s||i>u){var d=n.readSync(a.dataId),h=aV(d,l,a.dtype,i,o),p=(0,U.Z)(h,2),f=p[0],m=p[1];return[n.makeTensorInfo(f.shape,f.dtype,f.values),n.makeTensorInfo(m.shape,m.dtype,m.values)]}if(0===i)return l[l.length-1]=0,[n.makeTensorInfo(l,a.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(1===c)return[a,ZG({attrs:{shape:l,dtype:"int32",value:0},backend:n})];var v=n.texData.get(a.dataId),g=null!==v&&v.isPacked,y=g?n.unpackTensor(a):a,b=Md(l)/c,x=iZ({inputs:{x:y},attrs:{shape:[b,c]},backend:n});g&&tK(n,y);for(var w=nK(i),k=nK(c),S=null,E=function(){return null===S?[x,x]:[x,S]},T=function(e,t,r){var a=E(),i=new $Y(r),o=[[c],[null===S?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=S;S=n.runWebGLProgram(i,a,"int32",o),tK(n,s)},C=1;C<w;C*=2)for(var _=2*C,M=C;M>=1;M/=2)T(_,M,[b,k]);for(var I=k;I>w;I/=2){var N=E(),A=new eK([b,I/2]),R=[[c],[null===S?1:0],[w]],O=S;S=n.runWebGLProgram(A,N,"int32",R),tK(n,O);for(var D=w/2,L=2*D,P=D;P>=1;P/=2)T(L,P,S.shape)}var F=S;S=hH({inputs:{x:S},backend:n,attrs:{begin:0,size:[b,i]}}),tK(n,F);var j=uq({inputs:{x:x,indices:S},backend:n,attrs:{axis:1,batchDims:1}});tK(n,x);var z=l.slice(0,-1);z.push(i),F=S,S=iZ({inputs:{x:S},attrs:{shape:z},backend:n}),tK(n,F);var B=j;return j=iZ({inputs:{x:j},attrs:{shape:z},backend:n}),tK(n,B),[j,S]}},aK=(0,I.Z)((function e(t,n,r,a,i,o){M(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var iK={kernelName:nm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,u=r.fillValue,l=r.outputShape,c=(0,U.Z)(a.shape,4),d=c[0],h=c[1],p=c[2],f=c[3],m=null!=l?l:[h,p],v=(0,U.Z)(m,2),g=v[0],y=v[1],b=new aK(h,p,o,s,u,[d,g,y,f]);return n.runWebGLProgram(b,[a,i],"float32")}};var oK={kernelName:am,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;RU(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=oV(o,a,i.shape,i.dtype),u=s.outputValues,l=s.outputShape,c=s.indices;return[r.makeTensorInfo(l,i.dtype,u),r.makeTensorInfo([c.length],"int32",c)]}};var sK={kernelName:im,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],l=new Array(s-1),c=0,d=0;d<s;d++)d!==i&&(l[c++]=o.shape[d]);var h=[],p=new Array(s).fill(0),f=o.shape.slice();f[i]=1;for(var m=new Array(u),v=0;v<m.length;v++){p[i]=v;var g=hH({inputs:{x:o},backend:n,attrs:{begin:p,size:f}}),y=iZ({inputs:{x:g},backend:n,attrs:{shape:l}});m[v]=y,h.push(g)}return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},uK=(0,I.Z)((function e(t,n){M(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),l=r%4,c="\n        sumValue += dot(values, segFilter);\n    ",d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(h,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var lK={kernelName:om,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],l=0,c=Ux([l],s),d=a;null!=c&&(d=mZ({inputs:{x:a},backend:n,attrs:{perm:c}}),u.push(d),l=Vx(1,s)[0]);var h=function(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}(d.shape,l,o),p=Md([d.shape[l]]),f=iZ({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});u.push(f);var m=function e(t,r,a,i,o){var s=t.shape[0],l=t.shape[1],c=function(e,t){var n,r=!1;for(e<=bE?(n=e,r=!0):n=Gd(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Gd(e,n+1);return n}(l,o),d=new uK({windowSize:c,inSize:l,batchSize:s,numSegments:o},r),h=n.compileAndRun(d,[t,a],i);if(u.push(h),h.shape[1]===o)return h;var p=FX({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),f=QY({inputs:{x:p},backend:n,attrs:{reps:[l/c]}});return u.push(p),u.push(f),e(h,r,f,i,o)}(f,"unsortedSegmentSum",i,dv(a.dtype),o),v=iZ({inputs:{x:m},backend:n,attrs:{shape:h}}),g=v;if(null!=c){u.push(v);var y=Wx(c);g=mZ({inputs:{x:g},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},cK=0,dK=[bZ,wZ,SZ,TZ,MZ,AZ,RZ,OZ,zZ,BZ,WZ,ZZ,GZ,XZ,KZ,$Z,eH,rH,aH,iH,uH,fH,mH,vH,kH,TH,MH,WV,AH,zH,HH,KH,QH,JH,$H,eG,nG,aG,oG,cG,dG,pG,vG,bG,xG,kG,EG,TG,_G,MG,NG,RG,DG,PG,zG,WG,GG,XG,QG,$G,nq,rq,aq,oq,lq,dq,pq,BV,fq,PH,vq,yq,xq,HV,kq,Eq,Tq,_q,Iq,Aq,Oq,Lq,jq,Bq,Wq,Zq,Hq,Gq,Yq,Kq,Qq,Jq,$q,tX,aX,oX,mX,aZ,gX,bX,wX,SX,yH,TX,MX,IX,OX,LX,XV,PX,jX,xH,lX,BX,WX,ZX,oZ,qX,YX,JX,eY,rY,iY,sY,lY,dY,pY,mY,gY,bY,wY,SY,pH,fX,TY,CY,_Y,MY,IY,NY,AY,RY,LY,PY,zY,BY,WY,VY,ZY,HY,hX,fZ,qY,YY,JY,rK,iK,vZ,oK,sK,lK,_X];cK<dK.length;cK++){xm(dK[cK])}var hK=function(e){var t=e.open,n=e.closeModal,r="/icv_web_model/model.json",a=["Pala","Cuerpo","Cabina_Pala","Oruga","Brazo","Balde","Trasero_Pala","Camion","Neumaticos","Tolva","Cabina_Camion","Parrilla","Trasero_Camion"],i=(0,E.useState)(null),o=(0,U.Z)(i,2),s=o[0],u=o[1],l=(0,E.useState)(""),c=(0,U.Z)(l,2),d=c[0],h=c[1],p=(0,E.useState)(!1),f=(0,U.Z)(p,2),m=f[0],v=f[1],g=(0,E.useState)(!1),y=(0,U.Z)(g,2),b=y[0],x=y[1];(0,E.useEffect)((function(){var e=!1;if(!e)return bD(r).then((function(t){e||u(t)})),function(){e=!0}}),[]);var w=function(e,t,n){var r=e.naturalWidth,a=e.naturalHeight;n.clearRect(0,0,n.canvas.width,n.canvas.height),n.fillStyle="#000000",n.fillRect(0,0,t.width,t.height);var i=Math.min(t.width/e.naturalWidth,t.height/e.naturalHeight),o=Math.round(r*i),s=Math.round(a*i);n.drawImage(e,0,0,r,a,(t.width-o)/2,(t.height-s)/2,o,s)},k=function(){var e=Jn(Kn().mark((function e(t){var n,r,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=document.getElementById("canvas"),r=n.getContext("2d"),w(t.target,n,r),i=Oy((function(){return tE.resizeBilinear(yy(n),[640,640]).div(255).expandDims(0)})),s&&i&&s.executeAsync(i).then((function(e){v(!1),x(!0);var t="16px sans-serif";r.font=t,r.textBaseline="top";var i,o=(0,U.Z)(e,4),s=o[0],u=o[1],l=o[2],c=o[3],d=s.dataSync(),h=u.dataSync(),p=l.dataSync(),f=c.dataSync()[0];for(Dy(e),i=0;i<f;++i){var m=d.slice(4*i,4*(i+1)),g=(0,U.Z)(m,4),y=g[0],b=g[1],w=g[2],k=g[3];y*=n.width,w*=n.width,b*=n.height;var S=w-y,E=(k*=n.height)-b,T=a[p[i]],C=h[i].toFixed(2);r.strokeStyle="#00FFFF",r.lineWidth=4,r.strokeRect(y,b,S,E),r.fillStyle="#00FFFF";var _=r.measureText(T+":"+C).width,M=parseInt(t,10);r.fillRect(y,b,_+4,M+4)}for(i=0;i<f;++i){var I=d.slice(4*i,4*(i+1)),N=(0,U.Z)(I,3),A=N[0],R=N[1];A*=n.width,R*=n.height;var O=a[p[i]],D=h[i].toFixed(2);r.fillStyle="#000000",r.fillText(O+":"+D,A,R)}})).catch((function(e){v(!1),alert("Se detecta que la m\xe1quina no est\xe1 completa en la im\xe1gen. Por favor al\xe9jese de la m\xe1quina para que el sistema logre identificar todas las partes.")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,xr.jsx)(Wo,{open:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,xr.jsxs)(Jc,{sx:Gt,children:[(0,xr.jsxs)("div",{className:"Dropzone-page",children:[(0,xr.jsxs)("h3",{children:["Inserte su im\xe1gen. ",(0,xr.jsx)("br",{})," Para cambiar solo vuelva a tocar el cuadrado."]}),s?(0,xr.jsxs)(md.Z,{className:"Dropzone",accept:"image/jpeg, image/png, .jpg, .jpeg, .png",multiple:!1,onDrop:function(e,t,n){b?(v(!0),bD(r).then((function(t){u(t),setTimeout((function(){h(e[0].preview||n[0])}),2e3)}))):(v(!0),setTimeout((function(){h(e[0].preview||n[0])}),2e3))},children:[d?(0,xr.jsx)("img",{alt:"upload preview",onLoad:k,className:"Dropzone-img",src:d}):(0,xr.jsx)("h2",{children:"Presione para elegir una foto desde el archivo"}),(0,xr.jsx)("canvas",{id:"canvas",width:"640",height:"640"})]}):(0,xr.jsx)("div",{className:"Dropzone",children:"Cargando modelo..."})]}),(0,xr.jsx)(nd,{open:m,withProgress:!1,loadingData:"Cargando datos..."}),(0,xr.jsx)(dd,{onClick:function(){n()},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,xr.jsx)(rl,{style:{color:"#ccc"}})})]})})},pK=(n.p,function(e){var t=e.open,n=(e.report,e.closeModal),r=(0,E.useState)([]),a=(0,U.Z)(r,2),i=a[0],o=a[1],s=(0,E.useState)(""),u=(0,U.Z)(s,2),l=u[0],c=u[1],d=(0,E.useState)(""),h=(0,U.Z)(d,2),p=h[0],f=h[1],m=localStorage.getItem("_id"),v=Be();(0,E.useEffect)((function(){In(m).then((function(e){o(e.data.reverse())}))}),[]);return(0,xr.jsx)(Wo,{open:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,xr.jsxs)(Jc,{sx:Ht,children:[(0,xr.jsxs)(Ns,{container:!0,style:{paddingTop:50},children:[(0,xr.jsx)(Ns,{item:!0,xl:4,md:3,sm:2,xs:null}),(0,xr.jsxs)(Ns,{item:!0,xl:4,md:6,sm:8,xs:12,children:[(0,xr.jsxs)("div",{children:[(0,xr.jsx)("h1",{children:"Dejenos sus comentarios de la aplicaci\xf3n."}),(0,xr.jsx)(Gs,{value:p,onChange:function(e){f(e.target.value)},placeholder:"Asunto",style:{width:"100%",fontSize:18,fontFamily:"Raleway"}}),(0,xr.jsx)("br",{}),(0,xr.jsx)("br",{}),(0,xr.jsx)(zs,{"aria-label":"empty textarea",placeholder:"Deje su comentario",minRows:10,maxRows:15,style:{width:"100%",fontSize:18,fontFamily:"Raleway"},value:l,onChange:function(e){c(e.target.value)}})]}),(0,xr.jsx)("br",{}),(0,xr.jsx)("br",{}),(0,xr.jsx)(nl,{variant:"contained",color:"primary",style:{borderRadius:50},onClick:function(){!function(){if(p.length>0&&l.length>1){var e={sendDate:Date.now(),message:l,from:localStorage.getItem("_id"),subject:p};navigator.onLine?An(e).then((function(e){In(m).then((function(e){o(e.data.reverse())})),alert("Mensaje enviado."),c(""),f("")})):alert("Error de red")}else alert("Asunto y comentario son obligatorios.")}()},children:"Enviar Mensaje"}),("admin"===localStorage.getItem("role")||"sapExecutive"===localStorage.getItem("role")||"superAdmin"===localStorage.getItem("role"))&&(0,xr.jsx)(nl,{variant:"contained",color:"primary",style:{borderRadius:50,marginLeft:10},onClick:function(){n(),v("/internal-messages")},children:"Listado de mensajes"})]}),(0,xr.jsx)(Ns,{item:!0,xl:4,md:3,sm:2,xs:null})]}),(0,xr.jsxs)(Ns,{container:!0,style:{paddingTop:50},children:[(0,xr.jsx)(Ns,{item:!0,xl:4,md:3,sm:2,xs:null}),(0,xr.jsx)(Ns,{item:!0,xl:4,md:6,sm:8,xs:12,children:(0,xr.jsx)("div",{style:{overFlow:"auto",maxHeight:200,display:"block"},children:i.map((function(e,t){return e.answer||(e.answer="No hay respuesta."),(0,xr.jsxs)("div",{style:{width:"100%",fontSize:16,padding:10,borderRadius:20,borderStyle:"solid",borderWidth:1,borderColor:"#000",marginBottom:30},children:[(0,xr.jsx)("div",{style:{position:"relative",top:0,width:"100%"},children:(0,xr.jsx)(dd,{onClick:function(){!function(e,t){navigator.onLine&&confirm("Confirme la eliminaci\xf3n de su consulta.")&&Rn(e).then((function(e){var t=i.filter((function(t){if(t._id!==e.data._id)return t}));o(t),alert("Mensaje borrado.")}))}(e._id)},style:{position:"absolute",right:0,top:0,boxShadow:"none",backgroundColor:"transparent"},children:(0,xr.jsx)(rl,{style:{color:"#ccc"}})})}),(0,xr.jsx)("p",{children:(0,xr.jsx)("b",{children:e.subject})}),(0,xr.jsx)("p",{style:{whiteSpace:"pre-line"},children:e.message}),(0,xr.jsxs)("p",{style:{textAlign:"right"},children:["Enviado ",Jt(e.sendDate)," "]}),(0,xr.jsx)("p",{children:(0,xr.jsx)("b",{children:"Respuesta:"})}),(0,xr.jsx)("p",{children:e.answer})]},t)}))})}),(0,xr.jsx)(Ns,{item:!0,xl:4,md:3,sm:2,xs:null})]}),(0,xr.jsx)(dd,{onClick:n,style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,xr.jsx)(rl,{style:{color:"#ccc"}})})]})})}),fK=n(97),mK=n.n(fK),vK=function(e){var t=e.open,n=e.handleClose,r=e.astList,a=(0,E.useState)(screen.height),i=(0,U.Z)(a,2),o=i[0],s=i[1],u=(0,E.useState)(screen.width),l=(0,U.Z)(u,2),c=l[0],d=l[1];window.addEventListener("resize",(function(e){s(e.target.screen.availHeight),d(e.target.screen.availWidth)}));var h={width:c,height:o,facingMode:"user"};return(0,xr.jsx)(Wo,{open:t,style:{backgroundColor:"#ccc"},id:"cameraModal",children:(0,xr.jsx)("div",{style:{textAlign:"center"},children:(0,xr.jsx)(mK(),{audio:!1,height:o,screenshotFormat:"image/jpeg",width:c,videoConstraints:h,children:function(e){var t=e.getScreenshot;return(0,xr.jsx)("div",{style:{position:"absolute",width:"100%",textAlign:"center",bottom:100},children:(0,xr.jsx)(ms,{onClick:function(){var e=t();r.push({id:Date.now(),image:e}),n()},children:(0,xr.jsx)(Hi,{icon:Tr})})})}})})})},gK=E.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.color,i=void 0===a?"primary":a,o=e.position,s=void 0===o?"fixed":o,u=(0,qi.Z)(e,["classes","className","color","position"]);return E.createElement(Ko,(0,_t.Z)({square:!0,component:"header",elevation:4,className:(0,yo.Z)(n.root,n["position".concat((0,bo.Z)(s))],n["color".concat((0,bo.Z)(i))],r,"fixed"===s&&"mui-fixed"),ref:t},u))})),yK=(0,Rt.Z)((function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}}),{name:"MuiAppBar"})(gK),bK=E.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.component,i=void 0===a?"div":a,o=e.disableGutters,s=void 0!==o&&o,u=e.variant,l=void 0===u?"regular":u,c=(0,qi.Z)(e,["classes","className","component","disableGutters","variant"]);return E.createElement(i,(0,_t.Z)({className:(0,yo.Z)(n.root,n[l],r,!s&&n.gutters),ref:t},c))})),xK=(0,Rt.Z)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center"},gutters:(0,Pt.Z)({paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),regular:e.mixins.toolbar,dense:{minHeight:48}}}),{name:"MuiToolbar"})(bK),wK="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPkAAAD6CAYAAABj2+E+AAABVWlDQ1BEaXNwbGF5IFAzAAAoz2NgYFJJLCjIYWFgYMjNKykKcndSiIiMUmB/yMAOhLwMYgwKicnFBY4BAT5AJQwwGgkwMjB8uwYiGRgu64LMOiU1tUm1XsDXYqbw1YuvRJsY8AOulNTiZCD9B4hTkwuKSoBGpgDZyuUlBSB2B5AtUgR0FJA9B8ROh7A3gNhJEPYRsJqQIGcg+waQrZCckQg0g/EHkK2ThCSejsSG2gsC3C6ZxQU5iZUKAcYMVAclqRUlINo5v6CyKDM9o0TBERhKqQqeecl6OgpGBobmDAygMIeo/hwIDktGsTMIseb7DAy2+////78bIea1n4FhI1An106EmIYFA4MgNwPDiZ0FiUWJYCFmIGZKS2Ng+LScgYE3koFB+AJQT3RxmrERJPZ4nBgYWO/9//9ZjYGBfTIDw98J////XvT//9/FQM13GBgO5AEAFwJl7w8EHeAAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAnOaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMTEtMTNUMDk6Mzk6NTgtMDM6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMTEtMTNUMDk6Mzk6NTgtMDM6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTExLTEzVDA5OjM5OjU4LTAzOjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk5MzM4Y2ZlLWEyODctNDk2MC1iODcyLTk5YWY2YWRjYzYwYSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjJkZTFlNjU4LTg3NDEtYmY0YS05NzYyLTVlZjMxNzAxM2Q3YyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyMjhiZDNiLWViZDEtNDM3Ny04N2UxLTkwNDMxNmNjZmIwOSIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IkRpc3BsYXkgUDMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MjI4YmQzYi1lYmQxLTQzNzctODdlMS05MDQzMTZjY2ZiMDkiIHN0RXZ0OndoZW49IjIwMTktMTEtMTNUMDk6Mzk6NTgtMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTkzMzhjZmUtYTI4Ny00OTYwLWI4NzItOTlhZjZhZGNjNjBhIiBzdEV2dDp3aGVuPSIyMDE5LTExLTEzVDA5OjM5OjU4LTAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPjAwNjQ2MkNDRjBEN0QxMUI4RkYyRTQxQTc0NjAyQzRGPC9yZGY6bGk+IDxyZGY6bGk+MUMwODU5NjM2MTVEOTlDOEY4MDlEOEQ2MzEwNjk2MTI8L3JkZjpsaT4gPHJkZjpsaT4xQzYxNjVFODQwNTlBRjBCQUNFQzcwMUNFRUE4ODUzODwvcmRmOmxpPiA8cmRmOmxpPjU3NjEzM0IwMTc1ODM0QTM5OTRBQTA4RjYxRUJCQzE2PC9yZGY6bGk+IDxyZGY6bGk+NUZCQzczNEJBQzk2MzYxMDI0NzFDMkMxRDQzRkNENUU8L3JkZjpsaT4gPHJkZjpsaT44NEJFRkM1N0VDRjBBMkQ2MTFCRTM4QjIyODU0NDFFQjwvcmRmOmxpPiA8cmRmOmxpPkIxQkEyNkY5RDM3QzE4MTg3RjMwMzRBQTFCQkIzNUVBPC9yZGY6bGk+IDxyZGY6bGk+Q0JDOTNCMzBEQ0YxNkU3RDgzMzYyNDdBMDAyOTU4MzM8L3JkZjpsaT4gPHJkZjpsaT5GOEVEOEI3NEZGRkVDNkRBNDExNzZGRDUyNzY5NTk1NTwvcmRmOmxpPiA8cmRmOmxpPkZFNkJEMEJBNUJFQzE5RDQ3OTE0NEMxNTJDQkJDRUYyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowMEMyNkRBQzI0MjA2ODExOERCQkQ4MzgxN0Q4NjVFNTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6NjgyNWRjMjQtY2ZhOC00ODBlLWE5MmItMmUzNDM5ZThhNWQ0PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo2OUQ3QUJCNDIxMjA2ODExOEY2MkVGRUNFNjdBQ0M0MzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6QTZDNzJERDQwNzIwNjgxMTk1RkVDRDVERDFDODBCMTU8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkQxQjVGNTREQTFDMjExRTFBQzZEQ0JBNUM5RDJGMjAwPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpFMUI3NzlGNzM2MjA2ODExOTEwOUQyOEQxMkM0ODBCNzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6Y2Q3YzM4MWQtM2M1Yy00ZGYxLTg2NWEtODFkZDBlOWI5NDFhPC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HBn8IgAAD+lJREFUeF7t3QlslfWax/GnLTule2lpAaGsIt4rXHZkkaWUTa2CDE7UmQR09Dp4NTG5hnGJjnGJUclMzOio6L3qzCAqA5dNwYV1FOPGDKC54IJQkVX2rTh9Xv8VkJ5z3tO+5z2Hx+8nOeH/vG1SKPmd9z3/Ne3HGgLArHT3JwCjCDlgHCEHjCPkgHGEHDCOkAPGEXLAOEIOGEfIAeMIOWAcIQeMI+SAcYQcMI6QA8YRcsA4Qg4YR8gB4wg5YBwhB4wj5IBxhBwwjpADxhFywDhCDhhHyAHjCDlgHCEHjCPkgHGEHDCOkAPGEXLAOEIOGEfIAeMIOWAcIQeMI+SAcYQcMI6QA8YRcsA4Qg4YR8gB4wg5YBwhB4wj5IBxhBwwjpADxhFywDhCDhhHyAHjCDlgHCEHjCPkgHGEHDCOkAPGEXLAOEIOGEfIAeMIOWAcIQeMI+SAcYQcMI6QA8YRcsA4Qg4YR8gB4wg5YBwhB4wj5IBxhBwwjpADxhFywDhCDhhHyAHjCDlgHCEHjEv7sYZrI4IvvvhCli9fLlu2bJHjx49Lfn6+9OnTR0aMGCHNmjVz3wWkJkIeg4Z7/vz5rjpb69at5dZbb5Xs7Gx3BUg9PK5HoXfwSAFX33//vbz44ouuAlITIY/irbfecq3INm/eLF999ZWrgNRDyKP48ssvXSs6DTqQqgh5FCdPnnSt6Px+H5AMhDyKwsJC14pOO+CAVEXIo+jfv79rRZaZmSk9evRwFZB6CHkUw4YNkw4dOrjqXGlpaTJlyhRp2rSpuwKkHsbJYzh27JjMnTtX1q1bJ2f+qvLy8mTy5MncxZHyCLlPP/zwg9fbfuLECS/gHTt2lPR0HoSQ+gg5YBy3IsA4Qg4Yx+N6FMuWLfNesTz88MOulViHDh2S3bt3e6/9+/d7/QP6Uo0aNfJWxOlimZycHCkqKoqr1//I1m9k13vvuCp8Ob/rI60uvMhV/vxYXS07/vLfrvqF9HQpnnilK37dCHkUixcvliVLlrgqslmzZrlWsHbu3CkbNmzwlrhqp592/vmlw3u6JFaHALt06SLdu3f3wh/JyQP7ZfXIIXLq2FF3JVy5/QbIJf8e32KfXe8sl/V/uMVVZ8sfMlx+869Pu+rXjZBHkYyQ6x167dq18vHHH0tVVZW7GowLLrhA+vbt662Fb968ubt62sa7/yjfzX/DVeEbsOBNad7+AlfF9tk//oPsXlH304cGXIMOPpOnjK1bt8oLL7wg9957ryxatCjwgKuvv/7aG/O/55575NVXX5W9e/e6r/ykTeUk10qO7a/Nca3Yjn1XJXtWveeqszUrKZW8wUNdBUKeZDt27JDZs2fLY4895t29T5065b6SOLq7zapVq+SBBx7wwn7gwAHvek7vPtKirJPXToaqea/JqZq/mx/6vT9G+F2VTp4qacxh+Bm/iSTRlWt6x9ZOu08++cRdDVd1dbUX9gcffFA2btzoXSu5arL3ZzKc2LdXdi5b6qrINNwa8rqkN25c80RytaugCHkSbNu2TR599FFZunRpKHfuWI4cOfLzxhfaI61BSRY/j+x7Vq+Uo1XbXXW2wvIKaZyb5yooQh6y999/X5544gnvMT0VNc7JlYKR5a4K374PP5DDW6JvwrH99chvBKXX/K1roRYhD4kOYsybN09eeeWVn8e2U1UyH9nVtrn/6VrnOr5rl+yOMJ6f2a27ZF/Sy1WoRchDoI/kL7/8srzzTvCTTXQoLOilrjpm3bxde1eF77sF8+TUsWOuOlvVvLneJJi6lF4z1bVwJsbJowhinFx/vS+99JJ8+OGH7kr96O4zOqmlrKzMm82mu9acuee7/hydEac7yOrwm37G1s602p7zWCoqKmTs2LGuEvn62X+TLf/yhKvCd+E/P3LujLWaf+P/TBgtR77d6i6cltGypQxevloy6hj//7Uj5FEEEfLXX39d3nuv7vHcWFq1aiUDBgzwJrBosOOl/7XffPONrFmzRj766CNv6CySX4ZcH4vXlA+NeNdMtOzf9pLefzr7sX3v+2vlkxv/zlVnazv1Ounyx39yFc5EyKNoaMh1eErHoeOVlZUl5eXlXsAbB9TTffjwYXn77bfl3XffrbNP4JchV+tv/73sejv23P1E6Td3gbTs0tVVNR97at6kzpx22yizlc7fdRUi4TN5gujsMr2Lx0Pnmw8fPlxmzpwpQ4YMCSzgqkWLFjJhwgS5++67pWfPnu5qdCVXXeNaybH9tf9yrZ+kN2kijVpl/fwi4P4Q8gTQLaN0iqpONvFL79633HKLVFZWJvR8NV2lNn36dLn22mtjvonkDR4iTYvbuCp8VfPfkOojR1yF+iLkCbBw4ULZs2ePq2IrLS2VO++8U7p2Pf1ommi6E+1tt93mvblEolND21yZvNlj1dqRuGShq1BfhDxg2tG1YsUKV8XWuXNnmTFjRtSwJUq7du3kjjvukNzcXHflXCWVk5I6D3z7q5HHzOEPIQ/YggULvF5tP9q2bSvTpk1L6vHHGnA9mTXSm4w+rucNutRV4dv/f+vl4KYNrkJ9EPIA6Smo+vJDQ3XTTTfVua47bAUFBTJ48GBXnavk6imulRzb5vyHa6E+CHmA/JyCqrQX/YYbbkjKI3p95A+7TJrkF7gqfDsW/8X7fI76IeQB0QUnfu/iQ4cO9T6Lny/SMjKS2wF3+HBN0Be4CvEi5AHRWWV+6BDWuHHjXHX+aJPsRSs8stcbIQ+AdrTpri5+jBw5MqkdbfXVvG07b+FKshz8fJPs/9/PXIV4EPIA6LCZn51UdS76oEGDXHX+KZmU3A44htPqh5AHQLdN9qNfv36BTlUNW8Flo6RxlG2dE23H4oXe1tGIDyEPgO6J7oeG/Hymc8eLJ1a6Kny6OGXPWn99HziNkAdAF6PEoiehFhcXu+r8lcxdY9KbNpPc/gNdBb8IeQCOHo196kiY89ITSbdszu71O1eFq2jseGmcne0q+EXIQ6Knl1hRcnVylqCWXnOtayEehDwkun2TFYWjx/y0YUOIWl3U03shfoQ8JPqZ3IqMZs2leOIVrgpH2ylstVxfhDwkqbAQJUhhnpvWKCtLWlecf7MEUwUhD0nQ2yYnW2a3CyXrootdlVhtrrja61lH/RDykOiWUNa0CakDjv3UG4aQh8RiyIsqxktGixauSoy8gZfGdWY5zkXIQxLPnm/nCz3QoHVN0BOJu3jDEfKQ6MkmFiVyzLxpUbHkD7/MVagvQh6Sb7/91rVsyer5G8ns2s1VwdJVb2npGa5CfRHyADRp0sS1Ivv8889dy55EbCiR1qhR0g93sIKQB6B9+9gngOrj+u7du11lS/GEKwIf4iocMVqaFCRvXzlLCHkAOnTo4FrRffDBB65lix5ZVDiq3FXBKJ3CPPWgEPIA9OjRw7Wi05DrWeUWBblrTMuyzpLT5/xee59KCHkAOnbsKJmZma6KTIfR1q1b5ypbcnr3kRYdOrqqYUoYNgsUIQ9Aenq6XHyxvymeS5curfPoYAuCGE7TyTXFl1/pKgSBkAfk0kv9HSWknW/LliXvzO9EKr68UtIbuIdd0bjLpVHL2E9F8I+QB0TPNfPbAach37Ztm6vsaJyTKwWXjXRV/dDhFjxCHqBRo0a5VnQnT56U559/Xo6k0Nnbfg9pjKVk0t+4VvyyL+mdsIk1v2aEPEA9e/b0vc3Trl27vKBXV1e7K8mzf/9+efPNN13VMHoAQ7PStq6KD9s7JQYhD5AeZDhx4kRXxaZnp82ePTupQT906JA89dRT3ptOIGp+B/XZ0bVxbp4Ulle4CkEi5AHr0qWL9O3b11WxrV+/Xp5++mlfO74GTYP95JNPSlVVlbsSjDZXTop7znlJ5aQGd9qhboQ8ASorK32Nm9fSee2PP/64bN++3V1JPD31RX9mIlbH6XTU/GHDXeWD3v0n1/+zPKIj5AnQsmVLue6667zHd7/06GMN3fLlyxP6+K6bV8yZM8d7etBH9VpBj93HM2aeP2S4NCspdRWCRsgTpHv37lJREd9nTA3a/Pnz5ZFHHvEe44Pq8Vb6xrFy5Uq5//77ZfXq1e7qadrjH6S8wUO89eB+sDFEYhHyBBozZoz06tXLVf7pXf3ZZ5+Vhx56yAvmmXfceO3du1cWLVok9913n8ydO1cOHjzovpJY+pncz46u2hOvbwhInLSau0VwtwtjFi9eLEuWLHFVZLNmzXKtc+kd9JlnnpFNmza5K/HTabOdO3f2XmVlZVJUVCRZWVnuq6fpf6XOj9eOND2EcePGjb4n3ei03GnTprkqGEertsvasSP0L+aunKvTH+6U9n8f7M/F2Qh5FEGEXB0/flyee+65BgX9l/QIZP3sr1s968o27Z3XV30/Wyci5Oqz30+X3atWuOps2ps+aNlKb6YcEofH9RDozjE33nij9O7d211pOA3zvn37vEf7nTt3yoEDB1Jy4Uu0XWNajxlHwENAyEOSkZEh119/vYwfPz6uXvfzXcGwEdIkv+4dXlhSGg5CHiINd3l5udx8883SqlW4BwYmi+7V1uaKq1x1mp7Akv3b+DslET9CngTdunWTmTNnyoABA9yV5NKnDO3US5S6etlZbRYeQp4kegDi1KlTZcaMGb6XqCaCdrjdddddMnx4HDPU4qQnoOjClVq6XrxonP85/mgYQp5knTp1kttvv12mT5/uDY+FQT826Io5/bnao15YWOi+kjhndsAV1zy+Zxg75TWVMYQWRVBDaPHQcW2dkfbpp58GPnElPz/f6+EfOHCg1w7TqePHZc3oIXJi3z7p/8YiaVHWyX0FiUbIo0hGyGvp2PeWLVu8hST659atW+OeeqpDd7onfNeuXb1pttpOZs/+Xx97SA5s3CC9nvuzu4IwEPIodAzazyotv5s4NoQGvPaABl0iqnd5HRev3V1GP+PrBJmcnBzvVVxcLAUFBSk1XHdoy1/l8ObNUjh6jLuCMBBywDg63gDjCDlgHCEHjCPkgHGEHDCOkAPGEXLAOEIOGEfIAeMIOWAcIQeMI+SAcYQcMI6QA8YRcsA4Qg4YR8gB4wg5YBwhB4wj5IBxhBwwjpADxhFywDhCDhhHyAHjCDlgHCEHjCPkgHGEHDCOkAPGEXLAOEIOGEfIAeMIOWAcIQeMI+SAcYQcMI6QA8YRcsA4Qg4YR8gB4wg5YBwhB4wj5IBxhBwwjpADxhFywDhCDhhHyAHjCDlgHCEHjCPkgHGEHDCOkAPGEXLAOEIOGEfIAeMIOWAcIQeMI+SAcYQcMI6QA8YRcsA4Qg4YR8gB4wg5YBwhB4wj5IBxhBwwjpADxhFywDhCDhhHyAHjCDlgHCEHjCPkgHGEHDCOkAPGEXLAOEIOGEfIAeMIOWAcIQeMI+SAcYQcMI6QA8YRcsA4Qg4YR8gB4wg5YBwhB4wj5IBxhBwwjpADpon8P160iYdFVeG6AAAAAElFTkSuQmCC",kK=n(2120),SK=n.n(kK),EK=Bt((function(e){return{appbar:{height:80,width:"100%",backgroundColor:"#fff",borderBottomRightRadius:30,color:"#000"},locationIcon:{height:60,width:100,display:"flex",alignItems:"center",justifyContent:"center"},locationText:{display:"flex",flex:1,justifyContent:"flex-end",alignItems:"center",fontSize:"1rem"},languageSelector:{marginRight:15,"&.MuiInputBase-root":{color:"white"},"& .MuiSelect-icon":{color:"white"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white!important"}}}})),TK=function(){var e=EK(),t=(0,E.useContext)(Mce).isOnline,n=_ce().navBarOpen,r=bce(),a=r.isAuthenticated,i=r.userData,o=r.admin,s=r.site,u=Oce().message,l=Be();(0,E.useEffect)((function(){console.log("La red est\xe1 o no conectada: ",t),t||SK()({icon:wK,title:"Alerta",subtitle:"P\xe9rdida de conexi\xf3n",message:"El dispositivo no cuenta con conexi\xf3n a internet.",theme:"red",native:!0})}),[t]);return(0,xr.jsx)(yK,{className:e.appbar,children:(0,xr.jsx)("div",{className:"header-bar",children:(0,xr.jsxs)(xK,{children:[!n&&(0,xr.jsx)(ft,{to:"/",children:(0,xr.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAABpCAYAAADoScsPAAABVWlDQ1BEaXNwbGF5IFAzAAAoz2NgYFJJLCjIYWFgYMjNKykKcndSiIiMUmB/yMAOhLwMYgwKicnFBY4BAT5AJQwwGgkwMjB8uwYiGRgu64LMOiU1tUm1XsDXYqbw1YuvRJsY8AOulNTiZCD9B4hTkwuKSoBGpgDZyuUlBSB2B5AtUgR0FJA9B8ROh7A3gNhJEPYRsJqQIGcg+waQrZCckQg0g/EHkK2ThCSejsSG2gsC3C6ZxQU5iZUKAcYMVAclqRUlINo5v6CyKDM9o0TBERhKqQqeecl6OgpGBobmDAygMIeo/hwIDktGsTMIseb7DAy2+////78bIea1n4FhI1An106EmIYFA4MgNwPDiZ0FiUWJYCFmIGZKS2Ng+LScgYE3koFB+AJQT3RxmrERJPZ4nBgYWO/9//9ZjYGBfTIDw98J////XvT//9/FQM13GBgO5AEAFwJl7w8EHeAAAAAJcEhZcwAACxMAAAsTAQCanBgAAAnOaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MCA3OS4xNjA0NTEsIDIwMTcvMDUvMDYtMDE6MDg6MjEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMTEtMTNUMDk6Mzk6NTgtMDM6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMTEtMTNUMDk6Mzk6NTgtMDM6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTExLTEzVDA5OjM5OjU4LTAzOjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk5MzM4Y2ZlLWEyODctNDk2MC1iODcyLTk5YWY2YWRjYzYwYSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjJkZTFlNjU4LTg3NDEtYmY0YS05NzYyLTVlZjMxNzAxM2Q3YyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyMjhiZDNiLWViZDEtNDM3Ny04N2UxLTkwNDMxNmNjZmIwOSIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IkRpc3BsYXkgUDMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MjI4YmQzYi1lYmQxLTQzNzctODdlMS05MDQzMTZjY2ZiMDkiIHN0RXZ0OndoZW49IjIwMTktMTEtMTNUMDk6Mzk6NTgtMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTkzMzhjZmUtYTI4Ny00OTYwLWI4NzItOTlhZjZhZGNjNjBhIiBzdEV2dDp3aGVuPSIyMDE5LTExLTEzVDA5OjM5OjU4LTAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPjAwNjQ2MkNDRjBEN0QxMUI4RkYyRTQxQTc0NjAyQzRGPC9yZGY6bGk+IDxyZGY6bGk+MUMwODU5NjM2MTVEOTlDOEY4MDlEOEQ2MzEwNjk2MTI8L3JkZjpsaT4gPHJkZjpsaT4xQzYxNjVFODQwNTlBRjBCQUNFQzcwMUNFRUE4ODUzODwvcmRmOmxpPiA8cmRmOmxpPjU3NjEzM0IwMTc1ODM0QTM5OTRBQTA4RjYxRUJCQzE2PC9yZGY6bGk+IDxyZGY6bGk+NUZCQzczNEJBQzk2MzYxMDI0NzFDMkMxRDQzRkNENUU8L3JkZjpsaT4gPHJkZjpsaT44NEJFRkM1N0VDRjBBMkQ2MTFCRTM4QjIyODU0NDFFQjwvcmRmOmxpPiA8cmRmOmxpPkIxQkEyNkY5RDM3QzE4MTg3RjMwMzRBQTFCQkIzNUVBPC9yZGY6bGk+IDxyZGY6bGk+Q0JDOTNCMzBEQ0YxNkU3RDgzMzYyNDdBMDAyOTU4MzM8L3JkZjpsaT4gPHJkZjpsaT5GOEVEOEI3NEZGRkVDNkRBNDExNzZGRDUyNzY5NTk1NTwvcmRmOmxpPiA8cmRmOmxpPkZFNkJEMEJBNUJFQzE5RDQ3OTE0NEMxNTJDQkJDRUYyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowMEMyNkRBQzI0MjA2ODExOERCQkQ4MzgxN0Q4NjVFNTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6NjgyNWRjMjQtY2ZhOC00ODBlLWE5MmItMmUzNDM5ZThhNWQ0PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo2OUQ3QUJCNDIxMjA2ODExOEY2MkVGRUNFNjdBQ0M0MzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6QTZDNzJERDQwNzIwNjgxMTk1RkVDRDVERDFDODBCMTU8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkQxQjVGNTREQTFDMjExRTFBQzZEQ0JBNUM5RDJGMjAwPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpFMUI3NzlGNzM2MjA2ODExOTEwOUQyOEQxMkM0ODBCNzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6Y2Q3YzM4MWQtM2M1Yy00ZGYxLTg2NWEtODFkZDBlOWI5NDFhPC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HBn8IgAAB6ZJREFUeNrtnX1oVlUcx+82ddOardSYgmZTwwm+la0MbZQRNSlXWFLCUMOMslWGFma4CjQEUysqNGOlYLM/XBnRaqZh2RuhEZmVurQXZUZppqbLPX1P/CZPj8+9O+c+595z77m/Ax98u297fh/Pc8/b7zipVMphGFn4Q2BYGIaFYVgYhoVhWBiGYWEYFoZhYRgWhmFhGBaGYbQL01Fqa2uvBU3gGEiBPeAp0NPhEtliRBhIMY8kycZ3oB+HhoX5D8gwwUOWDj7k0LAwHcI0SwgjGMvhYWGEMMclhZnL4WFhhDCnJYVZwOFhYYQwuySFuZ3Dw8IIYR6VkKUVnMvhYWGEMEVgm4cs4ivrFg4NC5PeD1MM6kF7hiw/gioOCwtzVk8vidMPTAY1YDwo4JCwMK7CcGFhWBgWhoXhYr5ZfbgzwvoAcK9e4HIwBTxAz1dHzAf3iVYbHaPU1P9gxCWDwIMGuVT188A5XcA0F2pMCFMn03EXoCBDSIz14GfJTsQORKtuN1gLZoD+nXz4JeA4SBlikw9hJnlc7+1ECIPr9QWPg68VBZHhUzAbnOcSgHqDwggGKwqz0eNaE60WBte5DDSAtgBEyURMBHsBDMgIwHjDwixRkKU/OO1ynRaQb6UwOH8oeCMESbJxisS5MC0QOw0KcwgUSgqz0OM6j5h66Q1MGJxXCJ4MqUbpjD/ADRSIOYZrmTslZMkH+1zOPwn6WCUMzhkJvo2AKOnUUTB604duSpgtEsJUeZy/1mSzWrswOH46OBExWc4IQwFZZ7iWKe9EmA0e515lhTA4Lg8sjaAo2YSZYFiY5R6ylII2l/N2mO640yIMjukCXg0o0KLz8KhmYfLAboPC/A6KXISZ73HerNgLQzXLGg0BFUtaXgRTqQneM+M++aAPGAfuoSkZB/0IIxGYMKjJIosQeY/L8X+Cc2wQZkUOkoiALwLlPltiQtYrwOq0RXiywnhV/WGwLYswXl+Vz0ZhLCknYfBv9/oU5QCNC3XX2IN8Psl3QkYYiZfLMBie8TyFNITRQV7UBh99C4O/rwAnFUURUz6XBbkElyaCvSkpTJVhYZ6L22i1L2HESDFoUZTlV7GGO8SR7+kZ667qXDrI9hsU5qz3EluFWa4oy3ZQGvZ8EXp5PuAmDElTZ7iWuctqYfDnMQoL4ASbTWaBEAOQYJ+HMF6DfGHwue3CNCvI8qXbVIOQpRkMZnl0lr1juJYZbaUwlEdGpSVU6sSgIGDVhoVZaaswzQqtocq4zI2lqZAHDQpzFBRbJQzNa5GtXZbHbUI1ArbIcC0zyzZhlknK8kscU50hYGWGhdlhjTDUBS87Sbs2rss2xERtw9JU2CJMhcLYUPcYCzPFsDCrbRHmCcnjljgxLjSW85tBYcQymBIbhHlP8rhhTswLArbUcC1zmw3CHJE4psWxoIjpk4ZrmAtsEEaGlx1LCoK21ZAwr9jyDiPD3RYJU2NImDFJEqbSImF6gMMhy/KFTf0wMgx0LCpiclPIwkxLmjAllgkzKuRVBN2TJox1OfHEXJWQhFlq1Wh1EmsYEmZmFNOA2CJMfwuFKaapB0HK0uT3+eIuzDjHwoKArgpYmOqkCjPDUmEqApTlJ1CQVGGedywtCOpXAQmT0y4xURbmmMQxuywW5v4AZDklluvaKswWyePKLBUmiAycDbk+V5SFWewnQ4Jl0qzRLEylzcJcLXmcWD7bxVJhdGbg/EbHM0VZmALaaEvm2GkW1zK7NAkz22phxMPh15WSwohN0ossFeZhTWuQeiZBmNF+sz1ZJIyODJwv6XqeOKx8/ERSmL/BKEulWZ+jMCOSJEy1Qi3zQxQW4qc9e54mYXLJwPmRzp8pDsKIBW2fKUizCXSLgCyluvbepsSFe30KMzVRwtCHf43ikMEGk9LQHkxi55R6jV9LfjJwtoJuiROGgqCak/d9E+utcc9BlM41pVkYkYHzH0VhFuv++eIkTC+FfpkOxN4Dw0OU5UZwKO3+9TqvDwEaFWRpBwMTKwwF5HrF1GUpSok6F3QNUJRiShCdee8GzcJMVBBmYxA/axzz9C70ORViJ7W48jWK0o12Y3Or+Ro1C1NA81lkhKliYZwz6dxfz2EOzU5K8Nw7B1EG0L5MBzq5V6PugElm4BQtqnwW5v//s5tynHzVRunQFlArrK+HoGXgZhpB36FwjyCEuYjeT7yEmRfU12+cdzPpAd7VvIuJSMq8n2qh7yn3TC77MDUGEbROMnCKYYTeLIx7TbMuwvslBSXMrR7CvBZkSzD2O7JRT/BjPlpPcRamq0cGzrEsjJw41ynuZRRbYUiaxVlk2R50X5Ntu8qW0D5GUZBF7LryUIDCDM4izEwWxp8448E2kzULGBLCtIf0DJxHctmlJNHCpIlzE9gakiTt4C1wZYjzZO5IE2ZFGPe0Wpg0cUZS131rAKLspV3ZLg57oDMjA2c5C6N/zEdMLK8UqVrBxzRLT1WQv2h7nQWUSzjPMVggyjNgc1j3MyHMUBrT8SSk0eVCMZpN95xDPbkraPfYevr90zSUMEm8l+gci9IkzDAw2VphmGTCHwLDwjAsDMPCMCwMw8IwDAvDsDAMC8OwMAwLw7AwDOPGv3Wb5ZG6WpljAAAAAElFTkSuQmCC",height:75})}),a&&i&&(0,xr.jsx)(E.Fragment,{children:(0,xr.jsx)("div",{className:"user-name",onClick:function(){l("/user-profile")},children:(0,xr.jsxs)("dl",{children:[(0,xr.jsx)("dt",{style:{margin:0},children:(0,xr.jsxs)("div",{children:[" ",(0,xr.jsxs)("p",{className:"nombre",children:[" ",i.name," ",i.lastName," "]})," "]})}),(0,xr.jsxs)(Ns,{container:!0,children:[i.roles&&i.roles.map((function(e,t){return(0,xr.jsxs)(Ns,{item:!0,style:{marginRight:10},children:[(n=e,"superAdmin"===n?"Super Administrador":"admin"===n?"Administrador":"sapExecutive"===n?"Ejecutivo SAP":"inspectionWorker"===n?"Operario de Inspecci\xf3n":"maintenceOperator"===n?"Operario de Mantenci\xf3n":"shiftManager"===n?"Jefe de turno - Inspecci\xf3n y Mantenci\xf3n":"chiefMachinery"===n?"Jefe de maquinaria":"observer"===n?"Observador":void 0)," |"]},t);var n})),(0,xr.jsx)(Ns,{item:!0,children:s&&s.descripcion})]})]})})}),(0,xr.jsxs)("div",{style:{position:"absolute",right:10},children:[o&&(0,xr.jsx)("button",{onClick:function(){bc("test",localStorage.getItem("_id"),"Env\xedo prueba","Todos los usuarios","Se env\xeda notificaci\xf3n de prueba a todos los usuarios.")},children:"Notif. Test"}),(0,xr.jsxs)("p",{children:[" ",(0,xr.jsx)("b",{children:u.length>0&&u})," ",(0,xr.jsx)(Hi,{icon:Cr,color:t?"#2FB83F":"#B62800"})," ",t?"Online":"Offline"]}),!t&&(0,xr.jsx)("p",{children:"Sin red"})]})]})})})},CK=n(9864),_K=Bt((function(e){return{button:{borderRadius:20,maxWidth:400,minWidth:300,width:"100%"}}})),MK=function(){var e=Ece().dictionary,t=bce(),n=t.login,r=t.loginRut,a=(0,E.useState)(""),i=(0,U.Z)(a,2),o=i[0],s=i[1],u=(0,E.useState)(""),l=(0,U.Z)(u,2),c=l[0],d=l[1],h=(0,E.useState)(""),p=(0,U.Z)(h,2),f=p[0],m=p[1],v=(0,E.useState)("rut"),g=(0,U.Z)(v,2),y=g[0],b=g[1],x=(0,E.useState)("email"),w=(0,U.Z)(x,2),k=w[0],S=w[1],T=_K(),C=Be(),_=je(),M=(0,E.useState)("password"),I=(0,U.Z)(M,2),N=I[0],A=I[1],R=function(e){var t;switch(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.name){case"rut":return d((0,CK.format)(e.target.value));case"email":return s(e.target.value);case"password":return m(e.target.value)}};(0,E.useEffect)((function(){_.pathname.length}),[]);var O=function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"email"!==y){e.next=8;break}return e.next=4,n(o,f);case 4:e.sent.state&&C("/welcome",{replace:!0}),e.next=13;break;case 8:if("rut"!==y){e.next=13;break}return e.next=11,r(c,f);case 11:e.sent.state&&C("/welcome",{replace:!0});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,xr.jsx)(Ns,{container:!0,style:{padding:10,height:"50%"},alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("form",{onSubmit:O,children:(0,xr.jsxs)(Ns,{container:!0,item:!0,spacing:2,children:["rut"===y&&(0,xr.jsx)(Ns,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:(0,xr.jsx)(Ju,{type:"text",name:"rut",label:e.login.rutField,value:c,onChange:R,variant:"outlined",style:{maxWidth:400,minWidth:300,width:"100%"}})}),"email"===y&&(0,xr.jsx)(Ns,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:(0,xr.jsx)(Ju,{type:"email",name:"email",label:e.login.emailField,value:o,onChange:R,variant:"outlined",style:{maxWidth:400,minWidth:300,width:"100%"}})}),(0,xr.jsxs)(Ns,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:[(0,xr.jsx)(Ju,{type:N,name:"password",label:e.login.passwordField,value:f,onChange:R,variant:"outlined",style:{maxWidth:400,minWidth:300,width:"100%"}}),(0,xr.jsxs)(ms,{style:{width:0,position:"relative",right:25,zIndex:1,padding:0},onClick:function(){A("password"===N?"text":"password")},children:["password"===N&&(0,xr.jsx)(Hi,{icon:Or}),"text"===N&&(0,xr.jsx)(Hi,{icon:Dr})]})]}),(0,xr.jsx)(Ns,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:(0,xr.jsx)(nl,{className:T.button,style:{marginBottom:20},type:"submit",variant:"contained",color:"primary",children:e.login.loginButton})}),(0,xr.jsx)(Ns,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:(0,xr.jsxs)(nl,{className:T.button,variant:"contained",onClick:function(){"email"===y?(b("rut"),S("email")):(b("email"),S("rut"))},children:["Usar ",k]})}),(0,xr.jsx)(Ns,{item:!0,xs:12,container:!0,justifyContent:"center",children:"rut"===k&&(0,xr.jsx)("p",{className:"link-text",onClick:function(){C("/reset-password")},children:e.login.forgotPasswordText})})]})})})},IK={left:"right",right:"left",top:"down",bottom:"up"};var NK,AK,RK,OK,DK={enter:co.x9.enteringScreen,exit:co.x9.leavingScreen},LK=E.forwardRef((function(e,t){var n=e.anchor,r=void 0===n?"left":n,a=e.BackdropProps,i=e.children,o=e.classes,s=e.className,u=e.elevation,l=void 0===u?16:u,c=e.ModalProps,d=(c=void 0===c?{}:c).BackdropProps,h=(0,qi.Z)(c,["BackdropProps"]),p=e.onClose,f=e.open,m=void 0!==f&&f,v=e.PaperProps,g=void 0===v?{}:v,y=e.SlideProps,b=e.TransitionComponent,x=void 0===b?go:b,w=e.transitionDuration,k=void 0===w?DK:w,S=e.variant,T=void 0===S?"temporary":S,C=(0,qi.Z)(e,["anchor","BackdropProps","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"]),_=lo(),M=E.useRef(!1);E.useEffect((function(){M.current=!0}),[]);var I=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?IK[t]:t}(_,r),N=E.createElement(Ko,(0,_t.Z)({elevation:"temporary"===T?l:0,square:!0},g,{className:(0,yo.Z)(o.paper,o["paperAnchor".concat((0,bo.Z)(I))],g.className,"temporary"!==T&&o["paperAnchorDocked".concat((0,bo.Z)(I))])}),i);if("permanent"===T)return E.createElement("div",(0,_t.Z)({className:(0,yo.Z)(o.root,o.docked,s),ref:t},C),N);var A=E.createElement(x,(0,_t.Z)({in:m,direction:IK[I],timeout:k,appear:M.current},y),N);return"persistent"===T?E.createElement("div",(0,_t.Z)({className:(0,yo.Z)(o.root,o.docked,s),ref:t},C),A):E.createElement(Wo,(0,_t.Z)({BackdropProps:(0,_t.Z)({},a,d,{transitionDuration:k}),BackdropComponent:Xo,className:(0,yo.Z)(o.root,o.modal,s),open:m,onClose:p,ref:t},C,h),A)})),PK=(0,Rt.Z)((function(e){return{root:{},docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100%"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}}),{name:"MuiDrawer",flip:!1})(LK),FK=(0,ju.Z)(E.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu"),jK=Bt((function(e){return{drawer:{width:250,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:330,maxWidth:"100vw",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflow:"hidden"},drawerClose:{width:"15vw",maxWidth:99,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:" hidden"},drawerPaper:{marginTop:0,backgroundColor:"#212121",border:"none",borderEndEndRadius:30,borderTopRightRadius:30},drawerContainer:{position:"relative"},drawerBottom:{position:"absolute",backgroundColor:"rgb(228, 228, 228)",width:"100%",display:"flex",bottom:0,padding:5},bottomButtons:{height:54,width:54},sideButtons:{width:"5vh",maxWidth:26,height:"2.5vh",color:"#FFFFFF"},sideButtonsCloseMenu:{width:26,height:26,color:"#FFFFFF",paddingBottom:100,paddingTop:40},sideButtonsOpenMenu:{width:26,height:26,color:"#FFFFFF",paddingBottom:20,paddingTop:40},divider:{width:"100%",backgroundColor:"rgba(255, 255, 255, 0.18)"},searchField:{"& .MuiFormLabel-root":{color:"white"},"& .Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white!important"},"& .fa-search":{color:"white"},"& .MuiInputBase-input":{color:"white"}},listItemText:{whiteSpace:"normal",color:"white",fontWeight:"bold"}}})),zK=function(){var e,t,n=bce(),r=n.isSapExecutive,a=n.isShiftManager,i=n.isChiefMachinery,o=n.admin,s=n.logout,u=Oce().getReports,l=jK(),c=_ce(),d=c.navBarOpen,h=c.handleNavBar,p=(0,E.useState)(""),f=(0,U.Z)(p,2),m=f[0],v=f[1],g=je(),y=(0,E.useState)(!0),b=(0,U.Z)(y,2),x=b[0],w=b[1],k=(0,E.useState)(!0),S=(0,U.Z)(k,2),T=S[0],C=S[1],_=(0,E.useState)(!1),M=(0,U.Z)(_,2),I=M[0],N=M[1],A=(0,E.useState)(!1),R=(0,U.Z)(A,2),O=R[0],D=R[1],L=(0,E.useState)(!1),P=(0,U.Z)(L,2),F=P[0],j=P[1],z=function(){d&&h()},B={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return B.Android()||B.BlackBerry()||B.iOS()||B.Opera()||B.Windows()},other:function(){return navigator.userAgent.match(/Mozilla/i)||navigator.userAgent.match(/AppleWebKit/i)||navigator.userAgent.match(/Chrome/i)||navigator.userAgent.match(/Safari/i)}};return(0,E.useEffect)((function(){o&&w(!1),(o||r||a||i)&&C(!1)}),[o,r,a,i]),(0,E.useEffect)((function(){g&&v(g.pathname)}),[g]),(0,xr.jsx)("div",{children:(0,xr.jsx)(PK,{className:(0,yo.Z)((0,yo.Z)(l.drawer,(e={},(0,Pt.Z)(e,l.drawerOpen,d),(0,Pt.Z)(e,l.drawerClose,!d),e))),variant:"permanent",classes:{paper:(0,yo.Z)(l.drawerPaper,(t={},(0,Pt.Z)(t,l.drawerOpen,d),(0,Pt.Z)(t,l.drawerClose,!d),t))},children:(0,xr.jsxs)("div",{className:l.drawerContainer,children:[(0,xr.jsx)(Ns,{container:!0,spacing:2,style:{padding:d?8:"8px 0 0 0"},children:(0,xr.jsxs)(Ns,{item:!0,xs:12,container:!0,children:[(0,xr.jsx)("div",{style:{width:"100%",textAlign:d?"right":"center"},children:(0,xr.jsx)(ms,{title:d?"Cerrar Men\xfa":"Abrir Men\xfa",onClick:h,className:d?l.sideButtonsOpenMenu:l.sideButtonsCloseMenu,children:d?(0,xr.jsx)(rl,{}):(0,xr.jsx)(FK,{})})}),d&&(0,xr.jsxs)("div",{style:{padding:10},children:[(0,xr.jsx)("img",{height:60,src:"./assets/Logologo_icv_1.svg",alt:""}),(0,xr.jsx)("p",{style:{color:"#fff",margin:0},children:"Ingenier\xeda Civil Vicente"})]}),(0,xr.jsx)("div",{style:{height:1,backgroundColor:"#fff",width:"100%",marginRight:10,marginLeft:10}}),(0,xr.jsx)("div",{style:{width:"100%",marginTop:40,textAlign:d?"left":"center"},children:(0,xr.jsx)(ms,{onClick:z,title:"Inicio",children:(0,xr.jsxs)(ft,{to:"/welcome",className:l.sideButtons,style:{textDecoration:"none",color:"/welcome"===m?"#BE2E26":"#FFFFFF"},children:[(0,xr.jsx)(Hi,{icon:Lr})," ",d?" Inicio":""]})})}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,xr.jsx)(ms,{onClick:z,title:"Listado Asignaciones",children:(0,xr.jsxs)(ft,{to:"/assignment",className:l.sideButtons,style:{color:m.includes("/assignment")?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,xr.jsx)(Hi,{icon:jr})," ",d?" Listado Asignaciones":""]})})}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,xr.jsx)(ms,{onClick:z,title:"M\xe1quinas",children:(0,xr.jsxs)(ft,{to:"/machines",className:l.sideButtons,style:{textDecoration:"none",color:m.match("/machines")?"#BE2E26":"#FFFFFF"},children:[(0,xr.jsx)(Hi,{icon:Jr})," ",d?" M\xe1quinas":""]})})}),!x&&(0,xr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,xr.jsx)(ms,{onClick:z,title:"Obras",children:(0,xr.jsxs)(ft,{to:"/sites",className:l.sideButtons,style:{color:"/sites"===m?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,xr.jsx)(Hi,{icon:Br})," ",d?" Obras":""]})})}),!T&&(0,xr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,xr.jsx)(ms,{onClick:z,title:"Ordenes de Trabajo",children:(0,xr.jsxs)(ft,{to:"/reports",className:l.sideButtons,style:{color:m.includes("/reports")?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,xr.jsx)(Hi,{icon:_r})," ",d?" Ordenes de Trabajo":""]})})}),!x&&(0,xr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,xr.jsx)(ms,{onClick:z,title:"Administraci\xf3n",children:(0,xr.jsxs)(ft,{to:"/administration",className:l.sideButtons,style:{color:m.includes("/administration")||m.includes("/users")||m.includes("/edit-user")||m.includes("/new-users")||m.includes("/patterns")?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,xr.jsx)(Hi,{icon:ea})," ",d?" Administraci\xf3n":""]})})}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,xr.jsx)(ms,{onClick:z,title:"Perfil",children:(0,xr.jsxs)(ft,{to:"/user-profile",className:l.sideButtons,style:{color:m.includes("/user-profile")?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,xr.jsx)(Hi,{icon:$r})," ",d?" Perfil":""]})})}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,xr.jsx)(ms,{onClick:z,title:"Actualizar",onClickCapture:function(){u()},children:(0,xr.jsxs)("div",{className:l.sideButtons,style:{color:"#FFFFFF",textDecoration:"none"},children:[(0,xr.jsx)(Hi,{icon:Yr})," ",d?" Actualizar":""]})})}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,xr.jsx)(ms,{onClick:z,title:"Int. Artificial",onClickCapture:function(){D(!0)},children:(0,xr.jsxs)("div",{className:l.sideButtons,style:{color:"/pms"===m?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,xr.jsx)(Hi,{icon:Zr})," ",d?" Int. Artificial":""]})})}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,xr.jsx)(ms,{onClick:z,title:"Mensajes App",onClickCapture:function(){j(!0)},children:(0,xr.jsxs)("div",{className:l.sideButtons,style:{color:"/pms"===m?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,xr.jsx)(Hi,{icon:Ir})," ",d?" Mensajes App":""]})})}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,xr.jsx)(ms,{onClick:z,title:"Informaci\xf3n",onClickCapture:function(){N(!0)},children:(0,xr.jsxs)("div",{className:l.sideButtons,style:{color:"/information"===m?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,xr.jsx)(Hi,{icon:Fr})," ",d?" Informaci\xf3n":""]})})}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,xr.jsx)(ms,{onClick:z,title:"Informaci\xf3n",onClickCapture:function(){B.Android()?window.location.replace("market://details?id=org.opencascade.cadassistant"):alert("Su dispositivo no cuenta con el link a Cad Assistant")},children:(0,xr.jsxs)("div",{className:l.sideButtons,style:{color:"/information"===m?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,xr.jsx)(Hi,{icon:Ar})," ",d?" Cad Assistant":""]})})}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,xr.jsx)(ms,{onClick:z,title:"Opciones",children:(0,xr.jsxs)(ft,{to:"/options",className:l.sideButtons,style:{color:"/options"===m?"#BE2E26":"#FFFFFF",textDecoration:"none"},children:[(0,xr.jsx)(Hi,{icon:Xr})," ",d?" Opciones":""]})})}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:d?"left":"center"},children:(0,xr.jsx)(ms,{onClick:s,title:"Cerrar Sesi\xf3n",children:(0,xr.jsxs)("div",{className:l.sideButtons,children:[(0,xr.jsx)(Hi,{icon:qr})," ",d?" Cerrar Sesi\xf3n":""]})})})]})}),I&&(0,xr.jsx)(fd,{open:I,closeModal:function(){N(!1)}}),O&&(0,xr.jsx)(hK,{open:O,closeModal:function(){D(!1)}}),F&&(0,xr.jsx)(pK,{open:F,closeModal:function(){j(!1)}})]})})})},BK=Bt((function(e){return{button:{borderRadius:20,maxWidth:400,minWidth:300,width:"100%"}}})),UK=function(){var e=Ece().dictionary,t=(bce().login,(0,E.useState)("")),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=(0,E.useState)(!1),o=(0,U.Z)(i,2),s=o[0],u=o[1],l=BK(),c=Be(),d=function(){var e=Jn(Kn().mark((function e(t){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),e.next=4,h();case 4:n=e.sent,console.log(n),n.data.status?"no-email"===n.data.status&&(alert(n.data.message),u(!1)):(alert(n.data.message),u(!1),c("/",{replace:!0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("No se pudo obtener el reset");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){return new Promise((function(e){rn(r).then((function(t){e(t)})).catch((function(t){e(t)}))}))};return(0,xr.jsxs)(Ns,{container:!0,style:{padding:20,height:"50%"},alignItems:"center",justifyContent:"center",children:[(0,xr.jsx)("form",{onSubmit:d,children:(0,xr.jsxs)(Ns,{container:!0,item:!0,spacing:2,children:[(0,xr.jsx)(Ns,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:(0,xr.jsx)(Ju,{type:"email",name:"email",label:e.login.emailField,value:r,onChange:function(e){var t;if("email"===(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.name))return a(e.target.value)},variant:"outlined",style:{maxWidth:400,minWidth:300,width:"100%"}})}),(0,xr.jsx)(Ns,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:(0,xr.jsx)(nl,{className:l.button,type:"submit",variant:"contained",color:"primary",children:"SOLICITAR"})}),(0,xr.jsx)(Ns,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:40},children:(0,xr.jsx)(nl,{className:l.button,variant:"contained",color:"primary",onClick:function(){c(-1)},children:"VOLVER"})})]})}),s&&(0,xr.jsx)(nd,{open:s,loadingData:"Solicitando restablecer contrase\xf1a",withProgress:!1})]})},WK=Bt((function(e){return{button:{borderRadius:20,maxWidth:400,minWidth:300,width:"100%"}}})),VK=function(e){var t=e.id,n=Ece().dictionary,r=(0,E.useState)(""),a=(0,U.Z)(r,2),i=a[0],o=a[1],s=(0,E.useState)(""),u=(0,U.Z)(s,2),l=u[0],c=u[1],d=(0,E.useState)(""),h=(0,U.Z)(d,2),p=h[0],f=h[1],m=(0,E.useState)(!1),v=(0,U.Z)(m,2),g=v[0],y=v[1],b=(0,E.useState)(!1),x=(0,U.Z)(b,2),w=x[0],k=x[1],S=WK(),T=Be(),C=(0,E.useState)("password"),_=(0,U.Z)(C,2),M=_[0],I=_[1],N=(0,E.useState)("password"),A=(0,U.Z)(N,2),R=A[0],O=A[1];(0,E.useEffect)((function(){f(t)}),[]);var D=function(e){var t;switch(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.name){case"password":return o(e.target.value);case"confirmPassword":return c(e.target.value)}},L=function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i===l?i.length>5?an(i,p).then((function(e){alert("Contrase\xf1a cambiada con \xe9xito"),T("/")})).catch((function(e){alert("Error al crear contrase\xf1a. El correo utilizado est\xe1 vencido. Revise si le ha llegado un correo nuevo con la solicitud de restauraci\xf3n de contrase\xf1a actualizado o espere un m\xe1ximo de 10 minutos m\xe1s. Si el error persiste, contacte al administrador.")})):alert("Contrase\xf1a debe contener al menos 6 car\xe1cteres."):alert("Contrase\xf1as ingresadas no coinciden");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(e){y(i!==l),i.length<6?k(!0):k(!1)};return(0,xr.jsx)(Ns,{container:!0,style:{padding:20,height:"50%"},alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("form",{children:(0,xr.jsxs)(Ns,{container:!0,item:!0,spacing:2,children:[(0,xr.jsxs)(Ns,{item:!0,xs:12,container:!0,justifyContent:"center",children:[(0,xr.jsx)(Ju,{type:M,name:"password",label:n.restorePassword.passwordField,value:i,onChange:D,onBlur:function(e){return P()},variant:"outlined",style:{maxWidth:400,minWidth:300,width:"100%"},id:"password"}),(0,xr.jsxs)(ms,{style:{width:0,position:"relative",right:25,zIndex:1,padding:0},onClick:function(){I("password"===M?"text":"password")},children:["password"===M&&(0,xr.jsx)(Hi,{icon:Or}),"text"===M&&(0,xr.jsx)(Hi,{icon:Dr})]})]}),(0,xr.jsxs)(Ns,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:10},children:[(0,xr.jsx)(Ju,{type:R,name:"confirmPassword",label:n.restorePassword.confirmPasswordField,value:l,onChange:D,onBlur:function(e){return P()},variant:"outlined",style:{maxWidth:400,minWidth:300,width:"100%"},id:"c_password"}),(0,xr.jsxs)(ms,{style:{width:0,position:"relative",right:25,zIndex:1,padding:0},onClick:function(){O("password"===R?"text":"password")},children:["password"===R&&(0,xr.jsx)(Hi,{icon:Or}),"text"===R&&(0,xr.jsx)(Hi,{icon:Dr})]})]}),w&&(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,xr.jsx)("p",{style:{color:"red"},children:(0,xr.jsx)("strong",{children:"Contrase\xf1as deben ser de 6 car\xe1cteres m\xednimo"})})}),g&&(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,xr.jsx)("p",{style:{color:"red"},children:(0,xr.jsx)("strong",{children:"Contrase\xf1as no coinciden"})})}),(0,xr.jsx)(Ns,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:10},children:(0,xr.jsx)(nl,{className:S.button,variant:"contained",color:"primary",onClick:function(){L()},children:n.restorePassword.button})}),(0,xr.jsx)(Ns,{item:!0,xs:12,container:!0,justifyContent:"center",style:{paddingTop:10},children:(0,xr.jsx)(nl,{className:S.button,variant:"contained",color:"primary",onClick:function(){T("/",{replace:!0})},children:n.restorePassword.cancel})})]})})})};Bt((function(e){return{}})),Bt((function(e){return{}}));function ZK(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var HK="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,GK=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t!==n;){var r=t.nextSibling;e.removeChild(t),t=r}},qK="{{lit-".concat(String(Math.random()).slice(2),"}}"),XK="\x3c!--".concat(qK,"--\x3e"),YK=new RegExp("".concat(qK,"|").concat(XK)),KK=(0,I.Z)((function e(t,n){M(this,e),this.parts=[],this.element=n;for(var r=[],a=[],i=document.createTreeWalker(n.content,133,null,!1),o=0,s=-1,u=0,l=t.strings,c=t.values.length;u<c;){var d=i.nextNode();if(null!==d){if(s++,1===d.nodeType){if(d.hasAttributes()){for(var h=d.attributes,p=h.length,f=0,m=0;m<p;m++)QK(h[m].name,"$lit$")&&f++;for(;f-- >0;){var v=l[u],g=eQ.exec(v)[2],y=g.toLowerCase()+"$lit$",b=d.getAttribute(y);d.removeAttribute(y);var x=b.split(YK);this.parts.push({type:"attribute",index:s,name:g,strings:x}),u+=x.length-1}}"TEMPLATE"===d.tagName&&(a.push(d),i.currentNode=d.content)}else if(3===d.nodeType){var w=d.data;if(w.indexOf(qK)>=0){for(var k=d.parentNode,S=w.split(YK),E=S.length-1,T=0;T<E;T++){var C=void 0,_=S[T];if(""===_)C=$K();else{var I=eQ.exec(_);null!==I&&QK(I[2],"$lit$")&&(_=_.slice(0,I.index)+I[1]+I[2].slice(0,-5)+I[3]),C=document.createTextNode(_)}k.insertBefore(C,d),this.parts.push({type:"node",index:++s})}""===S[E]?(k.insertBefore($K(),d),r.push(d)):d.data=S[E],u+=E}}else if(8===d.nodeType)if(d.data===qK){var N=d.parentNode;null!==d.previousSibling&&s!==o||(s++,N.insertBefore($K(),d)),o=s,this.parts.push({type:"node",index:s}),null===d.nextSibling?d.data="":(r.push(d),s--),u++}else for(var A=-1;-1!==(A=d.data.indexOf(qK,A+1));)this.parts.push({type:"node",index:-1}),u++}else i.currentNode=a.pop()}for(var R=0,O=r;R<O.length;R++){var D=O[R];D.parentNode.removeChild(D)}})),QK=function(e,t){var n=e.length-t.length;return n>=0&&e.slice(n)===t},JK=function(e){return-1!==e.index},$K=function(){return document.createComment("")},eQ=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function tQ(e,t){for(var n=e.element.content,r=e.parts,a=document.createTreeWalker(n,133,null,!1),i=rQ(r),o=r[i],s=-1,u=0,l=[],c=null;a.nextNode();){s++;var d=a.currentNode;for(d.previousSibling===c&&(c=null),t.has(d)&&(l.push(d),null===c&&(c=d)),null!==c&&u++;void 0!==o&&o.index===s;)o.index=null!==c?-1:o.index-u,o=r[i=rQ(r,i)]}l.forEach((function(e){return e.parentNode.removeChild(e)}))}var nQ=function(e){for(var t=11===e.nodeType?0:1,n=document.createTreeWalker(e,133,null,!1);n.nextNode();)t++;return t},rQ=function(e){for(var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)+1;t<e.length;t++){var n=e[t];if(JK(n))return t}return-1},aQ=new WeakMap,iQ=function(e){return"function"==typeof e&&aQ.has(e)},oQ={},sQ={},uQ=function(){function e(t,n,r){M(this,e),this.__parts=[],this.template=t,this.processor=n,this.options=r}return(0,I.Z)(e,[{key:"update",value:function(e){var t,n=0,r=G(this.__parts);try{for(r.s();!(t=r.n()).done;){var a=t.value;void 0!==a&&a.setValue(e[n]),n++}}catch(sde){r.e(sde)}finally{r.f()}var i,o=G(this.__parts);try{for(o.s();!(i=o.n()).done;){var s=i.value;void 0!==s&&s.commit()}}catch(sde){o.e(sde)}finally{o.f()}}},{key:"_clone",value:function(){for(var e,t=HK?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),n=[],r=this.template.parts,a=document.createTreeWalker(t,133,null,!1),i=0,o=0,s=a.nextNode();i<r.length;)if(e=r[i],JK(e)){for(var u;o<e.index;)o++,"TEMPLATE"===s.nodeName&&(n.push(s),a.currentNode=s.content),null===(s=a.nextNode())&&(a.currentNode=n.pop(),s=a.nextNode());if("node"===e.type){var l=this.processor.handleTextExpression(this.options);l.insertAfterNode(s.previousSibling),this.__parts.push(l)}else(u=this.__parts).push.apply(u,(0,_.Z)(this.processor.handleAttributeExpressions(s,e.name,e.strings,this.options)));i++}else this.__parts.push(void 0),i++;return HK&&(document.adoptNode(t),customElements.upgrade(t)),t}}]),e}(),lQ=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:function(e){return e}}),cQ=" ".concat(qK," "),dQ=function(){function e(t,n,r,a){M(this,e),this.strings=t,this.values=n,this.type=r,this.processor=a}return(0,I.Z)(e,[{key:"getHTML",value:function(){for(var e=this.strings.length-1,t="",n=!1,r=0;r<e;r++){var a=this.strings[r],i=a.lastIndexOf("\x3c!--");n=(i>-1||n)&&-1===a.indexOf("--\x3e",i+1);var o=eQ.exec(a);t+=null===o?a+(n?cQ:XK):a.substr(0,o.index)+o[1]+o[2]+"$lit$"+o[3]+qK}return t+=this.strings[e]}},{key:"getTemplateElement",value:function(){var e=document.createElement("template"),t=this.getHTML();return void 0!==lQ&&(t=lQ.createHTML(t)),e.innerHTML=t,e}}]),e}(),hQ=function(e){return null===e||!("object"==typeof e||"function"==typeof e)},pQ=function(e){return Array.isArray(e)||!(!e||!e[Symbol.iterator])},fQ=function(){function e(t,n,r){M(this,e),this.dirty=!0,this.element=t,this.name=n,this.strings=r,this.parts=[];for(var a=0;a<r.length-1;a++)this.parts[a]=this._createPart()}return(0,I.Z)(e,[{key:"_createPart",value:function(){return new mQ(this)}},{key:"_getValue",value:function(){var e=this.strings,t=e.length-1,n=this.parts;if(1===t&&""===e[0]&&""===e[1]){var r=n[0].value;if("symbol"==typeof r)return String(r);if("string"==typeof r||!pQ(r))return r}for(var a="",i=0;i<t;i++){a+=e[i];var o=n[i];if(void 0!==o){var s=o.value;if(hQ(s)||!pQ(s))a+="string"==typeof s?s:String(s);else{var u,l=G(s);try{for(l.s();!(u=l.n()).done;){var c=u.value;a+="string"==typeof c?c:String(c)}}catch(sde){l.e(sde)}finally{l.f()}}}}return a+=e[t]}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}]),e}(),mQ=function(){function e(t){M(this,e),this.value=void 0,this.committer=t}return(0,I.Z)(e,[{key:"setValue",value:function(e){e===oQ||hQ(e)&&e===this.value||(this.value=e,iQ(e)||(this.committer.dirty=!0))}},{key:"commit",value:function(){for(;iQ(this.value);){var e=this.value;this.value=oQ,e(this)}this.value!==oQ&&this.committer.commit()}}]),e}(),vQ=function(){function e(t){M(this,e),this.value=void 0,this.__pendingValue=void 0,this.options=t}return(0,I.Z)(e,[{key:"appendInto",value:function(e){this.startNode=e.appendChild($K()),this.endNode=e.appendChild($K())}},{key:"insertAfterNode",value:function(e){this.startNode=e,this.endNode=e.nextSibling}},{key:"appendIntoPart",value:function(e){e.__insert(this.startNode=$K()),e.__insert(this.endNode=$K())}},{key:"insertAfterPart",value:function(e){e.__insert(this.startNode=$K()),this.endNode=e.endNode,e.endNode=this.startNode}},{key:"setValue",value:function(e){this.__pendingValue=e}},{key:"commit",value:function(){if(null!==this.startNode.parentNode){for(;iQ(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=oQ,e(this)}var t=this.__pendingValue;t!==oQ&&(hQ(t)?t!==this.value&&this.__commitText(t):t instanceof dQ?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):pQ(t)?this.__commitIterable(t):t===sQ?(this.value=sQ,this.clear()):this.__commitText(t))}}},{key:"__insert",value:function(e){this.endNode.parentNode.insertBefore(e,this.endNode)}},{key:"__commitNode",value:function(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}},{key:"__commitText",value:function(e){var t=this.startNode.nextSibling,n="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=n:this.__commitNode(document.createTextNode(n)),this.value=e}},{key:"__commitTemplateResult",value:function(e){var t=this.options.templateFactory(e);if(this.value instanceof uQ&&this.value.template===t)this.value.update(e.values);else{var n=new uQ(t,e.processor,this.options),r=n._clone();n.update(e.values),this.__commitNode(r),this.value=n}}},{key:"__commitIterable",value:function(t){Array.isArray(this.value)||(this.value=[],this.clear());var n,r,a=this.value,i=0,o=G(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;void 0===(n=a[i])&&(n=new e(this.options),a.push(n),0===i?n.appendIntoPart(this):n.insertAfterPart(a[i-1])),n.setValue(s),n.commit(),i++}}catch(sde){o.e(sde)}finally{o.f()}i<a.length&&(a.length=i,this.clear(n&&n.endNode))}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startNode;GK(this.startNode.parentNode,e.nextSibling,this.endNode)}}]),e}(),gQ=function(){function e(t,n,r){if(M(this,e),this.value=void 0,this.__pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=n,this.strings=r}return(0,I.Z)(e,[{key:"setValue",value:function(e){this.__pendingValue=e}},{key:"commit",value:function(){for(;iQ(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=oQ,e(this)}if(this.__pendingValue!==oQ){var t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=oQ}}}]),e}(),yQ=function(e){A(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this,e,r,a)).single=2===a.length&&""===a[0]&&""===a[1],i}return(0,I.Z)(n,[{key:"_createPart",value:function(){return new bQ(this)}},{key:"_getValue",value:function(){return this.single?this.parts[0].value:pl(R(n.prototype),"_getValue",this).call(this)}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}]),n}(fQ),bQ=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n)}(mQ),xQ=!1;!function(){try{var e={get capture(){return xQ=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(HK){}}();var wQ=function(){function e(t,n,r){var a=this;M(this,e),this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=n,this.eventContext=r,this.__boundHandleEvent=function(e){return a.handleEvent(e)}}return(0,I.Z)(e,[{key:"setValue",value:function(e){this.__pendingValue=e}},{key:"commit",value:function(){for(;iQ(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=oQ,e(this)}if(this.__pendingValue!==oQ){var t=this.__pendingValue,n=this.value,r=null==t||null!=n&&(t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive),a=null!=t&&(null==n||r);r&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),a&&(this.__options=kQ(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=oQ}}},{key:"handleEvent",value:function(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}]),e}(),kQ=function(e){return e&&(xQ?{capture:e.capture,passive:e.passive,once:e.once}:e.capture)};function SQ(e){var t=EQ.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},EQ.set(e.type,t));var n=t.stringsArray.get(e.strings);if(void 0!==n)return n;var r=e.strings.join(qK);return void 0===(n=t.keyString.get(r))&&(n=new KK(e,e.getTemplateElement()),t.keyString.set(r,n)),t.stringsArray.set(e.strings,n),n}var EQ=new Map,TQ=new WeakMap,CQ=function(e,t,n){var r=TQ.get(t);void 0===r&&(GK(t,t.firstChild),TQ.set(t,r=new vQ(Object.assign({templateFactory:SQ},n))),r.appendInto(t)),r.setValue(e),r.commit()},_Q=new(function(){function e(){M(this,e)}return(0,I.Z)(e,[{key:"handleAttributeExpressions",value:function(e,t,n,r){var a=t[0];return"."===a?new yQ(e,t.slice(1),n).parts:"@"===a?[new wQ(e,t.slice(1),r.eventContext)]:"?"===a?[new gQ(e,t.slice(1),n)]:new fQ(e,t,n).parts}},{key:"handleTextExpression",value:function(e){return new vQ(e)}}]),e}());"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");var MQ=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new dQ(e,n,"html",_Q)},IQ=function(e,t){return"".concat(e,"--").concat(t)},NQ=!0;void 0===window.ShadyCSS?NQ=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),NQ=!1);var AQ=function(e){return function(t){var n=IQ(t.type,e),r=EQ.get(n);void 0===r&&(r={stringsArray:new WeakMap,keyString:new Map},EQ.set(n,r));var a=r.stringsArray.get(t.strings);if(void 0!==a)return a;var i=t.strings.join(qK);if(void 0===(a=r.keyString.get(i))){var o=t.getTemplateElement();NQ&&window.ShadyCSS.prepareTemplateDom(o,e),a=new KK(t,o),r.keyString.set(i,a)}return r.stringsArray.set(t.strings,a),a}},RQ=["html","svg"],OQ=new Set;window.JSCompiler_renameProperty=function(e,t){return e};var DQ={toAttribute:function(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute:function(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},LQ=function(e,t){return t!==e&&(t==t||e==e)},PQ={attribute:!0,type:String,converter:DQ,reflect:!1,hasChanged:LQ},FQ=function(e){A(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).initialize(),e}return(0,I.Z)(n,[{key:"initialize",value:function(){var e=this;this._updateState=0,this._updatePromise=new Promise((function(t){return e._enableUpdatingResolver=t})),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}},{key:"_saveInstanceProperties",value:function(){var e=this;this.constructor._classProperties.forEach((function(t,n){if(e.hasOwnProperty(n)){var r=e[n];delete e[n],e._instanceProperties||(e._instanceProperties=new Map),e._instanceProperties.set(n,r)}}))}},{key:"_applyInstanceProperties",value:function(){var e=this;this._instanceProperties.forEach((function(t,n){return e[n]=t})),this._instanceProperties=void 0}},{key:"connectedCallback",value:function(){this.enableUpdating()}},{key:"enableUpdating",value:function(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){t!==n&&this._attributeToProperty(e,n)}},{key:"_propertyToAttribute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:PQ,r=this.constructor,a=r._attributeNameForProperty(e,n);if(void 0!==a){var i=r._propertyValueToAttribute(t,n);if(void 0===i)return;this._updateState=8|this._updateState,null==i?this.removeAttribute(a):this.setAttribute(a,i),this._updateState=-9&this._updateState}}},{key:"_attributeToProperty",value:function(e,t){if(!(8&this._updateState)){var n=this.constructor,r=n._attributeToPropertyMap.get(e);if(void 0!==r){var a=n.getPropertyOptions(r);this._updateState=16|this._updateState,this[r]=n._propertyValueFromAttribute(t,a),this._updateState=-17&this._updateState}}}},{key:"requestUpdateInternal",value:function(e,t,n){var r=!0;if(void 0!==e){var a=this.constructor;n=n||a.getPropertyOptions(e),a._valueHasChanged(this[e],t,n.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==n.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,n))):r=!1}!this._hasRequestedUpdate&&r&&(this._updatePromise=this._enqueueUpdate())}},{key:"requestUpdate",value:function(e,t){return this.requestUpdateInternal(e,t),this.updateComplete}},{key:"_enqueueUpdate",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._updateState=4|this._updateState,e.prev=1,e.next=4,this._updatePromise;case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:if(t=this.performUpdate(),e.t1=null!=t,!e.t1){e.next=13;break}return e.next=13,t;case 13:return e.abrupt("return",!this._hasRequestedUpdate);case 14:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"_hasRequestedUpdate",get:function(){return 4&this._updateState}},{key:"hasUpdated",get:function(){return 1&this._updateState}},{key:"performUpdate",value:function(){if(this._hasRequestedUpdate){this._instanceProperties&&this._applyInstanceProperties();var e=!1,t=this._changedProperties;try{(e=this.shouldUpdate(t))?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}}},{key:"_markUpdated",value:function(){this._changedProperties=new Map,this._updateState=-5&this._updateState}},{key:"updateComplete",get:function(){return this._getUpdateComplete()}},{key:"_getUpdateComplete",value:function(){return this.getUpdateComplete()}},{key:"getUpdateComplete",value:function(){return this._updatePromise}},{key:"shouldUpdate",value:function(e){return!0}},{key:"update",value:function(e){var t=this;void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((function(e,n){return t._propertyToAttribute(n,t[n],e)})),this._reflectingProperties=void 0),this._markUpdated()}},{key:"updated",value:function(e){}},{key:"firstUpdated",value:function(e){}}],[{key:"observedAttributes",get:function(){var e=this;this.finalize();var t=[];return this._classProperties.forEach((function(n,r){var a=e._attributeNameForProperty(r,n);void 0!==a&&(e._attributeToPropertyMap.set(a,r),t.push(a))})),t}},{key:"_ensureClassProperties",value:function(){var e=this;if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;var t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((function(t,n){return e._classProperties.set(n,t)}))}}},{key:"createProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:PQ;if(this._ensureClassProperties(),this._classProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){var n="symbol"==typeof e?Symbol():"__".concat(e),r=this.getPropertyDescriptor(e,n,t);void 0!==r&&Object.defineProperty(this.prototype,e,r)}}},{key:"getPropertyDescriptor",value:function(e,t,n){return{get:function(){return this[t]},set:function(r){var a=this[e];this[t]=r,this.requestUpdateInternal(e,a,n)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function(e){return this._classProperties&&this._classProperties.get(e)||PQ}},{key:"finalize",value:function(){var e=Object.getPrototypeOf(this);if(e.hasOwnProperty("finalized")||e.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){var t,n=this.properties,r=G([].concat((0,_.Z)(Object.getOwnPropertyNames(n)),(0,_.Z)("function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n):[])));try{for(r.s();!(t=r.n()).done;){var a=t.value;this.createProperty(a,n[a])}}catch(sde){r.e(sde)}finally{r.f()}}}},{key:"_attributeNameForProperty",value:function(e,t){var n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}},{key:"_valueHasChanged",value:function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:LQ)(e,t)}},{key:"_propertyValueFromAttribute",value:function(e,t){var n=t.type,r=t.converter||DQ,a="function"==typeof r?r:r.fromAttribute;return a?a(e,n):e}},{key:"_propertyValueToAttribute",value:function(e,t){if(void 0!==t.reflect){var n=t.type,r=t.converter;return(r&&r.toAttribute||DQ.toAttribute)(e,n)}}}]),n}(z(HTMLElement));FQ.finalized=!0;function jQ(e){return function(t,n){return void 0!==n?function(e,t,n){t.constructor.createProperty(n,e)}(e,t,n):function(e,t){return"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher:function(n){n.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer:function(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher:function(n){n.createProperty(t.key,e)}}}(e,t)}}var zQ=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,BQ=Symbol(),UQ=function(){function e(t,n){if(M(this,e),n!==BQ)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}return(0,I.Z)(e,[{key:"styleSheet",get:function(){return void 0===this._styleSheet&&(zQ?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}},{key:"toString",value:function(){return this.cssText}}]),e}();(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");var WQ={},VQ=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"initialize",value:function(){pl(R(n.prototype),"initialize",this).call(this),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}},{key:"createRenderRoot",value:function(){return this.attachShadow(this.constructor.shadowRootOptions)}},{key:"adoptStyles",value:function(){var e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?zQ?this.renderRoot.adoptedStyleSheets=e.map((function(e){return e instanceof CSSStyleSheet?e:e.styleSheet})):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map((function(e){return e.cssText})),this.localName))}},{key:"connectedCallback",value:function(){pl(R(n.prototype),"connectedCallback",this).call(this),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}},{key:"update",value:function(e){var t=this,r=this.render();pl(R(n.prototype),"update",this).call(this,e),r!==WQ&&this.constructor.render(r,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((function(e){var n=document.createElement("style");n.textContent=e.cssText,t.renderRoot.appendChild(n)})))}},{key:"render",value:function(){return WQ}}],[{key:"getStyles",value:function(){return this.styles}},{key:"_getUniqueStyles",value:function(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_styles",this))){var e=this.getStyles();if(Array.isArray(e)){var t=function e(t,n){return t.reduceRight((function(t,n){return Array.isArray(n)?e(n,t):(t.add(n),t)}),n)}(e,new Set),n=[];t.forEach((function(e){return n.unshift(e)})),this._styles=n}else this._styles=void 0===e?[]:[e];this._styles=this._styles.map((function(e){if(e instanceof CSSStyleSheet&&!zQ){var t=Array.prototype.slice.call(e.cssRules).reduce((function(e,t){return e+t.cssText}),"");return new UQ(String(t),BQ)}return e}))}}}]),n}(FQ);VQ.finalized=!0,VQ.render=function(e,t,n){if(!n||"object"!=typeof n||!n.scopeName)throw new Error("The `scopeName` option is required.");var r=n.scopeName,a=TQ.has(t),i=NQ&&11===t.nodeType&&!!t.host,o=i&&!OQ.has(r),s=o?document.createDocumentFragment():t;if(CQ(e,s,Object.assign({templateFactory:AQ(r)},n)),o){var u=TQ.get(s);TQ.delete(s),function(e,t,n){OQ.add(e);var r=n?n.element:document.createElement("template"),a=t.querySelectorAll("style"),i=a.length;if(0!==i){for(var o=document.createElement("style"),s=0;s<i;s++){var u=a[s];u.parentNode.removeChild(u),o.textContent+=u.textContent}!function(e){RQ.forEach((function(t){var n=EQ.get(IQ(t,e));void 0!==n&&n.keyString.forEach((function(e){var t=e.element.content,n=new Set;Array.from(t.querySelectorAll("style")).forEach((function(e){n.add(e)})),tQ(e,n)}))}))}(e);var l=r.content;n?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.element.content,a=e.parts;if(null!=n)for(var i=document.createTreeWalker(r,133,null,!1),o=rQ(a),s=0,u=-1;i.nextNode();)for(u++,i.currentNode===n&&(s=nQ(t),n.parentNode.insertBefore(t,n));-1!==o&&a[o].index===u;){if(s>0){for(;-1!==o;)a[o].index+=s,o=rQ(a,o);return}o=rQ(a,o)}else r.appendChild(t)}(n,o,l.firstChild):l.insertBefore(o,l.firstChild),window.ShadyCSS.prepareTemplateStyles(r,e);var c=l.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==c)t.insertBefore(c.cloneNode(!0),t.firstChild);else if(n){l.insertBefore(o,l.firstChild);var d=new Set;d.add(o),tQ(n,d)}}else window.ShadyCSS.prepareTemplateStyles(r,e)}(r,s,u.value instanceof uQ?u.value.template:void 0),GK(t,t.firstChild),t.appendChild(s),TQ.set(t,u)}!a&&i&&window.ShadyCSS.styleElement(t.host)},VQ.shadowRootOptions={mode:"open"};var ZQ=null!=navigator.xr&&null!=self.XRSession&&null!=navigator.xr.isSessionSupported,HQ=ZQ&&self.XRSession.prototype.requestHitTestSource,GQ=null!=self.ResizeObserver,qQ=null!=self.IntersectionObserver,XQ=HQ;(function(){var e=navigator.userAgent||navigator.vendor||self.opera;/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))})(),/\bCrOS\b/.test(navigator.userAgent);var YQ=/android/i.test(navigator.userAgent),KQ=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,QQ=function(){var e=document.createElement("a");return Boolean(e.relList&&e.relList.supports&&e.relList.supports("ar"))}();/Safari\//.test(navigator.userAgent);var JQ=/firefox/i.test(navigator.userAgent),$Q=/OculusBrowser/.test(navigator.userAgent);KQ&&/CriOS\//.test(navigator.userAgent);for(var eJ=YQ&&!JQ&&!$Q,tJ=MQ(NK||(NK=ZK(['\n<style>\n:host {\n  display: block;\n  position: relative;\n  contain: strict;\n  width: 300px;\n  height: 150px;\n}\n\n/* NOTE: This ruleset is our integration surface area with the\n * :focus-visible polyfill.\n *\n * @see https://github.com/WICG/focus-visible/pull/196 */\n:host([data-js-focus-visible]:focus:not(.focus-visible)),\n:host([data-js-focus-visible]) :focus:not(.focus-visible) {\n  outline: none;\n}\n\n.container {\n  position: relative;\n}\n\n.userInput {\n  width: 100%;\n  height: 100%;\n  display: block;\n  position: relative;\n  overflow: hidden;\n}\n\ncanvas {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  /* NOTE(cdata): Chrome 76 and below apparently have a bug\n   * that causes our canvas not to display pixels unless it is\n   * on its own render layer\n   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893\n   */\n  transform: translateZ(0);\n}\n\ncanvas.show {\n  display: block;\n}\n\n/* Adapted from HTML5 Boilerplate\n *\n * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */\n.screen-reader-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n}\n\n.slot {\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.slot > * {\n  pointer-events: initial;\n}\n\n.annotation-wrapper ::slotted(*) {\n  opacity: var(--max-hotspot-opacity, 1);\n  transition: opacity 0.3s;\n}\n\n.pointer-tumbling .annotation-wrapper ::slotted(*) {\n  pointer-events: none;\n}\n\n.annotation-wrapper ::slotted(*) {\n  pointer-events: initial;\n}\n\n.annotation-wrapper.hide ::slotted(*) {\n  opacity: var(--min-hotspot-opacity, 0.25);\n}\n\n.slot.poster {\n  opacity: 0;\n  transition: opacity 0.3s 0.3s;\n  background-color: inherit;\n}\n\n.slot.poster.show {\n  opacity: 1;\n  transition: none;\n}\n\n.slot.poster.quick {\n  transition: none;\n}\n\n.slot.poster > * {\n  pointer-events: initial;\n}\n\n.slot.poster:not(.show) > * {\n  pointer-events: none;\n}\n\n#default-poster {\n  width: 100%;\n  height: 100%;\n  /* The default poster is a <button> so we need to set display\n   * to prevent it from being affected by text-align: */\n  display: block;\n  position: absolute;\n  border: none;\n  padding: 0;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: var(--poster-color, #fff);\n  background-image: var(--poster-image, none);\n}\n\n#default-progress-bar {\n  display: block;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  overflow: hidden;\n}\n\n#default-progress-bar > .mask {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: var(--progress-mask, #fff);\n  transition: opacity 0.3s;\n  opacity: 0.2;\n}\n\n#default-progress-bar > .bar {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: var(--progress-bar-height, 5px);\n  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));\n  transition: transform 0.09s;\n  transform-origin: top left;\n  transform: scaleX(0);\n  overflow: hidden;\n}\n\n#default-progress-bar > .bar.hide {\n  transition: opacity 0.3s 1s;\n  opacity: 0;\n}\n\n.slot.interaction-prompt {\n  display: var(--interaction-prompt-display, flex);\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  align-items: center;\n  justify-content: center;\n\n  opacity: 0;\n  will-change: opacity;\n  overflow: hidden;\n  transition: opacity 0.3s;\n}\n\n.slot.interaction-prompt.visible {\n  opacity: 1;\n}\n\n.slot.interaction-prompt > .animated-container {\n  will-change: transform, opacity;\n}\n\n.slot.interaction-prompt > * {\n  pointer-events: none;\n}\n\n.slot.ar-button {\n  -moz-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  user-select: none;\n\n  display: var(--ar-button-display, block);\n}\n\n.slot.ar-button:not(.enabled) {\n  display: none;\n}\n\n.fab {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  background-color: #fff;\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);\n  border-radius: 100px;\n}\n\n.fab > * {\n  opacity: 0.87;\n}\n\n#default-ar-button {\n  position: absolute;\n  bottom: 16px;\n  right: 16px;\n  transform: scale(var(--ar-button-scale, 1));\n  transform-origin: bottom right;\n}\n\n.slot.default {\n  pointer-events: none;\n}\n\n.slot.progress-bar {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button:not(.enabled) {\n  display: none;\n}\n\n#default-exit-webxr-ar-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  width: 40px;\n  height: 40px;\n  box-sizing: border-box;\n}\n\n#default-exit-webxr-ar-button > svg {\n  fill: #fff;\n}\n</style>\n<div class="container">\n  <div class="userInput" tabindex="0" role="img"\n      aria-label="A depiction of a 3D model"\n      aria-live="polite">\n      <div class="slot canvas">\n        <slot name="canvas">\n          <canvas></canvas>\n        </slot>\n      </div>\n  </div>\n\n  \x3c!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM\n        will have their <slot> elements removed by ShadyCSS --\x3e\n  <div class="slot poster">\n    <slot name="poster">\n      <button type="button" id="default-poster" aria-hidden="true" aria-label="Activate to view in 3D!"></button>\n    </slot>\n  </div>\n\n  <div class="slot ar-button">\n    <slot name="ar-button">\n      <a id="default-ar-button" part="default-ar-button" class="fab"\n          tabindex="2"\n          aria-label="View this 3D model up close">\n        ','\n      </a>\n    </slot>\n  </div>\n\n  <div class="slot interaction-prompt">\n    <div class="animated-container">\n      <slot name="interaction-prompt" aria-hidden="true">\n        ','\n      </slot>\n    </div>\n  </div>\n\n  <div class="slot default">\n    <slot></slot>\n\n    <div class="slot progress-bar">\n      <slot name="progress-bar">\n        <div id="default-progress-bar" aria-hidden="true">\n          <div class="mask" part="default-progress-mask"></div>\n          <div class="bar" part="default-progress-bar"></div>\n        </div>\n      </slot>\n    </div>\n    \n    <div class="slot exit-webxr-ar-button">\n      <slot name="exit-webxr-ar-button">\n        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"\n            tabindex="3"\n            aria-label="Exit AR"\n            aria-hidden="true">\n          ',"\n        </a>\n      </slot>\n    </div>\n  </div>\n</div>"])),MQ(AK||(AK=ZK(['\n<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"\n\t xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"\n\t viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">\n<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>\n<g id="Art_layer">\n\t<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>\n\t<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>\n\t<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>\n\t<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>\n\t<g>\n\t\t<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3\n\t\t\tl5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62\n\t\t\tl4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>\n\t</g>\n</g>\n</svg>']))),MQ(RK||(RK=ZK(['\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">\n    <defs>\n        <path id="A" d="M.001.232h24.997V36H.001z" />\n    </defs>\n    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">\n        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />\n        <g transform="translate(11 3)">\n            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />\n            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />\n            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />\n            <g transform="translate(0 .769)">\n                <mask id="B" fill="#fff">\n                    <use xlink:href="#A" />\n                </mask>\n                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />\n            </g>\n        </g>\n    </g>\n</svg>']))),MQ(OK||(OK=ZK(['\n<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">\n    \x3c!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement\n         support for dynamic re-coloring of UI components --\x3e\n    <defs>\n      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">\n        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>\n        <feOffset dx="0" dy="0" result="offsetblur"/>\n        <feFlood flood-color="#000000"/>\n        <feComposite in2="offsetblur" operator="in"/>\n        <feMerge>\n          <feMergeNode/>\n          <feMergeNode in="SourceGraphic"/>\n        </feMerge>\n      </filter>\n    </defs>\n    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'])))),nJ=function(){function e(){M(this,e)}return(0,I.Z)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,a=n.length;r<a;r++)n[r].call(this,e);e.target=null}}}}]),e}(),rJ=1234567,aJ=Math.PI/180,iJ=180/Math.PI,oJ=[],sJ=0;sJ<256;sJ++)oJ[sJ]=(sJ<16?"0":"")+sJ.toString(16);var uJ="undefined"!=typeof crypto&&"randomUUID"in crypto;function lJ(){if(uJ)return crypto.randomUUID().toUpperCase();var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(oJ[255&e]+oJ[e>>8&255]+oJ[e>>16&255]+oJ[e>>24&255]+"-"+oJ[255&t]+oJ[t>>8&255]+"-"+oJ[t>>16&15|64]+oJ[t>>24&255]+"-"+oJ[63&n|128]+oJ[n>>8&255]+"-"+oJ[n>>16&255]+oJ[n>>24&255]+oJ[255&r]+oJ[r>>8&255]+oJ[r>>16&255]+oJ[r>>24&255]).toUpperCase()}function cJ(e,t,n){return Math.max(t,Math.min(n,e))}function dJ(e,t){return(e%t+t)%t}function hJ(e,t,n){return(1-n)*e+n*t}function pJ(e){return 0==(e&e-1)&&0!==e}function fJ(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function mJ(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var vJ=Object.freeze({__proto__:null,DEG2RAD:aJ,RAD2DEG:iJ,generateUUID:lJ,clamp:cJ,euclideanModulo:dJ,mapLinear:function(e,t,n,r,a){return r+(e-t)*(a-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:hJ,damp:function(e,t,n,r){return hJ(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(dJ(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(rJ=e%2147483647),((rJ=16807*rJ%2147483647)-1)/2147483646},degToRad:function(e){return e*aJ},radToDeg:function(e){return e*iJ},isPowerOfTwo:pJ,ceilPowerOfTwo:fJ,floorPowerOfTwo:mJ,setQuaternionFromProperEuler:function(e,t,n,r,a){var i=Math.cos,o=Math.sin,s=i(n/2),u=o(n/2),l=i((t+r)/2),c=o((t+r)/2),d=i((t-r)/2),h=o((t-r)/2),p=i((r-t)/2),f=o((r-t)/2);switch(a){case"XYX":e.set(s*c,u*d,u*h,s*l);break;case"YZY":e.set(u*h,s*c,u*d,s*l);break;case"ZXZ":e.set(u*d,u*h,s*c,s*l);break;case"XZX":e.set(s*c,u*f,u*p,s*l);break;case"YXY":e.set(u*p,s*c,u*f,s*l);break;case"ZYZ":e.set(u*f,u*p,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}}),gJ=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;M(this,t),this.x=e,this.y=n}return(0,I.Z)(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),a=this.x-e.x,i=this.y-e.y;return this.x=a*n-i*r+e.x,this.y=a*r+i*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:e,value:Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);gJ.prototype.isVector2=!0;var yJ,bJ=function(){function e(){M(this,e),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return(0,I.Z)(e,[{key:"set",value:function(e,t,n,r,a,i,o,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=a,l[5]=s,l[6]=n,l[7]=i,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,a=this.elements,i=n[0],o=n[3],s=n[6],u=n[1],l=n[4],c=n[7],d=n[2],h=n[5],p=n[8],f=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],x=r[2],w=r[5],k=r[8];return a[0]=i*f+o*g+s*x,a[3]=i*m+o*y+s*w,a[6]=i*v+o*b+s*k,a[1]=u*f+l*g+c*x,a[4]=u*m+l*y+c*w,a[7]=u*v+l*b+c*k,a[2]=d*f+h*g+p*x,a[5]=d*m+h*y+p*w,a[8]=d*v+h*b+p*k,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*i*l-t*o*u-n*a*l+n*o*s+r*a*u-r*i*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=l*i-o*u,d=o*s-l*a,h=u*a-i*s,p=t*c+n*d+r*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);var f=1/p;return e[0]=c*f,e[1]=(r*u-l*n)*f,e[2]=(o*n-r*i)*f,e[3]=d*f,e[4]=(l*t-r*s)*f,e[5]=(r*a-o*t)*f,e[6]=h*f,e[7]=(n*s-u*t)*f,e[8]=(i*t-n*a)*f,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,a,i,o){var s=Math.cos(a),u=Math.sin(a);return this.set(n*s,n*u,-n*(s*i+u*o)+i+e,-r*u,r*s,-r*(-u*i+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,a=r[0],i=r[3],o=r[6],s=r[1],u=r[4],l=r[7];return r[0]=t*a+n*s,r[3]=t*i+n*u,r[6]=t*o+n*l,r[1]=-n*a+t*s,r[4]=-n*i+t*u,r[7]=-n*o+t*l,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function xJ(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function wJ(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}bJ.prototype.isMatrix3=!0;var kJ=function(){function e(){M(this,e)}return(0,I.Z)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===yJ&&(yJ=wJ("canvas")),yJ.width=e.width,yJ.height=e.height;var n=yJ.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=yJ}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}]),e}(),SJ=0,EJ=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1001,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1001,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1006,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1008,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1023,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1009,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:3e3;return M(this,n),e=t.call(this),Object.defineProperty((0,L.Z)(e),"id",{value:SJ++}),e.uuid=lJ(),e.name="",e.image=r,e.mipmaps=[],e.mapping=a,e.wrapS=i,e.wrapT=o,e.magFilter=s,e.minFilter=u,e.anisotropy=d,e.format=l,e.internalFormat=null,e.type=c,e.offset=new gJ(0,0),e.repeat=new gJ(1,1),e.center=new gJ(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new bJ,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=h,e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e}return(0,I.Z)(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=lJ()),!t&&void 0===e.images[r.uuid]){var a;if(Array.isArray(r)){a=[];for(var i=0,o=r.length;i<o;i++)r[i].isDataTexture?a.push(TJ(r[i].image)):a.push(TJ(r[i]))}else a=TJ(r);e.images[r.uuid]={uuid:r.uuid,url:a}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(nJ);function TJ(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?kJ.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}EJ.DEFAULT_IMAGE=void 0,EJ.DEFAULT_MAPPING=300,EJ.prototype.isTexture=!0;var CJ=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;M(this,t),this.x=e,this.y=n,this.z=r,this.w=a}return(0,I.Z)(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,a=this.w,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12]*a,this.y=i[1]*t+i[5]*n+i[9]*r+i[13]*a,this.z=i[2]*t+i[6]*n+i[10]*r+i[14]*a,this.w=i[3]*t+i[7]*n+i[11]*r+i[15]*a,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,a,i=.01,o=.1,s=e.elements,u=s[0],l=s[4],c=s[8],d=s[1],h=s[5],p=s[9],f=s[2],m=s[6],v=s[10];if(Math.abs(l-d)<i&&Math.abs(c-f)<i&&Math.abs(p-m)<i){if(Math.abs(l+d)<o&&Math.abs(c+f)<o&&Math.abs(p+m)<o&&Math.abs(u+h+v-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(u+1)/2,y=(h+1)/2,b=(v+1)/2,x=(l+d)/4,w=(c+f)/4,k=(p+m)/4;return g>y&&g>b?g<i?(n=0,r=.707106781,a=.707106781):(r=x/(n=Math.sqrt(g)),a=w/n):y>b?y<i?(n=.707106781,r=0,a=.707106781):(n=x/(r=Math.sqrt(y)),a=k/r):b<i?(n=.707106781,r=.707106781,a=0):(n=w/(a=Math.sqrt(b)),r=k/a),this.set(n,r,a,t),this}var S=Math.sqrt((m-p)*(m-p)+(c-f)*(c-f)+(d-l)*(d-l));return Math.abs(S)<.001&&(S=1),this.x=(m-p)/S,this.y=(c-f)/S,this.z=(d-l)/S,this.w=Math.acos((u+h+v-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:e,value:Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);CJ.prototype.isVector4=!0;var _J=function(e){A(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return M(this,n),(a=t.call(this)).width=e,a.height=r,a.depth=1,a.scissor=new CJ(0,0,e,r),a.scissorTest=!1,a.viewport=new CJ(0,0,e,r),a.texture=new EJ(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),a.texture.isRenderTargetTexture=!0,a.texture.image={width:e,height:r,depth:1},a.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,a.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,a.texture.minFilter=void 0!==i.minFilter?i.minFilter:1006,a.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,a.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,a.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,a}return(0,I.Z)(n,[{key:"setTexture",value:function(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}},{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=br({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(nJ);_J.prototype.isWebGLRenderTarget=!0,function(e){A(n,e);var t=F(n);function n(e,r,a){var i;M(this,n);var o=(i=t.call(this,e,r)).texture;i.texture=[];for(var s=0;s<a;s++)i.texture[s]=o.clone();return i}return(0,I.Z)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,a=this.texture.length;r<a;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}]),n}(_J).prototype.isWebGLMultipleRenderTargets=!0;var MJ=function(e){A(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this,e,r,a)).samples=4,i}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.samples=e.samples,this}}]),n}(_J);MJ.prototype.isWebGLMultisampleRenderTarget=!0;var IJ=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;M(this,e),this._x=t,this._y=n,this._z=r,this._w=a}return(0,I.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,a=e._z,i=e._order,o=Math.cos,s=Math.sin,u=o(n/2),l=o(r/2),c=o(a/2),d=s(n/2),h=s(r/2),p=s(a/2);switch(i){case"XYZ":this._x=d*l*c+u*h*p,this._y=u*h*c-d*l*p,this._z=u*l*p+d*h*c,this._w=u*l*c-d*h*p;break;case"YXZ":this._x=d*l*c+u*h*p,this._y=u*h*c-d*l*p,this._z=u*l*p-d*h*c,this._w=u*l*c+d*h*p;break;case"ZXY":this._x=d*l*c-u*h*p,this._y=u*h*c+d*l*p,this._z=u*l*p+d*h*c,this._w=u*l*c-d*h*p;break;case"ZYX":this._x=d*l*c-u*h*p,this._y=u*h*c+d*l*p,this._z=u*l*p-d*h*c,this._w=u*l*c+d*h*p;break;case"YZX":this._x=d*l*c+u*h*p,this._y=u*h*c+d*l*p,this._z=u*l*p-d*h*c,this._w=u*l*c-d*h*p;break;case"XZY":this._x=d*l*c-u*h*p,this._y=u*h*c-d*l*p,this._z=u*l*p+d*h*c,this._w=u*l*c+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+i)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],a=t[8],i=t[1],o=t[5],s=t[9],u=t[2],l=t[6],c=t[10],d=n+o+c;if(d>0){var h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(l-s)*h,this._y=(a-u)*h,this._z=(i-r)*h}else if(n>o&&n>c){var p=2*Math.sqrt(1+n-o-c);this._w=(l-s)/p,this._x=.25*p,this._y=(r+i)/p,this._z=(a+u)/p}else if(o>c){var f=2*Math.sqrt(1+o-n-c);this._w=(a-u)/f,this._x=(r+i)/f,this._y=.25*f,this._z=(s+l)/f}else{var m=2*Math.sqrt(1+c-n-o);this._w=(i-r)/m,this._x=(a+u)/m,this._y=(s+l)/m,this._z=.25*m}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(cJ(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,a=e._z,i=e._w,o=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+i*o+r*u-a*s,this._y=r*l+i*s+a*o-n*u,this._z=a*l+i*u+n*s-r*o,this._w=i*l-n*o-r*s-a*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,a=this._z,i=this._w,o=i*e._w+n*e._x+r*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=i,this._x=n,this._y=r,this._z=a,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*i+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*a+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,o),d=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=i*d+this._w*h,this._x=n*d+this._x*h,this._y=r*d+this._y*h,this._z=a*d+this._z*h,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(a),n*Math.cos(a),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}},{key:"slerpFlat",value:function(e,t,n,r,a,i,o){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],d=a[i+0],h=a[i+1],p=a[i+2],f=a[i+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===o)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=f);if(c!==f||s!==d||u!==h||l!==p){var m=1-o,v=s*d+u*h+l*p+c*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,v*g);m=Math.sin(m*x)/b,o=Math.sin(o*x)/b}var w=o*g;if(s=s*m+d*w,u=u*m+h*w,l=l*m+p*w,c=c*m+f*w,m===1-o){var k=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=k,u*=k,l*=k,c*=k}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,a,i){var o=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=a[i],d=a[i+1],h=a[i+2],p=a[i+3];return e[t]=o*p+l*c+s*h-u*d,e[t+1]=s*p+l*d+u*c-o*h,e[t+2]=u*p+l*h+o*d-s*c,e[t+3]=l*p-o*c-s*d-u*h,e}}]),e}();IJ.prototype.isQuaternion=!0;var NJ=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;M(this,t),this.x=e,this.y=n,this.z=r}return(0,I.Z)(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(RJ.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(RJ.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*r,this.y=a[1]*t+a[4]*n+a[7]*r,this.z=a[2]*t+a[5]*n+a[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements,i=1/(a[3]*t+a[7]*n+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*r+a[12])*i,this.y=(a[1]*t+a[5]*n+a[9]*r+a[13])*i,this.z=(a[2]*t+a[6]*n+a[10]*r+a[14])*i,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.x,i=e.y,o=e.z,s=e.w,u=s*t+i*r-o*n,l=s*n+o*t-a*r,c=s*r+a*n-i*t,d=-a*t-i*n-o*r;return this.x=u*s+d*-a+l*-o-c*-i,this.y=l*s+d*-i+c*-a-u*-o,this.z=c*s+d*-o+u*-i-l*-a,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r,this.y=a[1]*t+a[5]*n+a[9]*r,this.z=a[2]*t+a[6]*n+a[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,a=e.z,i=t.x,o=t.y,s=t.z;return this.x=r*s-a*o,this.y=a*i-n*s,this.z=n*o-r*i,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return AJ.copy(this).projectOnVector(e),this.sub(AJ)}},{key:"reflect",value:function(e){return this.sub(AJ.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(cJ(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:e,value:Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);NJ.prototype.isVector3=!0;var AJ=new NJ,RJ=new IJ,OJ=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new NJ(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NJ(-1/0,-1/0,-1/0);M(this,e),this.min=t,this.max=n}return(0,I.Z)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,a=-1/0,i=-1/0,o=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],d=e[s+2];l<t&&(t=l),c<n&&(n=c),d<r&&(r=d),l>a&&(a=l),c>i&&(i=c),d>o&&(o=d)}return this.min.set(t,n,r),this.max.set(a,i,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,a=-1/0,i=-1/0,o=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),d=e.getZ(s);l<t&&(t=l),c<n&&(n=c),d<r&&(r=d),l>a&&(a=l),c>i&&(i=c),d>o&&(o=d)}return this.min.set(t,n,r),this.max.set(a,i,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=LJ.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),PJ.copy(t.boundingBox),PJ.applyMatrix4(e.matrixWorld),this.union(PJ));for(var n=e.children,r=0,a=n.length;r<a;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,LJ),LJ.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(VJ),ZJ.subVectors(this.max,VJ),FJ.subVectors(e.a,VJ),jJ.subVectors(e.b,VJ),zJ.subVectors(e.c,VJ),BJ.subVectors(jJ,FJ),UJ.subVectors(zJ,jJ),WJ.subVectors(FJ,zJ);var t=[0,-BJ.z,BJ.y,0,-UJ.z,UJ.y,0,-WJ.z,WJ.y,BJ.z,0,-BJ.x,UJ.z,0,-UJ.x,WJ.z,0,-WJ.x,-BJ.y,BJ.x,0,-UJ.y,UJ.x,0,-WJ.y,WJ.x,0];return!!qJ(t,FJ,jJ,zJ,ZJ)&&(!!qJ(t=[1,0,0,0,1,0,0,0,1],FJ,jJ,zJ,ZJ)&&(HJ.crossVectors(BJ,UJ),qJ(t=[HJ.x,HJ.y,HJ.z],FJ,jJ,zJ,ZJ)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return LJ.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(LJ).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(DJ[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),DJ[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),DJ[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),DJ[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),DJ[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),DJ[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),DJ[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),DJ[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(DJ)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();OJ.prototype.isBox3=!0;var DJ=[new NJ,new NJ,new NJ,new NJ,new NJ,new NJ,new NJ,new NJ],LJ=new NJ,PJ=new OJ,FJ=new NJ,jJ=new NJ,zJ=new NJ,BJ=new NJ,UJ=new NJ,WJ=new NJ,VJ=new NJ,ZJ=new NJ,HJ=new NJ,GJ=new NJ;function qJ(e,t,n,r,a){for(var i=0,o=e.length-3;i<=o;i+=3){GJ.fromArray(e,i);var s=a.x*Math.abs(GJ.x)+a.y*Math.abs(GJ.y)+a.z*Math.abs(GJ.z),u=t.dot(GJ),l=n.dot(GJ),c=r.dot(GJ);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var XJ=new OJ,YJ=new NJ,KJ=new NJ,QJ=new NJ,JJ=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new NJ,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;M(this,e),this.center=t,this.radius=n}return(0,I.Z)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):XJ.setFromPoints(e).getCenter(n);for(var r=0,a=0,i=e.length;a<i;a++)r=Math.max(r,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){QJ.subVectors(e,this.center);var t=QJ.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(QJ.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(e){return KJ.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(YJ.copy(e.center).add(KJ)),this.expandByPoint(YJ.copy(e.center).sub(KJ)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),$J=new NJ,e$=new NJ,t$=new NJ,n$=new NJ,r$=new NJ,a$=new NJ,i$=new NJ,o$=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new NJ,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NJ(0,0,-1);M(this,e),this.origin=t,this.direction=n}return(0,I.Z)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,$J)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=$J.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($J.copy(this.direction).multiplyScalar(t).add(this.origin),$J.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){e$.copy(e).add(t).multiplyScalar(.5),t$.copy(t).sub(e).normalize(),n$.copy(this.origin).sub(e$);var a,i,o,s,u=.5*e.distanceTo(t),l=-this.direction.dot(t$),c=n$.dot(this.direction),d=-n$.dot(t$),h=n$.lengthSq(),p=Math.abs(1-l*l);if(p>0)if(i=l*c-d,s=u*p,(a=l*d-c)>=0)if(i>=-s)if(i<=s){var f=1/p;o=(a*=f)*(a+l*(i*=f)+2*c)+i*(l*a+i+2*d)+h}else i=u,o=-(a=Math.max(0,-(l*i+c)))*a+i*(i+2*d)+h;else i=-u,o=-(a=Math.max(0,-(l*i+c)))*a+i*(i+2*d)+h;else i<=-s?o=-(a=Math.max(0,-(-l*u+c)))*a+(i=a>0?-u:Math.min(Math.max(-u,-d),u))*(i+2*d)+h:i<=s?(a=0,o=(i=Math.min(Math.max(-u,-d),u))*(i+2*d)+h):o=-(a=Math.max(0,-(l*u+c)))*a+(i=a>0?u:Math.min(Math.max(-u,-d),u))*(i+2*d)+h;else i=l>0?-u:u,o=-(a=Math.max(0,-(l*i+c)))*a+i*(i+2*d)+h;return n&&n.copy(this.direction).multiplyScalar(a).add(this.origin),r&&r.copy(t$).multiplyScalar(i).add(e$),o}},{key:"intersectSphere",value:function(e,t){$J.subVectors(e.center,this.origin);var n=$J.dot(this.direction),r=$J.dot($J)-n*n,a=e.radius*e.radius;if(r>a)return null;var i=Math.sqrt(a-r),o=n-i,s=n+i;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,a,i,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,d=this.origin;return u>=0?(n=(e.min.x-d.x)*u,r=(e.max.x-d.x)*u):(n=(e.max.x-d.x)*u,r=(e.min.x-d.x)*u),l>=0?(a=(e.min.y-d.y)*l,i=(e.max.y-d.y)*l):(a=(e.max.y-d.y)*l,i=(e.min.y-d.y)*l),n>i||a>r?null:((a>n||n!=n)&&(n=a),(i<r||r!=r)&&(r=i),c>=0?(o=(e.min.z-d.z)*c,s=(e.max.z-d.z)*c):(o=(e.max.z-d.z)*c,s=(e.min.z-d.z)*c),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,$J)}},{key:"intersectTriangle",value:function(e,t,n,r,a){r$.subVectors(t,e),a$.subVectors(n,e),i$.crossVectors(r$,a$);var i,o=this.direction.dot(i$);if(o>0){if(r)return null;i=1}else{if(!(o<0))return null;i=-1,o=-o}n$.subVectors(this.origin,e);var s=i*this.direction.dot(a$.crossVectors(n$,a$));if(s<0)return null;var u=i*this.direction.dot(r$.cross(n$));if(u<0)return null;if(s+u>o)return null;var l=-i*n$.dot(i$);return l<0?null:this.at(l/o,a)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),s$=function(){function e(){M(this,e),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return(0,I.Z)(e,[{key:"set",value:function(e,t,n,r,a,i,o,s,u,l,c,d,h,p,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=a,v[5]=i,v[9]=o,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=d,v[3]=h,v[7]=p,v[11]=f,v[15]=m,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/u$.setFromMatrixColumn(e,0).length(),a=1/u$.setFromMatrixColumn(e,1).length(),i=1/u$.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*i,t[9]=n[9]*i,t[10]=n[10]*i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,a=e.z,i=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(a),c=Math.sin(a);if("XYZ"===e.order){var d=i*l,h=i*c,p=o*l,f=o*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=h+p*u,t[5]=d-f*u,t[9]=-o*s,t[2]=f-d*u,t[6]=p+h*u,t[10]=i*s}else if("YXZ"===e.order){var m=s*l,v=s*c,g=u*l,y=u*c;t[0]=m+y*o,t[4]=g*o-v,t[8]=i*u,t[1]=i*c,t[5]=i*l,t[9]=-o,t[2]=v*o-g,t[6]=y+m*o,t[10]=i*s}else if("ZXY"===e.order){var b=s*l,x=s*c,w=u*l,k=u*c;t[0]=b-k*o,t[4]=-i*c,t[8]=w+x*o,t[1]=x+w*o,t[5]=i*l,t[9]=k-b*o,t[2]=-i*u,t[6]=o,t[10]=i*s}else if("ZYX"===e.order){var S=i*l,E=i*c,T=o*l,C=o*c;t[0]=s*l,t[4]=T*u-E,t[8]=S*u+C,t[1]=s*c,t[5]=C*u+S,t[9]=E*u-T,t[2]=-u,t[6]=o*s,t[10]=i*s}else if("YZX"===e.order){var _=i*s,M=i*u,I=o*s,N=o*u;t[0]=s*l,t[4]=N-_*c,t[8]=I*c+M,t[1]=c,t[5]=i*l,t[9]=-o*l,t[2]=-u*l,t[6]=M*c+I,t[10]=_-N*c}else if("XZY"===e.order){var A=i*s,R=i*u,O=o*s,D=o*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=A*c+D,t[5]=i*l,t[9]=R*c-O,t[2]=O*c-R,t[6]=o*l,t[10]=D*c+A}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(c$,e,d$)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return f$.subVectors(e,t),0===f$.lengthSq()&&(f$.z=1),f$.normalize(),h$.crossVectors(n,f$),0===h$.lengthSq()&&(1===Math.abs(n.z)?f$.x+=1e-4:f$.z+=1e-4,f$.normalize(),h$.crossVectors(n,f$)),h$.normalize(),p$.crossVectors(f$,h$),r[0]=h$.x,r[4]=p$.x,r[8]=f$.x,r[1]=h$.y,r[5]=p$.y,r[9]=f$.y,r[2]=h$.z,r[6]=p$.z,r[10]=f$.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,a=this.elements,i=n[0],o=n[4],s=n[8],u=n[12],l=n[1],c=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=r[0],k=r[4],S=r[8],E=r[12],T=r[1],C=r[5],_=r[9],M=r[13],I=r[2],N=r[6],A=r[10],R=r[14],O=r[3],D=r[7],L=r[11],P=r[15];return a[0]=i*w+o*T+s*I+u*O,a[4]=i*k+o*C+s*N+u*D,a[8]=i*S+o*_+s*A+u*L,a[12]=i*E+o*M+s*R+u*P,a[1]=l*w+c*T+d*I+h*O,a[5]=l*k+c*C+d*N+h*D,a[9]=l*S+c*_+d*A+h*L,a[13]=l*E+c*M+d*R+h*P,a[2]=p*w+f*T+m*I+v*O,a[6]=p*k+f*C+m*N+v*D,a[10]=p*S+f*_+m*A+v*L,a[14]=p*E+f*M+m*R+v*P,a[3]=g*w+y*T+b*I+x*O,a[7]=g*k+y*C+b*N+x*D,a[11]=g*S+y*_+b*A+x*L,a[15]=g*E+y*M+b*R+x*P,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],a=e[12],i=e[1],o=e[5],s=e[9],u=e[13],l=e[2],c=e[6],d=e[10],h=e[14];return e[3]*(+a*s*c-r*u*c-a*o*d+n*u*d+r*o*h-n*s*h)+e[7]*(+t*s*h-t*u*d+a*i*d-r*i*h+r*u*l-a*s*l)+e[11]*(+t*u*c-t*o*h-a*i*c+n*i*h+a*o*l-n*u*l)+e[15]*(-r*o*l-t*s*c+t*o*d+r*i*c-n*i*d+n*s*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],d=e[10],h=e[11],p=e[12],f=e[13],m=e[14],v=e[15],g=c*m*u-f*d*u+f*s*h-o*m*h-c*s*v+o*d*v,y=p*d*u-l*m*u-p*s*h+i*m*h+l*s*v-i*d*v,b=l*f*u-p*c*u+p*o*h-i*f*h-l*o*v+i*c*v,x=p*c*s-l*f*s-p*o*d+i*f*d+l*o*m-i*c*m,w=t*g+n*y+r*b+a*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var k=1/w;return e[0]=g*k,e[1]=(f*d*a-c*m*a-f*r*h+n*m*h+c*r*v-n*d*v)*k,e[2]=(o*m*a-f*s*a+f*r*u-n*m*u-o*r*v+n*s*v)*k,e[3]=(c*s*a-o*d*a-c*r*u+n*d*u+o*r*h-n*s*h)*k,e[4]=y*k,e[5]=(l*m*a-p*d*a+p*r*h-t*m*h-l*r*v+t*d*v)*k,e[6]=(p*s*a-i*m*a-p*r*u+t*m*u+i*r*v-t*s*v)*k,e[7]=(i*d*a-l*s*a+l*r*u-t*d*u-i*r*h+t*s*h)*k,e[8]=b*k,e[9]=(p*c*a-l*f*a-p*n*h+t*f*h+l*n*v-t*c*v)*k,e[10]=(i*f*a-p*o*a+p*n*u-t*f*u-i*n*v+t*o*v)*k,e[11]=(l*o*a-i*c*a-l*n*u+t*c*u+i*n*h-t*o*h)*k,e[12]=x*k,e[13]=(l*f*r-p*c*r+p*n*d-t*f*d-l*n*m+t*c*m)*k,e[14]=(p*o*r-i*f*r-p*n*s+t*f*s+i*n*m-t*o*m)*k,e[15]=(i*c*r-l*o*r+l*n*s-t*c*s-i*n*d+t*o*d)*k,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,a=e.z;return t[0]*=n,t[4]*=r,t[8]*=a,t[1]*=n,t[5]*=r,t[9]*=a,t[2]*=n,t[6]*=r,t[10]*=a,t[3]*=n,t[7]*=r,t[11]*=a,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),a=1-n,i=e.x,o=e.y,s=e.z,u=a*i,l=a*o;return this.set(u*i+n,u*o-r*s,u*s+r*o,0,u*o+r*s,l*o+n,l*s-r*i,0,u*s-r*o,l*s+r*i,a*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,a,i){return this.set(1,n,a,0,e,1,i,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,a=t._x,i=t._y,o=t._z,s=t._w,u=a+a,l=i+i,c=o+o,d=a*u,h=a*l,p=a*c,f=i*l,m=i*c,v=o*c,g=s*u,y=s*l,b=s*c,x=n.x,w=n.y,k=n.z;return r[0]=(1-(f+v))*x,r[1]=(h+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(h-b)*w,r[5]=(1-(d+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(p+y)*k,r[9]=(m-g)*k,r[10]=(1-(d+f))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,a=u$.set(r[0],r[1],r[2]).length(),i=u$.set(r[4],r[5],r[6]).length(),o=u$.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],l$.copy(this);var s=1/a,u=1/i,l=1/o;return l$.elements[0]*=s,l$.elements[1]*=s,l$.elements[2]*=s,l$.elements[4]*=u,l$.elements[5]*=u,l$.elements[6]*=u,l$.elements[8]*=l,l$.elements[9]*=l,l$.elements[10]*=l,t.setFromRotationMatrix(l$),n.x=a,n.y=i,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,a,i){void 0===i&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*a/(t-e),u=2*a/(n-r),l=(t+e)/(t-e),c=(n+r)/(n-r),d=-(i+a)/(i-a),h=-2*i*a/(i-a);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=u,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,a,i){var o=this.elements,s=1/(t-e),u=1/(n-r),l=1/(i-a),c=(t+e)*s,d=(n+r)*u,h=(i+a)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();s$.prototype.isMatrix4=!0;var u$=new NJ,l$=new s$,c$=new NJ(0,0,0),d$=new NJ(1,1,1),h$=new NJ,p$=new NJ,f$=new NJ,m$=new s$,v$=new IJ,g$=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;M(this,e),this._x=t,this._y=n,this._z=r,this._order=a}return(0,I.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,a=r[0],i=r[4],o=r[8],s=r[1],u=r[5],l=r[9],c=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(cJ(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,h),this._z=Math.atan2(-i,a)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-cJ(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,a),this._z=0);break;case"ZXY":this._x=Math.asin(cJ(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-i,u)):(this._y=0,this._z=Math.atan2(s,a));break;case"ZYX":this._y=Math.asin(-cJ(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,a)):(this._x=0,this._z=Math.atan2(-i,u));break;case"YZX":this._z=Math.asin(cJ(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,a)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-cJ(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-l,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return m$.makeRotationFromQuaternion(e),this.setFromRotationMatrix(m$,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return v$.setFromEuler(this),this.setFromQuaternion(v$,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new NJ(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}]),e}();g$.prototype.isEuler=!0,g$.DefaultOrder="XYZ",g$.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var y$=function(){function e(){M(this,e),this.mask=1}return(0,I.Z)(e,[{key:"set",value:function(e){this.mask=1<<e|0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!=(this.mask&e.mask)}}]),e}(),b$=0,x$=new NJ,w$=new IJ,k$=new s$,S$=new NJ,E$=new NJ,T$=new NJ,C$=new IJ,_$=new NJ(1,0,0),M$=new NJ(0,1,0),I$=new NJ(0,0,1),N$={type:"added"},A$={type:"removed"},R$=function(e){A(n,e);var t=F(n);function n(){var e;M(this,n),e=t.call(this),Object.defineProperty((0,L.Z)(e),"id",{value:b$++}),e.uuid=lJ(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new NJ,a=new g$,i=new IJ,o=new NJ(1,1,1);return a._onChange((function(){i.setFromEuler(a,!1)})),i._onChange((function(){a.setFromQuaternion(i,void 0,!1)})),Object.defineProperties((0,L.Z)(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:a},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new s$},normalMatrix:{value:new bJ}}),e.matrix=new s$,e.matrixWorld=new s$,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new y$,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return(0,I.Z)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return w$.setFromAxisAngle(e,t),this.quaternion.multiply(w$),this}},{key:"rotateOnWorldAxis",value:function(e,t){return w$.setFromAxisAngle(e,t),this.quaternion.premultiply(w$),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(_$,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(M$,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(I$,e)}},{key:"translateOnAxis",value:function(e,t){return x$.copy(e).applyQuaternion(this.quaternion),this.position.add(x$.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(_$,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(M$,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(I$,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(k$.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?S$.copy(e):S$.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),E$.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?k$.lookAt(E$,S$,this.up):k$.lookAt(S$,E$,this.up),this.quaternion.setFromRotationMatrix(k$),r&&(k$.extractRotation(r.matrixWorld),w$.setFromRotationMatrix(k$),this.quaternion.premultiply(w$.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(N$)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(A$)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(A$)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),k$.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),k$.multiply(e.parent.matrixWorld)),e.applyMatrix4(k$),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var a=this.children[n].getObjectByProperty(e,t);if(void 0!==a)return a}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(E$,e,T$),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(E$,C$,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,a=0,i=r.length;a<i;a++)r[a].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function a(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);var i=this.geometry.parameters;if(void 0!==i&&void 0!==i.shapes){var o=i.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var l=o[s];a(e.shapes,l)}else a(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],d=0,h=this.material.length;d<h;d++)c.push(a(e.materials,this.material[d]));r.material=c}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(var p=0;p<this.children.length;p++)r.children.push(this.children[p].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var f=0;f<this.animations.length;f++){var m=this.animations[f];r.animations.push(a(e.animations,m))}}if(t){var v=S(e.geometries),g=S(e.materials),y=S(e.textures),b=S(e.images),x=S(e.shapes),w=S(e.skeletons),k=S(e.animations);v.length>0&&(n.geometries=v),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),b.length>0&&(n.images=b),x.length>0&&(n.shapes=x),w.length>0&&(n.skeletons=w),k.length>0&&(n.animations=k)}return n.object=r,n;function S(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(nJ);R$.DefaultUp=new NJ(0,1,0),R$.DefaultMatrixAutoUpdate=!0,R$.prototype.isObject3D=!0;var O$=new NJ,D$=new NJ,L$=new NJ,P$=new NJ,F$=new NJ,j$=new NJ,z$=new NJ,B$=new NJ,U$=new NJ,W$=new NJ,V$=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new NJ,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NJ,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new NJ;M(this,e),this.a=t,this.b=n,this.c=r}return(0,I.Z)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return O$.subVectors(this.c,this.b),D$.subVectors(this.a,this.b),.5*O$.cross(D$).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,a,i){return e.getUV(t,this.a,this.b,this.c,n,r,a,i)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,a=this.a,i=this.b,o=this.c;F$.subVectors(i,a),j$.subVectors(o,a),B$.subVectors(e,a);var s=F$.dot(B$),u=j$.dot(B$);if(s<=0&&u<=0)return t.copy(a);U$.subVectors(e,i);var l=F$.dot(U$),c=j$.dot(U$);if(l>=0&&c<=l)return t.copy(i);var d=s*c-l*u;if(d<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(a).addScaledVector(F$,n);W$.subVectors(e,o);var h=F$.dot(W$),p=j$.dot(W$);if(p>=0&&h<=p)return t.copy(o);var f=h*u-s*p;if(f<=0&&u>=0&&p<=0)return r=u/(u-p),t.copy(a).addScaledVector(j$,r);var m=l*p-h*c;if(m<=0&&c-l>=0&&h-p>=0)return z$.subVectors(o,i),r=(c-l)/(c-l+(h-p)),t.copy(i).addScaledVector(z$,r);var v=1/(m+f+d);return n=f*v,r=d*v,t.copy(a).addScaledVector(F$,n).addScaledVector(j$,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),O$.subVectors(e,t),r.cross(O$);var a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,a){O$.subVectors(r,t),D$.subVectors(n,t),L$.subVectors(e,t);var i=O$.dot(O$),o=O$.dot(D$),s=O$.dot(L$),u=D$.dot(D$),l=D$.dot(L$),c=i*u-o*o;if(0===c)return a.set(-2,-1,-1);var d=1/c,h=(u*s-o*l)*d,p=(i*l-o*s)*d;return a.set(1-h-p,p,h)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,P$),P$.x>=0&&P$.y>=0&&P$.x+P$.y<=1}},{key:"getUV",value:function(e,t,n,r,a,i,o,s){return this.getBarycoord(e,t,n,r,P$),s.set(0,0),s.addScaledVector(a,P$.x),s.addScaledVector(i,P$.y),s.addScaledVector(o,P$.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return O$.subVectors(n,t),D$.subVectors(e,t),O$.cross(D$).dot(r)<0}}]),e}(),Z$=0,H$=function(e){A(n,e);var t=F(n);function n(){var e;return M(this,n),e=t.call(this),Object.defineProperty((0,L.Z)(e),"id",{value:Z$++}),e.uuid=lJ(),e.name="",e.type="Material",e.fog=!0,e.blending=1,e.side=0,e.vertexColors=!1,e.opacity=1,e.format=1023,e.transparent=!1,e.blendSrc=204,e.blendDst=205,e.blendEquation=100,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=7680,e.stencilZFail=7680,e.stencilZPass=7680,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return(0,I.Z)(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenTint&&this.sheenTint.isColor&&(n.sheenTint=this.sheenTint.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(n.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(n.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(n.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),1023!==this.format&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var a=r(e.textures),i=r(e.images);a.length>0&&(n.textures=a),i.length>0&&(n.images=i)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var a=0;a!==r;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(nJ);H$.prototype.isMaterial=!0;var G$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},q$={h:0,s:0,l:0},X$={h:0,s:0,l:0};function Y$(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function K$(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Q$(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var J$=function(){function e(t,n,r){return M(this,e),void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return(0,I.Z)(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,n){return this.r=e,this.g=t,this.b=n,this}},{key:"setHSL",value:function(e,t,n){if(e=dJ(e,1),t=cJ(t,0,1),n=cJ(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=Y$(a,r,e+1/3),this.g=Y$(a,r,e),this.b=Y$(a,r,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,a=n[1],i=n[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(o,s,u)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=G$[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}},{key:"copyLinearToGamma",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=K$(e.r),this.g=K$(e.g),this.b=K$(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=Q$(e.r),this.g=Q$(e.g),this.b=Q$(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t,n,r=this.r,a=this.g,i=this.b,o=Math.max(r,a,i),s=Math.min(r,a,i),u=(s+o)/2;if(s===o)t=0,n=0;else{var l=o-s;switch(n=u<=.5?l/(o+s):l/(2-o-s),o){case r:t=(a-i)/l+(a<i?6:0);break;case a:t=(i-r)/l+2;break;case i:t=(r-a)/l+4}t/=6}return e.h=t,e.s=n,e.l=u,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(q$),q$.h+=e,q$.s+=t,q$.l+=n,this.setHSL(q$.h,q$.s,q$.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(q$),e.getHSL(X$);var n=hJ(q$.h,X$.h,t),r=hJ(q$.s,X$.s,t),a=hJ(q$.l,X$.l,t);return this.setHSL(n,r,a),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();J$.NAMES=G$,J$.prototype.isColor=!0,J$.prototype.r=1,J$.prototype.g=1,J$.prototype.b=1;var $$=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="MeshBasicMaterial",r.color=new J$(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(H$);$$.prototype.isMeshBasicMaterial=!0;var e0=new NJ,t0=new gJ,n0=function(){function e(t,n,r){if(M(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}return(0,I.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new J$),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new gJ),t[n++]=i.x,t[n++]=i.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new NJ),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new CJ),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)t0.fromBufferAttribute(this,t),t0.applyMatrix3(e),this.setXY(t,t0.x,t0.y);else if(3===this.itemSize)for(var r=0,a=this.count;r<a;r++)e0.fromBufferAttribute(this,r),e0.applyMatrix3(e),this.setXYZ(r,e0.x,e0.y,e0.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)e0.x=this.getX(t),e0.y=this.getY(t),e0.z=this.getZ(t),e0.applyMatrix4(e),this.setXYZ(t,e0.x,e0.y,e0.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)e0.x=this.getX(t),e0.y=this.getY(t),e0.z=this.getZ(t),e0.applyNormalMatrix(e),this.setXYZ(t,e0.x,e0.y,e0.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)e0.x=this.getX(t),e0.y=this.getY(t),e0.z=this.getZ(t),e0.transformDirection(e),this.setXYZ(t,e0.x,e0.y,e0.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,a){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=a,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();n0.prototype.isBufferAttribute=!0;var r0=function(e){A(n,e);var t=F(n);function n(e,r,a){return M(this,n),t.call(this,new Uint16Array(e),r,a)}return(0,I.Z)(n)}(n0),a0=function(e){A(n,e);var t=F(n);function n(e,r,a){return M(this,n),t.call(this,new Uint32Array(e),r,a)}return(0,I.Z)(n)}(n0);(function(e){A(n,e);var t=F(n);function n(e,r,a){return M(this,n),t.call(this,new Uint16Array(e),r,a)}return(0,I.Z)(n)})(n0).prototype.isFloat16BufferAttribute=!0;var i0=function(e){A(n,e);var t=F(n);function n(e,r,a){return M(this,n),t.call(this,new Float32Array(e),r,a)}return(0,I.Z)(n)}(n0),o0=0,s0=new s$,u0=new R$,l0=new NJ,c0=new OJ,d0=new OJ,h0=new NJ,p0=function(e){A(n,e);var t=F(n);function n(){var e;return M(this,n),e=t.call(this),Object.defineProperty((0,L.Z)(e),"id",{value:o0++}),e.uuid=lJ(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return(0,I.Z)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(xJ(e)>65535?a0:r0)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new bJ).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(e),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return s0.makeRotationFromQuaternion(e),this.applyMatrix4(s0),this}},{key:"rotateX",value:function(e){return s0.makeRotationX(e),this.applyMatrix4(s0),this}},{key:"rotateY",value:function(e){return s0.makeRotationY(e),this.applyMatrix4(s0),this}},{key:"rotateZ",value:function(e){return s0.makeRotationZ(e),this.applyMatrix4(s0),this}},{key:"translate",value:function(e,t,n){return s0.makeTranslation(e,t,n),this.applyMatrix4(s0),this}},{key:"scale",value:function(e,t,n){return s0.makeScale(e,t,n),this.applyMatrix4(s0),this}},{key:"lookAt",value:function(e){return u0.lookAt(e),u0.updateMatrix(),this.applyMatrix4(u0.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(l0).negate(),this.translate(l0.x,l0.y,l0.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new i0(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new OJ);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new NJ(-1/0,-1/0,-1/0),new NJ(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var a=t[n];c0.setFromBufferAttribute(a),this.morphTargetsRelative?(h0.addVectors(this.boundingBox.min,c0.min),this.boundingBox.expandByPoint(h0),h0.addVectors(this.boundingBox.max,c0.max),this.boundingBox.expandByPoint(h0)):(this.boundingBox.expandByPoint(c0.min),this.boundingBox.expandByPoint(c0.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new JJ);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new NJ,1/0);if(e){var n=this.boundingSphere.center;if(c0.setFromBufferAttribute(e),t)for(var r=0,a=t.length;r<a;r++){var i=t[r];d0.setFromBufferAttribute(i),this.morphTargetsRelative?(h0.addVectors(c0.min,d0.min),c0.expandByPoint(h0),h0.addVectors(c0.max,d0.max),c0.expandByPoint(h0)):(c0.expandByPoint(d0.min),c0.expandByPoint(d0.max))}c0.getCenter(n);for(var o=0,s=0,u=e.count;s<u;s++)h0.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(h0));if(t)for(var l=0,c=t.length;l<c;l++)for(var d=t[l],h=this.morphTargetsRelative,p=0,f=d.count;p<f;p++)h0.fromBufferAttribute(d,p),h&&(l0.fromBufferAttribute(e,p),h0.add(l0)),o=Math.max(o,n.distanceToSquared(h0));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,a=t.normal.array,i=t.uv.array,o=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new n0(new Float32Array(4*o),4));for(var s=t.tangent.array,u=[],l=[],c=0;c<o;c++)u[c]=new NJ,l[c]=new NJ;var d=new NJ,h=new NJ,p=new NJ,f=new gJ,m=new gJ,v=new gJ,g=new NJ,y=new NJ,b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(var x=0,w=b.length;x<w;++x)for(var k=b[x],S=k.start,E=S,T=S+k.count;E<T;E+=3)P(n[E+0],n[E+1],n[E+2]);for(var C=new NJ,_=new NJ,M=new NJ,I=new NJ,N=0,A=b.length;N<A;++N)for(var R=b[N],O=R.start,D=O,L=O+R.count;D<L;D+=3)F(n[D+0]),F(n[D+1]),F(n[D+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function P(e,t,n){d.fromArray(r,3*e),h.fromArray(r,3*t),p.fromArray(r,3*n),f.fromArray(i,2*e),m.fromArray(i,2*t),v.fromArray(i,2*n),h.sub(d),p.sub(d),m.sub(f),v.sub(f);var a=1/(m.x*v.y-v.x*m.y);isFinite(a)&&(g.copy(h).multiplyScalar(v.y).addScaledVector(p,-m.y).multiplyScalar(a),y.copy(p).multiplyScalar(m.x).addScaledVector(h,-v.x).multiplyScalar(a),u[e].add(g),u[t].add(g),u[n].add(g),l[e].add(y),l[t].add(y),l[n].add(y))}function F(e){M.fromArray(a,3*e),I.copy(M);var t=u[e];C.copy(t),C.sub(M.multiplyScalar(M.dot(t))).normalize(),_.crossVectors(I,t);var n=_.dot(l[e])<0?-1:1;s[4*e]=C.x,s[4*e+1]=C.y,s[4*e+2]=C.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new n0(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,a=n.count;r<a;r++)n.setXYZ(r,0,0,0);var i=new NJ,o=new NJ,s=new NJ,u=new NJ,l=new NJ,c=new NJ,d=new NJ,h=new NJ;if(e)for(var p=0,f=e.count;p<f;p+=3){var m=e.getX(p+0),v=e.getX(p+1),g=e.getX(p+2);i.fromBufferAttribute(t,m),o.fromBufferAttribute(t,v),s.fromBufferAttribute(t,g),d.subVectors(s,o),h.subVectors(i,o),d.cross(h),u.fromBufferAttribute(n,m),l.fromBufferAttribute(n,v),c.fromBufferAttribute(n,g),u.add(d),l.add(d),c.add(d),n.setXYZ(m,u.x,u.y,u.z),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,b=t.count;y<b;y+=3)i.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),d.subVectors(s,o),h.subVectors(i,o),d.cross(h),n.setXYZ(y+0,d.x,d.y,d.z),n.setXYZ(y+1,d.x,d.y,d.z),n.setXYZ(y+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var a=n[r].array,i=e.attributes[r],o=i.array,s=i.itemSize*t,u=Math.min(o.length,a.length-s),l=0,c=s;l<u;l++,c++)a[c]=o[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)h0.fromBufferAttribute(e,t),h0.normalize(),e.setXYZ(t,h0.x,h0.y,h0.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,a=e.normalized,i=new n.constructor(t.length*r),o=0,s=0,u=0,l=t.length;u<l;u++){o=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var c=0;c<r;c++)i[s++]=n[o++]}return new n0(i,r,a)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,a=this.attributes;for(var i in a){var o=e(a[i],r);t.setAttribute(i,o)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],d=0,h=c.length;d<h;d++){var p=e(c[d],r);l.push(p)}t.morphAttributes[u]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var f=this.groups,m=0,v=f.length;m<v;m++){var g=f[m];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var a=this.attributes;for(var i in a){var o=a[i];e.data.attributes[i]=o.toJSON(e.data)}var s={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],d=[],h=0,p=c.length;h<p;h++){var f=c[h];d.push(f.toJSON(e.data))}d.length>0&&(s[l]=d,u=!0)}u&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var m=this.groups;m.length>0&&(e.data.groups=JSON.parse(JSON.stringify(m)));var v=this.boundingSphere;return null!==v&&(e.data.boundingSphere={center:v.center.toArray(),radius:v.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var a in r){var i=r[a];this.setAttribute(a,i.clone(t))}var o=e.morphAttributes;for(var s in o){for(var u=[],l=o[s],c=0,d=l.length;c<d;c++)u.push(l[c].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var h=e.groups,p=0,f=h.length;p<f;p++){var m=h[p];this.addGroup(m.start,m.count,m.materialIndex)}var v=e.boundingBox;null!==v&&(this.boundingBox=v.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(nJ);p0.prototype.isBufferGeometry=!0;var f0=new s$,m0=new o$,v0=new JJ,g0=new NJ,y0=new NJ,b0=new NJ,x0=new NJ,w0=new NJ,k0=new NJ,S0=new NJ,E0=new NJ,T0=new NJ,C0=new gJ,_0=new gJ,M0=new gJ,I0=new NJ,N0=new NJ,A0=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new p0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $$;return M(this,n),(e=t.call(this)).type="Mesh",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,i=r.length;a<i;a++){var o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(e,t){var n,r=this.geometry,a=this.material,i=this.matrixWorld;if(void 0!==a&&(null===r.boundingSphere&&r.computeBoundingSphere(),v0.copy(r.boundingSphere),v0.applyMatrix4(i),!1!==e.ray.intersectsSphere(v0)&&(f0.copy(i).invert(),m0.copy(e.ray).applyMatrix4(f0),null===r.boundingBox||!1!==m0.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var o=r.index,s=r.attributes.position,u=r.morphAttributes.position,l=r.morphTargetsRelative,c=r.attributes.uv,d=r.attributes.uv2,h=r.groups,p=r.drawRange;if(null!==o)if(Array.isArray(a))for(var f=0,m=h.length;f<m;f++)for(var v=h[f],g=a[v.materialIndex],y=Math.max(v.start,p.start),b=Math.min(o.count,Math.min(v.start+v.count,p.start+p.count));y<b;y+=3){var x=o.getX(y),w=o.getX(y+1),k=o.getX(y+2);(n=R0(this,g,e,m0,s,u,l,c,d,x,w,k))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=v.materialIndex,t.push(n))}else for(var S=Math.max(0,p.start),E=Math.min(o.count,p.start+p.count);S<E;S+=3){var T=o.getX(S),C=o.getX(S+1),_=o.getX(S+2);(n=R0(this,a,e,m0,s,u,l,c,d,T,C,_))&&(n.faceIndex=Math.floor(S/3),t.push(n))}else if(void 0!==s)if(Array.isArray(a))for(var M=0,I=h.length;M<I;M++)for(var N=h[M],A=a[N.materialIndex],R=Math.max(N.start,p.start),O=Math.min(s.count,Math.min(N.start+N.count,p.start+p.count));R<O;R+=3)(n=R0(this,A,e,m0,s,u,l,c,d,R,R+1,R+2))&&(n.faceIndex=Math.floor(R/3),n.face.materialIndex=N.materialIndex,t.push(n));else for(var D=Math.max(0,p.start),L=Math.min(s.count,p.start+p.count);D<L;D+=3)(n=R0(this,a,e,m0,s,u,l,c,d,D,D+1,D+2))&&(n.faceIndex=Math.floor(D/3),t.push(n))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(R$);function R0(e,t,n,r,a,i,o,s,u,l,c,d){g0.fromBufferAttribute(a,l),y0.fromBufferAttribute(a,c),b0.fromBufferAttribute(a,d);var h=e.morphTargetInfluences;if(i&&h){S0.set(0,0,0),E0.set(0,0,0),T0.set(0,0,0);for(var p=0,f=i.length;p<f;p++){var m=h[p],v=i[p];0!==m&&(x0.fromBufferAttribute(v,l),w0.fromBufferAttribute(v,c),k0.fromBufferAttribute(v,d),o?(S0.addScaledVector(x0,m),E0.addScaledVector(w0,m),T0.addScaledVector(k0,m)):(S0.addScaledVector(x0.sub(g0),m),E0.addScaledVector(w0.sub(y0),m),T0.addScaledVector(k0.sub(b0),m)))}g0.add(S0),y0.add(E0),b0.add(T0)}e.isSkinnedMesh&&(e.boneTransform(l,g0),e.boneTransform(c,y0),e.boneTransform(d,b0));var g=function(e,t,n,r,a,i,o,s){if(null===(1===t.side?r.intersectTriangle(o,i,a,!0,s):r.intersectTriangle(a,i,o,2!==t.side,s)))return null;N0.copy(s),N0.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(N0);return u<n.near||u>n.far?null:{distance:u,point:N0.clone(),object:e}}(e,t,n,r,g0,y0,b0,I0);if(g){s&&(C0.fromBufferAttribute(s,l),_0.fromBufferAttribute(s,c),M0.fromBufferAttribute(s,d),g.uv=V$.getUV(I0,g0,y0,b0,C0,_0,M0,new gJ)),u&&(C0.fromBufferAttribute(u,l),_0.fromBufferAttribute(u,c),M0.fromBufferAttribute(u,d),g.uv2=V$.getUV(I0,g0,y0,b0,C0,_0,M0,new gJ));var y={a:l,b:c,c:d,normal:new NJ,materialIndex:0};V$.getNormal(g0,y0,b0,y.normal),g.face=y}return g}A0.prototype.isMesh=!0;var O0=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;M(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:a,depth:i,widthSegments:o,heightSegments:s,depthSegments:u};var l=(0,L.Z)(e);o=Math.floor(o),s=Math.floor(s),u=Math.floor(u);var c=[],d=[],h=[],p=[],f=0,m=0;function v(e,t,n,r,a,i,o,s,u,v,g){for(var y=i/u,b=o/v,x=i/2,w=o/2,k=s/2,S=u+1,E=v+1,T=0,C=0,_=new NJ,M=0;M<E;M++)for(var I=M*b-w,N=0;N<S;N++){var A=N*y-x;_[e]=A*r,_[t]=I*a,_[n]=k,d.push(_.x,_.y,_.z),_[e]=0,_[t]=0,_[n]=s>0?1:-1,h.push(_.x,_.y,_.z),p.push(N/u),p.push(1-M/v),T+=1}for(var R=0;R<v;R++)for(var O=0;O<u;O++){var D=f+O+S*R,L=f+O+S*(R+1),P=f+(O+1)+S*(R+1),F=f+(O+1)+S*R;c.push(D,L,F),c.push(L,P,F),C+=6}l.addGroup(m,C,g),m+=C,f+=T}return v("z","y","x",-1,-1,i,a,r,u,s,0),v("z","y","x",1,-1,i,a,-r,u,s,1),v("x","z","y",1,1,r,i,a,o,u,2),v("x","z","y",1,-1,r,i,-a,o,u,3),v("x","y","z",1,-1,r,a,i,o,s,4),v("x","y","z",-1,-1,r,a,-i,o,s,5),e.setIndex(c),e.setAttribute("position",new i0(d,3)),e.setAttribute("normal",new i0(h,3)),e.setAttribute("uv",new i0(p,2)),e}return(0,I.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(p0);function D0(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var a=e[n][r];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?t[n][r]=a.clone():Array.isArray(a)?t[n][r]=a.slice():t[n][r]=a}return t}function L0(e){for(var t={},n=0;n<e.length;n++){var r=D0(e[n]);for(var a in r)t[a]=r[a]}return t}var P0={clone:D0,merge:L0},F0=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(e)),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=D0(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=pl(R(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}]),n}(H$);F0.prototype.isShaderMaterial=!0;var j0=function(e){A(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).type="Camera",e.matrixWorldInverse=new s$,e.projectionMatrix=new s$,e.projectionMatrixInverse=new s$,e}return(0,I.Z)(n,[{key:"copy",value:function(e,t){return pl(R(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){pl(R(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){pl(R(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(R$);j0.prototype.isCamera=!0;var z0=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return M(this,n),(e=t.call(this)).type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=i,e.far=o,e.focus=10,e.aspect=a,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return(0,I.Z)(n,[{key:"copy",value:function(e,t){return pl(R(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*iJ*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*aJ*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*iJ*Math.atan(Math.tan(.5*aJ*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,a,i){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=i,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*aJ*this.fov)/this.zoom,n=2*t,r=this.aspect*n,a=-.5*r,i=this.view;if(null!==this.view&&this.view.enabled){var o=i.fullWidth,s=i.fullHeight;a+=i.offsetX*r/o,t-=i.offsetY*n/s,r*=i.width/o,n*=i.height/s}var u=this.filmOffset;0!==u&&(a+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=pl(R(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(j0);z0.prototype.isPerspectiveCamera=!0;var B0=function(e){A(n,e);var t=F(n);function n(e,r,a){var i;if(M(this,n),(i=t.call(this)).type="CubeCamera",!0!==a.isWebGLCubeRenderTarget)return P(i,void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."));i.renderTarget=a;var o=new z0(90,1,e,r);o.layers=i.layers,o.up.set(0,-1,0),o.lookAt(new NJ(1,0,0)),i.add(o);var s=new z0(90,1,e,r);s.layers=i.layers,s.up.set(0,-1,0),s.lookAt(new NJ(-1,0,0)),i.add(s);var u=new z0(90,1,e,r);u.layers=i.layers,u.up.set(0,0,1),u.lookAt(new NJ(0,1,0)),i.add(u);var l=new z0(90,1,e,r);l.layers=i.layers,l.up.set(0,0,-1),l.lookAt(new NJ(0,-1,0)),i.add(l);var c=new z0(90,1,e,r);c.layers=i.layers,c.up.set(0,-1,0),c.lookAt(new NJ(0,0,1)),i.add(c);var d=new z0(90,1,e,r);return d.layers=i.layers,d.up.set(0,-1,0),d.lookAt(new NJ(0,0,-1)),i.add(d),P(i)}return(0,I.Z)(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=(0,U.Z)(this.children,6),a=r[0],i=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=e.xr.enabled,d=e.getRenderTarget();e.xr.enabled=!1;var h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,a),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(d),e.xr.enabled=c}}]),n}(R$),U0=function(e){A(n,e);var t=F(n);function n(e,r,a,i,o,s,u,l,c,d){var h;return M(this,n),(h=t.call(this,e=void 0!==e?e:[],r=void 0!==r?r:301,a,i,o,s,u,l,c,d)).flipY=!1,h}return(0,I.Z)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(EJ);U0.prototype.isCubeTexture=!0;var W0=function(e){A(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=a),i=t.call(this,e,e,r),r=r||{},i.texture=new U0(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),i.texture.isRenderTargetTexture=!0,i.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,i.texture.minFilter=void 0!==r.minFilter?r.minFilter:1006,i.texture._needsFlipEnvMap=!1,i}return(0,I.Z)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.format=1023,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",a="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",i=new O0(5,5,5),o=new F0({name:"CubemapFromEquirect",uniforms:D0(n),vertexShader:r,fragmentShader:a,side:1,blending:0});o.uniforms.tEquirect.value=t;var s=new A0(i,o),u=t.minFilter;return 1008===t.minFilter&&(t.minFilter=1006),new B0(1,10,this).update(e,s),t.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var a=e.getRenderTarget(),i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(a)}}]),n}(_J);W0.prototype.isWebGLCubeRenderTarget=!0;var V0=new NJ,Z0=new NJ,H0=new bJ,G0=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new NJ(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;M(this,e),this.normal=t,this.constant=n}return(0,I.Z)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=V0.subVectors(n,t).cross(Z0.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(V0),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(n).multiplyScalar(a).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||H0.getNormalMatrix(e),r=this.coplanarPoint(V0).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(a),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();G0.prototype.isPlane=!0;var q0=new JJ,X0=new NJ,Y0=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new G0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new G0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new G0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new G0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new G0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new G0;M(this,e),this.planes=[t,n,r,a,i,o]}return(0,I.Z)(e,[{key:"set",value:function(e,t,n,r,a,i){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(a),o[5].copy(i),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],a=n[1],i=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],d=n[8],h=n[9],p=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,c-s,f-d,y-m).normalize(),t[1].setComponents(o+r,c+s,f+d,y+m).normalize(),t[2].setComponents(o+a,c+u,f+h,y+v).normalize(),t[3].setComponents(o-a,c-u,f-h,y-v).normalize(),t[4].setComponents(o-i,c-l,f-p,y-g).normalize(),t[5].setComponents(o+i,c+l,f+p,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),q0.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(q0)}},{key:"intersectsSprite",value:function(e){return q0.center.set(0,0,0),q0.radius=.7071067811865476,q0.applyMatrix4(e.matrixWorld),this.intersectsSphere(q0)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,a=0;a<6;a++)if(t[a].distanceToPoint(n)<r)return!1;return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(X0.x=r.normal.x>0?e.max.x:e.min.x,X0.y=r.normal.y>0?e.max.y:e.min.y,X0.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(X0)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function K0(){var e=null,t=!1,n=null,r=null;function a(t,i){n(t,i),r=e.requestAnimationFrame(a)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(a),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Q0(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,a){if(t.isGLBufferAttribute){var i=r.get(t);(!i||i.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var a=t.array,i=t.usage,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,a,i),t.onUploadCallback();var s=5126;return a instanceof Float32Array?s=5126:a instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):a instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:a instanceof Int16Array?s=5122:a instanceof Uint32Array?s=5125:a instanceof Int32Array?s=5124:a instanceof Int8Array?s=5120:(a instanceof Uint8Array||a instanceof Uint8ClampedArray)&&(s=5121),{buffer:o,type:s,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,a)):o.version<t.version&&(function(t,r,a){var i=r.array,o=r.updateRange;e.bindBuffer(a,t),-1===o.count?e.bufferSubData(a,0,i):(n?e.bufferSubData(a,o.offset*i.BYTES_PER_ELEMENT,i,o.offset,o.count):e.bufferSubData(a,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,t,a),o.version=t.version)}}}}var J0=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;M(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:a,widthSegments:i,heightSegments:o};for(var s=r/2,u=a/2,l=Math.floor(i),c=Math.floor(o),d=l+1,h=c+1,p=r/l,f=a/c,m=[],v=[],g=[],y=[],b=0;b<h;b++)for(var x=b*f-u,w=0;w<d;w++){var k=w*p-s;v.push(k,-x,0),g.push(0,0,1),y.push(w/l),y.push(1-b/c)}for(var S=0;S<c;S++)for(var E=0;E<l;E++){var T=E+d*S,C=E+d*(S+1),_=E+1+d*(S+1),I=E+1+d*S;m.push(T,C,I),m.push(C,_,I)}return e.setIndex(m),e.setAttribute("position",new i0(v,3)),e.setAttribute("normal",new i0(g,3)),e.setAttribute("uv",new i0(y,2)),e}return(0,I.Z)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(p0),$0={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenTint, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenTint * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenTint = sheenTint;\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenTint;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenTint, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenTint;\n\tuniform float sheenRoughness;\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},e1={common:{diffuse:{value:new J$(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new bJ},uv2Transform:{value:new bJ},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new gJ(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new J$(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new J$(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new bJ}},sprite:{diffuse:{value:new J$(16777215)},opacity:{value:1},center:{value:new gJ(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new bJ}}},t1={basic:{uniforms:L0([e1.common,e1.specularmap,e1.envmap,e1.aomap,e1.lightmap,e1.fog]),vertexShader:$0.meshbasic_vert,fragmentShader:$0.meshbasic_frag},lambert:{uniforms:L0([e1.common,e1.specularmap,e1.envmap,e1.aomap,e1.lightmap,e1.emissivemap,e1.fog,e1.lights,{emissive:{value:new J$(0)}}]),vertexShader:$0.meshlambert_vert,fragmentShader:$0.meshlambert_frag},phong:{uniforms:L0([e1.common,e1.specularmap,e1.envmap,e1.aomap,e1.lightmap,e1.emissivemap,e1.bumpmap,e1.normalmap,e1.displacementmap,e1.fog,e1.lights,{emissive:{value:new J$(0)},specular:{value:new J$(1118481)},shininess:{value:30}}]),vertexShader:$0.meshphong_vert,fragmentShader:$0.meshphong_frag},standard:{uniforms:L0([e1.common,e1.envmap,e1.aomap,e1.lightmap,e1.emissivemap,e1.bumpmap,e1.normalmap,e1.displacementmap,e1.roughnessmap,e1.metalnessmap,e1.fog,e1.lights,{emissive:{value:new J$(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$0.meshphysical_vert,fragmentShader:$0.meshphysical_frag},toon:{uniforms:L0([e1.common,e1.aomap,e1.lightmap,e1.emissivemap,e1.bumpmap,e1.normalmap,e1.displacementmap,e1.gradientmap,e1.fog,e1.lights,{emissive:{value:new J$(0)}}]),vertexShader:$0.meshtoon_vert,fragmentShader:$0.meshtoon_frag},matcap:{uniforms:L0([e1.common,e1.bumpmap,e1.normalmap,e1.displacementmap,e1.fog,{matcap:{value:null}}]),vertexShader:$0.meshmatcap_vert,fragmentShader:$0.meshmatcap_frag},points:{uniforms:L0([e1.points,e1.fog]),vertexShader:$0.points_vert,fragmentShader:$0.points_frag},dashed:{uniforms:L0([e1.common,e1.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$0.linedashed_vert,fragmentShader:$0.linedashed_frag},depth:{uniforms:L0([e1.common,e1.displacementmap]),vertexShader:$0.depth_vert,fragmentShader:$0.depth_frag},normal:{uniforms:L0([e1.common,e1.bumpmap,e1.normalmap,e1.displacementmap,{opacity:{value:1}}]),vertexShader:$0.meshnormal_vert,fragmentShader:$0.meshnormal_frag},sprite:{uniforms:L0([e1.sprite,e1.fog]),vertexShader:$0.sprite_vert,fragmentShader:$0.sprite_frag},background:{uniforms:{uvTransform:{value:new bJ},t2D:{value:null}},vertexShader:$0.background_vert,fragmentShader:$0.background_frag},cube:{uniforms:L0([e1.envmap,{opacity:{value:1}}]),vertexShader:$0.cube_vert,fragmentShader:$0.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$0.equirect_vert,fragmentShader:$0.equirect_frag},distanceRGBA:{uniforms:L0([e1.common,e1.displacementmap,{referencePosition:{value:new NJ},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$0.distanceRGBA_vert,fragmentShader:$0.distanceRGBA_frag},shadow:{uniforms:L0([e1.lights,e1.fog,{color:{value:new J$(0)},opacity:{value:1}}]),vertexShader:$0.shadow_vert,fragmentShader:$0.shadow_frag}};function n1(e,t,n,r,a){var i,o,s=new J$(0),u=0,l=null,c=0,d=null;function h(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,a)}return{getClearColor:function(){return s},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),h(s,u=t)},getClearAlpha:function(){return u},setClearAlpha:function(e){h(s,u=e)},render:function(n,a){var p=!1,f=!0===a.isScene?a.background:null;f&&f.isTexture&&(f=t.get(f));var m=e.xr,v=m.getSession&&m.getSession();v&&"additive"===v.environmentBlendMode&&(f=null),null===f?h(s,u):f&&f.isColor&&(h(f,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||306===f.mapping)?(void 0===o&&((o=new A0(new O0(1,1,1),new F0({name:"BackgroundCubeMaterial",uniforms:D0(t1.cube.uniforms),vertexShader:t1.cube.vertexShader,fragmentShader:t1.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(o)),o.material.uniforms.envMap.value=f,o.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,l===f&&c===f.version&&d===e.toneMapping||(o.material.needsUpdate=!0,l=f,c=f.version,d=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null)):f&&f.isTexture&&(void 0===i&&((i=new A0(new J0(2,2),new F0({name:"BackgroundMaterial",uniforms:D0(t1.background.uniforms),vertexShader:t1.background.vertexShader,fragmentShader:t1.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(i)),i.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),i.material.uniforms.uvTransform.value.copy(f.matrix),l===f&&c===f.version&&d===e.toneMapping||(i.material.needsUpdate=!0,l=f,c=f.version,d=e.toneMapping),n.unshift(i,i.geometry,i.material,0,0,null))}}}function r1(e,t,n,r){var a=e.getParameter(34921),i=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==i,s={},u=h(null),l=u;function c(t){return r.isWebGL2?e.bindVertexArray(t):i.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):i.deleteVertexArrayOES(t)}function h(e){for(var t=[],n=[],r=[],i=0;i<a;i++)t[i]=0,n[i]=0,r[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){for(var e=l.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function f(e){m(e,0)}function m(n,a){var i=l.newAttributes,o=l.enabledAttributes,s=l.attributeDivisors;i[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==a&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,a),s[n]=a)}function v(){for(var t=l.newAttributes,n=l.enabledAttributes,r=0,a=n.length;r<a;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function g(t,n,a,i,o,s){!0!==r.isWebGL2||5124!==a&&5125!==a?e.vertexAttribPointer(t,n,a,i,o,s):e.vertexAttribIPointer(t,n,a,o,s)}function y(){b(),l!==u&&c((l=u).object)}function b(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(a,u,d,y,b){var x=!1;if(o){var w=function(t,n,a){var o=!0===a.wireframe,u=s[t.id];void 0===u&&(u={},s[t.id]=u);var l=u[n.id];void 0===l&&(l={},u[n.id]=l);var c=l[o];return void 0===c&&(c=h(r.isWebGL2?e.createVertexArray():i.createVertexArrayOES()),l[o]=c),c}(y,d,u);l!==w&&c((l=w).object),x=function(e,t){var n=l.attributes,r=e.attributes,a=0;for(var i in r){var o=n[i],s=r[i];if(void 0===o)return!0;if(o.attribute!==s)return!0;if(o.data!==s.data)return!0;a++}return l.attributesNum!==a||l.index!==t}(y,b),x&&function(e,t){var n={},r=e.attributes,a=0;for(var i in r){var o=r[i],s={};s.attribute=o,o.data&&(s.data=o.data),n[i]=s,a++}l.attributes=n,l.attributesNum=a,l.index=t}(y,b)}else{var k=!0===u.wireframe;l.geometry===y.id&&l.program===d.id&&l.wireframe===k||(l.geometry=y.id,l.program=d.id,l.wireframe=k,x=!0)}!0===a.isInstancedMesh&&(x=!0),null!==b&&n.update(b,34963),x&&(function(a,i,o,s){if(!1!==r.isWebGL2||!a.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==t.get("ANGLE_instanced_arrays")){p();var u=s.attributes,l=o.getAttributes(),c=i.defaultAttributeValues;for(var d in l){var h=l[d];if(h.location>=0){var y=u[d];if(void 0===y&&("instanceMatrix"===d&&a.instanceMatrix&&(y=a.instanceMatrix),"instanceColor"===d&&a.instanceColor&&(y=a.instanceColor)),void 0!==y){var b=y.normalized,x=y.itemSize,w=n.get(y);if(void 0===w)continue;var k=w.buffer,S=w.type,E=w.bytesPerElement;if(y.isInterleavedBufferAttribute){var T=y.data,C=T.stride,_=y.offset;if(T&&T.isInstancedInterleavedBuffer){for(var M=0;M<h.locationSize;M++)m(h.location+M,T.meshPerAttribute);!0!==a.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=T.meshPerAttribute*T.count)}else for(var I=0;I<h.locationSize;I++)f(h.location+I);e.bindBuffer(34962,k);for(var N=0;N<h.locationSize;N++)g(h.location+N,x/h.locationSize,S,b,C*E,(_+x/h.locationSize*N)*E)}else{if(y.isInstancedBufferAttribute){for(var A=0;A<h.locationSize;A++)m(h.location+A,y.meshPerAttribute);!0!==a.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)}else for(var R=0;R<h.locationSize;R++)f(h.location+R);e.bindBuffer(34962,k);for(var O=0;O<h.locationSize;O++)g(h.location+O,x/h.locationSize,S,b,x*E,x/h.locationSize*O*E)}}else if(void 0!==c){var D=c[d];if(void 0!==D)switch(D.length){case 2:e.vertexAttrib2fv(h.location,D);break;case 3:e.vertexAttrib3fv(h.location,D);break;case 4:e.vertexAttrib4fv(h.location,D);break;default:e.vertexAttrib1fv(h.location,D)}}}}v()}}(a,u,d,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){for(var e in y(),s){var t=s[e];for(var n in t){var r=t[n];for(var a in r)d(r[a].object),delete r[a];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var a in r)d(r[a].object),delete r[a];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var a in r)d(r[a].object),delete r[a];delete n[e.id]}}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:v}}function a1(e,t,n,r){var a,i=r.isWebGL2;this.setMode=function(e){a=e},this.render=function(t,r){e.drawArrays(a,t,r),n.update(r,a,1)},this.renderInstances=function(r,o,s){if(0!==s){var u,l;if(i)u=e,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](a,r,o,s),n.update(o,a,s)}}}function i1(e,t,n){var r;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var i="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=a(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=i||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),d=e.getParameter(35660),h=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),v=e.getParameter(36348),g=e.getParameter(36349),y=d>0,b=i||t.has("OES_texture_float");return{isWebGL2:i,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:a,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:i?e.getParameter(36183):0}}function o1(e){var t=this,n=null,r=0,a=!1,i=!1,o=new G0,s=new bJ,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,a){var i=null!==e?e.length:0,l=null;if(0!==i){if(l=u.value,!0!==a||null===l){var c=r+4*i,d=n.matrixWorldInverse;s.getNormalMatrix(d),(null===l||l.length<c)&&(l=new Float32Array(c));for(var h=0,p=r;h!==i;++h,p+=4)o.copy(e[h]).applyMatrix4(d,s),o.normal.toArray(l,p),l[p+3]=o.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=i,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,i){var o=0!==e.length||t||0!==r||a;return a=t,n=c(e,i,0),r=e.length,o},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,l()},this.setState=function(t,o,s){var d=t.clippingPlanes,h=t.clipIntersection,p=t.clipShadows,f=e.get(t);if(!a||null===d||0===d.length||i&&!p)i?c(null):l();else{var m=i?0:r,v=4*m,g=f.clippingState||null;u.value=g,g=c(d,o,v,s);for(var y=0;y!==v;++y)g[y]=n[y];f.clippingState=g,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=m}}}function s1(e){var t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var a=t.get(n);void 0!==a&&(t.delete(n),a.dispose())}return{get:function(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){var i=a.mapping;if(303===i||304===i){if(t.has(a))return n(t.get(a).texture,a.mapping);var o=a.image;if(o&&o.height>0){var s=e.getRenderTarget(),u=new W0(o.height/2);return u.fromEquirectangularTexture(e,a),t.set(a,u),e.setRenderTarget(s),a.addEventListener("dispose",r),n(u.texture,a.mapping)}return null}}return a},dispose:function(){t=new WeakMap}}}t1.physical={uniforms:L0([t1.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new gJ(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenTint:{value:new J$(0)},sheenRoughness:{value:0},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new gJ},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new J$(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new J$(1,1,1)},specularTintMap:{value:null}}]),vertexShader:$0.meshphysical_vert,fragmentShader:$0.meshphysical_frag};var u1=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return M(this,n),(e=t.call(this)).type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=a,e.top=i,e.bottom=o,e.near=s,e.far=u,e.updateProjectionMatrix(),e}return(0,I.Z)(n,[{key:"copy",value:function(e,t){return pl(R(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,a,i){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=a,this.view.height=i,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,a=n-e,i=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i=(a+=u*this.view.offsetX)+u*this.view.width,s=(o-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(a,i,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=pl(R(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(j0);u1.prototype.isOrthographicCamera=!0;var l1=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).type="RawShaderMaterial",r}return(0,I.Z)(n)}(F0);l1.prototype.isRawShaderMaterial=!0;var c1=Math.pow(2,8),d1=[.125,.215,.35,.446,.526,.582],h1=5+d1.length,p1={3e3:0,3001:1,3002:2,3004:3,3005:4,3006:5,3007:6},f1=new u1,m1=function(){for(var e=[],t=[],n=[],r=8,a=0;a<h1;a++){var i=Math.pow(2,r);t.push(i);var o=1/i;a>4?o=d1[a-8+4-1]:0==a&&(o=0),n.push(o);for(var s=1/(i-1),u=-s/2,l=1+s/2,c=[u,u,l,u,l,l,u,u,l,l,u,l],d=new Float32Array(108),h=new Float32Array(72),p=new Float32Array(36),f=0;f<6;f++){var m=f%3*2/3-1,v=f>2?0:-1,g=[m,v,0,m+2/3,v,0,m+2/3,v+1,0,m,v,0,m+2/3,v+1,0,m,v+1,0];d.set(g,18*f),h.set(c,12*f);var y=[f,f,f,f,f,f];p.set(y,6*f)}var b=new p0;b.setAttribute("position",new n0(d,3)),b.setAttribute("uv",new n0(h,2)),b.setAttribute("faceIndex",new n0(p,1)),e.push(b),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}(),v1=m1._lodPlanes,g1=m1._sizeLods,y1=m1._sigmas,b1=new J$,x1=null,w1=(1+Math.sqrt(5))/2,k1=1/w1,S1=[new NJ(1,1,1),new NJ(-1,1,1),new NJ(1,1,-1),new NJ(-1,1,-1),new NJ(0,w1,k1),new NJ(0,w1,-k1),new NJ(k1,0,w1),new NJ(-k1,0,w1),new NJ(w1,k1,0),new NJ(-w1,k1,0)],E1=function(){function e(t){M(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(e){var t=new Float32Array(20),n=new NJ(0,1,0);return new l1({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:p1[3e3]},outputEncoding:{value:p1[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}(),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return(0,I.Z)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;x1=this._renderer.getRenderTarget();var a=this._allocateTargets();return this._sceneToCubeUV(e,n,r,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}},{key:"fromEquirectangular",value:function(e){return this._fromTexture(e)}},{key:"fromCubemap",value:function(e){return this._fromTexture(e)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=I1(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=M1(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<v1.length;e++)v1[e].dispose()}},{key:"_cleanup",value:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(x1),e.scissorTest=!1,_1(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e){x1=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}},{key:"_allocateTargets",value:function(e){var t={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:T1(e)?e.encoding:3002,depthBuffer:!1},n=C1(t);return n.depthBuffer=!e,this._pingPongRenderTarget=C1(t),n}},{key:"_compileMaterial",value:function(e){var t=new A0(v1[0],e);this._renderer.compile(t,f1)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var a=new z0(90,1,t,n),i=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,l=s.outputEncoding,c=s.toneMapping;s.getClearColor(b1),s.toneMapping=0,s.outputEncoding=3e3,s.autoClear=!1;var d=new $$({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new A0(new O0,d),p=!1,f=e.background;f?f.isColor&&(d.color.copy(f),e.background=null,p=!0):(d.color.copy(b1),p=!0);for(var m=0;m<6;m++){var v=m%3;0==v?(a.up.set(0,i[m],0),a.lookAt(o[m],0,0)):1==v?(a.up.set(0,0,i[m]),a.lookAt(0,o[m],0)):(a.up.set(0,i[m],0),a.lookAt(0,0,o[m])),_1(r,v*c1,m>2?c1:0,c1,c1),s.setRenderTarget(r),p&&s.render(h,a),s.render(e,a)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=c,s.outputEncoding=l,s.autoClear=u,e.background=f}},{key:"_setEncoding",value:function(e,t){!0===this._renderer.capabilities.isWebGL2&&1023===t.format&&1009===t.type&&3001===t.encoding?e.value=p1[3e3]:e.value=p1[t.encoding]}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=I1()):null==this._equirectShader&&(this._equirectShader=M1());var r=e.isCubeTexture?this._cubemapShader:this._equirectShader,a=new A0(v1[0],r),i=r.uniforms;i.envMap.value=e,e.isCubeTexture||i.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(i.inputEncoding,e),this._setEncoding(i.outputEncoding,t.texture),_1(t,0,0,3*c1,2*c1),n.setRenderTarget(t),n.render(a,f1)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<h1;r++){var a=Math.sqrt(y1[r]*y1[r]-y1[r-1]*y1[r-1]),i=S1[(r-1)%S1.length];this._blur(e,r-1,r,a,i)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,a){var i=this._pingPongRenderTarget;this._halfBlur(e,i,t,n,r,"latitudinal",a),this._halfBlur(i,e,n,n,r,"longitudinal",a)}},{key:"_halfBlur",value:function(e,t,n,r,a,i,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==i&&"longitudinal"!==i&&console.error("blur direction must be either latitudinal or longitudinal!");var l=new A0(v1[r],u),c=u.uniforms,d=g1[n]-1,h=isFinite(a)?Math.PI/(2*d):2*Math.PI/39,p=a/h,f=isFinite(a)?1+Math.floor(3*p):20;f>20&&console.warn("sigmaRadians, ".concat(a,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to 20"));for(var m=[],v=0,g=0;g<20;++g){var y=g/p,b=Math.exp(-y*y/2);m.push(b),0==g?v+=b:g<f&&(v+=2*b)}for(var x=0;x<m.length;x++)m[x]=m[x]/v;c.envMap.value=e.texture,c.samples.value=f,c.weights.value=m,c.latitudinal.value="latitudinal"===i,o&&(c.poleAxis.value=o),c.dTheta.value=h,c.mipInt.value=8-n,this._setEncoding(c.inputEncoding,e.texture),this._setEncoding(c.outputEncoding,e.texture);var w=g1[r];_1(t,3*Math.max(0,c1-2*w),(0===r?0:2*c1)+2*w*(r>4?r-8+4:0),3*w,2*w),s.setRenderTarget(t),s.render(l,f1)}}]),e}();function T1(e){return void 0!==e&&1009===e.type&&(3e3===e.encoding||3001===e.encoding||3007===e.encoding)}function C1(e){var t=new _J(3*c1,3*c1,e);return t.texture.mapping=306,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function _1(e,t,n,r,a){e.viewport.set(t,n,r,a),e.scissor.set(t,n,r,a)}function M1(){var e=new gJ(1,1);return new l1({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:p1[3e3]},outputEncoding:{value:p1[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function I1(){return new l1({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:p1[3e3]},outputEncoding:{value:p1[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function N1(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var a=t.get(n);void 0!==a&&(t.delete(n),a.dispose())}return{get:function(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){var i=a.mapping,o=303===i||304===i,s=301===i||302===i;if(o||s){if(t.has(a))return t.get(a).texture;var u=a.image;if(o&&u&&u.height>0||s&&u&&function(e){for(var t=0,n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(u)){var l=e.getRenderTarget();null===n&&(n=new E1(e));var c=o?n.fromEquirectangular(a):n.fromCubemap(a);return t.set(a,c),e.setRenderTarget(l),a.addEventListener("dispose",r),c.texture}return null}}return a},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function A1(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function R1(e,t,n,r){var a={},i=new WeakMap;function o(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);s.removeEventListener("dispose",o),delete a[s.id];var l=i.get(s);l&&(t.remove(l),i.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,a=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],d=s[u+1],h=s[u+2];n.push(c,d,d,h,h,c)}}else{var p=a.array;o=a.version;for(var f=0,m=p.length/3-1;f<m;f+=3){var v=f+0,g=f+1,y=f+2;n.push(v,g,g,y,y,v)}}var b=new(xJ(n)>65535?a0:r0)(n,1);b.version=o;var x=i.get(e);x&&t.remove(x),i.set(e,b)}return{get:function(e,t){return!0===a[t.id]||(t.addEventListener("dispose",o),a[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var a=e.morphAttributes;for(var i in a)for(var o=a[i],s=0,u=o.length;s<u;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=i.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return i.get(e)}}}function O1(e,t,n,r){var a,i,o,s=r.isWebGL2;this.setMode=function(e){a=e},this.setIndex=function(e){i=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(a,r,i,t*o),n.update(r,a,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,d;if(s)c=e,d="drawElementsInstanced";else if(d="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[d](a,u,i,r*o,l),n.update(u,a,l)}}}function D1(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}var L1=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return M(this,n),(e=t.call(this,null)).image={data:r,width:a,height:i,depth:o},e.magFilter=1003,e.minFilter=1003,e.wrapR=1001,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,I.Z)(n)}(EJ);function P1(e,t){return e[0]-t[0]}function F1(e,t){return Math.abs(t[1])-Math.abs(e[1])}function j1(e,t){var n=1,r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function z1(e,t,n){for(var r={},a=new Float32Array(8),i=new WeakMap,o=new NJ,s=[],u=0;u<8;u++)s[u]=[u,0];return{update:function(u,l,c,d){var h=u.morphTargetInfluences;if(!0===t.isWebGL2){var p=l.morphAttributes.position.length,f=i.get(l);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();var m=void 0!==l.morphAttributes.normal,v=l.morphAttributes.position,g=l.morphAttributes.normal||[],y=!0===m?2:1,b=l.attributes.position.count*y,x=1;b>t.maxTextureSize&&(x=Math.ceil(b/t.maxTextureSize),b=t.maxTextureSize);var w=new Float32Array(b*x*4*p),k=new L1(w,b,x,p);k.format=1023,k.type=1015;for(var S=4*y,E=0;E<p;E++)for(var T=v[E],C=g[E],_=b*x*4*E,M=0;M<T.count;M++){o.fromBufferAttribute(T,M),!0===T.normalized&&j1(o,T);var I=M*S;w[_+I+0]=o.x,w[_+I+1]=o.y,w[_+I+2]=o.z,w[_+I+3]=0,!0===m&&(o.fromBufferAttribute(C,M),!0===C.normalized&&j1(o,C),w[_+I+4]=o.x,w[_+I+5]=o.y,w[_+I+6]=o.z,w[_+I+7]=0)}f={count:p,texture:k,size:new gJ(b,x)},i.set(l,f)}for(var N=0,A=0;A<h.length;A++)N+=h[A];var R=l.morphTargetsRelative?1:1-N;d.getUniforms().setValue(e,"morphTargetBaseInfluence",R),d.getUniforms().setValue(e,"morphTargetInfluences",h),d.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),d.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{var O=void 0===h?0:h.length,D=r[l.id];if(void 0===D||D.length!==O){D=[];for(var L=0;L<O;L++)D[L]=[L,0];r[l.id]=D}for(var P=0;P<O;P++){var F=D[P];F[0]=P,F[1]=h[P]}D.sort(F1);for(var j=0;j<8;j++)j<O&&D[j][1]?(s[j][0]=D[j][0],s[j][1]=D[j][1]):(s[j][0]=Number.MAX_SAFE_INTEGER,s[j][1]=0);s.sort(P1);for(var z=l.morphAttributes.position,B=l.morphAttributes.normal,U=0,W=0;W<8;W++){var V=s[W],Z=V[0],H=V[1];Z!==Number.MAX_SAFE_INTEGER&&H?(z&&l.getAttribute("morphTarget"+W)!==z[Z]&&l.setAttribute("morphTarget"+W,z[Z]),B&&l.getAttribute("morphNormal"+W)!==B[Z]&&l.setAttribute("morphNormal"+W,B[Z]),a[W]=H,U+=H):(z&&!0===l.hasAttribute("morphTarget"+W)&&l.deleteAttribute("morphTarget"+W),B&&!0===l.hasAttribute("morphNormal"+W)&&l.deleteAttribute("morphNormal"+W),a[W]=0)}var G=l.morphTargetsRelative?1:1-U;d.getUniforms().setValue(e,"morphTargetBaseInfluence",G),d.getUniforms().setValue(e,"morphTargetInfluences",a)}}}}function B1(e,t,n,r){var a=new WeakMap;function i(e){var t=e.target;t.removeEventListener("dispose",i),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=r.render.frame,s=e.geometry,u=t.get(e,s);return a.get(u)!==o&&(t.update(u),a.set(u,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",i)&&e.addEventListener("dispose",i),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u},dispose:function(){a=new WeakMap}}}L1.prototype.isDataTexture2DArray=!0;var U1=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return M(this,n),(e=t.call(this,null)).image={data:r,width:a,height:i,depth:o},e.magFilter=1003,e.minFilter=1003,e.wrapR=1001,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,I.Z)(n)}(EJ);U1.prototype.isDataTexture3D=!0;var W1=new EJ,V1=new L1,Z1=new U1,H1=new U0,G1=[],q1=[],X1=new Float32Array(16),Y1=new Float32Array(9),K1=new Float32Array(4);function Q1(e,t,n){var r=e[0];if(r<=0||r>0)return e;var a=t*n,i=G1[a];if(void 0===i&&(i=new Float32Array(a),G1[a]=i),0!==t){r.toArray(i,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(i,s)}return i}function J1(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function $1(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function e2(e,t){var n=q1[t];void 0===n&&(n=new Int32Array(t),q1[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function t2(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function n2(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(J1(n,t))return;e.uniform2fv(this.addr,t),$1(n,t)}}function r2(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(J1(n,t))return;e.uniform3fv(this.addr,t),$1(n,t)}}function a2(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(J1(n,t))return;e.uniform4fv(this.addr,t),$1(n,t)}}function i2(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(J1(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),$1(n,t)}else{if(J1(n,r))return;K1.set(r),e.uniformMatrix2fv(this.addr,!1,K1),$1(n,r)}}function o2(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(J1(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),$1(n,t)}else{if(J1(n,r))return;Y1.set(r),e.uniformMatrix3fv(this.addr,!1,Y1),$1(n,r)}}function s2(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(J1(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),$1(n,t)}else{if(J1(n,r))return;X1.set(r),e.uniformMatrix4fv(this.addr,!1,X1),$1(n,r)}}function u2(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function l2(e,t){var n=this.cache;J1(n,t)||(e.uniform2iv(this.addr,t),$1(n,t))}function c2(e,t){var n=this.cache;J1(n,t)||(e.uniform3iv(this.addr,t),$1(n,t))}function d2(e,t){var n=this.cache;J1(n,t)||(e.uniform4iv(this.addr,t),$1(n,t))}function h2(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function p2(e,t){var n=this.cache;J1(n,t)||(e.uniform2uiv(this.addr,t),$1(n,t))}function f2(e,t){var n=this.cache;J1(n,t)||(e.uniform3uiv(this.addr,t),$1(n,t))}function m2(e,t){var n=this.cache;J1(n,t)||(e.uniform4uiv(this.addr,t),$1(n,t))}function v2(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.safeSetTexture2D(t||W1,a)}function g2(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTexture3D(t||Z1,a)}function y2(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.safeSetTextureCube(t||H1,a)}function b2(e,t,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),n.setTexture2DArray(t||V1,a)}function x2(e,t){e.uniform1fv(this.addr,t)}function w2(e,t){var n=Q1(t,this.size,2);e.uniform2fv(this.addr,n)}function k2(e,t){var n=Q1(t,this.size,3);e.uniform3fv(this.addr,n)}function S2(e,t){var n=Q1(t,this.size,4);e.uniform4fv(this.addr,n)}function E2(e,t){var n=Q1(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function T2(e,t){var n=Q1(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function C2(e,t){var n=Q1(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function _2(e,t){e.uniform1iv(this.addr,t)}function M2(e,t){e.uniform2iv(this.addr,t)}function I2(e,t){e.uniform3iv(this.addr,t)}function N2(e,t){e.uniform4iv(this.addr,t)}function A2(e,t){e.uniform1uiv(this.addr,t)}function R2(e,t){e.uniform2uiv(this.addr,t)}function O2(e,t){e.uniform3uiv(this.addr,t)}function D2(e,t){e.uniform4uiv(this.addr,t)}function L2(e,t,n){var r=t.length,a=e2(n,r);e.uniform1iv(this.addr,a);for(var i=0;i!==r;++i)n.safeSetTexture2D(t[i]||W1,a[i])}function P2(e,t,n){var r=t.length,a=e2(n,r);e.uniform1iv(this.addr,a);for(var i=0;i!==r;++i)n.safeSetTextureCube(t[i]||H1,a[i])}function F2(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return t2;case 35664:return n2;case 35665:return r2;case 35666:return a2;case 35674:return i2;case 35675:return o2;case 35676:return s2;case 5124:case 35670:return u2;case 35667:case 35671:return l2;case 35668:case 35672:return c2;case 35669:case 35673:return d2;case 5125:return h2;case 36294:return p2;case 36295:return f2;case 36296:return m2;case 35678:case 36198:case 36298:case 36306:case 35682:return v2;case 35679:case 36299:case 36307:return g2;case 35680:case 36300:case 36308:case 36293:return y2;case 36289:case 36303:case 36311:case 36292:return b2}}(t.type)}function j2(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return x2;case 35664:return w2;case 35665:return k2;case 35666:return S2;case 35674:return E2;case 35675:return T2;case 35676:return C2;case 5124:case 35670:return _2;case 35667:case 35671:return M2;case 35668:case 35672:return I2;case 35669:case 35673:return N2;case 5125:return A2;case 36294:return R2;case 36295:return O2;case 36296:return D2;case 35678:case 36198:case 36298:case 36306:case 35682:return L2;case 35680:case 36300:case 36308:case 36293:return P2}}(t.type)}function z2(e){this.id=e,this.seq=[],this.map={}}j2.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),$1(t,e)},z2.prototype.setValue=function(e,t,n){for(var r=this.seq,a=0,i=r.length;a!==i;++a){var o=r[a];o.setValue(e,t[o.id],n)}};var B2=/(\w+)(\])?(\[|\.)?/g;function U2(e,t){e.seq.push(t),e.map[t.id]=t}function W2(e,t,n){var r=e.name,a=r.length;for(B2.lastIndex=0;;){var i=B2.exec(r),o=B2.lastIndex,s=i[1],u="]"===i[2],l=i[3];if(u&&(s|=0),void 0===l||"["===l&&o+2===a){U2(n,void 0===l?new F2(s,e,t):new j2(s,e,t));break}var c=n.map[s];void 0===c&&U2(n,c=new z2(s)),n=c}}function V2(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var a=e.getActiveUniform(t,r);W2(a,e.getUniformLocation(t,a.name),this)}}function Z2(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}V2.prototype.setValue=function(e,t,n,r){var a=this.map[t];void 0!==a&&a.setValue(e,n,r)},V2.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},V2.upload=function(e,t,n,r){for(var a=0,i=t.length;a!==i;++a){var o=t[a],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},V2.seqWithValue=function(e,t){for(var n=[],r=0,a=e.length;r!==a;++r){var i=e[r];i.id in t&&n.push(i)}return n};var H2=0;function G2(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function q2(e,t,n){var r=e.getShaderParameter(t,35713),a=e.getShaderInfoLog(t).trim();return r&&""===a?"":n.toUpperCase()+"\n\n"+a+"\n\n"+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function X2(e,t){var n=G2(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Y2(e,t){var n=G2(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function K2(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Q2(e){return""!==e}function J2(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function $2(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var e3=/^[ \t]*#include +<([\w\d./]+)>/gm;function t3(e){return e.replace(e3,n3)}function n3(e,t){var n=$0[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return t3(n)}var r3=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,a3=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function i3(e){return e.replace(a3,s3).replace(r3,o3)}function o3(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),s3(e,t,n,r)}function s3(e,t,n,r){for(var a="",i=parseInt(t);i<parseInt(n);i++)a+=r.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return a}function u3(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function l3(e,t,n,r){var a,i,o=e.getContext(),s=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),d=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),h=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case 302:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(n),p=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),f=e.gammaFactor>0?e.gammaFactor:1,m=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Q2).join("\n")}(n),v=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),g=o.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((a=[v].filter(Q2).join("\n")).length>0&&(a+="\n"),(i=[m,v].filter(Q2).join("\n")).length>0&&(i+="\n")):(a=[u3(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Q2).join("\n"),i=[m,u3(n),"#define SHADER_NAME "+n.shaderName,v,"#define GAMMA_FACTOR "+f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?$0.tonemapping_pars_fragment:"",0!==n.toneMapping?K2("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",1022===n.format?"#define OPAQUE":"",$0.encodings_pars_fragment,n.map?X2("mapTexelToLinear",n.mapEncoding):"",n.matcap?X2("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?X2("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?X2("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularTintMap?X2("specularTintMapTexelToLinear",n.specularTintMapEncoding):"",n.lightMap?X2("lightMapTexelToLinear",n.lightMapEncoding):"",Y2("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Q2).join("\n")),u=$2(u=J2(u=t3(u),n),n),l=$2(l=J2(l=t3(l),n),n),u=i3(u),l=i3(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",a=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+a,i=["#define varying in","300 es"===n.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+i);var b,x,w=y+i+l,k=Z2(o,35633,y+a+u),S=Z2(o,35632,w);if(o.attachShader(g,k),o.attachShader(g,S),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var E=o.getProgramInfoLog(g).trim(),T=o.getShaderInfoLog(k).trim(),C=o.getShaderInfoLog(S).trim(),_=!0,M=!0;if(!1===o.getProgramParameter(g,35714)){_=!1;var I=q2(o,k,"vertex"),N=q2(o,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+E+"\n"+I+"\n"+N)}else""!==E?console.warn("THREE.WebGLProgram: Program Info Log:",E):""!==T&&""!==C||(M=!1);M&&(this.diagnostics={runnable:_,programLog:E,vertexShader:{log:T,prefix:a},fragmentShader:{log:C,prefix:i}})}return o.deleteShader(k),o.deleteShader(S),this.getUniforms=function(){return void 0===b&&(b=new V2(o,g)),b},this.getAttributes=function(){return void 0===x&&(x=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),a=0;a<r;a++){var i=e.getActiveAttrib(t,a),o=i.name,s=1;35674===i.type&&(s=2),35675===i.type&&(s=3),35676===i.type&&(s=4),n[o]={type:i.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,g)),x},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=H2++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=k,this.fragmentShader=S,this}function c3(e,t,n,r,a,i,o){var s=[],u=a.isWebGL2,l=a.logarithmicDepthBuffer,c=a.floatVertexTextures,d=a.maxVertexUniforms,h=a.vertexTextures,p=a.precision,f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},m=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheen","transmission","transmissionMap","thicknessMap"];function v(e){var t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=3e3,u&&e&&e.isTexture&&1023===e.format&&1009===e.type&&3001===e.encoding&&(t=3e3),t}return{getParameters:function(i,s,m,g,y){var b,x,w=g.fog,k=i.isMeshStandardMaterial?g.environment:null,S=(i.isMeshStandardMaterial?n:t).get(i.envMap||k),E=f[i.type],T=y.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(c)return 1024;var n=d,r=Math.floor((n-20)/4),a=Math.min(r,t.length);return a<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+a+"."),0):a}(y):0;if(null!==i.precision&&((p=a.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",p,"instead.")),E){var C=t1[E];b=C.vertexShader,x=C.fragmentShader}else b=i.vertexShader,x=i.fragmentShader;var _=e.getRenderTarget(),M=i.alphaTest>0,I=i.clearcoat>0;return{isWebGL2:u,shaderID:E,shaderName:i.type,vertexShader:b,fragmentShader:x,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:p,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:h,outputEncoding:null!==_?v(_.texture):e.outputEncoding,map:!!i.map,mapEncoding:v(i.map),matcap:!!i.matcap,matcapEncoding:v(i.matcap),envMap:!!S,envMapMode:S&&S.mapping,envMapEncoding:v(S),envMapCubeUV:!!S&&(306===S.mapping||307===S.mapping),lightMap:!!i.lightMap,lightMapEncoding:v(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:v(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:0===i.normalMapType,clearcoat:I,clearcoatMap:I&&!!i.clearcoatMap,clearcoatRoughnessMap:I&&!!i.clearcoatRoughnessMap,clearcoatNormalMap:I&&!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,specularIntensityMap:!!i.specularIntensityMap,specularTintMap:!!i.specularTintMap,specularTintMapEncoding:v(i.specularTintMap),alphaMap:!!i.alphaMap,alphaTest:M,gradientMap:!!i.gradientMap,sheen:i.sheen>0,transmission:i.transmission>0,transmissionMap:!!i.transmissionMap,thicknessMap:!!i.thicknessMap,combine:i.combine,vertexTangents:!!i.normalMap&&!!y.geometry&&!!y.geometry.attributes.tangent,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&!!y.geometry&&!!y.geometry.attributes.color&&4===y.geometry.attributes.color.itemSize,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap||i.thicknessMap||i.specularIntensityMap||i.specularTintMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmission>0||i.transmissionMap||i.thicknessMap||i.specularIntensityMap||i.specularTintMap||!i.displacementMap),fog:!!w,useFog:i.fog,fogExp2:w&&w.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:l,skinning:!0===y.isSkinnedMesh&&T>0,maxBones:T,useVertexTexture:c,morphTargets:!!y.geometry&&!!y.geometry.morphAttributes.position,morphNormals:!!y.geometry&&!!y.geometry.morphAttributes.normal,morphTargetsCount:y.geometry&&y.geometry.morphAttributes.position?y.geometry.morphAttributes.position.length:0,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:i.format,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&m.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,doubleSided:2===i.side,flipSided:1===i.side,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(!1===t.isRawShaderMaterial){for(var a=0;a<m.length;a++)n.push(t[m[a]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=f[e.type];if(n){var r=t1[n];t=P0.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,a=0,o=s.length;a<o;a++){var u=s[a];if(u.cacheKey===n){++(r=u).usedTimes;break}}return void 0===r&&(r=new l3(e,n,t,i),s.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){var t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function d3(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function h3(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function p3(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function f3(e){var t=[],n=0,r=[],a=[],i=[],o={id:-1};function s(r,a,i,s,u,l){var c=t[n],d=e.get(i);return void 0===c?(c={id:r.id,object:r,geometry:a,material:i,program:d.program||o,groupOrder:s,renderOrder:r.renderOrder,z:u,group:l},t[n]=c):(c.id=r.id,c.object=r,c.geometry=a,c.material=i,c.program=d.program||o,c.groupOrder=s,c.renderOrder=r.renderOrder,c.z=u,c.group=l),n++,c}return{opaque:r,transmissive:a,transparent:i,init:function(){n=0,r.length=0,a.length=0,i.length=0},push:function(e,t,n,o,u,l){var c=s(e,t,n,o,u,l);n.transmission>0?a.push(c):!0===n.transparent?i.push(c):r.push(c)},unshift:function(e,t,n,o,u,l){var c=s(e,t,n,o,u,l);n.transmission>0?a.unshift(c):!0===n.transparent?i.unshift(c):r.unshift(c)},finish:function(){for(var e=n,r=t.length;e<r;e++){var a=t[e];if(null===a.id)break;a.id=null,a.object=null,a.geometry=null,a.material=null,a.program=null,a.group=null}},sort:function(e,t){r.length>1&&r.sort(e||h3),a.length>1&&a.sort(t||p3),i.length>1&&i.sort(t||p3)}}}function m3(e){var t=new WeakMap;return{get:function(n,r){var a;return!1===t.has(n)?(a=new f3(e),t.set(n,[a])):r>=t.get(n).length?(a=new f3(e),t.get(n).push(a)):a=t.get(n)[r],a},dispose:function(){t=new WeakMap}}}function v3(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new NJ,color:new J$};break;case"SpotLight":n={position:new NJ,direction:new NJ,color:new J$,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new NJ,color:new J$,distance:0,decay:0};break;case"HemisphereLight":n={direction:new NJ,skyColor:new J$,groundColor:new J$};break;case"RectAreaLight":n={color:new J$,position:new NJ,halfWidth:new NJ,halfHeight:new NJ}}return e[t.id]=n,n}}}var g3=0;function y3(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function b3(e,t){for(var n=new v3,r=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gJ};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gJ,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0;i<9;i++)a.probe.push(new NJ);var o=new NJ,s=new s$,u=new s$;return{setup:function(i,o){for(var s=0,u=0,l=0,c=0;c<9;c++)a.probe[c].set(0,0,0);var d=0,h=0,p=0,f=0,m=0,v=0,g=0,y=0;i.sort(y3);for(var b=!0!==o?Math.PI:1,x=0,w=i.length;x<w;x++){var k=i[x],S=k.color,E=k.intensity,T=k.distance,C=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)s+=S.r*E*b,u+=S.g*E*b,l+=S.b*E*b;else if(k.isLightProbe)for(var _=0;_<9;_++)a.probe[_].addScaledVector(k.sh.coefficients[_],E);else if(k.isDirectionalLight){var M=n.get(k);if(M.color.copy(k.color).multiplyScalar(k.intensity*b),k.castShadow){var I=k.shadow,N=r.get(k);N.shadowBias=I.bias,N.shadowNormalBias=I.normalBias,N.shadowRadius=I.radius,N.shadowMapSize=I.mapSize,a.directionalShadow[d]=N,a.directionalShadowMap[d]=C,a.directionalShadowMatrix[d]=k.shadow.matrix,v++}a.directional[d]=M,d++}else if(k.isSpotLight){var A=n.get(k);if(A.position.setFromMatrixPosition(k.matrixWorld),A.color.copy(S).multiplyScalar(E*b),A.distance=T,A.coneCos=Math.cos(k.angle),A.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),A.decay=k.decay,k.castShadow){var R=k.shadow,O=r.get(k);O.shadowBias=R.bias,O.shadowNormalBias=R.normalBias,O.shadowRadius=R.radius,O.shadowMapSize=R.mapSize,a.spotShadow[p]=O,a.spotShadowMap[p]=C,a.spotShadowMatrix[p]=k.shadow.matrix,y++}a.spot[p]=A,p++}else if(k.isRectAreaLight){var D=n.get(k);D.color.copy(S).multiplyScalar(E),D.halfWidth.set(.5*k.width,0,0),D.halfHeight.set(0,.5*k.height,0),a.rectArea[f]=D,f++}else if(k.isPointLight){var L=n.get(k);if(L.color.copy(k.color).multiplyScalar(k.intensity*b),L.distance=k.distance,L.decay=k.decay,k.castShadow){var P=k.shadow,F=r.get(k);F.shadowBias=P.bias,F.shadowNormalBias=P.normalBias,F.shadowRadius=P.radius,F.shadowMapSize=P.mapSize,F.shadowCameraNear=P.camera.near,F.shadowCameraFar=P.camera.far,a.pointShadow[h]=F,a.pointShadowMap[h]=C,a.pointShadowMatrix[h]=k.shadow.matrix,g++}a.point[h]=L,h++}else if(k.isHemisphereLight){var j=n.get(k);j.skyColor.copy(k.color).multiplyScalar(E*b),j.groundColor.copy(k.groundColor).multiplyScalar(E*b),a.hemi[m]=j,m++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(a.rectAreaLTC1=e1.LTC_FLOAT_1,a.rectAreaLTC2=e1.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=e1.LTC_HALF_1,a.rectAreaLTC2=e1.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=s,a.ambient[1]=u,a.ambient[2]=l;var z=a.hash;z.directionalLength===d&&z.pointLength===h&&z.spotLength===p&&z.rectAreaLength===f&&z.hemiLength===m&&z.numDirectionalShadows===v&&z.numPointShadows===g&&z.numSpotShadows===y||(a.directional.length=d,a.spot.length=p,a.rectArea.length=f,a.point.length=h,a.hemi.length=m,a.directionalShadow.length=v,a.directionalShadowMap.length=v,a.pointShadow.length=g,a.pointShadowMap.length=g,a.spotShadow.length=y,a.spotShadowMap.length=y,a.directionalShadowMatrix.length=v,a.pointShadowMatrix.length=g,a.spotShadowMatrix.length=y,z.directionalLength=d,z.pointLength=h,z.spotLength=p,z.rectAreaLength=f,z.hemiLength=m,z.numDirectionalShadows=v,z.numPointShadows=g,z.numSpotShadows=y,a.version=g3++)},setupView:function(e,t){for(var n=0,r=0,i=0,l=0,c=0,d=t.matrixWorldInverse,h=0,p=e.length;h<p;h++){var f=e[h];if(f.isDirectionalLight){var m=a.directional[n];m.direction.setFromMatrixPosition(f.matrixWorld),o.setFromMatrixPosition(f.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(d),n++}else if(f.isSpotLight){var v=a.spot[i];v.position.setFromMatrixPosition(f.matrixWorld),v.position.applyMatrix4(d),v.direction.setFromMatrixPosition(f.matrixWorld),o.setFromMatrixPosition(f.target.matrixWorld),v.direction.sub(o),v.direction.transformDirection(d),i++}else if(f.isRectAreaLight){var g=a.rectArea[l];g.position.setFromMatrixPosition(f.matrixWorld),g.position.applyMatrix4(d),u.identity(),s.copy(f.matrixWorld),s.premultiply(d),u.extractRotation(s),g.halfWidth.set(.5*f.width,0,0),g.halfHeight.set(0,.5*f.height,0),g.halfWidth.applyMatrix4(u),g.halfHeight.applyMatrix4(u),l++}else if(f.isPointLight){var y=a.point[r];y.position.setFromMatrixPosition(f.matrixWorld),y.position.applyMatrix4(d),r++}else if(f.isHemisphereLight){var b=a.hemi[c];b.direction.setFromMatrixPosition(f.matrixWorld),b.direction.transformDirection(d),b.direction.normalize(),c++}}},state:a}}function x3(e,t){var n=new b3(e,t),r=[],a=[];return{init:function(){r.length=0,a.length=0},state:{lightsArray:r,shadowsArray:a,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){a.push(e)}}}function w3(e,t){var n=new WeakMap;return{get:function(r){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(a=new x3(e,t),n.set(r,[a])):i>=n.get(r).length?(a=new x3(e,t),n.get(r).push(a)):a=n.get(r)[i],a},dispose:function(){n=new WeakMap}}}var k3=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="MeshDepthMaterial",r.depthPacking=3200,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(H$);k3.prototype.isMeshDepthMaterial=!0;var S3=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="MeshDistanceMaterial",r.referencePosition=new NJ,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(H$);function E3(e,t,n){var r=new Y0,a=new gJ,i=new gJ,o=new CJ,s=new k3({depthPacking:3201}),u=new S3,l={},c=n.maxTextureSize,d={0:1,1:0,2:2},h=new F0({uniforms:{shadow_pass:{value:null},resolution:{value:new gJ},radius:{value:4},samples:{value:8}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\nuniform float samples;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;var f=new p0;f.setAttribute("position",new n0(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var m=new A0(f,h),v=this;function g(n,r){var a=t.update(m);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,h.uniforms.samples.value=n.blurSamples,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,h,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,p.uniforms.samples.value=n.blurSamples,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,p,m,null)}function y(t,n,r,a,i,o,c){var h=null,p=!0===a.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(h=void 0!==p?p:!0===a.isPointLight?u:s,e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0){var f=h.uuid,m=r.uuid,v=l[f];void 0===v&&(v={},l[f]=v);var g=v[m];void 0===g&&(g=h.clone(),v[m]=g),h=g}return h.visible=r.visible,h.wireframe=r.wireframe,h.side=3===c?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:d[r.side],h.alphaMap=r.alphaMap,h.alphaTest=r.alphaTest,h.clipShadows=r.clipShadows,h.clippingPlanes=r.clippingPlanes,h.clipIntersection=r.clipIntersection,h.displacementMap=r.displacementMap,h.displacementScale=r.displacementScale,h.displacementBias=r.displacementBias,h.wireframeLinewidth=r.wireframeLinewidth,h.linewidth=r.linewidth,!0===a.isPointLight&&!0===h.isMeshDistanceMaterial&&(h.referencePosition.setFromMatrixPosition(a.matrixWorld),h.nearDistance=i,h.farDistance=o),h}function b(n,a,i,o,s){if(!1!==n.visible){if(n.layers.test(a.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,d=0,h=c.length;d<h;d++){var p=c[d],f=l[p.materialIndex];if(f&&f.visible){var m=y(n,0,f,o,i.near,i.far,s);e.renderBufferDirect(i,null,u,m,n,p)}}else if(l.visible){var v=y(n,0,l,o,i.near,i.far,s);e.renderBufferDirect(i,null,u,v,n,null)}}for(var g=n.children,x=0,w=g.length;x<w;x++)b(g[x],a,i,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1!==v.enabled&&(!1!==v.autoUpdate||!1!==v.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),l=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var p=0,f=t.length;p<f;p++){var m=t[p],y=m.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){a.copy(y.mapSize);var x=y.getFrameExtents();if(a.multiply(x),i.copy(y.mapSize),(a.x>c||a.y>c)&&(a.x>c&&(i.x=Math.floor(c/x.x),a.x=i.x*x.x,y.mapSize.x=i.x),a.y>c&&(i.y=Math.floor(c/x.y),a.y=i.y*x.y,y.mapSize.y=i.y)),null===y.map&&!y.isPointLightShadow&&3===this.type){var w={minFilter:1006,magFilter:1006,format:1023};y.map=new _J(a.x,a.y,w),y.map.texture.name=m.name+".shadowMap",y.mapPass=new _J(a.x,a.y,w),y.camera.updateProjectionMatrix()}if(null===y.map){y.map=new _J(a.x,a.y,{minFilter:1003,magFilter:1003,format:1023}),y.map.texture.name=m.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var k=y.getViewportCount(),S=0;S<k;S++){var E=y.getViewport(S);o.set(i.x*E.x,i.y*E.y,i.x*E.z,i.y*E.w),h.viewport(o),y.updateMatrices(m,S),r=y.getFrustum(),b(n,s,y.camera,m,this.type)}y.isPointLightShadow||3!==this.type||g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}v.needsUpdate=!1,e.setRenderTarget(u,l,d)}}}function T3(e,t,n){var r=n.isWebGL2,a=new function(){var t=!1,n=new CJ,r=null,a=new CJ(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,i,o,s){!0===s&&(t*=o,r*=o,i*=o),n.set(t,r,i,o),!1===a.equals(n)&&(e.clearColor(t,r,i,o),a.copy(n))},reset:function(){t=!1,r=null,a.set(-1,0,0,0)}}},i=new function(){var t=!1,n=null,r=null,a=null;return{setTest:function(e){e?F(2929):j(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){a!==t&&(e.clearDepth(t),a=t)},reset:function(){t=!1,n=null,r=null,a=null}}},o=new function(){var t=!1,n=null,r=null,a=null,i=null,o=null,s=null,u=null,l=null;return{setTest:function(e){t||(e?F(2960):j(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&a===n&&i===o||(e.stencilFunc(t,n,o),r=t,a=n,i=o)},setOp:function(t,n,r){o===t&&s===n&&u===r||(e.stencilOp(t,n,r),o=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,a=null,i=null,o=null,s=null,u=null,l=null}}},s={},u=null,l={},c=null,d=!1,h=null,p=null,f=null,m=null,v=null,g=null,y=null,b=!1,x=null,w=null,k=null,S=null,E=null,T=e.getParameter(35661),C=!1,_=0,M=e.getParameter(7938);-1!==M.indexOf("WebGL")?(_=parseFloat(/^WebGL (\d)/.exec(M)[1]),C=_>=1):-1!==M.indexOf("OpenGL ES")&&(_=parseFloat(/^OpenGL ES (\d)/.exec(M)[1]),C=_>=2);var I=null,N={},A=e.getParameter(3088),R=e.getParameter(2978),O=(new CJ).fromArray(A),D=(new CJ).fromArray(R);function L(t,n,r){var a=new Uint8Array(4),i=e.createTexture();e.bindTexture(t,i),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,a);return i}var P={};function F(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function j(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}P[3553]=L(3553,3553,1),P[34067]=L(34067,34069,6),a.setClear(0,0,0,1),i.setClear(1),o.setClear(0),F(2929),i.setFunc(3),V(!1),Z(1),F(2884),W(0);var z={100:32774,101:32778,102:32779};if(r)z[103]=32775,z[104]=32776;else{var B=t.get("EXT_blend_minmax");null!==B&&(z[103]=B.MIN_EXT,z[104]=B.MAX_EXT)}var U={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function W(t,n,r,a,i,o,s,u){if(0!==t){if(!1===d&&(F(3042),d=!0),5===t)i=i||n,o=o||r,s=s||a,n===p&&i===v||(e.blendEquationSeparate(z[n],z[i]),p=n,v=i),r===f&&a===m&&o===g&&s===y||(e.blendFuncSeparate(U[r],U[a],U[o],U[s]),f=r,m=a,g=o,y=s),h=t,b=null;else if(t!==h||u!==b){if(100===p&&100===v||(e.blendEquation(32774),p=100,v=100),u)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,m=null,g=null,y=null,h=t,b=u}}else!0===d&&(j(3042),d=!1)}function V(t){x!==t&&(t?e.frontFace(2304):e.frontFace(2305),x=t)}function Z(t){0!==t?(F(2884),t!==w&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):j(2884),w=t}function H(t,n,r){t?(F(32823),S===n&&E===r||(e.polygonOffset(n,r),S=n,E=r)):j(32823)}function G(t){void 0===t&&(t=33984+T-1),I!==t&&(e.activeTexture(t),I=t)}return{buffers:{color:a,depth:i,stencil:o},enable:F,disable:j,bindFramebuffer:function(t,n){return null===n&&null!==u&&(n=u),l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,r&&(36009===t&&(l[36160]=n),36160===t&&(l[36009]=n)),!0)},bindXRFramebuffer:function(t){t!==u&&(e.bindFramebuffer(36160,t),u=t)},useProgram:function(t){return c!==t&&(e.useProgram(t),c=t,!0)},setBlending:W,setMaterial:function(e,t){2===e.side?j(2884):F(2884);var n=1===e.side;t&&(n=!n),V(n),1===e.blending&&!1===e.transparent?W(0):W(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),i.setFunc(e.depthFunc),i.setTest(e.depthTest),i.setMask(e.depthWrite),a.setMask(e.colorWrite);var r=e.stencilWrite;o.setTest(r),r&&(o.setMask(e.stencilWriteMask),o.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),o.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),H(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?F(32926):j(32926)},setFlipSided:V,setCullFace:Z,setLineWidth:function(t){t!==k&&(C&&e.lineWidth(t),k=t)},setPolygonOffset:H,setScissorTest:function(e){e?F(3089):j(3089)},activeTexture:G,bindTexture:function(t,n){null===I&&G();var r=N[I];void 0===r&&(r={type:void 0,texture:void 0},N[I]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||P[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=N[I];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===D.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),D.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},I=null,N={},u=null,l={},c=null,d=!1,h=null,p=null,f=null,m=null,v=null,g=null,y=null,b=!1,x=null,w=null,k=null,S=null,E=null,O.set(0,0,e.canvas.width,e.canvas.height),D.set(0,0,e.canvas.width,e.canvas.height),a.reset(),i.reset(),o.reset()}}}function C3(e,t,n,r,a,i,o){var s,u=a.isWebGL2,l=a.maxTextures,c=a.maxCubemapSize,d=a.maxTextureSize,h=a.maxSamples,p=new WeakMap,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return f?new OffscreenCanvas(e,t):wJ("canvas")}function v(e,t,n,r){var a=1;if((e.width>r||e.height>r)&&(a=r/Math.max(e.width,e.height)),a<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var i=t?mJ:Math.floor,o=i(a*e.width),u=i(a*e.height);void 0===s&&(s=m(o,u));var l=n?m(o,u):s;return l.width=o,l.height=u,l.getContext("2d").drawImage(e,0,0,o,u),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+u+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function g(e){return pJ(e.width)&&pJ(e.height)}function y(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function b(t,n,a,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log2(Math.max(a,i,o))}function x(n,r,a,i){if(!1===u)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=r;return 6403===r&&(5126===a&&(o=33326),5131===a&&(o=33325),5121===a&&(o=33321)),6407===r&&(5126===a&&(o=34837),5131===a&&(o=34843),5121===a&&(o=32849)),6408===r&&(5126===a&&(o=34836),5131===a&&(o=34842),5121===a&&(o=3001===i?35907:32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function w(e){return 1003===e||1004===e||1005===e?9728:9729}function k(t){var n=t.target;n.removeEventListener("dispose",k),function(t){var n=r.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),r.remove(t))}(n),n.isVideoTexture&&p.delete(n),o.memory.textures--}function S(t){var n=t.target;n.removeEventListener("dispose",S),function(t){var n=t.texture,a=r.get(t),i=r.get(n);if(t){if(void 0!==i.__webglTexture&&(e.deleteTexture(i.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(a.__webglFramebuffer[s]),a.__webglDepthbuffer&&e.deleteRenderbuffer(a.__webglDepthbuffer[s]);else e.deleteFramebuffer(a.__webglFramebuffer),a.__webglDepthbuffer&&e.deleteRenderbuffer(a.__webglDepthbuffer),a.__webglMultisampledFramebuffer&&e.deleteFramebuffer(a.__webglMultisampledFramebuffer),a.__webglColorRenderbuffer&&e.deleteRenderbuffer(a.__webglColorRenderbuffer),a.__webglDepthRenderbuffer&&e.deleteRenderbuffer(a.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(var u=0,l=n.length;u<l;u++){var c=r.get(n[u]);c.__webglTexture&&(e.deleteTexture(c.__webglTexture),o.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(t)}}(n)}var E=0;function T(e,t){var a=r.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(e),e.version>0&&a.__version!==e.version){var i=e.image;if(void 0===i)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==i.complete)return void A(a,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,a.__webglTexture)}function C(t,a){var o=r.get(t);t.version>0&&o.__version!==t.version?function(t,r,a){if(6===r.image.length){N(t,r),n.activeTexture(33984+a),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var o=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),s=r.image[0]&&r.image[0].isDataTexture,l=[],d=0;d<6;d++)l[d]=o||s?s?r.image[d].image:r.image[d]:v(r.image[d],!1,!0,c);var h,p=l[0],f=g(p)||u,m=i.convert(r.format),w=i.convert(r.type),k=x(r.internalFormat,m,w,r.encoding);if(I(34067,r,f),o){for(var S=0;S<6;S++){h=l[S].mipmaps;for(var E=0;E<h.length;E++){var T=h[E];1023!==r.format&&1022!==r.format?null!==m?n.compressedTexImage2D(34069+S,E,k,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+S,E,k,T.width,T.height,0,m,w,T.data)}}t.__maxMipLevel=h.length-1}else{h=r.mipmaps;for(var C=0;C<6;C++)if(s){n.texImage2D(34069+C,0,k,l[C].width,l[C].height,0,m,w,l[C].data);for(var _=0;_<h.length;_++){var M=h[_].image[C].image;n.texImage2D(34069+C,_+1,k,M.width,M.height,0,m,w,M.data)}}else{n.texImage2D(34069+C,0,k,m,w,l[C]);for(var A=0;A<h.length;A++){var R=h[A];n.texImage2D(34069+C,A+1,k,m,w,R.image[C])}}t.__maxMipLevel=h.length}y(r,f)&&b(34067,r,p.width,p.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}}(o,t,a):(n.activeTexture(33984+a),n.bindTexture(34067,o.__webglTexture))}var _={1e3:10497,1001:33071,1002:33648},M={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function I(n,i,o){if(o?(e.texParameteri(n,10242,_[i.wrapS]),e.texParameteri(n,10243,_[i.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,_[i.wrapR]),e.texParameteri(n,10240,M[i.magFilter]),e.texParameteri(n,10241,M[i.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),1001===i.wrapS&&1001===i.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,w(i.magFilter)),e.texParameteri(n,10241,w(i.minFilter)),1003!==i.minFilter&&1006!==i.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(1015===i.type&&!1===t.has("OES_texture_float_linear"))return;if(!1===u&&1016===i.type&&!1===t.has("OES_texture_half_float_linear"))return;(i.anisotropy>1||r.get(i).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,a.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy)}}function N(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",k),t.__webglTexture=e.createTexture(),o.memory.textures++)}function A(t,r,a){var o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),N(t,r),n.activeTexture(33984+a),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var s,l=function(e){return!u&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(r)&&!1===g(r.image),c=v(r.image,l,!1,d),h=g(c)||u,p=i.convert(r.format),f=i.convert(r.type),m=x(r.internalFormat,p,f,r.encoding);I(o,r,h);var w=r.mipmaps;if(r.isDepthTexture)m=6402,u?m=1015===r.type?36012:1014===r.type?33190:1020===r.type?35056:33189:1015===r.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===r.format&&6402===m&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1012,f=i.convert(r.type)),1027===r.format&&6402===m&&(m=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,f=i.convert(r.type))),n.texImage2D(3553,0,m,c.width,c.height,0,p,f,null);else if(r.isDataTexture)if(w.length>0&&h){for(var k=0,S=w.length;k<S;k++)s=w[k],n.texImage2D(3553,k,m,s.width,s.height,0,p,f,s.data);r.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,p,f,c.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(var E=0,T=w.length;E<T;E++)s=w[E],1023!==r.format&&1022!==r.format?null!==p?n.compressedTexImage2D(3553,E,m,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,E,m,s.width,s.height,0,p,f,s.data);t.__maxMipLevel=w.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,p,f,c.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,p,f,c.data),t.__maxMipLevel=0;else if(w.length>0&&h){for(var C=0,_=w.length;C<_;C++)s=w[C],n.texImage2D(3553,C,m,p,f,s);r.generateMipmaps=!1,t.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,p,f,c),t.__maxMipLevel=0;y(r,h)&&b(o,r,c.width,c.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function R(t,a,o,s,u){var l=i.convert(o.format),c=i.convert(o.type),d=x(o.internalFormat,l,c,o.encoding);32879===u||35866===u?n.texImage3D(u,0,d,a.width,a.height,a.depth,0,l,c,null):n.texImage2D(u,0,d,a.width,a.height,0,l,c,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,u,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function O(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var a=33189;if(r){var o=n.depthTexture;o&&o.isDepthTexture&&(1015===o.type?a=36012:1014===o.type&&(a=33190));var s=D(n);e.renderbufferStorageMultisample(36161,s,a,n.width,n.height)}else e.renderbufferStorage(36161,a,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){var u=D(n);e.renderbufferStorageMultisample(36161,u,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var l=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,c=i.convert(l.format),d=i.convert(l.type),h=x(l.internalFormat,c,d,l.encoding);if(r){var p=D(n);e.renderbufferStorageMultisample(36161,p,h,n.width,n.height)}else e.renderbufferStorage(36161,h,n.width,n.height)}e.bindRenderbuffer(36161,null)}function D(e){return u&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}var L=!1,P=!1;this.allocateTextureUnit=function(){var e=E;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=T,this.setTexture2DArray=function(e,t){var a=r.get(e);e.version>0&&a.__version!==e.version?A(a,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,a.__webglTexture))},this.setTexture3D=function(e,t){var a=r.get(e);e.version>0&&a.__version!==e.version?A(a,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,a.__webglTexture))},this.setTextureCube=C,this.setupRenderTarget=function(t){var s=t.texture,l=r.get(t),c=r.get(s);t.addEventListener("dispose",S),!0!==t.isWebGLMultipleRenderTargets&&(c.__webglTexture=e.createTexture(),c.__version=s.version,o.memory.textures++);var d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,p=!0===t.isWebGLMultisampleRenderTarget,f=s.isDataTexture3D||s.isDataTexture2DArray,m=g(t)||u;if(!u||1022!==s.format||1015!==s.type&&1016!==s.type||(s.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),d){l.__webglFramebuffer=[];for(var v=0;v<6;v++)l.__webglFramebuffer[v]=e.createFramebuffer()}else if(l.__webglFramebuffer=e.createFramebuffer(),h)if(a.drawBuffers)for(var w=t.texture,k=0,E=w.length;k<E;k++){var C=r.get(w[k]);void 0===C.__webglTexture&&(C.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(p)if(u){l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer);var _=i.convert(s.format),M=i.convert(s.type),N=x(s.internalFormat,_,M,s.encoding),A=D(t);e.renderbufferStorageMultisample(36161,A,N,t.width,t.height),n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,l.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),O(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(d){n.bindTexture(34067,c.__webglTexture),I(34067,s,m);for(var L=0;L<6;L++)R(l.__webglFramebuffer[L],t,s,36064,34069+L);y(s,m)&&b(34067,s,t.width,t.height),n.unbindTexture()}else if(h){for(var P=t.texture,F=0,j=P.length;F<j;F++){var z=P[F],B=r.get(z);n.bindTexture(3553,B.__webglTexture),I(3553,z,m),R(l.__webglFramebuffer,t,z,36064+F,3553),y(z,m)&&b(3553,z,t.width,t.height)}n.unbindTexture()}else{var U=3553;f&&(u?U=s.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(U,c.__webglTexture),I(U,s,m),R(l.__webglFramebuffer,t,s,36064,U),y(s,m)&&b(U,s,t.width,t.height,t.depth),n.unbindTexture()}t.depthBuffer&&function(t){var a=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,a){if(a&&a.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!a.depthTexture||!a.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(a.depthTexture).__webglTexture&&a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0),T(a.depthTexture,0);var i=r.get(a.depthTexture).__webglTexture;if(1026===a.depthTexture.format)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(1027!==a.depthTexture.format)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(a.__webglFramebuffer,t)}else if(i){a.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,a.__webglFramebuffer[o]),a.__webglDepthbuffer[o]=e.createRenderbuffer(),O(a.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,a.__webglFramebuffer),a.__webglDepthbuffer=e.createRenderbuffer(),O(a.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}(t)},this.updateRenderTargetMipmap=function(e){for(var t=g(e)||u,a=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],i=0,o=a.length;i<o;i++){var s=a[i];if(y(s,t)){var l=e.isWebGLCubeRenderTarget?34067:3553,c=r.get(s).__webglTexture;n.bindTexture(l,c),b(l,s,e.width,e.height),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(u){var a=t.width,i=t.height,o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024);var s=r.get(t);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),e.blitFramebuffer(0,0,a,i,0,0,a,i,o,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===L&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),L=!0),e=e.texture),T(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===P&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),P=!0),e=e.texture),C(e,t)}}function _3(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n;if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:36492===e?null!==(n=t.get("EXT_texture_compression_bptc"))?e:null:1020===e?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}S3.prototype.isMeshDistanceMaterial=!0;var M3=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return M(this,n),(e=t.call(this)).cameras=r,e}return(0,I.Z)(n)}(z0);M3.prototype.isArrayCamera=!0;var I3=function(e){A(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).type="Group",e}return(0,I.Z)(n)}(R$);I3.prototype.isGroup=!0;var N3={type:"move"},A3=function(){function e(){M(this,e),this._targetRay=null,this._grip=null,this._hand=null}return(0,I.Z)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new I3,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new I3,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new NJ,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new NJ),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new I3,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new NJ,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new NJ),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,a=null,i=null,o=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==o&&(null!==(r=t.getPose(e.targetRaySpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(N3))),u&&e.hand){i=!0;var l,c=G(e.hand.values());try{for(c.s();!(l=c.n()).done;){var d=l.value,h=t.getJointPose(d,n);if(void 0===u.joints[d.jointName]){var p=new I3;p.matrixAutoUpdate=!1,p.visible=!1,u.joints[d.jointName]=p,u.add(p)}var f=u.joints[d.jointName];null!==h&&(f.matrix.fromArray(h.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.jointRadius=h.radius),f.visible=null!==h}}catch(sde){c.e(sde)}finally{c.f()}var m=u.joints["index-finger-tip"],v=u.joints["thumb-tip"],g=m.position.distanceTo(v.position);u.inputState.pinching&&g>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(null!==(a=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(a.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),a.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(a.linearVelocity)):s.hasLinearVelocity=!1,a.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(a.angularVelocity)):s.hasAngularVelocity=!1));return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==a),null!==u&&(u.visible=null!==i),this}}]),e}(),R3=function(e){A(n,e);var t=F(n);function n(e,r){var a;M(this,n),a=t.call(this);var i=(0,L.Z)(a),o=e.state,s=null,u=1,l=null,c="local-floor",d=null,h=null,p=null,f=null,m=null,v=!1,g=null,y=null,b=null,x=null,w=null,k=null,S=[],E=new Map,T=new z0;T.layers.enable(1),T.viewport=new CJ;var C=new z0;C.layers.enable(2),C.viewport=new CJ;var _=[T,C],I=new M3;I.layers.enable(1),I.layers.enable(2);var N=null,A=null;function R(e){var t=E.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function O(){E.forEach((function(e,t){e.disconnect(t)})),E.clear(),N=null,A=null,o.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),p&&r.deleteFramebuffer(p),g&&r.deleteFramebuffer(g),y&&r.deleteRenderbuffer(y),b&&r.deleteRenderbuffer(b),p=null,g=null,y=null,b=null,m=null,f=null,h=null,s=null,B.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function D(e){for(var t=s.inputSources,n=0;n<S.length;n++)E.set(t[n],S[n]);for(var r=0;r<e.removed.length;r++){var a=e.removed[r],i=E.get(a);i&&(i.dispatchEvent({type:"disconnected",data:a}),E.delete(a))}for(var o=0;o<e.added.length;o++){var u=e.added[o],l=E.get(u);l&&l.dispatchEvent({type:"connected",data:u})}}a.cameraAutoUpdate=!0,a.enabled=!1,a.isPresenting=!1,a.getController=function(e){var t=S[e];return void 0===t&&(t=new A3,S[e]=t),t.getTargetRaySpace()},a.getControllerGrip=function(e){var t=S[e];return void 0===t&&(t=new A3,S[e]=t),t.getGripSpace()},a.getHand=function(e){var t=S[e];return void 0===t&&(t=new A3,S[e]=t),t.getHandSpace()},a.setFramebufferScaleFactor=function(e){u=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},a.setReferenceSpaceType=function(e){c=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},a.getReferenceSpace=function(){return l},a.getBaseLayer=function(){return null!==f?f:m},a.getBinding=function(){return h},a.getFrame=function(){return x},a.getSession=function(){return s},a.setSession=function(){var e=Jn(Kn().mark((function e(t){var n,a,d,x,S;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(s=t)){e.next=20;break}if(s.addEventListener("select",R),s.addEventListener("selectstart",R),s.addEventListener("selectend",R),s.addEventListener("squeeze",R),s.addEventListener("squeezestart",R),s.addEventListener("squeezeend",R),s.addEventListener("end",O),s.addEventListener("inputsourceschange",D),n=r.getContextAttributes(),e.t0=!0!==n.xrCompatible,!e.t0){e.next=7;break}return e.next=7,r.makeXRCompatible();case 7:if(void 0!==s.renderState.layers){e.next=12;break}a={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:u},m=new XRWebGLLayer(s,r,a),s.updateRenderState({baseLayer:m}),e.next=13;break;case 12:r instanceof WebGLRenderingContext?(d={antialias:!0,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:u},m=new XRWebGLLayer(s,r,d),s.updateRenderState({layers:[m]})):(v=n.antialias,x=null,n.depth&&(k=256,n.stencil&&(k|=1024),w=n.stencil?33306:36096,x=n.stencil?35056:33190),S={colorFormat:n.alpha?32856:32849,depthFormat:x,scaleFactor:u},h=new XRWebGLBinding(s,r),f=h.createProjectionLayer(S),p=r.createFramebuffer(),s.updateRenderState({layers:[f]}),v&&(g=r.createFramebuffer(),y=r.createRenderbuffer(),r.bindRenderbuffer(36161,y),r.renderbufferStorageMultisample(36161,4,32856,f.textureWidth,f.textureHeight),o.bindFramebuffer(36160,g),r.framebufferRenderbuffer(36160,36064,36161,y),r.bindRenderbuffer(36161,null),null!==x&&(b=r.createRenderbuffer(),r.bindRenderbuffer(36161,b),r.renderbufferStorageMultisample(36161,4,x,f.textureWidth,f.textureHeight),r.framebufferRenderbuffer(36160,w,36161,b),r.bindRenderbuffer(36161,null)),o.bindFramebuffer(36160,null)));case 13:return e.next=15,s.requestReferenceSpace(c);case 15:l=e.sent,B.setContext(s),B.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var P=new NJ,F=new NJ;function j(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}a.updateCamera=function(e){if(null!==s){I.near=C.near=T.near=e.near,I.far=C.far=T.far=e.far,N===I.near&&A===I.far||(s.updateRenderState({depthNear:I.near,depthFar:I.far}),N=I.near,A=I.far);var t=e.parent,n=I.cameras;j(I,t);for(var r=0;r<n.length;r++)j(n[r],t);I.matrixWorld.decompose(I.position,I.quaternion,I.scale),e.position.copy(I.position),e.quaternion.copy(I.quaternion),e.scale.copy(I.scale),e.matrix.copy(I.matrix),e.matrixWorld.copy(I.matrixWorld);for(var a=e.children,i=0,o=a.length;i<o;i++)a[i].updateMatrixWorld(!0);2===n.length?function(e,t,n){P.setFromMatrixPosition(t.matrixWorld),F.setFromMatrixPosition(n.matrixWorld);var r=P.distanceTo(F),a=t.projectionMatrix.elements,i=n.projectionMatrix.elements,o=a[14]/(a[10]-1),s=a[14]/(a[10]+1),u=(a[9]+1)/a[5],l=(a[9]-1)/a[5],c=(a[8]-1)/a[0],d=(i[8]+1)/i[0],h=o*c,p=o*d,f=r/(-c+d),m=f*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var v=o+f,g=s+f,y=h-m,b=p+(r-m),x=u*s/g*v,w=l*s/g*v;e.projectionMatrix.makePerspective(y,b,x,w,v,g)}(I,T,C):I.projectionMatrix.copy(T.projectionMatrix)}},a.getCamera=function(){return I},a.getFoveation=function(){return null!==f?f.fixedFoveation:null!==m?m.fixedFoveation:void 0},a.setFoveation=function(e){null!==f&&(f.fixedFoveation=e),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=e)};var z=null,B=new K0;return B.setAnimationLoop((function(e,t){if(d=t.getViewerPose(l),x=t,null!==d){var n=d.views;null!==m&&o.bindXRFramebuffer(m.framebuffer);var a=!1;n.length!==I.cameras.length&&(I.cameras.length=0,a=!0);for(var i=0;i<n.length;i++){var u=n[i],c=null;if(null!==m)c=m.getViewport(u);else{var y=h.getViewSubImage(f,u);o.bindXRFramebuffer(p),void 0!==y.depthStencilTexture&&r.framebufferTexture2D(36160,w,3553,y.depthStencilTexture,0),r.framebufferTexture2D(36160,36064,3553,y.colorTexture,0),c=y.viewport}var b=_[i];b.matrix.fromArray(u.transform.matrix),b.projectionMatrix.fromArray(u.projectionMatrix),b.viewport.set(c.x,c.y,c.width,c.height),0===i&&I.matrix.copy(b.matrix),!0===a&&I.cameras.push(b)}v&&(o.bindXRFramebuffer(g),null!==k&&r.clear(k))}for(var E=s.inputSources,T=0;T<S.length;T++){var C=S[T],M=E[T];C.update(M,t,l)}if(z&&z(e,t),v){var N=f.textureWidth,A=f.textureHeight;o.bindFramebuffer(36008,g),o.bindFramebuffer(36009,p),r.invalidateFramebuffer(36008,[w]),r.invalidateFramebuffer(36009,[w]),r.blitFramebuffer(0,0,N,A,0,0,N,A,16384,9728),r.invalidateFramebuffer(36008,[36064]),o.bindFramebuffer(36008,null),o.bindFramebuffer(36009,null),o.bindFramebuffer(36160,g)}x=null})),a.setAnimationLoop=function(e){z=e},a.dispose=function(){},a}return(0,I.Z)(n)}(nJ);function O3(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);var r,a,i=e.get(n).envMap;if(i){t.envMap.value=i,t.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio;var o=e.get(i).__maxMipLevel;void 0!==o&&(t.maxMipLevel.value=o)}n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularTintMap?r=n.specularTintMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap&&(r=n.thicknessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uv2Transform.value.copy(a.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,1===n.side&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),1===n.side&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,a,i,o){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenTint.value.copy(t.sheenTint).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate())),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationTint.value.copy(t.attenuationTint)),e.specularIntensity.value=t.specularIntensity,e.specularTint.value.copy(t.specularTint),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularTintMap&&(e.specularTintMap.value=t.specularTintMap)}(e,r,o):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){var a;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?a=t.map:t.alphaMap&&(a=t.alphaMap),void 0!==a&&(!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uvTransform.value.copy(a.matrix))}(e,r,a,i):r.isSpriteMaterial?function(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function D3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0!==e.canvas?e.canvas:function(){var e=wJ("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,a=void 0===e.depth||e.depth,i=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,d=null,h=null,p=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var m=this,v=!1,g=0,y=0,b=null,x=-1,w=null,k=new CJ,S=new CJ,E=null,T=t.width,C=t.height,_=1,M=null,I=null,N=new CJ(0,0,T,C),A=new CJ(0,0,T,C),R=!1,O=[],D=new Y0,L=!1,P=!1,F=null,j=new s$,z=new NJ,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===b?_:1}var W,V,Z,H,G,q,X,Y,K,Q,J,$,ee,te,ne,re,ae,ie,oe,se,ue,le,ce,de=n;function he(e,n){for(var r=0;r<e.length;r++){var a=e[r],i=t.getContext(a,n);if(null!==i)return i}return null}try{var pe={alpha:r,depth:a,stencil:i,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if(t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",ye,!1),null===de){var fe=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&fe.shift(),null===(de=he(fe,pe)))throw he(fe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===de.getShaderPrecisionFormat&&(de.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function me(){W=new A1(de),V=new i1(de,W,e),W.init(V),le=new _3(de,W,V),Z=new T3(de,W,V),O[0]=1029,H=new D1(de),G=new d3,q=new C3(de,W,Z,G,V,le,H),X=new s1(m),Y=new N1(m),K=new Q0(de,V),ce=new r1(de,W,K,V),Q=new R1(de,K,H,ce),J=new B1(de,Q,K,H),oe=new z1(de,V,q),re=new o1(G),$=new c3(m,X,Y,W,V,ce,re),ee=new O3(G),te=new m3(G),ne=new w3(W,V),ie=new n1(m,X,Z,J,s),ae=new E3(m,J,V),se=new a1(de,W,H,V),ue=new O1(de,W,H,V),H.programs=$.programs,m.capabilities=V,m.extensions=W,m.properties=G,m.renderLists=te,m.shadowMap=ae,m.state=Z,m.info=H}me();var ve=new R3(m,de);function ge(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;var e=H.autoReset,t=ae.enabled,n=ae.autoUpdate,r=ae.needsUpdate,a=ae.type;me(),H.autoReset=e,ae.enabled=t,ae.autoUpdate=n,ae.needsUpdate=r,ae.type=a}function be(e){var t=e.target;t.removeEventListener("dispose",be),function(e){(function(e){var t=G.get(e).programs;void 0!==t&&t.forEach((function(e){$.releaseProgram(e)}))})(e),G.remove(e)}(t)}this.xr=ve,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){var e=W.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=W.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return _},this.setPixelRatio=function(e){void 0!==e&&(_=e,this.setSize(T,C,!1))},this.getSize=function(e){return e.set(T,C)},this.setSize=function(e,n,r){ve.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=e,C=n,t.width=Math.floor(e*_),t.height=Math.floor(n*_),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(T*_,C*_).floor()},this.setDrawingBufferSize=function(e,n,r){T=e,C=n,_=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(k)},this.getViewport=function(e){return e.copy(N)},this.setViewport=function(e,t,n,r){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,n,r),Z.viewport(k.copy(N).multiplyScalar(_).floor())},this.getScissor=function(e){return e.copy(A)},this.setScissor=function(e,t,n,r){e.isVector4?A.set(e.x,e.y,e.z,e.w):A.set(e,t,n,r),Z.scissor(S.copy(A).multiplyScalar(_).floor())},this.getScissorTest=function(){return R},this.setScissorTest=function(e){Z.setScissorTest(R=e)},this.setOpaqueSort=function(e){M=e},this.setTransparentSort=function(e){I=e},this.getClearColor=function(e){return e.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor.apply(ie,arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha.apply(ie,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),de.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",ye,!1),te.dispose(),ne.dispose(),G.dispose(),X.dispose(),Y.dispose(),J.dispose(),ce.dispose(),ve.dispose(),ve.removeEventListener("sessionstart",we),ve.removeEventListener("sessionend",ke),F&&(F.dispose(),F=null),Se.stop()},this.renderBufferImmediate=function(e,t){ce.initAttributes();var n=G.get(e);e.hasPositions&&!n.position&&(n.position=de.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=de.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=de.createBuffer()),e.hasColors&&!n.color&&(n.color=de.createBuffer());var r=t.getAttributes();e.hasPositions&&(de.bindBuffer(34962,n.position),de.bufferData(34962,e.positionArray,35048),ce.enableAttribute(r.position.location),de.vertexAttribPointer(r.position.location,3,5126,!1,0,0)),e.hasNormals&&(de.bindBuffer(34962,n.normal),de.bufferData(34962,e.normalArray,35048),ce.enableAttribute(r.normal.location),de.vertexAttribPointer(r.normal.location,3,5126,!1,0,0)),e.hasUvs&&(de.bindBuffer(34962,n.uv),de.bufferData(34962,e.uvArray,35048),ce.enableAttribute(r.uv.location),de.vertexAttribPointer(r.uv.location,2,5126,!1,0,0)),e.hasColors&&(de.bindBuffer(34962,n.color),de.bufferData(34962,e.colorArray,35048),ce.enableAttribute(r.color.location),de.vertexAttribPointer(r.color.location,3,5126,!1,0,0)),ce.disableUnusedAttributes(),de.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,a,i){null===t&&(t=B);var o=a.isMesh&&a.matrixWorld.determinant()<0,s=Ne(e,t,n,r,a);Z.setMaterial(r,o);var u=n.index,l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;var c,d=1;!0===r.wireframe&&(u=Q.getWireframeAttribute(n),d=2),ce.setup(a,r,s,n,u);var h=se;null!==u&&(c=K.get(u),(h=ue).setIndex(c));var p=null!==u?u.count:l.count,f=n.drawRange.start*d,m=n.drawRange.count*d,v=null!==i?i.start*d:0,g=null!==i?i.count*d:1/0,y=Math.max(f,v),b=Math.min(p,f+m,v+g)-1,x=Math.max(0,b-y+1);if(0!==x){if(a.isMesh)!0===r.wireframe?(Z.setLineWidth(r.wireframeLinewidth*U()),h.setMode(1)):h.setMode(4);else if(a.isLine){var w=r.linewidth;void 0===w&&(w=1),Z.setLineWidth(w*U()),a.isLineSegments?h.setMode(1):a.isLineLoop?h.setMode(2):h.setMode(3)}else a.isPoints?h.setMode(0):a.isSprite&&h.setMode(4);if(a.isInstancedMesh)h.renderInstances(y,x,a.count);else if(n.isInstancedBufferGeometry){var k=Math.min(n.instanceCount,n._maxInstanceCount);h.renderInstances(y,x,k)}else h.render(y,x)}},this.compile=function(e,t){(h=ne.get(e)).init(),f.push(h),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(m.physicallyCorrectLights),e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++)Me(n[r],e,t);else Me(n,e,t)})),f.pop(),h=null};var xe=null;function we(){Se.stop()}function ke(){Se.start()}var Se=new K0;function Ee(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||D.intersectsSprite(e)){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);var a=J.update(e),i=e.material;i.visible&&d.push(e,a,i,n,z.z,null)}}else if(e.isImmediateRenderObject)r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j),d.push(e,null,e.material,n,z.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==H.render.frame&&(e.skeleton.update(),e.skeleton.frame=H.render.frame),!e.frustumCulled||D.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);var o=J.update(e),s=e.material;if(Array.isArray(s))for(var u=o.groups,l=0,c=u.length;l<c;l++){var p=u[l],f=s[p.materialIndex];f&&f.visible&&d.push(e,o,f,n,z.z,p)}else s.visible&&d.push(e,o,s,n,z.z,null)}for(var m=e.children,v=0,g=m.length;v<g;v++)Ee(m[v],t,n,r)}}function Te(e,t,n,r){var a=e.opaque,i=e.transmissive,s=e.transparent;h.setupLightsView(n),i.length>0&&function(e,t,n){if(null===F){var r=!0===o&&!0===V.isWebGL2;F=new(r?MJ:_J)(1024,1024,{generateMipmaps:!0,type:null!==le.convert(1016)?1016:1009,minFilter:1008,magFilter:1003,wrapS:1001,wrapT:1001})}var a=m.getRenderTarget();m.setRenderTarget(F),m.clear();var i=m.toneMapping;m.toneMapping=0,Ce(e,t,n),m.toneMapping=i,q.updateMultisampleRenderTarget(F),q.updateRenderTargetMipmap(F),m.setRenderTarget(a)}(a,t,n),r&&Z.viewport(k.copy(r)),a.length>0&&Ce(a,t,n),i.length>0&&Ce(i,t,n),s.length>0&&Ce(s,t,n)}function Ce(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,a=0,i=e.length;a<i;a++){var o=e[a],s=o.object,u=o.geometry,l=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&_e(s,t,n,u,l,c)}}function _e(e,t,n,r,a,i){if(e.onBeforeRender(m,t,n,r,a,i),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),a.onBeforeRender(m,t,n,r,e,i),e.isImmediateRenderObject){var o=Ne(n,t,r,a,e);Z.setMaterial(a),ce.reset(),function(e,t){e.render((function(e){m.renderBufferImmediate(e,t)}))}(e,o)}else!0===a.transparent&&2===a.side?(a.side=1,a.needsUpdate=!0,m.renderBufferDirect(n,t,r,a,e,i),a.side=0,a.needsUpdate=!0,m.renderBufferDirect(n,t,r,a,e,i),a.side=2):m.renderBufferDirect(n,t,r,a,e,i);e.onAfterRender(m,t,n,r,a,i)}function Me(e,t,n){!0!==t.isScene&&(t=B);var r=G.get(e),a=h.state.lights,i=h.state.shadowsArray,o=a.state.version,s=$.getParameters(e,a.state,i,t,n),u=$.getProgramCacheKey(s),l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Y:X).get(e.envMap||r.environment),void 0===l&&(e.addEventListener("dispose",be),l=new Map,r.programs=l);var c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return Ie(e,s),c}else s.uniforms=$.getUniforms(e),e.onBuild(s,m),e.onBeforeCompile(s,m),c=$.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;var d=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=re.uniform),Ie(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(d.ambientLightColor.value=a.state.ambient,d.lightProbe.value=a.state.probe,d.directionalLights.value=a.state.directional,d.directionalLightShadows.value=a.state.directionalShadow,d.spotLights.value=a.state.spot,d.spotLightShadows.value=a.state.spotShadow,d.rectAreaLights.value=a.state.rectArea,d.ltc_1.value=a.state.rectAreaLTC1,d.ltc_2.value=a.state.rectAreaLTC2,d.pointLights.value=a.state.point,d.pointLightShadows.value=a.state.pointShadow,d.hemisphereLights.value=a.state.hemi,d.directionalShadowMap.value=a.state.directionalShadowMap,d.directionalShadowMatrix.value=a.state.directionalShadowMatrix,d.spotShadowMap.value=a.state.spotShadowMap,d.spotShadowMatrix.value=a.state.spotShadowMatrix,d.pointShadowMap.value=a.state.pointShadowMap,d.pointShadowMatrix.value=a.state.pointShadowMatrix);var p=c.getUniforms(),f=V2.seqWithValue(p.seq,d);return r.currentProgram=c,r.uniformsList=f,c}function Ie(e,t){var n=G.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents}function Ne(e,t,n,r,a){!0!==t.isScene&&(t=B),q.resetTextureUnits();var i=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===b?m.outputEncoding:b.texture.encoding,u=(r.isMeshStandardMaterial?Y:X).get(r.envMap||o),l=!0===r.vertexColors&&!!n&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n&&!!n.attributes.tangent,d=!!n&&!!n.morphAttributes.position,p=!!n&&!!n.morphAttributes.normal,f=n&&n.morphAttributes.position?n.morphAttributes.position.length:0,v=G.get(r),g=h.state.lights;if(!0===L&&(!0===P||e!==w)){var y=e===w&&r.id===x;re.setState(r,e,y)}var k=!1;r.version===v.__version?v.needsLights&&v.lightsStateVersion!==g.state.version||v.outputEncoding!==s||a.isInstancedMesh&&!1===v.instancing?k=!0:a.isInstancedMesh||!0!==v.instancing?a.isSkinnedMesh&&!1===v.skinning?k=!0:a.isSkinnedMesh||!0!==v.skinning?v.envMap!==u||r.fog&&v.fog!==i?k=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===re.numPlanes&&v.numIntersection===re.numIntersection?(v.vertexAlphas!==l||v.vertexTangents!==c||v.morphTargets!==d||v.morphNormals!==p||!0===V.isWebGL2&&v.morphTargetsCount!==f)&&(k=!0):k=!0:k=!0:k=!0:(k=!0,v.__version=r.version);var S=v.currentProgram;!0===k&&(S=Me(r,t,a));var E,T,M=!1,I=!1,N=!1,A=S.getUniforms(),R=v.uniforms;if(Z.useProgram(S.program)&&(M=!0,I=!0,N=!0),r.id!==x&&(x=r.id,I=!0),M||w!==e){if(A.setValue(de,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&A.setValue(de,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,I=!0,N=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var O=A.map.cameraPosition;void 0!==O&&O.setValue(de,z.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&A.setValue(de,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||a.isSkinnedMesh)&&A.setValue(de,"viewMatrix",e.matrixWorldInverse)}if(a.isSkinnedMesh){A.setOptional(de,a,"bindMatrix"),A.setOptional(de,a,"bindMatrixInverse");var D=a.skeleton;D&&(V.floatVertexTextures?(null===D.boneTexture&&D.computeBoneTexture(),A.setValue(de,"boneTexture",D.boneTexture,q),A.setValue(de,"boneTextureSize",D.boneTextureSize)):A.setOptional(de,D,"boneMatrices"))}return!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||oe.update(a,n,r,S),(I||v.receiveShadow!==a.receiveShadow)&&(v.receiveShadow=a.receiveShadow,A.setValue(de,"receiveShadow",a.receiveShadow)),I&&(A.setValue(de,"toneMappingExposure",m.toneMappingExposure),v.needsLights&&(T=N,(E=R).ambientLightColor.needsUpdate=T,E.lightProbe.needsUpdate=T,E.directionalLights.needsUpdate=T,E.directionalLightShadows.needsUpdate=T,E.pointLights.needsUpdate=T,E.pointLightShadows.needsUpdate=T,E.spotLights.needsUpdate=T,E.spotLightShadows.needsUpdate=T,E.rectAreaLights.needsUpdate=T,E.hemisphereLights.needsUpdate=T),i&&r.fog&&ee.refreshFogUniforms(R,i),ee.refreshMaterialUniforms(R,r,_,C,F),V2.upload(de,v.uniformsList,R,q)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(V2.upload(de,v.uniformsList,R,q),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&A.setValue(de,"center",a.center),A.setValue(de,"modelViewMatrix",a.modelViewMatrix),A.setValue(de,"normalMatrix",a.normalMatrix),A.setValue(de,"modelMatrix",a.matrixWorld),S}Se.setAnimationLoop((function(e){xe&&xe(e)})),"undefined"!=typeof window&&Se.setContext(window),this.setAnimationLoop=function(e){xe=e,ve.setAnimationLoop(e),null===e?Se.stop():Se.start()},ve.addEventListener("sessionstart",we),ve.addEventListener("sessionend",ke),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==v){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===ve.enabled&&!0===ve.isPresenting&&(!0===ve.cameraAutoUpdate&&ve.updateCamera(t),t=ve.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,b),(h=ne.get(e,f.length)).init(),f.push(h),j.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),D.setFromProjectionMatrix(j),P=this.localClippingEnabled,L=re.init(this.clippingPlanes,P,t),(d=te.get(e,p.length)).init(),p.push(d),Ee(e,t,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(M,I),!0===L&&re.beginShadows();var n=h.state.shadowsArray;if(ae.render(n,e,t),!0===L&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),ie.render(d,e),h.setupLights(m.physicallyCorrectLights),t.isArrayCamera)for(var r=t.cameras,a=0,i=r.length;a<i;a++){var o=r[a];Te(d,e,o,o.viewport)}else Te(d,e,t);null!==b&&(q.updateMultisampleRenderTarget(b),q.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(m,e,t),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1),ce.resetDefaultState(),x=-1,w=null,f.pop(),h=f.length>0?f[f.length-1]:null,p.pop(),d=p.length>0?p[p.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b=e,g=t,y=n,e&&void 0===G.get(e).__webglFramebuffer&&q.setupRenderTarget(e);var r=null,a=!1,i=!1;if(e){var o=e.texture;(o.isDataTexture3D||o.isDataTexture2DArray)&&(i=!0);var s=G.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=s[t],a=!0):r=e.isWebGLMultisampleRenderTarget?G.get(e).__webglMultisampledFramebuffer:s,k.copy(e.viewport),S.copy(e.scissor),E=e.scissorTest}else k.copy(N).multiplyScalar(_).floor(),S.copy(A).multiplyScalar(_).floor(),E=R;if(Z.bindFramebuffer(36160,r)&&V.drawBuffers){var u=!1;if(e)if(e.isWebGLMultipleRenderTargets){var l=e.texture;if(O.length!==l.length||36064!==O[0]){for(var c=0,d=l.length;c<d;c++)O[c]=36064+c;O.length=l.length,u=!0}}else 1===O.length&&36064===O[0]||(O[0]=36064,O.length=1,u=!0);else 1===O.length&&1029===O[0]||(O[0]=1029,O.length=1,u=!0);u&&(V.isWebGL2?de.drawBuffers(O):W.get("WEBGL_draw_buffers").drawBuffersWEBGL(O))}if(Z.viewport(k),Z.scissor(S),Z.setScissorTest(E),a){var h=G.get(e.texture);de.framebufferTexture2D(36160,36064,34069+t,h.__webglTexture,n)}else if(i){var p=G.get(e.texture),f=t||0;de.framebufferTextureLayer(36160,36064,p.__webglTexture,n||0,f)}x=-1},this.readRenderTargetPixels=function(e,t,n,r,a,i,o){if(e&&e.isWebGLRenderTarget){var s=G.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){Z.bindFramebuffer(36160,s);try{var u=e.texture,l=u.format,c=u.type;if(1023!==l&&le.convert(l)!==de.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var d=1016===c&&(W.has("EXT_color_buffer_half_float")||V.isWebGL2&&W.has("EXT_color_buffer_float"));if(!(1009===c||le.convert(c)===de.getParameter(35738)||1015===c&&(V.isWebGL2||W.has("OES_texture_float")||W.has("WEBGL_color_buffer_float"))||d))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===de.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-a&&de.readPixels(t,n,r,a,le.convert(l),le.convert(c),i):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var h=null!==b?G.get(b).__webglFramebuffer:null;Z.bindFramebuffer(36160,h)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),a=Math.floor(t.image.width*r),i=Math.floor(t.image.height*r),o=le.convert(t.format);V.isWebGL2&&(6407===o&&(o=32849),6408===o&&(o=32856)),q.setTexture2D(t,0),de.copyTexImage2D(3553,n,o,e.x,e.y,a,i,0),Z.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.image.width,i=t.image.height,o=le.convert(n.format),s=le.convert(n.type);q.setTexture2D(n,0),de.pixelStorei(37440,n.flipY),de.pixelStorei(37441,n.premultiplyAlpha),de.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?de.texSubImage2D(3553,r,e.x,e.y,a,i,o,s,t.image.data):t.isCompressedTexture?de.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):de.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&de.generateMipmap(3553),Z.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(m.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var i,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,u=e.max.z-e.min.z+1,l=le.convert(r.format),c=le.convert(r.type);if(r.isDataTexture3D)q.setTexture3D(r,0),i=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(r,0),i=35866}de.pixelStorei(37440,r.flipY),de.pixelStorei(37441,r.premultiplyAlpha),de.pixelStorei(3317,r.unpackAlignment);var d=de.getParameter(3314),h=de.getParameter(32878),p=de.getParameter(3316),f=de.getParameter(3315),v=de.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;de.pixelStorei(3314,g.width),de.pixelStorei(32878,g.height),de.pixelStorei(3316,e.min.x),de.pixelStorei(3315,e.min.y),de.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?de.texSubImage3D(i,a,t.x,t.y,t.z,o,s,u,l,c,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),de.compressedTexSubImage3D(i,a,t.x,t.y,t.z,o,s,u,l,g.data)):de.texSubImage3D(i,a,t.x,t.y,t.z,o,s,u,l,c,g),de.pixelStorei(3314,d),de.pixelStorei(32878,h),de.pixelStorei(3316,p),de.pixelStorei(3315,f),de.pixelStorei(32877,v),0===a&&r.generateMipmaps&&de.generateMipmap(i),Z.unbindTexture()}},this.initTexture=function(e){q.setTexture2D(e,0),Z.unbindTexture()},this.resetState=function(){g=0,y=0,b=null,Z.reset(),ce.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n)})(D3).prototype.isWebGL1Renderer=!0;var L3=function(e){A(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:(0,L.Z)(e)})),e}return(0,I.Z)(n,[{key:"copy",value:function(e,t){return pl(R(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=pl(R(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(R$);L3.prototype.isScene=!0;var P3=function(){function e(t,n){M(this,e),this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=lJ()}return(0,I.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=lJ()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=lJ()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}();P3.prototype.isInterleavedBuffer=!0;var F3=new NJ,j3=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];M(this,e),this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=!0===a}return(0,I.Z)(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)F3.x=this.getX(t),F3.y=this.getY(t),F3.z=this.getZ(t),F3.applyMatrix4(e),this.setXYZ(t,F3.x,F3.y,F3.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)F3.x=this.getX(t),F3.y=this.getY(t),F3.z=this.getZ(t),F3.applyNormalMatrix(e),this.setXYZ(t,F3.x,F3.y,F3.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)F3.x=this.getX(t),F3.y=this.getY(t),F3.z=this.getZ(t),F3.transformDirection(e),this.setXYZ(t,F3.x,F3.y,F3.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=a,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var a=r*this.data.stride+this.offset,i=0;i<this.itemSize;i++)n.push(this.data.array[a+i]);return new n0(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,a=0;a<this.itemSize;a++)t.push(this.data.array[r+a]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}();j3.prototype.isInterleavedBufferAttribute=!0;var z3,B3=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="SpriteMaterial",r.color=new J$(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(H$);B3.prototype.isSpriteMaterial=!0;var U3=new NJ,W3=new NJ,V3=new NJ,Z3=new gJ,H3=new gJ,G3=new s$,q3=new NJ,X3=new NJ,Y3=new NJ,K3=new gJ,Q3=new gJ,J3=new gJ;function $3(e,t,n,r,a,i){Z3.subVectors(e,n).addScalar(.5).multiply(r),void 0!==a?(H3.x=i*Z3.x-a*Z3.y,H3.y=a*Z3.x+i*Z3.y):H3.copy(Z3),e.copy(t),e.x+=H3.x,e.y+=H3.y,e.applyMatrix4(G3)}(function(e){A(n,e);var t=F(n);function n(e){var r;if(M(this,n),(r=t.call(this)).type="Sprite",void 0===z3){z3=new p0;var a=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new P3(a,5);z3.setIndex([0,1,2,0,2,3]),z3.setAttribute("position",new j3(i,3,0,!1)),z3.setAttribute("uv",new j3(i,2,3,!1))}return r.geometry=z3,r.material=void 0!==e?e:new B3,r.center=new gJ(.5,.5),P(r)}return(0,I.Z)(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),W3.setFromMatrixScale(this.matrixWorld),G3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),V3.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&W3.multiplyScalar(-V3.z);var n,r,a=this.material.rotation;0!==a&&(r=Math.cos(a),n=Math.sin(a));var i=this.center;$3(q3.set(-.5,-.5,0),V3,i,W3,n,r),$3(X3.set(.5,-.5,0),V3,i,W3,n,r),$3(Y3.set(.5,.5,0),V3,i,W3,n,r),K3.set(0,0),Q3.set(1,0),J3.set(1,1);var o=e.ray.intersectTriangle(q3,X3,Y3,!1,U3);if(null!==o||($3(X3.set(-.5,.5,0),V3,i,W3,n,r),Q3.set(0,1),null!==(o=e.ray.intersectTriangle(q3,Y3,X3,!1,U3)))){var s=e.ray.origin.distanceTo(U3);s<e.near||s>e.far||t.push({distance:s,point:U3.clone(),uv:V$.getUV(U3,q3,X3,Y3,K3,Q3,J3,new gJ),face:null,object:this})}}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n})(R$).prototype.isSprite=!0;var e4=new NJ,t4=new CJ,n4=new CJ,r4=new NJ,a4=new s$,i4=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this,e,r)).type="SkinnedMesh",a.bindMode="attached",a.bindMatrix=new s$,a.bindMatrixInverse=new s$,a}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new CJ,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){pl(R(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;t4.fromBufferAttribute(r.attributes.skinIndex,e),n4.fromBufferAttribute(r.attributes.skinWeight,e),e4.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var a=0;a<4;a++){var i=n4.getComponent(a);if(0!==i){var o=t4.getComponent(a);a4.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(r4.copy(e4).applyMatrix4(a4),i)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(A0);i4.prototype.isSkinnedMesh=!0;var o4=function(e){A(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).type="Bone",e}return(0,I.Z)(n)}(R$);o4.prototype.isBone=!0;var s4=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1003,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1003,p=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0;return M(this,n),(e=t.call(this,null,u,l,c,d,h,o,s,p,f)).image={data:r,width:a,height:i},e.magFilter=d,e.minFilter=h,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return(0,I.Z)(n)}(EJ);s4.prototype.isDataTexture=!0;var u4=new s$,l4=new s$,c4=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];M(this,e),this.uuid=lJ(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return(0,I.Z)(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new s$)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new s$;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,a=this.bones.length;r<a;r++){var i=this.bones[r];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,a=0,i=e.length;a<i;a++){var o=e[a]?e[a].matrixWorld:l4;u4.multiplyMatrices(o,t[a]),u4.toArray(n,16*a)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=fJ(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new s4(t,e,e,1023,1015);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var a=e.bones[n],i=t[a];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),i=new o4),this.bones.push(i),this.boneInverses.push((new s$).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,a=t.length;r<a;r++){var i=t[r];e.bones.push(i.uuid);var o=n[r];e.boneInverses.push(o.toArray())}return e}}]),e}(),d4=function(e){A(n,e);var t=F(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return M(this,n),"number"==typeof a&&(o=a,a=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(i=t.call(this,e,r,a)).meshPerAttribute=o,i}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(n0);d4.prototype.isInstancedBufferAttribute=!0;var h4=new s$,p4=new s$,f4=[],m4=new A0;(function(e){A(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this,e,r)).instanceMatrix=new d4(new Float32Array(16*a),16),i.instanceColor=null,i.count=a,i.frustumCulled=!1,i}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(m4.geometry=this.geometry,m4.material=this.material,void 0!==m4.material)for(var a=0;a<r;a++){this.getMatrixAt(a,h4),p4.multiplyMatrices(n,h4),m4.matrixWorld=p4,m4.raycast(e,f4);for(var i=0,o=f4.length;i<o;i++){var s=f4[i];s.instanceId=a,s.object=this,t.push(s)}f4.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new d4(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n})(A0).prototype.isInstancedMesh=!0;var v4=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="LineBasicMaterial",r.color=new J$(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}]),n}(H$);v4.prototype.isLineBasicMaterial=!0;var g4=new NJ,y4=new NJ,b4=new s$,x4=new o$,w4=new JJ,k4=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new p0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new v4;return M(this,n),(e=t.call(this)).type="Line",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,a=t.count;r<a;r++)g4.fromBufferAttribute(t,r-1),y4.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=g4.distanceTo(y4);e.setAttribute("lineDistance",new i0(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),w4.copy(n.boundingSphere),w4.applyMatrix4(r),w4.radius+=a,!1!==e.ray.intersectsSphere(w4)){b4.copy(r).invert(),x4.copy(e.ray).applyMatrix4(b4);var o=a/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=new NJ,l=new NJ,c=new NJ,d=new NJ,h=this.isLineSegments?2:1;if(n.isBufferGeometry){var p=n.index,f=n.attributes.position;if(null!==p)for(var m=Math.max(0,i.start),v=Math.min(p.count,i.start+i.count)-1;m<v;m+=h){var g=p.getX(m),y=p.getX(m+1);if(u.fromBufferAttribute(f,g),l.fromBufferAttribute(f,y),!(x4.distanceSqToSegment(u,l,d,c)>s)){d.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(d);b<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else for(var x=Math.max(0,i.start),w=Math.min(f.count,i.start+i.count)-1;x<w;x+=h)if(u.fromBufferAttribute(f,x),l.fromBufferAttribute(f,x+1),!(x4.distanceSqToSegment(u,l,d,c)>s)){d.applyMatrix4(this.matrixWorld);var k=e.ray.origin.distanceTo(d);k<e.near||k>e.far||t.push({distance:k,point:c.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,i=r.length;a<i;a++){var o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(R$);k4.prototype.isLine=!0;var S4=new NJ,E4=new NJ,T4=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this,e,r)).type="LineSegments",a}return(0,I.Z)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,a=t.count;r<a;r+=2)S4.fromBufferAttribute(t,r),E4.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+S4.distanceTo(E4);e.setAttribute("lineDistance",new i0(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(k4);T4.prototype.isLineSegments=!0;var C4=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this,e,r)).type="LineLoop",a}return(0,I.Z)(n)}(k4);C4.prototype.isLineLoop=!0;var _4=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="PointsMaterial",r.color=new J$(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(H$);_4.prototype.isPointsMaterial=!0;var M4=new s$,I4=new o$,N4=new JJ,A4=new NJ,R4=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new p0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _4;return M(this,n),(e=t.call(this)).type="Points",e.geometry=r,e.material=a,e.updateMorphTargets(),e}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),N4.copy(n.boundingSphere),N4.applyMatrix4(r),N4.radius+=a,!1!==e.ray.intersectsSphere(N4)){M4.copy(r).invert(),I4.copy(e.ray).applyMatrix4(M4);var o=a/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){var u=n.index,l=n.attributes.position;if(null!==u)for(var c=Math.max(0,i.start),d=Math.min(u.count,i.start+i.count);c<d;c++){var h=u.getX(c);A4.fromBufferAttribute(l,h),O4(A4,h,s,r,e,t,this)}else for(var p=Math.max(0,i.start),f=Math.min(l.count,i.start+i.count);p<f;p++)A4.fromBufferAttribute(l,p),O4(A4,p,s,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var a=0,i=r.length;a<i;a++){var o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(R$);function O4(e,t,n,r,a,i,o){var s=I4.distanceSqToPoint(e);if(s<n){var u=new NJ;I4.closestPointToPoint(e,u),u.applyMatrix4(r);var l=a.ray.origin.distanceTo(u);if(l<a.near||l>a.far)return;i.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:o})}}R4.prototype.isPoints=!0,function(e){A(n,e);var t=F(n);function n(e,r,a,i,o,s,u,l,c){var d;M(this,n),(d=t.call(this,e,r,a,i,o,s,u,l,c)).format=void 0!==u?u:1022,d.minFilter=void 0!==s?s:1006,d.magFilter=void 0!==o?o:1006,d.generateMipmaps=!1;var h=(0,L.Z)(d);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){h.needsUpdate=!0,e.requestVideoFrameCallback(t)})),d}return(0,I.Z)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(EJ).prototype.isVideoTexture=!0;var D4=function(e){A(n,e);var t=F(n);function n(e,r,a,i,o,s,u,l,c,d,h,p){var f;return M(this,n),(f=t.call(this,null,s,u,l,c,d,i,o,h,p)).image={width:r,height:a},f.mipmaps=e,f.flipY=!1,f.generateMipmaps=!1,f}return(0,I.Z)(n)}(EJ);D4.prototype.isCompressedTexture=!0,function(e){A(n,e);var t=F(n);function n(e,r,a,i,o,s,u,l,c){var d;return M(this,n),(d=t.call(this,e,r,a,i,o,s,u,l,c)).needsUpdate=!0,d}return(0,I.Z)(n)}(EJ).prototype.isCanvasTexture=!0,function(e){A(n,e);var t=F(n);function n(e,r,a,i,o,s,u,l,c,d){var h;if(M(this,n),1026!==(d=void 0!==d?d:1026)&&1027!==d)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===a&&1026===d&&(a=1012),void 0===a&&1027===d&&(a=1020),(h=t.call(this,null,i,o,s,u,l,d,a,c)).image={width:e,height:r},h.magFilter=void 0!==u?u:1003,h.minFilter=void 0!==l?l:1003,h.flipY=!1,h.generateMipmaps=!1,h}return(0,I.Z)(n)}(EJ).prototype.isDepthTexture=!0,new NJ,new NJ,new NJ,new V$;var L4=function(){function e(){M(this,e),this.type="Curve",this.arcLengthDivisions=200}return(0,I.Z)(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),a=0;n.push(0);for(var i=1;i<=e;i++)a+=(t=this.getPoint(i/e)).distanceTo(r),n.push(a),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),a=0,i=r.length;n=t||e*r[i-1];for(var o,s=0,u=i-1;s<=u;)if((o=r[a=Math.floor(s+(u-s)/2)]-n)<0)s=a+1;else{if(!(o>0)){u=a;break}u=a-1}if(r[a=u]===n)return a/(i-1);var l=r[a];return(a+(n-l)/(r[a+1]-l))/(i-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,a=e+n;r<0&&(r=0),a>1&&(a=1);var i=this.getPoint(r),o=this.getPoint(a),s=t||(i.isVector2?new gJ:new NJ);return s.copy(o).sub(i).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new NJ,r=[],a=[],i=[],o=new NJ,s=new s$,u=0;u<=e;u++){var l=u/e;r[u]=this.getTangentAt(l,new NJ)}a[0]=new NJ,i[0]=new NJ;var c=Number.MAX_VALUE,d=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);d<=c&&(c=d,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),p<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),a[0].crossVectors(r[0],o),i[0].crossVectors(r[0],a[0]);for(var f=1;f<=e;f++){if(a[f]=a[f-1].clone(),i[f]=i[f-1].clone(),o.crossVectors(r[f-1],r[f]),o.length()>Number.EPSILON){o.normalize();var m=Math.acos(cJ(r[f-1].dot(r[f]),-1,1));a[f].applyMatrix4(s.makeRotationAxis(o,m))}i[f].crossVectors(r[f],a[f])}if(!0===t){var v=Math.acos(cJ(a[0].dot(a[e]),-1,1));v/=e,r[0].dot(o.crossVectors(a[0],a[e]))>0&&(v=-v);for(var g=1;g<=e;g++)a[g].applyMatrix4(s.makeRotationAxis(r[g],v*g)),i[g].crossVectors(r[g],a[g])}return{tangents:r,normals:a,binormals:i}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),P4=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return M(this,n),(e=t.call(this)).type="EllipseCurve",e.aX=r,e.aY=a,e.xRadius=i,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=u,e.aClockwise=l,e.aRotation=c,e}return(0,I.Z)(n,[{key:"getPoint",value:function(e,t){for(var n=t||new gJ,r=2*Math.PI,a=this.aEndAngle-this.aStartAngle,i=Math.abs(a)<Number.EPSILON;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(a=i?0:r),!0!==this.aClockwise||i||(a===r?a=-r:a-=r);var o=this.aStartAngle+e*a,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=s-this.aX,h=u-this.aY;s=d*l-h*c+this.aX,u=d*c+h*l+this.aY}return n.set(s,u)}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return pl(R(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(L4);P4.prototype.isEllipseCurve=!0;var F4=function(e){A(n,e);var t=F(n);function n(e,r,a,i,o,s){var u;return M(this,n),(u=t.call(this,e,r,a,a,i,o,s)).type="ArcCurve",u}return(0,I.Z)(n)}(P4);function j4(){var e=0,t=0,n=0,r=0;function a(a,i,o,s){e=a,t=o,n=-3*a+3*i-2*o-s,r=2*a-2*i+o+s}return{initCatmullRom:function(e,t,n,r,i){a(t,n,i*(n-e),i*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,i,o,s){var u=(t-e)/i-(n-e)/(i+o)+(n-t)/o,l=(n-t)/o-(r-t)/(o+s)+(r-n)/s;a(t,n,u*=o,l*=o)},calc:function(a){var i=a*a;return e+t*a+n*i+r*(i*a)}}}F4.prototype.isArcCurve=!0;var z4=new NJ,B4=new j4,U4=new j4,W4=new j4,V4=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return M(this,n),(e=t.call(this)).type="CatmullRomCurve3",e.points=r,e.closed=a,e.curveType=i,e.tension=o,e}return(0,I.Z)(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NJ,a=this.points,i=a.length,o=(i-(this.closed?0:1))*e,s=Math.floor(o),u=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/i)+1)*i:0===u&&s===i-1&&(s=i-2,u=1),this.closed||s>0?t=a[(s-1)%i]:(z4.subVectors(a[0],a[1]).add(a[0]),t=z4);var l=a[s%i],c=a[(s+1)%i];if(this.closed||s+2<i?n=a[(s+2)%i]:(z4.subVectors(a[i-1],a[i-2]).add(a[i-1]),n=z4),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,h=Math.pow(t.distanceToSquared(l),d),p=Math.pow(l.distanceToSquared(c),d),f=Math.pow(c.distanceToSquared(n),d);p<1e-4&&(p=1),h<1e-4&&(h=p),f<1e-4&&(f=p),B4.initNonuniformCatmullRom(t.x,l.x,c.x,n.x,h,p,f),U4.initNonuniformCatmullRom(t.y,l.y,c.y,n.y,h,p,f),W4.initNonuniformCatmullRom(t.z,l.z,c.z,n.z,h,p,f)}else"catmullrom"===this.curveType&&(B4.initCatmullRom(t.x,l.x,c.x,n.x,this.tension),U4.initCatmullRom(t.y,l.y,c.y,n.y,this.tension),W4.initCatmullRom(t.z,l.z,c.z,n.z,this.tension));return r.set(B4.calc(u),U4.calc(u),W4.calc(u)),r}},{key:"copy",value:function(e){pl(R(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var a=this.points[t];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){pl(R(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push((new NJ).fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(L4);function Z4(e,t,n,r,a){var i=.5*(r-t),o=.5*(a-n),s=e*e;return(2*n-2*r+i+o)*(e*s)+(-3*n+3*r-2*i-o)*s+i*e+n}function H4(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function G4(e,t,n,r,a){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,a)}V4.prototype.isCatmullRomCurve3=!0;var q4=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gJ,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gJ,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new gJ,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new gJ;return M(this,n),(e=t.call(this)).type="CubicBezierCurve",e.v0=r,e.v1=a,e.v2=i,e.v3=o,e}return(0,I.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gJ,n=this.v0,r=this.v1,a=this.v2,i=this.v3;return t.set(G4(e,n.x,r.x,a.x,i.x),G4(e,n.y,r.y,a.y,i.y)),t}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return pl(R(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(L4);q4.prototype.isCubicBezierCurve=!0;var X4=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new NJ,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NJ,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new NJ,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new NJ;return M(this,n),(e=t.call(this)).type="CubicBezierCurve3",e.v0=r,e.v1=a,e.v2=i,e.v3=o,e}return(0,I.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NJ,n=this.v0,r=this.v1,a=this.v2,i=this.v3;return t.set(G4(e,n.x,r.x,a.x,i.x),G4(e,n.y,r.y,a.y,i.y),G4(e,n.z,r.z,a.z,i.z)),t}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return pl(R(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(L4);X4.prototype.isCubicBezierCurve3=!0;var Y4=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gJ,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gJ;return M(this,n),(e=t.call(this)).type="LineCurve",e.v1=r,e.v2=a,e}return(0,I.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gJ;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new gJ;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return pl(R(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(L4);Y4.prototype.isLineCurve=!0;var K4=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gJ,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gJ,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new gJ;return M(this,n),(e=t.call(this)).type="QuadraticBezierCurve",e.v0=r,e.v1=a,e.v2=i,e}return(0,I.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gJ,n=this.v0,r=this.v1,a=this.v2;return t.set(H4(e,n.x,r.x,a.x),H4(e,n.y,r.y,a.y)),t}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return pl(R(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(L4);K4.prototype.isQuadraticBezierCurve=!0;var Q4=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new NJ,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NJ,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new NJ;return M(this,n),(e=t.call(this)).type="QuadraticBezierCurve3",e.v0=r,e.v1=a,e.v2=i,e}return(0,I.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NJ,n=this.v0,r=this.v1,a=this.v2;return t.set(H4(e,n.x,r.x,a.x),H4(e,n.y,r.y,a.y),H4(e,n.z,r.z,a.z)),t}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return pl(R(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(L4);Q4.prototype.isQuadraticBezierCurve3=!0;var J4=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return M(this,n),(e=t.call(this)).type="SplineCurve",e.points=r,e}return(0,I.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gJ,n=this.points,r=(n.length-1)*e,a=Math.floor(r),i=r-a,o=n[0===a?a:a-1],s=n[a],u=n[a>n.length-2?n.length-1:a+1],l=n[a>n.length-3?n.length-1:a+2];return t.set(Z4(i,o.x,s.x,u.x,l.x),Z4(i,o.y,s.y,u.y,l.y)),t}},{key:"copy",value:function(e){pl(R(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push(a.clone())}return this}},{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var a=this.points[t];e.points.push(a.toArray())}return e}},{key:"fromJSON",value:function(e){pl(R(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var a=e.points[t];this.points.push((new gJ).fromArray(a))}return this}}]),n}(L4);J4.prototype.isSplineCurve=!0;var $4=Object.freeze({__proto__:null,ArcCurve:F4,CatmullRomCurve3:V4,CubicBezierCurve:q4,CubicBezierCurve3:X4,EllipseCurve:P4,LineCurve:Y4,LineCurve3:function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new NJ,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NJ;return M(this,n),(e=t.call(this)).type="LineCurve3",e.isLineCurve3=!0,e.v1=r,e.v2=a,e}return(0,I.Z)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NJ;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return pl(R(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(L4),QuadraticBezierCurve:K4,QuadraticBezierCurve3:Q4,SplineCurve:J4}),e5=function(e){A(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return(0,I.Z)(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Y4(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),r=this.getCurveLengths(),a=0;a<r.length;){if(r[a]>=n){var i=r[a]-n,o=this.curves[a],s=o.getLength(),u=0===s?0:1-i/s;return o.getPointAt(u,t)}a++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,a=this.curves;r<a.length;r++)for(var i=a[r],o=i&&i.isEllipseCurve?2*t:i&&(i.isLineCurve||i.isLineCurve3)?1:i&&i.isSplineCurve?t*i.points.length:t,s=i.getPoints(o),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){pl(R(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var a=e.curves[t];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var a=this.curves[t];e.curves.push(a.toJSON())}return e}},{key:"fromJSON",value:function(e){pl(R(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var a=e.curves[t];this.curves.push((new $4[a.type]).fromJSON(a))}return this}}]),n}(L4),t5=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="Path",r.currentPoint=new gJ,e&&r.setFromPoints(e),r}return(0,I.Z)(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new Y4(this.currentPoint.clone(),new gJ(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var a=new K4(this.currentPoint.clone(),new gJ(e,t),new gJ(n,r));return this.curves.push(a),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,a,i){var o=new q4(this.currentPoint.clone(),new gJ(e,t),new gJ(n,r),new gJ(a,i));return this.curves.push(o),this.currentPoint.set(a,i),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new J4(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,a,i){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,a,i),this}},{key:"absarc",value:function(e,t,n,r,a,i){return this.absellipse(e,t,n,n,r,a,i),this}},{key:"ellipse",value:function(e,t,n,r,a,i,o,s){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+u,t+l,n,r,a,i,o,s),this}},{key:"absellipse",value:function(e,t,n,r,a,i,o,s){var u=new P4(e,t,n,r,a,i,o,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return pl(R(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(e5),n5=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).uuid=lJ(),r.type="Shape",r.holes=[],r}return(0,I.Z)(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){pl(R(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var a=e.holes[t];this.holes.push(a.clone())}return this}},{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var a=this.holes[t];e.holes.push(a.toJSON())}return e}},{key:"fromJSON",value:function(e){pl(R(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var a=e.holes[t];this.holes.push((new t5).fromJSON(a))}return this}}]),n}(t5);function r5(e,t,n,r,a){var i,o;if(a===function(e,t,n,r){for(var a=0,i=t,o=n-r;i<n;i+=r)a+=(e[o]-e[i])*(e[i+1]+e[o+1]),o=i;return a}(e,t,n,r)>0)for(i=t;i<n;i+=r)o=E5(i,e[i],e[i+1],o);else for(i=n-r;i>=t;i-=r)o=E5(i,e[i],e[i+1],o);return o&&y5(o,o.next)&&(T5(o),o=o.next),o}function a5(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!y5(r,r.next)&&0!==g5(r.prev,r,r.next))r=r.next;else{if(T5(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function i5(e,t,n,r,a,i,o){if(e){!o&&i&&function(e,t,n,r){var a=e;do{null===a.z&&(a.z=p5(a.x,a.y,t,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,function(e){var t,n,r,a,i,o,s,u,l=1;do{for(n=e,e=null,i=null,o=0;n;){for(o++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(a=n,n=n.nextZ,s--):(a=r,r=r.nextZ,u--),i?i.nextZ=a:e=a,a.prevZ=i,i=a;n=r}i.nextZ=null,l*=2}while(o>1)}(a)}(e,r,a,i);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,i?s5(e,r,a,i):o5(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),T5(e),e=u.next,l=u.next;else if((e=u)===l){o?1===o?i5(e=u5(a5(e),t,n),t,n,r,a,i,2):2===o&&l5(e,t,n,r,a,i):i5(a5(e),t,n,r,a,i,1);break}}}function o5(e){var t=e.prev,n=e,r=e.next;if(g5(t,n,r)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(m5(t.x,t.y,n.x,n.y,r.x,r.y,a.x,a.y)&&g5(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function s5(e,t,n,r){var a=e.prev,i=e,o=e.next;if(g5(a,i,o)>=0)return!1;for(var s=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,u=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,l=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,c=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y,d=p5(s,u,t,n,r),h=p5(l,c,t,n,r),p=e.prevZ,f=e.nextZ;p&&p.z>=d&&f&&f.z<=h;){if(p!==e.prev&&p!==e.next&&m5(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&g5(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&m5(a.x,a.y,i.x,i.y,o.x,o.y,f.x,f.y)&&g5(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=d;){if(p!==e.prev&&p!==e.next&&m5(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&g5(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=h;){if(f!==e.prev&&f!==e.next&&m5(a.x,a.y,i.x,i.y,o.x,o.y,f.x,f.y)&&g5(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function u5(e,t,n){var r=e;do{var a=r.prev,i=r.next.next;!y5(a,i)&&b5(a,r,r.next,i)&&k5(a,i)&&k5(i,a)&&(t.push(a.i/n),t.push(r.i/n),t.push(i.i/n),T5(r),T5(r.next),r=e=i),r=r.next}while(r!==e);return a5(r)}function l5(e,t,n,r,a,i){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&v5(o,s)){var u=S5(o,s);return o=a5(o,o.next),u=a5(u,u.next),i5(o,t,n,r,a,i),void i5(u,t,n,r,a,i)}s=s.next}o=o.next}while(o!==e)}function c5(e,t){return e.x-t.x}function d5(e,t){if(t=function(e,t){var n,r=t,a=e.x,i=e.y,o=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>o){if(o=s,s===a){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(a===o)return n;var u,l=n,c=n.x,d=n.y,h=1/0;r=n;do{a>=r.x&&r.x>=c&&a!==r.x&&m5(i<d?a:o,i,c,d,i<d?o:a,i,r.x,r.y)&&(u=Math.abs(i-r.y)/(a-r.x),k5(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&h5(n,r)))&&(n=r,h=u)),r=r.next}while(r!==l);return n}(e,t),t){var n=S5(t,e);a5(t,t.next),a5(n,n.next)}}function h5(e,t){return g5(e.prev,e,t.prev)<0&&g5(t.next,e,e.next)<0}function p5(e,t,n,r,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*a)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*a)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function f5(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function m5(e,t,n,r,a,i,o,s){return(a-o)*(t-s)-(e-o)*(i-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(i-s)-(a-o)*(r-s)>=0}function v5(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&b5(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(k5(e,t)&&k5(t,e)&&function(e,t){var n=e,r=!1,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&a<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(g5(e.prev,e,t.prev)||g5(e,t.prev,t))||y5(e,t)&&g5(e.prev,e,e.next)>0&&g5(t.prev,t,t.next)>0)}function g5(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function y5(e,t){return e.x===t.x&&e.y===t.y}function b5(e,t,n,r){var a=w5(g5(e,t,n)),i=w5(g5(e,t,r)),o=w5(g5(n,r,e)),s=w5(g5(n,r,t));return a!==i&&o!==s||!(0!==a||!x5(e,n,t))||!(0!==i||!x5(e,r,t))||!(0!==o||!x5(n,e,r))||!(0!==s||!x5(n,t,r))}function x5(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function w5(e){return e>0?1:e<0?-1:0}function k5(e,t){return g5(e.prev,e,e.next)<0?g5(e,t,e.next)>=0&&g5(e,e.prev,t)>=0:g5(e,t,e.prev)<0||g5(e,e.next,t)<0}function S5(e,t){var n=new C5(e.i,e.x,e.y),r=new C5(t.i,t.x,t.y),a=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=a,a.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function E5(e,t,n,r){var a=new C5(e,t,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function T5(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function C5(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var _5=function(){function e(){M(this,e)}return(0,I.Z)(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,a=0;a<t;r=a++)n+=e[r].x*e[a].y-e[a].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],a=[];M5(e),I5(n,e);var i=e.length;t.forEach(M5);for(var o=0;o<t.length;o++)r.push(i),i+=t[o].length,I5(n,t[o]);for(var s=function(e,t){var n,r,a,i,o,s,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,d=c?t[0]*l:e.length,h=r5(e,0,d,l,!0),p=[];if(!h||h.next===h.prev)return p;if(c&&(h=function(e,t,n,r){var a,i,o,s=[];for(a=0,i=t.length;a<i;a++)(o=r5(e,t[a]*r,a<i-1?t[a+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(f5(o));for(s.sort(c5),a=0;a<s.length;a++)d5(s[a],n),n=a5(n,n.next);return n}(e,t,h,l)),e.length>80*l){n=a=e[0],r=i=e[1];for(var f=l;f<d;f+=l)(o=e[f])<n&&(n=o),(s=e[f+1])<r&&(r=s),o>a&&(a=o),s>i&&(i=s);u=0!==(u=Math.max(a-n,i-r))?1/u:0}return i5(h,p,l,n,r,u),p}(n,r),u=0;u<s.length;u+=3)a.push(s.slice(u,u+3));return a}}]),e}();function M5(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function I5(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var N5=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n5([new gJ(.5,.5),new gJ(-.5,.5),new gJ(-.5,-.5),new gJ(.5,-.5)]),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};M(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:r,options:a},r=Array.isArray(r)?r:[r];for(var i=(0,L.Z)(e),o=[],s=[],u=0,l=r.length;u<l;u++)c(r[u]);function c(e){var t=[],n=void 0!==a.curveSegments?a.curveSegments:12,r=void 0!==a.steps?a.steps:1,u=void 0!==a.depth?a.depth:1,l=void 0===a.bevelEnabled||a.bevelEnabled,c=void 0!==a.bevelThickness?a.bevelThickness:.2,d=void 0!==a.bevelSize?a.bevelSize:c-.1,h=void 0!==a.bevelOffset?a.bevelOffset:0,p=void 0!==a.bevelSegments?a.bevelSegments:3,f=a.extrudePath,m=void 0!==a.UVGenerator?a.UVGenerator:A5;void 0!==a.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=a.amount);var v,g,y,b,x,w=!1;f&&(v=f.getSpacedPoints(r),w=!0,l=!1,g=f.computeFrenetFrames(r,!1),y=new NJ,b=new NJ,x=new NJ),l||(p=0,c=0,d=0,h=0);var k=e.extractPoints(n),S=k.shape,E=k.holes;if(!_5.isClockWise(S)){S=S.reverse();for(var T=0,C=E.length;T<C;T++){var _=E[T];_5.isClockWise(_)&&(E[T]=_.reverse())}}for(var M=_5.triangulateShape(S,E),I=S,N=0,A=E.length;N<A;N++){var R=E[N];S=S.concat(R)}function O(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var D=S.length,L=M.length;function P(e,t,n){var r,a,i,o=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=o*o+s*s,d=o*l-s*u;if(Math.abs(d)>Number.EPSILON){var h=Math.sqrt(c),p=Math.sqrt(u*u+l*l),f=t.x-s/h,m=t.y+o/h,v=((n.x-l/p-f)*l-(n.y+u/p-m)*u)/(o*l-s*u),g=(r=f+o*v-e.x)*r+(a=m+s*v-e.y)*a;if(g<=2)return new gJ(r,a);i=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?u>Number.EPSILON&&(y=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,a=o,i=Math.sqrt(c)):(r=o,a=s,i=Math.sqrt(c/2))}return new gJ(r/i,a/i)}for(var F=[],j=0,z=I.length,B=z-1,U=j+1;j<z;j++,B++,U++)B===z&&(B=0),U===z&&(U=0),F[j]=P(I[j],I[B],I[U]);for(var W,V=[],Z=F.concat(),H=0,G=E.length;H<G;H++){var q=E[H];W=[];for(var X=0,Y=q.length,K=Y-1,Q=X+1;X<Y;X++,K++,Q++)K===Y&&(K=0),Q===Y&&(Q=0),W[X]=P(q[X],q[K],q[Q]);V.push(W),Z=Z.concat(W)}for(var J=0;J<p;J++){for(var $=J/p,ee=c*Math.cos($*Math.PI/2),te=d*Math.sin($*Math.PI/2)+h,ne=0,re=I.length;ne<re;ne++){var ae=O(I[ne],F[ne],te);Ae(ae.x,ae.y,-ee)}for(var ie=0,oe=E.length;ie<oe;ie++){var se=E[ie];W=V[ie];for(var ue=0,le=se.length;ue<le;ue++){var ce=O(se[ue],W[ue],te);Ae(ce.x,ce.y,-ee)}}}for(var de=d+h,he=0;he<D;he++){var pe=l?O(S[he],Z[he],de):S[he];w?(b.copy(g.normals[0]).multiplyScalar(pe.x),y.copy(g.binormals[0]).multiplyScalar(pe.y),x.copy(v[0]).add(b).add(y),Ae(x.x,x.y,x.z)):Ae(pe.x,pe.y,0)}for(var fe=1;fe<=r;fe++)for(var me=0;me<D;me++){var ve=l?O(S[me],Z[me],de):S[me];w?(b.copy(g.normals[fe]).multiplyScalar(ve.x),y.copy(g.binormals[fe]).multiplyScalar(ve.y),x.copy(v[fe]).add(b).add(y),Ae(x.x,x.y,x.z)):Ae(ve.x,ve.y,u/r*fe)}for(var ge=p-1;ge>=0;ge--){for(var ye=ge/p,be=c*Math.cos(ye*Math.PI/2),xe=d*Math.sin(ye*Math.PI/2)+h,we=0,ke=I.length;we<ke;we++){var Se=O(I[we],F[we],xe);Ae(Se.x,Se.y,u+be)}for(var Ee=0,Te=E.length;Ee<Te;Ee++){var Ce=E[Ee];W=V[Ee];for(var _e=0,Me=Ce.length;_e<Me;_e++){var Ie=O(Ce[_e],W[_e],xe);w?Ae(Ie.x,Ie.y+v[r-1].y,v[r-1].x+be):Ae(Ie.x,Ie.y,u+be)}}}function Ne(e,t){for(var n=e.length;--n>=0;){var a=n,i=n-1;i<0&&(i=e.length-1);for(var o=0,s=r+2*p;o<s;o++){var u=D*o,l=D*(o+1);Oe(t+a+u,t+i+u,t+i+l,t+a+l)}}}function Ae(e,n,r){t.push(e),t.push(n),t.push(r)}function Re(e,t,n){De(e),De(t),De(n);var r=o.length/3,a=m.generateTopUV(i,o,r-3,r-2,r-1);Le(a[0]),Le(a[1]),Le(a[2])}function Oe(e,t,n,r){De(e),De(t),De(r),De(t),De(n),De(r);var a=o.length/3,s=m.generateSideWallUV(i,o,a-6,a-3,a-2,a-1);Le(s[0]),Le(s[1]),Le(s[3]),Le(s[1]),Le(s[2]),Le(s[3])}function De(e){o.push(t[3*e+0]),o.push(t[3*e+1]),o.push(t[3*e+2])}function Le(e){s.push(e.x),s.push(e.y)}!function(){var e=o.length/3;if(l){for(var t=0,n=D*t,a=0;a<L;a++){var s=M[a];Re(s[2]+n,s[1]+n,s[0]+n)}n=D*(t=r+2*p);for(var u=0;u<L;u++){var c=M[u];Re(c[0]+n,c[1]+n,c[2]+n)}}else{for(var d=0;d<L;d++){var h=M[d];Re(h[2],h[1],h[0])}for(var f=0;f<L;f++){var m=M[f];Re(m[0]+D*r,m[1]+D*r,m[2]+D*r)}}i.addGroup(e,o.length/3-e,0)}(),function(){var e=o.length/3,t=0;Ne(I,t),t+=I.length;for(var n=0,r=E.length;n<r;n++){var a=E[n];Ne(a,t),t+=a.length}i.addGroup(e,o.length/3-e,1)}()}return e.setAttribute("position",new i0(o,3)),e.setAttribute("uv",new i0(s,2)),e.computeVertexNormals(),e}return(0,I.Z)(n,[{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,a=e.length;r<a;r++){var i=e[r];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],a=0,i=e.shapes.length;a<i;a++){var o=t[e.shapes[a]];r.push(o)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new $4[s.type]).fromJSON(s)),new n(r,e.options)}}]),n}(p0),A5={generateTopUV:function(e,t,n,r,a){var i=t[3*n],o=t[3*n+1],s=t[3*r],u=t[3*r+1],l=t[3*a],c=t[3*a+1];return[new gJ(i,o),new gJ(s,u),new gJ(l,c)]},generateSideWallUV:function(e,t,n,r,a,i){var o=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],d=t[3*r+2],h=t[3*a],p=t[3*a+1],f=t[3*a+2],m=t[3*i],v=t[3*i+1],g=t[3*i+2];return Math.abs(s-c)<Math.abs(o-l)?[new gJ(o,1-u),new gJ(l,1-d),new gJ(h,1-f),new gJ(m,1-g)]:[new gJ(s,1-u),new gJ(c,1-d),new gJ(p,1-f),new gJ(v,1-g)]}},R5=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n5([new gJ(0,.5),new gJ(-.5,-.5),new gJ(.5,-.5)]),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;M(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:r,curveSegments:a};var i=[],o=[],s=[],u=[],l=0,c=0;if(!1===Array.isArray(r))h(r);else for(var d=0;d<r.length;d++)h(r[d]),e.addGroup(l,c,d),l+=c,c=0;function h(e){var t=o.length/3,n=e.extractPoints(a),r=n.shape,l=n.holes;!1===_5.isClockWise(r)&&(r=r.reverse());for(var d=0,h=l.length;d<h;d++){var p=l[d];!0===_5.isClockWise(p)&&(l[d]=p.reverse())}for(var f=_5.triangulateShape(r,l),m=0,v=l.length;m<v;m++){var g=l[m];r=r.concat(g)}for(var y=0,b=r.length;y<b;y++){var x=r[y];o.push(x.x,x.y,0),s.push(0,0,1),u.push(x.x,x.y)}for(var w=0,k=f.length;w<k;w++){var S=f[w],E=S[0]+t,T=S[1]+t,C=S[2]+t;i.push(E,T,C),c+=3}}return e.setIndex(i),e.setAttribute("position",new i0(o,3)),e.setAttribute("normal",new i0(s,3)),e.setAttribute("uv",new i0(u,2)),e}return(0,I.Z)(n,[{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var a=e[n];t.shapes.push(a.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],a=0,i=e.shapes.length;a<i;a++){var o=t[e.shapes[a]];r.push(o)}return new n(r,e.curveSegments)}}]),n}(p0),O5=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="ShadowMaterial",r.color=new J$(0),r.transparent=!0,r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this}}]),n}(H$);O5.prototype.isShadowMaterial=!0;var D5=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new J$(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new J$(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new gJ(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(H$);D5.prototype.isMeshStandardMaterial=!0;var L5=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new gJ(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty((0,L.Z)(r),"reflectivity",{get:function(){return cJ(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.sheenTint=new J$(0),r.sheenRoughness=1,r.transmissionMap=null,r.thickness=.01,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationTint=new J$(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularTint=new J$(1,1,1),r.specularTintMap=null,r._sheen=0,r._clearcoat=0,r._transmission=0,r.setValues(e),r}return(0,I.Z)(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenTint.copy(e.sheenTint),this.sheenRoughness=e.sheenRoughness,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}}]),n}(D5);L5.prototype.isMeshPhysicalMaterial=!0,function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="MeshPhongMaterial",r.color=new J$(16777215),r.specular=new J$(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new J$(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new gJ(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(H$).prototype.isMeshPhongMaterial=!0,function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).defines={TOON:""},r.type="MeshToonMaterial",r.color=new J$(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new J$(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new gJ(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(H$).prototype.isMeshToonMaterial=!0,function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new gJ(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.flatShading=!1,r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(H$).prototype.isMeshNormalMaterial=!0,function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="MeshLambertMaterial",r.color=new J$(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new J$(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(H$).prototype.isMeshLambertMaterial=!0,function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new J$(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new gJ(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}]),n}(H$).prototype.isMeshMatcapMaterial=!0,function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(v4).prototype.isLineDashedMaterial=!0;var P5={arraySlice:function(e,t,n){return P5.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,a=new e.constructor(r),i=0,o=0;o!==r;++i)for(var s=n[i]*t,u=0;u!==t;++u)a[o++]=e[s+u];return a},flattenJSON:function(e,t,n,r){for(var a=1,i=e[0];void 0!==i&&void 0===i[r];)i=e[a++];if(void 0!==i){var o=i[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=i[r])&&(t.push(i.time),n.push.apply(n,o)),i=e[a++]}while(void 0!==i);else if(void 0!==o.toArray)do{void 0!==(o=i[r])&&(t.push(i.time),o.toArray(n,n.length)),i=e[a++]}while(void 0!==i);else do{void 0!==(o=i[r])&&(t.push(i.time),n.push(o)),i=e[a++]}while(void 0!==i)}},subclip:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,i=e.clone();i.name=t;for(var o=[],s=0;s<i.tracks.length;++s){for(var u=i.tracks[s],l=u.getValueSize(),c=[],d=[],h=0;h<u.times.length;++h){var p=u.times[h]*a;if(!(p<n||p>=r)){c.push(u.times[h]);for(var f=0;f<l;++f)d.push(u.values[h*l+f])}}0!==c.length&&(u.times=P5.convertArray(c,u.times.constructor),u.values=P5.convertArray(d,u.values.constructor),o.push(u))}i.tracks=o;for(var m=1/0,v=0;v<i.tracks.length;++v)m>i.tracks[v].times[0]&&(m=i.tracks[v].times[0]);for(var g=0;g<i.tracks.length;++g)i.tracks[g].shift(-1*m);return i.resetDuration(),i},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var a=n.tracks.length,i=t/r,o=function(){var t=n.tracks[s],r=t.ValueTypeName;if("bool"===r||"string"===r)return"continue";var a=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===a)return"continue";var o=0,u=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=u/3);var l=0,c=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);var d,h=t.times.length-1;if(i<=t.times[0]){var p=o,f=u-o;d=P5.arraySlice(t.values,p,f)}else if(i>=t.times[h]){var m=h*u+o,v=m+u-o;d=P5.arraySlice(t.values,m,v)}else{var g=t.createInterpolant(),y=o,b=u-o;g.evaluate(i),d=P5.arraySlice(g.resultBuffer,y,b)}"quaternion"===r&&(new IJ).fromArray(d).normalize().conjugate().toArray(d);for(var x=a.times.length,w=0;w<x;++w){var k=w*c+l;if("quaternion"===r)IJ.multiplyQuaternionsFlat(a.values,k,d,0,a.values,k);else for(var S=c-2*l,E=0;E<S;++E)a.values[k+E]-=d[E]}},s=0;s<a;++s)o();return e.blendMode=2501,e}},F5=function(){function e(t,n,r,a){M(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return(0,I.Z)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],a=t[n-1];e:{t:{var i;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<a)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,a)}if(n===o)break;if(a=r,e<(r=t[++n]))break t}i=t.length;break n}if(e>=a)break e;var s=t[1];e<s&&(n=2,a=s);for(var u=n-2;;){if(void 0===a)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===u)break;if(r=a,e>=(a=t[--n-1]))break t}i=n,n=0}for(;n<i;){var l=n+i>>>1;e<t[l]?i=l:n=l+1}if(r=t[n],void 0===(a=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,a,e)}this._cachedIndex=n,this.intervalChanged_(n,a,r)}return this.interpolate_(n,a,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r,i=0;i!==r;++i)t[i]=n[a+i];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();F5.prototype.beforeStart_=F5.prototype.copySampleValue_,F5.prototype.afterEnd_=F5.prototype.copySampleValue_;var j5=function(e){A(n,e);var t=F(n);function n(e,r,a,i){var o;return M(this,n),(o=t.call(this,e,r,a,i))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:2400,endingEnd:2400},o}return(0,I.Z)(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,a=e-2,i=e+1,o=r[a],s=r[i];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:a=e,o=2*t-n;break;case 2402:o=t+r[a=r.length-2]-r[a+1];break;default:a=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:i=e,s=2*n-t;break;case 2402:i=1,s=n+r[1]-r[0];break;default:i=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=a*l,this._offsetNext=i*l}},{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,v=-d*m+2*d*f-d*p,g=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,y=(-1-h)*m+(1.5+h)*f+.5*p,b=h*m-h*f,x=0;x!==o;++x)a[x]=v*i[l+x]+g*i[u+x]+y*i[s+x]+b*i[c+x];return a}}]),n}(F5),z5=function(e){A(n,e);var t=F(n);function n(e,r,a,i){return M(this,n),t.call(this,e,r,a,i)}return(0,I.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=(n-t)/(r-t),c=1-l,d=0;d!==o;++d)a[d]=i[u+d]*c+i[s+d]*l;return a}}]),n}(F5),B5=function(e){A(n,e);var t=F(n);function n(e,r,a,i){return M(this,n),t.call(this,e,r,a,i)}return(0,I.Z)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(F5),U5=function(){function e(t,n,r,a){if(M(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=P5.convertArray(n,this.TimeBufferType),this.values=P5.convertArray(r,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}return(0,I.Z)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new B5(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new z5(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new j5(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,a=0,i=r-1;a!==r&&n[a]<e;)++a;for(;-1!==i&&n[i]>t;)--i;if(++i,0!==a||i!==r){a>=i&&(a=(i=Math.max(i,1))-1);var o=this.getValueSize();this.times=P5.arraySlice(n,a,i),this.values=P5.arraySlice(this.values,a*o,i*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,a=n.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var i=null,o=0;o!==a;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==i&&i>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,i),e=!1;break}i=s}if(void 0!==r&&P5.isTypedArray(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=P5.arraySlice(this.times),t=P5.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),a=e.length-1,i=1,o=1;o<a;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==e[0]))if(r)s=!0;else for(var l=o*n,c=l-n,d=l+n,h=0;h!==n;++h){var p=t[l+h];if(p!==t[c+h]||p!==t[d+h]){s=!0;break}}if(s){if(o!==i){e[i]=e[o];for(var f=o*n,m=i*n,v=0;v!==n;++v)t[m+v]=t[f+v]}++i}}if(a>0){e[i]=e[a];for(var g=a*n,y=i*n,b=0;b!==n;++b)t[y+b]=t[g+b];++i}return i!==e.length?(this.times=P5.arraySlice(e,0,i),this.values=P5.arraySlice(t,0,i*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=P5.arraySlice(this.times,0),t=P5.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:P5.convertArray(e.times,Array),values:P5.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();U5.prototype.TimeBufferType=Float32Array,U5.prototype.ValueBufferType=Float32Array,U5.prototype.DefaultInterpolation=2301;var W5=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n)}(U5);W5.prototype.ValueTypeName="bool",W5.prototype.ValueBufferType=Array,W5.prototype.DefaultInterpolation=2300,W5.prototype.InterpolantFactoryMethodLinear=void 0,W5.prototype.InterpolantFactoryMethodSmooth=void 0;var V5=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n)}(U5);V5.prototype.ValueTypeName="color";var Z5=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n)}(U5);Z5.prototype.ValueTypeName="number";var H5=function(e){A(n,e);var t=F(n);function n(e,r,a,i){return M(this,n),t.call(this,e,r,a,i)}return(0,I.Z)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),u=e*o,l=u+o;u!==l;u+=4)IJ.slerpFlat(a,0,i,u-o,i,u,s);return a}}]),n}(F5),G5=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new H5(this.times,this.values,this.getValueSize(),e)}}]),n}(U5);G5.prototype.ValueTypeName="quaternion",G5.prototype.DefaultInterpolation=2301,G5.prototype.InterpolantFactoryMethodSmooth=void 0;var q5=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n)}(U5);q5.prototype.ValueTypeName="string",q5.prototype.ValueBufferType=Array,q5.prototype.DefaultInterpolation=2300,q5.prototype.InterpolantFactoryMethodLinear=void 0,q5.prototype.InterpolantFactoryMethodSmooth=void 0;var X5=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n)}(U5);X5.prototype.ValueTypeName="vector";var Y5=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;M(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=a,this.uuid=lJ(),this.duration<0&&this.resetDuration()}return(0,I.Z)(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),a=0,i=n.length;a!==i;++a)t.push(K5(n[a]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},a=0,i=n.length;a!==i;++a)t.push(U5.toJSON(n[a]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var a=t.length,i=[],o=0;o<a;o++){var s=[],u=[];s.push((o+a-1)%a,o,(o+1)%a),u.push(0,1,0);var l=P5.getKeyframeOrder(s);s=P5.sortedArray(s,1,l),u=P5.sortedArray(u,1,l),r||0!==s[0]||(s.push(a),u.push(u[0])),i.push(new Z5(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/n))}return new this(e,-1,i)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var a=0;a<n.length;a++)if(n[a].name===t)return n[a];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},a=/^([\w-]*?)([\d]+)$/,i=0,o=e.length;i<o;i++){var s=e[i],u=s.name.match(a);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(s)}}var d=[];for(var h in r)d.push(this.CreateFromMorphTargetSequence(h,r[h],t,n));return d}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,a){if(0!==n.length){var i=[],o=[];P5.flattenJSON(n,i,o,r),0!==i.length&&a.push(new e(t,i,o))}},r=[],a=e.name||"default",i=e.fps||30,o=e.blendMode,s=e.length||-1,u=e.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var d={},h=void 0;for(h=0;h<c.length;h++)if(c[h].morphTargets)for(var p=0;p<c[h].morphTargets.length;p++)d[c[h].morphTargets[p]]=-1;for(var f in d){for(var m=[],v=[],g=0;g!==c[h].morphTargets.length;++g){var y=c[h];m.push(y.time),v.push(y.morphTarget===f?1:0)}r.push(new Z5(".morphTargetInfluence["+f+"]",m,v))}s=d.length*(i||1)}else{var b=".bones["+t[l].name+"]";n(X5,b+".position",c,"pos",r),n(G5,b+".quaternion",c,"rot",r),n(X5,b+".scale",c,"scl",r)}}return 0===r.length?null:new this(a,s,r,o)}}]),e}();function K5(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Z5;case"vector":case"vector2":case"vector3":case"vector4":return X5;case"color":return V5;case"quaternion":return G5;case"bool":case"boolean":return W5;case"string":return q5}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];P5.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var Q5={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},J5=new(function(){return(0,I.Z)((function e(t,n,r){M(this,e);var a,i=this,o=!1,s=0,u=0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){u++,!1===o&&void 0!==i.onStart&&i.onStart(e,s,u),o=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,u),s===u&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return a?a(e):e},this.setURLModifier=function(e){return a=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],a=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return a}return null}}))}()),$5=function(){function e(t){M(this,e),this.manager=void 0!==t?t:J5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,I.Z)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,a){n.load(e,r,t,a)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),e6={},t6=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,i=Q5.get(e);if(void 0!==i)return a.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;if(void 0===e6[e]){var o,s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var u=s[1],l=!!s[2],c=s[3];c=decodeURIComponent(c),l&&(c=atob(c));try{var d,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var p=new Uint8Array(c.length),f=0;f<c.length;f++)p[f]=c.charCodeAt(f);d="blob"===h?new Blob([p.buffer],{type:u}):p.buffer;break;case"document":var m=new DOMParser;d=m.parseFromString(c,u);break;case"json":d=JSON.parse(c);break;default:d=c}setTimeout((function(){t&&t(d),a.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)}),0)}}else{for(var v in e6[e]=[],e6[e].push({onLoad:t,onProgress:n,onError:r}),(o=new XMLHttpRequest).open("GET",e,!0),o.addEventListener("load",(function(t){var n=this.response,r=e6[e];if(delete e6[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Q5.add(e,n);for(var i=0,o=r.length;i<o;i++){var s=r[i];s.onLoad&&s.onLoad(n)}a.manager.itemEnd(e)}else{for(var u=0,l=r.length;u<l;u++){var c=r[u];c.onError&&c.onError(t)}a.manager.itemError(e),a.manager.itemEnd(e)}}),!1),o.addEventListener("progress",(function(t){for(var n=e6[e],r=0,a=n.length;r<a;r++){var i=n[r];i.onProgress&&i.onProgress(t)}}),!1),o.addEventListener("error",(function(t){var n=e6[e];delete e6[e];for(var r=0,i=n.length;r<i;r++){var o=n[r];o.onError&&o.onError(t)}a.manager.itemError(e),a.manager.itemEnd(e)}),!1),o.addEventListener("abort",(function(t){var n=e6[e];delete e6[e];for(var r=0,i=n.length;r<i;r++){var o=n[r];o.onError&&o.onError(t)}a.manager.itemError(e),a.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)o.setRequestHeader(v,this.requestHeader[v]);o.send(null)}return a.manager.itemStart(e),o}e6[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}($5),n6=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,i=Q5.get(e);if(void 0!==i)return a.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;var o=wJ("img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),Q5.add(e,this),t&&t(this),a.manager.itemEnd(e)}function u(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}]),n}($5),r6=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"load",value:function(e,t,n,r){var a=new U0,i=new n6(this.manager);i.setCrossOrigin(this.crossOrigin),i.setPath(this.path);var o=0;function s(n){i.load(e[n],(function(e){a.images[n]=e,6===++o&&(a.needsUpdate=!0,t&&t(a))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return a}}]),n}($5),a6=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"load",value:function(e,t,n,r){var a=this,i=new s4,o=new t6(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,(function(e){var n=a.parse(e);n&&(void 0!==n.image?i.image=n.image:void 0!==n.data&&(i.image.width=n.width,i.image.height=n.height,i.image.data=n.data),i.wrapS=void 0!==n.wrapS?n.wrapS:1001,i.wrapT=void 0!==n.wrapT?n.wrapT:1001,i.magFilter=void 0!==n.magFilter?n.magFilter:1006,i.minFilter=void 0!==n.minFilter?n.minFilter:1006,i.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(i.encoding=n.encoding),void 0!==n.flipY&&(i.flipY=n.flipY),void 0!==n.format&&(i.format=n.format),void 0!==n.type&&(i.type=n.type),void 0!==n.mipmaps&&(i.mipmaps=n.mipmaps,i.minFilter=1008),1===n.mipmapCount&&(i.minFilter=1006),void 0!==n.generateMipmaps&&(i.generateMipmaps=n.generateMipmaps),i.needsUpdate=!0,t&&t(i,n))}),n,r),i}}]),n}($5),i6=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"load",value:function(e,t,n,r){var a=new EJ,i=new n6(this.manager);return i.setCrossOrigin(this.crossOrigin),i.setPath(this.path),i.load(e,(function(e){a.image=e,a.needsUpdate=!0,void 0!==t&&t(a)}),n,r),a}}]),n}($5),o6=function(e){A(n,e);var t=F(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return M(this,n),(r=t.call(this)).type="Light",r.color=new J$(e),r.intensity=a,r}return(0,I.Z)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=pl(R(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(R$);o6.prototype.isLight=!0,function(e){A(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this,e,a)).type="HemisphereLight",i.position.copy(R$.DefaultUp),i.updateMatrix(),i.groundColor=new J$(r),i}return(0,I.Z)(n,[{key:"copy",value:function(e){return o6.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}]),n}(o6).prototype.isHemisphereLight=!0;var s6=new s$,u6=new NJ,l6=new NJ,c6=function(){function e(t){M(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new gJ(512,512),this.map=null,this.mapPass=null,this.matrix=new s$,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Y0,this._frameExtents=new gJ(1,1),this._viewportCount=1,this._viewports=[new CJ(0,0,1,1)]}return(0,I.Z)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;u6.setFromMatrixPosition(e.matrixWorld),t.position.copy(u6),l6.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(l6),t.updateMatrixWorld(),s6.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s6),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),d6=function(e){A(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this,new z0(50,1,.5,500))).focus=1,e}return(0,I.Z)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*iJ*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;r===t.fov&&a===t.aspect&&i===t.far||(t.fov=r,t.aspect=a,t.far=i,t.updateProjectionMatrix()),pl(R(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(c6);d6.prototype.isSpotLightShadow=!0;var h6=function(e){A(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return M(this,n),(a=t.call(this,e,r)).type="SpotLight",a.position.copy(R$.DefaultUp),a.updateMatrix(),a.target=new R$,a.distance=i,a.angle=o,a.penumbra=s,a.decay=u,a.shadow=new d6,a}return(0,I.Z)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(o6);h6.prototype.isSpotLight=!0;var p6=new s$,f6=new NJ,m6=new NJ,v6=function(e){A(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this,new z0(90,1,.5,500)))._frameExtents=new gJ(4,2),e._viewportCount=6,e._viewports=[new CJ(2,1,1,1),new CJ(0,1,1,1),new CJ(3,1,1,1),new CJ(1,1,1,1),new CJ(3,0,1,1),new CJ(1,0,1,1)],e._cubeDirections=[new NJ(1,0,0),new NJ(-1,0,0),new NJ(0,0,1),new NJ(0,0,-1),new NJ(0,1,0),new NJ(0,-1,0)],e._cubeUps=[new NJ(0,1,0),new NJ(0,1,0),new NJ(0,1,0),new NJ(0,1,0),new NJ(0,0,1),new NJ(0,0,-1)],e}return(0,I.Z)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),f6.setFromMatrixPosition(e.matrixWorld),n.position.copy(f6),m6.copy(n.position),m6.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(m6),n.updateMatrixWorld(),r.makeTranslation(-f6.x,-f6.y,-f6.z),p6.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(p6)}}]),n}(c6);v6.prototype.isPointLightShadow=!0;var g6=function(e){A(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return M(this,n),(a=t.call(this,e,r)).type="PointLight",a.distance=i,a.decay=o,a.shadow=new v6,a}return(0,I.Z)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(o6);g6.prototype.isPointLight=!0;var y6=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.call(this,new u1(-5,5,5,-5,.5,500))}return(0,I.Z)(n)}(c6);y6.prototype.isDirectionalLightShadow=!0;var b6=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this,e,r)).type="DirectionalLight",a.position.copy(R$.DefaultUp),a.updateMatrix(),a.target=new R$,a.shadow=new y6,a}return(0,I.Z)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(o6);b6.prototype.isDirectionalLight=!0,function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this,e,r)).type="AmbientLight",a}return(0,I.Z)(n)}(o6).prototype.isAmbientLight=!0,function(e){A(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return M(this,n),(a=t.call(this,e,r)).type="RectAreaLight",a.width=i,a.height=o,a}return(0,I.Z)(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=pl(R(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(o6).prototype.isRectAreaLight=!0;var x6=function(){function e(){M(this,e),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new NJ)}return(0,I.Z)(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,a=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.282095),t.addScaledVector(i[1],.488603*r),t.addScaledVector(i[2],.488603*a),t.addScaledVector(i[3],.488603*n),t.addScaledVector(i[4],n*r*1.092548),t.addScaledVector(i[5],r*a*1.092548),t.addScaledVector(i[6],.315392*(3*a*a-1)),t.addScaledVector(i[7],n*a*1.092548),t.addScaledVector(i[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,a=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.886227),t.addScaledVector(i[1],1.023328*r),t.addScaledVector(i[2],1.023328*a),t.addScaledVector(i[3],1.023328*n),t.addScaledVector(i[4],.858086*n*r),t.addScaledVector(i[5],.858086*r*a),t.addScaledVector(i[6],.743125*a*a-.247708),t.addScaledVector(i[7],.858086*n*a),t.addScaledVector(i[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-r*r)}}]),e}();x6.prototype.isSphericalHarmonics3=!0;var w6=function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new x6,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return M(this,n),(e=t.call(this,void 0,a)).sh=r,e}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=pl(R(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(o6);w6.prototype.isLightProbe=!0;var k6=function(){function e(){M(this,e)}return(0,I.Z)(e,null,[{key:"decodeText",value:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}]),e}();(function(e){A(n,e);var t=F(n);function n(){var e;return M(this,n),(e=t.call(this)).type="InstancedBufferGeometry",e.instanceCount=1/0,e}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=pl(R(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n})(p0).prototype.isInstancedBufferGeometry=!0;var S6,E6=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),r=t.call(this,e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return(0,I.Z)(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,i=Q5.get(e);if(void 0!==i)return a.manager.itemStart(e),setTimeout((function(){t&&t(i),a.manager.itemEnd(e)}),0),i;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(a.options,{colorSpaceConversion:"none"}))})).then((function(n){Q5.add(e,n),t&&t(n),a.manager.itemEnd(e)})).catch((function(t){r&&r(t),a.manager.itemError(e),a.manager.itemEnd(e)})),a.manager.itemStart(e)}}]),n}($5);E6.prototype.isImageBitmapLoader=!0;var T6=function(e){A(n,e);var t=F(n);function n(e){return M(this,n),t.call(this,e)}return(0,I.Z)(n,[{key:"load",value:function(e,t,n,r){var a=this,i=new t6(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(n){try{var i=n.slice(0);(void 0===S6&&(S6=new(window.AudioContext||window.webkitAudioContext)),S6).decodeAudioData(i,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),a.manager.itemError(e)}}),n,r)}}]),n}($5);(function(e){A(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;M(this,n),a=t.call(this,void 0,i);var o=(new J$).set(e),s=(new J$).set(r),u=new NJ(o.r,o.g,o.b),l=new NJ(s.r,s.g,s.b),c=Math.sqrt(Math.PI),d=c*Math.sqrt(.75);return a.sh.coefficients[0].copy(u).add(l).multiplyScalar(c),a.sh.coefficients[1].copy(u).sub(l).multiplyScalar(d),a}return(0,I.Z)(n)})(w6).prototype.isHemisphereLightProbe=!0,function(e){A(n,e);var t=F(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;M(this,n),r=t.call(this,void 0,a);var i=(new J$).set(e);return r.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return(0,I.Z)(n)}(w6).prototype.isAmbientLightProbe=!0;var C6=function(){function e(t,n,r){var a,i,o;switch(M(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":a=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":a=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:a=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,I.Z)(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,a=e*r+r,i=this.cumulativeWeight;if(0===i){for(var o=0;o!==r;++o)n[a+o]=n[o];i=t}else{var s=t/(i+=t);this._mixBufferRegion(n,a,0,s,r)}this.cumulativeWeight=i}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,a=this.cumulativeWeight,i=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-a,t)}i>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var u=t,l=t+t;u!==l;++u)if(n[u]!==n[u+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var a=n,i=r;a!==i;++a)t[a]=t[r+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,a){if(r>=.5)for(var i=0;i!==a;++i)e[t+i]=e[n+i]}},{key:"_slerp",value:function(e,t,n,r){IJ.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,a){var i=this._workIndex*a;IJ.multiplyQuaternionsFlat(e,i,e,t,e,n),IJ.slerpFlat(e,t,e,t,e,i,r)}},{key:"_lerp",value:function(e,t,n,r,a){for(var i=1-r,o=0;o!==a;++o){var s=t+o;e[s]=e[s]*i+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,a){for(var i=0;i!==a;++i){var o=t+i;e[o]=e[o]+e[n+i]*r}}}]),e}(),_6=new RegExp("[\\[\\]\\.:\\/]","g"),M6="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",I6=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),N6=/(WCOD+)?/.source.replace("WCOD",M6),A6=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),R6=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),O6=new RegExp("^"+I6+N6+A6+R6+"$"),D6=["material","materials","bones"],L6=function(){function e(t,n,r){M(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,I.Z)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,a=n.length;r!==a;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,a=n.propertyName,i=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var u=t[a];if(void 0!==u){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===a){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=i}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=a;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var d=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+a+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(_6,"")}},{key:"parseTrackName",value:function(e){var t=O6.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var a=n.nodeName.substring(r+1);-1!==D6.indexOf(a)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=a)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var a=n[r];if(a.name===t||a.uuid===t)return a;var i=e(a.children);if(i)return i}return null}(e.children);if(r)return r}return null}}]),e}();L6.Composite=function(){function e(t,n,r){M(this,e);var a=r||L6.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,a)}return(0,I.Z)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,a=n.length;r!==a;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),L6.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},L6.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},L6.prototype.GetterByBindingType=[L6.prototype._getValue_direct,L6.prototype._getValue_array,L6.prototype._getValue_arrayElement,L6.prototype._getValue_toArray],L6.prototype.SetterByBindingTypeAndVersioning=[[L6.prototype._setValue_direct,L6.prototype._setValue_direct_setNeedsUpdate,L6.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[L6.prototype._setValue_array,L6.prototype._setValue_array_setNeedsUpdate,L6.prototype._setValue_array_setMatrixWorldNeedsUpdate],[L6.prototype._setValue_arrayElement,L6.prototype._setValue_arrayElement_setNeedsUpdate,L6.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[L6.prototype._setValue_fromArray,L6.prototype._setValue_fromArray_setNeedsUpdate,L6.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var P6=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;M(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=a;for(var i=n.tracks,o=i.length,s=new Array(o),u={endingStart:2400,endingEnd:2400},l=0;l!==o;++l){var c=i[l].createInterpolant(null);s[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,I.Z)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,a=e._clip.duration,i=a/r,o=r/a;e.warp(1,i,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,a=r.time,i=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=a,s[1]=a+n,u[0]=e/i,u[1]=t/i,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var a=this._startTime;if(null!==a){var i=(e-a)*n;if(i<0||0===n)return;this._startTime=null,t=n*i}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var u=this._interpolants,l=this._propertyBindings;if(2501===this.blendMode)for(var c=0,d=u.length;c!==d;++c)u[c].evaluate(o),l[c].accumulateAdditive(s);else for(var h=0,p=u.length;h!==p;++h)u[h].evaluate(o),l[h].accumulate(r,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,a=this._loopCount,i=2202===n;if(0===e)return-1===a?r:i&&1==(1&a)?t-r:r;if(2200===n){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===a&&(e>=0?(a=0,this._setEndings(!0,0===this.repetitions,i)):this._setEndings(0===this.repetitions,!0,i)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,a+=Math.abs(o);var s=this.repetitions-a;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,i)}else this._setEndings(!1,!1,i);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(i&&1==(1&a))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,a=r.time,i=this._weightInterpolant;null===i&&(i=r._lendControlInterpolant(),this._weightInterpolant=i);var o=i.parameterPositions,s=i.sampleValues;return o[0]=a,s[0]=t,o[1]=a+e,s[1]=n,this}}]),e}(),F6=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return(0,I.Z)(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,a=r.length,i=e._propertyBindings,o=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==a;++c){var d=r[c],h=d.name,p=l[h];if(void 0!==p)i[c]=p;else{if(void 0!==(p=i[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,h));continue}var f=t&&t._propertyBindings[c].binding.parsedPath;++(p=new C6(L6.create(n,h,f),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(p,s,h),i[c]=p}o[c].resultBuffer=p.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var a=e._propertyBindings,i=0,o=a.length;i!==o;++i){var s=a[i];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var a=t[n];0==--a.useCount&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,a=this._actionsByClip,i=a[t];if(void 0===i)i={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=i;else{var o=i.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),i.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var a=e._clip.uuid,i=this._actionsByClip,o=i[a],s=o.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete i[a],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var a=t[n];0==--a.referenceCount&&this._removeInactiveBinding(a)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,a=this._bindings,i=r[t];void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=a.length,a.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,a=n.path,i=this._bindingsByRootAndName,o=i[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete o[a],0===Object.keys(o).length&&delete i[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new z5(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=n,t[n]=a}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,a=r.uuid,i="string"==typeof e?Y5.findByName(r,e):e,o=null!==i?i.uuid:e,s=this._actionsByClip[o],u=null;if(void 0===n&&(n=null!==i?i.blendMode:2500),void 0!==s){var l=s.actionByRoot[a];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===i&&(i=u._clip)}if(null===i)return null;var c=new P6(this,i,t,n);return this._bindAction(c,u),this._addInactiveAction(c,o,a),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,a="string"==typeof e?Y5.findByName(n,e):e,i=a?a.uuid:e,o=this._actionsByClip[i];return void 0!==o&&o.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,a=Math.sign(e),i=this._accuIndex^=1,o=0;o!==n;++o)t[o]._update(r,e,a,i);for(var s=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)s[l].apply(i);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,a=r[n];if(void 0!==a){for(var i=a.knownActions,o=0,s=i.length;o!==s;++o){var u=i[o];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var a=n[r].actionByRoot[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var i=this._bindingsByRootAndName[t];if(void 0!==i)for(var o in i){var s=i[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(nJ);function j6(e,t){return e.distance-t.distance}function z6(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var a=e.children,i=0,o=a.length;i<o;i++)z6(a[i],t,n,!0)}F6.prototype._controlInterpolantsResultBuffer=new Float32Array(1),function(e){A(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return M(this,n),(a=t.call(this,e,r)).meshPerAttribute=i,a}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=pl(R(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=pl(R(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(P3).prototype.isInstancedInterleavedBuffer=!0;var B6=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return M(this,e),this.radius=t,this.phi=n,this.theta=r,this}return(0,I.Z)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(cJ(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();(function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).material=e,r.render=function(){},r.hasPositions=!1,r.hasNormals=!1,r.hasColors=!1,r.hasUvs=!1,r.positionArray=null,r.normalArray=null,r.colorArray=null,r.uvArray=null,r.count=0,r}return(0,I.Z)(n)})(R$).prototype.isImmediateRenderObject=!0;var U6=new NJ,W6=new s$,V6=new s$;function Z6(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,Z6(e.children[n]));return t}var H6=new Float32Array(1),G6=new Int32Array(H6.buffer),q6=function(){function e(){M(this,e)}return(0,I.Z)(e,null,[{key:"toHalfFloat",value:function(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),H6[0]=e;var t=G6[0],n=t>>16&32768,r=t>>12&2047,a=t>>23&255;return a<103?n:a>142?(n|=31744,n|=(255==a?0:1)&&8388607&t):a<113?n|=((r|=2048)>>114-a)+(r>>113-a&1):(n|=a-112<<10|r>>1,n+=1&r)}}]),e}();L4.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(L4.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},t5.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},function(e){A(n,e);var t=F(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;M(this,n),i=new J$(i),o=new J$(o);for(var s=a/2,u=r/a,l=r/2,c=[],d=[],h=0,p=0,f=-l;h<=a;h++,f+=u){c.push(-l,0,f,l,0,f),c.push(f,0,-l,f,0,l);var m=h===s?i:o;m.toArray(d,p),p+=3,m.toArray(d,p),p+=3,m.toArray(d,p),p+=3,m.toArray(d,p),p+=3}var v=new p0;return v.setAttribute("position",new i0(c,3)),v.setAttribute("color",new i0(d,3)),(e=t.call(this,v,new v4({vertexColors:!0,toneMapped:!1}))).type="GridHelper",e}return(0,I.Z)(n)}(T4).prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},function(e){A(n,e);var t=F(n);function n(e){var r;M(this,n);for(var a=Z6(e),i=new p0,o=[],s=[],u=new J$(0,0,1),l=new J$(0,1,0),c=0;c<a.length;c++){var d=a[c];d.parent&&d.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(u.r,u.g,u.b),s.push(l.r,l.g,l.b))}return i.setAttribute("position",new i0(o,3)),i.setAttribute("color",new i0(s,3)),(r=t.call(this,i,new v4({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}))).type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=e,r.bones=a,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return(0,I.Z)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,a=r.getAttribute("position");V6.copy(this.root.matrixWorld).invert();for(var i=0,o=0;i<t.length;i++){var s=t[i];s.parent&&s.parent.isBone&&(W6.multiplyMatrices(V6,s.matrixWorld),U6.setFromMatrixPosition(W6),a.setXYZ(o,U6.x,U6.y,U6.z),W6.multiplyMatrices(V6,s.parent.matrixWorld),U6.setFromMatrixPosition(W6),a.setXYZ(o+1,U6.x,U6.y,U6.z),o+=2)}r.getAttribute("position").needsUpdate=!0,pl(R(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(T4).prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},$5.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),k6.extractUrlBase(e)},$5.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},OJ.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},OJ.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},OJ.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},OJ.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},OJ.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},JJ.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Y0.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},bJ.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},bJ.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},bJ.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},bJ.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},bJ.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},bJ.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},s$.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},s$.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},s$.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new NJ).setFromMatrixColumn(this,3)},s$.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},s$.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},s$.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},s$.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},s$.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},s$.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},s$.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},s$.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},s$.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},s$.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},s$.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},s$.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},s$.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},s$.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},s$.prototype.makeFrustum=function(e,t,n,r,a,i){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,a,i)},s$.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},G0.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},IJ.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},IJ.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},o$.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},o$.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},o$.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},V$.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},V$.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},V$.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},V$.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},V$.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},V$.barycoordFromPoint=function(e,t,n,r,a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),V$.getBarycoord(e,t,n,r,a)},V$.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),V$.getNormal(e,t,n,r)},n5.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},n5.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new N5(this,e)},n5.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new R5(this,e)},gJ.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},gJ.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},gJ.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},NJ.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},NJ.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},NJ.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},NJ.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},NJ.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},NJ.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},NJ.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},NJ.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},NJ.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},CJ.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},CJ.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},R$.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},R$.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},R$.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},R$.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},R$.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(R$.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),A0.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(A0.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),i4.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},z0.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(o6.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(n0.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),n0.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},n0.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},n0.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},p0.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},p0.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new n0(arguments[1],arguments[2])))},p0.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},p0.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},p0.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},p0.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},p0.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(p0.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),P3.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:35044),this},P3.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},N5.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},N5.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},N5.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},L3.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Object.defineProperties(H$.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new J$}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(F0.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),D3.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},D3.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},D3.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},D3.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},D3.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},D3.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},D3.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},D3.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},D3.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},D3.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},D3.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},D3.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},D3.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},D3.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},D3.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},D3.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},D3.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},D3.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},D3.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},D3.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},D3.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},D3.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},D3.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},D3.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},D3.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(D3.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?3001:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(E3.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(_J.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return(0,I.Z)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(R$).prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new T6).load(e,(function(e){t.setBuffer(e)})),this},B0.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},B0.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},kJ.crossOrigin=void 0,kJ.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var a=new i6;a.setCrossOrigin(this.crossOrigin);var i=a.load(e,n,void 0,r);return t&&(i.mapping=t),i},kJ.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var a=new r6;a.setCrossOrigin(this.crossOrigin);var i=a.load(e,n,void 0,r);return t&&(i.mapping=t),i},kJ.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},kJ.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"133"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="133");var X6=new WeakMap;function Y6(){var e,t;function n(e,t,n,r,a,i){var o=i.num_components(),s=n.num_points()*o,u=s*a.BYTES_PER_ELEMENT,l=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,a),c=e._malloc(u);t.GetAttributeDataArrayForAllPoints(n,i,l,u,c);var d=new a(e.HEAPF32.buffer,c,s).slice();return e._free(c),{name:r,array:d,itemSize:o}}onmessage=function(r){var a=r.data;switch(a.type){case"init":e=a.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var i=a.buffer,o=a.taskConfig;t.then((function(e){var t=e.draco,r=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(i),i.byteLength);try{var u=function(e,t,r,a){var i,o,s=a.attributeIDs,u=a.attributeTypes,l=t.GetEncodedGeometryType(r);if(l===e.TRIANGULAR_MESH)i=new e.Mesh,o=t.DecodeBufferToMesh(r,i);else{if(l!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");i=new e.PointCloud,o=t.DecodeBufferToPointCloud(r,i)}if(!o.ok()||0===i.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+o.error_msg());var c={index:null,attributes:[]};for(var d in s){var h=self[u[d]],p=void 0,f=void 0;if(a.useUniqueIDs)f=s[d],p=t.GetAttributeByUniqueId(i,f);else{if(-1===(f=t.GetAttributeId(i,e[s[d]])))continue;p=t.GetAttribute(i,f)}c.attributes.push(n(e,t,i,d,h,p))}return l===e.TRIANGULAR_MESH&&(c.index=function(e,t,n){var r=3*n.num_faces(),a=4*r,i=e._malloc(a);t.GetTrianglesUInt32Array(n,a,i);var o=new Uint32Array(e.HEAPF32.buffer,i,r).slice();return e._free(i),{array:o,itemSize:1}}(e,t,i)),e.destroy(i),c}(t,r,s,o),l=u.attributes.map((function(e){return e.array.buffer}));u.index&&l.push(u.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:u},l)}catch(e){console.error(e),self.postMessage({type:"error",id:a.id,error:e.message})}finally{t.destroy(s),t.destroy(r)}}))}}}var K6=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register((function(e){return new t8(e)})),r.register((function(e){return new o8(e)})),r.register((function(e){return new s8(e)})),r.register((function(e){return new n8(e)})),r.register((function(e){return new r8(e)})),r.register((function(e){return new a8(e)})),r.register((function(e){return new i8(e)})),r.register((function(e){return new $6(e)})),r.register((function(e){return new u8(e)})),r}return(0,I.Z)(n,[{key:"load",value:function(e,t,n,r){var a,i=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:k6.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},s=new t6(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{i.parse(n,a,(function(n){t(n),i.manager.itemEnd(e)}),o)}catch(e){o(e)}}),n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var a,i={},o={};if("string"==typeof e)a=e;else if(k6.decodeText(new Uint8Array(e,0,4))===l8){try{i[J6.KHR_BINARY_GLTF]=new c8(e)}catch(e){return void(r&&r(e))}a=i[J6.KHR_BINARY_GLTF].content}else a=k6.decodeText(new Uint8Array(e));var s=JSON.parse(a);if(void 0===s.asset||s.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var u=new D8(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(var l=0;l<this.pluginCallbacks.length;l++){var c=this.pluginCallbacks[l](u);o[c.name]=c,i[c.name]=!0}if(s.extensionsUsed)for(var d=0;d<s.extensionsUsed.length;++d){var h=s.extensionsUsed[d],p=s.extensionsRequired||[];switch(h){case J6.KHR_MATERIALS_UNLIT:i[h]=new e8;break;case J6.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:i[h]=new f8;break;case J6.KHR_DRACO_MESH_COMPRESSION:i[h]=new d8(s,this.dracoLoader);break;case J6.KHR_TEXTURE_TRANSFORM:i[h]=new h8;break;case J6.KHR_MESH_QUANTIZATION:i[h]=new m8;break;default:p.indexOf(h)>=0&&void 0===o[h]&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}u.setExtensions(i),u.setPlugins(o),u.parse(n,r)}}}]),n}($5);function Q6(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var J6={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"},$6=function(){function e(t){M(this,e),this.parser=t,this.name=J6.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return(0,I.Z)(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var a=t[n];a.extensions&&a.extensions[this.name]&&void 0!==a.extensions[this.name].light&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var a,i=t.json,o=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e],s=new J$(16777215);void 0!==o.color&&s.fromArray(o.color);var u=void 0!==o.range?o.range:0;switch(o.type){case"directional":(a=new b6(s)).target.position.set(0,0,-1),a.add(a.target);break;case"point":(a=new g6(s)).distance=u;break;case"spot":(a=new h6(s)).distance=u,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,void 0!==o.intensity&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then((function(e){return n._getNodeRef(t.cache,a,e)}))}}]),e}(),e8=function(){function e(){M(this,e),this.name=J6.KHR_MATERIALS_UNLIT}return(0,I.Z)(e,[{key:"getMaterialType",value:function(){return $$}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new J$(1,1,1),e.opacity=1;var a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var i=a.baseColorFactor;e.color.fromArray(i),e.opacity=i[3]}void 0!==a.baseColorTexture&&r.push(n.assignTexture(e,"map",a.baseColorTexture))}return Promise.all(r)}}]),e}(),t8=function(){function e(t){M(this,e),this.parser=t,this.name=J6.KHR_MATERIALS_CLEARCOAT}return(0,I.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?L5:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];if(void 0!==i.clearcoatFactor&&(t.clearcoat=i.clearcoatFactor),void 0!==i.clearcoatTexture&&a.push(n.assignTexture(t,"clearcoatMap",i.clearcoatTexture)),void 0!==i.clearcoatRoughnessFactor&&(t.clearcoatRoughness=i.clearcoatRoughnessFactor),void 0!==i.clearcoatRoughnessTexture&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),void 0!==i.clearcoatNormalTexture&&(a.push(n.assignTexture(t,"clearcoatNormalMap",i.clearcoatNormalTexture)),void 0!==i.clearcoatNormalTexture.scale)){var o=i.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new gJ(o,o)}return Promise.all(a)}}]),e}(),n8=function(){function e(t){M(this,e),this.parser=t,this.name=J6.KHR_MATERIALS_TRANSMISSION}return(0,I.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?L5:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];return void 0!==i.transmissionFactor&&(t.transmission=i.transmissionFactor),void 0!==i.transmissionTexture&&a.push(n.assignTexture(t,"transmissionMap",i.transmissionTexture)),Promise.all(a)}}]),e}(),r8=function(){function e(t){M(this,e),this.parser=t,this.name=J6.KHR_MATERIALS_VOLUME}return(0,I.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?L5:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];t.thickness=void 0!==i.thicknessFactor?i.thicknessFactor:0,void 0!==i.thicknessTexture&&a.push(n.assignTexture(t,"thicknessMap",i.thicknessTexture)),t.attenuationDistance=i.attenuationDistance||0;var o=i.attenuationColor||[1,1,1];return t.attenuationTint=new J$(o[0],o[1],o[2]),Promise.all(a)}}]),e}(),a8=function(){function e(t){M(this,e),this.parser=t,this.name=J6.KHR_MATERIALS_IOR}return(0,I.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?L5:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),i8=function(){function e(t){M(this,e),this.parser=t,this.name=J6.KHR_MATERIALS_SPECULAR}return(0,I.Z)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?L5:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],i=r.extensions[this.name];t.specularIntensity=void 0!==i.specularFactor?i.specularFactor:1,void 0!==i.specularTexture&&a.push(n.assignTexture(t,"specularIntensityMap",i.specularTexture));var o=i.specularColorFactor||[1,1,1];return t.specularTint=new J$(o[0],o[1],o[2]),void 0!==i.specularColorTexture&&a.push(n.assignTexture(t,"specularTintMap",i.specularColorTexture).then((function(e){e.encoding=3001}))),Promise.all(a)}}]),e}(),o8=function(){function e(t){M(this,e),this.parser=t,this.name=J6.KHR_TEXTURE_BASISU}return(0,I.Z)(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var a=r.extensions[this.name],i=n.images[a.source],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i,o)}}]),e}(),s8=function(){function e(t){M(this,e),this.parser=t,this.name=J6.EXT_TEXTURE_WEBP,this.isSupported=null}return(0,I.Z)(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,a=r.textures[e];if(!a.extensions||!a.extensions[t])return null;var i=a.extensions[t],o=r.images[i.source],s=n.textureLoader;if(o.uri){var u=n.options.manager.getHandler(o.uri);null!==u&&(s=u)}return this.detectSupport().then((function(a){if(a)return n.loadTextureImage(e,o,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),u8=function(){function e(t){M(this,e),this.name=J6.EXT_MESHOPT_COMPRESSION,this.parser=t}return(0,I.Z)(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],a=this.parser.getDependency("buffer",r.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([a,i.ready]).then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,a=r.count,o=r.byteStride,s=new ArrayBuffer(a*o),u=new Uint8Array(e[0],t,n);return i.decodeGltfBuffer(new Uint8Array(s),a,o,u,r.mode,r.filter),s}))}return null}}]),e}(),l8="glTF",c8=(0,I.Z)((function e(t){M(this,e),this.name=J6.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:k6.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==l8)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,a=new DataView(t,12),i=0;i<r;){var o=a.getUint32(i,!0);i+=4;var s=a.getUint32(i,!0);if(i+=4,1313821514===s){var u=new Uint8Array(t,12+i,o);this.content=k6.decodeText(u)}else if(5130562===s){var l=12+i;this.body=t.slice(l,l+o)}i+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),d8=function(){function e(t,n){if(M(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=J6.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return(0,I.Z)(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,a=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,o={},s={},u={};for(var l in i){var c=S8[l]||l.toLowerCase();o[c]=i[l]}for(var d in e.attributes){var h=S8[d]||d.toLowerCase();if(void 0!==i[d]){var p=n.accessors[e.attributes[d]],f=b8[p.componentType];u[h]=f,s[h]=!0===p.normalized}}return t.getDependency("bufferView",a).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],a=s[n];void 0!==a&&(r.normalized=a)}t(e)}),o,u)}))}))}}]),e}(),h8=function(){function e(){M(this,e),this.name=J6.KHR_TEXTURE_TRANSFORM}return(0,I.Z)(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}]),e}(),p8=function(e){A(n,e);var t=F(n);function n(e){var r;M(this,n),(r=t.call(this)).isGLTFSpecularGlossinessMaterial=!0;var a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),o=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),u=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),l={specular:{value:(new J$).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};return r._extraUniforms=l,r.onBeforeCompile=function(e){for(var t in l)e.uniforms[t]=l[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",o).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",u)},Object.defineProperties((0,L.Z)(r),{specular:{get:function(){return l.specular.value},set:function(e){l.specular.value=e}},specularMap:{get:function(){return l.specularMap.value},set:function(e){l.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return l.glossiness.value},set:function(e){l.glossiness.value=e}},glossinessMap:{get:function(){return l.glossinessMap.value},set:function(e){l.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete r.metalness,delete r.roughness,delete r.metalnessMap,delete r.roughnessMap,r.setValues(e),r}return(0,I.Z)(n,[{key:"copy",value:function(e){return pl(R(n.prototype),"copy",this).call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}]),n}(D5),f8=function(){function e(){M(this,e),this.name=J6.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}return(0,I.Z)(e,[{key:"getMaterialType",value:function(){return p8}},{key:"extendParams",value:function(e,t,n){var r=t.extensions[this.name];e.color=new J$(1,1,1),e.opacity=1;var a=[];if(Array.isArray(r.diffuseFactor)){var i=r.diffuseFactor;e.color.fromArray(i),e.opacity=i[3]}if(void 0!==r.diffuseTexture&&a.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new J$(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new J$(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var o=r.specularGlossinessTexture;a.push(n.assignTexture(e,"glossinessMap",o)),a.push(n.assignTexture(e,"specularMap",o))}return Promise.all(a)}},{key:"createMaterial",value:function(e){var t=new p8(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}]),e}(),m8=(0,I.Z)((function e(){M(this,e),this.name=J6.KHR_MESH_QUANTIZATION})),v8=function(e){A(n,e);var t=F(n);function n(e,r,a,i){return M(this,n),t.call(this,e,r,a,i)}return(0,I.Z)(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r*3+r,i=0;i!==r;i++)t[i]=n[a+i];return t}}]),n}(F5);v8.prototype.beforeStart_=v8.prototype.copySampleValue_,v8.prototype.afterEnd_=v8.prototype.copySampleValue_,v8.prototype.interpolate_=function(e,t,n,r){for(var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=2*o,u=3*o,l=r-t,c=(n-t)/l,d=c*c,h=d*c,p=e*u,f=p-u,m=-2*h+3*d,v=h-d,g=1-m,y=v-d+c,b=0;b!==o;b++){var x=i[f+b+o],w=i[f+b+s]*l,k=i[p+b+o],S=i[p+b]*l;a[b]=g*x+y*w+m*k+v*S}return a};var g8=new IJ,y8=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"interpolate_",value:function(e,t,r,a){var i=pl(R(n.prototype),"interpolate_",this).call(this,e,t,r,a);return g8.fromArray(i).normalize().toArray(i),i}}]),n}(v8),b8={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},x8={9728:1003,9729:1006,9984:1004,9985:1007,9986:1005,9987:1008},w8={33071:1001,33648:1002,10497:1e3},k8={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},S8={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},E8={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},T8={CUBICSPLINE:void 0,LINEAR:2301,STEP:2300};function C8(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function _8(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new D5({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),e.DefaultMaterial}function M8(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function I8(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function N8(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var a=t.extras.targetNames;if(e.morphTargetInfluences.length===a.length){e.morphTargetDictionary={};for(var i=0,o=a.length;i<o;i++)e.morphTargetDictionary[a[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function A8(e){var t=e.extensions&&e.extensions[J6.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+R8(t.attributes):e.indices+":"+R8(e.attributes)+":"+e.mode}function R8(e){for(var t="",n=Object.keys(e).sort(),r=0,a=n.length;r<a;r++)t+=n[r]+":"+e[n[r]]+";";return t}function O8(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var D8=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};M(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new Q6,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new E6(this.options.manager):this.textureLoader=new i6(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new t6(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return(0,I.Z)(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,a=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var i={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};M8(a,i,r),I8(i,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(i)}))).then((function(){e(i)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,a=t.length;r<a;r++)for(var i=t[r].joints,o=0,s=i.length;o<s;o++)e[i[o]].isBone=!0;for(var u=0,l=e.length;u<l;u++){var c=e[u];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var r=this;if(e.refs[t]<=1)return n;var a=n.clone();return function e(t,n){var a=r.associations.get(t);null!=a&&r.associations.set(n,a);var i,o=G(t.children.entries());try{for(o.s();!(i=o.n()).done;){var s=(0,U.Z)(i.value,2),u=s[0];e(s[1],n.children[u])}}catch(sde){o.e(sde)}finally{o.f()}}(n,a),a.name+="_instance_"+e.uses[t]++,a}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var a=e(t[r]);a&&n.push(a)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[J6.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,a){n.load(C8(t.uri,r.path),e,void 0,(function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var a=[];return void 0!==r.bufferView?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),void 0!==r.sparse&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then((function(e){var a,i,o=e[0],s=k8[r.type],u=b8[r.componentType],l=u.BYTES_PER_ELEMENT,c=l*s,d=r.byteOffset||0,h=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;if(h&&h!==c){var f=Math.floor(d/h),m="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+f+":"+r.count,v=t.cache.get(m);v||(a=new u(o,f*h,r.count*h/l),v=new P3(a,h/l),t.cache.add(m,v)),i=new j3(v,s,d%h/l,p)}else a=null===o?new u(r.count*s):new u(o,d,r.count*s),i=new n0(a,s,p);if(void 0!==r.sparse){var g=k8.SCALAR,y=b8[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,w=new y(e[1],b,r.sparse.count*g),k=new u(e[2],x,r.sparse.count*s);null!==o&&(i=new n0(i.array.slice(),i.itemSize,i.normalized));for(var S=0,E=w.length;S<E;S++){var T=w[S];if(i.setX(T,k[S*s]),s>=2&&i.setY(T,k[S*s+1]),s>=3&&i.setZ(T,k[S*s+2]),s>=4&&i.setW(T,k[S*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return i}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,r=t.textures[e],a=t.images[r.source],i=this.textureLoader;if(a.uri){var o=n.manager.getHandler(a.uri);null!==o&&(i=o)}return this.loadTextureImage(e,a,i)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,a=this.json,i=this.options,o=a.textures[e],s=(t.uri||t.bufferView)+":"+o.sampler;if(this.textureCache[s])return this.textureCache[s];var u=self.URL||self.webkitURL,l=t.uri||"",c=!1;if(void 0!==t.bufferView)l=r.getDependency("bufferView",t.bufferView).then((function(e){c=!0;var n=new Blob([e],{type:t.mimeType});return l=u.createObjectURL(n)}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var d=Promise.resolve(l).then((function(e){return new Promise((function(t,r){var a=t;!0===n.isImageBitmapLoader&&(a=function(e){var n=new EJ(e);n.needsUpdate=!0,t(n)}),n.load(C8(e,i.path),a,void 0,r)}))})).then((function(t){!0===c&&u.revokeObjectURL(l),t.flipY=!1,o.name&&(t.name=o.name);var n=(a.samplers||{})[o.sampler]||{};return t.magFilter=x8[n.magFilter]||1006,t.minFilter=x8[n.minFilter]||1008,t.wrapS=w8[n.wrapS]||1e3,t.wrapT=w8[n.wrapT]||1e3,r.associations.set(t,{textures:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",l),null}));return this.textureCache[s]=d,d}},{key:"assignTexture",value:function(e,t,n){var r=this;return this.getDependency("texture",n.index).then((function(a){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[J6.KHR_TEXTURE_TRANSFORM]){var i=void 0!==n.extensions?n.extensions[J6.KHR_TEXTURE_TRANSFORM]:void 0;if(i){var o=r.associations.get(a);a=r.extensions[J6.KHR_TEXTURE_TRANSFORM].extendTexture(a,i),r.associations.set(a,o)}}return e[t]=a,a}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,a=void 0!==t.attributes.color,i=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new _4,H$.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var u="LineBasicMaterial:"+n.uuid,l=this.cache.get(u);l||(l=new v4,H$.prototype.copy.call(l,n),l.color.copy(n.color),this.cache.add(u,l)),n=l}if(r||a||i){var c="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(c+="specular-glossiness:"),r&&(c+="derivative-tangents:"),a&&(c+="vertex-colors:"),i&&(c+="flat-shading:");var d=this.cache.get(c);d||(d=n.clone(),a&&(d.vertexColors=!0),i&&(d.flatShading=!0),r&&(d.normalScale&&(d.normalScale.y*=-1),d.clearcoatNormalScale&&(d.clearcoatNormalScale.y*=-1)),this.cache.add(c,d),this.associations.set(d,this.associations.get(n))),n=d}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}},{key:"getMaterialType",value:function(){return D5}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.json,a=this.extensions,i=r.materials[e],o={},s=i.extensions||{},u=[];if(s[J6.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=a[J6.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=l.getMaterialType(),u.push(l.extendParams(o,i,n))}else if(s[J6.KHR_MATERIALS_UNLIT]){var c=a[J6.KHR_MATERIALS_UNLIT];t=c.getMaterialType(),u.push(c.extendParams(o,i,n))}else{var d=i.pbrMetallicRoughness||{};if(o.color=new J$(1,1,1),o.opacity=1,Array.isArray(d.baseColorFactor)){var h=d.baseColorFactor;o.color.fromArray(h),o.opacity=h[3]}void 0!==d.baseColorTexture&&u.push(n.assignTexture(o,"map",d.baseColorTexture)),o.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,o.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(u.push(n.assignTexture(o,"metalnessMap",d.metallicRoughnessTexture)),u.push(n.assignTexture(o,"roughnessMap",d.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===i.doubleSided&&(o.side=2);var p=i.alphaMode||"OPAQUE";if("BLEND"===p?(o.transparent=!0,o.depthWrite=!1):(o.format=1022,o.transparent=!1,"MASK"===p&&(o.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&t!==$$&&(u.push(n.assignTexture(o,"normalMap",i.normalTexture)),o.normalScale=new gJ(1,1),void 0!==i.normalTexture.scale)){var f=i.normalTexture.scale;o.normalScale.set(f,f)}return void 0!==i.occlusionTexture&&t!==$$&&(u.push(n.assignTexture(o,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(o.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&t!==$$&&(o.emissive=(new J$).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&t!==$$&&u.push(n.assignTexture(o,"emissiveMap",i.emissiveTexture)),Promise.all(u).then((function(){var r;return r=t===p8?a[J6.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new t(o),i.name&&(r.name=i.name),r.map&&(r.map.encoding=3001),r.emissiveMap&&(r.emissiveMap.encoding=3001),I8(r,i),n.associations.set(r,{materials:e}),i.extensions&&M8(a,r,i),r}))}},{key:"createUniqueName",value:function(e){for(var t=L6.sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function a(e){return n[J6.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return P8(n,e,t)}))}for(var i=[],o=0,s=e.length;o<s;o++){var u=e[o],l=A8(u),c=r[l];if(c)i.push(c.promise);else{var d;d=u.extensions&&u.extensions[J6.KHR_DRACO_MESH_COMPRESSION]?a(u):P8(new p0,u,t),r[l]={primitive:u,promise:d},i.push(d)}}return Promise.all(i)}},{key:"loadMesh",value:function(e){for(var t=this,n=this.json,r=this.extensions,a=n.meshes[e],i=a.primitives,o=[],s=0,u=i.length;s<u;s++){var l=void 0===i[s].material?_8(this.cache):this.getDependency("material",i[s].material);o.push(l)}return o.push(t.loadGeometries(i)),Promise.all(o).then((function(n){for(var o=n.slice(0,n.length-1),s=n[n.length-1],u=[],l=0,c=s.length;l<c;l++){var d=s[l],h=i[l],p=void 0,f=o[l];if(4===h.mode||5===h.mode||6===h.mode||void 0===h.mode)!0!==(p=!0===a.isSkinnedMesh?new i4(d,f):new A0(d,f)).isSkinnedMesh||p.geometry.attributes.skinWeight.normalized||p.normalizeSkinWeights(),5===h.mode?p.geometry=F8(p.geometry,1):6===h.mode&&(p.geometry=F8(p.geometry,2));else if(1===h.mode)p=new T4(d,f);else if(3===h.mode)p=new k4(d,f);else if(2===h.mode)p=new C4(d,f);else{if(0!==h.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);p=new R4(d,f)}Object.keys(p.geometry.morphAttributes).length>0&&N8(p,a),p.name=t.createUniqueName(a.name||"mesh_"+e),I8(p,a),h.extensions&&M8(r,p,h),t.assignFinalMaterial(p),u.push(p)}for(var m=0,v=u.length;m<v;m++)t.associations.set(u[m],{meshes:e,primitives:m});if(1===u.length)return u[0];var g=new I3;t.associations.set(g,{meshes:e});for(var y=0,b=u.length;y<b;y++)g.add(u[y]);return g}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new z0(vJ.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new u1(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),I8(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=[],r=[],a=[],i=[],o=[],s=0,u=t.channels.length;s<u;s++){var l=t.channels[s],c=t.samplers[l.sampler],d=l.target,h=void 0!==d.node?d.node:d.id,p=void 0!==t.parameters?t.parameters[c.input]:c.input,f=void 0!==t.parameters?t.parameters[c.output]:c.output;n.push(this.getDependency("node",h)),r.push(this.getDependency("accessor",p)),a.push(this.getDependency("accessor",f)),i.push(c),o.push(d)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(a),Promise.all(i),Promise.all(o)]).then((function(n){for(var r=n[0],a=n[1],i=n[2],o=n[3],s=n[4],u=[],l=function(){var e,t=r[c],n=a[c],l=i[c],d=o[c],h=s[c];if(void 0===t)return"continue";switch(t.updateMatrix(),t.matrixAutoUpdate=!0,E8[h.path]){case E8.weights:e=Z5;break;case E8.rotation:e=G5;break;default:e=X5}var p=t.name?t.name:t.uuid,f=void 0!==d.interpolation?T8[d.interpolation]:2301,m=[];E8[h.path]===E8.weights?t.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(p);var v=l.array;if(l.normalized){for(var g=O8(v.constructor),y=new Float32Array(v.length),b=0,x=v.length;b<x;b++)y[b]=v[b]*g;v=y}for(var w=0,k=m.length;w<k;w++){var S=new e(m[w]+"."+E8[h.path],n.array,v,f);"CUBICSPLINE"===d.interpolation&&(S.createInterpolant=function(e){return new(this instanceof G5?y8:v8)(this.times,this.values,this.getValueSize()/3,e)},S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(S)}},c=0,d=r.length;c<d;c++)l();var h=t.name?t.name:"animation_"+e;return new Y5(h,void 0,u)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}},{key:"loadNode",value:function(e){var t=this.json,n=this.extensions,r=this,a=t.nodes[e],i=a.name?r.createUniqueName(a.name):"";return function(){var t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==a.camera&&t.push(r.getDependency("camera",a.camera).then((function(e){return r._getNodeRef(r.cameraCache,a.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var o;if((o=!0===a.isBone?new o4:t.length>1?new I3:1===t.length?t[0]:new R$)!==t[0])for(var s=0,u=t.length;s<u;s++)o.add(t[s]);if(a.name&&(o.userData.name=a.name,o.name=i),I8(o,a),a.extensions&&M8(n,o,a),void 0!==a.matrix){var l=new s$;l.fromArray(a.matrix),o.applyMatrix4(l)}else void 0!==a.translation&&o.position.fromArray(a.translation),void 0!==a.rotation&&o.quaternion.fromArray(a.rotation),void 0!==a.scale&&o.scale.fromArray(a.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o}))}},{key:"loadScene",value:function(e){var t=this.json,n=this.extensions,r=this.json.scenes[e],a=this,i=new I3;r.name&&(i.name=a.createUniqueName(r.name)),I8(i,r),r.extensions&&M8(n,i,r);for(var o=r.nodes||[],s=[],u=0,l=o.length;u<l;u++)s.push(L8(o[u],i,t,a));return Promise.all(s).then((function(){return a.associations=function(e){var t,n=new Map,r=G(a.associations);try{for(r.s();!(t=r.n()).done;){var i=(0,U.Z)(t.value,2),o=i[0],s=i[1];(o instanceof H$||o instanceof EJ)&&n.set(o,s)}}catch(sde){r.e(sde)}finally{r.f()}return e.traverse((function(e){var t=a.associations.get(e);null!=t&&n.set(e,t)})),n}(i),i}))}}]),e}();function L8(e,t,n,r){var a=n.nodes[e];return r.getDependency("node",e).then((function(e){return void 0===a.skin?e:r.getDependency("skin",a.skin).then((function(e){for(var n=[],a=0,i=(t=e).joints.length;a<i;a++)n.push(r.getDependency("node",t.joints[a]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],a=[],i=0,o=n.length;i<o;i++){var s=n[i];if(s){r.push(s);var u=new s$;void 0!==t.inverseBindMatrices&&u.fromArray(t.inverseBindMatrices.array,16*i),a.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[i])}e.bind(new c4(r,a),e.matrixWorld)}})),e}));var t})).then((function(e){t.add(e);var i=[];if(a.children)for(var o=a.children,s=0,u=o.length;s<u;s++){var l=o[s];i.push(L8(l,e,n,r))}return Promise.all(i)}))}function P8(e,t,n){var r=t.attributes,a=[];function i(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var o in r){var s=S8[o]||o.toLowerCase();s in e.attributes||a.push(i(r[o],s))}if(void 0!==t.indices&&!e.index){var u=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));a.push(u)}return I8(e,t),function(e,t,n){var r=t.attributes,a=new OJ;if(void 0!==r.POSITION){var i=n.json.accessors[r.POSITION],o=i.min,s=i.max;if(void 0!==o&&void 0!==s){if(a.set(new NJ(o[0],o[1],o[2]),new NJ(s[0],s[1],s[2])),i.normalized){var u=O8(b8[i.componentType]);a.min.multiplyScalar(u),a.max.multiplyScalar(u)}var l=t.targets;if(void 0!==l){for(var c=new NJ,d=new NJ,h=0,p=l.length;h<p;h++){var f=l[h];if(void 0!==f.POSITION){var m=n.json.accessors[f.POSITION],v=m.min,g=m.max;if(void 0!==v&&void 0!==g){if(d.setX(Math.max(Math.abs(v[0]),Math.abs(g[0]))),d.setY(Math.max(Math.abs(v[1]),Math.abs(g[1]))),d.setZ(Math.max(Math.abs(v[2]),Math.abs(g[2]))),m.normalized){var y=O8(b8[m.componentType]);d.multiplyScalar(y)}c.max(d)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(c)}e.boundingBox=a;var b=new JJ;a.getCenter(b.center),b.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=b}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(a).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,a=!1,i=0,o=t.length;i<o;i++){var s=t[i];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(a=!0),r&&a)break}if(!r&&!a)return Promise.resolve(e);for(var u=[],l=[],c=0,d=t.length;c<d;c++){var h=t[c];if(r){var p=void 0!==h.POSITION?n.getDependency("accessor",h.POSITION):e.attributes.position;u.push(p)}if(a){var f=void 0!==h.NORMAL?n.getDependency("accessor",h.NORMAL):e.attributes.normal;l.push(f)}}return Promise.all([Promise.all(u),Promise.all(l)]).then((function(t){var n=t[0],i=t[1];return r&&(e.morphAttributes.position=n),a&&(e.morphAttributes.normal=i),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function F8(e,t){var n=e.getIndex();if(null===n){var r=[],a=e.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var i=0;i<a.count;i++)r.push(i);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(2===t)for(var u=1;u<=o;u++)s.push(n.getX(0)),s.push(n.getX(u)),s.push(n.getX(u+1));else for(var l=0;l<o;l++)l%2==0?(s.push(n.getX(l)),s.push(n.getX(l+1)),s.push(n.getX(l+2))):(s.push(n.getX(l+2)),s.push(n.getX(l+1)),s.push(n.getX(l)));s.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c}var j8,z8,B8=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;M(this,e),this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}return(0,I.Z)(e,[{key:"_initWorker",value:function(e){if(!this.workers[e]){var t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}},{key:"_getIdleWorker",value:function(){for(var e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}},{key:"_onMessage",value:function(e,t){var n=this.workersResolve[e];if(n&&n(t),this.queue.length){var r=this.queue.shift(),a=r.resolve,i=r.msg,o=r.transfer;this.workersResolve[e]=a,this.workers[e].postMessage(i,o)}else this.workerStatus^=1<<e}},{key:"setWorkerCreator",value:function(e){this.workerCreator=e}},{key:"setWorkerLimit",value:function(e){this.pool=e}},{key:"postMessage",value:function(e,t){var n=this;return new Promise((function(r){var a=n._getIdleWorker();-1!==a?(n._initWorker(a),n.workerStatus|=1<<a,n.workersResolve[a]=r,n.workers[a].postMessage(e,t)):n.queue.push({resolve:r,msg:e,transfer:t})}))}},{key:"dispose",value:function(){this.workers.forEach((function(e){return e.terminate()})),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}]),e}(),U8=new WeakMap,W8=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).transcoderPath="",r.transcoderBinary=null,r.transcoderPending=null,r.workerPool=new B8,r.workerSourceURL="",r.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.'),r}return(0,I.Z)(n,[{key:"setTranscoderPath",value:function(e){return this.transcoderPath=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerPool.setWorkerLimit(e),this}},{key:"detectSupport",value:function(e){return this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}},{key:"dispose",value:function(){return URL.revokeObjectURL(this.workerSourceURL),this.workerPool.dispose(),this}},{key:"init",value:function(){var e=this;if(!this.transcoderPending){var t=new t6(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);var r=t.loadAsync("basis_transcoder.js"),a=new t6(this.manager);a.setPath(this.transcoderPath),a.setResponseType("arraybuffer"),a.setWithCredentials(this.withCredentials);var i=a.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([r,i]).then((function(t){var r=(0,U.Z)(t,2),a=r[0],i=r[1],o=n.BasisWorker.toString(),s=["/* constants */","let _EngineFormat = "+JSON.stringify(n.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(n.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(n.BasisFormat),"/* basis_transcoder.js */",a,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([s])),e.transcoderBinary=i,e.workerPool.setWorkerCreator((function(){var t=new Worker(e.workerSourceURL),n=e.transcoderBinary.slice(0);return t.postMessage({type:"init",config:e.workerConfig,transcoderBinary:n},[n]),t}))}))}return this.transcoderPending}},{key:"load",value:function(e,t,n,r){var a=this;if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");var i=new t6(this.manager);i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);var o=new D4;return i.load(e,(function(e){if(U8.has(e))return U8.get(e).promise.then(t).catch(r);a._createTexture([e]).then((function(e){o.copy(e),o.needsUpdate=!0,t&&t(o)})).catch(r)}),n,r),o}},{key:"_createTextureFrom",value:function(e){var t=e.mipmaps,n=e.width,r=e.height,a=e.format,i=e.type,o=e.error,s=e.dfdTransferFn,u=e.dfdFlags;if("error"===i)return Promise.reject(o);var l=new D4(t,n,r,a,1009);return l.minFilter=1===t.length?1006:1008,l.magFilter=1006,l.generateMipmaps=!1,l.needsUpdate=!0,l.encoding=2===s?3001:3e3,l.premultiplyAlpha=!!(1&u),l}},{key:"_createTexture",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.init().then((function(){return t.workerPool.postMessage({type:"transcode",buffers:e,taskConfig:n},e)})).then((function(e){return t._createTextureFrom(e.data)}));return U8.set(e[0],{promise:r}),r}}]),n}($5);W8.BasisFormat={ETC1S:0,UASTC_4x4:1},W8.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},W8.EngineFormat={RGBAFormat:1023,RGBA_ASTC_4x4_Format:37808,RGBA_BPTC_Format:36492,RGBA_ETC2_EAC_Format:37496,RGBA_PVRTC_4BPPV1_Format:35842,RGBA_S3TC_DXT5_Format:33779,RGB_ETC1_Format:36196,RGB_ETC2_Format:37492,RGB_PVRTC_4BPPV1_Format:35840,RGB_S3TC_DXT1_Format:33776},W8.BasisWorker=function(){var e,t,n,r=_EngineFormat,a=_TranscoderFormat,i=_BasisFormat;self.addEventListener("message",(function(o){var c,d=o.data;switch(d.type){case"init":e=d.config,c=d.transcoderBinary,t=new Promise((function(e){n={wasmBinary:c,onRuntimeInitialized:e},BASIS(n)})).then((function(){n.initializeBasis(),void 0===n.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")}));break;case"transcode":t.then((function(){try{for(var t=function(t){var o=new n.KTX2File(new Uint8Array(t));function c(){o.close(),o.delete()}if(!o.isValid())throw c(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");var d=o.isUASTC()?i.UASTC_4x4:i.ETC1S,h=o.getWidth(),p=o.getHeight(),f=o.getLevels(),m=o.getHasAlpha(),v=o.getDFDTransferFunc(),g=o.getDFDFlags(),y=function(t,n,o,c){for(var d=t===i.ETC1S?s:u,h=0;h<d.length;h++){var p=d[h];if(e[p.if]&&p.basisFormat.includes(t)&&(!p.needsPowerOfTwo||l(n)&&l(o)))return{transcoderFormat:p.transcoderFormat[c?1:0],engineFormat:p.engineFormat[c?1:0]}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),{transcoderFormat:a.RGBA32,engineFormat:r.RGBAFormat}}(d,h,p,m),b=y.transcoderFormat,x=y.engineFormat;if(!h||!p||!f)throw c(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!o.startTranscoding())throw c(),new Error("THREE.KTX2Loader: .startTranscoding failed");for(var w=[],k=0;k<f;k++){var S=o.getImageLevelInfo(k,0,0),E=S.origWidth,T=S.origHeight,C=new Uint8Array(o.getImageTranscodedSizeInBytes(k,0,0,b));if(!o.transcodeImage(C,k,0,0,b,0,-1,-1))throw c(),new Error("THREE.KTX2Loader: .transcodeImage failed.");w.push({data:C,width:E,height:T})}return c(),{width:h,height:p,hasAlpha:m,mipmaps:w,format:x,dfdTransferFn:v,dfdFlags:g}}(d.buffers[0]),o=t.width,c=t.height,h=t.hasAlpha,p=t.mipmaps,f=t.format,m=t.dfdTransferFn,v=t.dfdFlags,g=[],y=0;y<p.length;++y)g.push(p[y].data.buffer);self.postMessage({type:"transcode",id:d.id,width:o,height:c,hasAlpha:h,mipmaps:p,format:f,dfdTransferFn:m,dfdFlags:v},g)}catch(e){console.error(e),self.postMessage({type:"error",id:d.id,error:e.message})}}))}}));var o=[{if:"astcSupported",basisFormat:[i.UASTC_4x4],transcoderFormat:[a.ASTC_4x4,a.ASTC_4x4],engineFormat:[r.RGBA_ASTC_4x4_Format,r.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[a.BC7_M5,a.BC7_M5],engineFormat:[r.RGBA_BPTC_Format,r.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[a.BC1,a.BC3],engineFormat:[r.RGB_S3TC_DXT1_Format,r.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[a.ETC1,a.ETC2],engineFormat:[r.RGB_ETC2_Format,r.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[a.ETC1,a.ETC1],engineFormat:[r.RGB_ETC1_Format,r.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[i.ETC1S,i.UASTC_4x4],transcoderFormat:[a.PVRTC1_4_RGB,a.PVRTC1_4_RGBA],engineFormat:[r.RGB_PVRTC_4BPPV1_Format,r.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],s=o.sort((function(e,t){return e.priorityETC1S-t.priorityETC1S})),u=o.sort((function(e,t){return e.priorityUASTC-t.priorityUASTC}));function l(e){return e<=2||0==(e&e-1)&&0!==e}};var V8,Z8,H8,G8,q8,X8,Y8=Symbol("retainerCount"),K8=Symbol("recentlyUsed"),Q8=Symbol("evict"),J8=Symbol("evictionThreshold"),$8=Symbol("cache"),e9=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;M(this,t),this[j8]=new Map,this[z8]=[],this[$8]=e,this[J8]=n}return(0,I.Z)(t,[{key:"evictionThreshold",get:function(){return this[J8]},set:function(e){this[J8]=e,this[Q8]()}},{key:"cache",get:function(){return this[$8]}},{key:"retainerCount",value:function(e){return this[Y8].get(e)||0}},{key:"reset",value:function(){this[Y8].clear(),this[K8]=[]}},{key:"retain",value:function(e){this[Y8].has(e)||this[Y8].set(e,0),this[Y8].set(e,this[Y8].get(e)+1);var t=this[K8].indexOf(e);-1!==t&&this[K8].splice(t,1),this[K8].unshift(e),this[Q8]()}},{key:"release",value:function(e){this[Y8].has(e)&&this[Y8].set(e,Math.max(this[Y8].get(e)-1,0)),this[Q8]()}},{key:e,value:function(){if(!(this[K8].length<this[J8]))for(var e=this[K8].length-1;e>=this[J8];--e){var t=this[K8][e];0===this[Y8].get(t)&&(this[$8].delete(t),this[K8].splice(e,1))}}}]),t}((j8=Y8,z8=K8,Q8)),t9=function(e,t){var n,r=new Map,a=G(e.mappings);try{for(a.s();!(n=a.n()).done;){var i,o=n.value,s=G(o.variants);try{for(s.s();!(i=s.n()).done;){var u=i.value;r.set(t[u],{material:null,gltfMaterialIndex:o.material})}}catch(sde){s.e(sde)}finally{s.f()}}}catch(sde){a.e(sde)}finally{a.f()}return r},n9=function(){function e(t){M(this,e),this.parser=t,this.name="KHR_materials_variants"}return(0,I.Z)(e,[{key:"afterRoot",value:function(e){var t=this,n=this.parser,r=n.json;if(void 0===r.extensions||void 0===r.extensions[this.name])return null;var a,i=function(e){var t,n=[],r=new Set,a=G(e);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=i,s=0;r.has(o);)o=i+"."+ ++s;r.add(o),n.push(o)}}catch(sde){a.e(sde)}finally{a.f()}return n}((r.extensions[this.name].variants||[]).map((function(e){return e.name}))),o=G(e.scenes);try{for(o.s();!(a=o.n()).done;){a.value.traverse((function(e){var a=n.associations.get(e);if(null!=a&&null!=a.meshes)for(var o=a.meshes,s=r.meshes[o].primitives,u=("isMesh"in e?[e]:e.children),l=0;l<s.length;l++){var c=s[l].extensions;c&&c[t.name]&&(u[l].userData.variantMaterials=t9(c[t.name],i))}}))}}catch(sde){o.e(sde)}finally{o.f()}return e.userData.variants=i,Promise.resolve()}}]),e}(),r9=new Map,a9=new Map,i9=new(function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).decoderPath="",r.decoderConfig={},r.decoderBinary=null,r.decoderPending=null,r.workerLimit=4,r.workerPool=[],r.workerNextTaskID=1,r.workerSourceURL="",r.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},r.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},r}return(0,I.Z)(n,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,t,n,r){var a=this,i=new t6(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(e){var n={attributeIDs:a.defaultAttributeIDs,attributeTypes:a.defaultAttributeTypes,useUniqueIDs:!1};a.decodeGeometry(e,n).then(t).catch(r)}),n,r)}},{key:"decodeDracoFile",value:function(e,t,n,r){var a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,a).then(t)}},{key:"decodeGeometry",value:function(e,t){var n=this;for(var r in t.attributeTypes){var a=t.attributeTypes[r];void 0!==a.BYTES_PER_ELEMENT&&(t.attributeTypes[r]=a.name)}var i,o=JSON.stringify(t);if(X6.has(e)){var s=X6.get(e);if(s.key===o)return s.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var u=this.workerNextTaskID++,l=e.byteLength,c=this._getWorker(u,l).then((function(n){return i=n,new Promise((function(n,r){i._callbacks[u]={resolve:n,reject:r},i.postMessage({type:"decode",id:u,taskConfig:t,buffer:e},[e])}))})).then((function(e){return n._createGeometry(e.geometry)}));return c.catch((function(){return!0})).then((function(){i&&u&&n._releaseTask(i,u)})),X6.set(e,{key:o,promise:c}),c}},{key:"_createGeometry",value:function(e){var t=new p0;e.index&&t.setIndex(new n0(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n],a=r.name,i=r.array,o=r.itemSize;t.setAttribute(a,new n0(i,o))}return t}},{key:"_loadLibrary",value:function(e,t){var n=new t6(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((function(t,r){n.load(e,t,void 0,r)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var r=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var a=Y6.toString(),i=["/* draco decoder */",r,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}},{key:"_getWorker",value:function(e,t){var n=this;return this._initDecoder().then((function(){if(n.workerPool.length<n.workerLimit){var r=new Worker(n.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:n.decoderConfig}),r.onmessage=function(e){var t=e.data;switch(t.type){case"decode":r._callbacks[t.id].resolve(t);break;case"error":r._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(r)}else n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var a=n.workerPool[n.workerPool.length-1];return a._taskCosts[e]=t,a._taskLoad+=t,a}))}},{key:"_releaseTask",value:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}]),n}($5)),o9=new W8,s9=Symbol("loader"),u9=Symbol("evictionPolicy"),l9=Symbol("GLTFInstance"),c9=function(e,t){A(r,e);var n=F(r);function r(e){var t;return M(this,r),(t=n.call(this))[Z8]=(new K6).register((function(e){return new n9(e)})),t[l9]=e,t[s9].setDRACOLoader(i9),t[s9].setKTX2Loader(o9),t}return(0,I.Z)(r,[{key:t,get:function(){return this.constructor[u9]}},{key:"preload",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a,i,o,s=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:function(){},this.dispatchEvent({type:"preload",element:n,src:t}),r9.has(t)){e.next=11;break}if(e.t0=null!=X8,!e.t0){e.next=9;break}return e.t1=this[s9],e.next=7,X8;case 7:e.t2=e.sent,e.t1.setMeshoptDecoder.call(e.t1,e.t2);case 9:a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=function(e){var t=e.loaded/e.total;n(Math.max(0,Math.min(1,isFinite(t)?t:1)))};return new Promise((function(n,a){t.load(e,n,r,a)}))}(t,this[s9],(function(e){r(.8*e)})),i=this[l9],o=a.then((function(e){return i.prepare(e)})).then((function(e){return r(.9),new i(e)})),r9.set(t,o);case 11:return e.next=13,r9.get(t);case 13:a9.set(t,!0),r&&r(1);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a,i,o=this,s=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:function(){},e.next=3,this.preload(t,n,r);case 3:return e.next=5,r9.get(t);case 5:return a=e.sent,e.next=8,a.clone();case 8:return i=e.sent,e.abrupt("return",(this[u9].retain(t),i.dispose=function(){var e=i.dispose,n=!1;return function(){n||(n=!0,e.apply(i),o[u9].release(t))}}(),i));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"setDRACODecoderLocation",value:function(e){H8=e,i9.setDecoderPath(e)}},{key:"getDRACODecoderLocation",value:function(){return H8}},{key:"setKTX2TranscoderLocation",value:function(e){G8=e,o9.setTranscoderPath(e)}},{key:"getKTX2TranscoderLocation",value:function(){return G8}},{key:"setMeshoptDecoderLocation",value:function(e){var t;q8!==e&&(q8=e,X8=(t=e,new Promise((function(e,n){var r=document.createElement("script");document.body.appendChild(r),r.onload=e,r.onerror=n,r.async=!0,r.src=t}))).then((function(){return MeshoptDecoder.ready})).then((function(){return MeshoptDecoder})))}},{key:"getMeshoptDecoderLocation",value:function(){return q8}},{key:"initializeKTX2Loader",value:function(e){o9.detectSupport(e)}},{key:"cache",get:function(){return r9}},{key:"clearCache",value:function(){var e=this;r9.forEach((function(t,n){e.delete(n)})),this[u9].reset()}},{key:"has",value:function(e){return r9.has(e)}},{key:"delete",value:function(){var e=Jn(Kn().mark((function e(t){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.has(t)){e.next=2;break}return e.abrupt("return");case 2:return n=r9.get(t),a9.delete(t),r9.delete(t),e.next=6,n;case 6:e.sent.dispose();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasFinishedLoading",value:function(e){return!!a9.get(e)}}]),r}(nJ,(V8=u9,Z8=s9,u9));c9[V8]=new e9(c9);var d9=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).element=e||document.createElement("div"),r.element.style.position="absolute",r.element.style.userSelect="none",r.element.setAttribute("draggable",!1),r.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))})),r}return(0,I.Z)(n,[{key:"copy",value:function(e,t){return pl(R(n.prototype),"copy",this).call(this,e,t),this.element=e.element.cloneNode(!0),this}}]),n}(R$);d9.prototype.isCSS2DObject=!0;var h9=new NJ,p9=new s$,f9=new s$,m9=new NJ,v9=new NJ,g9=(0,I.Z)((function e(){M(this,e);var t,n,r,a,i=this,o={objects:new WeakMap},s=document.createElement("div");function u(e,t,n){if(e.isCSS2DObject){e.onBeforeRender(i,t,n),h9.setFromMatrixPosition(e.matrixWorld),h9.applyMatrix4(f9);var c=e.element;/apple/i.test(navigator.vendor)?c.style.transform="translate(-50%,-50%) translate("+Math.round(h9.x*r+r)+"px,"+Math.round(-h9.y*a+a)+"px)":c.style.transform="translate(-50%,-50%) translate("+(h9.x*r+r)+"px,"+(-h9.y*a+a)+"px)",c.style.display=e.visible&&h9.z>=-1&&h9.z<=1?"":"none";var d={distanceToCameraSquared:l(n,e)};o.objects.set(e,d),c.parentNode!==s&&s.appendChild(c),e.onAfterRender(i,t,n)}for(var h=0,p=e.children.length;h<p;h++)u(e.children[h],t,n)}function l(e,t){return m9.setFromMatrixPosition(e.matrixWorld),v9.setFromMatrixPosition(t.matrixWorld),m9.distanceToSquared(v9)}s.style.overflow="hidden",this.domElement=s,this.getSize=function(){return{width:t,height:n}},this.render=function(e,t){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),p9.copy(t.matrixWorldInverse),f9.multiplyMatrices(t.projectionMatrix,p9),u(e,e,t),function(e){for(var t=function(e){var t=[];return e.traverse((function(e){e.isCSS2DObject&&t.push(e)})),t}(e).sort((function(e,t){return o.objects.get(e).distanceToCameraSquared-o.objects.get(t).distanceToCameraSquared})),n=t.length,r=0,a=t.length;r<a;r++)t[r].element.style.zIndex=n-r}(e)},this.setSize=function(e,i){r=(t=e)/2,a=(n=i)/2,s.style.width=e+"px",s.style.height=i+"px"}})),y9=function(e){return e&&"null"!==e?x9(e):null},b9=function(){if(!XQ){var e=[];throw ZQ||e.push("WebXR Device API"),HQ||e.push("WebXR Hit Test API"),new Error("The following APIs are required for AR, but are missing in this browser: ".concat(e.join(", ")))}},x9=function(e){return new URL(e,window.location.toString()).toString()},w9=function(e,t){var n=null;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];null!=n&&self.clearTimeout(n),n=self.setTimeout((function(){n=null,e.apply(void 0,a)}),t)}},k9=function(e,t,n){return Math.max(t,Math.min(n,e))},S9=function(){var e=function(){var e,t=G(null!=document.head?Array.from(document.head.querySelectorAll("meta")):[]);try{for(t.s();!(e=t.n()).done;){if("viewport"===e.value.name)return!0}}catch(sde){t.e(sde)}finally{t.f()}return!1}();return e||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),function(){return e?window.devicePixelRatio:1}}(),E9=function(){var e=new RegExp("[?&]model-viewer-debug-mode(&|$)");return function(){return self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(e)}}(),T9=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))},C9=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;M(this,e),this.velocity=0,this.naturalFrequency=0,this.setDecayTime(t)}return(0,I.Z)(e,[{key:"setDecayTime",value:function(e){this.naturalFrequency=1/Math.max(.001,e)}},{key:"update",value:function(e,t,n,r){var a=2e-4*this.naturalFrequency;if(null==e||0===r)return t;if(e===t&&0===this.velocity)return t;if(n<0)return e;var i=e-t,o=this.velocity+this.naturalFrequency*i,s=i+n*o,u=Math.exp(-this.naturalFrequency*n),l=(o-this.naturalFrequency*s)*u,c=-this.naturalFrequency*(l+o*u);return Math.abs(l)<a*Math.abs(r)&&c*i>=0?(this.velocity=0,t):(this.velocity=l,t+s*u)}}]),e}(),_9=function(e,t){return{type:"number",number:e,unit:t}},M9=function(){var e={};return function(t){var n=t;if(n in e)return e[n];for(var r=[],a=0;t;){if(++a>1e3){t="";break}var i=I9(t),o=i.nodes[0];if(null==o||0===o.terms.length)break;r.push(o),t=i.remainingInput}return e[n]=r}}(),I9=function(){var e=/^(\-\-|[a-z\u0240-\uffff])/i,t=/^([\*\+\/]|[\-]\s)/i,n=/^[\),]/;return function(r){for(var a=[];r.length&&(r=r.trim(),!n.test(r));)if("("===r[0]){var i=O9(r),o=i.nodes;r=i.remainingInput,a.push({type:"function",name:{type:"ident",value:"calc"},arguments:o})}else if(e.test(r)){var s=N9(r),u=s.nodes[0];if("("===(r=s.remainingInput)[0]){var l=O9(r),c=l.nodes,d=l.remainingInput;a.push({type:"function",name:u,arguments:c}),r=d}else a.push(u)}else if(t.test(r))a.push({type:"operator",value:r[0]}),r=r.slice(1);else{var h="#"===r[0]?R9(r):A9(r),p=h.nodes,f=h.remainingInput;if(0===p.length)break;a.push(p[0]),r=f}return{nodes:[{type:"expression",terms:a}],remainingInput:r}}}(),N9=function(){var e=/[^a-z0-9_\-\u0240-\uffff]/i;return function(t){var n=t.match(e);return{nodes:[{type:"ident",value:null==n?t:t.substr(0,n.index)}],remainingInput:null==n?"":t.substr(n.index)}}}(),A9=function(){var e=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,t=/^[a-z%]+/i,n=/^(m|mm|cm|rad|deg|[%])$/;return function(r){var a=r.match(e),i=null==a?"0":a[0],o=(r=null==i?r:r.slice(i.length)).match(t),s=null!=o&&""!==o[0]?o[0]:null,u=null==o?r:r.slice(s.length);return null==s||n.test(s)||(s=null),{nodes:[{type:"number",number:parseFloat(i)||0,unit:s}],remainingInput:u}}}(),R9=function(){var e=/^[a-f0-9]*/i;return function(t){var n=(t=t.slice(1).trim()).match(e);return{nodes:null==n?[]:[{type:"hex",value:n[0]}],remainingInput:null==n?t:t.slice(n[0].length)}}}(),O9=function(e){var t=[];for(e=e.slice(1).trim();e.length;){var n=I9(e);if(t.push(n.nodes[0]),","===(e=n.remainingInput.trim())[0])e=e.slice(1).trim();else if(")"===e[0]){e=e.slice(1);break}}return{nodes:t,remainingInput:e}},D9=Symbol("visitedTypes"),L9=function(){function e(t){M(this,e),this[D9]=t}return(0,I.Z)(e,[{key:"walk",value:function(e,t){for(var n=e.slice();n.length;){var r=n.shift();switch(this[D9].indexOf(r.type)>-1&&t(r),r.type){case"expression":n.unshift.apply(n,(0,_.Z)(r.terms));break;case"function":n.unshift.apply(n,[r.name].concat((0,_.Z)(r.arguments)))}}}}]),e}(),P9=Object.freeze({type:"number",number:0,unit:null}),F9=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.number,r=e.unit;if(isFinite(n)){if("rad"===e.unit||null==e.unit)return e}else n=t,r="rad";return{type:"number",number:("deg"===r&&null!=n?n:0)*Math.PI/180,unit:"rad"}},j9=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.number,a=e.unit;if(isFinite(r)){if("m"===e.unit)return e}else r=n,a="m";switch(a){default:t=1;break;case"cm":t=.01;break;case"mm":t=.001}return{type:"number",number:t*r,unit:"m"}},z9=function(){var e=function(e){return e},t={rad:e,deg:F9,m:e,mm:j9,cm:j9};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P9;isFinite(e.number)||(e.number=n.number,e.unit=n.unit);var r=e.unit;if(null==r)return e;var a=t[r];return null==a?n:a(e)}}(),B9=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,document.createElement("div"))).normal=new NJ(0,1,0),r.initialized=!1,r.referenceCount=1,r.pivot=document.createElement("div"),r.slot=document.createElement("slot"),r.element.classList.add("annotation-wrapper"),r.slot.name=e.name,r.element.appendChild(r.pivot),r.pivot.appendChild(r.slot),r.updatePosition(e.position),r.updateNormal(e.normal),r}return(0,I.Z)(n,[{key:"facingCamera",get:function(){return!this.element.classList.contains("hide")}},{key:"show",value:function(){this.facingCamera&&this.initialized||this.updateVisibility(!0)}},{key:"hide",value:function(){!this.facingCamera&&this.initialized||this.updateVisibility(!1)}},{key:"increment",value:function(){this.referenceCount++}},{key:"decrement",value:function(){return this.referenceCount>0&&--this.referenceCount,0===this.referenceCount}},{key:"updatePosition",value:function(e){if(null!=e){for(var t=M9(e)[0].terms,n=0;n<3;++n)this.position.setComponent(n,z9(t[n]).number);this.updateMatrixWorld()}}},{key:"updateNormal",value:function(e){if(null!=e)for(var t=M9(e)[0].terms,n=0;n<3;++n)this.normal.setComponent(n,z9(t[n]).number)}},{key:"orient",value:function(e){this.pivot.style.transform="rotate(".concat(e,"rad)")}},{key:"updateVisibility",value:function(e){e?this.element.classList.remove("hide"):this.element.classList.add("hide"),this.slot.assignedNodes().forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE){var n=t,r=n.dataset.visibilityAttribute;if(null!=r){var a="data-".concat(r);e?n.setAttribute(a,""):n.removeAttribute(a)}n.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:e}}))}})),this.initialized=!0}}]),n}(d9),U9=function(e,t,n){var r=n,a=new NJ;return e.traverse((function(e){var n,i;e.updateWorldMatrix(!1,!1);var o=e.geometry;if(void 0!==o)if(o.isGeometry){var s=o.vertices;for(n=0,i=s.length;n<i;n++)a.copy(s[n]),a.applyMatrix4(e.matrixWorld),r=t(r,a)}else if(o.isBufferGeometry){var u=o.attributes.position;if(void 0!==u){var l=function(e){if(!e.normalized)return 1;var t=e.array;return t instanceof Int8Array?1/127:t instanceof Uint8Array?1/255:t instanceof Int16Array?1/32767:t instanceof Uint16Array?1/65535:1}(u);for(n=0,i=u.count;n<i;n++)a.fromBufferAttribute(u,n),a.multiplyScalar(l),a.applyMatrix4(e.matrixWorld),r=t(r,a)}}})),r},W9=function(e){A(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this)).shadowMaterial=new O5,i.boundingBox=new OJ,i.size=new NJ,i.shadowScale=1,i.isAnimated=!1,i.side="bottom",i.needsUpdate=!1,i.intensity=0,i.castShadow=!0,i.frustumCulled=!1,i.floor=new A0(new J0,i.shadowMaterial),i.floor.rotateX(-Math.PI/2),i.floor.receiveShadow=!0,i.floor.castShadow=!1,i.floor.frustumCulled=!1,i.add(i.floor),e.target.add((0,L.Z)(i)),i.target=e.target,i.setScene(e,r,a),i}return(0,I.Z)(n,[{key:"setScene",value:function(e,t,n){if(this.side=n,this.isAnimated=e.animationNames.length>0,this.boundingBox.copy(e.boundingBox),this.size.copy(e.size),"back"===this.side){var r,a,i,o=this.boundingBox,s=o.min,u=o.max;r=[s.z,s.y],s.y=r[0],s.z=r[1],a=[u.z,u.y],u.y=a[0],u.z=a[1],i=[this.size.z,this.size.y],this.size.y=i[0],this.size.z=i[1],this.rotation.x=Math.PI/2,this.rotation.y=Math.PI}else this.rotation.x=0,this.rotation.y=0;var l=this.boundingBox,c=this.size;if(this.isAnimated){var d=2*Math.max(c.x,c.y,c.z);c.y=d,l.expandByVector(c.subScalar(d).multiplyScalar(-.5)),l.max.y=l.min.y+d,c.set(d,d,d)}l.getCenter(this.floor.position);var h=l.max.y+.002*c.y;"bottom"===n?(this.position.y=h,this.position.z=0):(this.position.y=0,this.position.z=h),this.setSoftness(t)}},{key:"setSoftness",value:function(e){var t=Math.pow(2,9-3*e);this.setMapSize(t)}},{key:"setMapSize",value:function(e){var t=this.shadow,n=t.camera,r=t.mapSize,a=t.map,i=this.size,o=this.boundingBox;null!=a&&(a.dispose(),this.shadow.map=null),this.isAnimated&&(e*=2);var s=Math.floor(i.x>i.z?e:e*i.x/i.z),u=Math.floor(i.x>i.z?e*i.z/i.x:e);r.set(s,u);var l=2.5*i.x/s,c=2.5*i.z/u;n.left=-o.max.x-l,n.right=-o.min.x+l,n.bottom=o.min.z-c,n.top=o.max.z+c,this.setScaleAndOffset(this.shadowScale,0),this.floor.scale.set(i.x+2*l,i.z+2*c,1),this.needsUpdate=!0,this.shadow.needsUpdate=!0}},{key:"setIntensity",value:function(e){this.shadowMaterial.opacity=e,e>0?(this.visible=!0,this.floor.visible=!0):(this.visible=!1,this.floor.visible=!1)}},{key:"getIntensity",value:function(){return this.shadowMaterial.opacity}},{key:"setRotation",value:function(e){if("bottom"!==this.side)return this.shadow.camera.up.set(0,1,0),void this.shadow.updateMatrices(this);this.shadow.camera.up.set(Math.sin(e),0,Math.cos(e)),this.shadow.updateMatrices(this)}},{key:"setScaleAndOffset",value:function(e,t){var n=this.size.y,r=this.shadow.camera;this.shadowScale=e,r.near=0,r.far=n-t/e,r.updateProjectionMatrix(),r.scale.setScalar(e);var a=.002*n;this.floor.position.y=2*a-r.far}}]),n}(b6),V9=22.5*Math.PI/180,Z9=Math.sin(V9),H9=Math.tan(V9),G9=new NJ,q9=new NJ,X9=new NJ,Y9=new(function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;M(this,e),this.ray=new o$(t,n),this.near=r,this.far=a,this.camera=null,this.layers=new y$,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return(0,I.Z)(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return z6(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(j6),t}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,a=e.length;r<a;r++)z6(e[r],this,n,t);return n.sort(j6),n}}]),e}()),K9=new NJ,Q9=new gJ,J9=function(e){A(n,e);var t=F(n);function n(e){var r,a=e.canvas,i=e.element,o=e.width,s=e.height;M(this,n),(r=t.call(this)).context=null,r.annotationRenderer=new g9,r.schemaElement=document.createElement("script"),r.width=1,r.height=1,r.aspect=1,r.renderCount=0,r.externalRenderer=null,r.camera=new z0(45,1,.1,100),r.xrCamera=null,r.url=null,r.target=new R$,r.modelContainer=new R$,r.animationNames=[],r.boundingBox=new OJ,r.size=new NJ,r.idealCameraDistance=0,r.fieldOfViewAspect=0,r.framedFieldOfView=45,r.shadow=null,r.shadowIntensity=0,r.shadowSoftness=1,r.exposure=1,r.canScale=!0,r.tightBounds=!1,r.isDirty=!1,r.goalTarget=new NJ,r.targetDamperX=new C9,r.targetDamperY=new C9,r.targetDamperZ=new C9,r._currentGLTF=null,r.cancelPendingSourceChange=null,r.animationsByName=new Map,r.currentAnimationAction=null,r.name="ModelScene",r.element=i,r.canvas=a,r.camera=new z0(45,1,.1,100),r.camera.name="MainCamera",r.add(r.target),r.setSize(o,s),r.target.name="Target",r.modelContainer.name="ModelContainer",r.target.add(r.modelContainer),r.mixer=new F6(r.modelContainer);var u=r.annotationRenderer.domElement,l=u.style;return l.display="none",l.pointerEvents="none",l.position="absolute",l.top="0",r.element.shadowRoot.querySelector(".default").appendChild(u),r.schemaElement.setAttribute("type","application/ld+json"),r}return(0,I.Z)(n,[{key:"createContext",value:function(){this.context=this.canvas.getContext("2d")}},{key:"getCamera",value:function(){return null!=this.xrCamera?this.xrCamera:this.camera}},{key:"queueRender",value:function(){this.isDirty=!0}},{key:"shouldRender",value:function(){return this.isDirty}},{key:"hasRendered",value:function(){this.isDirty=!1}},{key:"setObject",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.reset(),this.modelContainer.add(t),e.next=4,this.setupScene();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setSource",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i,o,s,u,l,c,d=this,h=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:function(){},t&&t!==this.url){e.next=3;break}return e.abrupt("return",void n(1));case 3:if(this.reset(),this.url=t,null==this.externalRenderer){e.next=8;break}return e.next=6,this.externalRenderer.load(n);case 6:return r=e.sent,e.abrupt("return",(this.idealCameraDistance=r.framedRadius/Z9,this.fieldOfViewAspect=r.fieldOfViewAspect,this.frameModel(),void this.dispatchEvent({type:"model-load",url:this.url})));case 8:return null!=this.cancelPendingSourceChange&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null),e.prev=9,e.next=12,new Promise(function(){var e=Jn(Kn().mark((function e(r,a){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.cancelPendingSourceChange=function(){return a()},e.prev=1,e.t0=r,e.next=5,d.element[Bee].loader.load(t,d.element,n);case 5:e.t1=e.sent,(0,e.t0)(e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(1),a(e.t2);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}());case 12:a=e.sent,e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(9),null!=e.t0){e.next=19;break}return e.abrupt("return");case 19:throw e.t0;case 20:this.reset(),this.url=t,this._currentGLTF=a,null!=a&&this.modelContainer.add(a.scene),i=a.animations,o=new Map,s=[],u=G(i);try{for(u.s();!(l=u.n()).done;)c=l.value,o.set(c.name,c),s.push(c.name)}catch(sde){u.e(sde)}finally{u.f()}return this.animations=i,this.animationsByName=o,this.animationNames=s,e.next=29,this.setupScene();case 29:case"end":return e.stop()}}),e,this,[[9,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setupScene",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.updateBoundingBox(),t=null,e.t0=!0===this.tightBounds,!e.t0){e.next=7;break}return e.next=6,this.element.requestUpdate("cameraTarget");case 6:t=this.getTarget();case 7:this.updateFraming(t),this.frameModel(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity),this.dispatchEvent({type:"model-load",url:this.url});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reset",value:function(){this.url=null,this.queueRender(),null!=this.shadow&&this.shadow.setIntensity(0);var e=this._currentGLTF;if(null!=e){var t,n=G(this.modelContainer.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.modelContainer.remove(r)}}catch(sde){n.e(sde)}finally{n.f()}e.dispose(),this._currentGLTF=null}null!=this.currentAnimationAction&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}},{key:"currentGLTF",get:function(){return this._currentGLTF}},{key:"setSize",value:function(e,t){if(this.width!==e||this.height!==t){if(this.width=Math.max(e,1),this.height=Math.max(t,1),this.annotationRenderer.setSize(e,t),this.aspect=this.width/this.height,this.frameModel(),null!=this.externalRenderer){var n=S9();this.externalRenderer.resize(e*n,t*n)}this.queueRender()}}},{key:"updateBoundingBox",value:function(){if(this.target.remove(this.modelContainer),!0===this.tightBounds){this.boundingBox=U9(this.modelContainer,(function(e,t){return e.expandByPoint(t)}),new OJ)}else this.boundingBox.setFromObject(this.modelContainer);this.boundingBox.getSize(this.size),this.target.add(this.modelContainer)}},{key:"updateFraming",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.target.remove(this.modelContainer),null==t&&(t=this.boundingBox.getCenter(new NJ));var n=Math.sqrt(U9(this.modelContainer,(function(e,n){return Math.max(e,t.distanceToSquared(n))}),0));this.idealCameraDistance=n/Z9,this.fieldOfViewAspect=U9(this.modelContainer,(function(n,r){r.sub(t);var a=Math.sqrt(r.x*r.x+r.z*r.z);return Math.max(n,a/(e.idealCameraDistance-Math.abs(r.y)))}),0)/H9,this.target.add(this.modelContainer)}},{key:"frameModel",value:function(){var e=H9*Math.max(1,this.fieldOfViewAspect/this.aspect);this.framedFieldOfView=2*Math.atan(e)*180/Math.PI}},{key:"getNDC",value:function(e,t){if(null!=this.xrCamera)Q9.set(e/window.screen.width,t/window.screen.height);else{var n=this.element.getBoundingClientRect();Q9.set((e-n.x)/this.width,(t-n.y)/this.height)}return Q9.multiplyScalar(2).subScalar(1),Q9.y*=-1,Q9}},{key:"getSize",value:function(){return{width:this.width,height:this.height}}},{key:"setTarget",value:function(e,t,n){this.goalTarget.set(-e,-t,-n)}},{key:"setTargetDamperDecayTime",value:function(e){this.targetDamperX.setDecayTime(e),this.targetDamperY.setDecayTime(e),this.targetDamperZ.setDecayTime(e)}},{key:"getTarget",value:function(){return K9.copy(this.goalTarget).multiplyScalar(-1)}},{key:"jumpToGoal",value:function(){this.updateTarget(1e4)}},{key:"updateTarget",value:function(e){var t=this.goalTarget,n=this.target.position;if(!t.equals(n)){var r=this.idealCameraDistance,a=n.x,i=n.y,o=n.z;a=this.targetDamperX.update(a,t.x,e,r),i=this.targetDamperY.update(i,t.y,e,r),o=this.targetDamperZ.update(o,t.z,e,r),this.target.position.set(a,i,o),this.target.updateMatrixWorld(),this.setShadowRotation(this.yaw),this.queueRender()}}},{key:"pointTowards",value:function(e,t){var n=this.position,r=n.x,a=n.z;this.yaw=Math.atan2(e-r,t-a)}},{key:"yaw",get:function(){return this.rotation.y},set:function(e){this.rotation.y=e,this.updateMatrixWorld(!0),this.setShadowRotation(e),this.queueRender()}},{key:"animationTime",get:function(){return null!=this.currentAnimationAction?this.currentAnimationAction.time:0},set:function(e){this.mixer.setTime(e)}},{key:"duration",get:function(){return null!=this.currentAnimationAction&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}},{key:"hasActiveAnimation",get:function(){return null!=this.currentAnimationAction}},{key:"playAnimation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null!=this._currentGLTF){var n=this.animations;if(null!=n&&0!==n.length){var r=null;null!=e&&(r=this.animationsByName.get(e)),null==r&&(r=n[0]);try{var a=this.currentAnimationAction,i=this.mixer.clipAction(r,this);this.currentAnimationAction=i,this.element.paused?this.mixer.stopAllAction():null!=a&&i!==a&&i.crossFadeFrom(a,t,!1),i.enabled=!0,i.play()}catch(e){console.error(e)}}else console.warn("Cannot play animation (model does not have any animations)")}}},{key:"stopAnimation",value:function(){this.currentAnimationAction=null,this.mixer.stopAllAction()}},{key:"updateAnimation",value:function(e){this.mixer.update(e)}},{key:"updateShadow",value:function(){var e=this.shadow;if(null!=e){var t="wall"===this.element.arPlacement?"back":"bottom";e.setScene(this,this.shadowSoftness,t),e.setRotation(this.yaw)}}},{key:"setShadowIntensity",value:function(e){if(this.shadowIntensity=e,null!=this._currentGLTF&&!(e<=0&&null==this.shadow)){if(null==this.shadow){var t="wall"===this.element.arPlacement?"back":"bottom";this.shadow=new W9(this,this.shadowSoftness,t),this.shadow.setRotation(this.yaw)}this.shadow.setIntensity(e)}}},{key:"setShadowSoftness",value:function(e){this.shadowSoftness=e;var t=this.shadow;null!=t&&t.setSoftness(e)}},{key:"setShadowRotation",value:function(e){var t=this.shadow;null!=t&&t.setRotation(e)}},{key:"isShadowDirty",value:function(){var e=this.shadow;if(null==e)return!1;var t=e.needsUpdate;return e.needsUpdate=!1,t}},{key:"setShadowScaleAndOffset",value:function(e,t){var n=this.shadow;null!=n&&n.setScaleAndOffset(e,t)}},{key:"raycaster",get:function(){return Y9}},{key:"positionAndNormalFromPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.raycaster.setFromCamera(e,this.getCamera());var n=this.raycaster.intersectObject(t,!0);if(0===n.length)return null;var r=n[0];return null==r.face?null:(r.face.normal.applyNormalMatrix((new bJ).getNormalMatrix(r.object.matrixWorld)),{position:r.point,normal:r.face.normal})}},{key:"addHotspot",value:function(e){this.target.add(e),this.annotationRenderer.domElement.appendChild(e.element)}},{key:"removeHotspot",value:function(e){this.target.remove(e)}},{key:"forHotspots",value:function(e){for(var t=this.target.children,n=0,r=t.length;n<r;n++){var a=t[n];a instanceof B9&&e(a)}}},{key:"updateHotspots",value:function(e){var t=this;this.forHotspots((function(n){G9.copy(e),q9.setFromMatrixPosition(n.matrixWorld),G9.sub(q9),X9.copy(n.normal).transformDirection(t.target.matrixWorld),G9.dot(X9)<0?n.hide():n.show()}))}},{key:"orientHotspots",value:function(e){this.forHotspots((function(t){t.orient(e)}))}},{key:"setHotspotsVisibility",value:function(e){this.forHotspots((function(t){t.visible=e}))}},{key:"updateSchema",value:function(e){var t,n=this.schemaElement,r=this.element,a=r.alt,i=r.poster,o=r.iosSrc;if(null!=e){var s=[{"@type":"MediaObject",contentUrl:e,encodingFormat:"gltf"===(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())?"model/gltf+json":"model/gltf-binary"}];o&&s.push({"@type":"MediaObject",contentUrl:o,encodingFormat:"model/vnd.usdz+zip"});var u={"@context":"http://schema.org/","@type":"3DModel",image:null!=i?i:void 0,name:null!=a?a:void 0,encoding:s};n.textContent=JSON.stringify(u),document.head.appendChild(n)}else null!=n.parentElement&&n.parentElement.removeChild(n)}}]),n}(L3),$9=function(){var e=new l1({uniforms:{roughnessMap:{value:null},normalMap:{value:null},texelSize:{value:new gJ(1,1)}},vertexShader:"\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec2 uv;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvUv = uv;\n\n\t\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t\t}\n\t\t",fragmentShader:"\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tuniform sampler2D roughnessMap;\n\t\t\tuniform sampler2D normalMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\n\t\t\tvec4 envMapTexelToLinear( vec4 a ) { return a; }\n\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tfloat roughnessToVariance( float roughness ) {\n\n\t\t\t\tfloat variance = 0.0;\n\n\t\t\t\tif ( roughness >= r1 ) {\n\n\t\t\t\t\tvariance = ( r0 - roughness ) * ( v1 - v0 ) / ( r0 - r1 ) + v0;\n\n\t\t\t\t} else if ( roughness >= r4 ) {\n\n\t\t\t\t\tvariance = ( r1 - roughness ) * ( v4 - v1 ) / ( r1 - r4 ) + v1;\n\n\t\t\t\t} else if ( roughness >= r5 ) {\n\n\t\t\t\t\tvariance = ( r4 - roughness ) * ( v5 - v4 ) / ( r4 - r5 ) + v4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfloat roughness2 = roughness * roughness;\n\n\t\t\t\t\tvariance = 1.79 * roughness2 * roughness2;\n\n\t\t\t\t}\n\n\t\t\t\treturn variance;\n\n\t\t\t}\n\n\t\t\tfloat varianceToRoughness( float variance ) {\n\n\t\t\t\tfloat roughness = 0.0;\n\n\t\t\t\tif ( variance >= v1 ) {\n\n\t\t\t\t\troughness = ( v0 - variance ) * ( r1 - r0 ) / ( v0 - v1 ) + r0;\n\n\t\t\t\t} else if ( variance >= v4 ) {\n\n\t\t\t\t\troughness = ( v1 - variance ) * ( r4 - r1 ) / ( v1 - v4 ) + r1;\n\n\t\t\t\t} else if ( variance >= v5 ) {\n\n\t\t\t\t\troughness = ( v4 - variance ) * ( r5 - r4 ) / ( v4 - v5 ) + r4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\troughness = pow( 0.559 * variance, 0.25 ); // 0.559 = 1.0 / 1.79\n\n\t\t\t\t}\n\n\t\t\t\treturn roughness;\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = texture2D( roughnessMap, vUv, - 1.0 );\n\n\t\t\t\tif ( texelSize.x == 0.0 ) return;\n\n\t\t\t\tfloat roughness = gl_FragColor.g;\n\n\t\t\t\tfloat variance = roughnessToVariance( roughness );\n\n\t\t\t\tvec3 avgNormal;\n\n\t\t\t\tfor ( float x = - 1.0; x < 2.0; x += 2.0 ) {\n\n\t\t\t\t\tfor ( float y = - 1.0; y < 2.0; y += 2.0 ) {\n\n\t\t\t\t\t\tvec2 uv = vUv + vec2( x, y ) * 0.25 * texelSize;\n\n\t\t\t\t\t\tavgNormal += normalize( texture2D( normalMap, uv, - 1.0 ).xyz - 0.5 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvariance += 1.0 - 0.25 * length( avgNormal );\n\n\t\t\t\tgl_FragColor.g = varianceToRoughness( variance );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return e.type="RoughnessMipmapper",e}(),e7=new A0(new J0(2,2),$9),t7=new u1(0,1,0,1,0,1),n7=null,r7=null,a7=function(){function e(t){M(this,e),(r7=t).compile(e7,t7)}return(0,I.Z)(e,[{key:"generateMipmaps",value:function(e){if("roughnessMap"in e!=0){var t=e.roughnessMap,n=e.normalMap;if(null!==t&&null!==n&&t.generateMipmaps&&!e.userData.roughnessUpdated){e.userData.roughnessUpdated=!0;var r=Math.max(t.image.width,n.image.width),a=Math.max(t.image.height,n.image.height);if(vJ.isPowerOfTwo(r)&&vJ.isPowerOfTwo(a)){var i=r7.getRenderTarget(),o=r7.autoClear;if(r7.autoClear=!1,null!==n7&&n7.width===r&&n7.height===a||(null!==n7&&n7.dispose(),(n7=new _J(r,a,{depthBuffer:!1})).scissorTest=!0),r!==t.image.width||a!==t.image.height){var s={wrapS:t.wrapS,wrapT:t.wrapT,magFilter:t.magFilter,minFilter:t.minFilter,depthBuffer:!1},u=new _J(r,a,s);u.texture.generateMipmaps=!0,r7.setRenderTarget(u),e.roughnessMap=u.texture,e.metalnessMap==t&&(e.metalnessMap=e.roughnessMap),e.aoMap==t&&(e.aoMap=e.roughnessMap),e.roughnessMap.offset.copy(t.offset),e.roughnessMap.repeat.copy(t.repeat),e.roughnessMap.center.copy(t.center),e.roughnessMap.rotation=t.rotation,e.roughnessMap.matrixAutoUpdate=t.matrixAutoUpdate,e.roughnessMap.matrix.copy(t.matrix)}$9.uniforms.roughnessMap.value=t,$9.uniforms.normalMap.value=n;for(var l=new gJ(0,0),c=$9.uniforms.texelSize.value,d=0;r>=1&&a>=1;++d,r/=2,a/=2)c.set(1/r,1/a),0==d&&c.set(0,0),n7.viewport.set(l.x,l.y,r,a),n7.scissor.set(l.x,l.y,r,a),r7.setRenderTarget(n7),r7.render(e7,t7),r7.copyFramebufferToTexture(l,e.roughnessMap,d),$9.uniforms.roughnessMap.value=e.roughnessMap;t!==e.roughnessMap&&t.dispose(),r7.setRenderTarget(i),r7.autoClear=o}}}}},{key:"dispose",value:function(){$9.dispose(),e7.geometry.dispose(),null!=n7&&n7.dispose()}}]),e}(),i7=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},o7=Symbol("currentEnvironmentMap"),s7=Symbol("applyEnvironmentMap"),u7=Symbol("updateEnvironment"),l7=Symbol("cancelEnvironmentUpdate"),c7=Symbol("onPreload"),d7=function(){function e(t,n,r,a,i){var o=this;M(this,e),this.xrLight=t,this.renderer=n,this.lightProbe=r,this.xrWebGLBinding=null,this.estimationStartCallback=i,this.frameCallback=this.onXRFrame.bind(this);var s=n.xr.getSession();if(a&&"XRWebGLBinding"in window){var u=new W0(16);t.environment=u.texture;var l=n.getContext();switch(s.preferredReflectionFormat){case"srgba8":l.getExtension("EXT_sRGB");break;case"rgba16f":l.getExtension("OES_texture_half_float")}this.xrWebGLBinding=new XRWebGLBinding(s,l),this.lightProbe.addEventListener("reflectionchange",(function(){o.updateReflection()}))}s.requestAnimationFrame(this.frameCallback)}return(0,I.Z)(e,[{key:"updateReflection",value:function(){var e=this.renderer.properties.get(this.xrLight.environment);if(e){var t=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);t&&(e.__webglTexture=t)}}},{key:"onXRFrame",value:function(e,t){if(this.xrLight){t.session.requestAnimationFrame(this.frameCallback);var n=t.getLightEstimate(this.lightProbe);if(n){this.xrLight.lightProbe.sh.fromArray(n.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;var r=Math.max(1,Math.max(n.primaryLightIntensity.x,Math.max(n.primaryLightIntensity.y,n.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(n.primaryLightIntensity.x/r,n.primaryLightIntensity.y/r,n.primaryLightIntensity.z/r),this.xrLight.directionalLight.intensity=r,this.xrLight.directionalLight.position.copy(n.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}}},{key:"dispose",value:function(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}]),e}(),h7=function(e){A(n,e);var t=F(n);function n(e){var r,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];M(this,n),(r=t.call(this)).lightProbe=new w6,r.lightProbe.intensity=0,r.add(r.lightProbe),r.directionalLight=new b6,r.directionalLight.intensity=0,r.add(r.directionalLight),r.environment=null;var i=null,o=!1;return e.xr.addEventListener("sessionstart",(function(){var t=e.xr.getSession();"requestLightProbe"in t&&t.requestLightProbe({reflectionFormat:t.preferredReflectionFormat}).then((function(t){i=new d7((0,L.Z)(r),e,t,a,(function(){o=!0,r.dispatchEvent({type:"estimationstart"})}))}))})),e.xr.addEventListener("sessionend",(function(){i&&(i.dispose(),i=null),o&&r.dispatchEvent({type:"estimationend"})})),r.dispose=function(){i&&(i.dispose(),i=null),r.remove(r.lightProbe),r.lightProbe=null,r.remove(r.directionalLight),r.directionalLight=null,r.environment=null},r}return(0,I.Z)(n)}(I3),p7=Math.PI/24,f7=new gJ,m7=function(e,t,n){for(var r=t>0?n>0?0:-Math.PI/2:n>0?Math.PI/2:Math.PI,a=0;a<=12;++a)e.push(t+.17*Math.cos(r),n+.17*Math.sin(r),0,t+.2*Math.cos(r),n+.2*Math.sin(r),0),r+=p7},v7=function(e){A(n,e);var t=F(n);function n(e,r){var a;M(this,n);var i=new p0,o=[],s=[],u=e.size,l=e.boundingBox,c=u.x/2,d=("back"===r?u.y:u.z)/2;m7(s,c,d),m7(s,-c,d),m7(s,-c,-d),m7(s,c,-d);for(var h=s.length/3,p=0;p<h-2;p+=2)o.push(p,p+1,p+3,p,p+3,p+2);var f=h-2;o.push(f,f+1,1,f,1,0),i.setAttribute("position",new i0(s,3)),i.setIndex(o),(a=t.call(this,i)).side=r;var m=a.material;switch(m.side=2,m.transparent=!0,m.opacity=0,a.goalOpacity=0,a.opacityDamper=new C9,a.hitPlane=new A0(new J0(2*(c+.2),2*(d+.2))),a.hitPlane.visible=!1,a.add(a.hitPlane),l.getCenter(a.position),r){case"bottom":a.rotateX(-Math.PI/2),a.shadowHeight=l.min.y,a.position.y=a.shadowHeight;break;case"back":a.shadowHeight=l.min.z,a.position.z=a.shadowHeight}return e.target.add((0,L.Z)(a)),a}return(0,I.Z)(n,[{key:"getHit",value:function(e,t,n){f7.set(t,-n),this.hitPlane.visible=!0;var r=e.positionAndNormalFromPoint(f7,this.hitPlane);return this.hitPlane.visible=!1,null==r?null:r.position}},{key:"getExpandedHit",value:function(e,t,n){this.hitPlane.scale.set(1e3,1e3,1e3);var r=this.getHit(e,t,n);return this.hitPlane.scale.set(1,1,1),r}},{key:"offsetHeight",get:function(){return"back"===this.side?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight},set:function(e){"back"===this.side?this.position.z=this.shadowHeight+e:this.position.y=this.shadowHeight+e}},{key:"show",set:function(e){this.goalOpacity=e?.75:0}},{key:"updateOpacity",value:function(e){var t=this.material;t.opacity=this.opacityDamper.update(t.opacity,this.goalOpacity,e,1),this.visible=t.opacity>0}},{key:"dispose",value:function(){var e,t=this.hitPlane,n=t.geometry,r=t.material;n.dispose(),r.dispose(),this.geometry.dispose(),this.material.dispose(),null===(e=this.parent)||void 0===e||e.remove(this)}}]),n}(A0),g7="not-presenting",y7="session-started",b7="tracking",x7=new NJ,w7=new s$,k7=new NJ,S7=new z0(45,1,.1,100),E7=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).renderer=e,r.currentSession=null,r.placeOnWall=!1,r.placementBox=null,r.lastTick=null,r.turntableRotation=null,r.oldShadowIntensity=null,r.oldBackground=null,r.oldEnvironment=null,r.frame=null,r.initialHitSource=null,r.transientHitTestSource=null,r.inputSource=null,r._presentedScene=null,r.resolveCleanup=null,r.exitWebXRButtonContainer=null,r.overlay=null,r.xrLight=null,r.tracking=!0,r.frames=0,r.initialized=!1,r.oldTarget=new NJ,r.oldFramedFieldOfView=45,r.placementComplete=!1,r.isTranslating=!1,r.isRotating=!1,r.isTwoFingering=!1,r.lastDragPosition=new NJ,r.firstRatio=0,r.lastAngle=0,r.goalPosition=new NJ,r.goalYaw=0,r.goalScale=1,r.xDamper=new C9,r.yDamper=new C9,r.zDamper=new C9,r.yawDamper=new C9,r.scaleDamper=new C9,r.onExitWebXRButtonContainerClick=function(){return r.stopPresenting()},r.onUpdateScene=function(){null!=r.placementBox&&r.isPresenting&&(r.placementBox.dispose(),r.placementBox=new v7(r.presentedScene,r.placeOnWall?"back":"bottom"))},r.onSelectStart=function(e){var t=r.transientHitTestSource;if(null!=t){var n=r.frame.getHitTestResultsForTransientInput(t),a=r.presentedScene,i=r.placementBox;if(1===n.length){r.inputSource=e.inputSource;var o=r.inputSource.gamepad.axes,s=i.getHit(r.presentedScene,o[0],o[1]);i.show=!0,null!=s?(r.isTranslating=!0,r.lastDragPosition.copy(s)):!1===r.placeOnWall&&(r.isRotating=!0,r.lastAngle=1.5*o[0])}else if(2===n.length){i.show=!0,r.isTwoFingering=!0;var u=r.fingerPolar(n).separation;r.firstRatio=u/a.scale.x}}},r.onSelectEnd=function(){r.isTranslating=!1,r.isRotating=!1,r.isTwoFingering=!1,r.inputSource=null,r.goalPosition.y+=r.placementBox.offsetHeight*r.presentedScene.scale.x,r.placementBox.show=!1},r.threeRenderer=e.threeRenderer,r.threeRenderer.xr.enabled=!0,r}return(0,I.Z)(n,[{key:"resolveARSession",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b9(),e.next=3,navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:{root:this.overlay}});case 3:return t=e.sent,this.threeRenderer.xr.setReferenceSpaceType("local"),e.next=7,this.threeRenderer.xr.setSession(t);case 7:return this.threeRenderer.xr.cameraAutoUpdate=!1,e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"presentedScene",get:function(){return this._presentedScene}},{key:"supportsPresentation",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b9(),e.next=4,navigator.xr.isSessionSupported("immersive-ar");case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(console.warn("Request to present in WebXR denied:"),console.warn(e.t0),console.warn("Falling back to next ar-mode"),!1));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"present",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i,o,s,u,l=this,c=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],this.isPresenting&&console.warn("Cannot present while a model is already presenting"),r=new Promise((function(e,t){requestAnimationFrame((function(){return e()}))})),t.setHotspotsVisibility(!1),t.queueRender(),e.next=7,r;case 7:return this._presentedScene=t,this.overlay=t.element.shadowRoot.querySelector("div.default"),!0===n&&(this.xrLight=new h7(this.threeRenderer),this.xrLight.addEventListener("estimationstart",(function(){if(l.isPresenting&&null!=l.xrLight){var e=l.presentedScene;e.add(l.xrLight),l.oldEnvironment=e.environment,e.environment=l.xrLight.environment}}))),e.next=12,this.resolveARSession();case 12:return(a=e.sent).addEventListener("end",(function(){l.postSessionCleanup()}),{once:!0}),(i=t.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button")).classList.add("enabled"),i.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=i,e.next=18,a.requestReferenceSpace("viewer");case 18:o=e.sent,this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=t.yaw,this.goalYaw=t.yaw,this.goalScale=1,this.oldBackground=t.background,t.background=null,this.oldShadowIntensity=t.shadowIntensity,t.setShadowIntensity(0),this.oldTarget.copy(t.getTarget()),this.oldFramedFieldOfView=t.framedFieldOfView,t.addEventListener("model-load",this.onUpdateScene),s=20*Math.PI/180,u=!0===this.placeOnWall?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(s),z:-Math.cos(s)}),a.requestHitTestSource({space:o,offsetRay:u}).then((function(e){l.initialHitSource=e})),this.currentSession=a,this.placementBox=new v7(t,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:y7});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopPresenting",value:function(){var e=Jn(Kn().mark((function e(){var t,n=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPresenting){e.next=2;break}return e.abrupt("return");case 2:return t=new Promise((function(e){n.resolveCleanup=e})),e.prev=3,e.next=6,this.currentSession.end();case 6:return e.next=8,t;case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.warn("Error while trying to end WebXR AR session"),console.warn(e.t0),this.postSessionCleanup();case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"isPresenting",get:function(){return null!=this.presentedScene}},{key:"target",get:function(){return this.oldTarget}},{key:"updateTarget",value:function(){var e=this.presentedScene;if(null!=e){var t=e.getTarget();this.oldTarget.copy(t),this.placeOnWall?t.z=e.boundingBox.min.z:t.y=e.boundingBox.min.y,e.setTarget(t.x,t.y,t.z)}}},{key:"postSessionCleanup",value:function(){var e=this.currentSession;null!=e&&(e.removeEventListener("selectstart",this.onSelectStart),e.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);var t=this.presentedScene;if(null!=t){var n=t.element;null!=this.xrLight&&(t.remove(this.xrLight),null!=this.oldEnvironment&&(t.environment=this.oldEnvironment,this.oldEnvironment=null),this.xrLight.dispose(),this.xrLight=null),t.position.set(0,0,0),t.scale.set(1,1,1),t.setShadowScaleAndOffset(1,0);var r=this.turntableRotation;null!=r&&(t.yaw=r);var a=this.oldShadowIntensity;null!=a&&t.setShadowIntensity(a);var i=this.oldBackground;null!=i&&(t.background=i);var o=this.oldTarget;t.setTarget(o.x,o.y,o.z),t.framedFieldOfView=this.oldFramedFieldOfView,t.xrCamera=null,t.removeEventListener("model-load",this.onUpdateScene),t.orientHotspots(0),n.requestUpdate("cameraTarget"),n.requestUpdate("maxCameraOrbit"),n[zee](n.getBoundingClientRect())}this.renderer.height=0;var s=this.exitWebXRButtonContainer;null!=s&&(s.classList.remove("enabled"),s.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);var u=this.transientHitTestSource;null!=u&&(u.cancel(),this.transientHitTestSource=null);var l=this.initialHitSource;null!=l&&(l.cancel(),this.initialHitSource=null),null!=this.placementBox&&(this.placementBox.dispose(),this.placementBox=null),this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.oldBackground=null,this._presentedScene=null,this.frame=null,this.inputSource=null,this.overlay=null,null!=this.resolveCleanup&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:g7})}},{key:"updateView",value:function(e){var t=this.presentedScene,n=this.threeRenderer.xr;n.updateCamera(S7),t.xrCamera=n.getCamera();var r=t.getCamera().matrixWorld.elements;if(t.orientHotspots(Math.atan2(r[1],r[5])),this.initialized||(this.placeInitially(),this.initialized=!0),e.requestViewportScale&&e.recommendedViewportScale){var a=e.recommendedViewportScale;e.requestViewportScale(Math.max(a,.25))}var i=this.currentSession.renderState.baseLayer.getViewport(e);this.threeRenderer.setViewport(i.x,i.y,i.width,i.height)}},{key:"placeInitially",value:function(){var e=this,t=this.presentedScene,n=t.position,r=t.element,a=t.getCamera(),i=this.overlay.getBoundingClientRect(),o=i.width,s=i.height;t.setSize(o,s),a.projectionMatrixInverse.copy(a.projectionMatrix).invert();var u=r.getCameraOrbit(),l=u.theta,c=u.radius,d=a.getWorldDirection(x7);t.yaw=Math.atan2(-d.x,-d.z)-l,this.goalYaw=t.yaw,n.copy(a.position).add(d.multiplyScalar(c)),this.updateTarget();var h=t.getTarget();n.add(h).sub(this.oldTarget),this.goalPosition.copy(n),t.setHotspotsVisibility(!0);var p=this.frame.session;p.addEventListener("selectstart",this.onSelectStart),p.addEventListener("selectend",this.onSelectEnd),p.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then((function(t){e.transientHitTestSource=t}))}},{key:"getTouchLocation",value:function(){var e=this.inputSource.gamepad.axes,t=this.placementBox.getExpandedHit(this.presentedScene,e[0],e[1]);return null!=t&&(x7.copy(t).sub(this.presentedScene.getCamera().position),x7.length()>10)?null:t}},{key:"getHitPoint",value:function(e){var t=this.threeRenderer.xr.getReferenceSpace(),n=e.getPose(t);if(null==n)return null;var r=w7.fromArray(n.transform.matrix);return!0===this.placeOnWall&&(this.goalYaw=Math.atan2(r.elements[4],r.elements[6])),r.elements[5]>.75!==this.placeOnWall?k7.setFromMatrixPosition(r):null}},{key:"moveToFloor",value:function(e){var t=this.initialHitSource;if(null!=t){var n=e.getHitTestResults(t);if(0!=n.length){var r=n[0],a=this.getHitPoint(r);null!=a&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(a):this.goalPosition.y=a.y),t.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:"object-placed"}))}}}},{key:"fingerPolar",value:function(e){var t=e[0].inputSource.gamepad.axes,n=e[1].inputSource.gamepad.axes,r=n[0]-t[0],a=n[1]-t[1],i=Math.atan2(a,r),o=this.lastAngle-i;return o>Math.PI?o-=2*Math.PI:o<-Math.PI&&(o+=2*Math.PI),this.lastAngle=i,{separation:Math.sqrt(r*r+a*a),deltaYaw:o}}},{key:"processInput",value:function(e){var t=this,n=this.transientHitTestSource;if(null!=n&&(this.isTranslating||this.isTwoFingering||this.isRotating)){var r=e.getHitTestResultsForTransientInput(n),a=this.presentedScene,i=a.scale.x;if(this.isTwoFingering)if(r.length<2)this.isTwoFingering=!1;else{var o=this.fingerPolar(r),s=o.separation,u=o.deltaYaw;if(!1===this.placeOnWall&&(this.goalYaw+=u),a.canScale){var l=s/this.firstRatio;this.goalScale=l<1.3&&l>.7692307692307692?1:l}}else if(2!==r.length)if(this.isRotating){var c=1.5*this.inputSource.gamepad.axes[0];this.goalYaw+=c-this.lastAngle,this.lastAngle=c}else this.isTranslating&&r.forEach((function(e){if(e.inputSource===t.inputSource){var n=null;if(e.results.length>0&&(n=t.getHitPoint(e.results[0])),null==n&&(n=t.getTouchLocation()),null!=n){if(t.goalPosition.sub(t.lastDragPosition),!1===t.placeOnWall){var r=n.y-t.lastDragPosition.y;if(r<0){t.placementBox.offsetHeight=r/i,t.presentedScene.setShadowScaleAndOffset(i,r);var o=x7.copy(a.getCamera().position),s=-r/(o.y-n.y);o.multiplyScalar(s),n.multiplyScalar(1-s).add(o)}}t.goalPosition.add(n),t.lastDragPosition.copy(n)}}}));else{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;var d=this.fingerPolar(r).separation;this.firstRatio=d/i}}}},{key:"moveScene",value:function(e){var t=this.presentedScene,n=t.position,r=t.yaw,a=t.idealCameraDistance,i=this.goalPosition,o=t.scale.x,s=this.placementBox;if(!i.equals(n)||this.goalScale!==o){var u=n.x,l=n.y,c=n.z;u=this.xDamper.update(u,i.x,e,a),l=this.yDamper.update(l,i.y,e,a),c=this.zDamper.update(c,i.z,e,a),n.set(u,l,c);var d=this.scaleDamper.update(o,this.goalScale,e,1);if(t.scale.set(d,d,d),!this.isTranslating){var h=i.y-l;this.placementComplete&&!1===this.placeOnWall?(s.offsetHeight=h/d,t.setShadowScaleAndOffset(d,h)):0===h&&(this.placementComplete=!0,s.show=!1,t.setShadowIntensity(.3))}}s.updateOpacity(e),t.updateTarget(e),t.yaw=this.yawDamper.update(r,this.goalYaw,e,Math.PI)}},{key:"onWebXRFrame",value:function(e,t){this.frame=t,++this.frames;var n=this.threeRenderer.xr.getReferenceSpace(),r=t.getViewerPose(n);null==r&&!0===this.tracking&&this.frames>30&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:"not-tracking"}));var a=this.presentedScene;if(null!=r&&null!=a&&a.element[Hee]()){!1===this.tracking&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:b7}));var i,o=!0,s=G(r.views);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(this.updateView(u),o){this.moveToFloor(t),this.processInput(t);var l=e-this.lastTick;this.moveScene(l),this.renderer.preRender(a,e,l),this.lastTick=e}var c=this.threeRenderer.getContext();c.depthMask(!1),c.clear(c.DEPTH_BUFFER_BIT),c.depthMask(!0),this.threeRenderer.render(a,a.getCamera()),o=!1}}catch(sde){s.e(sde)}finally{s.f()}}else this.threeRenderer.clear()}}]),n}(nJ),T7=function(){function e(t){M(this,e),t.threeRenderer.debug={checkShaderErrors:!0},Promise.resolve().then((function(){self.dispatchEvent(new CustomEvent("model-viewer-renderer-debug",{detail:{renderer:t,THREE:{ShaderMaterial:F0,Texture:EJ,Mesh:A0,Scene:L3,PlaneBufferGeometry:J0,OrthographicCamera:u1,WebGLRenderTarget:_J}}}))}))}return(0,I.Z)(e,[{key:"addScene",value:function(e){self.dispatchEvent(new CustomEvent("model-viewer-scene-added-debug",{detail:{scene:e}}))}},{key:"removeScene",value:function(e){self.dispatchEvent(new CustomEvent("model-viewer-scene-removed-debug",{detail:{scene:e}}))}}]),e}();function C7(e){var t=new Map,n=new Map,r=e.clone();return _7(e,r,(function(e,r){t.set(r,e),n.set(e,r)})),r.traverse((function(e){if(e.isSkinnedMesh){var r=e,a=t.get(e),i=a.skeleton.bones;r.skeleton=a.skeleton.clone(),r.bindMatrix.copy(a.bindMatrix),r.skeleton.bones=i.map((function(e){return n.get(e)})),r.bind(r.skeleton,r.bindMatrix)}})),r}function _7(e,t,n){n(e,t);for(var r=0;r<e.children.length;r++)_7(e.children[r],t.children[r],n)}var M7=Symbol("prepared"),I7=Symbol("prepare"),N7=Symbol("preparedGLTF"),A7=Symbol("clone"),R7=function(){function e(t){M(this,e),this[N7]=t}return(0,I.Z)(e,[{key:"parser",get:function(){return this[N7].parser}},{key:"animations",get:function(){return this[N7].animations}},{key:"scene",get:function(){return this[N7].scene}},{key:"scenes",get:function(){return this[N7].scenes}},{key:"cameras",get:function(){return this[N7].cameras}},{key:"asset",get:function(){return this[N7].asset}},{key:"userData",get:function(){return this[N7].userData}},{key:"clone",value:function(){return new(0,this.constructor)(this[A7]())}},{key:"dispose",value:function(){this.scenes.forEach((function(e){e.traverse((function(e){if(e.isMesh){var t=e;(Array.isArray(t.material)?t.material:[t.material]).forEach((function(e){for(var t in e){var n=e[t];n instanceof EJ&&n.dispose()}e.dispose()})),t.geometry.dispose()}}))}))}},{key:A7,value:function(){var e=this[N7],t=C7(this.scene);O7(t,this.scene);var n=[t],r=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:t,scenes:n,userData:r})}}],[{key:"prepare",value:function(e){if(null==e.scene)throw new Error("Model does not have a scene");if(e[M7])return e;var t=this[I7](e);return t[M7]=!0,t}},{key:I7,value:function(e){var t=e.scene,n=[t];return Object.assign(Object.assign({},e),{scene:t,scenes:n})}}]),e}(),O7=function(e,t){D7(e,t,(function(e,t){void 0!==t.userData.variantMaterials&&(e.userData.variantMaterials=new Map(t.userData.variantMaterials)),void 0!==t.userData.originalMaterial&&(e.userData.originalMaterial=t.userData.originalMaterial)}))},D7=function e(t,n,r){r(t,n);for(var a=0;a<t.children.length;a++)e(t.children[a],n.children[a],r)},L7=Symbol("threeGLTF"),P7=Symbol("gltf"),F7=Symbol("gltfElementMap"),j7=Symbol("threeObjectMap"),z7=Symbol("parallelTraverseThreeScene"),B7=Symbol("correlateOriginalThreeGLTF"),U7=Symbol("correlateCloneThreeGLTF"),W7=function(){function e(t,n,r,a){M(this,e),this[L7]=t,this[P7]=n,this[F7]=a,this[j7]=r}return(0,I.Z)(e,[{key:"threeGLTF",get:function(){return this[L7]}},{key:"gltf",get:function(){return this[P7]}},{key:"gltfElementMap",get:function(){return this[F7]}},{key:"threeObjectMap",get:function(){return this[j7]}}],[{key:"from",value:function(e,t){return null!=t?this[U7](e,t):this[B7](e)}},{key:B7,value:function(t){var n,r=t.parser.json,a=t.parser.associations,i=new Map,o={name:"Default"},s={type:"materials",index:-1},u=G(a.keys());try{for(u.s();!(n=u.n()).done;){var l=n.value;l instanceof H$&&null==a.get(l)&&(s.index<0&&(null==r.materials&&(r.materials=[]),s.index=r.materials.length,r.materials.push(o)),l.name=o.name,a.set(l,{materials:s.index}))}}catch(sde){u.e(sde)}finally{u.f()}var c,d=G(a);try{for(d.s();!(c=d.n()).done;){var h=(0,U.Z)(c.value,2),p=h[0],f=h[1];if(f){var m=p;m.userData=m.userData||{},m.userData.associations=f}for(var v in f)if(null!=v&&"primitives"!==v){var g=v,y=(r[g]||[])[f[g]];if(null==y)continue;var b=i.get(y);null==b&&(b=new Set,i.set(y,b)),b.add(p)}}}catch(sde){d.e(sde)}finally{d.f()}return new e(t,r,a,i)}},{key:U7,value:function(t,n){for(var r=n.threeGLTF,a=n.gltf,i=JSON.parse(JSON.stringify(a)),o=new Map,s=new Map,u=0;u<r.scenes.length;u++)this[z7](r.scenes[u],t.scenes[u],(function(e,t){var r=n.threeObjectMap.get(e);if(null!=r)for(var a in r)if(null!=a&&"primitives"!==a){var u=a,l=r[u],c=i[u][l],d=o.get(t)||{};d[u]=l,o.set(t,d);var h=s.get(c)||new Set;h.add(t),s.set(c,h)}}));return new e(t,i,o,s)}},{key:z7,value:function(e,t,n){!function e(t,r){if(n(t,r),t.isObject3D){if(t.isMesh)if(Array.isArray(t.material))for(var a=0;a<t.material.length;++a)e(t.material[a],r.material[a]);else e(t.material,r.material);for(var i=0;i<t.children.length;++i)e(t.children[i],r.children[i])}}(e,t)}}]),e}(),V7=Symbol("cloneAndPatchMaterial"),Z7=Symbol("correlatedSceneGraph"),H7=function(e){A(n,e);var t=F(n);function n(){return M(this,n),t.apply(this,arguments)}return(0,I.Z)(n,[{key:"correlatedSceneGraph",get:function(){return this[N7][Z7]}},{key:A7,value:function(){var e=this,t=pl(R(n.prototype),A7,this).call(this),r=new Map;return t.scene.traverse((function(t){if(t.isMesh){var n=t;Array.isArray(n.material)?n.material=n.material.map((function(t){return e[V7](t,r)})):null!=n.material&&(n.material=e[V7](n.material,r))}})),t[Z7]=W7.from(t,this.correlatedSceneGraph),t}},{key:V7,value:function(e,t){if(t.has(e.uuid))return t.get(e.uuid);var n=e.clone();null!=e.map&&(n.map=e.map.clone(),n.map.needsUpdate=!0),null!=e.normalMap&&(n.normalMap=e.normalMap.clone(),n.normalMap.needsUpdate=!0),null!=e.emissiveMap&&(n.emissiveMap=e.emissiveMap.clone(),n.emissiveMap.needsUpdate=!0);var r=null;if(null!=e.roughnessMap&&(r=e.roughnessMap.clone()),null!=r){r.needsUpdate=!0,n.roughnessMap=r;var a=tee.singleton,i=a.threeRenderer,o=a.roughnessMipmapper,s=i.xr.enabled;i.xr.enabled=!1;var u=n.roughnessMap.image;o.generateMipmaps(n),n.roughnessMap.image=u,i.xr.enabled=s}return e.roughnessMap===e.metalnessMap?n.metalnessMap=r:null!=e.metalnessMap&&(n.metalnessMap=e.metalnessMap.clone(),n.metalnessMap.needsUpdate=!0),e.roughnessMap===e.aoMap?n.aoMap=r:null!=e.aoMap&&(n.aoMap=e.aoMap.clone(),n.aoMap.needsUpdate=!0),n.shadowSide=0,t.set(e.uuid,n),n}}],[{key:I7,value:function(e){var t=pl(R(n),I7,this).call(this,e);null==t[Z7]&&(t[Z7]=W7.from(t));var r=t.scene,a=new JJ(void 0,1/0);return r.traverse((function(e){e.renderOrder=1e3,e.frustumCulled=!1,e.name||(e.name=e.uuid);var t=e;t.isMesh&&(t.castShadow=!0,t.isSkinnedMesh&&(t.geometry.boundingSphere=a,t.geometry.boundingBox=null))})),t}}]),n}(R7),G7=function(e){A(n,e);var t=F(n);function n(){var e;M(this,n),(e=t.call(this)).position.y=-3.5;var r=new O0;r.deleteAttribute("uv");var a=new D5({metalness:0,side:1}),i=new D5({metalness:0}),o=new g6(16777215,500,28,2);o.position.set(.418,16.199,.3),e.add(o);var s=new A0(r,a);s.position.set(-.757,13.219,.717),s.scale.set(31.713,28.305,28.591),e.add(s);var u=new A0(r,i);u.position.set(-10.906,2.009,1.846),u.rotation.set(0,-.195,0),u.scale.set(2.328,7.905,4.651),e.add(u);var l=new A0(r,i);l.position.set(-5.607,-.754,-.758),l.rotation.set(0,.994,0),l.scale.set(1.97,1.534,3.955),e.add(l);var c=new A0(r,i);c.position.set(6.167,.857,7.803),c.rotation.set(0,.561,0),c.scale.set(3.927,6.285,3.687),e.add(c);var d=new A0(r,i);d.position.set(-2.017,.018,6.124),d.rotation.set(0,.333,0),d.scale.set(2.002,4.566,2.064),e.add(d);var h=new A0(r,i);h.position.set(2.291,-.756,-2.621),h.rotation.set(0,-.286,0),h.scale.set(1.546,1.552,1.496),e.add(h);var p=new A0(r,i);p.position.set(-2.193,-.369,-5.547),p.rotation.set(0,.516,0),p.scale.set(3.875,3.487,2.986),e.add(p);var f=new A0(r,e.createAreaLightMaterial(50));f.position.set(-16.116,14.37,8.208),f.scale.set(.1,2.428,2.739),e.add(f);var m=new A0(r,e.createAreaLightMaterial(50));m.position.set(-16.109,18.021,-8.207),m.scale.set(.1,2.425,2.751),e.add(m);var v=new A0(r,e.createAreaLightMaterial(17));v.position.set(14.904,12.198,-1.832),v.scale.set(.15,4.265,6.331),e.add(v);var g=new A0(r,e.createAreaLightMaterial(43));g.position.set(-.462,8.89,14.52),g.scale.set(4.38,5.441,.088),e.add(g);var y=new A0(r,e.createAreaLightMaterial(20));y.position.set(3.235,11.486,-12.541),y.scale.set(2.5,2,.1),e.add(y);var b=new A0(r,e.createAreaLightMaterial(100));return b.position.set(0,20,0),b.scale.set(1,.1,1),e.add(b),e}return(0,I.Z)(n,[{key:"createAreaLightMaterial",value:function(e){var t=new $$;return t.color.setScalar(e),t}}]),n}(L3),q7=function(e){A(n,e);var t=F(n);function n(){var e;M(this,n),(e=t.call(this)).position.y=-3.5;var r=new O0;r.deleteAttribute("uv");var a=new D5({metalness:0,side:1}),i=new D5({metalness:0}),o=new g6(16777215,400,28,2);o.position.set(.5,14,.5),e.add(o);var s=new A0(r,a);s.position.set(0,13.2,0),s.scale.set(31.5,28.5,31.5),e.add(s);var u=new A0(r,i);u.position.set(-10.906,-1,1.846),u.rotation.set(0,-.195,0),u.scale.set(2.328,7.905,4.651),e.add(u);var l=new A0(r,i);l.position.set(-5.607,-.754,-.758),l.rotation.set(0,.994,0),l.scale.set(1.97,1.534,3.955),e.add(l);var c=new A0(r,i);c.position.set(6.167,-.16,7.803),c.rotation.set(0,.561,0),c.scale.set(3.927,6.285,3.687),e.add(c);var d=new A0(r,i);d.position.set(-2.017,.018,6.124),d.rotation.set(0,.333,0),d.scale.set(2.002,4.566,2.064),e.add(d);var h=new A0(r,i);h.position.set(2.291,-.756,-2.621),h.rotation.set(0,-.286,0),h.scale.set(1.546,1.552,1.496),e.add(h);var p=new A0(r,i);p.position.set(-2.193,-.369,-5.547),p.rotation.set(0,.516,0),p.scale.set(3.875,3.487,2.986),e.add(p);var f=new A0(r,e.createAreaLightMaterial(80));f.position.set(-14,10,8),f.scale.set(.1,2.5,2.5),e.add(f);var m=new A0(r,e.createAreaLightMaterial(80));m.position.set(-14,14,-4),m.scale.set(.1,2.5,2.5),e.add(m);var v=new A0(r,e.createAreaLightMaterial(23));v.position.set(14,12,0),v.scale.set(.1,5,5),e.add(v);var g=new A0(r,e.createAreaLightMaterial(16));g.position.set(0,9,14),g.scale.set(5,5,.1),e.add(g);var y=new A0(r,e.createAreaLightMaterial(80));y.position.set(7,8,-14),y.scale.set(2.5,2.5,.1),e.add(y);var b=new A0(r,e.createAreaLightMaterial(80));b.position.set(-7,16,-14),b.scale.set(2.5,2.5,.1),e.add(b);var x=new A0(r,e.createAreaLightMaterial(1));return x.position.set(0,20,0),x.scale.set(.1,.1,.1),e.add(x),e}return(0,I.Z)(n,[{key:"createAreaLightMaterial",value:function(e){var t=new $$;return t.color.setScalar(e),t}}]),n}(L3),X7=/\.hdr(\.js)?$/,Y7=new i6,K7=new(function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this,e)).type=1016,r}return(0,I.Z)(n,[{key:"parse",value:function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;for(var r=e.pos,a=-1,i=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));0>(a=s.indexOf("\n"))&&i<t&&r<e.byteLength;)o+=s,i+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<a&&(!1!==n&&(e.pos+=i+a+1),o+s.slice(0,a))},r=function(e,t,n,r){var a=e[t+3],i=Math.pow(2,a-128)/255;n[r+0]=e[t+0]*i,n[r+1]=e[t+1]*i,n[r+2]=e[t+2]*i},a=function(e,t,n,r){var a=e[t+3],i=Math.pow(2,a-128)/255;n[r+0]=q6.toHalfFloat(Math.min(e[t+0]*i,65504)),n[r+1]=q6.toHalfFloat(Math.min(e[t+1]*i,65504)),n[r+2]=q6.toHalfFloat(Math.min(e[t+2]*i,65504))},i=new Uint8Array(e);i.pos=0;var o=function(e){var r,a,i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,u=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,l={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(r=n(e)))return t(1,"no header found");if(!(a=r.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(l.valid|=1,l.programtype=a[1],l.string+=r+"\n";!1!==(r=n(e));)if(l.string+=r+"\n","#"!==r.charAt(0)){if((a=r.match(i))&&(l.gamma=parseFloat(a[1],10)),(a=r.match(o))&&(l.exposure=parseFloat(a[1],10)),(a=r.match(s))&&(l.valid|=2,l.format=a[1]),(a=r.match(u))&&(l.valid|=4,l.height=parseInt(a[1],10),l.width=parseInt(a[2],10)),2&l.valid&&4&l.valid)break}else l.comments+=r+"\n";return 2&l.valid?4&l.valid?l:t(3,"missing image size specifier"):t(3,"missing format specifier")}(i);if(-1!==o){var s=o.width,u=o.height,l=function(e,n,r){var a=n;if(a<8||a>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(a!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");var i=new Uint8Array(4*n*r);if(!i.length)return t(4,"unable to allocate buffer space");for(var o=0,s=0,u=4*a,l=new Uint8Array(4),c=new Uint8Array(u),d=r;d>0&&s<e.byteLength;){if(s+4>e.byteLength)return t(1);if(l[0]=e[s++],l[1]=e[s++],l[2]=e[s++],l[3]=e[s++],2!=l[0]||2!=l[1]||(l[2]<<8|l[3])!=a)return t(3,"bad rgbe scanline format");for(var h=void 0,p=0;p<u&&s<e.byteLength;){var f=(h=e[s++])>128;if(f&&(h-=128),0===h||p+h>u)return t(3,"bad scanline data");if(f)for(var m=e[s++],v=0;v<h;v++)c[p++]=m;else c.set(e.subarray(s,s+h),p),p+=h,s+=h}for(var g=a,y=0;y<g;y++){var b=0;i[o]=c[y+b],b+=a,i[o+1]=c[y+b],b+=a,i[o+2]=c[y+b],b+=a,i[o+3]=c[y+b],o+=4}d--}return i}(i.subarray(i.pos),s,u);if(-1!==l){var c,d,h,p;switch(this.type){case 1009:c=l,d=1023,h=1009;break;case 1015:p=l.length/4;for(var f=new Float32Array(3*p),m=0;m<p;m++)r(l,4*m,f,3*m);c=f,d=1022,h=1015;break;case 1016:p=l.length/4;for(var v=new Uint16Array(3*p),g=0;g<p;g++)a(l,4*g,v,3*g);c=v,d=1022,h=1016;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:s,height:u,data:c,header:o.string,gamma:o.gamma,exposure:o.exposure,format:d,type:h}}}return null}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,t,r,a){return pl(R(n.prototype),"load",this).call(this,e,(function(e,n){switch(e.type){case 1009:e.encoding=3002,e.minFilter=1003,e.magFilter=1003,e.generateMipmaps=!1,e.flipY=!0;break;case 1015:case 1016:e.encoding=3e3,e.minFilter=1006,e.magFilter=1006,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),r,a)}}]),n}(a6));K7.setDataType(1016);var Q7,J7,$7=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),(r=t.call(this)).threeRenderer=e,r.generatedEnvironmentMap=null,r.generatedEnvironmentMapAlt=null,r.skyboxCache=new Map,r.blurMaterial=null,r.blurScene=null,r}return(0,I.Z)(n,[{key:"load",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i,o=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:function(){},e.prev=1,r=X7.test(t),a=r?K7:Y7,e.next=6,new Promise((function(e,r){return a.load(t,e,(function(e){n(e.loaded/e.total*.9)}),r)}));case 6:return i=e.sent,e.abrupt("return",(n(1),i.name=t,i.mapping=303,r||(i.encoding=3007),i));case 8:return e.prev=8,n&&n(1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[1,,8,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"generateEnvironmentMapAndSkybox",value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a,i,o,s,u,l,c,d,h,p=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:null,n=p.length>1&&void 0!==p[1]?p[1]:null,r=(p.length>2&&void 0!==p[2]?p[2]:{}).progressTracker,a=null!=r?r.beginActivity():function(){},!0===(i="neutral"===n)&&(n=null),o=y9(n),e.prev=6,u=Promise.resolve(null),t&&(u=this.loadEquirectFromUrl(t,r)),s=o?this.loadEquirectFromUrl(o,r):t?this.loadEquirectFromUrl(t,r):!0===i?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap(),e.next=11,Promise.all([s,u]);case 11:if(l=e.sent,c=(0,U.Z)(l,2),d=c[0],h=c[1],null!=d){e.next=17;break}throw new Error("Failed to load environment map.");case 17:return e.abrupt("return",{environmentMap:d,skybox:h});case 18:return e.prev=18,a(1),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[6,,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadEquirectFromUrl",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.skyboxCache.has(t)||(r=n?n.beginActivity():function(){},a=this.load(t,r),this.skyboxCache.set(t,a)),e.abrupt("return",this.skyboxCache.get(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"GenerateEnvironmentMap",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a,i,o,s,u;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T9();case 2:return r=this.threeRenderer,a=new W0(256,{generateMipmaps:!1,type:1016,format:1023,encoding:3e3,depthBuffer:!0}),i=new B0(.1,100,a),(o=i.renderTarget.texture).name=n,o.isRenderTargetTexture=!1,o.images=[1,1,1,1,1,1],t.scale.setComponent(0,-1),s=r.outputEncoding,u=r.toneMapping,r.toneMapping=0,r.outputEncoding=3e3,i.update(r,t),e.next=10,this.blurCubemap(a,.04);case 10:return r.toneMapping=u,r.outputEncoding=s,e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadGeneratedEnvironmentMap",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(null==this.generatedEnvironmentMap&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new G7,"default")),this.generatedEnvironmentMap));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadGeneratedEnvironmentMapAlt",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(null==this.generatedEnvironmentMapAlt&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new q7,"neutral")),this.generatedEnvironmentMapAlt));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"blurCubemap",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==this.blurMaterial&&(this.blurMaterial=this.getBlurShader(20),r=new O0,a=new A0(r,this.blurMaterial),this.blurScene=new L3,this.blurScene.add(a)),i=t.clone(),this.halfblur(t,i,n,"latitudinal"),this.halfblur(i,t,n,"longitudinal");case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"halfblur",value:function(){var e=Jn(Kn().mark((function e(t,n,r,a){var i,o,s,u,l,c,d,h,p,f,m;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=t.width,o=isFinite(r)?Math.PI/(2*i):2*Math.PI/39,s=r/o,(u=isFinite(r)?1+Math.floor(3*s):20)>20&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(u," samples when the maximum is set to 20")),l=[],c=0,d=0;d<20;++d)h=d/s,p=Math.exp(-h*h/2),l.push(p),0==d?c+=p:d<u&&(c+=2*p);for(f=0;f<l.length;f++)l[f]=l[f]/c;(m=this.blurMaterial.uniforms).envMap.value=t.texture,m.samples.value=u,m.weights.value=l,m.latitudinal.value="latitudinal"===a,m.dTheta.value=o,new B0(.1,100,n).update(this.threeRenderer,this.blurScene);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"getBlurShader",value:function(e){var t=new Float32Array(e),n=new NJ(0,1,0);return new F0({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:n}},vertexShader:"\n      \n      varying vec3 vOutputDirection;\n  \n      void main() {\n  \n        vOutputDirection = vec3( position );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  \n      }\n    ",fragmentShader:"\n        varying vec3 vOutputDirection;\n  \n        uniform samplerCube envMap;\n        uniform int samples;\n        uniform float weights[ n ];\n        uniform bool latitudinal;\n        uniform float dTheta;\n        uniform vec3 poleAxis;\n  \n        vec3 getSample( float theta, vec3 axis ) {\n  \n          float cosTheta = cos( theta );\n          // Rodrigues' axis-angle rotation\n          vec3 sampleDirection = vOutputDirection * cosTheta\n            + cross( axis, vOutputDirection ) * sin( theta )\n            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n  \n          return vec3( textureCube( envMap, sampleDirection ) );\n  \n        }\n  \n        void main() {\n  \n          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n  \n          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n  \n            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n  \n          }\n  \n          axis = normalize( axis );\n  \n          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n  \n          for ( int i = 1; i < n; i++ ) {\n  \n            if ( i >= samples ) {\n  \n              break;\n  \n            }\n  \n            float theta = dTheta * float( i );\n            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n  \n          }\n        }\n      ",blending:0,depthTest:!1,depthWrite:!1,side:1})}},{key:"dispose",value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=G(this.skyboxCache),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=10;break}return r=(0,U.Z)(n.value,2),a=r[1],e.next=7,a;case 7:e.sent.dispose();case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:if(e.t1=null!=this.generatedEnvironmentMap,!e.t1){e.next=24;break}return e.next=22,this.generatedEnvironmentMap;case 22:e.sent.dispose(),this.generatedEnvironmentMap=null;case 24:if(e.t2=null!=this.generatedEnvironmentMapAlt,!e.t2){e.next=30;break}return e.next=28,this.generatedEnvironmentMapAlt;case 28:e.sent.dispose(),this.generatedEnvironmentMapAlt=null;case 30:null!=this.blurMaterial&&this.blurMaterial.dispose();case 31:case"end":return e.stop()}}),e,this,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}()}]),n}(nJ),eee=[1,.79,.62,.5,.4,.31,.25],tee=function(e){A(n,e);var t=F(n);function n(e){var r;M(this,n),(r=t.call(this)).loader=new c9(H7),r.width=0,r.height=0,r.dpr=1,r.debugger=null,r.scenes=new Set,r.multipleScenesVisible=!1,r.scaleStep=0,r.lastStep=3,r.avgFrameDuration=22,r.onWebGLContextLost=function(e){r.dispatchEvent({type:"contextlost",sourceEvent:e})},r.onWebGLContextRestored=function(){var e;null===(e=r.textureUtils)||void 0===e||e.dispose(),r.textureUtils=new $7(r.threeRenderer),r.roughnessMipmapper=new a7(r.threeRenderer);var t,n=G(r.scenes);try{for(n.s();!(t=n.n()).done;){t.value.element[u7]()}}catch(sde){n.e(sde)}finally{n.f()}r.threeRenderer.shadowMap.needsUpdate=!0},r.dpr=S9(),r.canvas3D=document.createElement("canvas"),r.canvas3D.id="webgl-canvas";try{r.threeRenderer=new D3({canvas:r.canvas3D,alpha:!0,antialias:!0,powerPreference:e.powerPreference,preserveDrawingBuffer:!0}),r.threeRenderer.autoClear=!0,r.threeRenderer.outputEncoding=3007,r.threeRenderer.physicallyCorrectLights=!0,r.threeRenderer.setPixelRatio(1),r.threeRenderer.shadowMap.enabled=!0,r.threeRenderer.shadowMap.type=2,r.threeRenderer.shadowMap.autoUpdate=!1,r.debugger=e.debug?new T7((0,L.Z)(r)):null,r.threeRenderer.debug={checkShaderErrors:!!r.debugger},r.threeRenderer.toneMapping=4}catch(e){console.warn(e)}return r.arRenderer=new E7((0,L.Z)(r)),r.textureUtils=r.canRender?new $7(r.threeRenderer):null,r.roughnessMipmapper=new a7(r.threeRenderer),c9.initializeKTX2Loader(r.threeRenderer),r.canvas3D.addEventListener("webglcontextlost",r.onWebGLContextLost),r.canvas3D.addEventListener("webglcontextrestored",r.onWebGLContextRestored),r.updateRendererSize(),r.lastTick=performance.now(),r.avgFrameDuration=0,r}return(0,I.Z)(n,[{key:"canRender",get:function(){return null!=this.threeRenderer}},{key:"scaleFactor",get:function(){return eee[this.scaleStep]}},{key:"minScale",set:function(e){for(var t=1;t<eee.length&&!(eee[t]<e);)++t;this.lastStep=t-1}},{key:"updateRendererSize",value:function(){var e=S9();if(e!==this.dpr){var t,n=G(this.scenes);try{for(n.s();!(t=n.n()).done;){var r=t.value.element;r[Eee](r.getBoundingClientRect())}}catch(sde){n.e(sde)}finally{n.f()}}var a,i=0,o=0,s=G(this.scenes);try{for(s.s();!(a=s.n()).done;){var u=a.value;i=Math.max(i,u.width),o=Math.max(o,u.height)}}catch(sde){s.e(sde)}finally{s.f()}if(i!==this.width||o!==this.height||e!==this.dpr){this.width=i,this.height=o,this.dpr=e,this.canRender&&this.threeRenderer.setSize(i*e,o*e,!1);var l=this.scaleFactor,c=i/l,d=o/l;this.canvas3D.style.width="".concat(c,"px"),this.canvas3D.style.height="".concat(d,"px");var h,p=G(this.scenes);try{for(p.s();!(h=p.n()).done;){var f=h.value,m=f.canvas;m.width=Math.round(i*e),m.height=Math.round(o*e),m.style.width="".concat(c,"px"),m.style.height="".concat(d,"px"),f.queueRender()}}catch(sde){p.e(sde)}finally{p.f()}}}},{key:"updateRendererScale",value:function(){var e=this.scaleStep;if(this.avgFrameDuration>26?++this.scaleStep:this.avgFrameDuration<18&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),e!=this.scaleStep){var t=this.scaleFactor;this.avgFrameDuration=22;var n=this.width/t,r=this.height/t;this.canvas3D.style.width="".concat(n,"px"),this.canvas3D.style.height="".concat(r,"px");var a,i=G(this.scenes);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=o.canvas.style;s.width="".concat(n,"px"),s.height="".concat(r,"px"),o.queueRender()}}catch(sde){i.e(sde)}finally{i.f()}}}},{key:"registerScene",value:function(e){var t=this;this.scenes.add(e);var n=e.canvas,r=this.scaleFactor;n.width=Math.round(this.width*this.dpr),n.height=Math.round(this.height*this.dpr),n.style.width=this.width/r+"px",n.style.height=this.height/r+"px",this.multipleScenesVisible&&n.classList.add("show"),e.queueRender(),this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((function(e,n){return t.render(e,n)})),null!=this.debugger&&this.debugger.addScene(e)}},{key:"unregisterScene",value:function(e){this.scenes.delete(e),this.canRender&&0===this.scenes.size&&this.threeRenderer.setAnimationLoop(null),null!=this.debugger&&this.debugger.removeScene(e)}},{key:"displayCanvas",value:function(e){return this.multipleScenesVisible?e.element[Dee]:this.canvas3D}},{key:"selectCanvas",value:function(){var e,t=0,n=null,r=G(this.scenes);try{for(r.s();!(e=r.n()).done;){var a=e.value;a.element.modelIsVisible&&null==a.externalRenderer&&(++t,n=a.canvas)}}catch(sde){r.e(sde)}finally{r.f()}if(null!=n){var i=t>1,o=this.canvas3D;if(i!==this.multipleScenesVisible||!i&&o.parentElement!==n.parentElement){this.multipleScenesVisible=i,i&&o.classList.remove("show");var s,u=G(this.scenes);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(null==l.externalRenderer){var c=l.element[Dee];i?(c.classList.add("show"),l.queueRender()):l.canvas===n&&(l.canvas.parentElement.appendChild(o),o.classList.add("show"),c.classList.remove("show"),l.queueRender())}}}catch(sde){u.e(sde)}finally{u.f()}}}}},{key:"orderedScenes",value:function(){for(var e=[],t=0,n=[!1,!0];t<n.length;t++){var r,a=n[t],i=G(this.scenes);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.element.modelIsVisible===a&&e.push(o)}}catch(sde){i.e(sde)}finally{i.f()}}return e}},{key:"isPresenting",get:function(){return this.arRenderer.isPresenting}},{key:"preRender",value:function(e,t,n){var r=e.element,a=e.exposure;r[Fee](t,n);var i="number"==typeof a&&!self.isNaN(a);this.threeRenderer.toneMappingExposure=i?a:1,e.isShadowDirty()&&(this.threeRenderer.shadowMap.needsUpdate=!0)}},{key:"render",value:function(e,t){if(null==t){var n=e-this.lastTick;if(this.lastTick=e,this.canRender&&!this.isPresenting){this.avgFrameDuration+=k9(.2*(n-this.avgFrameDuration),-2,2),this.selectCanvas(),this.updateRendererSize(),this.updateRendererScale();var r,a=this.dpr,i=this.scaleFactor,o=G(this.orderedScenes());try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.element;if((u.modelIsVisible||!(s.renderCount>0))&&(this.preRender(s,e,n),s.shouldRender()))if(null==s.externalRenderer){if(!u.modelIsVisible&&!this.multipleScenesVisible){var l,c=G(this.scenes);try{for(c.s();!(l=c.n()).done;){var d=l.value;d.element.modelIsVisible&&d.queueRender()}}catch(sde){c.e(sde)}finally{c.f()}}var h=Math.min(Math.ceil(s.width*i*a),this.canvas3D.width),p=Math.min(Math.ceil(s.height*i*a),this.canvas3D.height);if(this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.floor(this.height*a)-p,h,p),this.threeRenderer.render(s,s.camera),this.multipleScenesVisible){null==s.context&&s.createContext();var f=s.context;f.clearRect(0,0,h,p),f.drawImage(this.canvas3D,0,0,h,p,0,0,h,p)}s.hasRendered(),u.loaded&&++s.renderCount}else{var m=s.getCamera();m.updateMatrix();var v=m.matrix,g=m.projectionMatrix,y=v.elements.slice(),b=s.getTarget();y[12]+=b.x,y[13]+=b.y,y[14]+=b.z,s.externalRenderer.render({viewMatrix:y,projectionMatrix:g.elements})}}}catch(sde){o.e(sde)}finally{o.f()}}}else this.arRenderer.onWebXRFrame(e,t)}},{key:"dispose",value:function(){null!=this.textureUtils&&this.textureUtils.dispose(),null!=this.roughnessMipmapper&&this.roughnessMipmapper.dispose(),null!=this.threeRenderer&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;var e,t=[],n=G(this.scenes);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.element)}}catch(sde){n.e(sde)}finally{n.f()}return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),t}}],[{key:"singleton",get:function(){return this._singleton}},{key:"resetSingleton",value:function(){var e,t=this._singleton.dispose(),r=G(t);try{for(r.s();!(e=r.n()).done;){e.value.disconnectedCallback()}}catch(sde){r.e(sde)}finally{r.f()}this._singleton=new n({powerPreference:(self.ModelViewerElement||{}).powerPreference||"high-performance",debug:E9()});var a,i=G(t);try{for(i.s();!(a=i.n()).done;){a.value.connectedCallback()}}catch(sde){i.e(sde)}finally{i.f()}}}]),n}(nJ);tee._singleton=new tee({powerPreference:(self.ModelViewerElement||{}).powerPreference||"high-performance",debug:E9()});var nee,ree,aee,iee,oee,see,uee,lee,cee,dee,hee=Symbol("ongoingActivities"),pee=Symbol("announceTotalProgress"),fee=Symbol("eventDelegate"),mee=function(e){function t(){var e=this;M(this,t),this[Q7]=document.createDocumentFragment(),this.addEventListener=function(){var t;return(t=e[fee]).addEventListener.apply(t,arguments)},this.removeEventListener=function(){var t;return(t=e[fee]).removeEventListener.apply(t,arguments)},this.dispatchEvent=function(){var t;return(t=e[fee]).dispatchEvent.apply(t,arguments)},this[J7]=new Set}return(0,I.Z)(t,[{key:"ongoingActivityCount",get:function(){return this[hee].size}},{key:"beginActivity",value:function(){var e=this,t={progress:0};return this[hee].add(t),1===this.ongoingActivityCount&&this[pee](),function(n){var r;return(r=Math.max(k9(n,0,1),t.progress))!==t.progress&&(t.progress=r,e[pee]()),t.progress}}},{key:e,value:function(){var e,t=0,n=0,r=0,a=G(this[hee]);try{for(a.s();!(e=a.n()).done;){var i=e.value.progress;t+=i*(.5/Math.pow(2,n++)),1===i&&r++}}catch(sde){a.e(sde)}finally{a.f()}r===this.ongoingActivityCount&&(t=1,this[hee].clear()),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:t}}))}}]),t}((Q7=fee,J7=hee,pee)),vee=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},gee=document.createElement("canvas"),yee=Symbol("fallbackResizeHandler"),bee=Symbol("defaultAriaLabel"),xee=Symbol("resizeObserver"),wee=Symbol("clearModelTimeout"),kee=Symbol("onContextLost"),See=Symbol("loaded"),Eee=Symbol("updateSize"),Tee=Symbol("intersectionObserver"),Cee=Symbol("isElementInViewport"),_ee=Symbol("announceModelVisibility"),Mee=Symbol("ariaLabel"),Iee=Symbol("loadedTime"),Nee=Symbol("updateSource"),Aee=Symbol("markLoaded"),Ree=Symbol("container"),Oee=Symbol("input"),Dee=Symbol("canvas"),Lee=Symbol("scene"),Pee=Symbol("needsRender"),Fee=Symbol("tick"),jee=Symbol("onModelLoad"),zee=Symbol("onResize"),Bee=Symbol("renderer"),Uee=Symbol("progressTracker"),Wee=Symbol("getLoaded"),Vee=Symbol("getModelIsVisible"),Zee=Symbol("shouldAttemptPreload"),Hee=Symbol("sceneIsReady"),Gee=Symbol("hasTransitioned"),qee=function(e){return{x:e.x,y:e.y,z:e.z,toString:function(){return"".concat(this.x,"m ").concat(this.y,"m ").concat(this.z,"m")}}},Xee=function(e,t,n){A(a,e);var r=F(a);function a(){var e;M(this,a),(e=r.call(this)).alt=null,e.src=null,e[nee]=!1,e[ree]=!1,e[aee]=0,e[iee]=null,e[oee]=w9((function(){var t=e.getBoundingClientRect();e[Eee](t)}),50),e[see]=w9((function(t){var n=e.modelIsVisible;n!==t&&e.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:n}}))}),0),e[uee]=null,e[lee]=null,e[cee]=new mee,e[dee]=function(t){e.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:t.sourceEvent}}))},e.attachShadow({mode:"open"});var t,n,i=e.shadowRoot;if(function(e){CQ(tJ,e)}(i),e[Ree]=i.querySelector(".container"),e[Oee]=i.querySelector(".userInput"),e[Dee]=i.querySelector("canvas"),e[bee]=e[Oee].getAttribute("aria-label"),e.isConnected){var o=e.getBoundingClientRect();t=o.width,n=o.height}else t=300,n=150;return e[Lee]=new J9({canvas:e[Dee],element:(0,L.Z)(e),width:t,height:n}),e[Lee].addEventListener("model-load",function(){var t=Jn(Kn().mark((function t(n){return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e[Aee](),e[jee](),t.next=4,T9();case 4:e.dispatchEvent(new CustomEvent("load",{detail:{url:n.url}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Promise.resolve().then((function(){e[Eee](e.getBoundingClientRect())})),GQ&&(e[xee]=new ResizeObserver((function(t){if(!e[Bee].isPresenting){var n,r=G(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.target===(0,L.Z)(e)&&e[Eee](a.contentRect)}}catch(sde){r.e(sde)}finally{r.f()}}}))),qQ?e[Tee]=new IntersectionObserver((function(t){var n,r=G(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.target===(0,L.Z)(e)){var i=e.modelIsVisible;e[Cee]=a.isIntersecting,e[_ee](i),e[Cee]&&!e[Hee]()&&e[Nee]()}}}catch(sde){r.e(sde)}finally{r.f()}}),{root:null,rootMargin:"0px",threshold:0}):e[Cee]=!0,e}return(0,I.Z)(a,[{key:"loaded",get:function(){return this[Wee]()}},{key:t,get:function(){return tee.singleton}},{key:"modelIsVisible",get:function(){return this[Vee]()}},{key:"connectedCallback",value:function(){pl(R(a.prototype),"connectedCallback",this)&&pl(R(a.prototype),"connectedCallback",this).call(this),GQ?this[xee].observe(this):self.addEventListener("resize",this[yee]),qQ&&this[Tee].observe(this);var e=this[Bee];e.addEventListener("contextlost",this[kee]),e.registerScene(this[Lee]),null!=this[wee]&&(self.clearTimeout(this[wee]),this[wee]=null,this.requestUpdate("src",null))}},{key:"disconnectedCallback",value:function(){var e=this;pl(R(a.prototype),"disconnectedCallback",this)&&pl(R(a.prototype),"disconnectedCallback",this).call(this),GQ?this[xee].unobserve(this):self.removeEventListener("resize",this[yee]),qQ&&this[Tee].unobserve(this);var t=this[Bee];t.removeEventListener("contextlost",this[kee]),t.unregisterScene(this[Lee]),this[wee]=self.setTimeout((function(){e[Lee].reset()}),1e3)}},{key:"updated",value:function(e){if(pl(R(a.prototype),"updated",this).call(this,e),e.has("src")&&(null==this.src?(this[See]=!1,this[Iee]=0,this[Lee].reset()):this.src!==this[Lee].url&&(this[See]=!1,this[Iee]=0,this[Nee]())),e.has("alt")){var t=null==this.alt?this[bee]:this.alt;this[Oee].setAttribute("aria-label",t)}}},{key:"toDataURL",value:function(e,t){return this[Bee].displayCanvas(this[Lee]).toDataURL(e,t)}},{key:"toBlob",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i,o,s,u,l,c,d,h,p,f,m,v,g,y,b=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?t.mimeType:void 0,r=t?t.qualityArgument:void 0,a=t?t.idealAspect:void 0,i=this[Lee],o=i.width,s=i.height,u=i.fieldOfViewAspect,l=i.aspect,c=this[Bee],d=c.dpr,h=c.scaleFactor,p=o*h*d,f=s*h*d,m=0,v=0,!0===a&&(u>l?(g=f,f=Math.round(p/u),v=(g-f)/2):(y=p,p=Math.round(f*u),m=(y-p)/2)),gee.width=p,gee.height=f,e.prev=4,e.abrupt("return",new Promise(function(){var e=Jn(Kn().mark((function e(t,a){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gee.getContext("2d").drawImage(b[Bee].displayCanvas(b[Lee]),m,v,p,f,0,0,p,f),gee.msToBlob&&(!n||"image/png"===n)){e.next=14;break}if(!gee.toBlob){e.next=6;break}e.t1=void gee.toBlob((function(e){if(!e)return a(new Error("Unable to retrieve canvas blob"));t(e)}),n,r),e.next=11;break;case 6:return e.t2=t,e.next=9,function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.match(/data:(.*);/);if(!r)return n(new Error("".concat(t," is not a valid data Url")));for(var a=r[1],i=t.replace(/data:image\/\w+;base64,/,""),o=atob(i),s=[],u=0;u<o.length;u+=512){for(var l=o.slice(u,u+512),c=new Array(l.length),d=0;d<l.length;d++)c[d]=l.charCodeAt(d);var h=new Uint8Array(c);s.push(h)}e(new Blob(s,{type:a}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(gee.toDataURL(n,r));case 9:e.t3=e.sent,e.t1=(0,e.t2)(e.t3);case 11:e.t0=e.t1,e.next=15;break;case 14:e.t0=t(gee.msToBlob());case 15:return e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:return e.prev=6,this[Eee]({width:o,height:s}),e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[4,,6,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"registerRenderer",value:function(e){this[Lee].externalRenderer=e}},{key:"unregisterRenderer",value:function(){this[Lee].externalRenderer=null}},{key:Mee,get:function(){return null==this.alt||"null"===this.alt?this[bee]:this.alt}},{key:Wee,value:function(){return this[See]}},{key:Vee,value:function(){return this.loaded&&this[Cee]}},{key:Gee,value:function(){return this.modelIsVisible}},{key:Zee,value:function(){return!!this.src&&this[Cee]}},{key:Hee,value:function(){return this[See]}},{key:Eee,value:function(e){var t=e.width,n=e.height;this[Ree].style.width="".concat(t,"px"),this[Ree].style.height="".concat(n,"px"),this[zee]({width:parseFloat(t),height:parseFloat(n)})}},{key:Fee,value:function(e,t){}},{key:Aee,value:function(){this[See]||(this[See]=!0,this[Iee]=performance.now())}},{key:Pee,value:function(){this[Lee].queueRender()}},{key:jee,value:function(){}},{key:zee,value:function(e){this[Lee].setSize(e.width,e.height)}},{key:n,value:function(){var e=Jn(Kn().mark((function e(){var t,n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loaded&&this[Zee]()){e.next=2;break}return e.abrupt("return");case 2:return t=this[Uee].beginActivity(),n=this.src,e.prev=3,e.next=6,this[Lee].setSource(n,(function(e){return t(.8*e)}));case 6:r={url:n},this.dispatchEvent(new CustomEvent("preload",{detail:r})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.dispatchEvent(new CustomEvent("error",{detail:e.t0}));case 13:return e.prev=13,t(.9),requestAnimationFrame((function(){requestAnimationFrame((function(){t(1)}))})),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[3,10,13,16]])})));return function(){return e.apply(this,arguments)}}()}],[{key:"is",get:function(){return"model-viewer"}},{key:"modelCacheSize",get:function(){return c9[u9].evictionThreshold},set:function(e){c9[u9].evictionThreshold=e}},{key:"minimumRenderScale",get:function(){return tee.singleton.minScale},set:function(e){e>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),e<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),tee.singleton.minScale=e}}]),a}(FQ,(nee=Cee,ree=See,aee=Iee,iee=wee,oee=yee,see=_ee,uee=xee,lee=Tee,cee=Uee,Bee),(dee=kee,Nee));vee([jQ({type:String})],Xee.prototype,"alt",void 0),vee([jQ({type:String})],Xee.prototype,"src",void 0);var Yee=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},Kee=Symbol("changeAnimation"),Qee=Symbol("paused"),Jee=Symbol("hotspotMap"),$ee=Symbol("mutationCallback"),ete=Symbol("observer"),tte=Symbol("addHotspot"),nte=Symbol("removeHotspot"),rte=new s$,ate=new bJ,ite=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};try{URL.revokeObjectURL(ite(""))}catch(HK){ite=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var ote=Uint8Array,ste=Uint16Array,ute=Uint32Array,lte=new ote([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),cte=new ote([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dte=new ote([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hte=function(e,t){for(var n=new ste(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var a=new ute(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)a[i]=i-n[r]<<5|r;return[n,a]},pte=hte(lte,2),fte=pte[0],mte=pte[1];fte[28]=258,mte[258]=28;for(var vte=hte(cte,0)[1],gte=new ste(32768),yte=0;yte<32768;++yte){var bte=(43690&yte)>>>1|(21845&yte)<<1;bte=(61680&(bte=(52428&bte)>>>2|(13107&bte)<<2))>>>4|(3855&bte)<<4,gte[yte]=((65280&bte)>>>8|(255&bte)<<8)>>>1}var xte=function(e,t,n){for(var r=e.length,a=0,i=new ste(t);a<r;++a)++i[e[a]-1];var o,s=new ste(t);for(a=0;a<t;++a)s[a]=s[a-1]+i[a-1]<<1;if(n){o=new ste(1<<t);var u=15-t;for(a=0;a<r;++a)if(e[a])for(var l=a<<4|e[a],c=t-e[a],d=s[e[a]-1]++<<c,h=d|(1<<c)-1;d<=h;++d)o[gte[d]>>>u]=l}else for(o=new ste(r),a=0;a<r;++a)e[a]&&(o[a]=gte[s[e[a]-1]++]>>>15-e[a]);return o},wte=new ote(288);for(yte=0;yte<144;++yte)wte[yte]=8;for(yte=144;yte<256;++yte)wte[yte]=9;for(yte=256;yte<280;++yte)wte[yte]=7;for(yte=280;yte<288;++yte)wte[yte]=8;var kte=new ote(32);for(yte=0;yte<32;++yte)kte[yte]=5;var Ste=xte(wte,9,0),Ete=xte(kte,5,0),Tte=function(e){return(e/8|0)+(7&e&&1)},Cte=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof ste?ste:e instanceof ute?ute:ote)(n-t);return r.set(e.subarray(t,n)),r},_te=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},Mte=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},Ite=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,i=n.slice();if(!a)return[Pte,0];if(1==a){var o=new ote(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],u=n[1],l=0,c=1,d=2;for(n[0]={s:-1,f:s.f+u.f,l:s,r:u};c!=a-1;)s=n[n[l].f<n[d].f?l++:d++],u=n[l!=c&&n[l].f<n[d].f?l++:d++],n[c++]={s:-1,f:s.f+u.f,l:s,r:u};var h=i[0].s;for(r=1;r<a;++r)i[r].s>h&&(h=i[r].s);var p=new ste(h+1),f=Nte(n[c-1],p,0);if(f>t){r=0;var m=0,v=f-t,g=1<<v;for(i.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));r<a;++r){var y=i[r].s;if(!(p[y]>t))break;m+=g-(1<<f-p[y]),p[y]=t}for(m>>>=v;m>0;){var b=i[r].s;p[b]<t?m-=1<<t-p[b]++-1:++r}for(;r>=0&&m;--r){var x=i[r].s;p[x]==t&&(--p[x],++m)}f=t}return[new ote(p),f]},Nte=function e(t,n,r){return-1==t.s?Math.max(e(t.l,n,r+1),e(t.r,n,r+1)):n[t.s]=r},Ate=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new ste(++t),r=0,a=e[0],i=1,o=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==a&&s!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[s]}return[n.subarray(0,r),t]},Rte=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Ote=function(e,t,n){var r=n.length,a=Tte(t+2);e[a]=255&r,e[a+1]=r>>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var i=0;i<r;++i)e[a+i+4]=n[i];return 8*(a+4+r)},Dte=function(e,t,n,r,a,i,o,s,u,l,c){_te(t,c++,n),++a[256];for(var d=Ite(a,15),h=d[0],p=d[1],f=Ite(i,15),m=f[0],v=f[1],g=Ate(h),y=g[0],b=g[1],x=Ate(m),w=x[0],k=x[1],S=new ste(19),E=0;E<y.length;++E)S[31&y[E]]++;for(E=0;E<w.length;++E)S[31&w[E]]++;for(var T=Ite(S,7),C=T[0],_=T[1],M=19;M>4&&!C[dte[M-1]];--M);var I,N,A,R,O=l+5<<3,D=Rte(a,wte)+Rte(i,kte)+o,L=Rte(a,h)+Rte(i,m)+o+14+3*M+Rte(S,C)+(2*S[16]+3*S[17]+7*S[18]);if(O<=D&&O<=L)return Ote(t,c,e.subarray(u,u+l));if(_te(t,c,1+(L<D)),c+=2,L<D){I=xte(h,p,0),N=h,A=xte(m,v,0),R=m;var P=xte(C,_,0);for(_te(t,c,b-257),_te(t,c+5,k-1),_te(t,c+10,M-4),c+=14,E=0;E<M;++E)_te(t,c+3*E,C[dte[E]]);c+=3*M;for(var F=[y,w],j=0;j<2;++j){var z=F[j];for(E=0;E<z.length;++E){var B=31&z[E];_te(t,c,P[B]),c+=C[B],B>15&&(_te(t,c,z[E]>>>5&127),c+=z[E]>>>12)}}}else I=Ste,N=wte,A=Ete,R=kte;for(E=0;E<s;++E)if(r[E]>255){B=r[E]>>>18&31,Mte(t,c,I[B+257]),c+=N[B+257],B>7&&(_te(t,c,r[E]>>>23&31),c+=lte[B]);var U=31&r[E];Mte(t,c,A[U]),c+=R[U],U>3&&(Mte(t,c,r[E]>>>5&8191),c+=cte[U])}else Mte(t,c,I[r[E]]),c+=N[r[E]];return Mte(t,c,I[256]),c+N[256]},Lte=new ute([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Pte=new ote(0),Fte=function(){for(var e=new ute(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),jte=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=Fte[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},zte=function(e,t,n,r,a){return function(e,t,n,r,a,i){var o=e.length,s=new ote(r+o+5*(1+Math.ceil(o/7e3))+a),u=s.subarray(r,s.length-a),l=0;if(!t||o<8)for(var c=0;c<=o;c+=65535){var d=c+65535;d<o?l=Ote(u,l,e.subarray(c,d)):(u[c]=i,l=Ote(u,l,e.subarray(c,o)))}else{for(var h=Lte[t-1],p=h>>>13,f=8191&h,m=(1<<n)-1,v=new ste(32768),g=new ste(m+1),y=Math.ceil(n/3),b=2*y,x=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<b)&m},w=new ute(25e3),k=new ste(288),S=new ste(32),E=0,T=0,C=(c=0,0),_=0,M=0;c<o;++c){var I=x(c),N=32767&c,A=g[I];if(v[N]=A,g[I]=N,_<=c){var R=o-c;if((E>7e3||C>24576)&&R>423){l=Dte(e,u,0,w,k,S,T,C,M,c-M,l),C=E=T=0,M=c;for(var O=0;O<286;++O)k[O]=0;for(O=0;O<30;++O)S[O]=0}var D=2,L=0,P=f,F=N-A&32767;if(R>2&&I==x(c-F))for(var j=Math.min(p,R)-1,z=Math.min(32767,c),B=Math.min(258,R);F<=z&&--P&&N!=A;){if(e[c+D]==e[c+D-F]){for(var U=0;U<B&&e[c+U]==e[c+U-F];++U);if(U>D){if(D=U,L=F,U>j)break;var W=Math.min(F,U-2),V=0;for(O=0;O<W;++O){var Z=c-F+O+32768&32767,H=Z-v[Z]+32768&32767;H>V&&(V=H,A=Z)}}}F+=(N=A)-(A=v[N])+32768&32767}if(L){w[C++]=268435456|mte[D]<<18|vte[L];var G=31&mte[D],q=31&vte[L];T+=lte[G]+cte[q],++k[257+G],++S[q],_=c+D,++E}else w[C++]=e[c],++k[e[c]]}}l=Dte(e,u,i,w,k,S,T,C,M,c-M,l),!i&&7&l&&(l=Ote(u,l+1,Pte))}return Cte(s,0,r+Tte(l)+a)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!a)},Bte=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},Ute=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function Wte(e,t){return zte(e,t||{},0,0)}var Vte=function e(t,n,r,a){for(var i in t){var o=t[i],s=n+i;o instanceof ote?r[s]=[o,a]:Array.isArray(o)?r[s]=[o[0],Bte(a,o[1])]:e(o,s+"/",r,a)}},Zte="undefined"!=typeof TextEncoder&&new TextEncoder,Hte="undefined"!=typeof TextDecoder&&new TextDecoder;try{Hte.decode(Pte,{stream:!0})}catch(HK){}function Gte(e,t){if(t){for(var n=new ote(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(Zte)return Zte.encode(e);var a=e.length,i=new ote(e.length+(e.length>>1)),o=0,s=function(e){i[o++]=e};for(r=0;r<a;++r){if(o+5>i.length){var u=new ote(o+8+(a-r<<1));u.set(i),i=u}var l=e.charCodeAt(r);l<128||t?s(l):l<2048?(s(192|l>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++r))>>18),s(128|l>>12&63),s(128|l>>6&63),s(128|63&l)):(s(224|l>>12),s(128|l>>6&63),s(128|63&l))}return Cte(i,0,o)}var qte=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},Xte=function(e,t,n,r,a,i,o,s){var u=r.length,l=n.extra,c=s&&s.length,d=qte(l);Ute(e,t,null!=o?33639248:67324752),t+=4,null!=o&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(null==i&&8),e[t++]=a&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var h=new Date(null==n.mtime?Date.now():n.mtime),p=h.getFullYear()-1980;if(p<0||p>119)throw"date not in range 1980-2099";if(Ute(e,t,p<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>>1),t+=4,null!=i&&(Ute(e,t,n.crc),Ute(e,t+4,i),Ute(e,t+8,n.size)),Ute(e,t+12,u),Ute(e,t+14,d),t+=16,null!=o&&(Ute(e,t,c),Ute(e,t+6,n.attrs),Ute(e,t+10,o),t+=14),e.set(r,t),t+=u,d)for(var f in l){var m=l[f],v=m.length;Ute(e,t,+f),Ute(e,t+2,v),e.set(m,t+4),t+=4+v}return c&&(e.set(s,t),t+=c),t};function Yte(e,t){t||(t={});var n={},r=[];Vte(e,"",n,t);var a=0,i=0;for(var o in n){var s=n[o],u=s[0],l=s[1],c=0==l.level?0:8,d=(S=Gte(o)).length,h=l.comment,p=h&&Gte(h),f=p&&p.length,m=qte(l.extra);if(d>65535)throw"filename too long";var v=c?Wte(u,l):u,g=v.length,y=jte();y.p(u),r.push(Bte(l,{size:u.length,crc:y.d(),c:v,f:S,m:p,u:d!=o.length||p&&h.length!=f,o:a,compression:c})),a+=30+d+m+g,i+=76+2*(d+m)+(f||0)+g}for(var b=new ote(i+22),x=a,w=i-a,k=0;k<r.length;++k){var S=r[k];Xte(b,S.o,S,S.f,S.u,S.c.length);var E=30+S.f.length+qte(S.extra);b.set(S.c,S.o+E),Xte(b,a,S,S.f,S.u,S.c.length,S.o,S.m),a+=16+E+(S.m?S.m.length:0)}return function(e,t,n,r,a){Ute(e,t,101010256),Ute(e,t+8,n),Ute(e,t+10,n),Ute(e,t+12,r),Ute(e,t+16,a)}(b,a,r.length,w,x),b}var Kte=function(){function e(){M(this,e)}return(0,I.Z)(e,[{key:"parse",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i,o,s,u,l,c,d,h;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n={})["model.usda"]=null,r='#usda 1.0\n(\n    customLayerData = {\n        string creator = "Three.js USDZExporter"\n    }\n    metersPerUnit = 1\n    upAxis = "Y"\n)\n\n',a={},i={},t.traverseVisible((function(e){if(e.isMesh&&e.material.isMeshStandardMaterial){var t=e.geometry,i=e.material,o="geometries/Geometry_"+t.id+".usd";if(!(o in n)){var s=function(e){return'\ndef "Geometry"\n{\n  '.concat(function(e){var t=e.attributes,n=t.position.count;return'\n    def Mesh "'.concat("Geometry",'"\n    {\n        int[] faceVertexCounts = [').concat(function(e){var t=null!==e.index?e.index.array.length:e.attributes.position.count;return Array(t/3).fill(3).join(", ")}(e),"]\n        int[] faceVertexIndices = [").concat(function(e){if(null!==e.index)return e.index.array.join(", ");for(var t=[],n=e.attributes.position.count,r=0;r<n;r++)t.push(r);return t.join(", ")}(e),"]\n        normal3f[] normals = [").concat($te(t.normal,n),'] (\n            interpolation = "vertex"\n        )\n        point3f[] points = [').concat($te(t.position,n),"]\n        float2[] primvars:st = [").concat(function(e,t){if(void 0===e)return console.warn("USDZExporter: UVs missing."),Array(t).fill("(0, 0)").join(", ");for(var n=[],r=e.array,a=0;a<r.length;a+=2)n.push("(".concat(r[a+0].toPrecision(7),", ").concat(1-r[a+1].toPrecision(7),")"));return n.join(", ")}(t.uv,n),'] (\n            interpolation = "vertex"\n        )\n        uniform token subdivisionScheme = "none"\n    }\n')}(e),"\n}\n")}(t);n[o]=function(e){var t='#usda 1.0\n(\n    customLayerData = {\n        string creator = "Three.js USDZExporter"\n    }\n    metersPerUnit = 1\n    upAxis = "Y"\n)\n\n';return Gte(t+=e)}(s)}i.uuid in a||(a[i.uuid]=i),r+=function(e,t,n){var r="Object_"+e.id,a=function(e){var t=e.elements;return"( ".concat(Jte(t,0),", ").concat(Jte(t,4),", ").concat(Jte(t,8),", ").concat(Jte(t,12)," )")}(e.matrixWorld);return e.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",e),'def Xform "'.concat(r,'" (\n    prepend references = @./geometries/Geometry_').concat(t.id,".usd@</Geometry>\n)\n{\n    matrix4d xformOp:transform = ").concat(a,'\n    uniform token[] xformOpOrder = ["xformOp:transform"]\n\n    rel material:binding = </Materials/Material_').concat(n.id,">\n}\n\n")}(e,t,i)}})),r+=function(e,t){var n=[];for(var r in e){var a=e[r];n.push(ene(a,t))}return'def "Materials"\n{\n'.concat(n.join(""),"\n}\n\n")}(a,i),n["model.usda"]=Gte(r),r=null,o=Kn().mark((function e(){var t,r,a,o,u;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i[s],r=s.split("_")[1],a=1023===t.format,o=Qte(t.image,r),e.next=6,new Promise((function(e){return o.toBlob(e,a?"image/png":"image/jpeg",1)}));case 6:return u=e.sent,e.t0=Uint8Array,e.next=10,u.arrayBuffer();case 10:e.t1=e.sent,n["textures/Texture_".concat(s,".").concat(a?"png":"jpg")]=new e.t0(e.t1);case 12:case"end":return e.stop()}}),e)})),e.t0=Kn().keys(i);case 7:if((e.t1=e.t0()).done){e.next=12;break}return s=e.t1.value,e.delegateYield(o(),"t2",10);case 10:e.next=7;break;case 12:for(l in u=0,n)c=n[l],u+=34+l.length,4!==(d=63&u)&&(h=new Uint8Array(64-d),n[l]=[c,{extra:{12345:h}}]),u=c.length;return e.abrupt("return",Yte(n,{level:0}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Qte(e,t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var n=1024/Math.max(e.width,e.height),r=document.createElement("canvas");r.width=e.width*Math.min(1,n),r.height=e.height*Math.min(1,n);var a=r.getContext("2d");if(a.drawImage(e,0,0,r.width,r.height),void 0!==t){for(var i=parseInt(t,16),o=(i>>16&255)/255,s=(i>>8&255)/255,u=(255&i)/255,l=a.getImageData(0,0,r.width,r.height),c=l.data,d=0;d<c.length;d+=4)c[d+0]=c[d+0]*o,c[d+1]=c[d+1]*s,c[d+2]=c[d+2]*u;a.putImageData(l,0,0)}return r}}function Jte(e,t){return"(".concat(e[t+0],", ").concat(e[t+1],", ").concat(e[t+2],", ").concat(e[t+3],")")}function $te(e,t){if(void 0===e)return console.warn("USDZExporter: Normals missing."),Array(t).fill("(0, 0, 0)").join(", ");for(var n=[],r=e.array,a=0;a<r.length;a+=3)n.push("(".concat(r[a+0].toPrecision(7),", ").concat(r[a+1].toPrecision(7),", ").concat(r[a+2].toPrecision(7),")"));return n.join(", ")}function ene(e,t){var n="            ",r=[],a=[];function i(n,r,a){var i=n.id+(a?"_"+a.getHexString():""),o=1023===n.format;return t[i]=n,'\n        def Shader "Transform2d_'.concat(r,'" (\n            sdrMetadata = {\n                string role = "math"\n            }\n        )\n        {\n            uniform token info:id = "UsdTransform2d"\n            float2 inputs:in.connect = </Materials/Material_').concat(e.id,"/uvReader_st.outputs:result>\n            float2 inputs:scale = ").concat(nne(n.repeat),"\n            float2 inputs:translation = ").concat(nne(n.offset),'\n            float2 outputs:result\n        }\n\n        def Shader "Texture_').concat(n.id,"_").concat(r,'"\n        {\n            uniform token info:id = "UsdUVTexture"\n            asset inputs:file = @textures/Texture_').concat(i,".").concat(o?"png":"jpg","@\n            float2 inputs:st.connect = </Materials/Material_").concat(e.id,"/Transform2d_").concat(r,'.outputs:result>\n            token inputs:wrapS = "repeat"\n            token inputs:wrapT = "repeat"\n            float outputs:r\n            float outputs:g\n            float outputs:b\n            float3 outputs:rgb\n        }')}return null!==e.map?(r.push("".concat(n,"color3f inputs:diffuseColor.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.map.id,"_diffuse.outputs:rgb>")),a.push(i(e.map,"diffuse",e.color))):r.push("".concat(n,"color3f inputs:diffuseColor = ").concat(tne(e.color))),null!==e.emissiveMap?(r.push("".concat(n,"color3f inputs:emissiveColor.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.emissiveMap.id,"_emissive.outputs:rgb>")),a.push(i(e.emissiveMap,"emissive"))):e.emissive.getHex()>0&&r.push("".concat(n,"color3f inputs:emissiveColor = ").concat(tne(e.emissive))),null!==e.normalMap&&(r.push("".concat(n,"normal3f inputs:normal.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.normalMap.id,"_normal.outputs:rgb>")),a.push(i(e.normalMap,"normal"))),null!==e.aoMap&&(r.push("".concat(n,"float inputs:occlusion.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.aoMap.id,"_occlusion.outputs:r>")),a.push(i(e.aoMap,"occlusion"))),null!==e.roughnessMap&&1===e.roughness?(r.push("".concat(n,"float inputs:roughness.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.roughnessMap.id,"_roughness.outputs:g>")),a.push(i(e.roughnessMap,"roughness"))):r.push("".concat(n,"float inputs:roughness = ").concat(e.roughness)),null!==e.metalnessMap&&1===e.metalness?(r.push("".concat(n,"float inputs:metallic.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.metalnessMap.id,"_metallic.outputs:b>")),a.push(i(e.metalnessMap,"metallic"))):r.push("".concat(n,"float inputs:metallic = ").concat(e.metalness)),null!==e.alphaMap?(r.push("".concat(n,"float inputs:opacity.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.alphaMap.id,"_opacity.outputs:r>")),r.push("".concat(n,"float inputs:opacityThreshold = 0.0001")),a.push(i(e.alphaMap,"opacity"))):r.push("".concat(n,"float inputs:opacity = ").concat(e.opacity)),e.isMeshPhysicalMaterial&&(r.push("".concat(n,"float inputs:clearcoat = ").concat(e.clearcoat)),r.push("".concat(n,"float inputs:clearcoatRoughness = ").concat(e.clearcoatRoughness)),r.push("".concat(n,"float inputs:ior = ").concat(e.ior))),'\n    def Material "Material_'.concat(e.id,'"\n    {\n        def Shader "PreviewSurface"\n        {\n            uniform token info:id = "UsdPreviewSurface"\n').concat(r.join("\n"),"\n            int inputs:useSpecularWorkflow = 0\n            token outputs:surface\n        }\n\n        token outputs:surface.connect = </Materials/Material_").concat(e.id,'/PreviewSurface.outputs:surface>\n        token inputs:frame:stPrimvarName = "st"\n\n        def Shader "uvReader_st"\n        {\n            uniform token info:id = "UsdPrimvarReader_float2"\n            token inputs:varname.connect = </Materials/Material_').concat(e.id,".inputs:frame:stPrimvarName>\n            float2 inputs:fallback = (0.0, 0.0)\n            float2 outputs:result\n        }\n\n").concat(a.join("\n"),"\n\n    }\n")}function tne(e){return"(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")}function nne(e){return"(".concat(e.x,", ").concat(e.y,")")}var rne,ane,ine,one,sne=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},une=!1,lne=!1,cne=(rne=["quick-look","scene-viewer","webxr","none"],function(e){try{var t,n=M9(e),r=(n.length?n[0].terms:[]).filter((function(e){return e&&"ident"===e.type})).map((function(e){return e.value})).filter((function(e){return rne.indexOf(e)>-1})),a=new Set,i=G(r);try{for(i.s();!(t=i.n()).done;){var o=t.value;a.add(o)}}catch(sde){i.e(sde)}finally{i.f()}return a}catch(e){}return new Set}),dne="quick-look",hne="scene-viewer",pne="webxr",fne="none",mne=Symbol("arButtonContainer"),vne=Symbol("enterARWithWebXR"),gne=Symbol("openSceneViewer"),yne=Symbol("openIOSARQuickLook"),bne=Symbol("canActivateAR"),xne=Symbol("arMode"),wne=Symbol("arModes"),kne=Symbol("arAnchor"),Sne=Symbol("preload"),Ene=Symbol("onARButtonContainerClick"),Tne=Symbol("onARStatus"),Cne=Symbol("onARTracking"),_ne=Symbol("onARTap"),Mne=Symbol("selectARMode"),Ine=Symbol("triggerLoad"),Nne=Symbol("evaluate"),Ane=Symbol("lastValue"),Rne=function(){function e(){M(this,e),this[ane]=null}return(0,I.Z)(e,[{key:"isConstant",get:function(){return!1}},{key:"evaluate",value:function(){return this.isConstant&&null!=this[Ane]||(this[Ane]=this[Nne]()),this[Ane]}}],[{key:"evaluatableFor",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P9;if(t instanceof e)return t;if("number"===t.type)return"%"===t.unit?new zne(t,n):t;switch(t.name.value){case"calc":return new Zne(t,n);case"env":return new Une(t)}return P9}},{key:"evaluate",value:function(t){return t instanceof e?t.evaluate():t}},{key:"isConstant",value:function(t){return!(t instanceof e)||t.isConstant}},{key:"applyIntrinsics",value:function(e,t){var n=t.basis,r=t.keywords,a=r.auto;return n.map((function(t,n){var i=null==a[n]?t:a[n],o=e[n]?e[n]:i;if("ident"===o.type){var s=o.value;s in r&&(o=r[s][n])}return null!=o&&"ident"!==o.type||(o=i),"%"===o.unit?_9(o.number/100*t.number,t.unit):(o=z9(o,t)).unit!==t.unit?t:o}))}}]),e}();ane=Ane;var One,Dne,Lne,Pne,Fne=Symbol("percentage"),jne=Symbol("basis"),zne=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this))[Fne]=e,a[jne]=r,a}return(0,I.Z)(n,[{key:"isConstant",get:function(){return!0}},{key:Nne,value:function(){return _9(this[Fne].number/100*this[jne].number,this[jne].unit)}}]),n}(Rne),Bne=Symbol("identNode"),Une=function(e,t){A(r,e);var n=F(r);function r(e){var t;M(this,r),(t=n.call(this))[ine]=null;var a=e.arguments.length?e.arguments[0].terms[0]:null;return null!=a&&"ident"===a.type&&(t[Bne]=a),t}return(0,I.Z)(r,[{key:"isConstant",get:function(){return!1}},{key:t,value:function(){return null!=this[Bne]&&"window-scroll-y"===this[Bne].value?{type:"number",number:window.pageYOffset/(Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight)||0,unit:null}:P9}}]),r}(Rne,(ine=Bne,Nne)),Wne=/[\*\/]/,Vne=Symbol("evalutor"),Zne=function(e,t){A(r,e);var n=F(r);function r(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P9;if(M(this,r),(t=n.call(this))[one]=null,1!==e.arguments.length)return P(t);for(var i=e.arguments[0].terms.slice(),o=[];i.length;){var s=i.shift();if(o.length>0){var u=o[o.length-1];if("operator"===u.type&&Wne.test(u.value)){var l=o.pop(),c=o.pop();if(null==c)return P(t);o.push(new Xne(l,Rne.evaluatableFor(c,a),Rne.evaluatableFor(s,a)));continue}}o.push("operator"===s.type?s:Rne.evaluatableFor(s,a))}for(;o.length>2;){var d=o.splice(0,3),h=(0,U.Z)(d,3),p=h[0],f=h[1],m=h[2];if("operator"!==f.type)return P(t);o.unshift(new Xne(f,Rne.evaluatableFor(p,a),Rne.evaluatableFor(m,a)))}return 1===o.length&&(t[Vne]=o[0]),P(t)}return(0,I.Z)(r,[{key:"isConstant",get:function(){return null==this[Vne]||Rne.isConstant(this[Vne])}},{key:t,value:function(){return null!=this[Vne]?Rne.evaluate(this[Vne]):P9}}]),r}(Rne,(one=Vne,Nne)),Hne=Symbol("operator"),Gne=Symbol("left"),qne=Symbol("right"),Xne=function(e){A(n,e);var t=F(n);function n(e,r,a){var i;return M(this,n),(i=t.call(this))[Hne]=e,i[Gne]=r,i[qne]=a,i}return(0,I.Z)(n,[{key:"isConstant",get:function(){return Rne.isConstant(this[Gne])&&Rne.isConstant(this[qne])}},{key:Nne,value:function(){var e=z9(Rne.evaluate(this[Gne])),t=z9(Rne.evaluate(this[qne])),n=e.number,r=e.unit,a=t.number,i=t.unit;if(null!=i&&null!=r&&i!=r)return P9;var o,s=r||i;switch(this[Hne].value){case"+":o=n+a;break;case"-":o=n-a;break;case"/":o=n/a;break;case"*":o=n*a;break;default:return P9}return{type:"number",number:o,unit:s}}}]),n}(Rne),Yne=Symbol("evaluatables"),Kne=Symbol("intrinsics"),Qne=function(e){A(n,e);var t=F(n);function n(e,r){var a;M(this,n),(a=t.call(this))[Kne]=r;var i=e[0],o=null!=i?i.terms:[];return a[Yne]=r.basis.map((function(e,t){var n=o[t];return null==n?{type:"ident",value:"auto"}:"ident"===n.type?n:Rne.evaluatableFor(n,e)})),a}return(0,I.Z)(n,[{key:"isConstant",get:function(){var e,t=G(this[Yne]);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!Rne.isConstant(n))return!1}}catch(sde){t.e(sde)}finally{t.f()}return!0}},{key:Nne,value:function(){var e=this[Yne].map((function(e){return Rne.evaluate(e)}));return Rne.applyIntrinsics(e,this[Kne]).map((function(e){return e.number}))}}]),n}(Rne),Jne=Symbol("instances"),$ne=Symbol("activateListener"),ere=Symbol("deactivateListener"),tre=Symbol("notifyInstances"),nre=Symbol("notify"),rre=Symbol("callback"),are=function(e){function t(e){M(this,t),this[rre]=e}return(0,I.Z)(t,[{key:"observe",value:function(){0===t[Jne].size&&t[$ne](),t[Jne].add(this)}},{key:"disconnect",value:function(){t[Jne].delete(this),0===t[Jne].size&&t[ere]()}},{key:nre,value:function(){this[rre]()}}],[{key:tre,value:function(){var e,n=G(t[Jne]);try{for(n.s();!(e=n.n()).done;){e.value[nre]()}}catch(sde){n.e(sde)}finally{n.f()}}},{key:e,value:function(){window.addEventListener("scroll",this[tre],{passive:!0})}},{key:ere,value:function(){window.removeEventListener("scroll",this[tre])}}]),t}((One=Jne,$ne));are[One]=new Set;var ire=Symbol("computeStyleCallback"),ore=Symbol("astWalker"),sre=Symbol("dependencies"),ure=Symbol("onScroll"),lre=function(){function e(t){var n=this;M(this,e),this[Dne]={},this[Lne]=new L9(["function"]),this[Pne]=function(){n[ire]({relatedState:"window-scroll"})},this[ire]=t}return(0,I.Z)(e,[{key:"observeEffectsFor",value:function(e){var t=this,n={},r=this[sre];for(var a in this[ore].walk(e,(function(e){var a=e.name,i=e.arguments[0].terms[0];if("env"===a.value&&null!=i&&"ident"===i.type&&"window-scroll-y"===i.value&&null==n["window-scroll"]){var o="window-scroll"in r?r["window-scroll"]:new are(t[ure]);o.observe(),delete r["window-scroll"],n["window-scroll"]=o}})),r)r[a].disconnect();this[sre]=n}},{key:"dispose",value:function(){for(var e in this[sre])this[sre][e].disconnect()}}]),e}();Dne=sre,Lne=ore,Pne=ure;var cre,dre,hre=function(e){var t=e.observeEffects||!1,n=e.intrinsics instanceof Function?e.intrinsics:function(){return e.intrinsics};return function(r,a){var i,o=r.updated,s=r.connectedCallback,u=r.disconnectedCallback,l=Symbol("".concat(a,"StyleEffector")),c=Symbol("".concat(a,"StyleEvaluator")),d=Symbol("".concat(a,"UpdateEvaluator")),h=Symbol("".concat(a,"EvaluateAndSync"));Object.defineProperties(r,(i={},(0,Pt.Z)(i,l,{value:null,writable:!0}),(0,Pt.Z)(i,c,{value:null,writable:!0}),(0,Pt.Z)(i,d,{value:function(){var e=this,r=M9(this[a]);this[c]=new Qne(r,n(this)),null==this[l]&&t&&(this[l]=new lre((function(){return e[h]()}))),null!=this[l]&&this[l].observeEffectsFor(r)}}),(0,Pt.Z)(i,h,{value:function(){if(null!=this[c]){var t=this[c].evaluate();this[e.updateHandler](t)}}}),(0,Pt.Z)(i,"updated",{value:function(e){e.has(a)&&(this[d](),this[h]()),o.call(this,e)}}),(0,Pt.Z)(i,"connectedCallback",{value:function(){s.call(this),this.requestUpdate(a,this[a])}}),(0,Pt.Z)(i,"disconnectedCallback",{value:function(){u.call(this),null!=this[l]&&(this[l].dispose(),this[l]=null)}}),i))}},pre=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,interactionPolicy:"always-allow",touchAction:"pan-y"}),fre=Math.PI/8,mre="user-interaction",vre=function(e){A(n,e);var t=F(n);function n(e,r){var a;return M(this,n),(a=t.call(this)).camera=e,a.element=r,a.sensitivity=1,a._interactionEnabled=!1,a._disableZoom=!1,a.isUserChange=!1,a.isUserPointing=!1,a.spherical=new B6,a.goalSpherical=new B6,a.thetaDamper=new C9,a.phiDamper=new C9,a.radiusDamper=new C9,a.logFov=Math.log(pre.maximumFieldOfView),a.goalLogFov=a.logFov,a.fovDamper=new C9,a.touchMode=null,a.lastPointerPosition={clientX:0,clientY:0},a.touchDecided=!1,a.onMouseMove=function(e){a.handleSinglePointerMove(e),e.cancelable&&e.preventDefault()},a.onTouchMove=function(e){null!==a.touchMode&&(a.touchMode(e),null!==a.touchMode&&e.cancelable&&e.preventDefault())},a.touchModeZoom=function(e){var t=e.targetTouches;if(a.lastTouches.length>1&&t.length>1){var n=.04*(a.twoTouchDistance(a.lastTouches[0],a.lastTouches[1])-a.twoTouchDistance(t[0],t[1]))/10;a.userAdjustOrbit(0,0,n),a.lastTouches=t}},a.touchModeRotate=function(e){var t=e.targetTouches,n=a._options.touchAction;if(!a.touchDecided&&"none"!==n){a.touchDecided=!0;var r=t[0],i=r.clientX,o=r.clientY,s=Math.abs(i-a.lastPointerPosition.clientX),u=Math.abs(o-a.lastPointerPosition.clientY);if("pan-y"===n&&u>s||"pan-x"===n&&s>u)return void(a.touchMode=null)}a.handleSinglePointerMove(t[0]),a.lastTouches=t},a.onMouseDown=function(e){a.onPointerDown((function(){self.addEventListener("mousemove",a.onMouseMove),self.addEventListener("mouseup",a.onMouseUp,{once:!0}),a.handleSinglePointerDown(e)}))},a.onTouchStart=function(e){a.onPointerDown((function(){var t=e.targetTouches,n=e.changedTouches,r=e.touches;t.length===n.length&&(a.touchMode=null,a.touchDecided=!1),t.length===r.length&&a.onTouchChange(e)}))},a.onMouseUp=function(e){self.removeEventListener("mousemove",a.onMouseMove),a.onPointerUp()},a.onTouchEnd=function(e){e.targetTouches.length>0&&null!==a.touchMode&&a.onTouchChange(e),a.onPointerUp()},a.onWheel=function(e){if(a.canInteract){var t=e.deltaY*(1==e.deltaMode?18:1)*.04/30;a.userAdjustOrbit(0,0,t),e.cancelable&&e.preventDefault()}},a.onKeyDown=function(e){var t=!1;switch(e.keyCode){case 33:t=!0,a.userAdjustOrbit(0,0,.04);break;case 34:t=!0,a.userAdjustOrbit(0,0,-.04);break;case 38:t=!0,a.userAdjustOrbit(0,-fre,0);break;case 40:t=!0,a.userAdjustOrbit(0,fre,0);break;case 37:t=!0,a.userAdjustOrbit(-fre,0,0);break;case 39:t=!0,a.userAdjustOrbit(fre,0,0)}t&&e.cancelable&&e.preventDefault()},a._options=Object.assign({},pre),a.setOrbit(0,Math.PI/2,1),a.setFieldOfView(100),a.jumpToGoal(),a}return(0,I.Z)(n,[{key:"interactionEnabled",get:function(){return this._interactionEnabled}},{key:"enableInteraction",value:function(){if(!1===this._interactionEnabled){var e=this.element;e.addEventListener("mousedown",this.onMouseDown),this._disableZoom||e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("touchstart",this.onTouchStart,{passive:!0}),e.addEventListener("touchmove",this.onTouchMove,{passive:!1}),e.addEventListener("touchend",this.onTouchEnd),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}},{key:"disableInteraction",value:function(){if(!0===this._interactionEnabled){var e=this.element;self.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),this._disableZoom||e.removeEventListener("wheel",this.onWheel),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchmove",this.onTouchMove),self.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("touchend",this.onTouchEnd),e.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}},{key:"options",get:function(){return this._options}},{key:"disableZoom",set:function(e){this._disableZoom!=e&&(this._disableZoom=e,!0===e?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}},{key:"getCameraSpherical",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new B6).copy(this.spherical)}},{key:"getFieldOfView",value:function(){return this.camera.fov}},{key:"applyOptions",value:function(e){Object.assign(this._options,e),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}},{key:"updateNearFar",value:function(e,t){this.camera.near=Math.max(e,t/1e3),this.camera.far=t,this.camera.updateProjectionMatrix()}},{key:"updateAspect",value:function(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}},{key:"setOrbit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.goalSpherical.theta,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.goalSpherical.phi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.goalSpherical.radius,r=this._options,a=r.minimumAzimuthalAngle,i=r.maximumAzimuthalAngle,o=r.minimumPolarAngle,s=r.maximumPolarAngle,u=r.minimumRadius,l=r.maximumRadius,c=this.goalSpherical,d=c.theta,h=c.phi,p=c.radius,f=k9(e,a,i);isFinite(a)||isFinite(i)||(this.spherical.theta=this.wrapAngle(this.spherical.theta-f)+f);var m=k9(t,o,s),v=k9(n,u,l);return(f!==d||m!==h||v!==p)&&(this.goalSpherical.theta=f,this.goalSpherical.phi=m,this.goalSpherical.radius=v,this.goalSpherical.makeSafe(),this.isUserChange=!1,!0)}},{key:"setRadius",value:function(e){this.goalSpherical.radius=e,this.setOrbit()}},{key:"setFieldOfView",value:function(e){var t=this._options,n=t.minimumFieldOfView,r=t.maximumFieldOfView;e=k9(e,n,r),this.goalLogFov=Math.log(e)}},{key:"setDamperDecayTime",value:function(e){this.thetaDamper.setDecayTime(e),this.phiDamper.setDecayTime(e),this.radiusDamper.setDecayTime(e),this.fovDamper.setDecayTime(e)}},{key:"adjustOrbit",value:function(e,t,n){var r=this.goalSpherical,a=r.theta,i=r.phi,o=r.radius,s=this._options,u=s.minimumRadius,l=s.maximumRadius,c=s.minimumFieldOfView,d=s.maximumFieldOfView,h=this.spherical.theta-a,p=Math.PI-.001,f=a-k9(e,-p-h,p-h),m=i-t,v=0===n?0:((n>0?l:u)-o)/(Math.log(n>0?d:c)-this.goalLogFov),g=o+n*Math.min(isFinite(v)?v:1/0,l-u);if(this.setOrbit(f,m,g),0!==n){var y=this.goalLogFov+n;this.setFieldOfView(Math.exp(y))}}},{key:"jumpToGoal",value:function(){this.update(0,1e4)}},{key:"update",value:function(e,t){if(!this.isStationary()){var n=this._options,r=n.maximumPolarAngle,a=n.maximumRadius,i=this.spherical.theta-this.goalSpherical.theta;Math.abs(i)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=2*Math.sign(i)*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,t,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,t,r),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,t,a),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,t,1),this.moveCamera()}}},{key:"updateTouchActionStyle",value:function(){var e=this.element.style;if(this._interactionEnabled){var t=this._options.touchAction;this._disableZoom&&"none"!==t?e.touchAction="manipulation":e.touchAction=t}else e.touchAction=""}},{key:"isStationary",value:function(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}},{key:"moveCamera",value:function(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new g$(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix());var e=this.isUserChange?mre:"none";this.dispatchEvent({type:"change",source:e})}},{key:"canInteract",get:function(){return"allow-when-focused"==this._options.interactionPolicy?this.element.getRootNode().activeElement===this.element:"always-allow"===this._options.interactionPolicy}},{key:"userAdjustOrbit",value:function(e,t,n){this.adjustOrbit(e*this.sensitivity,t*this.sensitivity,n),this.isUserChange=!0,this.dispatchEvent({type:"change",source:mre})}},{key:"wrapAngle",value:function(e){var t=(e+Math.PI)/(2*Math.PI);return 2*(t-Math.floor(t))*Math.PI-Math.PI}},{key:"pixelLengthToSphericalAngle",value:function(e){return 2*Math.PI*e/this.element.clientHeight}},{key:"twoTouchDistance",value:function(e,t){var n=e.clientX,r=e.clientY,a=t.clientX-n,i=t.clientY-r;return Math.sqrt(a*a+i*i)}},{key:"handleSinglePointerMove",value:function(e){var t=e.clientX,n=e.clientY,r=this.pixelLengthToSphericalAngle(t-this.lastPointerPosition.clientX),a=this.pixelLengthToSphericalAngle(n-this.lastPointerPosition.clientY);this.lastPointerPosition.clientX=t,this.lastPointerPosition.clientY=n,!1===this.isUserPointing&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start",pointer:Object.assign({},e)})),this.userAdjustOrbit(r,a,0)}},{key:"onPointerDown",value:function(e){this.canInteract&&(this.isUserPointing=!1,e())}},{key:"onTouchChange",value:function(e){var t=e.targetTouches;2===t.length?(this.touchMode=this._disableZoom||this.touchDecided&&null===this.touchMode?null:this.touchModeZoom,this.touchDecided=!0):(this.touchMode=this.touchModeRotate,this.handleSinglePointerDown(t[0])),this.lastTouches=t}},{key:"handleSinglePointerDown",value:function(e){this.lastPointerPosition.clientX=e.clientX,this.lastPointerPosition.clientY=e.clientY,this.element.style.cursor="grabbing"}},{key:"onPointerUp",value:function(){this.element.style.cursor="grab",this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end",pointer:Object.assign({},this.lastPointerPosition)})}}]),n}(nJ),gre=function(e){return e<.5?2*e*e:(4-2*e)*e-1},yre=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gre;return function(r){return e+(t-e)*n(r)}},bre=function(e,t){for(var n=[],r=[],a=e,i=0;i<t.length;++i){var o=t[i],s=o.value,u=o.frames,l=o.ease||gre,c=yre(a,s,l);n.push(c),r.push(u),a=s}return function(e,t){var n=t.reduce((function(e,t){return e+t}),0),r=t.map((function(e){return e/n}));return function(t){for(var n=0,a=1/0,i=function(){return 0},o=0;o<r.length&&(a=r[o],i=e[o],!(t<=n+a));++o)n+=a;return i((t-n)/a)}}(n,r)},xre=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},wre=bre(0,[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]),kre=bre(0,[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]),Sre=1.1*Z9,Ere=["front","right","back","left"],Tre=["upper-","","lower-"],Cre="auto",_re="when-focused",Mre="wiggle",Ire=function(e){return{basis:[_9(e[tae]*Math.PI/180,"rad")],keywords:{auto:[null]}}},Nre={basis:[F9(_9(25,"deg"))],keywords:{auto:[null]}},Are=function(e){var t=e[Lee];return{basis:[F9(_9(45,"deg"))],keywords:{auto:[_9(t.framedFieldOfView,"deg")]}}},Rre=function(){var e=M9("0deg 75deg 105%")[0].terms,t=z9(e[0]),n=z9(e[1]);return function(e){var r=e[Lee].idealCameraDistance;return{basis:[t,n,_9(r,"m")],keywords:{auto:[null,null,_9(105,"%")]}}}}(),Ore=function(e){var t=Sre*e[Lee].idealCameraDistance;return{basis:[_9(-1/0,"rad"),_9(Math.PI/8,"rad"),_9(t,"m")],keywords:{auto:[null,null,null]}}},Dre=function(e){var t=Rre(e),n=new Qne([],t).evaluate()[2];return{basis:[_9(1/0,"rad"),_9(Math.PI-Math.PI/8,"rad"),_9(n,"m")],keywords:{auto:[null,null,null]}}},Lre=function(e){var t=e[Lee].boundingBox.getCenter(new NJ);return{basis:[_9(t.x,"m"),_9(t.y,"m"),_9(t.z,"m")],keywords:{auto:[null,null,null]}}},Pre=Math.PI/2,Fre=Math.PI/3,jre=Pre/2,zre=2*Math.PI,Bre=Symbol("controls"),Ure=Symbol("promptElement"),Wre=Symbol("promptAnimatedContainer"),Vre=Symbol("deferInteractionPrompt"),Zre=Symbol("updateAria"),Hre=Symbol("updateCameraForRadius"),Gre=Symbol("onBlur"),qre=Symbol("onFocus"),Xre=Symbol("onChange"),Yre=Symbol("onPointerChange"),Kre=Symbol("waitingToPromptUser"),Qre=Symbol("userHasInteracted"),Jre=Symbol("promptElementVisibleTime"),$re=Symbol("lastPromptOffset"),eae=Symbol("focusedTime"),tae=Symbol("zoomAdjustedFieldOfView"),nae=Symbol("lastSpherical"),rae=Symbol("jumpCamera"),aae=Symbol("initialized"),iae=Symbol("maintainThetaPhi"),oae=Symbol("syncCameraOrbit"),sae=Symbol("syncFieldOfView"),uae=Symbol("syncCameraTarget"),lae=Symbol("syncMinCameraOrbit"),cae=Symbol("syncMaxCameraOrbit"),dae=Symbol("syncMinFieldOfView"),hae=Symbol("syncMaxFieldOfView"),pae=Symbol("modelViewerStatusInstance"),fae=Symbol("updateStatus");cre=pae,dre=fae;var mae=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},vae="auto",gae="manual",yae=new(function(e){A(n,e);var t=F(n);function n(){var e;M(this,n),(e=t.call(this))[cre]=null,e.registeredInstanceStatuses=new Map,e.loadingPromises=[],e.statusElement=document.createElement("p"),e.statusUpdateInProgress=!1,e[dre]=w9((function(){return e.updateStatus()}),100);var r=(0,L.Z)(e).statusElement,a=r.style;return r.setAttribute("role","status"),r.classList.add("screen-reader-only"),a.top=a.left="0",a.pointerEvents="none",e}return(0,I.Z)(n,[{key:"registerInstance",value:function(e){if(!this.registeredInstanceStatuses.has(e)){var t=function(){},n=!1===e.loaded&&!!e.src,r=new Promise((function(r){if(n){var a=function t(){r(),e.removeEventListener("load",t),e.removeEventListener("error",t)};e.addEventListener("load",a),e.addEventListener("error",a),t=a}else r()}));this.registeredInstanceStatuses.set(e,{onUnregistered:t}),this.loadingPromises.push(r),null==this.modelViewerStatusInstance&&(this.modelViewerStatusInstance=e)}}},{key:"unregisterInstance",value:function(e){if(this.registeredInstanceStatuses.has(e)){var t=this.registeredInstanceStatuses,n=t.get(e);t.delete(e),n.onUnregistered(),this.modelViewerStatusInstance===e&&(this.modelViewerStatusInstance=t.size>0?function(e){if(null!=e.keys)return e.keys().next().value||null;var t=null;try{e.forEach((function(e,n,r){throw t=n,new Error}))}catch(e){}return t}(t):null)}}},{key:"modelViewerStatusInstance",get:function(){return this[pae]},set:function(e){if(this[pae]!==e){var t=this.statusElement;null!=e&&null!=e.shadowRoot?e.shadowRoot.appendChild(t):null!=t.parentNode&&t.parentNode.removeChild(t),this[pae]=e,this[fae]()}}},{key:"updateStatus",value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.statusUpdateInProgress||0===this.loadingPromises.length){e.next=10;break}this.statusElement.textContent="This page includes one or more 3D models that are loading",this.statusUpdateInProgress=!0,this.dispatchEvent({type:"initial-status-announced"});case 2:if(!this.loadingPromises.length){e.next=9;break}return t=this.loadingPromises,this.loadingPromises=[],e.next=7,Promise.all(t);case 7:e.next=2;break;case 9:this.statusElement.textContent="All 3D models in the page have loaded",this.statusUpdateInProgress=!1,this.dispatchEvent({type:"finished-loading-announced"});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(nJ)),bae=Symbol("defaultProgressBarElement"),xae=Symbol("defaultProgressMaskElement"),wae=Symbol("posterContainerElement"),kae=Symbol("defaultPosterElement"),Sae=Symbol("posterDismissalSource"),Eae=Symbol("hidePoster"),Tae=Symbol("modelIsRevealed"),Cae=Symbol("updateProgressBar"),_ae=Symbol("lastReportedProgress"),Mae=Symbol("transitioned"),Iae=Symbol("onTransitionEnd"),Nae=Symbol("ariaLabelCallToAction"),Aae=Symbol("onClick"),Rae=Symbol("onKeydown"),Oae=Symbol("onProgress"),Dae=function(){function e(){M(this,e),this.pluginCallbacks=[],this.register((function(e){return new Zae(e)})),this.register((function(e){return new Hae(e)})),this.register((function(e){return new Gae(e)})),this.register((function(e){return new qae(e)})),this.register((function(e){return new Xae(e)}))}return(0,I.Z)(e,[{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n){for(var r=new Vae,a=[],i=0,o=this.pluginCallbacks.length;i<o;i++)a.push(this.pluginCallbacks[i](r));r.setPlugins(a),r.write(e,t,n)}}]),e}(),Lae=5121,Pae=5123,Fae={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987,1001:33071,1e3:10497,1002:33648},jae={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"};function zae(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}function Bae(e){return 4*Math.ceil(e/4)}function Uae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Bae(e.byteLength);if(n!==e.byteLength){var r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==t)for(var a=e.byteLength;a<n;a++)r[a]=t;return r.buffer}return e}var Wae=null,Vae=function(){function e(){M(this,e),this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}return(0,I.Z)(e,[{key:"setPlugins",value:function(e){this.plugins=e}},{key:"write",value:function(e,t,n){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e);var r=this;Promise.all(this.pending).then((function(){var e=r.buffers,n=r.json,a=r.options,i=r.extensionsUsed,o=new Blob(e,{type:"application/octet-stream"}),s=Object.keys(i);if(s.length>0&&(n.extensionsUsed=s),n.buffers&&n.buffers.length>0&&(n.buffers[0].byteLength=o.size),!0===a.binary){var u=new window.FileReader;u.readAsArrayBuffer(o),u.onloadend=function(){var e=Uae(u.result),r=new DataView(new ArrayBuffer(8));r.setUint32(0,e.byteLength,!0),r.setUint32(4,5130562,!0);var a=Uae(function(e){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(e).buffer;for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0,r=e.length;n<r;n++){var a=e.charCodeAt(n);t[n]=a>255?32:a}return t.buffer}(JSON.stringify(n)),32),i=new DataView(new ArrayBuffer(8));i.setUint32(0,a.byteLength,!0),i.setUint32(4,1313821514,!0);var o=new ArrayBuffer(12),s=new DataView(o);s.setUint32(0,1179937895,!0),s.setUint32(4,2,!0);var l=12+i.byteLength+a.byteLength+r.byteLength+e.byteLength;s.setUint32(8,l,!0);var c=new Blob([o,i,a,r,e],{type:"application/octet-stream"}),d=new window.FileReader;d.readAsArrayBuffer(c),d.onloadend=function(){t(d.result)}}}else if(n.buffers&&n.buffers.length>0){var l=new window.FileReader;l.readAsDataURL(o),l.onloadend=function(){var e=l.result;n.buffers[0].uri=e,t(n)}}else t(n)}))}},{key:"serializeUserData",value:function(e,t){if(0!==Object.keys(e.userData).length){var n=this.options,r=this.extensionsUsed;try{var a=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&a.gltfExtensions){for(var i in void 0===t.extensions&&(t.extensions={}),a.gltfExtensions)t.extensions[i]=a.gltfExtensions[i],r[i]=!0;delete a.gltfExtensions}Object.keys(a).length>0&&(t.extras=a)}catch(t){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+t.message)}}}},{key:"getUID",value:function(e){return this.uids.has(e)||this.uids.set(e,this.uid++),this.uids.get(e)}},{key:"isNormalizedNormalAttribute",value:function(e){if(this.cache.attributesNormalized.has(e))return!1;for(var t=new NJ,n=0,r=e.count;n<r;n++)if(Math.abs(t.fromBufferAttribute(e,n).length()-1)>5e-4)return!1;return!0}},{key:"createNormalizedNormalAttribute",value:function(e){var t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);for(var n=e.clone(),r=new NJ,a=0,i=n.count;a<i;a++)r.fromBufferAttribute(n,a),0===r.x&&0===r.y&&0===r.z?r.setX(1):r.normalize(),n.setXYZ(a,r.x,r.y,r.z);return t.attributesNormalized.set(e,n),n}},{key:"applyTextureTransform",value:function(e,t){var n=!1,r={};0===t.offset.x&&0===t.offset.y||(r.offset=t.offset.toArray(),n=!0),0!==t.rotation&&(r.rotation=t.rotation,n=!0),1===t.repeat.x&&1===t.repeat.y||(r.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}},{key:"processBuffer",value:function(e){var t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}},{key:"processBufferView",value:function(e,t,n,r,a){var i,o=this.json;o.bufferViews||(o.bufferViews=[]),i=t===Lae?1:t===Pae?2:4;for(var s=Bae(r*e.itemSize*i),u=new DataView(new ArrayBuffer(s)),l=0,c=n;c<n+r;c++)for(var d=0;d<e.itemSize;d++){var h=void 0;e.itemSize>4?h=e.array[c*e.itemSize+d]:0===d?h=e.getX(c):1===d?h=e.getY(c):2===d?h=e.getZ(c):3===d&&(h=e.getW(c)),5126===t?u.setFloat32(l,h,!0):5125===t?u.setUint32(l,h,!0):t===Pae?u.setUint16(l,h,!0):t===Lae&&u.setUint8(l,h),l+=i}var p={buffer:this.processBuffer(u.buffer),byteOffset:this.byteOffset,byteLength:s};return void 0!==a&&(p.target=a),34962===a&&(p.byteStride=e.itemSize*i),this.byteOffset+=s,o.bufferViews.push(p),{id:o.bufferViews.length-1,byteLength:0}}},{key:"processBufferViewImage",value:function(e){var t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise((function(r){var a=new window.FileReader;a.readAsArrayBuffer(e),a.onloadend=function(){var e=Uae(a.result),i={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,r(n.bufferViews.push(i)-1)}}))}},{key:"processAccessor",value:function(e,t,n,r){var a,i=this.options,o=this.json;if(e.array.constructor===Float32Array)a=5126;else if(e.array.constructor===Uint32Array)a=5125;else if(e.array.constructor===Uint16Array)a=Pae;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");a=Lae}if(void 0===n&&(n=0),void 0===r&&(r=e.count),i.truncateDrawRange&&void 0!==t&&null===t.index){var s=n+r,u=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;n=Math.max(n,t.drawRange.start),(r=Math.min(s,u)-n)<0&&(r=0)}if(0===r)return null;var l,c=function(e,t,n){for(var r={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)},a=t;a<t+n;a++)for(var i=0;i<e.itemSize;i++){var o=void 0;e.itemSize>4?o=e.array[a*e.itemSize+i]:0===i?o=e.getX(a):1===i?o=e.getY(a):2===i?o=e.getZ(a):3===i&&(o=e.getW(a)),r.min[i]=Math.min(r.min[i],o),r.max[i]=Math.max(r.max[i],o)}return r}(e,n,r);void 0!==t&&(l=e===t.index?34963:34962);var d=this.processBufferView(e,a,n,r,l),h={bufferView:d.id,byteOffset:d.byteOffset,componentType:a,count:r,max:c.max,min:c.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(h.normalized=!0),o.accessors||(o.accessors=[]),o.accessors.push(h)-1}},{key:"processImage",value:function(e,t,n){var r=this,a=r.cache,i=r.json,o=r.options,s=r.pending;a.images.has(e)||a.images.set(e,{});var u=a.images.get(e),l=1023===t?"image/png":"image/jpeg",c=l+":flipY/"+n.toString();if(void 0!==u[c])return u[c];i.images||(i.images=[]);var d={mimeType:l};if(o.embedImages){var h=Wae=Wae||document.createElement("canvas");h.width=Math.min(e.width,o.maxTextureSize),h.height=Math.min(e.height,o.maxTextureSize);var p=h.getContext("2d");if(!0===n&&(p.translate(0,h.height),p.scale(1,-1)),"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap)p.drawImage(e,0,0,h.width,h.height);else{1023!==t&&1022!==t&&console.error("GLTFExporter: Only RGB and RGBA formats are supported."),(e.width>o.maxTextureSize||e.height>o.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);var f=new Uint8ClampedArray(e.height*e.width*4);if(1023===t)for(var m=0;m<f.length;m+=4)f[m+0]=e.data[m+0],f[m+1]=e.data[m+1],f[m+2]=e.data[m+2],f[m+3]=e.data[m+3];else for(var v=0,g=0;v<f.length;v+=4,g+=3)f[v+0]=e.data[g+0],f[v+1]=e.data[g+1],f[v+2]=e.data[g+2],f[v+3]=255;p.putImageData(new ImageData(f,e.width,e.height),0,0)}!0===o.binary?s.push(new Promise((function(e){h.toBlob((function(t){r.processBufferViewImage(t).then((function(t){d.bufferView=t,e()}))}),l)}))):d.uri=h.toDataURL(l)}else d.uri=e.src;var y=i.images.push(d)-1;return u[c]=y,y}},{key:"processSampler",value:function(e){var t=this.json;t.samplers||(t.samplers=[]);var n={magFilter:Fae[e.magFilter],minFilter:Fae[e.minFilter],wrapS:Fae[e.wrapS],wrapT:Fae[e.wrapT]};return t.samplers.push(n)-1}},{key:"processTexture",value:function(e){var t=this.cache,n=this.json;if(t.textures.has(e))return t.textures.get(e);n.textures||(n.textures=[]);var r={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY)};e.name&&(r.name=e.name),this._invokeAll((function(t){t.writeTexture&&t.writeTexture(e,r)}));var a=n.textures.push(r)-1;return t.textures.set(e,a),a}},{key:"processMaterial",value:function(e){var t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);var r={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var a=e.color.toArray().concat([e.opacity]);if(zae(a,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=a),e.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=e.metalness,r.pbrMetallicRoughness.roughnessFactor=e.roughness):(r.pbrMetallicRoughness.metallicFactor=.5,r.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap)if(e.metalnessMap===e.roughnessMap){var i={index:this.processTexture(e.metalnessMap)};this.applyTextureTransform(i,e.metalnessMap),r.pbrMetallicRoughness.metallicRoughnessTexture=i}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(e.map){var o={index:this.processTexture(e.map)};this.applyTextureTransform(o,e.map),r.pbrMetallicRoughness.baseColorTexture=o}if(e.emissive){var s=e.emissive.clone().multiplyScalar(e.emissiveIntensity),u=Math.max(s.r,s.g,s.b);if(u>1&&(s.multiplyScalar(1/u),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),u>0&&(r.emissiveFactor=s.toArray()),e.emissiveMap){var l={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(l,e.emissiveMap),r.emissiveTexture=l}}if(e.normalMap){var c={index:this.processTexture(e.normalMap)};e.normalScale&&1!==e.normalScale.x&&(c.scale=e.normalScale.x),this.applyTextureTransform(c,e.normalMap),r.normalTexture=c}if(e.aoMap){var d={index:this.processTexture(e.aoMap),texCoord:1};1!==e.aoMapIntensity&&(d.strength=e.aoMapIntensity),this.applyTextureTransform(d,e.aoMap),r.occlusionTexture=d}e.transparent?r.alphaMode="BLEND":e.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=e.alphaTest),2===e.side&&(r.doubleSided=!0),""!==e.name&&(r.name=e.name),this.serializeUserData(e,r),this._invokeAll((function(t){t.writeMaterial&&t.writeMaterial(e,r)}));var h=n.materials.push(r)-1;return t.materials.set(e,h),h}},{key:"processMesh",value:function(e){var t=this.cache,n=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(var a=0,i=e.material.length;a<i;a++)r.push(e.material[a].uuid);else r.push(e.material.uuid);var o=r.join(":");if(t.meshes.has(o))return t.meshes.get(o);var s,u=e.geometry;if(s=e.isLineSegments?1:e.isLineLoop?2:e.isLine?3:e.isPoints?0:e.material.wireframe?1:4,!0!==u.isBufferGeometry)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");var l={},c={},d=[],h=[],p={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},f=u.getAttribute("normal");void 0===f||this.isNormalizedNormalAttribute(f)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),u.setAttribute("normal",this.createNormalizedNormalAttribute(f)));var m=null;for(var v in u.attributes)if("morph"!==v.substr(0,5)){var g=u.attributes[v];if(v=p[v]||v.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(v)||(v="_"+v),t.attributes.has(this.getUID(g)))c[v]=t.attributes.get(this.getUID(g));else{m=null;var y=g.array;"JOINTS_0"!==v||y instanceof Uint16Array||y instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),m=new n0(new Uint16Array(y),g.itemSize,g.normalized));var b=this.processAccessor(m||g,u);null!==b&&(c[v]=b,t.attributes.set(this.getUID(g),b))}}if(void 0!==f&&u.setAttribute("normal",f),0===Object.keys(c).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){var x=[],w=[],k={};if(void 0!==e.morphTargetDictionary)for(var S in e.morphTargetDictionary)k[e.morphTargetDictionary[S]]=S;for(var E=0;E<e.morphTargetInfluences.length;++E){var T={},C=!1;for(var _ in u.morphAttributes)if("position"===_||"normal"===_){var M=u.morphAttributes[_][E],I=_.toUpperCase(),N=u.attributes[_];if(t.attributes.has(this.getUID(M)))T[I]=t.attributes.get(this.getUID(M));else{var A=M.clone();if(!u.morphTargetsRelative)for(var R=0,O=M.count;R<O;R++)A.setXYZ(R,M.getX(R)-N.getX(R),M.getY(R)-N.getY(R),M.getZ(R)-N.getZ(R));T[I]=this.processAccessor(A,u),t.attributes.set(this.getUID(N),T[I])}}else C||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),C=!0);h.push(T),x.push(e.morphTargetInfluences[E]),void 0!==e.morphTargetDictionary&&w.push(k[E])}l.weights=x,w.length>0&&(l.extras={},l.extras.targetNames=w)}var D=Array.isArray(e.material);if(D&&0===u.groups.length)return null;for(var L=D?e.material:[e.material],P=D?u.groups:[{materialIndex:0,start:void 0,count:void 0}],F=0,j=P.length;F<j;F++){var z={mode:s,attributes:c};if(this.serializeUserData(u,z),h.length>0&&(z.targets=h),null!==u.index){var B=this.getUID(u.index);void 0===P[F].start&&void 0===P[F].count||(B+=":"+P[F].start+":"+P[F].count),t.attributes.has(B)?z.indices=t.attributes.get(B):(z.indices=this.processAccessor(u.index,u,P[F].start,P[F].count),t.attributes.set(B,z.indices)),null===z.indices&&delete z.indices}var U=this.processMaterial(L[P[F].materialIndex]);null!==U&&(z.material=U),d.push(z)}l.primitives=d,n.meshes||(n.meshes=[]),this._invokeAll((function(t){t.writeMesh&&t.writeMesh(e,l)}));var W=n.meshes.push(l)-1;return t.meshes.set(o,W),W}},{key:"processCamera",value:function(e){var t=this.json;t.cameras||(t.cameras=[]);var n=e.isOrthographicCamera,r={type:n?"orthographic":"perspective"};return n?r.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:vJ.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(r.name=e.type),t.cameras.push(r)-1}},{key:"processAnimation",value:function(e,t){var n=this.json,r=this.nodeMap;n.animations||(n.animations=[]);for(var a=(e=Dae.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,i=[],o=[],s=0;s<a.length;++s){var u=a[s],l=L6.parseTrackName(u.name),c=L6.findNode(t,l.nodeName),d=jae[l.propertyName];if("bones"===l.objectName&&(c=!0===c.isSkinnedMesh?c.skeleton.getBoneByName(l.objectIndex):void 0),!c||!d)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',u.name),null;var h=void 0,p=u.values.length/u.times.length;d===jae.morphTargetInfluences&&(p/=c.morphTargetInfluences.length),!0===u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(h="CUBICSPLINE",p/=3):h=2300===u.getInterpolation()?"STEP":"LINEAR",o.push({input:this.processAccessor(new n0(u.times,1)),output:this.processAccessor(new n0(u.values,p)),interpolation:h}),i.push({sampler:o.length-1,target:{node:r.get(c),path:d}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:o,channels:i}),n.animations.length-1}},{key:"processSkin",value:function(e){var t=this.json,n=this.nodeMap,r=t.nodes[n.get(e)],a=e.skeleton;if(void 0===a)return null;var i=e.skeleton.bones[0];if(void 0===i)return null;for(var o=[],s=new Float32Array(16*a.bones.length),u=new s$,l=0;l<a.bones.length;++l)o.push(n.get(a.bones[l])),u.copy(a.boneInverses[l]),u.multiply(e.bindMatrix).toArray(s,16*l);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new n0(s,16)),joints:o,skeleton:n.get(i)}),r.skin=t.skins.length-1}},{key:"processNode",value:function(e){var t=this.json,n=this.options,r=this.nodeMap;t.nodes||(t.nodes=[]);var a={};if(n.trs){var i=e.quaternion.toArray(),o=e.position.toArray(),s=e.scale.toArray();zae(i,[0,0,0,1])||(a.rotation=i),zae(o,[0,0,0])||(a.translation=o),zae(s,[1,1,1])||(a.scale=s)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===zae(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(a.matrix=e.matrix.elements);if(""!==e.name&&(a.name=String(e.name)),this.serializeUserData(e,a),e.isMesh||e.isLine||e.isPoints){var u=this.processMesh(e);null!==u&&(a.mesh=u)}else e.isCamera&&(a.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){for(var l=[],c=0,d=e.children.length;c<d;c++){var h=e.children[c];if(h.visible||!1===n.onlyVisible){var p=this.processNode(h);null!==p&&l.push(p)}}l.length>0&&(a.children=l)}this._invokeAll((function(t){t.writeNode&&t.writeNode(e,a)}));var f=t.nodes.push(a)-1;return r.set(e,f),f}},{key:"processScene",value:function(e){var t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);var r={};""!==e.name&&(r.name=e.name),t.scenes.push(r);for(var a=[],i=0,o=e.children.length;i<o;i++){var s=e.children[i];if(s.visible||!1===n.onlyVisible){var u=this.processNode(s);null!==u&&a.push(u)}}a.length>0&&(r.nodes=a),this.serializeUserData(e,r)}},{key:"processObjects",value:function(e){var t=new L3;t.name="AuxScene";for(var n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}},{key:"processInput",value:function(e){var t=this.options;e=e instanceof Array?e:[e],this._invokeAll((function(t){t.beforeParse&&t.beforeParse(e)}));for(var n=[],r=0;r<e.length;r++)e[r]instanceof L3?this.processScene(e[r]):n.push(e[r]);n.length>0&&this.processObjects(n);for(var a=0;a<this.skins.length;++a)this.processSkin(this.skins[a]);for(var i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll((function(t){t.afterParse&&t.afterParse(e)}))}},{key:"_invokeAll",value:function(e){for(var t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}]),e}(),Zae=function(){function e(t){M(this,e),this.writer=t,this.name="KHR_lights_punctual"}return(0,I.Z)(e,[{key:"writeNode",value:function(e,t){if(e.isLight)if(e.isDirectionalLight||e.isPointLight||e.isSpotLight){var n=this.writer,r=n.json,a=n.extensionsUsed,i={};e.name&&(i.name=e.name),i.color=e.color.toArray(),i.intensity=e.intensity,e.isDirectionalLight?i.type="directional":e.isPointLight?(i.type="point",e.distance>0&&(i.range=e.distance)):e.isSpotLight&&(i.type="spot",e.distance>0&&(i.range=e.distance),i.spot={},i.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,i.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&0===e.target.position.x&&0===e.target.position.y&&-1===e.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),a[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},a[this.name]=!0);var o=r.extensions[this.name].lights;o.push(i),t.extensions=t.extensions||{},t.extensions[this.name]={light:o.length-1}}else console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e)}}]),e}(),Hae=function(){function e(t){M(this,e),this.writer=t,this.name="KHR_materials_unlit"}return(0,I.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshBasicMaterial){var n=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},n[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}}]),e}(),Gae=function(){function e(t){M(this,e),this.writer=t,this.name="KHR_materials_pbrSpecularGlossiness"}return(0,I.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isGLTFSpecularGlossinessMaterial){var n=this.writer,r=n.extensionsUsed,a={};t.pbrMetallicRoughness.baseColorFactor&&(a.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);var i=[1,1,1];if(e.specular.toArray(i,0),a.specularFactor=i,a.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(a.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){var o={index:n.processTexture(e.specularMap)};n.applyTextureTransform(o,e.specularMap),a.specularGlossinessTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=a,r[this.name]=!0}}}]),e}(),qae=function(){function e(t){M(this,e),this.writer=t,this.name="KHR_materials_transmission"}return(0,I.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.transmission){var n=this.writer,r=n.extensionsUsed,a={};if(a.transmissionFactor=e.transmission,e.transmissionMap){var i={index:n.processTexture(e.transmissionMap)};n.applyTextureTransform(i,e.transmissionMap),a.transmissionTexture=i}t.extensions=t.extensions||{},t.extensions[this.name]=a,r[this.name]=!0}}}]),e}(),Xae=function(){function e(t){M(this,e),this.writer=t,this.name="KHR_materials_volume"}return(0,I.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.thickness){var n=this.writer,r=n.extensionsUsed,a={};if(a.thicknessFactor=e.thickness,e.thicknessMap){var i={index:n.processTexture(e.thicknessMap)};n.applyTextureTransform(i,e.thicknessMap),a.thicknessTexture=i}a.attenuationDistance=e.attenuationDistance,a.attenuationColor=e.attenuationTint.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=a,r[this.name]=!0}}}]),e}();Dae.Utils={insertKeyframe:function(e,t){var n,r=.001,a=e.getValueSize(),i=new e.TimeBufferType(e.times.length+1),o=new e.ValueBufferType(e.values.length+a),s=e.createInterpolant(new e.ValueBufferType(a));if(0===e.times.length){i[0]=t;for(var u=0;u<a;u++)o[u]=0;n=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<r)return 0;i[0]=t,i.set(e.times,1),o.set(s.evaluate(t),0),o.set(e.values,a),n=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<r)return e.times.length-1;i[i.length-1]=t,i.set(e.times,0),o.set(e.values,0),o.set(s.evaluate(t),e.values.length),n=i.length-1}else for(var l=0;l<e.times.length;l++){if(Math.abs(e.times[l]-t)<r)return l;if(e.times[l]<t&&e.times[l+1]>t){i.set(e.times.slice(0,l+1),0),i[l+1]=t,i.set(e.times.slice(l+1),l+2),o.set(e.values.slice(0,(l+1)*a),0),o.set(s.evaluate(t),(l+1)*a),o.set(e.values.slice((l+1)*a),(l+2)*a),n=l+1;break}}return e.times=i,e.values=o,n},mergeMorphTargetTracks:function(e,t){for(var n=[],r={},a=e.tracks,i=0;i<a.length;++i){var o=a[i],s=L6.parseTrackName(o.name),u=L6.findNode(t,s.nodeName);if("morphTargetInfluences"===s.propertyName&&void 0!==s.propertyIndex){if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(o=o.clone()).setInterpolation(2301)}var l=u.morphTargetInfluences.length,c=u.morphTargetDictionary[s.propertyIndex];if(void 0===c)throw new Error("THREE.GLTFExporter: Morph target name not found: "+s.propertyIndex);var d=void 0;if(void 0!==r[u.uuid]){var h=o.createInterpolant(new o.ValueBufferType(1));d=r[u.uuid];for(var p=0;p<d.times.length;p++)d.values[p*l+c]=h.evaluate(d.times[p]);for(var f=0;f<o.times.length;f++){var m=this.insertKeyframe(d,o.times[f]);d.values[m*l+c]=o.values[f]}}else{for(var v=new((d=o.clone()).ValueBufferType)(l*d.times.length),g=0;g<d.times.length;g++)v[g*l+c]=d.values[g];d.name=(s.nodeName||"")+".morphTargetInfluences",d.values=v,r[u.uuid]=d,n.push(d)}}else n.push(o)}return e.tracks=n,e}};var Yae,Kae,Qae=function(e){return void 0!==e.material&&e.userData&&e.userData.variantMaterials&&!!Array.from(e.userData.variantMaterials.values()).filter((function(e){return Jae(e.material)}))},Jae=function(e){return e&&e.isMaterial&&!Array.isArray(e)},$ae=function(){function e(t){M(this,e),this.writer=t,this.name="KHR_materials_variants",this.variantNames=[]}return(0,I.Z)(e,[{key:"beforeParse",value:function(e){var t,n=this,r=new Set,a=G(e);try{for(a.s();!(t=a.n()).done;){t.value.traverse((function(e){if(Qae(e)){var t,n=e.userData.variantMaterials,a=G(n.keys());try{for(a.s();!(t=a.n()).done;){var i=t.value,o=n.get(i);Jae(o.material)&&r.add(i)}}catch(sde){a.e(sde)}finally{a.f()}}}))}}catch(sde){a.e(sde)}finally{a.f()}r.forEach((function(e){return n.variantNames.push(e)}))}},{key:"writeMesh",value:function(e,t){if(Qae(e)){var n,r=e.userData,a=r.variantMaterials,i=new Map,o=G(a.keys());try{for(o.s();!(n=o.n()).done;){var s=n.value,u=a.get(s).material;if(Jae(u)){var l=this.variantNames.indexOf(s),c=this.writer.processMaterial(u);i.has(c)||i.set(c,{material:c,variants:[]}),i.get(c).variants.push(l)}}}catch(sde){o.e(sde)}finally{o.f()}var d=Array.from(i.values()).map((function(e){return e.variants.sort((function(e,t){return e-t}))&&e})).sort((function(e,t){return e.material-t.material}));if(0!==d.length){var h,p=Jae(r.originalMaterial)?this.writer.processMaterial(r.originalMaterial):-1,f=G(t.primitives);try{for(f.s();!(h=f.n()).done;){var m=h.value;p>=0&&(m.material=p),m.extensions=m.extensions||{},m.extensions[this.name]={mappings:d}}}catch(sde){f.e(sde)}finally{f.f()}}}}},{key:"afterParse",value:function(){if(0!==this.variantNames.length){var e=this.writer.json;e.extensions=e.extensions||{};var t=this.variantNames.map((function(e){return{name:e}}));e.extensions[this.name]={variants:t},this.writer.extensionsUsed[this.name]=!0}}}]),e}(),eie=Symbol("correlatedObjects"),tie=Symbol("sourceObject"),nie=Symbol("onUpdate"),rie=(0,I.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;M(this,e),this[nie]=t,this[tie]=n,this[eie]=r})),aie=new n6,iie=new $$,oie=new J0(2,2),sie=Symbol("threeTexture"),uie=function(e){A(n,e);var t=F(n);function n(e,r,a){return M(this,n),t.call(this,e,a=null!=a?a:{name:"adhoc_image",uri:r&&r.image?r.image.src:"adhoc_image"},new Set(r?[r]:[]))}return(0,I.Z)(n,[{key:sie,get:function(){var e;return console.assert(null!=this[eie]&&this[eie].size>0,"Image correlated object is undefined"),null===(e=this[eie])||void 0===e?void 0:e.values().next().value}},{key:"name",get:function(){return this[tie].name||""}},{key:"uri",get:function(){return this[tie].uri}},{key:"bufferView",get:function(){return this[tie].bufferView}},{key:"type",get:function(){return null!=this.uri?"external":"embedded"}},{key:"setURI",value:function(){var e=Jn(Kn().mark((function e(t){var n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this[tie].uri=t,e.next=3,new Promise((function(e,n){aie.load(t,e,void 0,n)}));case 3:n=e.sent,(r=this[sie]).image=n,r.needsUpdate=!0,this[nie]();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createThumbnail",value:function(){var e=Jn(Kn().mark((function e(t,n){var r,a,i,o,s,u,l,c;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new L3,iie.map=this[sie],a=new A0(oie,iie),r.add(a),i=new u1(-1,1,1,-1,0,1),o=tee.singleton.threeRenderer,s=new _J(t,n),o.setRenderTarget(s),o.render(r,i),o.setRenderTarget(null),u=new Uint8Array(t*n*4),o.readRenderTargetPixels(s,0,0,t,n,u),gee.width=t,gee.height=n,l=gee.getContext("2d"),c=l.createImageData(t,n),e.abrupt("return",(c.data.set(u),l.putImageData(c,0,0),new Promise(function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gee.toBlob((function(e){if(!e)return n("Failed to capture thumbnail.");t(URL.createObjectURL(e))}),"image/png");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(rie);!function(e){e[e.Nearest=9728]="Nearest",e[e.Linear=9729]="Linear",e[e.NearestMipmapNearest=9984]="NearestMipmapNearest",e[e.LinearMipmapNearest=9985]="LinearMipmapNearest",e[e.NearestMipmapLinear=9986]="NearestMipmapLinear",e[e.LinearMipmapLinear=9987]="LinearMipmapLinear"}(Yae||(Yae={})),function(e){e[e.ClampToEdge=33071]="ClampToEdge",e[e.MirroredRepeat=33648]="MirroredRepeat",e[e.Repeat=10497]="Repeat"}(Kae||(Kae={}));var lie,cie,die=function(){var e=[Yae.Nearest,Yae.Linear,Yae.NearestMipmapNearest,Yae.LinearMipmapLinear,Yae.NearestMipmapLinear,Yae.LinearMipmapLinear];return function(t){return e.indexOf(t)>-1}}(),hie=function(){var e=[Yae.Nearest,Yae.Linear];return function(t){return e.indexOf(t)>-1}}(),pie=function(){var e=[Kae.ClampToEdge,Kae.MirroredRepeat,Kae.Repeat];return function(t){return e.indexOf(t)>-1}}(),fie=Symbol("threeTextures"),mie=Symbol("setProperty"),vie=Symbol("sourceSampler"),gie=function(e){A(n,e);var t=F(n);function n(e,r,a){return M(this,n),null==(a=null!=a?a:{}).minFilter&&(a.minFilter=r?r.minFilter:Yae.LinearMipmapLinear),null==a.magFilter&&(a.magFilter=r?r.magFilter:Yae.Linear),null==a.wrapS&&(a.wrapS=r?r.wrapS:Kae.Repeat),null==a.wrapT&&(a.wrapT=r?r.wrapT:Kae.Repeat),t.call(this,e,a,new Set(r?[r]:[]))}return(0,I.Z)(n,[{key:fie,get:function(){return console.assert(null!=this[eie]&&this[eie].size>0,"Sampler correlated object is undefined"),this[eie]}},{key:vie,get:function(){return console.assert(null!=this[tie],"Sampler source is undefined"),this[tie]}},{key:"name",get:function(){return this[tie].name||""}},{key:"minFilter",get:function(){return this[vie].minFilter}},{key:"magFilter",get:function(){return this[vie].magFilter}},{key:"wrapS",get:function(){return this[vie].wrapS}},{key:"wrapT",get:function(){return this[vie].wrapT}},{key:"setMinFilter",value:function(e){this[mie]("minFilter",e)}},{key:"setMagFilter",value:function(e){this[mie]("magFilter",e)}},{key:"setWrapS",value:function(e){this[mie]("wrapS",e)}},{key:"setWrapT",value:function(e){this[mie]("wrapT",e)}},{key:mie,value:function(e,t){var n=this[vie];if(null!=n){if(function(e,t){switch(e){case"minFilter":return die(t);case"magFilter":return hie(t);case"wrapS":case"wrapT":return pie(t);default:throw new Error('Cannot configure property "'.concat(e,'" on Sampler'))}}(e,t)){n[e]=t;var r,a=G(this[fie]);try{for(a.s();!(r=a.n()).done;){var i=r.value;i[e]=t,i.needsUpdate=!0}}catch(sde){a.e(sde)}finally{a.f()}}this[nie]()}}}]),n}(rie),yie=Symbol("image"),bie=Symbol("sampler"),xie=function(e){A(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return M(this,n),(a=t.call(this,e,i||{},new Set(r?[r]:[])))[bie]=new gie(e,r,o),a[yie]=new uie(e,r,s),a}return(0,I.Z)(n,[{key:"name",get:function(){return this[tie].name||""}},{key:"sampler",get:function(){return this[bie]}},{key:"source",get:function(){return this[yie]}}]),n}(rie),wie=Symbol("texture"),kie=Symbol("materials"),Sie=Symbol("usage");!function(e){e[e.Base=0]="Base",e[e.MetallicRoughness=1]="MetallicRoughness",e[e.Normal=2]="Normal",e[e.Occlusion=3]="Occlusion",e[e.Emissive=4]="Emissive"}(cie||(cie={}));var Eie=function(){function e(t,n,r,a,i,o){if(M(this,e),this[lie]=null,o){var s=i.textures?i.textures[o.index]:null,u=s&&i.samplers?i.samplers[s.sampler]:null,l=s&&i.images?i.images[s.source]:null;this[wie]=new xie(t,r,s,u,l)}this.onUpdate=t,this[kie]=a,this[Sie]=n}return(0,I.Z)(e,[{key:"texture",get:function(){return this[wie]}},{key:"setTexture",value:function(e){var t=null!=e?e.source[sie]:null,n=3001;if(this[wie]=e,this[kie]){var r,a=G(this[kie]);try{for(a.s();!(r=a.n()).done;){var i=r.value;switch(this[Sie]){case cie.Base:i.map=t;break;case cie.MetallicRoughness:n=3e3,i.metalnessMap=t,i.roughnessMap=t;break;case cie.Normal:n=3e3,i.normalMap=t;break;case cie.Occlusion:n=3e3,i.aoMap=t;break;case cie.Emissive:i.emissiveMap=t}i.needsUpdate=!0}}catch(sde){a.e(sde)}finally{a.f()}}t&&(t.encoding=n),this.onUpdate()}}]),e}();lie=wie;var Tie,Cie,_ie=Symbol("threeMaterials"),Mie=Symbol("baseColorTexture"),Iie=Symbol("metallicRoughnessTexture"),Nie=function(e){A(n,e);var t=F(n);function n(e,r,a,i){var o;M(this,n),o=t.call(this,e,a,i),null==a.baseColorFactor&&(a.baseColorFactor=[1,1,1,1]),null==a.roughnessFactor&&(a.roughnessFactor=1),null==a.metallicFactor&&(a.metallicFactor=1);var s=a.baseColorTexture,u=a.metallicRoughnessTexture,l=i.values().next().value,c=l.map,d=l.metalnessMap;return o[Mie]=new Eie(e,cie.Base,c,i,r,s||null),o[Iie]=new Eie(e,cie.MetallicRoughness,d,i,r,u||null),o}return(0,I.Z)(n,[{key:_ie,get:function(){return this[eie]}},{key:"baseColorFactor",get:function(){return this[tie].baseColorFactor}},{key:"metallicFactor",get:function(){return this[tie].metallicFactor}},{key:"roughnessFactor",get:function(){return this[tie].roughnessFactor}},{key:"baseColorTexture",get:function(){return this[Mie]}},{key:"metallicRoughnessTexture",get:function(){return this[Iie]}},{key:"setBaseColorFactor",value:function(e){var t,n=G(this[_ie]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.color.fromArray(e),r.opacity=e[3]}}catch(sde){n.e(sde)}finally{n.f()}this[tie].baseColorFactor=e,this[nie]()}},{key:"setMetallicFactor",value:function(e){var t,n=G(this[_ie]);try{for(n.s();!(t=n.n()).done;){t.value.metalness=e}}catch(sde){n.e(sde)}finally{n.f()}this[tie].metallicFactor=e,this[nie]()}},{key:"setRoughnessFactor",value:function(e){var t,n=G(this[_ie]);try{for(n.s();!(t=n.n()).done;){t.value.roughness=e}}catch(sde){n.e(sde)}finally{n.f()}this[tie].roughnessFactor=e,this[nie]()}}]),n}(rie),Aie=Symbol("pbrMetallicRoughness"),Rie=Symbol("normalTexture"),Oie=Symbol("occlusionTexture"),Die=Symbol("emissiveTexture"),Lie=Symbol("backingThreeMaterial"),Pie=Symbol("applyAlphaCutoff"),Fie=Symbol("lazyLoadGLTFInfo"),jie=Symbol("initialize"),zie=Symbol("getLoadedMaterial"),Bie=Symbol("ensureMaterialIsLoaded"),Uie=function(e){A(n,e);var t=F(n);function n(e,r,a,i,o){var s;return M(this,n),s=t.call(this,e,a,i),null==o?s[jie](r):s[Fie]=o,s}return(0,I.Z)(n,[{key:Lie,get:function(){return this[eie].values().next().value}},{key:jie,value:function(e){var t=this[nie],n=this[tie],r=this[eie];n.extensions&&n.extensions.KHR_materials_pbrSpecularGlossiness&&console.warn("Material ".concat(n.name,' uses a deprecated extension\n          "KHR_materials_pbrSpecularGlossiness", please use\n          "pbrMetallicRoughness" instead. Specular Glossiness materials are\n          currently supported for rendering, but not for our scene-graph API,\n          nor for auto-generation of USDZ for Quick Look.')),null==n.pbrMetallicRoughness&&(n.pbrMetallicRoughness={}),this[Aie]=new Nie(t,e,n.pbrMetallicRoughness,r),null==n.emissiveFactor&&(n.emissiveFactor=[0,0,0]),null==n.doubleSided&&(n.doubleSided=!1),null==n.alphaMode&&(n.alphaMode="OPAQUE"),null==n.alphaCutoff&&(n.alphaCutoff=.5);var a=n.normalTexture,i=n.occlusionTexture,o=n.emissiveTexture,s=r.values().next().value,u=s.normalMap,l=s.aoMap,c=s.emissiveMap;this[Rie]=new Eie(t,cie.Normal,u,r,e,a||null),this[Oie]=new Eie(t,cie.Occlusion,l,r,e,i||null),this[Die]=new Eie(t,cie.Emissive,c,r,e,o||null)}},{key:zie,value:function(){var e=Jn(Kn().mark((function e(){var t,n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this[Fie]){e.next=7;break}return e.next=3,this[Fie].doLazyLoad();case 3:return t=e.sent,n=t.set,r=t.material,e.abrupt("return",(this[eie]=n,this[jie](this[Fie].gltf),this[Fie]=void 0,this.ensureLoaded=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),r));case 7:return e.abrupt("return",this[eie].values().next().value);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:Bie,value:function(){if(null!=this[Fie])throw new Error('Material "'.concat(this.name,"\" has not been loaded, call 'await\n    myMaterial.ensureLoaded()' before using an unloaded material."))}},{key:"ensureLoaded",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this[zie]();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isLoaded",get:function(){return null==this[Fie]}},{key:"name",get:function(){return this[tie].name||""}},{key:"pbrMetallicRoughness",get:function(){return this[Bie](),this[Aie]}},{key:"normalTexture",get:function(){return this[Bie](),this[Rie]}},{key:"occlusionTexture",get:function(){return this[Bie](),this[Oie]}},{key:"emissiveTexture",get:function(){return this[Bie](),this[Die]}},{key:"emissiveFactor",get:function(){return this[Bie](),this[tie].emissiveFactor}},{key:"setEmissiveFactor",value:function(e){this[Bie]();var t,n=G(this[eie]);try{for(n.s();!(t=n.n()).done;){t.value.emissive.fromArray(e)}}catch(sde){n.e(sde)}finally{n.f()}this[tie].emissiveFactor=e,this[nie]()}},{key:Pie,value:function(){this[Bie]();var e,t=this[tie],n=G(this[eie]);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.alphaTest=t.alphaCutoff,r.needsUpdate=!0}}catch(sde){n.e(sde)}finally{n.f()}}},{key:"setAlphaCutoff",value:function(e){this[Bie](),this[tie].alphaCutoff=e,this[Pie](),this[nie]()}},{key:"getAlphaCutoff",value:function(){return this[Bie](),this[tie].alphaCutoff}},{key:"setDoubleSided",value:function(e){this[Bie]();var t,n=G(this[eie]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.side=e?2:0,r.needsUpdate=!0}}catch(sde){n.e(sde)}finally{n.f()}this[tie].doubleSided=e,this[nie]()}},{key:"getDoubleSided",value:function(){return this[Bie](),this[tie].doubleSided}},{key:"setAlphaMode",value:function(e){this[Bie]();var t=function(e,t){e.transparent=t,e.depthWrite=!t};this[tie].alphaMode=e;var n,r=G(this[eie]);try{for(r.s();!(n=r.n()).done;){var a=n.value;t(a,"OPAQUE"!==e),this[Pie](),a.needsUpdate=!0}}catch(sde){r.e(sde)}finally{r.f()}this[nie]()}},{key:"getAlphaMode",value:function(){return this[Bie](),this[tie].alphaMode}}]),n}(rie),Wie=Symbol("materials"),Vie=Symbol("variantInfo"),Zie=Symbol("mesh"),Hie=Symbol("children"),Gie=Symbol("initialMaterialIdx"),qie=Symbol("activeMaterialIdx"),Xie=(0,I.Z)((function e(t){M(this,e),this.name="",this[Tie]=new Array,this.name=t}));Tie=Hie;var Yie,Kie,Qie,Jie,$ie=function(e){A(n,e);var t=F(n);function n(e,r,a){var i;M(this,n),(i=t.call(this,e.name))[Cie]=new Map,i[Zie]=e;var o=a.gltf,s=a.threeGLTF,u=a.threeObjectMap,l=u.get(e.material);null!=l.materials?i[Gie]=i[qie]=l.materials:console.error("Primitive (".concat(e.name,") missing initial material reference."));var c,d=u.get(e).meshes,h=G((o.meshes||[])[d].primitives||[]);try{for(h.s();!(c=h.n()).done;){var p=c.value;if(null!=p.material)i[Wie].set(p.material,r[p.material]);else{var f=r.findIndex((function(e){return"Default"===e.name}));f>=0?i[Wie].set(f,r[f]):console.warn("Primitive has no material!")}if(p.extensions&&p.extensions.KHR_materials_variants){var m=p.extensions.KHR_materials_variants,v=s.parser.json.extensions.KHR_materials_variants.variants;i[Vie]=new Map;var g,y=G(m.mappings);try{for(y.s();!(g=y.n()).done;){var b=g.value;i[Wie].set(b.material,r[b.material]);var x,w=G(b.variants);try{for(w.s();!(x=w.n()).done;){var k=v[x.value].name;i[Vie].set(k,{material:r[b.material],index:b.material})}}catch(sde){w.e(sde)}finally{w.f()}}}catch(sde){y.e(sde)}finally{y.f()}}}}catch(sde){h.e(sde)}finally{h.f()}return i}return(0,I.Z)(n,[{key:"mesh",get:function(){return this[Zie]}},{key:"setActiveMaterial",value:function(){var e=Jn(Kn().mark((function e(t){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this[Wie].get(t),e.t0=null!=n,!e.t0){e.next=7;break}return e.next=5,n[zie]();case 5:this.mesh.material=e.sent,this[qie]=t;case 7:return e.abrupt("return",this.mesh.material);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getActiveMaterial",value:function(){return this[Wie].get(this[qie])}},{key:"enableVariant",value:function(){var e=Jn(Kn().mark((function e(t){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",this.setActiveMaterial(this[Gie]));case 2:if(null==this[Vie]){e.next=6;break}if(null==(n=this[Vie].get(t))){e.next=6;break}return e.abrupt("return",this.setActiveMaterial(n.index));case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"instantiateVariants",value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this[Vie]){e.next=22;break}t=G(this[Vie].keys()),e.prev=2,t.s();case 4:if((n=t.n()).done){e.next=14;break}if(r=n.value,null==this.mesh.userData.variantMaterials.get(r).material){e.next=8;break}return e.abrupt("continue",12);case 8:return e.next=10,this.enableVariant(r);case 10:null!=(a=e.sent)&&(this.mesh.userData.variantMaterials.get(r).material=a);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),t.e(e.t0);case 19:return e.prev=19,t.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[2,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"variantInfo",get:function(){return this[Vie]}}]),n}(Xie);Cie=Wie;var eoe=Symbol("materials"),toe=Symbol("hierarchy"),noe=Symbol("roots"),roe=Symbol("primitives"),aoe=Symbol("prepareVariantsForExport"),ioe=Symbol("switchVariant"),ooe=Symbol("threeScene"),soe=Symbol("materialsFromPoint"),uoe=Symbol("materialFromPoint"),loe=(0,I.Z)((function e(t,n,r,a){M(this,e),this.gltf=t,this.gltfElementMap=n,this.mapKey=r,this.doLazyLoad=a})),coe=function(e){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};M(this,t),this[Yie]=new Array,this[Kie]=new Array,this[Qie]=new Array,this[Jie]=new Array;var a=e.gltf,i=e.threeGLTF,o=e.gltfElementMap;this[ooe]=i.scene;var s,u=G(a.materials.entries());try{var l=function(){var e=(0,U.Z)(s.value,2),t=e[0],u=e[1],l=o.get(u);if(null!=l)n[eoe].push(new Uie(r,a,u,l));else{var c=(a.materials||[])[t],d=t,h=function(){var e=Jn(Kn().mark((function e(){var t,n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.parser.getDependency("material",d);case 2:return t=e.sent,n=new Set,e.abrupt("return",(o.set(c,n),n.add(t),{set:n,material:t}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n[eoe].push(new Uie(r,a,c,l,new loe(a,o,c,h)))}};for(u.s();!(s=u.n()).done;)l()}catch(sde){u.e(sde)}finally{u.f()}var c,d=new Map,h=new Array,p=G(i.scene.children);try{for(p.s();!(c=p.n()).done;){var f=c.value;h.push(f)}}catch(sde){p.e(sde)}finally{p.f()}for(;h.length>0;){var m=h.pop(),v=null;m instanceof A0?(v=new $ie(m,this.materials,e),this[roe].push(v)):v=new Xie(m.name);var g=d.get(m);null!=g?g[Hie].push(v):this[noe].push(v),this[toe].push(v);var y,b=G(m.children);try{for(b.s();!(y=b.n()).done;){var x=y.value;h.push(x),d.set(m,v)}}catch(sde){b.e(sde)}finally{b.f()}}}return(0,I.Z)(t,[{key:"materials",get:function(){return this[eoe]}},{key:"getMaterialByName",value:function(e){var t=this[eoe].filter((function(t){return t.name===e}));return t.length>0?t[0]:null}},{key:e,value:function(e){var t=this;return e.intersectObject(this[ooe],!0).map((function(e){var n=t[toe].find((function(t){return t instanceof $ie&&t.mesh===e.object}));return null!=n?n.getActiveMaterial():null}))}},{key:uoe,value:function(e){var t=this[soe](e);return t.length>0?t[0]:null}},{key:ioe,value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Array,r=G(this[roe]);try{for(r.s();!(a=r.n()).done;)i=a.value,n.push(i.enableVariant(t))}catch(sde){r.e(sde)}finally{r.f()}return e.next=5,Promise.all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:aoe,value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Array,n=G(this[roe]);try{for(n.s();!(r=n.n()).done;)a=r.value,t.push(a.instantiateVariants())}catch(sde){n.e(sde)}finally{n.f()}return e.next=5,Promise.all(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}((Yie=eoe,Kie=toe,Qie=noe,Jie=roe,soe)),doe=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},hoe=Symbol("currentGLTF"),poe=Symbol("model"),foe=Symbol("variants"),moe=Symbol("getOnUpdateMethod"),voe=Symbol("textureLoader"),goe=Symbol("originalGltfJson"),yoe=function(e,t,n,r){for(var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},boe=Math.PI/32,xoe={basis:[F9(_9(boe,"rad"))],keywords:{auto:[null]}},woe=Symbol("autoRotateStartTime"),koe=Symbol("radiansPerSecond"),Soe=Symbol("syncRotationRate"),Eoe=Symbol("onCameraChange"),Toe=function(e){var t,n,r,a=function(e,a){A(o,e);var i=F(o);function o(){var e;return M(this,o),(e=i.apply(this,arguments))[t]=new Map,e[n]=function(t){t.forEach((function(t){t instanceof MutationRecord&&"childList"!==t.type||(t.addedNodes.forEach((function(t){e[tte](t)})),t.removedNodes.forEach((function(t){e[nte](t)})),e[Pee]())}))},e[r]=new MutationObserver(e[$ee]),e}return(0,I.Z)(o,[{key:"connectedCallback",value:function(){pl(R(o.prototype),"connectedCallback",this).call(this);for(var e=0;e<this.children.length;++e)this[tte](this.children[e]);var t=self.ShadyDOM;null==t?this[ete].observe(this,{childList:!0}):this[ete]=t.observeChildren(this,this[$ee])}},{key:"disconnectedCallback",value:function(){pl(R(o.prototype),"disconnectedCallback",this).call(this);var e=self.ShadyDOM;null==e?this[ete].disconnect():e.unobserveChildren(this[ete])}},{key:a,value:function(e,t){pl(R(o.prototype),Fee,this).call(this,e,t);var n=this[Lee],r=n.annotationRenderer,a=n.getCamera();n.shouldRender()&&(n.updateHotspots(a.position),r.domElement.style.display="",r.render(n,a))}},{key:"updateHotspot",value:function(e){var t=this[Jee].get(e.name);null!=t&&(t.updatePosition(e.position),t.updateNormal(e.normal),this[Pee]())}},{key:"positionAndNormalFromPoint",value:function(e,t){var n=this[Lee],r=n.getNDC(e,t),a=n.positionAndNormalFromPoint(r);if(null==a)return null;rte.copy(n.target.matrixWorld).invert();var i=qee(a.position.applyMatrix4(rte));return ate.getNormalMatrix(rte),{position:i,normal:qee(a.normal.applyNormalMatrix(ate))}}},{key:tte,value:function(e){if(e instanceof HTMLElement&&0===e.slot.indexOf("hotspot")){var t=this[Jee].get(e.slot);null!=t?t.increment():(t=new B9({name:e.slot,position:e.dataset.position,normal:e.dataset.normal}),this[Jee].set(e.slot,t),this[Lee].addHotspot(t)),this[Lee].queueRender()}}},{key:nte,value:function(e){if(e instanceof HTMLElement){var t=this[Jee].get(e.slot);t&&(t.decrement()&&(this[Lee].removeHotspot(t),this[Jee].delete(e.slot)),this[Lee].queueRender())}}}]),o}(e,(t=Jee,n=$ee,r=ete,Fee));return a}(function(e){var t,n,r,a,i,o=function(e,o){A(u,e);var s=F(u);function u(){var e;return M(this,u),(e=s.apply(this,arguments))[t]=void 0,e[n]=null,e[r]=[],e[a]=new i6,e[i]=null,e.variantName=null,e.orientation="0 0 0",e.scale="1 1 1",e}return(0,I.Z)(u,[{key:"model",get:function(){return this[poe]}},{key:"availableVariants",get:function(){return this[foe]}},{key:"originalGltfJson",get:function(){return this[goe]}},{key:o,value:function(){var e=this;return function(){e[Pee]()}}},{key:"createTexture",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i=this,o=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"image/png",r=this[hoe],e.next=4,new Promise((function(e){return i[voe].load(t,e)}));case 4:return a=e.sent,e.abrupt("return",r&&a?(a.encoding=3001,a.wrapS=1e3,a.wrapT=1e3,a.flipY=!1,"image/jpeg"===n&&(a.format=1022),new xie(this[moe](),a)):null);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updated",value:function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i,o,s,l,c;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pl(R(u.prototype),"updated",this).call(this,t),!t.has("variantName")){e.next=8;break}if(n=this[hoe],r=this.variantName,e.t0=null!=n,!e.t0){e.next=8;break}return e.next=6,this[poe][ioe](r);case 6:this[Pee](),this.dispatchEvent(new CustomEvent("variant-applied"));case 8:(t.has("orientation")||t.has("scale"))&&(a=this[Lee].modelContainer,i=M9(this.orientation)[0].terms,o=z9(i[0]).number,s=z9(i[1]).number,l=z9(i[2]).number,a.quaternion.setFromEuler(new g$(s,l,o,"YXZ")),c=M9(this.scale)[0].terms,a.scale.set(c[0].number,c[1].number,c[2].number),this[Lee].updateBoundingBox(),this[Lee].updateShadow(),this[Bee].arRenderer.onUpdateScene(),this[Pee]());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:jee,value:function(){pl(R(u.prototype),jee,this).call(this),this[foe]=[];var e=this[Lee].currentGLTF;if(null!=e){var t=e.correlatedSceneGraph;null!=t&&e!==this[hoe]&&(this[poe]=new coe(t,this[moe]()),this[goe]=JSON.parse(JSON.stringify(t.gltf))),"variants"in e.userData&&(this[foe]=e.userData.variants.slice(),this.requestUpdate("variantName"))}this[hoe]=e,this.dispatchEvent(new CustomEvent("scene-graph-ready"))}},{key:"exportScene",value:function(){var e=Jn(Kn().mark((function e(t){var n,r=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this[Lee],e.abrupt("return",new Promise(function(){var e=Jn(Kn().mark((function e(a){var i,o,s;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={binary:!0,onlyVisible:!0,maxTextureSize:1/0,forcePowerOfTwoTextures:!1,includeCustomExtensions:!1,embedImages:!0},Object.assign(i,t),i.animations=n.animations,i.truncateDrawRange=!0,o=n.shadow,s=!1,null!=o&&(s=o.visible,o.visible=!1),e.next=7,r[poe][aoe]();case 7:(new Dae).register((function(e){return new $ae(e)})).parse(n.modelContainer.children[0],(function(e){return a(new Blob([i.binary?e:JSON.stringify(e)],{type:i.binary?"application/octet-stream":"application/json"}))}),i),null!=o&&(o.visible=s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"materialFromPoint",value:function(e,t){var n=this[Lee],r=n.getNDC(e,t);return n.raycaster.setFromCamera(r,n.getCamera()),this[poe][uoe](n.raycaster)}}]),u}(e,(t=poe,n=hoe,r=foe,a=voe,i=goe,moe));return doe([jQ({type:String,attribute:"variant-name"})],o.prototype,"variantName",void 0),doe([jQ({type:String,attribute:"orientation"})],o.prototype,"orientation",void 0),doe([jQ({type:String,attribute:"scale"})],o.prototype,"scale",void 0),o}(function(e){var t,n,r,a=function(e,a){A(o,e);var i=F(o);function o(){var e;return M(this,o),(e=i.apply(this,arguments)).autoRotate=!1,e.autoRotateDelay=3e3,e.rotationPerSecond="auto",e[t]=performance.now(),e[n]=0,e[r]=function(t){e.autoRotate&&"user-interaction"===t.detail.source&&(e[woe]=performance.now())},e}return(0,I.Z)(o,[{key:"connectedCallback",value:function(){pl(R(o.prototype),"connectedCallback",this).call(this),this.addEventListener("camera-change",this[Eoe]),this[woe]=performance.now()}},{key:"disconnectedCallback",value:function(){pl(R(o.prototype),"disconnectedCallback",this).call(this),this.removeEventListener("camera-change",this[Eoe]),this[woe]=performance.now()}},{key:"updated",value:function(e){pl(R(o.prototype),"updated",this).call(this,e),e.has("autoRotate")&&(this[woe]=performance.now())}},{key:a,value:function(e){this[koe]=e[0]}},{key:Fee,value:function(e,t){if(pl(R(o.prototype),Fee,this).call(this,e,t),this.autoRotate&&this[Gee]()&&!this[Bee].isPresenting){var n=Math.min(t,e-this[woe]-this.autoRotateDelay);n>0&&(this[Lee].yaw=this.turntableRotation+this[koe]*n*.001)}}},{key:"turntableRotation",get:function(){return this[Lee].yaw}},{key:"resetTurntableRotation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this[Lee].yaw=e}}]),o}(e,(t=woe,n=koe,Soe));return r=Eoe,yoe([jQ({type:Boolean,attribute:"auto-rotate"})],a.prototype,"autoRotate",void 0),yoe([jQ({type:Number,attribute:"auto-rotate-delay"})],a.prototype,"autoRotateDelay",void 0),yoe([hre({intrinsics:xoe,updateHandler:Soe}),jQ({type:String,attribute:"rotation-per-second"})],a.prototype,"rotationPerSecond",void 0),a}(function(e){var t,n,r,a=function(e,a){A(o,e);var i=F(o);function o(){var e;return M(this,o),(e=i.apply(this,arguments)).environmentImage=null,e.skyboxImage=null,e.shadowIntensity=0,e.shadowSoftness=1,e.exposure=1,e[t]=null,e[n]=null,e[r]=function(t){t.element===(0,L.Z)(e)&&e[u7]()},e}return(0,I.Z)(o,[{key:"connectedCallback",value:function(){pl(R(o.prototype),"connectedCallback",this).call(this),this[Bee].loader.addEventListener("preload",this[c7])}},{key:"disconnectedCallback",value:function(){pl(R(o.prototype),"disconnectedCallback",this).call(this),this[Bee].loader.removeEventListener("preload",this[c7])}},{key:"updated",value:function(e){pl(R(o.prototype),"updated",this).call(this,e),e.has("shadowIntensity")&&(this[Lee].setShadowIntensity(.1*this.shadowIntensity),this[Pee]()),e.has("shadowSoftness")&&(this[Lee].setShadowSoftness(this.shadowSoftness),this[Pee]()),e.has("exposure")&&(this[Lee].exposure=this.exposure,this[Pee]()),(e.has("environmentImage")||e.has("skyboxImage"))&&this[Zee]()&&this[u7]()}},{key:a,value:function(){pl(R(o.prototype),jee,this).call(this),null!=this[o7]&&this[s7](this[o7])}},{key:u7,value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a,i,o,s=this;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.skyboxImage,n=this.environmentImage,null!=this[l7]&&(this[l7](),this[l7]=null),null==(r=this[Bee].textureUtils)){e.next=17;break}return e.prev=4,e.next=7,new Promise(function(){var e=Jn(Kn().mark((function e(a,i){var o;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.generateEnvironmentMapAndSkybox(y9(t),n,{progressTracker:s[Uee]}),s[l7]=function(){return i(o)},e.t0=a,e.next=5,o;case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:a=e.sent,i=a.environmentMap,o=a.skybox,this[Lee].background=null!=o?o.name===i.name?i:o:null,this[s7](i),this[Lee].dispatchEvent({type:"envmap-update"}),e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(4),!(e.t0 instanceof Error)){e.next=17;break}throw this[s7](null),e.t0;case 17:case"end":return e.stop()}}),e,this,[[4,13]])})));return function(){return e.apply(this,arguments)}}()},{key:s7,value:function(e){this[Lee].environment!==e&&(this[o7]=e,this[Lee].environment=this[o7],this.dispatchEvent(new CustomEvent("environment-change")),this[Pee]())}}]),o}(e,(t=o7,n=l7,r=c7,jee));return i7([jQ({type:String,attribute:"environment-image"})],a.prototype,"environmentImage",void 0),i7([jQ({type:String,attribute:"skybox-image"})],a.prototype,"skyboxImage",void 0),i7([jQ({type:Number,attribute:"shadow-intensity"})],a.prototype,"shadowIntensity",void 0),i7([jQ({type:Number,attribute:"shadow-softness"})],a.prototype,"shadowSoftness",void 0),i7([jQ({type:Number})],a.prototype,"exposure",void 0),a}(function(e){var t,n,r,a,i,o,s,u,l,c,d,h,p,f,m,v,g,y=function(e,y){A(x,e);var b=F(x);function x(){var e;return M(this,x),(e=b.apply(this,arguments)).cameraControls=!1,e.cameraOrbit="0deg 75deg 105%",e.cameraTarget="auto auto auto",e.fieldOfView="auto",e.minCameraOrbit="auto",e.maxCameraOrbit="auto",e.minFieldOfView="auto",e.maxFieldOfView="auto",e.interactionPromptThreshold=3e3,e.interactionPromptStyle=Mre,e.interactionPrompt=Cre,e.interactionPolicy="always-allow",e.orbitSensitivity=1,e.touchAction="pan-y",e.disableZoom=!1,e.interpolationDecay=50,e.bounds="legacy",e[t]=e.shadowRoot.querySelector(".interaction-prompt"),e[n]=e.shadowRoot.querySelector(".interaction-prompt > .animated-container"),e[r]=1/0,e[a]=0,e[i]=1/0,e[o]=!1,e[s]=!1,e[u]=new vre(e[Lee].camera,e[Oee]),e[l]=0,e[c]=new B6,e[d]=!1,e[h]=!1,e[p]=!1,e[f]=function(){var t=e[Oee];isFinite(e[eae])||(e[eae]=performance.now());var n=e[Mee];t.getAttribute("aria-label")!==n&&t.setAttribute("aria-label",n),e.interactionPrompt!==_re||e[Qre]||(e[Kre]=!0)},e[m]=function(){e.interactionPrompt===_re&&(e[Kre]=!1,e[Ure].classList.remove("visible"),e[Jre]=1/0,e[eae]=1/0)},e[v]=function(t){var n=t.source;e[Zre](),e[Pee](),n===mre&&(e[Qre]=!0,e[Vre]()),e.dispatchEvent(new CustomEvent("camera-change",{detail:{source:n}}))},e[g]=function(t){"pointer-change-start"===t.type?e[Ree].classList.add("pointer-tumbling"):e[Ree].classList.remove("pointer-tumbling")},e}return(0,I.Z)(x,[{key:"getCameraOrbit",value:function(){var e=this[nae];return{theta:e.theta,phi:e.phi,radius:e.radius,toString:function(){return"".concat(this.theta,"rad ").concat(this.phi,"rad ").concat(this.radius,"m")}}}},{key:"getCameraTarget",value:function(){return qee(this[Bee].isPresenting?this[Bee].arRenderer.target:this[Lee].getTarget())}},{key:"getFieldOfView",value:function(){return this[Bre].getFieldOfView()}},{key:"getMinimumFieldOfView",value:function(){return this[Bre].options.minimumFieldOfView}},{key:"getMaximumFieldOfView",value:function(){return this[Bre].options.maximumFieldOfView}},{key:"jumpCameraToGoal",value:function(){this[rae]=!0,this.requestUpdate(rae,!1)}},{key:"resetInteractionPrompt",value:function(){this[$re]=0,this[Jre]=1/0,this[Qre]=!1,this[Kre]=this.interactionPrompt===Cre&&this.cameraControls}},{key:"connectedCallback",value:function(){pl(R(x.prototype),"connectedCallback",this).call(this),this[Bre].addEventListener("change",this[Xre]),this[Bre].addEventListener("pointer-change-start",this[Yre]),this[Bre].addEventListener("pointer-change-end",this[Yre])}},{key:"disconnectedCallback",value:function(){pl(R(x.prototype),"disconnectedCallback",this).call(this),this[Bre].removeEventListener("change",this[Xre]),this[Bre].removeEventListener("pointer-change-start",this[Yre]),this[Bre].removeEventListener("pointer-change-end",this[Yre])}},{key:"updated",value:function(e){var t=this;pl(R(x.prototype),"updated",this).call(this,e);var n=this[Bre],r=this[Oee];if(e.has("cameraControls")&&(this.cameraControls?(n.enableInteraction(),this.interactionPrompt===Cre&&(this[Kre]=!0),r.addEventListener("focus",this[qre]),r.addEventListener("blur",this[Gre])):(r.removeEventListener("focus",this[qre]),r.removeEventListener("blur",this[Gre]),n.disableInteraction(),this[Vre]())),e.has("disableZoom")&&(n.disableZoom=this.disableZoom),e.has("bounds")&&(this[Lee].tightBounds="tight"===this.bounds),(e.has("interactionPrompt")||e.has("cameraControls")||e.has("src"))&&(this.interactionPrompt===Cre&&this.cameraControls&&!this[Qre]?this[Kre]=!0:this[Vre]()),e.has("interactionPromptStyle")&&this[Ure].classList.toggle("wiggle",this.interactionPromptStyle===Mre),e.has("interactionPolicy")){var a=this.interactionPolicy;n.applyOptions({interactionPolicy:a})}if(e.has("touchAction")){var i=this.touchAction;n.applyOptions({touchAction:i}),n.updateTouchActionStyle()}e.has("orbitSensitivity")&&(n.sensitivity=this.orbitSensitivity),e.has("interpolationDecay")&&(n.setDamperDecayTime(this.interpolationDecay),this[Lee].setTargetDamperDecayTime(this.interpolationDecay)),!0===this[rae]&&Promise.resolve().then((function(){n.jumpToGoal(),t[Lee].jumpToGoal(),t[rae]=!1}))}},{key:"updateFraming",value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this[Lee],n=t.framedFieldOfView,e.next=3,this.requestUpdate("cameraTarget");case 3:return t.updateFraming("tight"===this.bounds?t.getTarget():void 0),t.frameModel(),r=t.framedFieldOfView,a=this[Bre].getFieldOfView()/n,this[tae]=r*a,this[iae]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),e.next=14,this.requestUpdate("cameraOrbit");case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:y,value:function(e){this[Bre].setFieldOfView(180*e[0]/Math.PI)}},{key:oae,value:function(e){if(this[iae]){var t=this.getCameraOrbit(),n=t.theta,r=t.phi;e[0]=n,e[1]=r,this[iae]=!1}this[Bre].setOrbit(e[0],e[1],e[2])}},{key:lae,value:function(e){this[Bre].applyOptions({minimumAzimuthalAngle:e[0],minimumPolarAngle:e[1],minimumRadius:e[2]}),this.jumpCameraToGoal()}},{key:cae,value:function(e){this[Bre].applyOptions({maximumAzimuthalAngle:e[0],maximumPolarAngle:e[1],maximumRadius:e[2]}),this[Hre](e[2]),this.jumpCameraToGoal()}},{key:dae,value:function(e){this[Bre].applyOptions({minimumFieldOfView:180*e[0]/Math.PI}),this.jumpCameraToGoal()}},{key:hae,value:function(e){this[Bre].applyOptions({maximumFieldOfView:180*e[0]/Math.PI}),this.jumpCameraToGoal()}},{key:uae,value:function(e){var t=(0,U.Z)(e,3),n=t[0],r=t[1],a=t[2];this[Lee].setTarget(n,r,a),this[Bee].arRenderer.updateTarget()}},{key:Fee,value:function(e,t){if(pl(R(x.prototype),Fee,this).call(this,e,t),!this[Bee].isPresenting&&this[Gee]()){var n=performance.now();if(this[Kre]){var r=this.interactionPrompt===Cre?this[Iee]:this[eae];this.loaded&&n>r+this.interactionPromptThreshold&&(this[Oee].setAttribute("aria-label","Use mouse, touch or arrow keys to control the camera!"),this[Kre]=!1,this[Jre]=n,this[Ure].classList.add("visible"))}if(isFinite(this[Jre])&&this.interactionPromptStyle===Mre){var a=this[Lee],i=(n-this[Jre])/5e3%1,o=wre(i),s=kre(i);if(this[Wre].style.opacity="".concat(s),o!==this[$re]){var u=o*a.width*.05,l=(o-this[$re])*Math.PI/16;this[Wre].style.transform="translateX(".concat(u,"px)"),this[Bre].adjustOrbit(l,0,0),this[$re]=o}}this[Bre].update(e,t),this[Lee].updateTarget(t)}}},{key:Vre,value:function(){this[Kre]=!1,this[Ure].classList.remove("visible"),this[Jre]=1/0}},{key:Hre,value:function(e){var t=this[Lee].idealCameraDistance,n=2*Math.max(t,e);this[Bre].updateNearFar(0,n)}},{key:Zre,value:function(){var e=this[nae],t=e.theta,n=e.phi,r=this[Bre].getCameraSpherical(this[nae]),a=r.theta,i=r.phi,o=this.getRootNode();if(null!=o&&o.activeElement===this){var s=(4+Math.floor((t%zre+jre)/Pre))%4,u=(4+Math.floor((a%zre+jre)/Pre))%4,l=Math.floor(n/Fre),c=Math.floor(i/Fre);if(u!==s||c!==l){var d="View from stage ".concat(Tre[c]).concat(Ere[u]);this[Oee].setAttribute("aria-label",d)}}}},{key:zee,value:function(e){var t=this[Bre],n=this[Lee].framedFieldOfView;pl(R(x.prototype),zee,this).call(this,e);var r=this[Lee].framedFieldOfView,a=t.getFieldOfView()/n;this[tae]=r*a,t.updateAspect(this[Lee].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.jumpCameraToGoal()}},{key:jee,value:function(){pl(R(x.prototype),jee,this).call(this);var e=this[Lee].framedFieldOfView;this[tae]=e,this[aae]?this[iae]=!0:this[aae]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}}]),x}(e,(t=Ure,n=Wre,r=eae,a=$re,i=Jre,o=Qre,s=Kre,u=Bre,l=tae,c=nae,d=rae,h=aae,p=iae,sae));return f=qre,m=Gre,v=Xre,g=Yre,xre([jQ({type:Boolean,attribute:"camera-controls"})],y.prototype,"cameraControls",void 0),xre([hre({intrinsics:Rre,observeEffects:!0,updateHandler:oae}),jQ({type:String,attribute:"camera-orbit",hasChanged:function(){return!0}})],y.prototype,"cameraOrbit",void 0),xre([hre({intrinsics:Lre,observeEffects:!0,updateHandler:uae}),jQ({type:String,attribute:"camera-target",hasChanged:function(){return!0}})],y.prototype,"cameraTarget",void 0),xre([hre({intrinsics:Ire,observeEffects:!0,updateHandler:sae}),jQ({type:String,attribute:"field-of-view",hasChanged:function(){return!0}})],y.prototype,"fieldOfView",void 0),xre([hre({intrinsics:Ore,updateHandler:lae}),jQ({type:String,attribute:"min-camera-orbit",hasChanged:function(){return!0}})],y.prototype,"minCameraOrbit",void 0),xre([hre({intrinsics:Dre,updateHandler:cae}),jQ({type:String,attribute:"max-camera-orbit",hasChanged:function(){return!0}})],y.prototype,"maxCameraOrbit",void 0),xre([hre({intrinsics:Nre,updateHandler:dae}),jQ({type:String,attribute:"min-field-of-view",hasChanged:function(){return!0}})],y.prototype,"minFieldOfView",void 0),xre([hre({intrinsics:Are,updateHandler:hae}),jQ({type:String,attribute:"max-field-of-view",hasChanged:function(){return!0}})],y.prototype,"maxFieldOfView",void 0),xre([jQ({type:Number,attribute:"interaction-prompt-threshold"})],y.prototype,"interactionPromptThreshold",void 0),xre([jQ({type:String,attribute:"interaction-prompt-style"})],y.prototype,"interactionPromptStyle",void 0),xre([jQ({type:String,attribute:"interaction-prompt"})],y.prototype,"interactionPrompt",void 0),xre([jQ({type:String,attribute:"interaction-policy"})],y.prototype,"interactionPolicy",void 0),xre([jQ({type:Number,attribute:"orbit-sensitivity"})],y.prototype,"orbitSensitivity",void 0),xre([jQ({type:String,attribute:"touch-action"})],y.prototype,"touchAction",void 0),xre([jQ({type:Boolean,attribute:"disable-zoom"})],y.prototype,"disableZoom",void 0),xre([jQ({type:Number,attribute:"interpolation-decay"})],y.prototype,"interpolationDecay",void 0),xre([jQ({type:String,attribute:"bounds"})],y.prototype,"bounds",void 0),y}(function(e){var t,n,r,a,i,o,s,u,l,c,d=function(e,d){A(p,e);var h=F(p);function p(){var e;return M(this,p),(e=h.apply(this,arguments)).ar=!1,e.arScale="auto",e.arPlacement="floor",e.arModes="webxr scene-viewer",e.iosSrc=null,e.xrEnvironment=!1,e[t]=!1,e[n]=e.shadowRoot.querySelector(".ar-button"),e[r]=document.createElement("a"),e[a]=new Set,e[i]=fne,e[o]=!1,e[s]=function(t){t.preventDefault(),e.activateAR()},e[u]=function(t){var n=t.status;n!==g7&&e[Bee].arRenderer.presentedScene!==e[Lee]||(e.setAttribute("ar-status",n),e.dispatchEvent(new CustomEvent("ar-status",{detail:{status:n}})),n===g7?e.removeAttribute("ar-tracking"):n===y7&&e.setAttribute("ar-tracking",b7))},e[l]=function(t){var n=t.status;e.setAttribute("ar-tracking",n),e.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:n}}))},e[c]=function(t){"_apple_ar_quicklook_button_tapped"==t.data&&e.dispatchEvent(new CustomEvent("quick-look-button-tapped"))},e}return(0,I.Z)(p,[{key:"canActivateAR",get:function(){return this[xne]!==fne}},{key:"connectedCallback",value:function(){pl(R(p.prototype),"connectedCallback",this).call(this),this[Bee].arRenderer.addEventListener("status",this[Tne]),this.setAttribute("ar-status",g7),this[Bee].arRenderer.addEventListener("tracking",this[Cne]),this[kne].addEventListener("message",this[_ne])}},{key:"disconnectedCallback",value:function(){pl(R(p.prototype),"disconnectedCallback",this).call(this),this[Bee].arRenderer.removeEventListener("status",this[Tne]),this[Bee].arRenderer.removeEventListener("tracking",this[Cne]),this[kne].removeEventListener("message",this[_ne])}},{key:"update",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pl(R(p.prototype),"update",this).call(this,t),t.has("arScale")&&(this[Lee].canScale="fixed"!==this.arScale),t.has("arPlacement")&&(this[Lee].updateShadow(),this[Pee]()),(t.has("ar")||t.has("arModes")||t.has("iosSrc"))&&(t.has("arModes")&&(this[wne]=cne(this.arModes)),this[Mne]());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"activateAR",value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this[xne],e.next=e.t0===dne?3:e.t0===pne?5:e.t0===hne?8:10;break;case 3:return this[yne](),e.abrupt("break",11);case 5:return e.next=7,this[vne]();case 7:return e.abrupt("break",11);case 8:return this[gne](),e.abrupt("break",11);case 10:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:d,value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this[xne]=fne,!this.ar){e.next=32;break}if(null==this.src){e.next=31;break}t=G(this[wne]),e.prev=3,t.s();case 5:if((n=t.n()).done){e.next=23;break}if(r=n.value,e.t0="webxr"===r&&XQ&&!une,!e.t0){e.next=12;break}return e.next=11,this[Bee].arRenderer.supportsPresentation();case 11:e.t0=e.sent;case 12:if(!e.t0){e.next=15;break}return this[xne]=pne,e.abrupt("break",23);case 15:if("scene-viewer"!==r||!eJ||lne){e.next=18;break}return this[xne]=hne,e.abrupt("break",23);case 18:if("quick-look"!==r||!QQ){e.next=21;break}return this[xne]=dne,e.abrupt("break",23);case 21:e.next=5;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(3),t.e(e.t1);case 28:return e.prev=28,t.f(),e.finish(28);case 31:!this.canActivateAR&&null!=this.iosSrc&&QQ&&(this[xne]=dne);case 32:this.canActivateAR?(this[mne].classList.add("enabled"),this[mne].addEventListener("click",this[Ene])):this[mne].classList.contains("enabled")&&(this[mne].removeEventListener("click",this[Ene]),this[mne].classList.remove("enabled"),a="failed",this.setAttribute("ar-status",a),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:a}})));case 33:case"end":return e.stop()}}),e,this,[[3,25,28,31]])})));return function(){return e.apply(this,arguments)}}()},{key:vne,value:function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Attempting to present in AR with WebXR..."),e.next=3,this[Ine]();case 3:return e.prev=3,this[mne].removeEventListener("click",this[Ene]),(t=this[Bee].arRenderer).placeOnWall="wall"===this.arPlacement,e.next=9,t.present(this[Lee],this.xrEnvironment);case 9:e.next=22;break;case 11:return e.prev=11,e.t0=e.catch(3),console.warn("Error while trying to present in AR with WebXR"),console.error(e.t0),e.next=17,this[Bee].arRenderer.stopPresenting();case 17:return une=!0,console.warn("Falling back to next ar-mode"),e.next=21,this[Mne]();case 21:this.activateAR();case 22:return e.prev=22,this[Mne](),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[3,11,22,25]])})));return function(){return e.apply(this,arguments)}}()},{key:Ine,value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.loaded,e.t0){e.next=7;break}return this[Sne]=!0,this[Nee](),e.next=6,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(r){e.addEventListener(t,(function a(i){n&&!n(i)||(r(i),e.removeEventListener(t,a))}))}))}(this,"load");case 6:this[Sne]=!1;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:Zee,value:function(){return pl(R(p.prototype),Zee,this).call(this)||this[Sne]}},{key:gne,value:function(){var e=this,t=self.location.toString(),n=new URL(t),r=new URL(this.src,t),a=new URLSearchParams(r.search);if(n.hash="#model-viewer-no-ar-fallback",a.set("mode","ar_preferred"),a.has("disable_occlusion")||a.set("disable_occlusion","true"),"fixed"===this.arScale&&a.set("resizable","false"),"wall"===this.arPlacement&&a.set("enable_vertical_placement","true"),a.has("sound")){var i=new URL(a.get("sound"),t);a.set("sound",i.toString())}if(a.has("link")){var o=new URL(a.get("link"),t);a.set("link",o.toString())}var s="intent://arvr.google.com/scene-viewer/1.0?".concat(a.toString()+"&file="+encodeURIComponent(r.toString()),"#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=").concat(encodeURIComponent(n.toString()),";end;");self.addEventListener("hashchange",(function(){"#model-viewer-no-ar-fallback"===self.location.hash&&(lne=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),e[Mne]())}),{once:!0}),this[kne].setAttribute("href",s),console.log("Attempting to present in AR with Scene Viewer..."),this[kne].click()}},{key:yne,value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!this.iosSrc,this[mne].classList.remove("enabled"),!t){e.next=8;break}return e.next=5,this.prepareUSDZ();case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=this.iosSrc;case 9:n=e.t0,r=new URL(n,self.location.toString()),"fixed"===this.arScale&&(r.hash&&(r.hash+="&"),r.hash+="allowsContentScaling=0"),(a=this[kne]).setAttribute("rel","ar"),i=document.createElement("img"),a.appendChild(i),a.setAttribute("href",r.toString()),t&&a.setAttribute("download","model.usdz"),console.log("Attempting to present in AR with Quick Look..."),a.click(),a.removeChild(i),t&&URL.revokeObjectURL(n),this[mne].classList.add("enabled");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"prepareUSDZ",value:function(){var e=Jn(Kn().mark((function e(){var t,n,r,a,i,o,s,u;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this[Uee].beginActivity(),e.next=3,this[Ine]();case 3:return n=this[Lee],r=n.shadow,a=!1,null!=r&&(a=r.visible,r.visible=!1),t(.2),i=new Kte,e.next=9,i.parse(n.modelContainer);case 9:return o=e.sent,s=new Blob([o],{type:"model/vnd.usdz+zip"}),u=URL.createObjectURL(s),e.abrupt("return",(t(1),null!=r&&(r.visible=a),u));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),p}(e,(t=bne,n=mne,r=kne,a=wne,i=xne,o=Sne,s=Ene,u=Tne,l=Cne,c=_ne,Mne));return sne([jQ({type:Boolean,attribute:"ar"})],d.prototype,"ar",void 0),sne([jQ({type:String,attribute:"ar-scale"})],d.prototype,"arScale",void 0),sne([jQ({type:String,attribute:"ar-placement"})],d.prototype,"arPlacement",void 0),sne([jQ({type:String,attribute:"ar-modes"})],d.prototype,"arModes",void 0),sne([jQ({type:String,attribute:"ios-src"})],d.prototype,"iosSrc",void 0),sne([jQ({type:Boolean,attribute:"xr-environment"})],d.prototype,"xrEnvironment",void 0),d}(function(e){var t,n,r,a,i,o,s,u,l,c,d,h,p,f,m=function(e,m,v){A(y,e);var g=F(y);function y(){var e;M(this,y);for(var m=arguments.length,v=new Array(m),b=0;b<m;b++)v[b]=arguments[b];(e=g.call.apply(g,[this].concat(v))).poster=null,e.reveal=vae,e.loading="auto",e.generateSchema=!1,e.seamlessPoster=!1,e[t]=!1,e[n]=!1,e[r]=0,e[a]=null,e[i]=e.shadowRoot.querySelector(".slot.poster"),e[o]=e.shadowRoot.querySelector("#default-poster"),e[s]=e.shadowRoot.querySelector("#default-progress-bar > .bar"),e[u]=e.shadowRoot.querySelector("#default-progress-bar > .mask"),e[l]=e[kae].getAttribute("aria-label"),e[c]=function(e,t){var n=null,r=function(){null==n&&(e.apply(void 0,arguments),n=self.setTimeout((function(){return n=null}),100))};return r.flush=function(){null!=n&&(self.clearTimeout(n),n=null)},r}((function(t){var n=e[bae].parentNode;requestAnimationFrame((function(){e[xae].style.opacity=""+.2*(1-t),e[bae].style.transform="scaleX(".concat(t,")"),0===t&&(n.removeChild(e[bae]),n.appendChild(e[bae])),1===t?e[bae].classList.add("hide"):e[bae].classList.remove("hide")}))})),e[d]=function(){e.reveal!==gae&&e.dismissPoster()},e[h]=function(t){if(e.reveal!==gae)switch(t.keyCode){case 32:case 13:e.dismissPoster()}},e[p]=function(t){var n=t.detail.totalProgress;e[_ae]=Math.max(n,e[_ae]),1===n&&(e[Cae].flush(),!e[Hee]()||null==e[Sae]&&e.reveal!==vae||e[Eae]()),e[Cae](n),e.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:n}}))},e[f]=function(){e[Mae]=!0;var t=e.getRootNode();t&&t.activeElement===(0,L.Z)(e)&&e[Oee].focus();var n=e[kae];n.setAttribute("aria-hidden","true"),n.tabIndex=-1,e.dispatchEvent(new CustomEvent("poster-dismissed"))};var x=self.ModelViewerElement||{},w=x.dracoDecoderLocation||"https://www.gstatic.com/draco/versioned/decoders/1.4.1/";c9.setDRACODecoderLocation(w);var k=x.ktx2TranscoderLocation||"https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/";return c9.setKTX2TranscoderLocation(k),x.meshoptDecoderLocation&&c9.setMeshoptDecoderLocation(x.meshoptDecoderLocation),e}return(0,I.Z)(y,[{key:"dismissPoster",value:function(){this[Hee]()?this[Eae]():(this[Sae]="interaction",this[Nee]())}},{key:"showPoster",value:function(){var e=this[wae],t=this[kae];t.removeAttribute("tabindex"),t.removeAttribute("aria-hidden"),e.classList.add("show");var n=this.modelIsVisible;this[Tae]=!1,this[_ee](n),this[Mae]=!1}},{key:"getDimensions",value:function(){return qee(this[Lee].size)}},{key:"connectedCallback",value:function(){pl(R(y.prototype),"connectedCallback",this).call(this),this[wae].addEventListener("click",this[Aae]),this[wae].addEventListener("keydown",this[Rae]),this[Uee].addEventListener("progress",this[Oae]),yae.registerInstance(this)}},{key:"disconnectedCallback",value:function(){pl(R(y.prototype),"disconnectedCallback",this).call(this),this[wae].removeEventListener("click",this[Aae]),this[wae].removeEventListener("keydown",this[Rae]),this[Uee].removeEventListener("progress",this[Oae]),yae.unregisterInstance(this)}},{key:"updated",value:function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pl(R(y.prototype),"updated",this).call(this,t),t.has("poster")&&null!=this.poster&&(this[kae].style.backgroundImage="url(".concat(this.poster,")")),t.has("alt")&&this[kae].setAttribute("aria-label","".concat(this[Mee],". ").concat(this[Nae])),(t.has("reveal")||t.has("loading"))&&this[Nee](),t.has("generateSchema")&&(!0===this.generateSchema?this[Lee].updateSchema(this.src):this[Lee].updateSchema(null)),t.has("seamlessPoster")&&(!0===this.seamlessPoster?this[wae].classList.add("quick"):this[wae].classList.remove("quick"));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:m,value:function(){return!!this.src&&(null!=this[Sae]||"eager"===this.loading||this.reveal===vae&&this[Cee])}},{key:Hee,value:function(){return!!this.src&&pl(R(y.prototype),Hee,this).call(this)&&1===this[_ae]}},{key:v,value:function(){var e=this;this[Sae]=null;var t=this[wae];if(t.classList.contains("show")){var n=this.modelIsVisible;this[Tae]=!0,this[_ee](n),requestAnimationFrame((function(){t.classList.remove("show"),!0===e.seamlessPoster?e[Iae]():t.addEventListener("transitionend",e[Iae],{once:!0})}))}else this[Mae]=!0}},{key:Vee,value:function(){return pl(R(y.prototype),Vee,this).call(this)&&this[Tae]}},{key:Gee,value:function(){return pl(R(y.prototype),Gee,this).call(this)&&this[Mae]}},{key:Nee,value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this[_ae]=0,!0===this.generateSchema&&this[Lee].updateSchema(this.src),null!=this[Lee].currentGLTF&&null!=this.src&&this[Zee]()||this.showPoster(),e.next=5,pl(R(y.prototype),Nee,this).call(this);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"dracoDecoderLocation",get:function(){return c9.getDRACODecoderLocation()},set:function(e){c9.setDRACODecoderLocation(e)}},{key:"ktx2TranscoderLocation",get:function(){return c9.getKTX2TranscoderLocation()},set:function(e){c9.setKTX2TranscoderLocation(e)}},{key:"meshoptDecoderLocation",get:function(){return c9.getMeshoptDecoderLocation()},set:function(e){c9.setMeshoptDecoderLocation(e)}},{key:"mapURLs",value:function(e){tee.singleton.loader[s9].manager.setURLModifier(e)}}]),y}(e,(t=Tae,n=Mae,r=_ae,a=Sae,i=wae,o=kae,s=bae,u=xae,l=Nae,c=Cae,d=Aae,h=Rae,p=Oae,Zee),(f=Iae,Eae));return mae([jQ({type:String})],m.prototype,"poster",void 0),mae([jQ({type:String})],m.prototype,"reveal",void 0),mae([jQ({type:String})],m.prototype,"loading",void 0),mae([jQ({type:Boolean,attribute:"generate-schema"})],m.prototype,"generateSchema",void 0),mae([jQ({type:Boolean,attribute:"seamless-poster"})],m.prototype,"seamlessPoster",void 0),m}(function(e){var t,n=function(e,n){A(a,e);var r=F(a);function a(){var e;return M(this,a),(e=r.apply(this,arguments)).autoplay=!1,e.animationName=void 0,e.animationCrossfadeDuration=300,e[t]=!0,e}return(0,I.Z)(a,[{key:"availableAnimations",get:function(){return this.loaded?this[Lee].animationNames:[]}},{key:"duration",get:function(){return this[Lee].duration}},{key:"paused",get:function(){return this[Qee]}},{key:"currentTime",get:function(){return this[Lee].animationTime},set:function(e){this[Lee].animationTime=e,this[Bee].threeRenderer.shadowMap.needsUpdate=!0,this[Pee]()}},{key:"pause",value:function(){this[Qee]||(this[Qee]=!0,this[Bee].threeRenderer.shadowMap.autoUpdate=!1,this.dispatchEvent(new CustomEvent("pause")))}},{key:"play",value:function(){this[Qee]&&this.availableAnimations.length>0&&(this[Qee]=!1,this[Bee].threeRenderer.shadowMap.autoUpdate=!0,this[Lee].hasActiveAnimation||this[Kee](),this.dispatchEvent(new CustomEvent("play")))}},{key:n,value:function(){pl(R(a.prototype),jee,this).call(this),this[Qee]=!0,this.autoplay&&(this[Kee](),this.play())}},{key:Fee,value:function(e,t){pl(R(a.prototype),Fee,this).call(this,e,t),this[Qee]||!this[Gee]()&&!this[Bee].isPresenting||(this[Lee].updateAnimation(t/1e3),this[Pee]())}},{key:"updated",value:function(e){pl(R(a.prototype),"updated",this).call(this,e),e.has("autoplay")&&this.autoplay&&this.play(),e.has("animationName")&&this[Kee]()}},{key:Nee,value:function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this[Lee].stopAnimation(),pl(R(a.prototype),Nee,this).call(this)));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:Kee,value:function(){this[Lee].playAnimation(this.animationName,this.animationCrossfadeDuration/1e3),this[Qee]&&(this[Lee].updateAnimation(0),this[Pee]())}}]),a}(e,(t=Qee,jee));return Yee([jQ({type:Boolean})],n.prototype,"autoplay",void 0),Yee([jQ({type:String,attribute:"animation-name"})],n.prototype,"animationName",void 0),Yee([jQ({type:Number,attribute:"animation-crossfade-duration"})],n.prototype,"animationCrossfadeDuration",void 0),n}(function(e){var t,n=Symbol("endPolyfillCoordination");return t=n,function(e){A(a,e);var r=F(a);function a(){var e;return M(this,a),(e=r.apply(this,arguments))[t]=null,e}return(0,I.Z)(a,[{key:"connectedCallback",value:function(){pl(R(a.prototype),"connectedCallback",this)&&pl(R(a.prototype),"connectedCallback",this).call(this),null==this[n]&&(this[n]=function(e){if(null==e.shadowRoot||e.hasAttribute("data-js-focus-visible"))return function(){};if(!self.applyFocusVisiblePolyfill){var t=function(){self.applyFocusVisiblePolyfill(e.shadowRoot)};return self.addEventListener("focus-visible-polyfill-ready",t,{once:!0}),function(){self.removeEventListener("focus-visible-polyfill-ready",t)}}return self.applyFocusVisiblePolyfill(e.shadowRoot),function(){}}(this))}},{key:"disconnectedCallback",value:function(){pl(R(a.prototype),"disconnectedCallback",this)&&pl(R(a.prototype),"disconnectedCallback",this).call(this),null!=this[n]&&(this[n](),this[n]=null)}}]),a}(e)}(Xee)))))))));customElements.define("model-viewer",Toe);var Coe=(0,ju.Z)(E.createElement(E.Fragment,null,E.createElement("path",{d:"M15.54 5.54L13.77 7.3 12 5.54 10.23 7.3 8.46 5.54 12 2zm2.92 10l-1.76-1.77L18.46 12l-1.76-1.77 1.76-1.77L22 12zm-10 2.92l1.77-1.76L12 18.46l1.77-1.76 1.77 1.76L12 22zm-2.92-10l1.76 1.77L5.54 12l1.76 1.77-1.76 1.77L2 12z"}),E.createElement("circle",{cx:"12",cy:"12",r:"3"})),"ControlCamera"),_oe=function(e,t){return console.log(e,t),"793-F"===t?"Sistema_direccion"===e?[{title:"Acumuladores",position:"1.3 3.5 3.3",normal:"0 0.05 0.69",orbit:"225deg 45deg 3m",target:"1.3m 2.7m 3.3m"},{title:"Sistema Hidraulico Direcci\xf3n",position:"0 1.93 2.5",normal:"0.73 0.05 0.69",orbit:"45deg 45deg 2.5m",target:"0m 1.7m 2.5m"},{title:"Cilindro Hidraulico 1",position:"-0.6 1.7 2.5",normal:"0.73 0.05 0.69",orbit:"45deg 45deg 2m",target:"-0.6m 1.5m 2.5m"},{title:"Cilindro Hidraulico 2",position:"0.6 1.7 2.5",normal:"0.73 0.05 0.69",orbit:"45deg 45deg 2m",target:"0.6m 1.5m 2.5m"},{title:"Bomba Direcci\xf3n",position:"-0.5 2.25 1",normal:"0.73 0.05 0.69",orbit:"10deg 80deg 2m",target:"-0.5m 1.9m 1m"}]:"Neumaticos"===e?[{title:"Neum\xe1tico",position:"2.6 2.5 2.5",normal:"0.73 0.05 0.69",orbit:"125deg 90deg 6m",target:"2.3m 1.45m 2.8m"},{title:"Aro",position:"2.6 1.93 2.5",normal:"0.73 0.05 0.69",orbit:"125deg 90deg 3m",target:"2.3m 1.45m 2.6m"}]:"Sistema_hidraulico"===e?[{title:"Filtros de Malla",position:"-0.4 2.7 -0.2",normal:"0 -0.05 -0.69",orbit:"200deg 90deg 1.5m",target:"-0.4m 2.4m -0.2m"},{title:"Cilindro de levante 1",position:"1.1 3.5 -0.7",normal:"0 -0.05 -0.69",orbit:"180deg 65deg 3m",target:"1.1m 2.8m -0.7m"},{title:"Cilindro de levante 2",position:"-1.1 3.5 -0.7",normal:"0 -0.05 -0.69",orbit:"240deg 65deg 3m",target:"-1.1m 2.8m -0.7m"},{title:"Enfriadores de aceite",position:"0.36 3 0.55",normal:"0 0.05 0.5",orbit:"20deg 65deg 3m",target:"0.36m 2m 0.55m"},{title:"Bomba de levante",position:"-0.4 2.35 0.55",normal:"0 0.05 0.5",orbit:"20deg 90deg 1.5m",target:"-0.4m 2.1m 0.55m"}]:"Estructura"===e?[{title:"AFEX",position:"-1.8 4.8 2.9",normal:"0.73 0.05 0.69",orbit:"45deg 60deg 1.5m",target:"-1.8m 4.4m 2.9m"},{title:"Filtro de Aire 4",position:"2.1 3 5.1",normal:"0.73 0.05 0.69",orbit:"45deg 90deg 2m",target:"2.1m 3.3m 5.2m"},{title:"Filtro de Aire 3",position:"1.6 3 5.1",normal:"0.73 0.05 0.69",orbit:"45deg 90deg 2m",target:"1.6m 3.3m 5.2m"},{title:"Filtro de Aire 2",position:"-1.6 3 5.1",normal:"0.73 0.05 0.69",orbit:"330deg 90deg 2m",target:"-1.6m 3.3m 5.2m"},{title:"Filtro de Aire 1",position:"-2.1 3 5.1",normal:"0.73 0.05 0.69",orbit:"330deg 90deg 2m",target:"-2.1m 3.3m 5.2m"}]:"Chasis"===e?[{title:"Articulaci\xf3n Eje Trasero",position:"0 0.7 -0.5",normal:"0 -0.05 -0.69",orbit:"250deg 100deg 3m",target:"0m 1m -0.5m"},{title:"Eslabones de suspenci\xf3n trasera",position:"0 1.5 -2",normal:"0 -0.05 -0.69",orbit:"225deg 100deg 2m",target:"0m 1.5m -2m"},{title:"Cross tube",position:"0 2.1 0",normal:"0 -0.05 -0.69",orbit:"0deg 180deg 3m",target:"0m 2.1m 0m"},{title:"Steering box",position:"0 1.8 2.6",normal:"0 0.05 0.69",orbit:"0deg 20deg 1.5m",target:"0m 1.7m 2.6m"},{title:"Pad tolva",position:"0.8 2.7 -1.5",normal:"0 -0.05 0.69",orbit:"0deg 20deg 2m",target:"0.8m 2.7m -1.5m"}]:"Maza"===e?[{title:"Maza derecha",position:"-1 1.93 2.5",normal:"0 0.05 -1",orbit:"-125deg 90deg 4m",target:"-2.3m 1.45m 2.6m"},{title:"Maza izquierda",position:"1 1.93 2.5",normal:"0 0.05 1",orbit:"125deg 90deg 4m",target:"2.3m 1.45m 2.6m"}]:"Sistema_neumatico"===e?[{title:"Condensador de aire",position:"-0.05 2.4 4.65",normal:"0 0.05 1",orbit:"0deg 90deg 4m",target:"-0.05m 2.35m 4.65m"},{title:"Compresor de aire acondocionado",position:"-0.7 2.15 4",normal:"0 0.05 -1",orbit:"-145deg 90deg 0.7m",target:"-0.7m 2.3m 4m"},{title:"Compresor de aire",position:"-0.45 2.2 4.2",normal:"0 0.05 -1",orbit:"125deg 75deg 1m",target:"-0.45m 2.35m 4.2m"}]:"Suspension"===e?[{title:"Suspensi\xf3n delantera 1",position:"-1.6 4 2.7",normal:"0 0.05 1",orbit:"0deg 55deg 4m",target:"-1.6m 3m 2.7m"},{title:"Suspensi\xf3n delantera 2",position:"1.6 4 2.7",normal:"0 0.05 1",orbit:"60deg 55deg 4m",target:"1.6m 3m 2.7m"},{title:"Suspensi\xf3n trasera 1",position:"-0.6 3 -3.2",normal:"0 0.05 1",orbit:"0deg 55deg 3m",target:"-0.6m 2m -3.2m"},{title:"Suspensi\xf3n trasera 2",position:"0.6 3 -3.25",normal:"0 0.05 1",orbit:"60deg 55deg 3m",target:"0.6m 2m -3.25m"}]:"Transmision"===e?[{title:"Caja de transferencia",position:"0 2.4 -1.2",normal:"0 -0.05 1",orbit:"300deg 55deg 1.5m",target:"0m 2.2m -1.2m"},{title:"Transmisi\xf3n",position:"0 2.2 -2",normal:"0 -0.05 1",orbit:"300deg 55deg 3m",target:"0m 1.7m -2m"},{title:"Mando Final Izquierdo",position:"2 2.2 -2",normal:"0 -0.05 1",orbit:"300deg 55deg 3m",target:"2m 1.7m -2m"},{title:"Mando Final Derecho",position:"-2 2.2 -2",normal:"0 -0.05 1",orbit:"300deg 55deg 3m",target:"-2m 1.7m -2m"},{title:"Uni\xf3n deslizante",position:"0 1.67 0",normal:"0 -0.05 -1",orbit:"10deg 55deg 3m",target:"0m 1.8m 0m"},{title:"Respiradero convertidor de torque",position:"0.5 3.5 1.4",normal:"0 0.05 1",orbit:"60deg 55deg 1m",target:"0.5m 3.2m 1.4m"},{title:"Convertidor de torque",position:"0 1.4 1.4",normal:"0 0.05 1",orbit:"60deg 120deg 3m",target:"0m 2m 1.4m"},{title:"P.T.O.",position:"-0.45 2.5 0.85",normal:"0 -0.05 -1",orbit:"240deg 50deg 1m",target:"-0.45m 2.25m 0.85m"}]:"Motor"===e?[{title:"Motor",position:"1 2.5 2",normal:"0 -0.05 2",orbit:"90deg 90deg 5m",target:"1 2.5 2"},{title:"Radiador",position:"0 4.5 4.7",normal:"0 0.05 1",orbit:"45deg 90deg 7m",target:"0m 3m 4.5m"},{title:"Tanque de Combustible",position:"2.3 3.5 0.5",normal:"-1 0.05 -1",orbit:"125deg 90deg 5m",target:"2.3m 2.5m 0.5m"},{title:"Filtro centr\xedfugo",position:"-0.3 3.1 1.5",normal:"-1 0.05 -1",orbit:"180deg 45deg 2m",target:"-0.3m 2.9m 1.5m"},{title:"Respiradero Motor 1",position:"0.3 3.1 2",normal:"-1 0.05 -1",orbit:"180deg 90deg 2m",target:"0.3m 2.9m 2m"},{title:"Respiradero Motor 2",position:"-0.3 3.1 2",normal:"-1 0.05 -1",orbit:"225deg 90deg 2m",target:"-0.3m 2.9m 2m"},{title:"Filtros de Combustible",position:"-0.3 1.5 3.7",normal:"-1 0.05 -1",orbit:"225deg 110deg 2m",target:"-0.3m 1.5m 3.7m"},{title:"Bomba de Agua Auxiliar Derecho",position:"-0.45 1.9 4.2",normal:"0 -0.05 2",orbit:"0deg 140deg 2m",target:"-0.45m 1.9m 4.5m"},{title:"Bomba de Agua Auxiliar Izquierdo",position:"0.45 1.9 4.2",normal:"0 -0.05 2",orbit:"0deg 140deg 2m",target:"0.45m 1.9m 4.2m"},{title:"Bomba de Aceite de Motor",position:"0.45 1.9 3.8",normal:"0.7 0.5 1",orbit:"90deg 120deg 1.5m",target:"0.45m 2.1m 3.8m"},{title:"Enfriadores de Aceite de Motor",position:"0.45 1.9 2.7",normal:"0.7 0.5 1",orbit:"90deg 90deg 1.5m",target:"0.45m 2m 2.7m"},{title:"V\xe1lvula Termost\xe1tica",position:"0.55 2.4 4.5",normal:"0.7 0.5 1",orbit:"120deg 90deg 1.5m",target:"0.55m 2.25m 4.5m"},{title:"Filtros de Autolimpieza",position:"-0.45 1.9 2.7",normal:"-1 0.05 -1",orbit:"225deg 110deg 2m",target:"-0.45m 2.1m 2.7m"},{title:"Turbos",position:"0 3.5 3.9",normal:"-1 0.05 -1",orbit:"225deg 45deg 2m",target:"0m 3.1m 3.9m"},{title:"Silenciadores",position:"-2.3 3.5 2",normal:"-1 0.05 -1",orbit:"225deg 90deg 2.5m",target:"-2.3m 4m 2m"},{title:"Ductos de escape",position:"-1.2 3.5 2",normal:"-1 0.05 -1",orbit:"180deg 90deg 2.5m",target:"-1.2m 4m 2m"}]:"Cabina"===e?[{title:"Cintur\xf3n de seguridad",position:"2.45 4.5 2.7",normal:"0 -0.05 2",orbit:"-45deg 90deg 0.7m",target:"2.45m 4.5m 2.7m"},{title:"Plumilla 1",position:"2.45 5 4",normal:"0 0.05 1",orbit:"45deg 90deg 1m",target:"2.45m 4.7m 4m"},{title:"Plumilla 2",position:"1.1 5 4",normal:"0 0.05 1",orbit:"-45deg 90deg 1m",target:"1.1m 4.7m 4m"},{title:"Manubrio",position:"2.2 4.5 3.5",normal:"0 0.05 1",orbit:"180deg 55deg 0.7m",target:"2.2m 4.5m 3.5m"},{title:"Monitor Vims",position:"1.7 4.5 3.5",normal:"0 0.05 1",orbit:"180deg 55deg 0.7m",target:"1.7m 4.5m 3.5m"},{title:"Selector de Marcha",position:"1.8 4.25 3.25",normal:"0 0.05 1",orbit:"180deg 55deg 0.7m",target:"1.8m 4.25m 3.25m"},{title:"Control de Levante",position:"1.6 4.25 3.25",normal:"0 0.05 1",orbit:"180deg 55deg 0.7m",target:"1.6m 4.25m 3.25m"},{title:"Asiento chofer",position:"2.2 4.45 3",normal:"0 0.05 1",orbit:"0deg 55deg 0.7m",target:"2.2m 4.45m 3m"},{title:"Asiento copiloto",position:"1.3 4.45 3",normal:"0 0.05 1",orbit:"0deg 55deg 0.7m",target:"1.3m 4.45m 3m"}]:[]:"PC5500"===t?"Chasis"===e?[{title:"Chasis",position:"0 3.1 -4",normal:"-0.7 -0.05 -0.69",orbit:"170deg 70deg 6.5m",target:"0m 3.1m -4m"},{title:"Corona de Giro",position:"-1.75 2.1 -2",normal:"-0.7 -0.05 -0.69",orbit:"300deg 80deg 4m",target:"-1m 2.1m -2m"},{title:"Bastidor",position:"-2 1.7 -2",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 4m",target:"-1m 1.7m -2m"}]:"Cabina"===e?[{title:"Controles de traslaci\xf3n",position:"2.2 4.85 0",normal:"0 -0.05 2",orbit:"-45deg 70deg 0.7m",target:"2.2m 4.85m -0.3m"},{title:"Joystick 1",position:"2.45 5.2 -0.55",normal:"0 0.05 1",orbit:"10deg 60deg 1m",target:"2.45m 5.2m -0.7m"},{title:"Joystick 2",position:"2.1 5.2 -0.55",normal:"0 0.05 1",orbit:"10deg 60deg 1m",target:"2.1m 5.2m -0.7m"}]:"Electrico"===e?[{title:"Gabinete el\xe9ctrico 1",position:"1.4 5.6 -4.6",normal:"0 -0.05 2",orbit:"-45deg 45deg 2m",target:"1.4m 5.3m -4.6m"},{title:"Gabinete el\xe9ctrico 2",position:"-1.6 5.4 -4",normal:"0 -0.05 2",orbit:"-45deg 65deg 1m",target:"-1.6m 5.1m -4m"},{title:"Gabinete el\xe9ctrico 3",position:"-2.1 5.4 -6",normal:"0.5 0.05 2",orbit:"80deg 65deg 2m",target:"-2.1m 5.1m -6m"},{title:"Sala El\xe9ctrica",position:"2.1 3.5 -1",normal:"-2 0.05 2",orbit:"-120deg 90deg 4m",target:"2.1m 3.5m -1m"},{title:"Bater\xedas",position:"2.2 2.6 -4.6",normal:"-2 0.05 2",orbit:"-100deg 70deg 3m",target:"2.1m 2m -4.6m"}]:"Estructura"===e?[{title:"Gabinete el\xe9ctrico 1",position:"1.4 5.6 -4.6",normal:"0 -0.05 2",orbit:"-45deg 45deg 2m",target:"1.4m 5.3m -4.6m"},{title:"Gabinete el\xe9ctrico 2",position:"-1.6 5.4 -4",normal:"0 -0.05 2",orbit:"-45deg 65deg 1m",target:"-1.6m 5.1m -4m"},{title:"Gabinete el\xe9ctrico 3",position:"-2.1 5.4 -6",normal:"0.5 0.05 2",orbit:"100deg 65deg 2m",target:"-2.1m 5.1m -6m"},{title:"Tanques sistema AFEX",position:"-1.4 5.6 -5",normal:"-0.04 0.07 0.9",orbit:"0deg 65deg 4m",target:"-1.4m 5.1m -5m"},{title:"Tubos de escape",position:"-1 6.1 -5",normal:"-0.04 0.07 0.9",orbit:"-45deg 65deg 4m",target:"-1m 5.7m -5m"},{title:"Caja de filtros",position:"0.8 6.1 -4.7",normal:"-0.04 0.07 0.9",orbit:"45deg 65deg 4m",target:"0.8m 5.7m -4.7m"},{title:"Bombas de engrase",position:"2 5.6 -5.5",normal:"-0.04 0.07 0.9",orbit:"45deg 65deg 4m",target:"2m 5.4m -5.5m"},{title:"Tanques de grasa",position:"2 4.9 -5.5",normal:"-0.04 0.07 0.9",orbit:"45deg 65deg 4m",target:"2m 4.7m -5.5m"}]:"Implemento"===e?[{title:"Boom",position:"0 6.5 2",normal:"0.04 0.07 0.9",orbit:"90deg 90deg 6m",target:"0m 6.3m 2m"},{title:"Cilindros Levante",position:"0 4.5 2",normal:"0.04 0.07 0.9",orbit:"90deg 90deg 6m",target:"0m 4.5m 2m"},{title:"Stick",position:"0 5 6",normal:"0.04 0.07 0.9",orbit:"90deg 90deg 6m",target:"0m 4.7m 6m"},{title:"Cilindros Stick",position:"0 8.5 6",normal:"0.04 0.07 0.9",orbit:"90deg 90deg 6m",target:"0m 8.3m 6m"},{title:"Cilindros Balde",position:"0 5 8",normal:"0.04 0.07 0.9",orbit:"45deg 90deg 6m",target:"0m 4.7m 8m"},{title:"Balde",position:"0 1 6",normal:"1 -0.5 0.9",orbit:"120deg 90deg 6m",target:"0m 1m 6m"}]:"Mando_de_giro"===e?[{title:"Corona de Giro",position:"-1 2.1 -1.5",normal:"0.7 -0.05 -0.69",orbit:"120deg 45deg 4m",target:"-1m 2.1m -1.5m"},{title:"Motores de Giro",position:"-1 3.5 -2.7",normal:"0.7 -0.05 -0.69",orbit:"100deg 70deg 2m",target:"-1m 3.5m -2.7m"},{title:"Reductores de Giro",position:"-1 2.5 -2.7",normal:"0.7 -0.05 -0.69",orbit:"100deg 70deg 2m",target:"-1m 2.5m -2.7m"}]:"Mando_final"===e?[{title:"Rotary",position:"-0 2.1 -2",normal:"0.7 -0.05 -0.69",orbit:"120deg 45deg 4m",target:"-0m 2.1m -2m"},{title:"Mando Final Derecho",position:"1.5 1 -3.7",normal:"0.7 0.05 0.69",orbit:"70deg 70deg 3m",target:"1.5m 1m -4.2m"},{title:"Mando Final Izquierdo",position:"-1.5 1 -3.7",normal:"0.7 0.05 0.69",orbit:"350deg 70deg 3m",target:"-1.5m 1m -4.2m"},{title:"Motores Hidr\xe1ulicos de Traslaci\xf3n Derecho",position:"0.7 0.5 -4",normal:"0.7 0.05 0.69",orbit:"350deg 120deg 3m",target:"0.7m 0.5m -4m"},{title:"Motores Hidr\xe1ulicos de Traslaci\xf3n Izquierdo",position:"-0.7 0.5 -4",normal:"0.7 0.05 0.69",orbit:"350deg 120deg 3m",target:"-0.7m 0.5m -4m"}]:"Motor"===e?[{title:"Compresor Aire Acondicionado (1 por motor)",position:"0.4 3.6 -6",normal:"-0.7 0.05 -0.69",orbit:"200deg 120deg 1m",target:"0.4m 3.5m -6m"},{title:"Motores de Partida (1 por motor)",position:"-0.7 3.6 -5.9",normal:"-0.7 0.05 -0.69",orbit:"180deg 120deg 1m",target:"-0.7m 3.5m -5.9m"},{title:"Ductos de Escape",position:"-0.7 4.8 -5.5",normal:"-0.7 0.05 -0.69",orbit:"190deg 45deg 4m",target:"-0.7m 4.5m -5.5m"},{title:"Ductos de Escape",position:"-0.7 4.8 -4.3",normal:"-0.7 0.05 -0.69",orbit:"300deg 45deg 4m",target:"-0.7m 4.5m -4.3m"},{title:"Tubos Motor 1",position:"0 4.5 -5.5",normal:"-0.7 0.05 -0.69",orbit:"190deg 45deg 4m",target:"0m 4.3m -5.5m"},{title:"Tubos Motor 2",position:"0 4.5 -4.3",normal:"-0.7 0.05 -0.69",orbit:"300deg 45deg 4m",target:"0m 4.3m -4.3m"},{title:"Filtro Eliminator (1 por motor)",position:"-0.4 3.5 -4",normal:"0.7 0.05 0.69",orbit:"320deg 70deg 2m",target:"-0.4m 3.5m -3.8m"},{title:"Bomba de Agua (1 por motor)",position:"0.2 3.5 -4",normal:"0.7 0.05 0.69",orbit:"320deg 70deg 2m",target:"0.2m 3.5m -3.7m"},{title:"Tanque de Expansi\xf3n del Radiador Motor 1",position:"1.5 4.5 -5.5",normal:"0.7 0.05 0.69",orbit:"300deg 80deg 1m",target:"1.5m 4.3m -5.5m"},{title:"Tanque de Expansi\xf3n del Radiador Motor 2",position:"1.5 4.5 -4.3",normal:"0.7 0.05 0.69",orbit:"300deg 80deg 1m",target:"1.5m 4.3m -4.3m"},{title:"Radiador Motor 1",position:"1.5 2.5 -5.5",normal:"-0.7 0.05 0.69",orbit:"300deg 120deg 4m",target:"1.5m 2.5m -5.5m"},{title:"Radiador Motor 2",position:"1.5 2.5 -4.3",normal:"-0.7 0.05 0.69",orbit:"300deg 120deg 4m",target:"1.5m 2.5m -4.3m"},{title:"Filtro Combustible Separador de Agua",position:"1.5 4.2 -6.6",normal:"0.7 0.05 0.69",orbit:"350deg 80deg 1m",target:"1.5m 4m -6.6m"}]:"PTO"===e?[{title:"Acople Flexible",position:"-1 3.8 -4.3",normal:"0.7 -0.05 -0.69",orbit:"120deg 70deg 3m",target:"-1m 3.6m -4.3m"},{title:"Acople Flexible",position:"-1 3.8 -5.5",normal:"0.7 -0.05 -0.69",orbit:"120deg 70deg 3m",target:"-1m 3.6m -5.5m"},{title:"Bomba Ventilador Enfriador de Aceite Hidr\xe1ulico",position:"-1.5 3.9 -4.55",normal:"-0.7 -0.05 -0.69",orbit:"270deg 70deg 1m",target:"-1.5m 3.7m -4.55m"},{title:"Bomba Ventilador Enfriador de Aceite Hidr\xe1ulico",position:"-1.5 3.9 -5.8",normal:"-0.7 -0.05 -0.69",orbit:"270deg 70deg 1m",target:"-1.5m 3.7m -5.8m"},{title:"Bombas Hidr\xe1ulicas Principales",position:"-1.5 3.5 -4.3",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 1m",target:"-1.5m 3.3m -4.3m"},{title:"Bombas Hidr\xe1ulicas Principales",position:"-1.5 3.5 -5.5",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 1m",target:"-1.5m 3.3m -5.5m"},{title:"Bomba Hidr\xe1ulica Ventilador, Radiador Motor 2",position:"-1.5 3.8 -4.3",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 1m",target:"-1.5m 3.6m -4.3m"},{title:"Bomba Hidr\xe1ulica Ventilador, Radiador Motor 1",position:"-1.5 3.8 -5.5",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 1m",target:"-1.5m 3.6m -5.5m"},{title:"Tanque de Succi\xf3n de Aceite",position:"-2 2.7 -4.9",normal:"-0.7 -0.05 -0.69",orbit:"270deg 70deg 2m",target:"-2m 2.5m -4.9m"}]:"Sistema_hidraulico"===e?[{title:"Respiraderos",position:"-2 5.2 -2",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 2m",target:"-2m 5m -2m"},{title:"Motor Hidr\xe1ulico de Ventilador Superior",position:"-1.5 4.8 -1",normal:"0.7 -0.05 -0.69",orbit:"120deg 70deg 3m",target:"-1.5m 4.3m -1m"},{title:"Motor Hidr\xe1ulico de Ventilador Inferior",position:"-1.5 3.9 -1",normal:"0.7 -0.05 -0.69",orbit:"90deg 70deg 2m",target:"-1.5m 3.5m -1m"},{title:"Enfriadores de aceite",position:"-2.5 4.8 -1",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 3m",target:"-2.5m 3.8m -1m"},{title:"Filtros de Aceite Sistema Hidr\xe1ulico",position:"-2 5 -2.",normal:"0.7 -0.05 -0.69",orbit:"150deg 70deg 2m",target:"-2m 4.8m -2.8m"},{title:"Tanque Hidr\xe1ulico",position:"-2.5 4 -2.5",normal:"-0.7 -0.05 -0.69",orbit:"300deg 70deg 4m",target:"-2.5m 4m -2.5m"},{title:"Tubo Recolector de Aceite de Retorno",position:"-1.5 4 -2.5",normal:"0.7 -0.05 -0.69",orbit:"120deg 70deg 4m",target:"-1.5m 4m -2.5m"},{title:"V\xe1lbulas de Control",position:"0.1 4.6 -2.1",normal:"0.1 -0.9 0.9",orbit:"0deg 70deg 3m",target:"0.1m 4.5m -2.1m"}]:"Sistema_rodado"===e?[{title:"Rodillo Superior",position:"-2.5 1.9 -2",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 1.8m -2m"},{title:"Rodillo Superior",position:"-2.5 1.9 0",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 1.8m 0m"},{title:"Rodillo Superior",position:"-2.5 1.9 -3.7",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 1.8m -3.7m"},{title:"Rodillo Inferior",position:"-2.5 0.6 0",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 0.6m 0m"},{title:"Rodillo Inferior",position:"-2.5 0.6 -0.7",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 0.6m -0.7m"},{title:"Rodillo Inferior",position:"-2.5 0.6 -1.3",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 0.6m -1.3m"},{title:"Rodillo Inferior",position:"-2.5 0.6 -2",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 0.6m -2m"},{title:"Rodillo Inferior",position:"-2.5 0.6 -2.6",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 0.6m -2.6m"},{title:"Rodillo Inferior",position:"-2.5 0.6 -3.2",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 0.6m -3.2m"},{title:"Rodillo Inferior",position:"-2.5 0.6 -3.7",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 0.6m -3.7m"},{title:"Rueda Tensora",position:"-2.5 1 1",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 1m 1m"},{title:"Bastidor",position:"-2.5 1.1 -2",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 1.1m -2m"},{title:"Sprocket",position:"-2.5 1.5 -4.5",normal:"-0.7 -0.05 -0.69",orbit:"300deg 90deg 4m",target:"-2.5m 1.5m -4.5m"}]:[]:[]},Moe=function(e){var t=e.machine,n=e.subSistem,r=(0,E.useState)(),a=(0,U.Z)(r,2),i=(a[0],a[1]),o=(0,E.useState)(),s=(0,U.Z)(o,2),u=s[0],l=s[1],c=(0,E.useState)(0),d=(0,U.Z)(c,2),h=d[0],p=d[1],f=(0,E.useState)(!1),m=(0,U.Z)(f,2),v=m[0],g=m[1],y=(0,E.useState)(!1),b=(0,U.Z)(y,2),x=b[0],w=b[1],k=(0,E.useState)([]),S=(0,U.Z)(k,2),T=S[0],C=S[1],_=(0,E.useState)(""),M=(0,U.Z)(_,2),I=M[0],N=M[1],A=(0,E.useState)(""),R=(0,U.Z)(A,2),O=R[0],D=R[1],L=(0,E.useState)(""),P=(0,U.Z)(L,2),F=P[0],j=P[1],z=(0,E.useState)("45deg 81deg 100m"),B=(0,U.Z)(z,2),W=B[0],V=B[1],Z=(0,E.useState)("0.009 0.009 0.009"),H=(0,U.Z)(Z,2),G=H[0],q=H[1],X=(0,E.useState)("auto auto auto"),Y=(0,U.Z)(X,2),K=Y[0],Q=Y[1],J=(0,E.useState)(!1),$=(0,U.Z)(J,2),ee=$[0],te=$[1],ne=(0,E.useState)([]),re=(0,U.Z)(ne,2),ae=re[0],ie=re[1],oe=(0,E.useState)("auto"),se=(0,U.Z)(oe,2),ue=se[0],le=(se[1],(0,E.useState)("auto")),ce=(0,U.Z)(le,2),de=ce[0],he=(ce[1],(0,E.useState)("auto")),pe=(0,U.Z)(he,2),fe=pe[0];pe[1];(0,E.useEffect)((function(){if(ie([]),n){ge();var e=JSON.parse(n);setTimeout((function(){xe(e.name,e.brand,e.model,e.nameModel)}),500)}else ge()}),[]);var me=function(){var e=Jn(Kn().mark((function e(){var n,r,a,i,o,s,u;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D("primary"),g(!0),p(0),e.next=5,$n();case 5:if(!(n=e.sent)){e.next=15;break}return e.next=9,er("Preview_".concat(t.model),n.database);case 9:r=e.sent,a=r.data,i=new Blob([a]),o=URL.createObjectURL(i),l(o),N(ve("Preview"));case 15:return e.next=17,dr.initDb();case 17:if(!(s=e.sent)){e.next=25;break}return u=new Array,e.next=22,dr.consultar(s.database);case 22:(u=e.sent).forEach((function(e,t){e.isSelected=""})),C(u.filter((function(e){if(e.model===t.model&&"Preview"!=e.name)return e;e.name})));case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(e){return"Preview"===e?"Vista General ".concat(t.brand," ").concat(t.model):"Preview_Con_Texturas"===e?"Vista General ".concat(t.brand," ").concat(t.model," Color"):"Sistema_direccion"===e?"Sistema de Direcci\xf3n":"Sistema_hidraulico"===e?"Sistema Hidraulico":"Sistema_neumatico"===e?"Sistema Neumatico":"Mando_de_giro"===e?"Mando de Giro":"Mando_final"===e?"Mando Final":"Sistema_rodado"===e?"Sistema Rodado":e},ge=function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n||me(),i(document.querySelector("model-viewer#machine")),(t=document.querySelector("model-viewer#machine")).addEventListener("model-visibility",(function(e){})),t.addEventListener("load",(function(){g(!1),t.cameraControls=!0,document.getElementById("image").style.opacity="0",setTimeout((function(){document.getElementById("machine").style.opacity="1",document.getElementById("image").style.height="0px",document.getElementById("machine").style.height="100%"}),2e3)})),t.addEventListener("click",(function(e){})),t.addEventListener("error",(function(e){}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye="undefined"!==typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),be=function(){w(!1)},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new String,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new String,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new String,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new String;if(N(ve(e)),"CATERPILLAR"===t)if("Preview_Con_Texturas"===e)p(0),g(!0);else{var a="../assets/transiciones/".concat(t,"/").concat(n,"/Pantalla_de_carga_").concat(e,".png");j(a),document.getElementById("machine").style.opacity="0",setTimeout((function(){document.getElementById("machine").style.height="0px",document.getElementById("image").style.height="80%",document.getElementById("image").style.opacity="1"}),500)}else p(0),g(!0);setTimeout(Jn(Kn().mark((function t(){var a,i,o,s,u;return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$n();case 2:return a=t.sent,t.next=5,er(r,a.database);case 5:i=t.sent,o=i.data,s=new Blob([o]),u=URL.createObjectURL(s),ie(_oe(e,n)),l(u);case 11:case"end":return t.stop()}}),t)}))),4e3)},we=function(){V("45deg 81deg 100m"),q("0.009 0.009 0.009"),Q("".concat(ue," ").concat(de," ").concat(fe)),te(!1)};return(0,xr.jsxs)(Jc,{style:{height:"100%",width:"100%"},id:"box",children:[!n&&(0,xr.jsxs)(PK,{sx:{width:"30%",backgroundColor:"transparent"},disableBackdropTransition:!ye,disableDiscovery:ye,variant:"persistent",anchor:"top",open:x,children:[(0,xr.jsx)("div",{style:{width:"27vw",textAlign:"right"},children:(0,xr.jsx)(ms,{onClick:function(){return be()},children:(0,xr.jsx)(rl,{})})}),(0,xr.jsxs)("div",{children:[(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,xr.jsx)(nl,{color:O,style:{width:"90%",marginBottom:10},variant:"outlined",onClick:function(){g(!0),be(),D("primary"),p(0),setTimeout((function(){me()}),1e3)},children:(0,xr.jsx)("p",{children:ve("Preview")})})}),T.map((function(e,n){return(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,xr.jsxs)(nl,{color:e.isSelected,style:{width:"90%",marginBottom:10},variant:"outlined",onClick:function(){!function(e,n){console.log(e,n),be(),we(),ie([]),setTimeout((function(){if(N(ve(e.name)),"CATERPILLAR"===e.brand)if("Preview_Con_Texturas"===e.name)p(0),g(!0);else{var r="../assets/transiciones/".concat(e.brand,"/").concat(e.model,"/Pantalla_de_carga_").concat(e.name,".png");j(r),document.getElementById("machine").style.opacity="0",setTimeout((function(){document.getElementById("machine").style.height="0px",document.getElementById("image").style.height="80%",document.getElementById("image").style.opacity="1"}),500)}else p(0),g(!0);T.forEach((function(e,t){e.isSelected=t===n?"primary":"",t===T.length-1&&C(T)})),setTimeout(Jn(Kn().mark((function n(){var r,a,i,o,s;return Kn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$n();case 2:return r=n.sent,n.next=5,er(e.nameModel,r.database);case 5:a=n.sent,i=a.data,o=new Blob([i]),s=URL.createObjectURL(o),console.log(t.model),ie(_oe(e.name,t.model)),l(s);case 12:case"end":return n.stop()}}),n)}))),4e3)}),1e3)}(e,n)},children:[(0,xr.jsx)("img",{src:"../assets/no-image.png",style:{width:50,height:50,borderRadius:30,objectFit:"cover",position:"absolute",left:10},alt:""}),(0,xr.jsx)("p",{children:ve(e.name)})]})},n)}))]})]}),(0,xr.jsx)("img",{src:F,id:"image",className:"image",height:640,width:480}),(0,xr.jsx)("model-viewer",{id:"machine",src:u,style:{height:"100%",width:"100%",backgroundColor:"#414646",opacity:1,transition:"opacity 0.5s"},"camera-target":K,"camera-orbit":W,scale:G,alt:"A Material Picking Example","touch-action":"none","min-field-of-view":"0deg","interpolation-decay":"200","min-camera-orbit":"auto auto 10%",oncontextmenu:"return false",children:ae.map((function(e,t){return(0,xr.jsx)("button",{onClick:function(){V(e.orbit),Q(e.target),te(!0)},className:"view-button",slot:"hotspot-".concat(t),"data-position":e.position,"data-normal":e.normal,"data-orbit":e.orbit,"data-target":e.target,children:e.title},t)}))}),(0,xr.jsx)(nd,{open:v,progress:h,loadingData:"Preparando vista 3D...",withProgress:!0}),(0,xr.jsx)("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"transparent",textAlign:"center"},children:(0,xr.jsxs)("div",{style:{width:"60%",backgroundColor:"transparent",textAlign:"center",marginLeft:"auto",marginRight:"auto"},children:[ee&&(0,xr.jsxs)(ms,{onClick:function(){return we()},children:[(0,xr.jsx)(Coe,{style:{color:"white",fontFamily:"Raleway",marginRight:10}})," ",(0,xr.jsx)("p",{style:{color:"white",fontFamily:"Raleway"},children:"Centrar c\xe1mara"})]}),(0,xr.jsx)("h2",{style:{color:"white",fontFamily:"Raleway"},children:I})]})}),!x&&!n&&(0,xr.jsx)(dd,{onClick:function(){w(!0)},style:{position:"absolute",left:10,top:10,boxShadow:"none",backgroundColor:"transparent"},color:"primary",children:(0,xr.jsx)(FK,{})})]})},Ioe=n(2346),Noe=n(7121);function Aoe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,It.Z)(),r=(0,xo.Z)({theme:n,name:"MuiUseMediaQuery",props:{}});var a="function"===typeof e?e(n):e;a=a.replace(/^@media( ?)/m,"");var i="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,o=(0,_t.Z)({},r,t),s=o.defaultMatches,u=void 0!==s&&s,l=o.matchMedia,c=void 0===l?i?window.matchMedia:null:l,d=o.noSsr,h=void 0!==d&&d,p=o.ssrMatchMedia,f=void 0===p?null:p,m=E.useState((function(){return h&&i?c(a).matches:f?f(a).matches:u})),v=m[0],g=m[1];return E.useEffect((function(){var e=!0;if(i){var t=c(a),n=function(){e&&g(t.matches)};return n(),t.addListener(n),function(){e=!1,t.removeListener(n)}}}),[a,c,i]),v}var Roe=function(e,t){return!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?Noe.X.indexOf(e)<=Noe.X.indexOf(t):Noe.X.indexOf(e)<Noe.X.indexOf(t)},Ooe=function(e,t){return!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?Noe.X.indexOf(t)<=Noe.X.indexOf(e):Noe.X.indexOf(t)<Noe.X.indexOf(e)},Doe="undefined"===typeof window?E.useEffect:E.useLayoutEffect,Loe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.withTheme,r=void 0!==n&&n,a=e.noSSR,i=void 0!==a&&a,o=e.initialWidth;function s(e){var n=lo(),a=e.theme||n,s=(0,xo.Z)({theme:a,name:"MuiWithWidth",props:(0,_t.Z)({},e)}),u=s.initialWidth,l=s.width,c=(0,qi.Z)(s,["initialWidth","width"]),d=E.useState(!1),h=d[0],p=d[1];Doe((function(){p(!0)}),[]);var f=a.breakpoints.keys.slice().reverse().reduce((function(e,t){var n=Aoe(a.breakpoints.up(t));return!e&&n?t:e}),null),m=(0,_t.Z)({width:l||(h||i?f:void 0)||u||o},r?{theme:a}:{},c);return void 0===m.width?null:E.createElement(t,m)}return Xc()(s,t),s}};function Poe(e){var t=e.children,n=e.only,r=e.width,a=lo(),i=!0;if(n)if(Array.isArray(n))for(var o=0;o<n.length;o+=1){if(r===n[o]){i=!1;break}}else n&&r===n&&(i=!1);if(i)for(var s=0;s<a.breakpoints.keys.length;s+=1){var u=a.breakpoints.keys[s],l=e["".concat(u,"Up")],c=e["".concat(u,"Down")];if(l&&Roe(u,r)||c&&Ooe(u,r)){i=!1;break}}return i?t:null}Poe.propTypes={children:Di().node,className:Di().string,implementation:Di().oneOf(["js","css"]),initialWidth:Di().oneOf(["xs","sm","md","lg","xl"]),lgDown:Di().bool,lgUp:Di().bool,mdDown:Di().bool,mdUp:Di().bool,only:Di().oneOfType([Di().oneOf(["xs","sm","md","lg","xl"]),Di().arrayOf(Di().oneOf(["xs","sm","md","lg","xl"]))]),smDown:Di().bool,smUp:Di().bool,width:Di().string.isRequired,xlDown:Di().bool,xlUp:Di().bool,xsDown:Di().bool,xsUp:Di().bool};var Foe=Loe()(Poe);var joe=(0,Rt.Z)((function(e){var t={display:"none"};return e.breakpoints.keys.reduce((function(n,r){return n["only".concat((0,bo.Z)(r))]=(0,Pt.Z)({},e.breakpoints.only(r),t),n["".concat(r,"Up")]=(0,Pt.Z)({},e.breakpoints.up(r),t),n["".concat(r,"Down")]=(0,Pt.Z)({},e.breakpoints.down(r),t),n}),{})}),{name:"PrivateHiddenCss"})((function(e){var t=e.children,n=e.classes,r=e.className,a=e.only,i=((0,qi.Z)(e,["children","classes","className","only"]),lo()),o=[];r&&o.push(r);for(var s=0;s<i.breakpoints.keys.length;s+=1){var u=i.breakpoints.keys[s],l=e["".concat(u,"Up")],c=e["".concat(u,"Down")];l&&o.push(n["".concat(u,"Up")]),c&&o.push(n["".concat(u,"Down")])}return a&&(Array.isArray(a)?a:[a]).forEach((function(e){o.push(n["only".concat((0,bo.Z)(e))])})),E.createElement("div",{className:o.join(" ")},t)}));var zoe=function(e){var t=e.implementation,n=void 0===t?"js":t,r=e.lgDown,a=void 0!==r&&r,i=e.lgUp,o=void 0!==i&&i,s=e.mdDown,u=void 0!==s&&s,l=e.mdUp,c=void 0!==l&&l,d=e.smDown,h=void 0!==d&&d,p=e.smUp,f=void 0!==p&&p,m=e.xlDown,v=void 0!==m&&m,g=e.xlUp,y=void 0!==g&&g,b=e.xsDown,x=void 0!==b&&b,w=e.xsUp,k=void 0!==w&&w,S=(0,qi.Z)(e,["implementation","lgDown","lgUp","mdDown","mdUp","smDown","smUp","xlDown","xlUp","xsDown","xsUp"]);return"js"===n?E.createElement(Foe,(0,_t.Z)({lgDown:a,lgUp:o,mdDown:u,mdUp:c,smDown:h,smUp:f,xlDown:v,xlUp:y,xsDown:x,xsUp:k},S)):E.createElement(joe,(0,_t.Z)({lgDown:a,lgUp:o,mdDown:u,mdUp:c,smDown:h,smUp:f,xlDown:v,xlUp:y,xsDown:x,xsUp:k},S))},Boe=(0,ju.Z)(E.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Uoe=(0,ju.Z)(E.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Woe=(0,ju.Z)(E.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),Voe=E.createElement(Uoe,null),Zoe=E.createElement(Boe,null),Hoe=E.createElement(Woe,null),Goe=E.forwardRef((function(e,t){var n=e.checkedIcon,r=void 0===n?Voe:n,a=e.classes,i=e.color,o=void 0===i?"secondary":i,s=e.icon,u=void 0===s?Zoe:s,l=e.indeterminate,c=void 0!==l&&l,d=e.indeterminateIcon,h=void 0===d?Hoe:d,p=e.inputProps,f=e.size,m=void 0===f?"medium":f,v=(0,qi.Z)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]),g=c?h:u,y=c?h:r;return E.createElement(sd,(0,_t.Z)({type:"checkbox",classes:{root:(0,yo.Z)(a.root,a["color".concat((0,bo.Z)(o))],c&&a.indeterminate),checked:a.checked,disabled:a.disabled},color:o,inputProps:(0,_t.Z)({"data-indeterminate":c},p),icon:E.cloneElement(g,{fontSize:void 0===g.props.fontSize&&"small"===m?m:g.props.fontSize}),checkedIcon:E.cloneElement(y,{fontSize:void 0===y.props.fontSize&&"small"===m?m:y.props.fontSize}),ref:t},v))})),qoe=(0,Rt.Z)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,es.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,es.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(Goe),Xoe=n(8420),Yoe=n(3938),Koe=function(e){var t=e.height,n=e.reportAssigned,r=e.setProgress,a=(e.resultThisItemProgress,e.canEdit),i=e.executionReport,o=e.report,s=Nce().isOnline,u=bce(),l=u.userData,c=(u.isOperator,(0,E.useState)(!0)),d=(0,U.Z)(c,2),h=(d[0],d[1]),p=(0,E.useState)([]),f=(0,U.Z)(p,2),m=f[0],v=f[1],g=(0,E.useState)([]),y=(0,U.Z)(g,2),b=y[0],x=y[1],w=(0,E.useState)([]),k=(0,U.Z)(w,2),S=(k[0],k[1]),T=(0,E.useState)(),C=(0,U.Z)(T,2),M=C[0],I=C[1],N=(0,E.useState)(),A=(0,U.Z)(N,2),R=A[0],O=A[1],D=(0,E.useState)(!1),L=(0,U.Z)(D,2),P=L[0],F=L[1],j=(0,E.useState)(),z=(0,U.Z)(j,2),B=z[0],W=z[1],V=(0,E.useState)(),Z=(0,U.Z)(V,2),H=Z[0],G=Z[1],q=(0,E.useState)(!1),X=(0,U.Z)(q,2),Y=X[0],K=(X[1],function(e){var t=e.className,n=(e.style,e.onClick);return(0,xr.jsx)("div",{className:t,style:{color:"black",background:"grey",borderRadius:20},onClick:n})}),Q={infinite:!1,speed:500,slidesToShow:7,slidesToScroll:7,nextArrow:(0,xr.jsx)(K,{}),prevArrow:(0,xr.jsx)(K,{})};(0,E.useEffect)((function(){var e=[];console.log(i),i._id&&(Object.keys(i.group).forEach((function(t,n){var r={data:t,state:!1};0==n&&(r.state=!0,O(t)),e.push(r)})),v(o.testMode?[e[0],e[1],e[2]]:e),console.log(Object.values(i.group)[0]),x(Object.values(i.group)[0]))}),[i]),(0,E.useEffect)((function(){if(console.log(b),s&&b&&i._id){var e=[];b.forEach((function(t){t.isChecked&&e.push(t)}));var t=[],n=[];Object.values(i.group).forEach((function(e){e.forEach((function(e){t.push(e),e.isChecked&&n.push(e)}))}));var a=(100*e.length/b.length).toFixed(0),o=(100*n.length/t.length).toFixed(0);r({progressPage:a,globalProgress:o}),h(!1)}}),[b,i,m,s]),(0,E.useEffect)((function(){console.log(R)}),[R]);var J=function(){var e=Jn(Kn().mark((function e(t,n,r){var a,o,u,l;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,_.Z)(b),r.isChecked=!0,r.isWarning=!n,a[t]=r,(o=i).group[R]=a,o.offLineGuard=Date.now(),x(a),e.next=10,sr();case 10:return u=e.sent,l=u.database,e.next=14,ur(o,l);case 14:if(!s){e.next=17;break}return e.next=17,_n(o);case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),$=function(){var e=Jn(Kn().mark((function e(t,n){var r,a,o,u,c,d;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),t.isChecked){e.next=5;break}t.obs01.includes("__")?alert("Actividad requiere que deje un comentario."):"*"!==t.unidad?alert("Actividad requiere que deje una cantidad de insumo utilizado."):confirm("\xbfDesea indicar estado ejecutado, sin dejar un mensaje?")&&(r=[{content:"Se indica estado ejecutado sin dejar mensajes",id:Date.now(),name:"".concat(l.name," ").concat(l.lastName),namePicture:null,urlBase64:void 0,user:l._id}],t.isChecked=!0,t.isWarning=!1,t.messages=r,J(n,!0,t)),e.next=23;break;case 5:if(!confirm("Confirme que desea desmarcar la tarea")){e.next=23;break}return(a=(0,_.Z)(b))[n].isChecked=!1,o=0,a[n].messages.forEach((function(e,t){"Se indica estado ejecutado sin dejar mensajes"===e&&(o=t)})),a[n].messages[o]=null,x(a),(u=i).group[R]=a,e.next=16,sr();case 16:return c=e.sent,d=c.database,e.next=20,ur(u,d);case 20:if(!s){e.next=23;break}return e.next=23,_n(u);case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,xr.jsxs)("div",{children:[(0,xr.jsx)("div",{style:{height:70,borderColor:"#ccc",borderWidth:2,borderStyle:"solid",borderRadius:10},children:(0,xr.jsx)(Ioe.Z,br(br({},Q),{},{children:m.map((function(e,t){return(0,xr.jsxs)("div",{style:{textAlign:"center",height:"100%"},children:[(0,xr.jsx)(nl,{style:{textAlign:"center",width:"100%",height:70},onClick:function(){return function(e,t){O(t),x(Object.values(i.group)[e]);var n=(0,_.Z)(m);n.forEach((function(e){e.state=!1})),n[e].state=!0,v(n)}(t,e.data)},children:(0,xr.jsx)("p",{style:{margin:0},children:e.data})}),e.state&&(0,xr.jsx)("div",{style:{width:"100%",height:6,backgroundColor:"#BB2D2D",position:"relative",bottom:5,borderRadius:5}})]},t)}))}))}),(0,xr.jsxs)("div",{style:{position:"relative"},children:[(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xl:"auto",md:"auto",children:(0,xr.jsxs)("p",{style:{margin:0,textAlign:"center",width:30},children:[" ",(0,xr.jsx)("strong",{children:"N\xb0"})," "]})}),(0,xr.jsx)(Ns,{item:!0,xl:1,md:1,children:(0,xr.jsxs)("p",{style:{margin:0,textAlign:"center"},children:[" ",(0,xr.jsxs)("strong",{children:["Personal ",(0,xr.jsx)("br",{})," Necesario"]})," "]})}),(0,xr.jsx)(Ns,{item:!0,xl:"auto",md:"auto",children:(0,xr.jsxs)("p",{style:{margin:0,textAlign:"center",width:150},children:[" ",(0,xr.jsx)("strong",{children:"Descripcion De Tarea"})," "]})}),(0,xr.jsx)(Ns,{item:!0,xl:"Mantenci\xf3n"===o.reportType?3:5,md:"Mantenci\xf3n"===o.reportType?3:5,sm:4,children:(0,xr.jsxs)("p",{style:{margin:0,textAlign:"center"},children:[" ",(0,xr.jsx)("strong",{children:"Observaciones"})," "]})}),(0,xr.jsxs)(zoe,{mdDown:!0,children:["Mantenci\xf3n"===o.reportType&&(0,xr.jsx)(Ns,{item:!0,xl:"auto",md:"auto",children:(0,xr.jsxs)("p",{style:{margin:0,textAlign:"center",width:100},children:[" ",(0,xr.jsxs)("strong",{children:["N\xb0 Parte ",(0,xr.jsx)("br",{})," a Utilizar"]})," "]})}),"Mantenci\xf3n"===o.reportType&&(0,xr.jsx)(Ns,{item:!0,xl:"auto",md:"auto",children:(0,xr.jsxs)("p",{style:{margin:0,textAlign:"center",width:100},children:[" ",(0,xr.jsxs)("strong",{children:["Cantidad ",(0,xr.jsx)("br",{})," a utilizar"]})," "]})}),"Mantenci\xf3n"===o.reportType&&(0,xr.jsx)(Ns,{item:!0,xl:"auto",md:"auto",children:(0,xr.jsxs)("p",{style:{margin:0,textAlign:"center",width:60},children:[" ",(0,xr.jsxs)("strong",{children:["Cantidad ",(0,xr.jsx)("br",{})," Utilizada"]})," "]})}),"Mantenci\xf3n"===o.reportType&&(0,xr.jsx)(Ns,{item:!0,xl:1,md:1,children:(0,xr.jsxs)("p",{style:{margin:0,textAlign:"center",width:100},children:[" ",(0,xr.jsxs)("strong",{children:["Tipo ",(0,xr.jsx)("br",{})," Rpto"]})," "]})})]}),(0,xr.jsx)(Ns,{item:!0,xl:1,md:"auto",children:(0,xr.jsxs)("p",{style:{margin:0,textAlign:"center",width:50},children:[" ",(0,xr.jsx)("strong",{children:"Acci\xf3n"})," "]})}),(0,xr.jsx)(Ns,{item:!0,xl:1,md:1,children:(0,xr.jsxs)("p",{style:{margin:0,textAlign:"center"},children:[" ",(0,xr.jsx)("strong",{children:"Estado"})," "]})})]}),(0,xr.jsx)("div",{style:{height:t,overflowY:"scroll"},children:b.map((function(e,t){return e.isChecked||(e.isChecked=!1),(0,xr.jsxs)(Ns,{container:!0,style:{borderBottomStyle:"solid",borderBottomWidth:1,borderBottomColor:"#ccc"},children:[(0,xr.jsx)(Ns,{item:!0,xl:"auto",md:"auto",children:(0,xr.jsxs)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"center",width:30},children:[" ",(0,xr.jsxs)("strong",{children:[t+1,".-"]})," "]})}),(0,xr.jsx)(Ns,{item:!0,xl:1,md:1,children:(0,xr.jsxs)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"center"},children:[" ",e.workteamdesc,"   "]})}),(0,xr.jsx)(Ns,{item:!0,xl:"auto",md:"auto",children:(0,xr.jsxs)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"left",width:150},children:[" ",e.taskdesc," "]})}),(0,xr.jsx)(Ns,{item:!0,xl:"Mantenci\xf3n"===o.reportType?3:5,md:"Mantenci\xf3n"===o.reportType?3:5,sm:4,children:(0,xr.jsxs)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"justify"},children:[" ",e.obs01," "]})}),(0,xr.jsxs)(zoe,{mdDown:!0,children:["Mantenci\xf3n"===o.reportType&&(0,xr.jsx)(Ns,{item:!0,xl:"auto",md:"auto",children:"*"===e.partnumberUtl?(0,xr.jsx)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"center",width:100},children:"N/A"}):(0,xr.jsx)("p",{style:{padding:5,margin:0,textAlign:"center",width:100},children:e.partnumberUtl})}),"Mantenci\xf3n"===o.reportType&&(0,xr.jsx)(Ns,{item:!0,xl:"auto",md:"auto",children:"*"===e.unidad?(0,xr.jsx)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"center",width:100},children:"N/A"}):(0,xr.jsxs)("p",{style:{padding:5,margin:0,textAlign:"center",width:100},children:[" ",e.cantidad," ",e.unidad]})}),"Mantenci\xf3n"===o.reportType&&(0,xr.jsx)(Ns,{item:!0,xl:"auto",md:"auto",children:"*"===e.unidad?(0,xr.jsx)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"center",width:60},children:"N/A"}):(0,xr.jsxs)("p",{style:{padding:5,margin:0,textAlign:"center",width:60},children:[" ",e.unidadData?e.unidadData:"___"," ",e.unidad]})}),"Mantenci\xf3n"===o.reportType&&(0,xr.jsx)(Ns,{item:!0,xl:1,md:1,children:"*"===e.idtypeutlPartnumber?(0,xr.jsx)("p",{style:{fontSize:12,padding:5,margin:0,textAlign:"center",width:100},children:"N/A"}):(0,xr.jsxs)("p",{style:{padding:5,margin:0,textAlign:"center",width:100},children:[" ",e.idtypeutlPartnumber]})})]}),(0,xr.jsx)(Ns,{item:!0,xl:1,md:"auto",children:(0,xr.jsx)("div",{style:{textAlign:"center",width:60},children:(0,xr.jsx)(ms,{style:{width:"5%",textAlign:"center"},onClick:function(){!function(e,t){G(t),W(e),F(!0)}(e,t),I(t)},children:(0,xr.jsx)(Hi,{icon:a?Vr:Or})})})}),(0,xr.jsxs)(Ns,{item:!0,xl:1,md:1,children:[!a&&(e.isChecked,(0,xr.jsx)(qoe,{checked:e.isChecked,disabled:!0,style:{transform:"scale(1.2)"},icon:(0,xr.jsx)(Yoe.Z,{}),checkedIcon:(0,xr.jsx)(Xoe.Z,{style:{color:e.isWarning?"#EAD749":"#27AE60"}})})),a&&(e.isChecked,(0,xr.jsx)(qoe,{value:e.isChecked,checked:e.isChecked,onClick:function(){$(e,t)},style:{transform:"scale(1.2)"},icon:(0,xr.jsx)(Yoe.Z,{}),checkedIcon:(0,xr.jsx)(Xoe.Z,{style:{color:e.isWarning?"#EAD749":"#27AE60"}})})),e.haveMessage&&(0,xr.jsx)(ms,{style:{padding:5},disabled:!0,children:(0,xr.jsx)(Hi,{icon:Nr})}),!e.messages&&(0,xr.jsx)(ms,{style:{padding:5},disabled:!0,children:(0,xr.jsx)(Hi,{style:{color:"transparent"},icon:Nr})}),e.haveClip&&(0,xr.jsx)(ms,{style:{padding:5},disabled:!0,children:(0,xr.jsx)(Hi,{icon:Wr})}),!e.haveClip&&(0,xr.jsx)(ms,{style:{padding:5},disabled:!0,children:(0,xr.jsx)(Hi,{style:{color:"transparent"},icon:Wr})})]})]},t)}))}),P&&(0,xr.jsx)(oce,{open:P,handleClose:function(){F(!1),W(null)},report:n,item:B,index:H,executionReport:i,gruposKeys:m,indexActivity:M,indexGroup:R,save:J,setChecks:S,canEdit:a}),Y&&(0,xr.jsx)(Jle,{open:Y})]})]})},Qoe=E.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.raised,i=void 0!==a&&a,o=(0,qi.Z)(e,["classes","className","raised"]);return E.createElement(Ko,(0,_t.Z)({className:(0,yo.Z)(n.root,r),elevation:i?8:1,ref:t},o))})),Joe=(0,Rt.Z)({root:{overflow:"hidden"}},{name:"MuiCard"})(Qoe),$oe=(0,ju.Z)(E.createElement("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos"),ese=function(e){var t=e.route,n=Vt(),r=Nce().isOnline,a=Zce().machineSelected,i=Pce(),o=i.loading,s=i.setLoading,u=(0,E.useState)(!1),l=(0,U.Z)(u,2),c=l[0],d=l[1],h=(0,E.useState)([]),p=(0,U.Z)(h,2),f=p[0],m=p[1],v=(0,E.useState)([]),g=(0,U.Z)(v,2),y=g[0],b=g[1],x=(0,E.useState)(""),w=(0,U.Z)(x,2),k=w[0],S=w[1],T=(0,E.useState)(!1),C=(0,U.Z)(T,2),_=C[0],M=C[1],I=(0,E.useState)({}),N=(0,U.Z)(I,2),A=N[0],R=N[1],O=(0,E.useState)(!1),D=(0,U.Z)(O,2),L=D[0],P=D[1],F=(0,E.useState)(""),j=(0,U.Z)(F,2),z=j[0],B=j[1],W=(0,E.useState)("Todos"),V=(0,U.Z)(W,2),Z=V[0],H=V[1],G=(Ue().id,(0,E.useState)({})),q=(0,U.Z)(G,2),X=q[0],Y=q[1];new String;t.toString(),(0,E.useEffect)((function(){"inspection"===t?S("Inspecci\xf3n"):"maintenance"===t?S("Mantenci\xf3n"):"machines"===t&&S("M\xe1quinas")}),[t]),(0,E.useEffect)((function(){console.log(a),a&&(Y(a),r?En(a.equid).then((function(e){e.data&&(console.log(e.data.reverse()),m(e.data.reverse()),b(e.data.reverse()),setTimeout((function(){}),500))})):alert("Dispoitivo sin conexi\xf3n a internet. No se podr\xe1 mostrar el hist\xf3rico.")),s(!1)}),[a]);var K=Be(),Q=function(e){"all"===e?(H("Todos"),m(y.reverse())):"Mantenci\xf3n"===e||"Inspecci\xf3n"===e?(H(e),m(y.filter((function(t){if(t.reportType===e)return t})).reverse())):(H(e),m(y.filter((function(t){if(t.state===e)return t})).reverse()))},J=function(){var e=Jn(Kn().mark((function e(t){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,Vn(t);case 3:n=e.sent,setTimeout((function(){n&&(console.log(n),X.image=n,ln(X))}),1e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:n.pageContainer,item:!0,xs:12,children:(0,xr.jsx)(Joe,{elevation:0,className:"pageCard",children:(0,xr.jsxs)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){K(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsxs)("p",{style:{marginTop:0,marginBottom:0,fontSize:16},children:[k,"/",X.type," ",X.brand," ",X.model,"/N\xfamero interno: ",(0,xr.jsx)("b",{children:X.equ})]})]})})}),(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xs:12,sm:8,md:6,lg:4,xl:4,children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsxs)("div",{style:{padding:15,borderTopLeftRadius:20,borderEndStartRadius:20,backgroundColor:"#F9F9F9",borderRadius:10,minHeight:400},children:[(0,xr.jsx)("h3",{style:{marginTop:5,marginBottom:5},children:X.type}),(0,xr.jsxs)("div",{style:{width:"100%",backgroundColor:"transparent",textAlign:"center"},children:[(0,xr.jsx)("img",{src:X.image?X.image:"/assets/".concat(X.model,".png"),height:180,id:"imageMachine",onClick:function(){!function(e){B(e),P(!0)}(X.image?X.image:"/assets/".concat(X.model,".png"))}}),(0,xr.jsx)("br",{}),(0,xr.jsxs)("button",{onClick:function(){document.getElementById("fotoMaquina").click()},children:[(0,xr.jsx)(Hi,{icon:Tr,style:{marginRight:10}})," Cambiar imagen"]}),(0,xr.jsx)("input",{autoComplete:"off",type:"file",id:"fotoMaquina",accept:"image/x-png,image/jpeg",onChange:function(e){J(e.target.files[0])},hidden:!0})]}),(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)("p",{style:{marginTop:5,marginBottom:5},id:"machineData",children:[(0,xr.jsx)("b",{children:"Marca: "})," ",X.brand," "]})}),(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:[(0,xr.jsx)("b",{children:"Modelo: "})," ",X.model," "]})}),(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:[(0,xr.jsx)("b",{children:"C\xf3digo: "})," ",X.equid," "]})}),(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:[(0,xr.jsx)("b",{children:"Hor\xf3metro Actual: "})," ",Number(X.hourMeter)/36e5," hrs "]})}),(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:[(0,xr.jsx)("b",{children:"N\xfamero Interno: "})," ",X.equ," "]})})]})})}),(0,xr.jsx)(Ns,{item:!0,sm:12,md:7,lg:8,xl:8,children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsxs)("div",{style:{padding:15,backgroundColor:"#F9F9F9",width:"100%",height:"calc(100vh - 220px)",position:"relative",borderRadius:10},children:[(0,xr.jsxs)("div",{style:{position:"absolute",top:10,right:10},children:[(0,xr.jsx)("button",{style:{float:"left",marginRight:10},onClick:function(){Q("Mantenci\xf3n")},children:"Mantenciones"}),(0,xr.jsx)("button",{style:{float:"left",marginRight:10},onClick:function(){Q("Inspecci\xf3n")},children:"Inspecciones"}),(0,xr.jsx)("button",{style:{float:"left",marginRight:10},onClick:function(){Q("all")},children:"Todos"}),(0,xr.jsx)("button",{style:{float:"left",marginRight:10},onClick:function(){Q("Completadas")},children:"Completados"}),(0,xr.jsx)("button",{style:{float:"left",marginRight:10},onClick:function(){Q("En proceso")},children:"En proceso"}),(0,xr.jsx)("button",{style:{float:"left"},onClick:function(){Q("Asignar")},children:"Por asignar"})]}),(0,xr.jsxs)("h3",{children:["Listado de mantenciones. ",(0,xr.jsxs)("b",{style:{color:"red"},children:["Filtro: ",Z]})]}),(0,xr.jsxs)("div",{style:{overflowY:"auto",height:"calc(100vh - 300px)",width:"100%",padding:20},children:[navigator.onLine&&0===f.length&&(0,xr.jsx)("p",{children:"No hay mantenciones"}),navigator.onLine&&f.length>0&&f.reverse().map((function(e,t){return(0,xr.jsxs)("div",{style:{width:"95%",padding:10,margin:10,display:"block",height:100,borderBottomStyle:"solid",borderBottomColor:"#ccc",borderBottomWidth:2},children:[(0,xr.jsxs)("div",{style:{float:"left"},children:[(0,xr.jsxs)("h4",{style:{margin:0},children:["OT N\xb0",e.idIndex]}),(0,xr.jsxs)("p",{style:{margin:0},children:["C\xf3digo SAP ",e.sapId]}),(0,xr.jsxs)("p",{style:{margin:0},children:["Estado: ",e.state]}),"Completadas"===e.state&&(0,xr.jsx)("a",{href:e.urlPdf,target:"_blank",children:"Imprimir OT"})]}),(0,xr.jsx)("button",{style:{float:"right"},onClick:function(){return function(e){M(!0),R(e)}(e)},children:(0,xr.jsx)(Hi,{icon:Or})})]},t)})),!navigator.onLine&&(0,xr.jsx)("p",{children:"Debe contar con conexi\xf3n a internet."})]})]})})}),(0,xr.jsx)(Wo,{open:c,close:!c,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,xr.jsx)("div",{style:{height:"100%",width:"100%",backgroundColor:"#333"},children:(0,xr.jsx)(dd,{onClick:function(){setTimeout((function(){d(!c)}),500)},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,xr.jsx)(rl,{style:{color:"#ccc"}})})})}),_&&(0,xr.jsx)(uce,{open:_,report:A,handleClose:function(){M(!1)}}),o&&(0,xr.jsx)(Jle,{open:o}),L&&(0,xr.jsx)(kue,{open:L,image:z,handleClose:function(){P(!1)}})]})]})})})})})},tse=function(e){var t=e.machine,n=e.route,r=Be(),a={brand:t.brand,id:t.id,model:t.model,pIDPM:t.pIDPM,type:t.type};return(0,xr.jsxs)(nl,{className:"buttonContent",style:{borderRadius:20},onClick:function(){r("/".concat(n,"/").concat(JSON.stringify(a)))},children:[(0,xr.jsx)("img",{className:"imageMachine",src:"data:".concat(t.image.data),alt:t.model}),(0,xr.jsx)("div",{style:{position:"absolute",bottom:5,width:"100%",textAlign:"center"},children:"".concat(t.type," ").concat(t.brand," ").concat(t.model)})]})},nse=(Bt((function(e){return{root:{display:"inline-block",textAlign:"center"},icon:{marginBottom:15},button:{minWidth:180}}})),Bt((function(e){return{root:{display:"inline-block",textAlign:"center",padding:10,width:"25%",backgroundColor:"transparent"},icon:{padding:20,width:"100%"},button:{minWidth:"100%"},buttonSelection:{backgroundColor:"#F9F9F9",color:"#505050",width:"100%",minHeight:340,borderRadius:20,fontFamily:"Raleway",textTransform:"none",margin:10},iconButton:{color:"#BE2E26"}}}))),rse=function(e){var t=e.variant,n=e.disableButton,r=Ece().dictionary,a=nse(),i=Be();return(0,xr.jsx)(nl,{onClick:function(){i("/".concat(t))},variant:"contained",className:a.buttonSelection,disabled:n,children:(0,xr.jsxs)("div",{className:a.icon,children:[function(){switch(t){case"inspection":return(0,xr.jsx)(Hi,{icon:Gr,size:"4x",className:a.iconButton});case"assignment":return(0,xr.jsx)(Hi,{icon:jr,size:"4x",className:a.iconButton});case"machines":return(0,xr.jsx)(Hi,{icon:Jr,size:"4x",className:a.iconButton});case"maintenance":return(0,xr.jsx)(Hi,{icon:Kr,size:"4x",className:a.iconButton});case"reports":return(0,xr.jsx)(Hi,{icon:_r,size:"4x",className:a.iconButton});case"administration":return(0,xr.jsx)(Hi,{icon:ea,size:"4x",className:a.iconButton});case"users":return(0,xr.jsx)(Hi,{icon:ta,size:"4x",className:a.iconButton});case"roles":return(0,xr.jsx)(Hi,{icon:zr,size:"4x",className:a.iconButton});case"patterns":return(0,xr.jsx)(Hi,{icon:Er,size:"4x",className:a.iconButton})}}(),(0,xr.jsx)("br",{}),(0,xr.jsx)("p",{className:"button-font-size",children:function(){switch(t){case"inspection":return r.welcome.inspectionButton;case"assignment":return r.welcome.assignmentButton;case"machines":return r.welcome.machinesButton;case"maintenance":return r.welcome.maintenanceButton;case"reports":return r.welcome.reportsButton;case"administration":return r.welcome.administrationButton;case"users":return r.admin.adminUsersButton;case"roles":return r.roles.rolesUsersButton;case"patterns":return r.patterns.patternsButton}}()})]})})},ase=function(e){var t=e.route,n=Vt(),r=Zce().machines,a=Be(),i=(0,E.useState)(),o=(0,U.Z)(i,2),s=o[0],u=o[1];return(0,E.useEffect)((function(){"inspection"===t?u("Inspecci\xf3n"):"maintenance"===t?u("Mantenci\xf3n"):"machines"===t&&u("M\xe1quinas")}),[t]),(0,xr.jsx)(Jc,{height:"90%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:n.pageContainer,item:!0,xs:12,children:(0,xr.jsx)("div",{className:"pageCard",children:(0,xr.jsxs)(Ns,{container:!0,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){a(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsx)("p",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"".concat(s)})]})})}),(0,xr.jsx)(Ns,{container:!0,spacing:5,justifyContent:"flex-start",style:{textAlign:"center",height:"75vh",overflowY:"auto"},children:r.map((function(e){return(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:4,lg:4,xl:4,children:(0,xr.jsx)(tse,{machine:e,route:t})},e.id)}))})]})})})})})},ise=function(){var e=Vt();return(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:e.pageContainer,item:!0,xs:12,children:(0,xr.jsx)(Joe,{elevation:0,className:(0,yo.Z)("pageCard",e.noNavBarMargin),children:(0,xr.jsx)(Ns,{container:!0,style:{height:"100%"},alignItems:"center",justifyContent:"center",children:(0,xr.jsx)(Ns,{container:!0,item:!0,spacing:8,justifyContent:"center",children:(0,xr.jsx)(Ns,{item:!0,children:(0,xr.jsx)(td,{size:200})})})})})})})})},ose=function(e){var t=e.route,n=Zce(),r=n.machinesBySite,a=n.setMachineSelected,i=(0,E.useState)(""),o=(0,U.Z)(i,2),s=o[0],u=o[1],l=(0,E.useState)([]),c=(0,U.Z)(l,2),d=c[0],h=c[1],p=(0,E.useState)(!1),f=(0,U.Z)(p,2),m=f[0],v=f[1],g=(0,E.useState)(!1),y=(0,U.Z)(g,2),b=y[0],x=y[1],w=(0,E.useState)(),k=(0,U.Z)(w,2),S=k[0],T=k[1],C=Be(),_=Vt(),M=Ue().id;(0,E.useEffect)((function(){T(JSON.parse(M))}),[]),(0,E.useEffect)((function(){"inspection"===t?u("Inspecci\xf3n"):"maintenance"===t?u("Mantenci\xf3n"):"machines"===t&&u("M\xe1quinas")}),[t]),(0,E.useEffect)((function(){if(r.length>0&&S){var e=r.filter((function(e){if(e.model===JSON.parse(M).model)return e})).sort((function(e,t){return e.equ-t.equ}));h(e),x(!0)}}),[r,S]);return(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:_.pageContainer,item:!0,xs:12,children:(0,xr.jsx)(Joe,{elevation:0,className:"pageCard",children:S&&(0,xr.jsxs)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){C(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsx)("p",{style:{marginTop:0,marginBottom:0,fontSize:16},children:S&&"".concat(s,"/").concat(S.type," ").concat(S.brand," ").concat(S.model)})]})})}),(0,xr.jsx)("div",{style:{width:"100%",paddingLeft:20,height:40,textAlign:"center"},children:("793-F"===S.model||"PC5500"===S.model)&&(0,xr.jsx)("button",{style:{height:30,borderRadius:20,position:"relative",right:10,paddingLeft:30,paddingRight:30},onClick:function(){return openCloseModal()},children:(0,xr.jsx)("strong",{children:"Ver modelo 3D de ".concat(S.type," ").concat(S.brand," ").concat(S.model)})})}),(0,xr.jsxs)(ku,{style:{width:"100vw",marginRight:11,overflowY:"scroll",maxHeight:"70vh",paddingLeft:20,paddingRight:20},children:[!b&&(0,xr.jsx)(ise,{}),b&&d.map((function(e,t){return(0,xr.jsxs)(Ns,{container:!0,style:{minHeight:148,marginBottom:20,padding:20,borderStyle:"solid",borderWidth:2,borderColor:"#CCC",borderRadius:20},children:[(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:3,lg:2,children:(0,xr.jsx)("img",{src:e.image?e.image:"../assets/no-image.png",style:{height:120,width:"100%",objectFit:"cover"}})}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:3,lg:2,children:(0,xr.jsx)("div",{style:{padding:10},children:(0,xr.jsxs)("h1",{style:{margin:0},children:[" ",(0,xr.jsxs)("strong",{children:[e.type," ",e.equ]})," "]})})}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:3,lg:3,children:(0,xr.jsxs)("div",{style:{padding:10},children:[(0,xr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:["Marca: ",e.brand.toUpperCase()]}),(0,xr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:["Modelo: ",e.model]}),(0,xr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:["C\xf3digo: ",e.equid]})]})}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:3,lg:3,children:(0,xr.jsxs)("div",{style:{padding:10},children:[(0,xr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:["Hor\xf3metro Actual: ",Number(e.hourMeter)/36e5]}),(0,xr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:["N\xfamero Interno: ",e.equ]}),(0,xr.jsxs)("p",{style:{marginTop:5,marginBottom:5},children:["Serie motor: ",e.enginesnr]})]})}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:12,lg:2,children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,xr.jsx)("button",{style:{width:100,height:30,borderRadius:20,marginLeft:6},onClick:function(){return a(t=e),void C("machine-detail/".concat(t.equid));var t},children:(0,xr.jsx)("strong",{children:"Ver m\xe1s"})})})})]},t)})),0===d.length&&b&&(0,xr.jsx)(Ns,{container:!0,style:{minHeight:148,marginBottom:20,padding:20,borderStyle:"solid",borderWidth:2,borderColor:"#CCC",borderRadius:20},children:(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:12,lg:12,children:(0,xr.jsx)("p",{children:"Obra no gestiona m\xe1quina seleccionada."})})})]}),(0,xr.jsx)("div",{children:(0,xr.jsx)(Wo,{open:m,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,xr.jsxs)(Jc,{sx:qt,children:[(0,xr.jsx)(Moe,{machine:S}),(0,xr.jsx)(dd,{onClick:function(){v(!1)},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},color:"primary",children:(0,xr.jsx)(rl,{})})]})})})]})})})})})},sse=n.p+"static/media/ICV-transparent.a120acf733f8c1757fb2.png",use=function(){var e=function(){return(0,xr.jsxs)(Joe,{elevation:0,className:"pageCard noNavBarMargin",children:[(0,xr.jsxs)("div",{style:{textAlign:"center",width:"100%",marginTop:60},children:[(0,xr.jsx)("img",{src:sse,height:100,alt:""}),(0,xr.jsxs)("p",{style:{marginTop:0,fontSize:6.5,textDecoration:"underline"},children:[" ",(0,xr.jsx)("strong",{children:"INGENIER\xcdA CIVIL VICENTE"})," "]}),(0,xr.jsx)("p",{style:{fontSize:"2em",marginBottom:0},children:"Iniciar sesi\xf3n"}),(0,xr.jsxs)("p",{style:{fontSize:10,marginTop:0},children:[" ",Yt.version," "]})]}),(0,xr.jsx)(MK,{})]})};(0,E.useEffect)((function(){t()}),[]);var t=function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.indexedDB.databases();case 2:(t=e.sent).length>0&&t.forEach((function(e,t){"3Ds"===e.name||"MachinesParts"===e.name||"Executions"===e.name||"Trucks"===e.name||"Pautas"===e.name||window.indexedDB.deleteDatabase(e.name)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,xr.jsxs)("div",{style:{height:"100%",display:"block"},children:[(0,xr.jsx)(zoe,{smDown:!0,children:(0,xr.jsx)("div",{style:{float:"left",width:"50%",height:"100%"},children:e()})}),(0,xr.jsx)(zoe,{smDown:!0,children:(0,xr.jsx)("div",{className:"loginBacgroundImage"})}),(0,xr.jsx)(zoe,{mdUp:!0,children:(0,xr.jsx)("div",{children:e()})})]})},lse=(0,E.createContext)(),cse=function(e){var t=bce(),n=t.userData,r=t.isAuthenticated,a=(0,E.useState)([]),i=(0,U.Z)(a,2),o=i[0],s=i[1],u=(0,E.useState)(),l=(0,U.Z)(u,2),c=l[0],d=l[1];(0,E.useEffect)((function(){n&&r&&(console.log(n._id,r),p())}),[n,r]);var h=function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)},p=function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dn(n._id);case 2:t=e.sent,console.log(t.data),s(t.data.sort(h)),d(t.data.sort(h)[0]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f={myNotifications:o,lastNotification:c,getNotifications:p};return(0,xr.jsx)(lse.Provider,br({value:f},e))},dse=function(){return(0,E.useContext)(lse)},hse=function(){var e=bce(),t=e.admin,n=e.isOperator,r=e.isSapExecutive,a=e.isShiftManager,i=e.isChiefMachinery,o=(e.userData,Uce()),s=o.date,u=o.hour,l=dse().lastNotification,c=(0,E.useState)(!1),d=(0,U.Z)(c,2),h=d[0],p=(d[1],(0,E.useState)(!1)),f=(0,U.Z)(p,2),m=f[0],v=f[1],g=(0,E.useState)(0),y=(0,U.Z)(g,2),b=y[0],x=(y[1],(0,E.useState)("")),w=(0,U.Z)(x,2),k=w[0],S=(w[1],(0,E.useState)(!1)),T=(0,U.Z)(S,2),C=T[0],_=(T[1],(0,E.useState)(!0)),M=(0,U.Z)(_,2),I=M[0],N=M[1],A=(0,E.useState)(!0),R=(0,U.Z)(A,2),O=R[0],D=R[1],L=(0,E.useState)(!1),P=(0,U.Z)(L,2),F=(P[0],P[1],(0,E.useState)(!1)),j=(0,U.Z)(F,2),z=(j[0],j[1],(0,E.useState)(!0)),B=(0,U.Z)(z,2),W=(B[0],B[1]),V=(0,E.useState)([]),Z=(0,U.Z)(V,2),H=(Z[0],Z[1],(0,E.useState)("Sin notificaciones pendientes")),G=(0,U.Z)(H,2),q=(G[0],G[1],(0,E.useState)("Sin informaciones pendientes")),X=(0,U.Z)(q,2),Y=X[0],K=(X[1],(0,E.useState)(!0)),Q=(0,U.Z)(K,2);Q[0],Q[1];(0,E.useEffect)((function(){(t||r||a||i)&&N(!1),t&&D(!1)}),[t,n,r,a,i]);var J=Be();window.addEventListener("online",(function(){W(!0);var e=Number(localStorage.getItem("timeOffline"));Date.now()<e+216e5&&(localStorage.setItem("revisado",!0),localStorage.removeItem("timeOffline"))}));window.addEventListener("offline",(function(){W(!1),localStorage.getItem("timeOffline")||$(Date.now())}));var $=function(e){localStorage.setItem("timeOffline",e),localStorage.setItem("revisado",!1)};(0,E.useEffect)((function(){ee()}),[]);var ee=function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,xr.jsxs)("div",{children:[(0,xr.jsxs)("div",{className:"container",children:[(0,xr.jsx)(Ns,{container:!0,spacing:5,children:(0,xr.jsx)("div",{children:(0,xr.jsxs)("p",{className:"titulo",children:["Hola ",localStorage.getItem("name")," \xbfPor d\xf3nde quieres comenzar hoy?"]})})}),(0,xr.jsxs)(Ns,{container:!0,spacing:5,children:[(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:6,lg:4,children:(0,xr.jsxs)("div",{className:"notificaciones reloj",children:[(0,xr.jsxs)("p",{className:"reloj-fecha",children:[" ",s," "]}),(0,xr.jsxs)("p",{className:"reloj-hora",children:[" ",u," hs "]})]})}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:6,lg:4,children:(0,xr.jsxs)("button",{className:"notificaciones alertas",onClick:function(){return J("/notifications")},children:[(0,xr.jsxs)("p",{className:"notificaciones-texto",children:[" ",(0,xr.jsx)("b",{children:"\xdaltima Notificaci\xf3n:"})," "]}),(0,xr.jsxs)("p",{className:"notificaciones-texto",children:[" ",l&&l.message," "]})]})}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:6,lg:4,children:(0,xr.jsxs)("button",{className:"notificaciones alertas",onClick:function(){return J("/assignment")},children:[(n||"inspectionWorker"===localStorage.getItem("role")||"maintenceOperator"===localStorage.getItem("role"))&&(0,xr.jsxs)("p",{className:"notificaciones-texto",children:[" ",(0,xr.jsx)("b",{children:"OT Listas a enviar:"})," "]}),(0,xr.jsxs)("p",{className:"notificaciones-texto",children:[" ",Y]})]})})]}),(0,xr.jsx)("br",{}),(0,xr.jsxs)(Ns,{container:!0,spacing:5,children:[(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,xr.jsx)(rse,{variant:"assignment",disableButton:C})}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,xr.jsx)(rse,{variant:"machines",disableButton:C})}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,xr.jsx)(rse,{variant:"reports",disableButton:I})}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:6,lg:3,children:(0,xr.jsx)(rse,{variant:"administration",disableButton:O})})]})]}),(0,xr.jsx)(nd,{open:h,progress:b,loadingData:k,withProgress:!0}),(0,xr.jsx)(fd,{open:m,closeModal:function(){v(!1)}})]})},pse=n.p+"static/media/Iniciar sesio\u0301n-1.0c974736fa06866abb55.png",fse=function(){var e=Vt(),t=function(){return(0,xr.jsxs)(Joe,{elevation:0,className:(0,yo.Z)("pageCard",e.noNavBarMargin),children:[(0,xr.jsxs)("div",{style:{textAlign:"center",width:"100%",marginTop:60},children:[(0,xr.jsx)("img",{src:sse,height:100,alt:""}),(0,xr.jsxs)("p",{style:{marginTop:0,fontSize:6.5,textDecoration:"underline"},children:[" ",(0,xr.jsx)("strong",{children:"INGENIER\xcdA CIVIL VICENTE"})," "]}),(0,xr.jsx)("p",{style:{fontSize:"2em"},children:"Recuperar Contrase\xf1a"})]}),(0,xr.jsx)(UK,{})]})};return(0,xr.jsxs)("div",{style:{height:"100%",display:"block"},children:[(0,xr.jsx)(zoe,{smDown:!0,children:(0,xr.jsx)("div",{style:{float:"left",width:"50%",height:"100%"},children:t()})}),(0,xr.jsx)(zoe,{smDown:!0,children:(0,xr.jsx)("div",{style:{float:"left",width:"50%",height:"100vh",display:"block"},children:(0,xr.jsx)("img",{src:pse,style:{objectFit:"cover",width:"100%",height:"100%"}})})}),(0,xr.jsx)(zoe,{mdUp:!0,children:(0,xr.jsx)("div",{children:t()})})]})},mse=function(){var e=Ue().id,t=Vt(),n=function(){return(0,xr.jsxs)(Joe,{elevation:0,className:(0,yo.Z)("pageCard",t.noNavBarMargin),children:[(0,xr.jsxs)("div",{style:{textAlign:"center",width:"100%",marginTop:60},children:[(0,xr.jsx)("img",{src:sse,height:100,alt:""}),(0,xr.jsxs)("p",{style:{marginTop:0,fontSize:6.5,textDecoration:"underline"},children:[" ",(0,xr.jsx)("strong",{children:"INGENIER\xcdA CIVIL VICENTE"})," "]})]}),(0,xr.jsx)(VK,{id:e})]})};return(0,xr.jsxs)("div",{style:{height:"100%",display:"block"},children:[(0,xr.jsx)(zoe,{smDown:!0,children:(0,xr.jsx)("div",{style:{float:"left",width:"50%",height:"100%"},children:n()})}),(0,xr.jsx)(zoe,{smDown:!0,children:(0,xr.jsx)("div",{style:{float:"left",width:"50%",height:"100vh",display:"block"},children:(0,xr.jsx)("img",{src:pse,style:{objectFit:"cover",width:"100%",height:"100%"}})})}),(0,xr.jsx)(zoe,{mdUp:!0,children:(0,xr.jsx)("div",{children:n()})})]})},vse=function(){var e=(0,E.useState)([]),t=(0,U.Z)(e,2),n=(t[0],t[1],(0,E.useState)([])),r=(0,U.Z)(n,2),a=(r[0],r[1]);return(0,E.useEffect)((function(){on().then((function(e){e.data&&a(e.data)}))}),[]),(0,xr.jsx)(Jc,{children:(0,xr.jsx)("div",{children:(0,xr.jsx)("h1",{children:"Hello!!"})})})},gse=(Bt((function(e){return{root:{"& :-webkit-autofill":{"-webkit-transition-delay":"9999s","-webkit-transition":"color 9999s ease-out, background-color 9999s ease-out"}},lightVariant:{"& .Mui-focused":{color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"white!important"}},"& .MuiInputBase-input":{color:"white"}},darkVariant:{"& .Mui-focused .MuiInputAdornment-root":{color:e.palette.primary.main}}}})),Bt((function(e){return{root:{padding:20,backgroundColor:"rgba(0, 0, 0, 0)",border:"5px solid gray",borderRadius:0,boxShadow:"none"},fichaText:{fontSize:"1.2rem",color:e.palette.primary.main},name:{fontWeight:"bold"}}})),(0,ju.Z)(E.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel"));function yse(e){return"Backspace"===e.key||"Delete"===e.key}var bse=E.forwardRef((function(e,t){var n=e.avatar,r=e.classes,a=e.className,i=e.clickable,o=e.color,s=void 0===o?"default":o,u=e.component,l=e.deleteIcon,c=e.disabled,d=void 0!==c&&c,h=e.icon,p=e.label,f=e.onClick,m=e.onDelete,v=e.onKeyDown,g=e.onKeyUp,y=e.size,b=void 0===y?"medium":y,x=e.variant,w=void 0===x?"default":x,k=(0,qi.Z)(e,["avatar","classes","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"]),S=E.useRef(null),T=(0,uo.Z)(S,t),C=function(e){e.stopPropagation(),m&&m(e)},_=!(!1===i||!f)||i,M="small"===b,I=u||(_?ps:"div"),N=I===ps?{component:"div"}:{},A=null;if(m){var R=(0,yo.Z)("default"!==s&&("default"===w?r["deleteIconColor".concat((0,bo.Z)(s))]:r["deleteIconOutlinedColor".concat((0,bo.Z)(s))]),M&&r.deleteIconSmall);A=l&&E.isValidElement(l)?E.cloneElement(l,{className:(0,yo.Z)(l.props.className,r.deleteIcon,R),onClick:C}):E.createElement(gse,{className:(0,yo.Z)(r.deleteIcon,R),onClick:C})}var O=null;n&&E.isValidElement(n)&&(O=E.cloneElement(n,{className:(0,yo.Z)(r.avatar,n.props.className,M&&r.avatarSmall,"default"!==s&&r["avatarColor".concat((0,bo.Z)(s))])}));var D=null;return h&&E.isValidElement(h)&&(D=E.cloneElement(h,{className:(0,yo.Z)(r.icon,h.props.className,M&&r.iconSmall,"default"!==s&&r["iconColor".concat((0,bo.Z)(s))])})),E.createElement(I,(0,_t.Z)({role:_||m?"button":void 0,className:(0,yo.Z)(r.root,a,"default"!==s&&[r["color".concat((0,bo.Z)(s))],_&&r["clickableColor".concat((0,bo.Z)(s))],m&&r["deletableColor".concat((0,bo.Z)(s))]],"default"!==w&&[r.outlined,{primary:r.outlinedPrimary,secondary:r.outlinedSecondary}[s]],d&&r.disabled,M&&r.sizeSmall,_&&r.clickable,m&&r.deletable),"aria-disabled":!!d||void 0,tabIndex:_||m?0:void 0,onClick:f,onKeyDown:function(e){e.currentTarget===e.target&&yse(e)&&e.preventDefault(),v&&v(e)},onKeyUp:function(e){e.currentTarget===e.target&&(m&&yse(e)?m(e):"Escape"===e.key&&S.current&&S.current.blur()),g&&g(e)},ref:T},N,k),O||D,E.createElement("span",{className:(0,yo.Z)(r.label,M&&r.labelSmall)},p),A)})),xse=(0,Rt.Z)((function(e){var t="light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],n=(0,es.Fq)(e.palette.text.primary,.26);return{root:{fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:e.palette.getContrastText(t),backgroundColor:t,borderRadius:16,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:"none",padding:0,verticalAlign:"middle",boxSizing:"border-box","&$disabled":{opacity:.5,pointerEvents:"none"},"& $avatar":{marginLeft:5,marginRight:-6,width:24,height:24,color:"light"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],fontSize:e.typography.pxToRem(12)},"& $avatarColorPrimary":{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.dark},"& $avatarColorSecondary":{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.dark},"& $avatarSmall":{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)}},sizeSmall:{height:24},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},disabled:{},clickable:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover, &:focus":{backgroundColor:(0,es._4)(t,.08)},"&:active":{boxShadow:e.shadows[1]}},clickableColorPrimary:{"&:hover, &:focus":{backgroundColor:(0,es._4)(e.palette.primary.main,.08)}},clickableColorSecondary:{"&:hover, &:focus":{backgroundColor:(0,es._4)(e.palette.secondary.main,.08)}},deletable:{"&:focus":{backgroundColor:(0,es._4)(t,.08)}},deletableColorPrimary:{"&:focus":{backgroundColor:(0,es._4)(e.palette.primary.main,.2)}},deletableColorSecondary:{"&:focus":{backgroundColor:(0,es._4)(e.palette.secondary.main,.2)}},outlined:{backgroundColor:"transparent",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:(0,es.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity)},"& $avatar":{marginLeft:4},"& $avatarSmall":{marginLeft:2},"& $icon":{marginLeft:4},"& $iconSmall":{marginLeft:2},"& $deleteIcon":{marginRight:5},"& $deleteIconSmall":{marginRight:3}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(e.palette.primary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:(0,es.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity)}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(e.palette.secondary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:(0,es.Fq)(e.palette.secondary.main,e.palette.action.hoverOpacity)}},avatar:{},avatarSmall:{},avatarColorPrimary:{},avatarColorSecondary:{},icon:{color:"light"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],marginLeft:5,marginRight:-6},iconSmall:{width:18,height:18,marginLeft:4,marginRight:-4},iconColorPrimary:{color:"inherit"},iconColorSecondary:{color:"inherit"},label:{overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},labelSmall:{paddingLeft:8,paddingRight:8},deleteIcon:{WebkitTapHighlightColor:"transparent",color:n,height:22,width:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:(0,es.Fq)(n,.4)}},deleteIconSmall:{height:16,width:16,marginRight:4,marginLeft:-4},deleteIconColorPrimary:{color:(0,es.Fq)(e.palette.primary.contrastText,.7),"&:hover, &:active":{color:e.palette.primary.contrastText}},deleteIconColorSecondary:{color:(0,es.Fq)(e.palette.secondary.contrastText,.7),"&:hover, &:active":{color:e.palette.secondary.contrastText}},deleteIconOutlinedColorPrimary:{color:(0,es.Fq)(e.palette.primary.main,.7),"&:hover, &:active":{color:e.palette.primary.main}},deleteIconOutlinedColorSecondary:{color:(0,es.Fq)(e.palette.secondary.main,.7),"&:hover, &:active":{color:e.palette.secondary.main}}}}),{name:"MuiChip"})(bse),wse=E.forwardRef((function(e,t){var n,r=e.classes,a=e.className,i=e.component,o=void 0===i?"li":i,s=e.disableGutters,u=void 0!==s&&s,l=e.ListItemClasses,c=e.role,d=void 0===c?"menuitem":c,h=e.selected,p=e.tabIndex,f=(0,qi.Z)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(n=void 0!==p?p:-1),E.createElement(id,(0,_t.Z)({button:!0,role:d,tabIndex:n,component:o,selected:h,disableGutters:u,classes:(0,_t.Z)({dense:r.dense},l),className:(0,yo.Z)(r.root,a,h&&r.selected,!u&&r.gutters),ref:t},f))})),kse=(0,Rt.Z)((function(e){return{root:(0,_t.Z)({},e.typography.body1,(0,Pt.Z)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:(0,_t.Z)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(wse);var Sse=E.createContext();var Ese=E.createContext(),Tse=E.forwardRef((function(e,t){var n,r,a=e.align,i=void 0===a?"inherit":a,o=e.classes,s=e.className,u=e.component,l=e.padding,c=e.scope,d=e.size,h=e.sortDirection,p=e.variant,f=(0,qi.Z)(e,["align","classes","className","component","padding","scope","size","sortDirection","variant"]),m=E.useContext(Sse),v=E.useContext(Ese),g=v&&"head"===v.variant;u?(r=u,n=g?"columnheader":"cell"):r=g?"th":"td";var y=c;!y&&g&&(y="col");var b=l||(m&&m.padding?m.padding:"normal"),x=d||(m&&m.size?m.size:"medium"),w=p||v&&v.variant,k=null;return h&&(k="asc"===h?"ascending":"descending"),E.createElement(r,(0,_t.Z)({ref:t,className:(0,yo.Z)(o.root,o[w],s,"inherit"!==i&&o["align".concat((0,bo.Z)(i))],"normal"!==b&&o["padding".concat((0,bo.Z)(b))],"medium"!==x&&o["size".concat((0,bo.Z)(x))],"head"===w&&m&&m.stickyHeader&&o.stickyHeader),"aria-sort":k,role:n,scope:y},f))})),Cse=(0,Rt.Z)((function(e){return{root:(0,_t.Z)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===e.palette.type?(0,es.$n)((0,es.Fq)(e.palette.divider,1),.88):(0,es._j)((0,es.Fq)(e.palette.divider,1),.68)),textAlign:"left",padding:16}),head:{color:e.palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},body:{color:e.palette.text.primary},footer:{color:e.palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},sizeSmall:{padding:"6px 24px 6px 16px","&:last-child":{paddingRight:16},"&$paddingCheckbox":{width:24,padding:"0 12px 0 16px","&:last-child":{paddingLeft:12,paddingRight:16},"& > *":{padding:0}}},paddingCheckbox:{width:48,padding:"0 0 0 4px","&:last-child":{paddingLeft:0,paddingRight:4}},paddingNone:{padding:0,"&:last-child":{padding:0}},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right",flexDirection:"row-reverse"},alignJustify:{textAlign:"justify"},stickyHeader:{position:"sticky",top:0,left:0,zIndex:2,backgroundColor:e.palette.background.default}}}),{name:"MuiTableCell"})(Tse),_se=(0,ju.Z)(E.createElement("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Mse=(0,ju.Z)(E.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),Ise=E.createElement(Mse,null),Nse=E.createElement(_se,null),Ase=E.createElement(_se,null),Rse=E.createElement(Mse,null),Ose=E.forwardRef((function(e,t){var n=e.backIconButtonProps,r=e.count,a=e.nextIconButtonProps,i=e.onChangePage,o=void 0===i?function(){}:i,s=e.onPageChange,u=void 0===s?function(){}:s,l=e.page,c=e.rowsPerPage,d=(0,qi.Z)(e,["backIconButtonProps","count","nextIconButtonProps","onChangePage","onPageChange","page","rowsPerPage"]),h=lo();return E.createElement("div",(0,_t.Z)({ref:t},d),E.createElement(ms,(0,_t.Z)({onClick:function(e){o(e,l-1),u(e,l-1)},disabled:0===l,color:"inherit"},n),"rtl"===h.direction?Ise:Nse),E.createElement(ms,(0,_t.Z)({onClick:function(e){o(e,l+1),u(e,l+1)},disabled:-1!==r&&l>=Math.ceil(r/c)-1,color:"inherit"},a),"rtl"===h.direction?Ase:Rse))})),Dse=Ose,Lse=n(2939),Pse=function(e){var t=e.from,n=e.to,r=e.count;return"".concat(t,"-").concat(n," of ").concat(-1!==r?r:"more than ".concat(n))},Fse=[10,25,50,100],jse=E.forwardRef((function(e,t){var n,r=e.ActionsComponent,a=void 0===r?Dse:r,i=e.backIconButtonProps,o=e.backIconButtonText,s=void 0===o?"Previous page":o,u=e.classes,l=e.className,c=e.colSpan,d=e.component,h=void 0===d?Cse:d,p=e.count,f=e.labelDisplayedRows,m=void 0===f?Pse:f,v=e.labelRowsPerPage,g=void 0===v?"Rows per page:":v,y=e.nextIconButtonProps,b=e.nextIconButtonText,x=void 0===b?"Next page":b,w=e.onChangePage,k=e.onPageChange,S=e.onChangeRowsPerPage,T=e.onRowsPerPageChange,C=e.page,_=e.rowsPerPage,M=e.rowsPerPageOptions,I=void 0===M?Fse:M,N=e.SelectProps,A=void 0===N?{}:N,R=(0,qi.Z)(e,["ActionsComponent","backIconButtonProps","backIconButtonText","classes","className","colSpan","component","count","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","nextIconButtonText","onChangePage","onPageChange","onChangeRowsPerPage","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps"]),O=S||T;h!==Cse&&"td"!==h||(n=c||1e3);var D=(0,Lse.Z)(),L=(0,Lse.Z)(),P=A.native?"option":kse;return E.createElement(h,(0,_t.Z)({className:(0,yo.Z)(u.root,l),colSpan:n,ref:t},R),E.createElement(xK,{className:u.toolbar},E.createElement("div",{className:u.spacer}),I.length>1&&E.createElement(ys,{color:"inherit",variant:"body2",className:u.caption,id:L},g),I.length>1&&E.createElement(Yu,(0,_t.Z)({classes:{select:u.select,icon:u.selectIcon},input:E.createElement(Zs,{className:(0,yo.Z)(u.input,u.selectRoot)}),value:_,onChange:O,id:D,labelId:L},A),I.map((function(e){return E.createElement(P,{className:u.menuItem,key:e.value?e.value:e,value:e.value?e.value:e},e.label?e.label:e)}))),E.createElement(ys,{color:"inherit",variant:"body2",className:u.caption},m({from:0===p?0:C*_+1,to:-1!==p?Math.min(p,(C+1)*_):(C+1)*_,count:-1===p?-1:p,page:C})),E.createElement(a,{className:u.actions,backIconButtonProps:(0,_t.Z)({title:s,"aria-label":s},i),count:p,nextIconButtonProps:(0,_t.Z)({title:x,"aria-label":x},y),onChangePage:w,onPageChange:k,page:C,rowsPerPage:_})))})),zse=(0,Rt.Z)((function(e){return{root:{color:e.palette.text.primary,fontSize:e.typography.pxToRem(14),overflow:"auto","&:last-child":{padding:0}},toolbar:{minHeight:52,paddingRight:2},spacer:{flex:"1 1 100%"},caption:{flexShrink:0},selectRoot:{marginRight:32,marginLeft:8},select:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"},selectIcon:{},input:{color:"inherit",fontSize:"inherit",flexShrink:0},menuItem:{},actions:{flexShrink:0,marginLeft:20}}}),{name:"MuiTablePagination"})(jse),Bse=[{color:"#27AE60",name:"Completadas",button:"Detalle",buttonColor:"#F9F9F9",number:null},{color:"#F2C94C",name:"Por cerrar",button:"Detalle",buttonColor:"#F9F9F9",number:null},{color:"#F2994A",name:"En proceso",button:"Detalle",buttonColor:"#F9F9F9",number:null},{color:"#DE4343",name:"Asignar",button:"Detalle",buttonColor:"#F9F9F9",number:null}],Use=[{color:"#27AE60",name:"Completadas",button:"Detalle",buttonColor:"#F9F9F9",number:null},{color:"#F2C94C",name:"Por cerrar",button:"Detalle",buttonColor:"#F9F9F9",number:null},{color:"#F2994A",name:"En proceso",button:"Detalle",buttonColor:"#F9F9F9",number:null},{color:"#DE4343",name:"Asignar",button:"Detalle",buttonColor:"#F9F9F9",number:null}],Wse=function(){var e=Kce().sites,t=bce(),n=t.admin,r=t.isSapExecutive,a=(t.isShiftManager,t.isChiefMachinery,Oce()),i=a.reports,o=a.setListSelected,s=a.listSelected,u=a.listSelectedCache,l=a.setListSelectedCache,c=a.getReports,d=a.loading,h=a.statusReports,p=a.pautas,f=(0,E.useState)([]),m=(0,U.Z)(f,2),v=m[0],g=m[1],y=(0,E.useState)([]),b=(0,U.Z)(y,2),x=b[0],w=b[1],k=(0,E.useState)([]),S=(0,U.Z)(k,2),T=S[0],C=S[1],M=(0,E.useState)([]),I=(0,U.Z)(M,2),N=I[0],A=I[1],R=(0,E.useState)(!1),O=(0,U.Z)(R,2),D=O[0],L=O[1],P=(0,E.useState)(0),F=(0,U.Z)(P,2),j=(F[0],F[1],(0,E.useState)(0)),z=(0,U.Z)(j,2),B=z[0],W=(z[1],(0,E.useState)(0)),V=(0,U.Z)(W,2),Z=(V[0],V[1],(0,E.useState)(0)),H=(0,U.Z)(Z,2),G=H[0],q=(H[1],(0,E.useState)([])),X=(0,U.Z)(q,2),Y=(X[0],X[1],(0,E.useState)(!0)),K=(0,U.Z)(Y,2),Q=K[0],J=K[1],$=(0,E.useState)(10),ee=(0,U.Z)($,2),te=ee[0],ne=ee[1],re=(0,E.useState)(0),ae=(0,U.Z)(re,2),ie=ae[0],oe=ae[1],se=(0,E.useState)([]),ue=(0,U.Z)(se,2),le=ue[0],ce=ue[1],de=(0,E.useState)(0),he=(0,U.Z)(de,2),pe=he[0],fe=he[1],me=(0,E.useState)("nada"),ve=(0,U.Z)(me,2),ge=ve[0],ye=ve[1],be=(0,E.useState)(""),xe=(0,U.Z)(be,2),we=xe[0],ke=xe[1],Se=Be(),Ee=(0,E.useState)(Sr),Te=(0,U.Z)(Ee,2),Ce=(Te[0],Te[1],(0,E.useState)(!1)),_e=(0,U.Z)(Ce,2),Me=_e[0],Ie=_e[1];(0,E.useEffect)((function(){0===p.length?Ie(!1):Ie(!0)}),[p]),(0,E.useEffect)((function(){s.length>0?Re():ce([])}),[s]),(0,E.useEffect)((function(){(n||r)&&L(!0)}),[n,r]),(0,E.useEffect)((function(){if(i.length>0){var e=i.filter((function(e){if("Inspecci\xf3n"===e.reportType)return e})),t=i.filter((function(e){if("Mantenci\xf3n"===e.reportType)return e}));C(Bse),A(Use),g(e),w(t)}}),[i]),(0,E.useEffect)((function(){if(v.length>0){var e=v.filter((function(e){if("Asignar"===e.state)return e})),t=v.filter((function(e){if(e.usersAssigned.length>0&&"En proceso"===e.state&&e.level<3&&(e.level>0||!e.level))return e})),n=v.filter((function(e){if(3===e.level)return e})),r=v.filter((function(e){if(4===e.level)return e})),a=(0,_.Z)(Bse);a[0].number=r.length,a[1].number=n.length,a[2].number=t.length,a[3].number=e.length,a[0].lista=r,a[1].lista=n,a[2].lista=t,a[3].lista=e,C(a)}else{var i=(0,_.Z)(Bse);i[0].number=0,i[1].number=0,i[2].number=0,i[3].number=0,i[0].lista=[],i[1].lista=[],i[2].lista=[],i[3].lista=[],C(i)}}),[v]),(0,E.useEffect)((function(){if(x.length>0){var e=x.filter((function(e){if("Asignar"===e.state)return e})),t=x.filter((function(e){if(e.usersAssigned.length>0&&"En proceso"===e.state&&e.level<3&&(e.level>0||!e.level))return e})),n=x.filter((function(e){if(3===e.level)return e})),r=x.filter((function(e){if(4===e.level)return e})),a=(0,_.Z)(Use);a[0].number=r.length,a[1].number=n.length,a[2].number=t.length,a[3].number=e.length,a[0].lista=r,a[1].lista=n,a[2].lista=t,a[3].lista=e,A(a)}else{var i=(0,_.Z)(Use);i[0].number=0,i[1].number=0,i[2].number=0,i[3].number=0,i[0].lista=[],i[1].lista=[],i[2].lista=[],i[3].lista=[],A(i)}}),[x]),(0,E.useEffect)((function(){(T.length>0||N.length>0)&&localStorage.getItem("buttonSelected")&&document.getElementById(localStorage.getItem("buttonSelected")).click()}),[T,N]);var Ne=function(e,t,n,r){ke(r),localStorage.setItem("buttonSelected",t),(0,_.Z)(T).forEach((function(e,t){document.getElementById("button_".concat(t,"_inspecciones")).style.backgroundColor=e.buttonColor})),(0,_.Z)(N).forEach((function(e,t){document.getElementById("button_".concat(t,"_mantenciones")).style.backgroundColor=e.buttonColor})),document.getElementById(t).style.backgroundColor="#ccc",e.length>0?(o(e.sort(Ae)),l(e),J(!1)):J(!0)},Ae=function(e,t){return t.idIndex-e.idIndex},Re=function(){for(var e=[],t=0*te;t<te+0*te;t++)if(s[t]&&e.push(s[t]),t===te+0*te-1){var n=[].concat(e).sort(Ae);ce(n),fe(s.length)}};return(0,E.useEffect)((function(){var e=(0,_.Z)(u);if("nada"===ge)o(u),fe(u.length);else{var t=[];e.forEach((function(n,r){n.site===ge&&t.push(n),r===e.length-1&&(o(t),fe(t.length))}))}}),[ge]),(0,xr.jsxs)("div",{className:"container-width",children:[(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){Se(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Ordenes"}),(0,xr.jsxs)("button",{hidden:!D,onClick:function(){Me?Se("/reports/create-report"):alert("Espere a que las pautas est\xe9n descargadas")},title:"Nuevo reporte",style:{position:"absolute",right:10,color:"#fff",backgroundColor:"#be2e26",paddingTop:10,paddingBottom:10,paddingLeft:20,paddingRight:20,borderRadius:20,borderColor:"transparent"},children:[(0,xr.jsx)(Hi,{icon:_r,style:{marginRight:10}})," Nueva orden"]})]})})}),(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsxs)(Ns,{item:!0,xs:12,sm:12,md:4,lg:3,xl:3,children:[(0,xr.jsxs)("div",{className:"menu-card",children:[(0,xr.jsx)("h3",{children:"Inspecciones"}),(0,xr.jsxs)("div",{style:{float:"left",width:"calc(45%)",marginRight:5,padding:10,backgroundColor:"#fff",borderRadius:10},children:[(0,xr.jsx)("div",{style:{float:"left",width:"30%"},children:(0,xr.jsx)("p",{style:{fontSize:32,margin:0},children:Bse[3].number})}),(0,xr.jsx)("div",{style:{float:"left",right:5,width:"60%"},children:(0,xr.jsx)("p",{style:{fontSize:10,margin:0},children:"Inspecciones por asignar"})})]}),(0,xr.jsxs)("div",{style:{float:"right",width:"calc(45%)",marginLeft:5,padding:10,backgroundColor:"#fff",borderRadius:10},children:[(0,xr.jsx)("div",{style:{float:"left",width:"30%"},children:(0,xr.jsxs)("p",{style:{fontSize:32,margin:0},children:[B," "]})}),(0,xr.jsx)("div",{style:{float:"left",right:5,width:"60%"},children:(0,xr.jsx)("p",{style:{fontSize:10,margin:0},children:"Inspecciones completadas en la semana"})})]}),(0,xr.jsx)("div",{style:{paddingLeft:10,paddingRight:10,marginTop:"10vh"},children:T.map((function(e,t){return(0,xr.jsxs)(Ns,{container:!0,style:{height:"5vh"},children:[(0,xr.jsx)(Ns,{item:!0,style:{width:"15%"},children:(0,xr.jsx)(Hi,{icon:Cr,size:"2x",style:{marginRight:10},color:e.color})}),(0,xr.jsx)(Ns,{item:!0,style:{width:"30%"},children:(0,xr.jsx)("p",{style:{margin:0,fontSize:12},children:e.name})}),(0,xr.jsx)(Ns,{item:!0,style:{width:"15%"},children:(0,xr.jsx)(xse,{label:e.number,style:{marginLeft:10,marginRight:10}})}),(0,xr.jsx)(Ns,{item:!0,style:{width:"40%",textAlign:"right"},children:(0,xr.jsx)("button",{id:"button_".concat(t,"_inspecciones"),onClick:function(){return Ne(e.lista,"button_".concat(t,"_inspecciones"),0,e.name)},style:{position:"relative",right:5,width:80,height:30,borderRadius:20,backgroundColor:e.buttonColor},children:e.button})})]},t)}))})]}),(0,xr.jsxs)("div",{className:"menu-card",children:[(0,xr.jsx)("h3",{children:"Mantenciones"}),(0,xr.jsxs)("div",{style:{float:"left",width:"calc(45%)",marginRight:5,padding:10,backgroundColor:"#fff",borderRadius:10},children:[(0,xr.jsx)("div",{style:{float:"left",width:"30%"},children:(0,xr.jsx)("p",{style:{fontSize:32,margin:0},children:Use[3].number})}),(0,xr.jsx)("div",{style:{float:"left",right:5,width:"60%"},children:(0,xr.jsx)("p",{style:{fontSize:10,margin:0},children:"Mantenciones por asignar"})})]}),(0,xr.jsxs)("div",{style:{float:"right",width:"calc(45%)",marginLeft:5,padding:10,backgroundColor:"#fff",borderRadius:10},children:[(0,xr.jsx)("div",{style:{float:"left",width:"30%"},children:(0,xr.jsxs)("p",{style:{fontSize:32,margin:0},children:[G," "]})}),(0,xr.jsx)("div",{style:{float:"left",right:5,width:"60%"},children:(0,xr.jsx)("p",{style:{fontSize:10,margin:0},children:"Mantenciones completadas en la semana"})})]}),(0,xr.jsx)("div",{style:{paddingLeft:10,paddingRight:10,marginTop:"10vh"},children:N.map((function(e,t){return(0,xr.jsxs)(Ns,{container:!0,style:{height:"5vh"},children:[(0,xr.jsx)(Ns,{item:!0,style:{width:"15%"},children:(0,xr.jsx)(Hi,{icon:Cr,size:"2x",style:{marginRight:10},color:e.color})}),(0,xr.jsx)(Ns,{item:!0,style:{width:"30%"},children:(0,xr.jsx)("p",{style:{margin:0,fontSize:12},children:e.name})}),(0,xr.jsx)(Ns,{item:!0,style:{width:"15%"},children:(0,xr.jsx)(xse,{label:e.number,style:{marginLeft:10,marginRight:10}})}),(0,xr.jsx)(Ns,{item:!0,style:{width:"40%",textAlign:"right"},children:(0,xr.jsx)("button",{id:"button_".concat(t,"_mantenciones"),onClick:function(){return Ne(e.lista,"button_".concat(t,"_mantenciones"),0,e.name)},style:{position:"relative",right:5,width:80,height:30,borderRadius:20,backgroundColor:e.buttonColor},children:e.button})})]},t)}))})]})]}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:8,lg:9,xl:9,children:Q?(0,xr.jsxs)("div",{children:[(0,xr.jsx)("img",{style:{margin:0,position:"absolute",top:"50%",left:"calc(100%/1.53)",msTransform:"translateY(-50%)",transform:"translateY(-50%)"},src:"../../assets/icons/Arrow.svg",alt:""}),(0,xr.jsx)("div",{style:{textAlign:"center",position:"absolute",top:"55%",left:"calc(100%/1.6)"},children:(0,xr.jsxs)("p",{children:["Selecciona una opci\xf3n ",(0,xr.jsx)("br",{})," para ver el detalle"]})})]}):(0,xr.jsxs)("div",{style:{height:"calc(100vh - 240px)",display:"block",overflowY:"auto"},children:[(0,xr.jsx)("div",{style:{width:"100%",paddingLeft:10,paddingRight:10},children:(0,xr.jsxs)(Ns,{container:!0,style:{width:"100%",borderBottomColor:"#ccc",borderBottomStyle:"solid",borderBottomWidth:1,paddingBottom:10},children:[(0,xr.jsx)(Ns,{item:!0,xl:"auto",children:(0,xr.jsx)("p",{style:{width:80},children:"Filtros: "})}),(0,xr.jsx)(Ns,{item:!0,xl:3,children:(0,xr.jsx)("input",{style:{marginRight:10,marginTop:14,marginBottom:14,width:300},placeholder:"Ingrese N\xb0 OT, M\xe1quina, Flota o C\xf3d. SAP",onChange:function(e){!function(e){console.log(e);var t=(0,_.Z)(u);if(e.length>0){var r=[];t.forEach((function(a,i){0===i&&console.log(a),(a.idIndex.toString().match(Number(e).toString())||a.machineData.model.match(e)||a.machineData.equ.match(e)||a.sapId.match(e))&&("nada"===ge||n&&a.idobra===ge)&&r.push(a),i===t.length-1&&(o(r.sort(Ae)),fe(r.length))}))}else o(u.sort(Ae)),fe(s.length)}(e.target.value)}})}),n&&(0,xr.jsxs)(xr.Fragment,{children:[(0,xr.jsx)(Ns,{item:!0,xl:"auto",children:(0,xr.jsx)("p",{style:{width:80},children:"Obra: "})}),(0,xr.jsx)(Ns,{item:!0,xl:2,children:(0,xr.jsxs)("select",{style:{marginRight:10,marginTop:14,marginBottom:14,width:300},name:"select",onChange:function(e){!function(e){ye(e)}(e.target.value)},children:[(0,xr.jsx)("option",{value:"nada",children:"SELECCIONE OBRA..."}),e.map((function(e,t){return(0,xr.jsx)("option",{value:e.idobra,children:e.descripcion},t)}))]})})]}),(0,xr.jsx)(Ns,{item:!0,sm:"auto",children:(0,xr.jsx)("button",{disabled:d,style:{position:"absolute",right:10,color:"#fff",backgroundColor:d?"#ccc":"#be2e26",paddingTop:10,paddingBottom:10,paddingLeft:20,paddingRight:20,borderRadius:20,borderColor:"transparent",marginRight:10},onClick:c,children:"Actualizar Listado"})})]})}),Q?(0,xr.jsx)(xr.Fragment,{}):(0,xr.jsx)(mue,{list:le,typeReportsSelected:we,statusReports:h,getReports:c}),le.length>0?(0,xr.jsx)(zse,{component:"div",color:"primary",style:{position:"absolute",right:20,bottom:10,borderColor:"#ccc",borderWidth:1,borderStyle:"solid"},onPageChange:function(e,t){oe(t);for(var n=[],r=t*te;r<te+t*te;r++)if(s[r]&&n.push(s[r]),r===te+t*te-1){var a=[].concat(n).sort(Ae);ce(a)}},rowsPerPage:te,onRowsPerPageChange:function(e){ne(parseInt(e.target.value,10)),oe(0);for(var t=[],n=ie*parseInt(e.target.value,10);n<parseInt(e.target.value,10)+ie*parseInt(e.target.value,10);n++)s[n]&&t.push(s[n]),n===parseInt(e.target.value,10)+ie*parseInt(e.target.value,10)-1&&ce(t)},count:pe,page:ie}):(0,xr.jsx)(xr.Fragment,{})]})})]})]})},Vse=function(){var e=bce(),t=e.userData,n=e.admin,r=Oce(),a=r.pautas,i=r.createReport,o=(0,E.useState)([]),s=(0,U.Z)(o,2),u=s[0],l=s[1],c=(0,E.useState)([]),d=(0,U.Z)(c,2),h=d[0],p=d[1],f=(0,E.useState)([]),m=(0,U.Z)(f,2),v=m[0],g=m[1],y=(0,E.useState)(""),b=(0,U.Z)(y,2),x=b[0],w=b[1],k=(0,E.useState)(),S=(0,U.Z)(k,2),T=S[0],C=S[1],_=(0,E.useState)(),M=(0,U.Z)(_,2),I=M[0],N=M[1],A=(0,E.useState)(),R=(0,U.Z)(A,2),O=R[0],D=R[1],L=(0,E.useState)(),P=(0,U.Z)(L,2),F=P[0],j=P[1],z=(0,E.useState)(),B=(0,U.Z)(z,2),W=B[0],V=B[1],Z=(0,E.useState)(!0),H=(0,U.Z)(Z,2),G=H[0],q=H[1],X=(0,E.useState)(!1),Y=(0,U.Z)(X,2),K=Y[0],Q=(Y[1],(0,E.useState)(!0)),J=(0,U.Z)(Q,2),$=J[0],ee=J[1],te=(0,E.useState)(0),ne=(0,U.Z)(te,2),re=ne[0],ae=ne[1],ie=(0,E.useState)(""),oe=(0,U.Z)(ie,2),se=oe[0],ue=oe[1],le=(0,E.useState)(""),ce=(0,U.Z)(le,2),de=ce[0],he=ce[1],pe=(0,E.useState)(""),fe=(0,U.Z)(pe,2),me=fe[0],ve=fe[1],ge=(0,E.useState)(""),ye=(0,U.Z)(ge,2),be=ye[0],xe=ye[1],we=(0,E.useState)(""),ke=(0,U.Z)(we,2),Se=ke[0],Ee=ke[1],Te=(0,E.useState)(""),Ce=(0,U.Z)(Te,2),_e=Ce[0],Me=Ce[1],Ie=(0,E.useState)(""),Ne=(0,U.Z)(Ie,2),Ae=Ne[0],Re=Ne[1],Oe=(0,E.useState)(!1),De=(0,U.Z)(Oe,2),Le=De[0],Pe=De[1],Fe=(0,E.useState)(""),je=(0,U.Z)(Fe,2),ze=je[0],We=je[1],Ve=(0,E.useState)([]),Ze=(0,U.Z)(Ve,2),He=Ze[0],Ge=Ze[1],qe=(0,E.useState)(!1),Xe=(0,U.Z)(qe,2),Ye=Xe[0],Ke=Xe[1],Qe=Vt(),Je=Be(),$e=Ue().id;(0,E.useEffect)((function(){t&&console.log(t)}),[t]);var et=function(e,t){return e.idpm>t.idpm?1:e.idpm<t.idpm?-1:e.typepm>t.typepm?1:e.typepm<t.typepm?-1:void 0};(0,E.useEffect)((function(){if(x&&nt(x),x&&O){var e=[];a.forEach((function(t,n){"error"!=t.header&&t.header.forEach((function(n){n.typeDataDesc===x&&e.push(t)}))}));var t=[],n=[],r=e.sort(et).forEach((function(e){console.log(e.typepm,O),"Inspecci\xf3n"===O&&"Pauta de Inspecci\xf3n"===e.typepm?t.push(e):"Mantenci\xf3n"===O&&"Pauta de Inspecci\xf3n"!==e.typepm&&n.push(e)}));console.log(r),p("Inspecci\xf3n"===O?t:n)}}),[O,I,F,x]);var tt=function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,E.useEffect)((function(){console.log(F),F&&(nt(F),console.log(ze))}),[F]);var nt=function(){var e=Jn(Kn().mark((function e(t){var n,r,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(t),console.log(t),e.next=4,nr.initDbMachines();case 4:if(!(n=e.sent)){e.next=14;break}return e.next=8,nr.consultar(n.database);case 8:return r=e.sent,console.log(r),e.next=12,r.filter((function(e){if(e.model===t&&e.idobra===ze)return e}));case 12:a=e.sent,g(a);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=Jn(Kn().mark((function e(){var n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ke(!0),n={createdBy:t._id,updatedBy:t._id,state:"Asignar",datePrev:Date.parse(se),endPrev:Date.parse(de),machine:F,guide:T,reportType:O},(0,Pt.Z)(n,"machine",JSON.parse(W).equid),(0,Pt.Z)(n,"site",ze),(0,Pt.Z)(n,"sapId",_e),(0,Pt.Z)(n,"idPm",Ae),(0,Pt.Z)(n,"testMode",Le),(r=n).machine&&r.sapId&&r.guide&&"Selecci\xf3n no cuenta con pautas."!==r.guide&&r.reportType&&"Seleccione..."!==r.reportType?i(r,Ke):(alert("Falta informaci\xf3n"),Ke(!1));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),at=function(){var e=Jn(Kn().mark((function e(){var t,n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={idIndex:re,updatedBy:localStorage.getItem("_id"),state:"Asignar",datePrev:Date.parse(se),machine:F,guide:T,reportType:O},(0,Pt.Z)(t,"machine",JSON.parse(W).equid),(0,Pt.Z)(t,"site",ze),(n=t).machine&&n.guide&&"Selecci\xf3n no cuenta con pautas."!==n.guide&&n.reportType&&"Seleccione..."!==n.reportType){e.next=5;break}alert("Falta informaci\xf3n"),e.next=9;break;case 5:return e.next=7,yn(n);case 7:(r=e.sent)&&(alert("Reporte ".concat(r.data.idIndex,", para m\xe1quina modelo ").concat(r.data.machine," editado satisfactoriamente.")),Je(-1));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),it=function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tn();case 2:t=e.sent,ae(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,E.useEffect)((function(){it(),console.log(a),n?Yn.initDbObras().then(function(){var e=Jn(Kn().mark((function e(t){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn.consultar(t.database);case 2:n=e.sent,Ge(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):(console.log(t),We(t.obras[0].idobra)),Hn.initDbMachines().then(function(){var e=Jn(Kn().mark((function e(t){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn.consultar(t.database);case 2:n=e.sent,l(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ot()}),[]);var ot=function(){var e=new Date(Date.now()),t=e.getMonth()+1,n=e.getDate(),r=e.getFullYear();t<10&&(t="0"+t.toString()),n<10&&(n="0"+n.toString()),Ee(r+"-"+t+"-"+n)};return(0,xr.jsxs)(Jc,{height:"100%",children:[(0,xr.jsx)(Ns,{className:"root",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:Qe.pageContainer,item:!0,xs:12,children:(0,xr.jsxs)(Joe,{elevation:0,className:"pageCard",children:[(0,xr.jsxs)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,xr.jsx)("div",{className:"navigation-bar",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){Je(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsxs)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:[$e&&"Ordenes / Editar orden de trabajo",!$e&&"Ordenes / Crear nueva orden de trabajo"]})]})})}),(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsxs)(Ns,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:[n&&(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)(ou,{children:[(0,xr.jsx)("p",{style:{margin:5},children:"Seleccionar Obra"}),(0,xr.jsxs)("select",{onBlur:function(){return tt(!0)},className:Qe.inputsStyle,name:"userType",id:"userType",style:{width:"100%",minWidth:250,height:44,borderRadius:10,fontSize:20},onChange:function(e){We(e.target.value)},value:ze,children:[(0,xr.jsx)("option",{children:"Seleccione..."}),He.map((function(e,t){return(0,xr.jsx)("option",{value:e.idobra,children:e.descripcion},t)}))]})]})}),(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)(ou,{children:[(0,xr.jsx)("p",{style:{margin:5},children:"N\xb0 OT"}),(0,xr.jsx)("input",{disabled:!0,value:re,maxLength:12,onBlur:function(){return tt()},className:Qe.inputsStyle,type:"text",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)(ou,{children:[(0,xr.jsx)("p",{style:{margin:5},children:"ID SAP"}),(0,xr.jsx)("input",{value:_e,onChange:function(e){Me(e.target.value)},maxLength:12,onBlur:function(){return tt()},className:Qe.inputsStyle,type:"text",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)(ou,{children:[(0,xr.jsx)("p",{style:{margin:5},children:"Fecha Inicio Programado"}),(0,xr.jsx)("input",{value:se,onChange:function(e){ue(e.target.value)},maxLength:12,onBlur:function(){return tt()},className:Qe.inputsStyle,type:"date",min:Se,style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)(ou,{children:[(0,xr.jsx)("p",{style:{margin:5},children:"Fecha T\xe9rmino Programado"}),(0,xr.jsx)("input",{value:de,onChange:function(e){he(e.target.value)},maxLength:12,onBlur:function(){return tt()},className:Qe.inputsStyle,type:"date",min:se,disabled:!se,style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,xr.jsxs)("div",{style:{width:"100%"},children:[(0,xr.jsx)("p",{style:{margin:5},children:"Seleccionar tipo de reporte"}),(0,xr.jsx)(ou,{children:(0,xr.jsxs)("select",{className:Qe.inputsStyle,name:"userType",id:"userType",style:{width:"100%",minWidth:250,height:44,borderRadius:10,fontSize:20},onChange:function(e){var t;D(e.target.value),t=e.target.value,N(t)},value:O,children:[(0,xr.jsx)("option",{children:"Seleccione..."}),(0,xr.jsx)("option",{children:"Inspecci\xf3n"}),(0,xr.jsx)("option",{children:"Mantenci\xf3n"})]})})]}),(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)(ou,{children:[(0,xr.jsx)("p",{style:{margin:5},children:"Seleccionar modelo de m\xe1quina"}),(0,xr.jsxs)("select",{className:Qe.inputsStyle,name:"userType",id:"userType",style:{width:"100%",minWidth:250,height:44,borderRadius:10,fontSize:20},onChange:function(e){j(e.target.value),q(!1),nt(e.target.value)},value:F,children:[(0,xr.jsx)("option",{children:"Seleccione..."}),u.map((function(e,t){return(0,xr.jsxs)("option",{value:e.model,children:[e.type," ",e.brand," ",e.model]},t)}))]})]})})]}),(0,xr.jsxs)(Ns,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:[(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)(ou,{children:[(0,xr.jsxs)("p",{style:{margin:0},children:["Seleccionar Pauta  ",G&&K&&(0,xr.jsx)("b",{children:"ESPERE..."})]}),(0,xr.jsxs)("select",{disabled:G,className:Qe.inputsStyle,name:"userType",id:"userType",style:{width:"100%",minWidth:250,height:44,borderRadius:10,fontSize:20},onChange:function(e){C(e.target.value.split(",")[1]),ee(!1),Re(e.target.value.split(",")[0])},value:[Ae,T],children:[(0,xr.jsx)("option",{children:"Seleccione..."}),h.length>0&&h.map((function(e,t){return(0,xr.jsxs)("option",{value:[e.idpm,e.typepm],children:[" ","SPM000787"===e.idpm?"Motor LMR":"Motor Est\xe1ndar"," - ",e.typepm," / ",e.header[1].typeDataDesc," ","Gen\xe9rico"===e.zone?"":"".concat([e.zone])," "]},t)})),0==h.length&&(0,xr.jsx)("option",{children:" Selecci\xf3n no cuenta con pautas. "})]})]})}),(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)("p",{children:["Test: ",(0,xr.jsx)(ld,{checked:Le,onChange:function(e){return Pe(e.target.checked)}})]})}),(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)(ou,{children:[(0,xr.jsx)("p",{children:"Seleccionar m\xe1quina de obra"}),(0,xr.jsxs)("select",{onBlur:function(){return tt()},className:Qe.inputsStyle,disabled:$,name:"userType",id:"userType",style:{width:"100%",minWidth:250,height:44,borderRadius:10,fontSize:20},onChange:function(e){"init"===e.target.value?(ve(""),xe(""),V("")):(V(e.target.value),xe(JSON.parse(e.target.value).equid),ve(JSON.parse(e.target.value).hourMeter/36e5))},value:W,defaultValue:"init",children:[(0,xr.jsx)("option",{value:"init",selected:!0,children:"Seleccione..."}),v.sort((function(e,t){return Number(e.equ)-Number(t.equ)})).map((function(e,t){return(0,xr.jsxs)("option",{value:JSON.stringify(e),children:[" ",e.equ," / ",e.type," ",e.brand," - ",e.model," "]},t)}))]})]})}),(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)(ou,{children:[(0,xr.jsx)("p",{children:"Horas de operaci\xf3n"}),(0,xr.jsx)("input",{disabled:!0,value:me,maxLength:12,onBlur:function(){return tt()},className:Qe.inputsStyle,type:"text",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)(ou,{children:[(0,xr.jsx)("p",{children:"Equipo ID"}),(0,xr.jsx)("input",{disabled:!0,value:be,maxLength:12,onBlur:function(){return tt()},className:Qe.inputsStyle,type:"text",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})})]})]})]}),(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,lg:6,md:6,sm:!1,xs:!1}),(0,xr.jsx)(Ns,{item:!0,lg:6,md:6,sm:12,xs:12,children:(0,xr.jsxs)("div",{style:{width:"100%",paddingTop:30,textAlign:"center"},children:[$e&&(0,xr.jsx)("button",{onClick:function(){return at()},style:{width:189,height:48,marginRight:17,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D"},children:"Editar reporte"}),$e&&(0,xr.jsx)("button",{onClick:function(){$e&&confirm("Se borrar\xe1 el reporte permanentemente. \xbfDesea continuar?")&&xn(JSON.parse($e)._id).then((function(e){alert("Reporte eliminado."),Je(-1)}))},style:{width:189,height:48,marginRight:17,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D"},children:"Borrar reporte"}),!$e&&(0,xr.jsx)("button",{onClick:function(){return rt()},style:{width:189,height:48,marginRight:17,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D"},children:"Agregar reporte"})]})})]})]})})}),(0,xr.jsx)(Jle,{open:Ye})]})},Zse=function(){var e=Vt();return(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:e.pageContainer,item:!0,xs:12,children:(0,xr.jsx)(Joe,{elevation:0,className:"pageCard",children:[{id:0,description:"Actividad 1 programada",fecha:"12/10/2021"},{id:1,description:"Actividad 1 ejecutada",fecha:"13/10/2021"},{id:2,description:"Actividad 2 programada",fecha:"13/10/2021"},{id:3,description:"Actividad 3 programada",fecha:"14/10/2021"},{id:4,description:"Actividad 2 ejecutada",fecha:"15/10/2021"},{id:5,description:"Actividad 4 programada",fecha:"16/10/2021"},{id:6,description:"Actividad 3 ejecutada",fecha:"16/10/2021"},{id:7,description:"Actividad 4 ejecutada",fecha:"19/10/2021"},{id:8,description:"Actividad 5 programada",fecha:"20/10/2021"},{id:9,description:"Actividad 6 programada",fecha:"20/10/2021"}].reverse().filter((function(e){return e.toString()})).map((function(e){return(0,xr.jsx)(Ns,{item:!0,style:{width:"100%",padding:5},children:(0,xr.jsx)("div",{style:{borderRadius:20,backgroundColor:"#fff",padding:10},children:(0,xr.jsxs)("h3",{children:[e.fecha," - ",e.description]})})},e.id)}))})})})})},Hse=function(){var e=Vt();return(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:e.pageContainer,item:!0,xs:12,children:(0,xr.jsx)(Joe,{elevation:0,className:"pageCard"})})})})},Gse=function(){var e=Vt();return(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:e.pageContainer,item:!0,xs:12,children:(0,xr.jsxs)(Joe,{elevation:0,className:"pageCard",children:[(0,xr.jsx)(Ns,{style:{flexShrink:0},children:(0,xr.jsx)("div",{style:{width:"100%",color:"#fff"},children:(0,xr.jsx)("h1",{children:"Configuraci\xf3n"})})}),(0,xr.jsxs)(Ns,{container:!0,spacing:1,children:[(0,xr.jsx)("div",{style:{width:"30%"},children:(0,xr.jsxs)("div",{style:{textAlign:"left",width:"100%",backgroundColor:"rgba(255,  255,  255,  0.5)"},children:[(0,xr.jsx)(id,{button:!0,style:{width:"100%",textAlign:"left"},children:(0,xr.jsx)("label",{style:{color:"#333",fontSize:20,textAlign:"left",fontWeight:"bold"},children:"Perfil"})}),(0,xr.jsx)(id,{button:!0,style:{width:"100%",textAlign:"left"},children:(0,xr.jsx)("label",{style:{color:"#333",fontSize:20,textAlign:"left",fontWeight:"bold"},children:"Notificaciones"})}),(0,xr.jsx)(id,{button:!0,style:{width:"100%",textAlign:"left"},children:(0,xr.jsx)("label",{style:{color:"#333",fontSize:20,textAlign:"left",fontWeight:"bold"},children:"Informaci\xf3n"})}),(0,xr.jsx)(id,{button:!0,style:{width:"100%",textAlign:"left"},children:(0,xr.jsx)("label",{style:{color:"#333",fontSize:20,textAlign:"left",fontWeight:"bold"},children:"Soporte"})})]})}),(0,xr.jsx)("div",{style:{width:"70%",height:"35rem",overflowY:"auto"},children:(0,xr.jsx)("div",{style:{textAlign:"left",height:"100%",width:"100%",backgroundColor:"rgba(255,  255,  255,  0.5)"},children:(0,xr.jsx)("div",{style:{height:"50%"}})})})]})]})})})})},qse=function(){var e=bce().setSite,t=Vt(),n=(0,E.useState)([]),r=(0,U.Z)(n,2),a=r[0],i=r[1];(0,E.useEffect)((function(){o()}),[]);var o=function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Yn.initDbObras().then(function(){var e=Jn(Kn().mark((function e(t){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn.consultar(t.database);case 2:n=e.sent,console.log(n),i(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:t.pageContainer,item:!0,xs:12,children:(0,xr.jsxs)(Joe,{elevation:0,className:"pageCard",children:[(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsx)("h1",{children:"Para navegar en la plataforma debe seleccionar una obra."})}),(0,xr.jsx)(Ns,{container:!0,style:{height:"75vh",overflowY:"auto"},alignItems:"center",justifyContent:"center",children:a.filter((function(e){return e.toString()})).map((function(t){return(0,xr.jsx)(Ns,{item:!0,xl:3,lg:3,md:4,style:{width:"100%",padding:20},children:(0,xr.jsxs)("div",{style:{padding:10,borderRadius:20,borderWidth:1,borderColor:"red",borderStyle:"solid",textAlign:"center"},children:[(0,xr.jsx)("img",{src:t.image?t.image:"/logo_icv.png",width:100}),(0,xr.jsx)("br",{}),(0,xr.jsx)("p",{children:t.descripcion}),(0,xr.jsx)("br",{}),(0,xr.jsx)(nl,{onClick:function(){!function(t){window.confirm("Confirme que cambiar\xe1 la obra de navegaci\xf3n")&&(console.log(t),e(t))}(t)},variant:"contained",color:"primary",children:"Seleccionar"}),(0,xr.jsx)("br",{})]})},t.id)}))})]})})})})},Xse=function(){var e=Vt(),t=Be(),n="superAdmin"!==localStorage.getItem("role");return(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:e.pageContainer,item:!0,xs:12,children:(0,xr.jsxs)(Joe,{elevation:0,className:"pageCard",children:[(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){t(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Administraci\xf3n"})]})})})}),(0,xr.jsxs)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:6,lg:3,style:{padding:10},children:(0,xr.jsx)(rse,{variant:"users"})}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:6,lg:3,style:{padding:10},children:(0,xr.jsx)(rse,{variant:"roles",disableButton:n})}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:6,lg:3,style:{padding:10},children:(0,xr.jsx)(rse,{variant:"patterns"})})]})]})})})})},Yse=function(e){e.route;var t=(0,E.useState)(!1),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=Vt(),o=Be();return(0,E.useEffect)((function(){navigator.onLine?a(!0):a(!1)}),[]),(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"root",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:i.pageContainer,item:!0,xs:12,children:(0,xr.jsxs)(Joe,{elevation:0,className:"pageCard",children:[(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){o(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Administraci\xf3n / Administrar usuarios"})]})})})}),(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:20,overflowY:"auto",height:"calc(100vh - 195px)"},children:(0,xr.jsx)(hue,{height:"calc(100vh - 500px)",hableButton:r})})})]})})})})},Kse={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",borderRadius:20,boxShadow:24,p:4},Qse=function(){var e=qce().getUsers,t=Vt(),n=Be(),r=(0,E.useState)(!1),a=(0,U.Z)(r,2),i=a[0],o=a[1],s=(0,E.useState)(!1),u=(0,U.Z)(s,2),l=u[0],c=u[1],d=(0,E.useState)(""),h=(0,U.Z)(d,2),p=(h[0],h[1]),f=(0,E.useState)(""),m=(0,U.Z)(f,2),v=m[0],g=m[1],y=(0,E.useState)(),b=(0,U.Z)(y,2),x=b[0],w=b[1],k=(0,E.useContext)(Fce),S=k.userData,T=k.setUserData,C=k.setChangeModule,_=(k.set,Ue().id),M=function(){var e;i?(e=!1,n(-1),N()):e=!0,setTimeout((function(){o(e)}),500)};(0,E.useEffect)((function(){_?(g("Editar usuario"),fn(_).then((function(e){console.log(e),"x@x.xx"===e.data.email&&(e.data.email=""),T(e.data),w(0)}))):(w(0),g("Nuevo usuario"))}),[]);var I=function(){var t=Jn(Kn().mark((function t(){return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c(!0),"Nuevo usuario"!==v){t.next=17;break}return t.prev=2,p("Inscribiendo nuevo usuario"),t.next=6,dn(S,S.password);case 6:200==t.sent.status?(c(!1),M(),e()):(alert("Error al crear usuario. Verifique los datos ingresados. Posiblemente haya repetido datos de alg\xfan usuario inscrito"),c(!1),n(-1)),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(2),alert("Error al crear usuario. Verifique los datos ingresados. Posiblemente haya repetido datos de alg\xfan usuario inscrito"),c(!1),n(-1);case 15:t.next=31;break;case 17:if("Editar usuario"!==v){t.next=31;break}return t.prev=18,p("Editando usuario"),t.next=22,hn(S);case 22:200==t.sent.status?(c(!1),M(),e()):(alert("Error al editar usuario. Verifique los datos ingresados. Posiblemente haya repetido datos de alg\xfan usuario inscrito"),c(!1),n(-1)),t.next=31;break;case 26:t.prev=26,t.t1=t.catch(18),alert("Error al crear usuario. Verifique los datos ingresados. Posiblemente haya repetido datos de alg\xfan usuario inscrito"),c(!1),n(-1);case 31:case"end":return t.stop()}}),t,null,[[2,10],[18,26]])})));return function(){return t.apply(this,arguments)}}(),N=function(){localStorage.removeItem("userDataToSave"),localStorage.removeItem("listaPermisosReportes"),localStorage.removeItem("listaPermisosUsuarios")},A=function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.rut?(0,CK.validate)(S.rut)?S.name?S.lastName?S.obras.length>0?S.roles.length>0?_?w(x+1):S.password.length>5&&S.confirmPassword.length>5?S.confirmPassword===S.password?w(x+1):alert("Password y su confirmaci\xf3n deben ser iguales"):alert("Password debe contar con al menos 6 car\xe1cteres"):alert("Seleccione al menos un rol"):alert("Debe seleccionar una obra"):alert("Ingrese un apellido"):alert("Ingrese un nombre"):alert("Rut inv\xe1lido"):alert("Falta Rut");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:t.pageContainer,item:!0,xs:12,children:(0,xr.jsxs)(Joe,{elevation:0,className:"pageCard",children:[(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){n(-1),N()}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsxs)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:["Administraci\xf3n / Administrar usuarios / ",v]})]})})})}),(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsxs)("div",{style:{width:"100%",textAlign:"left",padding:10,overflowY:"auto"},children:[0===x&&(0,xr.jsx)(pue,{typeDisplay:v,uData:S}),1===x&&(0,xr.jsx)(fue,{width:"calc(100vw - 350px)",height:"calc(100vh - 320px)",typeDisplay:v,id:_}),(0,xr.jsx)("div",{style:{position:"absolute",right:40,bottom:40},children:(0,xr.jsx)("div",{style:{width:"100%"},children:(0,xr.jsxs)("div",{style:{float:"right"},children:[1==x&&(0,xr.jsx)("button",{onClick:function(){w(x-1),C(!1)},style:{width:189,height:48,marginRight:17,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D"},children:"Modificar Datos"}),(0,xr.jsx)("button",{onClick:function(){n(-1),N()},style:{width:189,height:48,borderRadius:23,marginRight:17,fontSize:20,color:"#BB2D2D",borderColor:"#BB2D2D",borderWidth:2},children:"Cancelar"}),0==x&&(0,xr.jsx)("button",{onClick:function(){return A()},style:{width:189,height:48,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D"},children:"Siguiente"}),x>0&&!_&&(0,xr.jsx)("button",{onClick:function(){I()},style:{width:189,height:48,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D"},children:"Crear usuario"}),x>0&&_&&(0,xr.jsx)("button",{onClick:function(){c(!0),setTimeout(Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("userDataToSave")),e.next=3,hn(t,_);case 3:e.sent&&(M(),c(!1));case 5:case"end":return e.stop()}}),e)}))),1e3)},style:{width:189,height:48,borderRadius:23,fontSize:20,color:"#fff",backgroundColor:"#BB2D2D",borderColor:"#BB2D2D"},children:"Editar usuario"})]})})})]})}),(0,xr.jsxs)("div",{children:[(0,xr.jsx)(Wo,{open:i,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,xr.jsxs)(Jc,{sx:Kse,children:[(0,xr.jsxs)("div",{style:{textAlign:"center"},children:[(0,xr.jsx)("img",{src:"../../assets/icons/check-green.svg",alt:""}),"Nuevo usuario"===v&&(0,xr.jsx)("h1",{children:"Usuario creado con \xe9xito"}),"Editar usuario"===v&&(0,xr.jsx)("h1",{children:"Usuario editado con \xe9xito"})]}),(0,xr.jsx)(dd,{onClick:M,style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,xr.jsx)(rl,{style:{color:"#ccc"}})})]})}),(0,xr.jsx)(Jle,{open:l})]})]})})})})},Jse=function(e){e.route;var t=(0,E.useContext)(gce),n=t.userData,r=t.admin,a=(0,E.useState)([]),i=(0,U.Z)(a,2),o=i[0],s=i[1],u=Vt(),l=Be();return(0,E.useEffect)((function(){var e=localStorage.getItem("_id");navigator.onLine?pn(r).then(function(){var t=Jn(Kn().mark((function t(n){var r,a;return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=new Array,(r=n.data)&&(a=r.filter((function(t){if(t._id!=e&&"admin"!=t.role)return t})),s(a));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):setTimeout((function(){alert("Dispositivo sin conexi\xf3n. Revise si cuenta con internet e intente nuevamente."),l(-1)}),100)}),[]),(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:u.pageContainer,item:!0,xs:12,children:(0,xr.jsxs)(Joe,{elevation:0,className:"pageCard",children:[(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){l(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Perfil"})]})})})}),(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:12,lg:12,children:n&&(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xs:12,sm:6,md:4,lg:4,children:(0,xr.jsx)("div",{style:{padding:20,textAlign:"right"},children:(0,xr.jsx)("img",{src:n.imageUrl,style:{maxHeight:300,maxWidth:300,objectFit:"cover"},width:"100%",alt:""})})}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:6,md:4,lg:4,children:n&&(0,xr.jsxs)("div",{style:{padding:20},children:[(0,xr.jsxs)("h1",{children:[n.name," ",n.lastName]}),(0,xr.jsx)("h3",{children:Xt(n.role)}),(0,xr.jsx)("h3",{children:n.rut}),(0,xr.jsx)("h3",{children:n.email}),(0,xr.jsxs)("h3",{children:["+56",n.phone]}),(0,xr.jsxs)("h3",{children:[n.sites?JSON.parse(n.sites).idobra:""," - ",n.sites?JSON.parse(n.sites).descripcion:""]}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,xr.jsxs)("div",{style:{width:200,height:200},children:[(0,xr.jsx)("h3",{children:"Firma"}),(0,xr.jsx)("img",{src:n.sign,width:200,height:200})]})})]})}),(0,xr.jsxs)(Ns,{item:!0,xs:12,sm:12,md:4,lg:4,children:[(0,xr.jsx)("div",{style:{padding:20},children:(0,xr.jsx)("h1",{children:"Otros usuarios"})}),(0,xr.jsx)("div",{style:{padding:20,maxHeight:"calc(100vh - 320px)",overflowY:"auto"},children:o.map((function(e,t){return e.imageUrl||(e.imageUrl="../assets/no-profile-image.png"),(0,xr.jsxs)("div",{style:{width:"100%"},children:[(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xs:4,sm:3,lg:2,xl:2,children:(0,xr.jsx)("img",{src:e.imageUrl,width:50,height:50,style:{objectFit:"cover",borderRadius:"50%"},alt:""})}),(0,xr.jsx)(Ns,{item:!0,xs:6,sm:4,lg:4,xl:4,children:(0,xr.jsxs)("p",{children:[e.name," ",e.lastName]})}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:5,lg:4,xl:4,children:(0,xr.jsx)("p",{children:Xt(e.role)})})]}),(0,xr.jsx)("br",{})]},t)}))})]})]})})})]})})})})},$se=function(e){e.route;var t=(0,E.useState)(!1),n=(0,U.Z)(t,2),r=(n[0],n[1]),a=Vt(),i=Be();return(0,E.useEffect)((function(){navigator.onLine?r(!0):r(!1)}),[]),(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"root",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:a.pageContainer,item:!0,xs:12,children:(0,xr.jsxs)(Joe,{elevation:0,className:"pageCard",children:[(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){i(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Administraci\xf3n / Administrar usuarios"})]})})})}),(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:20,overflowY:"auto",height:"calc(100vh - 200px)"}})})]})})})})},eue=function(e){var t=e.patterns;return(0,xr.jsxs)("div",{style:{padding:10,width:"80%",height:"calc(100vh - 250px)",textAlign:"left",color:"#333",backgroundColor:"#F9F9F9",borderRadius:20},children:[(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,children:(0,xr.jsx)("strong",{children:"ID"})}),(0,xr.jsx)(Ns,{item:!0,xl:2,lg:2,children:(0,xr.jsx)("strong",{children:"Tipo"})}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,children:(0,xr.jsx)("strong",{children:"Marca"})}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,children:(0,xr.jsx)("strong",{children:"Modelo"})}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,children:(0,xr.jsx)("strong",{children:"PIDPM"})}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,children:(0,xr.jsx)("strong",{children:"Zona"})})]}),0===t.length?(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",paddingTop:50},children:"No hay pautas creadas"}):(0,xr.jsx)("div",{style:{width:"100%",paddingTop:50,height:"calc(100vh - 400px)",overflowY:"auto"},children:t.map((function(e,t){return(0,xr.jsxs)(Ns,{container:!0,style:{paddingTop:0===t?0:10,paddingBottom:10},children:[(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,children:e.idPattern}),(0,xr.jsx)(Ns,{item:!0,xl:2,lg:2,children:e.type}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,children:e.brand}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,children:e.model}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,children:e.pIDPM}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,children:e.zone})]},t)}))})]})},tue=function(e){e.roles;var t=Vt(),n=Be(),r=(0,E.useState)(!1),a=(0,U.Z)(r,2),i=a[0],o=(a[1],(0,E.useState)([])),s=(0,U.Z)(o,2),u=s[0],l=s[1],c=(0,E.useState)(!1),d=(0,U.Z)(c,2),h=d[0],p=d[1];(0,E.useEffect)((function(){f()}),[]);var f=function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pn();case 2:t=e.sent,l(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:t.pageContainer,item:!0,xs:12,children:(0,xr.jsxs)(Joe,{elevation:0,className:"pageCard",children:[(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){n(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Administraci\xf3n / Pautas"}),(0,xr.jsxs)("button",{onClick:function(){p(!0)},title:"Nueva pauta",style:{position:"absolute",right:10,color:"#fff",backgroundColor:"#be2e26",paddingTop:10,paddingBottom:10,paddingLeft:20,paddingRight:20,borderRadius:20,borderColor:"transparent"},children:[(0,xr.jsx)(Hi,{icon:_r,style:{marginRight:10}})," Nueva pauta"]})]})})})}),(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10,overflowY:"auto",height:"calc(100vh - 195px)"},children:(0,xr.jsx)(eue,{patterns:u})})}),(0,xr.jsxs)("div",{children:[(0,xr.jsx)(Jle,{open:i}),(0,xr.jsx)(bue,{open:h,savedInfo:f,closeModal:function(){p(!1)}})]})]})})})})},nue=function(){var e=Vt(),t=(0,E.useState)(),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=Be(),o=Ue().id;return(0,E.useEffect)((function(){qn.initDbPMs().then(function(){var e=Jn(Kn().mark((function e(t){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.obtener(o,t.database);case 2:(n=e.sent)&&a(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),(0,xr.jsx)(Jc,{children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:e.pageContainer,item:!0,xs:12,children:(0,xr.jsx)(Joe,{elevation:0,className:"pageCard",children:(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsx)("div",{style:{paddingLeft:0},children:(0,xr.jsxs)("div",{style:{float:"left",width:"100%"},children:[(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){i(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:r&&"Listado Pautas / ".concat(r.typepm)})]}),(0,xr.jsx)("div",{style:{height:"90%",width:"98%"},children:r&&(0,xr.jsx)(Koe,{pauta:r})})]})})})})})})})})})},rue=function(){var e=Vt();Be();return(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:e.pageContainer,item:!0,xs:12,children:(0,xr.jsx)(Joe,{elevation:0,className:"pageCard",children:(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsx)("h1",{children:"Sin permiso de acceso"})})})})})})})},aue=function(){var e=Vt(),t=Be(),n=(0,E.useContext)(gce),r=n.isOperator,a=n.isSapExecutive,i=n.isShiftManager,o=n.isChiefMachinery,s=n.admin,u=n.userData,l=((0,E.useContext)(Dce).setReport,Oce()),c=l.priorityAssignments,d=l.normalAssignments,h=(0,E.useState)(!0),p=(0,U.Z)(h,2),f=p[0],m=(p[1],Aoe(lo().breakpoints.down("sm"))),v=function(e){console.log(e),t("/assignment/".concat(e.idIndex))},g=function(e,t){return t.idIndex-e.idIndex};return(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:e.pageContainer,item:!0,xs:12,children:(0,xr.jsx)(Joe,{elevation:0,className:"pageCard",children:(0,xr.jsxs)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){t(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Actividades Asignadas"})]})})}),(0,xr.jsxs)("div",{style:{width:"100%",padding:10},children:[(0,xr.jsx)(Ns,{container:!0,direction:"column",children:(0,xr.jsx)("div",{style:{width:"100%",borderRadius:10,borderStyle:"solid",borderWidth:1,borderColor:"#CCC",backgroundColor:"#CCC",marginBottom:10},children:(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:1,xs:1,children:(0,xr.jsx)("div",{style:{width:50,textAlign:"center"},children:(0,xr.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"N\xb0 OT"})})}),(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:1,xs:1,children:(0,xr.jsx)("div",{style:{width:50,textAlign:"center"},children:(0,xr.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Gu\xeda"})})}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,xr.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"SAP ID"})})}),(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsx)("p",{style:{fontSize:12,fontWeight:"bold",minWidth:170},children:"Inicio programado"})}),(0,xr.jsx)(Ns,{item:!0,l:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsx)("p",{style:{fontSize:12,fontWeight:"bold",minWidth:170},children:"Inicio ejecuci\xf3n"})}),!m&&(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsx)("p",{style:{fontSize:12,fontWeight:"bold",minWidth:170},children:"T\xe9rmino programado"})}),!m&&(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsx)("p",{style:{fontSize:12,fontWeight:"bold",minWidth:170},children:"T\xe9rmino ejecuci\xf3n"})}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,children:(0,xr.jsx)("p",{style:{fontSize:12,fontWeight:"bold",textAlign:"center",minWidth:70},children:"Flota"})}),(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsx)("p",{style:{fontSize:12,fontWeight:"bold",textAlign:"center",minWidth:70},children:"Nro M\xe1quina"})}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,style:{width:"100%",textAlign:"right",paddingRight:20},children:(0,xr.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Acci\xf3n"})})]})})}),f&&(0,xr.jsxs)(Ns,{container:!0,style:{overflowY:"auto",maxHeight:"calc(100vh - 295px)"},children:[(o||i)&&(0,xr.jsxs)("div",{style:{width:"100%"},children:[(0,xr.jsx)("h3",{className:"item-style",children:"Mis actividades pendientes"}),c.sort(g).map((function(e,t){return(0,xr.jsx)("div",{className:"border-color-primary".concat(" item-style"),style:{width:"100%",borderRadius:10,marginBottom:10},children:(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:1,xs:1,children:(0,xr.jsx)("div",{style:{width:50,textAlign:"center"},children:(0,xr.jsx)("p",{style:{fontSize:11},children:e.idIndex})})}),(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:1,xs:1,children:(0,xr.jsx)("div",{style:{textAlign:"center",width:50},children:(0,xr.jsx)("p",{style:{fontSize:11},children:e._guide})})}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,children:(0,xr.jsx)("div",{style:{textAlign:"center"},children:(0,xr.jsx)("p",{style:{fontSize:11},children:e.sapId})})}),(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left"},children:(0,xr.jsx)("p",{style:{fontSize:11,minWidth:170},children:Kt(e.datePrev)})})}),(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsx)("p",{style:{fontSize:11,minWidth:170},children:Kt(e.dateInit)})}),!m&&(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsxs)("p",{style:{fontSize:11,minWidth:170},children:[" ",Kt(e.endPrev)," "]})}),!m&&(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsxs)("p",{style:{fontSize:11,minWidth:170},children:[" ",Kt(e.endReport)," "]})}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,children:(0,xr.jsxs)("p",{style:{fontSize:11,textAlign:"center",minWidth:70},children:[" ",e.machineData&&e.machineData.type," ",e.machineData&&e.machineData.model," "]})}),(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsxs)("p",{style:{fontSize:11,textAlign:"center",minWidth:70},children:[" N\xb0: ",e.machineData&&e.machineData.equ," "]})}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,style:{width:"100%",textAlign:"right",paddingRight:0},children:(0,xr.jsx)(nl,{onClick:function(){v(e)},color:"primary",style:{borderRadius:30},children:"Ver"})})]})},t)}))]}),(o||i||a||r||s)&&(0,xr.jsxs)("div",{style:{width:"100%"},children:[0===d.length&&f&&(0,xr.jsx)("div",{children:(0,xr.jsx)("p",{children:"Sin asignaciones"})}),d.sort(g).map((function(e,t){return(0,xr.jsx)("div",{style:{width:"100%",borderRadius:10,borderStyle:"solid",borderWidth:1,borderColor:e.readyToSend?"#be2e26":"#CCC",marginBottom:10,backgroundColor:e.endReport?"#f2f2f2":"#fff"},children:(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:1,xs:1,children:(0,xr.jsx)("div",{style:{width:50,textAlign:"center"},children:(0,xr.jsx)("p",{style:{fontSize:11},children:e.idIndex})})}),(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:1,xs:1,children:(0,xr.jsx)("div",{style:{width:50,textAlign:"center"},children:(0,xr.jsx)("p",{style:{fontSize:11},children:e._guide})})}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,children:(0,xr.jsx)("div",{style:{textAlign:"center"},children:(0,xr.jsx)("p",{style:{fontSize:11},children:e.sapId})})}),(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left"},children:(0,xr.jsx)("p",{style:{fontSize:11,minWidth:170},children:Kt(e.datePrev)})})}),(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsx)("p",{style:{fontSize:11,minWidth:170},children:Kt(e.dateInit)})}),!m&&(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsxs)("p",{style:{fontSize:11,minWidth:170},children:[" ",Kt(e.endPrev)," "]})}),!m&&(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left"},children:(0,xr.jsx)("p",{style:{fontSize:11,minWidth:170},children:Kt(e.endReport)})})}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,children:(0,xr.jsxs)("p",{style:{fontSize:11,textAlign:"center",minWidth:70},children:[" ",e.machineData&&e.machineData.type," ",e.machineData&&e.machineData.model," "]})}),(0,xr.jsx)(Ns,{item:!0,xl:"auto",lg:"auto",md:"auto",sm:"auto",xs:"auto",children:(0,xr.jsxs)("p",{style:{fontSize:11,textAlign:"center",minWidth:70},children:[" N\xb0: ",e.machineData&&e.machineData.equ," "]})}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,md:1,sm:1,xs:1,style:{width:"100%",textAlign:"right",paddingRight:0},children:(0,xr.jsx)(nl,{onClick:function(){v(e)},color:"primary",style:{borderRadius:30,paddingRight:0},children:(0,xr.jsx)("p",{style:{margin:0},children:!r&&e.level&&e.level>0?"Ver":r&&(e.usersAssigned&&e.usersAssigned[0])===u._id?e.readyToSend?"Listo a enviar":"Ejecutar":"Ver"})})})]})},t)}))]})]}),(0,xr.jsx)(Ns,{children:!f&&(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center",height:100},children:(0,xr.jsx)(td,{size:50})})})]})]})})})})})},iue=E.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.color,i=void 0===a?"primary":a,o=e.value,s=e.valueBuffer,u=e.variant,l=void 0===u?"indeterminate":u,c=(0,qi.Z)(e,["classes","className","color","value","valueBuffer","variant"]),d=lo(),h={},p={bar1:{},bar2:{}};if("determinate"===l||"buffer"===l)if(void 0!==o){h["aria-valuenow"]=Math.round(o),h["aria-valuemin"]=0,h["aria-valuemax"]=100;var f=o-100;"rtl"===d.direction&&(f=-f),p.bar1.transform="translateX(".concat(f,"%)")}else 0;if("buffer"===l)if(void 0!==s){var m=(s||0)-100;"rtl"===d.direction&&(m=-m),p.bar2.transform="translateX(".concat(m,"%)")}else 0;return E.createElement("div",(0,_t.Z)({className:(0,yo.Z)(n.root,n["color".concat((0,bo.Z)(i))],r,{determinate:n.determinate,indeterminate:n.indeterminate,buffer:n.buffer,query:n.query}[l]),role:"progressbar"},h,{ref:t},c),"buffer"===l?E.createElement("div",{className:(0,yo.Z)(n.dashed,n["dashedColor".concat((0,bo.Z)(i))])}):null,E.createElement("div",{className:(0,yo.Z)(n.bar,n["barColor".concat((0,bo.Z)(i))],("indeterminate"===l||"query"===l)&&n.bar1Indeterminate,{determinate:n.bar1Determinate,buffer:n.bar1Buffer}[l]),style:p.bar1}),"determinate"===l?null:E.createElement("div",{className:(0,yo.Z)(n.bar,("indeterminate"===l||"query"===l)&&n.bar2Indeterminate,"buffer"===l?[n["color".concat((0,bo.Z)(i))],n.bar2Buffer]:n["barColor".concat((0,bo.Z)(i))]),style:p.bar2}))})),oue=(0,Rt.Z)((function(e){var t=function(t){return"light"===e.palette.type?(0,es.$n)(t,.62):(0,es._j)(t,.5)},n=t(e.palette.primary.main),r=t(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4,"@media print":{colorAdjust:"exact"}},colorPrimary:{backgroundColor:n},colorSecondary:{backgroundColor:r},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(n," 0%, ").concat(n," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0 -23px"},"50%":{opacity:0,backgroundPosition:"0 -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(iue),sue=function(e,t,n,r){var a,i,o;"termino-orden-1"===e?(a="OT ".concat(t," deber\xe1 ser revisada por Jefe de Turno"),i="/assignment",o="Se ha terminado de ejecutar OT ".concat(t)):"termino-orden-2"===e?(a="OT ".concat(t," deber\xe1 ser revisada por Jefe de Maquinaria"),i="/assignment",o="Se ha terminado de ejecutar OT ".concat(t)):"termino-orden-3"===e?(a="OT ".concat(t," deber\xe1 ser revisada por Ejecutivo SAP"),i="/assignment",o="Se ha terminado de ejecutar OT ".concat(t)):"termino-orden-4"===e?(a="OT ".concat(t," Ha sido cerrada por Ejecutivo SAP"),i="/reports",o="Se ha terminado de ejecutar OT ".concat(t)):"rechazo-orden-0"===e?(a="OT ".concat(t," rechazada"),i="/assignment",o="Se ha rechazado ejecuci\xf3n de OT ".concat(t)):("rechazo-orden-1"===e||"rechazo-orden-2"===e)&&(a="OT ".concat(t," rechazada"),i="/assignment",o="Se requiere ajuste de OT ".concat(t)),yc(e,"".concat(r._id),"Ejecuciones OT",o,a,i,n)},uue=function(){var e=bce(),t=e.admin,n=e.isOperator,r=e.isSapExecutive,a=e.isShiftManager,i=e.isChiefMachinery,o=e.userData,s=Nce().isOnline,u=Vt(),l=Be(),c=Ue().id,d=Pce(),h=d.report,p=d.executionReport,f=d.setOtIndex,m=(d.otIndex,d.sapId),v=d.serieEquipo,g=(d.setLoading,d.setLoadingMessage),y=d.reporteIniciado,b=Oce(),x=b.saveReportToData,w=(b.getReports,b.setStatusReports,b.getReportsOffline),k=b.setMessage,S=(0,E.useState)(0),T=(0,U.Z)(S,2),C=T[0],_=T[1],M=(0,E.useState)(0),I=(0,U.Z)(M,2),N=I[0],A=I[1],R=(0,E.useState)(),O=(0,U.Z)(R,2),D=O[0],L=O[1],P=(0,E.useState)(!1),F=(0,U.Z)(P,2),j=F[0],z=F[1],B=(0,E.useState)(),W=(0,U.Z)(B,2),V=(W[0],W[1],(0,E.useState)(!1)),Z=(0,U.Z)(V,2),H=Z[0],G=Z[1],q=(0,E.useState)([]),X=(0,U.Z)(q,2),Y=(X[0],X[1]),K=(0,E.useState)(!1),Q=(0,U.Z)(K,2),J=Q[0],$=Q[1],ee=(0,E.useState)(!1),te=(0,U.Z)(ee,2),ne=(te[0],te[1],(0,E.useState)(!1)),re=(0,U.Z)(ne,2),ae=(re[0],re[1],(0,E.useState)()),ie=(0,U.Z)(ae,2),oe=ie[0],se=ie[1],ue=(0,E.useState)(!1),le=(0,U.Z)(ue,2),ce=le[0],de=le[1],he=(0,E.useState)(!1),pe=(0,U.Z)(he,2),fe=pe[0],me=(pe[1],(0,E.useState)()),ve=(0,U.Z)(me,2),ge=ve[0],ye=(ve[1],(0,E.useState)(!1)),be=(0,U.Z)(ye,2),xe=be[0],we=be[1],ke=(0,E.useState)(),Se=(0,U.Z)(ke,2),Ee=Se[0],Te=Se[1],Ce=(0,E.useState)(!1),_e=(0,U.Z)(Ce,2),Me=_e[0],Ie=_e[1],Ne=(0,E.useState)(),Ae=(0,U.Z)(Ne,2),Re=(Ae[0],Ae[1]),Oe=(0,E.useState)(!1),De=(0,U.Z)(Oe,2),Le=De[0],Pe=De[1],Fe=(0,E.useState)(),je=(0,U.Z)(Fe,2),ze=je[0],We=je[1],Ve=(0,E.useState)(!1),Ze=(0,U.Z)(Ve,2),He=Ze[0],Ge=Ze[1];(0,E.useEffect)((function(){h?(L(h.level),console.log(r,h.level),n&&(0===h.level||!h.level)&&h.usersAssigned[0]===o._id||a&&1===h.level||i&&2===h.level||r&&3===h.level?z(!0):z(!1)):c&&f(c)}),[h,c,n,r,a,i]);var qe=function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se(He?"sendReport":"rejectReport"),G(!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){s?(Ge(!0),qe()):alert("Dispositivo debe estar conectado a internet.")},Ye=function(){var e=Jn(Kn().mark((function e(){var t,n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=19;break}if(!window.confirm("Confirme que terminar\xe1 su jornada")){e.next=17;break}return $(!0),t=h,e.next=6,mr(D);case 6:return n=e.sent,t.state="Asignar",t.emailing="termino-jornada",t.fullNameWorker="".concat(o.name," ").concat(o.lastName),t.emailsToSend=n,r=new Array,e.next=14,vr();case 14:r=e.sent,k("Enviando avisos a usuarios."),r.forEach(function(){var e=Jn(Kn().mark((function e(n,a){var i,s,u,c,d;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gc("termino-jornada","".concat(o._id),n,"Aviso general","T\xe9rmino de jornada","".concat(o.name," ").concat(o.lastName," ha terminado su jornada. Recuerde reasignar OT"),"/reports"),a!=r.length-1){e.next=19;break}return k("Guardando OT en base de datos."),e.next=5,yn(t);case 5:return i=e.sent,s=p,e.next=9,_n(s);case 9:if(!i){e.next=19;break}return e.next=12,rr();case 12:return u=e.sent,c=u.database,e.next=16,ir(t.idIndex,c);case 16:d=e.sent,console.log("Revisando si se borra de bases de datos",d),setTimeout((function(){alert("Se ha actualizado su reporte. La orden desaparecer\xe1 de su listado."),l(-1),$(!1),k(""),w()}),500);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 17:e.next=21;break;case 19:$(!1),alert("Dispositivo no est\xe1 conectado a internet. Conecte a una red e intente nuevamente");case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(){var e=Jn(Kn().mark((function e(t){var n,r,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G(!1),!t){e.next=61;break}if($(!0),g("Guardando informaci\xf3n"),!(n=h).testMode){e.next=33;break}if(r=0,n.level&&0!==n.level?r=n.level+1:(r=1,n.endReport=new Date),n.emailing="termino-orden-".concat(r),2!==r){e.next=14;break}n.shiftManagerApprovedBy=o._id,n.shiftManagerApprovedDate=new Date,e.next=28;break;case 14:if(3!==r){e.next=20;break}n.chiefMachineryApprovedBy=o._id,n.chiefMachineryApprovedDate=new Date,n.state="Por cerrar",e.next=28;break;case 20:if(4!==r){e.next=28;break}return n.sapExecutiveApprovedBy=o._id,n.dateClose=new Date,n.state="Completadas",n.level=r,console.log(n),e.next=28,On(n);case 28:n.level=r,sue(n.emailing,n.idIndex,n.history[n.history.length-1].userSendingData,o),Qe(n),e.next=61;break;case 33:if(100!==N){e.next=59;break}if(a=0,n.level&&0!==n.level?a=n.level+1:(a=1,n.endReport=new Date),n.emailing="termino-orden-".concat(a),2!==a){e.next=42;break}n.shiftManagerApprovedBy=o._id,n.shiftManagerApprovedDate=new Date,e.next=54;break;case 42:if(3!==a){e.next=48;break}n.chiefMachineryApprovedBy=o._id,n.chiefMachineryApprovedDate=new Date,n.state="Por cerrar",e.next=54;break;case 48:if(4!==a){e.next=54;break}return n.sapExecutiveApprovedBy=o._id,n.dateClose=new Date,n.state="Completadas",e.next=54,On(n);case 54:n.level=a,sue(n.emailing,n.idIndex,n.history[n.history.length-1].userSendingData,o),Qe(n),e.next=61;break;case 59:$(!1),alert("Reporte est\xe1 incompleto.");case 61:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Jn(Kn().mark((function e(t){var n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(t),g("Guardando en bases de datos"),e.next=4,sr();case 4:return n=e.sent,(r=p).offLineGuard=Date.now(),e.next=9,ur(r,n.database);case 9:if(!s){e.next=12;break}return e.next=12,_n(r);case 12:alert(4===t.level?"Orden de trabajo cerrada correctamente":"Orden de trabajo enviado a revisi\xf3n"),l(-1),$(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=Jn(Kn().mark((function e(){var t,n,r,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(D>0)){e.next=14;break}return t=[],e.next=4,sr();case 4:return n=e.sent,e.next=7,lr(n.database);case 7:r=e.sent,console.log(r),a=r.filter((function(e){if(e.reportId===h._id)return e})),Object.keys(a[0].group).forEach((function(e,n){var r={nombre:e,data:[]};a[0].group[e].forEach((function(n,i){if("*"===n.unidad);else{var o={task:n.task,taskdesc:n.taskdesc,obs01:n.obs01,partnumberUtl:n.partnumberUtl,cantidad:n.cantidad,unidad:n.unidad,unidadData:n.unidadData?Number(n.unidadData):0,diferencia:parseFloat(n.cantidad.toString())-parseFloat(n.unidadData?n.unidadData.toString():"0")};r.data.push(o)}i===a[0].group[e].length-1&&r.data.length>0&&(console.log(r),t.push(r))})),n===Object.keys(a[0].group).length-1&&We(t)})),Pe(!0),e.next=15;break;case 14:alert("Orden a\xfan no est\xe1 listo para revisar el listado de materiales o insumos.");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,xr.jsxs)(Jc,{height:"80vh",children:[(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:u.pageContainer,item:!0,xs:12,children:(0,xr.jsx)(Joe,{elevation:0,className:"pageCard",children:(0,xr.jsxs)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10,width:"100%"},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){l(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsxs)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:["Actividades Asignadas / Detalle / OT ",c," ",(0,xr.jsx)("strong",{children:h&&h.testMode?"Modo test":""})]})]})})}),(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xl:p?10:12,md:p?10:12,sm:12,children:(0,xr.jsx)("div",{style:{padding:20},children:p&&p._id?(0,xr.jsx)(Koe,{height:fe?"calc(100vh - 850px)":"calc(100vh - 360px)",report:h,setProgress:function(e){var t=e.progressPage,n=e.globalProgress;_(Number(t)),A(Number(n))},setIndexGroupToSend:Y,resultThisItemProgress:A,selectionItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new String,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new String,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new String;return console.log(e,t),"PC5500"===t?"Motor"===e||"Mando Final"===e||"Rodado"===e||"PTO"===e||"Neum\xe1ticos"===e||"Hidr\xe1ulico"===e||"Mando de Giro"===e||"Chassis"===e||"Cabina"===e||"Implementos"===e||"El\xe9ctrico"===e:"793-F"===t?"Motor"===e||"Transmisi\xf3n"===e||"Ejes"===e||"Neum\xe1ticos"===e||"Hidr\xe1ulico"===e||"Direcci\xf3n"===e||"Chassis"===e||"Cabina"===e||"Mazas"===e||"Sistema Neum\xe1tico"===e||"Suspensi\xf3n"===e:void 0}(e,ge.model),n={name:gr(e),brand:ge.brand,model:ge.model,nameModel:"".concat(gr(e),"_").concat(ge.model)};console.log(t),Te(JSON.stringify(n)),we(t)},setUltimoGuardadoDispositivo:Re,canEdit:j,executionReport:p}):(0,xr.jsx)("div",{style:{width:"100%",lineHeight:fe?"calc(100vh - 850px)":"calc(100vh - 360px)",height:fe?"calc(100vh - 850px)":"calc(100vh - 360px)",textAlign:"center"},children:(0,xr.jsx)("p",{style:{lineHeight:" 1.5",display:"inline-block",verticalAlign:"middle",fontSize:25},children:y?"Descargando pauta...":"Reporte no iniciado"})})})}),h&&p&&(0,xr.jsx)(Ns,{item:!0,xl:2,md:2,sm:12,children:(0,xr.jsxs)("div",{style:{marginTop:20,padding:20,backgroundColor:"#F9F9F9",borderRadius:10,height:"71vh",overflowY:"auto"},children:[(0,xr.jsxs)("div",{style:{textAlign:"center",width:"100%"},children:[(0,xr.jsxs)("h2",{style:{margin:0},children:["OT ",c]}),(0,xr.jsxs)("p",{style:{margin:0},children:["OM SAP: ",m&&m]}),(0,xr.jsxs)("p",{style:{margin:0},children:["Serie Equipo: ",v&&v]}),(0,xr.jsxs)("p",{style:{margin:0},children:["Tipo de pauta: ",(0,xr.jsx)("strong",{children:h&&h.reportType})]}),(0,xr.jsx)("p",{style:{backgroundColor:"red",color:"white",marginBottom:0},children:(0,xr.jsx)("strong",{children:h&&h.testMode?"Modo test":""})}),ge&&(0,xr.jsxs)("p",{style:{margin:0},children:["Modelo M\xe1quina ",ge.model,", N\xb0",ge.equ]}),(0,xr.jsx)("br",{}),xe&&(0,xr.jsx)(nl,{variant:"contained",disabled:!xe,style:{paddingLeft:20,paddingRight:20,paddingTop:10,paddingBottom:10},onClick:function(){Ie(!0)},children:(0,xr.jsx)("strong",{children:"3D"})})]}),(0,xr.jsxs)("h4",{style:{textAlign:"center"},children:["Avance en esta hoja: ",C,"%"]}),(0,xr.jsx)(oue,{variant:"determinate",value:C,style:{width:"100%"}}),(0,xr.jsxs)("h4",{style:{textAlign:"center"},children:["Avance total: ",N,"%"]}),(0,xr.jsx)(oue,{variant:"determinate",value:N,style:{width:"100%"}}),(0,xr.jsx)("br",{}),(n&&(!h.level||0===h.level)&&h.usersAssigned[0]===o._id||a&&1===h.level||i&&2===h.level)&&(0,xr.jsxs)(nl,{variant:"contained",color:"primary",style:{padding:10,width:"100%",marginBottom:20},onClick:Xe,children:[(0,xr.jsx)(Hi,{icon:Ur,style:{marginRight:10}})," Enviar OT"]}),(r&&3===h.level||t)&&(0,xr.jsxs)(nl,{variant:"contained",color:"primary",style:{padding:10,width:"100%",marginBottom:20},onClick:Xe,children:[(0,xr.jsx)(Hi,{icon:Ur,style:{marginRight:10}})," Cerrar OT"]}),(r&&3===h.level||t)&&(0,xr.jsxs)(nl,{variant:"contained",color:"primary",style:{padding:10,width:"100%",marginBottom:20},onClick:Je,children:[(0,xr.jsx)(Hi,{icon:Or,style:{marginRight:10}})," Resumen Insumos/Materiales"]}),(a&&1===h.level||i&&2===h.level||r&&3===h.level)&&(0,xr.jsxs)(nl,{variant:"contained",color:"primary",style:{padding:10,width:"100%",marginBottom:20},onClick:function(){s?(Ge(!1),qe()):alert("Dispositivo debe estar conectado a internet.")},children:[(0,xr.jsx)(rl,{}),"Rechazar OT"]}),n&&(0===h.level||!h.level)&&h.usersAssigned[0]===o._id&&(0,xr.jsxs)(nl,{onClick:Ye,variant:"contained",color:"primary",style:{padding:10,width:"100%",marginBottom:20},children:[(0,xr.jsx)(Hi,{icon:Mr,style:{marginRight:10}})," Terminar Jornada"]}),(0,xr.jsxs)(nl,{variant:"contained",color:"primary",style:{padding:10,width:"100%",marginBottom:0},onClick:function(){de(!0)},children:[(0,xr.jsx)(Hi,{icon:Ir,style:{marginRight:10}})," Mensajes de flujo"]})]})})]}),H&&(0,xr.jsx)(fce,{canEdit:j,open:H,closeModal:He?Ke:function(e){if(G(!1),e){$(!0),console.log(h);var t=h;if(t.testMode){var n=t.level-1;t.level=n,t.emailing="rechazo-orden-".concat(n),2===n||3===n&&(t.state="En proceso"),console.log(t),sue(t.emailing,t.idIndex,t.history[t.history.length-1].userSendingData,o._id),Qe(t)}else if(100===N){var r=t.level-1;t.level=r,t.emailing="rechazo-orden-".concat(r),2===r||3===r&&(t.state="En proceso"),console.log(t),sue(t.emailing,t.idIndex,t.history[t.history.length-1].userSendingData,o._id),Qe(t)}else $(!1),alert("Reporte est\xe1 incompleto.")}},report:h,messageType:oe}),ce&&(0,xr.jsx)(vce,{open:ce,close:function(){de(!1)},report:h})]})})})}),Le&&(0,xr.jsx)(mce,{open:Le,data:ze,closePreviewModal:function(){Pe(!1)}}),J&&(0,xr.jsx)(Jle,{open:J}),(0,xr.jsx)(Wo,{open:Me,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,xr.jsxs)(Jc,{sx:qt,children:[(0,xr.jsx)(Moe,{subSistem:Ee}),(0,xr.jsx)(dd,{onClick:function(){Ie(!1)},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},color:"primary",children:(0,xr.jsx)(rl,{})})]})})]})},lue=function(){var e=Be(),t=Vt(),n=(0,E.useState)([]),r=(0,U.Z)(n,2),a=r[0],i=r[1];return(0,E.useEffect)((function(){Nn().then((function(e){e.data.forEach(function(){var t=Jn(Kn().mark((function t(n,r){return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fr(n.from);case 2:n.fullName=t.sent,n.index=r,r==e.data.length-1&&i(e.data.reverse());case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}))}),[]),(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:t.pageContainer,item:!0,xs:12,children:(0,xr.jsx)(Joe,{elevation:0,className:"pageCard",children:(0,xr.jsxs)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){e(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsx)("p",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Mensajes Internos"})]})})}),(0,xr.jsx)("div",{style:{width:"100vw",marginRight:11,overflowY:"scroll",maxHeight:"70vh",paddingLeft:20,paddingRight:20},children:(0,xr.jsx)(ku,{children:a.length>0&&a.map((function(e,t){return(0,xr.jsxs)("div",{children:[(0,xr.jsxs)("h2",{children:[e.index+1,".- ",e.fullName,":"]}),(0,xr.jsx)("p",{children:e.message}),(0,xr.jsx)("br",{})]},t)}))})})]})})})})})},cue=function(){var e=dse(),t=e.myNotifications,n=e.getNotifications,r=(0,E.useState)(!1),a=(0,U.Z)(r,2),i=a[0],o=a[1],s=Vt(),u=Be();return(0,xr.jsx)(Jc,{height:"100%",children:(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:s.pageContainer,item:!0,xs:12,children:(0,xr.jsxs)(Joe,{elevation:0,className:"pageCard",children:[(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsxs)("div",{style:{width:"100%",position:"relative",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:[(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){u(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Notificaciones"})]}),(0,xr.jsx)(nl,{onClick:function(){o(!0),setTimeout((function(){var e=(0,_.Z)(t);e.forEach((function(t,r){Ln(t._id),r==e.length-1&&(n(),o(!1))}))}),1e3)},style:{position:"absolute",right:10,top:10},children:"Indicar Todo Le\xeddo"})]})})}),(0,xr.jsxs)(Ns,{alignItems:"center",justifyContent:"center",style:{padding:10,borderRadius:20},children:[(0,xr.jsx)("div",{style:{height:"calc(100vh - 220px)",overflowY:"auto"},children:t.slice(0,20).map((function(e,t){return(0,xr.jsxs)(id,{style:{backgroundColor:e.state?"#fff":"#F9F9F9"},children:[(0,xr.jsxs)("div",{style:{width:"15%",marginLeft:5,fontSize:12},children:[(0,xr.jsx)("h1",{children:e.title}),(0,xr.jsx)("h2",{children:e.subtitle})]}),(0,xr.jsx)("div",{style:{width:"20%",marginLeft:5,fontSize:12},children:(0,xr.jsx)("p",{style:{fontSize:18},children:e.message})}),(0,xr.jsx)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:(0,xr.jsx)("p",{style:{fontSize:18},children:Jt(e.createdAt)})}),(0,xr.jsx)("div",{style:{width:"20%",marginLeft:5,fontSize:12},children:(0,xr.jsx)("button",{style:{width:50,height:40,borderRadius:20,fontSize:20},onClick:function(){var t;u(e.url),t=e._id,Ln(t)},children:"Ir"})})]},t)}))}),i&&(0,xr.jsx)(Jle,{open:i})]})]})})})})},due=function(){var e=Vt(),t=Be(),n=(0,E.useState)(!1),r=(0,U.Z)(n,2),a=r[0],i=r[1];return(0,xr.jsxs)(Jc,{height:"100%",children:[a&&(0,xr.jsx)(xue,{open:a,closeModal:function(){i(!1)}}),(0,xr.jsx)(Ns,{className:"pageRoot",container:!0,spacing:0,children:(0,xr.jsx)(Ns,{className:e.pageContainer,item:!0,xs:12,children:(0,xr.jsxs)(Joe,{elevation:0,className:"pageCard",children:[(0,xr.jsx)(Ns,{container:!0,alignItems:"center",justifyContent:"center",children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"left",padding:10},children:(0,xr.jsx)("div",{style:{width:"100%",position:"relative",textAlign:"left",color:"#333",backgroundColor:"#fff",borderRadius:20},children:(0,xr.jsxs)(xK,{style:{paddingLeft:0,backgroundColor:"#F9F9F9",borderRadius:10},children:[(0,xr.jsx)(ms,{onClick:function(){return setTimeout((function(){t(-1)}),500)},children:(0,xr.jsx)($oe,{style:{color:"#333",fontSize:16}})}),(0,xr.jsx)("h1",{style:{marginTop:0,marginBottom:0,fontSize:16},children:"Opciones"})]})})})}),(0,xr.jsxs)(Ns,{alignItems:"center",justifyContent:"center",style:{padding:10,borderRadius:20},children:[(0,xr.jsx)(Ns,{container:!0,children:(0,xr.jsx)(Ns,{item:!0,children:(0,xr.jsxs)(Ns,{container:!0,style:{borderBottomWidth:1,borderBottomColor:"#ccc",borderBottomStyle:"solid",padding:10},children:[(0,xr.jsx)(Ns,{item:!0,children:(0,xr.jsx)("div",{children:(0,xr.jsx)("p",{children:(0,xr.jsx)("strong",{children:"Ver pautas descargadas"})})})}),(0,xr.jsx)(Ns,{item:!0,children:(0,xr.jsx)("div",{style:{marginTop:10,marginLeft:15},children:(0,xr.jsx)(nl,{color:"primary",onClick:function(){i(!0)},children:"Abrir"})})})]})})}),(0,xr.jsx)(Ns,{container:!0,children:(0,xr.jsx)(Ns,{item:!0,children:(0,xr.jsxs)(Ns,{container:!0,style:{borderBottomWidth:1,borderBottomColor:"#ccc",borderBottomStyle:"solid",padding:10},children:[(0,xr.jsx)(Ns,{item:!0,children:(0,xr.jsx)("div",{children:(0,xr.jsxs)("p",{children:[(0,xr.jsx)("strong",{children:"Borrar Cach\xe9"})," ",(0,xr.jsx)("br",{})," (\xc9sta acci\xf3n borrar\xe1 toda la informaci\xf3n de la aplicaci\xf3n ",(0,xr.jsx)("br",{})," en el dispositivo)"]})})}),(0,xr.jsx)(Ns,{item:!0,children:(0,xr.jsx)("div",{style:{marginTop:26,marginLeft:15},children:(0,xr.jsx)(nl,{color:"primary",onClick:function(){confirm("Limpiar\xe1 toda la data del sistema y cerrar\xe1 la sesi\xf3n. Una vez terminado vuelva a iniciar.")&&window.indexedDB.databases().then((function(e){console.log(e),e.forEach((function(t,n){window.indexedDB.deleteDatabase(t.name),n==e.length-1&&(window.localStorage.clear(),window.location.reload(),removeDatabases())}))}))},children:"Borrar"})})})]})})})]})]})})})]})},hue=function(e){var t=e.height,n=e.hableButton,r=qce().users,a=(0,E.useState)([]),i=(0,U.Z)(a,2),o=i[0],s=i[1],u=(0,E.useState)([]),l=(0,U.Z)(u,2),c=l[0],d=(l[1],(0,E.useState)(!1)),h=(0,U.Z)(d,2),p=h[0],f=h[1],m=(0,E.useState)({}),v=(0,U.Z)(m,2),g=v[0],y=v[1],b=(0,E.useState)(0),x=(0,U.Z)(b,2),w=x[0],k=x[1],S=(0,E.useState)(!1),T=(0,U.Z)(S,2),C=T[0],_=T[1],M=(0,E.useState)([]),I=(0,U.Z)(M,2),N=I[0],A=I[1],R=(0,E.useState)([]),O=(0,U.Z)(R,2),D=O[0],L=O[1],P=function(e){hn(e).then((function(e){}))};(0,E.useEffect)((function(){}),[]),(0,E.useEffect)((function(){console.log(o)}),[o]);var F={height:70,borderRadius:10,boxShadow:"4px 4px 12px rgba(0, 0, 0, 0.08)",fontSize:14};return(0,xr.jsx)("div",{style:{height:t},children:(0,xr.jsxs)("div",{style:{height:t},children:[(0,xr.jsxs)(Ns,{container:!0,spacing:5,children:[(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:8,lg:8,children:(0,xr.jsx)(xK,{style:{width:"100%"},children:(0,xr.jsx)("h1",{children:"Administrar usuarios"})})}),(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:4,lg:4,children:(0,xr.jsx)("div",{style:{width:"100%",textAlign:"right"},children:(0,xr.jsx)(ft,{to:"/new-users",children:(0,xr.jsxs)("button",{disabled:!n,style:{marginTop:15,width:171,height:38,borderRadius:23,fontSize:16},children:[(0,xr.jsx)(Hi,{icon:$r,style:{marginRight:10}}),"Crear usuario"]})})})})]}),(0,xr.jsx)("div",{children:(0,xr.jsxs)(id,{children:[(0,xr.jsx)("div",{style:{width:"5%",marginLeft:5,fontSize:12}}),(0,xr.jsxs)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:[(0,xr.jsxs)("p",{style:{margin:0},children:[" ",(0,xr.jsx)("strong",{children:"Nombre de usuario"})," "]}),(0,xr.jsx)("input",{type:"text",placeholder:"Buscar por nombre",onChange:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new String;if(console.log(e),e.length>3){var t=c.filter((function(t){return(t.name+" "+t.lastName).toLocaleUpperCase().match(e.toLocaleUpperCase())?t:null}));s(t)}else 0===e.length&&s(c)}(e.target.value)}})]}),(0,xr.jsxs)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:[(0,xr.jsxs)("p",{style:{margin:0},children:[" ",(0,xr.jsx)("strong",{children:"Correo electr\xf3nico"})," "]}),(0,xr.jsx)("input",{type:"text",placeholder:"Buscar por correo",onChange:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new String;if(e.length>3){var t=c.filter((function(t){return t.email.toLocaleUpperCase().match(e.toLocaleUpperCase())?t:null}));s(t)}else 0===e.length&&s(c)}(e.target.value)}})]}),(0,xr.jsxs)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:[(0,xr.jsxs)("p",{style:{margin:0},children:[" ",(0,xr.jsx)("strong",{children:"RUN"})," "]}),(0,xr.jsx)("input",{style:{width:110},type:"text",placeholder:"Buscar por RUN",onChange:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new String;if(e.length>3){var t=c.filter((function(t){return t.rut&&t.rut.match(e)?t:null}));s(t)}else 0===e.length&&s(c)}(e.target.value)}})]}),(0,xr.jsx)("div",{style:{width:"15%",marginLeft:5,fontSize:12},children:(0,xr.jsxs)("p",{style:{margin:0,marginBottom:22},children:[" ",(0,xr.jsx)("strong",{children:"Rol"})," "]})}),(0,xr.jsx)("div",{style:{width:"15%",marginLeft:5,fontSize:12},children:(0,xr.jsxs)("p",{style:{margin:0,marginBottom:22},children:[" ",(0,xr.jsx)("strong",{children:"Faena/Obra"})," "]})}),(0,xr.jsx)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:(0,xr.jsxs)("p",{style:{margin:0,marginBottom:22},children:[" ",(0,xr.jsx)("strong",{children:"Estado"})," "]})})]})}),n&&(0,xr.jsxs)("div",{style:{overflowY:"auto",height:"calc(100vh - 350px)"},children:[0===r.length&&(0,xr.jsx)(ise,{}),r.length>0&&r.map((function(e,t){return(0,xr.jsxs)(id,{style:F,children:[(0,xr.jsx)("div",{style:{width:"5%",marginLeft:5,fontSize:12},children:(0,xr.jsx)("img",{style:{height:50,borderRadius:"50%",objectFit:"cover",width:50},src:e.imageUrl?e.imageUrl:"../assets/no-profile-image.png",alt:""})}),(0,xr.jsxs)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:[e.name," ",e.lastName]}),(0,xr.jsx)("div",{style:{width:"10%",marginLeft:5,fontSize:12,wordBreak:"break-all"},children:"x@x.xx"===e.email?"----":e.email}),(0,xr.jsx)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:e.rut}),(0,xr.jsx)("div",{style:{width:"15%",marginLeft:5,fontSize:12,overflowY:"auto",maxHeight:50},children:e.role&&e.role.length>0?Xt(e.role):e.roles.map((function(e,t){return(0,xr.jsx)("p",{style:{margin:0},children:Xt(e)},t)}))}),(0,xr.jsx)("div",{style:{width:"15%",marginLeft:5,fontSize:12},children:e.obras&&e.obras[0]?e.obras[0].descripcion:""}),(0,xr.jsxs)("div",{style:{width:"10%",marginLeft:5,fontSize:12},children:[e.enabled&&(0,xr.jsx)("p",{style:{borderRadius:5,maxWidth:200,textAlign:"center",backgroundColor:"#C3EBD4",paddingTop:3,paddingRight:28,paddingBottom:3,paddingLeft:28},children:"ACTIVO"}),!e.enabled&&(0,xr.jsx)("p",{style:{borderRadius:5,maxWidth:200,textAlign:"center",backgroundColor:"#F9F9F9",paddingTop:3,paddingRight:28,paddingBottom:3,paddingLeft:28},children:"INACTIVO"})]}),(0,xr.jsx)(ms,{title:"Informaci\xf3n del usuario",onClick:function(){return function(e,t){y(e),_(e.enabled),A(e.permissionsReports),L(e.permissionsUsers),k(t),f(!0)}(e,t)},children:(0,xr.jsx)(Hi,{icon:Fr})}),(0,xr.jsx)(ft,{to:"/edit-user/".concat(e._id),children:(0,xr.jsx)(ms,{title:"Editar usuario",children:(0,xr.jsx)(Hi,{icon:Vr})})}),(0,xr.jsx)(ms,{title:"Borrar usuario",onClick:function(){var t,n,r;t=e._id,n=e.name,r=e.lastName,"admin"===e.role?alert("No es posible eliminar un Administrador."):confirm("Remover\xe1 al usuario ".concat(n," ").concat(r,". Confirme la acci\xf3n."))&&mn(t).then(function(){var e=Jn(Kn().mark((function e(t){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.t0=s,e.next=4,new Promise((function(e){pn().then((function(t){e(t)}))}));case 4:e.t1=e.sent.data,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:(0,xr.jsx)(Hi,{icon:Qr})})]},t)})),g&&(0,xr.jsx)(hd,{open:p,userModal:g,handleChange:function(e){_(e.target.checked),o[w].enabled=e.target.checked},checked:C,permissionsReports:N,permissionsUsers:D,closeModal:function(e){f(!1),P(e)}})]}),!n&&(0,xr.jsx)("div",{style:{textAlign:"center",width:"100%",height:"50%",paddingTop:50},children:(0,xr.jsx)("h1",{children:"Requiere conexi\xf3n a internet para administraci\xf3n de usuarios"})})]})})},pue=function(e){var t=e.typeDisplay,n=e.uData,r=Kce(),a=r.sites,i=r.setSiteSelected,o=(0,E.useContext)(Fce),s=o.setUserData,u=o.userData,l=(o.rolesListSelectionCache,o.setRolesListSelectionCache),c=o.setChangeModule,d=(0,E.useState)("password"),h=(0,U.Z)(d,2),p=h[0],f=h[1],m=(0,E.useState)("password"),v=(0,U.Z)(m,2),g=v[0],y=v[1],b=(0,E.useState)([]),x=(0,U.Z)(b,2),w=x[0],k=x[1],S=(0,E.useState)(!1),T=(0,U.Z)(S,2),C=T[0],M=T[1],I=(0,E.useState)(!1),N=(0,U.Z)(I,2),A=N[0],R=(N[1],(0,E.useState)()),O=(0,U.Z)(R,2),D=O[0],L=O[1];(0,E.useEffect)((function(){P()}),[]);var P=function(){var e=Jn(Kn().mark((function e(){var t,n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cn();case 2:t=e.sent,n=[],t.data.forEach((function(e){e.selected=!1,"superAdmin"===e.dbName||n.push(e)})),0===u.roles.length?(l(n),k(n)):(n.forEach((function(e){e.selected=!1,u.roles.forEach((function(t){e.dbName===t&&(e.selected=!0)}))})),console.log(n),k(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,E.useEffect)((function(){if(u.password&&u.confirmPassword&&u.password.length>5&&u.confirmPassword.length>5&&(u.password===u.confirmPassword?(M(!1),document.getElementById("passw").className="isValid",document.getElementById("c_passw").className="isValid"):(M(!0),document.getElementById("passw").className="isInvalid",document.getElementById("c_passw").className="isInvalid")),(0,CK.validate)(u.rut)?document.getElementById("rut").className="isValid":document.getElementById("rut").className="isInvalid",u.roles.length>0){var e=(0,_.Z)(w);e.forEach((function(e){u.roles.forEach((function(t){t===e.dbName&&(e.selected=!0)}))})),k(e),l(e)}}),[u]);var F=function(){var e=Jn(Kn().mark((function e(t){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vn(t);case 2:n=e.sent,L(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,E.useEffect)((function(){console.log(w)}),[w]),(0,xr.jsxs)("div",{style:{height:"calc(100vh-500px)",width:"100%"},children:["Nuevo usuario"===t&&(0,xr.jsx)(Ns,{children:(0,xr.jsx)("div",{children:(0,xr.jsxs)("p",{children:["Para enrolar nuevo usuario debe ingresar todos los datos. ",(0,xr.jsx)("br",{})," Foto de perfil se podr\xe1 cargar una vez creado."]})})}),(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xl:"Nuevo usuario"===t?"auto":3,lg:"Nuevo usuario"===t?"auto":3,md:12,sm:12,xs:12,hidden:"Nuevo usuario"===t,children:(0,xr.jsxs)("div",{style:{textAlign:"center"},children:[(0,xr.jsx)("p",{children:"Foto de perfil"}),(0,xr.jsx)("button",{style:{height:224,width:190,borderRadius:8,objectFit:"cover"},onClick:function(){n._id?document.getElementById("profileImage").click():alert("Solo puede agregar foto una vez creado el usuario.")},children:D?(0,xr.jsx)("img",{src:D,style:{objectFit:"cover",width:"100%"},height:"100%"}):(0,xr.jsxs)("div",{children:[(0,xr.jsx)(Hi,{icon:Wr,style:{fontSize:18}}),(0,xr.jsx)("br",{}),(0,xr.jsx)("br",{}),"CARGAR",(0,xr.jsx)("br",{}),"FOTO"]})}),(0,xr.jsx)("input",{autoComplete:"off",type:"file",id:"profileImage",onChange:function(e){F(e.target.files[0])},hidden:!0})]})}),(0,xr.jsxs)(Ns,{item:!0,xl:"Nuevo usuario"===t?12:9,lg:"Nuevo usuario"===t?12:9,md:12,sm:12,xs:12,children:[(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xl:8,lg:8,children:(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xl:4,lg:4,md:6,sm:12,xs:12,children:(0,xr.jsxs)(ou,{style:{width:"100%",paddingRight:10},children:[(0,xr.jsx)("p",{style:{margin:0,marginTop:5},children:"RUT"}),(0,xr.jsx)("input",{autoComplete:"off",required:!0,id:"rut",className:"inputClass",type:"text",minLength:11,maxLength:12,onInput:function(e){return t=e.target.value,void s(br(br({},u),{},"-"===t?{rut:""}:{rut:(0,CK.format)(t)}));var t},value:u.rut,placeholder:"11.222.333-K",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,xr.jsx)(Ns,{item:!0,xl:8,lg:8,md:12,sm:12,xs:12,children:(0,xr.jsxs)(ou,{style:{width:"100%",paddingRight:10},children:[(0,xr.jsx)("p",{style:{margin:0,marginTop:5},children:"Obra"}),(0,xr.jsxs)("select",{required:!0,name:"site",id:"site",style:{width:"100%",height:44,borderRadius:10,fontSize:20},onChange:function(e){s(br(br({},u),{},{obras:[e.target.value]})),i(e.target.value)},value:u.obras[0],className:"inputClass",children:[(0,xr.jsx)("option",{children:"Seleccione..."}),a.length>0&&a.map((function(e,t){return(0,xr.jsx)("option",{value:e._id,children:e.descripcion},t)}))]})]})}),(0,xr.jsx)(Ns,{item:!0,xl:12,lg:12,md:12,sm:12,xs:12,children:(0,xr.jsxs)(ou,{style:{width:"100%",paddingRight:10},children:[(0,xr.jsx)("p",{style:{margin:0,marginTop:5},children:"Obra"}),(0,xr.jsxs)("select",{required:!0,name:"test",id:"test",style:{width:"100%",height:44,borderRadius:10,fontSize:20},onChange:function(e){return s(br(br({},u),{},{isTest:"true"===e.target.value}))},value:u.isTest,className:"inputClass",children:[(0,xr.jsx)("option",{value:!1,children:"Seleccione..."}),(0,xr.jsx)("option",{value:!0,children:"Modo Test"})]})]})}),(0,xr.jsx)(Ns,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:(0,xr.jsxs)(ou,{style:{width:"100%",paddingRight:10},children:[(0,xr.jsx)("p",{style:{margin:0,marginTop:5},children:"Nombre"}),(0,xr.jsx)("input",{autoComplete:"off",required:!0,className:"inputClass",id:"name",onChange:function(e){return s(br(br({},u),{},{name:e.target.value}))},value:u.name,placeholder:"John",type:"text",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,xr.jsx)(Ns,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:(0,xr.jsxs)(ou,{style:{width:"100%",paddingRight:10},children:[(0,xr.jsx)("p",{style:{margin:0,marginTop:5},children:"Apellido"}),(0,xr.jsx)("input",{autoComplete:"off",required:!0,className:"inputClass",id:"lastName",onChange:function(e){return s(br(br({},u),{},{lastName:e.target.value}))},value:u.lastName,placeholder:"Doe",type:"text",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,xr.jsx)(Ns,{item:!0,xl:8,lg:8,md:6,sm:12,xs:12,children:(0,xr.jsxs)(ou,{style:{width:"100%",paddingRight:10},children:[(0,xr.jsx)("p",{style:{margin:0,marginTop:5},children:"Correo electr\xf3nico"}),(0,xr.jsx)("input",{autoComplete:"off",required:!0,id:"email",onChange:function(e){return s(br(br({},u),{},{email:e.target.value}))},value:u.email,placeholder:"nombre@correo.cl",type:"email",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,xr.jsx)(Ns,{item:!0,xl:4,lg:4,md:6,sm:12,xs:12,children:(0,xr.jsxs)(ou,{style:{width:"100%",paddingRight:10},children:[(0,xr.jsx)("p",{style:{margin:0,marginTop:5},children:"N\xfamero de tel\xe9fono"}),(0,xr.jsx)("input",{autoComplete:"off",required:!0,className:"inputClass",id:"phone",minLength:9,onInput:function(e){e.target.value=e.target.value.slice(0,9)},onChange:function(e){return s(br(br({},u),{},{phone:e.target.value}))},value:u.phone,placeholder:"999998888",type:"phone",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),"Nuevo usuario"===t&&(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsxs)(Ns,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:[(0,xr.jsx)("p",{style:{margin:0,marginTop:5},children:"Contrase\xf1a"}),(0,xr.jsx)("div",{style:{float:"left",width:"100%",paddingRight:10},children:(0,xr.jsx)("input",{autoComplete:"off",id:"passw",required:!0,className:"isInvalid",onChange:function(e){return s(br(br({},u),{},{password:e.target.value}))},value:u.password,minLength:6,placeholder:"Min 6 car\xe1cteres",type:p,style:{width:"100%",height:44,borderRadius:10,fontSize:20,paddingRight:50}})}),(0,xr.jsx)("div",{style:{float:"left",width:"1%",marginLeft:-50},children:(0,xr.jsxs)(ms,{style:{width:40},onClick:function(){f("password"===p?"text":"password")},children:["password"===p&&(0,xr.jsx)(Hi,{icon:Or}),"text"===p&&(0,xr.jsx)(Hi,{icon:Dr})]})})]}),(0,xr.jsxs)(Ns,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:[(0,xr.jsx)("p",{style:{margin:0,marginTop:5},children:"Confirmar contrase\xf1a"}),(0,xr.jsx)("div",{style:{float:"left",width:"100%",paddingRight:10},children:(0,xr.jsx)("input",{autoComplete:"off",id:"c_passw",required:!0,className:"isInvalid",onChange:function(e){return s(br(br({},u),{},{confirmPassword:e.target.value}))},value:u.confirmPassword,minLength:6,placeholder:"Repita contrase\xf1a",type:g,style:{width:"100%",height:44,borderRadius:10,fontSize:20,paddingRight:50}})}),(0,xr.jsx)("div",{style:{float:"left",width:"1%",marginLeft:-50},children:(0,xr.jsxs)(ms,{style:{width:40},onClick:function(){y("password"===g?"text":"password")},children:["password"===g&&(0,xr.jsx)(Hi,{icon:Or}),"text"===g&&(0,xr.jsx)(Hi,{icon:Dr})]})})]})]})]})}),(0,xr.jsx)(Ns,{item:!0,xl:4,lg:4,children:(0,xr.jsx)(Ns,{container:!0,style:{height:"100%"},children:(0,xr.jsxs)("div",{style:{padding:"0px 10px",borderLeftColor:"#ccc",borderLeftStyle:"solid",borderLeftWidth:1,height:"100%"},children:[(0,xr.jsx)("div",{style:{marginTop:10,marginPadding:10},children:(0,xr.jsx)("h2",{children:"Roles de usuario"})}),w.map((function(e,t){return(0,xr.jsx)(Ns,{sm:12,item:!0,children:(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,sm:1,children:(0,xr.jsx)(qoe,{style:{padding:3},checked:e.selected,onChange:function(e){!function(e,t){var n=(0,_.Z)(w),r=[];n.forEach((function(n,a){a===t&&(n.selected=e.target.checked,n.selected&&r.push(n.dbName))})),k(n),l(n),c(!0)}(e,t)}})}),(0,xr.jsx)(Ns,{item:!0,sm:11,children:(0,xr.jsx)("p",{style:{margin:"5px 0px 5px 10px"},children:e.name})})]})},t)}))]})})})]}),C&&(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,xr.jsx)("h3",{style:{color:"red"},children:"Contrase\xf1as no coinciden"})}),(0,xr.jsx)(nd,{open:A,withProgress:!1,loadingData:"Espere..."})]})]})]})},fue=function(e){e.width;var t=e.height,n=e.typeDisplay,r=(e.id,(0,E.useContext)(Fce)),a=r.userData,i=(r.setUserData,Kce().siteSelected,(0,E.useState)("")),o=(0,U.Z)(i,2),s=o[0],u=o[1];(0,E.useEffect)((function(){console.log(a),a.obras&&l()}),[a.obras]);var l=function(){var e=Jn(Kn().mark((function e(){var t,n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",n=(t=a).obras[0]._id?t.obras[0]._id:t.obras[0],e.next=5,zn(n);case 5:r=e.sent,console.log(r),u(r.data.data.descripcion);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,xr.jsx)(Ns,{container:!0,style:{height:t},children:(0,xr.jsx)(Ns,{item:!0,xl:12,md:12,style:{padding:20,marginRight:0,backgroundColor:"#F9F9F9",borderRadius:20,overflowY:"auto"},children:(0,xr.jsxs)("div",{style:{textAlign:"center"},children:[(0,xr.jsx)("h2",{children:"Resumen del usuario"}),(0,xr.jsxs)("div",{style:{width:"100%",marginBottom:15},children:[(0,xr.jsx)("p",{style:{margin:0,fontSize:12,fontWeight:"bold"},children:"RUT"}),(0,xr.jsx)("p",{style:{margin:0,fontSize:16},children:a.rut})]}),(0,xr.jsxs)("div",{style:{width:"100%",marginBottom:15},children:[(0,xr.jsx)("p",{style:{margin:0,fontSize:12,fontWeight:"bold"},children:"Nombre y Apellido"}),(0,xr.jsxs)("p",{style:{margin:0,fontSize:16},children:[a.name," ",a.lastName]})]}),(0,xr.jsxs)("div",{style:{width:"100%",marginBottom:15},children:[(0,xr.jsx)("p",{style:{margin:0,fontSize:12,fontWeight:"bold"},children:"Tipo de usuario"}),a.roles.map((function(e,t){return(0,xr.jsx)("p",{children:Xt(e)},t)}))]}),(0,xr.jsxs)("div",{style:{width:"100%",marginBottom:15},children:[(0,xr.jsx)("p",{style:{margin:0,fontSize:12,fontWeight:"bold"},children:"Obra"}),(0,xr.jsx)("p",{style:{margin:0,fontSize:16},children:s})]}),(0,xr.jsxs)("div",{style:{width:"100%",marginBottom:15},children:[(0,xr.jsx)("p",{style:{margin:0,fontSize:12,fontWeight:"bold"},children:"Correo electr\xf3nico"}),(0,xr.jsx)("p",{style:{margin:0,fontSize:16},children:a.email})]}),(0,xr.jsxs)("div",{style:{width:"100%",marginBottom:15},children:[(0,xr.jsx)("p",{style:{margin:0,fontSize:12,fontWeight:"bold"},children:"Tel\xe9fono"}),(0,xr.jsxs)("p",{style:{margin:0,fontSize:16},children:["+56 ",a.phone]})]}),"Nuevo usuario"===n&&(0,xr.jsxs)("div",{style:{width:"100%",marginBottom:15},children:[(0,xr.jsx)("p",{style:{margin:0,fontSize:12,fontWeight:"bold"},children:"Contrase\xf1a"}),(0,xr.jsxs)("p",{style:{margin:0,fontSize:16},children:[a.password," "," "]})]})]})})})},mue=function(e){var t=e.list,n=e.typeReportsSelected,r=e.statusReports,a=bce().admin,i=Kce().sites,o=(0,E.useState)(null),s=(0,U.Z)(o,2),u=s[0],l=s[1],c=(0,E.useState)(null),d=(0,U.Z)(c,2),h=d[0],p=d[1],f=(0,E.useState)(!1),m=(0,U.Z)(f,2),v=m[0],g=m[1],y=(0,E.useState)(!1),b=(0,U.Z)(y,2),x=b[0],w=b[1],k=(0,E.useState)([]),S=(0,U.Z)(k,2),T=S[0],C=S[1],_=(0,E.useState)(null),M=(0,U.Z)(_,2),I=M[0],N=M[1],A=Boolean(I),R=A?"simple-popover":void 0;(0,E.useEffect)((function(){console.log(a)}),[]);var O=function(){N(null)},D=function(e,t,n){if(0!==e&&e){if(1===e)return"Revisi\xf3n Supervisor";if(2===e)return"Revisi\xf3n J. Maquinaria";if(3===e)return"Revisi\xf3n SAP";if(4===e)return"Terminado"}else{if(!(t.length>0))return"Asignar";if("En proceso"===n)return"Ejecutando por operador";if("Asignar"===n)return"Reasignar"}};return(0,xr.jsxs)("div",{style:{width:"100%",paddingLeft:10,paddingRight:10},children:[(0,xr.jsxs)(Ns,{container:!0,style:{width:"100%",borderBottomColor:"#ccc",borderBottomStyle:"solid",borderBottomWidth:1},children:[(0,xr.jsx)(Ns,{item:!0,xs:"auto",sm:"auto",md:"auto",lg:"auto",xl:"auto",children:(0,xr.jsx)("p",{style:{textAlign:"center",width:50},children:(0,xr.jsx)("strong",{children:"N\xb0 OT"})})}),(0,xr.jsx)(Ns,{item:!0,xs:"auto",sm:"auto",md:"auto",lg:"auto",xl:"auto",children:(0,xr.jsxs)("p",{style:{textAlign:"center",minWidth:70},children:[" ",(0,xr.jsx)("strong",{children:"M\xe1quina"})," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,xr.jsx)("strong",{children:"Pauta"})," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,xr.jsxs)("strong",{children:["Fecha ",(0,xr.jsx)("br",{})," Prevista"]})," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,xr.jsxs)("strong",{children:["Fecha ",(0,xr.jsx)("br",{})," Inicio"]})," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,xr.jsxs)("strong",{children:["Fecha ",(0,xr.jsx)("br",{})," T\xe9rmino"]})," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,xr.jsx)("strong",{children:"Hor\xf3metro"})," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,xr.jsx)("strong",{children:"Estado"})," "]})}),"Completadas"!==n?(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:2,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,xr.jsx)("strong",{children:"Responsable"})," "]})}):(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:2,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,xr.jsx)("strong",{children:"OM SAP"})," "]})}),a&&(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center",minWidth:70},children:[" ",(0,xr.jsx)("strong",{children:"Obra"})," "]})}),"Completadas"===n&&(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center",minWidth:70},children:[" ",(0,xr.jsx)("strong",{children:"Download"})," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:"auto",sm:"auto",md:"auto",lg:"auto",xl:"auto",children:(0,xr.jsxs)("p",{style:{textAlign:"center",minWidth:70},children:[" ",(0,xr.jsx)("strong",{children:"Flota"})," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"left"},children:[" ",(0,xr.jsx)("strong",{children:"Acci\xf3n"})," "]})})]}),(0,xr.jsx)("div",{children:0==t.length&&(0,xr.jsx)(Ns,{container:!0,children:(0,xr.jsxs)("div",{style:{width:"100%",textAlign:"center",height:"50vh"},children:[(0,xr.jsx)("img",{style:{margin:0,top:"50%",left:"calc(100%/1.53)"},src:"../../assets/icons/Arrow.svg",alt:""}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center",top:"55%"},children:r?(0,xr.jsxs)("p",{children:["Descargando la informaci\xf3n ",(0,xr.jsx)("br",{})," Espere un momento."]}):(0,xr.jsxs)("p",{children:["Selecciona otra opci\xf3n ",(0,xr.jsx)("br",{})," El detalle no cuenta con lista de reportes."]})})]})})}),(0,xr.jsx)("div",{style:{height:"calc(100vh - 370px)",overflowY:"auto"},children:t.map((function(e,t){return(0,xr.jsxs)(Ns,{container:!0,style:{width:"100%",borderBottomColor:"#ccc",borderBottomStyle:"solid",borderBottomWidth:1},children:[(0,xr.jsx)(Ns,{item:!0,xs:"auto",sm:"auto",md:"auto",lg:"auto",xl:"auto",children:(0,xr.jsxs)("p",{style:{textAlign:"center",width:50},children:[" ",e.idIndex," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:"auto",sm:"auto",md:"auto",lg:"auto",xl:"auto",children:(0,xr.jsxs)("p",{style:{textAlign:"center",minWidth:70},children:[" ",e.machineData&&e.machineData.equ," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",e.guide," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",Qt(e.datePrev)," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",Qt(e.dateInit)," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",Qt(e.endPrev)," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(e.machineData.hourMeter/36e5).toFixed(2).toLocaleString()," hrs "]})}),(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsx)("div",{style:{textAlign:"center"},children:(0,xr.jsxs)("p",{children:[" ",(0,xr.jsx)("strong",{children:D(e.level,e.usersAssigned,e.state)})," "]})})}),"Completadas"!==n?e.enabled?(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:2,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,xr.jsx)("button",{onClick:function(){l(e),g(!0)},style:{backgroundColor:"#F9F9F9",borderRadius:20,borderColor:"#757575",maxWidth:130,height:24,fontSize:12},children:"Asignar"})," "]})}):(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,xr.jsx)("button",{disabled:!0,style:{backgroundColor:"#F9F9F9",borderRadius:20,borderColor:"#757575",maxWidth:130,height:24,fontSize:12},children:"Terminado"})," "]})}):(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",e.sapId," "]})}),a&&(0,xr.jsxs)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,style:{textAlign:"center"},children:[(0,xr.jsxs)(nl,{"aria-describedby":R,style:{textAlign:"center",minWidth:70,marginTop:5},onClick:function(t){!function(e,t){console.log(t),console.log(i);var n=i.filter((function(e){if(t===e.idobra)return e}));C(n[0].descripcion),N(e.currentTarget)}(t,e.site)},children:[" ",e.site," "]}),(0,xr.jsx)(bu,{id:R,open:A,anchorEl:I,onClose:O,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,xr.jsx)("div",{style:{padding:5},children:(0,xr.jsx)("p",{children:T})})})]}),"Completadas"===n&&(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:e.urlPdf?(0,xr.jsx)("p",{style:{textAlign:"center",minWidth:70},children:(0,xr.jsx)("a",{href:"".concat(e.urlPdf),children:"Link"})}):(0,xr.jsx)("p",{style:{textAlign:"center",minWidth:70},children:" Sin URL "})}),(0,xr.jsx)(Ns,{item:!0,xs:"auto",sm:"auto",md:"auto",lg:"auto",xl:"auto",children:(0,xr.jsxs)("p",{style:{textAlign:"center",minWidth:70},children:[" ",e.machineData&&e.machineData.model," "]})}),(0,xr.jsx)(Ns,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:(0,xr.jsx)(Ns,{container:!0,children:(0,xr.jsx)(Ns,{item:!0,children:(0,xr.jsxs)("p",{style:{textAlign:"center"},children:[" ",(0,xr.jsx)("button",{onClick:function(){p(e),w(!0)},style:{backgroundColor:"#F9F9F9",borderRadius:20,borderColor:"#757575",maxWidth:130,height:24,fontSize:12},children:"Ver"})," "]})})})})]},t)}))}),u&&(0,xr.jsx)(cce,{open:v,report:u,reportType:u.reportType,onlyClose:function(){g(!1)},closeModal:function(){g(!1)}}),h&&(0,xr.jsx)(hce,{open:x,report:h,onlyClose:function(){p(null)}})]})},vue=n(1276),gue=n.n(vue),yue=function(e){var t=e.width,n=e.height,r=e.setRefCanvas;e.disabled;return(0,xr.jsx)(gue(),{ref:function(e){r(e)},penColor:"black",canvasProps:{width:t,height:n,style:{borderStyle:"solid",borderWidth:1,borderColor:"#333",borderRadius:20}}})},bue=function(e){var t=e.open,n=e.closeModal,r=e.savedInfo,a=(0,E.useState)(""),i=(0,U.Z)(a,2),o=i[0],s=i[1],u=(0,E.useState)(""),l=(0,U.Z)(u,2),c=l[0],d=l[1],h=(0,E.useState)(""),p=(0,U.Z)(h,2),f=p[0],m=p[1],v=(0,E.useState)(""),g=(0,U.Z)(v,2),y=g[0],b=g[1],x=(0,E.useState)(""),w=(0,U.Z)(x,2),k=w[0],S=w[1];(0,E.useEffect)((function(){}),[]);var T=function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={type:o,brand:c,model:f,pIDPM:y,zone:k},e.next=3,Fn(t);case 3:e.sent&&(C(),r());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){n(),s(""),d(""),m(""),b(""),S("")};return(0,xr.jsx)(Wo,{open:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,xr.jsxs)(Jc,{sx:Ht,children:[(0,xr.jsxs)(Ns,{container:!0,style:{paddingTop:50},children:[(0,xr.jsx)(Ns,{item:!0,xl:6,lg:6,md:12,sm:12,xs:12,children:(0,xr.jsxs)(ou,{style:{width:"100%",paddingRight:10},children:[(0,xr.jsx)("p",{style:{margin:0,marginTop:5},children:"Marca"}),(0,xr.jsxs)("select",{required:!0,name:"site",id:"site",style:{width:"100%",height:44,borderRadius:10,fontSize:20},onChange:function(e){return d(e.target.value)},value:c,className:"inputClass",children:[(0,xr.jsx)("option",{value:"",children:"Seleccione..."}),["Caterpillar","Komatsu"].map((function(e,t){return(0,xr.jsx)("option",{value:e,children:e},t)}))]})]})}),(0,xr.jsx)(Ns,{item:!0,xl:6,lg:6,md:12,sm:12,xs:12,children:(0,xr.jsxs)(ou,{style:{width:"100%",paddingRight:10},children:[(0,xr.jsx)("p",{style:{margin:0,marginTop:5},children:"Tipo"}),(0,xr.jsxs)("select",{required:!0,name:"site",id:"site",style:{width:"100%",height:44,borderRadius:10,fontSize:20},onChange:function(e){return s(e.target.value)},value:o,className:"inputClass",children:[(0,xr.jsx)("option",{value:"",children:"Seleccione..."}),["Cami\xf3n","Pala","Cargador Frontal","Bulldozer"].map((function(e,t){return(0,xr.jsx)("option",{value:e,children:e},t)}))]})]})}),(0,xr.jsx)(Ns,{item:!0,xl:6,lg:6,md:12,sm:12,xs:12,children:(0,xr.jsxs)(ou,{style:{width:"100%",paddingRight:10},children:[(0,xr.jsx)("p",{style:{margin:0,marginTop:5},children:"Modelo"}),(0,xr.jsxs)("select",{required:!0,name:"site",id:"site",style:{width:"100%",height:44,borderRadius:10,fontSize:20},onChange:function(e){return m(e.target.value)},value:f,className:"inputClass",children:[(0,xr.jsx)("option",{value:"",children:"Seleccione..."}),["793-F","PC5500","789-D","994-K","D10-T2","D10-T"].map((function(e,t){return(0,xr.jsx)("option",{value:e,children:e},t)}))]})]})}),(0,xr.jsx)(Ns,{item:!0,xl:6,lg:6,md:12,sm:12,xs:12,children:(0,xr.jsxs)(ou,{style:{width:"100%",paddingRight:10},children:[(0,xr.jsx)("p",{style:{margin:0,marginTop:5},children:"Zona"}),(0,xr.jsxs)("select",{required:!0,name:"site",id:"site",style:{width:"100%",height:44,borderRadius:10,fontSize:20},onChange:function(e){return S(e.target.value)},value:k,className:"inputClass",children:[(0,xr.jsx)("option",{value:"",children:"Seleccione..."}),["Gen\xe9rico"].map((function(e,t){return(0,xr.jsx)("option",{value:e,children:e},t)}))]})]})}),(0,xr.jsx)(Ns,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:(0,xr.jsxs)(ou,{style:{width:"100%",paddingRight:10},children:[(0,xr.jsx)("p",{style:{margin:0,marginTop:5},children:"PIDPM"}),(0,xr.jsx)("input",{autoComplete:"off",required:!0,id:"rut",className:"inputClass",type:"text",minLength:11,maxLength:12,onInput:function(e){return b(e.target.value)},value:y,placeholder:"SPM000111",style:{width:"100%",height:44,borderRadius:10,fontSize:20}})]})}),(0,xr.jsx)(Ns,{item:!0,xl:12,lg:12,md:12,sm:12,xs:12,children:(0,xr.jsx)(nl,{onClick:T,children:"Guardar Pauta"})})]}),(0,xr.jsx)(dd,{onClick:function(){return C()},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,xr.jsx)(rl,{style:{color:"#ccc"}})})]})})},xue=function(e){var t=e.open,n=e.closeModal,r=(0,E.useState)([]),a=(0,U.Z)(r,2),i=a[0],o=a[1];(0,E.useEffect)((function(){s()}),[]);var s=function(){var e=Jn(Kn().mark((function e(){var t,n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.initDbPMs();case 2:return t=e.sent,e.next=5,qn.consultar(t.database);case 5:n=e.sent,o(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,xr.jsx)(Wo,{open:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,xr.jsxs)(Jc,{sx:Ht,children:[(0,xr.jsx)("div",{style:{width:"100%",position:"absolute",top:0,left:0,textAlign:"right"},children:(0,xr.jsx)(nl,{style:{borderRadius:"50%",width:36,height:36},onClick:n,children:(0,xr.jsx)(rl,{})})}),(0,xr.jsx)(Ns,{container:!0,xl:12,lg:12,style:{width:"100%"},children:(0,xr.jsx)(Ns,{item:!0,xl:12,lg:12,children:(0,xr.jsxs)("h3",{children:["Pautas en dispositivo. Total descargadas: ",i.length]})})}),(0,xr.jsxs)(Ns,{container:!0,xl:12,style:{width:"100%",paddingTop:30},children:[(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,children:(0,xr.jsx)("strong",{children:"N\xb0"})}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,children:(0,xr.jsx)("strong",{children:"Tipo PM"})}),(0,xr.jsx)(Ns,{item:!0,xl:2,lg:2,children:(0,xr.jsx)("strong",{children:"ID PM"})}),(0,xr.jsx)(Ns,{item:!0,xl:2,lg:2,children:(0,xr.jsx)("strong",{children:"Acci\xf3n"})})]}),(0,xr.jsx)("div",{style:{overflowY:"auto",maxHeight:"calc(100vh - 290px)"},children:i.map((function(e,t){return(0,xr.jsxs)(Ns,{container:!0,style:{width:"100%",paddingTop:25,paddingBottom:25,maxHeight:"calc(100vh - 200px)",borderBottomColor:"#ccc",borderBottomWidth:1,borderBottomStyle:"solid"},children:[(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,children:t+1}),(0,xr.jsx)(Ns,{item:!0,xl:1,lg:1,children:e.typepm}),(0,xr.jsx)(Ns,{item:!0,xl:2,lg:2,children:e.idpm}),(0,xr.jsx)(Ns,{item:!0,xl:2,lg:2,children:e.action})]},t)}))})]})})},wue=(0,E.forwardRef)((function(e,t){return(0,xr.jsx)(go,br({direction:"up",ref:t},e))})),kue=function(e){var t=e.handleClickOpen,n=e.open,r=e.handleClose,a=e.image;return(0,xr.jsxs)("div",{children:[(0,xr.jsx)(nl,{variant:"outlined",onClick:t,children:"Open full-screen dialog"}),(0,xr.jsxs)($o,{fullScreen:!0,open:n,onClose:r,TransitionComponent:wue,children:[(0,xr.jsx)(ms,{style:{position:"absolute",top:20,right:20,backgroundColor:"#fff"},onClick:r,children:(0,xr.jsx)(rl,{})}),(0,xr.jsx)("div",{style:{padding:30,textAlign:"center",height:"100vh"},children:(0,xr.jsx)("img",{src:a,height:"100%"})})]})]})};function Sue(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function Eue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(n){"undefined"===typeof e[n]?e[n]=t[n]:Sue(t[n])&&Sue(e[n])&&Object.keys(t[n]).length>0&&Eue(e[n],t[n])}))}var Tue={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Cue(){var e="undefined"!==typeof document?document:{};return Eue(e,Tue),e}var _ue={document:Tue,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function Mue(){var e="undefined"!==typeof window?window:{};return Eue(e,_ue),e}var Iue=function(e){A(n,e);var t=F(n);function n(e){var r;return M(this,n),"number"===typeof e?r=t.call(this,e):(r=t.call.apply(t,[this].concat((0,_.Z)(e||[]))),function(e){var t=e.__proto__;Object.defineProperty(e,"__proto__",{get:function(){return t},set:function(e){t.__proto__=e}})}((0,L.Z)(r))),P(r)}return(0,I.Z)(n)}(z(Array));function Nue(){var e=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){Array.isArray(t)?e.push.apply(e,(0,_.Z)(Nue(t))):e.push(t)})),e}function Aue(e,t){return Array.prototype.filter.call(e,t)}function Rue(e,t){var n=Mue(),r=Cue(),a=[];if(!t&&e instanceof Iue)return e;if(!e)return new Iue(a);if("string"===typeof e){var i=e.trim();if(i.indexOf("<")>=0&&i.indexOf(">")>=0){var o="div";0===i.indexOf("<li")&&(o="ul"),0===i.indexOf("<tr")&&(o="tbody"),0!==i.indexOf("<td")&&0!==i.indexOf("<th")||(o="tr"),0===i.indexOf("<tbody")&&(o="table"),0===i.indexOf("<option")&&(o="select");var s=r.createElement(o);s.innerHTML=i;for(var u=0;u<s.childNodes.length;u+=1)a.push(s.childNodes[u])}else a=function(e,t){if("string"!==typeof e)return[e];for(var n=[],r=t.querySelectorAll(e),a=0;a<r.length;a+=1)n.push(r[a]);return n}(e.trim(),t||r)}else if(e.nodeType||e===n||e===r)a.push(e);else if(Array.isArray(e)){if(e instanceof Iue)return e;a=e}return new Iue(function(e){for(var t=[],n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(a))}Rue.fn=Iue.prototype;var Oue="resize scroll".split(" ");function Due(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if("undefined"===typeof n[0]){for(var a=0;a<this.length;a+=1)Oue.indexOf(e)<0&&(e in this[a]?this[a][e]():Rue(this[a]).trigger(e));return this}return this.on.apply(this,[e].concat(n))}}Due("click"),Due("blur"),Due("focus"),Due("focusin"),Due("focusout"),Due("keyup"),Due("keydown"),Due("keypress"),Due("submit"),Due("change"),Due("mousedown"),Due("mousemove"),Due("mouseup"),Due("mouseenter"),Due("mouseleave"),Due("mouseout"),Due("mouseover"),Due("touchstart"),Due("touchend"),Due("touchmove"),Due("resize"),Due("scroll");var Lue={addClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Nue(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).add.apply(t,(0,_.Z)(r))})),this},removeClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Nue(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).remove.apply(t,(0,_.Z)(r))})),this},hasClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Nue(t.map((function(e){return e.split(" ")})));return Aue(this,(function(e){return r.filter((function(t){return e.classList.contains(t)})).length>0})).length>0},toggleClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Nue(t.map((function(e){return e.split(" ")})));this.forEach((function(e){r.forEach((function(t){e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"===typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(var r in e)this[n][r]=e[r],this[n].setAttribute(r,e[r]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!==typeof e?"".concat(e,"ms"):e;return this},on:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2],o=t[3];function s(e){var t=e.target;if(t){var n=e.target.dom7EventData||[];if(n.indexOf(e)<0&&n.unshift(e),Rue(t).is(a))i.apply(t,n);else for(var r=Rue(t).parents(),o=0;o<r.length;o+=1)Rue(r[o]).is(a)&&i.apply(r[o],n)}}function u(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),i.apply(this,t)}"function"===typeof t[1]&&(r=t[0],i=t[1],o=t[2],a=void 0),o||(o=!1);for(var l,c=r.split(" "),d=0;d<this.length;d+=1){var h=this[d];if(a)for(l=0;l<c.length;l+=1){var p=c[l];h.dom7LiveListeners||(h.dom7LiveListeners={}),h.dom7LiveListeners[p]||(h.dom7LiveListeners[p]=[]),h.dom7LiveListeners[p].push({listener:i,proxyListener:s}),h.addEventListener(p,s,o)}else for(l=0;l<c.length;l+=1){var f=c[l];h.dom7Listeners||(h.dom7Listeners={}),h.dom7Listeners[f]||(h.dom7Listeners[f]=[]),h.dom7Listeners[f].push({listener:i,proxyListener:u}),h.addEventListener(f,u,o)}}return this},off:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2],o=t[3];"function"===typeof t[1]&&(r=t[0],i=t[1],o=t[2],a=void 0),o||(o=!1);for(var s=r.split(" "),u=0;u<s.length;u+=1)for(var l=s[u],c=0;c<this.length;c+=1){var d=this[c],h=void 0;if(!a&&d.dom7Listeners?h=d.dom7Listeners[l]:a&&d.dom7LiveListeners&&(h=d.dom7LiveListeners[l]),h&&h.length)for(var p=h.length-1;p>=0;p-=1){var f=h[p];i&&f.listener===i||i&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===i?(d.removeEventListener(l,f.proxyListener,o),h.splice(p,1)):i||(d.removeEventListener(l,f.proxyListener,o),h.splice(p,1))}}return this},trigger:function(){for(var e=Mue(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=n[0].split(" "),i=n[1],o=0;o<a.length;o+=1)for(var s=a[o],u=0;u<this.length;u+=1){var l=this[u];if(e.CustomEvent){var c=new e.CustomEvent(s,{detail:i,bubbles:!0,cancelable:!0});l.dom7EventData=n.filter((function(e,t){return t>0})),l.dispatchEvent(c),l.dom7EventData=[],delete l.dom7EventData}}return this},transitionEnd:function(e){var t=this;return e&&t.on("transitionend",(function n(r){r.target===this&&(e.call(this,r),t.off("transitionend",n))})),this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var e=Mue();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var e=Mue(),t=Cue(),n=this[0],r=n.getBoundingClientRect(),a=t.body,i=n.clientTop||a.clientTop||0,o=n.clientLeft||a.clientLeft||0,s=n===e?e.scrollY:n.scrollTop,u=n===e?e.scrollX:n.scrollLeft;return{top:r.top+s-i,left:r.left+u-o}}return null},css:function(e,t){var n,r=Mue();if(1===arguments.length){if("string"!==typeof e){for(n=0;n<this.length;n+=1)for(var a in e)this[n].style[a]=e[a];return this}if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"===typeof e){for(n=0;n<this.length;n+=1)this[n].style[e]=t;return this}return this},each:function(e){return e?(this.forEach((function(t,n){e.apply(t,[t,n])})),this):this},html:function(e){if("undefined"===typeof e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if("undefined"===typeof e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,n,r=Mue(),a=Cue(),i=this[0];if(!i||"undefined"===typeof e)return!1;if("string"===typeof e){if(i.matches)return i.matches(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);for(t=Rue(e),n=0;n<t.length;n+=1)if(t[n]===i)return!0;return!1}if(e===a)return i===a;if(e===r)return i===r;if(e.nodeType||e instanceof Iue){for(t=e.nodeType?[e]:e,n=0;n<t.length;n+=1)if(t[n]===i)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if("undefined"===typeof e)return this;var t=this.length;if(e>t-1)return Rue([]);if(e<0){var n=t+e;return Rue(n<0?[]:[this[n]])}return Rue([this[e]])},append:function(){for(var e,t=Cue(),n=0;n<arguments.length;n+=1){e=n<0||arguments.length<=n?void 0:arguments[n];for(var r=0;r<this.length;r+=1)if("string"===typeof e){var a=t.createElement("div");for(a.innerHTML=e;a.firstChild;)this[r].appendChild(a.firstChild)}else if(e instanceof Iue)for(var i=0;i<e.length;i+=1)this[r].appendChild(e[i]);else this[r].appendChild(e)}return this},prepend:function(e){var t,n,r=Cue();for(t=0;t<this.length;t+=1)if("string"===typeof e){var a=r.createElement("div");for(a.innerHTML=e,n=a.childNodes.length-1;n>=0;n-=1)this[t].insertBefore(a.childNodes[n],this[t].childNodes[0])}else if(e instanceof Iue)for(n=0;n<e.length;n+=1)this[t].insertBefore(e[n],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&Rue(this[0].nextElementSibling).is(e)?Rue([this[0].nextElementSibling]):Rue([]):this[0].nextElementSibling?Rue([this[0].nextElementSibling]):Rue([]):Rue([])},nextAll:function(e){var t=[],n=this[0];if(!n)return Rue([]);for(;n.nextElementSibling;){var r=n.nextElementSibling;e?Rue(r).is(e)&&t.push(r):t.push(r),n=r}return Rue(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&Rue(t.previousElementSibling).is(e)?Rue([t.previousElementSibling]):Rue([]):t.previousElementSibling?Rue([t.previousElementSibling]):Rue([])}return Rue([])},prevAll:function(e){var t=[],n=this[0];if(!n)return Rue([]);for(;n.previousElementSibling;){var r=n.previousElementSibling;e?Rue(r).is(e)&&t.push(r):t.push(r),n=r}return Rue(t)},parent:function(e){for(var t=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?Rue(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return Rue(t)},parents:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].parentNode;r;)e?Rue(r).is(e)&&t.push(r):t.push(r),r=r.parentNode;return Rue(t)},closest:function(e){var t=this;return"undefined"===typeof e?Rue([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].querySelectorAll(e),a=0;a<r.length;a+=1)t.push(r[a]);return Rue(t)},children:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].children,a=0;a<r.length;a+=1)e&&!Rue(r[a]).is(e)||t.push(r[a]);return Rue(t)},filter:function(e){return Rue(Aue(this,e))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};Object.keys(Lue).forEach((function(e){Object.defineProperty(Rue.fn,e,{value:Lue[e],writable:!0})}));var Pue,Fue,jue,zue=Rue;function Bue(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function Uue(){return Date.now()}function Wue(e,t){void 0===t&&(t="x");var n,r,a,i=Mue(),o=function(e){var t,n=Mue();return n.getComputedStyle&&(t=n.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}(e);return i.WebKitCSSMatrix?((r=o.transform||o.webkitTransform).split(",").length>6&&(r=r.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),a=new i.WebKitCSSMatrix("none"===r?"":r)):n=(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(r=i.WebKitCSSMatrix?a.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(r=i.WebKitCSSMatrix?a.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),r||0}function Vue(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Zue(){for(var e,t=Object(arguments.length<=0?void 0:arguments[0]),n=["__proto__","constructor","prototype"],r=1;r<arguments.length;r+=1){var a=r<0||arguments.length<=r?void 0:arguments[r];if(void 0!==a&&null!==a&&(e=a,!("undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType))))for(var i=Object.keys(Object(a)).filter((function(e){return n.indexOf(e)<0})),o=0,s=i.length;o<s;o+=1){var u=i[o],l=Object.getOwnPropertyDescriptor(a,u);void 0!==l&&l.enumerable&&(Vue(t[u])&&Vue(a[u])?a[u].__swiper__?t[u]=a[u]:Zue(t[u],a[u]):!Vue(t[u])&&Vue(a[u])?(t[u]={},a[u].__swiper__?t[u]=a[u]:Zue(t[u],a[u])):t[u]=a[u])}}return t}function Hue(e,t,n){e.style.setProperty(t,n)}function Gue(e){var t,n=e.swiper,r=e.targetPosition,a=e.side,i=Mue(),o=-n.translate,s=null,u=n.params.speed;n.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(n.cssModeFrameID);var l=r>o?"next":"prev",c=function(e,t){return"next"===l&&e>=t||"prev"===l&&e<=t};!function e(){t=(new Date).getTime(),null===s&&(s=t);var l=Math.max(Math.min((t-s)/u,1),0),d=.5-Math.cos(l*Math.PI)/2,h=o+d*(r-o);if(c(h,r)&&(h=r),n.wrapperEl.scrollTo((0,Pt.Z)({},a,h)),c(h,r))return n.wrapperEl.style.overflow="hidden",n.wrapperEl.style.scrollSnapType="",setTimeout((function(){n.wrapperEl.style.overflow="",n.wrapperEl.scrollTo((0,Pt.Z)({},a,h))})),void i.cancelAnimationFrame(n.cssModeFrameID);n.cssModeFrameID=i.requestAnimationFrame(e)}()}function que(){return Pue||(Pue=function(){var e=Mue(),t=Cue();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(GK){}return t}(),gestures:"ongesturestart"in e}}()),Pue}function Xue(e){return void 0===e&&(e={}),Fue||(Fue=function(e){var t=(void 0===e?{}:e).userAgent,n=que(),r=Mue(),a=r.navigator.platform,i=t||r.navigator.userAgent,o={ios:!1,android:!1},s=r.screen.width,u=r.screen.height,l=i.match(/(Android);?[\s\/]+([\d.]+)?/),c=i.match(/(iPad).*OS\s([\d_]+)/),d=i.match(/(iPod)(.*OS\s([\d_]+))?/),h=!c&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===a,f="MacIntel"===a;return!c&&f&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf("".concat(s,"x").concat(u))>=0&&((c=i.match(/(Version)\/([\d.]+)/))||(c=[0,1,"13_0_0"]),f=!1),l&&!p&&(o.os="android",o.android=!0),(c||h||d)&&(o.os="ios",o.ios=!0),o}(e)),Fue}function Yue(){return jue||(jue=function(){var e=Mue();return{isSafari:function(){var t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),jue}var Kue={on:function(e,t,n){var r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;var a=n?"unshift":"push";return e.split(" ").forEach((function(e){r.eventsListeners[e]||(r.eventsListeners[e]=[]),r.eventsListeners[e][a](t)})),r},once:function(e,t,n){var r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!==typeof t)return r;function a(){r.off(e,a),a.__emitterProxy&&delete a.__emitterProxy;for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];t.apply(r,i)}return a.__emitterProxy=t,r.on(e,a,n)},onAny:function(e,t){var n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!==typeof e)return n;var r=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[r](e),n},offAny:function(e){var t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;var n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off:function(e,t){var n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((function(e){"undefined"===typeof t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(r,a){(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[e].splice(a,1)}))})),n):n},emit:function(){var e,t,n,r=this;if(!r.eventsListeners||r.destroyed)return r;if(!r.eventsListeners)return r;for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return"string"===typeof i[0]||Array.isArray(i[0])?(e=i[0],t=i.slice(1,i.length),n=r):(e=i[0].events,t=i[0].data,n=i[0].context||r),t.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach((function(e){r.eventsAnyListeners&&r.eventsAnyListeners.length&&r.eventsAnyListeners.forEach((function(r){r.apply(n,[e].concat((0,_.Z)(t)))})),r.eventsListeners&&r.eventsListeners[e]&&r.eventsListeners[e].forEach((function(e){e.apply(n,t)}))})),r}};var Que={updateSize:function(){var e,t,n=this,r=n.$el;e="undefined"!==typeof n.params.width&&null!==n.params.width?n.params.width:r[0].clientWidth,t="undefined"!==typeof n.params.height&&null!==n.params.height?n.params.height:r[0].clientHeight,0===e&&n.isHorizontal()||0===t&&n.isVertical()||(e=e-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),t=t-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}var r=e.params,a=e.$wrapperEl,i=e.size,o=e.rtlTranslate,s=e.wrongRTL,u=e.virtual&&r.virtual.enabled,l=u?e.virtual.slides.length:e.slides.length,c=a.children(".".concat(e.params.slideClass)),d=u?e.virtual.slides.length:c.length,h=[],p=[],f=[],m=r.slidesOffsetBefore;"function"===typeof m&&(m=r.slidesOffsetBefore.call(e));var v=r.slidesOffsetAfter;"function"===typeof v&&(v=r.slidesOffsetAfter.call(e));var g=e.snapGrid.length,y=e.slidesGrid.length,b=r.spaceBetween,x=-m,w=0,k=0;if("undefined"!==typeof i){"string"===typeof b&&b.indexOf("%")>=0&&(b=parseFloat(b.replace("%",""))/100*i),e.virtualSize=-b,o?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""}),r.centeredSlides&&r.cssMode&&(Hue(e.wrapperEl,"--swiper-centered-offset-before",""),Hue(e.wrapperEl,"--swiper-centered-offset-after",""));var S,E=r.grid&&r.grid.rows>1&&e.grid;E&&e.grid.initSlides(d);for(var T="auto"===r.slidesPerView&&r.breakpoints&&Object.keys(r.breakpoints).filter((function(e){return"undefined"!==typeof r.breakpoints[e].slidesPerView})).length>0,C=0;C<d;C+=1){S=0;var _=c.eq(C);if(E&&e.grid.updateSlide(C,_,d,t),"none"!==_.css("display")){if("auto"===r.slidesPerView){T&&(c[C].style[t("width")]="");var M=getComputedStyle(_[0]),I=_[0].style.transform,N=_[0].style.webkitTransform;if(I&&(_[0].style.transform="none"),N&&(_[0].style.webkitTransform="none"),r.roundLengths)S=e.isHorizontal()?_.outerWidth(!0):_.outerHeight(!0);else{var A=n(M,"width"),R=n(M,"padding-left"),O=n(M,"padding-right"),D=n(M,"margin-left"),L=n(M,"margin-right"),P=M.getPropertyValue("box-sizing");if(P&&"border-box"===P)S=A+D+L;else{var F=_[0],j=F.clientWidth;S=A+R+O+D+L+(F.offsetWidth-j)}}I&&(_[0].style.transform=I),N&&(_[0].style.webkitTransform=N),r.roundLengths&&(S=Math.floor(S))}else S=(i-(r.slidesPerView-1)*b)/r.slidesPerView,r.roundLengths&&(S=Math.floor(S)),c[C]&&(c[C].style[t("width")]="".concat(S,"px"));c[C]&&(c[C].swiperSlideSize=S),f.push(S),r.centeredSlides?(x=x+S/2+w/2+b,0===w&&0!==C&&(x=x-i/2-b),0===C&&(x=x-i/2-b),Math.abs(x)<.001&&(x=0),r.roundLengths&&(x=Math.floor(x)),k%r.slidesPerGroup===0&&h.push(x),p.push(x)):(r.roundLengths&&(x=Math.floor(x)),(k-Math.min(e.params.slidesPerGroupSkip,k))%e.params.slidesPerGroup===0&&h.push(x),p.push(x),x=x+S+b),e.virtualSize+=S+b,w=S,k+=1}}if(e.virtualSize=Math.max(e.virtualSize,i)+v,o&&s&&("slide"===r.effect||"coverflow"===r.effect)&&a.css({width:"".concat(e.virtualSize+r.spaceBetween,"px")}),r.setWrapperSize&&a.css((0,Pt.Z)({},t("width"),"".concat(e.virtualSize+r.spaceBetween,"px"))),E&&e.grid.updateWrapperSize(S,h,t),!r.centeredSlides){for(var z=[],B=0;B<h.length;B+=1){var U=h[B];r.roundLengths&&(U=Math.floor(U)),h[B]<=e.virtualSize-i&&z.push(U)}h=z,Math.floor(e.virtualSize-i)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-i)}if(0===h.length&&(h=[0]),0!==r.spaceBetween){var W=e.isHorizontal()&&o?"marginLeft":t("marginRight");c.filter((function(e,t){return!r.cssMode||t!==c.length-1})).css((0,Pt.Z)({},W,"".concat(b,"px")))}if(r.centeredSlides&&r.centeredSlidesBounds){var V=0;f.forEach((function(e){V+=e+(r.spaceBetween?r.spaceBetween:0)}));var Z=(V-=r.spaceBetween)-i;h=h.map((function(e){return e<0?-m:e>Z?Z+v:e}))}if(r.centerInsufficientSlides){var H=0;if(f.forEach((function(e){H+=e+(r.spaceBetween?r.spaceBetween:0)})),(H-=r.spaceBetween)<i){var G=(i-H)/2;h.forEach((function(e,t){h[t]=e-G})),p.forEach((function(e,t){p[t]=e+G}))}}if(Object.assign(e,{slides:c,snapGrid:h,slidesGrid:p,slidesSizesGrid:f}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){Hue(e.wrapperEl,"--swiper-centered-offset-before","".concat(-h[0],"px")),Hue(e.wrapperEl,"--swiper-centered-offset-after","".concat(e.size/2-f[f.length-1]/2,"px"));var q=-e.snapGrid[0],X=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((function(e){return e+q})),e.slidesGrid=e.slidesGrid.map((function(e){return e+X}))}if(d!==l&&e.emit("slidesLengthChange"),h.length!==g&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==y&&e.emit("slidesGridLengthChange"),r.watchSlidesProgress&&e.updateSlidesOffset(),!u&&!r.cssMode&&("slide"===r.effect||"fade"===r.effect)){var Y="".concat(r.containerModifierClass,"backface-hidden"),K=e.$el.hasClass(Y);d<=r.maxBackfaceHiddenSlides?K||e.$el.addClass(Y):K&&e.$el.removeClass(Y)}}},updateAutoHeight:function(e){var t,n=this,r=[],a=n.virtual&&n.params.virtual.enabled,i=0;"number"===typeof e?n.setTransition(e):!0===e&&n.setTransition(n.params.speed);var o=function(e){return a?n.slides.filter((function(t){return parseInt(t.getAttribute("data-swiper-slide-index"),10)===e}))[0]:n.slides.eq(e)[0]};if("auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)if(n.params.centeredSlides)n.visibleSlides.each((function(e){r.push(e)}));else for(t=0;t<Math.ceil(n.params.slidesPerView);t+=1){var s=n.activeIndex+t;if(s>n.slides.length&&!a)break;r.push(o(s))}else r.push(o(n.activeIndex));for(t=0;t<r.length;t+=1)if("undefined"!==typeof r[t]){var u=r[t].offsetHeight;i=u>i?u:i}(i||0===i)&&n.$wrapperEl.css("height","".concat(i,"px"))},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,n=t.params,r=t.slides,a=t.rtlTranslate,i=t.snapGrid;if(0!==r.length){"undefined"===typeof r[0].swiperSlideOffset&&t.updateSlidesOffset();var o=-e;a&&(o=e),r.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var s=0;s<r.length;s+=1){var u=r[s],l=u.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(l-=r[0].swiperSlideOffset);var c=(o+(n.centeredSlides?t.minTranslate():0)-l)/(u.swiperSlideSize+n.spaceBetween),d=(o-i[0]+(n.centeredSlides?t.minTranslate():0)-l)/(u.swiperSlideSize+n.spaceBetween),h=-(o-l),p=h+t.slidesSizesGrid[s];(h>=0&&h<t.size-1||p>1&&p<=t.size||h<=0&&p>=t.size)&&(t.visibleSlides.push(u),t.visibleSlidesIndexes.push(s),r.eq(s).addClass(n.slideVisibleClass)),u.progress=a?-c:c,u.originalProgress=a?-d:d}t.visibleSlides=zue(t.visibleSlides)}},updateProgress:function(e){var t=this;if("undefined"===typeof e){var n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}var r=t.params,a=t.maxTranslate()-t.minTranslate(),i=t.progress,o=t.isBeginning,s=t.isEnd,u=o,l=s;0===a?(i=0,o=!0,s=!0):(o=(i=(e-t.minTranslate())/a)<=0,s=i>=1),Object.assign(t,{progress:i,isBeginning:o,isEnd:s}),(r.watchSlidesProgress||r.centeredSlides&&r.autoHeight)&&t.updateSlidesProgress(e),o&&!u&&t.emit("reachBeginning toEdge"),s&&!l&&t.emit("reachEnd toEdge"),(u&&!o||l&&!s)&&t.emit("fromEdge"),t.emit("progress",i)},updateSlidesClasses:function(){var e,t=this,n=t.slides,r=t.params,a=t.$wrapperEl,i=t.activeIndex,o=t.realIndex,s=t.virtual&&r.virtual.enabled;n.removeClass("".concat(r.slideActiveClass," ").concat(r.slideNextClass," ").concat(r.slidePrevClass," ").concat(r.slideDuplicateActiveClass," ").concat(r.slideDuplicateNextClass," ").concat(r.slideDuplicatePrevClass)),(e=s?t.$wrapperEl.find(".".concat(r.slideClass,'[data-swiper-slide-index="').concat(i,'"]')):n.eq(i)).addClass(r.slideActiveClass),r.loop&&(e.hasClass(r.slideDuplicateClass)?a.children(".".concat(r.slideClass,":not(.").concat(r.slideDuplicateClass,')[data-swiper-slide-index="').concat(o,'"]')).addClass(r.slideDuplicateActiveClass):a.children(".".concat(r.slideClass,".").concat(r.slideDuplicateClass,'[data-swiper-slide-index="').concat(o,'"]')).addClass(r.slideDuplicateActiveClass));var u=e.nextAll(".".concat(r.slideClass)).eq(0).addClass(r.slideNextClass);r.loop&&0===u.length&&(u=n.eq(0)).addClass(r.slideNextClass);var l=e.prevAll(".".concat(r.slideClass)).eq(0).addClass(r.slidePrevClass);r.loop&&0===l.length&&(l=n.eq(-1)).addClass(r.slidePrevClass),r.loop&&(u.hasClass(r.slideDuplicateClass)?a.children(".".concat(r.slideClass,":not(.").concat(r.slideDuplicateClass,')[data-swiper-slide-index="').concat(u.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicateNextClass):a.children(".".concat(r.slideClass,".").concat(r.slideDuplicateClass,'[data-swiper-slide-index="').concat(u.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicateNextClass),l.hasClass(r.slideDuplicateClass)?a.children(".".concat(r.slideClass,":not(.").concat(r.slideDuplicateClass,')[data-swiper-slide-index="').concat(l.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicatePrevClass):a.children(".".concat(r.slideClass,".").concat(r.slideDuplicateClass,'[data-swiper-slide-index="').concat(l.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicatePrevClass)),t.emitSlidesClasses()},updateActiveIndex:function(e){var t,n=this,r=n.rtlTranslate?n.translate:-n.translate,a=n.slidesGrid,i=n.snapGrid,o=n.params,s=n.activeIndex,u=n.realIndex,l=n.snapIndex,c=e;if("undefined"===typeof c){for(var d=0;d<a.length;d+=1)"undefined"!==typeof a[d+1]?r>=a[d]&&r<a[d+1]-(a[d+1]-a[d])/2?c=d:r>=a[d]&&r<a[d+1]&&(c=d+1):r>=a[d]&&(c=d);o.normalizeSlideIndex&&(c<0||"undefined"===typeof c)&&(c=0)}if(i.indexOf(r)>=0)t=i.indexOf(r);else{var h=Math.min(o.slidesPerGroupSkip,c);t=h+Math.floor((c-h)/o.slidesPerGroup)}if(t>=i.length&&(t=i.length-1),c!==s){var p=parseInt(n.slides.eq(c).attr("data-swiper-slide-index")||c,10);Object.assign(n,{snapIndex:t,realIndex:p,previousIndex:s,activeIndex:c}),n.emit("activeIndexChange"),n.emit("snapIndexChange"),u!==p&&n.emit("realIndexChange"),(n.initialized||n.params.runCallbacksOnInit)&&n.emit("slideChange")}else t!==l&&(n.snapIndex=t,n.emit("snapIndexChange"))},updateClickedSlide:function(e){var t,n=this,r=n.params,a=zue(e).closest(".".concat(r.slideClass))[0],i=!1;if(a)for(var o=0;o<n.slides.length;o+=1)if(n.slides[o]===a){i=!0,t=o;break}if(!a||!i)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=a,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(zue(a).attr("data-swiper-slide-index"),10):n.clickedIndex=t,r.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var Jue={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this,n=t.params,r=t.rtlTranslate,a=t.translate,i=t.$wrapperEl;if(n.virtualTranslate)return r?-a:a;if(n.cssMode)return a;var o=Wue(i[0],e);return r&&(o=-o),o||0},setTranslate:function(e,t){var n=this,r=n.rtlTranslate,a=n.params,i=n.$wrapperEl,o=n.wrapperEl,s=n.progress,u=0,l=0;n.isHorizontal()?u=r?-e:e:l=e,a.roundLengths&&(u=Math.floor(u),l=Math.floor(l)),a.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-u:-l:a.virtualTranslate||i.transform("translate3d(".concat(u,"px, ").concat(l,"px, ").concat(0,"px)")),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?u:l;var c=n.maxTranslate()-n.minTranslate();(0===c?0:(e-n.minTranslate())/c)!==s&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,r,a){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===r&&(r=!0);var i=this,o=i.params,s=i.wrapperEl;if(i.animating&&o.preventInteractionOnTransition)return!1;var u,l=i.minTranslate(),c=i.maxTranslate();if(u=r&&e>l?l:r&&e<c?c:e,i.updateProgress(u),o.cssMode){var d=i.isHorizontal();if(0===t)s[d?"scrollLeft":"scrollTop"]=-u;else{var h;if(!i.support.smoothScroll)return Gue({swiper:i,targetPosition:-u,side:d?"left":"top"}),!0;s.scrollTo((h={},(0,Pt.Z)(h,d?"left":"top",-u),(0,Pt.Z)(h,"behavior","smooth"),h))}return!0}return 0===t?(i.setTransition(0),i.setTranslate(u),n&&(i.emit("beforeTransitionStart",t,a),i.emit("transitionEnd"))):(i.setTransition(t),i.setTranslate(u),n&&(i.emit("beforeTransitionStart",t,a),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(e){i&&!i.destroyed&&e.target===this&&(i.$wrapperEl[0].removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.$wrapperEl[0].removeEventListener("webkitTransitionEnd",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,n&&i.emit("transitionEnd"))}),i.$wrapperEl[0].addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.$wrapperEl[0].addEventListener("webkitTransitionEnd",i.onTranslateToWrapperTransitionEnd))),!0}};function $ue(e){var t=e.swiper,n=e.runCallbacks,r=e.direction,a=e.step,i=t.activeIndex,o=t.previousIndex,s=r;if(s||(s=i>o?"next":i<o?"prev":"reset"),t.emit("transition".concat(a)),n&&i!==o){if("reset"===s)return void t.emit("slideResetTransition".concat(a));t.emit("slideChangeTransition".concat(a)),"next"===s?t.emit("slideNextTransition".concat(a)):t.emit("slidePrevTransition".concat(a))}}var ele={slideTo:function(e,t,n,r,a){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"number"!==typeof e&&"string"!==typeof e)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. [".concat(typeof e,"] given."));if("string"===typeof e){var i=parseInt(e,10);if(!isFinite(i))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. [".concat(e,"] given."));e=i}var o=this,s=e;s<0&&(s=0);var u=o.params,l=o.snapGrid,c=o.slidesGrid,d=o.previousIndex,h=o.activeIndex,p=o.rtlTranslate,f=o.wrapperEl,m=o.enabled;if(o.animating&&u.preventInteractionOnTransition||!m&&!r&&!a)return!1;var v=Math.min(o.params.slidesPerGroupSkip,s),g=v+Math.floor((s-v)/o.params.slidesPerGroup);g>=l.length&&(g=l.length-1),(h||u.initialSlide||0)===(d||0)&&n&&o.emit("beforeSlideChangeStart");var y,b=-l[g];if(o.updateProgress(b),u.normalizeSlideIndex)for(var x=0;x<c.length;x+=1){var w=-Math.floor(100*b),k=Math.floor(100*c[x]),S=Math.floor(100*c[x+1]);"undefined"!==typeof c[x+1]?w>=k&&w<S-(S-k)/2?s=x:w>=k&&w<S&&(s=x+1):w>=k&&(s=x)}if(o.initialized&&s!==h){if(!o.allowSlideNext&&b<o.translate&&b<o.minTranslate())return!1;if(!o.allowSlidePrev&&b>o.translate&&b>o.maxTranslate()&&(h||0)!==s)return!1}if(y=s>h?"next":s<h?"prev":"reset",p&&-b===o.translate||!p&&b===o.translate)return o.updateActiveIndex(s),u.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),"slide"!==u.effect&&o.setTranslate(b),"reset"!==y&&(o.transitionStart(n,y),o.transitionEnd(n,y)),!1;if(u.cssMode){var E=o.isHorizontal(),T=p?b:-b;if(0===t){var C=o.virtual&&o.params.virtual.enabled;C&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),f[E?"scrollLeft":"scrollTop"]=T,C&&requestAnimationFrame((function(){o.wrapperEl.style.scrollSnapType="",o._swiperImmediateVirtual=!1}))}else{var _;if(!o.support.smoothScroll)return Gue({swiper:o,targetPosition:T,side:E?"left":"top"}),!0;f.scrollTo((_={},(0,Pt.Z)(_,E?"left":"top",T),(0,Pt.Z)(_,"behavior","smooth"),_))}return!0}return o.setTransition(t),o.setTranslate(b),o.updateActiveIndex(s),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,r),o.transitionStart(n,y),0===t?o.transitionEnd(n,y):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,y))}),o.$wrapperEl[0].addEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0);var a=this,i=e;return a.params.loop&&(i+=a.loopedSlides),a.slideTo(i,t,n,r)},slideNext:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var r=this,a=r.animating,i=r.enabled,o=r.params;if(!i)return r;var s=o.slidesPerGroup;"auto"===o.slidesPerView&&1===o.slidesPerGroup&&o.slidesPerGroupAuto&&(s=Math.max(r.slidesPerViewDynamic("current",!0),1));var u=r.activeIndex<o.slidesPerGroupSkip?1:s;if(o.loop){if(a&&o.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return o.rewind&&r.isEnd?r.slideTo(0,e,t,n):r.slideTo(r.activeIndex+u,e,t,n)},slidePrev:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var r=this,a=r.params,i=r.animating,o=r.snapGrid,s=r.slidesGrid,u=r.rtlTranslate;if(!r.enabled)return r;if(a.loop){if(i&&a.loopPreventsSlide)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}function l(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var c,d=l(u?r.translate:-r.translate),h=o.map((function(e){return l(e)})),p=o[h.indexOf(d)-1];"undefined"===typeof p&&a.cssMode&&(o.forEach((function(e,t){d>=e&&(c=t)})),"undefined"!==typeof c&&(p=o[c>0?c-1:c]));var f=0;if("undefined"!==typeof p&&((f=s.indexOf(p))<0&&(f=r.activeIndex-1),"auto"===a.slidesPerView&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(f=f-r.slidesPerViewDynamic("previous",!0)+1,f=Math.max(f,0))),a.rewind&&r.isBeginning){var m=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(m,e,t,n)}return r.slideTo(f,e,t,n)},slideReset:function(e,t,n){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e,t,n,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===r&&(r=.5);var a=this,i=a.activeIndex,o=Math.min(a.params.slidesPerGroupSkip,i),s=o+Math.floor((i-o)/a.params.slidesPerGroup),u=a.rtlTranslate?a.translate:-a.translate;if(u>=a.snapGrid[s]){var l=a.snapGrid[s];u-l>(a.snapGrid[s+1]-l)*r&&(i+=a.params.slidesPerGroup)}else{var c=a.snapGrid[s-1];u-c<=(a.snapGrid[s]-c)*r&&(i-=a.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,a.slidesGrid.length-1),a.slideTo(i,e,t,n)},slideToClickedSlide:function(){var e,t=this,n=t.params,r=t.$wrapperEl,a="auto"===n.slidesPerView?t.slidesPerViewDynamic():n.slidesPerView,i=t.clickedIndex;if(n.loop){if(t.animating)return;e=parseInt(zue(t.clickedSlide).attr("data-swiper-slide-index"),10),n.centeredSlides?i<t.loopedSlides-a/2||i>t.slides.length-t.loopedSlides+a/2?(t.loopFix(),i=r.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(e,'"]:not(.').concat(n.slideDuplicateClass,")")).eq(0).index(),Bue((function(){t.slideTo(i)}))):t.slideTo(i):i>t.slides.length-a?(t.loopFix(),i=r.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(e,'"]:not(.').concat(n.slideDuplicateClass,")")).eq(0).index(),Bue((function(){t.slideTo(i)}))):t.slideTo(i)}else t.slideTo(i)}};var tle={loopCreate:function(){var e=this,t=Cue(),n=e.params,r=e.$wrapperEl,a=r.children().length>0?zue(r.children()[0].parentNode):r;a.children(".".concat(n.slideClass,".").concat(n.slideDuplicateClass)).remove();var i=a.children(".".concat(n.slideClass));if(n.loopFillGroupWithBlank){var o=n.slidesPerGroup-i.length%n.slidesPerGroup;if(o!==n.slidesPerGroup){for(var s=0;s<o;s+=1){var u=zue(t.createElement("div")).addClass("".concat(n.slideClass," ").concat(n.slideBlankClass));a.append(u)}i=a.children(".".concat(n.slideClass))}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=i.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>i.length&&(e.loopedSlides=i.length);var l=[],c=[];i.each((function(t,n){var r=zue(t);n<e.loopedSlides&&c.push(t),n<i.length&&n>=i.length-e.loopedSlides&&l.push(t),r.attr("data-swiper-slide-index",n)}));for(var d=0;d<c.length;d+=1)a.append(zue(c[d].cloneNode(!0)).addClass(n.slideDuplicateClass));for(var h=l.length-1;h>=0;h-=1)a.prepend(zue(l[h].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){var e=this;e.emit("beforeLoopFix");var t,n=e.activeIndex,r=e.slides,a=e.loopedSlides,i=e.allowSlidePrev,o=e.allowSlideNext,s=e.snapGrid,u=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var l=-s[n]-e.getTranslate();if(n<a)t=r.length-3*a+n,t+=a,e.slideTo(t,0,!1,!0)&&0!==l&&e.setTranslate((u?-e.translate:e.translate)-l);else if(n>=r.length-a){t=-r.length+n+a,t+=a,e.slideTo(t,0,!1,!0)&&0!==l&&e.setTranslate((u?-e.translate:e.translate)-l)}e.allowSlidePrev=i,e.allowSlideNext=o,e.emit("loopFix")},loopDestroy:function(){var e=this,t=e.$wrapperEl,n=e.params,r=e.slides;t.children(".".concat(n.slideClass,".").concat(n.slideDuplicateClass,",.").concat(n.slideClass,".").concat(n.slideBlankClass)).remove(),r.removeAttr("data-swiper-slide-index")}};var nle={setGrabCursor:function(e){var t=this;if(!(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;n.style.cursor="move",n.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){var e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}};function rle(e){var t=this,n=Cue(),r=Mue(),a=t.touchEventsData,i=t.params,o=t.touches;if(t.enabled&&(!t.animating||!i.preventInteractionOnTransition)){!t.animating&&i.cssMode&&i.loop&&t.loopFix();var s=e;s.originalEvent&&(s=s.originalEvent);var u=zue(s.target);if(("wrapper"!==i.touchEventsTarget||u.closest(t.wrapperEl).length)&&(a.isTouchEvent="touchstart"===s.type,(a.isTouchEvent||!("which"in s)||3!==s.which)&&!(!a.isTouchEvent&&"button"in s&&s.button>0)&&(!a.isTouched||!a.isMoved))){!!i.noSwipingClass&&""!==i.noSwipingClass&&s.target&&s.target.shadowRoot&&e.path&&e.path[0]&&(u=zue(e.path[0]));var l=i.noSwipingSelector?i.noSwipingSelector:".".concat(i.noSwipingClass),c=!(!s.target||!s.target.shadowRoot);if(i.noSwiping&&(c?function(e,t){return void 0===t&&(t=this),function t(n){return n&&n!==Cue()&&n!==Mue()?(n.assignedSlot&&(n=n.assignedSlot),n.closest(e)||t(n.getRootNode().host)):null}(t)}(l,s.target):u.closest(l)[0]))t.allowClick=!0;else if(!i.swipeHandler||u.closest(i.swipeHandler)[0]){o.currentX="touchstart"===s.type?s.targetTouches[0].pageX:s.pageX,o.currentY="touchstart"===s.type?s.targetTouches[0].pageY:s.pageY;var d=o.currentX,h=o.currentY,p=i.edgeSwipeDetection||i.iOSEdgeSwipeDetection,f=i.edgeSwipeThreshold||i.iOSEdgeSwipeThreshold;if(p&&(d<=f||d>=r.innerWidth-f)){if("prevent"!==p)return;e.preventDefault()}if(Object.assign(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=d,o.startY=h,a.touchStartTime=Uue(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,i.threshold>0&&(a.allowThresholdMove=!1),"touchstart"!==s.type){var m=!0;u.is(a.focusableElements)&&(m=!1,"SELECT"===u[0].nodeName&&(a.isTouched=!1)),n.activeElement&&zue(n.activeElement).is(a.focusableElements)&&n.activeElement!==u[0]&&n.activeElement.blur();var v=m&&t.allowTouchMove&&i.touchStartPreventDefault;!i.touchStartForcePreventDefault&&!v||u[0].isContentEditable||s.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!i.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",s)}}}}function ale(e){var t=Cue(),n=this,r=n.touchEventsData,a=n.params,i=n.touches,o=n.rtlTranslate;if(n.enabled){var s=e;if(s.originalEvent&&(s=s.originalEvent),r.isTouched){if(!r.isTouchEvent||"touchmove"===s.type){var u="touchmove"===s.type&&s.targetTouches&&(s.targetTouches[0]||s.changedTouches[0]),l="touchmove"===s.type?u.pageX:s.pageX,c="touchmove"===s.type?u.pageY:s.pageY;if(s.preventedByNestedSwiper)return i.startX=l,void(i.startY=c);if(!n.allowTouchMove)return zue(s.target).is(r.focusableElements)||(n.allowClick=!1),void(r.isTouched&&(Object.assign(i,{startX:l,startY:c,currentX:l,currentY:c}),r.touchStartTime=Uue()));if(r.isTouchEvent&&a.touchReleaseOnEdges&&!a.loop)if(n.isVertical()){if(c<i.startY&&n.translate<=n.maxTranslate()||c>i.startY&&n.translate>=n.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(l<i.startX&&n.translate<=n.maxTranslate()||l>i.startX&&n.translate>=n.minTranslate())return;if(r.isTouchEvent&&t.activeElement&&s.target===t.activeElement&&zue(s.target).is(r.focusableElements))return r.isMoved=!0,void(n.allowClick=!1);if(r.allowTouchCallbacks&&n.emit("touchMove",s),!(s.targetTouches&&s.targetTouches.length>1)){i.currentX=l,i.currentY=c;var d=i.currentX-i.startX,h=i.currentY-i.startY;if(!(n.params.threshold&&Math.sqrt(Math.pow(d,2)+Math.pow(h,2))<n.params.threshold)){var p;if("undefined"===typeof r.isScrolling)n.isHorizontal()&&i.currentY===i.startY||n.isVertical()&&i.currentX===i.startX?r.isScrolling=!1:d*d+h*h>=25&&(p=180*Math.atan2(Math.abs(h),Math.abs(d))/Math.PI,r.isScrolling=n.isHorizontal()?p>a.touchAngle:90-p>a.touchAngle);if(r.isScrolling&&n.emit("touchMoveOpposite",s),"undefined"===typeof r.startMoving&&(i.currentX===i.startX&&i.currentY===i.startY||(r.startMoving=!0)),r.isScrolling)r.isTouched=!1;else if(r.startMoving){n.allowClick=!1,!a.cssMode&&s.cancelable&&s.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&s.stopPropagation(),r.isMoved||(a.loop&&!a.cssMode&&n.loopFix(),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!a.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",s)),n.emit("sliderMove",s),r.isMoved=!0;var f=n.isHorizontal()?d:h;i.diff=f,f*=a.touchRatio,o&&(f=-f),n.swipeDirection=f>0?"prev":"next",r.currentTranslate=f+r.startTranslate;var m=!0,v=a.resistanceRatio;if(a.touchReleaseOnEdges&&(v=0),f>0&&r.currentTranslate>n.minTranslate()?(m=!1,a.resistance&&(r.currentTranslate=n.minTranslate()-1+Math.pow(-n.minTranslate()+r.startTranslate+f,v))):f<0&&r.currentTranslate<n.maxTranslate()&&(m=!1,a.resistance&&(r.currentTranslate=n.maxTranslate()+1-Math.pow(n.maxTranslate()-r.startTranslate-f,v))),m&&(s.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),n.allowSlidePrev||n.allowSlideNext||(r.currentTranslate=r.startTranslate),a.threshold>0){if(!(Math.abs(f)>a.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,r.currentTranslate=r.startTranslate,void(i.diff=n.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY)}a.followFinger&&!a.cssMode&&((a.freeMode&&a.freeMode.enabled&&n.freeMode||a.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&a.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}}}}}else r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",s)}}function ile(e){var t=this,n=t.touchEventsData,r=t.params,a=t.touches,i=t.rtlTranslate,o=t.slidesGrid;if(t.enabled){var s=e;if(s.originalEvent&&(s=s.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",s),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var u,l=Uue(),c=l-n.touchStartTime;if(t.allowClick){var d=s.path||s.composedPath&&s.composedPath();t.updateClickedSlide(d&&d[0]||s.target),t.emit("tap click",s),c<300&&l-n.lastClickTime<300&&t.emit("doubleTap doubleClick",s)}if(n.lastClickTime=Uue(),Bue((function(){t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===a.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,u=r.followFinger?i?t.translate:-t.translate:-n.currentTranslate,!r.cssMode)if(t.params.freeMode&&r.freeMode.enabled)t.freeMode.onTouchEnd({currentPos:u});else{for(var h=0,p=t.slidesSizesGrid[0],f=0;f<o.length;f+=f<r.slidesPerGroupSkip?1:r.slidesPerGroup){var m=f<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;"undefined"!==typeof o[f+m]?u>=o[f]&&u<o[f+m]&&(h=f,p=o[f+m]-o[f]):u>=o[f]&&(h=f,p=o[o.length-1]-o[o.length-2])}var v=null,g=null;r.rewind&&(t.isBeginning?g=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(v=0));var y=(u-o[h])/p,b=h<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(c>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(y>=r.longSwipesRatio?t.slideTo(r.rewind&&t.isEnd?v:h+b):t.slideTo(h)),"prev"===t.swipeDirection&&(y>1-r.longSwipesRatio?t.slideTo(h+b):null!==g&&y<0&&Math.abs(y)>r.longSwipesRatio?t.slideTo(g):t.slideTo(h))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(s.target===t.navigation.nextEl||s.target===t.navigation.prevEl)?s.target===t.navigation.nextEl?t.slideTo(h+b):t.slideTo(h):("next"===t.swipeDirection&&t.slideTo(null!==v?v:h+b),"prev"===t.swipeDirection&&t.slideTo(null!==g?g:h))}}}}function ole(){var e=this,t=e.params,n=e.el;if(!n||0!==n.offsetWidth){t.breakpoints&&e.setBreakpoint();var r=e.allowSlideNext,a=e.allowSlidePrev,i=e.snapGrid;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=a,e.allowSlideNext=r,e.params.watchOverflow&&i!==e.snapGrid&&e.checkOverflow()}}function sle(e){var t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function ule(){var e=this,t=e.wrapperEl,n=e.rtlTranslate;if(e.enabled){e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var r=e.maxTranslate()-e.minTranslate();(0===r?0:(e.translate-e.minTranslate())/r)!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}}var lle=!1;function cle(){}var dle=function(e,t){var n=Cue(),r=e.params,a=e.touchEvents,i=e.el,o=e.wrapperEl,s=e.device,u=e.support,l=!!r.nested,c="on"===t?"addEventListener":"removeEventListener",d=t;if(u.touch){var h=!("touchstart"!==a.start||!u.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};i[c](a.start,e.onTouchStart,h),i[c](a.move,e.onTouchMove,u.passiveListener?{passive:!1,capture:l}:l),i[c](a.end,e.onTouchEnd,h),a.cancel&&i[c](a.cancel,e.onTouchEnd,h)}else i[c](a.start,e.onTouchStart,!1),n[c](a.move,e.onTouchMove,l),n[c](a.end,e.onTouchEnd,!1);(r.preventClicks||r.preventClicksPropagation)&&i[c]("click",e.onClick,!0),r.cssMode&&o[c]("scroll",e.onScroll),r.updateOnWindowResize?e[d](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",ole,!0):e[d]("observerUpdate",ole,!0)};var hle={attachEvents:function(){var e=this,t=Cue(),n=e.params,r=e.support;e.onTouchStart=rle.bind(e),e.onTouchMove=ale.bind(e),e.onTouchEnd=ile.bind(e),n.cssMode&&(e.onScroll=ule.bind(e)),e.onClick=sle.bind(e),r.touch&&!lle&&(t.addEventListener("touchstart",cle),lle=!0),dle(e,"on")},detachEvents:function(){dle(this,"off")}},ple=function(e,t){return e.grid&&t.grid&&t.grid.rows>1};var fle={setBreakpoint:function(){var e=this,t=e.activeIndex,n=e.initialized,r=e.loopedSlides,a=void 0===r?0:r,i=e.params,o=e.$el,s=i.breakpoints;if(s&&(!s||0!==Object.keys(s).length)){var u=e.getBreakpoint(s,e.params.breakpointsBase,e.el);if(u&&e.currentBreakpoint!==u){var l=(u in s?s[u]:void 0)||e.originalParams,c=ple(e,i),d=ple(e,l),h=i.enabled;c&&!d?(o.removeClass("".concat(i.containerModifierClass,"grid ").concat(i.containerModifierClass,"grid-column")),e.emitContainerClasses()):!c&&d&&(o.addClass("".concat(i.containerModifierClass,"grid")),(l.grid.fill&&"column"===l.grid.fill||!l.grid.fill&&"column"===i.grid.fill)&&o.addClass("".concat(i.containerModifierClass,"grid-column")),e.emitContainerClasses());var p=l.direction&&l.direction!==i.direction,f=i.loop&&(l.slidesPerView!==i.slidesPerView||p);p&&n&&e.changeDirection(),Zue(e.params,l);var m=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),h&&!m?e.disable():!h&&m&&e.enable(),e.currentBreakpoint=u,e.emit("_beforeBreakpoint",l),f&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-a+e.loopedSlides,0,!1)),e.emit("breakpoint",l)}}},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),e&&("container"!==t||n)){var r=!1,a=Mue(),i="window"===t?a.innerHeight:n.clientHeight,o=Object.keys(e).map((function(e){if("string"===typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:i*t,point:e}}return{value:e,point:e}}));o.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var s=0;s<o.length;s+=1){var u=o[s],l=u.point,c=u.value;"window"===t?a.matchMedia("(min-width: ".concat(c,"px)")).matches&&(r=l):c<=n.clientWidth&&(r=l)}return r||"max"}}};var mle={addClasses:function(){var e=this,t=e.classNames,n=e.params,r=e.rtl,a=e.$el,i=e.device,o=e.support,s=function(e,t){var n=[];return e.forEach((function(e){"object"===typeof e?Object.keys(e).forEach((function(r){e[r]&&n.push(t+r)})):"string"===typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"pointer-events":!o.touch},{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:i.android},{ios:i.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push.apply(t,(0,_.Z)(s)),a.addClass((0,_.Z)(t).join(" ")),e.emitContainerClasses()},removeClasses:function(){var e=this,t=e.$el,n=e.classNames;t.removeClass(n.join(" ")),e.emitContainerClasses()}};var vle={loadImage:function(e,t,n,r,a,i){var o,s=Mue();function u(){i&&i()}zue(e).parent("picture")[0]||e.complete&&a?u():t?((o=new s.Image).onload=u,o.onerror=u,r&&(o.sizes=r),n&&(o.srcset=n),t&&(o.src=t)):u()},preloadImages:function(){var e=this;function t(){"undefined"!==typeof e&&null!==e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var n=0;n<e.imagesToLoad.length;n+=1){var r=e.imagesToLoad[n];e.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,t)}}};var gle={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function yle(e,t){return function(n){void 0===n&&(n={});var r=Object.keys(n)[0],a=n[r];"object"===typeof a&&null!==a?(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===e[r]&&(e[r]={auto:!0}),r in e&&"enabled"in a?(!0===e[r]&&(e[r]={enabled:!0}),"object"!==typeof e[r]||"enabled"in e[r]||(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),Zue(t,n)):Zue(t,n)):Zue(t,n)}}var ble={eventsEmitter:Kue,update:Que,translate:Jue,transition:{setTransition:function(e,t){var n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var n=this,r=n.params;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),$ue({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);var n=this,r=n.params;n.animating=!1,r.cssMode||(n.setTransition(0),$ue({swiper:n,runCallbacks:e,direction:t,step:"End"}))}},slide:ele,loop:tle,grabCursor:nle,events:hle,breakpoints:fle,checkOverflow:{checkOverflow:function(){var e=this,t=e.isLocked,n=e.params,r=n.slidesOffsetBefore;if(r){var a=e.slides.length-1,i=e.slidesGrid[a]+e.slidesSizesGrid[a]+2*r;e.isLocked=e.size>i}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:mle,images:vle},xle={},wle=function(){function e(){var t,n;M(this,e);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];if(1===a.length&&a[0].constructor&&"Object"===Object.prototype.toString.call(a[0]).slice(8,-1)?n=a[0]:(t=a[0],n=a[1]),n||(n={}),n=Zue({},n),t&&!n.el&&(n.el=t),n.el&&zue(n.el).length>1){var o=[];return zue(n.el).each((function(t){var r=Zue({},n,{el:t});o.push(new e(r))})),o}var s,u=this;(u.__swiper__=!0,u.support=que(),u.device=Xue({userAgent:n.userAgent}),u.browser=Yue(),u.eventsListeners={},u.eventsAnyListeners=[],u.modules=(0,_.Z)(u.__modules__),n.modules&&Array.isArray(n.modules))&&(s=u.modules).push.apply(s,(0,_.Z)(n.modules));var l={};u.modules.forEach((function(e){e({swiper:u,extendParams:yle(n,l),on:u.on.bind(u),once:u.once.bind(u),off:u.off.bind(u),emit:u.emit.bind(u)})}));var c=Zue({},gle,l);return u.params=Zue({},c,xle,n),u.originalParams=Zue({},u.params),u.passedParams=Zue({},n),u.params&&u.params.on&&Object.keys(u.params.on).forEach((function(e){u.on(e,u.params.on[e])})),u.params&&u.params.onAny&&u.onAny(u.params.onAny),u.$=zue,Object.assign(u,{enabled:u.params.enabled,el:t,classNames:[],slides:zue(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===u.params.direction},isVertical:function(){return"vertical"===u.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:u.params.allowSlideNext,allowSlidePrev:u.params.allowSlidePrev,touchEvents:function(){var e=["touchstart","touchmove","touchend","touchcancel"],t=["pointerdown","pointermove","pointerup"];return u.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},u.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},u.support.touch||!u.params.simulateTouch?u.touchEventsTouch:u.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:u.params.focusableElements,lastClickTime:Uue(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:u.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),u.emit("_swiper"),u.params.init&&u.init(),u}return(0,I.Z)(e,[{key:"enable",value:function(){var e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}},{key:"disable",value:function(){var e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}},{key:"setProgress",value:function(e,t){var n=this;e=Math.min(Math.max(e,0),1);var r=n.minTranslate(),a=(n.maxTranslate()-r)*e+r;n.translateTo(a,"undefined"===typeof t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}},{key:"emitContainerClasses",value:function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}}},{key:"getSlideClasses",value:function(e){var t=this;return t.destroyed?"":e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")}},{key:"emitSlidesClasses",value:function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each((function(n){var r=e.getSlideClasses(n);t.push({slideEl:n,classNames:r}),e.emit("_slideClass",n,r)})),e.emit("_slideClasses",t)}}},{key:"slidesPerViewDynamic",value:function(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);var n=this,r=n.params,a=n.slides,i=n.slidesGrid,o=n.slidesSizesGrid,s=n.size,u=n.activeIndex,l=1;if(r.centeredSlides){for(var c,d=a[u].swiperSlideSize,h=u+1;h<a.length;h+=1)a[h]&&!c&&(l+=1,(d+=a[h].swiperSlideSize)>s&&(c=!0));for(var p=u-1;p>=0;p-=1)a[p]&&!c&&(l+=1,(d+=a[p].swiperSlideSize)>s&&(c=!0))}else if("current"===e)for(var f=u+1;f<a.length;f+=1){(t?i[f]+o[f]-i[u]<s:i[f]-i[u]<s)&&(l+=1)}else for(var m=u-1;m>=0;m-=1){i[u]-i[m]<s&&(l+=1)}return l}},{key:"update",value:function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,n=e.params;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode&&e.params.freeMode.enabled?(r(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||r(),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function r(){var t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}}},{key:"changeDirection",value:function(e,t){void 0===t&&(t=!0);var n=this,r=n.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass("".concat(n.params.containerModifierClass).concat(r)).addClass("".concat(n.params.containerModifierClass).concat(e)),n.emitContainerClasses(),n.params.direction=e,n.slides.each((function(t){"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}},{key:"mount",value:function(e){var t=this;if(t.mounted)return!0;var n=zue(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;var r=function(){return".".concat((t.params.wrapperClass||"").trim().split(" ").join("."))},a=function(){if(e&&e.shadowRoot&&e.shadowRoot.querySelector){var t=zue(e.shadowRoot.querySelector(r()));return t.children=function(e){return n.children(e)},t}return n.children(r())}();if(0===a.length&&t.params.createElements){var i=Cue().createElement("div");a=zue(i),i.className=t.params.wrapperClass,n.append(i),n.children(".".concat(t.params.slideClass)).each((function(e){a.append(e)}))}return Object.assign(t,{$el:n,el:e,$wrapperEl:a,wrapperEl:a[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===a.css("display")}),!0}},{key:"init",value:function(e){var t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t}},{key:"destroy",value:function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=this,r=n.params,a=n.$el,i=n.$wrapperEl,o=n.slides;return"undefined"===typeof n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),t&&(n.removeClasses(),a.removeAttr("style"),i.removeAttr("style"),o&&o.length&&o.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((function(e){n.off(e)})),!1!==e&&(n.$el[0].swiper=null,function(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(GK){}try{delete t[e]}catch(GK){}}))}(n)),n.destroyed=!0),null}}],[{key:"extendDefaults",value:function(e){Zue(xle,e)}},{key:"extendedDefaults",get:function(){return xle}},{key:"defaults",get:function(){return gle}},{key:"installModule",value:function(t){e.prototype.__modules__||(e.prototype.__modules__=[]);var n=e.prototype.__modules__;"function"===typeof t&&n.indexOf(t)<0&&n.push(t)}},{key:"use",value:function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)}}]),e}();Object.keys(ble).forEach((function(e){Object.keys(ble[e]).forEach((function(t){wle.prototype[t]=ble[e][t]}))})),wle.use([function(e){var t=e.swiper,n=e.on,r=e.emit,a=Mue(),i=null,o=null,s=function(){t&&!t.destroyed&&t.initialized&&(r("beforeResize"),r("resize"))},u=function(){t&&!t.destroyed&&t.initialized&&r("orientationchange")};n("init",(function(){t.params.resizeObserver&&"undefined"!==typeof a.ResizeObserver?t&&!t.destroyed&&t.initialized&&(i=new ResizeObserver((function(e){o=a.requestAnimationFrame((function(){var n=t.width,r=t.height,a=n,i=r;e.forEach((function(e){var n=e.contentBoxSize,r=e.contentRect,o=e.target;o&&o!==t.el||(a=r?r.width:(n[0]||n).inlineSize,i=r?r.height:(n[0]||n).blockSize)})),a===n&&i===r||s()}))})),i.observe(t.el)):(a.addEventListener("resize",s),a.addEventListener("orientationchange",u))})),n("destroy",(function(){o&&a.cancelAnimationFrame(o),i&&i.unobserve&&t.el&&(i.unobserve(t.el),i=null),a.removeEventListener("resize",s),a.removeEventListener("orientationchange",u)}))},function(e){var t=e.swiper,n=e.extendParams,r=e.on,a=e.emit,i=[],o=Mue(),s=function(e,t){void 0===t&&(t={});var n=new(o.MutationObserver||o.WebkitMutationObserver)((function(e){if(1!==e.length){var t=function(){a("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(t):o.setTimeout(t,0)}else a("observerUpdate",e[0])}));n.observe(e,{attributes:"undefined"===typeof t.attributes||t.attributes,childList:"undefined"===typeof t.childList||t.childList,characterData:"undefined"===typeof t.characterData||t.characterData}),i.push(n)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",(function(){if(t.params.observer){if(t.params.observeParents)for(var e=t.$el.parents(),n=0;n<e.length;n+=1)s(e[n]);s(t.$el[0],{childList:t.params.observeSlideChildren}),s(t.$wrapperEl[0],{attributes:!1})}})),r("destroy",(function(){i.forEach((function(e){e.disconnect()})),i.splice(0,i.length)}))}]);var kle=wle;function Sle(e){var t=e.swiper,n=e.extendParams,r=e.on,a=e.emit,i=Cue(),o=Mue();function s(e){if(t.enabled){var n=t.rtlTranslate,r=e;r.originalEvent&&(r=r.originalEvent);var s=r.keyCode||r.charCode,u=t.params.keyboard.pageUpDown,l=u&&33===s,c=u&&34===s,d=37===s,h=39===s,p=38===s,f=40===s;if(!t.allowSlideNext&&(t.isHorizontal()&&h||t.isVertical()&&f||c))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&d||t.isVertical()&&p||l))return!1;if(!(r.shiftKey||r.altKey||r.ctrlKey||r.metaKey)&&(!i.activeElement||!i.activeElement.nodeName||"input"!==i.activeElement.nodeName.toLowerCase()&&"textarea"!==i.activeElement.nodeName.toLowerCase())){if(t.params.keyboard.onlyInViewport&&(l||c||d||h||p||f)){var m=!1;if(t.$el.parents(".".concat(t.params.slideClass)).length>0&&0===t.$el.parents(".".concat(t.params.slideActiveClass)).length)return;var v=t.$el,g=v[0].clientWidth,y=v[0].clientHeight,b=o.innerWidth,x=o.innerHeight,w=t.$el.offset();n&&(w.left-=t.$el[0].scrollLeft);for(var k=[[w.left,w.top],[w.left+g,w.top],[w.left,w.top+y],[w.left+g,w.top+y]],S=0;S<k.length;S+=1){var E=k[S];if(E[0]>=0&&E[0]<=b&&E[1]>=0&&E[1]<=x){if(0===E[0]&&0===E[1])continue;m=!0}}if(!m)return}t.isHorizontal()?((l||c||d||h)&&(r.preventDefault?r.preventDefault():r.returnValue=!1),((c||h)&&!n||(l||d)&&n)&&t.slideNext(),((l||d)&&!n||(c||h)&&n)&&t.slidePrev()):((l||c||p||f)&&(r.preventDefault?r.preventDefault():r.returnValue=!1),(c||f)&&t.slideNext(),(l||p)&&t.slidePrev()),a("keyPress",s)}}}function u(){t.keyboard.enabled||(zue(i).on("keydown",s),t.keyboard.enabled=!0)}function l(){t.keyboard.enabled&&(zue(i).off("keydown",s),t.keyboard.enabled=!1)}t.keyboard={enabled:!1},n({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),r("init",(function(){t.params.keyboard.enabled&&u()})),r("destroy",(function(){t.keyboard.enabled&&l()})),Object.assign(t.keyboard,{enable:u,disable:l})}function Ele(e,t,n,r){var a=Cue();return e.params.createElements&&Object.keys(r).forEach((function(i){if(!n[i]&&!0===n.auto){var o=e.$el.children(".".concat(r[i]))[0];o||((o=a.createElement("div")).className=r[i],e.$el.append(o)),n[i]=o,t[i]=o}})),n}function Tle(e){var t=e.swiper,n=e.extendParams,r=e.on,a=e.emit;function i(e){var n;return e&&(n=zue(e),t.params.uniqueNavElements&&"string"===typeof e&&n.length>1&&1===t.$el.find(e).length&&(n=t.$el.find(e))),n}function o(e,n){var r=t.params.navigation;e&&e.length>0&&(e[n?"addClass":"removeClass"](r.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=n),t.params.watchOverflow&&t.enabled&&e[t.isLocked?"addClass":"removeClass"](r.lockClass))}function s(){if(!t.params.loop){var e=t.navigation,n=e.$nextEl;o(e.$prevEl,t.isBeginning&&!t.params.rewind),o(n,t.isEnd&&!t.params.rewind)}}function u(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&t.slidePrev()}function l(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&t.slideNext()}function c(){var e=t.params.navigation;if(t.params.navigation=Ele(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),e.nextEl||e.prevEl){var n=i(e.nextEl),r=i(e.prevEl);n&&n.length>0&&n.on("click",l),r&&r.length>0&&r.on("click",u),Object.assign(t.navigation,{$nextEl:n,nextEl:n&&n[0],$prevEl:r,prevEl:r&&r[0]}),t.enabled||(n&&n.addClass(e.lockClass),r&&r.addClass(e.lockClass))}}function d(){var e=t.navigation,n=e.$nextEl,r=e.$prevEl;n&&n.length&&(n.off("click",l),n.removeClass(t.params.navigation.disabledClass)),r&&r.length&&(r.off("click",u),r.removeClass(t.params.navigation.disabledClass))}n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}}),t.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null},r("init",(function(){c(),s()})),r("toEdge fromEdge lock unlock",(function(){s()})),r("destroy",(function(){d()})),r("enable disable",(function(){var e=t.navigation,n=e.$nextEl,r=e.$prevEl;n&&n[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass),r&&r[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass)})),r("click",(function(e,n){var r=t.navigation,i=r.$nextEl,o=r.$prevEl,s=n.target;if(t.params.navigation.hideOnClick&&!zue(s).is(o)&&!zue(s).is(i)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===s||t.pagination.el.contains(s)))return;var u;i?u=i.hasClass(t.params.navigation.hiddenClass):o&&(u=o.hasClass(t.params.navigation.hiddenClass)),a(!0===u?"navigationShow":"navigationHide"),i&&i.toggleClass(t.params.navigation.hiddenClass),o&&o.toggleClass(t.params.navigation.hiddenClass)}})),Object.assign(t.navigation,{update:s,init:c,destroy:d})}function Cle(e){return void 0===e&&(e=""),".".concat(e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,"."))}function _le(e){var t,n=e.swiper,r=e.extendParams,a=e.on,i=e.emit,o="swiper-pagination";r({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"".concat(o,"-bullet"),bulletActiveClass:"".concat(o,"-bullet-active"),modifierClass:"".concat(o,"-"),currentClass:"".concat(o,"-current"),totalClass:"".concat(o,"-total"),hiddenClass:"".concat(o,"-hidden"),progressbarFillClass:"".concat(o,"-progressbar-fill"),progressbarOppositeClass:"".concat(o,"-progressbar-opposite"),clickableClass:"".concat(o,"-clickable"),lockClass:"".concat(o,"-lock"),horizontalClass:"".concat(o,"-horizontal"),verticalClass:"".concat(o,"-vertical")}}),n.pagination={el:null,$el:null,bullets:[]};var s=0;function u(){return!n.params.pagination.el||!n.pagination.el||!n.pagination.$el||0===n.pagination.$el.length}function l(e,t){var r=n.params.pagination.bulletActiveClass;e[t]().addClass("".concat(r,"-").concat(t))[t]().addClass("".concat(r,"-").concat(t,"-").concat(t))}function c(){var e=n.rtl,r=n.params.pagination;if(!u()){var a,o=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.slides.length,c=n.pagination.$el,d=n.params.loop?Math.ceil((o-2*n.loopedSlides)/n.params.slidesPerGroup):n.snapGrid.length;if(n.params.loop?((a=Math.ceil((n.activeIndex-n.loopedSlides)/n.params.slidesPerGroup))>o-1-2*n.loopedSlides&&(a-=o-2*n.loopedSlides),a>d-1&&(a-=d),a<0&&"bullets"!==n.params.paginationType&&(a=d+a)):a="undefined"!==typeof n.snapIndex?n.snapIndex:n.activeIndex||0,"bullets"===r.type&&n.pagination.bullets&&n.pagination.bullets.length>0){var h,p,f,m=n.pagination.bullets;if(r.dynamicBullets&&(t=m.eq(0)[n.isHorizontal()?"outerWidth":"outerHeight"](!0),c.css(n.isHorizontal()?"width":"height","".concat(t*(r.dynamicMainBullets+4),"px")),r.dynamicMainBullets>1&&void 0!==n.previousIndex&&((s+=a-(n.previousIndex-n.loopedSlides||0))>r.dynamicMainBullets-1?s=r.dynamicMainBullets-1:s<0&&(s=0)),h=Math.max(a-s,0),f=((p=h+(Math.min(m.length,r.dynamicMainBullets)-1))+h)/2),m.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map((function(e){return"".concat(r.bulletActiveClass).concat(e)})).join(" ")),c.length>1)m.each((function(e){var t=zue(e),n=t.index();n===a&&t.addClass(r.bulletActiveClass),r.dynamicBullets&&(n>=h&&n<=p&&t.addClass("".concat(r.bulletActiveClass,"-main")),n===h&&l(t,"prev"),n===p&&l(t,"next"))}));else{var v=m.eq(a),g=v.index();if(v.addClass(r.bulletActiveClass),r.dynamicBullets){for(var y=m.eq(h),b=m.eq(p),x=h;x<=p;x+=1)m.eq(x).addClass("".concat(r.bulletActiveClass,"-main"));if(n.params.loop)if(g>=m.length){for(var w=r.dynamicMainBullets;w>=0;w-=1)m.eq(m.length-w).addClass("".concat(r.bulletActiveClass,"-main"));m.eq(m.length-r.dynamicMainBullets-1).addClass("".concat(r.bulletActiveClass,"-prev"))}else l(y,"prev"),l(b,"next");else l(y,"prev"),l(b,"next")}}if(r.dynamicBullets){var k=Math.min(m.length,r.dynamicMainBullets+4),S=(t*k-t)/2-f*t,E=e?"right":"left";m.css(n.isHorizontal()?E:"top","".concat(S,"px"))}}if("fraction"===r.type&&(c.find(Cle(r.currentClass)).text(r.formatFractionCurrent(a+1)),c.find(Cle(r.totalClass)).text(r.formatFractionTotal(d))),"progressbar"===r.type){var T;T=r.progressbarOpposite?n.isHorizontal()?"vertical":"horizontal":n.isHorizontal()?"horizontal":"vertical";var C=(a+1)/d,_=1,M=1;"horizontal"===T?_=C:M=C,c.find(Cle(r.progressbarFillClass)).transform("translate3d(0,0,0) scaleX(".concat(_,") scaleY(").concat(M,")")).transition(n.params.speed)}"custom"===r.type&&r.renderCustom?(c.html(r.renderCustom(n,a+1,d)),i("paginationRender",c[0])):i("paginationUpdate",c[0]),n.params.watchOverflow&&n.enabled&&c[n.isLocked?"addClass":"removeClass"](r.lockClass)}}function d(){var e=n.params.pagination;if(!u()){var t=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.slides.length,r=n.pagination.$el,a="";if("bullets"===e.type){var o=n.params.loop?Math.ceil((t-2*n.loopedSlides)/n.params.slidesPerGroup):n.snapGrid.length;n.params.freeMode&&n.params.freeMode.enabled&&!n.params.loop&&o>t&&(o=t);for(var s=0;s<o;s+=1)e.renderBullet?a+=e.renderBullet.call(n,s,e.bulletClass):a+="<".concat(e.bulletElement,' class="').concat(e.bulletClass,'"></').concat(e.bulletElement,">");r.html(a),n.pagination.bullets=r.find(Cle(e.bulletClass))}"fraction"===e.type&&(a=e.renderFraction?e.renderFraction.call(n,e.currentClass,e.totalClass):'<span class="'.concat(e.currentClass,'"></span>')+" / "+'<span class="'.concat(e.totalClass,'"></span>'),r.html(a)),"progressbar"===e.type&&(a=e.renderProgressbar?e.renderProgressbar.call(n,e.progressbarFillClass):'<span class="'.concat(e.progressbarFillClass,'"></span>'),r.html(a)),"custom"!==e.type&&i("paginationRender",n.pagination.$el[0])}}function h(){n.params.pagination=Ele(n,n.originalParams.pagination,n.params.pagination,{el:"swiper-pagination"});var e=n.params.pagination;if(e.el){var t=zue(e.el);0!==t.length&&(n.params.uniqueNavElements&&"string"===typeof e.el&&t.length>1&&(t=n.$el.find(e.el)).length>1&&(t=t.filter((function(e){return zue(e).parents(".swiper")[0]===n.el}))),"bullets"===e.type&&e.clickable&&t.addClass(e.clickableClass),t.addClass(e.modifierClass+e.type),t.addClass(n.isHorizontal()?e.horizontalClass:e.verticalClass),"bullets"===e.type&&e.dynamicBullets&&(t.addClass("".concat(e.modifierClass).concat(e.type,"-dynamic")),s=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&t.addClass(e.progressbarOppositeClass),e.clickable&&t.on("click",Cle(e.bulletClass),(function(e){e.preventDefault();var t=zue(this).index()*n.params.slidesPerGroup;n.params.loop&&(t+=n.loopedSlides),n.slideTo(t)})),Object.assign(n.pagination,{$el:t,el:t[0]}),n.enabled||t.addClass(e.lockClass))}}function p(){var e=n.params.pagination;if(!u()){var t=n.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),t.removeClass(n.isHorizontal()?e.horizontalClass:e.verticalClass),n.pagination.bullets&&n.pagination.bullets.removeClass&&n.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click",Cle(e.bulletClass))}}a("init",(function(){h(),d(),c()})),a("activeIndexChange",(function(){(n.params.loop||"undefined"===typeof n.snapIndex)&&c()})),a("snapIndexChange",(function(){n.params.loop||c()})),a("slidesLengthChange",(function(){n.params.loop&&(d(),c())})),a("snapGridLengthChange",(function(){n.params.loop||(d(),c())})),a("destroy",(function(){p()})),a("enable disable",(function(){var e=n.pagination.$el;e&&e[n.enabled?"removeClass":"addClass"](n.params.pagination.lockClass)})),a("lock unlock",(function(){c()})),a("click",(function(e,t){var r=t.target,a=n.pagination.$el;if(n.params.pagination.el&&n.params.pagination.hideOnClick&&a.length>0&&!zue(r).hasClass(n.params.pagination.bulletClass)){if(n.navigation&&(n.navigation.nextEl&&r===n.navigation.nextEl||n.navigation.prevEl&&r===n.navigation.prevEl))return;var o=a.hasClass(n.params.pagination.hiddenClass);i(!0===o?"paginationShow":"paginationHide"),a.toggleClass(n.params.pagination.hiddenClass)}})),Object.assign(n.pagination,{render:d,update:c,init:h,destroy:p})}function Mle(e){var t,n,r,a,i=e.swiper,o=e.extendParams,s=e.on,u=e.emit,l=Cue(),c=!1,d=null,h=null;function p(){if(i.params.scrollbar.el&&i.scrollbar.el){var e=i.scrollbar,t=i.rtlTranslate,a=i.progress,o=e.$dragEl,s=e.$el,u=i.params.scrollbar,l=n,c=(r-n)*a;t?(c=-c)>0?(l=n-c,c=0):-c+n>r&&(l=r+c):c<0?(l=n+c,c=0):c+n>r&&(l=r-c),i.isHorizontal()?(o.transform("translate3d(".concat(c,"px, 0, 0)")),o[0].style.width="".concat(l,"px")):(o.transform("translate3d(0px, ".concat(c,"px, 0)")),o[0].style.height="".concat(l,"px")),u.hide&&(clearTimeout(d),s[0].style.opacity=1,d=setTimeout((function(){s[0].style.opacity=0,s.transition(400)}),1e3))}}function f(){if(i.params.scrollbar.el&&i.scrollbar.el){var e=i.scrollbar,t=e.$dragEl,o=e.$el;t[0].style.width="",t[0].style.height="",r=i.isHorizontal()?o[0].offsetWidth:o[0].offsetHeight,a=i.size/(i.virtualSize+i.params.slidesOffsetBefore-(i.params.centeredSlides?i.snapGrid[0]:0)),n="auto"===i.params.scrollbar.dragSize?r*a:parseInt(i.params.scrollbar.dragSize,10),i.isHorizontal()?t[0].style.width="".concat(n,"px"):t[0].style.height="".concat(n,"px"),o[0].style.display=a>=1?"none":"",i.params.scrollbar.hide&&(o[0].style.opacity=0),i.params.watchOverflow&&i.enabled&&e.$el[i.isLocked?"addClass":"removeClass"](i.params.scrollbar.lockClass)}}function m(e){return i.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientX:e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientY:e.clientY}function v(e){var a,o=i.scrollbar,s=i.rtlTranslate,u=o.$el;a=(m(e)-u.offset()[i.isHorizontal()?"left":"top"]-(null!==t?t:n/2))/(r-n),a=Math.max(Math.min(a,1),0),s&&(a=1-a);var l=i.minTranslate()+(i.maxTranslate()-i.minTranslate())*a;i.updateProgress(l),i.setTranslate(l),i.updateActiveIndex(),i.updateSlidesClasses()}function g(e){var n=i.params.scrollbar,r=i.scrollbar,a=i.$wrapperEl,o=r.$el,s=r.$dragEl;c=!0,t=e.target===s[0]||e.target===s?m(e)-e.target.getBoundingClientRect()[i.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),a.transition(100),s.transition(100),v(e),clearTimeout(h),o.transition(0),n.hide&&o.css("opacity",1),i.params.cssMode&&i.$wrapperEl.css("scroll-snap-type","none"),u("scrollbarDragStart",e)}function y(e){var t=i.scrollbar,n=i.$wrapperEl,r=t.$el,a=t.$dragEl;c&&(e.preventDefault?e.preventDefault():e.returnValue=!1,v(e),n.transition(0),r.transition(0),a.transition(0),u("scrollbarDragMove",e))}function b(e){var t=i.params.scrollbar,n=i.scrollbar,r=i.$wrapperEl,a=n.$el;c&&(c=!1,i.params.cssMode&&(i.$wrapperEl.css("scroll-snap-type",""),r.transition("")),t.hide&&(clearTimeout(h),h=Bue((function(){a.css("opacity",0),a.transition(400)}),1e3)),u("scrollbarDragEnd",e),t.snapOnRelease&&i.slideToClosest())}function x(e){var t=i.scrollbar,n=i.touchEventsTouch,r=i.touchEventsDesktop,a=i.params,o=i.support,s=t.$el[0],u=!(!o.passiveListener||!a.passiveListeners)&&{passive:!1,capture:!1},c=!(!o.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};if(s){var d="on"===e?"addEventListener":"removeEventListener";o.touch?(s[d](n.start,g,u),s[d](n.move,y,u),s[d](n.end,b,c)):(s[d](r.start,g,u),l[d](r.move,y,u),l[d](r.end,b,c))}}function w(){var e=i.scrollbar,t=i.$el;i.params.scrollbar=Ele(i,i.originalParams.scrollbar,i.params.scrollbar,{el:"swiper-scrollbar"});var n=i.params.scrollbar;if(n.el){var r=zue(n.el);i.params.uniqueNavElements&&"string"===typeof n.el&&r.length>1&&1===t.find(n.el).length&&(r=t.find(n.el));var a=r.find(".".concat(i.params.scrollbar.dragClass));0===a.length&&(a=zue('<div class="'.concat(i.params.scrollbar.dragClass,'"></div>')),r.append(a)),Object.assign(e,{$el:r,el:r[0],$dragEl:a,dragEl:a[0]}),n.draggable&&i.params.scrollbar.el&&x("on"),r&&r[i.enabled?"removeClass":"addClass"](i.params.scrollbar.lockClass)}}function k(){i.params.scrollbar.el&&x("off")}o({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}}),i.scrollbar={el:null,dragEl:null,$el:null,$dragEl:null},s("init",(function(){w(),f(),p()})),s("update resize observerUpdate lock unlock",(function(){f()})),s("setTranslate",(function(){p()})),s("setTransition",(function(e,t){!function(e){i.params.scrollbar.el&&i.scrollbar.el&&i.scrollbar.$dragEl.transition(e)}(t)})),s("enable disable",(function(){var e=i.scrollbar.$el;e&&e[i.enabled?"removeClass":"addClass"](i.params.scrollbar.lockClass)})),s("destroy",(function(){k()})),Object.assign(i.scrollbar,{updateSize:f,setTranslate:p,init:w,destroy:k})}function Ile(e){var t=e.swiper,n=e.extendParams,r=e.on,a=e.emit,i=Mue();n({zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),t.zoom={enabled:!1};var o,s,u,l=1,c=!1,d={$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},h={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},p={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0},f=1;function m(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,n=e.targetTouches[0].pageY,r=e.targetTouches[1].pageX,a=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(r-t,2)+Math.pow(a-n,2))}function v(e){var n=t.support,r=t.params.zoom;if(s=!1,u=!1,!n.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;s=!0,d.scaleStart=m(e)}d.$slideEl&&d.$slideEl.length||(d.$slideEl=zue(e.target).closest(".".concat(t.params.slideClass)),0===d.$slideEl.length&&(d.$slideEl=t.slides.eq(t.activeIndex)),d.$imageEl=d.$slideEl.find(".".concat(r.containerClass)).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),d.$imageWrapEl=d.$imageEl.parent(".".concat(r.containerClass)),d.maxRatio=d.$imageWrapEl.attr("data-swiper-zoom")||r.maxRatio,0!==d.$imageWrapEl.length)?(d.$imageEl&&d.$imageEl.transition(0),c=!0):d.$imageEl=void 0}function g(e){var n=t.support,r=t.params.zoom,a=t.zoom;if(!n.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;u=!0,d.scaleMove=m(e)}d.$imageEl&&0!==d.$imageEl.length?(n.gestures?a.scale=e.scale*l:a.scale=d.scaleMove/d.scaleStart*l,a.scale>d.maxRatio&&(a.scale=d.maxRatio-1+Math.pow(a.scale-d.maxRatio+1,.5)),a.scale<r.minRatio&&(a.scale=r.minRatio+1-Math.pow(r.minRatio-a.scale+1,.5)),d.$imageEl.transform("translate3d(0,0,0) scale(".concat(a.scale,")"))):"gesturechange"===e.type&&v(e)}function y(e){var n=t.device,r=t.support,a=t.params.zoom,i=t.zoom;if(!r.gestures){if(!s||!u)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!n.android)return;s=!1,u=!1}d.$imageEl&&0!==d.$imageEl.length&&(i.scale=Math.max(Math.min(i.scale,d.maxRatio),a.minRatio),d.$imageEl.transition(t.params.speed).transform("translate3d(0,0,0) scale(".concat(i.scale,")")),l=i.scale,c=!1,1===i.scale&&(d.$slideEl=void 0))}function b(e){var n=t.zoom;if(d.$imageEl&&0!==d.$imageEl.length&&(t.allowClick=!1,h.isTouched&&d.$slideEl)){h.isMoved||(h.width=d.$imageEl[0].offsetWidth,h.height=d.$imageEl[0].offsetHeight,h.startX=Wue(d.$imageWrapEl[0],"x")||0,h.startY=Wue(d.$imageWrapEl[0],"y")||0,d.slideWidth=d.$slideEl[0].offsetWidth,d.slideHeight=d.$slideEl[0].offsetHeight,d.$imageWrapEl.transition(0));var r=h.width*n.scale,a=h.height*n.scale;if(!(r<d.slideWidth&&a<d.slideHeight)){if(h.minX=Math.min(d.slideWidth/2-r/2,0),h.maxX=-h.minX,h.minY=Math.min(d.slideHeight/2-a/2,0),h.maxY=-h.minY,h.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,h.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!h.isMoved&&!c){if(t.isHorizontal()&&(Math.floor(h.minX)===Math.floor(h.startX)&&h.touchesCurrent.x<h.touchesStart.x||Math.floor(h.maxX)===Math.floor(h.startX)&&h.touchesCurrent.x>h.touchesStart.x))return void(h.isTouched=!1);if(!t.isHorizontal()&&(Math.floor(h.minY)===Math.floor(h.startY)&&h.touchesCurrent.y<h.touchesStart.y||Math.floor(h.maxY)===Math.floor(h.startY)&&h.touchesCurrent.y>h.touchesStart.y))return void(h.isTouched=!1)}e.cancelable&&e.preventDefault(),e.stopPropagation(),h.isMoved=!0,h.currentX=h.touchesCurrent.x-h.touchesStart.x+h.startX,h.currentY=h.touchesCurrent.y-h.touchesStart.y+h.startY,h.currentX<h.minX&&(h.currentX=h.minX+1-Math.pow(h.minX-h.currentX+1,.8)),h.currentX>h.maxX&&(h.currentX=h.maxX-1+Math.pow(h.currentX-h.maxX+1,.8)),h.currentY<h.minY&&(h.currentY=h.minY+1-Math.pow(h.minY-h.currentY+1,.8)),h.currentY>h.maxY&&(h.currentY=h.maxY-1+Math.pow(h.currentY-h.maxY+1,.8)),p.prevPositionX||(p.prevPositionX=h.touchesCurrent.x),p.prevPositionY||(p.prevPositionY=h.touchesCurrent.y),p.prevTime||(p.prevTime=Date.now()),p.x=(h.touchesCurrent.x-p.prevPositionX)/(Date.now()-p.prevTime)/2,p.y=(h.touchesCurrent.y-p.prevPositionY)/(Date.now()-p.prevTime)/2,Math.abs(h.touchesCurrent.x-p.prevPositionX)<2&&(p.x=0),Math.abs(h.touchesCurrent.y-p.prevPositionY)<2&&(p.y=0),p.prevPositionX=h.touchesCurrent.x,p.prevPositionY=h.touchesCurrent.y,p.prevTime=Date.now(),d.$imageWrapEl.transform("translate3d(".concat(h.currentX,"px, ").concat(h.currentY,"px,0)"))}}}function x(){var e=t.zoom;d.$slideEl&&t.previousIndex!==t.activeIndex&&(d.$imageEl&&d.$imageEl.transform("translate3d(0,0,0) scale(1)"),d.$imageWrapEl&&d.$imageWrapEl.transform("translate3d(0,0,0)"),e.scale=1,l=1,d.$slideEl=void 0,d.$imageEl=void 0,d.$imageWrapEl=void 0)}function w(e){var n,r,a,o,s,u,c,p,f,m,v,g,y,b,x,w,k=t.zoom,S=t.params.zoom;(d.$slideEl||(e&&e.target&&(d.$slideEl=zue(e.target).closest(".".concat(t.params.slideClass))),d.$slideEl||(t.params.virtual&&t.params.virtual.enabled&&t.virtual?d.$slideEl=t.$wrapperEl.children(".".concat(t.params.slideActiveClass)):d.$slideEl=t.slides.eq(t.activeIndex)),d.$imageEl=d.$slideEl.find(".".concat(S.containerClass)).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),d.$imageWrapEl=d.$imageEl.parent(".".concat(S.containerClass))),d.$imageEl&&0!==d.$imageEl.length&&d.$imageWrapEl&&0!==d.$imageWrapEl.length)&&(t.params.cssMode&&(t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.touchAction="none"),d.$slideEl.addClass("".concat(S.zoomedSlideClass)),"undefined"===typeof h.touchesStart.x&&e?(n="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,r="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(n=h.touchesStart.x,r=h.touchesStart.y),k.scale=d.$imageWrapEl.attr("data-swiper-zoom")||S.maxRatio,l=d.$imageWrapEl.attr("data-swiper-zoom")||S.maxRatio,e?(x=d.$slideEl[0].offsetWidth,w=d.$slideEl[0].offsetHeight,a=d.$slideEl.offset().left+i.scrollX+x/2-n,o=d.$slideEl.offset().top+i.scrollY+w/2-r,c=d.$imageEl[0].offsetWidth,p=d.$imageEl[0].offsetHeight,f=c*k.scale,m=p*k.scale,y=-(v=Math.min(x/2-f/2,0)),b=-(g=Math.min(w/2-m/2,0)),(s=a*k.scale)<v&&(s=v),s>y&&(s=y),(u=o*k.scale)<g&&(u=g),u>b&&(u=b)):(s=0,u=0),d.$imageWrapEl.transition(300).transform("translate3d(".concat(s,"px, ").concat(u,"px,0)")),d.$imageEl.transition(300).transform("translate3d(0,0,0) scale(".concat(k.scale,")")))}function k(){var e=t.zoom,n=t.params.zoom;d.$slideEl||(t.params.virtual&&t.params.virtual.enabled&&t.virtual?d.$slideEl=t.$wrapperEl.children(".".concat(t.params.slideActiveClass)):d.$slideEl=t.slides.eq(t.activeIndex),d.$imageEl=d.$slideEl.find(".".concat(n.containerClass)).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),d.$imageWrapEl=d.$imageEl.parent(".".concat(n.containerClass))),d.$imageEl&&0!==d.$imageEl.length&&d.$imageWrapEl&&0!==d.$imageWrapEl.length&&(t.params.cssMode&&(t.wrapperEl.style.overflow="",t.wrapperEl.style.touchAction=""),e.scale=1,l=1,d.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),d.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),d.$slideEl.removeClass("".concat(n.zoomedSlideClass)),d.$slideEl=void 0)}function S(e){var n=t.zoom;n.scale&&1!==n.scale?k():w(e)}function E(){var e=t.support;return{passiveListener:!("touchstart"!==t.touchEvents.start||!e.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1},activeListenerWithCapture:!e.passiveListener||{passive:!1,capture:!0}}}function T(){return".".concat(t.params.slideClass)}function C(e){var n=E().passiveListener,r=T();t.$wrapperEl[e]("gesturestart",r,v,n),t.$wrapperEl[e]("gesturechange",r,g,n),t.$wrapperEl[e]("gestureend",r,y,n)}function _(){o||(o=!0,C("on"))}function M(){o&&(o=!1,C("off"))}function I(){var e=t.zoom;if(!e.enabled){e.enabled=!0;var n=t.support,r=E(),a=r.passiveListener,i=r.activeListenerWithCapture,o=T();n.gestures?(t.$wrapperEl.on(t.touchEvents.start,_,a),t.$wrapperEl.on(t.touchEvents.end,M,a)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.on(t.touchEvents.start,o,v,a),t.$wrapperEl.on(t.touchEvents.move,o,g,i),t.$wrapperEl.on(t.touchEvents.end,o,y,a),t.touchEvents.cancel&&t.$wrapperEl.on(t.touchEvents.cancel,o,y,a)),t.$wrapperEl.on(t.touchEvents.move,".".concat(t.params.zoom.containerClass),b,i)}}function N(){var e=t.zoom;if(e.enabled){var n=t.support;e.enabled=!1;var r=E(),a=r.passiveListener,i=r.activeListenerWithCapture,o=T();n.gestures?(t.$wrapperEl.off(t.touchEvents.start,_,a),t.$wrapperEl.off(t.touchEvents.end,M,a)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.off(t.touchEvents.start,o,v,a),t.$wrapperEl.off(t.touchEvents.move,o,g,i),t.$wrapperEl.off(t.touchEvents.end,o,y,a),t.touchEvents.cancel&&t.$wrapperEl.off(t.touchEvents.cancel,o,y,a)),t.$wrapperEl.off(t.touchEvents.move,".".concat(t.params.zoom.containerClass),b,i)}}Object.defineProperty(t.zoom,"scale",{get:function(){return f},set:function(e){if(f!==e){var t=d.$imageEl?d.$imageEl[0]:void 0,n=d.$slideEl?d.$slideEl[0]:void 0;a("zoomChange",e,t,n)}f=e}}),r("init",(function(){t.params.zoom.enabled&&I()})),r("destroy",(function(){N()})),r("touchStart",(function(e,n){t.zoom.enabled&&function(e){var n=t.device;d.$imageEl&&0!==d.$imageEl.length&&(h.isTouched||(n.android&&e.cancelable&&e.preventDefault(),h.isTouched=!0,h.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,h.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))}(n)})),r("touchEnd",(function(e,n){t.zoom.enabled&&function(){var e=t.zoom;if(d.$imageEl&&0!==d.$imageEl.length){if(!h.isTouched||!h.isMoved)return h.isTouched=!1,void(h.isMoved=!1);h.isTouched=!1,h.isMoved=!1;var n=300,r=300,a=p.x*n,i=h.currentX+a,o=p.y*r,s=h.currentY+o;0!==p.x&&(n=Math.abs((i-h.currentX)/p.x)),0!==p.y&&(r=Math.abs((s-h.currentY)/p.y));var u=Math.max(n,r);h.currentX=i,h.currentY=s;var l=h.width*e.scale,c=h.height*e.scale;h.minX=Math.min(d.slideWidth/2-l/2,0),h.maxX=-h.minX,h.minY=Math.min(d.slideHeight/2-c/2,0),h.maxY=-h.minY,h.currentX=Math.max(Math.min(h.currentX,h.maxX),h.minX),h.currentY=Math.max(Math.min(h.currentY,h.maxY),h.minY),d.$imageWrapEl.transition(u).transform("translate3d(".concat(h.currentX,"px, ").concat(h.currentY,"px,0)"))}}()})),r("doubleTap",(function(e,n){!t.animating&&t.params.zoom.enabled&&t.zoom.enabled&&t.params.zoom.toggle&&S(n)})),r("transitionEnd",(function(){t.zoom.enabled&&t.params.zoom.enabled&&x()})),r("slideChange",(function(){t.zoom.enabled&&t.params.zoom.enabled&&t.params.cssMode&&x()})),Object.assign(t.zoom,{enable:I,disable:N,in:w,out:k,toggle:S})}function Nle(e){var t=e.swiper,n=e.extendParams,r=e.on;n({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}});var a=null;function i(e){var t=a;0!==t.length&&(t.html(""),t.html(e))}function o(e){e.attr("tabIndex","0")}function s(e){e.attr("tabIndex","-1")}function u(e,t){e.attr("role",t)}function l(e,t){e.attr("aria-roledescription",t)}function c(e,t){e.attr("aria-label",t)}function d(e){e.attr("aria-disabled",!0)}function h(e){e.attr("aria-disabled",!1)}function p(e){if(13===e.keyCode||32===e.keyCode){var n=t.params.a11y,r=zue(e.target);t.navigation&&t.navigation.$nextEl&&r.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?i(n.lastSlideMessage):i(n.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&r.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?i(n.firstSlideMessage):i(n.prevSlideMessage)),t.pagination&&r.is(Cle(t.params.pagination.bulletClass))&&r[0].click()}}function f(){return t.pagination&&t.pagination.bullets&&t.pagination.bullets.length}function m(){return f()&&t.params.pagination.clickable}var v=function(e,t,n){o(e),"BUTTON"!==e[0].tagName&&(u(e,"button"),e.on("keydown",p)),c(e,n),function(e,t){e.attr("aria-controls",t)}(e,t)},g=function(e){var n=e.target.closest(".".concat(t.params.slideClass));if(n&&t.slides.includes(n)){var r=t.slides.indexOf(n)===t.activeIndex,a=t.params.watchSlidesProgress&&t.visibleSlides&&t.visibleSlides.includes(n);r||a||t.slideTo(t.slides.indexOf(n),0)}};function y(){var e=t.params.a11y;t.$el.append(a);var n=t.$el;e.containerRoleDescriptionMessage&&l(n,e.containerRoleDescriptionMessage),e.containerMessage&&c(n,e.containerMessage);var r,i=t.$wrapperEl,o=e.id||i.attr("id")||"swiper-wrapper-".concat((void 0===(r=16)&&(r=16),"x".repeat(r).replace(/x/g,(function(){return Math.round(16*Math.random()).toString(16)})))),s=t.params.autoplay&&t.params.autoplay.enabled?"off":"polite";!function(e,t){e.attr("id",t)}(i,o),function(e,t){e.attr("aria-live",t)}(i,s),e.itemRoleDescriptionMessage&&l(zue(t.slides),e.itemRoleDescriptionMessage),u(zue(t.slides),e.slideRole);var d,h,f=t.params.loop?t.slides.filter((function(e){return!e.classList.contains(t.params.slideDuplicateClass)})).length:t.slides.length;t.slides.each((function(n,r){var a=zue(n),i=t.params.loop?parseInt(a.attr("data-swiper-slide-index"),10):r;c(a,e.slideLabelMessage.replace(/\{\{index\}\}/,i+1).replace(/\{\{slidesLength\}\}/,f))})),t.navigation&&t.navigation.$nextEl&&(d=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(h=t.navigation.$prevEl),d&&d.length&&v(d,o,e.nextSlideMessage),h&&h.length&&v(h,o,e.prevSlideMessage),m()&&t.pagination.$el.on("keydown",Cle(t.params.pagination.bulletClass),p),t.$el.on("focus",g,!0)}r("beforeInit",(function(){a=zue('<span class="'.concat(t.params.a11y.notificationClass,'" aria-live="assertive" aria-atomic="true"></span>'))})),r("afterInit",(function(){t.params.a11y.enabled&&y()})),r("fromEdge toEdge afterInit lock unlock",(function(){t.params.a11y.enabled&&function(){if(!t.params.loop&&!t.params.rewind&&t.navigation){var e=t.navigation,n=e.$nextEl,r=e.$prevEl;r&&r.length>0&&(t.isBeginning?(d(r),s(r)):(h(r),o(r))),n&&n.length>0&&(t.isEnd?(d(n),s(n)):(h(n),o(n)))}}()})),r("paginationUpdate",(function(){t.params.a11y.enabled&&function(){var e=t.params.a11y;f()&&t.pagination.bullets.each((function(n){var r=zue(n);t.params.pagination.clickable&&(o(r),t.params.pagination.renderBullet||(u(r,"button"),c(r,e.paginationBulletMessage.replace(/\{\{index\}\}/,r.index()+1)))),r.is(".".concat(t.params.pagination.bulletActiveClass))?r.attr("aria-current","true"):r.removeAttr("aria-current")}))}()})),r("destroy",(function(){t.params.a11y.enabled&&function(){var e,n;a&&a.length>0&&a.remove(),t.navigation&&t.navigation.$nextEl&&(e=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(n=t.navigation.$prevEl),e&&e.off("keydown",p),n&&n.off("keydown",p),m()&&t.pagination.$el.off("keydown",Cle(t.params.pagination.bulletClass),p),t.$el.off("focus",g,!0)}()}))}function Ale(e){var t=e.swiper,n=e.extendParams,r=e.on;n({creativeEffect:{transformEl:null,limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});!function(e){var t,n=e.effect,r=e.swiper,a=e.on,i=e.setTranslate,o=e.setTransition,s=e.overwriteParams,u=e.perspective,l=e.recreateShadows,c=e.getEffectParams;a("beforeInit",(function(){if(r.params.effect===n){r.classNames.push("".concat(r.params.containerModifierClass).concat(n)),u&&u()&&r.classNames.push("".concat(r.params.containerModifierClass,"3d"));var e=s?s():{};Object.assign(r.params,e),Object.assign(r.originalParams,e)}})),a("setTranslate",(function(){r.params.effect===n&&i()})),a("setTransition",(function(e,t){r.params.effect===n&&o(t)})),a("transitionEnd",(function(){if(r.params.effect===n&&l){if(!c||!c().slideShadows)return;r.slides.each((function(e){r.$(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").remove()})),l()}})),a("virtualUpdate",(function(){r.params.effect===n&&(r.slides.length||(t=!0),requestAnimationFrame((function(){t&&r.slides&&r.slides.length&&(i(),t=!1)})))}))}({effect:"creative",swiper:t,on:r,setTranslate:function(){var e=t.slides,n=t.$wrapperEl,r=t.slidesSizesGrid,a=t.params.creativeEffect,i=a.progressMultiplier,o=t.params.centeredSlides;if(o){var s=r[0]/2-t.params.slidesOffsetBefore||0;n.transform("translateX(calc(50% - ".concat(s,"px))"))}for(var u=function(){var n=e.eq(l),r=n[0].progress,s=Math.min(Math.max(n[0].progress,-a.limitProgress),a.limitProgress),u=s;o||(u=Math.min(Math.max(n[0].originalProgress,-a.limitProgress),a.limitProgress));var c=n[0].swiperSlideOffset,d=[t.params.cssMode?-c-t.translate:-c,0,0],h=[0,0,0],p=!1;t.isHorizontal()||(d[1]=d[0],d[0]=0);var f={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};s<0?(f=a.next,p=!0):s>0&&(f=a.prev,p=!0),d.forEach((function(e,t){d[t]="calc(".concat(e,"px + (").concat(function(e){return"string"===typeof e?e:"".concat(e,"px")}(f.translate[t])," * ").concat(Math.abs(s*i),"))")})),h.forEach((function(e,t){h[t]=f.rotate[t]*Math.abs(s*i)})),n[0].style.zIndex=-Math.abs(Math.round(r))+e.length;var m=d.join(", "),v="rotateX(".concat(h[0],"deg) rotateY(").concat(h[1],"deg) rotateZ(").concat(h[2],"deg)"),g="scale(".concat(u<0?1+(1-f.scale)*u*i:1-(1-f.scale)*u*i,")"),y=u<0?1+(1-f.opacity)*u*i:1-(1-f.opacity)*u*i,b="translate3d(".concat(m,") ").concat(v," ").concat(g);if(p&&f.shadow||!p){var x=n.children(".swiper-slide-shadow");if(0===x.length&&f.shadow&&(x=function(e,t,n){var r="swiper-slide-shadow".concat(n?"-".concat(n):""),a=e.transformEl?t.find(e.transformEl):t,i=a.children(".".concat(r));return i.length||(i=zue('<div class="swiper-slide-shadow'.concat(n?"-".concat(n):"",'"></div>')),a.append(i)),i}(a,n)),x.length){var w=a.shadowPerProgress?s*(1/a.limitProgress):s;x[0].style.opacity=Math.min(Math.max(Math.abs(w),0),1)}}var k=function(e,t){return e.transformEl?t.find(e.transformEl).css({"backface-visibility":"hidden","-webkit-backface-visibility":"hidden"}):t}(a,n);k.transform(b).css({opacity:y}),f.origin&&k.css("transform-origin",f.origin)},l=0;l<e.length;l+=1)u()},setTransition:function(e){var n=t.params.creativeEffect.transformEl;(n?t.slides.find(n):t.slides).transition(e).find(".swiper-slide-shadow").transition(e),function(e){var t=e.swiper,n=e.duration,r=e.transformEl,a=e.allSlides,i=t.slides,o=t.activeIndex,s=t.$wrapperEl;if(t.params.virtualTranslate&&0!==n){var u=!1;(a?r?i.find(r):i:r?i.eq(o).find(r):i.eq(o)).transitionEnd((function(){if(!u&&t&&!t.destroyed){u=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],n=0;n<e.length;n+=1)s.trigger(e[n])}}))}}({swiper:t,duration:e,transformEl:n,allSlides:!0})},perspective:function(){return t.params.creativeEffect.perspective},overwriteParams:function(){return{watchSlidesProgress:!0,virtualTranslate:!t.params.cssMode}}})}function Rle(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Ole(e,t){var n=["__proto__","constructor","prototype"];Object.keys(t).filter((function(e){return n.indexOf(e)<0})).forEach((function(n){"undefined"===typeof e[n]?e[n]=t[n]:Rle(t[n])&&Rle(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:Ole(e[n],t[n]):e[n]=t[n]}))}function Dle(e){return void 0===e&&(e={}),e.navigation&&"undefined"===typeof e.navigation.nextEl&&"undefined"===typeof e.navigation.prevEl}function Lle(e){return void 0===e&&(e={}),e.pagination&&"undefined"===typeof e.pagination.el}function Ple(e){return void 0===e&&(e={}),e.scrollbar&&"undefined"===typeof e.scrollbar.el}function Fle(e){void 0===e&&(e="");var t=e.split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})),n=[];return t.forEach((function(e){n.indexOf(e)<0&&n.push(e)})),n.join(" ")}var jle=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function zle(e,t){var n=t.slidesPerView;if(t.breakpoints){var r=kle.prototype.getBreakpoint(t.breakpoints),a=r in t.breakpoints?t.breakpoints[r]:void 0;a&&a.slidesPerView&&(n=a.slidesPerView)}var i=Math.ceil(parseFloat(t.loopedSlides||n,10));return(i+=t.loopAdditionalSlides)>e.length&&(i=e.length),i}function Ble(e){var t=[];return E.Children.toArray(e).forEach((function(e){e.type&&"SwiperSlide"===e.type.displayName?t.push(e):e.props&&e.props.children&&Ble(e.props.children).forEach((function(e){return t.push(e)}))})),t}function Ule(e){var t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return E.Children.toArray(e).forEach((function(e){if(e.type&&"SwiperSlide"===e.type.displayName)t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){var r=Ble(e.props.children);r.length>0?r.forEach((function(e){return t.push(e)})):n["container-end"].push(e)}else n["container-end"].push(e)})),{slides:t,slots:n}}function Wle(e){var t,n,r,a,i,o=e.swiper,s=e.slides,u=e.passedParams,l=e.changedParams,c=e.nextEl,d=e.prevEl,h=e.scrollbarEl,p=e.paginationEl,f=l.filter((function(e){return"children"!==e&&"direction"!==e})),m=o.params,v=o.pagination,g=o.navigation,y=o.scrollbar,b=o.virtual,x=o.thumbs;l.includes("thumbs")&&u.thumbs&&u.thumbs.swiper&&m.thumbs&&!m.thumbs.swiper&&(t=!0),l.includes("controller")&&u.controller&&u.controller.control&&m.controller&&!m.controller.control&&(n=!0),l.includes("pagination")&&u.pagination&&(u.pagination.el||p)&&(m.pagination||!1===m.pagination)&&v&&!v.el&&(r=!0),l.includes("scrollbar")&&u.scrollbar&&(u.scrollbar.el||h)&&(m.scrollbar||!1===m.scrollbar)&&y&&!y.el&&(a=!0),l.includes("navigation")&&u.navigation&&(u.navigation.prevEl||d)&&(u.navigation.nextEl||c)&&(m.navigation||!1===m.navigation)&&g&&!g.prevEl&&!g.nextEl&&(i=!0);(f.forEach((function(e){if(Rle(m[e])&&Rle(u[e]))Ole(m[e],u[e]);else{var t=u[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?m[e]=u[e]:!1===t&&function(e){o[e]&&(o[e].destroy(),"navigation"===e?(m[e].prevEl=void 0,m[e].nextEl=void 0,o[e].prevEl=void 0,o[e].nextEl=void 0):(m[e].el=void 0,o[e].el=void 0))}(e)}})),f.includes("controller")&&!n&&o.controller&&o.controller.control&&m.controller&&m.controller.control&&(o.controller.control=m.controller.control),l.includes("children")&&b&&m.virtual.enabled?(b.slides=s,b.update(!0)):l.includes("children")&&o.lazy&&o.params.lazy.enabled&&o.lazy.load(),t)&&(x.init()&&x.update(!0));n&&(o.controller.control=m.controller.control),r&&(p&&(m.pagination.el=p),v.init(),v.render(),v.update()),a&&(h&&(m.scrollbar.el=h),y.init(),y.updateSize(),y.setTranslate()),i&&(c&&(m.navigation.nextEl=c),d&&(m.navigation.prevEl=d),g.init(),g.update()),l.includes("allowSlideNext")&&(o.allowSlideNext=u.allowSlideNext),l.includes("allowSlidePrev")&&(o.allowSlidePrev=u.allowSlidePrev),l.includes("direction")&&o.changeDirection(u.direction,!1),o.update()}function Vle(e,t){return"undefined"===typeof window?(0,E.useEffect)(e,t):(0,E.useLayoutEffect)(e,t)}var Zle=(0,E.createContext)(null),Hle=(0,E.createContext)(null),Gle=["className","tag","wrapperTag","children","onSwiper"];function qle(){return qle=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qle.apply(this,arguments)}var Xle=(0,E.forwardRef)((function(e,t){var n=void 0===e?{}:e,r=n.className,a=n.tag,i=void 0===a?"div":a,o=n.wrapperTag,s=void 0===o?"div":o,u=n.children,l=n.onSwiper,c=(0,qi.Z)(n,Gle),d=!1,h=(0,E.useState)("swiper"),p=(0,U.Z)(h,2),f=p[0],m=p[1],v=(0,E.useState)(null),g=(0,U.Z)(v,2),y=g[0],b=g[1],x=(0,E.useState)(!1),w=(0,U.Z)(x,2),k=w[0],S=w[1],T=(0,E.useRef)(!1),C=(0,E.useRef)(null),M=(0,E.useRef)(null),I=(0,E.useRef)(null),N=(0,E.useRef)(null),A=(0,E.useRef)(null),R=(0,E.useRef)(null),O=(0,E.useRef)(null),D=(0,E.useRef)(null),L=function(e){void 0===e&&(e={});var t={on:{}},n={},r={};Ole(t,kle.defaults),Ole(t,kle.extendedDefaults),t._emitClasses=!0,t.init=!1;var a={},i=jle.map((function(e){return e.replace(/_/,"")}));return Object.keys(e).forEach((function(o){i.indexOf(o)>=0?Rle(e[o])?(t[o]={},r[o]={},Ole(t[o],e[o]),Ole(r[o],e[o])):(t[o]=e[o],r[o]=e[o]):0===o.search(/on[A-Z]/)&&"function"===typeof e[o]?n["".concat(o[2].toLowerCase()).concat(o.substr(3))]=e[o]:a[o]=e[o]})),["navigation","pagination","scrollbar"].forEach((function(e){!0===t[e]&&(t[e]={}),!1===t[e]&&delete t[e]})),{params:t,passedParams:r,rest:a,events:n}}(c),P=L.params,F=L.passedParams,j=L.rest,z=L.events,B=Ule(u),W=B.slides,V=B.slots,Z=function(){S(!k)};Object.assign(P.on,{_containerClasses:function(e,t){m(t)}});var H=function(){if(Object.assign(P.on,z),d=!0,M.current=new kle(P),M.current.loopCreate=function(){},M.current.loopDestroy=function(){},P.loop&&(M.current.loopedSlides=zle(W,P)),M.current.virtual&&M.current.params.virtual.enabled){M.current.virtual.slides=W;var e={cache:!1,slides:W,renderExternal:b,renderExternalUpdate:!1};Ole(M.current.params.virtual,e),Ole(M.current.originalParams.virtual,e)}};C.current||H(),M.current&&M.current.on("_beforeBreakpoint",Z);return(0,E.useEffect)((function(){return function(){M.current&&M.current.off("_beforeBreakpoint",Z)}})),(0,E.useEffect)((function(){!T.current&&M.current&&(M.current.emitSlidesClasses(),T.current=!0)})),Vle((function(){if(t&&(t.current=C.current),C.current)return M.current.destroyed&&H(),function(e,t){var n=e.el,r=e.nextEl,a=e.prevEl,i=e.paginationEl,o=e.scrollbarEl,s=e.swiper;Dle(t)&&r&&a&&(s.params.navigation.nextEl=r,s.originalParams.navigation.nextEl=r,s.params.navigation.prevEl=a,s.originalParams.navigation.prevEl=a),Lle(t)&&i&&(s.params.pagination.el=i,s.originalParams.pagination.el=i),Ple(t)&&o&&(s.params.scrollbar.el=o,s.originalParams.scrollbar.el=o),s.init(n)}({el:C.current,nextEl:A.current,prevEl:R.current,paginationEl:O.current,scrollbarEl:D.current,swiper:M.current},P),l&&l(M.current),function(){M.current&&!M.current.destroyed&&M.current.destroy(!0,!1)}}),[]),Vle((function(){!d&&z&&M.current&&Object.keys(z).forEach((function(e){M.current.on(e,z[e])}));var e=function(e,t,n,r){var a=[];if(!t)return a;var i=function(e){a.indexOf(e)<0&&a.push(e)},o=r.map((function(e){return e.key})),s=n.map((function(e){return e.key}));return o.join("")!==s.join("")&&i("children"),r.length!==n.length&&i("children"),jle.filter((function(e){return"_"===e[0]})).map((function(e){return e.replace(/_/,"")})).forEach((function(n){if(n in e&&n in t)if(Rle(e[n])&&Rle(t[n])){var r=Object.keys(e[n]),a=Object.keys(t[n]);r.length!==a.length?i(n):(r.forEach((function(r){e[n][r]!==t[n][r]&&i(n)})),a.forEach((function(r){e[n][r]!==t[n][r]&&i(n)})))}else e[n]!==t[n]&&i(n)})),a}(F,I.current,W,N.current);return I.current=F,N.current=W,e.length&&M.current&&!M.current.destroyed&&Wle({swiper:M.current,slides:W,passedParams:F,changedParams:e,nextEl:A.current,prevEl:R.current,scrollbarEl:D.current,paginationEl:O.current}),function(){z&&M.current&&Object.keys(z).forEach((function(e){M.current.off(e,z[e])}))}})),Vle((function(){var e;!(e=M.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[y]),E.createElement(i,qle({ref:C,className:Fle("".concat(f).concat(r?" ".concat(r):""))},j),E.createElement(Hle.Provider,{value:M.current},V["container-start"],Dle(P)&&E.createElement(E.Fragment,null,E.createElement("div",{ref:R,className:"swiper-button-prev"}),E.createElement("div",{ref:A,className:"swiper-button-next"})),Ple(P)&&E.createElement("div",{ref:D,className:"swiper-scrollbar"}),Lle(P)&&E.createElement("div",{ref:O,className:"swiper-pagination"}),E.createElement(s,{className:"swiper-wrapper"},V["wrapper-start"],P.virtual?function(e,t,n){if(!n)return null;var r=e.isHorizontal()?(0,Pt.Z)({},e.rtlTranslate?"right":"left","".concat(n.offset,"px")):{top:"".concat(n.offset,"px")};return t.filter((function(e,t){return t>=n.from&&t<=n.to})).map((function(t){return E.cloneElement(t,{swiper:e,style:r})}))}(M.current,W,y):!P.loop||M.current&&M.current.destroyed?W.map((function(e){return E.cloneElement(e,{swiper:M.current})})):function(e,t,n){var r=t.map((function(t,n){return E.cloneElement(t,{swiper:e,"data-swiper-slide-index":n})}));function a(e,t,r){return E.cloneElement(e,{key:"".concat(e.key,"-duplicate-").concat(t,"-").concat(r),className:"".concat(e.props.className||""," ").concat(n.slideDuplicateClass)})}if(n.loopFillGroupWithBlank){var i=n.slidesPerGroup-r.length%n.slidesPerGroup;if(i!==n.slidesPerGroup)for(var o=0;o<i;o+=1){var s=E.createElement("div",{className:"".concat(n.slideClass," ").concat(n.slideBlankClass)});r.push(s)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=r.length);var u=zle(r,n),l=[],c=[];return r.forEach((function(e,t){t<u&&c.push(a(e,t,"prepend")),t<r.length&&t>=r.length-u&&l.push(a(e,t,"append"))})),e&&(e.loopedSlides=u),[].concat(l,(0,_.Z)(r),c)}(M.current,W,P),V["wrapper-end"]),V["container-end"]))}));Xle.displayName="Swiper";var Yle=["tag","children","className","swiper","zoom","virtualIndex"];function Kle(){return Kle=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kle.apply(this,arguments)}var Qle=(0,E.forwardRef)((function(e,t){var n=void 0===e?{}:e,r=n.tag,a=void 0===r?"div":r,i=n.children,o=n.className,s=void 0===o?"":o,u=n.swiper,l=n.zoom,c=n.virtualIndex,d=(0,qi.Z)(n,Yle),h=(0,E.useRef)(null),p=(0,E.useState)("swiper-slide"),f=(0,U.Z)(p,2),m=f[0],v=f[1];function g(e,t,n){t===h.current&&v(n)}Vle((function(){if(t&&(t.current=h.current),h.current&&u){if(!u.destroyed)return u.on("_slideClass",g),function(){u&&u.off("_slideClass",g)};"swiper-slide"!==m&&v("swiper-slide")}})),Vle((function(){u&&h.current&&!u.destroyed&&v(u.getSlideClasses(h.current))}),[u]);var y={isActive:m.indexOf("swiper-slide-active")>=0||m.indexOf("swiper-slide-duplicate-active")>=0,isVisible:m.indexOf("swiper-slide-visible")>=0,isDuplicate:m.indexOf("swiper-slide-duplicate")>=0,isPrev:m.indexOf("swiper-slide-prev")>=0||m.indexOf("swiper-slide-duplicate-prev")>=0,isNext:m.indexOf("swiper-slide-next")>=0||m.indexOf("swiper-slide-duplicate-next")>=0},b=function(){return"function"===typeof i?i(y):i};return E.createElement(a,Kle({ref:h,className:Fle("".concat(m).concat(s?" ".concat(s):"")),"data-swiper-slide-index":c},d),E.createElement(Zle.Provider,{value:y},l?E.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"===typeof l?l:void 0},b()):b()))}));Qle.displayName="SwiperSlide";var Jle=function(e){var t=e.open;return(0,xr.jsx)($o,{open:t,PaperProps:{style:{backgroundColor:"transparent",boxShadow:"none",height:300,width:300}},children:(0,xr.jsxs)("div",{style:{backgroundColor:"transparent",position:"relative",height:300,width:300,overflow:"hidden"},children:[(0,xr.jsx)(td,{size:300,color:"primary"}),(0,xr.jsx)("img",{src:"../assets/logo_icv_blanco.png",width:150,style:{position:"absolute",top:90,right:70}})]})})},$le=(0,E.forwardRef)((function(e,t){return(0,xr.jsx)(go,br({direction:"up",ref:t},e))})),ece=function(e){var t=e.open,n=e.handleClose,r=e.images,a=e.setIsEdited;console.log(r);var i=(0,E.useState)(),o=(0,U.Z)(i,2),s=o[0],u=o[1],l=(0,E.useState)(!1),c=(0,U.Z)(l,2),d=c[0],h=c[1],p=(0,E.useState)(r),f=(0,U.Z)(p,2),m=f[0],v=f[1],g=(0,E.useState)(),y=(0,U.Z)(g,2),b=y[0],x=y[1],w=function(e){document.getElementById("astChange").click(),x(e)},k=function(){var e=Jn(Kn().mark((function e(t){var n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return h(!0),e.next=4,Vn(t);case 4:n=e.sent,setTimeout((function(){n&&(b.image=n,h(!1),a(!0))}),1e3);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,xr.jsxs)($o,{fullScreen:!0,open:t,onClose:n,TransitionComponent:$le,adaptiveHeight:!0,children:[(0,xr.jsxs)(ks,{className:"dialog-content-ast",children:[(0,xr.jsxs)(Xle,{grabCursor:!0,effect:"creative",creativeEffect:{prev:{shadow:!0,translate:[0,0,-400]},next:{translate:["100%",0,0]}},zoom:!0,modules:[Ile,Tle,_le,Mle,Nle,Ale,Sle],spaceBetween:50,slidesPerView:1,navigation:!0,keyboard:{enabled:!0},style:{"--swiper-navigation-color":"#be2e26","--swiper-pagination-color":"#be2e26"},className:"mySwiper",pagination:{clickable:!0},onSwiper:function(e){return u(e.activeIndex)},onSlideChange:function(e){return u(e.activeIndex)},children:[m.map((function(e,t){return console.log(e),(0,xr.jsx)(Qle,{style:{height:"80vh",display:"block",width:"100%",textAlign:"center"},children:(0,xr.jsx)("div",{className:"swiper-zoom-container",children:(0,xr.jsx)("img",{src:e.image.length>0?e.image:e.imageUrl,style:{height:"85vh",textAlign:"center"}},t)})},t)})),(0,xr.jsx)("input",{autoComplete:"off",type:"file",id:"astChange",accept:"image/x-png,image/jpeg",onChange:function(e){k(e.target.files[0])},hidden:!0})]}),(0,xr.jsxs)("div",{style:{width:"100%",textAlign:"center",position:"absolute",bottom:10},children:[(0,xr.jsxs)(nl,{style:{backgroundColor:"#fff",borderStyle:"solid",borderWidth:1,borderColor:"green",color:"green",marginRight:10},onClick:function(){console.log(r[s]),w(r[s])},children:[(0,xr.jsx)(Hi,{style:{fontSize:30,marginRight:10},icon:Pr})," Cambiar AST"]}),(0,xr.jsxs)(nl,{style:{backgroundColor:"#fff",borderStyle:"solid",borderWidth:1,borderColor:"red",color:"red"},onClick:function(){!function(){h(!0),console.log(r);var e=r.splice(s,1);console.log(e),v(r),setTimeout((function(){h(!1),a(!0)}),1e3)}()},children:[(0,xr.jsx)(rl,{style:{fontSize:30,marginRight:10}})," Borrar AST"]})]})]}),(0,xr.jsx)(ms,{style:{position:"absolute",zIndex:2,top:20,right:20,backgroundColor:"#fff"},onClick:n,children:(0,xr.jsx)(rl,{})}),(0,xr.jsx)(Jle,{open:d})]})},tce=n(173),nce=(0,ju.Z)(E.createElement("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),rce=(0,E.forwardRef)((function(e,t){return(0,xr.jsx)(go,br({direction:"up",ref:t},e))})),ace=function(e){var t=e.handleClickOpen,n=e.open,r=e.handleClose,a=e.message,i=e.inputMessage,o=e.saveMessage;return setTimeout((function(){document.getElementById("textField").focus()}),100),(0,xr.jsxs)("div",{children:[(0,xr.jsx)(nl,{variant:"outlined",onClick:t,children:"Open full-screen dialog"}),(0,xr.jsxs)($o,{fullScreen:!0,open:n,onClose:r,TransitionComponent:rce,children:[(0,xr.jsx)(ms,{style:{position:"absolute",top:20,left:20,backgroundColor:"#fff"},onClick:r,children:(0,xr.jsx)(rl,{})}),(0,xr.jsxs)(ms,{style:{position:"absolute",top:20,right:20,backgroundColor:"#fff"},onClick:function(){o(),r()},children:["Enviar ",(0,xr.jsx)(nce,{})]}),(0,xr.jsx)("div",{style:{padding:30,textAlign:"center",height:"100vh"},children:(0,xr.jsx)(Ju,{style:{width:"70%"},id:"textField",value:a,onChange:function(e){i(e.target.value)}})})]})]})},ice=(0,E.forwardRef)((function(e,t){return(0,xr.jsx)(go,br({direction:"up",ref:t},e))})),oce=function(e){var t=e.open,n=e.handleClose,r=e.item,a=e.index,i=e.executionReport,o=e.gruposKeys,s=(e.indexActivity,e.indexGroup),u=e.save,l=(e.setChecks,e.canEdit),c=bce(),d=c.userData,h=c.admin,p=(c.isOperator,c.isSapExecutive,c.isShiftManager,c.isChiefMachinery,qce().usersFilteredBySite),f=Pce().report,m=Nce().isOnline,v=(0,E.useState)(""),g=(0,U.Z)(v,2),y=g[0],b=g[1],x=(0,E.useState)([]),w=(0,U.Z)(x,2),k=w[0],S=w[1],T=(0,E.useState)(),C=(0,U.Z)(T,2),M=C[0],I=C[1],N=(0,E.useState)(!1),A=(0,U.Z)(N,2),R=A[0],O=A[1],D=(0,E.useState)(!1),L=(0,U.Z)(D,2),P=L[0],F=L[1],j=(0,E.useState)(""),z=(0,U.Z)(j,2),B=z[0],W=z[1],V=(0,E.useState)(!1),Z=(0,U.Z)(V,2),H=Z[0],G=(Z[1],(0,E.useState)(!1)),q=(0,U.Z)(G,2),X=q[0],Y=q[1],K=(0,E.useState)(!1),Q=(0,U.Z)(K,2),J=Q[0],$=Q[1],ee=(0,E.useState)([]),te=(0,U.Z)(ee,2),ne=te[0],re=te[1],ae=(0,E.useState)(!1),ie=(0,U.Z)(ae,2),oe=(ie[0],ie[1]),se=(0,E.useState)(0),ue=(0,U.Z)(se,2),le=ue[0],ce=ue[1],de=(0,E.useState)(),he=(0,U.Z)(de,2),pe=he[0],fe=he[1],me=(0,E.useState)(!1),ve=(0,U.Z)(me,2),ge=(ve[0],ve[1]);(0,E.useEffect)((function(){console.log(f)}),[f]),(0,E.useEffect)((function(){if(o.map((function(e,t){e.data===s&&fe(t)})),i&&i.astList&&re(i.astList),I(r.unidadData),r.messages){var e=[];r.messages.forEach(function(){var t=Jn(Kn().mark((function t(n,a){var i;return Kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=p.filter((function(e){if(e._id===n.user)return e}))[0],console.log(i),n.name=i?"".concat(i.name," ").concat(i.lastName):"User Test",n.urlBase64&&e.push(n),a==r.messages.length-1&&(ce(e.length+1),S(r.messages));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),setTimeout((function(){document.getElementById("commits").scrollTop=document.getElementById("commits").scrollHeight}),100)}}),[]),(0,E.useEffect)((function(){if(k.length>0){var e=!1,t=!1;(0,_.Z)(k).forEach(function(){var n=Jn(Kn().mark((function n(a,i){return Kn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(a.urlBase64||a.urlImageMessage)&&(t=!0),"Se indica estado ejecutado sin dejar mensajes"===a.content||(e=!0),i===k.length-1&&(r.haveMessage=e,r.haveClip=t);case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()),b(""),setTimeout((function(){document.getElementById("commits").scrollTop=document.getElementById("commits").scrollHeight}),50)}}),[k]);var ye=function(e){b(e)},be=function(){var e=Jn(Kn().mark((function e(t){var n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}return e.next=3,Vn(t);case 3:if(n=e.sent,!m){e.next=12;break}return e.next=7,Mn(t,"".concat((new Date).getFullYear(),"/").concat(f.idIndex,"/").concat(s,"/").concat(Date.now()),"reports-test");case 7:r=e.sent,console.log(r.data.data.url),xe(n,"Imagen ".concat(Date.now()),r.data.data.url),e.next=13;break;case 12:xe(n,"Imagen ".concat(Date.now()),null);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Jn(Kn().mark((function e(t,n,i){var o,s,u,l;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(y.length>0||n)&&(o=le,t&&(r.haveClip=!0,ce(o+=1)),s=n||y,u={id:Date.now(),namePicture:i?"".concat(pe,"_Tarea_").concat(a+1,"_Foto_").concat(o):null,content:s,name:"".concat(d.name," ").concat(d.lastName),user:d._id,urlBase64:t,urlImageMessage:i},(l=(0,_.Z)(k)).push(u),S(l));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),we=function(e,t,r){r.messages=k,ge(!1),"*"!==r.unidad?M?(r.unidadData=M,u(e,t,r),i.offLineGuard=Date.now(),n()):alert("Debe ingresar el total utilizado. Si no utiliz\xf3 insumo o repuesto solicitado debe ingresar 0"):k.length>0?(u(e,t,r),i.offLineGuard=Date.now(),n()):alert("Debe dejar un comentario")};return(0,xr.jsxs)($o,{open:t,TransitionComponent:ice,keepMounted:!0,disableEscapeKeyDown:!0,"aria-describedby":"alert-dialog-slide-description",children:[(0,xr.jsx)("div",{style:{position:"absolute",right:50,top:10},children:(0,xr.jsx)(ms,{onClick:function(){n()},style:{position:"fixed"},children:(0,xr.jsx)(rl,{})})}),(0,xr.jsx)(xs,{style:{marginTop:30},children:r.taskdesc}),(0,xr.jsx)(ks,{children:(0,xr.jsxs)(Es,{id:"alert-dialog-slide-description",style:{whiteSpace:"pre-line"},children:[r.obs01," ",(0,xr.jsx)("br",{})]})}),"*"!==r.unidad&&(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xl:3,children:(0,xr.jsxs)("div",{style:{marginLeft:24,marginBottom:16},children:[(0,xr.jsx)("h3",{children:"Total utilizado"}),(0,xr.jsx)(Ju,{id:"standard-basic",label:r.unidad,variant:"standard",type:"number",value:M,onChange:function(e){!function(e){I(e)}(e.target.value)}})]})}),(0,xr.jsx)(Ns,{item:!0,xl:2,lg:2,md:2,sm:2,children:(0,xr.jsx)("div",{children:(0,xr.jsxs)("p",{children:["Nro Parte: ",r.partnumberUtl]})})}),(0,xr.jsx)(Ns,{item:!0,xl:4,lg:4,md:4,sm:4,children:(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xl:6,lg:6,md:6,sm:6,children:(0,xr.jsx)("div",{children:(0,xr.jsxs)("p",{children:["Cant. Utilizar: ",(0,xr.jsx)("br",{})," ",r.cantidad," ",r.unidad]})})}),(0,xr.jsx)(Ns,{item:!0,xl:6,lg:6,md:6,sm:6,children:(0,xr.jsx)("div",{children:(0,xr.jsxs)("p",{children:["Tipo Rpto: ",r.idtypeutlPartnumber]})})})]})})]}),(0,xr.jsx)("div",{style:{paddingLeft:24,paddingRight:24,marginBottom:50},children:(0,xr.jsxs)("div",{style:{width:"100%",height:250,borderWidth:2,borderStyle:"solid",borderColor:"#ccc",borderRadius:20,position:"relative"},children:[(0,xr.jsxs)("div",{id:"commits",style:{width:"100%",height:190,overflowY:"auto",scrollBehavior:"smooth"},children:[0===k.length&&(0,xr.jsx)("p",{children:"No hay mensajes"}),k.map((function(e,t){return console.log(e),(0,xr.jsxs)("div",{style:{position:"relative",color:"#555",padding:5,margin:5,borderRadius:20,borderWidth:2,borderStyle:"solid",borderColor:"#dddddd",backgroundColor:"#F5F5F5"},children:[(d._id===e.user&&l||h)&&(0,xr.jsx)(ms,{onClick:function(){!function(e){if(confirm("\xbfConfirma borrar el mensaje?")){ge(!0);var t=[];k.forEach((function(n,a){if(e===a||t.push(n),a===k.length-1)if(S(t),r.messages=t,0===r.messages.length)r.haveMessage=!1,r.haveClip=!1;else{var i=!1,o=!1;r.messages.forEach((function(e,t){console.log(e),"Se indica estado ejecutado sin dejar mensajes"===e.content||(o=!0),(e.urlBase64||e.urlImageMessage)&&(i=!0),console.log("Clip",i),t===r.messages.length-1&&(r.haveClip=i,r.haveMessage=o)}))}}))}}(t)},style:{position:"absolute",top:10,right:10},children:(0,xr.jsx)(rl,{style:{fontSize:14,color:"black"}})}),(0,xr.jsx)("p",{style:{marginBottom:0,fontSize:10},children:(0,xr.jsx)("strong",{children:e.name})}),(e.urlBase64||e.urlImageMessage)&&(0,xr.jsx)("img",{src:e.urlBase64?e.urlBase64:e.urlImageMessage,height:70,onClick:function(){return function(e){W(e),O(!0)}(e.urlBase64.length>0?e.urlBase64:e.urlImageMessage)}}),(0,xr.jsx)("p",{style:{marginBottom:20,whiteSpace:"pre-line"},children:e.content}),(0,xr.jsx)("p",{style:{position:"absolute",fontSize:10,right:5,bottom:0},children:Jt(e.id)})]},t)}))]}),(0,xr.jsx)("div",{style:{width:"100%",height:50,borderTopWidth:2,borderTopStyle:"solid",borderTopColor:"#ccc",position:"absolute",bottom:0,left:0,paddingLeft:10,paddingRight:10},children:(0,xr.jsxs)("form",{children:[l&&(0,xr.jsxs)("div",{style:{width:"70%",float:"left"},children:[!tce.tq&&(0,xr.jsx)("textarea",{disabled:!l,value:y,placeholder:"Ingrese comentarios",type:"text",style:{width:"100%",borderColor:"transparent",resize:"none"},onChange:function(e){ye(e.target.value)}}),tce.tq&&(0,xr.jsx)("textarea",{disabled:!l,id:"mobileTextArea",value:y,placeholder:"Ingrese comentarios",type:"text",style:{width:"100%",borderColor:"transparent",resize:"none"},onChange:function(e){console.log(e.target.value)},onClick:function(){Y(!0),document.getElementById("mobileTextArea").blur()}})]}),(0,xr.jsxs)("div",{style:{width:"30%",float:"right",textAlign:"right"},children:[l&&(0,xr.jsx)(ms,{onClick:function(){document.getElementById("foto").click(),oe(!1)},children:(0,xr.jsx)(Hi,{icon:Pr})}),l&&(0,xr.jsx)(ms,{onClick:function(){return xe()},children:(0,xr.jsx)(Hi,{icon:kr})}),(0,xr.jsx)("input",{autoComplete:"off",type:"file",id:"foto",accept:"image/x-png,image/jpeg",onChange:function(e){be(e.target.files[0])},hidden:!0})]})]})})]})}),l&&(0,xr.jsxs)(el,{style:{minWidth:400},children:[(0,xr.jsx)(nl,{style:{backgroundColor:"#D5CC41",color:"#fff"},onClick:function(){we(a,!1,r)},children:"Guardar sin ejecutar"}),(0,xr.jsx)(nl,{style:{backgroundColor:"#9ACF26",color:"#fff"},onClick:function(){we(a,!0,r)},children:"Guardar ejecutado"})]}),R&&(0,xr.jsx)(kue,{open:R,image:B,handleClose:function(){O(!1)}}),P&&(0,xr.jsx)(ece,{open:P,images:ne,handleClose:function(){F(!1)},setIsEdited:ge}),X&&(0,xr.jsx)(ace,{open:X,handleClose:function(){Y(!1)},saveMessage:xe,message:y,inputMessage:ye}),H&&(0,xr.jsx)(nd,{open:H,withProgress:!1,loadingData:"Cargando im\xe1gen"}),J&&(0,xr.jsx)(vK,{open:J,handleClose:function(){$(!1)},astList:ne})]})},sce=(0,E.forwardRef)((function(e,t){return(0,xr.jsx)(go,br({direction:"up",ref:t},e))})),uce=function(e){var t=e.handleClickOpen,n=e.open,r=e.handleClose,a=e.report,i=Be();return(0,xr.jsxs)("div",{children:[(0,xr.jsx)(nl,{variant:"outlined",onClick:t,children:"Open full-screen dialog"}),(0,xr.jsxs)($o,{open:n,onClose:r,TransitionComponent:sce,children:[(0,xr.jsx)(ms,{style:{position:"absolute",top:20,right:20,backgroundColor:"#fff"},onClick:r,children:(0,xr.jsx)(rl,{})}),(0,xr.jsxs)("div",{style:{padding:30,textAlign:"center",height:"50vh"},children:[(0,xr.jsxs)("h1",{children:["N\xb0 de OT: ",a.idIndex]}),(0,xr.jsxs)("h2",{children:["N\xb0 SAP",a.sapId]}),(0,xr.jsxs)("h3",{children:["Tipo de reporte: ",a.reportType]}),(0,xr.jsxs)("h3",{children:["Pauta: ",a.guide]}),a.testMode&&(0,xr.jsx)("p",{style:{width:"100%",backgroundColor:"red",color:"white"},children:"OT creada para testing."}),(0,xr.jsx)("div",{style:{textAlign:"justify"},children:(0,xr.jsxs)("p",{children:["Fecha programado: ",Jt(a.datePrev),(0,xr.jsx)("br",{}),"Fecha de inicio: ",Jt(a.dateInit),(0,xr.jsx)("br",{}),"Fecha \xfaltima actualizaci\xf3n: ",Jt(a.updatedAt)]})}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,xr.jsx)("button",{onClick:function(){return i("/assignment/".concat(a.idIndex))},children:"Abrir reporte"})})]})]})]})},lce=(0,E.forwardRef)((function(e,t){return(0,xr.jsx)(go,br({direction:"up",ref:t},e))})),cce=function(e){var t=e.open,n=e.report,r=e.closeModal,a=e.reportType,i=e.onlyClose,o=bce(),s=(o.admin,o.userData),u=qce(),l=u.inspectors,c=u.maitenances,d=Kce().sites,h=Oce().saveReport,p=(0,E.useState)([]),f=(0,U.Z)(p,2),m=f[0],v=f[1],g=(0,E.useState)(),y=(0,U.Z)(g,2),b=y[0],x=y[1],w=n.idIndex,k=n.guide,S=n.state,T=n.usersAssigned,C=n.site,_=(0,E.useState)(!1),M=(0,U.Z)(_,2),I=M[0],N=(M[1],(0,E.useState)("")),A=(0,U.Z)(N,2),R=A[0],O=(A[1],(0,E.useState)(!1)),D=(0,U.Z)(O,2),L=D[0],P=D[1],F=(0,E.useState)(),j=(0,U.Z)(F,2),z=(j[0],j[1]),B=(0,E.useState)(!0),W=(0,U.Z)(B,2),V=W[0],Z=W[1],H=(0,E.useState)(""),G=(0,U.Z)(H,2),q=G[0],X=G[1],Y=(0,E.useState)(""),K=(0,U.Z)(Y,2);K[0],K[1];(0,E.useEffect)((function(){t&&(Q(),v("Inspecci\xf3n"===a?l.sort((function(e,t){return e.name<t.name?-1:e.mane>t.name?1:0})):c.sort((function(e,t){return e.name<t.name?-1:e.mane>t.name?1:0}))))}),[t]),(0,E.useEffect)((function(){m&&m.length>0&&Z(!1)}),[m]),(0,E.useEffect)((function(){console.log(n)}),[n]);var Q=function(){console.log(d);var e=d.filter((function(e){if(C===e.idobra)return e}));X(e[0].descripcion)},J=function(){var e=Jn(Kn().mark((function e(t){var r,a,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=15;break}if(r=m.filter((function(e){if(t===e._id)return e}))[0],!window.confirm("Confirme que asignar\xe1 a ".concat(r.name," ").concat(r.lastName," a la OT ").concat(n.idIndex))){e.next=15;break}if(!(a=n).usersAssigned){e.next=14;break}return i=a.usersAssigned,console.log(i),i&&i.length>0?(i.find((function(e,n){e===t&&i.splice(n,1)})),i.unshift(t)):i.push(t),a.usersAssigned=i,a.state="En proceso",a.level=0,e.next=13,h(a);case 13:gc("nueva-asignacion","".concat(s._id),t,"Asignaciones","Se ha asignado nueva OT","OT ".concat(a.idIndex," asignada a usted"),"/assignment",n._id);case 14:$();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){L?r():i()};return(0,E.useEffect)((function(){z(T[0]),P(!1),"Asignar"===S?x("#DE4343"):"En proceso"===S?x("#F2994A"):"Por cerrar"===S?x("#F2C94C"):"Completadas"===S&&x("#27AE60")}),[k]),(0,xr.jsx)($o,{open:t,TransitionComponent:lce,adaptiveHeight:!0,children:(0,xr.jsxs)("div",{style:{padding:30},children:[(0,xr.jsxs)(xK,{style:{width:"100%",height:70,paddingLeft:0},children:[(0,xr.jsxs)("h2",{children:["Asignar Pauta de ",(0,xr.jsx)("br",{})," ",a," ",k]}),(0,xr.jsx)("div",{style:{position:"absolute",right:0,backgroundColor:b,paddingTop:3,borderRadius:5,width:100,height:20,textAlign:"center"},children:(0,xr.jsx)("p",{style:{margin:0,fontSize:12},children:S.toUpperCase()})})]}),(0,xr.jsxs)("div",{style:{width:"100%",height:90},children:[(0,xr.jsxs)("div",{style:{width:"calc(100%/3)",float:"left",display:"block",margin:0},children:[(0,xr.jsx)("strong",{children:"Faena:"})," ",(0,xr.jsx)("br",{}),q]}),(0,xr.jsxs)("div",{style:{width:"calc(100%/3)",float:"left"},children:[(0,xr.jsx)("strong",{children:"N\xfamero de orden:"})," ",(0,xr.jsx)("br",{}),w]}),(0,xr.jsxs)("div",{style:{width:"calc(100%/3)",float:"left",display:"block",margin:0},children:[(0,xr.jsx)("strong",{children:"Pauta:"})," ",(0,xr.jsx)("br",{}),k]})]}),(0,xr.jsx)("div",{style:{width:"100%",height:59},children:I&&(0,xr.jsxs)("div",{style:{width:"calc(100%/3)",float:"left"},children:[(0,xr.jsx)("strong",{children:R})," ",(0,xr.jsx)("br",{})]})}),(0,xr.jsxs)(ou,{fullWidth:!0,children:[(0,xr.jsx)(ru,{children:"Asignar Pauta a:"}),(0,xr.jsxs)(Yu,{value:"Asignar"===n.state?null:T[0],onChange:function(e){J(e.target.value)},label:"Asignar Pauta a:",disabled:V,children:[(0,xr.jsx)(kse,{style:{fontSize:15},children:V?"Leyendo operarios. Espere...".toUpperCase():"Seleccionar operario".toUpperCase()}),m.map((function(e,t){if(e.obras[0].idobra===C)return(0,xr.jsx)(kse,{style:{fontSize:15},value:e._id,children:"".concat(e.name," ").concat(e.lastName).toUpperCase()},t)}))]})]}),(0,xr.jsx)(dd,{onClick:$,style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,xr.jsx)(rl,{style:{color:"#ccc"}})})]})})},dce=(0,E.forwardRef)((function(e,t){return(0,xr.jsx)(go,br({direction:"left",ref:t},e))})),hce=function(e){var t=e.open,n=e.report,r=e.onlyClose,a=(0,E.useContext)(gce).admin,i=Pce().setReport,o=(0,E.useState)(),s=(0,U.Z)(o,2),u=s[0],l=s[1],c=n.idIndex,d=n.guide,h=n.state,p=n.siteName,f=n.usersAssigned,m=n.sapId,v=(0,E.useState)(""),g=(0,U.Z)(v,2),y=g[0],b=g[1],x=(0,E.useState)(""),w=(0,U.Z)(x,2),k=w[0],S=w[1],T=(0,E.useState)(""),C=(0,U.Z)(T,2),_=C[0],M=C[1],I=(0,E.useState)(""),N=(0,U.Z)(I,2),A=N[0],R=N[1],O=(0,E.useState)(!1),D=(0,U.Z)(O,2),L=(D[0],D[1]),P=(0,E.useState)(!1),F=(0,U.Z)(P,2),j=F[0],z=F[1],B=(0,E.useState)(m),W=(0,U.Z)(B,2),V=W[0],Z=W[1],H=Be();(0,E.useEffect)((function(){G()}),[n]);var G=function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fr(n.chiefMachineryApprovedBy).then((function(e){M(e)})),fr(n.shiftManagerApprovedBy).then((function(e){S(e)})),fr(n.sapExecutiveApprovedBy).then((function(e){R(e)})),console.log(f[0]),fn(f[0]).then((function(e){var t=e.data;t&&b(t.name+" "+t.lastName)})),"Asignar"===h?l("#DE4343"):"En proceso"===h?l("#F2994A"):"Por cerrar"===h?l("#F2C94C"):"Completadas"===h&&l("#27AE60");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){z(!j)},X=function(){var e=Jn(Kn().mark((function e(){var t,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(V.length<1)){e.next=4;break}alert("Debe agregar alg\xfan n\xfamero SAP"),e.next=15;break;case 4:return e.prev=4,t={_id:n._id,sapId:V},e.next=8,bn(t);case 8:r=e.sent,console.log(r),r&&(n.sapId=V,q()),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(4);case 15:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}();return(0,xr.jsx)($o,{open:t,TransitionComponent:dce,adaptiveHeight:!0,maxWidth:"xl",children:(0,xr.jsxs)("div",{style:{padding:30,width:800},children:[(0,xr.jsxs)(xK,{style:{width:"100%",height:59,paddingLeft:0},children:[(0,xr.jsxs)("h2",{children:["Mantenci\xf3n"===n.reportType?"Pauta de ".concat(n.reportType):""," ",d," SAP ",m||"N/A"]}),(0,xr.jsx)("div",{style:{position:"absolute",right:65,backgroundColor:u,paddingTop:3,borderRadius:5,width:100,height:20,textAlign:"center"},children:(0,xr.jsx)("p",{style:{margin:0,fontSize:12},children:h.toUpperCase()})})]}),(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsxs)(Ns,{item:!0,xs:12,sm:12,md:4,lg:4,children:[(0,xr.jsx)("strong",{children:"Faena:"})," ",(0,xr.jsx)("br",{}),p]}),(0,xr.jsxs)(Ns,{item:!0,xs:12,sm:12,md:4,lg:4,children:[(0,xr.jsx)("strong",{children:"N\xfamero de orden:"})," ",(0,xr.jsx)("br",{}),c]}),(0,xr.jsxs)(Ns,{item:!0,xs:12,sm:12,md:4,lg:4,children:[(0,xr.jsx)("strong",{children:"ID de SAP:"})," ",(0,xr.jsx)("br",{}),(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,children:j?(0,xr.jsx)("input",{onChange:function(e){return Z(e.target.value)},value:V}):V||"N/A"}),(0,xr.jsx)(Ns,{item:!0,children:j?(0,xr.jsx)("button",{style:{marginLeft:10},children:(0,xr.jsx)(Hi,{icon:Sr,onClick:X})}):(0,xr.jsx)("button",{style:{marginLeft:10},onClick:q,children:(0,xr.jsx)(Hi,{icon:Vr})})})]})]})]}),(0,xr.jsx)(Ns,{container:!0,children:(0,xr.jsx)(Ns,{item:!0,xs:12,sm:12,md:4,lg:4,children:(0,xr.jsxs)("div",{style:{marginTop:30,width:"100%"},children:[(0,xr.jsx)("strong",{children:"Pauta:"})," ",(0,xr.jsx)("br",{}),d]})})}),(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,md:6,xs:12,sm:12,lg:6,children:(0,xr.jsxs)("div",{style:{marginTop:30,width:"100%"},children:[(0,xr.jsx)("div",{style:{width:"100%",height:59},children:(0,xr.jsxs)("label",{children:["Pauta asignada a: ",(0,xr.jsx)("b",{children:y||"No encontrado"})]})}),(0,xr.jsx)("div",{style:{width:"100%",height:59},children:(0,xr.jsxs)("label",{children:["Jefe de turno revisor: ",(0,xr.jsx)("b",{children:k.length>1?k:"No encontrado"})]})}),(0,xr.jsx)("div",{style:{width:"100%",height:59},children:(0,xr.jsxs)("label",{children:["Jefe de maquinaria revisor: ",(0,xr.jsx)("b",{children:_.length>1?_:"No encontrado"})]})}),(0,xr.jsx)("div",{style:{width:"100%",height:59},children:(0,xr.jsxs)("label",{children:["Ejecutivo SAP revisor: ",(0,xr.jsx)("b",{children:A.length>1?A:"No encontrado"})]})})]})}),(0,xr.jsx)(Ns,{item:!0,children:(0,xr.jsxs)("div",{style:{marginTop:30,width:"100%"},children:[(0,xr.jsx)("div",{style:{width:"100%",height:59},children:(0,xr.jsxs)("label",{children:["Creado: ",(0,xr.jsx)("b",{children:Jt(n.createdAt)})]})}),(0,xr.jsx)("div",{style:{width:"100%",height:59},children:(0,xr.jsxs)("label",{children:["Inicio: ",(0,xr.jsx)("b",{children:"Sin informaci\xf3n"===Jt(n.dateInit)?"No inicado":Jt(n.dateInit)})]})}),(0,xr.jsx)("div",{style:{width:"100%",height:59},children:(0,xr.jsxs)("label",{children:["Finalizado: ",(0,xr.jsx)("b",{children:"Sin informaci\xf3n"===Jt(n.endReport)?"No finalizado":Jt(n.endReport)})]})}),(0,xr.jsx)("div",{style:{width:"100%",height:59},children:(0,xr.jsxs)("label",{children:["Cerrado: ",(0,xr.jsx)("b",{children:"Sin informaci\xf3n"===Jt(n.dateClose)?"No cerrado":Jt(n.dateClose)})]})})]})}),(0,xr.jsx)("div",{style:{width:"100%",textAlign:"right"}})]}),(0,xr.jsxs)(Ns,{container:!0,children:[(0,xr.jsx)(Ns,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:(0,xr.jsx)("div",{style:{padding:10},children:(0,xr.jsxs)("button",{style:{height:50,width:"100%",backgroundColor:"green",color:"#fff",fontSize:20},onClick:function(){i(n),H("/assignment/".concat(c))},children:[" ",(0,xr.jsxs)("strong",{children:[" ",(0,xr.jsx)(Hi,{icon:wr})," Revisar OT ",c," "]})," "]})})}),(0,xr.jsx)(Ns,{item:!0,xl:6,lg:6,md:6,sm:12,xs:12,children:a&&(0,xr.jsx)("div",{style:{padding:10},children:(0,xr.jsxs)("button",{style:{height:50,width:"100%",backgroundColor:"red",color:"#fff",fontSize:20},onClick:function(){confirm("Se borrar\xe1 la OT ".concat(n.idIndex,". Su eliminaci\xf3n ser\xe1 permanente. \xbfDesea continuar?"))&&(L(!0),n.deleted=!0,yn(n).then((function(){L(!1),location.reload()})))},children:[" ",(0,xr.jsxs)("strong",{children:[" ",(0,xr.jsx)(Hi,{icon:Qr})," Borrar OT ",c," "]})," "]})})})]}),(0,xr.jsx)(dd,{onClick:r,style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,xr.jsx)(rl,{style:{color:"#ccc"}})})]})})},pce=function(e){var t=e.openSign,n=e.setRefCanvasFunction,r=e.getImage,a=e.clear;return(0,xr.jsx)($o,{open:t,adaptiveHeight:!0,maxWidth:"xl",children:(0,xr.jsxs)("div",{style:{width:400,padding:30},children:[(0,xr.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,xr.jsx)("h2",{children:"Para continuar deje su firma para la documentaci\xf3n. (Obligatorio)"})}),(0,xr.jsxs)("div",{style:{width:"100%",textAlign:"center",position:"relative"},children:[(0,xr.jsx)("div",{style:{position:"absolute",width:"100%",textAlign:"right",marginTop:10,paddingRight:30},children:(0,xr.jsx)(Hi,{size:"lg",icon:Vr,color:"#333"})}),(0,xr.jsx)(yue,{disabled:!0,width:300,height:300,setRefCanvas:n})]}),(0,xr.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[(0,xr.jsx)("div",{style:{width:"50%",textAlign:"center",float:"left"},children:(0,xr.jsxs)(nl,{onClick:function(){return a()},style:{borderStyle:"solid",borderWidth:1,borderColor:"#333",borderRadius:10},children:[(0,xr.jsx)(Hi,{size:"lg",icon:Rr,color:"#333",style:{marginRight:10}})," Borrar"]})}),(0,xr.jsx)("div",{style:{width:"50%",textAlign:"center",float:"right"},children:(0,xr.jsxs)(nl,{onClick:function(){return r()},style:{borderStyle:"solid",borderWidth:1,borderColor:"#333",borderRadius:10},children:[(0,xr.jsx)(Hi,{size:"lg",icon:Hr,color:"#333",style:{marginRight:10}})," Guardar"]})})]})]})})},fce=function(e){var t=e.open,n=e.report,r=e.closeModal,a=e.messageType,i=bce().userData,o=(0,E.useState)(""),s=(0,U.Z)(o,2),u=s[0],l=s[1];(0,E.useEffect)((function(){console.log(n)}),[n]);return(0,xr.jsx)($o,{open:t,children:(0,xr.jsxs)("div",{style:{padding:30,width:600},children:[(0,xr.jsxs)(Ns,{container:!0,style:{padding:10},children:[(0,xr.jsxs)("div",{style:{width:"100%"},children:[(0,xr.jsx)("h1",{children:"Deje un comentario."}),(0,xr.jsx)("br",{}),(0,xr.jsx)(zs,{"aria-label":"empty textarea",placeholder:"Deje su comentario",minRows:10,maxRows:15,style:{width:"100%",fontSize:18,fontFamily:"Raleway"},value:u,onChange:function(e){l(e.target.value)}})]}),(0,xr.jsx)("br",{}),(0,xr.jsx)("br",{}),(0,xr.jsx)(nl,{variant:"contained",color:"primary",style:{borderRadius:50},onClick:function(){!function(){if(u.length>1){var e="rejectReport"===a?"reject-to-previous-level":"sending-to-next-level";n.history.push({id:Date.now(),userSendingData:i._id,type:e,message:u}),r(!0)}else alert("Por favor deje un comentario a la actividad.")}()},children:"Enviar Mensaje"})]}),(0,xr.jsx)(dd,{onClick:function(){r(!1)},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,xr.jsx)(rl,{style:{color:"#ccc"}})})]})})},mce=function(e){var t=e.open,n=e.data,r=e.closePreviewModal;return console.log(n),(0,xr.jsx)($o,{open:t,children:(0,xr.jsxs)("div",{style:{width:600,padding:10},children:[(0,xr.jsx)("div",{children:(0,xr.jsx)("h2",{children:"Resumen de Insumos y Materiales"})}),(0,xr.jsx)("div",{style:{height:"calc(100vh - 290px)",overflowY:"auto",borderColor:"#ccc",borderWidth:1,borderStyle:"solid",borderRadius:20,padding:10,marginTop:50},children:0===n.length?(0,xr.jsx)("div",{children:(0,xr.jsx)("h3",{children:(0,xr.jsx)("strong",{children:"OT no registra uso de insumos y materiales para resumir"})})}):n.map((function(e,t){return(0,xr.jsxs)("div",{style:{width:"100%"},children:[(0,xr.jsx)("h2",{children:e.nombre}),e.data.map((function(e,t){return(0,xr.jsxs)("div",{style:{fontSize:16,marginLeft:20,borderBottomColor:"#ccc",borderBottomWidth:1,borderBottomStyle:"solid"},children:[(0,xr.jsx)("p",{children:(0,xr.jsx)("strong",{children:e.taskdesc})}),(0,xr.jsxs)("p",{children:["Observaci\xf3n:",(0,xr.jsx)("br",{}),(0,xr.jsx)("strong",{children:e.obs01})]}),(0,xr.jsxs)("p",{children:["Unidad de medida: ",(0,xr.jsx)("strong",{children:e.unidad})]}),(0,xr.jsxs)("p",{children:["Cantidad proyectada: ",(0,xr.jsx)("strong",{children:e.cantidad})]}),(0,xr.jsxs)("p",{children:["Cantidad usada: ",(0,xr.jsx)("strong",{children:e.unidadData})]}),(0,xr.jsxs)("p",{children:["Diferencia: ",(0,xr.jsx)("strong",{children:e.diferencia})]})]},t)}))]},t)}))}),(0,xr.jsx)(dd,{onClick:r,style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,xr.jsx)(rl,{style:{color:"#ccc"}})})]})})},vce=function(e){var t=e.open,n=e.close,r=e.report,a=(bce().userData,(0,E.useState)([])),i=(0,U.Z)(a,2),o=i[0],s=i[1];return(0,E.useEffect)((function(){r.history.forEach(function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.onLine){e.next=6;break}return e.next=3,fr(t.userSendingData);case 3:t.name=e.sent,e.next=7;break;case 6:t.name="Sin informaci\xf3n (fuera de red)";case 7:n==r.history.length-1&&s(r.history.sort((function(e,t){return t.id-e.id})));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),[]),(0,xr.jsx)($o,{open:t,maxWidth:"xl",adaptiveHeight:!0,children:(0,xr.jsxs)("div",{style:{width:800,padding:10},children:[(0,xr.jsx)("h1",{children:"Mensajes a las revisiones de la OT"}),(0,xr.jsxs)("div",{style:{width:"100%",overflowY:"auto",height:"calc(100vh - 300px)"},children:[0==o.length&&(0,xr.jsx)("p",{children:"No hay mensajes"}),o.length>0&&o.map((function(e,t){return(0,xr.jsx)("div",{style:{width:"100%",padding:10},children:(0,xr.jsxs)("div",{style:{borderRadius:20,backgroundColor:"#BE2E26",color:"#FFF",padding:10},children:[(0,xr.jsx)("p",{style:{fontSize:18},children:(0,xr.jsx)("strong",{children:e.name})}),(0,xr.jsx)("p",{style:{fontSize:20},children:e.message}),(0,xr.jsxs)("p",{style:{fontSize:12},children:["Fecha: ",Jt(e.id)]})]})},t)}))]}),(0,xr.jsx)(dd,{onClick:function(){return n()},style:{position:"absolute",right:10,top:10,boxShadow:"none",backgroundColor:"transparent"},children:(0,xr.jsx)(rl,{style:{color:"#ccc"}})})]})})},gce=(0,E.createContext)(),yce=function(e){var t=(0,E.useState)(!1),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=(0,E.useState)(JSON.parse(localStorage.getItem("user"))||void 0),o=(0,U.Z)(i,2),s=o[0],u=o[1],l=(0,E.useState)(!1),c=(0,U.Z)(l,2),d=c[0],h=c[1],p=(0,E.useState)([]),f=(0,U.Z)(p,2),m=f[0],v=f[1],g=(0,E.useState)(),y=(0,U.Z)(g,2),b=y[0],x=y[1],w=(0,E.useState)(!1),k=(0,U.Z)(w,2),S=k[0],T=k[1],C=(0,E.useState)(!1),_=(0,U.Z)(C,2),M=_[0],I=_[1],N=(0,E.useState)(!1),A=(0,U.Z)(N,2),R=A[0],O=A[1],D=(0,E.useState)(!1),L=(0,U.Z)(D,2),P=L[0],F=L[1],j=(0,E.useState)(),z=(0,U.Z)(j,2),B=z[0],W=z[1],V=(0,E.useState)(!1),Z=(0,U.Z)(V,2),H=Z[0],G=Z[1],q=Be();(0,E.useEffect)((function(){console.log(Boolean(window.localStorage.getItem("isauthenticated"))),"true"===window.localStorage.getItem("isauthenticated")&&a(!0)}),[]),(0,E.useEffect)((function(){r&&(Notification.requestPermission().then((function(e){})),s||Y())}),[r]),(0,E.useEffect)((function(){s?((!s.sign||s.sign.length<1)&&setTimeout((function(){G(!0)}),500),s.roles.length>0&&s.roles.map((function(e){"admin"===e||"superAdmin"===e?(localStorage.setItem("isAdmin",!0),h(!0)):"inspectionWorker"===e||"maintenceOperator"===e?(localStorage.setItem("isOperator",!0),T(!0)):"sapExecutive"===e?(localStorage.setItem("isSapExecutive",!0),I(!0)):"shiftManager"===e?(localStorage.setItem("isShiftManager",!0),O(!0)):"chiefMachinery"===e?(localStorage.setItem("isChiefMachinery",!0),F(!0)):(localStorage.setItem("isAdmin",!1),h(!1))}))):Y()}),[s]),(0,E.useEffect)((function(){s&&s.obras.length>0&&(x(s.obras[0]),window.localStorage.setItem("sitio",JSON.stringify(s.obras[0])))}),[s]);var X=function(){var e=Jn(Kn().mark((function e(t){var n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr.initDb();case 2:return n=e.sent,r=n.database,e.next=6,pr.actualizar(t,r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Jn(Kn().mark((function e(){var t,n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("obteniendo datos de usuario desde base de datos"),e.next=3,pr.initDb();case 3:return t=e.sent,n=t.database,e.next=7,pr.consultar(n);case 7:r=e.sent,u(r[0]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K={userData:s,isAuthenticated:r,admin:d,roles:m,site:b,setSite:x,isOperator:S,isSapExecutive:M,isShiftManager:R,isChiefMachinery:P,loginRut:function(e,t){return new Promise((function(n){console.log(e),nn(e,t).then(function(){var e=Jn(Kn().mark((function e(t){var r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),r=t.data,t.data.enabled?(v(r.roles),u(r),localStorage.setItem("user",JSON.stringify(r)),r.role&&r.role.length>0&&("admin"===r.role||"superAdmin"===r.role?(localStorage.setItem("isAdmin",!0),h(!0)):(localStorage.setItem("isAdmin",!1),h(!1))),localStorage.setItem("isauthenticated",!0),n({state:!0,response:t}),a(!0)):"usuario no encontrado"===t.data.message?(localStorage.setItem("isauthenticated",!1),a(!1),alert("Usuario no encontrado."),n({state:!1})):(localStorage.setItem("isauthenticated",!1),a(!1),alert("Su cuenta no est\xe1 habilitada, debe confirmarla."),n({state:!1}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){localStorage.setItem("isauthenticated",!1),alert(JSON.stringify(e).includes("400")?"Contrase\xf1a incorrecta":"Error de autenticaci\xf3n: "+e),a(!1)}))}))},login:function(e,t){return new Promise((function(n){tn(e,t).then(function(){var e=Jn(Kn().mark((function e(t){var r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),r=t.data,t.data.enabled?(v(r.roles),u(r),localStorage.setItem("user",JSON.stringify(r)),r.role&&r.role.length>0&&("admin"===r.role||"superAdmin"===r.role?(localStorage.setItem("isAdmin",!0),h(!0)):(localStorage.setItem("isAdmin",!1),h(!1))),localStorage.setItem("isauthenticated",!0),n({state:!0,response:t}),a(!0)):"usuario no encontrado"===t.data.message?(localStorage.setItem("isauthenticated",!1),a(!1),alert("Usuario no encontrado."),n({state:!1})):(localStorage.setItem("isauthenticated",!1),a(!1),alert("Su cuenta no est\xe1 habilitada, debe confirmarla."),n({state:!1}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){localStorage.setItem("isauthenticated",!1),alert(JSON.stringify(e).includes("400")?"Contrase\xf1a incorrecta":"Error de autenticaci\xf3n: "+e),a(!1)}))}))},logout:function(){confirm("Confirme salida de la aplicaci\xf3n. Para volver a iniciar sesi\xf3n requiere contar con internet para validar las credenciales.")&&(window.localStorage.clear(),q("/",{replace:!0}),a(!1))}};return(0,xr.jsxs)(xr.Fragment,{children:[(0,xr.jsx)(gce.Provider,br({value:K},e)),(0,xr.jsx)(pce,{openSign:H,setRefCanvasFunction:function(e){W(e)},getImage:function(){hn({sign:B.toDataURL()},s._id).then(Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=s).sign=B.toDataURL(),u(t),X(t),localStorage.setItem("user",JSON.stringify(t)),G(!1),alert("Muchas gracias. Su firma ha sido actualizada.");case 7:case"end":return e.stop()}}),e)}))))},clear:function(){B.clear()}})]})},bce=function(){return(0,E.useContext)(gce)},xce={en:JSON.parse('{"login":{"rutField":"Rut","emailField":"E-mail","passwordField":"Password","loginButton":"Login","forgotPasswordText":"Forgot password.","forgotPasswordLink":"Click here."},"restorePassword":{"passwordField":"Password","confirmPasswordField":"Confirm Password","button":"Change Password","cancel":"Cancel"},"welcome":{"inspectionButton":"Inspection","assignmentButton":"Assignment","machinesButton":"M\xe1quinas","maintenanceButton":"Maintenance","reportsButton":"Reports","configurationButton":"Configuration"},"machines":{"title":"Select machine type"},"location":{"start":"Start","inspection":"Inspection","maintenance":"Maintenance","reports":"Reports","configuration":"Configuration"},"components":{"fields":{"filter":"Search"}}}'),es:JSON.parse('{"login":{"rutField":"Rut","emailField":"E-mail","passwordField":"Contrase\xf1a","loginButton":"Ingresar","forgotPasswordText":"Olvid\xe9 mi contrase\xf1a.","forgotPasswordLink":"Click aqu\xed."},"restorePassword":{"passwordField":"Ingrese Contrase\xf1a","confirmPasswordField":"Confirme Contrase\xf1a","button":"Cambiar contrase\xf1a","cancel":"Cancelar"},"welcome":{"inspectionButton":"Inspecci\xf3n","assignmentButton":"Asignaciones","machinesButton":"M\xe1quinas","maintenanceButton":"Mantenci\xf3n","reportsButton":"Reportes","configurationButton":"Configuraci\xf3n","administrationButton":"Administraci\xf3n"},"admin":{"adminUsersButton":"Usuarios"},"roles":{"rolesUsersButton":"Roles"},"patterns":{"patternsButton":"Pautas"},"machines":{"title":"Selecciona tipo de m\xe1quina"},"location":{"start":"Inicio","inspection":"Inspecci\xf3n","maintenance":"Mantenci\xf3n","reports":"Reportes","configuration":"Configuraci\xf3n"},"components":{"fields":{"filter":"Buscar"}}}')},wce={en:"English",es:"Espa\xf1ol"},kce=(0,E.createContext)({userLanguage:"es",dictionary:xce.es,languageOptions:wce}),Sce=function(e){var t=window.localStorage.getItem("rcml-lang"),n=(0,E.useState)(t||"es"),r=(0,U.Z)(n,2),a=r[0],i=r[1],o={userLanguage:a,dictionary:xce[a],languageOptions:wce,userLanguageChange:function(e){var t=wce[e]?e:"es";i(t),window.localStorage.setItem("rcml-lang",t)}};return(0,xr.jsx)(kce.Provider,br({value:o},e))},Ece=function(){return(0,E.useContext)(kce)},Tce=(0,E.createContext)(),Cce=function(e){var t=(0,E.useState)(!1),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=(0,E.useState)(""),o=(0,U.Z)(i,2),s=o[0],u=o[1],l=je();(0,E.useEffect)((function(){var e,t=null===l||void 0===l||null===(e=l.pathname)||void 0===e?void 0:e.split("/")[1];u(t)}),[l]);var c={locationData:s,navBarOpen:r,handleNavBar:function(){return a(!r)}};return(0,xr.jsx)(Tce.Provider,br({value:c},e))},_ce=function(){return(0,E.useContext)(Tce)},Mce=(0,E.createContext)(),Ice=function(e){var t=(0,E.useState)(!0),n=(0,U.Z)(t,2),r=n[0],a=n[1];(0,E.useEffect)((function(){window.addEventListener("online",(function(){a(!0)})),window.addEventListener("offline",(function(){a(!1)}))}),[]),(0,E.useEffect)((function(){console.log("Network: ",r)}),[r]);var i={isOnline:r};return(0,xr.jsx)(Mce.Provider,br({value:i},e))},Nce=function(){return(0,E.useContext)(Mce)},Ace=(0,E.createContext)(),Rce=function(e){var t=Nce().isOnline,n=bce(),r=n.admin,a=n.isSapExecutive,i=n.isShiftManager,o=n.isChiefMachinery,s=(n.roles,n.site),u=n.isOperator,l=n.isAuthenticated,c=n.userData,d=(0,E.useState)([]),h=(0,U.Z)(d,2),p=h[0],f=h[1],m=(0,E.useState)([]),v=(0,U.Z)(m,2),g=v[0],y=v[1],b=(0,E.useState)([]),x=(0,U.Z)(b,2),w=x[0],k=x[1],S=(0,E.useState)([]),T=(0,U.Z)(S,2),C=T[0],M=T[1],I=(0,E.useState)([]),N=(0,U.Z)(I,2),A=N[0],R=N[1],O=(0,E.useState)([]),D=(0,U.Z)(O,2),L=D[0],P=D[1],F=(0,E.useState)(!1),j=(0,U.Z)(F,2),z=j[0],B=j[1],W=(0,E.useState)([]),V=(0,U.Z)(W,2),Z=V[0],H=V[1],G=(0,E.useState)([]),q=(0,U.Z)(G,2),X=q[0],Y=q[1],K=(0,E.useState)("Descargando reportes"),Q=(0,U.Z)(K,2),J=Q[0],$=Q[1],ee=(0,E.useState)(!1),te=(0,U.Z)(ee,2),ne=te[0],re=te[1],ae=(0,E.useState)(!0),ie=(0,U.Z)(ae,2),oe=ie[0],se=ie[1],ue=(0,E.useState)(),le=(0,U.Z)(ue,2),ce=le[0],de=(le[1],Be());(0,E.useEffect)((function(){(Z||X)&&$("")}),[Z,X]),(0,E.useEffect)((function(){if(ce){var e=(0,_.Z)(p),t=null;e.forEach((function(n,r){n._id===ce._id&&(t=r),r===e.length-1&&(null===t?(console.log("Agregando Reporte"),e.push(ce)):(console.log("Cambiando Reporte"),e[t]=ce),console.log(e),f(e))}))}}),[ce]),(0,E.useEffect)((function(){c&&l&&pe()}),[c,t,l]);var he=function(e){console.log(e),Se()},pe=function(){var e=Jn(Kn().mark((function e(){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mc(c,he),fc(c,fe);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(e){console.log(e),SK()({icon:wK,title:e.title,subtitle:e.subtitle,message:e.message,theme:"red",native:!0}),e.report&&Se()};(0,E.useEffect)((function(){p.length>0?(console.log("Guardando reporte"),console.log(oe),oe?(xe(),se(!1)):R(L),y(p)):l&&(console.log("Guardando reporte"),$("Descargando recursos"),be(),y([]))}),[p,l]),(0,E.useEffect)((function(){t||se(!0)}),[t]),(0,E.useEffect)((function(){A.length>0&&($("Guardando pautas"),ye())}),[A]);var me=function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $("Guardando reportes"),n=(0,_.Z)(p),e.next=4,bn(t);case 4:r=e.sent,console.log(r),a=r.data,i=n.find((function(e,t){if(e._id===a._id)return t})),n[i]=a,f(n),console.log("reporte asignado"),alert("reporte asignado"),B(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Jn(Kn().mark((function e(t,n){var r,a,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n(!0),r=(0,_.Z)(p),e.next=5,gn(t);case 5:a=e.sent,i=a.data,r.push(i),f(r),alert("Reporte ".concat(i.idIndex,", para m\xe1quina modelo ").concat(i.machine," creado satisfactoriamente.")),n(!1),de("/reports",{replace:!0});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ge=function(){var e=Jn(Kn().mark((function e(t){var n,r,a,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $("Guardando reportes"),n=(0,_.Z)(p),e.next=4,bn(t);case 4:r=e.sent,console.log(r),a=r.data,i=n.find((function(e,t){if(e._id===a._id)return t})),n[i]=a,f(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Jn(Kn().mark((function e(){var t,n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.initDbPMs();case 2:t=e.sent,n=t.database,A.forEach(function(){var e=Jn(Kn().mark((function e(t,r){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.actualizar(t,n);case 2:r===A.length-1&&$("");case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Jn(Kn().mark((function e(){var t,n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $("Descargando recursos"),e.next=3,rr();case 3:return t=e.sent,n=t.database,e.next=7,or(n);case 7:(r=e.sent).length>0?f(r):$("");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,E.useEffect)((function(){if($("Guardando asignaciones"),A.length>0)if(g.length>0)if(i){var e=[],t=[];g.forEach((function(n,r){"Pauta de Inspecci\xf3n"===n.guide?n._guide="PI":n._guide=n.guide,1===n.level?(n.isPrioritary=!0,e.push(n)):(n.isPrioritary=!1,t.push(n))})),H(e),Y(t)}else if(o){var n=[],s=[];g.forEach((function(e,t){"Pauta de Inspecci\xf3n"===e.guide?e._guide="PI":e._guide=e.guide,2===e.level?(e.isPrioritary=!0,n.push(e)):(e.isPrioritary=!1,s.push(e))})),H(n),Y(s)}else(u||r||a)&&(g.forEach((function(e,t){"Pauta de Inspecci\xf3n"===e.guide?e._guide="PI":e._guide=e.guide})),Y(g));else H([]),Y([]);we()}),[g,A]),(0,E.useEffect)((function(){l&&s&&($("Descargando reportes"),(r||u||a||i||o)&&c&&Se())}),[r,u,a,i,o,t,l,s,c]);var xe=function(){var e=Jn(Kn().mark((function e(){var t,n,r,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $("Descargando pautas"),e.next=3,qn.initDbPMs();case 3:return t=e.sent,n=t.database,e.next=7,qn.consultar(n);case 7:if(r=e.sent,console.log(r),!(r.length>0)){e.next=14;break}R(r),P(r),e.next=20;break;case 14:return e.next=16,jn();case 16:a=e.sent,console.log("Pautas: ",a.data),R(a.data),P(a.data);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Jn(Kn().mark((function e(){var t,n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $("Actualizando OTs"),e.next=3,rr();case 3:return t=e.sent,n=t.database,g.forEach(function(){var e=Jn(Kn().mark((function e(t,r){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=8,or(n);case 8:e.sent.forEach(function(){var e=Jn(Kn().mark((function e(t){var r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.filter((function(e){if(t.idIndex===e.idIndex)return e})),console.log(r,t.idIndex),0!==r.length){e.next=5;break}return e.next=5,ir(t.idIndex,n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$(""),B(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Jn(Kn().mark((function e(){var t,n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr();case 2:return t=e.sent,n=t.database,e.next=6,or(n);case 6:r=e.sent,f(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Jn(Kn().mark((function e(){var n,l,d,h;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($("Sincronizando reportes"),re(!0),!t){e.next=41;break}if(console.log(u,c),!r){e.next=13;break}return e.next=7,wn();case 7:n=e.sent,console.log(n),f(n.data),re(!1),e.next=39;break;case 13:if(console.log(u,a,i,o),!u||a||i||o){e.next=24;break}return console.log(c._id,s.idobra),e.next=18,Sn(c._id,s.idobra);case 18:l=e.sent,console.log(l.data),f(l.data),re(!1),e.next=39;break;case 24:if(!u||!(a||i||o)){e.next=32;break}return e.next=27,kn(s.idobra);case 27:d=e.sent,f(d.data),re(!1),e.next=39;break;case 32:if(!(a||i||o)){e.next=39;break}return e.next=35,kn(s.idobra);case 35:h=e.sent,console.log("Reportes: ",h.data),f(h.data),re(!1);case 39:e.next=43;break;case 41:ke(),re(!1);case 43:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee={reports:p,setReports:f,assignments:g,listSelected:w,listSelectedCache:C,setListSelected:k,setListSelectedCache:M,loading:z,pautas:A,priorityAssignments:Z,normalAssignments:X,saveReport:me,saveReportToData:ge,getReports:Se,getReportsOffline:function(){ke()},message:J,setMessage:$,statusReports:ne,setStatusReports:re,createReport:ve};return(0,xr.jsx)(xr.Fragment,{children:(0,xr.jsx)(Ace.Provider,br({value:Ee},e))})},Oce=function(){return(0,E.useContext)(Ace)},Dce=(0,E.createContext)(),Lce=function(e){var t=bce(),n=t.isOperator,r=t.userData,a=Nce().isOnline,i=(0,E.useContext)(Ace),o=i.reports,s=i.setMessage,u=(0,E.useState)(),l=(0,U.Z)(u,2),c=l[0],d=l[1],h=(0,E.useState)(),p=(0,U.Z)(h,2),f=p[0],m=p[1],v=(0,E.useState)(),g=(0,U.Z)(v,2),y=g[0],b=g[1],x=(0,E.useState)(),w=(0,U.Z)(x,2),k=w[0],S=w[1],T=(0,E.useState)(),C=(0,U.Z)(T,2),M=C[0],I=C[1],N=(0,E.useState)(),A=(0,U.Z)(N,2),R=A[0],O=A[1],D=(0,E.useState)(!0),L=(0,U.Z)(D,2),P=L[0],F=L[1],j=(0,E.useState)(0),z=(0,U.Z)(j,2),B=z[0],W=z[1],V=(0,E.useState)(0),Z=(0,U.Z)(V,2),H=Z[0],G=Z[1],q=(0,E.useState)(!1),X=(0,U.Z)(q,2),Y=X[0],K=X[1],Q=(0,E.useState)(""),J=(0,U.Z)(Q,2),$=(J[0],J[1]),ee=(0,E.useState)(!0),te=(0,U.Z)(ee,2),ne=te[0],re=te[1],ae=je();(0,E.useEffect)((function(){ae.pathname.includes("assignment/")||(console.log("Borrado"),re(!0),m(void 0),d(void 0),b(void 0),S(void 0),I(void 0),O(void 0),F(!0))}),[ae]),(0,E.useEffect)((function(){f&&ie()}),[f]);var ie=function(){var e=Jn(Kn().mark((function e(){var t,n;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sr();case 2:return t=e.sent,n=t.database,e.next=6,ur(f,n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,E.useEffect)((function(){c&&(console.log(c),b(c._id),S(c.idIndex),I(c.sapId),O(c.machine),F(c.testMode),s("Buscando Pauta"),se()),k&&oe()}),[c,k]),(0,E.useEffect)((function(){console.log(k)}),[k]);var oe=function(){console.log("Obteniendo reporte");var e=o.filter((function(e){if(e.idIndex===Number(k))return e}));console.log(e),d(e[0])},se=function(){var e=Jn(Kn().mark((function e(){var t,i,o,u,l,d,h,p,f,v,g,y,b,x,w,k,S;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Buscando Pauta"),m(void 0),n||!a){e.next=12;break}return e.next=5,Cn(c);case 5:t=e.sent,console.log(t.data),t.data._id?m(t.data):(s("OT no iniciado"),re(!1)),K(!1),setTimeout((function(){s("")}),500),e.next=76;break;case 12:if(!n||!a){e.next=65;break}return e.next=15,sr();case 15:return i=e.sent,o=i.database,e.next=19,lr(o);case 19:if(u=e.sent,!((l=u.filter((function(e){if(e.reportId===c._id)return e}))).length>0)){e.next=28;break}return e.next=24,Cn(c);case 24:d=e.sent,l[0].offLineGuard>d.data.offLineGuard?m(l[0]):m(d.data),e.next=63;break;case 28:return e.next=30,Cn(c);case 30:if(!(h=e.sent).data||!h.data._id){e.next=35;break}m(h.data),e.next=62;break;case 35:if(!n){e.next=60;break}return e.next=38,qn.initDbPMs();case 38:return p=e.sent,s("Guardando pauta de OT "+c.idIndex),e.next=42,qn.consultar(p.database);case 42:return f=e.sent,v=f.filter((function(e){if(e.typepm===c.guide&&c.idPm===e.idpm)return e})),e.next=46,v[0].struct.reduce((function(e,t){return e[t.strpmdesc]=[].concat((0,_.Z)(e[t.strpmdesc]||[]),[t]),e}),{});case 46:return g=e.sent,y={reportId:c._id,createdBy:r._id,group:g,offLineGuard:null},e.next=50,_n(y);case 50:return b=e.sent,console.log("Se guarda reporte ",b),e.next=54,ur(b.data,o);case 54:if(m(b.data),console.log("Se guarda reporte ",b),c.dateInit){e.next=60;break}return c.dateInit=new Date,e.next=60,bn(c);case 60:s("No se logra descargar ejecuci\xf3n de datos."),setTimeout((function(){s("")}),1e3);case 62:setTimeout((function(){s("")}),1e3);case 63:e.next=76;break;case 65:if(!n||a){e.next=76;break}return e.next=68,sr();case 68:return x=e.sent,w=x.database,e.next=72,lr(w);case 72:k=e.sent,(S=k.filter((function(e){if(e.reportId===c._id)return e}))).length>0&&m(S[0]),setTimeout((function(){s("")}),1e3);case 76:s("");case 77:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue={report:c,setReport:d,executionReport:f,setExecutionReport:m,reportId:y,sapId:M,serieEquipo:R,modoTest:P,avanceHoja:B,avanceTotal:H,otIndex:k,setAvanceHoja:W,setAvanceTotal:G,loading:Y,setLoading:K,setOtIndex:S,setLoadingMessage:$,reporteIniciado:ne};return(0,xr.jsx)(xr.Fragment,{children:(0,xr.jsx)(Dce.Provider,br({value:ue},e))})},Pce=function(){return(0,E.useContext)(Dce)},Fce=(0,E.createContext)(),jce=function(e){var t=(0,E.useState)([]),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=(0,E.useState)(!1),o=(0,U.Z)(i,2),s=o[0],u=o[1],l={rut:"",name:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",sites:"",obras:[],roles:[],isTest:!1},c=je(),d=(0,E.useState)({rut:"",name:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",sites:"",obras:[],roles:[],isTest:!1}),h=(0,U.Z)(d,2),p=h[0],f=h[1];(0,E.useEffect)((function(){"/new-users"===c.pathname||f(l)}),[c]),(0,E.useEffect)((function(){if(s){var e=[];console.log(r),r.forEach((function(t){t.selected&&e.push(t.dbName)})),f(br(br({},p),{},{roles:e})),u(!1)}}),[s]);var m={userData:p,setUserData:f,rolesListSelectionCache:r,setRolesListSelectionCache:a,setChangeModule:u};return(0,xr.jsx)(Fce.Provider,br({value:m},e))},zce=(0,E.createContext)(),Bce=function(e){var t=(0,E.useState)(""),n=(0,U.Z)(t,2),r=n[0],a=n[1],i=(0,E.useState)(""),o=(0,U.Z)(i,2),s=o[0],u=o[1];(0,E.useEffect)((function(){a(Kt(Date.now()));var e=setInterval((function(){u(function(e){var t,n=new Date(e).getMinutes(),r=new Date(e).getHours();return t=n<10?"0"+n:n,"".concat(r<10?"0"+r:r,":").concat(t)}(Date.now()))}),100);return function(){return clearInterval(e)}}),[]);var l={date:r,hour:s};return(0,xr.jsx)(zce.Provider,br({value:l},e))},Uce=function(){return(0,E.useContext)(zce)},Wce=(0,E.createContext)(),Vce=function(e){var t=bce(),n=t.isAuthenticated,r=t.site,a=t.admin,i=(0,E.useState)([]),o=(0,U.Z)(i,2),s=o[0],u=o[1],l=(0,E.useState)([]),c=(0,U.Z)(l,2),d=c[0],h=c[1],p=(0,E.useState)(),f=(0,U.Z)(p,2),m=f[0],v=f[1],g=Nce().isOnline;(0,E.useEffect)((function(){n&&(g?w():(console.log("Machines offline"),x()))}),[n,g]),(0,E.useEffect)((function(){s.length>0&&(g?r&&y():b())}),[s,g,r]);var y=function(){var e=Jn(Kn().mark((function e(){var t,n,i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||a){e.next=4;break}return e.next=3,un(r.idobra);case 3:t=e.sent;case 4:if(!a){e.next=8;break}return e.next=7,sn();case 7:t=e.sent;case 8:return e.next=10,nr.initDbMachines();case 10:n=e.sent,i=n.database,t.data.forEach(function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=n,e.next=3,nr.actualizar(t,i);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h(t.data);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Jn(Kn().mark((function e(){var t,n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nr.initDbMachines();case 2:return t=e.sent,n=t.database,e.next=6,nr.consultar(n);case 6:r=e.sent,h(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Jn(Kn().mark((function e(){var t,n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn.initDbMachines();case 2:return t=e.sent,n=t.database,e.next=6,Hn.consultar(n);case 6:r=e.sent,u(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Jn(Kn().mark((function e(){var t,n,r,a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,on();case 2:return t=e.sent,e.next=5,Hn.initDbMachines();case 5:n=e.sent,r=n.database,(a=(0,_.Z)(t.data)).forEach(function(){var e=Jn(Kn().mark((function e(t,n){var a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.id=n,(a=new XMLHttpRequest).onload=Jn(Kn().mark((function e(){var i;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=new FileReader).onload=Jn(Kn().mark((function e(){var a;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:n,data:i.result.replace("data:","")},t.image=a,e.next=4,Hn.actualizar(t,r);case 4:case"end":return e.stop()}}),e)}))),i.readAsDataURL(a.response);case 3:case"end":return e.stop()}}),e)}))),a.open("GET","/assets/".concat(t.model,".png")),a.responseType="blob",a.send();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),u(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k={setMachines:u,machines:s,machinesBySite:d,machineSelected:m,setMachineSelected:v};return(0,xr.jsx)(Wce.Provider,br({value:k},e))},Zce=function(){return(0,E.useContext)(Wce)},Hce=(0,E.createContext)(),Gce=function(e){var t=bce(),n=t.isAuthenticated,r=t.admin,a=t.userData,i=t.site,o=(0,E.useState)([]),s=(0,U.Z)(o,2),u=s[0],l=s[1],c=(0,E.useState)([]),d=(0,U.Z)(c,2),h=d[0],p=d[1],f=(0,E.useState)([]),m=(0,U.Z)(f,2),v=m[0],g=m[1],y=(0,E.useState)([]),b=(0,U.Z)(y,2),x=b[0],w=b[1];(0,E.useEffect)((function(){n&&k()}),[n]),(0,E.useEffect)((function(){if(!r&&u.length>0&&i){var e=u.filter((function(e){if(e.obras[0]&&e.obras[0].idobra===i.idobra)return e}));p(e)}}),[u,i]),(0,E.useEffect)((function(){var e=[],t=[];(r&&u.length>0||h.length>0)&&((r?u:h).forEach((function(n){n.roles.forEach((function(r){"inspectionWorker"===r&&e.push(n),"maintenceOperator"===r&&t.push(n)}))})),console.log(e),g(e),w(t))}),[h,r,u]);var k=function(){var e=Jn(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pn(r,!!a&&a.isTest);case 2:t=e.sent,l(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S={users:u,setUsers:l,getUsers:k,usersFilteredBySite:h,inspectors:v,maitenances:x};return(0,xr.jsx)(Hce.Provider,br({value:S},e))},qce=function(){return(0,E.useContext)(Hce)},Xce=(0,E.createContext)(),Yce=function(e){var t=bce().isAuthenticated,n=Nce().isOnline,r=(0,E.useState)([]),a=(0,U.Z)(r,2),i=a[0],o=a[1],s=(0,E.useState)(),u=(0,U.Z)(s,2),l=u[0],c=u[1];(0,E.useEffect)((function(){t&&(n?d():h())}),[t]);var d=function(){var e=Jn(Kn().mark((function e(){var t,n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bn();case 2:return t=e.sent,e.next=5,Yn.initDbObras();case 5:n=e.sent,r=n.database,t.data.data.forEach(function(){var e=Jn(Kn().mark((function e(t,n){return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=n,e.next=3,Yn.actualizar(t,r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),o(t.data.data);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Jn(Kn().mark((function e(){var t,n,r;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn.initDbObras();case 2:return t=e.sent,n=t.database,e.next=6,Yn.consultar(n);case 6:r=e.sent,o(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p={sites:i,siteSelected:l,setSiteSelected:c};return(0,xr.jsx)(Xce.Provider,br({value:p},e))},Kce=function(){return(0,E.useContext)(Xce)},Qce=Et((function(e){var t=e.networkError;null===t||void 0===t||t.statusCode})),Jce=Ct()({uri:"/graphql",credentials:"include"}),$ce=gt.ApolloLink.from([Qce,Jce]),ede=new yt.f({link:$ce,cache:new bt.h}),tde=function(){Be();var e=bce(),t=e.userData,n=e.loading,r=e.admin,a=e.isOperator,i=e.isSapExecutive,o=e.isShiftManager,s=e.isChiefMachinery,u=e.isAuthenticated;return(0,E.useEffect)((function(){console.log(u),u&&t&&vc(t)}),[u]),(0,xr.jsxs)("div",{style:{fontFamily:"Roboto"},children:[u&&!n&&(0,xr.jsx)(zK,{})," ",u&&!n&&(0,xr.jsx)(TK,{}),(0,xr.jsxs)(at,{children:[!u&&(0,xr.jsx)(nt,{exact:!0,path:"/reset-password",element:(0,xr.jsx)(fse,{})}),!u&&(0,xr.jsx)(nt,{exact:!0,path:"/restore-password/:id",element:(0,xr.jsx)(mse,{})}),(0,xr.jsx)(nt,{path:"/login",element:(0,xr.jsx)(use,{})}),(0,xr.jsx)(nt,{path:"/welcome",element:(0,xr.jsx)(hse,{})}),(0,xr.jsx)(nt,{path:"/",element:(0,xr.jsx)(tt,{to:u?"/welcome":"/login"})}),(0,xr.jsx)(nt,{path:"/internal-messages",element:(r||i)&&(0,xr.jsx)(lue,{route:"internal-messages"})}),(0,xr.jsx)(nt,{exact:!0,path:"/reports",element:(0,xr.jsx)(Wse,{route:"reports"})}),(0,xr.jsx)(nt,{exact:!0,path:"/reports/create-report",element:(0,xr.jsx)(Vse,{route:"reports"})}),(0,xr.jsx)(nt,{exact:!0,path:"/reports/edit-report/:id",element:(0,xr.jsx)(Vse,{route:"reports"})}),(0,xr.jsx)(nt,{exact:!0,path:"/alerts",element:(0,xr.jsx)(Zse,{route:"alerts"})}),(0,xr.jsx)(nt,{exact:!0,path:"/user-profile",element:(0,xr.jsx)(Jse,{route:"user-profile"})}),(0,xr.jsx)(nt,{exact:!0,path:"/info",element:(0,xr.jsx)(Hse,{route:"info"})}),(0,xr.jsx)(nt,{exact:!0,path:"/machines",element:(0,xr.jsx)(ase,{route:"machines"})}),(0,xr.jsx)(nt,{exact:!0,path:"/machines/:id",element:(0,xr.jsx)(ose,{route:"machines"})}),(0,xr.jsx)(nt,{exact:!0,path:"/machines/:el/machine-detail/:id",element:(0,xr.jsx)(ese,{route:"machines/machine-detail"})}),!a&&(0,xr.jsx)(nt,{exact:!0,path:"/maintenance",element:(0,xr.jsx)(rue,{route:"maintenance"})}),(i||r||"superAdmin"===localStorage.getItem("role"))&&(0,xr.jsx)(nt,{exact:!0,path:"/sites",element:(0,xr.jsx)(qse,{route:"sites"})}),!i&&(0,xr.jsx)(nt,{exact:!0,path:"/sites",element:(0,xr.jsx)(rue,{route:"sites"})}),(0,xr.jsx)(nt,{exact:!0,path:"/maintance",element:(0,xr.jsx)(vse,{route:"maintance"})}),(0,xr.jsx)(nt,{exact:!0,path:"/configuration",element:(0,xr.jsx)(Gse,{route:"configuration"})}),(0,xr.jsx)(nt,{exact:!0,path:"/options",element:(0,xr.jsx)(due,{route:"options"})}),(0,xr.jsx)(nt,{exact:!0,path:"/pauta-detail/:id",element:(0,xr.jsx)(nue,{route:"pauta-detail"})}),(0,xr.jsx)(nt,{exact:!0,path:"/administration",element:r?(0,xr.jsx)(Xse,{route:"administration"}):(0,xr.jsx)(rue,{route:"administration"})}),(i||r||"sapExecutive"===localStorage.getItem("role")||"superAdmin"===localStorage.getItem("role"))&&(0,xr.jsx)(nt,{exact:!0,path:"/users",element:(0,xr.jsx)(Yse,{route:"users"})}),(a||o||s||"admin"!==localStorage.getItem("role")||"sapExecutive"!==localStorage.getItem("role")||"superAdmin"!==localStorage.getItem("role"))&&(0,xr.jsx)(nt,{exact:!0,path:"/users",element:(0,xr.jsx)(rue,{route:"users"})}),(i||r||"sapExecutive"===localStorage.getItem("role")||"superAdmin"===localStorage.getItem("role"))&&(0,xr.jsx)(nt,{exact:!0,path:"/new-users",element:(0,xr.jsx)(Qse,{route:"new-users"})}),(a||o||s||"admin"!==localStorage.getItem("role")||"sapExecutive"!==localStorage.getItem("role")||"superAdmin"!==localStorage.getItem("role"))&&(0,xr.jsx)(nt,{exact:!0,path:"/new-users",element:(0,xr.jsx)(rue,{route:"new-users"})}),(r||"superAdmin"===localStorage.getItem("role"))&&(0,xr.jsx)(nt,{exact:!0,path:"/roles",element:(0,xr.jsx)($se,{route:"roles"})}),(0,xr.jsx)(nt,{exact:!0,path:"/patterns",element:(0,xr.jsx)(tue,{route:"roles"})}),(0,xr.jsx)(nt,{exact:!0,path:"/edit-user/:id",element:(0,xr.jsx)(Qse,{route:"edit-user"})}),(0,xr.jsx)(nt,{path:"/assignment/:id",element:(0,xr.jsx)(uue,{route:"assignment"})}),(0,xr.jsx)(nt,{exact:!0,path:"/assignment",element:(0,xr.jsx)(aue,{route:"assignment"})}),(0,xr.jsx)(nt,{exact:!0,path:"/notifications",element:(0,xr.jsx)(cue,{route:"notifications"})})]})]})},nde=function(){return(0,xr.jsxs)(dt,{children:[(0,xr.jsx)(kK.Notifications,{}),(0,xr.jsx)(gt.ApolloProvider,{client:ede,children:(0,xr.jsx)(Ice,{children:(0,xr.jsx)(yce,{children:(0,xr.jsx)(cse,{children:(0,xr.jsx)(Yce,{children:(0,xr.jsx)(Sce,{children:(0,xr.jsx)(Cce,{children:(0,xr.jsx)(Gce,{children:(0,xr.jsx)(Rce,{children:(0,xr.jsx)(Lce,{children:(0,xr.jsx)(jce,{children:(0,xr.jsx)(Bce,{children:(0,xr.jsx)(Vce,{children:(0,xr.jsxs)(At,{theme:Wt,children:[(0,xr.jsx)(Lt,{}),(0,xr.jsx)(tde,{})]})})})})})})})})})})})})})})]})},rde=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ade(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ide=function(e){e&&e instanceof Function&&n.e(377).then(n.bind(n,9377)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))},ode=document.getElementById("root");(0,C.s)(ode).render((0,xr.jsx)(E.StrictMode,{children:(0,xr.jsx)(nde,{})})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");rde?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ade(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ade(t,e)}))}}({onUpdate:function(e){var t=e.waiting;t&&(t.addEventListener("statechange",(function(e){"activated"===e.target.state&&window.location.reload()})),t.postMessage({type:"SKIP_WAITING"}))}}),ide()}()}();
//# sourceMappingURL=main.b92f8670.js.map